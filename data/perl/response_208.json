[{"tags": ["perl", "smtp-auth"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 6, "last_activity_date": 1546511498, "last_edit_date": 1546511498, "creation_date": 1546497980, "answer_id": 54017517, "question_id": 54014604, "link": "https://stackoverflow.com/questions/54014604/how-to-send-an-email-attachment-using-netsmtptls/54017517#54017517", "title": "How to Send an Email Attachment using Net::SMTP::TLS", "body": "<blockquote>\n  <p>... the only module I've found which can achieve this is Net::SMTP::TLS</p>\n</blockquote>\n\n<p>The core module <a href=\"https://metacpan.org/pod/Net::SMTP\" rel=\"nofollow noreferrer\">Net::SMTP</a> has support for both explicit TLS (using the <code>STARTTLS</code> command, this is what <code>Net::SMTP::TLS</code> is doing) and implicit TLS (TLS from start) since several years and there should be no need to use a module which was abandoned more than 10 years ago. The use of <code>Net::SMTP</code> is almost the same:</p>\n\n<pre><code>  use Net::SMTP;\n  my $smtp = Net::SMTP-&gt;new(mailhost, ... ; \n  $smtp-&gt;starttls(); # make sure to install IO::Socket::SSL\n  $smtp-&gt;auth(username, password); # make sure to install Authen::SASL\n  $smtp-&gt;mail(...);\n  $smtp-&gt;to(...);\n  ...\n</code></pre>\n\n<p>Anyway, your main problem seems to be to construct a mail with attachments which you then could send via <code>$smtp-&gt;data(mail)</code> (or with <code>data</code>, <code>datasend</code>, <code>dataend</code>). So far you've tried to construct this mail by hand and failed since you don't have any idea how this should really be done. </p>\n\n<p>If you really insist on doing this by hand I recommend you to do study the relevant standards, notably <a href=\"https://tools.ietf.org/html/rfc2045\" rel=\"nofollow noreferrer\">RFC 2045</a> and <a href=\"https://tools.ietf.org/html/rfc2046\" rel=\"nofollow noreferrer\">RFC 2046</a> which describe both the encoding of a binary attachment and how to put this encoded attachment then as attachment in a structured mail.</p>\n\n<p>But given that the standard is far from simple and that it is easy to construct standard-contradicting mails which work with the tested mail clients but fail to work later with other mail clients, it would be much better to use a library instead creating your own and probably wrong idea of a MIME mail. The discussion from 2001 you refer to even points out that using something like <a href=\"https://metacpan.org/pod/MIME::Lite\" rel=\"nofollow noreferrer\">MIME::Lite</a> would be a better idea than trying to MIME encode by hand.</p>\n\n<p>How to create a mail with attachments with MIME::Lite is <a href=\"https://metacpan.org/pod/MIME::Lite#SYNOPSIS\" rel=\"nofollow noreferrer\">clearly described in the documentation</a>, just follow the example there. The main difference to the example is that you want to send the mail your own way which can be achieved with <code>as_string</code>:</p>\n\n<pre><code>use MIME::Lite;\nuse Net::SMTP;\n\n# create MIME::Lite object as documented\nmy $msg = MIME::Lite-&gt;new(...);\n$msg-&gt;attach(...);\n\n# create object, authenticate, set to,from.. in SMTP dialog\nmy $smtp = Net::SMTP-&gt;new(...);\n$smtp-&gt;starttls(...);\n$smtp-&gt;auth(...); \n$smtp-&gt;mail(...);\n$smtp-&gt;to(...);\n\n# send created mail\n$smtp-&gt;data($msg-&gt;as_string);\n$smtp-&gt;quit;\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 10860160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f81283a141a829c23860288176a098ec?s=128&d=identicon&r=PG&f=1", "display_name": "Doctor Kill", "link": "https://stackoverflow.com/users/10860160/doctor-kill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 54017517, "answer_count": 1, "score": 2, "last_activity_date": 1546511498, "creation_date": 1546472366, "last_edit_date": 1546472750, "question_id": 54014604, "link": "https://stackoverflow.com/questions/54014604/how-to-send-an-email-attachment-using-netsmtptls", "title": "How to Send an Email Attachment using Net::SMTP::TLS", "body": "<p>I need to connect to a Microsoft Exchange server, and the only module I've found which can achieve this is Net::SMTP::TLS. I'm able to send the emails, however, I'm unable to understand the way it wants me to attach a file. Unlike MIME::Lite, it doesn't simply attach the file and send. It looks like it's expecting me to write to the attachment after having attached it to the email.</p>\n\n<p><strong>Q: Is there not some way I can just attach the file? Should I be using some other module to work with Microsoft Exchange?</strong></p>\n\n<p>Please see my code below, as well as the link to an <a href=\"https://arstechnica.com/civis/viewtopic.php?t=295007\" rel=\"nofollow noreferrer\">Ars Technica discussion</a> on this topic. This code seems to put what is supposed to be the body of the email into the attached file.</p>\n\n<pre><code>        $smtp-&gt;mail($from_email);\n        $smtp-&gt;to(@to_email_arr);\n        $smtp-&gt;cc(@cc_email_arr);\n        $smtp-&gt;data;\n        $smtp-&gt;datasend(\"Subject: $subject\\n\");\n        $smtp-&gt;datasend(\"To: $to_email\\n\");\n        $smtp-&gt;datasend(\"CC: $cc_email\\n\");\n        $smtp-&gt;datasend(\"From: $from_email\\n\");\n\n        $smtp-&gt;datasend(\"MIME-Version: 1.0\\n\");\n        $smtp-&gt;datasend(\"Content-Disposition: attachment; filename=\\\"$filename\\\"n\");\n        $smtp-&gt;datasend(\"Content-Type: application/text; name=attachment.txt \");\n        $smtp-&gt;datasend();\n\n        $smtp-&gt;datasend($body_msg);\n\n        $smtp-&gt;dataend;\n        $smtp-&gt;quit;\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "handle"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1546465762, "post_id": 54012999, "comment_id": 94864236, "body": "What is the purpose of this?  The docs all but tell us not to use this, warn of deadlocks, and have a particular mention of precisely <code>cat</code> with regards to buffering.  I&#39;d suggest  <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>  or the simpler <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546466159, "post_id": 54012999, "comment_id": 94864408, "body": "Threads are just fine, if you know what you are doing. In Perl they come with a handful of gotchas but it&#39;s an advanced topic in any language or tool.  There are frameworks of various kinds which provide async capabilities, but then you have to learn how to use those."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546466470, "post_id": 54012999, "comment_id": 94864531, "body": "Why are you printing so much without reading?  If the purpose is to pass a lot of data, there are better ways; it has to block if there&#39;s no reading. If you wish to feed a process and read from it, the linked modules are far nicer for that."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1546471483, "post_id": 54012999, "comment_id": 94866084, "body": "You might be able to use select to choose wether to read or write at a particular time. My best results with open2 are in using it with things that read their entire input before producing any output, or line of input, line of output."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546510254, "post_id": 54012999, "comment_id": 94876289, "body": "@zdim, @ikegami: Thanks to mention the IPC::Run, I was not aware of it. It seems to me that it conveniently addresses some scenarios (e.g. their samba example simulating the interaction with a user) but in general it will have the same problem as the popen2. Let&#39;s say that instead of the <code>cat</code>(which is obviously just for a sake of the example) I have some archiving/encryption/compression/encoding utility. I don&#39;t now how many characters it will produce or how the output will end and so I can&#39;t use <code>pump $h until something in the output</code>."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546510580, "post_id": 54012999, "comment_id": 94876453, "body": "@Shawn: I want a reliable code that will always work. Reading one line here, other there will not work with any process and even the one where it works may surprise one day."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546511041, "post_id": 54012999, "comment_id": 94876696, "body": "@Shawn, ikegami: Thanks for the select tip. I will try to experiment with that later. After first reading of the docs it is not clear to me how to use it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1546590474, "post_id": 54012999, "comment_id": 94906096, "body": "@David L., None of what you said makes any sense. If you can do it with <code>select</code>, you can do it a million times simpler using IPC::Run. As far as I can tell, you simply need <code>run [ &#39;utility&#39;], \\$to_send, \\my $received;</code>. Use sub refs instead of scalar refs if your needs are more complicated."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1546647695, "post_id": 54012999, "comment_id": 94931044, "body": "@DavidL. Great edit! I wish I can +1 again :)  But, as for that closing comment: It is possible to do what you seem to want (start an external program and repeatedly make it pass a lot of data?) -- can roll it all up with &quot;primitives&quot; (pipes, select/signals).  And it can be done with <code>open2</code> as well ... but these are inferior approaches, since you&#39;d be doing <i>everything</i> by hand, while there are well established modules that already have all that.  So, for learning it&#39;s probably great to go through it; in any other sense, the answer <i>is</i>: don&#39;t; use ready solutions. My 2c."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546647711, "post_id": 54012999, "comment_id": 94931048, "body": "@DavidL. As for &quot;<i>close the file handle from a different thread</i>&quot; -- brrr, don&#39;t want that. Specially with threads which share many resources. There are ways to signal to a thread/fork what it should do (but then that&#39;s specific to threads/forks)."}], "answers": [{"comments": [{"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546512023, "post_id": 54015957, "comment_id": 94877233, "body": "Thanks for the select tip. I think that eventually I found the right docs: <code>https:&#47;&#47;perldoc.perl.org&#47;IO&#47;Select.html</code> So with the <code>can_read</code>/<code>can_write(timeout)</code> I can implement some polling. Well, with that it is doable even in a single thread but I don&#39;t consider it to be a proper solution. Depending on the particular process and timeout it may slow down the system (either with a lot of polling or slow communication with the process)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 1, "creation_date": 1546512096, "post_id": 54015957, "comment_id": 94877266, "body": "What? no! Don&#39;t poll.You&#39;re making me cry! Use <code>select</code> (from the same module), not <code>can_read</code> or <code>can_write</code>. Wait, what I am I saying. <b>Use IPC::Run!!</b>"}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546669893, "post_id": 54015957, "comment_id": 94934084, "body": "As this is the only answer, so I select it as &quot;accepted&quot;, because the topic was probably exhausted, especially in all the comments. Learning about the IPC::Run was certainly a great outcome. During the past 2 days I changed a lot of code to it and it became much more readable!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546684053, "post_id": 54015957, "comment_id": 94936565, "body": "The code you added to your question doesn&#39;t work at all. See the code I&#39;ve added to my answer."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546702114, "post_id": 54015957, "comment_id": 94941084, "body": "Well, it runs after adding <code>use 5.26.0;</code> or replace the <code>say</code> with <code>print $cnt++.&#39;\\n&#39;</code>. Unless you use Windows, there I had quite serious problems even with basic stdin/stdout functionality. Now I&#39;ve tested it on a clean installation of Ubuntu 18.10, without installing any additional libraries or cpan modules."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546702404, "post_id": 54015957, "comment_id": 94941168, "body": "In the code that you added it is the <code>cat</code> process that does the output, so it does not demonstrate further processing of the output in the perl script. But I feel that now we are moving definitely away from the original topic."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546702892, "post_id": 54015957, "comment_id": 94941299, "body": "Anyway, thanks for your example, so <code>run</code> apparently calls the sub repeatedly as long as it returns true so that it is not necessary to have the <code>while</code>. Nice."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546703692, "post_id": 54015957, "comment_id": 94941528, "body": "Btw, just observation: when I execute my code and run <code>top</code> so I can see that the <code>run</code> apparently forked the <code>perl</code> process and so the two subs are running in parallel, consuming a low amount of memory, as the data are continuously being processed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1546705017, "post_id": 54015957, "comment_id": 94941904, "body": "Same with what I posted, minus all the extra processes."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1546684035, "last_edit_date": 1546684035, "creation_date": 1546486111, "answer_id": 54015957, "question_id": 54012999, "link": "https://stackoverflow.com/questions/54012999/perl-close-open2-handle-from-a-background-thread/54015957#54015957", "title": "Perl: close open2 handle from a background thread", "body": "<ol>\n<li>Your program stopped because the pipe to which it was writing became full.</li>\n<li>The pipe to <code>cat</code> became full because <code>cat</code> stopped reading from it.</li>\n<li><code>cat</code> stopped because the pipe to which it was writing became full.</li>\n<li>The pipe from <code>cat</code> became full because you program isn't reading from it.</li>\n</ol>\n\n<p>So you have two programs waiting for each other to do something. This is a deadlock.</p>\n\n<p>The low-level solution is to use <code>select</code> to monitor both ends of the pipe.</p>\n\n<p>The high-level solution is to let <a href=\"http://search.cpan.org/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> or <a href=\"http://search.cpan.org/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a> do that hard work for you.</p>\n\n<pre><code>use IPC::Run qw( run );\n\nmy $cnt_max = 100000;\nmy $cnt = 0;\nrun [ \"cat\" ],\n   '&lt;', sub { $cnt &lt; $cnt_max ? $cnt++ . \"\\n\" : undef };\n</code></pre>\n"}], "owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "accepted_answer_id": 54015957, "answer_count": 1, "score": 3, "last_activity_date": 1559093192, "creation_date": 1546462189, "last_edit_date": 1559093192, "question_id": 54012999, "link": "https://stackoverflow.com/questions/54012999/perl-close-open2-handle-from-a-background-thread", "title": "Perl: close open2 handle from a background thread", "body": "<p>I am simply trying to find out how to properly use the <code>open2</code> function.</p>\n\n<p>See an example below. It works for a small <code>$max</code>, but naturally, if I write long enough to the <code>$hIn</code>, so eventually it will get blocked because nothing reads the data on the output continuously.</p>\n\n<pre><code>use 5.26.0;\nuse IPC::Open2;\nmy $max = 100000;\nmy $pid = open2(my $hOut, my $hIn, \"cat\") || die \"failed 'cat': $!\";\n{\n    my $cnt = 0;\n    #When $max is big (e.g. 100000) so the code below will get blocked\n    #when writing to $hIn\n    while ($cnt&lt;$max) {say $hIn $cnt++;}\n    close($hIn) || say \"can't close hIn\";\n}\nwhile(&lt;$hOut&gt;) { print; }\nclose($hOut) || say \"can't close hOut\";\nwaitpid( $pid, 0 );\n</code></pre>\n\n<p>The only solution, that I can think about, is launching an other thread that will do the writing on the background.</p>\n\n<p>With the code below I can write into the <code>$hIn</code> as much data as I want and read them in the main thread but the <code>$hIn</code> seems not to get closed. Because of that the <code>while(&lt;$hOut&gt;)</code> will never finish while waiting for more output.</p>\n\n<pre><code>use 5.26.0;\nuse threads;\nuse IPC::Open2;\nmy $max = 100000;\nmy $pid = open2(my $hOut, my $hIn, \"cat\") || die \"failed 'cat': $!\";\nmy $thr = threads-&gt;create(sub {\n    my $cnt = 0;\n    while ($cnt&lt;$max) {say $hIn $cnt++;}\n    #The close does not have any effect here (although no error is produced)\n    close($hIn) || say \"can't close hIn\";\n});\n#This outputs all the data written to $hIn but never leaves the loop...\nwhile(&lt;$hOut&gt; ) { print; }\nclose($hOut) || say \"can't close hOut\";\n$thr-&gt;join;\nwaitpid( $pid, 0 );\n</code></pre>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Provided that my approach with threads is ok, how can I close the file handle from the background thread?</li>\n<li>If it is not ok (actually <code>use threads</code> is discouraged in Perl), so can someone provide a working example of open2 that can write and read a lot of data without a risk of getting blocked waiting for the reader or writer?</li>\n</ul>\n\n<hr>\n\n<p>EDIT: Following your suggestions here is an implementation of the code above using IPC::Run:</p>\n\n<pre><code>use 5.26.0;\nuse IPC::Run qw/ run /;\nmy $max = 1000000;\nrun sub {\n        my $cnt = 0;\n        while ($cnt&lt;$max) {say $cnt++;}\n    },\n    \"|\", \"cat\",\n    \"|\", sub {\n        while(&lt;&gt; ) {\n            print;\n        }\n    }\n    or die \"run sub | cat | sub failed: $?\";\n</code></pre>\n\n<p>It runs without flaws, the code is very readable... I am very happy to have learned about this module. Thanks to everyone!</p>\n\n<p>Yet, I consider the question to be unanswered. If it is not possible to write this functionality using <code>open2</code> directly, why does that even exist and confuse people? Also not being able to close the file handle from a different thread looks like a bug to me (certainly it is - the close should at least report an error).</p>\n"}, {"tags": ["perl", "language-lawyer", "boolean-expression", "truthiness"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546461770, "post_id": 54011319, "comment_id": 94862663, "body": "This is the best researched question that I can recall seeing."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546461794, "post_id": 54011319, "comment_id": 94862676, "body": "@zdim Thanks for your answer, and for the compliment!"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1560358580, "last_edit_date": 1560358580, "creation_date": 1546461398, "answer_id": 54012833, "question_id": 54011319, "link": "https://stackoverflow.com/questions/54011319/is-the-truthiness-of-a-dualvar-always-that-of-its-string-part/54012833#54012833", "title": "Is the truthiness of a dualvar always that of its string part?", "body": "<p>This boils down to how a scalar is tested in the Boolean context, as string or numeric? </p>\n\n<p>In Perl the documentation is the closest thing to a standard. So if there is no statement in docs then the formal answer must be: No, it is not \"<em>guaranteed behaviour</em>\".</p>\n\n<p>Since the docs come tantalizingly close a few times, talking about that context and conversions, and yet specifically <em>do not</em> spell out which test is done I'd say that this must indeed be taken as an implementation detail. You cannot \"<em>rely</em>\" on it. </p>\n\n<p>If strict reliability is needed one solution is a simple class that ensures to test what you need. </p>\n\n<p>In more practical terms, it appears that in <code>if ($v)</code> it is the string part that is tested, and if it's not there then a numeric test goes (without the actual conversion as the docs say). As you ask about variables that have been set as dualvar then for those it's going to be the string test.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1546481656, "post_id": 54014082, "comment_id": 94868065, "body": "I think the reason is that a string like <code>abc</code> (which is true) numifies to 0 (which is false). So if a scalar contained a string and its numification, checking the string ensures the correct outcome"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1546524797, "post_id": 54014082, "comment_id": 94884130, "body": "mob, thanks for the details!  Thanks also for mob-rule.com, which is very cool!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 7, "last_activity_date": 1546475554, "last_edit_date": 1546475554, "creation_date": 1546468632, "answer_id": 54014082, "question_id": 54011319, "link": "https://stackoverflow.com/questions/54011319/is-the-truthiness-of-a-dualvar-always-that-of-its-string-part/54014082#54014082", "title": "Is the truthiness of a dualvar always that of its string part?", "body": "<p>Yes, at least so far. The <code>SvTRUE_common</code> macro is usually used to decide where an <code>SV</code> is \"true\" in a boolean context. Here's how it is defined in <code>sv.h</code> in the perl 5.26.1 source:</p>\n\n<pre><code>#define SvTRUE_common(sv,fallback) (            \\\n      !SvOK(sv)                     \\\n    ? 0                     \\\n    : SvPOK(sv)                     \\\n    ? SvPVXtrue(sv)                 \\\n    : (SvFLAGS(sv) &amp; (SVf_IOK|SVf_NOK))         \\\n    ? (   (SvIOK(sv) &amp;&amp; SvIVX(sv) != 0)     \\\n       || (SvNOK(sv) &amp;&amp; SvNVX(sv) != 0.0))      \\\n    : (fallback))\n</code></pre>\n\n<p>After the scalar passes the <code>SvOK</code> test (whether it is defined), the next check is <code>SvPOK</code> -- whether the scalar has a valid internal string representation. Dualvars always pass this check, so the boolean test of a dualvar is whether its string representation is true (<code>SvPVXtrue(...)</code>).</p>\n\n<p>The code is different in perl 5.6.2</p>\n\n<pre><code>I32\nPerl_sv_true(pTHX_ register SV *sv)\n{\n    if (!sv)\n        return 0;\n    if (SvPOK(sv)) {\n        register XPV* tXpv;\n        if ((tXpv = (XPV*)SvANY(sv)) &amp;&amp;\n                (tXpv-&gt;xpv_cur &gt; 1 ||\n                (tXpv-&gt;xpv_cur &amp;&amp; *tXpv-&gt;xpv_pv != '0')))\n            return 1;\n        else\n            return 0;\n    }\n    else {\n        ...\n</code></pre>\n\n<p>but the logic is the same -- check <code>SvPOK</code> first and then return whether the string representation is not empty and not equal to <code>\"0\"</code>.</p>\n\n<p>I would think future generations of Perl developers would be wary of changing this long-standing logic.</p>\n"}], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 4, "accepted_answer_id": 54014082, "answer_count": 2, "score": 11, "last_activity_date": 1560358580, "creation_date": 1546453501, "last_edit_date": 1546457936, "question_id": 54011319, "link": "https://stackoverflow.com/questions/54011319/is-the-truthiness-of-a-dualvar-always-that-of-its-string-part", "title": "Is the truthiness of a dualvar always that of its string part?", "body": "<p>The empirical behaviour of my Perl 5.26.2 x64 (Cygwin) is that a dualvar is truthy if and only if its <em>string</em> part is truthy:</p>\n\n<pre><code># Falsy number, truthy string =&gt; truthy\n$ perl -MScalar::Util=dualvar -E 'my $v=dualvar 0, \"foo\"; say \"yes\" if $v'\nyes\n\n# Truthy number, falsy string =&gt; falsy\n$ perl -MScalar::Util=dualvar -E 'my $v=dualvar 1, \"\"; say \"yes\" if $v'\n\n# Truthy number, truthy string =&gt; truthy\n$ perl -MScalar::Util=dualvar -E 'my $v=dualvar 1, \"foo\"; say \"yes\" if $v'\nyes\n\n# Falsy number, falsy string =&gt; falsy\n$ perl -MScalar::Util=dualvar -E 'my $v=dualvar 0, \"\"; say \"yes\" if $v'\n</code></pre>\n\n<p>This has been the case since 2009 per <a href=\"https://github.com/EndPointCorp/end-point-blog/issues/190#issuecomment-343620618\" rel=\"noreferrer\">this</a>.</p>\n\n<p><strong>Question:</strong> Is this guaranteed behaviour?</p>\n\n<ul>\n<li><p><a href=\"https://metacpan.org/pod/Boolean::String\" rel=\"noreferrer\"><code>Boolean::String</code></a> says that this is the behaviour.  However, I don't know if that's something I can rely on, in terms of backward compatibility. \nI also do not see an express statement in <a href=\"http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"noreferrer\">perlsyn</a>, <a href=\"https://metacpan.org/pod/Scalar::Util#dualvar\" rel=\"noreferrer\"><code>Scalar::Util</code></a>, or <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"noreferrer\"><code>perldata#Context</code></a>.</p></li>\n<li><p>I do see the following in <a href=\"http://perldoc.perl.org/perldata.html#Scalar-values\" rel=\"noreferrer\"><code>perldata#Scalar-values</code></a>:</p>\n\n<blockquote>\n  <p>A scalar value is interpreted as FALSE in the Boolean sense if it is undefined, the null string or the number 0 (or its string equivalent, \"0\"), and TRUE if it is anything else. The Boolean context is just a special kind of scalar context where no conversion to a string or a number is ever performed.</p>\n</blockquote>\n\n<p>The statement that \"no conversion ... is ever performed\" unfortunately doesn't tell me which part(s) of a dualvar the interpreter is looking at!  </p></li>\n<li><p>Similarly, Chas. Owens's <a href=\"https://stackoverflow.com/a/3914490/2877364\">related answer</a> says that </p>\n\n<blockquote>\n  <p>the truthiness test looks at strings first</p>\n</blockquote>\n\n<p>But if it looks at strings <em>first</em>, what does it look at <em>second</em>, and when?</p></li>\n</ul>\n\n<p><strong>Edit</strong> My understanding is that if <a href=\"https://metacpan.org/pod/overload\" rel=\"noreferrer\"><code>overload</code></a> is defined on a variable, dualvar or not, the <code>bool</code> overload will control.  I am wondering about the non-overloaded case.</p>\n\n<p><strong>Edit 2</strong> ikegami's answer <a href=\"https://stackoverflow.com/a/13520547/2877364\">here</a> points out that <code>PL_sv_yes</code> and <code>PL_sv_no</code> <em>also</em> have an <code>NV</code> (<code>double</code>) component.  For bonus points :) , does the NV have any effect on truthiness if a dualvar has one?  (Let me know if that answer is actually involved enough to deserve a separate question.)</p>\n"}, {"tags": ["perl", "scope", "built-in"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1546454278, "post_id": 54011306, "comment_id": 94859646, "body": "Seems like formats don&#39;t properly close over lexical variables. This is the sort of error message I&#39;d expect from <code>eval(&#39;$x&#39;)</code> where <code>$x</code> is a variable from some surrounding lexical scope that isn&#39;t used in the subroutine otherwise."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 2, "creation_date": 1546454584, "post_id": 54011306, "comment_id": 94859760, "body": "@toolic &quot;<i>Replacing <code>my</code> with <code>our</code> fixes it :</i>&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546482467, "post_id": 54011306, "comment_id": 94868198, "body": "Might I recommend Perl6::Form instead? (It&#39;s Perl6-like forms for Perl5.) It&#39;s a lot cleaner, and it avoids these problems"}, {"owner": {"reputation": 257, "user_id": 2304437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037de599b574fc63c5d0bf22ed811d4c?s=128&d=identicon&r=PG", "display_name": "robut", "link": "https://stackoverflow.com/users/2304437/robut"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546484245, "post_id": 54011306, "comment_id": 94868450, "body": "@melpomene Hey, I don&#39;t fully understand what it means to &quot;properly close over lexical variables&quot;, but appreciate the quick response. I guess what might additionally aid my confusion is whether there&#39;s some technical or historical reason that format or write can&#39;t access my $var, as I would expect ? Or is my expectation unreasonable to begin with ? I assume someone must&#39;ve decided that this quirk is not actually a bug ?"}, {"owner": {"reputation": 257, "user_id": 2304437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037de599b574fc63c5d0bf22ed811d4c?s=128&d=identicon&r=PG", "display_name": "robut", "link": "https://stackoverflow.com/users/2304437/robut"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546484324, "post_id": 54011306, "comment_id": 94868463, "body": "@ikegami The code I pasted is a derivation from a large Perl5 codebase ... at best I might be able to use Inline::Perl6 though !"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1546484414, "post_id": 54011306, "comment_id": 94868475, "body": "I repeat: Perl6::Form is a module for Perl5"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1546518312, "post_id": 54011306, "comment_id": 94880440, "body": "Formats are an ancient feature of Perl (older than local variables). My guess is no one has touched their code in 20 years. It looks like a bug to me."}, {"owner": {"reputation": 257, "user_id": 2304437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037de599b574fc63c5d0bf22ed811d4c?s=128&d=identicon&r=PG", "display_name": "robut", "link": "https://stackoverflow.com/users/2304437/robut"}, "edited": false, "score": 0, "creation_date": 1546521483, "post_id": 54011306, "comment_id": 94882221, "body": "Neat, if you want to post that as an answer I can accept it ! And thanks too, ikegami, I missed that."}], "answers": [{"tags": [], "owner": {"reputation": 2209, "user_id": 88056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4dc48a2044368d6b349c942ef2c4be?s=128&d=identicon&r=PG", "display_name": "Powertieke", "link": "https://stackoverflow.com/users/88056/powertieke"}, "is_accepted": true, "score": 2, "last_activity_date": 1548835184, "last_edit_date": 1548835184, "creation_date": 1548834389, "answer_id": 54435578, "question_id": 54011306, "link": "https://stackoverflow.com/questions/54011306/perl-scope-confusion-with-format-write/54435578#54435578", "title": "Perl Scope Confusion with Format / Write", "body": "<p>At the bottom of the <a href=\"https://perldoc.perl.org/perlform.html\" rel=\"nofollow noreferrer\">Perl format documentation</a> it says:</p>\n\n<blockquote>\n  <p>Lexical variables (declared with \"my\") are not visible within a format unless the format is declared within the scope of the lexical variable.</p>\n</blockquote>\n\n<p>Reading that would imply that what you are trying would work, but apparently lexically scoped variables work differently for <code>format</code> and <code>write</code> when called from outside of the package they where declared in. Also, all of the examples in the article use global variables...</p>\n\n<p><a href=\"https://www.effectiveperlprogramming.com/2010/08/use-formats-to-create-paginated-plaintext-reports/\" rel=\"nofollow noreferrer\">This more modern tutorial about format</a> repeats that you might run into trouble if you use lexically scoped variables (variables declared with <code>my</code>) because write picks the variables from the current package and, as stated in the comments of your question, was written in a time when Perl did not have the <code>my</code> keyword or lexical scoping.</p>\n\n<p>The solutions the article offers:</p>\n\n<blockquote>\n  <p>When you are ready to output some data, you use write. This design shows the age of formats since write doesn't take arguments to fill in the pictures. It uses the variables that are in scope.</p>\n</blockquote>\n\n<pre><code>our( $id, $name, $food, $amount ) = qw( 12 Buster Tuna 1.0 );\nwrite();\n</code></pre>\n\n<blockquote>\n  <p>Formats are also a bit crufty because you don't pass arguments to write to fill in the pictures. Perl relies on variables with the specified names being in scope. You can use lexical variables, but they have to be in the same scope as the format definition, and they have to be in scope when you call write. It's impractical to do that with lexicals, so the most agile way involves localized package variables:</p>\n</blockquote>\n\n<pre><code>foreach my $record ( @cats ) {\n    local( $id, $name, $food ) = @$record;\n    write( $fh );\n}\n</code></pre>\n\n<p>And also this advice in the wrap-up:</p>\n\n<blockquote>\n  <ul>\n  <li>Use localized package variables to set data for the format</li>\n  </ul>\n</blockquote>\n\n<p>So, <code>our</code> and <code>local</code> seem to be the way to go if you want to keep using <code>format</code> and <code>write</code> in modern Perl.</p>\n"}], "owner": {"reputation": 257, "user_id": 2304437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037de599b574fc63c5d0bf22ed811d4c?s=128&d=identicon&r=PG", "display_name": "robut", "link": "https://stackoverflow.com/users/2304437/robut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 54435578, "answer_count": 1, "score": 7, "last_activity_date": 1548835184, "creation_date": 1546453435, "question_id": 54011306, "link": "https://stackoverflow.com/questions/54011306/perl-scope-confusion-with-format-write", "title": "Perl Scope Confusion with Format / Write", "body": "<p>Why is <code>$var</code> unavailable (out of scope ?) to <code>write</code> when declared with <code>my</code>, if its scope is pretty much package-level ?</p>\n\n<pre><code>package ASDF;\nuse warnings;\nuse strict;\nuse feature 'say';\n\nmy $var = 'foo';\n\nformat =\n@&lt;&lt;&lt;&lt;&lt; @&gt;&gt;&gt;&gt;&gt;\n'test : ', $var\n.\n\n\nsub test {\n    say $var;\n    write;\n}\n\n\n1;\n</code></pre>\n\n<p>Called with : </p>\n\n<pre><code>perl -wE 'use ASDF; ASDF::test();'\n</code></pre>\n\n<p>Produces : </p>\n\n<pre><code>foo\nVariable \"$var\" is not available at ASDF.pm line 16.\nUse of uninitialized value $var in formline at ASDF.pm line 10.\ntest :\n</code></pre>\n\n<p>It appears otherwise available to <code>say</code> in the same scope ... </p>\n\n<p>Replacing <code>my</code> with <code>our</code> fixes it : </p>\n\n<pre><code>foo\ntest :    foo\n</code></pre>\n\n<p>Why can't <code>write</code> pick-up on <code>$var</code> correctly ?<br>\nIs it a scope issue, or an issue with how Perl's <code>write</code> or <code>format</code> is implemented ? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546453740, "post_id": 54011282, "comment_id": 94859454, "body": "why do you consider this to be the correct output? What would you expect for an input of <code>my @x = ( 1, 5, 9,1,1);</code>"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546499748, "post_id": 54011282, "comment_id": 94871993, "body": "Sorry for misprint, of course <code>1 9</code> is not correct output. Fixed the question."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546486915, "post_id": 54011394, "comment_id": 94868889, "body": "Re &quot;<i>but the result would be pretty complicated</i>&quot;, A common way to simplify this is to iterate over the indexes backwards (from highest to lowest). Of course, the <code>grep</code> route is still the simplest by far."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 12, "last_activity_date": 1546453838, "creation_date": 1546453838, "answer_id": 54011394, "question_id": 54011282, "link": "https://stackoverflow.com/questions/54011282/is-it-ok-to-use-conditional-splice/54011394#54011394", "title": "Is it ok to use conditional splice?", "body": "<p>The problem isn't your use of conditional <code>splice</code> per se, it's your loop. The most obvious problem, and the one that causes your warning, is that you're running off of the end of the array. <code>for my $i ( 0 .. $#x )</code> sets the iteration endpoint to <code>$#x</code> <em>before</em> the loop starts, but after you splice one or more elements out, the last index of the array will be smaller. You could fix that using a C-style <code>for</code> loop, instead of the range-style loop, but I don't recommend it \u2014 keep reading.</p>\n\n<p>The next problem is that after you splice an element out of the array, you continue the loop with <code>$i</code> one higher... but because you spliced an element out of the array, the next element that you haven't seen yet is in <code>$x[$i]</code>, <em>not</em> <code>$x[$i+1]</code>. You say \"Output is correct, <code>1 9</code>\", but shouldn't <code>9</code> have been removed, since it's more than 5? You could fix this using <code>redo</code> after <code>splice</code> to go through the loop again without incrementing <code>$i</code>, but I don't recommend that either.</p>\n\n<p>So it <em>is</em> possible to fix your loop which uses <code>splice</code> in place so that it will work correctly, but the result would be pretty complicated. Unless there's a compelling reason to do it differently, I would recommend using simply</p>\n\n<pre><code>@x = grep { $_ &lt; 5 } @x;\n</code></pre>\n\n<p>There's no problem with assigning the result to the same array as the source, and there is no loop management or other housekeeping for you to do.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 54011394, "answer_count": 1, "score": 2, "last_activity_date": 1546499658, "creation_date": 1546453298, "last_edit_date": 1546499658, "question_id": 54011282, "link": "https://stackoverflow.com/questions/54011282/is-it-ok-to-use-conditional-splice", "title": "Is it ok to use conditional splice?", "body": "<p>Let's consider simple Perl code:</p>\n\n<pre><code>my @x = ( 1, 5, 9);\n\nfor my $i ( 0 .. $#x ) {\n    splice( @x, $i, 1 ) if ( $x[$i] &gt;= 5 );\n}\n\nprint \"@x\";\n</code></pre>\n\n<p>Output is not correct, <code>1 9</code> but there must be <code>1</code></p>\n\n<p>If we run code with <code>-w</code> flag it prints warning</p>\n\n<pre><code>Use of uninitialized value within @x in numeric ge (&gt;=) at splice.pl line 5.\n</code></pre>\n\n<p>So, it's not good practise to use conditional <a href=\"https://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\">splice</a> and better to push result in new variable?</p>\n"}, {"tags": ["perl", "recursion", "tree", "language-agnostic", "directed-acyclic-graphs"], "comments": [{"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1546461074, "post_id": 54010961, "comment_id": 94862380, "body": "I like this question. I have a lot of experience manipulating graphs and trees, but I have very little experience with Perl. My advices would be 1) the DAG should be uniform: pick <code>N([id =&gt; label] =&gt; child)</code> or <code>N(id =&gt; child)</code>, but don&#39;t support both simultaneously. Obviously the second graph doesn&#39;t support labels, but adding a label in the graph is just one approach to solving the problem. 2) write <code>tree</code> as a pure function that does not mutate <code>$dag</code> as it will be much easier to work with, I promise, and ..."}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1546461078, "post_id": 54010961, "comment_id": 94862381, "body": "3) when building the nodes, you could use a serial id that is guaranteed to be unique. Or maybe instead of keeping an array of children, nodes could keep an array of edges - just a few ideas to get you started. If you don&#39;t receive help for this code, reply and I&#39;ll try to cook up an answer in Scheme or JavaScript."}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546461079, "post_id": 54010961, "comment_id": 94862383, "body": "Why do you need identity for objects, that share the same label? Wouldn&#39;t a reference to a label object do as well? (with equally labelled nodes pointing to the same label object)"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546514792, "post_id": 54010961, "comment_id": 94878730, "body": "Why do you only follow the path through red, but follow the path through blue+purple, but not the path through blue+red ? What makes blue / red special?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546519761, "post_id": 54010961, "comment_id": 94881241, "body": "user633183, go ahead, JS would be great."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546519769, "post_id": 54010961, "comment_id": 94881248, "body": "Corion, because there are no colour nodes succeeding red N1 in the DAG. Also there cannot be a single path through blue <b>and</b> red per def.: &quot;Follow each of the dotted successor edges in separate passes.&quot; See illustration from last edit."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546523868, "post_id": 54010961, "comment_id": 94883596, "body": "Thanks for that edit, now I understand it. I think the best approach would be to keep the (colour) state outside of your tree and keep a queue of <code>(color1,color2,...)</code> to be still processed in that iterator to find the trees. Whenever you encounter a node with multiple colours, you add one colour to your current state and you push copies of your current state with the remaining colours onto the queue (or unshift them there), then you continue with your current traversal."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546523983, "post_id": 54010961, "comment_id": 94883663, "body": "The queue keeps track of the colour combinations that you&#39;ve seen but not yet handled. When you start another traversal, you pick the next set of colours from the queue. Keeping the state outside of the tree makes it easier to have more than one traversal across it."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546529617, "post_id": 54010961, "comment_id": 94886948, "body": "Guy Coder, Prolog and Neo4j are fine if you can build up the desired outputs, the trees as nested data structure. Yes, your intuition is correct."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1546605951, "post_id": 54010961, "comment_id": 94913508, "body": "FYI, When you want a comment to appear in someone else&#39;s StackOverflow in-box you need to preface there tag with @ e.g. @GuyCoder, other wise they won&#39;t know a message was sent to them unless they check back on the original Q or A. Thanks. Also I leave many messages, and finding the specific post I leave them on can sometimes take a few minutes."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1546615630, "post_id": 54010961, "comment_id": 94918648, "body": "I tested adding the rule about going from any color to any color as long as neither color is black and there were way to many paths. Please clarify how the color rules work."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1546625762, "post_id": 54010961, "comment_id": 94923746, "body": "@user633183, go ahead, JS would be great."}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546699480, "post_id": 54049014, "comment_id": 94940364, "body": "I also would like to know how you arrived at the idea for the Cartesion product, did you get inspired while analysing the problem or is this a well-known approach in the area of graph traversal/recursion?"}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546718965, "post_id": 54049014, "comment_id": 94945601, "body": "@daxim I believe I have fixed both bugs, please check the new output"}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1546719170, "post_id": 54049014, "comment_id": 94945658, "body": "And to answer your question, I was in fact inspired by analyzing the problem. I initially tried to devise a recursive solution that used python generators, but could not because I traverse it with a recursive DFS. So I knew I had to return a list of subtrees, and after looking more closely at one example, I recognized it as the cartesian product."}], "tags": [], "owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "is_accepted": false, "score": 2, "last_activity_date": 1546718941, "last_edit_date": 1546718941, "creation_date": 1546663017, "answer_id": 54049014, "question_id": 54010961, "link": "https://stackoverflow.com/questions/54010961/extract-trees-from-dag/54049014#54049014", "title": "extract trees from DAG", "body": "<p>Is the following what you were aiming to accomplish? (python 3)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import defaultdict\nfrom itertools import product\n\nclass bless:\n    def __init__(self, label, children):\n        self.label = label\n        self.children = children\n\n    def __repr__(self):\n        return self.__str__()\n\n    # Just pretty-print stuff\n    def __str__(self):\n        formatter = \"\\n{}\\n\" if self.children else \"{}\"\n        formatted_children = formatter.format(\",\\n\".join(map(str, self.children)))\n        return \"bless([{}] =&gt; '{}')\".format(formatted_children, self.label)\n\nclass Node:\n    def __init__(self, label, children):\n        self.label = label\n        self.children = children\n\nclass DAG:\n    def __init__(self, nodes):\n        self.nodes = nodes\n\n        # Add the root nodes to a singular, generated root node (for simplicity)\n        # This is not necessary to implement the color-separation logic,\n        # it simply lessens the number of edge cases I must handle to demonstate\n        # the logic. Your existing code will work fine without this \"hack\"\n        non_root = {child for node in self.nodes for child in node.children}\n        root_nodes = [node.label for node in self.nodes if node.label not in non_root]\n        self.root = Node(\"\", root_nodes)\n\n        # Make a list of all the trees\n        self.tree_list = self.make_trees(self.root)\n\n    def tree(self):\n        if self.tree_list:\n            return self.tree_list.pop(0)\n        return list()\n\n    # This is the meat of the program, and is really the logic you are after\n    # Its a recursive function that parses the tree top-down from our \"made-up\"\n    # root, and makes &lt;bless&gt;s from the nodes. It returns a list of all separately\n    # colored trees, and if prior (recusive) calls already made multiple trees, it\n    # will take the cartesian product of each tree per label\n    def make_trees(self, parent):\n        # A defaultdict is just a hashtable that's empty values\n        # default to some data type (list here)\n        trees = defaultdict(list)\n        # This is some nasty, inefficient means of fetching the children\n        # your code already does this more efficiently in perl, and since it\n        # contributes nothing to the answer, I'm not wasting time refactoring it\n        for node in (node for node in self.nodes if node.label in parent.children):\n            # I append the tree(s) found in the child to the list of &lt;label&gt;s trees\n            trees[node.label] += self.make_trees(node)\n        # This line serves to re-order the trees since the dictionary doesn't preserve\n        # ordering, and also restores any duplicated that would be lost\n        values = [trees[label] for label in parent.children]\n        # I take the cartesian product of all the lists of trees each label\n        # is associated with in the dictionary. So if I have\n        #    [N1-subtree] [red-N2-subtree, blue-N2-subtree] [N3-subtree]\n        # as children of N0, then I'll return:\n        # [bless(N0, [N1-st, red-N2-st, N3-st]), bless(N0, [N1-st, blue-N2-st, N3-st])]\n        return [bless(parent.label, prod) for prod in product(*values)]\n\nif __name__ == \"__main__\":\n    N0  = Node('N0', ['N1'])\n    N1a = Node('N1', ['N2'])\n    N2  = Node('N2', ['N3'])\n    N3  = Node('N3', ['N4', 'N5'])\n    N4  = Node('N4', [])\n    N5  = Node('N5', [])\n\n    N1b = Node('N1', ['N6', 'N5'])\n    N6  = Node('N6', ['N7'])\n    N7  = Node('N7', ['N8', 'N4'])\n    N8a = Node('N8', ['N5'])\n    N8b = Node('N8', [])\n    N8c = Node('N8', ['N5', 'N5'])\n\n    dag = DAG([N0, N1a, N2, N3, N4, N5, N1b, N6, N7, N8a, N8b, N8c])\n\n    print(dag.tree())\n    print(dag.tree())\n    print(dag.tree())\n    print(dag.tree())\n    print(dag.tree())\n    print(dag.tree())\n</code></pre>\n\n<p>I explained the logic fairly thoroughly through comments, but just to clarify-  I generate all the possible trees at once using a recursive DFS from the root. To ensure there's only one root, I make a \"fictional\" root that contains all other nodes that do not have a parent, and then start the search on that one node. This is not necessary for the algorithm to work, I just wanted to simplify the logic that didn't directly pertain to your question.</p>\n\n<p>In this DFS, I create a hash table / dictionary of lists per label, and store all the distinct subtrees that can be made from each child in these lists. For most nodes this list will be of length 1 since most nodes will generate a single tree unless their label or a (sub)child has duplicate labels. Regardless, I take the cartesian product of all these lists, and form new <code>bless</code> objects (from each product). I return this list, and the process repeats up the call stack until we finally have our complete list of trees.</p>\n\n<p>All of the printing logic is unnecessary (obviously), but I wanted to make it easier for you to verify if this is indeed the behavior you want. I could not (easily) get it to indent nested <code>bless</code>s, but that should be trivial to manually adjust. The only real part of interest is the <code>make_trees()</code> function, the rest is just setting up things for validation or making the code as easily comparable to your perl code as I could manage.</p>\n\n<p>Formatted output:</p>\n\n<pre><code>bless([\n    bless([\n        bless([\n            bless([\n                bless([\n                    bless([] =&gt; 'N4'),\n                    bless([] =&gt; 'N5')\n                ] =&gt; 'N3')\n            ] =&gt; 'N2')\n        ] =&gt; 'N1')\n    ] =&gt; 'N0')\n] =&gt; '')\nbless([\n    bless([\n        bless([\n            bless([\n                bless([\n                    bless([\n                        bless([] =&gt; 'N5')\n                    ] =&gt; 'N8'),\n                    bless([] =&gt; 'N4')\n                ] =&gt; 'N7')\n            ] =&gt; 'N6'),\n            bless([] =&gt; 'N5')\n        ] =&gt; 'N1')\n    ] =&gt; 'N0')\n] =&gt; '')\nbless([\n    bless([\n        bless([\n            bless([\n                bless([\n                    bless([] =&gt; 'N8'),\n                    bless([] =&gt; 'N4')\n                ] =&gt; 'N7')\n            ] =&gt; 'N6'),\n            bless([] =&gt; 'N5')\n        ] =&gt; 'N1')\n    ] =&gt; 'N0')\n] =&gt; '')\nbless([\n    bless([\n        bless([\n            bless([\n                bless([\n                    bless([\n                        bless([] =&gt; 'N5'),\n                        bless([] =&gt; 'N5')\n                    ] =&gt; 'N8'),\n                    bless([] =&gt; 'N4')\n                ] =&gt; 'N7')\n            ] =&gt; 'N6'),\n            bless([] =&gt; 'N5')\n        ] =&gt; 'N1')\n    ] =&gt; 'N0')\n] =&gt; '')\n[]\n[]\n</code></pre>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1546859649, "creation_date": 1546451693, "last_edit_date": 1546519752, "question_id": 54010961, "link": "https://stackoverflow.com/questions/54010961/extract-trees-from-dag", "title": "extract trees from DAG", "body": "<p>I have a DAG expressed as nodes and their successor edges. Reifying it as a nested data structure is possible with a simple recursive function.</p>\n\n<pre><code>#tree1.pl\n#!/usr/bin/env perl\nuse 5.028; use strictures; use Moops; use Kavorka qw(fun); use List::AllUtils qw(first);\nclass Node :ro {\n    has label =&gt; isa =&gt; Str;\n    has children =&gt; isa =&gt; ArrayRef[Str];\n}\nfun N($label, $children) {\n    return Node-&gt;new(label =&gt; $label, children =&gt; $children);\n}\n\n# list is really flat, but\n# indentation outlines desired tree structure\nour @dag = (\n    N(N0 =&gt; ['N1']),\n        N(N1 =&gt; ['N2']),\n            N(N2 =&gt; ['N3']),\n                N(N3 =&gt; ['N4', 'N5']),\n                    N(N4 =&gt; []),\n                    N(N5 =&gt; []),\n);\n\nfun tree(Node $n) {\n    return bless [\n        map {\n            my $c = $_;\n            tree(first {\n                $_-&gt;label eq $c\n            } @dag)\n        } $n-&gt;children-&gt;@*\n    ] =&gt; $n-&gt;label;\n}\n\ntree($dag[0]);\n# bless([ #N0\n#     bless([ #N1\n#         bless([ #N2\n#             bless([ #N3\n#                 bless([] =&gt; 'N4'),\n#                 bless([] =&gt; 'N5'),\n#             ] =&gt; 'N3')\n#         ] =&gt; 'N2')\n#     ] =&gt; 'N1')\n# ] =&gt; 'N0')\n</code></pre>\n\n<p>That was the trivial case.</p>\n\n<hr>\n\n<p>In my application, I encounter the complication that the DAG contains multiple nodes with the same label.</p>\n\n<pre><code>our @dag = (\n    N(N0 =&gt; ['N1']),\n    N(N1 =&gt; ['N2']),\n    \ufe19\n    N(N1 =&gt; ['N6', 'N5']),\n    \ufe19\n</code></pre>\n\n<p>Note that this does not mean that there is a multiedge in the proper sense.</p>\n\n<p><img src=\"https://i.stack.imgur.com/IbSLM.png\" alt=\"\"></p>\n\n<p>This is wrong because now N1 appears to have three equal children.</p>\n\n<p>The N1 nodes must not be collapsed into one node for graph traversal purpose, only for labelling the output tree; so in other words these nodes must be of distinct identity. Let's visualise this with colours.</p>\n\n<pre><code>our @dag = (\n    N(N0 =&gt; ['N1']),\n    N([N1 =&gt; 'red'] =&gt; ['N2']),\n    \ufe19\n    N([N1 =&gt; 'blue'] =&gt; ['N6', 'N5']),\n    \ufe19\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/HhJga.png\" alt=\"\"></p>\n\n<p>The goal is to reify this DAG as two trees. Follow each of the dotted successor edges in separate passes. I achieve this by remembering the index number of one colour on the node when I pass it, and during next tree construction I pick the next colour in order.</p>\n\n<p><img src=\"https://i.stack.imgur.com/dUUdN.png\" alt=\"\"></p>\n\n<pre><code>#tree2.pl\n#!/usr/bin/env perl\nuse 5.028; use strictures; use Moops; use Kavorka qw(fun); use List::AllUtils qw(first);\nclass Node :ro {\n    has label =&gt; isa =&gt; Str;\n    has col =&gt; isa =&gt; Maybe[Str];\n    has children =&gt; isa =&gt; ArrayRef[Str];\n    has col_seen =&gt; is =&gt; 'rw', isa =&gt; Int;\n}\nfun N($c_l, $children) {\n    return ref $c_l\n        ? Node-&gt;new(label =&gt; $c_l-&gt;[0], col =&gt; $c_l-&gt;[1], children =&gt; $children)\n        : Node-&gt;new(label =&gt; $c_l, children =&gt; $children);\n}\n\n# indentation outlines desired tree structure\nour @dag = (\n    ### start 1st tree\n    N(N0 =&gt; ['N1']),\n        N([N1 =&gt; 'red'] =&gt; ['N2']),\n            N(N2 =&gt; ['N3']),\n                N(N3 =&gt; ['N4', 'N5']),\n                    N(N4 =&gt; []),\n                    N(N5 =&gt; []),\n    ### end 1st tree\n\n    ### start 2nd tree\n    # N0\n        N([N1 =&gt; 'blue'] =&gt; ['N6', 'N5']),\n            N(N6 =&gt; ['N7']),\n                N(N7 =&gt; ['N4']),\n                    # N4\n            # N5\n    ### end 2nd tree\n);\n\nfun tree(Node $n) {\n    return bless [\n        map {\n            my $c = $_;\n            my @col = map { $_-&gt;col } grep { $_-&gt;label eq $c } @dag;\n            if (@col &gt; 1) {\n                $n-&gt;col_seen($n-&gt;col_seen + 1);\n                die 'exhausted' if $n-&gt;col_seen &gt; @col;\n                tree(first {\n                    $_-&gt;label eq $c &amp;&amp; $_-&gt;col eq $col[$n-&gt;col_seen - 1]\n                } @dag);\n            } else {\n                tree(first { $_-&gt;label eq $c } @dag);\n            }\n        } $n-&gt;children-&gt;@*\n    ] =&gt; $n-&gt;label;\n}\n\ntree($dag[0]);\n# bless([ #N0\n#     bless([ #N1\n#         bless([ #N2\n#             bless([ #N3\n#                 bless([] =&gt; 'N4'),\n#                 bless([] =&gt; 'N5')\n#             ] =&gt; 'N3')\n#         ] =&gt; 'N2')\n#     ] =&gt; 'N1')\n# ] =&gt; 'N0')\n\ntree($dag[0]);\n# bless([ #N0\n#     bless([ #N1\n#         bless([ #N6\n#             bless([ #N7\n#                 bless([] =&gt; 'N4')\n#             ] =&gt; 'N7')\n#         ] =&gt; 'N6'),\n#         bless([] =&gt; 'N5')\n#     ] =&gt; 'N1')\n# ] =&gt; 'N0')\n\ntree($dag[0]);\n# exhausted\n</code></pre>\n\n<p>That code works, I get two trees.</p>\n\n<hr>\n\n<p>However, there is a problem with my code when I have several of those nodes with coloured successors. Same code as above, just the input is different:</p>\n\n<pre><code>#tree3.pl\n\n\ufe19\n\nour @dag = (\n    N(N0 =&gt; ['N1']),\n        N([N1 =&gt; 'red'] =&gt; ['N2']),\n            N(N2 =&gt; ['N3']),\n                N(N3 =&gt; ['N4', 'N5']),\n                    N(N4 =&gt; []),\n                    N(N5 =&gt; []),\n    # N0\n        N([N1 =&gt; 'blue'] =&gt; ['N6', 'N5']),\n            N(N6 =&gt; ['N7']),\n                N(N7 =&gt; ['N8', 'N4']),\n                    N([N8 =&gt; 'purple'] =&gt; ['N5']),\n                        # N5\n                    N([N8 =&gt; 'orange'] =&gt; []),\n                    N([N8 =&gt; 'cyan'] =&gt; ['N5', 'N5']),\n                        # N5\n                        # N5\n                    # N4\n            # N5\n);\n\n\ufe19\n\ntree($dag[0]);\n# bless([ #N0\n#     bless([ #N1\n#         bless([ #N2\n#             bless([ #N3\n#                 bless([] =&gt; 'N4'),\n#                 bless([] =&gt; 'N5')\n#             ] =&gt; 'N3')\n#         ] =&gt; 'N2')\n#     ] =&gt; 'N1')\n# ] =&gt; 'N0')\ntree($dag[0]);\n# bless([ #N0\n#     bless([ #N1\n#         bless([ #N6\n#             bless([ #N7\n#                 bless([ #N8\n#                     bless([] =&gt; 'N5')\n#                 ] =&gt; 'N8'),\n#                 bless([] =&gt; 'N4')\n#             ] =&gt; 'N7')\n#         ] =&gt; 'N6'),\n#         bless([] =&gt; 'N5')\n#     ] =&gt; 'N1')\n# ] =&gt; 'N0')\ntree($dag[0]);\n# exhausted\n</code></pre>\n\n<p>The problem is that the search exhausts after only two trees, although I should get four:</p>\n\n<ul>\n<li>path through red</li>\n<li>path through blue, then purple</li>\n<li>path through blue, then orange</li>\n<li>path through blue, then cyan</li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/ipPhJ.png\" alt=\"\"></p>\n\n<p>You can answer in any programming language.</p>\n"}, {"tags": ["html", "youtube", "perl", "video-embedding"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1546449731, "post_id": 54010055, "comment_id": 94857826, "body": "Try using Mojo::DOM"}, {"owner": {"reputation": 181, "user_id": 7069267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RFphAf8qSuk/AAAAAAAAAAI/AAAAAAAADPg/H6clIdD0mfQ/photo.jpg?sz=128", "display_name": "Tom Melly", "link": "https://stackoverflow.com/users/7069267/tom-melly"}, "edited": false, "score": 0, "creation_date": 1546450299, "post_id": 54010055, "comment_id": 94858064, "body": "You say you are unsure whether all data follows this scheme, but, tbh, unless you know of something (or things) that specifically identifies the tags you want to remove, and never appears in tags you want to keep, then you are going to struggle."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 181, "user_id": 7069267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RFphAf8qSuk/AAAAAAAAAAI/AAAAAAAADPg/H6clIdD0mfQ/photo.jpg?sz=128", "display_name": "Tom Melly", "link": "https://stackoverflow.com/users/7069267/tom-melly"}, "edited": false, "score": 0, "creation_date": 1546451481, "post_id": 54010055, "comment_id": 94858537, "body": "@TomMelly Hm, I may just remove all iframes"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1546504623, "post_id": 54010055, "comment_id": 94873740, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1546517080, "post_id": 54010055, "comment_id": 94879783, "body": "@DaveCross My main problem was choosing a Perl module to accomplish this task. Because I didn&#39;t know which module to use, I didn&#39;t write any code yet"}], "answers": [{"tags": [], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "is_accepted": true, "score": 1, "last_activity_date": 1546786179, "last_edit_date": 1546786179, "creation_date": 1546528497, "answer_id": 54025048, "question_id": 54010055, "link": "https://stackoverflow.com/questions/54010055/removing-any-videos-from-a-html-fragment/54025048#54025048", "title": "Removing any videos from a HTML fragment", "body": "<pre><code>sub RemoveVideo {\n  my ($str) = @_;\n\n  my $attrRe = qr/\\s*(?&lt;name&gt;\\b\\S+\\b)\\s*=\\s*(?&lt;value&gt;\"[^\"]*\"|'[^']*'|[^\"'&lt;&gt;\\s]+)\\s*/;\n  my $iframeRe = qr{&lt;iframe\\b($attrRe)*&gt;\\s*&lt;/iframe\\s*&gt;|&lt;iframe\\b($attrRe)*\\s*/&gt;}i;\n  my $divRe = qr{&lt;div\\b($attrRe)*&gt;\\s*$iframeRe\\s*&lt;/div\\s*&gt;\\s*}i;\n  my $pRe = qr{&lt;p\\b($attrRe)*&gt;\\s*$iframeRe\\s*&lt;/p\\s*&gt;\\s*}i;\n  $str =~ s/$divRe//gms;\n  $str =~ s/$pRe//gms;\n  $str =~ s/$iframeRe//gms; # \"\u0433\u043e\u043b\u044b\u0439\" iframe (\u043d\u0435 \u0432\u043d\u0443\u0442\u0440\u0438 \u0434\u0438\u0432\u0430)\n\n  return $str;\n}\nmy $Test = &lt;&lt;EOF;\nXXX\n&lt;IFRAME allowfullscreen=\"allowfullscreen\" frameborder=\"0\" height=\"270\" src=\"https://www.youtube.com/embed/XXX?feature=oembed\" tabindex=\"-1\" width=\" 480\"&gt;&lt;/iframe&gt;\n&lt;div data-oembed-url=\"https://www.youtube.com/watch?v=XXX&amp;amp;feature=youtu.be\"&gt;&lt;iframe allowfullscreen=\"allowfullscreen\" frameborder=\"0\" height=\"270\" src=\"https://www.youtube.com/embed/XXX?feature=oembed\" tabindex=\"-1\" width=\" 480\"&gt;&lt;/iframe&gt;&lt;/div&gt;\n&lt;p data-oembed-url=\"https://www.youtube.com/watch?v=XXX&amp;amp;feature=youtu.be\"&gt;&lt;iframe allowfullscreen=\"allowfullscreen\" frameborder=\"0\" height=\"270\" src=\"https://www.youtube.com/embed/XXX?feature=oembed\" tabindex=\"-1\" width=\" 480\"&gt;&lt;/iframe&gt;&lt;/p&gt;\nYYY\nEOF\n\nprint RemoveVideo($Test);\n</code></pre>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17169, "favorite_count": 0, "accepted_answer_id": 54025048, "answer_count": 1, "score": 1, "last_activity_date": 1546786179, "creation_date": 1546447453, "question_id": 54010055, "link": "https://stackoverflow.com/questions/54010055/removing-any-videos-from-a-html-fragment", "title": "Removing any videos from a HTML fragment", "body": "<p>I have a (possibly not conforming to any standards) HTML fragment with embedded video. The problem is to remove the subfragment(s) with the video.</p>\n\n<p>It is expected that the video follows this format:</p>\n\n<p><code>&lt;div data-oembed-url=\"https://www.youtube.com/watch?v=XXX&amp;amp;feature=youtu.be\"&gt;&lt;iframe allowfullscreen=\"allowfullscreen\" frameborder=\"0\" height=\"270\" src=\"https://www.youtube.com/embed/XXX?feature=oembed\" tabindex=\"-1\" width=\" 480\"&gt;&lt;/iframe&gt;&lt;/div&gt;</code></p>\n\n<p>I am entirely unsure whether all data follows this scheme.</p>\n\n<p>I think any <code>div</code> or <code>p</code> containing only the video should be removed, too.</p>\n\n<p>Please help to write Perl code to remove video. Which Perl module do you recommend to use for parsing?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546454123, "post_id": 54010005, "comment_id": 94859596, "body": "I don&#39;t quite get the problem: is it that after <code>&#47;prod</code> became <code>&#47;data&#47;prod</code> you are now getting <code>ops</code> instead of <code>prod|qa|...</code> (etc)?  That should be solved by changing <code>$folders[3]</code> to <code>$folders[4]</code>, no?  (But, much better, use <code>File::Spec</code> to parse paths!)."}, {"owner": {"reputation": 31, "user_id": 10858562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b610c450e991bf61643897346a0c9216?s=128&d=identicon&r=PG&f=1", "display_name": "LGonyer", "link": "https://stackoverflow.com/users/10858562/lgonyer"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546457124, "post_id": 54010005, "comment_id": 94860808, "body": "you are correct that the issue is getting ops instead of qa|dev|uat.  on one server we have /data/prod/ops/&lt;env&gt;/ on the production server we have /prod/ops/prod.  So changing $folders[3] to $folders[4] would solve for /data/prod/ops/&lt;env&gt; but then it would return the wrong value on the production server: /data/prod/ops/qa/tools  = qa /prod/ops/prod/tools = tools  &lt;- should be prod"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546457604, "post_id": 54010005, "comment_id": 94861001, "body": "Ah, the paths are actually <i>different</i> on different machines? Then the script should establish this in the beginning and set things up. It can check what machine it runs on and have hard-coded rules (paths) for each, or bluntly check whether paths are with <code>&#47;data&#47;...</code> or without it."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546470025, "post_id": 54012641, "comment_id": 94865690, "body": "Yes, that&#39;d be one way to deal with it.  I suggest to use the core <code>File::Spec</code> to split a path into directories (or some other well established module)."}], "tags": [], "owner": {"reputation": 31, "user_id": 10858562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b610c450e991bf61643897346a0c9216?s=128&d=identicon&r=PG&f=1", "display_name": "LGonyer", "link": "https://stackoverflow.com/users/10858562/lgonyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1546460371, "creation_date": 1546460371, "answer_id": 54012641, "question_id": 54010005, "link": "https://stackoverflow.com/questions/54010005/determining-symbolic-path/54012641#54012641", "title": "Determining symbolic path", "body": "<p>This may not be the best way to do it, but it does solve the problem with portability of code:</p>\n\n<pre><code>use File::Spec;\n\nmy $script_path = File::Spec-&gt;rel2abs( $0) ;\nprint \"script path: $script_path\\n\";\n$script_path =~ s/^\\/data//; # replace /data at beginning of string with nothing\nmy @folders = split(/\\//,$script_path);\nmy $curr_env = $folders[3];\nprint \"$curr_env\\n\";\nmy $file_loc = \"/prod/ops/$curr_env/env_shared/ulvr_env.pl\";\n\nprint \"file location:  $file_loc\\n\"; \n</code></pre>\n\n<p>QA Server Output:</p>\n\n<pre><code>$ ./test_path.pl\nscript path: /data/prod/ops/qa/test_path.pl\nqa\nfile location:  /prod/ops/qa/env_shared/ulvr_env.pl\n</code></pre>\n\n<p>PROD Server Output:</p>\n\n<pre><code>$ ./test_path.pl\nscript path: /prod/ops/prod/test_path.pl\nprod\nfile location:  /prod/ops/prod/env_shared/ulvr_env.pl\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10858562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b610c450e991bf61643897346a0c9216?s=128&d=identicon&r=PG&f=1", "display_name": "LGonyer", "link": "https://stackoverflow.com/users/10858562/lgonyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1546460371, "creation_date": 1546447267, "last_edit_date": 1546448157, "question_id": 54010005, "link": "https://stackoverflow.com/questions/54010005/determining-symbolic-path", "title": "Determining symbolic path", "body": "<p>I have been using Cwd 'abs_path' to get the exact location of our script containing shared parameter values and functions so that they are interchangeable across our dev/qa/uat/prod environments.</p>\n\n<p>Code example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse Cwd 'abs_path';\nmy $script_path = abs_path($0);\nmy @folders = split(/\\//,$script_path);\nmy $env = $folders[3];\nmy $file_loc \"/prod/ops/$env/env_shared/ulvr_env.pl\";\nprint \"$0\\n\";\nprint \"$script_path\\n\";\nprint \"$env\\n\";\nprint \"file location:  $file_loc\\n\";\n</code></pre>\n\n<p>$env would resolve to 'dev', 'qa', 'uat', or 'prod' depending on the directory that the script is in.  This code has worked well for us until now.  Our production server still has the absolute path '/prod' but due to space constraints, we have moved our scripts from '/prod' to '/data/prod' with a symlink.</p>\n\n<p>Results:</p>\n\n<pre><code>$ ./test_path.pl\n/prod/ops/prod/test_path.pl\nprod\nfile location:  /prod/ops/prod/env_shared/ulvr_env.pl\n</code></pre>\n\n<p>As you can see, it returns the absolute path (as it should) so I need to know how I can universally determine which path to use for the ulvr_env.pl depending on if the script is running in prod, dev, qa, or uat.  this (these) scripts need to work the same whether the full path is used for executing or relative path is used.  I have tried using:</p>\n\n<pre><code>use File::Spec;\nmy $script_path = File::Spec-&gt;rel2abs( $0) ;\n</code></pre>\n\n<p>which works when the script is run specifying the full symbolic path but it does not work when attempting to run from cwd</p>\n\n<pre><code>$ /prod/ops/qa/test_path.pl\n/prod/ops/qa/test_path.pl\nops\nfile location:  /prod/ops/qa/env_shared/ulvr_env.pl\n\n$ ./test_path.pl\n/data/prod/ops/qa/test_path.pl\nops\nfile location:  /prod/ops/ops/env_shared/ulvr_env.pl\n</code></pre>\n\n<p>What would be the best way to get it to return the \"qa\", \"uat\", or \"prod\" without having to maintain different code for each location?</p>\n"}, {"tags": ["regex", "file", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 5, "creation_date": 1546444787, "post_id": 54009339, "comment_id": 94855489, "body": "<code>glob</code> is an alternative to regex matching that you can use with filenames"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1546444867, "post_id": 54009339, "comment_id": 94855536, "body": "Where&#39;s the rest of the error message (in particular, the line number)?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1546445079, "post_id": 54009339, "comment_id": 94855650, "body": "I don&#39;t think that error message was generated by the code you&#39;ve shown us. There&#39;s no match operator (<code>m&#47;...&#47;</code>) in that code. The only thing that looks like one (<code>&#47;\\d{14}&#47;</code>) is actually just a string."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1546516587, "creation_date": 1546516587, "answer_id": 54021821, "question_id": 54009339, "link": "https://stackoverflow.com/questions/54009339/checking-if-a-file-exists-based-on-a-wildcard-in-the-file-name/54021821#54021821", "title": "Checking if a file exists based on a wildcard in the file name", "body": "<p>You could also try using <a href=\"https://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\"><code>readdir</code></a> to collect all filenames in the current directory. For example:</p>\n\n<pre><code>my $seq_num = $ARGV[0];\nmy $dir = '.';\nmy @matches;\n\nopendir(my $dh, $dir) or die \"Can't opendir $dir: $!\";\nwhile (my $name = readdir $dh) {\n    for my $bp ( @files ) {\n        if ( $name =~ /^\\Q$bp\\E_\\d{14}_\\Q$seq_num\\E\\.CSV/ ) {\n            push @matches, $bp;\n            last;\n        }\n    }\n}\nclosedir $dh;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4775263, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152846898053182/picture?type=large", "display_name": "Zbyslaw Railerski", "link": "https://stackoverflow.com/users/4775263/zbyslaw-railerski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546516587, "creation_date": 1546444559, "last_edit_date": 1546444813, "question_id": 54009339, "link": "https://stackoverflow.com/questions/54009339/checking-if-a-file-exists-based-on-a-wildcard-in-the-file-name", "title": "Checking if a file exists based on a wildcard in the file name", "body": "<p>I have a set of partial filenames, that I need to check against subsequent data delivery packages.\nFor example, some of the entries in my \"blue print\" set are:</p>\n\n<p>&lt;NAME><br>\nFILE_ONE<br>\nFILE_TWO<br>\nFILE_THREE<br></p>\n\n<p>The actual delivery will contain following files:</p>\n\n<p>&lt;NAME>_&lt;TIMESTAMP>_&lt;SEQUENCE>.&lt;EXTENSION><br>\nFILE_ONE_20180712104010_001.CSV<br>\nFILE_TWO_20180712112510_001.CSV<br>\nFILE_THREE_20180712112920_001.CSV<br></p>\n\n<p>Now I would like to read my blue print list in a loop and check whether all files arrived.\nI do a check via the name + I would like to concatenate any 14 digits + I would like to concatenate the sequence number coming as a parameter + I would like to concatenate the extension.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>my $bp=\"blueprint.txt\"; #list of partial file names I would like to look for\n\nopen my $handle, '&lt;', $bp;\nchomp(my @files = &lt;$handle&gt;);\nclose $handle;\n\nforeach (@files) {\n    if(! -f \"$_\" + \"_/\\d{14}/_\" + $ARGV[0] + \".CSV\")\n    {\n      print \"$_ does not exist\\n\";\n    }\n}\n</code></pre>\n\n<p>It throws following errors:</p>\n\n<pre><code>Quantifier follows nothing in regex; marked by &lt;-- HERE in m/* &lt;-- HERE\n</code></pre>\n\n<p>Please help me with the <code>if</code> statement.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2364, "user_id": 10105321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X354S.gif?s=128&g=1", "display_name": "jess", "link": "https://stackoverflow.com/users/10105321/jess"}, "edited": false, "score": 1, "creation_date": 1546439721, "post_id": 54008150, "comment_id": 94852921, "body": "Hi and welcome to Stack Overflow, please take a time to go through the <a href=\"https://stackoverflow.com/tour\">welcome tour</a> to know your way around here (and also to earn your first badge), read how to create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> and also check <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask Good Questions</a> so you increase your chances to get feedback and useful answers."}], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": false, "score": 3, "last_activity_date": 1546442093, "creation_date": 1546442093, "answer_id": 54008769, "question_id": 54008150, "link": "https://stackoverflow.com/questions/54008150/perl-how-work-while-loop-on-this-program/54008769#54008769", "title": "perl - how work while loop on this program", "body": "<p><code>$counts{$user}{$program}++;</code> increments the value stored at key <code>$program</code> in a nested hash which is stored (by reference) as the value of <code>$counts{$user}</code>.</p>\n\n<p>When perl sees the expression <code>$counts{$user}{$program}</code> it will create the (nested) hash stored in <code>$counts{$user}</code> if it does not exist yet. This is called 'autovivification'. perl will also create a key <code>$program</code>in this (nested) hash if it does not exist yet and set its value to undef.</p>\n\n<p>If the value at <code>$counts{$user}{$program}</code> is not yet defined when you call <code>++</code> on it, perl will assume, you want a number in this slot and initialize it with 0.</p>\n"}], "owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1546446672, "creation_date": 1546439520, "last_edit_date": 1546446672, "question_id": 54008150, "link": "https://stackoverflow.com/questions/54008150/perl-how-work-while-loop-on-this-program", "title": "perl - how work while loop on this program", "body": "<p>I have this code but I don't understand how it works specifically this <code>$counts{$user}{$program}++;</code></p>\n\n<pre><code>my %counts;\n\nopen my $IN, '&lt;', 'SESSION.txt' or die;\nwhile (&lt;$IN&gt;) {\n  next if length ($_) &lt; 51;\n  my ($sid, $user, $terminal, $program) = unpack 'A9 @11 A25 @37 A15 @53 A25';\n\n  next if $sid eq '---------';  # you need some way to filter out bogus or header rows\n\n  $program =~ s/\\(.+//;         # based on your example, turn toto (fifi) into toto\n\n  $counts{$user}{$program}++; #how that work ?\n}\n#close $IN;\n\nwhile (my ($user, $ref) = each %counts) {\n  while (my ($program, $count) = each %$ref) {\n    print \"User = $count $user with program $program\\n\";\n  }\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "mojo-useragent"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1546441335, "post_id": 54008118, "comment_id": 94853692, "body": "I&#39;m not sure what&#39;s unclear. Are you just looking for <code>my $tx = $ua-&gt;post(&#39;https:&#47;&#47;whatever.your.site.name.is&#47;login&#39; =&gt; form =&gt; { user =&gt; $user, password =&gt; $passwd })</code>?"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546441011, "creation_date": 1546439367, "last_edit_date": 1546441011, "question_id": 54008118, "link": "https://stackoverflow.com/questions/54008118/submitting-form-with-mojouseragent", "title": "submitting form with Mojo::UserAgent", "body": "<p>I want to submit a form using <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> where the form has the following:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form action=\"/login\" method=\"post\" class=\"Login\"&gt;\n</code></pre>\n\n<p>which has 2 inputs ids user and password </p>\n\n<p>With WWW::Mechanize I am using something like this:</p>\n\n<pre><code>my $resp = $agent-&gt;submit_form(\n    form_number =&gt; 4,\n    fields =&gt; {\n    user =&gt; $user,\n    password =&gt; $passwd,\n    }\n);\n</code></pre>\n\n<p>On Mojo::UserAgent I see there is an option to submit a post request, something like:</p>\n\n<pre><code>my $tx = $ua-&gt;post(\n    'https://metacpan.org/search' \n        =&gt; form =&gt; {q =&gt; 'mojo'}\n);\n</code></pre>\n\n<p>How can I submit such a form with Mojo::UserAgent?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1546440011, "post_id": 54007043, "comment_id": 94853047, "body": "Possibly that should go into <code>CPAN::LWP::UserAgent</code>? Or that should be updated to call <code>LWP::UserAgent-&gt;agent</code> as that&#39;s the correct way to set it"}], "tags": [], "owner": {"reputation": 425, "user_id": 5547553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f225ea4837d3be18c806f798328b7c?s=128&d=identicon&r=PG&f=1", "display_name": "lmocsi", "link": "https://stackoverflow.com/users/5547553/lmocsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1546434891, "creation_date": 1546434891, "answer_id": 54007043, "question_id": 54006682, "link": "https://stackoverflow.com/questions/54006682/where-can-i-set-the-useragent-in-strawberry-perls-config/54007043#54007043", "title": "Where can I set the useragent in Strawberry Perl&#39;s config?", "body": "<p>Rewriting the code of site\\lib\\LWP\\UserAgent.pm</p>\n\n<pre><code>sub _agent { \"libwww-perl/$VERSION\" }\n</code></pre>\n\n<p>say to:</p>\n\n<pre><code>sub _agent { 'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:64.0) Gecko/20100101 Firefox/64.0' }\n</code></pre>\n\n<p>solves the problem, but is this really the official solution?</p>\n"}], "owner": {"reputation": 425, "user_id": 5547553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f225ea4837d3be18c806f798328b7c?s=128&d=identicon&r=PG&f=1", "display_name": "lmocsi", "link": "https://stackoverflow.com/users/5547553/lmocsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546434891, "creation_date": 1546433299, "question_id": 54006682, "link": "https://stackoverflow.com/questions/54006682/where-can-i-set-the-useragent-in-strawberry-perls-config", "title": "Where can I set the useragent in Strawberry Perl&#39;s config?", "body": "<p>We have a proxy server here and all internet traffic is going through that. The command: <i>cpan package</i> fails with the following error:</p>\n\n<pre><code>LWP failed with code[403] message[Browserblocked]\n</code></pre>\n\n<p>I think, only specific browsers are let through the proxy server, so I need to set the useragent for cpan. Where can I set it? I don't see anything similar in <b>o conf</b>.</p>\n"}, {"tags": ["python", "c", "perl", "sh"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "edited": false, "score": 0, "creation_date": 1546434701, "post_id": 54006261, "comment_id": 94850483, "body": "Thanks - I agree with this"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546431549, "creation_date": 1546431549, "answer_id": 54006261, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006261#54006261", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>Use <code>cut</code> to extract the correct column from your extracted lines in place of <code>sed</code>. <code>cut -d, -f3</code> will extract the third column each separated by <code>,</code>.</p>\n\n<p>With input:</p>\n\n<pre><code>10,2,5,a/b\n20,4,5,a/c\n30,2,15,b/d\n40,4,10,a/d\n</code></pre>\n\n<p>command <code>grep a/ a.txt | cut -f3 -d, | paste -sd+ - | bc</code> will produce:</p>\n\n<pre><code>20\n</code></pre>\n\n<p>and command <code>grep b/ a.txt | cut -f3 -d, | paste -sd+ - | bc</code>:</p>\n\n<pre><code>15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1546432656, "last_edit_date": 1546432656, "creation_date": 1546432120, "answer_id": 54006411, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006411#54006411", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>Call <code>'python script.py startdir ~/somefile.txt'</code>. </p>\n\n<p>You can use this as starting point:</p>\n\n<pre><code>import os\nimport sys\nimport time\n\ndef get_age_in_days(file_stats):\n    \"\"\"Calculate age in days from files stat.\"\"\"\n    return (time.time() - file_stats.st_mtime) // (60*60*24) \n\ndef get_size_in_MB(file_stats):\n    \"\"\"Calculate file size in megabytes from files stat.\"\"\"\n    return file_stats.st_size / (1024 * 1024)\n\ndef metric(root,f):\n    \"\"\"Uses root and f to create a metric for the file at 'os.path.join(root,f)'\"\"\"\n    fn = os.path.join(root,f)\n    fn_stat = os.stat(fn) \n    age = get_age_in_days(fn_stat)\n    size = get_size_in_MB(fn_stat)\n    metric = age*size\n\n    return [metric, age, size, fn] \n\npath = None\nfn   = None\nif len(sys.argv)==3:\n    path = sys.argv[1]\n    fn = sys.argv[2]\nelse:\n    sys.exit(2)\n\n\nwith open(fn,\"w\") as output:  \n    # walk directory recursivly and report anything with a metric &gt; 1 \n    for root,dirs,files in os.walk(path):\n        total_dict = 0\n        for f in files:\n            m = metric(root,f)\n\n            # cutoff - only write to file if metric &gt; 1\n            if m[0] &gt; 1: \n                total_dict += m[0]\n                output.write(','.join(map(str,m))+\"\\n\")\n       output.write(','.join([str(total_dict), \"total\",\"dictionary\",root])+\"\\n\")\n\n# testing purposes\n# print(open(fn).read())\n</code></pre>\n\n<p>Example-file - (without cutoff - using <a href=\"https://pyfiddle.io/\" rel=\"nofollow noreferrer\">https://pyfiddle.io/</a>):</p>\n\n<pre><code>0.0,0.0,0.0011606216430664062,./main.py\n0.0,0.0,0.0,./myfiles.txt\n0.0,total,dictionary,./\n</code></pre>\n\n<p>You can look up any line that contains <strong><code>,total,dictionary,</code></strong>:  <code>0.0,total,dictionary,./</code> for dictionary-totals.</p>\n"}, {"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546590267, "post_id": 54006456, "comment_id": 94906010, "body": "@zdim That should work. now. It worked when I tested it last time because my initial directory was <code>..</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546590749, "post_id": 54006456, "comment_id": 94906192, "body": "Thank you :)  (I would also round numbers and sort by metric)"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546592700, "post_id": 54006456, "comment_id": 94907008, "body": "@zdim I&#39;ll leave that as an exercise for the poster, they may want to do that by options :-)"}, {"owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "edited": false, "score": 0, "creation_date": 1546611181, "post_id": 54006456, "comment_id": 94916088, "body": "Thanks a lot for you help. Was enough to get me going"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 4, "last_activity_date": 1546590155, "last_edit_date": 1546590155, "creation_date": 1546432285, "answer_id": 54006456, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those/54006456#54006456", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>You could do the whole lot in Perl. Perl comes with two operators <code>-M</code> and <code>-s</code> which are respectively the age of the file in days and the size of the file in bytes. Age here being the script start time minus the file modification time, and also the <code>File::Find</code> module that mimics the find command.</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nuse File::Find;\n\nfind(\\&amp;process, shift); # shift the start directory off @ARGV\n\nsub process {\n    # Lots of use of the magic _ file handle so we don't keep having to call stat()\n    print( (-M _) * (-s _), ' ', -M _, ' ', -s _, \" $File::Find::name\\n\")\n        if -f $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10857590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114cc3a92a39195ac65207899ba80740?s=128&d=identicon&r=PG&f=1", "display_name": "AlmostAHerb", "link": "https://stackoverflow.com/users/10857590/almostaherb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54006456, "answer_count": 3, "score": 2, "last_activity_date": 1546590155, "creation_date": 1546430345, "question_id": 54005963, "link": "https://stackoverflow.com/questions/54005963/how-to-find-old-large-files-and-generate-metrics-for-directories-containg-those", "title": "How to find old large files and generate metrics for directories containg those files", "body": "<p>I am a hardware engineer working in a design department and we routinely generate directories with large amounts of data (both large files and directories that contain large numbers of small files). This data can hang around on the disk for quite a while and I am looking for a metric to identify directories with large amounts of old data in them as candidates for deletion.</p>\n\n<p>The metric I have decided on is File Size (in M) * File Age (in days).</p>\n\n<p>I have a working solution, but it is a combination of shell scripting and c and is neither maintainable, pretty nor elegant.</p>\n\n<p>I am looking for ideas to improve the script.</p>\n\n<p>The basic idea is to generate raw data on all the files using find</p>\n\n<pre><code>find $Dir -type f -exec stat -c \"%s,%Y,%n\" {} \\; &gt; rpt3\n</code></pre>\n\n<p>and then process that file in C to get a file (rpt3b) in the format</p>\n\n<p>Metric,Age,Size,FileName</p>\n\n<p>Metric is Age*Size</p>\n\n<p>Age is number of days since file was modified</p>\n\n<p>Size is size of file in M</p>\n\n<p>FileName is name of file.</p>\n\n<p>I then process this file to sum the metrics for each directory</p>\n\n<pre><code>for Directory in $( find /projects/solaris/implementation -maxdepth 4 -type d ) ; do\n  Total=`grep $Directory/ rpt3a | sed -e 's?,.*??' | paste -sd+ - | bc`\n  echo $Total,$Directory &gt;&gt; rpt3c\ndone\n</code></pre>\n\n<p>So the output is similar to a du, but it is the metric that is reported rather than the size taken on disk.</p>\n\n<p>I could pull the last step into the C program, but I am looking for a solution that ideally works in one environment (doesn't have to be C, I am open to learning new languages).</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1546428705, "post_id": 54005429, "comment_id": 94847750, "body": "<code>print &quot;%Y&#47;%m&#47;%d&quot;, @date;</code> - <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">print</a> does not interpolate <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a>-style replacements. You want <code>print sprintf ...</code>, or just <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow noreferrer\">printf</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1546504075, "post_id": 54005429, "comment_id": 94873539, "body": "@Corion: And those aren&#39;t <code>sprintf</code>-style placeholders anyway :-)"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1546430313, "last_edit_date": 1546430313, "creation_date": 1546429249, "answer_id": 54005694, "question_id": 54005429, "link": "https://stackoverflow.com/questions/54005429/perl-using-dateparse-module-unable-to-print-stdin-date-in-different-format/54005694#54005694", "title": "Perl using Date::Parse module unable to print &lt;STDIN&gt; date in different format", "body": "<p>The documentation for Date::Parse isn't clear, but it looks like you get the values back in the format that <code>localtime()</code> would expect. The year, for example, seems to be the year minus 1900. This means that the month number will be 0 to 11 rather than 1 to 12.</p>\n\n<p>Date::Parse hasn't been updated for over five years. I'd suggest that it should best be avoided these days. There are much better options to choose from. These include <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"noreferrer\">Time::Piece</a> that has been included as a standard part of the Perl distribution since version 5.10.0. You can use its <code>strptime()</code> (string parse time) method to parse your string and its <code>strftime()</code> (string format time) method to format the date object as you like.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\n\nprint \"Enter a date in dd/mm/yyy format: \";\nchomp(my $user_date = &lt;STDIN&gt;);\n\nmy $tp = Time::Piece-&gt;strptime($user_date, '%d/%m/%Y');\n\nsay $tp-&gt;strftime('%Y/%m/%d');\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Also, it's really not clear what this line is supposed to do:</p>\n\n<pre><code>print \"%Y/%m/%d\", @date;\n</code></pre>\n\n<p>I think you were thinking of using the <code>strftime()</code> method from POSIX.pm.</p>\n\n<pre><code>print strftime \"%Y/%m/%d\", @date;\n</code></pre>\n\n<p>But with <code>use warnings</code> this generates warnings because of all the undefined values in <code>@data</code> (that's a rather bizarre design decision in that module and, in my opinion, another reason to avoid it). You can fix that by replacing:</p>\n\n<pre><code>my @date      = strptime($user_date);\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>my @date      = map { $_ // 0 } strptime($user_date);\n</code></pre>\n"}], "owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 54005694, "answer_count": 1, "score": 1, "last_activity_date": 1546430313, "creation_date": 1546428172, "question_id": 54005429, "link": "https://stackoverflow.com/questions/54005429/perl-using-dateparse-module-unable-to-print-stdin-date-in-different-format", "title": "Perl using Date::Parse module unable to print &lt;STDIN&gt; date in different format", "body": "<p>I want to accept a user date on the command line in format </p>\n\n<p>dd/mm/yyyy</p>\n\n<p>then print the date out to the user in</p>\n\n<p>yyyy/mm/dd</p>\n\n<p>I am trying to use the Date::Parse module to parse into a date to be reprinted.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Date::Parse\" rel=\"nofollow noreferrer\">Date:Parse docs</a> show that I should be able to get $day, $month and $year from user input.</p>\n\n<pre><code>use Date::Parse;\n\n$time = str2time($date);\n\n($ss,$mm,$hh,$day,$month,$year,$zone) = strptime($date);\n</code></pre>\n\n<p>This is my current code:</p>\n\n<pre><code>use strict;\nuse Date::Parse;\n\nprint \"Enter a date in dd/mm/yyy format: \";\nmy $user_date = &lt;STDIN&gt;;\nmy @date      = strptime($user_date);\n\n# ( $day, $month, $year ) = strptime($user_date);\n# my $user_day = ( ($day) = strptime($user_date) );\nprint \"%Y/%m/%d\", @date;\n</code></pre>\n\n<p>However the print fails and it appears from output that entered 10 of 10 is 9 in output.</p>\n\n<p>Output</p>\n\n<pre><code>Enter a date in dd/mm/yyy format: 16/10/1952\n%Y/%m/%d1952916s\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["linux", "perl", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1546427416, "post_id": 54005221, "comment_id": 94847178, "body": "Why the python tag?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1546428800, "post_id": 54005221, "comment_id": 94847810, "body": "This is mostly an inconsequential bug in Object::InsideOut. Perl tries to clean up the memory used by the objects and part of that memory has already been cleaned up. You can safely ignore that message."}, {"owner": {"reputation": 43, "user_id": 10857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5fdfd89a4ce3dbc9f6037e0f9be0d1?s=128&d=identicon&r=PG&f=1", "display_name": "Eric ", "link": "https://stackoverflow.com/users/10857237/eric"}, "edited": false, "score": 0, "creation_date": 1546480679, "post_id": 54005221, "comment_id": 94867904, "body": "Jens - sorry, accidental, thank you very much though"}, {"owner": {"reputation": 43, "user_id": 10857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5fdfd89a4ce3dbc9f6037e0f9be0d1?s=128&d=identicon&r=PG&f=1", "display_name": "Eric ", "link": "https://stackoverflow.com/users/10857237/eric"}, "edited": false, "score": 0, "creation_date": 1546480840, "post_id": 54005221, "comment_id": 94867928, "body": "Corion - Than you very much for your explanation I&#39;ll try to solve the rest of the problems then!"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 10857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5fdfd89a4ce3dbc9f6037e0f9be0d1?s=128&d=identicon&r=PG&f=1", "display_name": "Eric ", "link": "https://stackoverflow.com/users/10857237/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1546588990, "creation_date": 1546588990, "answer_id": 54035117, "question_id": 54005221, "link": "https://stackoverflow.com/questions/54005221/in-cleanup-cant-call-method-fetch-on-an-undefined-value-object-insideout-pm/54035117#54035117", "title": "(in cleanup) Can&#39;t call method &quot;FETCH&quot; on an undefined value Object/InsideOut.pm line 1953 during global destruction", "body": "<p>Apart from the perl warning I found out the perl script from BRAKER2 downloaded at 22/12/2018 had a bug which has been fixed already in the latest version:</p>\n\n<p>$name_base = s/[^.]+$// missing a ~ after =</p>\n\n<pre><code>$name_base =~ s/[^\\.]+$//\n</code></pre>\n\n<p>check the latest version BRAKER.pl they have edit and added a lot of lines.</p>\n"}], "owner": {"reputation": 43, "user_id": 10857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5fdfd89a4ce3dbc9f6037e0f9be0d1?s=128&d=identicon&r=PG&f=1", "display_name": "Eric ", "link": "https://stackoverflow.com/users/10857237/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 635, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546588990, "creation_date": 1546427300, "last_edit_date": 1546576684, "question_id": 54005221, "link": "https://stackoverflow.com/questions/54005221/in-cleanup-cant-call-method-fetch-on-an-undefined-value-object-insideout-pm", "title": "(in cleanup) Can&#39;t call method &quot;FETCH&quot; on an undefined value Object/InsideOut.pm line 1953 during global destruction", "body": "<p>Original command:</p>\n\n<pre><code>nohup time -v --output=time_braker2_RNAonly.log braker.pl --species=BUSCO_BUSCO_sunbird_trimPLK_881882613 --useexisting --cores=40 --genome=/home/cch/sunbird/sunbird_RepeatMasker_trim/sunbird_platanus_trim_kraken_scaff_gapclosed_1000.fa.masked --softmasking 1 --hints=/home/cch/sunbird/sunbird_HISAT2_trim/sunbird_trim_hints_AS_400K.gff,/home/cch/sunbird/sunbird_HISAT2_trim/sunbird_trim_hints_China_400K.gff --UTR=off &amp;\n</code></pre>\n\n<p>When I am running BRAKER2 I couldn't proceed and kept receiving this error messages repeatively in GeneMark-ET.stderr: </p>\n\n<pre><code>(in cleanup) Can't call method \"FETCH\" on an undefined value at /usr/local/share/perl/5.22.1/Object/InsideOut.pm line 1953 during global destruction\n</code></pre>\n\n<p>I have tried to update Object::InsideOut module but didn't do any help</p>\n\n<p>This is line 1953 in the perl file:</p>\n\n<pre><code>head -n 1953 /usr/local/share/perl/5.22.1/Object/InsideOut.pm | tail -n 10\n    return if (! $$self);\n\n    # Grab any error coming into this routine\n    my $err = $@;\n\n    # Preserve other error variables\n    local($!, $^E, $?);\n\n    # Workaround for Perl's \"in cleanup\" bug\n    if ($Config::Config{useithreads} &amp;&amp;\n</code></pre>\n\n<p>Another error message in getAnnoFastaJoingenes..stderr</p>\n\n<pre><code>usage: getAnnoFastaFromJoingenes.py [-h] -g GENOME -f GTF -o OUT\n                                    [-t TRANSLATION_TABLE] [-s FILTER]\ngetAnnoFastaFromJoingenes.py: error: argument -o/--out: expected one argument\n</code></pre>\n\n<p>and this is my nohup file:</p>\n\n<pre><code>Use of uninitialized value $_ in substitution (s///) at /opt/BRAKER/scripts/braker.pl line 7970.\nERROR in file /opt/BRAKER/scripts/braker.pl at line 7986\nFailed to execute: perl /opt/Augustus/scripts/join_aug_pred.pl &lt; /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/augustus.tmp.gff &gt; /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/augustus.hints.gff\n</code></pre>\n\n<p>This is where my log file ends:</p>\n\n<pre><code>#Thu Dec 27 20:34:03 2018: Making a fasta file with protein sequences of /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/augustus.hints.gtf\n/usr/bin/python3 /opt/Augustus/scripts/getAnnoFastaFromJoingenes.py -g /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/genome.fa -f /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/augustus.hints.gtf -o 1&gt; /home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/getAnnoFasta..stdout 2&gt;/home/cch/sunbird/sunbird_BRAKER2_RNAonly_trim/braker/BUSCO_BUSCO_sunbird_trimPLK_881882613/errors/getAnnoFastaJoingenes..stderr\n</code></pre>\n\n<p>I have checked braker.pl line 7970: </p>\n\n<pre><code>head -n 7970 /opt/BRAKER/scripts/braker.pl | tail -n 10\n\nsub get_anno_fasta {\n    my $AUG_pred = shift;\n    print LOG \"\\# \"\n        . (localtime)\n        . \": Making a fasta file with protein sequences of $AUG_pred\\n\"\n        if ($v &gt; 2);\n    my $name_base = $AUG_pred;\n    $name_base = s/[^\\.]+$//;\n</code></pre>\n\n<p>and braker.pl line 7986:</p>\n\n<pre><code>head -n 7986 /opt/BRAKER/scripts/braker.pl | tail -n 10\n\nmy $pythonCmdString = \"\";\nif ($nice) {\n    $pythonCmdString .= \"nice \";\n}\n$pythonCmdString .= \"$PYTHON3_PATH/python3 $string -g $genome -f $AUG_pred \"\n                 .  \"-o $name_base 1&gt; $outfile 2&gt;$errorfile\";\n\nprint LOG \"$pythonCmdString\\n\\n\" if ($v &gt; 3);\nsystem(\"$pythonCmdString\") == 0\n    or die(\"ERROR in file \" . __FILE__ .\" at line \". __LINE__\n</code></pre>\n\n<p>Really appreciate if anyone would have any idea on this, I have tried to see whether if there are any solution online but barely any sources and I have limited understanding of these...</p>\n"}, {"tags": ["perl", "cmd"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1546420570, "post_id": 54001886, "comment_id": 94844207, "body": "Hi. What do you get if you add <code>print &quot;@ARGV\\n&quot;</code> above <code>my ($working_dir) = @ARGV;</code> and run the script both ways?"}, {"owner": {"reputation": 11, "user_id": 10856261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gN1mbCtRxyQ/AAAAAAAAAAI/AAAAAAAAA7U/D-IO_BymNhE/photo.jpg?sz=128", "display_name": "Chia Zi Jian", "link": "https://stackoverflow.com/users/10856261/chia-zi-jian"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1546423509, "post_id": 54001886, "comment_id": 94845460, "body": "Hello, I get <code>Use of uninitialized value in chdir at C:&#47;Debug&#47;test.pl line 7</code> error w/o invoke perl and  <code>C:\\Debug</code> output if invoke perl."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1546428387, "post_id": 54001886, "comment_id": 94847587, "body": "Odd, so when you invoke the script with out <code>perl</code> on the command line, the parameters after the script are not being passed to the script. This looks like a problem with how Windows is starting the Perl interpreter not a problem with Perl it&#39;s self."}, {"owner": {"reputation": 11, "user_id": 10856261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gN1mbCtRxyQ/AAAAAAAAAAI/AAAAAAAAA7U/D-IO_BymNhE/photo.jpg?sz=128", "display_name": "Chia Zi Jian", "link": "https://stackoverflow.com/users/10856261/chia-zi-jian"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1546481389, "post_id": 54001886, "comment_id": 94868027, "body": "I tried ActivePerl, I have the same error too. The only Perl that works is Strawberry Perl after I did some minor tweaking on the .pl file properties and open it with Perl interpreter."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1546502681, "post_id": 54001886, "comment_id": 94873037, "body": "As I said odd, try asking on a specific forum for the version of Perl you are using."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10856261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gN1mbCtRxyQ/AAAAAAAAAAI/AAAAAAAAA7U/D-IO_BymNhE/photo.jpg?sz=128", "display_name": "Chia Zi Jian", "link": "https://stackoverflow.com/users/10856261/chia-zi-jian"}, "is_accepted": false, "score": 0, "last_activity_date": 1582512588, "creation_date": 1582512588, "answer_id": 60368949, "question_id": 54001886, "link": "https://stackoverflow.com/questions/54001886/unable-to-execute-perl-script-in-cmd-without-invoking-perl-exe/60368949#60368949", "title": "Unable to execute perl script in cmd without invoking perl.exe", "body": "<p>Anyway, users who face this problem can try to check the properties of your file, make sure the file is not read only and has full admin access. </p>\n"}], "owner": {"reputation": 11, "user_id": 10856261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gN1mbCtRxyQ/AAAAAAAAAAI/AAAAAAAAA7U/D-IO_BymNhE/photo.jpg?sz=128", "display_name": "Chia Zi Jian", "link": "https://stackoverflow.com/users/10856261/chia-zi-jian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1582512588, "creation_date": 1546408782, "last_edit_date": 1546478244, "question_id": 54001886, "link": "https://stackoverflow.com/questions/54001886/unable-to-execute-perl-script-in-cmd-without-invoking-perl-exe", "title": "Unable to execute perl script in cmd without invoking perl.exe", "body": "<p>I am trying to execute a perl script to delete file1.txt in a directory. \nWhen I execute the perl script using command prompt, I faced an error : <code>Use of uninitialized value in chdir at C:/Debug/test.pl line 7</code>. \nExample:</p>\n\n<pre><code>C:\\Debug&gt;test.pl C:\\Debug\n</code></pre>\n\n<p>However if I invoke <code>perl</code> in front of <code>test.pl</code>, the perl script is executed successfully and file1.txt was deleted. \nExample:</p>\n\n<pre><code>C:\\Debug&gt;perl test.pl C:\\Debug \n</code></pre>\n\n<p>Please find <code>test.pl</code> code as follow:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Copy;\n\nmy ($working_dir) = @ARGV;\nchdir $working_dir or die \"Can't change directory$!\";\nunlink \"file1.txt\";\n</code></pre>\n\n<p>I have mks_toolkit v8.7.5 with perl.exe installed. The <code>.pl</code> extension is associated with <code>\"C:\\Program Files (x86)\\MKS Toolkit\\mksnt\\perl.exe\" \"%1\" %*</code>. \nI have no problem execute hello.pl (Hello World) without invoking perl in front of it.\nExample:</p>\n\n<pre><code>C:\\Debug&gt;hello.pl\n</code></pre>\n"}, {"tags": ["ruby", "perl"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1546403657, "post_id": 54001142, "comment_id": 94839293, "body": "See <a href=\"https://gist.github.com/SaswatPadhi/2872457\" rel=\"nofollow noreferrer\">PHP + Perl + Python + Ruby + C + C++ - polyglot</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546489848, "post_id": 54001142, "comment_id": 94869454, "body": "The name of the language is Perl, not PERL. It&#39;s not an acronym"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1546405899, "creation_date": 1546405899, "answer_id": 54001493, "question_id": 54001142, "link": "https://stackoverflow.com/questions/54001142/is-it-possible-to-run-a-program-as-both-ruby-and-perl/54001493#54001493", "title": "Is it possible to run a program as both Ruby and PERL?", "body": "<p>Yes. This kind of program is called a <a href=\"https://codegolf.stackexchange.com/questions/7261/write-a-polyglot-that-prints-the-languages-name/7280#7280\">polyglot</a>. For Perl and Ruby, one useful insight is that <a href=\"https://ruby-doc.org/core-2.1.1/doc/globals_rdoc.html\" rel=\"noreferrer\"><code>$stdin</code> is a defined, initialized variable in Ruby</a></p>\n\n<pre><code>print $stdin ? \"This is a Ruby program\" : \"This is a Perl program\";\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8351150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71c931b8b919aeaa81f2d3995a0160cd?s=128&d=identicon&r=PG&f=1", "display_name": "Kuais", "link": "https://stackoverflow.com/users/8351150/kuais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 3, "accepted_answer_id": 54001493, "answer_count": 1, "score": 1, "last_activity_date": 1546405899, "creation_date": 1546402752, "question_id": 54001142, "link": "https://stackoverflow.com/questions/54001142/is-it-possible-to-run-a-program-as-both-ruby-and-perl", "title": "Is it possible to run a program as both Ruby and PERL?", "body": "<p>Is it possible to run a program as both Ruby and PERL. If so, are you able to detect the change and print something like \"This is a perl program\" for perl compiler and \"This is a Ruby program\" for a ruby compiler</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1546501524, "post_id": 54001122, "comment_id": 94872624, "body": "By my understand, (?=pat1)pat2 only take a look whether there is a pat1 at current matching position but do not match it to move current matching position. Then continue to match pat2 at current match position and then advance the position. Right?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1546503593, "post_id": 54001122, "comment_id": 94873372, "body": "@user2799433: right: the <code>(?=pat1)</code> only looks if the pattern exists but does not move the end of the match. But the <code>pat2</code> then actually matches and also moves the end of the match. Since you essentially used the same pattern for <code>pat1</code> and <code>pat2</code> (i.e. <code>(?=pat)pat</code>) the positive lookahead  <code>(?=pat)</code> was essentially irrelevant since it was followed by exactly the same pattern with a &quot;real&quot; match, i.e. the lookahead and the real match started and ended at the same position."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1546451461, "last_edit_date": 1546451461, "creation_date": 1546402496, "answer_id": 54001122, "question_id": 54000971, "link": "https://stackoverflow.com/questions/54000971/how-to-implement-this-by-regularexpression/54001122#54001122", "title": "How to implement this by RegularExpression", "body": "<blockquote>\n  <p>.... next match in loop is started from ?=</p>\n</blockquote>\n\n<p>The next match within <code>//g</code> is started where the last match left off. A <code>(?=...)</code> does not magically set the position where the next match will start; it simply checks if the part inside <code>(?=...)</code> would match at the current position without advancing the position.</p>\n\n<p>If your regex would be <code>/(a\\d(?=a\\d))/</code> then the match would be done after the first <code>a\\d</code> although it makes sure that there is a second <code>a\\d</code> behind it. But your regex is <code>/(a\\d(?=a\\d)a\\d)/</code> which means simplified regarding the match <code>/a\\da\\d/</code>, i.e. it is done after the second <code>a\\d</code>.</p>\n\n<p>What you could do to achieve what you want is for example the following:</p>\n\n<pre><code>my $s1 = 'a1a2a3a4a5';\nwhile($s1 =~ m/(a\\d(?=(a\\da\\d)))/g)\n{\n   print \"$1$2\\n\"\n}\n</code></pre>\n\n<p>This will put the first <code>a\\d</code> into <code>$1</code>, capture the second <code>a\\da\\d</code> into <code>$2</code> but still finish the match after the first <code>a\\d</code>. Only you need to print <code>\"$1$2\"</code> then instead of only <code>\"$1\"</code>. </p>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 54001122, "answer_count": 1, "score": 2, "last_activity_date": 1546451461, "creation_date": 1546400538, "question_id": 54000971, "link": "https://stackoverflow.com/questions/54000971/how-to-implement-this-by-regularexpression", "title": "How to implement this by RegularExpression", "body": "<pre><code>my $s1 = 'a1a2a3a4a5';\nmy $pat = '(a\\d(?=a\\d)a\\d)';\nwhile($s1 =~ m/$pat/g)\n{\n   print \"$1\\n\"\n}\n</code></pre>\n\n<p>I want to get output:</p>\n\n<pre><code>a1a2a3\na2a3a4\na3a4a5\n</code></pre>\n\n<p>But output is:</p>\n\n<pre><code>a1a2\na3a4\n</code></pre>\n\n<p>By my knowledge, next match in loop is started from ?=, but by my practice, it is not work in this way. Who can point out the problem.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1546358225, "post_id": 53996734, "comment_id": 94830886, "body": "Can you please <a href=\"https://stackoverflow.com/posts/53996734/edit\">edit</a> your post and tell us what currently goes wrong with your code? Your expression matches the string given, so I&#39;m unclear about what the question is."}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546359490, "post_id": 53996734, "comment_id": 94831200, "body": "string: a1a2a3xx pattern: ((?:a\\d){0,2}.*?)$   I hope $1 get a2a3xx, but by my practice, $1 get a1a2a3xx"}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 4, "last_activity_date": 1546629508, "last_edit_date": 1546629508, "creation_date": 1546363423, "answer_id": 53997466, "question_id": 53996734, "link": "https://stackoverflow.com/questions/53996734/how-to-search-a-string-from-end-to-beginning-by-regex/53997466#53997466", "title": "How to search a string from end to beginning by RegEx", "body": "<p>You can use a negative lookahead to get your desired results.</p>\n\n<p><code>((?:a\\d){0,2}(?:(?!a\\d).)*)$</code></p>\n\n<p>This expression will match after <code>a\\d{0,2}</code> anything that does not match <code>a\\d</code></p>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 1, "accepted_answer_id": 53997466, "answer_count": 1, "score": 0, "last_activity_date": 1546629508, "creation_date": 1546357104, "last_edit_date": 1546365577, "question_id": 53996734, "link": "https://stackoverflow.com/questions/53996734/how-to-search-a-string-from-end-to-beginning-by-regex", "title": "How to search a string from end to beginning by RegEx", "body": "<p>How to search a string from end to beginning by regular expression, for example:</p>\n\n<ul>\n<li><p>string: <code>a1a2a3xx</code></p></li>\n<li><p>pattern: <code>((?:a\\d){0,2}.*?)$</code></p></li>\n</ul>\n\n<p>I hope <code>$1</code> get <code>a2a3xx</code>, but by my practice, <code>$1</code> gets <code>a1a2a3xx</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546356133, "post_id": 53996572, "comment_id": 94830461, "body": "see <a href=\"https://www.activestate.com/blog/how-install-cpan-modules-activeperl/\" rel=\"nofollow noreferrer\">Activestate documentation</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1546364055, "post_id": 53996572, "comment_id": 94832231, "body": "You should probably install that module..."}, {"owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "edited": false, "score": 0, "creation_date": 1546373022, "post_id": 53996572, "comment_id": 94834116, "body": "Sorry for the dumb question, is this done through the manager as it\u2019s not listed in there to install?"}, {"owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "edited": false, "score": 0, "creation_date": 1546373146, "post_id": 53996572, "comment_id": 94834144, "body": "Sorry missed the first post, I will try this when I get home and post back."}, {"owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "edited": false, "score": 0, "creation_date": 1546385087, "post_id": 53996572, "comment_id": 94836406, "body": "I don&#39;t seem to have the option to paste a screenshot, but this is what I get:      c:\\&gt;ppm install DBD-mysql     &#39;ppm&#39; is not recognized as an internal or external command,     operable program or batch file.      c:\\&gt;"}, {"owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "edited": false, "score": 0, "creation_date": 1546386957, "post_id": 53996572, "comment_id": 94836677, "body": "Failed with this:  c:\\ppm install DBD-mysql syncing site PPM database with .packlists...done ppm install failed: can&#39;t find any package that provides DBD-mysql  I&#39;ve reinstall Active Perl too."}, {"owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "edited": false, "score": 0, "creation_date": 1546388976, "post_id": 53996572, "comment_id": 94836980, "body": "Huh, uninstalled active perl and then did a clean install of an older version and it worked.  I did try the latest version which didn&#39;t work again.  Time to move on I guess as it works.  Thanks for your help though."}], "owner": {"reputation": 19, "user_id": 10852723, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTPR7yXqQXc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcb0v7zfmQMMZLPEuE8ZqD0_b8aLlg/mo/photo.jpg?sz=128", "display_name": "Gonzo", "link": "https://stackoverflow.com/users/10852723/gonzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546385250, "creation_date": 1546355643, "last_edit_date": 1546385250, "question_id": 53996572, "link": "https://stackoverflow.com/questions/53996572/cant-locate-dbd-mysql-pm", "title": "Can&#39;t locate DBD/mysql.pm", "body": "<p>I\u2019m rebuilding an old gaming server and have installed MySQL 5.5 and Active Perl.  It\u2019s a Windows 2012R2 server and I use MySQL and Active Perl to populate activity to a website.</p>\n\n<p>The gaming server is running and MySQL and the website is up but empty of player stats as the Perl script I run says:</p>\n\n<pre><code>c:\\HLStatsX&gt;perl hlstats.pl\ninstall_driver(mysql) failed: Can't locate DBD/mysql.pm in @INC (you may \nneed to install the DBD::mysql module) (@INC contains: C:/Perl64/site/lib \nC:/Perl64/lib) at (eval 10) line 3. Perhaps the DBD::mysql perl module \nhasn't been fully installed, or perhaps the capitalisation of 'mysql' isn't \nright.  Available drivers: CSV, DBM, ExampleP, File, Gofer, Mem, ODBC, \nOracle, Pg, Proxy, SQLite, Sponge. at .//HLstats.plib line 152. c:\\HLStatsX&gt;\n</code></pre>\n\n<p>In my environment variables under PATH I have:</p>\n\n<pre><code>C:\\Perl64\\site\\bin;C:\\Perl64\\bin;C:\\Program Files \n(x86)\\PHP\\v5.5;C:\\Windows\\system32;C:\\Windows \n;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32 \n\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\MySQL\\MySQL Serv\n</code></pre>\n\n<p>I know little about MySQL and Active Perl and have spent ages on Google to find a solution.</p>\n\n<p>Has anyone seen this before?</p>\n\n<p>I've just tried the manual install too:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iZtn0.png\" rel=\"nofollow noreferrer\">Error</a></p>\n"}, {"tags": ["c#", "perl"], "comments": [{"owner": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1546333969, "post_id": 53993706, "comment_id": 94826041, "body": "Could be an encoding issue. Did you try to use UTF-8 encoding instead of UTF-16 (UnicodeEncoding)?"}, {"owner": {"reputation": 19, "user_id": 10853691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467183f33435376a25650d3c3d789add?s=128&d=identicon&r=PG&f=1", "display_name": "Smaug Ori", "link": "https://stackoverflow.com/users/10853691/smaug-ori"}, "reply_to_user": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1546337848, "post_id": 53993706, "comment_id": 94826694, "body": "@KlausG&#252;tter, tried to change the encoding, and the result remains the same."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 10853691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467183f33435376a25650d3c3d789add?s=128&d=identicon&r=PG&f=1", "display_name": "Smaug Ori", "link": "https://stackoverflow.com/users/10853691/smaug-ori"}, "is_accepted": false, "score": 0, "last_activity_date": 1546353296, "creation_date": 1546353296, "answer_id": 53996315, "question_id": 53993706, "link": "https://stackoverflow.com/questions/53993706/how-to-convert-c-code-to-perl-or-openssl-cli/53996315#53996315", "title": "how to convert c# code to perl or openssl cli?", "body": "<p>Well, got an answer in perlmonks site.<br>\n<a href=\"https://perlmonks.org/index.pl?node_id=1227872\" rel=\"nofollow noreferrer\">https://perlmonks.org/index.pl?node_id=1227872</a><br></p>\n\n<p>UnicodeEncoding encodes to UTF-16LE. So in Perl, you'll have to use the Encode module for that, and then either use md5_base64 from Digest::MD5, which removes the padding at the end of the string (==), or, if you want the padding, you'll have to use MIME::Base64 separately:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Encode qw/encode/;\nuse Digest::MD5 qw/md5/;\nuse MIME::Base64 qw/encode_base64/;\n\nmy $string = \"7512\";\nmy $md5b64 = encode_base64( md5( encode( 'UTF-16LE', $string,\n    Encode::FB_CROAK|Encode::LEAVE_SRC ) ), \"\" );\nprint \"Generated String is: MD5:$md5b64\\n\";\n\nmy $expect = \"cA5YjDeU2fOJwwnVFPCuAw==\";\nprint $md5b64 eq $expect ? \"Matches!\\n\" : \"Doesn't match!\\n\";\n\n__END__\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10853691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467183f33435376a25650d3c3d789add?s=128&d=identicon&r=PG&f=1", "display_name": "Smaug Ori", "link": "https://stackoverflow.com/users/10853691/smaug-ori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1546353296, "creation_date": 1546326882, "last_edit_date": 1546337888, "question_id": 53993706, "link": "https://stackoverflow.com/questions/53993706/how-to-convert-c-code-to-perl-or-openssl-cli", "title": "how to convert c# code to perl or openssl cli?", "body": "<p>I have a c# code that convert a string to md5 and then base64 encode it.\nI would like to do the same thing with a perl script or linux cli, openssl.\ni tried using openssl cli, but i get a different result from the c# code.\ncan anyone explain and show me how to convert the c# code to linux cli or perl script?</p>\n\n<p>Thanks. </p>\n\n<pre><code>public class Program {\n    public static void Main() {\n        var myString = \"7512\";\n        var o = CalculateMD5Hash(myString);\n        Console.WriteLine(\"Generated String is: {0}\", o);\n\n    }\n\n    public static string CalculateMD5Hash(string input) {\n        HashAlgorithm ha = new MD5CryptoServiceProvider();\n        string prefix = \"MD5:\";\n        string password = \"\";\n        UnicodeEncoding enc = new UnicodeEncoding();\n        password = Convert.ToBase64String(ha.ComputeHash(enc.GetBytes(input)));   \n        return prefix+password;\n    }\n}\n\n# Linux openssl cli\necho -ne '7512' | openssl dgst -md5 -binary | openssl base64  \n</code></pre>\n\n<p>When i run the c# code with the string: 7512, i get:\ncA5YjDeU2fOJwwnVFPCuAw==</p>\n\n<p>But when i am using the openssl cli command, i get:\nFhxcWtUfzIhBV4kFEbPIsA==</p>\n"}, {"tags": ["perl", "imapclient"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1546290832, "post_id": 53990621, "comment_id": 94820609, "body": "Just a note, you should <a href=\"https://perldoc.pl/perlobj#Indirect-Object-Syntax\" rel=\"nofollow noreferrer\">avoid indirect object syntax</a>."}, {"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1546290960, "post_id": 53990621, "comment_id": 94820637, "body": "Thanks, I will avoid it."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": true, "score": 0, "last_activity_date": 1546283844, "last_edit_date": 1546283844, "creation_date": 1546283304, "answer_id": 53990689, "question_id": 53990621, "link": "https://stackoverflow.com/questions/53990621/unable-to-sort-using-mailimapclient/53990689#53990689", "title": "Unable to sort using Mail::IMAPClient", "body": "<p>First I should point I was inspired from <a href=\"https://stackoverflow.com/questions/24507633/c-sharp-imap-sort-command-with-special-characters\">this</a> question from came the wrong idea of put everything as a single argument.</p>\n\n<p>The correct answer was:</p>\n\n<pre><code>my @messages = $imap-&gt;sort('(REVERSE ARRIVAL)', 'UTF-8', 'ALL');\n</code></pre>\n\n<p>I should separe sort pattern from charset and charset from search pattern as the different arguments they are.\nNow my code is working.</p>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 53990689, "answer_count": 1, "score": 0, "last_activity_date": 1548766608, "creation_date": 1546282868, "last_edit_date": 1548766608, "question_id": 53990621, "link": "https://stackoverflow.com/questions/53990621/unable-to-sort-using-mailimapclient", "title": "Unable to sort using Mail::IMAPClient", "body": "<p>Yesterday I was trying to sort the emails coming from imap using the Mail::IMAPClient library doing the following:</p>\n\n<pre><code>my $imap = Mail::IMAPClient-&gt;new(\n#my imap settings\n);\n#folder selection\nmy @messages = $imap-&gt;sort('(REVERSE ARRIVAL) UTF-8 ALL');\n</code></pre>\n\n<p>But I got:</p>\n\n<blockquote>\n  <p>4 BAD Error in IMAP command UID SORT: Invalid sort list argument\n  (0.000 + 0.000 secs). at /var/www/localhost/htdocs/user/mail.pl line\n  93.: /var/www/localhost/htdocs/user/mail.pl</p>\n</blockquote>\n\n<p>I was several hours trying to resolve this issue until I found the answer. (below)</p>\n"}, {"tags": ["json", "perl", "debugging", "ubuntu-16.04", "taskwarrior"], "comments": [{"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 1, "creation_date": 1546270720, "post_id": 53988992, "comment_id": 94815643, "body": "Missing a <code>;</code> ?"}, {"owner": {"reputation": 1156, "user_id": 7437143, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6e6a10d62061d1dd0ecb2d0b760eb7d?s=128&d=identicon&r=PG&f=1", "display_name": "a.t.", "link": "https://stackoverflow.com/users/7437143/a-t"}, "reply_to_user": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546281651, "post_id": 53988992, "comment_id": 94818538, "body": "Thank you for your sharp sight, indeed I missed a semicolon in the double print statement test. I am re-trying a double print statement, including semicolon in the original loop that yielded the error now, to see if it allows for printing the (task) index separately."}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 7437143, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6e6a10d62061d1dd0ecb2d0b760eb7d?s=128&d=identicon&r=PG&f=1", "display_name": "a.t.", "link": "https://stackoverflow.com/users/7437143/a-t"}, "edited": false, "score": 0, "creation_date": 1546356142, "post_id": 53989704, "comment_id": 94830465, "body": "I deleted a comment that was confusing and did not  add anything useful."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 1, "last_activity_date": 1546275383, "creation_date": 1546275383, "answer_id": 53989704, "question_id": 53988992, "link": "https://stackoverflow.com/questions/53988992/returning-the-index-of-a-at-error-malformed-json-string-in-for-loop-of-perl-j/53989704#53989704", "title": "Returning the index of a at error: &quot;malformed JSON string&quot; in for loop of perl-JSON script", "body": "<p>Your syntax error is a missing ; at the end of</p>\n\n<pre><code>print (\"hello world\".$countA)\n</code></pre>\n\n<p>If you want to loop over indicies, then just do so:</p>\n\n<pre><code>my @task = split \"\\n\", qx{$command};\nfor my $index (0..$#task) {\n    my $task = $task[$index];\n    ...\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>for my $task (split \"\\n\", qx{$command}) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 7437143, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6e6a10d62061d1dd0ecb2d0b760eb7d?s=128&d=identicon&r=PG&f=1", "display_name": "a.t.", "link": "https://stackoverflow.com/users/7437143/a-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1546356050, "last_edit_date": 1546356050, "creation_date": 1546353962, "answer_id": 53996390, "question_id": 53988992, "link": "https://stackoverflow.com/questions/53988992/returning-the-index-of-a-at-error-malformed-json-string-in-for-loop-of-perl-j/53996390#53996390", "title": "Returning the index of a at error: &quot;malformed JSON string&quot; in for loop of perl-JSON script", "body": "<p>The last step required to answer the question was to add the line that trows the error in the for loop that ysth suggested. It led to this script, which returns the task number (starting at 0, in stead of 1) that throws the error:</p>\n\n<pre><code>#! /usr/bin/perl\n################################################################################\n##\n## Copyright 2006 - 2017, Paul Beckingham, Federico Hernandez.\n##\n## Permission is hereby granted, free of charge, to any person obtaining a copy\n## of this software and associated documentation files (the \"Software\"), to deal\n## in the Software without restriction, including without limitation the rights\n## to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n## copies of the Software, and to permit persons to whom the Software is\n## furnished to do so, subject to the following conditions:\n##\n## The above copyright notice and this permission notice shall be included\n## in all copies or substantial portions of the Software.\n##\n## THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n## OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n## FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n## THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n## LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n## OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n## SOFTWARE.\n##\n## http://www.opensource.org/licenses/mit-license.php\n##\n################################################################################\n\nuse strict;\nuse warnings;\n\n# Give a nice error if the (non-standard) JSON module is not installed.\neval \"use JSON\";\nif ($@)\n{\n  print \"Error: You need to install the JSON Perl module.\\n\";\n  exit 1;\n}\n\n# Use the taskwarrior 2.0+ export command to filter and return JSON\nmy $command = join (' ', (\"env PATH='$ENV{PATH}' task rc.verbose=nothing rc.json.array=no export\", @ARGV));\nif ($command =~ /No matches/)\n{\n  printf STDERR $command;\n  exit 1;\n}\n\n\n\n## Loop Attempt 5: added the  my $data line that introduces the error to the answer suggested by ysth in SO.\nmy @task = split \"\\n\", qx{$command};\nfor my $index (0..$#task) {\n    my $task = $task[$index];\n    print \"Before index nr:,$index \\n\";\n    print \"Before task content:,$task \\n\";\n    my $data = from_json ($task);\n    print \"After index,$index \\n\\n\";\n}\n\n\nexit 0;\n\n################################################################################\n</code></pre>\n"}], "owner": {"reputation": 1156, "user_id": 7437143, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6e6a10d62061d1dd0ecb2d0b760eb7d?s=128&d=identicon&r=PG&f=1", "display_name": "a.t.", "link": "https://stackoverflow.com/users/7437143/a-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 53989704, "answer_count": 2, "score": -1, "last_activity_date": 1546356050, "creation_date": 1546269864, "last_edit_date": 1546355906, "question_id": 53988992, "link": "https://stackoverflow.com/questions/53988992/returning-the-index-of-a-at-error-malformed-json-string-in-for-loop-of-perl-j", "title": "Returning the index of a at error: &quot;malformed JSON string&quot; in for loop of perl-JSON script", "body": "<p><strong>Context:</strong>\nIn order to debug a corrupt taskwarrior task list consisting of the files: <code>backlog.data</code>, <code>completed.data</code>, <code>pending.data</code> and <code>undo.data</code> I modified <a href=\"https://taskwarrior.org/download/export-html.pl\" rel=\"nofollow noreferrer\">a perl script from the taskwarrior hooks</a> at <a href=\"https://taskwarrior.org/tools/\" rel=\"nofollow noreferrer\">https://taskwarrior.org/tools/</a>. As I am debugging the corrupt <code>.data</code> files, I know the <code>export-html.pl</code> script yields an error. I am trying to find the location of that error. It is already given in the limited form of the JSON code that is returned in the error message (Example in figure).</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Rfmm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Rfmm.png\" alt=\"Hint of location of error already given as JSON of task.\"></a></p>\n\n<p>However, since I do not know how often that short string that is returned with the error message occurs in the complete tasklist, I am trying to get the index of the task/counter right at- or before the error occurs. </p>\n\n<p><strong>Difficulty:</strong></p>\n\n<ol>\n<li>The code inside the for-loop that actually finds the error appears to not be executed at all, OR:</li>\n<li>I do not yet know how to print the index, (indicated with <code>count&lt;Some Letter&gt;</code>) in this for loop that evaluates the task JSON format.</li>\n</ol>\n\n<p><strong>Question:</strong>\nHow does one print the (task) index until the error <code>malformed JSON string ..</code> is found?</p>\n\n<p><strong>Attempts to return the index of the task-JSON that contains an error:\"</strong></p>\n\n<pre><code>#! /usr/bin/perl\n################################################################################\n##\n## Copyright 2006 - 2017, Paul Beckingham, Federico Hernandez.\n##\n## Permission is hereby granted, free of charge, to any person obtaining a copy\n## of this software and associated documentation files (the \"Software\"), to deal\n## in the Software without restriction, including without limitation the rights\n## to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n## copies of the Software, and to permit persons to whom the Software is\n## furnished to do so, subject to the following conditions:\n##\n## The above copyright notice and this permission notice shall be included\n## in all copies or substantial portions of the Software.\n##\n## THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n## OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n## FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n## THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n## LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n## OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n## SOFTWARE.\n##\n## http://www.opensource.org/licenses/mit-license.php\n##\n################################################################################\n\nuse strict;\nuse warnings;\n\n# Give a nice error if the (non-standard) JSON module is not installed.\neval \"use JSON\";\nif ($@)\n{\n  print \"Error: You need to install the JSON Perl module.\\n\";\n  exit 1;\n}\n\n# Use the taskwarrior 2.0+ export command to filter and return JSON\nmy $command = join (' ', (\"env PATH='$ENV{PATH}' task rc.verbose=nothing rc.json.array=no export\", @ARGV));\nif ($command =~ /No matches/)\n{\n  printf STDERR $command;\n  exit 1;\n}\n\n# Generate output.\nprint \"&lt;html&gt;\\n\",\n      \"  &lt;body&gt;\\n\",\n      \"    &lt;table&gt;\\n\",\n      \"      &lt;thead&gt;\\n\",\n      \"        &lt;tr&gt;\\n\",\n      \"          &lt;td&gt;ID&lt;/td&gt;\\n\",\n      \"          &lt;td&gt;Pri&lt;/td&gt;\\n\",\n      \"          &lt;td&gt;Description&lt;/td&gt;\\n\",\n      \"          &lt;td&gt;Project&lt;/td&gt;\\n\",\n      \"          &lt;td&gt;Due&lt;/td&gt;\\n\",\n      \"        &lt;/tr&gt;\\n\",\n      \"      &lt;/thead&gt;\\n\",\n      \"      &lt;tbody&gt;\\n\";\n\n## This is my own loop Attempt 0\nmy $countA = 0;\nfor my $task (split \"\\n\", qx{$command})\n{\n  ++$countA;\n  print (\"hello world\".$countA);\n  print \"Entered hello world,$countA \\n\";\n}\n\n## This is my own loop Attempt 1\nmy $countB = 0;\nfor my $task (split \"\\n\", qx{$command})\n{\n  ++$countB;\n  print \"Entered hello world,$countB \\n\";\n}\n\n# ## This is my own loop Attempt 2 Contains the \"malformed JSON string\" error but does not print the index.\n# my $countC = 0;\n# for my $task (split \"\\n\", qx{$command})\n# {\n#   ++$countC;\n\n#   my $dataC = from_json ($task);\n\n#   print \"Entered hello world after data,$countC \\n\";\n# }\n\n\n# ## This is my own loop Attempt 3 Contains the \"malformed JSON string\" error but does not print the index.\n# my $countD = 0;\n# for my $task (split \"\\n\", qx{$command})\n# {\n#   ++$countD;\n#   #print (\"hi\".$countB)\n#   my $dataD = from_json ($task);\n\n#   print \" \",($countD-&gt;{'test'}       || 'testB'),\"some\";\n# }\n\n## Loop Attempt 4 based on SO suggestion ysth\nmy @task = split \"\\n\", qx{$command};\nfor my $index (0..$#task) {\n    my $task = $task[$index];\n    print \"Before index,$task\";\n    print \"The index,$index \\n\";\n}\n\nprint \"Original loop entering:\";\n\n## Original loop\nmy $count = 0;\nfor my $task (split \"\\n\", qx{$command})\n{\n  ++$count;\n  my $data = from_json ($task);\n\n  print \"        &lt;tr&gt;\\n\",\n        \"          &lt;td&gt;\", ($data-&gt;{'id'}          || ''), \"&lt;/td&gt;\\n\",\n        \"          &lt;td&gt;\", ($data-&gt;{'priority'}    || ''), \"&lt;/td&gt;\\n\",\n        \"          &lt;td&gt;\", ($data-&gt;{'description'} || ''), \"&lt;/td&gt;\\n\",\n        \"          &lt;td&gt;\", ($data-&gt;{'project'}     || ''), \"&lt;/td&gt;\\n\",\n        \"          &lt;td&gt;\", ($data-&gt;{'due'}         || ''), \"&lt;/td&gt;\\n\",\n        \"        &lt;/tr&gt;\\n\";\n}\n\nprint \"      &lt;/tbody&gt;\\n\",\n      \"      &lt;tfooter&gt;\\n\",\n      \"        &lt;tr&gt;\\n\",\n      \"          &lt;td&gt;\", $count, \" matching tasks&lt;/td&gt;\\n\",\n      \"        &lt;/tr&gt;\\n\",\n      \"      &lt;/tfooter&gt;\\n\",\n      \"    &lt;/table&gt;\\n\",\n      \"  &lt;/body&gt;\\n\",\n      \"&lt;/html&gt;\\n\";\n\nexit 0;\n\n################################################################################\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1546292818, "post_id": 53988630, "comment_id": 94821011, "body": "My guess for the downvote you ask about: the page for <a href=\"https://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack</a> is very short and practically the only thing discussed is precisely the <code>%</code> prefix, explained in detail.  Thus the statement &quot;<i>couldn&#39;t find proper documentation</i>&quot; can rub the wrong way.  Having said that, I still find the question reasonable, given the arbitrary <code>123</code> used. (And ff <i>that</i> is indeed what puzzled you, while you have looked at the docs, you could have phrased that sentenced more carefully, to convey that you <i>did</i> see the docs but don&#39;t get <code>123</code>.)"}, {"owner": {"reputation": 147, "user_id": 4149118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OOeiF.jpg?s=128&g=1", "display_name": "AgentS", "link": "https://stackoverflow.com/users/4149118/agents"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546374677, "post_id": 53988630, "comment_id": 94834453, "body": "@zdim Right, my explanation does look a bit sloppy and I didn&#39;t explain much of what I knew about <code>unpack</code>. I now clearly see how that part of my post could piss off many awesome people haha; I&#39;ll make sure future posts include key detail like these. Thank you so much :)"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 4149118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OOeiF.jpg?s=128&g=1", "display_name": "AgentS", "link": "https://stackoverflow.com/users/4149118/agents"}, "edited": false, "score": 0, "creation_date": 1546268045, "post_id": 53988711, "comment_id": 94814861, "body": "Ahh, 55 does fit in 8 bits so he randomly put 123 there. Got it completely! Thank you so much :)"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1546267872, "last_edit_date": 1546267872, "creation_date": 1546267755, "answer_id": 53988711, "question_id": 53988630, "link": "https://stackoverflow.com/questions/53988630/why-does-this-line-return-sum-of-integers-1-10/53988711#53988711", "title": "Why does this line return sum of integers 1-10?", "body": "<p>From <a href=\"https://perldoc.perl.org/5.12.0/functions/unpack.html\" rel=\"nofollow noreferrer\">perldoc -f unpack</a>:</p>\n\n<blockquote>\n  <p>In addition to fields allowed in pack(), you may prefix a field with a % to indicate that you want a &lt;number&gt;-bit checksum of the items instead of the items themselves.</p>\n</blockquote>\n\n<p>Thus <code>%123d*</code> means to add all the input integers <code>1..10</code> and then take the first 123 bit of this result in order to construct the <em>\"&lt;number&gt;-bit checksum\"</em>. Note that <code>%8d*</code> or just <code>%d*</code> (which is equivalent to <code>%16d*</code>) would suffice too given that the sum is small enough.</p>\n"}], "owner": {"reputation": 147, "user_id": 4149118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OOeiF.jpg?s=128&g=1", "display_name": "AgentS", "link": "https://stackoverflow.com/users/4149118/agents"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 3, "accepted_answer_id": 53988711, "answer_count": 1, "score": 3, "last_activity_date": 1546267872, "creation_date": 1546267166, "question_id": 53988630, "link": "https://stackoverflow.com/questions/53988630/why-does-this-line-return-sum-of-integers-1-10", "title": "Why does this line return sum of integers 1-10?", "body": "<p>I'd like to understand how <code>unpack</code> is returning the sum in the given perl one-liner.</p>\n\n<p>I've looked at <code>pack</code> man page and mostly understood that it is simply formatting the given array into a <code>scalar</code> of <code>ten</code> doubles.</p>\n\n<p>However, I couldn't find proper documentation for <code>unpack</code> with <code>%123</code>. Looking for help here.</p>\n\n<pre><code>print unpack \"%123d*\" , pack( \"d*\", (1..10));\n</code></pre>\n\n<p>This line correctly outputs <code>55</code> which is <code>1+2+3+...+10</code>.</p>\n"}, {"tags": ["regex", "perl", "replace", "substitution"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1546243015, "post_id": 53984961, "comment_id": 94807061, "body": "Your last sentence seems unrelated to the rest of this question; maybe take it out and ask a separate question, with code?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546250862, "post_id": 53984961, "comment_id": 94809396, "body": "As an aside, <a href=\"https://metacpan.org/pod/Regexp::Debugger\" rel=\"nofollow noreferrer\">Regexp::Debugger</a> is a very convenient tool to see how a regular expression progresses through your string. That way you can easily find where your regular expression goes off the rails."}], "answers": [{"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 3, "last_activity_date": 1546242911, "creation_date": 1546242911, "answer_id": 53984987, "question_id": 53984961, "link": "https://stackoverflow.com/questions/53984961/find-and-replace-numbers-to-latex-fractions-correctly/53984987#53984987", "title": "find and replace numbers to LaTeX fractions correctly", "body": "<p>The unescaped dot is matching any character (except newline). To match a literal dot in a regex, you want <code>\\.</code> or <code>[.]</code>.</p>\n\n<p>For example, <code>\\b.5\\b</code> matches the <code>75</code> in <code>0.75</code> because the dot can match <code>7</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1546248330, "creation_date": 1546248330, "answer_id": 53985736, "question_id": 53984961, "link": "https://stackoverflow.com/questions/53984961/find-and-replace-numbers-to-latex-fractions-correctly/53985736#53985736", "title": "find and replace numbers to LaTeX fractions correctly", "body": "<p>As an aside, you shouldn't be scanning the input multiple times like that. Here's a much better solution:</p>\n\n<pre><code>my %map = (\n   \".25\" =&gt; \"\\\\sfrac{1}{4}\",\n   \".5\"  =&gt; \"\\\\sfrac{1}{2}\",\n   \".75\" =&gt; \"\\\\sfrac{3}{4}\",\n);\n\nmy $alt = join \"|\", map quotemeta, keys %map;    \nmy $re = qr/\\b($alt)\\b/;\n\n$var =~ s/$re/$map{$1}/g;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1546250796, "creation_date": 1546242704, "last_edit_date": 1546250796, "question_id": 53984961, "link": "https://stackoverflow.com/questions/53984961/find-and-replace-numbers-to-latex-fractions-correctly", "title": "find and replace numbers to LaTeX fractions correctly", "body": "<p>My Perl script takes in data and stores it as an array. The script then takes this data and converts it into a code which I can then copy into LaTeX.</p>\n\n<p>Part of my data includes numbers such as 4.25, 6.5, 6.75, and I wish to do a find and replace, so that 4.25 is written as 4 1/4 when pasted into LaTeX. The user is asked for the number which is stored as <code>$variable</code>. The find and replace is done as follows:</p>\n\n<pre><code>$variable =~ s/\\b.25\\b/\\\\sfrac{1}{4}/;\n$variable =~ s/\\b.5\\b/\\\\sfrac{1}{2}/;\n$variable =~ s/\\b.75\\b/\\\\sfrac{3}{4}/;                  \n</code></pre>\n\n<p>What I want it to do is to replace <code>4.25</code> with the code <code>4\\sfrac{1}{4}</code>, <code>6.5</code> with the code <code>6\\sfrac{1}{2}</code>, and <code>6.75</code> with the code <code>6\\sfrac{3}{4}</code>.</p>\n\n<p>However, when running this, it replaces the .25 and .5 correctly, but .75 is replaced with <code>.\\sfrac{1}{2}</code>. I'm confused about what it is doing.</p>\n\n<p>I did change the code around to:</p>\n\n<pre><code>$variable =~ s/\\b.25\\b/\\\\sfrac{1}{4}/;\n$variable =~ s/\\b.75\\b/\\\\sfrac{3}{4}/;                  \n$variable =~ s/\\b.5\\b/\\\\sfrac{1}{2}/;\n</code></pre>\n\n<p>and this alleviates the above problem, but when I enter the number 5.5, it then replaces the this with <code>\\sfrac{1}{2}.5</code> and not <code>5\\sfrac{1}{2}</code>.</p>\n\n<p>Also, if I need to convert the <code>@variable</code> to a string, how do I do this?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10850624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cb91153edd637a555f40442ef05452?s=128&d=identicon&r=PG&f=1", "display_name": "pavan_843", "link": "https://stackoverflow.com/users/10850624/pavan-843"}, "edited": false, "score": 0, "creation_date": 1546226711, "post_id": 53983151, "comment_id": 94803968, "body": "Thanks so much, yeah true. Its works like charm now. Another quick question, apologies for asking  Every class we usually return hash anonmouns class reference, Is it possible to return Class reference as array ?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 3, "user_id": 10850624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cb91153edd637a555f40442ef05452?s=128&d=identicon&r=PG&f=1", "display_name": "pavan_843", "link": "https://stackoverflow.com/users/10850624/pavan-843"}, "edited": false, "score": 0, "creation_date": 1546227601, "post_id": 53983151, "comment_id": 94804107, "body": "@pavan_843 objects can be any type of reference"}, {"owner": {"reputation": 3, "user_id": 10850624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cb91153edd637a555f40442ef05452?s=128&d=identicon&r=PG&f=1", "display_name": "pavan_843", "link": "https://stackoverflow.com/users/10850624/pavan-843"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1546234090, "post_id": 53983151, "comment_id": 94805133, "body": "@ysth - can you provide sample code snippet to give array reference as object. Thanking you in advance"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1546234161, "post_id": 53983151, "comment_id": 94805146, "body": "That nomenclature isn&#39;t correct. The reference isn&#39;t the object; that which is referenced is the object. So, it would be more appropriate to say &quot;Objects can be any type of <i>variable</i>.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546234364, "post_id": 53983151, "comment_id": 94805175, "body": "The following creates an array-based object: <code>sub new { bless([], $_[0]) }</code>. Since methods are invoked via a reference to the object, nothing changes on the outside. It&#39;s <code>$o-&gt;method</code> whether <code>$o</code> references an array object or a hash object."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1546290270, "post_id": 53983151, "comment_id": 94820503, "body": "Check out <a href=\"https://metacpan.org/source/SRI/Mojolicious-8.10/lib/Mojo/Collection.pm#L55-58\" rel=\"nofollow noreferrer\">Mojo::Collection</a> and <a href=\"https://metacpan.org/source/SRI/Mojolicious-8.10/lib/Mojo/ByteStream.pm#L34-37\" rel=\"nofollow noreferrer\">Mojo::ByteStream</a> for examples of arrayref and scalarref based object classes. Though unlike most objects, these are designed for their underlying structure to be accessed directly."}, {"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546414689, "post_id": 53983151, "comment_id": 94842205, "body": "@ikegami: According to the perlfunc man page and my own experience, bless only works on refs.  Also, I&#39;ve had a single variable with three different references to it each blessed to a different package, and I get an error if I try to bless a scalar.  So I think ysth was correct."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546441105, "post_id": 53983151, "comment_id": 94853557, "body": "@EdGrimm, <code>bless</code> takes a ref, but that didn&#39;t contradict anything I said. You&#39;re wrong about the reference being blessed, though. You mention <code>bless</code>&#39;s entry in perlfunc, but you obviously didn&#39;t consult it: &quot;<i>This function tells the thingy referenced by REF that it is now an object in the CLASSNAME package.</i>&quot;"}, {"owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546448635, "post_id": 53983151, "comment_id": 94857372, "body": "@ikegami: What I failed to do at way too early in the morning as I was taking a break from trying and failing to sleep was to re-test what I remembered working in the past.  If I could bless multiple references to the same thing as different classes, that would show the situation conclusively.  While I remember having done that at one point, I can&#39;t with my current perl.  Which conclusively says you and the docs are right."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546450541, "post_id": 53983151, "comment_id": 94858162, "body": "@Ed Grimm, Aside from using Devel::Peek, you can also prove what the docs and I say using <code>perl -e&#39;sub foo { } $o = bless({}); (\\%$o)-&gt;foo&#39;</code> and <code>perl -e&#39;sub foo { } bless \\%o; (\\%o)-&gt;foo&#39;</code>. This has been the case since at least 5.6"}], "tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": true, "score": 2, "last_activity_date": 1546234564, "last_edit_date": 1546234564, "creation_date": 1546225056, "answer_id": 53983151, "question_id": 53983101, "link": "https://stackoverflow.com/questions/53983101/storing-object-reference-in-hash-key-value-in-difference-class-and-to-invoke-m/53983151#53983151", "title": "Storing Object Reference in Hash Key Value (In difference Class) And To Invoke Method", "body": "<p>You're trying too hard. The left-hand side of <code>-&gt;</code> should be the reference to the object, and you stored that reference in <code>$self-&gt;{frame}</code> (not <code>%{$self-&gt;{frame}}</code>).</p>\n\n<pre><code>sub test_call\n{\n    my ($self) = shift;\n    ## invoking object reference based method\n\n    $self-&gt;{frame}-&gt;print_me;\n\n    ## Above method call will now work.\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10850624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cb91153edd637a555f40442ef05452?s=128&d=identicon&r=PG&f=1", "display_name": "pavan_843", "link": "https://stackoverflow.com/users/10850624/pavan-843"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53983151, "answer_count": 1, "score": 0, "last_activity_date": 1546234564, "creation_date": 1546224273, "question_id": 53983101, "link": "https://stackoverflow.com/questions/53983101/storing-object-reference-in-hash-key-value-in-difference-class-and-to-invoke-m", "title": "Storing Object Reference in Hash Key Value (In difference Class) And To Invoke Method", "body": "<pre><code>filename : Frames.pm\n</code></pre>\n\n<p>Below Class if the one which hosts / provide method for end user.</p>\n\n<pre><code>BEGIN\n{\n          require Exporter;\n          our @ISA = qw(Exporter);\n          our @EXPORT_OK =  qw();\n          our @EXPORT =  qw(print_me);\n\n }\n\n package Frames;\n\n sub new\n {\n     my ($clsname,$self) = @_;\n     $self = {};\n     bless $self,$clsname;\n     return $self;\n }\n\n sub print_me\n { \n      print \"Testing my Frame Object Reference call\";\n } \n\n  1;\n\n Filename = Testing.pm\n</code></pre>\n\n<p>This Class is the one, which hold the reference of frame Class object in hash key value pair. I was trying to invoke methof based on this hash value.</p>\n\n<pre><code> package Test;\n\n sub new\n {\n        my ($clsname,$frame_ref) = @_;\n        my $self = { frame =&gt; $frame_ref };   \n        # here storing frame     reference as value not key\n        bless $self,$clsname;\n        return $self;\n }\n\n sub test_call\n {\n        my ($self) = shift;\n        ## invoking object reference based method\n\n        %{$self-&gt;{frame}}-&gt;print_me;\n\n        ## Above method call is failing\n  }\n\n  Filename Test.pl\n\n  use Frames;\n\n  my $frobj = Frames-&gt;new;\n  my $testobj = Test-&gt;new($frobj); \n  # Frame object passed\n\n  $testobj-&gt;test_call;\n</code></pre>\n\n<p>Frames is the Class, which hosts/provides some method\nTest is the class which hold object of frame\nI was looking to call that object of frame through Test class.</p>\n"}, {"tags": ["php", "codeigniter", "perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 2, "creation_date": 1546224217, "post_id": 53983026, "comment_id": 94803664, "body": "Consider changing the configuration to a more language independent format, if you need to use it in multiple languages. XML, JSON, YAML, INI, etc.. Or write an adapter PHP program, that Perl can call and which reads the configuration and presents it in a way your Perl program can use it. Or If the configuration is simple enough try to write your own parser in Perl."}, {"owner": {"reputation": 137726, "user_id": 345031, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b7ec7f22d50ea13c796815c13075b08f?s=128&d=identicon&r=PG", "display_name": "mario", "link": "https://stackoverflow.com/users/345031/mario"}, "edited": false, "score": 0, "creation_date": 1546224400, "post_id": 53983026, "comment_id": 94803683, "body": "If the format is really &quot;fairly standard&quot;, then a simple regex would be able to just grep those settings."}, {"owner": {"reputation": 1644, "user_id": 5609501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rONNv.jpg?s=128&g=1", "display_name": "Sherif Salah", "link": "https://stackoverflow.com/users/5609501/sherif-salah"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1546229470, "post_id": 53983026, "comment_id": 94804354, "body": "@stickybit nothing more i can add to your explanation and i converted the whole config array to json format in my answer."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 137726, "user_id": 345031, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b7ec7f22d50ea13c796815c13075b08f?s=128&d=identicon&r=PG", "display_name": "mario", "link": "https://stackoverflow.com/users/345031/mario"}, "edited": false, "score": 0, "creation_date": 1546256382, "post_id": 53983026, "comment_id": 94811269, "body": "@mario - XML, JSON, and YAML are all &quot;fairly standard&quot; configuration formats which cannot be parsed by regexes, much less by simple ones."}], "answers": [{"tags": [], "owner": {"reputation": 1644, "user_id": 5609501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rONNv.jpg?s=128&g=1", "display_name": "Sherif Salah", "link": "https://stackoverflow.com/users/5609501/sherif-salah"}, "is_accepted": false, "score": 0, "last_activity_date": 1546230870, "last_edit_date": 1546230870, "creation_date": 1546228914, "answer_id": 53983471, "question_id": 53983026, "link": "https://stackoverflow.com/questions/53983026/include-a-php-configuration-value-in-a-perl-file/53983471#53983471", "title": "Include a PHP configuration value in a Perl file", "body": "<p>Yes you can convert you config array to a language independent format like json:</p>\n\n<pre><code>$json = json_encode($this-&gt;config-&gt;config);\n</code></pre>\n\n<p>Now that you have your config array in json format, you can save it to a file or retrieve it with an ajax request directly from your program or do whatever you wanna do with it.</p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 10826537, "user_type": "registered", "profile_image": "https://graph.facebook.com/534350650400535/picture?type=large", "display_name": "Stephanie Temple", "link": "https://stackoverflow.com/users/10826537/stephanie-temple"}, "is_accepted": true, "score": 3, "last_activity_date": 1546244320, "creation_date": 1546244320, "answer_id": 53985155, "question_id": 53983026, "link": "https://stackoverflow.com/questions/53983026/include-a-php-configuration-value-in-a-perl-file/53985155#53985155", "title": "Include a PHP configuration value in a Perl file", "body": "<p>If its a simple config file like so...</p>\n\n<pre><code>    &lt;?php\n\n/**\n*\n*  service: /www/vhosts/x456/docs/config.php\n*  program: community one\n*  version: 1.01, 01/01/2009 01:01:01\n*\n**/\n\n$config                  = array ();\n\n$config['system_admin']  = 1;\n\n$config['system_name']   = 'Community One';\n\n$config['session_name']  = 'community';\n\n$config['system_email']  = '@gmail.com';\n\n$config['system_allow']  = '127.0.0.1';\n\n$config['storage_type']  = 'file';\n\n$config['host_name']     = '';\n\n$config['service_path']  = '/';\n\n$config['system_root']   = 'c:/services/www/vhosts/x456/';\n\n$config['document_root'] = 'c:/services/www/vhosts/x456/docs/';\n\n$config['database_name'] = 'community';\n\n$config['database_host'] = 'localhost';\n\n$config['database_user'] = 'admin';\n\n$config['database_pass'] = '';\n\n$config['database_type'] = 'mysqli';\n\n$config['database_port'] = '3306';\n\n$config['database_salt'] = '*^&amp;$_';\n\n$config['min_timeout']   = 180;\n\n$config['max_timeout']   = 31557600;\n\n$config['ssl_only']      = FALSE;\n\n?&gt;\n</code></pre>\n\n<p>You could use this old script that I have...</p>\n\n<pre><code>use strict;\n\nuse warnings;\n\nuse Data::Dumper qw ( Dumper );\n\n#error log location and name\n\nmy $log = 'C:/services/www/log/errors.txt';\n\n# the hash container\n\nmy %data;\n\n# the config file processor\n\nsub configFile\n{\n    # grab the config files location\n\n    my $file = shift;\n\n    # open the config file up\n\n    open ( CONFIG, '&lt;', $file ) or logError ( 0, $file );\n\n    # read the config file, line by line\n\n    while ( my $line = &lt;CONFIG&gt; )\n    {\n        # lose the eol and any spaces  found &gt;&gt; (^|$) \n\n        $line = trim ( $line );\n\n        # move to next line if we don't have a $var\n\n        next if $line !~ /^\\$/;\n\n        # move to the next line if there is no\n        # (key = value) pair\n\n        my $find  = index $line, '=';\n\n        # grab the array &amp; key name(s) + clean them up\n\n        my $name  = rtrim ( substr $line, 0, $find );\n\n        # grab the value + clean it up\n\n        my $value = ltrim ( substr $line, ( $find + 1 ) );\n\n        # final check, skip over $var(s) = array(), []\n        # process only $var['key'] = values!\n\n        next if ( my $pos = index $name, '[' ) == -1;\n\n        # set the (hash key) name = $(hash key)\n\n        my $hash  = substr $name, 1,  ( $pos - 1 );\n\n        # set the variables (key) name = $(hash key)[(key)]\n\n        my $key   = substr $name, ( $pos + 2 ), -2;\n\n        # strip ('|'|;) from the variable(s) value\n\n        if ( $value =~ m/^'|^\"/ )\n        {\n            $value = substr $value, 1, -2;\n        }\n        else\n        {\n            $value = substr $value, 0, -1;\n        }\n\n        # add the varaible to the data hash\n\n        $data{$hash}{$key} = $value;\n    }\n\n    # done, close it\n\n    close CONFIG;\n}\n\nsub logError ( )\n{\n    my ( $type, $data ) = @_;\n\n    open ( ERRORS, '&gt;&gt;', $log );\n\n    print ERRORS $type . \", \" . $data . \"\\n\";\n\n    close ERRORS;\n\n    exit ( 0 );\n}\n\n\nsub ltrim\n{\n    my $s = shift;\n\n    $s =~ s/^\\s+//;\n\n    return $s\n};\n\nsub rtrim\n{\n    my $s = shift;\n\n    $s =~ s/\\s+$//;\n\n    return $s\n};\n\nsub trim\n{\n    my $s = shift;\n\n    $s =~ s/^\\s+|\\s+$//g;\n\n    return $s\n};\n\n\n# the php config style file to process\n\nconfigFile ( 'C:\\\\services\\\\www\\\\config.php' );\n\n# just print the $data hash out so you\n# can see what it returns\n\nprint Dumper \\%data;\n</code></pre>\n\n<p>The result would be....</p>\n\n<pre><code>$VAR1 = {\n          'config' =&gt; {\n                        'ssl_only' =&gt; 'FALSE',\n                        'database_salt' =&gt; '*^&amp;$_',\n                        'system_allow' =&gt; '127.0.0.1',\n                        'system_email' =&gt; '@gmail.com',\n                        'max_timeout' =&gt; '31557600',\n                        'database_type' =&gt; 'mysqli',\n                        'database_pass' =&gt; '',\n                        'storage_type' =&gt; 'file',\n                        'database_user' =&gt; 'admin',\n                        'min_timeout' =&gt; '180',\n                        'system_admin' =&gt; '1',\n                        'system_name' =&gt; 'Community One',\n                        'system_root' =&gt; 'c:/services/www/vhosts/x456/',\n                        'database_host' =&gt; 'localhost',\n                        'database_port' =&gt; '3306',\n                        'session_name' =&gt; 'community',\n                        'service_path' =&gt; '/',\n                        'database_name' =&gt; 'community',\n                        'host_name' =&gt; '',\n                        'document_root' =&gt; 'c:/services/www/vhosts/x456/docs/'\n                      }\n        };\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 5052042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9gJ9o.jpg?s=128&g=1", "display_name": "neophytte", "link": "https://stackoverflow.com/users/5052042/neophytte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 1, "accepted_answer_id": 53985155, "answer_count": 2, "score": 1, "last_activity_date": 1546244320, "creation_date": 1546223049, "last_edit_date": 1546243057, "question_id": 53983026, "link": "https://stackoverflow.com/questions/53983026/include-a-php-configuration-value-in-a-perl-file", "title": "Include a PHP configuration value in a Perl file", "body": "<p>I have a PHP application in <strong>CodeIgniter (v2.x)</strong> which has a configuration file, this has values in a fairly standard PHP format, such as:</p>\n\n<pre><code>$config['key1'] = 'value1';\n$config['key2'] = 'value2';\n</code></pre>\n\n<p>I'm writing a Perl program to be run on a nightly basis to parse information into a database for the PHP to use/display, can I get the Perl program to read the configuration values from PHP?</p>\n\n<p>I've tried to <code>PHP::Include module</code>, but the Perl values generated appears to be blank (using the DEBUG) module. I've also tried the <code>Config::IniFiles module</code>, but my source is not configured as an <code>ini</code> file.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "functional-programming"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1546209400, "post_id": 53981059, "comment_id": 94801382, "body": "Look into <code>part</code> from List::MoreUtils"}, {"owner": {"reputation": 11684, "user_id": 1990570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1hso.png?s=128&g=1", "display_name": "tobyink", "link": "https://stackoverflow.com/users/1990570/tobyink"}, "edited": false, "score": 1, "creation_date": 1546209615, "post_id": 53981059, "comment_id": 94801441, "body": "<a href=\"https://metacpan.org/pod/List::MapMulti\" rel=\"nofollow noreferrer\">List::MapMulti</a> might be of use?"}], "answers": [{"tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": true, "score": 3, "last_activity_date": 1546213252, "creation_date": 1546213252, "answer_id": 53982336, "question_id": 53981059, "link": "https://stackoverflow.com/questions/53981059/how-do-i-abstract-multiple-nested-loops/53982336#53982336", "title": "How do I abstract multiple nested loops?", "body": "<p>You may look for a recursive solution?</p>\n\n<p>For <em>p</em> = 1 <code>slices</code> just returns all of the items together. For <em>p</em> > 1 it takes the first <em>n</em> items and joins the items for <em>p</em> - 1 for each 1 &lt;= <em>n</em> &lt; the number of items.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dump qw(dump);\n\nmy @a = 'A' .. 'F';\n\nfor (my $i = 1; $i &lt;= 4; $i++) {\n  warn(\"p = $i\\n\");\n  dump(slices($i, @a));\n};\n\nsub slices\n{\n  my $p = shift();\n  my @a = @_;\n\n  my @ret;\n\n  if ($p == 1) {\n    push(@ret, [[@a]]);\n  }\n  else {\n    for (my $i = 0; $i &lt; $#a; $i++) {\n      foreach (slices($p - 1, @a[($i + 1) .. $#a])) {\n        push(@ret, [([@a[0 .. $i]], @{$_})]);\n      }\n      # or shorter:\n      #push(@ret, map({[([@a[0 .. $i]], @{$_})]} slices($p - 1, @a[($i + 1) .. $#a])));\n    }\n  }\n\n  return @ret;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>p = 1\n[[\"A\" .. \"F\"]]\np = 2\n(\n  [[\"A\"], [\"B\" .. \"F\"]],\n  [[\"A\", \"B\"], [\"C\" .. \"F\"]],\n  [[\"A\", \"B\", \"C\"], [\"D\", \"E\", \"F\"]],\n  [[\"A\" .. \"D\"], [\"E\", \"F\"]],\n  [[\"A\" .. \"E\"], [\"F\"]],\n)\np = 3\n(\n  [[\"A\"], [\"B\"], [\"C\" .. \"F\"]],\n  [[\"A\"], [\"B\", \"C\"], [\"D\", \"E\", \"F\"]],\n  [[\"A\"], [\"B\", \"C\", \"D\"], [\"E\", \"F\"]],\n  [[\"A\"], [\"B\" .. \"E\"], [\"F\"]],\n  [[\"A\", \"B\"], [\"C\"], [\"D\", \"E\", \"F\"]],\n  [[\"A\", \"B\"], [\"C\", \"D\"], [\"E\", \"F\"]],\n  [[\"A\", \"B\"], [\"C\", \"D\", \"E\"], [\"F\"]],\n  [[\"A\", \"B\", \"C\"], [\"D\"], [\"E\", \"F\"]],\n  [[\"A\", \"B\", \"C\"], [\"D\", \"E\"], [\"F\"]],\n  [[\"A\" .. \"D\"], [\"E\"], [\"F\"]],\n)\np = 4\n(\n  [[\"A\"], [\"B\"], [\"C\"], [\"D\", \"E\", \"F\"]],\n  [[\"A\"], [\"B\"], [\"C\", \"D\"], [\"E\", \"F\"]],\n  [[\"A\"], [\"B\"], [\"C\", \"D\", \"E\"], [\"F\"]],\n  [[\"A\"], [\"B\", \"C\"], [\"D\"], [\"E\", \"F\"]],\n  [[\"A\"], [\"B\", \"C\"], [\"D\", \"E\"], [\"F\"]],\n  [[\"A\"], [\"B\", \"C\", \"D\"], [\"E\"], [\"F\"]],\n  [[\"A\", \"B\"], [\"C\"], [\"D\"], [\"E\", \"F\"]],\n  [[\"A\", \"B\"], [\"C\"], [\"D\", \"E\"], [\"F\"]],\n  [[\"A\", \"B\"], [\"C\", \"D\"], [\"E\"], [\"F\"]],\n  [[\"A\", \"B\", \"C\"], [\"D\"], [\"E\"], [\"F\"]],\n)\n</code></pre>\n</blockquote>\n\n<p>(Might need some tweaks. Like checking that 1 &lt;= <em>p</em> &lt;= number of items.)</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546253622, "post_id": 53982347, "comment_id": 94810387, "body": "Oops, removed mention of a function that didn&#39;t do the right thing!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1546256088, "last_edit_date": 1546256088, "creation_date": 1546213358, "answer_id": 53982347, "question_id": 53981059, "link": "https://stackoverflow.com/questions/53981059/how-do-i-abstract-multiple-nested-loops/53982347#53982347", "title": "How do I abstract multiple nested loops?", "body": "<p>You want <a href=\"http://search.cpan.org/perldoc?Algorithm::Loops\" rel=\"nofollow noreferrer\">Algorithm::Loop</a>'s <code>NestedLoops</code> when you need an arbitrary number of nested loops.</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\n\nsub list_segments {\n   my ($array, $p) = @_;\n\n   my $iter = NestedLoops([\n      [ 0 ],\n      ( map { my $d = $_;   sub { [ $_+1 .. @$array-($p-$d) ] }   } 1 .. $p-1 ),\n      [ 0+@$array ],\n   ]);\n\n   return sub {\n      my @split_points = $iter-&gt;()\n         or return ();\n\n      return [\n         map [ @$array[ $split_points[$_] .. $split_points[$_+1]-1 ] ],\n            0..$#split_points-1\n      ];\n   };\n}\n</code></pre>\n\n<p>This can be tested using the following:</p>\n\n<pre><code>use Data::Dump qw( dd );\n\nmy $iter = list_segments(['A'..'F'], 3);\nwhile ( my $list_segments = $iter-&gt;() ) {\n   dd($list_segments);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[\"A\"], [\"B\"], [\"C\" .. \"F\"]]\n[[\"A\"], [\"B\", \"C\"], [\"D\", \"E\", \"F\"]]\n[[\"A\"], [\"B\", \"C\", \"D\"], [\"E\", \"F\"]]\n[[\"A\"], [\"B\" .. \"E\"], [\"F\"]]\n[[\"A\", \"B\"], [\"C\"], [\"D\", \"E\", \"F\"]]\n[[\"A\", \"B\"], [\"C\", \"D\"], [\"E\", \"F\"]]\n[[\"A\", \"B\"], [\"C\", \"D\", \"E\"], [\"F\"]]\n[[\"A\", \"B\", \"C\"], [\"D\"], [\"E\", \"F\"]]\n[[\"A\", \"B\", \"C\"], [\"D\", \"E\"], [\"F\"]]\n[[\"A\" .. \"D\"], [\"E\"], [\"F\"]]\n</code></pre>\n\n<hr>\n\n<p>By the way, an easy way to test solutions is to compare the number of results against C(N-1, p-1) = (N-1)! / (N-p)! / (p-1)! since you're effectively choosing p-1 split points from the N-1 possible split points.</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 53982336, "answer_count": 2, "score": 6, "last_activity_date": 1546256088, "creation_date": 1546200647, "question_id": 53981059, "link": "https://stackoverflow.com/questions/53981059/how-do-i-abstract-multiple-nested-loops", "title": "How do I abstract multiple nested loops?", "body": "<p>Given, slicing an array into p parts of size \u2265 1 each:</p>\n\n<pre><code>my @a = 'A'..'F';\n\n# p = 1\nmy @p1 = [@a];\n# [\"A\" .. \"F\"]\n\n# p = 2\nmy @p2;\nfor my $x (0..@a-2) {\n    push @p2, [\n        [@a[0..$x]],\n        [@a[$x+1..@a-1]],\n    ];\n}\n# [[\"A\"], [\"B\" .. \"F\"]],\n# [[\"A\", \"B\"], [\"C\" .. \"F\"]],\n# [[\"A\", \"B\", \"C\"], [\"D\", \"E\", \"F\"]],\n# [[\"A\" .. \"D\"], [\"E\", \"F\"]],\n# [[\"A\" .. \"E\"], [\"F\"]],\n\n\n# p = 3\nmy @p3;\nfor my $x (0..@a-3) {\n    for my $y ($x+1..@a-2) {\n        push @p3, [\n            [@a[0..$x]],\n            [@a[$x+1..$y]],\n            [@a[$y+1..@a-1]],\n        ];\n    }\n}\n# [[\"A\"], [\"B\"], [\"C\" .. \"F\"]],\n# [[\"A\"], [\"B\", \"C\"], [\"D\", \"E\", \"F\"]],\n# [[\"A\"], [\"B\", \"C\", \"D\"], [\"E\", \"F\"]],\n# [[\"A\"], [\"B\" .. \"E\"], [\"F\"]],\n# [[\"A\", \"B\"], [\"C\"], [\"D\", \"E\", \"F\"]],\n# [[\"A\", \"B\"], [\"C\", \"D\"], [\"E\", \"F\"]],\n# [[\"A\", \"B\"], [\"C\", \"D\", \"E\"], [\"F\"]],\n# [[\"A\", \"B\", \"C\"], [\"D\"], [\"E\", \"F\"]],\n# [[\"A\", \"B\", \"C\"], [\"D\", \"E\"], [\"F\"]],\n# [[\"A\" .. \"D\"], [\"E\"], [\"F\"]],\n\n\n# p = 4\nmy @p4;\nfor my $x (0..@a-4) {\n    for my $y ($x+1..@a-3) {\n        for my $z ($y+1..@a-2) {\n            push @p4, [\n                [@a[0..$x]],\n                [@a[$x+1..$y]],\n                [@a[$y+1..$z]],\n                [@a[$z+1..@a-1]],\n            ];\n        }\n    }\n}\n# [[\"A\"], [\"B\"], [\"C\"], [\"D\", \"E\", \"F\"]],\n# [[\"A\"], [\"B\"], [\"C\", \"D\"], [\"E\", \"F\"]],\n# [[\"A\"], [\"B\"], [\"C\", \"D\", \"E\"], [\"F\"]],\n# [[\"A\"], [\"B\", \"C\"], [\"D\"], [\"E\", \"F\"]],\n# [[\"A\"], [\"B\", \"C\"], [\"D\", \"E\"], [\"F\"]],\n# [[\"A\"], [\"B\", \"C\", \"D\"], [\"E\"], [\"F\"]],\n# [[\"A\", \"B\"], [\"C\"], [\"D\"], [\"E\", \"F\"]],\n# [[\"A\", \"B\"], [\"C\"], [\"D\", \"E\"], [\"F\"]],\n# [[\"A\", \"B\"], [\"C\", \"D\"], [\"E\"], [\"F\"]],\n# [[\"A\", \"B\", \"C\"], [\"D\"], [\"E\"], [\"F\"]],\n</code></pre>\n\n<p>How do I abstract out the increasing number of nested loops to turn it into a sub <code>slices(Int $p, Array @a)</code>? I guess I need some sort of higher-order <code>foreach</code>.</p>\n"}, {"tags": ["multithreading", "perl", "promise", "queue", "future"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1546153877, "post_id": 53975692, "comment_id": 94789306, "body": "How does your code fail? You never <code>-&gt;await</code> the future or anything."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1546155273, "post_id": 53975692, "comment_id": 94789487, "body": "If there is a bit of networking that you do with Mojo anyway and this fits in nicely then so be it; otherwise I don&#39;t see what is wrong with simple forking. Basic queueing is implemented with <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> and the code is going to be a fraction of complexity of this, far shorter and simpler.  There is also <a href=\"https://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\">Forks::Super</a>, with which you can do far more."}, {"owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546409306, "post_id": 53975692, "comment_id": 94840580, "body": "Thank you @Corion this solves the problem."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1546289752, "creation_date": 1546289752, "answer_id": 53991355, "question_id": 53975692, "link": "https://stackoverflow.com/questions/53975692/using-mojopromise-in-a-stand-alone-perl-script/53991355#53991355", "title": "Using Mojo::Promise in a stand-alone Perl script", "body": "<p>Since you are not using this code in an already running event loop, you need to run the event loop yourself for anything to happen. The easiest way to do this is to wait for your Futures to complete.</p>\n\n<pre><code>$result_f-&gt;await;\n</code></pre>\n\n<p>There's no need to keep a separate <code>$result_future</code> reference in this case, because this statement will block until the Futures are ready. This and the related <code>-&gt;get</code> (which is just <code>-&gt;await</code>, return results if successful, throw exception if failed) is the primary mechanism that Futures allow you to run non-blocking code in a sequential manner.</p>\n"}], "owner": {"reputation": 510, "user_id": 2035207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23407540c4b23ef4f9b4ef62677576ae?s=128&d=identicon&r=PG", "display_name": "h q", "link": "https://stackoverflow.com/users/2035207/h-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 53991355, "answer_count": 1, "score": 1, "last_activity_date": 1546289752, "creation_date": 1546151042, "question_id": 53975692, "link": "https://stackoverflow.com/questions/53975692/using-mojopromise-in-a-stand-alone-perl-script", "title": "Using Mojo::Promise in a stand-alone Perl script", "body": "<p>In a stand-alone Perl script, I need to make concurrent calls to an external Web Service (simulated below in <code>$number+1</code>). I thought I'd re-use my Mojo::Promise code, but it didn't work - the <code>on_done()</code> code does not execute. </p>\n\n<p>I'm open to using better approaches in Perl (queues?).</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse Mojo::IOLoop;\nuse Mojo::Promise;\nuse Future::Utils 'fmap_concat';\n\n####### STASH ######\nmy $result_future; #\n####################\n\nmy $count = 100;\nmy @numbers = 1..$count;\n\nif (@numbers) {\n    my $result_f = fmap_concat {\n        my $number = shift;\n        my $p = Mojo::Promise-&gt;new;\n        Mojo::IOLoop-&gt;subprocess(\n            sub {\n                #sleep 2;\n                return $number+1;\n            },\n            sub {\n                my ($subprocess, $err, @result) = @_;\n                return $p-&gt;reject($err) if $err;\n                $p-&gt;resolve(@result);\n            });\n        return $p-&gt;with_roles('Mojo::Promise::Role::Futurify')-&gt;futurify;\n    } foreach =&gt; \\@numbers, concurrent =&gt; 20;\n\n    $result_f\n        -&gt;on_done(\n        sub {\n            my @values = @_;\n            foreach my $response (@values) {\n                print STDERR \"Response='$response'\\n\";\n            }\n        })\n        -&gt;on_fail(\n        sub {\n            my $error = shift;\n            print STDERR \"# ERROR='$error'\\n\";\n        })\n        -&gt;on_ready(\n        sub {\n            $result_future = undef;\n        })\n        ;\n\n    # Must keep a reference to Futures until we're done with them.\n    $result_future = $result_f;\n}\nprint STDERR \"Processing $count numbers\\n\"\n</code></pre>\n"}, {"tags": ["perl", "function-prototypes"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1546142018, "post_id": 53975033, "comment_id": 94787958, "body": "Fundamentally, what you ask is impossible. Protototyes don&#39;t add arguments checks; prototypes change parsing rules for the sub calls. There are must therefore be known before the sub calls are made."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1546142026, "post_id": 53975033, "comment_id": 94787959, "body": "Why do you put your sub decls at the bottom in the first place? It&#39;s just inviting scope leak. So both the reason you ask and to prevent the subs from capturing vars they shouldn&#39;t, put your subs before your code."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1546142753, "post_id": 53975033, "comment_id": 94788034, "body": "You could also use <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\"><code>PPI</code></a> to preprocess the source file, extract sub prototypes and put them into a separate file, for example, that you later can <code>require</code> at the top of your source file. See this <a href=\"https://metacpan.org/pod/Devel::Examine::Subs\" rel=\"nofollow noreferrer\">module</a> for more inspiration."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546144597, "post_id": 53975033, "comment_id": 94788229, "body": "@ikegami The example shows one example where you cannot put the declarations first: mysub calls mysub2 which calls mysub."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1546145648, "post_id": 53975033, "comment_id": 94788338, "body": "So what? Use a forward declaration in those extremely rare cases."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1546154006, "post_id": 53975033, "comment_id": 94789322, "body": "If you want (some resemblance of) parameter checking, switch to using &quot;proper&quot; subroutine signatures. These die (at runtime) when a subroutine is called with an invalid number of parameters. <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 5, "creation_date": 1546154022, "post_id": 53975033, "comment_id": 94789323, "body": "In case you are not aware of it, since v5.20 there are <a href=\"https://perldoc.perl.org/perlsub.html#Signatures\" rel=\"nofollow noreferrer\">subroutine signatures</a>, with this precise purpose. There is an in depth discussion <a href=\"https://www.effectiveperlprogramming.com/2015/04/use-v5-20-subroutine-signatures/\" rel=\"nofollow noreferrer\">in Effective Perler</a>. They are experimental, and if that kills the deal then I think you&#39;re left with manual checking, in the design spirit of Perl. There are modules to aid the checking (but for me they <i>add</i> work). Prototypes are just not meant for what you want."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1546155070, "post_id": 53975033, "comment_id": 94789455, "body": "You can always get forward compatibility with the subroutine signatures by using (my module) <a href=\"https://metacpan.org/pod/Filter::signatures\" rel=\"nofollow noreferrer\">Filter::signatures</a>, but it&#39;s a source filter with all the caveats that entails. On the upside, it&#39;s a source filter for source code you control so you can adapt your code to it."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1546289585, "post_id": 53977039, "comment_id": 94820381, "body": "The experimental subroutine signatures do indeed do argument count checking. <a href=\"https://metacpan.org/pod/Function::Parameters\" rel=\"nofollow noreferrer\">Function::Parameters</a> is a similar extension that&#39;s usable on Perl 5.14+ and additionally can perform Type::Tiny type checking."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 4, "last_activity_date": 1546167226, "last_edit_date": 1592644375, "creation_date": 1546167226, "answer_id": 53977039, "question_id": 53975033, "link": "https://stackoverflow.com/questions/53975033/make-perl-look-ahead-for-sub-prototypes/53977039#53977039", "title": "Make perl look ahead for sub prototypes", "body": "<blockquote>\n<p>To avoid this I would like to use prototypes to make sure each <code>sub</code> is given the correct amount of arguments.</p>\n</blockquote>\n<p>No, you would not.  Despite the similarity in name, Perl prototypes <em>are not</em> your father's function prototypes.  Quoting <a href=\"http://www.modernperlbooks.com/mt/2009/08/the-problem-with-prototypes.html\" rel=\"nofollow noreferrer\">The Problem with Prototypes</a> (emphasis mine),</p>\n<blockquote>\n<p>Perl 5's prototypes serve two purposes. First, they're hints to the parser to change the way it parses subroutines and their arguments. Second, they change the way Perl 5 handles arguments to those subroutines when it executes them. <strong>A common novice mistake is to assume that they serve the same language purpose as subroutine signatures in other languages. This is not true.</strong></p>\n</blockquote>\n<p>In addition to them not having the same intended purpose, bypassing prototypes is trivial, so they provide no actual protection against someone who deliberately wishes to call your code in (what you believe to be) the &quot;wrong&quot; way.  As <a href=\"https://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\"><code>perldoc perlsub</code></a> tells us,</p>\n<blockquote>\n<p>The function declaration must be visible at compile time. The prototype affects only interpretation of new-style calls to the function, where new-style is defined as not using the <code>&amp;</code> character. In other words, if you call it like a built-in function, then it behaves like a built-in function. If you call it like an old-fashioned subroutine, then it behaves like an old-fashioned subroutine. It naturally falls out from this rule that prototypes have no influence on subroutine references like <code>\\&amp;foo</code> or on indirect subroutine calls like <code>&amp;{$subref}</code> or <code>$subref-&gt;()</code>.</p>\n<p>Method calls are not influenced by prototypes either, because the function to be called is indeterminate at compile time, since the exact code called depends on inheritance.</p>\n</blockquote>\n<p>Even if you could get it to complain about <code>mysub(8,2)</code>, <code>&amp;mysub(8,2)</code> or <code>$subref = \\&amp;mysub; $subref-&gt;(8,2)</code> or (if <code>mysub</code> were an object method inside <code>package MyModule</code>) <code>$o = MyModule-&gt;new; $o-&gt;mysub(8,2)</code> would work without complaint.</p>\n<p>If you want to validate how your subs are called using core Perl (prior to 5.20), then you need to perform the validation yourself within the body of the sub.  Perl 5.20 and newer have a (&quot;experimental&quot; at the time of this writing) <a href=\"https://perldoc.perl.org/perlsub.html#Signatures\" rel=\"nofollow noreferrer\">Signatures</a> extension to sub declarations which may work for your purposes, but I've never used it myself, so I can't speak to its effectiveness or limitations.  There are also many <a href=\"https://metacpan.org/\" rel=\"nofollow noreferrer\">CPAN</a> modules available for handling this sort of thing, which you can find by doing searches for things like &quot;signature&quot; or &quot;prototype&quot;.</p>\n<p>Regardless of your chosen approach, you will not be able to get compile-time errors about incorrect function signatures unless you define those signatures before they are used.  In cases such as your example, where two subs mutually call each other, this can be accomplished by using a forward declaration to establish its signature in advance:</p>\n<pre><code>sub mysub($foo);                               # Forward declaration\nsub mysub2 { mysub(8) }\nsub mysub  { mysub2('infinite loops ftw!') }   # Complete version of the code\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1546167226, "creation_date": 1546139910, "last_edit_date": 1546140219, "question_id": 53975033, "link": "https://stackoverflow.com/questions/53975033/make-perl-look-ahead-for-sub-prototypes", "title": "Make perl look ahead for sub prototypes", "body": "<p>Perl is a bit too forgiving: If you pass extra arguments to <code>sub</code>s they are simply ignored.</p>\n\n<p>To avoid this I would like to use prototypes to make sure each <code>sub</code> is given the correct amount of arguments.</p>\n\n<p>This works OK as long as I declare the prototype before using it:</p>\n\n<pre><code>sub mysub($);\nsub mysub2($);\n\nmysub(8);\nmysub(8,2); # Complain here                                                            \n\nsub mysub($) {\n    mysub2($@);\n}\n\nsub mysub2($) {\n    if($_[0] == 1) {\n        mysub(2);\n    }\n    print $@;\n}\n</code></pre>\n\n<p>But I really hate splitting this up. I would much rather that Perl read the full file to see if there are declarations further down. So I would like to  write something like:</p>\n\n<pre><code>use prototypes_further_down; # This does not work\n\nmysub(8);\nmysub(8,2); # Complain here                                                            \n\nsub mysub($) {\n    mysub2($@);\n}\n\nsub mysub2($) {\n    if($_[0] == 1) {\n        mysub(2);\n    }\n    print $@;\n}\n</code></pre>\n\n<p>Can I somehow ask Perl to do that?</p>\n"}, {"tags": ["perl", "sockets", "udp"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546102839, "post_id": 53971243, "comment_id": 94780628, "body": "UDP does not know of a connection, so there is no <code>accept</code> call there."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546103540, "post_id": 53971243, "comment_id": 94780871, "body": "You need to use <code>recv</code> and <code>send</code> with the socket addresses. Example in the documentation: <a href=\"http://perldoc.perl.org/perlipc.html#UDP%3a-Message-Passing\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlipc.html#UDP%3a-Message-Passing</a>"}, {"owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "edited": false, "score": 0, "creation_date": 1546104682, "post_id": 53971243, "comment_id": 94781157, "body": "yes that solved it!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546124031, "post_id": 53971243, "comment_id": 94785499, "body": "Re &quot;<i>UDP does not know of a connection</i>&quot;, True, but you can still call <code>connect</code> to set the default address for <code>send</code>, effectively making it look like there&#39;s a concept of connection if you only want to talk to one peer. In the OP&#39;s case, the clients could use this trick, but not the server."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "is_accepted": false, "score": 1, "last_activity_date": 1546105582, "creation_date": 1546105582, "answer_id": 53971934, "question_id": 53971243, "link": "https://stackoverflow.com/questions/53971243/perl-udp-server-how-to-retrieve-client-socket/53971934#53971934", "title": "Perl UDP Server: How to retrieve client socket?", "body": "<p>1) Save each client from which a datagram was received:</p>\n\n<pre><code>push @client, $sock-&gt;peername;\n</code></pre>\n\n<p>2) At some point send them an answer - all at once:</p>\n\n<pre><code>for my $client( @client) {\n    #send SOCKET,MSG,FLAGS,**TO**\n    send($sock, \"Hey\\n\", 0, $client);\n    #                       ^^^^^^^ 4.Parameter: TO\n}\n</code></pre>\n"}], "owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546105582, "creation_date": 1546100541, "question_id": 53971243, "link": "https://stackoverflow.com/questions/53971243/perl-udp-server-how-to-retrieve-client-socket", "title": "Perl UDP Server: How to retrieve client socket?", "body": "<p>It is easy to get the client socket using a TCP server:</p>\n\n<pre><code>$new_sock = $sock-&gt;accept();\n</code></pre>\n\n<p>However with a UDP server there seems no way to retrieve the client socket so I can refer to it later.</p>\n\n<pre><code>Client_A-&gt;UDPServer (store client socket)\nClient_B-&gt;UDPServer\nClient_B&lt;-UDPServer\nClinet_A&lt;-UDPServer (retrieve client socket)\n</code></pre>\n"}, {"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1546099752, "post_id": 53971150, "comment_id": 94779813, "body": "See the documentation on <a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">readline</a> and <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">the diamond operator</a>"}, {"owner": {"reputation": 97, "user_id": 1881784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587b10d7454d26b337ba52e7168254d?s=128&d=identicon&r=PG", "display_name": "Diego Buendia", "link": "https://stackoverflow.com/users/1881784/diego-buendia"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1546105699, "post_id": 53971150, "comment_id": 94781422, "body": "My curiosity is satisfied, thank you. &lt;b&gt;&amp;lt;$SOCKET&gt; means &quot;read from the SOCKET stream&quot;."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1546222225, "post_id": 53971150, "comment_id": 94803409, "body": "It doesn&#39;t though. The <code>&lt;$handle&gt;</code> means read a &quot;line&quot; from <code>$handle</code> whether the handle is connected to a socket or a simple file. Note also the difference between &quot;<i>read a line from</i>&quot; and plain &quot;<i>read from</i>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1546137865, "post_id": 53972498, "comment_id": 94787499, "body": "re &quot;looks like a glob pattern&quot;, other way around; only a couple cases are treated as readline, almost everything else as glob"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 6, "last_activity_date": 1546110147, "last_edit_date": 1546110147, "creation_date": 1546109846, "answer_id": 53972498, "question_id": 53971150, "link": "https://stackoverflow.com/questions/53971150/what-does-the-perl-syntax-variable-mean/53972498#53972498", "title": "What does the Perl syntax &lt;$VARIABLE&gt; mean?", "body": "<p>The <code>&lt; &gt;</code> (also known as \"the diamond operator\") are a shorthand for <code>readline</code>. The thing inside the brackets provides lines of input. That could be a file handle, pipe, socket, or some other such thing. In your case, it's the variable <code>$SOCKET</code> that stores the socket you created.</p>\n\n<p>A call to <code>&lt;$SOCKET&gt;</code> reads the next line from that input.</p>\n\n<p>There's a bit of a trick though. In some other cases the <code>&lt; &gt;</code> is a shorthand for <code>glob</code>. If the thing inside the angles looks like a glob pattern, the <code>&lt; &gt;</code> returns the list of files that match that pattern:</p>\n\n<pre><code> my @files = &lt;*.txt&gt;;\n</code></pre>\n\n<p>That's some old syntax that you might see; I prefer to spell it out though:</p>\n\n<pre><code> my @files = glob( '*.txt' );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1546120132, "creation_date": 1546120132, "answer_id": 53973600, "question_id": 53971150, "link": "https://stackoverflow.com/questions/53971150/what-does-the-perl-syntax-variable-mean/53973600#53973600", "title": "What does the Perl syntax &lt;$VARIABLE&gt; mean?", "body": "<ul>\n<li><code>&lt;&gt;</code> means <code>readline(ARGV)</code></li>\n<li><code>&lt;IDENTIFIER&gt;</code> means <code>readline(IDENTIFIER)</code></li>\n<li><code>&lt;$IDENTIFIER&gt;</code> means <code>readline($IDENTIFIER)</code></li>\n<li><code>&lt;...&gt;</code> (anything else) means <code>glob(qq&lt;...&gt;)</code></li>\n</ul>\n\n<p>You are using the third syntax, so <code>&lt;$SOCKET&gt;</code> means <a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\"><code>readline($SOCKET)</code></a>. You are using it in scalar context, so it reads a line from <code>$SOCKET</code>.</p>\n"}], "owner": {"reputation": 97, "user_id": 1881784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587b10d7454d26b337ba52e7168254d?s=128&d=identicon&r=PG", "display_name": "Diego Buendia", "link": "https://stackoverflow.com/users/1881784/diego-buendia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547996640, "creation_date": 1546099701, "last_edit_date": 1547996640, "question_id": 53971150, "link": "https://stackoverflow.com/questions/53971150/what-does-the-perl-syntax-variable-mean", "title": "What does the Perl syntax &lt;$VARIABLE&gt; mean?", "body": "<p>Just can't find what this syntax (<code>&lt;$SOCKET&gt;</code>) does, although I guess it is some kind of default evaluation or behavior for the object inside the variable.</p>\n\n<p>I was trying to test my Apache server (after installing the <b>mod_evasive</b> module) with this supposed-to-be DoS probe (this goes inside a 100-times loop), but it always returns a response <b>400 Bad Request</b>. Trying to decypher the code, I've got stuck with the commented line below.</p>\n\n<pre><code>use IO::Socket;\nuse strict;\n\nmy($response);\nmy($SOCKET) = new IO::Socket::INET( Proto   =&gt; \"tcp\",\n                                  PeerAddr=&gt; \"127.0.0.1:80\");\nif (! defined $SOCKET) { die $!; }\nprint $SOCKET \"GET / HTTP/1.1\\n\\n\";\n\n$response = &lt;$SOCKET&gt;; ## What are those &lt; &gt; signs???\n\nprint $response;\nclose($SOCKET);\n</code></pre>\n\n<p>Then main interest I have is to be able of playing the test, so I need to know, first of all, why I get the 400 error code to fix it.</p>\n\n<p>But also, BTW, for the sake of curiosity I'd like to understand the <code>&lt;$SOCKET&gt;</code> syntax meaning, because I can't find it explained anywhere.</p>\n"}, {"tags": ["perl", "selenium", "cookies", "lwp-useragent"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546099029, "post_id": 53970518, "comment_id": 94779608, "body": "You will need to compare what LWP::UserAgent sends with what your browser sends. Maybe the UA is different or some other fingerprint, or some other headers are missing."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1546112094, "post_id": 53970518, "comment_id": 94783070, "body": "@Corion I added all the headers that I can see in the firefox request. All the lines that start with: &quot;$ua-&gt;default_header(&quot;"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1546464688, "post_id": 53970518, "comment_id": 94863832, "body": "When you login manually how do you know which file to download? How do you know the correct URL?"}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1546477637, "post_id": 53970518, "comment_id": 94867344, "body": "@Andrey there are fixed ids when wich do not change."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1546531501, "post_id": 53970518, "comment_id": 94887948, "body": "If you know the URL, after you login you should be able to do $driver-&gt;get(&#39;<a href=\"https://example.com/myfile.tcx&#39;\" rel=\"nofollow noreferrer\">example.com/myfile.tcx&#39;</a>);"}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1546546178, "post_id": 53970518, "comment_id": 94894513, "body": "@Andrey, that works for the first file, but then it is stucked there. It seems as the driver waits for the website to load but is just downloaded in the browser and does not realize the connection was successful."}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1546095229, "creation_date": 1546094581, "last_edit_date": 1546095229, "question_id": 53970518, "link": "https://stackoverflow.com/questions/53970518/is-it-possible-to-share-a-session-between-selenium-and-a-lwpuseragent", "title": "Is it possible to share a session between Selenium and a LWP::UserAgent?", "body": "<p>I'm trying to download a file from a website which requires a login process. This process can be done manually as follows:</p>\n\n<ol>\n<li>Open the browser and login into the page</li>\n<li>If you have the url just enter it and you will access the file.</li>\n</ol>\n\n<p>My problem is more complex that that, and I have to do some processing to get that url with selenium. But I'm not able to download the file with the common approaches:</p>\n\n<ol>\n<li>Getting the url (I get a croak which can not be escaped with try/catch).</li>\n<li>Generating a javascript element and clicking it generates an exception in the website.</li>\n</ol>\n\n<p>So my new approach would be:</p>\n\n<ol>\n<li>Do the login stuff with selenium.</li>\n<li>Take the cookies and headers which are done in the request.</li>\n<li>Make the request with selenium.</li>\n</ol>\n\n<p>This is how I do it:</p>\n\n<pre><code>use Selenium::Firefox;\nuse strict;\nuse warnings;\nuse utf8;\nuse Selenium::Waiter qw/wait_until/;\n\nuse LWP::UserAgent;\nuse File::Temp;\nuse HTTP::Cookies;\nuse Data::Dumper qw/Dumper/;\n\n\nmy $driver = Selenium::Firefox-&gt;new(marionette_enabled =&gt; 1 );\n$driver-&gt;set_implicit_wait_timeout(3000);\n\n$driver-&gt;get('https://example.com');\n\n# processing and login\n\nmy $uri = 'https://example.com/myfile.tcx';\n\nprint \"Downloading the following file: $url\\n\";\n\nmy $cookies = $driver-&gt;get_all_cookies();\n\n# Create temporary file to download\nmy $tmp = File::Temp-&gt;new( TEMPLATE =&gt; 'myTemplateXXXX', SUFFIX=&gt;'.tcx', UNLINK=&gt;0 );\n\nmy $cookie_jar_obj = HTTP::Cookies-&gt;new(ignore_discard=&gt;1,hide_cookie2=&gt;1);\nmy $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;cookie_jar( $cookie_jar_obj );\n\nforeach my $cookie_ref (@{$cookies}){\n  my %cookie = %{$cookie_ref};\n  my $name = $cookie{'name'};# - STRING\n  my $value = $cookie{'value'};# - STRING\n  my $path = $cookie{'path'};# - STRING\n  my $domain = $cookie{'domain'};# - STRING\n  my $secure = $cookie{'secure'};# - BOOLEAN\n\n  print \"Name: $name \";\n  print \"Value: $value \";\n  print \"Path: $path \";\n  print \"Domain: $domain \";\n  print \"Secure: $secure \\n\";\n\n  $cookie_jar_obj-&gt;set_cookie(0, $name, $value\n                             , $path, $domain, 443\n                             , '', $secure, 14400000, 0\n                    );\n}\n\n\n\nprint \"Cookies to be sent:\\n\";\nprint Dumper($cookie_jar_obj-&gt;get_cookies( \".myhost.com\" ));\n\n$ua-&gt;default_header('Accept' =&gt; \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\");\n$ua-&gt;default_header('Accept-Encoding' =&gt; \"gzip, deflate, br\");\n$ua-&gt;default_header('Accept-Language' =&gt; \"en-US,en;q=0.5\");\n$ua-&gt;default_header('Connection' =&gt; \"keep-alive\");\n$ua-&gt;default_header('Host' =&gt; \"www.example.com\");\n$ua-&gt;default_header('Upgrade-Insecure-Requests' =&gt; \"1\");\n$ua-&gt;default_header('User-Agent' =&gt; \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:64.0) Gecko/20100101 Firefox/64.0\");\n\n$ua-&gt;show_progress( 1 );\n\nmy $response = $ua-&gt;get($uri, ':content_file' =&gt; $tmp-&gt;filename);\n\nprint $response-&gt;status_line,\"\\n\" if !$response-&gt;is_success;\nprint $tmp-&gt;filename . \"\\n\";\n\n&lt;&gt;;\n$driver-&gt;get('https://example.com');\n</code></pre>\n\n<p>But I still get:</p>\n\n<blockquote>\n  <p>401 Unauthorized (9s)</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546067512, "post_id": 53967131, "comment_id": 94772652, "body": "I assume that you have more than one of these in the document. Are they all inline equations (between single <code>$</code>s), like the one shown, or are there also displayed ones?"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546070871, "post_id": 53967131, "comment_id": 94773210, "body": "@zdim They are all inlines"}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1546099945, "post_id": 53967131, "comment_id": 94779875, "body": "Perhaps if you can use Sublime you might try <code>(?:\\$(?=[^$]+\\$)|\\G(?!\\A)){(?&gt;{([^{}]+)}|[^{}]+|(?R))*}_?\\$?</code> and replace with the first capturing group <code>$1</code> <a href=\"https://regex101.com/r/FXPiu0/1\" rel=\"nofollow noreferrer\">demo</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546070734, "post_id": 53967445, "comment_id": 94773188, "body": "Quite great! upvoted. However, I found your method is opposite to my intention. In reality, I have to deal with latex fomula within text. So for example, change &quot;This is ${\\text{BaFe}}_{2}{\\text{As}}_{2}$ crystal&quot; into &quot;This is BaFe2As2 crystal&quot;. This is my fault, I&#39;ll update my post."}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546075940, "post_id": 53967445, "comment_id": 94774263, "body": "@user15964 I have added an update that should do the job."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546087173, "post_id": 53967445, "comment_id": 94776698, "body": "Thank you so much! Have you tried the updated version in notepad++, it seems not compatible in notepad++ as I test"}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546104411, "post_id": 53967445, "comment_id": 94781083, "body": "@user15964 After escaping the curly brackets, it is working in Notepad++ too - <code>\\$?(?=[^$]*\\$[^$]*$)(?:[^{}]*\\{|\\}[^{}]*)(?=[^$]*\\$[^$]*$)\\$&zwnj;&#8203;?</code>"}], "tags": [], "owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1546076240, "last_edit_date": 1546076240, "creation_date": 1546066957, "answer_id": 53967445, "question_id": 53967131, "link": "https://stackoverflow.com/questions/53967131/how-to-reconstruct-regex-matched-part/53967445#53967445", "title": "How to reconstruct regex matched part", "body": "<p>Use this regex in Notepad++. I have tried to match everything which is NOT present between the innermost curly brackets and then replaced the match with a blank string.</p>\n\n<pre><code>[^{}]*\\{|\\}[^{}]*\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/JizAv4/2/\" rel=\"nofollow noreferrer\">Click for Demo</a></strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>[^{}]*\\{</code> - matches 0+ occurrences of any character that is neither <code>{</code> nor <code>}</code> followed by <code>{</code></li>\n<li><code>|</code> - OR</li>\n<li><code>\\}[^{}]*</code> - matches <code>}</code> followed by 0+ occurrences of any character that is neither <code>{</code> nor <code>}</code></li>\n</ul>\n\n<p>Before Replacement:</p>\n\n<p><a href=\"https://i.stack.imgur.com/akmKm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/akmKm.png\" alt=\"enter image description here\"></a></p>\n\n<p>After Replacement:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pAKwB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pAKwB.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Try this updated regex:</p>\n\n<pre><code>\\$?(?=[^$]*\\$[^$]*$)(?:[^{}]*{|}[^{}]*)(?=[^$]*\\$[^$]*$)\\$?\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/JizAv4/5\" rel=\"nofollow noreferrer\">Click for Demo</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546077069, "post_id": 53968195, "comment_id": 94774496, "body": "@user15964 I used your string, slightly extended, as an example. Let me know if it would be useful to show how to read a file into <code>$text</code> instead. (Which is what you would actually do.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546241158, "post_id": 53968195, "comment_id": 94806630, "body": "@user15964  I had missed that you wanted specifically a <i>one-liner</i>.  Added."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1546289124, "post_id": 53968195, "comment_id": 94820298, "body": "@user15964 Aparently I also missed that you want to have those equations <i>replaced</i> (even as you clearly state that!).  Added that, to both the script version and the one-liner. Sorry about back and forths."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546311682, "post_id": 53968195, "comment_id": 94823305, "body": "Thank you so much for your solution and thorough explanation ! Really learned a lot from your answer as a perl beginner : )"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1546380484, "post_id": 53968195, "comment_id": 94835608, "body": "@user15964 Really glad to hear that :)  Let me know if something is missing or unclear, I&#39;ll add/edit."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1595752847, "last_edit_date": 1595752847, "creation_date": 1546074382, "answer_id": 53968195, "question_id": 53967131, "link": "https://stackoverflow.com/questions/53967131/how-to-reconstruct-regex-matched-part/53968195#53968195", "title": "How to reconstruct regex matched part", "body": "<p>There may clearly be multiple such equations (the markup between two <code>$</code>s) in the document. So while you need to assemble text between all <code>{}</code>, this also need be constrained within a <code>$</code> pair. Then all such equations need be processed.</p>\n<p>Matching that in a single pattern results in a complex regex. Instead, we can first extract everything within a pair of <code>$</code>s and then gather text within <code>{}</code>s from that, simplifying the regex a lot.  This makes two passes over each equation but a Latex document is small for computational purposes and the loss of efficiency can't be noticed.</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $text = q(This is ${\\text{BaFe}}_{2}{\\text{As}}_{2}$ crystal,)\n         . q( and ${\\text{Some}}{\\mathbf{More}}$ text);\n\nmy @results;\n\nwhile ($text =~ /\\$(.*?)\\$/g) { \n    my $eq = $1; \n    push @results, join('', $eq =~ /\\{([^{}]+)\\}/g);\n} \n\nsay for @results;\n</code></pre>\n<p>This prints lines <code>BaFe2As2</code> and <code>SomeMore</code>.</p>\n<p>The regex in the <code>while</code> condition captures all chars between two <code>$</code>s. After the body of the loop executes and the condition is checked again, the regex continues searching the string from the position of the previous match. This is due to the &quot;global&quot; <a href=\"https://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\">modifier <code>/g</code></a> in scalar <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a>, imposed on regex since it is in the loop condition. Once there are no more matches the loop terminates.</p>\n<p>In the body we match between <code>{}</code>, and again due to <code>/g</code> this is done for all <code>{}</code>s in the equation. Here, however, the regex is in the list context (as it is assigned to an array) and then <code>/g</code> makes it return all matches. They are joined into a string, which is added to the array.</p>\n<p>In order to replace the processed equation, use this in a substitution instead</p>\n<pre><code>$text =~ s{ \\$(.*?)\\$ }{ join('', $1 =~ /\\{([^{}]+)\\}/g) }egx;\n</code></pre>\n<p>where the modifier <code>e</code> makes it so that the replacement part is evaluated as Perl code, and the result of that used to replace the matched part. Then in it we can run our regex to match content of all <code>{}</code> and join it into the string, as explained above. I use <code>s{}{}</code> delimiters, and <code>x</code> modifier so to be able to space things in the matching part as well.</p>\n<p>Since the whole substitution has the <code>g</code> modifier the regex keeps going through <code>$text</code>, as long as there are equations to match, replacing them with what's evaluated in the replacement part.</p>\n<p>I use a hard-coded string (extended) from the question, for an easy demo. In reality you'd read a file into a scalar variable (&quot;slurp&quot; it) and process that.</p>\n<p>This relies on the question's premise that text of interest in an equation is cleanly between <code>{}</code>.</p>\n<hr />\n<p>Missed the part that a one-liner is sought</p>\n<pre><code>perl -0777 -wnE'say join(&quot;&quot;, $1=~/\\{([^{}]+)\\}/g) while /\\$(.*?)\\$/g' file.tex\n</code></pre>\n<p>With <code>-0777</code> the file is read whole (&quot;slurped&quot;), and as <code>-n</code> provides a loop over input lines it is in the <code>$_</code> variable; the regex in the <code>while</code> condition works by default on <code>$_</code>.  In each interation of <code>while</code> the contents of the captured equation, in <code>$1</code>, is directly matched for <code>{}</code>s.</p>\n<p>Then to replace each equation and print out the whole processed file</p>\n<pre><code>perl -0777 -wne's{\\$(.*?)\\$}{join &quot;&quot;, $1=~/\\{([^{}]+)\\}/g}eg; print' file.tex\n</code></pre>\n<p>where I've removed extra spaces and (unnecessary) parens on <code>join</code>.</p>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 53968195, "answer_count": 2, "score": 2, "last_activity_date": 1595752847, "creation_date": 1546063429, "last_edit_date": 1546070829, "question_id": 53967131, "link": "https://stackoverflow.com/questions/53967131/how-to-reconstruct-regex-matched-part", "title": "How to reconstruct regex matched part", "body": "<p>I have simplify some latex math formula within text, for example</p>\n\n<pre><code>This is ${\\text{BaFe}}_{2}{\\text{As}}_{2}$ crystal\n</code></pre>\n\n<p>I want to transform this into </p>\n\n<pre><code>This is BaFe2As2 crystal\n</code></pre>\n\n<p>That is to concatenate only content within inner most bracket. </p>\n\n<p>I figure out that I can use regex pattern</p>\n\n<pre><code>\\{[^\\{\\}]*\\}\n</code></pre>\n\n<p>to match those inner most bracket. But the problem is how to concatenate them together?</p>\n\n<p>I don't know if this could be done in notepad++ regex replacement. If notepad++ is not capable, I can also accept perl one-liner solution.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546063910, "post_id": 53967031, "comment_id": 94772018, "body": "Do you know SQL?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1546064453, "post_id": 53967031, "comment_id": 94772106, "body": "Also, looks like that module doesn&#39;t have a way to bind values to parameters in a query? That&#39;s... not good. SQL injection makes little Bobby Tables cry. You really should get DBI working and use it instead."}, {"owner": {"reputation": 1, "user_id": 1677854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afd32da46018b623d8a0a634c985a54?s=128&d=identicon&r=PG", "display_name": "Monty", "link": "https://stackoverflow.com/users/1677854/monty"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1546098211, "post_id": 53967031, "comment_id": 94779400, "body": "Yeah, I was afraid that would be the answer. I\u2019ll keep trying to get DBD installed."}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546098590, "creation_date": 1546098590, "answer_id": 53971002, "question_id": 53967031, "link": "https://stackoverflow.com/questions/53967031/how-to-update-delete-records-using-perl-netmysql/53971002#53971002", "title": "How to update &amp; delete records using Perl Net::MySQL", "body": "<p>SQL is <em>the</em> universal (or at least global) language for relational database interactions, including MySQL. Examples:</p>\n\n<pre><code>INSERT INTO foo (id, message) VALUES (1, 'Hello World')\nUPDATE foo SET message='Hello, World!' WHERE id=1\nDELETE FROM foo WHERE id=1\n</code></pre>\n\n<p><a href=\"https://www.tutorialspoint.com/mysql/mysql-insert-query.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/mysql/mysql-insert-query.htm</a></p>\n\n<p><a href=\"https://www.tutorialspoint.com/mysql/mysql-update-query.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/mysql/mysql-update-query.htm</a></p>\n\n<p><a href=\"https://www.tutorialspoint.com/mysql/mysql-delete-query.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/mysql/mysql-delete-query.htm</a></p>\n\n<p><a href=\"https://www.tutorialspoint.com/mysql/mysql-select-query.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/mysql/mysql-select-query.htm</a></p>\n"}], "owner": {"reputation": 1, "user_id": 1677854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afd32da46018b623d8a0a634c985a54?s=128&d=identicon&r=PG", "display_name": "Monty", "link": "https://stackoverflow.com/users/1677854/monty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546098590, "creation_date": 1546062284, "last_edit_date": 1546062580, "question_id": 53967031, "link": "https://stackoverflow.com/questions/53967031/how-to-update-delete-records-using-perl-netmysql", "title": "How to update &amp; delete records using Perl Net::MySQL", "body": "<p>I am spending time trying to get Net:MySQL to work for my database needs but am having trouble finding tutorials on the internet. </p>\n\n<p>From the two examples on the page <a href=\"https://metacpan.org/pod/Net::MySQL\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Net::MySQL</a> </p>\n\n<p>I have been able to read back from my database and insert new records/entries. </p>\n\n<p><strong>However, I cannot figure out how to update an existing record/entry or delete a record/entry</strong>. </p>\n\n<p>Is there a link you can provide that will help me with the syntax of these two additional functions?</p>\n\n<p>I am unable to get DBI to work on my Mac (actually, it\u2019s DBD that won\u2019t install) so that is why I\u2019m trying Net::MySQL instead. </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546089519, "post_id": 53966384, "comment_id": 94777251, "body": "So the OP meant to write <code>$|</code> instead of <code>$!</code> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1546119299, "post_id": 53966384, "comment_id": 94784653, "body": "@clamp, Yeah. Fixed"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1546119260, "last_edit_date": 1546119260, "creation_date": 1546053027, "answer_id": 53966384, "question_id": 53966358, "link": "https://stackoverflow.com/questions/53966358/what-does-0-mean-in-perl/53966384#53966384", "title": "What does &quot;[0]&quot; mean in Perl?", "body": "<p><code>( LIST1 )[ LIST2 ]</code> is a list slice. In list context, it evaluates to the elements of <code>LIST1</code> specified by <code>LIST2</code>.</p>\n\n<p>In this case, it returns the result of the <code>select</code>.</p>\n\n<hr>\n\n<pre><code>select((select(LOG_FILE),$!=1)[0]);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>select((select(LOG_FILE),$|=1)[0]);\n</code></pre>\n\n<p>The latter enables auto-flushing for the <code>LOG_FILE</code> file handle. It can be written more clearly as follows:</p>\n\n<pre><code>use IO::Handle ();       # Only needed in older versions of Perl.\nLOG_FILE-&gt;autoflush(1);\n</code></pre>\n\n<hr>\n\n<p>By the way, you shouldn't be using global variables like that. Instead of</p>\n\n<pre><code>open LOG_FILE, ...\n</code></pre>\n\n<p>you should be using</p>\n\n<pre><code>open my $LOG_FILE, ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1546109288, "creation_date": 1546109288, "answer_id": 53972416, "question_id": 53966358, "link": "https://stackoverflow.com/questions/53966358/what-does-0-mean-in-perl/53972416#53972416", "title": "What does &quot;[0]&quot; mean in Perl?", "body": "<p><strong>UPDATE</strong>: I answered this ten years ago! <a href=\"https://stackoverflow.com/questions/196754/what-does-selectselects-10-do-in-perl\">What does \u201cselect((select(s),$|=1)[0])\u201d do in Perl?</a></p>\n\n<hr/>\n\n<p>You're looking at a single element access to a list. The expression in side the parentheses produces some sort of list and  the <code>[0]</code> selects one item from the list.</p>\n\n<p>This bit of code is a very old idiom to set a per-filehandle kinda-global variable. I think you probably meant <code>$|</code> (the autoflush setting) instead of <code>$!</code>. </p>\n\n<p>First, remember that Perl has the concept of a \"default filehandle\". That starts out as standard output, but you can change it. That's what the <code>select</code> does.</p>\n\n<p>Next, realize that each file handle knows its own settings for various things; these are represented by special variables such as <code>$|</code> (see <a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\">perlvar's section on \"Variables related to Filehandles\"</a>). When you change these variables, they apply to the current default filehandle.</p>\n\n<p>So, what you see in this idiom is an inner <code>select</code> that changes the default filehandle. You change the default then set <code>$|</code> to whatever value you want. It looks a bit odd because you have two expressions separated by a comma instead of a semicolon, the use statement separator:</p>\n\n<pre><code>(select(LOG_FILE), $|=1)\n</code></pre>\n\n<p>From this, the idiom wants the result of the <code>select</code>; that's the previous default filehandle. To get that you want the first item in that list. That's in index 0:</p>\n\n<pre><code>(select(LOG_FILE), $|=1)[0]\n</code></pre>\n\n<p>The result of that entire expression is the previous default filehandle, which you now want to restore. Do that with the outer <code>select</code>:</p>\n\n<pre><code>select((select(LOG_FILE), $|=1)[0]);\n</code></pre>\n\n<p>You could have written that with an intermediate variable:</p>\n\n<pre><code>my $previous = select LOG_FILE;\n$| = 1;\nselect($previous);\n</code></pre>\n\n<p>If you're writing new stuff on your own, you might use scalar variable for the filehandle then call its <code>autoflush</code> method:</p>\n\n<pre><code>open my $log_file_fh, '&gt;', $log_filename or die ...;\n$log_file_fh-&gt;autoflush(1);\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 10841470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yVE_t12WEVQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY7B8etGiE1iY246FELVb6OCT-QrA/mo/photo.jpg?sz=128", "display_name": "cod 4", "link": "https://stackoverflow.com/users/10841470/cod-4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "closed_date": 1546109314, "accepted_answer_id": 53972416, "answer_count": 2, "score": 0, "last_activity_date": 1546119260, "creation_date": 1546052642, "last_edit_date": 1546107404, "question_id": 53966358, "link": "https://stackoverflow.com/questions/53966358/what-does-0-mean-in-perl", "closed_reason": "Duplicate", "title": "What does &quot;[0]&quot; mean in Perl?", "body": "<p>What is the [0] doing in this code: </p>\n\n<pre><code>select((select(LOG_FILE),$!=1)[0]);\n</code></pre>\n"}, {"tags": ["perl", "imapclient"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1546040419, "post_id": 53963840, "comment_id": 94768833, "body": "Welcome to SO :) This is the kind of problem I always enjoy at work: one that solves itself :D"}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": true, "score": 2, "last_activity_date": 1546033341, "last_edit_date": 1546033341, "creation_date": 1546028383, "answer_id": 53963887, "question_id": 53963840, "link": "https://stackoverflow.com/questions/53963840/the-returned-hash-from-fetch-hash-in-mailimapclient-doesnt-meet-the-parameter/53963887#53963887", "title": "The returned hash from fetch_hash in Mail::IMAPClient doesn&#39;t meet the parameters I send", "body": "<p>What I did was seeing what <code>keys $hash-&gt;{mymessage}</code>\nwas returning, it was <code>BODY[HEADER.FIELDS (SUBJECT)]</code>, so I figured out Mail::IMAPClient, omit PEEK from any call to the function while creating the hash keys in the function fetch_hash().\nWhat I should did is:</p>\n\n<pre><code>print $hash-&gt;{mymessage}-&gt;{'BODY[HEADER.FIELDS (SUBJECT)]'};`\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53963887, "answer_count": 1, "score": 0, "last_activity_date": 1546033341, "creation_date": 1546028082, "last_edit_date": 1546028488, "question_id": 53963840, "link": "https://stackoverflow.com/questions/53963840/the-returned-hash-from-fetch-hash-in-mailimapclient-doesnt-meet-the-parameter", "title": "The returned hash from fetch_hash in Mail::IMAPClient doesn&#39;t meet the parameters I send", "body": "<p>This is a auto answered question about a problem I had and I found no answer, the problem is the following:</p>\n\n<pre><code>use Mail::IMAPClient;\n$imap = new Mail::IMAPClient(\n   # My connection data.\n};\n#Folder selection and stuff like that.\nmy $hash = $imap-&gt;fetch_hash('BODY.PEEK[HEADER.FIELDS (SUBJECT)]');\n</code></pre>\n\n<p>Now I have a hash with the subject of the emails in the folder I selected, I had expected it to return the subject of a message writing:</p>\n\n<pre><code>print $hash-&gt;{mymessage}-&gt;{'BODY.PEEK[HEADER.FIELDS (SUBJECT)]'};\n</code></pre>\n\n<p>Instead I got:\nUse of uninitialized value in concatenation (.) or string at /var/www/localhost/htdocs/user/mail.pl line 76.</p>\n\n<p>Please excuse my poor english.</p>\n"}, {"tags": ["javascript", "perl", "selenium", "download"], "answers": [{"tags": [], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "is_accepted": true, "score": 0, "last_activity_date": 1546112423, "creation_date": 1546112423, "answer_id": 53972804, "question_id": 53963168, "link": "https://stackoverflow.com/questions/53963168/transitionrejection-trying-to-download-a-file-with-a-new-element-from-js-using/53972804#53972804", "title": "&quot;TransitionRejection&quot; trying to download a file with a new element from JS using selenium", "body": "<p>I've been able to solve the problem with javascript, instead of generating the element as I did I added some attributes in order to replicate the website normal function, and changed the url from:</p>\n\n<pre><code>https://myurl.com/id1/export?format=TCX\n</code></pre>\n\n<p>to</p>\n\n<pre><code>/id1/export?format=TCX\n</code></pre>\n\n<p>so the code looks like this:</p>\n\n<pre><code>my $script = 'var a = document.createElement(\"a\");' .\n    'a.setAttribute(\"ng-href\", \"' . $url_to_download .'\");' .\n    'a.setAttribute(\"target\", \"_self\");' .\n    'a.setAttribute(\"class\", \"button button-default button-block\");' .\n    'a.setAttribute(\"ng-click\", \"dismiss()\");' .\n    'a.setAttribute(\"href\", \"' . $url_to_download .'\");' .\n    'document.body.appendChild(a);' .\n    'a.click();' .\n    'document.body.removeChild(a);';\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53972804, "answer_count": 1, "score": 1, "last_activity_date": 1546112423, "creation_date": 1546023656, "question_id": 53963168, "link": "https://stackoverflow.com/questions/53963168/transitionrejection-trying-to-download-a-file-with-a-new-element-from-js-using", "title": "&quot;TransitionRejection&quot; trying to download a file with a new element from JS using selenium", "body": "<p>I want to automate the download from a lot of files of a website.\nIn order to do it I iterate through many pages getting the id from the files. I do this using selenium and a perl script.</p>\n\n<p>As there is no functionality to directly download a file in selenium, and I can not use some kind of curl because I need the session from selenium I'm trying to use the following workaround which I had already used in other projects.</p>\n\n<p>I create a JS element and execute a script with the url for each file, for example:</p>\n\n<pre><code>var a = document.createElement(\"a\");\na.setAttribute(\"href\", \"https://myurl.com/id1/export?format=TCX\");\na.setAttribute(\"download\", \"https://myurl.com/id1/export?format=TCX\");\ndocument.body.appendChild(a);\na.click();\ndocument.body.removeChild(a);\n</code></pre>\n\n<p>But when I try to do this I become the following error in the script:</p>\n\n<blockquote>\n  <p>Error while executing command: stale element reference: The element\n  reference of \n  is stale; either the element is no longer attached to the DOM, it is\n  not in the current frame context, or the document has been refreshed\n  at /Library/Perl/5.18/Selenium/Remote/Driver.pm line 391.  at\n  /Library/Perl/5.18/Selenium/Remote/Driver.pm line 348.</p>\n</blockquote>\n\n<p>If I reproduce it directly in the firefox console I get this:</p>\n\n<blockquote>\n  <p>TransitionRejection(type: 2, message: The transition has been\n  superseded by a different transition, detail: Transition#2(\n  'top.ids.info.byId'{\"myId1\":\"XXXXX\",\"myId2\":\"YYYYYY\"} ->\n  'home'{\"feedId\":null,\"tag\":null} ))</p>\n</blockquote>\n\n<p>If I just access the url with a normal GET from the browser I get the download prompt without problems. (As long as I'm logged in)</p>\n\n<p>If I get the url with selenium it works for the first url, but then it stays stuck there and does not download the second file.</p>\n\n<pre><code>  $driver-&gt;get($download_url1); # This one is downloaded\n  $driver-&gt;get($download_url2); # This line is not executed\n</code></pre>\n"}, {"tags": ["perl", "selenium", "firefox", "download"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1546019269, "post_id": 53962374, "comment_id": 94762320, "body": "The tests suggest that you can just use <code>extra_capabilities</code> with Selenium::Firefox as well ( <a href=\"https://grep.metacpan.org/search?qci=&amp;q=extra_capabilities&amp;qft=&amp;qd=Selenium-Remote-Driver&amp;f=at%2Ffirefox.test\" rel=\"nofollow noreferrer\">grep.metacpan.org/&hellip;</a> )"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1546019396, "post_id": 53962374, "comment_id": 94762380, "body": "For some reason, I was not aware of the grep metacpan site. That&#39;s a really useful resource, Thanks @Corion"}], "answers": [{"tags": [], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "is_accepted": true, "score": 2, "last_activity_date": 1546022198, "creation_date": 1546022198, "answer_id": 53962932, "question_id": 53962374, "link": "https://stackoverflow.com/questions/53962374/how-can-i-add-extra-capabilities-for-firefox-to-test-with-selenium-using-perl/53962932#53962932", "title": "How can I add extra_capabilities for firefox to test with selenium using perl?", "body": "<p>Thanks to the help of @Corion I've been able to make it work. This is the code I've used to create the driver:</p>\n\n<pre><code>my $driver = Selenium::Firefox-&gt;new(marionette_enabled =&gt; 1,\n                                    extra_capabilities =&gt; {\n                                      'moz:firefoxOptions' =&gt; {\n                                        'prefs' =&gt; {\n                                          \"browser.download.folderList\" =&gt; 2,\n                                          \"browser.helperApps.neverAsk.saveToDisk\" =&gt; \"application/tcx+xml\",\n                                          \"browser.download.dir\" =&gt; '/Users/User/Desktop/myFolder/'\n                                        }\n                                      }\n                                    } );\n</code></pre>\n\n<p>In order to get the \"browser.helperApps.neverAsk.saveToDisk\" property just use the network inspector manually and get the content-type of the response.</p>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 53962932, "answer_count": 1, "score": 1, "last_activity_date": 1546034853, "creation_date": 1546019137, "last_edit_date": 1546034853, "question_id": 53962374, "link": "https://stackoverflow.com/questions/53962374/how-can-i-add-extra-capabilities-for-firefox-to-test-with-selenium-using-perl", "title": "How can I add extra_capabilities for firefox to test with selenium using perl?", "body": "<p>I have been able to set this parameters like download folder and prompt for download in the following manner (Or similar, as I don't have that code right know):</p>\n\n<pre><code> 'extra_capabilities' =&gt; {\n   'chromeOptions' =&gt; {\n       'prefs' =&gt; {\n           'download.default_directory' =&gt; '/Users/User/Desktop/my_folder',\n           \"download.prompt_for_download\" =&gt; 0,\n           \"download.directory_upgrade\" =&gt; 1,\n       }\n   },\n   'binaray' =&gt; '/Users/User/Applications/Chromium',\n</code></pre>\n\n<p>}</p>\n\n<p>I've been trying to do the same with firefox but I have not been able to get those properties anywhere. The only code I've found in other questions is for java using some profile objects which I think it's not available for perl. </p>\n\n<p>This is a simplified version of my attempt but it doesn't seem to work. But it does not generate an exception either:</p>\n\n<pre><code>use Selenium::Firefox;\nuse strict;\nuse warnings;\nuse utf8;\nuse Selenium::Waiter qw/wait_until/;\n$Selenium::Remote::Driver::FORCE_WD3=1;\n\nmy $driver = Selenium::Firefox-&gt;new(marionette_enabled =&gt; 1,\n                                    capabilities =&gt; {\n                                      \"browser.download.folderList\" =&gt; 2,\n                                      \"browser.helperapps.neverAsk.saveToDisk\" =&gt; \"tcx\",\n                                      \"browser.download.dir\" =&gt; '/Users/User/Desktop/myFolder/'\n                                    } );\n$driver-&gt;set_implicit_wait_timeout(3000);\n\nmy $url_to_download = \"http://blablabla.com/blabla.tcx\";\n$driver-&gt;get($url_to_download);\n\n$driver-&gt;quit();\n$driver-&gt;shutdown_binary();\n</code></pre>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546011297, "post_id": 53960758, "comment_id": 94759168, "body": "That&#39;s just two function definitions; running this code doesn&#39;t do anything."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546011334, "post_id": 53960758, "comment_id": 94759188, "body": "Missing <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546011340, "post_id": 53960758, "comment_id": 94759194, "body": "Don&#39;t call subroutines with <code>&amp;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546011369, "post_id": 53960758, "comment_id": 94759206, "body": "Please fix your indentation."}, {"owner": {"reputation": 43, "user_id": 8870539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f146f9ac6cf05959ed48c8f7792e64ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kajkacz", "link": "https://stackoverflow.com/users/8870539/kajkacz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1546011830, "post_id": 53960758, "comment_id": 94759397, "body": "@melpomene Hey, sorry, first time posting on SO, hope that&#39;s better. There&#39;s a link to github above, whole code is a little long, so I don&#39;t want to post it here in full.Should I do that? I use strict and warnings."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 8870539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f146f9ac6cf05959ed48c8f7792e64ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kajkacz", "link": "https://stackoverflow.com/users/8870539/kajkacz"}, "is_accepted": true, "score": 1, "last_activity_date": 1546013188, "creation_date": 1546013188, "answer_id": 53961232, "question_id": 53960758, "link": "https://stackoverflow.com/questions/53960758/error-while-using-usseradd-from-perl-code-cannot-lock-etc-passwd/53961232#53961232", "title": "Error while using usseradd from perl code : cannot lock /etc/passwd", "body": "<p>So, I found a fix by using this solution : <a href=\"https://stackoverflow.com/questions/21659637/how-to-fix-sudo-no-tty-present-and-no-askpass-program-specified-error\">How to fix &#39;sudo: no tty present and no askpass program specified&#39; error?</a>\nand making useradd to the list of commmands run without password prompt.Not sure if hacky or good solution </p>\n"}], "owner": {"reputation": 43, "user_id": 8870539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f146f9ac6cf05959ed48c8f7792e64ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kajkacz", "link": "https://stackoverflow.com/users/8870539/kajkacz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 53961232, "answer_count": 1, "score": 1, "last_activity_date": 1546013188, "creation_date": 1546010948, "last_edit_date": 1546011744, "question_id": 53960758, "link": "https://stackoverflow.com/questions/53960758/error-while-using-usseradd-from-perl-code-cannot-lock-etc-passwd", "title": "Error while using usseradd from perl code : cannot lock /etc/passwd", "body": "<p>I am writing a perl program for user administration, and I keep getting this error:\nuseradd: Permission denied.\nuseradd: cannot lock /etc/passwd; try again later.\nI run the program using su -c command, the code below is the relevant snippet - full code at <a href=\"https://github.com/Kajkacz/ASU_Indexing/blob/master/Users.pl\" rel=\"nofollow noreferrer\">https://github.com/Kajkacz/ASU_Indexing/blob/master/Users.pl</a> .</p>\n\n<pre><code>sub createUserPage{\n\n    $Mw-&gt;destroy;\n    $Mw = MainWindow-&gt;new;\n    $Mw-&gt;geometry(\"500x300\");\n    $Mw-&gt;title(\"Create User\");\n    my $uid = &amp;getFreeUID;\n    my $uspasswd = &amp;randomizePassword;\n    my $usname = 'UsernameHere';\n\n    my $username = $Mw-&gt;Entry(-textvariable=&gt; \\$usname )-&gt;grid($Mw-&gt;Label(-text =&gt; 'Username'));\n    my $UID = $Mw-&gt;Entry(-textvariable=&gt; \\$uid )-&gt;grid($Mw-&gt;Label(-text =&gt; 'UID'));\n    my $password = $Mw -&gt;Entry(-textvariable=&gt; \\$uspasswd)-&gt;grid($Mw-&gt;Label(-text =&gt; 'Password'));\n\n    $Mw-&gt;Button(-text=&gt;\"Create User\", -command =&gt;sub{&amp;createUser($uid,$usname,$uspasswd)},-width =&gt; $buttonWidth)-&gt;grid();\n    $Mw-&gt;Button(-text=&gt;\"Check If UID is free\", -command =&gt;sub{&amp;checkUID($uid)},-width =&gt; $buttonWidth)-&gt;grid();\n    $Mw-&gt;Button(-text=&gt;\"Get Random Password\", -command =&gt;sub{$uspasswd = &amp;randomizePassword},-width =&gt; $buttonWidth)-&gt;grid();\n\n    $Mw-&gt;Button(-text=&gt;\"Back to Main Menu\", -command =&gt;sub{&amp;getStartWindow},-width =&gt; $buttonWidth)-&gt;grid();}\n\nsub createUser{\n     my $UID = shift;\n     my $username =     shift;\n     my $password = shift;\n     my $adduser = '/usr/sbin/useradd';\n     my $cmd = qq($adduser \\\"$username\\\");\n     # my $cmd = qq($adduser \\\"$username\\\" -p \\\"$password\\\" -u $UID);\n     print \"$cmd \\n\";\n     system $cmd; }\n</code></pre>\n\n<p>I'd welcome any insight possible.Also, my first ever Perl program, so feel free to correct my code</p>\n"}, {"tags": ["perl", "copy"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1545987086, "creation_date": 1545987086, "answer_id": 53955838, "question_id": 53955112, "link": "https://stackoverflow.com/questions/53955112/is-it-possible-for-perl-move-success-with-response-0/53955838#53955838", "title": "Is it possible for Perl move success with response 0?", "body": "<p>From <a href=\"https://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a>, on <code>copy</code></p>\n\n<blockquote>\n  <p>If an error occurs in setting permissions, <code>cp</code> will return 0, regardless of whether the file was successfully copied.</p>\n</blockquote>\n\n<p>While this is for <code>copy</code>, the <code>move</code> may also copy the file and then delete it (if it can't rename it).</p>\n\n<p>There are yet other possibilities, that involve other processes interfering with the file.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "edited": false, "score": 0, "creation_date": 1546243826, "post_id": 53957159, "comment_id": 94807323, "body": "2.23, 5.16.3, linux. I am not facing this issue all the time. This happens only for a few files. Anyways, I think I am gonna go with copy and unlink manually."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1545993511, "creation_date": 1545993511, "answer_id": 53957159, "question_id": 53955112, "link": "https://stackoverflow.com/questions/53955112/is-it-possible-for-perl-move-success-with-response-0/53957159#53957159", "title": "Is it possible for Perl move success with response 0?", "body": "<p>If move returns 0, trying to rename the file failed, and then either trying to copy it failed or trying to unlink the original file after copying it failed.  I don't see other possibilities, at least in File::Copy version 2.33.</p>\n\n<p>You may want to just try the rename and, if needed, the copy and unlink yourself, if you need better error reporting.</p>\n\n<p>What version of File::Copy are you using?  What version of perl?  What operating system.</p>\n"}], "owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 53957159, "answer_count": 2, "score": 1, "last_activity_date": 1545993511, "creation_date": 1545982238, "question_id": 53955112, "link": "https://stackoverflow.com/questions/53955112/is-it-possible-for-perl-move-success-with-response-0", "title": "Is it possible for Perl move success with response 0?", "body": "<p>Every function in the perl <code>File::Copy</code> module is supposed to return 1 in case of success and 0 in case of failure.\nIn my case, I have noticed (using whatever logs I had) that <code>move</code> returns 0 even when the operation succeeds (because files are actually moved) with value of $! as <code>No such file or directory</code>.</p>\n\n<p>Has anyone noticed such issue before?</p>\n"}, {"tags": ["windows", "perl", "ms-office", "ole", "win32ole"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545971509, "post_id": 53953041, "comment_id": 94745700, "body": "I do not see how to achieve that without changing the source code, given the value is hard coded. XS is perl&#39;s interface to call C/C++ code, btw.  I cannot help myself, I&#39;ve got to point out that the module is literally called &#39;Win32::OLE&#39;, so I don&#39;t know why you&#39;d expect it to work on 64 bit Windows."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545971603, "post_id": 53953041, "comment_id": 94745716, "body": "Seems like a duplicate of <a href=\"https://stackoverflow.com/questions/25509960/how-to-make-win32ole-work-on-64bit-ms-office-installation\" title=\"how to make win32ole work on 64bit ms office installation\">stackoverflow.com/questions/25509960/&hellip;</a>  That seems like a simple workaround not requiring you to change the module, fwiw."}, {"owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1546001848, "post_id": 53953041, "comment_id": 94755484, "body": "@bytepusher agreed that&#39;s the exact issue. So if adding the registry key is safe, then I guess we&#39;ll have to go down that path and roll out a patch to all our machines."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1546012415, "post_id": 53953041, "comment_id": 94759662, "body": "well if the fix is only to replace the registry key - how about you put win64::OLE on cpan :)"}], "answers": [{"tags": [], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1547699443, "last_edit_date": 1547699443, "creation_date": 1546047690, "answer_id": 53966024, "question_id": 53953041, "link": "https://stackoverflow.com/questions/53953041/win32oleconst-cant-find-64-bit-ms-office-constants/53966024#53966024", "title": "Win32::OLE::Const can&#39;t find 64-bit MS Office constants", "body": "<p>I'll provide a fix in case anyone wants to use it. It's not clear to me whether <code>Win32::OLE</code> is still being maintained, as the issues list at <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=48858\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Public/Bug/Display.html?id=48858</a> raised this exact item a number of months ago, so I'm not sure where to submit a patch.</p>\n\n<p>As noted in that link there are a few ways to resolve this (such as giving preference to the <code>win64</code> entry if both exist), however I've decided it would be best in our case to only query the <code>win64</code> folder if <code>win32</code> does not return anything useful.</p>\n\n<p>To do this, in <code>OLE.xs</code> search for <code>win32</code> and change as below.</p>\n\n<pre><code>err = RegQueryValueA(hKeyLangid, \"win32\", szFile, &amp;cbFile);\n\n// check win64 if win32 failed\nif (err != ERROR_SUCCESS || cbFile &lt;= 1)\n    err = RegQueryValueA(hKeyLangid, \"win64\", szFile, &amp;cbFile);\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2060441, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e093d389dd8919b616a4835e4adcf22f?s=128&d=identicon&r=PG", "display_name": "Nick P", "link": "https://stackoverflow.com/users/2060441/nick-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 750, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547699443, "creation_date": 1545964128, "question_id": 53953041, "link": "https://stackoverflow.com/questions/53953041/win32oleconst-cant-find-64-bit-ms-office-constants", "title": "Win32::OLE::Const can&#39;t find 64-bit MS Office constants", "body": "<p>We have a legacy <code>perl</code> code base that includes the below line:</p>\n\n<pre><code>use Win32::OLE::Const 'Microsoft Excel';\n</code></pre>\n\n<p>This has worked traditionally but is not working on newer 64-bit installations, such as Windows 10.</p>\n\n<p>The error appears to be in the <code>OLE.xs</code> source as below, but I have a limited understanding of Windows functions and <code>XS</code> in general.</p>\n\n<pre><code>err = RegQueryValueA(hKeyLangid, \"win32\", szFile, &amp;cbFile);\n</code></pre>\n\n<p>If this query fails, it never calls <code>Win32::OLE::Const::_Typelib</code> which is the function that stores the result. Checking my registry, the keys are indeed <code>Win64</code> and not <code>win32</code>. Other keys that worked either have just <code>win32</code> or both.</p>\n\n<p><strong>Is there a way to resolve this issue without editing the legacy module?</strong> It is widely used and any changes would involve some risk so I'm looking at alternatives first.</p>\n\n<p>I'm aware we can do the below, but it doesn't stop the other <code>Win32::OLE::Const</code> line causing an error if it's not removed.</p>\n\n<pre><code>my $Excel = Win32::OLE-&gt;new('Excel.Application', 'Quit');\nmy $xl = Win32::OLE::Const-&gt;Load($Excel);\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545970600, "post_id": 53949672, "comment_id": 94745532, "body": "Duplicate of <a href=\"https://stackoverflow.com/q/53524699/589924\">How can I process options using Perl in -n or -p mode?</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1545949921, "post_id": 53949865, "comment_id": 94741748, "body": "that will get a different set of random columns for each input line, a very different thing"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1545950474, "post_id": 53949865, "comment_id": 94741876, "body": "<code>int(rand(50))</code> creates a random integer from 0 to 49, not 0 to 50. Also, <code>int()</code> is not needed here since the numbers are for array indices and Perl automatically &quot;ints&quot; those."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1545950643, "post_id": 53949865, "comment_id": 94741923, "body": "@ysth. If we need the same random columns for each line, just:  <code>perl -F&#39;\\t&#39; -lane &#39;@i=map rand(1+$#F), 1..5 if not @i; print join &quot;,&quot;, @F[@i]&#39; inputfile</code>.  Here <code>1+$#F</code> is used instead of 50 since that allows for any number of fields the file happens to have on its first line."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1545950739, "post_id": 53949865, "comment_id": 94741953, "body": "@KjetilS. <code>1+$#F</code> better written as <code>@F</code>."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545950944, "post_id": 53949865, "comment_id": 94742005, "body": "@melpomene \u2190 Agree, but I think <code>0+@F</code> is even more readable. (And allowing for some future rand() to have more than one parameter, althou that&#39;s very unlikely)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1545951539, "post_id": 53949865, "comment_id": 94742137, "body": "@KjetilS. That would change the operator precedence of <code>rand</code>, so it&#39;ll never happen."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1545955250, "post_id": 53949865, "comment_id": 94742991, "body": "@ysth True. Edited to set the randos in a <code>BEGIN</code> block."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1545955165, "last_edit_date": 1545955165, "creation_date": 1545938563, "answer_id": 53949865, "question_id": 53949672, "link": "https://stackoverflow.com/questions/53949672/how-do-i-select-specific-columns-with-the-perl-lane-command-line/53949865#53949865", "title": "How do I select specific columns with the perl -lane command line?", "body": "<p>Use <a href=\"https://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\"><code>rand</code></a>.</p>\n\n<p>Five random number from 0 to 50:</p>\n\n<pre><code>@randoms = map {int(rand(50))} 1..5;\n</code></pre>\n\n<p>In your one-liner:   </p>\n\n<pre><code>perl -F'\\t' -lane 'print join \",\", @F[map {int(rand(50))} 1..5]' inputfile\n</code></pre>\n\n<p>To use the same random column indexes for each line, use a <code>BEGIN</code> block that only executes once at the start of the program:</p>\n\n<pre><code>perl -F'\\t' -lane 'BEGIN {@rand = map {int(rand(50))} 1..5]}; print join \",\", @F[@rand]' inputfile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1545950202, "post_id": 53951558, "comment_id": 94741821, "body": "Or in the some simple cases (like this one) just replace the two <code>&#39;</code> with <code>&quot;</code> and <code>&quot;,&quot;</code> with <code>&#39;&quot;&#39;</code> or <code>q(,)</code>. As in <code>perl -F&#39;\\t&#39; -lane &quot;print join q(,), @F[split &#47;,&#47;, $cols_new]&quot; inputfile</code>. But I think it&#39;s better to use perl to generate the array of random numbers like in @beasy &#39;s answer."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1545958844, "post_id": 53951558, "comment_id": 94743660, "body": "@KjetilS.  except that the question was &quot;I want to pass a variable list of columns&quot;.  the bit about random columns was only &quot;For example&quot;"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1545950068, "creation_date": 1545950068, "answer_id": 53951558, "question_id": 53949672, "link": "https://stackoverflow.com/questions/53949672/how-do-i-select-specific-columns-with-the-perl-lane-command-line/53951558#53951558", "title": "How do I select specific columns with the perl -lane command line?", "body": "<p>Your <code>perl -e'...$cols_new...'</code> is using single shell quotes, so the shell is not interpolating the variable.</p>\n\n<p>While you can use interpolation or a command line argument to get information from the shell to a perl oneliner, often an environment variable is less troublesome:</p>\n\n<pre><code>export cols_new=1,2\nperl -F'\\t' -lane 'print join \",\", @F[split /,/, $ENV{cols_new}]' inputfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1545950445, "creation_date": 1545950445, "answer_id": 53951615, "question_id": 53949672, "link": "https://stackoverflow.com/questions/53949672/how-do-i-select-specific-columns-with-the-perl-lane-command-line/53951615#53951615", "title": "How do I select specific columns with the perl -lane command line?", "body": "<p>You can just do the random number generation in Perl:</p>\n\n<pre><code>perl -F'\\t' -lane 'BEGIN { @cols = map int(rand 50) + 1, 1 .. 5 } print join \",\", @F[@cols]' inputfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10840319, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0B4FFPVFxmU/AAAAAAAAAAI/AAAAAAAAAKQ/OqjE3qrljlY/photo.jpg?sz=128", "display_name": "ghideon", "link": "https://stackoverflow.com/users/10840319/ghideon"}, "is_accepted": false, "score": 0, "last_activity_date": 1547076906, "last_edit_date": 1592644375, "creation_date": 1547076906, "answer_id": 54120009, "question_id": 53949672, "link": "https://stackoverflow.com/questions/53949672/how-do-i-select-specific-columns-with-the-perl-lane-command-line/54120009#54120009", "title": "How do I select specific columns with the perl -lane command line?", "body": "<p>Thank you all very much !!\nI solved the problem following your suggestions (see below):</p>\n<ul>\n<li>Randomly selects $extractColumnCount columns from the range 2-$fileColumnCount,\nsort them and place them in $cols_new_temp</li>\n</ul>\n<h1>cols_new_temp=$(echo $(shuf -i 2-$fileColumnCount -n $extractColumnCount | sort -n))</h1>\n<h1>echo $cols_new_temp</h1>\n<ul>\n<li>Here I add commas to separate the array of column labels and place it in $cols_new</li>\n</ul>\n<h1>cols_new=$(echo $cols_new_temp | sed 's/ /,/g')</h1>\n<h1>echo $cols_new</h1>\n<ul>\n<li>This Perl oneliner retrieves a subset of pre-specified randomly-selected columns ($cols_new) from the file specified in $file1, adding the first column and the output column. The resulting file is then saved as $file2</li>\n</ul>\n<h1>output_col=1</h1>\n<h1>time perl -F',' -lane &quot;print join q(,), @F[split &quot;,&quot; $output_col,$cols_new]&quot;  $file1  &gt; $file2</h1>\n"}], "owner": {"reputation": 1, "user_id": 10840319, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0B4FFPVFxmU/AAAAAAAAAAI/AAAAAAAAAKQ/OqjE3qrljlY/photo.jpg?sz=128", "display_name": "ghideon", "link": "https://stackoverflow.com/users/10840319/ghideon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1547076906, "creation_date": 1545937333, "last_edit_date": 1545950125, "question_id": 53949672, "link": "https://stackoverflow.com/questions/53949672/how-do-i-select-specific-columns-with-the-perl-lane-command-line", "title": "How do I select specific columns with the perl -lane command line?", "body": "<p>The command line below works for me</p>\n\n<pre><code>perl -F'\\t' -lane'print join \",\", @F[1,2]' inputfile\n</code></pre>\n\n<p>BUT I want to pass a variable list of columns, not necessarily columns 1 and 2 as specified in <code>@F[1,2]</code>.</p>\n\n<p>For example, based on the total number of columns of the inputfile, I would like to select a random subset <code>\"$random-columns\"</code> and pass it to <code>@F[$random-columns]</code>.</p>\n\n<p>How do I do that?</p>\n\n<p>I tried to first generate a columnList of 5 random column numbers between 1 and 50:</p>\n\n<pre><code>columnList=()\nfor (( i = 0; i &lt;= 5-1; ++i ))\ndo\n    (( randCol = ($RANDOM % 50) + 1 ))\n    columnList[i]=$randCol\ndone\n</code></pre>\n\n<p>Then I did the following to insert the comma:</p>\n\n<pre><code>cols_new=$(IFS=,; echo \"${columnList[*]}\")\n</code></pre>\n\n<p>and tried to pass it to the perl command line as below (didn't work):</p>\n\n<pre><code>perl -F'\\t' -lane'print join \",\", @F[$cols_new]' inputfile\n</code></pre>\n"}, {"tags": ["perl", "hashmap"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545917144, "post_id": 53945775, "comment_id": 94730188, "body": "Where in that code is <code>--&gt;</code> ? I only see <code>-&gt;</code>, which is used to access the stuff that a reference points to. Please <a href=\"https://stackoverflow.com/posts/53945775/edit\">edit</a> your question and either correct the title or paste the code that contains <code>--&gt;</code>."}, {"owner": {"reputation": 51, "user_id": 10839200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06712033093db943ef0c331656778974?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/10839200/meenakshi"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545917580, "post_id": 53945775, "comment_id": 94730362, "body": "@Corion i rectified my mistake"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1545918467, "post_id": 53945775, "comment_id": 94730695, "body": "Check references, <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1545930552, "post_id": 53945775, "comment_id": 94735474, "body": "<code>--&gt;</code> <a href=\"https://stackoverflow.com/questions/1642028/what-is-the-operator-in-c\">is the &quot;goes to&quot; operator</a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1545944064, "post_id": 53945775, "comment_id": 94740044, "body": "<a href=\"http://perlmonks.org?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org?node=References+quick+reference</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546039314, "post_id": 53945775, "comment_id": 94768567, "body": "<code>EXPR1-&gt;{EXPR2}</code> is a hash element dereference. It gets the element with key <code>EXPR2</code> from the hash referenced by <code>EXPR1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 3, "last_activity_date": 1545922777, "last_edit_date": 1545922777, "creation_date": 1545922196, "answer_id": 53946882, "question_id": 53945775, "link": "https://stackoverflow.com/questions/53945775/what-does-implies-in-here-in-this-perl-code/53946882#53946882", "title": "what does -&gt; implies in here in this perl code?", "body": "<blockquote>\n  <p><code>$r_CntrProp-&gt;{$fields[0]}-&gt;{$fields[1]}</code></p>\n</blockquote>\n\n<p>In this piece of code, for each arrow (<code>-&gt;</code>) :</p>\n\n<ul>\n<li>the left side is a hash reference </li>\n<li>the right side, enclosed between <code>{}</code>, is a hash key</li>\n</ul>\n\n<p>The expression gives access to whatever is stored under the key within the hash reference. Your code actually assigns something to that hash entry (a hash reference).</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlop.html#The-Arrow-Operator\" rel=\"nofollow noreferrer\">The Arrow Operator in <code>perlop</code></a> and <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">Using References in <code>perlref</code></a>.</p>\n\n<p>Basically, <code>$r_CntrProp</code> is <em>a reference to a hash of hash references</em>, like :</p>\n\n<pre><code>my $r_CntrProp  = {\n    foo =&gt; {\n        bar =&gt; 'baz'\n    }\n};\n\nprint $r_CntrProp-&gt;{foo}-&gt;{bar}, \"\\n\";\n</code></pre>\n\n<p>Yields :</p>\n\n<pre><code>baz\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10839200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06712033093db943ef0c331656778974?s=128&d=identicon&r=PG&f=1", "display_name": "Meenakshi", "link": "https://stackoverflow.com/users/10839200/meenakshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1545930588, "answer_count": 1, "score": 1, "last_activity_date": 1545922777, "creation_date": 1545916776, "last_edit_date": 1545922690, "question_id": 53945775, "link": "https://stackoverflow.com/questions/53945775/what-does-implies-in-here-in-this-perl-code", "closed_reason": "Duplicate", "title": "what does -&gt; implies in here in this perl code?", "body": "<pre><code>open PROPS, $propertyFile or die \"Cannot open $propertyFile\";\nwhile ( my $lines = &lt;PROPS&gt; ) {\n    chop $line;\n    my @fields = split(/,/, $line)\n    $r_CntrProp-&gt;{$fields[0]}-&gt;{$fields[1]} = {\n        'behaviour'  =&gt; $fields[2],\n        'type'       =&gt; $fields[3],\n        'compressed' =&gt; $fields[4]\n    };\n}\n</code></pre>\n\n<p>propertyFile is being read as input file from user.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1545988596, "post_id": 53942932, "comment_id": 94750188, "body": "Try with <a href=\"https://metacpan.org/pod/Net::OpenSSH::Parallel\" rel=\"nofollow noreferrer\">Net::OpenSSH::Parallel</a>!"}], "answers": [{"tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": -2, "last_activity_date": 1545904133, "creation_date": 1545904133, "answer_id": 53942967, "question_id": 53942932, "link": "https://stackoverflow.com/questions/53942932/how-to-execute-command-on-multiple-servers-for-executing-a-command/53942967#53942967", "title": "How to execute command on multiple servers for executing a command", "body": "<p>There is a ready-made tool called Ansible for exactly this purpose. There you can define your list of servers, group then and execute commands on all of them.</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1545912210, "creation_date": 1545912210, "answer_id": 53944763, "question_id": 53942932, "link": "https://stackoverflow.com/questions/53942932/how-to-execute-command-on-multiple-servers-for-executing-a-command/53944763#53944763", "title": "How to execute command on multiple servers for executing a command", "body": "<p>Is there a reason this needs to be done in Perl?  There is an existing tool, <a href=\"https://www.netfort.gr.jp/~dancer/software/dsh.html\" rel=\"nofollow noreferrer\">dsh</a>, which provides precisely this functionality of using <code>ssh</code> to run a shell command on multiple hosts and report the output from each.  It also has the ability, with the <code>-c</code> (concurrent) switch to run the command at the same time on all hosts rather than waiting for each one to complete before going on to the next, which you would need if you want to monitor 150 machines every 10 minutes, but it takes 1 minute to check each host.</p>\n\n<p>To use <code>dsh</code>, first create a file in <code>~/.dsh/group/</code> containing a list of your servers.  I'll put mine in <code>~/.dsh/group/test-group</code> with the content:</p>\n\n<pre><code>galera-1\ngalera-2\ngalera-3\n</code></pre>\n\n<p>Then I can run the command</p>\n\n<pre><code>dsh -g test-group -c 'df -h /'\n</code></pre>\n\n<p>And get back the result:</p>\n\n<pre><code>galera-3: Filesystem                 Size  Used Avail Use% Mounted on\ngalera-3: /dev/mapper/debian-system  140G   36G   99G  27% /\ngalera-1: Filesystem                 Size  Used Avail Use% Mounted on\ngalera-1: /dev/mapper/debian-system  140G   29G  106G  22% /\ngalera-2: Filesystem                 Size  Used Avail Use% Mounted on\ngalera-2: /dev/mapper/debian-system  140G   26G  109G  20% /\n</code></pre>\n\n<p>(They're out-of-order because I used <code>-c</code>, so the command was sent to all three servers at once and the results were printed in the order the responses were received.  Without <code>-c</code>, they would appear in the same order the servers are listed in the <code>group</code> file, but then it would wait for each reponse before connecting to the next server.)</p>\n\n<p>But, really, with the talk of repeating this check every 10 minutes, it sounds like what you really want is a proper monitoring system such as <a href=\"https://icinga.com/products/icinga-2/\" rel=\"nofollow noreferrer\">Icinga</a> (a high-performance fork of the better-known <a href=\"https://www.nagios.org/\" rel=\"nofollow noreferrer\">Nagios</a>), rather than just a way to run commands remotely on multiple machines (which is what <code>dsh</code> provides).  Unfortunately, configuring an Icinga monitoring system is too involved for me to provide an example here, but I can tell you that monitoring disk space is one of the checks that are included and enabled by default when using it.</p>\n"}], "owner": {"reputation": 9, "user_id": 10183009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f920f96dfdb977198ded15c9de90f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Janardana Raju", "link": "https://stackoverflow.com/users/10183009/janardana-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1545912210, "creation_date": 1545903978, "question_id": 53942932, "link": "https://stackoverflow.com/questions/53942932/how-to-execute-command-on-multiple-servers-for-executing-a-command", "title": "How to execute command on multiple servers for executing a command", "body": "<p>i have set of servers (150) for logging and a command (to get disk space). How can i execute this command for each server. \nSuppose if script is taking 1 min to get report of command for single server, how can i send report for all the servers for every 10 min?</p>\n\n<pre><code> use strict;\n use warnings;\n use Net::SSH::Perl;\n use Filesys::DiskSpace;\n\n\n # i have almost more than 100 servers..\n my %hosts   = (\n    'localhost' =&gt; {\n                       user  =&gt; \"z\",\n                   password  =&gt; \"qumquat\",\n\n    },\n\n\n     '129.221.63.205' =&gt; {\n                           user  =&gt; \"z\",\n                       password  =&gt; \"aardvark\",\n\n    },\n'129.221.63.205' =&gt; {\n                           user  =&gt; \"z\",\n                       password  =&gt; \"aardvark\",\n\n    },  \n\n\n   );\n\n\n  # file system /home or /dev/sda5 \n  my $dir = \"/home\";\n\n  my $cmd =  \"df $dir\";\n\n  foreach my $host (keys %hosts) {\n          my $ssh = Net::SSH::Perl-&gt;new($host,port =&gt; 22,debug =&gt; 1,protocol =&gt; 2,1 );    \n\n      $ssh-&gt;login($hostdata{$host}{user},$hostdata{$host}{password} );\n      my ($out) = $ssh-&gt;cmd($cmd});\n          print \"$out\\n\";\n   }\n</code></pre>\n\n<p>It has to send output of disk space for each server</p>\n"}, {"tags": ["regex", "perl", "alternation"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 2, "creation_date": 1545900451, "post_id": 53942105, "comment_id": 94723219, "body": "Why don&#39;t you use look ahead?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1545906681, "post_id": 53942105, "comment_id": 94725690, "body": "I&#39;d use <code>s&#47;e(Alpha|Beta|Gamma)&#47;f$1&#47;g;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1755534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a913a79c67a7489c4c54e24f54abb3b?s=128&d=identicon&r=PG", "display_name": "Cab", "link": "https://stackoverflow.com/users/1755534/cab"}, "edited": false, "score": 0, "creation_date": 1545903422, "post_id": 53942189, "comment_id": 94724296, "body": "This works as well, sticky bit.  Using your explanation how the capture groups go, I found out that s/(e)(Alpha)|(e)(Beta)|(e)(Gamma)/f$2$4$6/g Also works!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545991326, "post_id": 53942189, "comment_id": 94751187, "body": "<code>(?:e)(Alpha|Beta|Gamma)</code> is a weird way of writing <code>e(Alpha|Beta|Gamma)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 1755534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a913a79c67a7489c4c54e24f54abb3b?s=128&d=identicon&r=PG", "display_name": "Cab", "link": "https://stackoverflow.com/users/1755534/cab"}, "edited": false, "score": 0, "creation_date": 1545991357, "post_id": 53942189, "comment_id": 94751200, "body": "@Cab, Re &quot;<i>s/(e)(Alpha)|(e)(Beta)|(e)(Gamma)/f$2$4$6/g Also works!</i>&quot;, Yes, but it&#39;s wasteful and overly complex. In short, bad code."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546013912, "post_id": 53942189, "comment_id": 94760233, "body": "@ikegami: Notice the text in parenthesis in my post. I used a group to show them, that these can be made non capturing if in the real, not simplified code they use, they really need a group for some reason. But I also pointed out, that they don&#39;t need any group for just a single character."}], "tags": [], "owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "is_accepted": false, "score": 0, "last_activity_date": 1545900554, "creation_date": 1545900554, "answer_id": 53942189, "question_id": 53942105, "link": "https://stackoverflow.com/questions/53942105/how-to-do-perl-regex-with-alternation-and-substitution/53942189#53942189", "title": "How to do Perl regex with alternation and substitution", "body": "<p>The capture groups go from left to right without \"respecting\" the <code>|</code>. So <code>Beta</code> gets captured in <code>$4</code> and <code>Gamma</code> in <code>$6</code>.</p>\n\n<p>But you can condense it to two groups and additionally make the first group non-capturing with <code>?:</code> (or don't use a group at all, as it's just a single character, but you may have something else in there in the \"real thing\" that requires a group). </p>\n\n<pre><code>...\n$data =~ s/(?:e)(Alpha|Beta|Gamma)/f$1/g;\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1545900561, "creation_date": 1545900561, "answer_id": 53942193, "question_id": 53942105, "link": "https://stackoverflow.com/questions/53942105/how-to-do-perl-regex-with-alternation-and-substitution/53942193#53942193", "title": "How to do Perl regex with alternation and substitution", "body": "<p>You an use positive look ahead using alternation and just match <code>e</code> and substitute it with <code>f</code>.</p>\n\n<pre><code>my $data = \"eAlpha eBeta eGamma\";\n$data=~ s/e(?=Alpha|Beta|Gamma)/f/g;\nprint($data);\n</code></pre>\n\n<p>Prints,</p>\n\n<pre><code>fAlpha fBeta fGamma\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1755534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a913a79c67a7489c4c54e24f54abb3b?s=128&d=identicon&r=PG", "display_name": "Cab", "link": "https://stackoverflow.com/users/1755534/cab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545900561, "creation_date": 1545900133, "last_edit_date": 1545900548, "question_id": 53942105, "link": "https://stackoverflow.com/questions/53942105/how-to-do-perl-regex-with-alternation-and-substitution", "title": "How to do Perl regex with alternation and substitution", "body": "<p>I wish to transform \"eAlpha eBeta eGamma\" into \"fAlpha fBeta fGamma.\"  Of course this is just a simplified example of more complex substitutions.</p>\n\n<p>Here is my perl program:</p>\n\n<pre><code>my $data= \"eAlpha eBeta eGamma\";\n$data=~ s/(e)(Alpha)|(e)(Beta)|(e)(Gamma)/f$2/g;\nsay $data;\n</code></pre>\n\n<p>The output is  </p>\n\n<pre><code>fAlpha f f\n</code></pre>\n\n<p>Perl regex seems to remember the $1 but not the $2.  Is there a way to use regex alternation, global substitution, and capture variables like $1, $2?</p>\n\n<ul>\n<li>There are  never more than 3 alternates so I could do it in three steps but wish not to.</li>\n</ul>\n\n<p>Any help would be appreciated.</p>\n"}]