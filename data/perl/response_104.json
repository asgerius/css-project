[{"tags": ["windows", "multithreading", "perl", "parallel-processing", "fork"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483574174, "post_id": 41475159, "comment_id": 70156435, "body": "<a href=\"http://p3rl.org/Thread::Queue\" rel=\"nofollow noreferrer\">Thread::Queue</a>"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483574452, "post_id": 41475159, "comment_id": 70156502, "body": "What would be the equivalent of the above code using <code>Thread::Queue</code>?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1483576234, "post_id": 41475159, "comment_id": 70157029, "body": "@choroba It didn&#39;t work either. Crashes as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483580726, "post_id": 41475159, "comment_id": 70158179, "body": "<a href=\"http://search.cpan.org/~mob/Forks-Super-0.68/lib/Forks/Super.pm\" rel=\"nofollow noreferrer\">Forks::Super</a> by @mob should work on Windows. Also note its <a href=\"http://search.cpan.org/~mob/Forks-Super-0.68/lib/Forks/Super.pm#Special_tips_for_Windows_systems\" rel=\"nofollow noreferrer\">tips for windows</a>. Try <a href=\"http://stackoverflow.com/questions/3424778/perl-process-queue\">this post</a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1483586820, "post_id": 41475159, "comment_id": 70159520, "body": "sounds like your perl installation has some problems.  tell more about the crashing"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1483592306, "post_id": 41475159, "comment_id": 70160723, "body": "@ysth I have tried a new perl installation of both ActiveState and Strawberry perl and the problem still occurs.  It says <code>perl command line interpreter has stopped working</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483629743, "post_id": 41475159, "comment_id": 70182535, "body": "Does a simple hello world work in ActiveState or Strawberry? <code>perl -e&quot;print &#39;hello world&#39;&quot;</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1483630462, "post_id": 41475159, "comment_id": 70183052, "body": "<code>Parallel::ForkManager</code> has always worked well for me with <code>perl</code>s I have built and <code>perl</code>s I have installed via Strawberry or ActiveState distributions. There is a problem with either the code you are not showing us or your installation. Are you making sure you <code>$pm-&gt;wait_all_children;</code>?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483652488, "post_id": 41475159, "comment_id": 70196503, "body": "@ThisSuitIsBlackNot  Yes, everything else works, it&#39;s just forking and threads - forks in Windows being threads anyway."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1483577263, "post_id": 41475401, "comment_id": 70157265, "body": "That&#39;s not quite the same because it spawns <code>scalar(@all_data)</code> processes all at once. The OP&#39;s example spawns no more than <code>$MAX_PROCESSES</code> processes at a time."}], "tags": [], "owner": {"reputation": 2296, "user_id": 1575416, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32e1e3caa938438115454a4688a3d4a2?s=128&d=identicon&r=PG", "display_name": "aggaton", "link": "https://stackoverflow.com/users/1575416/aggaton"}, "is_accepted": false, "score": 0, "last_activity_date": 1483575749, "creation_date": 1483575749, "answer_id": 41475401, "question_id": 41475159, "link": "https://stackoverflow.com/questions/41475159/how-to-do-parallel-programming-in-perl-on-windows/41475401#41475401", "title": "How to do parallel programming in perl on Windows?", "body": "<p>Here is one example using fork:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\n\nforeach my $data (@all_data) {\n    my $pid;\n    next if $pid = fork;    # Parent goes to next server.\n    die \"fork failed: $!\" unless defined $pid;\n\n    # From here on, we're in the child.  Do whatever the\n    # child has to do...  The server we want to deal\n    # with is in $data.\n\n    exit;  # Ends the child process.\n}\n\n# The following waits until all child processes have\n# finished, before allowing the parent to die.\n\n1 while (wait() != -1);\n\nprint \"All done!\\n\";\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483575749, "creation_date": 1483573877, "question_id": 41475159, "link": "https://stackoverflow.com/questions/41475159/how-to-do-parallel-programming-in-perl-on-windows", "title": "How to do parallel programming in perl on Windows?", "body": "<p>I have used the following pattern of code in perl on a Unix system, but it crashes on Windows.  How can I achieve the same thing using either forking or threads on Windows using perl?</p>\n\n<pre><code>use Parallel::ForkManager;\n\nmy $pm = Parallel::ForkManager-&gt;new($MAX_PROCESSES);\n\nDATA_LOOP:\nforeach my $data (@all_data) {\n    # Forks and returns the pid for the child:\n    my $pid = $pm-&gt;start and next DATA_LOOP;\n\n    # ... do some work with $data in the child process ...\n\n    $pm-&gt;finish; # Terminates the child process\n}\n</code></pre>\n"}, {"tags": ["perl", "reference", "imagemagick", "subroutine"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1483573245, "creation_date": 1483573245, "answer_id": 41475065, "question_id": 41474805, "link": "https://stackoverflow.com/questions/41474805/perl-modify-an-imagemagick-object-in-a-subroutine/41475065#41475065", "title": "Perl: modify an ImageMagick object in a subroutine", "body": "<p>Your <code>Image::Magick</code> object <code>$im</code> already holds a reference to the data. You don't need to take a reference to the variable, and your call should look like</p>\n\n<pre><code>ModifyImage($im, $f);\n</code></pre>\n\n<p>And I would write the subroutine like this</p>\n\n<pre><code>sub ModifyImage {\n    my ($im, $file) = @_;\n\n    my $res = $im-&gt;Read($file)\n    warn $res if $res;\n}\n</code></pre>\n\n<p>to make it more concise, and to make it clear that <code>$im</code> and <code>$file</code> are parameters.</p>\n"}], "owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 41475065, "answer_count": 1, "score": 0, "last_activity_date": 1483573245, "creation_date": 1483571611, "question_id": 41474805, "link": "https://stackoverflow.com/questions/41474805/perl-modify-an-imagemagick-object-in-a-subroutine", "title": "Perl: modify an ImageMagick object in a subroutine", "body": "<p>I'm using Perl (5.16) and ImageMagick (6.8.8). I'd like to send a new ImageMagick object to a subroutine by reference and modify the object there, but I get \"Can't call method \"Read\" on unblessed reference\". Obviously, I'm not treating the object properly in the subroutine. Can anyone help? Thanks.</p>\n\n<pre><code>my $im=Image::Magick-&gt;new;\nModifyImage(\\$im,$f);\n\nsub ModifyImage  {\n    my $im=shift;\n    my $file=shift;\n    my $res = $im-&gt;Read($file);\n    warn $res if $res;\n}\n</code></pre>\n"}, {"tags": ["perl", "hash", "reference"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1483584205, "post_id": 41474678, "comment_id": 70158988, "body": "<a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 9, "last_activity_date": 1483572316, "last_edit_date": 1483572316, "creation_date": 1483571318, "answer_id": 41474756, "question_id": 41474678, "link": "https://stackoverflow.com/questions/41474678/do-you-need-to-use-when-referencing-hash/41474756#41474756", "title": "Do you need to use -&gt; when referencing hash?", "body": "<p>They don't \"both work\". The former is for accessing an element of a hash, and the latter is for accessing an element of a hash <em>reference</em>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.016;\n\nmy %hash = (one =&gt; 1);\n\nsay $hash{one};\nsay $hash-&gt;{one};\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Global symbol \"$hash\" requires explicit package name (did you forget to declare \"my $hash\"?) at 41474678.pl line 8.\nExecution of 41474678.pl aborted due to compilation errors.\n</code></pre>\n\n<p>The same error happens in reverse if you try to use a hash reference like a hash:</p>\n\n<pre><code>my $href = {one =&gt; 1};\n\nsay $href-&gt;{one};\nsay $href{one};\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Global symbol \"%href\" requires explicit package name (did you forget to declare \"my %href\"?) at 41474678.pl line 8.\nExecution of 41474678.pl aborted due to compilation errors.\n</code></pre>\n\n<p>From \"The Arrow Operator\" in <a href=\"http://perldoc.perl.org/perlop.html#The-Arrow-Operator\" rel=\"nofollow noreferrer\">perldoc perlop</a>:</p>\n\n<blockquote>\n  <p>\"<code>-&gt;</code>\" is an infix dereference operator, just as it is in C and C++.\n  If the right side is either a <code>[...]</code>, <code>{...}</code>, or a <code>(...)</code>\n  subscript, then the left side must be either a hard or symbolic\n  reference to an array, a hash, or a subroutine respectively. (Or\n  technically speaking, a location capable of holding a hard reference,\n  if it's an array or hash reference being used for assignment.)</p>\n</blockquote>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1483572316, "creation_date": 1483570860, "question_id": 41474678, "link": "https://stackoverflow.com/questions/41474678/do-you-need-to-use-when-referencing-hash", "title": "Do you need to use -&gt; when referencing hash?", "body": "<p>Using hashes, why do the following both work?</p>\n\n<ul>\n<li><code>$hash{elem}</code></li>\n<li><code>$hash-&gt;{elem}</code></li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483551104, "post_id": 41469872, "comment_id": 70145524, "body": "@ikegami  I&#39;m unable to get why isn&#39;t the output <code>1</code>?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 4, "creation_date": 1483551139, "post_id": 41469872, "comment_id": 70145555, "body": "Perlop says <code>The ||, &#47;&#47; and &amp;&amp; operators return the last value evaluated (unlike C&#39;s || and &amp;&amp;, which return 0 or 1).</code>"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1483551215, "post_id": 41469872, "comment_id": 70145596, "body": "@Dada Oh I see, thanks."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1483551233, "post_id": 41469872, "comment_id": 70145606, "body": "<code>my $x = 0 + !!(($first == $second) || $third);</code>"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1483551284, "post_id": 41469872, "comment_id": 70145644, "body": "@Sinan&#220;n&#252;r Completely forgot about using double negation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1483551311, "post_id": 41469872, "comment_id": 70145660, "body": "It seems to me that <code>...?1:0</code> would be clearer than <code>0+!!(...)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483551385, "post_id": 41469872, "comment_id": 70145703, "body": "@ThisSuitIsBlackNot, The OP didn&#39;t ask what it returns, but why it returns what it returns."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1483552413, "post_id": 41469872, "comment_id": 70146237, "body": "@ikegami It&#39;s not clear to me if he&#39;s asking about the reasoning behind it (why was Perl designed this way?) or just the mechanics (I expected 1, why am I getting 30?). I guess you think the former, which is maybe a more interesting angle; feel free to reopen."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1483551993, "last_edit_date": 1483551993, "creation_date": 1483551147, "answer_id": 41469937, "question_id": 41469872, "link": "https://stackoverflow.com/questions/41469872/logical-operators-and-assignment-in-perl/41469937#41469937", "title": "Logical operators and assignment in Perl", "body": "<p>Because it can. C logical operators are unable to return something as useful as Perl's can because of C's type system.</p>\n\n<p>Consider:</p>\n\n<pre><code>my $x = $arg || $default;\n</code></pre>\n\n<p>In C, you'd have to write the more complicated</p>\n\n<pre><code>int x = arg ? arg : default;\n</code></pre>\n"}], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "closed_date": 1483551355, "accepted_answer_id": 41469937, "answer_count": 1, "score": 1, "last_activity_date": 1483551993, "creation_date": 1483550946, "question_id": 41469872, "link": "https://stackoverflow.com/questions/41469872/logical-operators-and-assignment-in-perl", "closed_reason": "Duplicate", "title": "Logical operators and assignment in Perl", "body": "<p><strong>C code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int first = 10;\n    int second = 20;\n    int third = 30;\n\n    int x = ((first == second) || third);\n\n    printf (\"%d\", x);\n}\n</code></pre>\n\n<p><code>Output: 1</code></p>\n\n<p><strong>Perl code</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $first = 10;\nmy $second = 20;\nmy $third = 30;\n\nmy $x = (($first == $second) || $third);\n\nprint $x;\n</code></pre>\n\n<p><code>Output: 30</code></p>\n\n<p>Why does Perl behave like this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 1, "creation_date": 1483555682, "post_id": 41468624, "comment_id": 70147960, "body": "@syck: No, <code>\\Q</code> isn&#39;t an anchor. It is a sequence that controls how double-quoted strings are expanded, and has nothing to do with regexes."}], "answers": [{"comments": [{"owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 0, "creation_date": 1483547324, "post_id": 41468710, "comment_id": 70142961, "body": "Since <code>\\Q</code> is also present in the replacement, I assumed that it should not be used as an anchor."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 0, "creation_date": 1483547448, "post_id": 41468710, "comment_id": 70143067, "body": "@syck:I&#39;ve removed <code>\\Q</code> from replacement part."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 2, "creation_date": 1483547496, "post_id": 41468710, "comment_id": 70143105, "body": "@syck it looks more like the OP doesn&#39;t fully understand how the substitution works as she also escapes curlies in the right part of the <code>s&#47;&#47;&#47;</code>. Thus it stands to reason that she believes she needs to escape everything."}, {"owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 2, "creation_date": 1483547549, "post_id": 41468710, "comment_id": 70143145, "body": "This is when tech ends and psychology starts. =)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1483548046, "post_id": 41468710, "comment_id": 70143520, "body": "<code>$&amp;</code> has <a href=\"http://perldoc.perl.org/perlvar.html#Performance-issues\" rel=\"nofollow noreferrer\">performance issues</a> on all versions of Perl prior to 5.20.0, so I wouldn&#39;t bother mentioning it when you can just as easily use a capturing group."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483550983, "post_id": 41468710, "comment_id": 70145439, "body": "@ThisSuitIsBlackNot:You&#39;re right, I&#39;ve edited accordingly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483555964, "post_id": 41468710, "comment_id": 70148117, "body": "I don&#39;t know why you added #3 and #4. There&#39;s never a reason to use them over #1 and #2. (#3 is just as slow #2 plus it slows down every other match without captures in the entire program, and #4 is slower than the others since it has to starts a subregex match at every position)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483557418, "post_id": 41468710, "comment_id": 70148953, "body": "There&#39;s no reason to show methods one should never use except to tell others never to use them, but you didn&#39;t do that."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1483564028, "post_id": 41468710, "comment_id": 70152185, "body": "If special regex characters need to be ignored for the first occurrence of the <code>$btype</code> variable with <code>\\Q...\\E</code>, why you don&#39;t use it for the second occurrence? <code>$line =~ s&#47;\\\\end\\{\\Q$btype\\E\\}&#47;\\\\end\\{\\Q$btype\\E\\}\\$\\$&#47;g;</code> or <code>$line =~ s&#47;\\\\end{\\Q$btype\\E}&#47;\\\\end{\\Q$btype}$$&#47;g;</code>. As an aside, you only need to escape curly brackets if you use perl6 <i>( and if it isn&#39;t ambiguous with perl5 off course)</i>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1483566786, "post_id": 41468710, "comment_id": 70153535, "body": "@CasimiretHippolyte Because the second occurrence is on the RHS of the substitution. The RHS isn&#39;t a regex, so you end up with a bunch of superfluous backslashes in your replacement if you use <code>\\Q</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1483566906, "post_id": 41468710, "comment_id": 70153589, "body": "@CasimiretHippolyte Also, newer versions of perl5 warn about unescaped curlies and it will become a syntax error in a future version (maybe even 5.26.0 next year)."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483566915, "post_id": 41468710, "comment_id": 70153592, "body": "@ThisSuitIsBlackNot: oops, you are right, I didn&#39;t see it!"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483567003, "post_id": 41468710, "comment_id": 70153635, "body": "@ThisSuitIsBlackNot: <i>&quot; it will become a syntax error in a future version (maybe even 5.26.0 next year)&quot;</i>, what a stupid upgrade! (Many things are interesting in perl6, but also many things seem to be a regression, in particular if you consider the conciseness of perl5 regex. The false idea that more verbose is always more readable)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1483568569, "post_id": 41468710, "comment_id": 70154366, "body": "@CasimiretHippolyte <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2012/11/msg195425.html\" rel=\"nofollow noreferrer\">Here&#39;s</a> some of the reasoning."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 6, "last_activity_date": 1483550984, "last_edit_date": 1483550984, "creation_date": 1483547226, "answer_id": 41468710, "question_id": 41468624, "link": "https://stackoverflow.com/questions/41468624/q-is-ignored-it-seams/41468710#41468710", "title": "\\Q is ignored it seams", "body": "<p>You need to stop the escaping:</p>\n\n<pre><code>$line =~ s/\\\\end\\{\\Q$btype\\E\\}/\\\\end\\{$btype\\}\\$\\$/g;\n#                  here __^^\n</code></pre>\n\n<p>it could be reduce to:</p>\n\n<pre><code>$line =~ s/\\\\end\\{\\Q$btype\\E\\}\\K/\\$\\$/g;    # 5.10+\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$line =~ s/(\\\\end\\{\\Q$btype\\E\\})/$1\\$\\$/g;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$line =~ s/\\\\end\\{\\Q$btype\\E\\}/$&amp;\\$\\$/g;\n</code></pre>\n\n<p>From  ThisSuitIsBlackNot's comment:<br>\nDon't use it with perl before v5.20 because of <a href=\"http://perldoc.perl.org/perlvar.html#Performance-issues\" rel=\"nofollow noreferrer\">performance issue</a>.</p>\n\n<p>or</p>\n\n<pre><code>$line =~ s/(?&lt;=\\\\end\\{\\Q$btype\\E\\})/\\$\\$/g;\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41468710, "answer_count": 1, "score": 0, "last_activity_date": 1483550984, "creation_date": 1483546980, "question_id": 41468624, "link": "https://stackoverflow.com/questions/41468624/q-is-ignored-it-seams", "title": "\\Q is ignored it seams", "body": "<p>Can someone tell me why my script below search/replace when I am using <code>\\Q$btype</code> when it works when I hard code with <code>center</code> instead?</p>\n\n<p>The script is suppose to insert <code>$$</code> after <code>\\end{center}</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $line = '\\end{tabular}\n\\end{center}\nend:text\n';\n\nmy $btype = \"center\";\n$line =~ s/\\\\end\\{\\Q$btype\\}/\\\\end\\{\\Q$btype\\}\\$\\$/g;\nprint \"$line\\n\";\n</code></pre>\n"}, {"tags": ["mysql", "macos", "perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 6, "creation_date": 1483547069, "post_id": 41468343, "comment_id": 70142775, "body": "You need to first learn how to use your chosen operating system before getting into programming. Everything is building correctly, but failing to install because your user does not have permission to write to system locations. Some might suggest you use <code>sudo</code>, but <b>DON&#39;T!</b>. Instead, build your own <code>perl</code> and play with that. The same goes for every other language or library. Do not mess with OS components. See also <a href=\"https://www.effectiveperlprogramming.com/2015/11/apple-recommends-installing-your-own-perl/\" rel=\"nofollow noreferrer\">effectiveperlprogramming.com/2015/11/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1483549402, "post_id": 41468343, "comment_id": 70144453, "body": "Please don&#39;t use <code>-f</code>. &quot;Install the module even if it doesn&#39;t work&quot; makes no sense!!!"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483549171, "post_id": 41468998, "comment_id": 70144315, "body": "While you&#39;re probably right, you should include an explanation of what <i>perlbrew</i> is good for. Why should it be used, for what, and instead of what? It certainly is not a replacement for adding <code>sudo</code> to the <code>cpan</code> command."}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 0, "last_activity_date": 1483570611, "last_edit_date": 1483570611, "creation_date": 1483548060, "answer_id": 41468998, "question_id": 41468343, "link": "https://stackoverflow.com/questions/41468343/perl-support-mac-error/41468998#41468998", "title": "Perl Support Mac Error", "body": "<p>According to the line:</p>\n\n<pre><code>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nERROR: Can't create '/Library/Perl/5.18/darwin-thread-multi-2level'\nDo not have write permissions on '/Library/Perl/5.18/darwin-thread-multi-2level'\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n</code></pre>\n\n<p>You don't have enough privilegies to install the DBI module. If you really want to install it into your OS you have to use sudo it isn't one of the best practices.</p>\n\n<p>I would recommend you to use <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\" title=\"perlbrew\">perlbrew</a>, It's quite simple, easy and fast to use and has a lot of nice features and you don't have to worry if you broke up something or not.</p>\n\n<p>Easy to install</p>\n\n<blockquote>\n  <p>Quicky install:</p>\n  \n  <p>\\curl -L <a href=\"https://install.perlbrew.pl\" rel=\"nofollow noreferrer\">https://install.perlbrew.pl</a> | bash</p>\n  \n  <p>or</p>\n  \n  <p>sudo cpan App::perlbrew\n  perlbrew init</p>\n</blockquote>\n\n<p>You can also install and switch between perl versions:</p>\n\n<blockquote>\n  <p>To install the latest stable release, and use it permanently:</p>\n  \n  <p>perlbrew install perl-5.16.0</p>\n  \n  <p>perlbrew switch perl-5.16.0</p>\n  \n  <p>To play with the bleeding-edge version, but only in the current shell:</p>\n  \n  <p>perlbrew install perl-blead</p>\n  \n  <p>perlbrew use perl-blead</p>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 6279783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae70d114bf17ed5840af56a80a3b9aa?s=128&d=identicon&r=PG&f=1", "display_name": "Robenson Sam", "link": "https://stackoverflow.com/users/6279783/robenson-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483570611, "creation_date": 1483546127, "question_id": 41468343, "link": "https://stackoverflow.com/questions/41468343/perl-support-mac-error", "title": "Perl Support Mac Error", "body": "<p><strong>I am trying to install perl support for my mac but every time i do so I get the same error</strong></p>\n\n<p>I typed in command line cpan -f -i DBI and recieved the same error over and over again.</p>\n\n<pre><code>admins-iMac-2:~ robensonsam$ cpan -f -i DBI\nReading '/Users/robinsensam/.cpan/Metadata'\n  Database was generated on Wed, 04 Jan 2017 11:29:02 GMT\nRunning install for module 'DBI'\nRunning make for T/TI/TIMB/DBI-1.636.tar.gz\nChecksum for /Users/robinsensam/.cpan/sources/authors/id/T/TI/TIMB/DBI-1.636.tar.gz ok\n\n  CPAN.pm: Building T/TI/TIMB/DBI-1.636.tar.gz\n\n\n*** Your LANG environment variable is set to 'en_US.UTF-8'\n*** This may cause problems for some perl installations.\n*** If you get test failures, please try again with LANG unset.\n*** If that then works, please email dbi-dev@perl.org with details\n*** including the output of 'perl -V'\n\nYour perl was compiled with gcc (version 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)), okay.\nCreating test wrappers for DBD::Gofer:\nt/zvg_01basics.t \nt/zvg_02dbidrv.t \nt/zvg_03handle.t \nt/zvg_04mods.t \nt/zvg_05concathash.t \nt/zvg_06attrs.t \nt/zvg_07kids.t \nt/zvg_08keeperr.t \nt/zvg_09trace.t \nt/zvg_10examp.t \nt/zvg_11fetch.t \nt/zvg_12quote.t \nt/zvg_13taint.t \nt/zvg_14utf8.t \nt/zvg_15array.t \nt/zvg_16destroy.t \nt/zvg_19fhtrace.t \nt/zvg_20meta.t \nt/zvg_30subclass.t \nt/zvg_31methcache.t \nt/zvg_35thrclone.t (use threads)\nt/zvg_40profile.t \nt/zvg_41prof_dump.t \nt/zvg_42prof_data.t \nt/zvg_43prof_env.t \nt/zvg_48dbi_dbd_sqlengine.t \nt/zvg_49dbd_file.t \nt/zvg_50dbm_simple.t \nt/zvg_51dbm_file.t \nt/zvg_52dbm_complex.t \nt/zvg_53sqlengine_adv.t \nt/zvg_60preparse.t \nt/zvg_65transact.t \nt/zvg_70callbacks.t \nt/zvg_72childhandles.t \nt/zvg_73cachedkids.t \nt/zvg_80proxy.t \nt/zvg_85gofer.t \nt/zvg_86gofer_fail.t \nt/zvg_87gofer_cache.t \nt/zvg_90sql_type_cast.t \nt/zvg_91_store_warning.t \nCreating test wrappers for DBI::SQL::Nano:\nt/zvn_48dbi_dbd_sqlengine.t \nt/zvn_49dbd_file.t \nt/zvn_50dbm_simple.t \nt/zvn_51dbm_file.t \nt/zvn_52dbm_complex.t \nt/zvn_85gofer.t \nCreating test wrappers for DBI::PurePerl:\nt/zvp_01basics.t \nt/zvp_02dbidrv.t \nt/zvp_03handle.t \nt/zvp_04mods.t \nt/zvp_05concathash.t \nt/zvp_06attrs.t \nt/zvp_07kids.t \nt/zvp_08keeperr.t \nt/zvp_09trace.t \nt/zvp_10examp.t \nt/zvp_11fetch.t \nt/zvp_12quote.t \nt/zvp_13taint.t \nt/zvp_14utf8.t \nt/zvp_15array.t \nt/zvp_16destroy.t \nt/zvp_19fhtrace.t \nt/zvp_20meta.t \nt/zvp_30subclass.t \nt/zvp_31methcache.t \nt/zvp_35thrclone.t (use threads)\nt/zvp_40profile.t \nt/zvp_41prof_dump.t \nt/zvp_42prof_data.t \nt/zvp_43prof_env.t \nt/zvp_48dbi_dbd_sqlengine.t \nt/zvp_49dbd_file.t \nt/zvp_50dbm_simple.t \nt/zvp_51dbm_file.t \nt/zvp_52dbm_complex.t \nt/zvp_53sqlengine_adv.t \nt/zvp_60preparse.t \nt/zvp_65transact.t \nt/zvp_70callbacks.t \nt/zvp_72childhandles.t \nt/zvp_73cachedkids.t \nt/zvp_80proxy.t \nt/zvp_85gofer.t \nt/zvp_86gofer_fail.t \nt/zvp_87gofer_cache.t \nt/zvp_90sql_type_cast.t \nt/zvp_91_store_warning.t \nCreating test wrappers for DBD::Gofer + DBI::SQL::Nano:\nt/zvxgn_48dbi_dbd_sqlengine.t \nt/zvxgn_49dbd_file.t \nt/zvxgn_50dbm_simple.t \nt/zvxgn_51dbm_file.t \nt/zvxgn_52dbm_complex.t \nt/zvxgn_85gofer.t \nCreating test wrappers for DBD::Gofer + DBI::PurePerl:\nt/zvxgp_01basics.t \nt/zvxgp_02dbidrv.t \nt/zvxgp_03handle.t \nt/zvxgp_04mods.t \nt/zvxgp_05concathash.t \nt/zvxgp_06attrs.t \nt/zvxgp_07kids.t \nt/zvxgp_08keeperr.t \nt/zvxgp_09trace.t \nt/zvxgp_10examp.t \nt/zvxgp_11fetch.t \nt/zvxgp_12quote.t \nt/zvxgp_13taint.t \nt/zvxgp_14utf8.t \nt/zvxgp_15array.t \nt/zvxgp_16destroy.t \nt/zvxgp_19fhtrace.t \nt/zvxgp_20meta.t \nt/zvxgp_30subclass.t \nt/zvxgp_31methcache.t \nt/zvxgp_35thrclone.t (use threads)\nt/zvxgp_40profile.t \nt/zvxgp_41prof_dump.t \nt/zvxgp_42prof_data.t \nt/zvxgp_43prof_env.t \nt/zvxgp_48dbi_dbd_sqlengine.t \nt/zvxgp_49dbd_file.t \nt/zvxgp_50dbm_simple.t \nt/zvxgp_51dbm_file.t \nt/zvxgp_52dbm_complex.t \nt/zvxgp_53sqlengine_adv.t \nt/zvxgp_60preparse.t \nt/zvxgp_65transact.t \nt/zvxgp_70callbacks.t \nt/zvxgp_72childhandles.t \nt/zvxgp_73cachedkids.t \nt/zvxgp_80proxy.t \nt/zvxgp_85gofer.t \nt/zvxgp_86gofer_fail.t \nt/zvxgp_87gofer_cache.t \nt/zvxgp_90sql_type_cast.t \nt/zvxgp_91_store_warning.t \nCreating test wrappers for DBI::SQL::Nano + DBI::PurePerl:\nt/zvxnp_48dbi_dbd_sqlengine.t \nt/zvxnp_49dbd_file.t \nt/zvxnp_50dbm_simple.t \nt/zvxnp_51dbm_file.t \nt/zvxnp_52dbm_complex.t \nt/zvxnp_85gofer.t \nCreating test wrappers for DBD::Gofer + DBI::SQL::Nano + DBI::PurePerl:\nt/zvxgnp_48dbi_dbd_sqlengine.t \nt/zvxgnp_49dbd_file.t \nt/zvxgnp_50dbm_simple.t \nt/zvxgnp_51dbm_file.t \nt/zvxgnp_52dbm_complex.t \nt/zvxgnp_85gofer.t \nChecking if your kit is complete...\nLooks good\n\n    I see you're using perl 5.018002 on darwin-thread-multi-2level, okay.\n    Remember to actually *read* the README file!\n    Use  'make' to build the software (dmake or nmake on Windows).\n    Then 'make test' to execute self tests.\n    Then 'make install' to install the DBI and then delete this working\n    directory before unpacking and building any DBD::* drivers.\n\nWriting Makefile for DBI\nWriting MYMETA.yml and MYMETA.json\n/usr/bin/perl -MExtUtils::Command -e 'mkpath' -- blib/lib/DBI\nrm -f blib/lib/DBI/Changes.pm\ncp Changes blib/lib/DBI/Changes.pm\ncp DBIXS.h blib/arch/auto/DBI/DBIXS.h\ncp lib/DBD/NullP.pm blib/lib/DBD/NullP.pm\ncp lib/DBD/Gofer/Transport/pipeone.pm blib/lib/DBD/Gofer/Transport/pipeone.pm\ncp lib/DBD/File.pm blib/lib/DBD/File.pm\ncp lib/DBI/ProfileDumper/Apache.pm blib/lib/DBI/ProfileDumper/Apache.pm\ncp Driver.xst blib/arch/auto/DBI/Driver.xst\ncp lib/DBI/Gofer/Serializer/DataDumper.pm blib/lib/DBI/Gofer/Serializer/DataDumper.pm\ncp lib/DBI/Gofer/Serializer/Base.pm blib/lib/DBI/Gofer/Serializer/Base.pm\ncp lib/DBD/Gofer/Policy/rush.pm blib/lib/DBD/Gofer/Policy/rush.pm\ncp lib/DBD/Proxy.pm blib/lib/DBD/Proxy.pm\ncp lib/DBI/Gofer/Serializer/Storable.pm blib/lib/DBI/Gofer/Serializer/Storable.pm\ncp lib/DBI/SQL/Nano.pm blib/lib/DBI/SQL/Nano.pm\ncp dbd_xsh.h blib/arch/auto/DBI/dbd_xsh.h\ncp lib/DBD/File/Developers.pod blib/lib/DBD/File/Developers.pod\ncp dbixs_rev.h blib/arch/auto/DBI/dbixs_rev.h\ncp lib/DBI/Gofer/Transport/Base.pm blib/lib/DBI/Gofer/Transport/Base.pm\ncp lib/DBD/Gofer/Transport/stream.pm blib/lib/DBD/Gofer/Transport/stream.pm\ncp lib/DBD/Gofer.pm blib/lib/DBD/Gofer.pm\ncp lib/DBI/Util/_accessor.pm blib/lib/DBI/Util/_accessor.pm\ncp lib/DBI/Gofer/Transport/pipeone.pm blib/lib/DBI/Gofer/Transport/pipeone.pm\ncp lib/DBI/Gofer/Execute.pm blib/lib/DBI/Gofer/Execute.pm\ncp lib/DBI/DBD/Metadata.pm blib/lib/DBI/DBD/Metadata.pm\ncp lib/DBI/Const/GetInfoType.pm blib/lib/DBI/Const/GetInfoType.pm\ncp lib/DBI/Util/CacheMemory.pm blib/lib/DBI/Util/CacheMemory.pm\ncp lib/DBI/Profile.pm blib/lib/DBI/Profile.pm\ncp lib/DBI/Const/GetInfo/ANSI.pm blib/lib/DBI/Const/GetInfo/ANSI.pm\ncp lib/Bundle/DBI.pm blib/lib/Bundle/DBI.pm\ncp lib/DBI/W32ODBC.pm blib/lib/DBI/W32ODBC.pm\ncp lib/DBI/ProfileData.pm blib/lib/DBI/ProfileData.pm\ncp DBI.pm blib/lib/DBI.pm\ncp dbipport.h blib/arch/auto/DBI/dbipport.h\ncp lib/DBD/Gofer/Policy/Base.pm blib/lib/DBD/Gofer/Policy/Base.pm\ncp lib/DBD/File/HowTo.pod blib/lib/DBD/File/HowTo.pod\ncp lib/DBI/DBD/SqlEngine/HowTo.pod blib/lib/DBI/DBD/SqlEngine/HowTo.pod\ncp lib/DBI/DBD/SqlEngine/Developers.pod blib/lib/DBI/DBD/SqlEngine/Developers.pod\ncp lib/DBD/Sponge.pm blib/lib/DBD/Sponge.pm\ncp lib/DBD/ExampleP.pm blib/lib/DBD/ExampleP.pm\ncp Driver_xst.h blib/arch/auto/DBI/Driver_xst.h\ncp lib/DBI/ProfileSubs.pm blib/lib/DBI/ProfileSubs.pm\ncp lib/DBI/ProfileDumper.pm blib/lib/DBI/ProfileDumper.pm\ncp lib/DBD/Gofer/Transport/corostream.pm blib/lib/DBD/Gofer/Transport/corostream.pm\ncp lib/DBI/Gofer/Request.pm blib/lib/DBI/Gofer/Request.pm\ncp lib/DBD/Gofer/Policy/pedantic.pm blib/lib/DBD/Gofer/Policy/pedantic.pm\ncp lib/DBD/Gofer/Policy/classic.pm blib/lib/DBD/Gofer/Policy/classic.pm\ncp lib/DBI/DBD/SqlEngine.pm blib/lib/DBI/DBD/SqlEngine.pm\ncp lib/DBI/PurePerl.pm blib/lib/DBI/PurePerl.pm\ncp dbixs_rev.pl blib/lib/dbixs_rev.pl\ncp lib/DBD/File/Roadmap.pod blib/lib/DBD/File/Roadmap.pod\ncp lib/DBI/Const/GetInfo/ODBC.pm blib/lib/DBI/Const/GetInfo/ODBC.pm\ncp dbivport.h blib/arch/auto/DBI/dbivport.h\ncp lib/DBI/Gofer/Response.pm blib/lib/DBI/Gofer/Response.pm\ncp dbi_sql.h blib/arch/auto/DBI/dbi_sql.h\ncp lib/DBI/Const/GetInfoReturn.pm blib/lib/DBI/Const/GetInfoReturn.pm\ncp lib/DBD/DBM.pm blib/lib/DBD/DBM.pm\ncp lib/DBI/Gofer/Transport/stream.pm blib/lib/DBI/Gofer/Transport/stream.pm\ncp lib/DBD/Gofer/Transport/null.pm blib/lib/DBD/Gofer/Transport/null.pm\ncp lib/Win32/DBIODBC.pm blib/lib/Win32/DBIODBC.pm\ncp lib/DBD/Gofer/Transport/Base.pm blib/lib/DBD/Gofer/Transport/Base.pm\ncp lib/DBI/DBD.pm blib/lib/DBI/DBD.pm\ncp lib/DBI/ProxyServer.pm blib/lib/DBI/ProxyServer.pm\n/usr/bin/perl -p -e \"s/~DRIVER~/Perl/g\" ./Driver.xst &gt; Perl.xsi\n/usr/bin/perl /System/Library/Perl/5.18/ExtUtils/xsubpp  -typemap /System/Library/Perl/5.18/ExtUtils/typemap -typemap typemap  Perl.xs &gt; Perl.xsc &amp;&amp; mv Perl.xsc Perl.c\ncc -c   -arch x86_64 -arch i386 -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os   -DVERSION=\\\"1.636\\\" -DXS_VERSION=\\\"1.636\\\"  \"-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"  -W -Wall -Wpointer-arith -Wbad-function-cast -Wno-comment -Wno-sign-compare -Wno-cast-qual -Wmissing-noreturn -Wno-unused-parameter Perl.c\n/usr/bin/perl /System/Library/Perl/5.18/ExtUtils/xsubpp  -typemap /System/Library/Perl/5.18/ExtUtils/typemap -typemap typemap  DBI.xs &gt; DBI.xsc &amp;&amp; mv DBI.xsc DBI.c\ncc -c   -arch x86_64 -arch i386 -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os   -DVERSION=\\\"1.636\\\" -DXS_VERSION=\\\"1.636\\\"  \"-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"  -W -Wall -Wpointer-arith -Wbad-function-cast -Wno-comment -Wno-sign-compare -Wno-cast-qual -Wmissing-noreturn -Wno-unused-parameter DBI.c\nRunning Mkbootstrap for DBI ()\nchmod 644 DBI.bs\nrm -f blib/arch/auto/DBI/DBI.bundle\ncc -mmacosx-version-min=10.12.2  -arch x86_64 -arch i386 -bundle -undefined dynamic_lookup -fstack-protector DBI.o  -o blib/arch/auto/DBI/DBI.bundle    \\\n            \\\n\nchmod 755 blib/arch/auto/DBI/DBI.bundle\ncp DBI.bs blib/arch/auto/DBI/DBI.bs\nchmod 644 blib/arch/auto/DBI/DBI.bs\n/usr/bin/perl \"-Iblib/arch\" \"-Iblib/lib\" dbiprof.PL dbiprof\nExtracted dbiprof from dbiprof.PL with variable substitutions.\ncp dbiprof blib/script/dbiprof\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/dbiprof\n/usr/bin/perl \"-Iblib/arch\" \"-Iblib/lib\" dbiproxy.PL dbiproxy\nExtracted dbiproxy from dbiproxy.PL with variable substitutions.\ncp dbiproxy blib/script/dbiproxy\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/dbiproxy\n/usr/bin/perl \"-Iblib/arch\" \"-Iblib/lib\" dbilogstrip.PL dbilogstrip\nExtracted dbilogstrip from dbilogstrip.PL with variable substitutions.\ncp dbilogstrip blib/script/dbilogstrip\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/dbilogstrip\nManifying blib/man1/dbiproxy.1\nManifying blib/man1/dbilogstrip.1\nManifying blib/man1/dbiprof.1\nManifying blib/man3/DBD::Gofer::Transport::null.3pm\nManifying blib/man3/DBI::DBD::SqlEngine::HowTo.3pm\nManifying blib/man3/DBI::ProfileDumper::Apache.3pm\nManifying blib/man3/DBD::Gofer::Policy::rush.3pm\nManifying blib/man3/DBI::DBD::SqlEngine::Developers.3pm\nManifying blib/man3/DBI::Gofer::Transport::Base.3pm\nManifying blib/man3/DBD::DBM.3pm\nManifying blib/man3/DBD::File::HowTo.3pm\nManifying blib/man3/DBI::Const::GetInfo::ANSI.3pm\nManifying blib/man3/DBI::ProfileDumper.3pm\nManifying blib/man3/DBI::Profile.3pm\nManifying blib/man3/DBI::ProxyServer.3pm\nManifying blib/man3/DBD::Proxy.3pm\nManifying blib/man3/DBD::File::Roadmap.3pm\nManifying blib/man3/DBI::Gofer::Execute.3pm\nManifying blib/man3/DBD::Gofer::Policy::pedantic.3pm\nManifying blib/man3/DBI::Const::GetInfoReturn.3pm\nManifying blib/man3/Bundle::DBI.3pm\nManifying blib/man3/DBI::Util::CacheMemory.3pm\nManifying blib/man3/DBI::ProfileSubs.3pm\nManifying blib/man3/DBI::SQL::Nano.3pm\nManifying blib/man3/DBD::Sponge.3pm\nManifying blib/man3/DBD::Gofer::Policy::classic.3pm\nManifying blib/man3/DBI::Gofer::Request.3pm\nManifying blib/man3/DBI::DBD.3pm\nManifying blib/man3/DBI::Const::GetInfo::ODBC.3pm\nManifying blib/man3/DBD::Gofer::Transport::Base.3pm\nManifying blib/man3/DBD::Gofer::Transport::pipeone.3pm\nManifying blib/man3/DBI::Gofer::Serializer::Base.3pm\nManifying blib/man3/DBI::Const::GetInfoType.3pm\nManifying blib/man3/DBD::Gofer::Transport::corostream.3pm\nManifying blib/man3/DBD::File.3pm\nManifying blib/man3/DBD::Gofer::Policy::Base.3pm\nManifying blib/man3/DBI::Gofer::Serializer::Storable.3pm\nManifying blib/man3/DBI::Gofer::Serializer::DataDumper.3pm\nManifying blib/man3/DBI::Gofer::Response.3pm\nManifying blib/man3/DBI::Gofer::Transport::pipeone.3pm\nManifying blib/man3/Win32::DBIODBC.3pm\nManifying blib/man3/DBD::File::Developers.3pm\nManifying blib/man3/DBI.3pm\nManifying blib/man3/DBI::Gofer::Transport::stream.3pm\nManifying blib/man3/DBI::PurePerl.3pm\nManifying blib/man3/DBI::DBD::SqlEngine.3pm\nManifying blib/man3/DBI::ProfileData.3pm\nManifying blib/man3/DBI::DBD::Metadata.3pm\nManifying blib/man3/DBD::Gofer.3pm\nManifying blib/man3/DBD::Gofer::Transport::stream.3pm\nManifying blib/man3/DBI::W32ODBC.3pm\n  TIMB/DBI-1.636.tar.gz\n  /usr/bin/make -- OK\n'YAML' not installed, will not store persistent state\nRunning make test\nPERL_DL_NONLAZY=1 /usr/bin/perl \"-MExtUtils::Command::MM\" \"-e\" \"test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/01basics.t .................... # --- Perl 5.018002 on darwin-thread-multi-2level\nt/01basics.t .................... ok       \nt/02dbidrv.t .................... ok     \nt/03handle.t .................... ok       \nt/04mods.t ...................... ok     \nt/05concathash.t ................ ok     \nt/06attrs.t ..................... ok     \nt/07kids.t ...................... ok     \nt/08keeperr.t ................... ok    \nt/09trace.t ..................... ok     \nt/10examp.t ..................... ok       \nt/11fetch.t ..................... ok     \nt/12quote.t ..................... ok     \nt/13taint.t ..................... ok     \nt/14utf8.t ...................... ok     \nt/15array.t ..................... ok     \nt/16destroy.t ................... ok     \nt/19fhtrace.t ................... ok     \nt/20meta.t ...................... ok   \nt/30subclass.t .................. ok     \nt/31methcache.t ................. ok     \nt/35thrclone.t .................. ok     \nt/40profile.t ................... ok     \nt/41prof_dump.t ................. ok     \nt/42prof_data.t ................. ok     \nt/43prof_env.t .................. ok     \nt/48dbi_dbd_sqlengine.t ......... ok    \nt/49dbd_file.t .................. ok    \nt/50dbm_simple.t ................ ok     \nt/51dbm_file.t .................. ok    \nt/52dbm_complex.t ............... skipped: DBI::SQL::Nano is being used\nt/53sqlengine_adv.t ............. ok   \nt/60preparse.t .................. ok     \nt/65transact.t .................. ok     \nt/70callbacks.t ................. ok    \nt/72childhandles.t .............. ok     \nt/73cachedkids.t ................ ok    \nt/80proxy.t ..................... skipped: modules required for proxy are probably not installed (e.g., RPC/PlClient.pm)\nt/85gofer.t ..................... ok     \nt/86gofer_fail.t ................ ok    \nt/87gofer_cache.t ............... ok    \nt/90sql_type_cast.t ............. ok     \nt/91_store_warning.t ............ ok   \nt/pod-coverage.t ................ skipped: Test::Pod::Coverage 1.04 required for testing POD coverage\nt/pod.t ......................... ok     \nt/zvg_01basics.t ................ # --- Perl 5.018002 on darwin-thread-multi-2level\nt/zvg_01basics.t ................ ok       \nt/zvg_02dbidrv.t ................ ok     \nt/zvg_03handle.t ................ ok       \nt/zvg_04mods.t .................. ok     \nt/zvg_05concathash.t ............ ok     \nt/zvg_06attrs.t ................. ok     \nt/zvg_07kids.t .................. ok     \nt/zvg_08keeperr.t ............... ok    \nt/zvg_09trace.t ................. ok     \nt/zvg_10examp.t ................. ok       \nt/zvg_11fetch.t ................. ok     \nt/zvg_12quote.t ................. ok     \nt/zvg_13taint.t ................. skipped: Taint attribute tests not functional with DBI_AUTOPROXY\nt/zvg_14utf8.t .................. ok     \nt/zvg_15array.t ................. ok     \nt/zvg_16destroy.t ............... ok     \nt/zvg_19fhtrace.t ............... ok     \nt/zvg_20meta.t .................. ok   \nt/zvg_30subclass.t .............. ok     \nt/zvg_31methcache.t ............. ok     \nt/zvg_35thrclone.t .............. ok     \nt/zvg_40profile.t ............... ok     \nt/zvg_41prof_dump.t ............. ok     \nt/zvg_42prof_data.t ............. ok     \nt/zvg_43prof_env.t .............. ok     \nt/zvg_48dbi_dbd_sqlengine.t ..... ok    \nt/zvg_49dbd_file.t .............. ok    \nt/zvg_50dbm_simple.t ............ ok     \nt/zvg_51dbm_file.t .............. ok   \nt/zvg_52dbm_complex.t ........... skipped: DBI::SQL::Nano is being used\nt/zvg_53sqlengine_adv.t ......... skipped: Modifying driver state won't compute running behind Gofer\nt/zvg_60preparse.t .............. ok     \nt/zvg_65transact.t .............. skipped: Transactions not supported by DBD::Gofer\nt/zvg_70callbacks.t ............. ok    \nt/zvg_72childhandles.t .......... ok     \nt/zvg_73cachedkids.t ............ ok    \nt/zvg_80proxy.t ................. skipped: modules required for proxy are probably not installed (e.g., RPC/PlClient.pm)\nt/zvg_85gofer.t ................. ok     \nt/zvg_86gofer_fail.t ............ skipped: Gofer DBI_AUTOPROXY\nt/zvg_87gofer_cache.t ........... skipped: Gofer DBI_AUTOPROXY\nt/zvg_90sql_type_cast.t ......... ok     \nt/zvg_91_store_warning.t ........ ok   \nt/zvn_48dbi_dbd_sqlengine.t ..... ok    \nt/zvn_49dbd_file.t .............. ok    \nt/zvn_50dbm_simple.t ............ ok     \nt/zvn_51dbm_file.t .............. ok    \nt/zvn_52dbm_complex.t ........... skipped: DBI::SQL::Nano is being used\nt/zvn_85gofer.t ................. ok     \nt/zvp_01basics.t ................ # --- Perl 5.018002 on darwin-thread-multi-2level\nt/zvp_01basics.t ................ ok       \nt/zvp_02dbidrv.t ................ ok     \nt/zvp_03handle.t ................ ok       \nt/zvp_04mods.t .................. ok     \nt/zvp_05concathash.t ............ ok     \nt/zvp_06attrs.t ................. ok     \nt/zvp_07kids.t .................. skipped: $h-&gt;{Kids} attribute not supported for DBI::PurePerl\nt/zvp_08keeperr.t ............... ok    \nt/zvp_09trace.t ................. ok     \nt/zvp_10examp.t ................. ok       \nt/zvp_11fetch.t ................. ok     \nt/zvp_12quote.t ................. ok     \nt/zvp_13taint.t ................. skipped: Taint attributes not supported with DBI::PurePerl\nt/zvp_14utf8.t .................. ok     \nt/zvp_15array.t ................. ok     \nt/zvp_16destroy.t ............... ok     \nt/zvp_19fhtrace.t ............... ok     \nt/zvp_20meta.t .................. ok   \nt/zvp_30subclass.t .............. ok     \nt/zvp_31methcache.t ............. ok     \nt/zvp_35thrclone.t .............. ok     \nt/zvp_40profile.t ............... skipped: profiling not supported for DBI::PurePerl\nt/zvp_41prof_dump.t ............. skipped: profiling not supported for DBI::PurePerl\nt/zvp_42prof_data.t ............. skipped: profiling not supported for DBI::PurePerl\nt/zvp_43prof_env.t .............. skipped: profiling not supported for DBI::PurePerl\nt/zvp_48dbi_dbd_sqlengine.t ..... ok    \nt/zvp_49dbd_file.t .............. ok    \nt/zvp_50dbm_simple.t ............ ok     \nt/zvp_51dbm_file.t .............. ok    \nt/zvp_52dbm_complex.t ........... skipped: DBI::SQL::Nano is being used\nt/zvp_53sqlengine_adv.t ......... ok   \nt/zvp_60preparse.t .............. skipped: preparse not supported for DBI::PurePerl\nt/zvp_65transact.t .............. ok     \nt/zvp_70callbacks.t ............. skipped: $h-&gt;{Callbacks} attribute not supported for DBI::PurePerl\nt/zvp_72childhandles.t .......... ok     \nt/zvp_73cachedkids.t ............ ok    \nt/zvp_80proxy.t ................. skipped: modules required for proxy are probably not installed (e.g., RPC/PlClient.pm)\nt/zvp_85gofer.t ................. ok     \nt/zvp_86gofer_fail.t ............ skipped: requires Callbacks which are not supported with PurePerl\nt/zvp_87gofer_cache.t ........... ok    \nt/zvp_90sql_type_cast.t ......... ok     \nt/zvp_91_store_warning.t ........ ok   \nt/zvxgn_48dbi_dbd_sqlengine.t ... ok    \nt/zvxgn_49dbd_file.t ............ ok    \nt/zvxgn_50dbm_simple.t .......... ok     \nt/zvxgn_51dbm_file.t ............ ok   \nt/zvxgn_52dbm_complex.t ......... skipped: DBI::SQL::Nano is being used\nt/zvxgn_85gofer.t ............... ok     \nt/zvxgnp_48dbi_dbd_sqlengine.t .. ok    \nt/zvxgnp_49dbd_file.t ........... ok    \nt/zvxgnp_50dbm_simple.t ......... ok     \nt/zvxgnp_51dbm_file.t ........... ok   \nt/zvxgnp_52dbm_complex.t ........ skipped: DBI::SQL::Nano is being used\nt/zvxgnp_85gofer.t .............. ok     \nt/zvxgp_01basics.t .............. # --- Perl 5.018002 on darwin-thread-multi-2level\nt/zvxgp_01basics.t .............. ok       \nt/zvxgp_02dbidrv.t .............. ok     \nt/zvxgp_03handle.t .............. ok       \nt/zvxgp_04mods.t ................ ok     \nt/zvxgp_05concathash.t .......... ok     \nt/zvxgp_06attrs.t ............... ok     \nt/zvxgp_07kids.t ................ skipped: $h-&gt;{Kids} attribute not supported for DBI::PurePerl\nt/zvxgp_08keeperr.t ............. ok    \nt/zvxgp_09trace.t ............... ok     \nt/zvxgp_10examp.t ............... ok       \nt/zvxgp_11fetch.t ............... ok     \nt/zvxgp_12quote.t ............... ok     \nt/zvxgp_13taint.t ............... skipped: Taint attributes not supported with DBI::PurePerl\nt/zvxgp_14utf8.t ................ ok     \nt/zvxgp_15array.t ............... ok     \nt/zvxgp_16destroy.t ............. ok     \nt/zvxgp_19fhtrace.t ............. ok     \nt/zvxgp_20meta.t ................ ok   \nt/zvxgp_30subclass.t ............ ok     \nt/zvxgp_31methcache.t ........... ok     \nt/zvxgp_35thrclone.t ............ ok     \nt/zvxgp_40profile.t ............. skipped: profiling not supported for DBI::PurePerl\nt/zvxgp_41prof_dump.t ........... skipped: profiling not supported for DBI::PurePerl\nt/zvxgp_42prof_data.t ........... skipped: profiling not supported for DBI::PurePerl\nt/zvxgp_43prof_env.t ............ skipped: profiling not supported for DBI::PurePerl\nt/zvxgp_48dbi_dbd_sqlengine.t ... ok    \nt/zvxgp_49dbd_file.t ............ ok    \nt/zvxgp_50dbm_simple.t .......... ok     \nt/zvxgp_51dbm_file.t ............ ok   \nt/zvxgp_52dbm_complex.t ......... skipped: DBI::SQL::Nano is being used\nt/zvxgp_53sqlengine_adv.t ....... skipped: Modifying driver state won't compute running behind Gofer\nt/zvxgp_60preparse.t ............ skipped: preparse not supported for DBI::PurePerl\nt/zvxgp_65transact.t ............ skipped: Transactions not supported by DBD::Gofer\nt/zvxgp_70callbacks.t ........... skipped: $h-&gt;{Callbacks} attribute not supported for DBI::PurePerl\nt/zvxgp_72childhandles.t ........ ok     \nt/zvxgp_73cachedkids.t .......... ok    \nt/zvxgp_80proxy.t ............... skipped: modules required for proxy are probably not installed (e.g., RPC/PlClient.pm)\nt/zvxgp_85gofer.t ............... ok     \nt/zvxgp_86gofer_fail.t .......... skipped: requires Callbacks which are not supported with PurePerl\nt/zvxgp_87gofer_cache.t ......... skipped: Gofer DBI_AUTOPROXY\nt/zvxgp_90sql_type_cast.t ....... ok     \nt/zvxgp_91_store_warning.t ...... ok   \nt/zvxnp_48dbi_dbd_sqlengine.t ... ok    \nt/zvxnp_49dbd_file.t ............ ok    \nt/zvxnp_50dbm_simple.t .......... ok     \nt/zvxnp_51dbm_file.t ............ ok    \nt/zvxnp_52dbm_complex.t ......... skipped: DBI::SQL::Nano is being used\nt/zvxnp_85gofer.t ............... ok     \nAll tests successful.\nFiles=194, Tests=10553, 99 wallclock secs ( 1.74 usr  0.56 sys + 80.15 cusr  9.49 csys = 91.94 CPU)\nResult: PASS\nPERL_DL_NONLAZY=1 /usr/bin/perl \"-Iblib/lib\" \"-Iblib/arch\" test.pl\ntest.pl \nDBI test application $Revision$\nSwitch: DBI 1.636 by Tim Bunce, 1.636\nAvailable Drivers: DBM, ExampleP, File, Gofer, Proxy, SQLite, Sponge\ndbi:ExampleP:: testing 3 sets of 20 connections:\nConnecting... 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \nDisconnecting...\nConnecting... 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \nDisconnecting...\nConnecting... 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \nDisconnecting...\nconnect 20 and disconnect them, 3 times: 0.0016s / 60 = 0.0000s\nTesting handle creation speed...\n64516 NullP sth/s perl 5.018002 darwin-thread-multi-2level (gcc 4.2.1 -Os) 0.000016s\n\ntest.pl done\n\n\n\n TIMB/DBI-1.636.tar.gz\n  /usr/bin/make test -- OK\nRunning make install\nManifying blib/man1/dbiproxy.1\nManifying blib/man1/dbilogstrip.1\nManifying blib/man1/dbiprof.1\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nERROR: Can't create '/Library/Perl/5.18/darwin-thread-multi-2level'\nDo not have write permissions on '/Library/Perl/5.18/darwin-thread-multi-2level'\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n at -e line 1.\nmake: *** [pure_site_install] Error 13\n  TIMB/DBI-1.636.tar.gz\n  /usr/bin/make install  -- NOT OK\n----\n  You may have to su to root to install the package\n  (Or you may want to run something like\n    o conf make_install_make_command 'sudo make'\n  to raise your permissions.\n</code></pre>\n\n<p>Is there anyway of fixing this error so I can use perl support?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483544080, "post_id": 41467500, "comment_id": 70140594, "body": "Does it insert too many <code>$$</code>? The output has three of them. One in front of each <code>\\begin{}</code>. That&#39;s exactly what you said in your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483544129, "post_id": 41467500, "comment_id": 70140631, "body": "Oh. The <code>begin:text</code> does not count."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483544196, "post_id": 41467500, "comment_id": 70140681, "body": "I have now add how the output ought to look like."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483544232, "post_id": 41467500, "comment_id": 70140705, "body": "So you want the <code>$$</code> to be wrapped around the outer-most pair of <code>\\begin</code> and <code>\\end</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483544272, "post_id": 41467500, "comment_id": 70140735, "body": "Your code adds one <code>$$</code> at the beginning (<code>$flag</code> is not <code>0</code> initially) and one for every <code>\\begin{</code> <code>}</code>. I&#39;m not sure what you were expecting."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483544453, "post_id": 41467500, "comment_id": 70140864, "body": "@simbabque Yes, exactly."}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483544516, "post_id": 41467500, "comment_id": 70140909, "body": "@melpomene I don&#39;t understand why it does it before <code>begin:text</code> and before every <code>\\begin{}</code> and not just the first it finds."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483544652, "post_id": 41467500, "comment_id": 70141010, "body": "I told you why it does it at the beginning: Because <code>$flag</code> is not <code>0</code> initially (you set it to <code>1</code>). And it happens before <code>\\begin{tabular}</code> because your regex matches and sets <code>$flag</code> to <code>&quot;tabular&quot;</code>. Which is also not <code>0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1483544863, "creation_date": 1483544863, "answer_id": 41467873, "question_id": 41467500, "link": "https://stackoverflow.com/questions/41467500/finding-latex-in-variable/41467873#41467873", "title": "Finding LaTeX in variable?", "body": "<p>You need to start out with your <code>$flag</code> turned off, and you also need to keep track of your <code>$btype</code>. You already have the variable, but you are not using it. Since you only want the outermost pair, you need only need to capture the <code>begin</code> if you don't have a <code>$btype</code> yet.</p>\n\n<pre><code>my @lines = split \"\\n\", $f;\n$f = \"\";\nmy $btype;\nmy $flag = 0;\nfor my $line (@lines) {\n\n    # put in the beginning\n    if ( not $btype and $line =~ /\\\\begin\\{(.*?)\\}/ ) {\n        $flag  = 1;\n        $btype = $1;\n    }\n    if ($flag) {\n        $line = \"\\$\\$\\n$line\";\n        $flag = 0;\n    }\n\n    # now use $btype to find the end ...\n\n    $f .= \"$line\\n\";\n}\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>begin:text\n# Question intro text for dec04opg10\n\n$$\n\\begin{center}\n\\begin{tabular}{l|ccc}\n&amp; SURF &amp; VOL &amp; MW \\\\ \\hline\nSURF &amp;1 &amp; 0.995 &amp; 0.949 \\\\\nVOL &amp;  0.995 &amp; 1 &amp; 0.952 \\\\\nMW &amp; 0.949 &amp; 0.952 &amp; 1 \\\\ \\hline\n\\end{tabular}\n\\end{center}\nend:text\n\nbegin:multiple_choice\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 41467873, "answer_count": 1, "score": 1, "last_activity_date": 1483544863, "creation_date": 1483543895, "last_edit_date": 1483544641, "question_id": 41467500, "link": "https://stackoverflow.com/questions/41467500/finding-latex-in-variable", "title": "Finding LaTeX in variable?", "body": "<p>In the below script would I like to wrap <code>$$</code> around the latex section. Here it would be before <code>\\begin{center}</code> and after <code>\\end{center}</code>, but it could be any <code>\\begin{}</code>/<code>\\end{}</code> pair.</p>\n\n<p>The raw text at the bottom is in <code>$f</code>.</p>\n\n<p><strong>Question</strong></p>\n\n<p>Can anyone see why my script inserts too many <code>$$</code>?</p>\n\n<p><strong>My script</strong></p>\n\n<pre><code>my @lines = split \"\\n\", $f;\n$f = \"\";\nmy $btype = \"\";\nmy $flag = 1;\nfor my $line (@lines) {\n   $flag = $1 if $line =~ /\\\\begin\\{(.*?)\\}/;\n   if ($flag ne 0) {\n       $line = \"\\$\\$\\n$line\";\n       $flag = 0;\n   }\n   $f .= \"$line\\n\";\n}\n</code></pre>\n\n<p><strong>My output</strong></p>\n\n<pre><code>$$\nbegin:text\n# Question intro text for dec04opg10\n\n$$\n\\begin{center}\n$$\n\\begin{tabular}{l|ccc}\n&amp; SURF &amp; VOL &amp; MW \\\\ \\hline\nSURF &amp;1 &amp; 0.995 &amp; 0.949 \\\\\nVOL &amp;  0.995 &amp; 1 &amp; 0.952 \\\\\nMW &amp; 0.949 &amp; 0.952 &amp; 1 \\\\ \\hline\n\\end{tabular}\n\\end{center}\nend:text\n\nbegin:multiple_choice\n</code></pre>\n\n<p><strong>The raw text</strong></p>\n\n<pre><code>begin:text\n# Question intro text for dec04opg10\n\n\\begin{center}\n\\begin{tabular}{l|ccc}\n&amp; SURF &amp; VOL &amp; MW \\\\ \\hline\nSURF &amp;1 &amp; 0.995 &amp; 0.949 \\\\\nVOL &amp;  0.995 &amp; 1 &amp; 0.952 \\\\\nMW &amp; 0.949 &amp; 0.952 &amp; 1 \\\\ \\hline\n\\end{tabular}\n\\end{center}\nend:text\n\nbegin:multiple_choice\n</code></pre>\n\n<p><strong>Desired output</strong></p>\n\n<pre><code>begin:text\n# Question intro text for dec04opg10\n\n$$\n\\begin{center}\n\\begin{tabular}{l|ccc}\n&amp; SURF &amp; VOL &amp; MW \\\\ \\hline\nSURF &amp;1 &amp; 0.995 &amp; 0.949 \\\\\nVOL &amp;  0.995 &amp; 1 &amp; 0.952 \\\\\nMW &amp; 0.949 &amp; 0.952 &amp; 1 \\\\ \\hline\n\\end{tabular}\n\\end{center}\n$$\nend:text\n\nbegin:multiple_choice\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483542721, "post_id": 41467011, "comment_id": 70139711, "body": "Out of curiosity, when do you use this? Are your parsing your own application&#39;s website?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483542901, "post_id": 41467011, "comment_id": 70139812, "body": "@simbabque: Yes, I do. Actually I use this in tests"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483543013, "post_id": 41467011, "comment_id": 70139879, "body": "Interesting approach. Is simply clicking the links not sufficient?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483543185, "post_id": 41467011, "comment_id": 70139993, "body": "What&#39;s the problem with the solution you posted? Is it expensive? Or did you just forget you can create a sub?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483543390, "post_id": 41467011, "comment_id": 70140137, "body": "@ikegami: I think for this common case the sub should already exists in Mojolicious"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483543424, "post_id": 41467011, "comment_id": 70140152, "body": "Doesn&#39;t sound very common to me!"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483543851, "post_id": 41467011, "comment_id": 70140437, "body": "@ikegami: Mojolicious when got request it creates route which is accessible as <code>$c-&gt;match</code>. So somewhere it already converts <code>path</code> string into <code>route</code> object. Also there <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Reversibility\" rel=\"nofollow noreferrer\">note about reversibility</a>. To render route into path I can: <code>$r-&gt;lookup( &#39;route_name&#39; )-&gt;render({ foo =&gt; &#39;bar&#39; })</code>. But I did not find easy way to get route by path, except those five lines of code in question that I should put into sub"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483545511, "post_id": 41467011, "comment_id": 70141622, "body": "I agree with @ikegami that it&#39;s probably enough to just wrap this up in a sub and hide it in the test somewhere. If you want, you can inject it into the namespace of <code>$t</code> and make it a method, so you could do your own <code>$-&gt;url_matches_any_route($url)</code>. It would have to do some basic Test::Builder interaction, but you can easily borrow that from any other testing module, and return <code>$t</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": -1, "last_activity_date": 1483616844, "last_edit_date": 1483616844, "creation_date": 1483616525, "answer_id": 41484179, "question_id": 41467011, "link": "https://stackoverflow.com/questions/41467011/how-to-find-route-name-for-given-path-in-mojolicious/41484179#41484179", "title": "How to find route name for given path in Mojolicious?", "body": "<p>I have found only one place where we can find route by path. That is <a href=\"https://metacpan.org/pod/Mojolicious::Routes::Match#SYNOPSIS\" rel=\"nofollow noreferrer\">Mojolicious::Routes::Match</a> and <strong>there is no other way to do this</strong></p>\n\n<p>The one ugly thing here to my mind is requirement to supply <a href=\"https://metacpan.org/pod/Mojolicious::Controller\" rel=\"nofollow noreferrer\">Mojolicious::Controller</a> object. But controller is only required to make decision: <em>dispatch or not dispatch</em> Because it has extra info to make this decision: this is data to check <a href=\"https://metacpan.org/pod/Mojolicious::Routes#conditions\" rel=\"nofollow noreferrer\">conditions</a></p>\n\n<p>The problem as I think is because of here are mixed two things:</p>\n\n<ol>\n<li>Request</li>\n<li>Path</li>\n</ol>\n\n<p>And <a href=\"https://metacpan.org/pod/Mojolicious::Routes::Match#find\" rel=\"nofollow noreferrer\">find</a> should just return all routes matched against given arguments: path and method. Like <a href=\"http://www.w3schools.com/cssref/css_selectors.asp\" rel=\"nofollow noreferrer\">selectors does</a> The array result maybe cached (now routes with conditions are not cached)</p>\n\n<p>Then <strong>dispatcher</strong> should check <a href=\"https://metacpan.org/pod/Mojolicious::Routes#conditions\" rel=\"nofollow noreferrer\">conditions</a> against each route, not <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.14/lib/Mojolicious/Routes/Match.pm#L60\" rel=\"nofollow noreferrer\">matcher</a>. Here each condition may be called <em>in context of right controller and not default one</em>. And this will fix <a href=\"https://irclog.perlgeek.de/mojo/2015-11-14/text\" rel=\"nofollow noreferrer\">this issue</a>. The routes have in most cases their own controller class have not?</p>\n\n<p>Until this behavior will be fixed <strong>the example in the question is the best way to find routes</strong></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1483616844, "creation_date": 1483542441, "question_id": 41467011, "link": "https://stackoverflow.com/questions/41467011/how-to-find-route-name-for-given-path-in-mojolicious", "title": "How to find route name for given path in Mojolicious?", "body": "<p>When I parse html response body I want to find route names for all links found in the body. I use next code snippet:</p>\n\n<pre><code>    my $url =  Mojo::URL-&gt;new( $got );\n    my $method =  uc( $url-&gt;query-&gt;clone-&gt;param( '_method' ) || 'GET' );\n    my $c =  $t-&gt;app-&gt;build_controller;\n    my $m =  Mojolicious::Routes::Match-&gt;new( root =&gt; $t-&gt;app-&gt;routes );\n\n    $m-&gt;find( $c =&gt; { method =&gt; $method,  path =&gt; $url-&gt;path } );\n</code></pre>\n\n<p>Then <code>$m-&gt;endpoint-&gt;name</code> gives me the name of route.</p>\n\n<p><strong>But is there more simple way to find route name by given path?</strong></p>\n\n<p>I am looking for something like: <code>$app-&gt;routes-&gt;find( '/api/v/users/146/link/7QRgs' )</code> which should return <code>user_hash_check</code> because I have next route:</p>\n\n<pre><code>$guest-&gt;get( '/users/:id/link/:hash', 'user_hash_check' )-&gt;to( 'user#hash_check' );\n</code></pre>\n"}, {"tags": ["regex", "perl", "pcre", "regex-lookarounds"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1483540752, "post_id": 41466391, "comment_id": 70138347, "body": "What about just <code>&#47;[^|]+&#47;g</code>? What is your environment? Please share the current code that fails."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1483542921, "post_id": 41466498, "comment_id": 70139829, "body": "<code>my @items = split &#47;\\|&#47;, $string; shift(@items);</code> or <code>my @items = split &#47;\\|&#47;, substr($string, 1);</code> would be needed to account for the leading <code>|</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485456377, "post_id": 41466498, "comment_id": 70943573, "body": "Or <code>shift @items if $items[0] eq &#39;|&#39;;</code> to allow for there not being a leading <code>|</code>"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 5, "last_activity_date": 1483540854, "creation_date": 1483540854, "answer_id": 41466498, "question_id": 41466391, "link": "https://stackoverflow.com/questions/41466391/regex-to-gather-text-within-multiple-pipes/41466498#41466498", "title": "Regex to gather text within multiple pipes", "body": "<p>This looks like a job for <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>:</p>\n\n<pre><code>my @items = split /\\|/, $string;\n\nprint \"$_\\n\" for @items;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>N/A\ntext123\ntext1235\nMedium\n1\nMedium\ntest123\ntest456\ntest\ntest\ntest\nhttp\ntcp\n</code></pre>\n\n<p>As far as a regex, this should work:</p>\n\n<pre><code>my @items = /[^|]+/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1483541822, "post_id": 41466611, "comment_id": 70139143, "body": "That will only grab the first match. You need the <code>&#47;g</code> (global) modifier to get all matches (I believe that&#39;s what the OP is asking for anyhow)."}, {"owner": {"reputation": 372, "user_id": 7332500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Tvg.jpg?s=128&g=1", "display_name": "Nick Allan", "link": "https://stackoverflow.com/users/7332500/nick-allan"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1483541985, "post_id": 41466611, "comment_id": 70139250, "body": "Oh yes.  Makes sense.  I was debugging using <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> which has /g set by default.  Thanks!"}], "tags": [], "owner": {"reputation": 372, "user_id": 7332500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Tvg.jpg?s=128&g=1", "display_name": "Nick Allan", "link": "https://stackoverflow.com/users/7332500/nick-allan"}, "is_accepted": false, "score": 0, "last_activity_date": 1483541190, "creation_date": 1483541190, "answer_id": 41466611, "question_id": 41466391, "link": "https://stackoverflow.com/questions/41466391/regex-to-gather-text-within-multiple-pipes/41466611#41466611", "title": "Regex to gather text within multiple pipes", "body": "<p>Try this:</p>\n\n<pre><code>    [^\\|]+\n</code></pre>\n\n<p>I.e. Match anything except pipes</p>\n"}], "owner": {"reputation": 1, "user_id": 7374675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806a461fe5030c4d3b2ce58d17f52a14?s=128&d=identicon&r=PG&f=1", "display_name": "Corey ", "link": "https://stackoverflow.com/users/7374675/corey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1483541190, "creation_date": 1483540552, "last_edit_date": 1483540874, "question_id": 41466391, "link": "https://stackoverflow.com/questions/41466391/regex-to-gather-text-within-multiple-pipes", "title": "Regex to gather text within multiple pipes", "body": "<p>I have text that I need to match on in between the pipes. I have tried <code>\\|[^|]+\\|</code>, but that doesn't seem to gather each one.</p>\n\n<pre><code>|N/A|text123|text1235|Medium|1|Medium|test123|test456|test|test|test|http|tcp|\n</code></pre>\n"}, {"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483540379, "post_id": 41463996, "comment_id": 70138099, "body": "You say the <code>syswrite</code> is failing, but you didn&#39;t specify what error it returns. Please provide the value returned by <code>syswrite</code> (<code>0</code>? <code>undef</code>?) and any applicable error messages (<code>$!</code> if it returned <code>undef</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483540426, "post_id": 41463996, "comment_id": 70138135, "body": "Your loop reads until it encounters EOF (sysread==0). How does the client signal EOF? Does it close the entire socket instead of only shutting down the writer half?"}, {"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483541884, "post_id": 41463996, "comment_id": 70139195, "body": "@ikegami: The syswrite did not get an error, it returned the number of bytes it wrote, but they did not appear to the calling program.  However, your 2nd question led me to the answer.  I am now doing a shutdown( $sock, 1) to shutdown the writing from the caller and that fixed it.  Thanks!"}, {"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483542569, "post_id": 41463996, "comment_id": 70139617, "body": "I don&#39;t see any error in the sysreads.  They returned the numbers of bytes each time: the 1st time &gt; 0, the 2nd time = 0, and each time the value of $! was an empty string for the sysreads and syswrite."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483542594, "post_id": 41463996, "comment_id": 70139631, "body": "It&#39;s the <i>client</i>&#39;s <code>sysread</code> that&#39;s failing. /// <code>$!</code> is meaningless if called after a <code>sysread</code> or <code>syswrite</code> that didn&#39;t return <code>undef</code>."}, {"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483542946, "post_id": 41463996, "comment_id": 70139847, "body": "ah!  Thank-you!  yes, the client returned an undef for the sysread and the value of $! is &#39;Resource temporarily unavailable&#39;.  I was focusing too much on the error handling on the daemon instead of the caller.  d&#39;oh!!  thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1483542673, "last_edit_date": 1483542673, "creation_date": 1483542365, "answer_id": 41466985, "question_id": 41463996, "link": "https://stackoverflow.com/questions/41463996/multiple-sysreads-causing-a-following-syswrite-to-fail-in-perl/41466985#41466985", "title": "multiple sysreads causing a following syswrite to fail in Perl", "body": "<p>You say the <code>syswrite</code> in the deamon failed, but you also say it returned a positive number. This would indicate it <em>didn't</em> fail. <code>syswrite</code> returns <code>undef</code> on error.</p>\n\n<p>The <code>sysread</code> loop in the daemon reads until it encounters EOF, which is when <code>sysread</code> returns <code>0</code>. I am guessing the client signaled EOF by closing the entire socket, causing the <code>sysread</code> in the client to fail (return <code>undef</code> with <code>$!</code> set to <code>EBADF</code> (Bad file descriptor)). Instead, only shut down the writer half using</p>\n\n<pre><code>use Socket qw( SHUT_WR );\n\nshutdown($sock, SHUT_WR)\n   or die($!);\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 41466985, "answer_count": 1, "score": 3, "last_activity_date": 1483542673, "creation_date": 1483533365, "question_id": 41463996, "link": "https://stackoverflow.com/questions/41463996/multiple-sysreads-causing-a-following-syswrite-to-fail-in-perl", "title": "multiple sysreads causing a following syswrite to fail in Perl", "body": "<p>I have a daemon process that accepts connections, reads a JSON request via a single sysread, processes it, and sends back a JSON response via syswrite.  This works fine.  But I wanted to make the reading more robust in case of partial reads.  So I used the common technique I see folks use of looping until 0 bytes are read, while specifying to append the input to the end of the buffer.  When I do this simple loop, the following syswrite claims it wrote out X bytes, but the caller thinks it read back 0 bytes.  It appears that doing one than 1 sysread on a socket will cause a future syswrite on that socket to fail.</p>\n\n<p>ie: I had changed my single sysread to do this instead:</p>\n\n<pre><code>my $done = 0 ;\nwhile ( ! $done ) {\n    $bytes = sysread( $client, $json_text, BUFSIZ, length( $json_text )) ;\n    $done++ if ( $bytes == 0 ) ;\n}\n</code></pre>\n\n<p>I have verified that in each case, the request that I receive is the same, and the response that I am sending is the same.  The only thing that changed is the additional sysread that read 0 bytes to indicate that I had read everything available.</p>\n\n<p>I have attached a simple stripped down program that illustrates this.\nCan someone explain to me what is happening here?\nI've also tried specifically telling syswrite the number of bytes to write and the starting position (0) with the same effect.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Socket ;\nuse JSON ;\nuse constant BUFSIZ =&gt; 1024 ;\n\nmy $protocol = getprotobyname( 'tcp' ) ;\n\nmy $server ;\nif ( ! socket( $server, AF_INET, SOCK_STREAM, $protocol )) {\n    die( \"socket() failed: $!\" ) ;\n}\nif ( ! setsockopt( $server, SOL_SOCKET, SO_REUSEADDR, 1 )) {\n    die( \"setsockopt(): failed: $!\" ) ;\n}\n\nmy $my_addr = sockaddr_in( 2007, INADDR_ANY ) ;\nbind( $server, $my_addr )     or die( \"bind(): failed: $!\" ) ;\nlisten( $server, SOMAXCONN )  or die( \"listen(): failed: $!\" ) ;\n\nmy ( $remote_addr, $client ) ;\n$remote_addr = accept( $client, $server ) ;\n$_ = select( $client ); $| = 1; select $_ ;       # autoflushing\nmy $json_text = \"\" ;\nmy $bytes     = 0 ;\n\n# a later syswrite() doesn't work when sysread() called more than once\nmy $done = 0 ;\nwhile ( ! $done ) {\n    $bytes = sysread( $client, $json_text, BUFSIZ, length( $json_text )) ;\n    $done++ if ( $bytes == 0 ) ;\n}\n\n# calling sysread once works ok with following syswrite\n# sysread( $client, $json_text, BUFSIZ, length( $json_text )) ;\n\nprint \"Got a JSON request: $json_text\\n\" ;\n\n# just make up some dummy response to whatever we received\nmy $out_struct = {\n    'id'        =&gt; 'server6-alive-test',\n    'output'    =&gt; [ 'FOOBAR' ],\n    'errors'    =&gt; [],\n    'status'    =&gt; 0,\n    'served-by' =&gt; 'server6',\n};\n\n$json_text = to_json( $out_struct, { utf8 =&gt; 1, pretty =&gt; 1 } ) ;\nmy $num = syswrite( $client, $json_text ) ;\nprint \"wrote $num bytes to server\\n\" ;\n</code></pre>\n\n<p>and this debug output is from the callers perspective:</p>\n\n<pre><code># NO while loop\ndebug: main::set_up_systems: testing if server6 is alive\ndebug: main::send_cmd_to_daemon: sending command 'alive' to remote\ndebug: main::check_if_system_alive: Got: 'FOOBAR'\n\n# with while loop version\ndebug: main::set_up_systems: testing if server6 is alive\ndebug: main::send_cmd_to_daemon: sending command 'alive' to remote\ndebug: main::send_cmd_to_daemon: empty JSON string returned\ndebug: main::process_cmd: server6: No output sent back.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483534332, "post_id": 41463058, "comment_id": 70134053, "body": "What&#39;s in line 52?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483536245, "post_id": 41463058, "comment_id": 70135290, "body": "@simbabque probably <code>die $response-&gt;status_line;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 2, "last_activity_date": 1483536213, "last_edit_date": 1495541785, "creation_date": 1483536213, "answer_id": 41464883, "question_id": 41463058, "link": "https://stackoverflow.com/questions/41463058/getting-the-error-403-forbidden-while-posting-the-website-address-through-perl/41464883#41464883", "title": "Getting the Error 403 Forbidden while posting the website address through Perl", "body": "<p>Google  Terms  of Service  <a href=\"https://support.google.com/webmasters/answer/66357?hl=en\" rel=\"nofollow noreferrer\">disallow  automated  searches</a>. They  are\ndetecting you're  sending this  from a script  because your  headers and\nyour browser  standard headers are  very different, and you  can analyze\nthem if you want.</p>\n\n<p>In the  old times they had  a SOAP API,  and you could use  modules like\n<a href=\"http://search.cpan.org/~lbrocard/WWW-Search-Google-0.23/Google.pm\" rel=\"nofollow noreferrer\"><code>WWW::Search::Google</code></a> but that's not  the case anymore because this\nAPI was deprecated.</p>\n\n<p>Alternatives  were  already  discussed in  the  following  StackOverflow\nquestion:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4082966/what-are-the-alternatives-now-that-the-google-web-search-api-has-been-deprecated\">What  are the alternatives  now that the  Google web search  API has\nbeen deprecated?</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "edited": false, "score": 0, "creation_date": 1483680152, "post_id": 41466446, "comment_id": 70204509, "body": "Thanks for your reply. I would like to get the data which is present in the tag &lt;h3 class=&quot;gs_rt&quot;&gt; instead of &lt;title&gt;. I have used the code &quot;my $response = $UserAgent-&gt;get($xtx1)-&gt;res-&gt;dom-&gt;at(&#39;&lt;h3 class=&quot;gs_rt&quot;&gt;&#39;)-&gt;text;&quot; but its getting error. Could you please suggest."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "edited": false, "score": 0, "creation_date": 1483687391, "post_id": 41466446, "comment_id": 70207147, "body": "@Siva try $UserAgent-&gt;get($xtx1)-&gt;res-&gt;dom-&gt;at(&#39;h3.gs_rt&#39;)-&gt;text;    PS: Don&#39;t forget to accept my answer, if my example suits your needs. :-)"}, {"owner": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "edited": false, "score": 0, "creation_date": 1483699243, "post_id": 41466446, "comment_id": 70213017, "body": "Hi, its not working out, its printing the blank line"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "edited": false, "score": 0, "creation_date": 1483699626, "post_id": 41466446, "comment_id": 70213225, "body": "Then you gave me the wrong DOM. The HTML must look like this &lt;h3 class=&quot;gs_rt&quot;&gt;Text123&lt;/h3&gt;, if there are more selectors such as span a href before the text, they need to be specified."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "edited": false, "score": 0, "creation_date": 1483699705, "post_id": 41466446, "comment_id": 70213272, "body": "@Siva -&gt;res-&gt;dom-&gt;at(&#39;h3.gs_rt a&#39;)-&gt;text;  It prints Molecular and phenotypic effects of heterozygous, homozygous, and compound heter ozygote myosin heavy-chain mutations"}], "tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 0, "last_activity_date": 1483540707, "creation_date": 1483540707, "answer_id": 41466446, "question_id": 41463058, "link": "https://stackoverflow.com/questions/41463058/getting-the-error-403-forbidden-while-posting-the-website-address-through-perl/41466446#41466446", "title": "Getting the Error 403 Forbidden while posting the website address through Perl", "body": "<p>Google has blacklisted <code>LWP::UserAgent</code> They either blacklisted the UserAgent or parts of the request (headers whatsoever).</p>\n\n<p>I suggest you use <a href=\"http://mojolicious.org/perldoc/Mojo/UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent.</a>. The request looks like by default more like a browser. You must write minimum 1 lines of code.</p>\n\n<pre><code>use Mojo::UserAgent;\nuse strict;\nuse warnings;\n\nprint Mojo::UserAgent-&gt;new-&gt;get('https://scholar.google.co.in/scholar_lookup?author=N.+R.+Alpert&amp;author=S.+A.+Mohiddin&amp;author=D.+Tripodi&amp;author=J.+Jacobson-Hatzell&amp;author=K.+Vaughn-Whitley&amp;author=C.+Brosseau+&amp;publication_year=2005&amp;title=Molecular+and+phenotypic+effects+of+heterozygous,+homozygous,+and+compound+heterozygote+myosin+heavy-chain+mutations&amp;journal=Am.+J.+Physiol.+Heart+Circ.+Physiol.&amp;volume=288&amp;pages=H1097-H1102')-&gt;res-&gt;dom-&gt;at('title')-&gt;text;\n\n# Prints Molecular and phenotypic effects of heterozygous, homozygous, and      \n# compound heterozygote myosin heavy-chain mutations - Google Scholar\n</code></pre>\n\n<p><strong>Terms</strong></p>\n\n<p>The code does not accept any terms nor additional lines has been added to bypass security checks. It's absolutely fine.</p>\n"}, {"tags": [], "owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "is_accepted": false, "score": 0, "last_activity_date": 1483547119, "creation_date": 1483547119, "answer_id": 41468668, "question_id": 41463058, "link": "https://stackoverflow.com/questions/41463058/getting-the-error-403-forbidden-while-posting-the-website-address-through-perl/41468668#41468668", "title": "Getting the Error 403 Forbidden while posting the website address through Perl", "body": "<p>You can fetch your content if you add a User Agent string to identify yourself to the web server:</p>\n\n<pre><code>...\nmy $UserAgent = LWP::UserAgent-new;\n$UserAgent-&gt;agent('Mozilla/5.0'); #...add this...\n...\nprint $1;\n...\n</code></pre>\n\n<p>This prints: \"Molecular and phenotypic effects of heterozygous, homozygous, and compound heterozygote myosin heavy-chain mutations\"</p>\n"}], "owner": {"reputation": 19, "user_id": 3960481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c61b18bc3512287c2449fcdb640e70?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/3960481/siva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1483547119, "creation_date": 1483530431, "last_edit_date": 1483530606, "question_id": 41463058, "link": "https://stackoverflow.com/questions/41463058/getting-the-error-403-forbidden-while-posting-the-website-address-through-perl", "title": "Getting the Error 403 Forbidden while posting the website address through Perl", "body": "<pre><code>use strict;\n\nuse LWP::UserAgent;\n\nmy $UserAgent = LWP::UserAgent-&gt;new;\n\nmy $response = $UserAgent-&gt;get(\"https://scholar.google.co.in/scholar_lookup?author=N.+R.+Alpert&amp;author=S.+A.+Mohiddin&amp;author=D.+Tripodi&amp;author=J.+Jacobson-Hatzell&amp;author=K.+Vaughn-Whitley&amp;author=C.+Brosseau+&amp;publication_year=2005&amp;title=Molecular+and+phenotypic+effects+of+heterozygous,+homozygous,+and+compound+heterozygote+myosin+heavy-chain+mutations&amp;journal=Am.+J.+Physiol.+Heart+Circ.+Physiol.&amp;volume=288&amp;pages=H1097-H1102\");\n\nif ($response-&gt;is_success)\n\n{\n\n$response-&gt;content =~ /&lt;title&gt;(.*?) - Google Scholar&lt;\\/title&gt;/;\n\nprint $1;\n}\n\nelse\n\n{\n\ndie $response-&gt;status_line;\n\n}\n</code></pre>\n\n<p>I am getting the below error while running this script.</p>\n\n<p><strong>403 Forbidden at D:\\Getelement.pl line 52.</strong></p>\n\n<p>I have pasted this website address in address bar, and its redirecting exactly to that site, but its not working in while running by script.</p>\n\n<p>Can you please help me on this issue.</p>\n"}, {"tags": ["perl", "jenkins", "listener"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1483529780, "post_id": 41461901, "comment_id": 70131145, "body": "You could daemonize it <code>daemonize -E BUILD_ID=dontKillMe &#47;path&#47;to&#47;script</code>. See <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build\" rel=\"nofollow noreferrer\">Spawning processes from build</a> for more details."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 3746946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa3eceba3cf7fccc26f17c9ee4d46e8?s=128&d=identicon&r=PG&f=1", "display_name": "GJoe", "link": "https://stackoverflow.com/users/3746946/gjoe"}, "is_accepted": true, "score": 1, "last_activity_date": 1483588797, "last_edit_date": 1495540909, "creation_date": 1483588797, "answer_id": 41477117, "question_id": 41461901, "link": "https://stackoverflow.com/questions/41461901/listener-starting-from-terminal-but-not-from-jenkins/41477117#41477117", "title": "Listener starting from terminal but not from Jenkins", "body": "<p>As mentioned in <a href=\"https://stackoverflow.com/a/16677609\" title=\"start daemon on remote server via Jenkins SSH shell script exits mysteriously\">this answer</a> to a similar question, the <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/ProcessTreeKiller\" rel=\"nofollow noreferrer\">Jenkins ProcessTreeKiller</a> watches for spawned processes and eliminates them to avoid zombies.</p>\n\n<p>To disable this behavior for a particular job, change the environment variable BUILD_ID which ProcessTreeKiller looks for. For example:</p>\n\n<pre><code>BUILD_ID=dontKillMe  /my/database/listener/script.pl\n</code></pre>\n\n<p>Alternatively, the feature can be can be disabled for all jobs when Jenkins is launched:</p>\n\n<pre><code>java -Dhudson.util.ProcessTree.disable=true -jar jenkins.war\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 5563952, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e36ad33be49d389bd4ab6dfa6583d25f?s=128&d=identicon&r=PG&f=1", "display_name": "tarunkt", "link": "https://stackoverflow.com/users/5563952/tarunkt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 41477117, "answer_count": 1, "score": 2, "last_activity_date": 1483588797, "creation_date": 1483526703, "question_id": 41461901, "link": "https://stackoverflow.com/questions/41461901/listener-starting-from-terminal-but-not-from-jenkins", "title": "Listener starting from terminal but not from Jenkins", "body": "<p>I have written a perl script to start the listener on a database. The perl script runs fine when run from the terminal,it starts the listener and even when I logout of the machine and log back in, the listener is up and running(as it should be).</p>\n\n<p>But I am facing a problem when I try to do the same through Jenkins. I have added that VM as a slave on Jenkins and am running that same script from the Jenkins <code>Execute Shell</code> option. The console output from Jenkins shows that the listener has been started, and <code>ps -ef | grep tnsl</code> shows the listener is up, but only as long as the script from Jenkins is running. As soon as the Jenkins build completes , <code>ps -ef | grep tnsl</code> shows no results. </p>\n\n<p>I have been trying to debug this for sometime. Can anyone throw some light here ? I understand the question may sound vague when first read, but I am happy to provide any info anyone deems necessary.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 5, "creation_date": 1483522307, "post_id": 41460320, "comment_id": 70126352, "body": "If you show you&#39;ve made an attempt to solve this yourself you&#39;ll find people will be much more generous in helping you"}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 1, "creation_date": 1483522476, "post_id": 41460320, "comment_id": 70126472, "body": "Your example is <b>confusing</b> which numbers are  surrounded by quotations ?"}, {"owner": {"reputation": 1490, "user_id": 1456318, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZDHcR.png?s=128&g=1", "display_name": "michaPau", "link": "https://stackoverflow.com/users/1456318/michapau"}, "reply_to_user": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1483525252, "post_id": 41460320, "comment_id": 70128166, "body": "@Meninx I guess the values like <code>&quot;15,4&quot;</code> should become <code>15.4</code> without the quotation marks."}], "answers": [{"comments": [{"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "edited": false, "score": 0, "creation_date": 1483529557, "post_id": 41460604, "comment_id": 70130992, "body": "Why downvoted ?"}, {"owner": {"reputation": 3946, "user_id": 65706, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e0652a12b8a5b2577f91f0e192ea3f9?s=128&d=identicon&r=PG", "display_name": "Yordan Georgiev", "link": "https://stackoverflow.com/users/65706/yordan-georgiev"}, "edited": false, "score": 1, "creation_date": 1577519057, "post_id": 41460604, "comment_id": 105190338, "body": "Thanks for the link - awesome site ;o). I even did not have the privilege to get the quotes  around the digits , thus <a href=\"https://regex101.com/r/t5Euq1/6\" rel=\"nofollow noreferrer\">regex101.com/r/t5Euq1/6</a> <code>([;]?[&quot;]*[0-9]+)[,]([0-9]+[&quot;]*[;]?)</code>"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 1, "last_activity_date": 1483522921, "creation_date": 1483522921, "answer_id": 41460604, "question_id": 41460320, "link": "https://stackoverflow.com/questions/41460320/complex-regex-to-replace-commas-with-dots-for-quoted-values-then-remove-quotes/41460604#41460604", "title": "Complex regex to replace commas with dots for quoted values then remove quotes", "body": "<pre><code>,(?!(?:[^\"]*\"[^\"]*\")*[^\"]*$)\n</code></pre>\n\n<p>You can use this remove <code>,</code> between <code>\"</code>.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/t5Euq1/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/t5Euq1/1</a></p>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1483526786, "post_id": 41460718, "comment_id": 70129157, "body": "Why the downvote? This is the right solution!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1483536887, "post_id": 41460718, "comment_id": 70135694, "body": "Maybe cos the regex is too generic and could match a legitimate string?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1483524126, "last_edit_date": 1483524126, "creation_date": 1483523277, "answer_id": 41460718, "question_id": 41460320, "link": "https://stackoverflow.com/questions/41460320/complex-regex-to-replace-commas-with-dots-for-quoted-values-then-remove-quotes/41460718#41460718", "title": "Complex regex to replace commas with dots for quoted values then remove quotes", "body": "<p>Use a CSV parser, and this becomes easy:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Text::CSV_XS;\n\nmy $csv = Text::CSV_XS-&gt;new( { binary =&gt; 1, auto_diag =&gt; 1 } );\n\nwhile ( my $row = $csv-&gt;getline( \\*DATA ) ) {\n   s/,/./ for @$row;\n   $csv-&gt;say( \\*STDOUT, $row );\n}\n\n\n__DATA__\n\"GREEN\",\"15,4\",55,\"15,5\",64,\"17,0\",\"18,9\",107,145,21,38,\n\"BLUE\",\"15,1\",46,\"15,2\",51,\"11,4\",\"13,5\",89,96,25,7,\n</code></pre>\n\n<p>Example above uses inlined data to make it runnable standalone - you'll probably want to use an input and output file instead of <code>DATA</code> and <code>STDOUT</code>. </p>\n\n<p>If you're particularly wanting to keep the quotes around the 'strings' but not the 'numbers', then you can make use of <code>keep_meta_info</code> or just re-add them when they're needed.</p>\n"}], "owner": {"reputation": 134, "user_id": 4278620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea3352eb3abcf1b53e2809642f9444c0?s=128&d=identicon&r=PG&f=1", "display_name": "SamS", "link": "https://stackoverflow.com/users/4278620/sams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "closed_date": 1483548158, "accepted_answer_id": 41460718, "answer_count": 2, "score": 0, "last_activity_date": 1483524126, "creation_date": 1483522114, "last_edit_date": 1483522939, "question_id": 41460320, "link": "https://stackoverflow.com/questions/41460320/complex-regex-to-replace-commas-with-dots-for-quoted-values-then-remove-quotes", "closed_reason": "Needs more focus", "title": "Complex regex to replace commas with dots for quoted values then remove quotes", "body": "<p>I have some csv files which have been incorrectly exported. Some fields containing numbers have been incorrectly exported as Strings with the decimal place as a comma instead of a dot.</p>\n\n<p>Here's a couple of examples:</p>\n\n<p><code>\"GREEN,\"15,4\",55,\"15,5\",64,\"17,0\",\"18,9\",107,145,21,38,\n\"BLUE\",\"15,1\",46,\"15,2\",51,\"11,4\",\"13,5\",89,96,25,7,</code></p>\n\n<p>So, I want to switch the commas to dots for numbers in quotation marks and then remove the quotation marks from all numbers.</p>\n\n<p>Can anyone help me out here please?</p>\n"}, {"tags": ["perl", "loops"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1483518743, "post_id": 41459287, "comment_id": 70124257, "body": "@chorobo the lines are not corresponding ..i am matching one string in two files and spliting both lines of two different files.as i need to do operation on values and then need to print.."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "edited": false, "score": 0, "creation_date": 1483518797, "post_id": 41459287, "comment_id": 70124289, "body": "@Volverine: So use hashes. There are plenty of similar questions here or on <a href=\"http://www.perlmonks.org\" rel=\"nofollow noreferrer\">PerlMonks</a>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1483518553, "creation_date": 1483518553, "answer_id": 41459287, "question_id": 41459221, "link": "https://stackoverflow.com/questions/41459221/pattern-not-printing-while-trying-to-match-same-string-on-two-files/41459287#41459287", "title": "pattern not printing while trying to match same string on two files", "body": "<p>In the inner loop, you exhaust <code>$fh2</code>. In the next iteration of the outer loop, <code>&lt;$fh2&gt;</code> returns <code>undef</code>, as the filehandle has already read the whole file.</p>\n\n<p>It's not clear what you're trying to achieve, but if the files are synchronised (i.e. n<sup>th</sup> line of file1 always corresponds to n<sup>th</sup> line in file2), you can just read one file from each handle; otherwise, the common practice is to hash one file and then process the second one line by line, checking the interesting values in the hash.</p>\n"}, {"tags": [], "owner": {"reputation": 28, "user_id": 1500617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ac5d22ad2724d24566c475f56c2070?s=128&d=identicon&r=PG", "display_name": "praveenzx", "link": "https://stackoverflow.com/users/1500617/praveenzx"}, "is_accepted": true, "score": 0, "last_activity_date": 1483596954, "creation_date": 1483596954, "answer_id": 41478403, "question_id": 41459221, "link": "https://stackoverflow.com/questions/41459221/pattern-not-printing-while-trying-to-match-same-string-on-two-files/41478403#41478403", "title": "pattern not printing while trying to match same string on two files", "body": "<p>For quick Fix, load the file contents to an array as follows\n<code></p>\n\n<pre><code>open(fh1, '&lt;', $f1) or die \"Could not open file '$f1' $!\";\nmy @file1= &lt;fh1&gt;;\nclose(fh1);\n\nopen(fh2, '&lt;', $f2) or die \"Could not open file '$f2' $!\";\nmy @file2= &lt;fh2&gt;;\nclose(fh2);\n</code></pre>\n\n<p></code></p>\n\n<p>Now instead of while loop try and see using the foreach loop as shown below</p>\n\n<p><code>\n    foreach my $line1 (@file1) \n</code></p>\n\n<p>@volverin : I have not tested the codes , just made some changes for you to refer . </p>\n\n<p>praveenzx~</p>\n"}], "owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41478403, "answer_count": 2, "score": 0, "last_activity_date": 1483596954, "creation_date": 1483518248, "last_edit_date": 1483519346, "question_id": 41459221, "link": "https://stackoverflow.com/questions/41459221/pattern-not-printing-while-trying-to-match-same-string-on-two-files", "title": "pattern not printing while trying to match same string on two files", "body": "<p>I am trying to find pattern from two different files and  then need to sum the last values of two filesand then print sum with first ,second and third field(sum) in xls...this is so far i wrote but it is printing value of first if loop not sure why not printing for second.if somone having better logic than below to do same operation ...  </p>\n\n<pre><code>file1.txt \nL01B,\"ABC\",832048921.62\nL01E,\"DDD\",70675364.68\nL02A,\"ZZZ\",19747732853.37\n\nfile2.txt\nL01B,\"AAA\",832048921.62\nL01E,\"DDD\",70675364.68\nL02A,\"ZZZ\",19747732853.37\n#!/usr/bin/perl\n\nuse warnings;\nuse strict ;\n  use Date::Simple qw(d8);\n\n  my $firstdate = $ARGV[0];\n  my $d1 = d8($firstdate);\n my $seconddate = $ARGV[1];\n  my $d2 = d8($seconddate);\n  my $f1=$d1-&gt; format ('%d_%m_%Y');\n  my $f2=$d2-&gt; format ('%d_%m_%Y');\n  print  \" $f1 \\t\";\n  print \"$f2\\n\";\n  open(my $fh1, '&lt;', $f1) or die \"Could not open file '$f1' $!\";\n  open(my $fh2, '&lt;', $f2) or die \"Could not open file '$f2' $!\";\n\n  while ( my $line1 = &lt;$fh1&gt;) {\n           chomp $line1;\n           if ($line1 =~/L01B/){\n               my @array = split /[,]+/,$line1;\n               {\n               while (my $line2 = &lt;$fh2&gt;)\n               {\n               if ($line2 =~/L01B/){\n\n               my @array1  = split /[,]+/,$line2;\n               print \" match found sec $array1[0]\\n\";\n              print \" match found sec $array1[1]\\n\";\n              print \" match found sec $array1[2]\\n\";\n              print \" match found first $array[0]\\n\";\n              print \" match found first $array[1]\\n\";\n              print \" match found first $array[2]\\n\";\n              }\n\n              }\n              }\n             }\n             if ($line1 =~/L01B/){\n               my @array2 = split /[,]+/,$line1;\n               {\n               while (my $line2 = &lt;$fh2&gt;)\n               {\n               if ($line2 =~/L01A/){\n\n               my @array3  = split /[,]+/,$line2;\n               print \" match found sec $array2[0]\\n\";\n              print \" match found sec $array2[1]\\n\";\n              print \" match found sec $array2[2]\\n\";\n              print \" match found first $array3[0]\\n\";\n              print \" match found first $array3[1]\\n\";\n              print \" match found first $array3[2]\\n\";\n              }\n\n              }\n              }\n\n             }\n\n             }\n    close($fh1);\n    close($fh2);        \n</code></pre>\n"}, {"tags": ["perl", "hashtable", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483510621, "post_id": 41457255, "comment_id": 70120650, "body": "What do you mean by &quot;<i>pass my subroutine <b>as hash</b></i>&quot;? You can pass subroutine as coderef, but what is &quot;<i>as hash</i>&quot;? Also, you show <code>g_usrs_data</code> but then in &quot;<i>example</i>&quot; use <code>usrs_hash</code> and <code>create_db</code>?  What does <code>,$sql1m</code> mean? The &quot;<i>example</i>&quot; is completely unclear, and not correct code.  Can you clarify?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483510802, "post_id": 41457255, "comment_id": 70120707, "body": "i want to pass same subroutine function(i.e g_usrs_data) into another subroutine with different name(i.e usrs_hash) using hashes.@zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483511108, "post_id": 41457255, "comment_id": 70120846, "body": "OK ... what do you mean by &quot;<i>using hashes</i>&quot;?  You can pass subroutines around using <i>code reference</i>, which is, like every reference, a scalar.  I don&#39;t understand what hashes have to do with that.  (You <i>can</i> make that code reference be a value of a hash pair, if that&#39;s what you mean.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483511356, "post_id": 41457255, "comment_id": 70120962, "body": "using hashes mean in hashtable format and $sql1m is another variable.You can skip of that thing@zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483511599, "post_id": 41457255, "comment_id": 70121069, "body": "I posted a basic way to pass code around.  Let me know if that is what you mean"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1562387154, "last_edit_date": 1562387154, "creation_date": 1483511572, "answer_id": 41457598, "question_id": 41457255, "link": "https://stackoverflow.com/questions/41457255/how-to-pass-entire-subroutine-into-hashtable-data-using-perl/41457598#41457598", "title": "How to pass entire subroutine into hashtable data using perl?", "body": "<p>Subroutines can be passed around as <em>code references</em>.  See <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>.</p>\n\n<p>An example with an anonymous subroutine</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $rc = sub { \n    my @args = @_; \n    print \"\\tIn coderef. Got: |@_|\\n\"; \n    return 7;  \n};             # note the semicolon!\n\nsub use_rc {\n    my ($coderef, @other_args) = @_; \n    my $ret = $coderef-&gt;('arguments', 'to', 'pass');\n    return $ret;\n}\n\nmy $res = use_rc($rc);\nprint \"$res\\n\";\n</code></pre>\n\n<p>This silly program prints</p>\n\n<pre>\n        In coderef. Got: |arguments to pass|\n7\n</pre>\n\n<p>Notes on code references</p>\n\n<ul>\n<li><p>The anonymous subroutine is assigned to a scalar <code>$rc</code>, making that a code reference</p></li>\n<li><p>With an existing (named) sub, say <code>func</code>, a code reference is made by <code>my $rc = \\&amp;func;</code>  </p></li>\n<li><p>This <code>$rc</code> is a normal scalar variable, that can be passed to subroutines like any other</p></li>\n<li><p>The sub is then called by <code>$rc-&gt;();</code> where in parenthesis we can pass it arguments</p></li>\n</ul>\n\n<p>Note that the syntax for creating and using them are just like for other data types  </p>\n\n<ul>\n<li><p>As anonymous assign by <code>= sub { }</code>, much like <code>= [ ]</code>  (arrayref) and <code>= { }</code> (hashref) </p></li>\n<li><p>For a named sub use <code>&amp;</code> instead of a sigil, so <code>\\&amp;</code> for sub vs. <code>\\@</code> (array) and <code>\\%</code> (hash) </p></li>\n<li><p>They are used by <code>-&gt;()</code>, much like <code>-&gt;[]</code> (arrayref) and <code>-&gt;{}</code> (hashref)</p></li>\n</ul>\n\n<p>For references in general see <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>. Subroutines are covered in depth in <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>.</p>\n\n<hr>\n\n<p>See for example <a href=\"https://stackoverflow.com/questions/834590/why-would-i-use-perl-anonymous-subroutines-instead-of-a-named-one\">this post</a>  on anonymous subs, with a number of answers.</p>\n\n<p>For far more see <a href=\"https://www.masteringperl.org/2014/02/naming-anonymous-subroutines/\" rel=\"nofollow noreferrer\">this article</a> from <em>Mastering Perl</em> and <a href=\"https://www.effectiveperlprogramming.com/2011/09/enchant-closures-for-better-debugging-output/\" rel=\"nofollow noreferrer\">this article</a> from <em>The Effective Perler</em>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7341243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562387154, "creation_date": 1483510241, "last_edit_date": 1559712383, "question_id": 41457255, "link": "https://stackoverflow.com/questions/41457255/how-to-pass-entire-subroutine-into-hashtable-data-using-perl", "title": "How to pass entire subroutine into hashtable data using perl?", "body": "<p>I have the following subroutine which i should pass the routine as hashtable and that hashtable should be again called inside another subroutine using perl? </p>\n\n<p><strong>input file(from linux command bdata):</strong></p>\n\n<pre><code>NAME     PEND RUN SUSP JLIM JLIMR   RATE   HAPPY\nachandra 0    48  0    2000 50:2000 151217 100%\nagutta   1    5   0    100  50:100  16561  83%\n</code></pre>\n\n<p><strong>My subroutine:</strong></p>\n\n<pre><code>sub g_usrs_data()\n{\n    my($lines) = @_;    \n    my $header_found = 0;\n    my @headers = ();\n    my $row_count = 0;\n    my %table_data = ();\n    my %row_data = ();\n\n    $lines=`bdata`; \n    #print $lines;\n    foreach (split(\"\\n\",$lines)) {\n        if (/NAME\\s*PEND/) {\n            $header_found = 1;  \n            @headers =split;\n        }\n        elsif (/^\\s*$/) \n            {\n                $header_found=0;\n            }\n            $row_data{$row_count++} = $_;\n            #print $_;\n        }\n</code></pre>\n\n<p><strong>My query:</strong></p>\n\n<p>How can i pass my subroutine as hash into another subroutine?</p>\n\n<p><em>example:</em>\ng_usrs_data() -> this is my subroutine .</p>\n\n<p>the above subroutine should be passed into another subroutine (i.e into usrs_hash as hash table)</p>\n\n<p><em>example:</em>\ncreate_db(usrs_hash,$sql1m)</p>\n"}, {"tags": ["perl", "phantomjs"], "answers": [{"tags": [], "owner": {"reputation": 208, "user_id": 7367567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qGBik.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7367567/will"}, "is_accepted": false, "score": 0, "last_activity_date": 1483521019, "creation_date": 1483521019, "answer_id": 41459984, "question_id": 41457035, "link": "https://stackoverflow.com/questions/41457035/no-elements-found-for-form-number-2-in-phantomjs/41459984#41459984", "title": "No elements found for form number 2 in phantomjs", "body": "<p>Well, before looking at the disk-cache arguments, I found that there are no such elements. </p>\n\n<pre><code># There is only 1 form. If you want to keep this line, \n# you need to change the form number to 1\nmy $form = $self-&gt;{obj_mech}-&gt;form_number( 2 );\n\n# I didn't find input field named 'InputEmail'\n# The actual field name is 'Email'\n$self-&gt;{obj_mech}-&gt;set_fields('InputEmail' =&gt;$user_name);\n\n# You have to click 'Next' button firstly then the password\n# input box is shown. And the field name should be 'Passwd'\n$self-&gt;{obj_mech}-&gt;set_fields('InputPassword' =&gt;$password);\n\n# The xpath of 'Sign in' button is //input[@value=\"Sign in\"]\n$self-&gt;{obj_mech}-&gt;click({ xpath =&gt; '//button[@class=\"PrimaryButton\"]' });\n</code></pre>\n\n<p>A simple working script either with disk cache or without disk cache:</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\nuse WWW::Mechanize::PhantomJS;\nuse open ':std', ':encoding(UTF-8)';\n\n#my $p = WWW::Mechanize::PhantomJS-&gt;new(phantomjs_arg=&gt;['--ssl-protocol=any','--disk-cache=false','--max-disk-cache-size=1024'],ignore_ssl_errors=&gt;1);\nmy $p = WWW::Mechanize::PhantomJS-&gt;new(phantomjs_arg=&gt;['--ssl-protocol=any','--disk-cache=true','--max-disk-cache-size=1024'],ignore_ssl_errors=&gt;1);\n\nmy $html = $p-&gt;get(\"https://www.gmail.com/\");\nsleep(5);\nwrite_html('first-page.html', $p-&gt;content);\n\n$p-&gt;viewport_size({width=&gt;1366,height=&gt;768});\nmy $form = $p-&gt;form_number(1);\n\nmy $user_name = '*****';\nmy $password = '*****';\n\n$p-&gt;set_fields('Email'=&gt;$user_name);\nsleep(5);\n\n$p-&gt;click({xpath=&gt;'//input[@value=\"Next\"]'});\nsleep(5);\nwrite_html('after-click-next.html', $p-&gt;content);\n\n$p-&gt;set_fields('Passwd'=&gt;$password);\nsleep(5);\n\n$p-&gt;click({xpath=&gt;'//input[@value=\"Sign in\"]'});\nsleep(5);\nwrite_html('after-login.html', $p-&gt;content);\n\nsub write_html {\n    my ($file, $content) = @_;\n    open my $fh, '&gt;', $file or die;\n    print $fh $content;\n    close $fh;\n}\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483521019, "creation_date": 1483509185, "question_id": 41457035, "link": "https://stackoverflow.com/questions/41457035/no-elements-found-for-form-number-2-in-phantomjs", "title": "No elements found for form number 2 in phantomjs", "body": "<p>when I am using \"--disk-cache=true\" in phantomjs_arg then it's getting error In this line: </p>\n\n<pre><code>my $form = $self-&gt;{obj_mech}-&gt;form_number( 2 );\n</code></pre>\n\n<blockquote>\n  <p>No elements found for form number 2 at modules/TestLogin.pm line 1129.\n  at /usr/local/share/perl/5.22.1/WWW/Mechanize/PhantomJS.pm line 796.\n          WWW::Mechanize::PhantomJS::signal_condition(WWW::Mechanize::PhantomJS=HASH(0x4cfa120),\n  \"No elements found for form number 2\") called at\n  /usr/local/share/perl/5.22.1/WWW/Mechanize/PhantomJS.pm line 1732\n          WWW::Mechanize::PhantomJS::xpath(WWW::Mechanize::PhantomJS=HASH(0x4cfa120),\n  \"(//form)[2]\", \"user_info\", \"form number 2\", \"single\", 1) called at\n  /usr/local/share/perl/5.22.1/WWW/Mechanize/PhantomJS.pm line 2102\n          WWW::Mechanize::PhantomJS::form_number(WWW::Mechanize::PhantomJS=HASH(0x4cfa120),\n  2) called at modules/TestLogin.pm line 1129\n          TestLogin::TestLogin_login(TestLogin=HASH(0x4f5c8a8)) called at collectBets.pl line 20 Debugged program terminated.  Use q to quit\n  or R to restart, use o inhibit_exit to avoid stopping after program\n  termination, h q, h R or h o to get additional info.</p>\n</blockquote>\n\n<p>without disk-cashe it's working fine.\nThis is my sample code for better understanding.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Helper;\nuse WWW::Mechanize::PhantomJS;\nuse DataBase;\nuse MyConfig;\nuse JSON;\nuse DateTime;\nuse HTML::Entities;\n\nsub new($$) {\n  my ($class,$params) = @_;\n  my $self =  $params || {};\n  bless $self, $class;\n\n  $self-&gt;{obj_mech} = WWW::Mechanize::PhantomJS -&gt; new( phantomjs_arg =&gt; ['--ssl-protocol=any','--disk-cache=true','--max-disk-cache-size=1024'], ignore_ssl_errors =&gt; 1);\n  $self-&gt;{obj_helper} = new Helper();\n  #$self-&gt;{obj_db} = new DataBase();\n    $self-&gt;{logged_in} = 0;\n    #$self-&gt;setTorProxy();\n    #$self-&gt;init_market_master();\n    return $self;\n}\n\nLogin();\nprint \"\\nlogin done...\\n\";\nexit;\n\nsub Login {\n    my ($self) = @_;\n    my $html = $self-&gt;{obj_mech}-&gt;get( \"https://www.gmail.com/\" );\n    sleep(25);\n    $html = $self-&gt;{obj_mech}-&gt;content;\n    $self-&gt;{obj_mech}-&gt;viewport_size({ width =&gt; 1366, height =&gt; 768 });\n\n    my $form = $self-&gt;{obj_mech}-&gt;form_number( 2 );\n\n    my $user_name = '*****';\n    my $password = '******';\n\n    $self-&gt;{obj_mech}-&gt;set_fields('InputEmail' =&gt;$user_name);\n\n    $self-&gt;{obj_mech}-&gt;set_fields('InputPassword' =&gt;$password);\n\n    $self-&gt;{obj_mech}-&gt;click({ xpath =&gt; '//button[@class=\"PrimaryButton\"]' });\n    sleep(20);\n    my $test_html=$self-&gt;{obj_mech}-&gt;content;\n    $self-&gt;{obj_helper}-&gt;writeFileNew( \"TestLoginPage.html\" , $test_html );\n    my $png = $self-&gt;{obj_mech}-&gt;content_as_png();\n    $self-&gt;{obj_helper}-&gt;writeFileNew( \"LoginPage.png\" , $png );\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["perl", "ipcopen3"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483507333, "post_id": 41454627, "comment_id": 70119495, "body": "You can check if there&#39;s space in the pipe (using <code>select</code>), but I&#39;ve never heard of the ability to check if a thread is blocked waiting to read from the pipe."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483507416, "post_id": 41454627, "comment_id": 70119528, "body": "Does the child process emit a prompt before reading from STDIN?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483507476, "post_id": 41454627, "comment_id": 70119546, "body": "Any reason you don&#39;t pass the input unconditionally?"}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483507744, "post_id": 41454627, "comment_id": 70119631, "body": "Other than there not being any reason to, no. There is a prompt"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483507971, "post_id": 41454627, "comment_id": 70119719, "body": "Just provide the input without a check, then. Do use IPC::Run3 or IPC::Run instead of using IPC::Open3+IO::Select, though. The latter is waaay too complicated. (You&#39;re doing something wrong if you&#39;re not using <code>select</code> with <code>open3</code> here.) The other option is to use Expect to drive the child, but that&#39;s just needles work."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483538629, "post_id": 41454627, "comment_id": 70136853, "body": "I&#39;ll look into Run3 for sure, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483552107, "post_id": 41466061, "comment_id": 70146096, "body": "Thanks! I don&#39;t know if expect will be allowed on these systems due to tight security requirements, but IPC::Run3 will almost definitely suffice in place of IPC::Open3.  Some additional info and a followup question. The child is another perl script, and the only expected input for the child script is the password, as all other input is provided on the command line as options to GetOpt::Long.Will perl (as either the parent or the child) try to process the data as soon as its sent to STDIN, or will the pipe buffer until the child actually starts waiting for input?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483553163, "post_id": 41466061, "comment_id": 70146665, "body": "I imagine <code>run3</code> and <code>run</code> will pump data into the pipe as soon as they can."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483554088, "post_id": 41466061, "comment_id": 70147123, "body": "Yes but does the pipe buffer? That&#39;s the real question. If it buffers then I&#39;ll need to explicitly flush the buffer when the child asks for the password meaning I&#39;m back to square one. If it doesn&#39;t buffer, then I may need to introduce an artificial delay of a few ms in the parent script so that the child has time to get to the password prompt."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483561292, "post_id": 41466061, "comment_id": 70150884, "body": "Pipes don&#39;t do anything. They&#39;re not code. I&#39;ve answered the <i>real</i> question. My answer includes working code."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483572229, "post_id": 41466061, "comment_id": 70155793, "body": "What I am ultimately asking is this:  If I send the input immediately after calling run3, but before the child script has prompted for the password, will that input still be taken in by the child and used as the password, or will the input simply be discarded?  I&#39;m testing the code right now, but had hoped to get an answer before I try."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483574778, "post_id": 41466061, "comment_id": 70156585, "body": "I am going to start up a new question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483590441, "post_id": 41466061, "comment_id": 70160287, "body": "That makes no sense. The program finishes running before <code>run3</code> returns."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1483590636, "post_id": 41466061, "comment_id": 70160334, "body": "Please see the new question: <a href=\"http://stackoverflow.com/q/41475421/1437387\">stackoverflow.com/q/41475421/1437387</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1483561325, "last_edit_date": 1483561325, "creation_date": 1483539619, "answer_id": 41466061, "question_id": 41454627, "link": "https://stackoverflow.com/questions/41454627/ipcopen3-and-determining-if-child-is-waiting-for-input/41466061#41466061", "title": "IPC::Open3 and determining if child is waiting for input", "body": "<p>You can check if there's space in the pipe (using <a href=\"http://search.cpan.org/perldoc?IO::Select\" rel=\"nofollow noreferrer\">select</a>). You can even check how much space is available in the pipe. However, I've never heard of the ability to check if a thread is blocked waiting to read from the pipe. I think you should explore other avenues.</p>\n\n<hr>\n\n<p>It seems to me that a program that only reads from STDIN when certain conditions unrelated to arguments are met would provide a prompt indicating it's waiting for input. If that's the case, one could use <a href=\"http://search.cpan.org/perldoc?Expect\" rel=\"nofollow noreferrer\">Expect</a> to launch and control the child program.</p>\n\n<p>But the simplest solution would be to write the data to STDIN unconditionally. Implementing this using IPC::Open3 is very complicated<sup>[1]</sup>, so I recommend switching to <a href=\"http://search.cpan.org/perldoc?IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a> (simpler) or <a href=\"http://search.cpan.org/perldoc?IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> (more flexible).</p>\n\n<pre><code># Capture's child's STDERR\nrun3 [ $prog, @args ], \\$text_for_stdin, \\my $text_from_stdout, \\my $text_from_stderr;\n</code></pre>\n\n<p>or</p>\n\n<pre><code># Inherits parent's STDERR\nrun3 [ $prog, @args ], \\$text_for_stdin, \\my $text_from_stdout;\n</code></pre>\n\n<hr>\n\n<ol>\n<li>When you both write to the child's STDIN and read from the child's STDOUT, you need to use <code>select</code> (or something else) to avoid deadlocks. IPC::Open3 is very low level and doesn't do this for you, whereas handling this are IPC::Run3 and IPC::Run raison d'\u00eatre.</li>\n</ol>\n"}], "owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 2, "accepted_answer_id": 41466061, "answer_count": 1, "score": 3, "last_activity_date": 1485841490, "creation_date": 1483491269, "question_id": 41454627, "link": "https://stackoverflow.com/questions/41454627/ipcopen3-and-determining-if-child-is-waiting-for-input", "title": "IPC::Open3 and determining if child is waiting for input", "body": "<pre><code>sub run_command\n{\n    my $COMMAND         = shift;\n    my @OUTPUT;\n    my %CMD             = {};\n\n    $CMD{pid}           = open3(my $CH_IN, my $CH_OUT, my $CH_ERR, $COMMAND);\n    $CMD{_STDIN}        = $CH_IN;\n    $CMD{_STDOUT}       = $CH_OUT;\n    $CMD{_STDERR}       = $CH_ERR;\n\n    my $line            = readline $CMD{_STDOUT};\n    print $line;\n\n#    open my $CMDPROC, q{-|}, $COMMAND   or return;\n#    foreach (&lt;$CMDPROC&gt;)\n#    {\n#        push @OUTPUT, \"$ARG\";\n#    }\n    close $CMDPROC                      or return;\n\n    return @OUTPUT\n}\n</code></pre>\n\n<p>The above code is part of a script I am writing which needs to run another script (called child). The child may or may not prompt for input, depending on the presence of a cookie file in /var/tmp (both scripts written on CentOS5 / perl 5.8.8)</p>\n\n<p>I need to determine if and when the child is waiting for input, so that the parent can pass input from STDIN of parent. I also need to use open3 to open the child process, as I need for parent to pass the brutal (Severity 1) check of Perl::Critic.</p>\n\n<p>I included the comments, because when the cookie file is already set, I can at least get parent to call child properly since child doesn't wait for input in that case.</p>\n\n<p>I've checked around trying to find examples of how to determine if the child is waiting for input. The one example I found used strace (<a href=\"http://www.perlmonks.org/?node_id=964971\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=964971</a>) and I feel as though that might be too complex for what I am trying to do.</p>\n\n<p>Any links to guide me will be greatly appreciated.</p>\n"}, {"tags": ["excel", "perl", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7371864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fcdad4d4bf6d60c5471290abacfcdef?s=128&d=identicon&r=PG&f=1", "display_name": "sumit", "link": "https://stackoverflow.com/users/7371864/sumit"}, "edited": false, "score": 0, "creation_date": 1483559354, "post_id": 41455190, "comment_id": 70149921, "body": "I use sub to convert csv to excel b4 parsing, missing piece of code sub csv2xls { $input_file = $_[0]; $input_file =~ s/csv/xls/; $output_file = join (&#39;&#39;, &quot;c2x_&quot;, $input_file); $workbook  = Spreadsheet::WriteExcel-&gt;new(&quot;./presto/prs/$output_file&quot;); $worksheet = $workbook-&gt;add_worksheet(); $csv = Text::CSV_XS-&gt;new; $row = 0; while (&lt;CSVFILE&gt;) { if ( $csv-&gt;parse($_) ) { @Fld = $csv-&gt;fields; $col = 0; foreach $token (@Fld) { $worksheet-&gt;write( $row, $col, $token ); $col++; } $row++; } else { $err = $csv-&gt;error_input; } } } csv2xls(&quot;delay.csv&quot;); csv2xls(&quot;slope.csv&quot;);"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 2, "last_activity_date": 1483523799, "last_edit_date": 1483523799, "creation_date": 1483496066, "answer_id": 41455190, "question_id": 41454615, "link": "https://stackoverflow.com/questions/41454615/cant-call-method-worksheet-on-an-undefined-value/41455190#41455190", "title": "Can&#39;t call method &quot;worksheet&quot; on an undefined value", "body": "<p>Without you giving much information and only snippets of your code it is hard to say.</p>\n\n<p>The great suspect is the file format itself, as the <code>Parse</code> method does not return a <code>$workbook</code>, the parser returned <code>undef</code></p>\n\n<p>I recently had a problem like this where the excel file was a quite recent format version. (ending on .xlsx and not .xls) Opening the file with MS Excel and saving as an older excel format did the trick.</p>\n\n<p>Your first file looks as if it was a plain CSV file, and therefore had no problem parsing.</p>\n"}], "owner": {"reputation": 1, "user_id": 7371864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fcdad4d4bf6d60c5471290abacfcdef?s=128&d=identicon&r=PG&f=1", "display_name": "sumit", "link": "https://stackoverflow.com/users/7371864/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1779, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483523799, "creation_date": 1483491200, "last_edit_date": 1483497916, "question_id": 41454615, "link": "https://stackoverflow.com/questions/41454615/cant-call-method-worksheet-on-an-undefined-value", "title": "Can&#39;t call method &quot;worksheet&quot; on an undefined value", "body": "<p>I have a problem parsing excel file in the same perl code:\nI get this error: </p>\n\n<blockquote>\n  <p>\"Can't call method \"worksheet\" on an undefined value at\n  ./parse_pathsim_results.pl line 223\"</p>\n</blockquote>\n\n<p>Interestingly in the perl code I have if I parse another file (delay xls) before the intended slope xls file it works.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>use Spreadsheet::ParseExcel::SaveParser;  \n$input_delay_csv_file = \"./presto/prs/c2x_delay.xls\";\n$input_slope_excel_file = \"./presto/prs/c2x_slope.xls\";\n$slope_parser = Spreadsheet::ParseExcel::SaveParser-&gt;new();\n$delay_parser = Spreadsheet::ParseExcel::SaveParser-&gt;new();\n</code></pre>\n\n<p>The code works if I use the following two lines, but I don't want to.</p>\n\n<pre><code>$workbook = $delay_parser-&gt;Parse(\"$input_delay_csv_file\");  \n$worksheet = $workbook-&gt;worksheet(\"Sheet1\");\n</code></pre>\n\n<p>This is where it creates a problem if the above two lines are commented.</p>\n\n<pre><code>$new_workbook = $slope_parser-&gt;Parse(\"$input_slope_excel_file\");   \n$worksheet = $new_workbook-&gt;worksheet(\"Sheet1\");\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1483477931, "last_edit_date": 1483477931, "creation_date": 1483465933, "answer_id": 41449486, "question_id": 41449390, "link": "https://stackoverflow.com/questions/41449390/how-to-remove-matching-lines-excluding-certain-others/41449486#41449486", "title": "How to remove matching lines excluding certain others?", "body": "<p>You are searching if there's a position after <code>\\item</code> that's not followed by <code>(</code>. There is in all cases.</p>\n\n<pre><code>\\item () $0.25$\n     ^ ^^^^^^^^^  These positions aren't followed by \"(\"\n</code></pre>\n\n<p>The <code>.*?</code> should be in the <code>(?!)</code>.</p>\n\n<pre><code>s{ ^ .*? \\\\item (?! [^(\\n]* \\( ) .* \\n }{}mgx\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 41449486, "answer_count": 1, "score": 3, "last_activity_date": 1483477931, "creation_date": 1483465609, "question_id": 41449390, "link": "https://stackoverflow.com/questions/41449390/how-to-remove-matching-lines-excluding-certain-others", "title": "How to remove matching lines excluding certain others?", "body": "<p>If I have the following in a variable</p>\n\n<pre><code>\\item () $0.25$\n  \\item () $0.7$\n\\item \n  \\item \n</code></pre>\n\n<p>how do I then remove the lines that matche <code>\\item</code> but not those that have a set of <code>()</code>?</p>\n\n<p>If I do</p>\n\n<pre><code>$f =~ s|\\\\item.*?(?!\\()||g;\n</code></pre>\n\n<p>then it deletes all <code>\\item</code> for some reason.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483471822, "post_id": 41448749, "comment_id": 70108392, "body": "Why are you using the <i>autosplit</i> <code>-a</code> flag? That way <code>$F[0]</code> will contain only the part of the record up to the first space or tab. You should <i>learn</i> what each command-line flag does, and not blindly use incantations that &quot;worked before&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1483463700, "post_id": 41448829, "comment_id": 70104074, "body": "Alternatively specify <code>-F,</code> and use <code>@F</code> instead of <code>@values</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1483467068, "post_id": 41448829, "comment_id": 70105919, "body": "Re &quot;<i>use Text::CSV_XS to do the splitting</i>&quot;, This is the only valid answer. The OP obviously has properly quoted CSV (e.g. <code>1,&quot;foo, bar&quot;,..</code>) that <code>split</code> (or <code>-a</code>) will mess up"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 5, "last_activity_date": 1483463604, "creation_date": 1483463604, "answer_id": 41448829, "question_id": 41448749, "link": "https://stackoverflow.com/questions/41448749/perl-causing-issues-for-splitting-by-comma/41448829#41448829", "title": "Perl - &quot;/&quot; causing issues for splitting by comma", "body": "<p>It's not the <code>/</code> that is confusing perl here, it's the spaces combined with the <code>-a</code> flag.  Try:</p>\n\n<pre><code>perl -lne '@values = split(\",\",$_); print $values[0].\"\\t\".$values[3]' basefile\n</code></pre>\n\n<p>Or, better yet, use <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> to do the splitting.</p>\n"}, {"comments": [{"owner": {"reputation": 213, "user_id": 6461829, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/259638c804f105d1ccc4ce1a94dc94ab?s=128&d=identicon&r=PG&f=1", "display_name": "yondaimehokage", "link": "https://stackoverflow.com/users/6461829/yondaimehokage"}, "edited": false, "score": 0, "creation_date": 1483464724, "post_id": 41448884, "comment_id": 70104654, "body": "This is not working.  the input is a multi-line file, i.e. &quot;1&quot;,&quot;text&quot;,&quot;abc // 123 /// some more text // text&quot;,&quot;filename&quot;\\n&quot;1&quot;,&quot;text&quot;,&quot;abc // 123 /// some more text // text&quot;,&quot;filename&quot;\\n&quot;1&quot;,&quot;text&quot;,&quot;abc // 123 /// some more text // text&quot;,&quot;filename&quot;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 213, "user_id": 6461829, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/259638c804f105d1ccc4ce1a94dc94ab?s=128&d=identicon&r=PG&f=1", "display_name": "yondaimehokage", "link": "https://stackoverflow.com/users/6461829/yondaimehokage"}, "edited": false, "score": 0, "creation_date": 1483465022, "post_id": 41448884, "comment_id": 70104802, "body": "@yondaimehokage It&#39;s pretty hard to read that in a comment, so you should edit it into your question."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1483465148, "post_id": 41448884, "comment_id": 70104868, "body": "Also, &quot;not working&quot; is rarely a helpful diagnostic message. Instead you should tell us what happened, including error messages, and explain how it is different from what you expected to happen."}, {"owner": {"reputation": 213, "user_id": 6461829, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/259638c804f105d1ccc4ce1a94dc94ab?s=128&d=identicon&r=PG&f=1", "display_name": "yondaimehokage", "link": "https://stackoverflow.com/users/6461829/yondaimehokage"}, "edited": false, "score": 0, "creation_date": 1483465346, "post_id": 41448884, "comment_id": 70104954, "body": "Fixed question above"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 213, "user_id": 6461829, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/259638c804f105d1ccc4ce1a94dc94ab?s=128&d=identicon&r=PG&f=1", "display_name": "yondaimehokage", "link": "https://stackoverflow.com/users/6461829/yondaimehokage"}, "edited": false, "score": 0, "creation_date": 1483465852, "post_id": 41448884, "comment_id": 70105243, "body": "@yondaimehokage Are you splitting <code>$F[0]</code> instead of <code>$_</code>? The code mob and Tanktalus gave works, so you&#39;re doing something else wrong, and without seeing your new code, it&#39;s hard to know why."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483467161, "post_id": 41448884, "comment_id": 70105971, "body": "That still splits incorrectly (e.g. <code>1,&quot;foo, bar&quot;,..</code>)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1483463807, "creation_date": 1483463807, "answer_id": 41448884, "question_id": 41448749, "link": "https://stackoverflow.com/questions/41448749/perl-causing-issues-for-splitting-by-comma/41448884#41448884", "title": "Perl - &quot;/&quot; causing issues for splitting by comma", "body": "<p>It's not the '/', it's the spaces.</p>\n\n<p>The <code>-a</code> flag causes perl to split each line of input and put the fields into the variable <code>@F</code>. The delimiter for this split operation is whitespace, unless you override it with the <code>-F</code><em>delimiter</em> option on the command line, too.</p>\n\n<p>So for the input</p>\n\n<pre><code>\"1\",\"text\",\"abc // 123 /// some more text // text\",\"filename\"\n</code></pre>\n\n<p>with the <code>-lan</code> flags specified, perl sets</p>\n\n<pre><code>$F[0] = '\"1\",\"text\",\"abc';\n$F[1] = '//';\n$F[2] = '123';\n$F[3] = '///';\n$F[4] = 'some';\netc.\n</code></pre>\n\n<p>It seems like you just want to do your split operation on the whole line. In which case you should stop using the <code>-a</code> flag and just say</p>\n\n<pre><code>@values = split(\",\",$_); ...\n</code></pre>\n\n<p>or leverage the <code>-a</code> and <code>-F...</code> options and say</p>\n\n<pre><code>perl -F/,/ -lane '@values=@F; ...'\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 6461829, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/259638c804f105d1ccc4ce1a94dc94ab?s=128&d=identicon&r=PG&f=1", "display_name": "yondaimehokage", "link": "https://stackoverflow.com/users/6461829/yondaimehokage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 41448829, "answer_count": 2, "score": -1, "last_activity_date": 1483465121, "creation_date": 1483463331, "last_edit_date": 1483465121, "question_id": 41448749, "link": "https://stackoverflow.com/questions/41448749/perl-causing-issues-for-splitting-by-comma", "title": "Perl - &quot;/&quot; causing issues for splitting by comma", "body": "<p>I'm trying to split a file by \",\".  It is a CSV file.</p>\n\n<p>However, one \"column\" has values that includes \"/\" and spaces.  And it seems to freak out with that column and does not print anything after that column but moves on to the next row.</p>\n\n<p>My code is simply:</p>\n\n<pre><code>perl -lane '@values = split(\",\",$F[0]);  print $values[0].\"\\t\".$values[3];' basefile.txt &gt; newfile.txt\n</code></pre>\n\n<p>The basefile.txt looks like:</p>\n\n<pre><code>\"1\",\"text\",\"abc // 123 /// some more text // text\",\"filename1\"\n\"2\",\"text\",\"abc // 123 /// some more text // text\",\"filename2\"\n\"3\",\"text\",\"abc // 123 /// some more text // text\",\"filename3\"\n</code></pre>\n\n<p>My newfile.txt should have an output of:</p>\n\n<pre><code>\"1\",\"filename1\"\n\"2\",\"filename2\"\n\"3\",\"filename3\"\n</code></pre>\n\n<p>Instead I get:</p>\n\n<pre><code>\"1\",\n\"2\",\n\"3\",\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["mysql", "perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5434729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e2a13ecff634e7bfa91708e8e6262c?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hamidi", "link": "https://stackoverflow.com/users/5434729/m-hamidi"}, "edited": false, "score": 1, "creation_date": 1483469952, "post_id": 41448634, "comment_id": 70107470, "body": "I tried it before and it didn&#39;t work, it turned out I made typo when writing distinct, so when I copy paste your line it worked. Thank you so much!"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 2, "last_activity_date": 1483462910, "creation_date": 1483462910, "answer_id": 41448634, "question_id": 41448574, "link": "https://stackoverflow.com/questions/41448574/perl-dbixclassresultset-distinct-values/41448634#41448634", "title": "Perl DBIx::Class::ResultSet distinct values", "body": "<p>You should be able to just add <code>distinct =&gt; 1</code> in your second hash to the <code>search</code> function, e.g.:</p>\n\n<pre><code>my $rs = $schema-&gt;resultset('DiscreteCalendar')-&gt;search(\n    {\n        holidaytype =&gt; 'W',\n        branchcode  =&gt; $branchcode,\n    },\n    {\n        distinct =&gt; 1,\n        select =&gt; [{ DAYOFWEEK =&gt; 'date' }],\n        as     =&gt; [qw/ weekday /],\n        where       =&gt; \\['date between ? and ?',$today, $endDate ],\n\n    }\n);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5434729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e2a13ecff634e7bfa91708e8e6262c?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hamidi", "link": "https://stackoverflow.com/users/5434729/m-hamidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 41448634, "answer_count": 1, "score": 2, "last_activity_date": 1483462910, "creation_date": 1483462700, "question_id": 41448574, "link": "https://stackoverflow.com/questions/41448574/perl-dbixclassresultset-distinct-values", "title": "Perl DBIx::Class::ResultSet distinct values", "body": "<p>Hi I would like to get unique (distinct) values from database using DBix::Class but can't find how to do it with my current search method:</p>\n\n<pre><code>my $rs = $schema-&gt;resultset('DiscreteCalendar')-&gt;search(\n        {\n            holidaytype =&gt; 'W',\n            branchcode  =&gt; $branchcode,\n        },\n        {\n            select =&gt; [{ DAYOFWEEK =&gt; 'date' }],\n            as     =&gt; [qw/ weekday /],\n            where       =&gt; \\['date between ? and ?',$today, $endDate ],\n\n        }\n    );\n</code></pre>\n\n<p>Thank you for your kind help!</p>\n"}, {"tags": ["perl", "sqlite", "dbix-class"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1483463908, "post_id": 41448155, "comment_id": 70104200, "body": "AFAIK, the only way to do this is with literal SQL, which means passing a scalar reference: <code>order_by =&gt; \\&#39;me.bar COLLATE NOCASE ASC&#39;</code>. FWIW, this also works: <code>order_by =&gt; { -asc =&gt; \\&#39;me.bar COLLATE NOCASE&#39; }</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1483464781, "post_id": 41448155, "comment_id": 70104690, "body": "Do you want to write up an answer @Matt? Literal SQL is fine, even if it binds us to SQLite. In this case I don&#39;t care."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1483465409, "post_id": 41448155, "comment_id": 70104988, "body": "I was hesitant to post an answer because you said you didn&#39;t want to use any SQL, and because I wasn&#39;t sure (and still am not) if there was a better way to do this."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1483465550, "post_id": 41448155, "comment_id": 70105073, "body": "@matt it seems you read my post better than I did. You&#39;re right, I said that, but I meant the example using the dbh. ;) If there is a better answer we will find it. But this is a good start. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 4419, "user_id": 2386199, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbe78fbec992815b533601243b126fcc?s=128&d=identicon&r=PG", "display_name": "Altreus", "link": "https://stackoverflow.com/users/2386199/altreus"}, "edited": false, "score": 0, "creation_date": 1483957797, "post_id": 41449288, "comment_id": 70296323, "body": "It&#39;s worth noting that the scalarref syntax <code>order_by =&gt; \\SCALAR</code> is discouraged, but it implies that the scalarref-in-a-hashref syntax <code>order_by =&gt; { -asc =&gt; \\SCALAR }</code> is still perfectly cromulent"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 4, "last_activity_date": 1483465324, "creation_date": 1483465324, "answer_id": 41449288, "question_id": 41448155, "link": "https://stackoverflow.com/questions/41448155/how-do-i-make-dbixclass-ignore-case-in-order-by-with-sqlite/41449288#41449288", "title": "How do I make DBIx::Class ignore case in ORDER BY with SQLite?", "body": "<p>If you're comfortable using a very small amount of SQL, you can pass a scalar reference to denote literal SQL, and DBIC won't mess with it:</p>\n\n<pre><code>order_by =&gt; \\'me.bar COLLATE NOCASE ASC'\n</code></pre>\n\n<p>Or, with just the bare minimum amount of literal SQL:</p>\n\n<pre><code>order_by =&gt; { -asc =&gt; \\'me.bar COLLATE NOCASE' }\n</code></pre>\n\n<p>Note that this syntax is <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet#order_by\" rel=\"nofollow noreferrer\">technically discouraged</a>, but I don't know of any other way to achieve what you're after:</p>\n\n<blockquote>\n  <p>The old scalarref syntax (i.e. order_by => \\'year DESC') is still\n  supported, although you are strongly encouraged to use the hashref\n  syntax as outlined above.</p>\n</blockquote>\n"}], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 1, "accepted_answer_id": 41449288, "answer_count": 1, "score": 4, "last_activity_date": 1483465324, "creation_date": 1483461445, "last_edit_date": 1495540915, "question_id": 41448155, "link": "https://stackoverflow.com/questions/41448155/how-do-i-make-dbixclass-ignore-case-in-order-by-with-sqlite", "title": "How do I make DBIx::Class ignore case in ORDER BY with SQLite?", "body": "<p>Typically SQLite's collation sorts case-sensitive. All capital letters come before small letters. But it's possible to tell SQLite in the <code>ORDER BY</code> clause to ignore that, <a href=\"https://stackoverflow.com/a/2413833/1331451\">by doing this</a>:</p>\n\n<pre><code>... ORDER BY foo COLLATE NOCASE ASC\n</code></pre>\n\n<p>But how do we do this with DBIx::Class?</p>\n\n<p>Consider the following example, which deploys an SQLite database in memory with a table <code>foo</code> and one comlumn <code>bar</code>. The connection uses <a href=\"https://metacpan.org/pod/DBIx::Class::Storage::DBI#quote_names\" rel=\"nofollow noreferrer\">the <code>quote_names</code> setting</a>. It fills in the values <code>z Z b B a A</code> and then gets them back out using <code>all</code> on the ResultSet. I'll be using this setup in all my following examples. You need <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a> and <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\">DBD::SQLite</a> to run this.</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Foo::Schema::Result::Foo;\nuse base 'DBIx::Class::Core';\n__PACKAGE__-&gt;table(\"foo\");\n__PACKAGE__-&gt;add_columns( \"bar\", { data_type =&gt; \"text\" }, );\n\npackage Foo::Schema;\nuse base 'DBIx::Class::Schema';\n\n__PACKAGE__-&gt;register_class( 'Foo' =&gt; 'Foo::Schema::Result::Foo' );\n\npackage main;\nmy $schema = Foo::Schema-&gt;connect(\n    {\n        dsn         =&gt; 'dbi:SQLite:dbname=:memory:',\n        quote_names =&gt; 1,\n    }\n);\n$schema-&gt;deploy;\n\n$schema-&gt;resultset('Foo')-&gt;create( { bar =&gt; $_ } ) for qw(z Z b B a A);\nmy @all = $schema-&gt;resultset('Foo')-&gt;search(\n    {},\n    {\n        order_by =&gt; { -asc =&gt; 'me.bar' },\n    },\n)-&gt;all;\n\n# example code starts here\n\nprint join q{ }, map { $_-&gt;bar } @all;\n</code></pre>\n\n<p>The output of this is sorted case-sensitive.</p>\n\n<pre><code>A B Z a b z\n</code></pre>\n\n<p>Now of course I could sort it with Perl and make it case-insensitive, like this.</p>\n\n<pre><code>print join q{ }, sort { lc $a cmp lc $b } map { $_-&gt;bar } @all;\n</code></pre>\n\n<p>Now I get </p>\n\n<pre><code>A a B b Z z\n</code></pre>\n\n<p>But I can also use the <code>COLLATE NOCASE</code> if I query using the underlying DBI handle directly.</p>\n\n<pre><code>$schema-&gt;storage-&gt;dbh_do(\n    sub {\n        my ( $storage, $dbh, @args ) = @_;\n        my $res = $dbh-&gt;selectall_arrayref(\n            \"SELECT * FROM foo ORDER BY bar COLLATE NOCASE ASC\"\n        );\n        print \"$_-&gt;[0] \" for @$res;\n    }\n</code></pre>\n\n<p>This gives us</p>\n\n<pre><code>a A b B z Z  \n</code></pre>\n\n<p>I want DBIC to use the <code>COLLATE NOCASE</code>, but without running any SQL. I do not want to do any expensive string conversions in the <code>ORDER BY</code>, or do them later in Perl.</p>\n\n<p><strong>How do I tell DBIx::Class to use the <code>COLLATE NOCASE</code> when ordering with SQLite?</strong></p>\n\n<hr>\n\n<p>The following does not work:</p>\n\n<pre><code>order_by =&gt; { '-collate nocase asc' =&gt; 'me.bar' },\n</code></pre>\n\n<p>And this only works if <a href=\"https://metacpan.org/pod/DBIx::Class::Storage::DBI#quote_names\" rel=\"nofollow noreferrer\"><code>quote_names</code></a> is not turned on. </p>\n\n<pre><code>order_by =&gt; { -asc =&gt; 'me.bar COLLATE NOCASE' },\n</code></pre>\n\n<p>It will produce this query and error message with the above example code.</p>\n\n<blockquote>\n  <p>SELECT \"me\".\"bar\" FROM \"foo\" \"me\" ORDER BY \"me\".\"bar COLLATE NOCASE\"\n  ASC:  DBIx::Class::Storage::DBI::_prepare_sth(): DBI Exception:\n  DBD::SQLite::db prepare_cached failed: no such column: me.bar COLLATE\n  NOCASE [for Statement \"SELECT \"me\".\"bar\" FROM \"foo\" \"me\" ORDER BY\n  \"me\".\"bar COLLATE NOCASE\" ASC\"]</p>\n</blockquote>\n\n<p>Or I could do it by converting to <code>upper</code> or <code>lower</code> in the <code>ORDER BY</code> clause using DBIC.</p>\n\n<pre><code>my @all = $schema-&gt;resultset('Foo')-&gt;search(\n    {},\n    {\n        order_by =&gt; { -asc =&gt; 'lower(me.bar)' },\n    },\n)-&gt;all;\n\nprint join q{ }, map { $_-&gt;bar } @all;\n</code></pre>\n\n<p>This gives </p>\n\n<pre><code>a A b B z Z\n</code></pre>\n\n<p>without <code>quote_names</code> which is similar, but the other way around. (That's not my concern here), but also throws an error when <code>quote_names</code> is turned on.</p>\n\n<blockquote>\n  <p>SELECT \"me\".\"bar\" FROM \"foo\" \"me\" ORDER BY \"lower(me\".\"bar)\" ASC: \n  DBIx::Class::Storage::DBI::_prepare_sth(): DBI Exception:\n  DBD::SQLite::db prepare_cached failed: no such column: lower(me.bar)\n  [for Statement \"SELECT \"me\".\"bar\" FROM \"foo\" \"me\" ORDER BY\n  \"lower(me\".\"bar)\" ASC\"]</p>\n</blockquote>\n"}, {"tags": ["python", "bash", "perl", "awk", "formatting"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1483459138, "post_id": 41447316, "comment_id": 70101128, "body": "First determine the space needed by each column, then in Perl you can add spaces like this <code>perl -E &#39;printf &quot;%-10s%-10s\\n&quot;, &quot;BRCC&quot;, &quot;hoom&quot;&#39;</code>"}, {"owner": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "edited": false, "score": 0, "creation_date": 1483459276, "post_id": 41447316, "comment_id": 70101229, "body": "First document is output from my awk script. Second Image is only edited by myself in LibreOffice"}, {"owner": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483459371, "post_id": 41447316, "comment_id": 70101293, "body": "@H&#229;konH&#230;gland, Thank you for reply. It is possible to write whole syntax? Perl I really do not know."}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "edited": false, "score": 1, "creation_date": 1483459795, "post_id": 41447499, "comment_id": 70101614, "body": "Thank you so much Ed, this look much more easy than I thought. Is there any way to keep &quot;_____&quot; this line under the header?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1483463156, "post_id": 41447499, "comment_id": 70103737, "body": "<code>... column -t |  sed 2i$(printf &quot;_%.0s&quot; {1..42})</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1483466055, "post_id": 41447499, "comment_id": 70105351, "body": "I added a subsequent awk command that&#39;d underscore the header line."}, {"owner": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1483529926, "post_id": 41447499, "comment_id": 70131226, "body": "@karakfa nice solution thank you so much! Is there any way to print the same lane on the end of table? So create &quot;borders&quot;?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "edited": false, "score": 0, "creation_date": 1483544501, "post_id": 41447499, "comment_id": 70140896, "body": "@Paul change 2 to $, but you may need to put all in single quotes.  However, if you&#39;re using awk already, it would be easier to add an END block there to do the same."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 4, "last_activity_date": 1483471487, "last_edit_date": 1483471487, "creation_date": 1483459373, "answer_id": 41447499, "question_id": 41447316, "link": "https://stackoverflow.com/questions/41447316/formating-output-text-in-awk-and-open-in-document/41447499#41447499", "title": "Formating output text in awk and open in document", "body": "<p>It sounds like this is all you need:</p>\n\n<pre><code>$ awk 'BEGIN{print \"TEST\",\"HEADER\",\"CLASS\",\"CLASS2\",\"SVGH\"} 1' file | column -t\nTEST   HEADER  CLASS  CLASS2     SVGH\nBRCC   hete    1      15869      105A\nBRAC   he      1      1799967    956G\nBCAS   he      2      7334543    369AFVC\nRCA    he      4      9534262    7806-14\nRCA    he      5      144848     1114A\nRA     he      5      206118     52A\nBCAVV  he      5      543304     3807TCD\nBCA    hoo     1      106091515  4308TDDSC\nBCA    hoo     1      206075     4563A\nBCA    hoo     1      799917     2612CDSA\nBCA    hoo     2      206076     513G\nBCA    hoom    3      16941      3113A\n</code></pre>\n\n<p>and then use a constant-width font in LibreOffice to display it. To underscore the header line:</p>\n\n<pre><code>$ awk 'BEGIN{print \"TEST\",\"HEADER\",\"CLASS\",\"CLASS2\",\"SVGH\"} 1' file | column -t |\n    awk '{print} NR==1{gsub(/./,\"_\"); print}'\nTEST   HEADER  CLASS  CLASS2     SVGH\n_____________________________________\nBRCC   hete    1      15869      105A\nBRAC   he      1      1799967    956G\nBCAS   he      2      7334543    369AFVC\nRCA    he      4      9534262    7806-14\nRCA    he      5      144848     1114A\nRA     he      5      206118     52A\nBCAVV  he      5      543304     3807TCD\nBCA    hoo     1      106091515  4308TDDSC\nBCA    hoo     1      206075     4563A\nBCA    hoo     1      799917     2612CDSA\nBCA    hoo     2      206076     513G\nBCA    hoom    3      16941      3113A\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 4082675, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77e4d267bad01d2701dc4902298de12b?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4082675/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 41447499, "answer_count": 1, "score": -1, "last_activity_date": 1483471487, "creation_date": 1483458777, "question_id": 41447316, "link": "https://stackoverflow.com/questions/41447316/formating-output-text-in-awk-and-open-in-document", "title": "Formating output text in awk and open in document", "body": "<p>I have a data set like this:</p>\n\n<pre><code>BRCC    hete    1   15869   105A\nBRAC    he  1   1799967 956G\nBCAS    he  2   7334543 369AFVC\nRCA he  4   9534262 7806-14\nRCA he  5   144848  1114A\nRA  he  5   206118  52A\nBCAVV   he  5   543304  3807TCD\nBCA hoo 1   106091515   4308TDDSC\nBCA hoo 1   206075  4563A\nBCA hoo 1   799917  2612CDSA\nBCA hoo 2   206076  513G\nBCA hoom    3   16941   3113A\n</code></pre>\n\n<p>Dataset have 6 column and is tab separate. I would like to format text and add header. My solution is:</p>\n\n<pre><code>awk -v OFS=\"\\t\" 'BEGIN{printf \"%s\\t %s\\t %s\\t %s\\t %s\\t \\n\" ,\"TEST\",\"HEADER\",\"CLASS\",\"CLASS2\",\"SVGH\" pritnf \"\\n\" \"__________________________________________________\"} {printf \"%s\\t %s\\t %s\\t %s\\t %s\\t \\n\", $1,$2,$3,$4,$5}' in.txt &gt; out.doc\n</code></pre>\n\n<p>But I need to save output to document and open in LibreOffice. But output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hOggo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hOggo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any way to formating text to keep columns under header - to be better readable? Like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/onKTz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/onKTz.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>NOTE: I will apperciate any help not only awk solution.</strong> </p>\n"}, {"tags": ["linux", "perl", "packages", "redhat"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1483445580, "post_id": 41442750, "comment_id": 70092496, "body": "Try <code>$ yum install perl-devel perl-CPAN</code>"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 3, "creation_date": 1483446315, "post_id": 41442750, "comment_id": 70092962, "body": "You need to install them simultaneously."}, {"owner": {"reputation": 125, "user_id": 4869373, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/0a1416979ed535a2bbace4ad69d29b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Donald", "link": "https://stackoverflow.com/users/4869373/donald"}, "edited": false, "score": 0, "creation_date": 1483453248, "post_id": 41442750, "comment_id": 70097333, "body": "Thank you, installing simultaneously did the trick!"}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": true, "score": 0, "last_activity_date": 1483449024, "last_edit_date": 1483449024, "creation_date": 1483448679, "answer_id": 41444188, "question_id": 41442750, "link": "https://stackoverflow.com/questions/41442750/installing-redhat-lsb-on-centos-7-on-an-offline-machine/41444188#41444188", "title": "Installing redhat-lsb on CentOS 7 on an offline machine", "body": "<p>As I see It looks like you don't have Perl installed,a simple way to check it is using the following command:</p>\n\n<p><em>perl -v</em></p>\n\n<p>Case it shows you an errors download and install the last version of Perl.</p>\n\n<p>If you already have it installed I would recommend you install these basics packages:</p>\n\n<ul>\n<li>perl-devel </li>\n<li>perl-core</li>\n<li>perl-Module-CoreList</li>\n<li>perl-CPAN (If you don't have acess to the internet it will not be that useful )</li>\n</ul>\n\n<p>Probably it will helps you solve most part of the dependencies you have for now.</p>\n"}], "owner": {"reputation": 125, "user_id": 4869373, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/0a1416979ed535a2bbace4ad69d29b2c?s=128&d=identicon&r=PG&f=1", "display_name": "Donald", "link": "https://stackoverflow.com/users/4869373/donald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 0, "accepted_answer_id": 41444188, "answer_count": 1, "score": 0, "last_activity_date": 1483449024, "creation_date": 1483443784, "last_edit_date": 1483446287, "question_id": 41442750, "link": "https://stackoverflow.com/questions/41442750/installing-redhat-lsb-on-centos-7-on-an-offline-machine", "title": "Installing redhat-lsb on CentOS 7 on an offline machine", "body": "<p>I'm trying to install Hortonworks on my CentOS 7 machine which does not have access to the internet. The installation of Hortonworks has failed because package redhat-lsb has not been installed on the machine. I'm trying to install the package and it comes with certain dependencies. </p>\n\n<p>It first asks for: <code>perl(ExtUtils::MakeMaker)</code>\nWhen I try to install that one it's asking for: <code>perl(ExtUtils::Installed)</code>\nAnd when I try to install that one it's asking for: <code>perl(ExtUtils::MakeMaker)</code></p>\n\n<p>So I'm caught in a loop and I can't find with packages I'm missing before I'm able to install <code>perl(ExtUtils::MakeMaker)</code>. </p>\n\n<p>I search for packages on rpmfind.net.\nAny ideas or tips to help me further? Not sure if these questions are allowed because it does not have to do with programming, please let me know if that is the case.</p>\n"}, {"tags": ["sql-server", "perl", "stored-procedures"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483437003, "post_id": 41440383, "comment_id": 70087230, "body": "Can you show us what exactly the output looks like when you run your procedure directly? Copy out the exact output or take a screenshot from the table view."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483437471, "post_id": 41440383, "comment_id": 70087546, "body": "That&#39;s what I thought. <a href=\"http://stackoverflow.com/a/41440642/1331451\">Shakeer Mirza</a> has it spot-on with explanation, but <a href=\"http://stackoverflow.com/a/41440490/1331451\">Shahzad Riaz</a> also answered the same thing first. Since you&#39;re essentially running three commands in your procedure, there is no way to get all three results from DBI in Perl without changing the procedure."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483437792, "post_id": 41440383, "comment_id": 70087758, "body": "@simbabque But when I write the query with error for example <code>select 10&#47;0</code>. Now Perl script  shows the error message. Then how the DBI read it ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483437870, "post_id": 41440383, "comment_id": 70087804, "body": "Good question. I&#39;d say the DB throws the error when it encounters it, and stops running the queries. DBI knows how to handle it, and then you see the error. But I&#39;m not familiar with SQLServer at all."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483449000, "post_id": 41440383, "comment_id": 70094650, "body": "Which DBI driver are you using?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483450045, "post_id": 41440383, "comment_id": 70095386, "body": "That&#39;s not the DBI driver. What does your dsn look like? What&#39;s in the <code>DBI-&gt;connect()</code>? Don&#39;t post the password here!"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483450109, "post_id": 41440383, "comment_id": 70095424, "body": "@simbabque <code>$dsn = &quot;dbi:ODBC:driver={SQL Server};Server=$Server_name,$port;database=$Database_name;dr&zwnj;&#8203;iver=FreeTDS;tds_ver&zwnj;&#8203;sion=8.0&quot;; </code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483450229, "post_id": 41440383, "comment_id": 70095498, "body": "@simbabque dbi-&gt;connect <code>$dbh = DBI-&gt;connect($dsn, $db_user_id, $db_pwd ,{AutoCommit =&gt; 1})</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483451466, "post_id": 41440383, "comment_id": 70096227, "body": "See the update of my answer. I think I&#39;ve found what you are looking for."}], "answers": [{"tags": [], "owner": {"reputation": 334, "user_id": 5109731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec28dce8f561b0cd7f28d217f429a83e?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzad Riaz", "link": "https://stackoverflow.com/users/5109731/shahzad-riaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1483436565, "creation_date": 1483436565, "answer_id": 41440490, "question_id": 41440383, "link": "https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41440490#41440490", "title": "How to get the stored procedure result using Perl?", "body": "<p>simple use union all like this then only one table is shown with data.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lMX8T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lMX8T.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483437496, "post_id": 41440642, "comment_id": 70087562, "body": "I can&#39;t try this. Because this is the sample query. Is there any possible way to do it in Perl Script?"}, {"owner": {"reputation": 4776, "user_id": 3752496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4LuM.jpg?s=128&g=1", "display_name": "Shakeer Mirza", "link": "https://stackoverflow.com/users/3752496/shakeer-mirza"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1483438532, "post_id": 41440642, "comment_id": 70088236, "body": "see the above edit, you may need to take a look at the link provided."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483448909, "post_id": 41440642, "comment_id": 70094594, "body": "Wow, that&#39;s cool. It&#39;s built into the dbd::mysql driver and documented <a href=\"https://metacpan.org/pod/DBD::mysql#MULTIPLE-RESULT-SETS\" rel=\"nofollow noreferrer\">here</a>. But that makes it mysql-only."}, {"owner": {"reputation": 4776, "user_id": 3752496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4LuM.jpg?s=128&g=1", "display_name": "Shakeer Mirza", "link": "https://stackoverflow.com/users/3752496/shakeer-mirza"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483449375, "post_id": 41440642, "comment_id": 70094920, "body": "And that is the reason why upvoted your answer with +1 :) @simbabque"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483450947, "post_id": 41440642, "comment_id": 70095913, "body": "Thank you. I found it in ODBC. I&#39;ll amend my answer for an alternative."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483451441, "post_id": 41440642, "comment_id": 70096208, "body": "Your link and the comment by the OP with DBD::ODBC both helped me to find the solution. Thank you. :)"}], "tags": [], "owner": {"reputation": 4776, "user_id": 3752496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4LuM.jpg?s=128&g=1", "display_name": "Shakeer Mirza", "link": "https://stackoverflow.com/users/3752496/shakeer-mirza"}, "is_accepted": false, "score": 2, "last_activity_date": 1483438474, "last_edit_date": 1483438474, "creation_date": 1483437055, "answer_id": 41440642, "question_id": 41440383, "link": "https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41440642#41440642", "title": "How to get the stored procedure result using Perl?", "body": "<p>The procedure you created  is returning 3 result sets. And you are capturing only 1 result. If you are not bother about sets, make them as single result with <code>UNION ALL</code></p>\n\n<pre><code>create procedure  testprocedure2 as\nselect 'one'\nunion all\nselect 'three'\nunion all\nselect 'five'\n</code></pre>\n\n<p><strong>Edit:</strong> </p>\n\n<p>If you want to capture multiple resultsets returned from stored procedure, here is a good example explained with MySQL database <a href=\"http://www.perlmonks.org/?node_id=609098\" rel=\"nofollow noreferrer\">Multiple data sets in MySQL stored procedures</a></p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483454307, "post_id": 41441486, "comment_id": 70097966, "body": "I&#39;m getting what I want. Then I have got the yesterday answer also. By setting <code>RaiseError =&gt; 0</code>. But I&#39;m facing one problem which is I can&#39;t store the run time error in a variable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483454845, "post_id": 41441486, "comment_id": 70098328, "body": "@mkHun I think that might be a new question now that we know more about how you do your queries. But I think it&#39;s hard to play around with it without an actual SQL Server."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1483455464, "post_id": 41441486, "comment_id": 70098737, "body": "I got it by <code>$error = $sth-&gt;errstr</code>.  And thank for spend your time for me :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1486324289, "last_edit_date": 1495540976, "creation_date": 1483439573, "answer_id": 41441486, "question_id": 41440383, "link": "https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41441486#41441486", "title": "How to get the stored procedure result using Perl?", "body": "<h2>Through the driver (e.g. <a href=\"https://metacpan.org/pod/DBD::ODBC\" rel=\"nofollow noreferrer\">DBD::ODBC</a>)</h2>\n\n<p><a href=\"https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41441486#comment70095424_41440383\">Since you're using DBD::ODBC</a>, you can use <a href=\"https://metacpan.org/pod/DBD::ODBC#odbc_more_results\" rel=\"nofollow noreferrer\"><code>more_results</code> provided by that driver</a> to get the results of multiple queries in one <code>execute</code>.</p>\n\n<p>This is the example they show in the documentation.</p>\n\n<pre><code>do {\n   my @row;\n   while (@row = $sth-&gt;fetchrow_array()) {\n      # do stuff here\n   }\n} while ($sth-&gt;{odbc_more_results});\n</code></pre>\n\n<p>If we want to do this with your example queries, it's pretty much the same. You run your stored procedure, and then proceed with the <code>do {} while</code> construct (note that this is not a block, you cannot <code>next</code> out of it!).</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"exec TEST_ABC_DB.dbo.testprocedure2\");\n$sth-&gt;execute;\n\ndo {\n    while (my @row = $sth-&gt;fetchrow_array()) {\n        print $row[0].\"\\t\";\n        print \"\\n\";\n    }\n} while ($sth-&gt;{odbc_more_results});\n</code></pre>\n\n<p>This should print your expected result.</p>\n\n<pre><code>one\nthree\nfive\n</code></pre>\n\n<p>Some other drivers also provide this. If they do, you can call <code>$sth-&gt;more_results</code> instead of using the internals as described below.</p>\n\n<hr>\n\n<h2>Workaround if your driver doesn't support this</h2>\n\n<p><strong>There is no way for DBI itself to return the result of multiple queries at once.</strong> You can run them, but you cannot get the results.</p>\n\n<p>If you really need three separate queries in your procedure and want all of the results, the answers by <a href=\"https://stackoverflow.com/a/41440642/1331451\">Shakheer</a> and <a href=\"https://stackoverflow.com/a/41440490/1331451\">Shahzad</a> to use a <code>UNION</code> are spot on.</p>\n\n<p>However, your example is probably contrived. You probably don't have the same amount of columns in each of those queries, and you need to distinguish the results of each of the queries.</p>\n\n<p><strong>We have to change SQL and Perl code for this.</strong></p>\n\n<p>To get that to work, you can insert additional rows that you can later use to map each stack of results to each query.</p>\n\n<p>Let's say the procedure looks like this:</p>\n\n<pre><code>create procedure testprocedure3 as\nselect 'one'\nselect 'three', 'three', 'three'\nselect 'five', 'five', 'five', 'five', 'five'\n</code></pre>\n\n<p>This is still just one row per query, but it should do as an example. With the <code>UNION</code> approach, it first becomes this:</p>\n\n<pre><code>create procedure testprocedure3 as\nselect 'one'\nunion all\nselect 'three', 'three', 'three'\nunion all\nselect 'five', 'five', 'five', 'five', 'five'\n</code></pre>\n\n<p>If you run this, it might fail. In ANSI SQL a UNION needs to have the same number of columns in all its queries, so I assume SQLServer also wants this. We need to fill them up with <code>NULL</code>s. Add them to all the queries so they match the number of columns in the one with the largest number of columns.</p>\n\n<pre><code>create procedure testprocedure3 as\nselect 'one', NULL, NULL, NULL, NULL\nunion all\nselect 'three', 'three', 'three', NULL, NULL\nunion all\nselect 'five', 'five', 'five', 'five', 'five'\n</code></pre>\n\n<p>If we now loop over it in Perl with the following code, we'll get <em>something</em> back.</p>\n\n<pre><code>use Data::Dumper;\nmy $sth = $dbh-&gt;prepare(\"exec TEST_ABC_DB.dbo.testprocedure3\");\n$sth-&gt;execute;\nwhile ( my $row = $sth-&gt;fetchrow_arrayref ) {\n    print Dumper $row;\n}\n</code></pre>\n\n<p>We'll see output similar to this (I didn't run the code, but wrote the output manually):</p>\n\n<pre><code>$VAR1 = [ 'one', undef, undef, undef, undef ];\n$VAR1 = [ 'three', 'three', 'three', undef, undef ];\n$VAR1 = [ 'five', 'five', 'five', 'five', 'five' ];\n</code></pre>\n\n<p>We have no way of knowing which line belongs to which part of the query. So let's insert a delimiter.</p>\n\n<pre><code>create procedure testprocedure3 as\nselect 'one', NULL, NULL, NULL, NULL\nunion all\nselect '-', '-', '-', '-', '-'\nunion all\nselect 'three', 'three', 'three', NULL, NULL\nunion all\nselect '-', '-', '-', '-', '-'\nunion all\nselect 'five', 'five', 'five', 'five', 'five'\n</code></pre>\n\n<p>Now the result of the Perl code will look as follows:</p>\n\n<pre><code>$VAR1 = [ 'one', undef, undef, undef, undef ];\n$VAR1 = [ '-', '-', '-', '-', '-' ];\n$VAR1 = [ 'three', 'three', 'three', undef, undef ];\n$VAR1 = [ '-', '-', '-', '-', '-' ];\n$VAR1 = [ 'five', 'five', 'five', 'five', 'five' ];\n</code></pre>\n\n<p>This might not be the best choice of delimiter, but it nicely illustrates what I am planning to do. All we have to do now is split this into separate results.</p>\n\n<pre><code>use Data::Dumper;\n\nmy @query_results;\nmy $query_index = 0;\nmy $sth = $dbh-&gt;prepare(\"exec TEST_ABC_DB.dbo.testprocedure3\");\n$sth-&gt;execute;\nwhile ( my $row = $sth-&gt;fetchrow_arrayref ) {\n     # move to the next query if we hit the delimiter\n     if ( join( q{}, @$row ) eq q{-----} ) {\n         $query_index++;\n         next;\n     }\n\n     push @{ $query_results[$query_index] }, $row;\n}\n\nprint Dumper \\@query_results;\n</code></pre>\n\n<p>I've defined two new variables. <code>@query_results</code> holds all the results, sorted by query number. <code>$query_index</code> is the index for that array. It starts with 0.</p>\n\n<p>We iterate all the resulting rows. It's important that <code>$row</code> is <em>lexical</em> here. It <strong>must</strong> be created with <code>my</code> in the loop head. (You are using <code>use strict</code>, right?) If we see the delimiter, we increment the <code>$query_index</code> and move on. If we don't we have a regular result line, so we stick that into our <code>@query_results</code> array within the current query's index.</p>\n\n<p>The overall result is an array with arrays of arrays in it.</p>\n\n<pre><code>$VAR1 = [\n   [\n       [ 'one', undef, undef, undef, undef ]\n   ], \n   [\n       [ 'three', 'three', 'three', undef, undef ]\n   ], \n   [\n       [ 'five', 'five', 'five', 'five', 'five' ]\n   ], \n];\n</code></pre>\n\n<p>If you have actual queries that return many rows this starts making a lot of sense.</p>\n\n<p>Of course you don't have to store all the results. You can also just work with the results of each query directly in your loop.</p>\n\n<hr>\n\n<p><sup><strong>Disclaimer</strong>: I've run none of the code in this answer as I don't have access to an SQLServer. It might contain syntax errors in the Perl as well as the SQL. But it does demonstrate the approach.</sup></p>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2463, "favorite_count": 0, "accepted_answer_id": 41441486, "answer_count": 3, "score": 5, "last_activity_date": 1539008792, "creation_date": 1483436190, "last_edit_date": 1539008792, "question_id": 41440383, "link": "https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl", "title": "How to get the stored procedure result using Perl?", "body": "<p>I'm beginner in sql. I have created the procedure as follows</p>\n\n<pre><code>create procedure  testprocedure2 as\nselect 'one'\nselect 'three'\nselect 'five'\n</code></pre>\n\n<p>When I execute query into the database It shows the three result <code>one three five</code>. sql query is <code>exec TEST_ABC_DB.dbo.testprocedure2</code></p>\n\n<p>When I run the same query into the Perl it gives only one record which is <code>one</code></p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"exec TEST_ABC_DB.dbo.testprocedure2\");\n$sth-&gt;execute();\nwhile (@row= $sth-&gt;fetchrow_array())  \n{\n    print $row[0].\"\\t\";\n    print \"\\n\";\n}\n</code></pre>\n\n<p>I don't know what is the problem. How can I fix it? I hope this answer will help in <a href=\"https://stackoverflow.com/questions/41423669/how-to-store-the-runtime-mssql-error-in-a-variable-and-continue-to-run-in-perl\">yesterday's question</a> </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1483382452, "post_id": 41431655, "comment_id": 70069323, "body": "<code>List::Util</code> is core Perl and contains a <code>max()</code> function that does what your <code>maximum()</code> function is supposed to do."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1483382828, "post_id": 41431655, "comment_id": 70069460, "body": "@DavidO Oops, didn&#39;t see your comment. Just posted it as an answer."}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1483476638, "post_id": 41431655, "comment_id": 70110640, "body": "Add a <code>use strict;</code> and <code>use warnings;</code> to the top of every Perl file until you know exactly why each is recommended."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1484199946, "post_id": 41431655, "comment_id": 70413806, "body": "@alex213: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 10, "last_activity_date": 1487435488, "last_edit_date": 1487435488, "creation_date": 1483382054, "answer_id": 41431756, "question_id": 41431655, "link": "https://stackoverflow.com/questions/41431655/find-the-greatest-number-among-3/41431756#41431756", "title": "find the greatest number among 3", "body": "<p>Your <code>maximum</code> function has flaws:</p>\n\n<ul>\n<li>You only try the third number if the first is greater than the second.</li>\n<li>You do not retrieve the arguments correctly; <code>$num1</code> and <code>$num2</code> both get the first and <code>$num3</code> is never set.</li>\n<li>You never return the <code>$max</code> value.</li>\n<li>You don't print the result.</li>\n<li>You don't scope your variables.</li>\n<li>There's no reason to <code>chomp</code> arguments.</li>\n</ul>\n\n<p>Here is some code with five different approaches for function argument retrieval:</p>\n\n<pre><code>sub max1 {\n    my $num1 = $_[0];\n    my $num2 = $_[1];\n    my $num3 = $_[2];\n    my $max = $num1;\n    $max = $num2 if $num2 &gt; $max;\n    $max = $num3 if $num3 &gt; $max;\n    return $max;\n}\n\nsub max2 {\n    my $num1 = shift;\n    my $num2 = shift;\n    my $num3 = shift;\n    my $max = $num1;\n    $max = $num2 if $num2 &gt; $max;\n    $max = $num3 if $num3 &gt; $max;\n    return $max;\n}\n\nsub max3 {\n    my ($num1, $num2, $num3) = @_;\n    my $max = $num1;\n    $max = $num2 if $num2 &gt; $max;\n    $max = $num3 if $num3 &gt; $max;\n    return $max;\n}\n\n# Works for any number of arguments.\nsub max4 {\n    my $max = shift;\n    foreach my $foo (@_) {\n        $max = $foo if $max &lt; $foo;\n    }\n    return $max;\n}\n\n# Works for any number of arguments.\nuse List::Util qw( max );\n\nmy $n1 = $ARGV[0];\nmy $n2 = $ARGV[1];\nmy $n3 = $ARGV[2];\n\nprintf \"%d\\n\", max1($n1, $n2, $n3);\nprintf \"%d\\n\", max2($n1, $n2, $n3);\nprintf \"%d\\n\", max3($n1, $n2, $n3);\nprintf \"%d\\n\", max4($n1, $n2, $n3);\nprintf \"%d\\n\", max($n1, $n2, $n3);\n\n# Even simpler:\nprintf \"%d\\n\", max1 @ARGV;\nprintf \"%d\\n\", max2 @ARGV;\nprintf \"%d\\n\", max3 @ARGV;\nprintf \"%d\\n\", max4 @ARGV;\nprintf \"%d\\n\", max @ARGV;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1483382689, "last_edit_date": 1495540807, "creation_date": 1483382689, "answer_id": 41431865, "question_id": 41431655, "link": "https://stackoverflow.com/questions/41431655/find-the-greatest-number-among-3/41431865#41431865", "title": "find the greatest number among 3", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/41431756/257635\">chqrlie's answer</a> I would like to introduce you to <a href=\"http://www.cpan.org/modules/\" rel=\"nofollow noreferrer\">Perl Modules</a> which make the job easy. For example in your case you could use <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> module. It's a core module therefore you don't have to put extra efforts to install it.</p>\n\n<p>Example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw( max );\nmy $maximum = max @ARGV;\nprint \"Maximum: $maximum\\n\";\n</code></pre>\n\n<p><a href=\"http://ideone.com/Ibd4iV\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 8, "last_activity_date": 1483397574, "last_edit_date": 1483397574, "creation_date": 1483383092, "answer_id": 41431945, "question_id": 41431655, "link": "https://stackoverflow.com/questions/41431655/find-the-greatest-number-among-3/41431945#41431945", "title": "find the greatest number among 3", "body": "<p>The logic error in your original code is that there are times where the third number never gets tested. The <code>elsif</code> should be an <code>if</code>.</p>\n\n<p>You are also relying on implicit return values, which will surprise you.  For example, if you were to fall through to the <code>elsif</code> conditional, and its conditional expression was false, the <code>maximum</code> function will return with a false value (an empty string), which is not at all what you would actually want.  This is because if Perl hits no <code>return</code> statement in your subroutine, it returns the value of the last expression evaluated.  In this case, that last expression very well could be a conditional evaluation.  The other surprising thing is that it will work in cases where the conditional evaluates to true, because in such cases the last expression evaluated is the assignment to <code>$max</code>, so that's what gets returned.</p>\n\n<p>A more general purpose solution would take any quantity of numbers and find the max. It turns out that by using a loop we can eliminate chained <code>if(){...} elsif()...</code> statements, while becoming more flexible.  Here is a reasonable general-purpose approach that should work for any size list of numbers:</p>\n\n<pre><code>sub maximum {\n    my $max = shift;\n    foreach my $num (@_) {\n        $max = $num if $num &gt; $max;\n    }\n    return $max;\n}\n\nprint maximum(1,5,3), \"\\n\"; # Prints 5.\n</code></pre>\n\n<p>But there's an even better approach:</p>\n\n<pre><code>use List::Util 'max';\n\nprint max(1,5,3), \"\\n\"; # Also prints 5.\n</code></pre>\n\n<p>The <code>List::Util</code> module comes with Perl, so you don't have to install anything you shouldn't already have.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1483390696, "creation_date": 1483390696, "answer_id": 41433199, "question_id": 41431655, "link": "https://stackoverflow.com/questions/41431655/find-the-greatest-number-among-3/41433199#41433199", "title": "find the greatest number among 3", "body": "<p>You should indeed use <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\">List::Util::max</a>. However, just for the sake of variety, here is a compact way of getting the maximum of three arguments:</p>\n\n<pre><code>sub max_of_3 {\n    my $x = $_[ $_[1] &gt; $_[0] ];\n    return $_[2] &gt; $x ? $_[2] : $x;\n}\n</code></pre>\n\n<p>Here is some test code along with benchmarks:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Algorithm::Combinatorics qw( permutations );\nuse Dumbbench;\nuse List::Util qw( max );\nuse Test::More;\n\nsub dummy { }\n\nsub max_of_3 {\n    my $x = $_[ $_[1] &gt; $_[0] ];\n    return $_[2] &gt; $x ? $_[2] : $x;\n}\n\nsub classic {\n    my $num1 = $_[0];\n    my $num2 = $_[1];\n    my $num3 = $_[2];\n    my $max = $num1;\n    $max = $num2 if ($num2 &gt; $max);\n    $max = $num3 if ($num3 &gt; $max);\n    return $max;\n}\n\nfor my $case ( permutations([5, 6, 7])) {\n    is max_of_3(@$case), 7, \"max of [@$case] is 7\";\n}\n\ndone_testing;\n\nmy $bench = Dumbbench-&gt;new;\n\n$bench-&gt;add_instances(\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'Dummy',\n        code =&gt; sub { dummy(5, 6, 7) },\n    ),\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'compact',\n        code =&gt; sub { max_of_3(5, 6, 7) },\n    ),\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'List::Util::max',\n        code =&gt; sub { max(5, 6, 7) },\n    ),\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'classic',\n        code =&gt; sub { classic(5, 6, 7) },\n    ),\n);\n\n$bench-&gt;run;\n$bench-&gt;report;\n</code></pre>\n\n<p>Benchmark output:</p>\n\n<pre>Dummy: Ran 21 iterations (0 outliers).\nDummy: Rounded run time per iteration: 1.4729e-007 +/- 4.1e-010 (0.3%)\ncompact: Ran 27 iterations (7 outliers).\ncompact: Rounded run time per iteration: 3.8513e-007 +/- 8.4e-010 (0.2%)\nList::Util::max: Ran 37 iterations (8 outliers).\nList::Util::max: Rounded run time per iteration: 1.28262e-007 +/- 2.3e-011 (0.0%)\nclassic: Ran 27 iterations (7 outliers).\nclassic: Rounded run time per iteration: 5.81187e-007 +/- 9.2e-011 (0.0%)</pre>\n\n<p>The morals of the story: 1) Use well-established libraries instead of rolling your own. Here <code>List::Util::max</code> is faster than invoking a subroutine that does nothing because it is implemented in XS; 2) Prefer clarity over compactness unless you can come up with a really, really good reason. In most cases, even a 35% improvement in speed is not worth it, especially since using <code>List::Util::max</code> is simultaneously clearer, more compact <em>and</em> it performs better than both hand-rolled alternatives. You also don't have to write new code to handle <em>N</em> arguments.</p>\n"}], "owner": {"reputation": 29, "user_id": 7149756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/427513b9aab52532c10511b34dc20992?s=128&d=identicon&r=PG&f=1", "display_name": "alex213", "link": "https://stackoverflow.com/users/7149756/alex213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 1, "accepted_answer_id": 41431756, "answer_count": 4, "score": 3, "last_activity_date": 1487435488, "creation_date": 1483381561, "last_edit_date": 1483381885, "question_id": 41431655, "link": "https://stackoverflow.com/questions/41431655/find-the-greatest-number-among-3", "title": "find the greatest number among 3", "body": "<p>I'm trying to write a script to find the greatest number among 3 numbers, and pass them through command line arguments</p>\n\n<p>I just want to know what is the wrong things I wrote in this code, thanks for any help.</p>\n\n<pre><code>sub maximum($) {\n    ($num1) = @_ ; \n    ($num2) = @_ ; \n    ($num2) = @_ ; \n\n    $max = $num1;\n\n    if ($num2 &gt; $num1) {\n        $max = $num2;\n    }    \n    elsif ($num3 &gt; $max ) {\n        $max = $num3;\n    }\n}\n\n$n1 = $ARGV[0];\nchomp($n1);\n$n2 = $ARGV[1];\nchomp($n2);\n$n3 = $ARGV[2];\nchomp($n3);\n\nmaximum($n1, $n2, $n3);\n</code></pre>\n"}, {"tags": ["linux", "perl", "shell", "grep"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483377610, "post_id": 41430802, "comment_id": 70067462, "body": "It sounds like you just want to do <code>grep -o -E &#39;[0-9][0-9]&#47;[0-9][0-9]&#47;[0-9]{4}&#39; &lt; tmc.txt &gt; d.txt</code>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483377748, "post_id": 41430802, "comment_id": 70067517, "body": "Or <code>grep -o -E &#39;[0-9]{1,2}&#47;[0-9]{1,2}&#47;[0-9]{4}&#39;</code>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483377838, "post_id": 41430802, "comment_id": 70067547, "body": "Ah, the reason your solution never prints &quot;no_data&quot; is that head never fails.  In this case, the <code>head</code> is useless and you can just remove it.  Another common solution is to add a <code>|grep .</code> after the last command in the pipe."}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483378598, "post_id": 41430802, "comment_id": 70067867, "body": "Hi William, if I use your suggestion of grep -o -E then for lines that contain multiple patterns of interest it will print multiple patterns"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483378634, "post_id": 41430802, "comment_id": 70067889, "body": "Remember that I am only interested in the first match for each line in that file"}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1483378721, "post_id": 41430802, "comment_id": 70067924, "body": "@DineshKumar: Add a flag <code>-m1</code> to it, <code>grep -om1E</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1483385933, "post_id": 41430802, "comment_id": 70070554, "body": "A shell loop for this is the wrong approach, see <a href=\"http://unix.stackexchange.com/questions/169716/why-is-using-a-shell-loop-to-process-text-considered-bad-practice\">why-is-using-a-shell-loop-to-process-text-considered-bad-pra&zwnj;&#8203;ctice</a> for some of the reasons why you should be writing an awk script instead of a shell script. <a href=\"https://stackoverflow.com/posts/41430802/edit\">edit</a> your question to include a few lines of concise, testable sample input and expected output and someone will help you do this the right way."}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1483461172, "post_id": 41430802, "comment_id": 70102455, "body": "Thanks Ed, for the information, shows that I have a lot to learn :)"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1483461345, "post_id": 41430802, "comment_id": 70102546, "body": "Thank you all for sharing your expertise"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1483461302, "post_id": 41433516, "comment_id": 70102522, "body": "I did not try this solution yet, will provide an update soon"}], "tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1483393652, "last_edit_date": 1483393652, "creation_date": 1483392595, "answer_id": 41433516, "question_id": 41430802, "link": "https://stackoverflow.com/questions/41430802/read-file-line-by-line-and-print-the-first-match-in-each-line-or-no-data-when/41433516#41433516", "title": "Read file line by line and print the first match in each line or &quot;no_data&quot; when nothing matches", "body": "<p>To do this directly with grep, you'd have to use some kind of variable-length negative look-behind to make sure that you're looking at the first date in the line. Apparently, Perl compatible regular expressions <a href=\"http://www.perlmonks.org/?node_id=924643\" rel=\"nofollow noreferrer\">would be able to do that</a> with <a href=\"http://perldoc.perl.org/perlre.html#Special-Backtracking-Control-Verbs\" rel=\"nofollow noreferrer\">\"backtracking control verbs\"</a>, but a) I'm not sure if <code>grep -P</code> supports those and b) you also want to replace non-matching lines, which grep can't do anyway.</p>\n\n<p>As an alternative to calling grep on every line, you could use sed:</p>\n\n<pre><code>sed -r '\n    /([0-9]{2}\\/){2}[0-9]{4} +[0-9]{2}:[0-9]{2}/! { # On non-matching lines...\n        s/.*/no_data/                               # Replace line with \"no_data\"\n        b                                           # Skip to next line\n    }\n    s/(([0-9]{2}\\/){2}[0-9]{4} +[^ ]*).*/\\1/ # Remove everything after first date\n    s/.*(([0-9]{2}\\/){2}[0-9]{4})/\\1/        # Remove everything before first date\n' infile\n</code></pre>\n\n<p>For a version of <code>infile</code> using your sample line three times (first with both dates intact, then with the first date removed, then with both dates removed) the output is</p>\n\n<pre><code>$ sed -r '/([0-9]{2}\\/){2}[0-9]{4} +[0-9]{2}:[0-9]{2}/!{s/.*/no_data/;b};s/(([0-9]{2}\\/){2}[0-9]{4} +[^ ]*).*/\\1/;s/.*(([0-9]{2}\\/){2}[0-9]{4})/\\1/' infile\n09/06/2016  14:43:28.4954\n08/06/2016  18:53:28.4757\nno_data\n</code></pre>\n\n<p>as expected.</p>\n\n<p>The sed command first checks if the line contains a date; if not, the whole line is replaced by <code>no_data</code> and the rest of the commands is skipped. They wouldn't actually do anything, but this should make execution faster.</p>\n\n<p>If the line <em>does</em> contain a date, two substitutions are performed: the first one removes everything after the first date, the second one everything before it. This <em>has</em> to happen in two steps, or the greedy matching would result in the <em>last</em> date on the line being printed.</p>\n\n<hr>\n\n<p>Quick performance comparison for a 40 MB input file:</p>\n\n<ul>\n<li>Bash loop calling grep on each line: ~24 seconds</li>\n<li>Sed: ~4 seconds</li>\n<li>Perl: &lt; 0.1 seconds</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1483393124, "post_id": 41433602, "comment_id": 70073054, "body": "This will most likely also mop the floor with the sed solution, performance-wise."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1483393063, "creation_date": 1483393063, "answer_id": 41433602, "question_id": 41430802, "link": "https://stackoverflow.com/questions/41430802/read-file-line-by-line-and-print-the-first-match-in-each-line-or-no-data-when/41433602#41433602", "title": "Read file line by line and print the first match in each line or &quot;no_data&quot; when nothing matches", "body": "<p>Here's a Perl solution:</p>\n\n<pre><code>perl -nle 'print m{(\\d{2}/\\d{2}/\\d{4} \\d{2}:\\d{2})} ? $1 : \"no_data\"' &lt; tmc.txt &gt; d.txt\n</code></pre>\n\n<p><code>-n</code> loops over lines in the input.</p>\n\n<p><code>-l</code> automatically chomps off newlines from the input and adds them to the output.</p>\n\n<p>For each line we do a straightforward regex match with a capture group. If successful, we print the matched string, otherwise <code>no_data</code>.</p>\n"}], "owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 41433602, "answer_count": 2, "score": 0, "last_activity_date": 1490613591, "creation_date": 1483377368, "last_edit_date": 1490613591, "question_id": 41430802, "link": "https://stackoverflow.com/questions/41430802/read-file-line-by-line-and-print-the-first-match-in-each-line-or-no-data-when", "title": "Read file line by line and print the first match in each line or &quot;no_data&quot; when nothing matches", "body": "<p>I would like to read a text file line by line to search for a pattern; when the first match in a line is found, print it to a file and move to search for the pattern in the next line. </p>\n\n<p>With my limited skills in shell I have tried the following; unfortunately, when there is no first pattern, it never prints <code>no_data</code> to the file <code>d.txt</code>.</p>\n\n<pre><code>while read u ; do\n    echo \"$u\" | grep -o '[0-9]\\{2\\}/[0-9]\\{2\\}/[0-9]\\{4\\}  [0-9]\\{2\\}:[0-9]\\{2\\}' |head -1 || echo \"no_data\" \ndone &lt; tmc.txt &gt; d.txt\n</code></pre>\n\n<p>Note: the pattern I am trying to match is a date and time stamp in the format <code>mm/dd/yyyy hh:mm</code>.</p>\n\n<p>For instance, <code>$u</code> can be a string like this or even bigger with all sorts of garbage:</p>\n\n<pre><code>disk0/bcdackup_20160908_115716/d/.ER/ERORR_log_msnf_20160906_113039:10641:  Test Status:         Failed ;Test PL (some test) was started in execution mode.  09/06/2016  14:43:28.4954  Machine:msnf  (Rl888751, , ?.?, 1637) USER EVENT: TM-1102 DEFAULT  -- SYSTEM ERROR: TX-0003 INIT  Function Protocol Violation. Verification by TXXAxREQxConfig_destroy_config failed: 'engine_ptr != NULL' not TRUE  -- SYSTEM EVENT: ER-0FFF DEFAULT (linked to IH-154B) DEACTIVATE: IH-154b DEACTIVATE: IH-154b  -- SYSTEM EVENT: ER-0FFF DEFAULT (linked to IH-154C) DEACTIVATE: IH-154c DEACTIVATE: IH-154c  -- SYSTEM ERROR: WP-2631 CHANGEPARAMS  Error during processing of Finite State Machine Error starting perform_smooth_landing : event perform_smooth_landing not allowed in state {original_mc, actuator_system_enabled, service_off, not_homed} of state-machine WPLS.V1.2  -- SYSTEM ERROR: WP-2630 CHANGEPARAMS  Error during processing of F   \n</code></pre>\n\n<p>Any shell utility such as grep, awk, sed, perl is fine by me.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1483365967, "post_id": 41428316, "comment_id": 70062101, "body": "So you want the lines starting from <code>&#47;open1&#47;</code> up to <code>&#47;close1&#47;</code> stored in <code>$f</code>?"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483366271, "post_id": 41428316, "comment_id": 70062254, "body": "Ideally the result should go in another variable, so <code>$f</code> isn&#39;t overridden."}], "answers": [{"comments": [{"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1483366715, "post_id": 41428424, "comment_id": 70062479, "body": "<code>$matched</code> is empty when I test with <code>$f = &quot;xxx open1 ddd close1 mmm&quot;;</code>"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1483366756, "post_id": 41428424, "comment_id": 70062506, "body": "@JasmineLognnes are &quot;open1&quot; and &quot;close1&quot; on separate lines?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 1, "creation_date": 1483368418, "post_id": 41428424, "comment_id": 70063348, "body": "@Jasmine Lognnes, If you had actually passed <code>xxx open1 ddd close1 mmm</code> to STDIN, it would have worked. You must have changed something."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483375518, "post_id": 41428424, "comment_id": 70066646, "body": "You don&#39;t know if the start and end markers are on separate lines."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 2, "last_activity_date": 1483366328, "creation_date": 1483366328, "answer_id": 41428424, "question_id": 41428316, "link": "https://stackoverflow.com/questions/41428316/save-result-from-flip-flop-in-variable/41428424#41428424", "title": "Save result from flip-flop in variable?", "body": "<p>You can rewrite how <code>$f</code> is generated so that it takes advantage of the flip-flop inside a <code>while</code> loop:</p>\n\n<pre><code>my ( $f, $matched );\nwhile ( &lt;&gt; ) {\n    $f .= $_;\n    $matched .= $_ if /open1/ .. /close1/;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483375478, "post_id": 41428476, "comment_id": 70066624, "body": "It would be nice if you explained why the flipflop doesn&#39;t work."}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483379863, "post_id": 41428476, "comment_id": 70068406, "body": "@simbabque, I have added the explanations. I think you can remove your down vote now."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483379957, "post_id": 41428476, "comment_id": 70068439, "body": "That wasn&#39;t mine. Your answer was already good, but could be improved."}], "tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1483380087, "last_edit_date": 1483380087, "creation_date": 1483366553, "answer_id": 41428476, "question_id": 41428316, "link": "https://stackoverflow.com/questions/41428316/save-result-from-flip-flop-in-variable/41428476#41428476", "title": "Save result from flip-flop in variable?", "body": "<h1>Capturing all matches with a single regular expression</h1>\n\n<p>If you want to capture all the lines between <code>open1</code> and <code>start1</code> markers <em>(excluding the markers)</em>, it is easily done with a single regular expression:</p>\n\n<pre><code>my $f = join(\"\", &lt;STDIN&gt;);\n\nmy @matches = ( $f =~ m/\\bopen1\\b(.*?)\\bclose1\\b/gs );\n\nfor my $m (@matches) {\n  print \"$m\";\n}\n</code></pre>\n\n<p>where</p>\n\n<ul>\n<li><code>s</code> modifier treats the string as a single line;</li>\n<li><code>g</code> modifier captures all the matches;</li>\n<li><code>(.*?)</code> matches a group of any characters using the <a href=\"http://www.regular-expressions.info/repeat.html#lazy\" rel=\"nofollow noreferrer\">lazy quantifier</a></li>\n</ul>\n\n<h1>Using the range operator</h1>\n\n<p>The range operator (so-called flip-flop) is not very convenient for this task if you want to avoid capturing the markers, because an expression like <code>/open1/ .. /close1/</code> returns <em>true</em> for the lines matching the patterns.</p>\n\n<p>The expression <code>/^open1$/ .. /^close1$/</code> returns <em>false</em> until <code>/^open1$/</code> is <em>true</em>. The left regular expression stops being evaluated once it matches the line, and keeps returning <em>true</em> until <code>/^close1$/</code> becomes <em>true</em>. When the right expression matches, the cycle is restarted. Thus, the <code>open1</code> and <code>close1</code> markers are included into <code>$matches</code>.</p>\n\n<p>It is even less convenient, if the input is stored in a variable, because you will need to read the contents of the variable line by line, e.g.:</p>\n\n<pre><code>my $matches = \"\";\nmy @lines = split /\\n/, $f;\nforeach my $line (@lines) {\n  if ($line =~ m/^open1$/ .. $line =~ m/^close1$/) {\n    $matches .= \"$line\\n\";\n  }\n}\n</code></pre>\n\n<p>Note, it is possible to use arbitrary Perl expressions as operands of the range operator. I wouldn't recommend this code, as it is not very efficient, and not very readable. At the same time it is easy to adapt the first example to the case where the <code>open1</code> and <code>close1</code> markers are included into the set of matches, e.g.:</p>\n\n<pre><code>my @matches = ( $f =~ m/\\bopen1\\b(.*?)\\bclose1\\b/gs );\nfor my $m (@matches) {\n  print \"open1${m}close1\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1483471344, "last_edit_date": 1483471344, "creation_date": 1483399354, "answer_id": 41434469, "question_id": 41428316, "link": "https://stackoverflow.com/questions/41428316/save-result-from-flip-flop-in-variable/41434469#41434469", "title": "Save result from flip-flop in variable?", "body": "<p>You can also employ <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>. To get what is between the first pair of <code>open1</code> and <code>close1</code></p>\n\n<pre><code>my $open_to_close = (split /open1|close1/, $f)[1];\n</code></pre>\n\n<p>The delimiter can be either <code>open1</code> or <code>close1</code>, so returned is a list of three elements: before <code>open1</code>, between them, and after <code>close1</code>. We take the second element. </p>\n\n<hr>\n\n<p>If there are more <code>open1</code>/<code>close1</code> pairs take all odd-indexed elements. </p>\n\n<p>Either get the array as well</p>\n\n<pre><code>my @parts = split /open1|close1/, $f;\n\nmy @all_open_to_close = @parts[ grep { $_ &amp; 1 } 0..$#parts ];\n</code></pre>\n\n<p>or get it directly from the list</p>\n\n<pre><code>my @all_open_to_close = \n    grep { CORE::state $i; ++$i % 2 == 0 }  split /open1|close1/, $f;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\">state</a> is a <a href=\"http://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">feature</a>\nfrom <code>v5.10</code>. If you already <code>use</code> that you don't need <code>CORE::</code> prefix.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1483405299, "creation_date": 1483405299, "answer_id": 41435082, "question_id": 41428316, "link": "https://stackoverflow.com/questions/41428316/save-result-from-flip-flop-in-variable/41435082#41435082", "title": "Save result from flip-flop in variable?", "body": "<p>Another way is to create a new inputs stream out of the contents of <code>$f</code>.</p>\n\n<pre><code>open my $fh, '&lt;', \\$f;\nwhile (&lt;$fh&gt;) {\n    if (/open1/ .. /close1/) {\n        ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 41428476, "answer_count": 4, "score": 2, "last_activity_date": 1483471344, "creation_date": 1483365841, "question_id": 41428316, "link": "https://stackoverflow.com/questions/41428316/save-result-from-flip-flop-in-variable", "title": "Save result from flip-flop in variable?", "body": "<p>I have about 1kB of text from STDIN</p>\n\n<pre><code>my $f = join(\"\", &lt;STDIN&gt;);\n</code></pre>\n\n<p>and I would like to get the content between <code>open1</code> and <code>close1</code>, so <code>/open1/../close1/</code> comes to mind.</p>\n\n<p>I have only seen it been used in one liners and in scripts in while-loops and <code>$_</code>.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How can I get the result from <code>/open1/../close1/</code> in my script when everything is in <code>$f</code>?</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 6, "creation_date": 1483365999, "post_id": 41428150, "comment_id": 70062118, "body": "Very interesting question! There&#39;s a related <a href=\"http://www.perlmonks.org/?node_id=391783\" rel=\"nofollow noreferrer\">thread at perlmonks</a>."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483366663, "post_id": 41428150, "comment_id": 70062458, "body": "@PerlDuck one of the suggestions in that thread suggests using <a href=\"https://metacpan.org/pod/B::Lint\" rel=\"nofollow noreferrer\"><code>B::Lint::undefined_subs</code></a> but even that appears to rely on the subroutine being invoked."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483366982, "post_id": 41428150, "comment_id": 70062647, "body": "Up to Perl 5.18 <code>B::Lint</code> was a core module. I have 5.22 and just installed it <a href=\"http://search.cpan.org/~rjbs/B-Lint-1.20/lib/B/Lint.pm\" rel=\"nofollow noreferrer\">from CPAN</a>. <code>perl -MO=Lint so.pl</code> correctly says <code>Nonexistent subroutine &#39;undefined_sub&#39; called at so.pl line 7</code>. But I&#39;ve no idea how it does that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483368815, "post_id": 41428150, "comment_id": 70063546, "body": "Probably: After compiling the program, it checks the subs called by the program against the existing subs. That should be rather reliable, especially since it results in false positives rather than false negatives."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483370487, "post_id": 41428150, "comment_id": 70064429, "body": "...Unfortunately, B::Lint only checks the top-level code. That&#39;s a limitation of the module, not of the technique."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1499253053, "post_id": 41428150, "comment_id": 76824549, "body": "sub maybe defined dynamically: <code>eval &quot;sub undefined_sub {}&quot;</code>. And there is <b>no way</b> to check will it be defined or will not"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1483369486, "post_id": 41428981, "comment_id": 70063894, "body": "Detecting calls to undefined subs at compile-time is actually quite reliable. 1) Compile-time generation of subs or methods is not a problem. These would be handled correctly by B::Lint. 2) Runtime generation of methods really is quite rare. Your Moose example doesn&#39;t fly because the methods will be generated when the module is loaded during it&#39;s user&#39;s compile-time. 3) Detecting calls to undefined methods is next to impossible, but not for the reasons you gave. 4) The OP didn&#39;t ask about calls to undefined method. 5) Runtime generation of subs is even rarer."}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 1, "last_activity_date": 1483369105, "last_edit_date": 1483369105, "creation_date": 1483368849, "answer_id": 41428981, "question_id": 41428150, "link": "https://stackoverflow.com/questions/41428150/how-can-i-smoke-out-undefined-subroutines/41428981#41428981", "title": "How can I smoke out undefined subroutines?", "body": "<p>What you're asking for is in at least some sense impossible. Consider the following code snippet:</p>\n\n<pre><code>( rand()&lt;0.5 ? *foo : *bar } = sub { say \"Hello World!\" };\n\nfoo();\n</code></pre>\n\n<p>There is a 50% chance that this will run OK, and a 50% chance that it will give an \"Undefined subroutine\" error. The decision is made at runtime, so it's not possible to tell before that what it will be. This is of course a contrived case to demonstrate a point, but runtime (or compile-time) generation of subroutines is not that uncommon in real code. For an example, look at how <code>Moose</code> adds functions that create methods. Static source code analysis will never be able to fully analyze such code.</p>\n\n<p><code>B::Lint</code> is probably about as good as something pre-runtime can get.</p>\n"}, {"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483370240, "post_id": 41429224, "comment_id": 70064290, "body": "I&#39;ll have to test this tomorrow morning... maybe my syntax was off when I tried <code>perl -MB::Lint=undefined_subs ...</code> earlier"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1576584671, "post_id": 41429224, "comment_id": 104940375, "body": "It&#39;s <code>undefined-subs</code>, not <code>undefined_subs</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1576584925, "post_id": 41429224, "comment_id": 104940502, "body": "It&#39;s possible that older versions of B::Lint didn&#39;t look into subs, but it does now."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1576585104, "last_edit_date": 1576585104, "creation_date": 1483369939, "answer_id": 41429224, "question_id": 41428150, "link": "https://stackoverflow.com/questions/41428150/how-can-i-smoke-out-undefined-subroutines/41429224#41429224", "title": "How can I smoke out undefined subroutines?", "body": "<p>To find calls to subs that aren't defined at compile time, you can use <a href=\"https://metacpan.org/pod/B::Lint\" rel=\"nofollow noreferrer\">B::Lint</a> as follows:</p>\n\n<p><code>a.pl</code>:</p>\n\n<pre><code>use List::Util qw( min );\n\nsub defined_sub { }\nsub defined_later;\nsub undefined_sub;\n\ndefined_sub();\ndefined_later();\nundefined_sub();\nundeclared_sub();\nmin();\nmax();              # XXX Didn't import\nList::Util::max();\nList::Util::mac();  # XXX Typo!\n\nsub defined_later { }\n</code></pre>\n\n<p>Test:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MO=Lint,undefined-subs a.pl\nUndefined subroutine 'undefined_sub' called at a.pl line 9\nNonexistent subroutine 'undeclared_sub' called at a.pl line 10\nNonexistent subroutine 'max' called at a.pl line 12\nNonexistent subroutine 'List::Util::mac' called at a.pl line 14\na.pl syntax OK\n</code></pre>\n\n<p>Note that this is just for sub calls. Method calls (such as <code>Class-&gt;method</code> and <code>method Class</code>) aren't checked. But you are asking about sub calls.</p>\n\n<p>Note that <code>foo $x</code> is a valid method call (using the <em>indirect method call</em> syntax) meaning <code>$x-&gt;foo</code> if <code>foo</code> isn't a valid function or sub, so B::Lint won't catch that. But it will catch <code>foo($x)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483420450, "post_id": 41434568, "comment_id": 70079538, "body": "This is a great find... I was thinking that <code>PPI</code> may be the way forward here but this solution takes it to the next level, and definitely fits my needs."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483425727, "post_id": 41434568, "comment_id": 70081663, "body": "@Zaid Great :))  Also, <code>perlcritic</code> can be configured, and policies can be tweaked or written.  I also ran into <a href=\"http://search.cpan.org/dist/Sub-StrictDecl-0.003/lib/Sub/StrictDecl.pm\" rel=\"nofollow noreferrer\">Sub::StrictDecl</a> but don&#39;t know anything about it.  Anyway, one can do a lot more with <code>perlcritic</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 13, "last_activity_date": 1502779399, "last_edit_date": 1502779399, "creation_date": 1483400124, "answer_id": 41434568, "question_id": 41428150, "link": "https://stackoverflow.com/questions/41428150/how-can-i-smoke-out-undefined-subroutines/41434568#41434568", "title": "How can I smoke out undefined subroutines?", "body": "<p>Perhaps <a href=\"http://search.cpan.org/~thaljef/Perl-Critic-StricterSubs-0.05/lib/Perl/Critic/Policy/Subroutines/ProhibitCallsToUndeclaredSubs.pm\" rel=\"nofollow noreferrer\">Subroutines::ProhibitCallsToUndeclaredSubs</a> policy from <a href=\"http://search.cpan.org/~thaljef/Perl-Critic-1.126/lib/Perl/Critic.pm\" rel=\"nofollow noreferrer\">Perl::Critic</a> can help</p>\n\n<blockquote>\n  <p>This Policy checks that every unqualified subroutine call has a matching subroutine declaration in the current file, or that it explicitly appears in the import list for one of the included modules.</p>\n</blockquote>\n\n<p>This \"policy\" is a part of <a href=\"http://search.cpan.org/~thaljef/Perl-Critic-StricterSubs-0.05/lib/Perl/Critic/StricterSubs.pm\" rel=\"nofollow noreferrer\">Perl::Critic::StricterSubs</a>, which needs to be installed.  There are a few more policies there.  This is considered a severity 4 violation, so you can do</p>\n\n<pre><code>perlcritic -4 script.pl\n</code></pre>\n\n<p>and parse the output for <code>neither declared nor explicitly imported</code>, or use</p>\n\n<pre><code>perlcritic -4 --single-policy ProhibitCallsToUndeclaredSubs script.pl\n</code></pre>\n\n<p>Some legitimate uses are still flagged, since it requires all subs to be  imported explicitly.</p>\n\n<p>This is a static analyzer, which I think should fit your purpose.</p>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 2, "accepted_answer_id": 41434568, "answer_count": 3, "score": 18, "last_activity_date": 1576585104, "creation_date": 1483365220, "last_edit_date": 1483548470, "question_id": 41428150, "link": "https://stackoverflow.com/questions/41428150/how-can-i-smoke-out-undefined-subroutines", "title": "How can I smoke out undefined subroutines?", "body": "<p>I want to scan a code base to identify all instances of undefined subroutines that are not presently reachable.</p>\n\n<p>As an example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $flag = 0;\nif ( $flag ) {\n  undefined_sub();\n}\n</code></pre>\n\n<h3>Observations</h3>\n\n<ul>\n<li><p>When <code>$flag</code> evaluates to true, the following warning is emitted:</p>\n\n<pre><code>Undefined subroutine &amp;main::undefined_sub called at - line 6\n</code></pre>\n\n<p>I don't want to rely on warnings issued at run-time to identify undefined subroutines</p></li>\n<li><p>The <code>strict</code> and <code>warnings</code> pragmas don't help here. <code>use strict 'subs'</code> has no effect.</p></li>\n<li><p>Even the following code snippet is silent</p>\n\n<pre><code>$ perl -Mstrict -we 'exit 0; undefined_sub()'\n</code></pre></li>\n</ul>\n"}, {"tags": ["apache", "perl", "variables", "mod-perl"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4944066, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/980661958657186/picture?type=large", "display_name": "Piotr Bielski", "link": "https://stackoverflow.com/users/4944066/piotr-bielski"}, "edited": false, "score": 0, "creation_date": 1483516955, "post_id": 41429197, "comment_id": 70123416, "body": "I want that was execut only once. I don&#39;t understand why on one server works fine but on another not.  I think, problem is in apache configuration."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 75, "user_id": 4944066, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/980661958657186/picture?type=large", "display_name": "Piotr Bielski", "link": "https://stackoverflow.com/users/4944066/piotr-bielski"}, "edited": false, "score": 0, "creation_date": 1483605996, "post_id": 41429197, "comment_id": 70166352, "body": "One point of mod_perl is, that you usually don&#39;t execute the static code on the package-level for each request but only the first time. Anyway, I guess you could set PerlInterpMaxRequests to 1 in your vhost/apache configuration to disable this behaviour."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1483369854, "creation_date": 1483369854, "answer_id": 41429197, "question_id": 41427826, "link": "https://stackoverflow.com/questions/41427826/values-lifetime-in-mod-perl/41429197#41429197", "title": "Values lifetime in mod_perl", "body": "<p>The probloem - if I get this correctly - is that the code</p>\n\n<pre><code>my $msg = {};\n</code></pre>\n\n<p>is only executed when this package is required/used for the first time. After that (in the current mod_perl Instance) this wont be executed any more, and $msg keeps whatever value it has for the next requests. </p>\n\n<p>There are a lot of ways to work around this problem. One schema, I use some times, is to define a \"tear-down/reset\" method for each \"package / module-Entity\" I use. In the package itself I push a reference of this method to a global Variable. And in my \"core-Handler\" called by mod_perl I have a tear-down/reset method, which iterates over the registered handlers and calls them to reset the data.</p>\n\n<p>HTH \nGeorg</p>\n"}], "owner": {"reputation": 75, "user_id": 4944066, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/980661958657186/picture?type=large", "display_name": "Piotr Bielski", "link": "https://stackoverflow.com/users/4944066/piotr-bielski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483369854, "creation_date": 1483363866, "question_id": 41427826, "link": "https://stackoverflow.com/questions/41427826/values-lifetime-in-mod-perl", "title": "Values lifetime in mod_perl", "body": "<p>.pm file:</p>\n\n<pre><code>package fo_condition_editor;\n\nuse utf8;\nuse diagnostics -trace;\nuse strict;\nuse warnings FATAL =&gt; 'all';\n\n{...}\n\nuse Encode;\n\nmy $msg = {};\n\nreturn 1;\n{..}\nsub ..() {\n$msg-&gt;{saved} = 1;\n</code></pre>\n\n<p>I use this pm to show popup. When form is submitted, popup is refreshed.</p>\n\n<p>In my local server everything works fine, but in other server i had problem with variables $msg. $msg is empty during printing, but when i submit again in $msg are old things.</p>\n\n<p>I think is problem with apache configuration. </p>\n"}, {"tags": ["multithreading", "perl", "stdout"], "comments": [{"owner": {"reputation": 66, "user_id": 7012962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb2d1debd8230d248bcc4aefb43b4353?s=128&d=identicon&r=PG&f=1", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7012962/mariusz"}, "edited": false, "score": 0, "creation_date": 1483365435, "post_id": 41427648, "comment_id": 70061837, "body": "Maybe instead of trying to overwrite STDOUT you could redirect output of the .exe with &gt;&gt; operator like <code>system(&quot;program.exe &gt;&gt; log&quot;.$tid.&quot;.txt&quot;);</code> in each thread respectively?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483419739, "post_id": 41427648, "comment_id": 70079277, "body": "Which model/module are you using for threading?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483460332, "post_id": 41427648, "comment_id": 70101939, "body": "If your threads call an exe, why not instead use  <code>open</code> and just read it as a file handle?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1483537903, "last_edit_date": 1483537903, "creation_date": 1483459360, "answer_id": 41447491, "question_id": 41427648, "link": "https://stackoverflow.com/questions/41427648/redirect-stdout-for-a-specific-thread-in-perl/41447491#41447491", "title": "Redirect STDOUT for a specific thread in Perl", "body": "<p><code>STDOUT</code> is a Perl variable, and as a Perl variable, it's thread-specific. You can most definitely change <code>STDOUT</code> without affecting any other threads.</p>\n\n<pre><code>$ cat a.pl\nuse threads;\n\nfor (1..3) {\n   async {\n      my $tid = threads-&gt;tid;\n      open(local *STDOUT, '&gt;', \"out.$tid.txt\") or die $!;\n      sleep(1);\n      print(\"$_\\n\");\n   };\n}\n\n$_-&gt;join for threads-&gt;list;\n\n$ perl a.pl\n\n$ grep '.*' *.txt\nout.1.txt:1\nout.2.txt:2\nout.3.txt:3\n</code></pre>\n\n<p>But that has nothing to do with your problem. You want to associate the stdout of child you create with a file handle. That has nothing to do with Perl variables in the parent, and isn't affected by threads.</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\n\nmy $tid = threads-&gt;tid;\n\nrun3([ 'printf', '%s\\n', $tid ], \\undef, \"out.$tid.txt\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Run qw( run );\n\nmy $tid = threads-&gt;tid;\n\nrun([ 'printf', '%s\\n', $tid ], \\undef, \"out.$tid.txt\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Open3 qw( open3 );\n\nmy $tid = threads-&gt;tid;\n\nopen(local *CHILD_STDIN,  '&lt;', '/dev/null') or die $!;\nopen(local *CHILD_STDOUT, '&gt;', \"out.$tid.txt\") or die $!;\nmy $pid = open3('&lt;&amp;CHILD_STDIN', '&gt;&amp;CHILD_STDOUT', '&gt;&amp;STDERR',\n   'printf', '%s\\n', $tid);\nwaitpid($pid, 0);\n</code></pre>\n\n<p>(I recommend against IPC::Open3. It's just too low-level for most things. It's even relatively complicated for this simple task. I only included it because it's bundled with Perl.)</p>\n"}], "owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1483537903, "creation_date": 1483363164, "last_edit_date": 1483364330, "question_id": 41427648, "link": "https://stackoverflow.com/questions/41427648/redirect-stdout-for-a-specific-thread-in-perl", "title": "Redirect STDOUT for a specific thread in Perl", "body": "<p>I have a perl script that Spawns 3 threads, and uses a shared queue to pull jobs.\nI have a log file for each thread.</p>\n\n<p>What I am trying to do is to overwrite STDOUT for this thread, so that all actions within this thread prints to the log file and not the terminal.</p>\n\n<p>When I initiate each thread, have this</p>\n\n<pre><code>open ( STDOUT, '&gt;&gt;', 'log'.$tid.'.txt' );\n</code></pre>\n\n<p>This overwrites STDOUT for all threads unfortunatelly, so I have everything ins log3.txt.</p>\n\n<p>How can I have STDOUT only overwritten/redirected for the current thread?</p>\n\n<p>Edit:\nI did try SELECT and local *STDOUT, my problem is, each thread calls an .exe that I want it to output to the modified STDOUT, and that does not happen with SELECT and LOCAL.</p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483358704, "post_id": 41426375, "comment_id": 70058358, "body": "Can you add another file where it&#39;s not working to the question please? You can <a href=\"https://stackoverflow.com/posts/41426375/edit\">edit</a> the question to do that."}, {"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483397472, "post_id": 41426375, "comment_id": 70074341, "body": "all the files are correct, but the script works well only on the first one it meets, leaving rest cleared (no matter which xml file it edits, it only edits correctly the first one)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483434155, "post_id": 41426375, "comment_id": 70085537, "body": "The obvious test there would be - move the <code>my $twig</code> declaration inside the loop."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483434395, "post_id": 41426375, "comment_id": 70085659, "body": "Also: Your XML isn&#39;t valid. That&#39;s possibly not helping."}], "answers": [{"comments": [{"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483619983, "post_id": 41484175, "comment_id": 70175491, "body": "Thanks for response. Unfortunately  those scripts cleans all the files (Every files, even the first one)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 1, "creation_date": 1483645665, "post_id": 41484175, "comment_id": 70192849, "body": "@Piodo  The XML file you show is invalid and the shown code doesn&#39;t work for it, so you probably use files different than shown.  I corrected it and tested with that, and I made up two more groups of XML files and tested with those as well.  The code as shown works, both versions.  It also works with your sub for clearing <code>loot</code> nodes.  I added a different way just so, since it is far simpler computationally."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 1, "creation_date": 1483655813, "post_id": 41484175, "comment_id": 70198081, "body": "@Piodo I also replaced <code>flush</code> with <code>print</code>.  That could be causing you problems (it doesn&#39;t for either version here, but it does clear the object)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 1, "creation_date": 1483656366, "post_id": 41484175, "comment_id": 70198331, "body": "@Piodo  Confirmed -- when I change <code>flush</code> to <code>print</code> your code works (for me, and with valid XML files).  I updated the answer with this.  However, I still recommend doing everything in the loop, since XML::Twig just does not support multiple files well."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1489601430, "last_edit_date": 1489601430, "creation_date": 1483616500, "answer_id": 41484175, "question_id": 41426375, "link": "https://stackoverflow.com/questions/41426375/clear-content-in-xml-brackets-in-all-files-in-directory-tree-on-windows-using-st/41484175#41484175", "title": "Clear content in xml brackets in all files in directory tree on Windows using Strawberry Perl and twig", "body": "<p><strong>Note</strong> &nbsp; With <code>flush</code> changed to <code>print</code> the code in the question works for me (with valid XML).</p>\n\n<p>However, I still recommend either of versions below. Tested with two groups of valid XML files.</p>\n\n<hr>\n\n<p>When <code>XML::Twig-&gt;new(...)</code> is set first and then files looped over and processed, I get the same behavior.  The first file is processed correctly, the others completely blanked.  &nbsp; <strong>Edit</strong> <em>When <code>flush</code> is replaced by <code>print</code> the shown code in fact works (with correct XML files). However I still suggest either of versions below instead, as <code>XML::Twig</code> just does not support multiple files well.</em> </p>\n\n<p>The reason may have something to do with <code>new</code> being a <em>class method</em>.   However, I don't see why this needs to affect handling of multiple files. \nThe callback is installed outside of the loop, but I've tested with it being re-installed for each file and it doesn't help.  </p>\n\n<p>Finally, <code>flush</code>-ing isn't needed while it clearly hurts here, by clearing the state (which was created by the <em>class</em> method <code>new</code>). This doesn't affect the code below, but it is still replaced by <code>print</code>.</p>\n\n<p>Then just do everything in the loop.  A simple version</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse XML::Twig;\n\nmy @files = File::Find::Rule-&gt;file-&gt;name('*.xml')-&gt;in('...');\n\nforeach my $file (@files)\n{\n    print \"Processing $file\\n\";\n    my $t = XML::Twig-&gt;new( \n        pretty_print =&gt; 'indented', \n        twig_handlers =&gt; { loot =&gt; \\&amp;clear_elt },\n    );\n    $t-&gt;parsefile_inplace($file)-&gt;print;\n}\n\nsub clear_elt {\n    my ($t, $elt) = @_; \n    my $elt_name = $elt-&gt;name;                # get the name\n    my $parent = $elt-&gt;parent;                # fetch the parent\n    $elt-&gt;delete;                             # remove altogether\n    $parent-&gt;insert_new_elt($elt_name, '');   # add it back empty\n}\n</code></pre>\n\n<p>The callback code is simplified, to remove the element altogether and then add it back, empty. Note that the sub <em>does not</em> need the element name hardcoded. This can thus be used as it stands to remove any element.</p>\n\n<p>We can avoid calling <code>new</code> in the loop by using another class method, <code>nparse</code>.</p>\n\n<pre><code>my $t = XML::Twig-&gt;new( pretty_print =&gt; 'indented' );\n\nforeach my $file (@files) \n{\n    print \"Processing $file\\n\";\n    my $tobj = XML::Twig-&gt;nparse( \n        twig_handlers =&gt; { loot =&gt; \\&amp;clear_elt }, \n        $file\n     );\n     $tobj-&gt;parsefile_inplace($file)-&gt;print;\n}\n\n# the sub clear_elt() same as above\n</code></pre>\n\n<p>We do <em>have to</em> first call the <code>new</code> constructor, even as it isn't directly used in the loop.</p>\n\n<hr>\n\n<p>Note that calling <code>new</code> before the loop <em>without <code>twig_handlers</code></em> and then setting handlers inside</p>\n\n<pre><code>$t-&gt;setTwigHandlers(loot =&gt; sub { ... });\n</code></pre>\n\n<p>does not help. We still only get the first file processed correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483622520, "post_id": 41485854, "comment_id": 70177379, "body": "The script works on every file correctly clearing the loot, I think we have a winner here. Unfortunately 10% of the xml files doesn&#39;t contain the <code>&lt;loot&gt;</code> <code>&lt;&#47;loot&gt;</code> elements. In this case if script modify xml monster that doesn&#39;t have <code>&lt;loot&gt;</code> node it clears the file (0 kb). Can be placed a condition that doesn&#39;t modify the file if there aren&#39;t <code>loot</code> elements, or just doesnt blank the file in this case? (Putting empty <code>&lt;loot&gt;&lt;&#47;loot&gt;</code> would be fine too)"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 1, "creation_date": 1483630942, "post_id": 41485854, "comment_id": 70183405, "body": "Indeed. It is because you use flush() while parsing. The doc explains it: &quot;Flushes a twig up to (and including) the current element, then deletes all unnecessary elements from the tree that&#39;s kept in memory.&quot; As your files without the loot element won&#39;t match anything in your twig-handlers, when flushing you won&#39;t have been anywhere in the XML tree. I edited my solution in order to print the whole tree once the parsing is done. Please let me know if you agree with this solution."}, {"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483637330, "post_id": 41485854, "comment_id": 70187937, "body": "Thank you, it&#39;s great. I will award my bounty to you as fast I can (after 6 hours)"}], "tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": true, "score": 3, "last_activity_date": 1484465182, "last_edit_date": 1484465182, "creation_date": 1483621409, "answer_id": 41485854, "question_id": 41426375, "link": "https://stackoverflow.com/questions/41426375/clear-content-in-xml-brackets-in-all-files-in-directory-tree-on-windows-using-st/41485854#41485854", "title": "Clear content in xml brackets in all files in directory tree on Windows using Strawberry Perl and twig", "body": "<p>The <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm#TODO\" rel=\"nofollow noreferrer\">XML::Twig doc</a> says that \"Multiple twigs are not well supported\".</p>\n\n<p>If you look at the state of the twig object (using Data::Dumper for example) you see a strong difference between the first and subsequent runs. It looks like it considers that is has been totally flushed already (which is true, as there was a complete flush during the first run). It probably has nothing more to print for the subsequent files and the file ends up empty.</p>\n\n<p>Recreating the twig object at each loop worked for me: </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse File::Find::Rule;\nuse XML::Twig;\n\nsub delete_loot {\n   my ( $twig, $loot ) = @_;\n   foreach my $loot_entry ( $loot -&gt; children ) {\n        $loot_entry -&gt; delete;\n    }\n}\n\nforeach my $file ( File::Find::Rule  -&gt; file()\n                                     -&gt; name ( '*.xml' )\n                                     -&gt; in ( '/home/dabi/tmp' ) ) {\n\n    print \"Processing $file\\n\";\n    my $twig = XML::Twig -&gt; new ( pretty_print =&gt; 'indented', \n                                  twig_handlers =&gt; { loot =&gt; \\&amp;delete_loot, } ); \n    $twig -&gt; parsefile($file); \n    $twig -&gt; print_to_file($file);\n}\n</code></pre>\n\n<p>Also, I had to change the XML file structure to have it processed: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;monster name=\"Dragon\"&gt;\n&lt;health value=\"10000\"/&gt;\n&lt;immunities&gt;\n   &lt;immunity fire=\"1\"/&gt;\n&lt;/immunities&gt;\n&lt;loot&gt;\n&lt;item id=\"1\"/&gt;\n  &lt;item id=\"3\"&gt;\n      &lt;inside&gt;\n        &lt;item id=\"6\"/&gt;\n      &lt;/inside&gt;\n  &lt;/item&gt;\n&lt;/loot&gt;\n&lt;/monster&gt;\n</code></pre>\n"}], "owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 41485854, "answer_count": 2, "score": 5, "last_activity_date": 1489601430, "creation_date": 1483358138, "last_edit_date": 1483487968, "question_id": 41426375, "link": "https://stackoverflow.com/questions/41426375/clear-content-in-xml-brackets-in-all-files-in-directory-tree-on-windows-using-st", "title": "Clear content in xml brackets in all files in directory tree on Windows using Strawberry Perl and twig", "body": "<p>I want to clear whole content that is placed inside of <code>&lt;loot&gt;</code> <code>&lt;/loot&gt;</code> elements in XML files in a directory tree. I am using Strawberry Perl for windows 64 bit.</p>\n\n<p>For example this XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;monster name=\"Dragon\"/&gt;\n&lt;health=\"10000\"/&gt;\n&lt;immunities&gt;\n   &lt;immunity fire=\"1\"/&gt;\n&lt;/immunities&gt;\n&lt;loot&gt;\n&lt;item id=\"1\"/&gt;\n  &lt;item id=\"3\"/&gt;\n      &lt;inside&gt;\n        &lt;item id=\"6\"/&gt;\n      &lt;/inside&gt;\n  &lt;/item&gt;\n&lt;/loot&gt;\n</code></pre>\n\n<p>The changed file should look:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;monster name=\"Dragon\"/&gt;\n&lt;health=\"10000\"/&gt;\n&lt;immunities&gt;\n   &lt;immunity fire=\"1\"/&gt;\n&lt;/immunities&gt;\n&lt;loot&gt;\n&lt;/loot&gt;\n</code></pre>\n\n<p>I have this code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse File::Find::Rule;\nuse XML::Twig;\n\nsub delete_loot {\n   my ( $twig, $loot ) = @_;\n   foreach my $loot_entry ( $loot -&gt; children ) {\n      $loot_entry -&gt; delete;\n   }\n   $twig -&gt; flush;\n}\n\nmy $twig = XML::Twig -&gt; new ( pretty_print =&gt; 'indented', \n                              twig_handlers =&gt; { 'loot' =&gt; \\&amp;delete_loot } ); \n\nforeach my $file ( File::Find::Rule  -&gt; file()\n                                     -&gt; name ( '*.xml' )\n                                     -&gt; in ( 'C:\\Users\\PIO\\Documents\\serv\\monsters' ) ) {\n\n    print \"Processing $file\\n\";\n    $twig -&gt; parsefile_inplace($file); \n}\n</code></pre>\n\n<p>But it edits correctly only the first file it meets and the rest files leaves clear (0 kb clear files)</p>\n"}, {"tags": ["perl", "odf"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1483353216, "creation_date": 1483353216, "answer_id": 41425117, "question_id": 41423794, "link": "https://stackoverflow.com/questions/41423794/openofficeoodoc-how-to-insert-horizontal-line-rule-in-a-page/41425117#41425117", "title": "OpenOffice::OODoc - How to insert Horizontal Line/Rule in a Page", "body": "<blockquote>\n  <p>I've noticed that there are two methods--which I'm aware of--to\n  accomplish this task. There's Insert > Horizontal Ruler or by applying\n  a bottom border to the a paragraph.</p>\n  \n  <p>From what it appears, the \"Horizontal Ruler\" is just an image inserted\n  in the text. - <a href=\"https://forum.openoffice.org/en/forum/viewtopic.php?f=7&amp;t=11147\" rel=\"nofollow noreferrer\">OpenOffice forum</a></p>\n</blockquote>\n\n<p>So I think you could use an image (which contains a line).</p>\n\n<pre><code>$document-&gt;createImageStyle\n                (\n                \"NewImageStyle\",\n                properties      =&gt;\n                        {\n                        'draw:luminance'        =&gt; '20%',\n                        'draw:color-inversion'  =&gt; 'true'\n                        }\n                );\n\n$document-&gt;createImageElement\n                (\n                \"Image1\",\n                style           =&gt; \"NewImageStyle\",\n                attachment      =&gt; $newparagraph,\n                import          =&gt; \"path\\to\\rule.jpg\"\n                );\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 1184884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4Doi.jpg?s=128&g=1", "display_name": "Digambar Sangavkar", "link": "https://stackoverflow.com/users/1184884/digambar-sangavkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483353332, "creation_date": 1483347445, "last_edit_date": 1483353332, "question_id": 41423794, "link": "https://stackoverflow.com/questions/41423794/openofficeoodoc-how-to-insert-horizontal-line-rule-in-a-page", "title": "OpenOffice::OODoc - How to insert Horizontal Line/Rule in a Page", "body": "<p>I am creating ODF Document using <a href=\"https://metacpan.org/pod/OpenOffice::OODoc\" rel=\"nofollow noreferrer\">OpenOffice::OODoc</a> module. I want to have a Horizontal Line/Rule after a Heading.</p>\n\n<p>I have seen documentation but it has no solution for this problem. I even tried to insert a paragraph with border, but it leaves a vertical white space after top border and next line.</p>\n\n<p>Any idea how can this be done?</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 4776, "user_id": 3752496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4LuM.jpg?s=128&g=1", "display_name": "Shakeer Mirza", "link": "https://stackoverflow.com/users/3752496/shakeer-mirza"}, "edited": false, "score": 0, "creation_date": 1483347049, "post_id": 41423669, "comment_id": 70052779, "body": "If you want to do this in procedure itself, you can do exception handling using Try..Catch blocks. See documentation here <code>https:&#47;&#47;msdn.microsoft.com&#47;en-us&#47;library&#47;ms175976.aspx</code>"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483350214, "post_id": 41423669, "comment_id": 70054244, "body": "Do you want to continue with the script with just capturing the errors?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483350341, "post_id": 41423669, "comment_id": 70054295, "body": "@AbhiNickz Yes I want to continue the script."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483350447, "post_id": 41423669, "comment_id": 70054337, "body": "Look at this <a href=\"http://stackoverflow.com/questions/4822991/perl-dbi-capturing-errors\">Perl DBI Capturing Errors</a>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1483350973, "post_id": 41423669, "comment_id": 70054575, "body": "@AbhiNickz I tried it but it didn&#39;t work. Reports the same error."}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1483353888, "post_id": 41425260, "comment_id": 70055914, "body": "Why not simply switch from <code>RaiseError</code> to <code>PrintError</code>?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483353964, "post_id": 41425260, "comment_id": 70055970, "body": "@Chankeypathak How to prevent the dbi <code>abort</code>?"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1483354027, "post_id": 41425260, "comment_id": 70056005, "body": "@mkHun As dgw has mentioned turning off RaiseError and enabling PrintError will prevent the abort."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1483509682, "post_id": 41425260, "comment_id": 70120310, "body": "@ChankeyPathak I got the answer for my question by <a href=\"http://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41441486?noredirect=1#comment70098780_41441486\">this</a> question. I used your trick also. Thanks for your help."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1483354600, "last_edit_date": 1483354600, "creation_date": 1483353751, "answer_id": 41425260, "question_id": 41423669, "link": "https://stackoverflow.com/questions/41423669/how-to-store-the-runtime-mssql-error-in-a-variable-and-continue-to-run-in-perl/41425260#41425260", "title": "How to store the runtime mssql error in a variable and continue to run in perl?", "body": "<blockquote>\n  <p>The PrintError handle attribute tells DBI to call the Perl warn( )\n  function (which typically results in errors being printed to the\n  screen when encountered) and the RaiseError handle attribute (which\n  tells DBI to call the Perl die( ) function upon error, typically\n  causing the script to immediately abort). - <a href=\"http://shop.oreilly.com/product/9781565926998.do\" rel=\"nofollow noreferrer\">Programming the Perl DBI</a></p>\n</blockquote>\n\n<p>Therefore you could use below to handle the situation.</p>\n\n<pre><code>local $SIG{__DIE__} = sub {\n    my ($die_message) = @_;\n    #do something..\n};\n</code></pre>\n\n<blockquote>\n  <p>I'm trying to store the error in variable</p>\n</blockquote>\n\n<p>In above snippet <code>$die_message</code> will contain the error message.</p>\n\n<hr>\n\n<p>Another option would be to set <code>RaiseError</code> to 0 and <code>PrintError</code> to 1, so that you get the <code>warn</code>ings but program doesn't <code>die</code>.</p>\n\n<blockquote>\n  <p><strong>PrintError</strong></p>\n  \n  <p>The PrintError attribute can be used to force errors to generate\n  warnings (using warn) in addition to returning error codes in the\n  normal way. When set \"on\", any method which results in an error\n  occurring will cause the DBI to effectively do a <code>warn(\"$class $method\n  failed: $DBI::errstr\")</code> where <code>$class</code> is the driver class and\n  <code>$method</code> is the name of the method which failed.</p>\n  \n  <p><strong>RaiseError</strong></p>\n  \n  <p>The RaiseError attribute can be used to force errors to raise\n  exceptions rather than simply return error codes in the normal way. It\n  is \"off\" by default. When set \"on\", any method which results in an\n  error will cause the DBI to effectively do a <code>die(\"$class $method\n  failed: $DBI::errstr\")</code>, where <code>$class</code> is the driver class and\n  <code>$method</code> is the name of the method that failed.</p>\n</blockquote>\n\n<p>Source - <a href=\"https://metacpan.org/pod/DBI#PrintError\" rel=\"nofollow noreferrer\">DBI docs</a></p>\n\n<hr>\n\n<p>You could also do it manually by</p>\n\n<pre><code>my $dbh=DBI-&gt;connect(....{RaiseError=&gt;1}) or die...\nmy $sth=$dbh-&gt;prepare(...);\n{\n   local $dbh-&gt;{RaiseError} = 0;\n   $sth-&gt;execute;\n   if ($sth-&gt;Errstr) {\n       # handle the error\n   }\n}\n# $dbh-&gt;{RaiseError} is back to normal here\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1483509616, "last_edit_date": 1495539965, "creation_date": 1483509616, "answer_id": 41457122, "question_id": 41423669, "link": "https://stackoverflow.com/questions/41423669/how-to-store-the-runtime-mssql-error-in-a-variable-and-continue-to-run-in-perl/41457122#41457122", "title": "How to store the runtime mssql error in a variable and continue to run in perl?", "body": "<p>I got the answer for my question from <a href=\"https://stackoverflow.com/questions/41440383/how-to-get-the-stored-procedure-result-using-perl/41441486?noredirect=1#comment70098780_41441486\">this</a> answer. </p>\n\n<p>The final answer is </p>\n\n<pre><code>do\n{ \nwhile(my @row=$sth-&gt;fetchrow_array())\n{\n    if ($sth-&gt;errstr) \n    {\n        my $Error = $sth-&gt;errstr;   \n\n    }\n    print $row[0].\"\\n\\n\";\n}\n} while ($sth-&gt;{odbc_more_results});\n</code></pre>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 41425260, "answer_count": 2, "score": 2, "last_activity_date": 1483509616, "creation_date": 1483346780, "last_edit_date": 1483367393, "question_id": 41423669, "link": "https://stackoverflow.com/questions/41423669/how-to-store-the-runtime-mssql-error-in-a-variable-and-continue-to-run-in-perl", "title": "How to store the runtime mssql error in a variable and continue to run in perl?", "body": "<p>I'm trying to store the runtime mssql error in variable and continue with all other data. </p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"exec TEST_ABC_DB.dbo.testprocedure\");\n$sth-&gt;execute() ;\nmy $db_error =$DBI::errstr; #It didn't work also I tried err and state\nprint \"\\nDB error $db_error\\n\";\nwhile (@row = $sth-&gt;fetchrow_array( ) ) \n{\n      print \"Row: @row\\n\";\n}\n</code></pre>\n\n<p>I used the eval block but it is also not working.</p>\n\n<p>My procedure as follows,(sample)</p>\n\n<pre><code>CREATE procedure  testprocedure as\nselect 'one'\nselect 'three'\nselect 10/0\nselect 'five'\n</code></pre>\n\n<p>When I run the script it shows </p>\n\n<p>The output is</p>\n\n<pre><code>Row: one\nDBD::ODBC::st finish failed: [unixODBC][FreeTDS][SQL Server]Divide by zero error encountered. (SQL-22012) at testing.pl line 24.\nDBI::db=HASH(0xbe79a0)-&gt;disconnect invalidates 1 active statement handle (either destroy statement handles or call finish on them before disconnecting) at testing.pl line 28.\n</code></pre>\n\n<p>Not displaying output even <code>three</code>. Displays the only one.</p>\n"}, {"tags": ["perl", "object"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1483339884, "post_id": 41421374, "comment_id": 70050364, "body": "Or since you discard all but the first match, <code>my ($res) = $response-&gt;{content} =~ &#47;^(.*href.*)&#47;m;</code>"}], "tags": [], "owner": {"reputation": 336, "user_id": 3808623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4de1e889b7b1d5bde4aa4bc089e74c?s=128&d=identicon&r=PG", "display_name": "ccm", "link": "https://stackoverflow.com/users/3808623/ccm"}, "is_accepted": true, "score": 3, "last_activity_date": 1483331551, "creation_date": 1483331551, "answer_id": 41421374, "question_id": 41421143, "link": "https://stackoverflow.com/questions/41421143/grep-http-response-in-a-perl-object/41421374#41421374", "title": "Grep http response in a perl object", "body": "<p><code>grep</code> in Perl isn't quite like the command-line program of the same name. It works over arrays rather than text lines. Try something like this instead:</p>\n\n<pre><code>my ($res) =  grep {/href/} split(/\\n/, $response-&gt;{content});\n</code></pre>\n\n<p>The <code>split</code> will turn the document you <code>GET</code> into an array of lines so that the <code>grep</code> will do what you expect.</p>\n"}], "owner": {"reputation": 65, "user_id": 3425900, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2056a8b933b549043e61f630d5e6da98?s=128&d=identicon&r=PG&f=1", "display_name": "user3425900", "link": "https://stackoverflow.com/users/3425900/user3425900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 41421374, "answer_count": 1, "score": 0, "last_activity_date": 1483336525, "creation_date": 1483328980, "last_edit_date": 1483336525, "question_id": 41421143, "link": "https://stackoverflow.com/questions/41421143/grep-http-response-in-a-perl-object", "title": "Grep http response in a perl object", "body": "<p>I have an http response in a perl object (HTTP::Tiny) that I'm trying to extract specific values from but a positive match returns the entire object instead of just the values I want. How can I just extract those lines or values I want from the object?</p>\n\n<pre><code>for my $url (@urls) {\nprint $url.\"\\n\";\n$response = $http-&gt;get(\"$url\");\nmy ($res) =  grep {/href/} $response-&gt;{content};\nprint $res;\n}\n</code></pre>\n"}, {"tags": ["mysql", "perl", "bind", "dbi"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483325540, "post_id": 41420765, "comment_id": 70047133, "body": "Why are you passing references in <code>bind_columns</code>? What are the values of <code>$CompId</code>, <code>$CompEmail</code>, etc.?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483372382, "post_id": 41420765, "comment_id": 70065225, "body": "@mob: Presumably because that&#39;s the right thing to do?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1483372583, "creation_date": 1483372583, "answer_id": 41429821, "question_id": 41420765, "link": "https://stackoverflow.com/questions/41420765/having-trouble-getting-mysql-data-returned/41429821#41429821", "title": "Having trouble getting MySQL data returned", "body": "<p>What are lines 302, 304, and 310?</p>\n\n<p>It looks like your criteria (the WHERE conditions) are failing, and the statement returns no records</p>\n\n<p>What does <code>$QueryFTP-&gt;fetch</code> return? You need to check its status before you use it. That is the major difference between the code that you think \"works\" and your problem case</p>\n\n<p>You need to check the values of <code>$CompID</code> and <code>$remote_CompID</code> before the <code>execute</code>. You should also use <em>placeholders</em> in the <code>prepare</code> call, and supply the values in <code>execute</code></p>\n"}], "owner": {"reputation": 21, "user_id": 4963572, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812402507/picture?type=large", "display_name": "Jakester", "link": "https://stackoverflow.com/users/4963572/jakester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483372583, "creation_date": 1483324245, "last_edit_date": 1483371993, "question_id": 41420765, "link": "https://stackoverflow.com/questions/41420765/having-trouble-getting-mysql-data-returned", "title": "Having trouble getting MySQL data returned", "body": "<p></p>\n\n<p>I have a long Perl script that in other places returns <code>MySQL</code> table data successfully using binds:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$query2 = \"SELECT tblExportFiles.CompID, CompEmail, export_id,  export_name, query, num_records, sample_rate, record_startnum, Description, Pull_Type, remote_CompID  FROM tblExportFiles INNER JOIN tblCustomers USING(CompID) WHERE done=0 ORDER BY export_id ASC  ;\";\n$sqlQuery2 = $dbh-&gt;prepare( $query2 );\n$sqlQuery2-&gt;execute or die \"can't execute the query: \" . $sqlQuery2-&gt;errstr;\n\n$sqlQuery2-&gt;bind_columns(\n    \\$CompID,      \\$CompEmail,  \\$export_id,  \\$fileName,\n    \\$queryFile,   \\$numRecords, \\$sampleRate, \\$recStartNum,\n    \\$description, \\$qType,      \\$remote_CompID\n);\n\nwhile ( $sqlQuery2-&gt;fetch ) { ... }\n</code></pre>\n\n<p>But when I do the same sort of <code>query</code> here, it fails to return any values but doesn't throw an error:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $ftpQuerySQL = \"SELECT  tblResellersData.http_address ,ftp_address, ftp_username, ftp_password, ftp_dir, http_name, tblResellerCustomers.CompEmail FROM tblResellersData,  tblResellerCustomers WHERE  tblResellerCustomers.User_ID = '$remote_CompID' AND tblResellersData.CompID = '$CompID' ;  \";\n    print \"FTP SQL = $ftpQuerySQL\\n\\n\";\n\n    $QueryFTP = $dbh-&gt;prepare( $ftpQuerySQL );\n    $QueryFTP-&gt;execute() or die \"can't execute the query: \" . $QueryFTP-&gt;errstr;\n\n    $QueryFTP-&gt;bind_columns(\n        \\$http_address, \\$ftp_address, \\$ftp_username, \\$ftp_password,\n        \\$ftp_dir,      \\$remote_name, \\$CompEmail\n    );\n\n    $QueryFTP-&gt;fetch();\n</code></pre>\n\n<p>It throws warnings</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Use of uninitialized value $ftp_address in concatenation (.) or string at ./Cron_file_output.pl line 302.\nUse of uninitialized value $ftp_dir in concatenation (.) or string at ./Cron_file_output.pl line 302.\nUse of uninitialized value $ftp_username in concatenation (.) or string at ./Cron_file_output.pl line 302.\n is a   located in\nUse of uninitialized value $ftp_dir in scalar chomp at ./Cron_file_output.pl line 303.\nUse of uninitialized value $http_address in concatenation (.) or string at ./Cron_file_output.pl line 304.\nUse of uninitialized value $ftp_address in concatenation (.) or string at ./Cron_file_output.pl line 304.\nUse of uninitialized value $ftp_username in concatenation (.) or string at ./Cron_file_output.pl line 304.\nUse of uninitialized value $ftp_password in concatenation (.) or string at ./Cron_file_output.pl line 304.\nUse of uninitialized value $ftp_dir in concatenation (.) or string at ./Cron_file_output.pl line 304.\nUse of uninitialized value $remote_name in concatenation (.) or string at ./Cron_file_output.pl line 304.\nRETURNED VALUES......., ,  , , , , j@adki87.com\nUse of uninitialized value $ftp_address in concatenation (.) or string at ./Cron_file_output.pl line 310.\n</code></pre>\n\n<p>But when I ran the same SQL under <code>phpMyAdmin</code>, it gave this result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http_address website's url  ftp_address     ftp_username    ftp_password    ftp_dir     http_name   \nhttp://www.highpeaksbyway.com/  highpeaksbyway.com  data@highpeaksbyway.com dataUUU666##)   pulls/  TEST ME \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483371472, "post_id": 41420437, "comment_id": 70064851, "body": "What is <code>[08:21:12[PM]][DEBUG] =&gt;&gt; Packet Sent: %xt%up%-1%1%1%</code> and how does it relate to your problem? It looks more like a format string that output data. What object-oriented module are you using? <code>Moo</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483369811, "post_id": 41420626, "comment_id": 70064071, "body": "So the solution is to set <code>$arrResult</code> to a hash reference instead? Together with accessing <code>$self-&gt;{connection}</code>, when you are presumably using an object-oriented framework like <code>Moo</code>, you are writing some really scary code here. Just like comments should explain the <i>why</i> instead of the <i>what</i>, your code should express the <i>what</i> instead of the <i>how</i>. The last is down to the compiler. Your code is just a bunch of characters that happen to work; you aren&#39;t taking advantage of a very high-level language, and much of your work may as well be machine code."}], "tags": [], "owner": {"reputation": 111, "user_id": 2494766, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/531c8be4b4a9a311e05cf5f0b7128f80?s=128&d=identicon&r=PG", "display_name": "Reed", "link": "https://stackoverflow.com/users/2494766/reed"}, "is_accepted": true, "score": -1, "last_activity_date": 1483322050, "creation_date": 1483322050, "answer_id": 41420626, "question_id": 41420437, "link": "https://stackoverflow.com/questions/41420437/how-to-output-column-data/41420626#41420626", "title": "How to output column data", "body": "<p>Nevermind I fixed it</p>\n\n<pre><code>method getColumnsById($intID, $columns) {\n\n        my $resQuery = $self-&gt;{connection}-&gt;prepare(\"SELECT $columns FROM `users` WHERE `ID` = ?\");\n        $resQuery-&gt;execute($intID);\n        my $arrResult = $resQuery-&gt;fetchrow_hashref;\n        if ($arrResult) {\n           return $arrResult-&gt;{$columns};\n\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 2494766, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/531c8be4b4a9a311e05cf5f0b7128f80?s=128&d=identicon&r=PG", "display_name": "Reed", "link": "https://stackoverflow.com/users/2494766/reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41420626, "answer_count": 1, "score": 0, "last_activity_date": 1483371417, "creation_date": 1483319458, "last_edit_date": 1483371417, "question_id": 41420437, "link": "https://stackoverflow.com/questions/41420437/how-to-output-column-data", "title": "How to output column data", "body": "<p>I've been trying to output column data for a specific user, but it always seems to not work and it doesn't give me any type of error.</p>\n\n<p>What it should do is get the <code>UserId</code> then output that column's data, but in my situation it's actually outputting the user's ID instead of the column data.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[08:21:12[PM]][DEBUG] =&gt;&gt; Packet Sent: %xt%up%-1%1%1%\n</code></pre>\n\n<p>The last number 1 is what the method below sends back which is wrong.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>method getColumnsById( $intID, $columns ) {\n\n    my $resQuery = $self-&gt;{connection}-&gt;prepare( \"SELECT $columns FROM `users` WHERE `ID` = ?\" );\n\n    $resQuery-&gt;execute( $intID );\n\n    my $arrResult = $resQuery-&gt;fetchrow_arrayref( 0 );\n\n    if ( $arrResult ) {\n        return $arrResult;\n    }\n}\n</code></pre>\n\n<h3>Example:</h3>\n\n<p>Username is <code>Test</code>, and it selects column <code>nameglow</code> then it should display the column data as like `0xFF000... or whatever the user has their column set to.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483328600, "post_id": 41420433, "comment_id": 70047623, "body": "\\Which lines do you need to complete? How are lines with <code>abcd&#47;xyz&#47;...</code> and those with <code>10:00 ...</code> used? Their format is different. The code doesn&#39;t explain this as it won&#39;t match any lines. Can you please clarify the question?"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 1, "last_activity_date": 1483324144, "creation_date": 1483324144, "answer_id": 41420754, "question_id": 41420433, "link": "https://stackoverflow.com/questions/41420433/perl-parsing-a-file-based-on-column-values/41420754#41420754", "title": "Perl, Parsing a file based on column values", "body": "<p>You need to remember the last full line of data.  Since you only need to remember a single value for each column, here's a solution that saves that one value each.  Depending on your needs, you may only need to save off values for the first two columns, so two scalars could do the same thing, but I'm not making that assumption here:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @last_full_line;\nwhile (&lt;DATA&gt;)\n{\n    chomp;\n    my @fields = split /\\t/;\n\n    # save off the old values for future use.\n    for my $i (0..$#fields)\n    {\n        $last_full_line[$i] = $fields[$i] if length $fields[$i];\n        $fields[$i] = $last_full_line[$i] unless length $fields[$i];\n    }\n\n    print join(',', @fields), \"\\n\";\n}\n\n\n__END__\nabcd/xyz/deft3  19-12-20167 9:00    1   45.87   74\n                10:00   99  167 42\n                11:00   99  167.02  42\n                12:00   167 167 42\n                13:00   99  167 42\n                14:00   167 167 42\n        20-12-20167 0:00    1   45.87   74\n                1:00    99  167 42\n                2:00    99  167.02  42\n                3:00    167 167 42\n                4:00    99  167 42\n                5:00    167 167 42\nqerty/azer/uuui1    19-12-20167 0:00    1   45.87   74\n                1:00    99  167 42\n                2:00    99  167.02  42\n                3:00    167 167 42\n                4:00    99  167 42\n                5:00    167 167 42\n        20-12-20167 0:00    1   45.87   74\n                1:00    99  167 42\n                2:00    99  167.02  42\n                3:00    167 167 42\n                4:00    99  167 42\n        5:00    167 167 42\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4363148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000574226765/picture?type=large", "display_name": "Imii Iik", "link": "https://stackoverflow.com/users/4363148/imii-iik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41420754, "answer_count": 1, "score": 0, "last_activity_date": 1483365517, "creation_date": 1483319396, "last_edit_date": 1483365517, "question_id": 41420433, "link": "https://stackoverflow.com/questions/41420433/perl-parsing-a-file-based-on-column-values", "title": "Perl, Parsing a file based on column values", "body": "<p></p>\n\n<p>I want to parse a file that contain columns separated by <strong>TAB</strong>, I want to complete empty fields based on value of the <strong>first</strong> and <strong>second</strong> columns, </p>\n\n<h3>Input:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>abcd/xyz/deft3    19-12-20167    9:00    1    45.87    74\n        10:00    99    167    42\n        11:00    99    167.02    42\n        12:00    167    167    42\n        13:00    99    167    42\n        14:00    167    167    42\n    20-12-20167    0:00    1    45.87    74\n        1:00    99    167    42\n        2:00    99    167.02    42\n        3:00    167    167    42\n        4:00    99    167    42\n        5:00    167    167    42\nqerty/azer/uuui1    19-12-20167    0:00    1    45.87    74\n        1:00    99    167    42\n        2:00    99    167.02    42\n        3:00    167    167    42\n        4:00    99    167    42\n        5:00    167    167    42\n    20-12-20167    0:00    1    45.87    74\n        1:00    99    167    42\n        2:00    99    167.02    42\n        3:00    167    167    42\n        4:00    99    167    42\n        5:00    167    167    42\n</code></pre>\n\n<h3>Expected Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>abcd/xyz/deft3    19-12-20167    9:00    1    45.87    74\nabcd/xyz/deft3    19-12-20167    10:00    99    167    42\nabcd/xyz/deft3    19-12-20167    11:00    99    167.02    42\nabcd/xyz/deft3    19-12-20167    12:00    167    167    42\nabcd/xyz/deft3    19-12-20167    13:00    99    167    42\nabcd/xyz/deft3    19-12-20167    14:00    167    167    42\nabcd/xyz/deft3    20-12-20167    0:00    1    45.87    74\nabcd/xyz/deft3    20-12-20167    1:00    99    167    42\nabcd/xyz/deft3    20-12-20167    2:00    99    167.02    42\nabcd/xyz/deft3    20-12-20167    3:00    167    167    42\nabcd/xyz/deft3    20-12-20167    4:00    99    167    42\nabcd/xyz/deft3    20-12-20167    5:00    167    167    42\nqerty/azer/uuui1    19-12-20167    0:00    1    45.87    74\nqerty/azer/uuui1    19-12-20167    1:00    99    167    42\nqerty/azer/uuui1    19-12-20167    2:00    99    167.02    42\nqerty/azer/uuui1    19-12-20167    3:00    167    167    42\nqerty/azer/uuui1    19-12-20167    4:00    99    167    42\nqerty/azer/uuui1    19-12-20167    5:00    167    167    42\nqerty/azer/uuui1    20-12-20167    0:00    1    45.87    74\nqerty/azer/uuui1    20-12-20167    1:00    99    167    42\nqerty/azer/uuui1    20-12-20167    2:00    99    167.02    42\nqerty/azer/uuui1    20-12-20167    3:00    167    167    42\nqerty/azer/uuui1    20-12-20167    4:00    99    167    42\nqerty/azer/uuui1    20-12-20167    5:00    167    167    42\n</code></pre>\n\n<h3>This is my code:</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nwhile ( &lt;&gt; ) {\n    chomp;\n    my @lines = split /\\t/;\n    my $name;\n\n    next unless ( /^([a-zA-Z0-9\\_\\-]+)\\/([a-zA-Z0-9\\_\\-]+)\\/([a-zA-Z0-9\\_\\-]+)\\s+([0-9\\_\\-]+)\\s+/ );\n\n    $name = $3;\n\n    print join( \",\",\n        $name = $1, $lines[0], $lines[1], $lines[2],\n        $lines[3], $lines[4], $lines[5], $lines[6] )\n            . \"\\n\";\n}\n</code></pre>\n\n<p>Could anyone please help me with this?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "edited": false, "score": 1, "creation_date": 1483301569, "post_id": 41418401, "comment_id": 70042325, "body": "One problem with your code is that sometimes styles are nested. Tags of the form <code>&lt;style&gt;...&lt;style&gt;...&lt;&#47;style&gt;...&lt;style&gt;...&lt;&#47;style&gt;&lt;&#47;style&gt;</code> will make this fail."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483301596, "post_id": 41418401, "comment_id": 70042336, "body": "When I run your code, it perfectly works. It removes everything between (and including) <code>&lt;style&gt;</code> and <code>&lt;&#47;style&gt;</code>. The result is an empty string. Please show a <i>&quot;<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self Contained, Correct (Compilable), Example</a>&quot;</i> of your code. Show an example where your attempt failed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1483308735, "post_id": 41418401, "comment_id": 70044251, "body": "<b><i>Please don&#39;t ever try to edit HTML using regular expressions</i></b>."}], "answers": [{"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 1, "last_activity_date": 1483318707, "creation_date": 1483318707, "answer_id": 41420375, "question_id": 41418401, "link": "https://stackoverflow.com/questions/41418401/remove-html-page-style-tag/41420375#41420375", "title": "remove html page style tag", "body": "<p>You can use an HTML DOM Parser like <a href=\"http://mojolicious.org/perldoc/Mojo/DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>.</p>\n\n<pre><code>use Mojo::DOM;\nuse strict;\nuse warnings;\n\nmy $dom = Mojo::DOM-&gt;new;\nmy $html = \"&lt;div&gt;&lt;div&gt;&lt;div&gt;Test&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\";\n\nwhile($html =~ m/&lt;div&gt;/) {\n   $html = $dom-&gt;parse($html)-&gt;at('div')-&gt;strip;\n}\n\nprint $html;\n\nOutput: Test\n</code></pre>\n\n<p>Also use one of the DOM functions to match <code>&lt;div&gt;</code> tags. The line with <code>$html =~ m/div/</code> in my example, is just for simple demonstration purpose.</p>\n"}], "owner": {"reputation": 173, "user_id": 1703803, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NZpHZ.jpg?s=128&g=1", "display_name": "Blnukem", "link": "https://stackoverflow.com/users/1703803/blnukem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1483318707, "creation_date": 1483299819, "last_edit_date": 1483301346, "question_id": 41418401, "link": "https://stackoverflow.com/questions/41418401/remove-html-page-style-tag", "title": "remove html page style tag", "body": "<p>I'm trying to remove the HTML style tag and all of the content between so the page has no styling I cant seem to get it to work</p>\n\n<p>This is what I have</p>\n\n<pre><code>$PageContent = qq~&lt;style type=\"text/css\"&gt;\n/* PAGE STYLE */\nbody {\n      margin:24px;\n      padding:0px;\n      background:#323232;\n      color:#EEEEEE;\n      min-width:748px;\n      font-family:'Verdana', sans-serif;\n      font-size:9pt;\n      font-weight:500;\n      line-height:12pt;\n      text-decoration: none;\n}&lt;/style&gt;~;\n\n$PageContent =~ s/&lt;style.*?&lt;\\/style&gt;//isg;\n\nprint $PageContent;\n</code></pre>\n"}, {"tags": ["perl", "sqlite"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1483287841, "post_id": 41416899, "comment_id": 70038376, "body": "Use ticks around <code>$scal</code>: <code>INSERT ... VALUES (&#39;$scal&#39;));</code> or (far!! better) use parameterized queries (those with the question marks in it)."}, {"owner": {"reputation": 43, "user_id": 3201114, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/60f58600bea628d6ed20d90b94b060f1?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/3201114/sonal"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483288042, "post_id": 41416899, "comment_id": 70038437, "body": "it worked.. THANKS!!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1483315355, "post_id": 41416899, "comment_id": 70045500, "body": "That&#39;s awful advice, @PerlDuck!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483315321, "post_id": 41417637, "comment_id": 70045495, "body": "(Accidental downvote using the app, which doesn&#39;t let me undo downvotes)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1483363570, "post_id": 41417637, "comment_id": 70060827, "body": "@ikegami Never mind, things happen. And thank you for telling."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 3, "last_activity_date": 1483293237, "creation_date": 1483293237, "answer_id": 41417637, "question_id": 41416899, "link": "https://stackoverflow.com/questions/41416899/having-trouble-in-saving-scalar-variable-into-db-sqlite3/41417637#41417637", "title": "Having trouble in saving scalar variable into DB (sqlite3)?", "body": "<p>The way you denote your array is a bit weird. Usually you would write it as</p>\n\n<pre><code>my @arr = ( '60=20130624-09:45:02.046',\n            '21=1',\n            '38=565',\n            ... );\n</code></pre>\n\n<p>or whatever your actual content is. But this is not the problem here because you flatten it to the string <code>$scal</code> anyway.</p>\n\n<p>One way to insert this string into your DB is to put ticks (<code>'</code>) around it:</p>\n\n<pre><code>my $st = qq(INSERT INTO demo (fix) VALUES ('$scal'));\nmy $r = $dbh-&gt;do($st) or die $DBI::errstr;\n</code></pre>\n\n<p><strong>But this is bad</strong> because it's vulnerable to SQL injection (<a href=\"http://imgs.xkcd.com/comics/exploits_of_a_mom.png\" rel=\"nofollow noreferrer\">http://imgs.xkcd.com/comics/exploits_of_a_mom.png</a>).\nConsider the case your string is <code>foo'); delete from demo; --</code>. The final result would then be</p>\n\n<pre><code>INSERT INTO demo (fix) VALUES ('foo'); delete from demo; --')\n</code></pre>\n\n<p>The second reason why this is bad: Your string could contain ticks (<code>$scal=\"foo's bar\"</code>) and that also would mess up the resulting INSERT statement:</p>\n\n<pre><code>INSERT INTO demo (fix) VALUES ('foo's bar');\n</code></pre>\n\n<p>Conclusion: it's always <strong>better to use parameterized queries</strong>:</p>\n\n<pre><code>my $st = 'INSERT INTO demo (fix) VALUES (?)';\nmy $r = $dbh-&gt;do($st, undef, $scal) or die $DBI::errstr;\n</code></pre>\n\n<p>The <code>undef</code> is for additional SQL options (I've rarely seen anything different from <code>undef</code> here). The following parameters are replaced for the <code>?</code>s in the statement. The DB driver does all the quoting for you. The more <code>?</code> you use, the more parameters you must supply to <code>do()</code>:</p>\n\n<pre><code>my $st = 'INSERT INTO sample_tbl (col1, col2, col3) VALUES (?, ?, ?)';\nmy $r = $dbh-&gt;do($st, undef, 'foo', 42, $scal) or die $DBI::errstr;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3201114, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/60f58600bea628d6ed20d90b94b060f1?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/3201114/sonal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 41417637, "answer_count": 1, "score": 2, "last_activity_date": 1483293237, "creation_date": 1483287383, "question_id": 41416899, "link": "https://stackoverflow.com/questions/41416899/having-trouble-in-saving-scalar-variable-into-db-sqlite3", "title": "Having trouble in saving scalar variable into DB (sqlite3)?", "body": "<p># I am saving output to an array and the array looks like this:-</p>\n\n<pre><code>60=20130624-09:45:02.046|21=1|38=565|52=20130624-09:45:02.046|35=D|10=085|40=1|9=205|100=MBTX|49=11342|553=2453|34=388|1=30532|43=Y|55=4323|54=1|56=MBT|11=584|59=0|114=Y|8=FIX.4.4|\n</code></pre>\n\n<p># Then i converted this array to scalar variable like this:-</p>\n\n<p>$scal=join('' , @arr);</p>\n\n<p># And now I am trying to save this into db:-</p>\n\n<pre><code>my $st = qq(INSERT INTO demo (fix)\n      VALUES ($scal));\nmy $r = $dbh-&gt;do($st) or die $DBI::errstr;\n\n#And my table schema is:-\n\nCREATE TABLE demo (fix varchar);\n\nAnd I keep getting errors :- DBD::SQLite::db do failed: near \":45\": syntax error at pdb.pl line 92, &lt;STDIN&gt; line 1.\nDBD::SQLite::db do failed: near \":45\": syntax error at pdb.pl line 92, &lt;STDIN&gt; line 1.\n\nAny help will be appreicated\n</code></pre>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483269606, "post_id": 41414782, "comment_id": 70034162, "body": "There is no <code>load</code> in Perl. That&#39;s a syntax error. Where is the common.pl file located?"}, {"owner": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483273539, "post_id": 41414782, "comment_id": 70034955, "body": "@simbabque in the same folder where <code>main.pl</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483274908, "post_id": 41414782, "comment_id": 70035265, "body": "@simbabque: <code>load</code> is provided by <code>Module::Load</code>, which is imported on the preceding line."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483283608, "post_id": 41414782, "comment_id": 70037275, "body": "@borodin I see. I think I was still asleep. Happy new year! :-)"}], "answers": [{"comments": [{"owner": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "edited": false, "score": 0, "creation_date": 1483273597, "post_id": 41415363, "comment_id": 70034965, "body": "I did, I tried to load <code>Common.pm</code> as module, see my Edit2."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "edited": false, "score": 0, "creation_date": 1483273733, "post_id": 41415363, "comment_id": 70034992, "body": "@snaggs That is not a correct way to write a module, as you are not setting up a system to export symbols. As for the script, why are you using <code>Module::Load</code> at all?  Once the module is set up all you need is <code>use Common qw(functions);</code>.  (You want to call modules with upper case, <code>Common.pm</code> for this one.) Let me know if you want to switch to this.  But this change in <code>require</code> line should make it work, for starters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "edited": false, "score": 0, "creation_date": 1483273963, "post_id": 41415363, "comment_id": 70035048, "body": "@snaggs Alright, I&#39;ll add that.  Yes, it is a good practice, by all means. I may not make it right now, it&#39;s very late here.  Let me know if there are any issues with what is in the answer now.  This should work. (I tested over <code>ssh</code> -- I had the same behavior as you do without the full path, while with it, as written, it works.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483275186, "post_id": 41415363, "comment_id": 70035315, "body": "It&#39;s probably better to recommend <code>use Exporter &#39;import&#39;</code> rather than the superseded inheritance method. Older versions of <code>Exporter</code> don&#39;t support it, but inheriting <code>import</code> instead of importing it should be seen as a work-around for those unwilling or unable to upgrade."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483275433, "post_id": 41415363, "comment_id": 70035376, "body": "@Borodin Thank you for the recommendation.  I have to go now while I wanted to put out a reasonable example.  Certainly need to add to this (and to edit)."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483295959, "post_id": 41415363, "comment_id": 70040744, "body": "@Borodin I usually don&#39;t export anything when writing modules and instead always call functions with their fully qualified name: <code>use Common; my $rc = Common::getTimeLoggerHelper();</code>. I prefer it because a) it doesn&#39;t pollute the namespace and b) I always exactly know where the <code>getTimeLoggerHelper</code> comes from. But perhaps that&#39;s just personal habit."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483307814, "post_id": 41415363, "comment_id": 70043989, "body": "@PerlDuck: You shouldn&#39;t be policing the namespace of other people&#39;s programs: the author of the calling code should have  a say in whether they want their namespace polluted.  And it is a useful way of documenting by implication which of the subroutines in your library you expect to be most useful. Depending on the nature of your library, there may be two or three calls to fully-qualified identifiers in a single statement, and refusing the author access to the obvious abbreviation will make their code unnecessarily unreadable just because of your fixation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483327040, "post_id": 41415363, "comment_id": 70047358, "body": "@Borodin  Thank your for the note on Exporter ways, edited."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1483327316, "post_id": 41415363, "comment_id": 70047392, "body": "@PerlDuck That&#39;s a reasonable policy (while it is also reasonable to drop all the typing).  That&#39;s why I use <code>@EXPORT_OK</code> -- it does not actually export things (does not change symbol tables) while it does make symbols available for import, so the caller can decide. The can still opt to <i>not import</i> and use fully qualified names.  I don&#39;t see a drawback to <i>providing</i> this. It doesn&#39;t enforce anything on anyone."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "edited": false, "score": 0, "creation_date": 1483327422, "post_id": 41415363, "comment_id": 70047418, "body": "@snaggs  I edited, with comments and links.  Please let me know if more/other/better would be useful."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483361532, "post_id": 41415363, "comment_id": 70059817, "body": "@zdim: I agree. The issue with exporting <i>nothing</i> is that the calling code has no options other than using the fully-qualified identifier or messing with the symbol table. The <a href=\"https://metacpan.org/pod/charnames\" rel=\"nofollow noreferrer\">charnames</a> pragma is like this. It provides various subroutines that must be called as, for example, <code>charnames::string_vianame(&#39;LEFT-POINTING DOUBLE ANGLE QUOTATION MARK&#39;)</code>. Because <code>Exporter</code> isn&#39;t used, the calling code has to use the awful <code>*string_vianame = \\&amp;charnames::string_vianame</code> to import the name explicitly."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483362611, "post_id": 41415363, "comment_id": 70060357, "body": "I&#39;ve never seen it <i>that</i> way, @Borodin. Thank you. Depending on its purpose, I&#39;ll consider the use of \\@EXPORT_OK next time, like zdim does. It sounds very reasonable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483416900, "post_id": 41415363, "comment_id": 70078508, "body": "@Borodin  Right, good example.  Another example is of some <code>::Tiny</code> modules, which don&#39;t export in order to remain within the <code>::Tiny</code> specs. I forget the particular one, which is well known and good ... but I was a bit turned off by this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483445768, "post_id": 41415363, "comment_id": 70092615, "body": "@zdim: There&#39;s a specification for <code>Tiny</code> modules?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483467891, "post_id": 41415363, "comment_id": 70106340, "body": "@Borodin  Well, restrictions on code size (and memory footprint?) so that it may go as <code>::Tiny</code>. I am not sure how strict it is, perhaps &quot;specification&quot; is too strong of a term. I forget what it was, I think I saw that information in the particular module that I can&#39;t recall, explaining why it doesn&#39;t set up exports. It may have been in comparison with a full fledged module which functionality the <code>::Tiny</code> version implements."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483471482, "post_id": 41415363, "comment_id": 70108215, "body": "@zdim: Okay, thank you. I&#39;ll look around. Please let me know if you find a reference. It would be nice if the categories <i>did</i> have a specification. At present it is more difficult than it should be to locate a module that serves a purpose and works well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483515237, "post_id": 41415363, "comment_id": 70122653, "body": "@Borodin  I only found <a href=\"http://search.cpan.org/dist/File-Path-Tiny/lib/File/Path/Tiny.pod\" rel=\"nofollow noreferrer\">File::Path::Tiny</a>, which calls upon <a href=\"http://search.cpan.org/~dmuey/Acme-Tiny-0.6/lib/Acme/Tiny.pod\" rel=\"nofollow noreferrer\">Acme::Tiny</a>, which has a reference to <a href=\"http://blogs.perl.org/users/dan_muey/2014/08/please-dont-use-tiny-unless-it-meets-the-tiny-criteria-thanks.html\" rel=\"nofollow noreferrer\">a blog</a>.  Skimming through only revealed rules set forth by Adam Kenedy.  Hardly formal :(  There may be more?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1554193948, "last_edit_date": 1554193948, "creation_date": 1483272821, "answer_id": 41415363, "question_id": 41414782, "link": "https://stackoverflow.com/questions/41414782/cant-locate-in-inc-perl-perl-file-loaded-by-require/41415363#41415363", "title": "Can&#39;t locate in @INC Perl perl file loaded by &quot;require&quot;", "body": "<p>If you need to use <code>require</code> for this, supply the full path</p>\n\n<pre><code>require \"/full/path/to/common.pl\";\n</code></pre>\n\n<p>This is needed over <code>ssh</code> even if the file is in the same directory, since then your <code>.</code> in <code>@INC</code> is <em>not</em> the script's directory (but likely your <code>HOME</code> is). This happens in other cases, as well.</p>\n\n<p>Note that this way you are importing <em>everything</em> that is in <code>common.pl</code>.</p>\n\n<p>There are many advantages to using a proper module instead. Then the file is <code>.pm</code> and by convention the file name is capitalized (and camel-cased). </p>\n\n<p>Here is a bare-bones example with files <code>bin/mail.pl</code> and <code>lib/Common.pm</code></p>\n\n<p><strong>bin/main.pl</strong></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse FindBin qw($RealBin);   # Directory in which the script lives\nuse lib \"$RealBin/../lib\";  # Where modules are, relative to $RealBin\n\nuse Common qw(test_me);\n\ntest_me();\n</code></pre>\n\n<p>The critical part of setting up <code>@INC</code>, where modules are looked for,\nis done with <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\">lib</a> pragma. It adds directories to the beginning of the default <code>@INC</code>, at compile time. The <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a>'s <code>$RealBin</code> is the script's directory, with links resolved. We use it so that added paths are relative to the script and not hard-coded. This helps source organization when script and its libraries come together.</p>\n\n<p>Another way to set this up is via the <a href=\"http://perldoc.perl.org/perlrun.html#ENVIRONMENT\" rel=\"nofollow noreferrer\">environment variable <code>PERL5LIB</code></a>. With <code>bash</code></p>\n\n<pre><code>export PERL5LIB=/path/to/libdir\n</code></pre>\n\n<p>Then for a <code>Module.pm</code> that is in <code>libdir</code> you only need to say <code>use Module</code> and it will be found. This is useful for modules that live at a particular location and are used by various scripts, for example.</p>\n\n<p><strong>lib/Common.pm</strong></p>\n\n<pre><code>package Common;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw( test_me );\n\nsub test_me { print \"Hello from \", __PACKAGE__, \"\\n\" }\n\n1;\n</code></pre>\n\n<p>When a package is <a href=\"https://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a>d its file is first <a href=\"https://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a>d and then the module's <a href=\"https://perldoc.perl.org/functions/import.html#import-LIST\" rel=\"nofollow noreferrer\">import</a> method runs, at compile time.  It is via <code>import</code> that the caller actually gets the symbols (names for  functions and variables) defined in the module, and we must provide an <code>import</code> method in our module (or use fully qualified names, <code>Module::function</code>, in a caller).</p>\n\n<p>The line with <code>use Exporter</code> brings in <em>its</em> <code>import</code> routine, so we don't have to write our own. With old versions of <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a> this was used via inheritance, often by <code>@ISA = ('Exporter')</code>. See docs.</p>\n\n<p>Then symbols are made available via <code>@EXPORT_OK</code>. This requires a caller to list functions to be used; it does not \"push\" anything into their namespace by default.  There is also <code>%EXPORT_TAG</code> which is helpful, specially if the list of symbols that callers import grows long.</p>\n"}], "owner": {"reputation": 5023, "user_id": 3021358, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/xI263.png?s=128&g=1", "display_name": "snaggs", "link": "https://stackoverflow.com/users/3021358/snaggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6099, "favorite_count": 2, "accepted_answer_id": 41415363, "answer_count": 1, "score": 2, "last_activity_date": 1554193948, "creation_date": 1483266417, "last_edit_date": 1483275588, "question_id": 41414782, "link": "https://stackoverflow.com/questions/41414782/cant-locate-in-inc-perl-perl-file-loaded-by-require", "title": "Can&#39;t locate in @INC Perl perl file loaded by &quot;require&quot;", "body": "\n\n<p>I have a simple Perl script that uses helper functions located in another file <code>common.pl</code>:</p>\n\n<h3>main.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Cwd 'abs_path';\n\nuse File::Basename qw( fileparse );\nuse File::Path qw( make_path );\nuse File::Spec;\n\n\nrequire \"common.pl\";  # line 15\n\n#...\n</code></pre>\n\n<h3>common.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nsub getTimeLoggerHelper{\n  #....\n}\n\n1;\n</code></pre>\n\n<p>Locally everything runs well, but when I try to run it through ssh I get an error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate common.pl in @INC  (@INC contains: \n/Library/Perl/5.18/darwin-thread-multi-2level  /Library/Perl/5.18 \n/Network/Library/Perl/5.18/darwin-thread-multi-2level\n/Network/Library/Perl/5.18\n/Library/Perl/Updates/5.18.2/darwin-thread-multi-2level\n/Library/Perl/Updates/5.18.2\n/System/Library/Perl/5.18/darwin-thread-multi-2level\n/System/Library/Perl/5.18 \n/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n/System/Library/Perl/Extras/5.18 .) at /Users/snaggs/scripts/main.pl line 15.\n</code></pre>\n\n<h3>[EDIT 1]</h3>\n\n<p>If I log in to a remote machine and run the same script, then there are no errors.</p>\n\n<h3>[EDIT 2]</h3>\n\n<p>I also tried converting <code>common.pl</code> to a module:</p>\n\n<h3>common.pm</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Common;\n\nuse strict;\nuse warnings;\n\nsub getTimeLoggerHelper{\n  #....\n}\n\n1;\n__END__\n</code></pre>\n\n<p>and from <code>main.pl</code> I call it like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Module::Load;\nload Common;\n</code></pre>\n\n<p>Same problem, locally works, from ssh - same error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate Common.pm in @INC (you may need to install the Common module)\n</code></pre>\n\n<p>How to get rid of this problem?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483240953, "post_id": 41411828, "comment_id": 70030186, "body": "That error message is from the URI module. I think it complains because the second argument is empty. There is nothing behind the <code>base_uri</code> in your object. Since that seems to be the parser, I believe it could be that you need to configure it, but I didn&#39;t read the guide. Anyway, happy new year and good luck with this. :-)"}], "owner": {"reputation": 1716, "user_id": 5079799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea769f6abda58c1c51a1c64845b73c7?s=128&d=identicon&r=PG&f=1", "display_name": "FreeSoftwareServers", "link": "https://stackoverflow.com/users/5079799/freesoftwareservers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1483228329, "creation_date": 1483219721, "last_edit_date": 1483228329, "question_id": 41411828, "link": "https://stackoverflow.com/questions/41411828/missing-base-argument-in-htmlwikiconverter-module", "title": "&quot;Missing base argument&quot; in HTML::WikiConverter module", "body": "\n\n<p>I have compiled all the modules successfully to run a script called Wikifetch.pl</p>\n\n<p>The Guide can be found here >> <a href=\"http://encodo.com/en/blogs.php?entry_id=73\" rel=\"nofollow noreferrer\">http://encodo.com/en/blogs.php?entry_id=73</a></p>\n\n<p>When I run the script, I get the following output...</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Strawberry&gt;perl wikifetch.pl\nReading config...\nPending pages:\nMain_Page\nDone reading config\nFetching/processing: http://wiki.domain.com/wiki/index.php/Main_Page\n\nMissing base argument at C:/Strawberry/perl/site/lib/HTML/WikiConverter.pm line 669.\n</code></pre>\n\n<p>This is the relevant code bit from that file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub __extract_wiki_page {\n  my( $self, $uri, $wiki_uri ) = @_;\n  return undef unless $wiki_uri;\n\n  if( ref $wiki_uri eq 'Regexp' ) {\n    return $uri =~ $wiki_uri ? $1 : undef;\n  } elsif( ref $wiki_uri eq 'CODE' ) {\n    return $wiki_uri-&gt;( $self, URI-&gt;new($uri) );\n  } else {\n    # Ensure $wiki_uri is absolute\n    $wiki_uri = URI-&gt;new_abs( $wiki_uri, $self-&gt;base_uri )-&gt;as_string;\n\n    return undef unless index( $uri, $wiki_uri ) == 0;\n    return undef unless length $uri &gt; length $wiki_uri;\n    return substr( $uri, length $wiki_uri );\n  }\n}\n</code></pre>\n\n<p>Line 669 is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$wiki_uri = URI-&gt;new_abs( $wiki_uri, $self-&gt;base_uri )-&gt;as_string;\n</code></pre>\n\n<p>I'm completely new to Perl, and am lost at this point. I have tried this on Debian/CentOS/Windows with the same results, except for CentOS where I couldn't get everything from CPAN to compile correctly.</p>\n\n<p>Can anybody give me a suggestion?</p>\n"}, {"tags": ["linux", "git", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483190216, "post_id": 41408574, "comment_id": 70020063, "body": "Does <code>perl -e &#39;use Errno&#39;</code> trigger the same error? I don&#39;t think this is git related."}, {"owner": {"reputation": 18841, "user_id": 368070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aefd3e85213e1c22ee31e4ce6123d40?s=128&d=identicon&r=PG", "display_name": "gideon", "link": "https://stackoverflow.com/users/368070/gideon"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483190291, "post_id": 41408574, "comment_id": 70020088, "body": "Yes :( that causes the same error. Man that was silly. What should I do. I&#39;ve tried reinstalling perl already?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1483190392, "post_id": 41408574, "comment_id": 70020117, "body": "<code>Errno</code> is a core perl module but maybe Fedora packages it separately. Is there a <code>perl-Errno</code> package or similar?"}, {"owner": {"reputation": 18841, "user_id": 368070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aefd3e85213e1c22ee31e4ce6123d40?s=128&d=identicon&r=PG", "display_name": "gideon", "link": "https://stackoverflow.com/users/368070/gideon"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483191267, "post_id": 41408574, "comment_id": 70020305, "body": "@melpomene oh wow! It worked. I just did <code>dnf upgrade perl-Errno</code> and it worked. Thanks so much. You could add your comments as an answer and I could accept it :)"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1483193696, "creation_date": 1483193696, "answer_id": 41409029, "question_id": 41408574, "link": "https://stackoverflow.com/questions/41408574/git-send-email-thows-errno-architecture-does-not-match-executable-architect/41409029#41409029", "title": "git send-email thows Errno architecture (..) does not match executable architecture (...) at /usr/lib64/perl5/Errno.pm line 11", "body": "<p>This doesn't look git specific. You can use <code>perl -e 'use Errno'</code> to confirm that it triggers the same error all by itself.</p>\n\n<p>You mentioned that you tried reinstalling perl, but despite <code>Errno</code> being a core module, Fedora packages it separately as <code>perl-Errno</code>.</p>\n\n<p>Upgrading <code>perl-Errno</code> should fix the version mismatch between it and perl.</p>\n"}], "owner": {"reputation": 18841, "user_id": 368070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5aefd3e85213e1c22ee31e4ce6123d40?s=128&d=identicon&r=PG", "display_name": "gideon", "link": "https://stackoverflow.com/users/368070/gideon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 41409029, "answer_count": 1, "score": 2, "last_activity_date": 1483193696, "creation_date": 1483189825, "last_edit_date": 1483190147, "question_id": 41408574, "link": "https://stackoverflow.com/questions/41408574/git-send-email-thows-errno-architecture-does-not-match-executable-architect", "title": "git send-email thows Errno architecture (..) does not match executable architecture (...) at /usr/lib64/perl5/Errno.pm line 11", "body": "<p>So I needed to send a patch into the linux kernel and installed <em>git email</em> on my fedora machine.</p>\n\n<p>However, for the life of me I can't figure why when I just even do this:</p>\n\n<pre><code>[gideon@gideon-fedora linus_tree]$ git send-email\n</code></pre>\n\n<p>I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Errno architecture (x86_64-linux-thread-multi-4.4.9-300.fc23.x86_64) does not match executable architecture (x86_64-linux-thread-multi-4.7.9-200.fc24.x86_64) at /usr/lib64/perl5/Errno.pm line 11.\nCompilation failed in require at /usr/share/perl5/vendor_perl/File/Temp.pm line 17.\nBEGIN failed--compilation aborted at /usr/share/perl5/vendor_perl/File/Temp.pm line 17.\nCompilation failed in require at /usr/libexec/git-core/git-send-email line 28.\nBEGIN failed--compilation aborted at /usr/libexec/git-core/git-send-email line 28.\n</code></pre>\n\n<p>So if I do <code>perl -V</code> I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Summary of my perl5 (revision 5 version 22 subversion 2) configuration:\n\n  Platform:\n    osname=linux, osvers=4.7.9-200.fc24.x86_64, \n    archname=x86_64-linux-thread-multi\n    uname='linux buildhw-05.phx2.fedoraproject.org \n    4.7.9-200.fc24.x86_64 #1 \n    smp thu oct 20 14:26:16 utc 2016 x86_64 x86_64 x86_64 gnulinux '\n</code></pre>\n\n<p>BUT if I do this <code>$ uname -r</code> I get: <code>4.6.4-301.fc24.x86_64</code></p>\n\n<p>Yes I am playing with kernels and I did do a make and make install of the latest <strong>4.10-rc</strong> kernel.</p>\n\n<p>Any clues to how this happened? I tried reinstalling perl and reinstalling git mail.</p>\n"}, {"tags": ["perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1483325349, "post_id": 41407905, "comment_id": 70047103, "body": "Or use <code>q</code> or <code>qq</code> operators."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 3, "last_activity_date": 1483183720, "creation_date": 1483183720, "answer_id": 41407905, "question_id": 41407885, "link": "https://stackoverflow.com/questions/41407885/prepare-command-not-working-with-dbi-using-perl/41407905#41407905", "title": "prepare command not working with DBI using perl", "body": "<p>Escape the quotes:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"select  CODE_ID,NAME_CODE,SUM(INR_COL + OUT_COL) AS \\\"TOTAL SUM\\\" ........\n</code></pre>\n\n<p>or use single quotes:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare('select  CODE_ID,NAME_CODE,SUM(INR_COL + OUT_COL) AS \"TOTAL SUM\" ........');\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2919704, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/135b166a088d55ea5e3c1e37a62597ec?s=128&d=identicon&r=PG&f=1", "display_name": "Volverine", "link": "https://stackoverflow.com/users/2919704/volverine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 41407905, "answer_count": 1, "score": 0, "last_activity_date": 1483183720, "creation_date": 1483183560, "question_id": 41407885, "link": "https://stackoverflow.com/questions/41407885/prepare-command-not-working-with-dbi-using-perl", "title": "prepare command not working with DBI using perl", "body": "<pre><code>$sth = $dbh-&gt;prepare(\"select  CODE_ID,NAME_CODE,SUM(INR_COL + OUT_COL) AS \"TOTAL SUM\" from nwsa where CODE_ID='L01A' OR CODE_ID='L01B'OR CODE_ID='L01C' OR CODE_ID='L01D' OR CODE_ID='L01DA' OR CODE_ID='L01E' OR CODE_ID='L02A' OR CODE_ID='L02B' OR CODE_ID='L02C' OR CODE_ID='L02E' OR CODE_ID='L02N'  group by  CODE_ID,NAME_CODE  \");  # your query here\n$sth-&gt;execute( );\n$out = DBIx::Dump-&gt;new('format' =&gt; csv,   # excel or csv\n                       'output' =&gt; $FILENAME, # file to save as\n                       'sth'    =&gt; $sth);\n</code></pre>\n\n<p>error coming as bareword found near \"TOTAL SUM\" ..\nwhat is the error..?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483182180, "post_id": 41407497, "comment_id": 70018282, "body": "Have you been taught to use <code>given</code>/<code>when</code>? It&#39;s an <i>experimental</i> feature, so its function may change or it may disappear altogether in future versions of Perl. It is best to avoid it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483182380, "post_id": 41407497, "comment_id": 70018321, "body": "Don&#39;t use single-character variable names unless they are established ones like <code>$i</code> for an index or <code>$s</code> for a generic string. <code>$a</code> and <code>$b</code> are reserved identifiers and should be avoided altogether."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1483182753, "post_id": 41407497, "comment_id": 70018394, "body": "Once you&#39;re done with your assignment, I suggest you post it over at <a href=\"https://codereview.stackexchange.com\">Code Review</a> and we&#39;ll tell you how you can improve it."}, {"owner": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483186317, "post_id": 41407497, "comment_id": 70019244, "body": "ok! which 1 will be much better instead of given/when?    @Borodin"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1483191671, "post_id": 41407497, "comment_id": 70020405, "body": "This is the post on CR: <a href=\"http://codereview.stackexchange.com/questions/151340/warnings-to-be-removed-in-perl\" title=\"warnings to be removed in perl\">codereview.stackexchange.com/questions/151340/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 0, "creation_date": 1483187098, "post_id": 41407770, "comment_id": 70019406, "body": "and how to display the category and brand details having the highest price"}, {"owner": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 0, "creation_date": 1483187135, "post_id": 41407770, "comment_id": 70019416, "body": "and how to display the category and brand details having the highest price            @simbabque"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 0, "creation_date": 1483187843, "post_id": 41407770, "comment_id": 70019569, "body": "@ayav that&#39;s more tricky. You need to find the maximum yourself and remember the rest of the data. Telling you how to do that will not help you learn."}, {"owner": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 0, "creation_date": 1483188311, "post_id": 41407770, "comment_id": 70019665, "body": "ok. and instead of given and when what can i use instead coz it shows some experimental errors. should i use switch and how to use that?    @simbabque"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 1, "creation_date": 1483188507, "post_id": 41407770, "comment_id": 70019697, "body": "As I said above, post the working code on <a href=\"https://codereview.stackexchange.com\">Code Review</a> and we will show you how to do it in a better way. You can turn off the warnings if you want, but it would be better to chose a different approach."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "edited": false, "score": 0, "creation_date": 1483191654, "post_id": 41407770, "comment_id": 70020398, "body": "@ayav I see. You can also link your accounts, you don&#39;t need to make a new one. The Stack Exchange network is one big thing. Stack Overflow and Code Review are just two of the sites there are. Include some more information over there and maybe also link back to this question."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1483182626, "creation_date": 1483182626, "answer_id": 41407770, "question_id": 41407497, "link": "https://stackoverflow.com/questions/41407497/manipulate-and-access-the-contents-of-a-hash-of-hashes/41407770#41407770", "title": "Manipulate and access the contents of a hash of hashes", "body": "<blockquote>\n  <p>When I try to do so it erases the preexisting items. I want the previous items appended with the newly added item.</p>\n</blockquote>\n\n<p>In this line you are overwriting the value of <code>$grocery{$c}</code> with a new hash reference.</p>\n\n<blockquote>\n<pre><code>$grocery{$c}={$b,$p};\n</code></pre>\n</blockquote>\n\n<p>Instead, you need to edit the existing hash reference.</p>\n\n<pre><code>$grocery{$c}-&gt;{$b} = $p;\n</code></pre>\n\n<p>That will add a new key <code>$b</code> to the existing data structure inside of <code>$grocery{$b}</code> and assign it the value of <code>$p</code>.</p>\n\n<p>Let's take a look at what that means. I've added this to the code after <code>%grocery</code> gets initialized.</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\%grocery;\n</code></pre>\n\n<p>We will get the following output. Hashes are not sorted, so the order might be different for you.</p>\n\n<pre><code> $VAR1 = {\n      'cleaner' =&gt; {\n                     'domex' =&gt; '75'\n                   },\n      'detergent' =&gt; {\n                       'surf' =&gt; '18'\n                     },\n      'soap' =&gt; {\n                  'enriche' =&gt; '11',\n                  'lux' =&gt; '13'\n                }\n    };\n</code></pre>\n\n<p>As you can see we have hashes inside of hashes. In Perl, references are used to construct a multi level data structure. You can see that from the curly braces <code>{}</code> in the output. The very first one after <code>$VAR1</code> is because I passed a <em>reference</em> of <code>$grocery</code> to <code>Dumper</code> by adding the backslash <code>\\</code> in front.</p>\n\n<p>So behind the value for <code>$grocery{\"cleaner\"}</code> is a hash reference <code>{ \"domex\" =&gt; 75 }</code>. To reach into that hash reference, you need to use the dereferencing operator <code>-&gt;</code>. You can then put a new key into that hash ref like I showed above.</p>\n\n<pre><code>#                  ##!!!!!!!!!!\n$grocery{\"cleaner\"}-&gt;{\"foobar\"} = 30;\n</code></pre>\n\n<p>I've marked the relevant parts above with a comment. You can read up on this stuff in these documents: <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, <a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a>, <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> and <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p>This issue is with the max value. To find the max of the values of the given hash. I am getting garbage value for that.</p>\n</blockquote>\n\n<p>This problem is also based on the fact that you don't yet understand references.</p>\n\n<blockquote>\n<pre><code> $highest = max values %grocery;\n</code></pre>\n</blockquote>\n\n<p>Your code will only take the values directly inside <code>%grocery</code>. If you scroll up and look at the Dumper output again, you'll see that there are three hash references inside of <code>%grocery</code>. Now if you do not dereference them, you just get their <em>scalar</em> representation. A scalar in Perl is a single value, like a number or a string. But for references it is their type and address. What looks like garbage is in fact the memory address of the three hash references in <code>%grocery</code> which has the highest number.</p>\n\n<p>Of course that's not what you want. You need to iterate both levels of your data structure, collect all values and then find the highest one.</p>\n\n<pre><code>my @all_prices;\nforeach my $category (keys %grocery) {\n    push @all_prices, values %{ $grocery{$category} };\n}\n$highest = max @all_prices;\nprint \"$highest\\n\";\n</code></pre>\n\n<p>I chose a very verbose approach to do that. It iterates over all categories in <code>%grocery</code> and then grabs all the <code>values</code> of the hash reference stored behind each of them. Those get added to an array, and in the end we can take the <code>max</code> of all of them from the array.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1483183243, "last_edit_date": 1483183243, "creation_date": 1483182922, "answer_id": 41407809, "question_id": 41407497, "link": "https://stackoverflow.com/questions/41407497/manipulate-and-access-the-contents-of-a-hash-of-hashes/41407809#41407809", "title": "Manipulate and access the contents of a hash of hashes", "body": "<p>You have the exact same code for the when a category already exists and when it does not. The line</p>\n\n<pre><code>$grocery{$c} = { $b, $p };\n</code></pre>\n\n<p><em>replaces</em> the entire hash for category <code>$c</code>. That's fine for new categories, but if the category is already there then it will throw away any existing information</p>\n\n<p>You need to write</p>\n\n<pre><code>$grocery{$c}{$b} = $p;\n</code></pre>\n\n<p>And please add a <em>lot more</em> whitespace around operators, separating the elements of lists, and delineating related sequences of statements</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>With regard to finding the maximum price, your line</p>\n\n<pre><code>$highest = max values %grocery;\n</code></pre>\n\n<p>is trying to calculate the maximum of the <em>hash references</em> corresponding to the categories</p>\n\n<p>Since there are two levels of hash here, you need</p>\n\n<pre><code>$highest = max map { values %$_ } values %grocery;\n</code></pre>\n\n<p>but that may not be the way you're expected to do it. If in doubt then you should use two nested <code>for</code> loops</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1483188580, "post_id": 41408405, "comment_id": 70019713, "body": "How is that helpful? Please explain your code and why you think it answers the question."}], "tags": [], "owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "is_accepted": false, "score": -3, "last_activity_date": 1483188333, "creation_date": 1483188333, "answer_id": 41408405, "question_id": 41407497, "link": "https://stackoverflow.com/questions/41407497/manipulate-and-access-the-contents-of-a-hash-of-hashes/41408405#41408405", "title": "Manipulate and access the contents of a hash of hashes", "body": "<pre><code>use List::Util qw(max);\nuse Data::Dumper;\n\nmy $grocery =\n{\n    \"soap\"      =&gt; { \"lux\"  =&gt; 13.00, \"enriche\" =&gt; 11.00 },\n    \"detergent\" =&gt; { \"surf\" =&gt; 18.00 },\n    \"cleaner\"   =&gt; { \"domex\"=&gt; 75.00 }\n};\n\ndisplay(\"unadulterated list\");\nprint Dumper $grocery;\n\ndisplay(\"new silky soap\");\n$grocery-&gt;{\"soap\"}-&gt;{\"silky\"} = 12.50;\nprint Dumper $grocery;\n\ndisplay(\"new mega cleaner\");\n$grocery-&gt;{\"cleaner\"}-&gt;{\"megaclean\"} = 99.99;\nprint Dumper $grocery;\n\ndisplay(\"new exfoliant soap\");\n$grocery-&gt;{\"soap\"}-&gt;{\"exfoliant\"} = 23.75;\nprint Dumper $grocery;\n\ndisplay(\"lux soap gets discounted\");\n$grocery-&gt;{\"soap\"}-&gt;{\"lux\"} = 9.00;\nprint Dumper $grocery;\n\ndisplay(\"domex cleaner is discontinued\");\ndelete $grocery-&gt;{\"cleaner\"}-&gt;{\"domex\"};\nprint Dumper $grocery;\n\ndisplay(\"most costly soap product\");\nmy $max = max values $grocery-&gt;{soap};\nprint $max, \"\\n\\n\";\n\nsub display\n{\n    printf(\"\\n%s\\n%s\\n%s\\n\\n\", '-' x 45, shift, '-' x 45 );\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7174542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/682ebf17d8d454c3ce63c2651702d389?s=128&d=identicon&r=PG&f=1", "display_name": "ayav", "link": "https://stackoverflow.com/users/7174542/ayav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 41407770, "answer_count": 3, "score": -1, "last_activity_date": 1483201402, "creation_date": 1483180212, "last_edit_date": 1483201402, "question_id": 41407497, "link": "https://stackoverflow.com/questions/41407497/manipulate-and-access-the-contents-of-a-hash-of-hashes", "title": "Manipulate and access the contents of a hash of hashes", "body": "<p>I am having trouble with writing a Perl script.</p>\n\n<p>This is the task:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u2PYZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u2PYZ.jpg\" alt=\"question for perl script\"></a></p>\n\n<p>My code works fine but has two issues. </p>\n\n<ol>\n<li><p>I want to add an element to the hash <code>%grocery</code>, which contains category, brand and price. When adding the item, first the system will ask for the category.</p>\n\n<p>If the category does not exist then it will add a new category, brand and price from the user, but if the category already exists then it will take the brand name and price from the user and append it to the existing category.</p>\n\n<p>When I try to do so it erases the preexisting items. I want the previous items appended with the newly added item.</p></li>\n<li><p>This issue is with the max value. To find the maximum price in the given hash. I am getting garbage value for that.</p>\n\n<p>What am I doing wrong?</p></li>\n</ol>\n\n<p>Here is my full code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw(max);\nuse feature \"switch\";\n\nmy $b;\nmy $c;\nmy $p;\nmy $highest;\n\nprint \"____________________________STORE THE ITEM_____________________\\n\";\n\nmy %grocery = (\n    \"soap\"      =&gt; { \"lux\"   =&gt; 13.00, \"enriche\" =&gt; 11.00 },\n    \"detergent\" =&gt; { \"surf\"  =&gt; 18.00 },\n    \"cleaner\"   =&gt; { \"domex\" =&gt; 75.00 }\n);\n\nforeach my $c ( keys %grocery ) {\n    print \"\\n\";\n    print \"$c\\n\";\n    foreach my $b ( keys %{ $grocery{$c} } ) {\n        print \"$b:$grocery{$c}{$b}\\n\";\n    }\n}\n\nmy $ch;\n\ndo {\n    print \"________________MENU_________________\\n\";\n    print \"1.ADD ITEM\\n\";\n    print \"2.SEARCH\\n\";\n    print \"3.DISPLAY\\n\";\n    print \"4.FIND THE MAX PRICE\\n\";\n    print \"5.EXIT\\n\";\n    print \"enter your choice \\n\";\n    $ch = &lt;STDIN&gt;;\n    chomp( $ch );\n\n    given ( $ch ) {\n\n        when ( 1 ) {\n            print \"Enter the category you want to add\";\n            $c = &lt;STDIN&gt;;\n            chomp( $c );\n\n            if ( exists( $grocery{$c} ) ) {\n\n                print \"Enter brand\\n\";\n                $b = &lt;STDIN&gt;;\n                chomp( $b );\n\n                print \"Enter price\\n\";\n                $p = &lt;STDIN&gt;;\n                chomp( $p );\n\n                $grocery{$c} = { $b, $p };\n\n                print \"\\n\";\n            }\n            else {\n\n                print \"Enter brand\\n\";\n                $b = &lt;STDIN&gt;;\n                chomp( $b );\n\n                print \"Enter price\\n\";\n                $p = &lt;STDIN&gt;;\n                chomp( $p );\n\n                $grocery{$c} = { $b, $p };\n\n                print \"\\n\";\n            }\n        }\n\n        when ( 2 ) {\n\n            print \"Enter the item that you want to search\\n\";\n            $c = &lt;STDIN&gt;;\n            chomp( $c );\n\n            if ( exists( $grocery{$c} ) ) {\n\n                print \"category $c exists\\n\\n\";\n                print \"Enter brand\\n\";\n                $b = &lt;STDIN&gt;;\n                chomp( $b );\n\n                if ( exists( $grocery{$c}{$b} ) ) {\n                    print \"brand $b of category $c exists\\n\\n\";\n                    print \"-----$c-----\\n\";\n                    print \"$b: $grocery{$c}{$b}\\n\";\n                }\n                else {\n                    print \"brand $b does not exists\\n\";\n                }\n            }\n            else {\n                print \"category $c does not exists\\n\";\n            }\n        }\n\n        when ( 3 ) {\n\n            foreach $c ( keys %grocery ) {\n\n                print \"$c:\\n\";\n\n                foreach $b ( keys %{ $grocery{$c} } ) {\n                    print \"$b:$grocery{$c}{$b}\\n\";\n                }\n            }\n        }\n\n        when ( 4 ) {\n\n            print \"\\n________________PRINT HIGHEST PRICED PRODUCT____________________\\n\";\n            $highest = max values %grocery;\n            print \"$highest\\n\";\n        }\n    }\n\n} while ( $ch != 5 );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1483181225, "post_id": 41407464, "comment_id": 70018085, "body": "See also <a href=\"http://stackoverflow.com/q/4587539/2173773\">How to get a regex to start from the beginning of a string</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1483183488, "post_id": 41407464, "comment_id": 70018536, "body": "It doesn&#39;t make sense to use the global <code>&#47;g</code> modifier here. You need to check whether one string contains another, not to find all occurrences of one in another. And <code>if</code> statements aren&#39;t loops."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1483344741, "post_id": 41407612, "comment_id": 70051979, "body": "Awesome explanation. Thanks."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1483187355, "last_edit_date": 1592644375, "creation_date": 1483181046, "answer_id": 41407612, "question_id": 41407464, "link": "https://stackoverflow.com/questions/41407464/string-cant-find-the-value-in-a-same-line/41407612#41407612", "title": "String can&#39;t find the value in a same line", "body": "<p>From <a href=\"http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl\" rel=\"nofollow noreferrer\"><code>perldoc perlretut</code></a>:</p>\n<blockquote>\n<p>Global matching</p>\n<p>The final two modifiers we will discuss here, //g and //c , concern multiple matches. The modifier //g stands for global matching and allows the matching operator to match within a string as many times as possible. In scalar context, successive invocations against a string will have //g jump from match to match, keeping track of position in the string as it goes along. You can get or set the position with the pos() function.</p>\n</blockquote>\n<p>In the first test, you're using the global flag, then the position of cursor is memorized, so the second match doesn't find <code>test</code> because it is before <code>paragraph</code>.</p>\n<p>You have to remove the global flag from the first match.</p>\n<pre><code>my $str = &quot;This is the test and new paragraph...\\n&quot;;\n\nif ($str =~ /paragraph/i) {\n    if ($str =~ /test/i) {\n        print &quot;Ok...\\n&quot;;\n    } else {\n        print &quot;Not Ok...\\n&quot;;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1483344712, "post_id": 41410220, "comment_id": 70051971, "body": "Awesome explanation. Thanks."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1483203255, "creation_date": 1483203255, "answer_id": 41410220, "question_id": 41407464, "link": "https://stackoverflow.com/questions/41407464/string-cant-find-the-value-in-a-same-line/41410220#41410220", "title": "String can&#39;t find the value in a same line", "body": "<p><code>/g</code> is used for finding all matches of a pattern. It doesn't make sense to alter the pattern between matches. Generally speaking, <code>if (/.../g)</code> makes no sense and should be replaced with <code>if (/.../)</code>.</p>\n\n<p>There are advanced uses for <code>if (/\\G.../gc)</code>, but that's different. <code>if (/.../g)</code> only makes sense if you're unrolling a while loop. (e.g. <code>while (1) { ...; last if !/.../g; ... }</code>).</p>\n\n<hr>\n\n<p>Here's what's happening in this specific circumstance:</p>\n\n<p>Because you signaled you wanted to find all matches (by using <code>/g</code>), the position at which to start matching is set to the end of the match (denoted by <code>^</code> below).</p>\n\n<pre><code>This is the test and new paragraph...\n                         ---------^\n</code></pre>\n\n<p>You can see this using <code>pos</code>.</p>\n\n<pre><code>$ perl -e'\n    my $str = \"This is the test and new paragraph...\";\n    if ($str =~ /paragraph/g) {\n       CORE::say pos($str) // 0;\n       if ($str =~ /test/g) {\n          CORE::say pos($str) // 0;\n       }\n    }\n'\n34\n</code></pre>\n\n<p>The subsequent <code>m/test/gi</code> doesn't match because <code>test</code> does not appear at or after the position at which the last match ended.</p>\n\n<p>The solution is to simply remove the <code>g</code> modifier from you match operators.</p>\n\n<pre><code>$ perl -e'\n    my $str = \"This is the test and new paragraph...\";\n    if ($str =~ /paragraph/) {\n       CORE::say pos($str) // 0;\n       if ($str =~ /test/) {\n          CORE::say pos($str) // 0;\n       }\n    }\n'\n0\n0\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41410220, "answer_count": 2, "score": 0, "last_activity_date": 1483203255, "creation_date": 1483179941, "question_id": 41407464, "link": "https://stackoverflow.com/questions/41407464/string-cant-find-the-value-in-a-same-line", "title": "String can&#39;t find the value in a same line", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $str = \"This is the test and new paragraph...\\n\";\n\nif($str=~m/paragraph/gi) # First Loop\n{\n    if($str=~m/test/gi) # Second Loop \n    {\n        print \"Ok...\\n\";\n    }\n    else\n    {\n        print \"Not Ok...\\n\";\n    }\n}\n\nif($str=~m/test/i) #it doesn't prints the value\n\nOutput is: Not Ok...\n\nif($str=~m/test/gi) #it prints the value\n\nOutput is: Ok...\n</code></pre>\n\n<p>In above case if the string found the <code>paragraph</code> value and the second loop couldn't find the <code>test</code> value. However in the second loop if we inserted the global <code>g</code> it can.</p>\n\n<p>Could you please someone can explain me whats happening. Thanks in advance.</p>\n"}, {"tags": ["bash", "perl", "shell", "replace", "substitution"], "comments": [{"owner": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 1, "creation_date": 1483155322, "post_id": 41405187, "comment_id": 70013364, "body": "Change <code>file1</code> to <code>*.sh</code>? Your question is really unclear."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1483155324, "post_id": 41405187, "comment_id": 70013365, "body": "Surely <code>perl -pi -e &#39;s&#47;path1&#47;path2&#47;g&#39; *.sh</code> will do the trick"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483155527, "post_id": 41405187, "comment_id": 70013390, "body": "@WilliamPursell That works? ...I&#39;m an idiot"}, {"owner": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1483155851, "post_id": 41405187, "comment_id": 70013450, "body": "@WilliamPursell As long as you don&#39;t have a space in your file names... The <code>find</code> answer below <i>handles</i> that curse of modernity."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 3, "creation_date": 1483156176, "post_id": 41405187, "comment_id": 70013510, "body": "@Elliott Frisch The file glob handles whitespace just fine!"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1483156241, "post_id": 41405187, "comment_id": 70013524, "body": "How would one use this perl command for actual pathnames though? If <code>pathname1</code> equals <code>&#47;usr&#47;bin&#47;local&#47;path1</code> and <code>pathname2</code> is <code>&#47;gpfs&#47;random&#47;user&#47;group&#47;file&#47;path2</code>, it&#39;s a bit confusing to me how to do this correctly...<code>perl -pi -e &#39;s&#47;&quot;&#47;usr&#47;bin&#47;local&#47;path1&quot;&#47;&quot;&#47;gpfs&#47;random&#47;user&#47;group&#47;file&#47;path&zwnj;&#8203;2&quot;&#47;g&#39; file1</code> fails of course"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 3, "creation_date": 1483156370, "post_id": 41405187, "comment_id": 70013541, "body": "Use a different delimiter for the s command.  eg <code>perl -pi -e &#39;s@&#47;usr&#47;bin&#47;path1@&#47;usr&#47;bin&#47;path2@g</code> *.sh`"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483202568, "post_id": 41405187, "comment_id": 70023301, "body": "@ShanZhengYang: <i>&quot;That works? ...I&#39;m an idiot&quot;</i> You really should have <i>tried</i> something instead of running straight to SO for help. You would have learned a lot more."}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1483208679, "post_id": 41405187, "comment_id": 70024834, "body": "@Bordon Incorrect. I learn quite a bit from this exchange."}], "answers": [{"comments": [{"owner": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1483155467, "post_id": 41405203, "comment_id": 70013382, "body": "You should specify what you mean by <code>&lt;file_pattern&gt;</code> (I assume <code>-name &quot;*.sh&quot;</code>, but I think <code>&lt;perl_command&gt;</code> is pretty self explanatory)."}, {"owner": {"reputation": 4315, "user_id": 1768702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ced4cc517f215af04800f05f52eb310b?s=128&d=identicon&r=PG", "display_name": "yelsayed", "link": "https://stackoverflow.com/users/1768702/yelsayed"}, "reply_to_user": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1483155606, "post_id": 41405203, "comment_id": 70013408, "body": "I think it&#39;s kind of orthogonal to the question, but sure. Fixed."}, {"owner": {"reputation": 182823, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1483155763, "post_id": 41405203, "comment_id": 70013434, "body": "I was thinking another note at the end like, <code>&lt;file_pattern&gt;</code> might be <code>-name &quot;*.sh&quot;</code> or <code>-type &#39;f&#39;</code> or some kind of combination to indicate the general usage thereof. But putting it inline works too."}], "tags": [], "owner": {"reputation": 4315, "user_id": 1768702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ced4cc517f215af04800f05f52eb310b?s=128&d=identicon&r=PG", "display_name": "yelsayed", "link": "https://stackoverflow.com/users/1768702/yelsayed"}, "is_accepted": false, "score": 2, "last_activity_date": 1483155581, "last_edit_date": 1483155581, "creation_date": 1483155333, "answer_id": 41405203, "question_id": 41405187, "link": "https://stackoverflow.com/questions/41405187/how-to-execute-a-string-substitution-on-multiple-files/41405203#41405203", "title": "How to execute a string substitution on multiple files?", "body": "<p>You can first run <code>find</code> to list the files, then run <code>perl</code> or <code>sed</code> or whatever on them:</p>\n\n<pre><code>find . -name '*.sh' -exec &lt;perl_command&gt; {} \\;\n</code></pre>\n\n<p>Note the <code>{} \\;</code>, which means run this for each of the <code>find</code> outputs.</p>\n"}, {"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": true, "score": 1, "last_activity_date": 1483156452, "creation_date": 1483156452, "answer_id": 41405292, "question_id": 41405187, "link": "https://stackoverflow.com/questions/41405187/how-to-execute-a-string-substitution-on-multiple-files/41405292#41405292", "title": "How to execute a string substitution on multiple files?", "body": "<p>Just use a file glob:</p>\n\n<pre><code>perl -pi -e 's@pathname1@pathname2@g' *.sh\n</code></pre>\n\n<p>This will deal with pathological filenames that contain whitespace just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1526065841, "last_edit_date": 1526065841, "creation_date": 1483156466, "answer_id": 41405294, "question_id": 41405187, "link": "https://stackoverflow.com/questions/41405187/how-to-execute-a-string-substitution-on-multiple-files/41405294#41405294", "title": "How to execute a string substitution on multiple files?", "body": "<p>Just list all filenames, and they are all processed line by line</p>\n\n<pre><code>perl -pi -e 's{pathname1}{pathname2}g' *.sh\n</code></pre>\n\n<p>where <code>{}</code> are used for delimiters so <code>/</code> in path need not be escaped.</p>\n\n<p>This assumes that the <code>*.sh</code> specifies the files you need.</p>\n\n<hr>\n\n<p>We can see that this is the case by running</p>\n\n<pre><code>perl -MO=Deparse -ne '' file1 file2\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>LINE: while (defined($_ = &lt;ARGV&gt;)) {\n    '???';\n}\n-e syntax OK\n</code></pre>\n\n<p>This is the code equivalent to the one-liner, shown by the courtesy of <code>-MO=Deparse</code>. It shows us that the loop is set up over input, which is provided by <code>&lt;ARGV&gt;</code>. </p>\n\n<p>So what is <code>&lt;ARGV&gt;</code> here?  From <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a></p>\n\n<blockquote>\n  <p>The null filehandle <code>&lt;&gt;</code> is special: ...  Input from <code>&lt;&gt;</code> comes either from standard input, or from each file listed on the command line. </p>\n</blockquote>\n\n<p>where</p>\n\n<blockquote>\n  <p><code>&lt;&gt;</code> is just a synonym for <code>&lt;ARGV&gt;</code></p>\n</blockquote>\n\n<p>So the input is going to be all lines from all submitted files.</p>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 41405292, "answer_count": 3, "score": 0, "last_activity_date": 1526065841, "creation_date": 1483155180, "last_edit_date": 1483156492, "question_id": 41405187, "link": "https://stackoverflow.com/questions/41405187/how-to-execute-a-string-substitution-on-multiple-files", "title": "How to execute a string substitution on multiple files?", "body": "<p>I have dozens of bash scripts in a certain location (<code>/subdirectory1</code>) with the incorrect pathname (<code>pathname1</code>) within the file. I would like to somehow replace this pathname with <code>pathname2</code> for all of the bash scripts <code>*.sh</code> within that subdirectory. </p>\n\n<p>Is there a standard way to do this? </p>\n\n<p>In perl, if I was working with a single file <code>file1</code>, I would execute:</p>\n\n<pre><code>perl -pi -e 's/pathname1/pathname2/g' file1\n</code></pre>\n\n<p>How would one accomplish this for all files, <code>*.sh</code>? </p>\n\n<p>It doesn't have to be in perl, but this is the one way that comes to mind. I suspect there's also a way to do this with other shell scripts and other languages---I will happily edit this question to narrow down the options.</p>\n"}, {"tags": ["html", "perl", "progressive"], "comments": [{"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1483155187, "post_id": 41405100, "comment_id": 70013350, "body": "Try adding <code>Transfer-Encoding: chunked</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Transfer-Encoding\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/Headers/&hellip;</a>"}, {"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "reply_to_user": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1483176619, "post_id": 41405100, "comment_id": 70017130, "body": "Thanks.  However, it didn&#39;t work for me.  I tried a variant of what I found in <a href=\"http://stackoverflow.com/questions/17153009/chunked-transfer-encoding-browser-experience\" title=\"chunked transfer encoding browser experience\">stackoverflow.com/questions/17153009/&hellip;</a> with a sleep between the 2 chunks, and STDOUT buffering disabled, and it still waited till the entire document was received."}, {"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "reply_to_user": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1483178997, "post_id": 41405100, "comment_id": 70017611, "body": "Something is very wrong.   The docs say the length is hex, and it will only work with hex, until you get to a 26 byte string when the hex length goes from 19, which works for a 25 byte string, to 1a (or 1A).  Then it craps out with &#39;ERR_INVALID_CHUNKED_ENCODING&#39;.  sigh."}], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "edited": false, "score": 2, "creation_date": 1483183657, "post_id": 41407450, "comment_id": 70018581, "body": "Thanks, but I already know about Apache timeouts and they aren&#39;t relevant in this case.  This example should be a few seconds.    The examples I am using for illustration are a maximum of 10 seconds with the sleeps I am using in order to witness whether immediate rendering is working or not.  The connection is staying open - it waits until the entire document is complete before displaying anything.  I have written CGI scripts in the past, with Apache timeouts set to 5 minutes or more, and everything was fine and I had progressive rendering.  Something has changed and I don&#39;t know what."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1483179794, "creation_date": 1483179794, "answer_id": 41407450, "question_id": 41405100, "link": "https://stackoverflow.com/questions/41405100/unable-to-do-progressive-rendering/41407450#41407450", "title": "unable to do progressive rendering", "body": "<p>You also need your webserver to keep the CGI script running long enough. A default Apache has a 1 minute <a href=\"https://httpd.apache.org/docs/2.4/mod/core.html#timeout\" rel=\"nofollow noreferrer\">timeout</a>. </p>\n\n<p>You already turned off buffering with <code>$_</code>, which is fine. There is no more control you can have from the script. The connection needs to stay open, even if you want to do chuncked transfer, which isn't really needed in your example.</p>\n\n<p>It's the server who shuts it down after a while. And once the connection is gone the webserver doesn't send the remainder of your response over the wire because that connection is gone and the CGI handle is detached, so nothing is reading your output to pass it along.</p>\n\n<p>Conclusion: <strong>Set the timeout to a higher value.</strong> </p>\n\n<p>Anecdote: I used to work on a system with a timeout setting of about an hour, where a CGI based back office application did large DB queries over a huge MySQL database and stuff took long. People who worked with that tool typically started it and went to grab coffee or have lunch.</p>\n"}, {"comments": [{"owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "edited": false, "score": 0, "creation_date": 1483272741, "post_id": 41411502, "comment_id": 70034787, "body": "That wasn&#39;t it, but it set me on the right track to find the issue, which I detailed in a followup answer.  So I&#39;ll credit you for the solution.  Thanks!!"}], "tags": [], "owner": {"reputation": 336, "user_id": 3808623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4de1e889b7b1d5bde4aa4bc089e74c?s=128&d=identicon&r=PG", "display_name": "ccm", "link": "https://stackoverflow.com/users/3808623/ccm"}, "is_accepted": true, "score": 2, "last_activity_date": 1483216051, "creation_date": 1483216051, "answer_id": 41411502, "question_id": 41405100, "link": "https://stackoverflow.com/questions/41405100/unable-to-do-progressive-rendering/41411502#41411502", "title": "unable to do progressive rendering", "body": "<p>Your web server is likely buffering the response. <code>$| = 1;</code> sets up <code>STDOUT</code> to be autoflushed each time you <code>print</code>, eliminating the effects of the buffering in your <em>script</em>, but you also need to consider buffering that's happening in your <em>web server</em>.</p>\n\n<p>There's no command or character sequence to flush the buffer, but you could simply just send a sufficient amount of data to fill the buffer so that it flushes on its own.</p>\n\n<p>Just send inconsequential content, like a bunch of spaces:</p>\n\n<pre><code>print \" \" x 1024 * 8;\n</code></pre>\n\n<p>How much data you need to send depends on how large the buffers are configured to be in your web server. Typical buffer sizes are 4KiB or 8KiB, but be aware that if your server gzips your script's response then you will need to print considerably more (perhaps around 8MiB of space characters) in order to fill the server's buffers because the buffers will be filled with the <em>compressed</em> response.</p>\n\n<p>Of course, you could also just disable the buffering in your server. How you do that depends on the web server. For nginx, take a look at <a href=\"https://www.nginx.com/resources/wiki/start/topics/examples/x-accel/#x-accel-buffering\" rel=\"nofollow noreferrer\">X-Accel-Buffering</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1483272782, "last_edit_date": 1495539958, "creation_date": 1483271235, "answer_id": 41415209, "question_id": 41405100, "link": "https://stackoverflow.com/questions/41405100/unable-to-do-progressive-rendering/41415209#41415209", "title": "unable to do progressive rendering", "body": "<p>The response from ccm didn't work for me, but it set me on the right track to find the problem.  The solution was to add the following to my Apache config:</p>\n\n<pre><code>SetEnvIfNoCase Request_URI \\.cgi$ no-gzip dont-vary\n</code></pre>\n\n<p>which I found from <a href=\"https://stackoverflow.com/questions/15028587/prevent-output-buffering-with-php-and-apache\">Prevent output buffering with PHP and Apache</a></p>\n\n<p>While trying out what @ccm suggested, it appears the buffer size is 1K, which is fine with me.</p>\n\n<p>Thanks a huge amount to @ccm for setting me on the right path!</p>\n"}], "owner": {"reputation": 247, "user_id": 2693133, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8143ebd67cdfd002add21f0d711498f5?s=128&d=identicon&r=PG", "display_name": "RJ White", "link": "https://stackoverflow.com/users/2693133/rj-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 41411502, "answer_count": 3, "score": 1, "last_activity_date": 1483272782, "creation_date": 1483154021, "question_id": 41405100, "link": "https://stackoverflow.com/questions/41405100/unable-to-do-progressive-rendering", "title": "unable to do progressive rendering", "body": "<p>Years ago I wrote CGI programs at previous jobs that relied on progressive rendering, since those CGI programs could take a long time (minutes) to run, producing a line of output approx every second.  I find that today, I cannot get progressive rendering to occur even with the simplest example.</p>\n\n<p>I've seen a lot of suggestions on this topic about where to put CSS, scripts, etc.  However, the trivial example below has none of that.</p>\n\n<p>I don't see anywhere where browsers have an option to affect progressive rendering.  I have tried this on several systems/devices with several browsers (chrome, firefox, opera), all with the same result.</p>\n\n<p>Below is a trivial example that I expect to produce some output every 2 seconds, but instead it renders when the whole document is complete.\nAm I missing something obvious?</p>\n\n<pre><code>#!/usr/bin/env perl\n\nselect(STDOUT); $| = 1;     # don't buffer stdout\n\nprint \"Content-Type: text/html\\; charset=ISO-8859-1\\n\\n\" ;\nprint \"&lt;html&gt; &lt;head&gt; &lt;title&gt; Testing &lt;/title&gt; &lt;/head&gt; &lt;body&gt;\\n\" ;\n\nmy $message = \"&lt;code&gt;\" .\n    \"Why doesn't this render immediately? &lt;br&gt;\\n\" x 5 .\n    \"&lt;/code&gt;\\n\" ;\n\nfor ( my $i=0 ; $i &lt; 5 ; $i++ ) {\n    print \"$message\\n\" ;\n    sleep(2) ;\n}\nprint \"&lt;/body&gt;&lt;/html&gt;\\n\" ;\n</code></pre>\n"}, {"tags": ["mysql", "perl", "insert", "blob"], "comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 3, "creation_date": 1483128196, "post_id": 41401781, "comment_id": 70006396, "body": "index is a reserved word. <a href=\"https://dev.mysql.com/doc/refman/5.5/en/keywords.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.5/en/keywords.html</a>"}, {"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1483128207, "post_id": 41401781, "comment_id": 70006403, "body": "You can&#39;t call a column index as its a reserved word. It works in the create table as its quoted. Either always quote it or better still pick a word which isn&#39;t reserved"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1483128215, "post_id": 41401781, "comment_id": 70006407, "body": "<code>index</code> is a mysql keyword.  It&#39;s best not to use keywords as field names, but if you do, you need to escape them like you did in the create table statement."}, {"owner": {"reputation": 89, "user_id": 5666250, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/63b66f99544e24e30391abcf4f1226da?s=128&d=identicon&r=PG&f=1", "display_name": "Tim M", "link": "https://stackoverflow.com/users/5666250/tim-m"}, "edited": false, "score": 0, "creation_date": 1483128674, "post_id": 41401781, "comment_id": 70006548, "body": "Works! Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 5, "last_activity_date": 1483129315, "creation_date": 1483129315, "answer_id": 41402233, "question_id": 41401781, "link": "https://stackoverflow.com/questions/41401781/why-do-i-get-a-sql-syntax-error-when-i-try-to-insert-values-into-a-table-with-a/41402233#41402233", "title": "Why do I get a SQL syntax error when I try to insert values into a table with a column named &quot;index&quot;?", "body": "<p>You are using the reserved word <code>index</code> in your <code>INSERT INTO</code>-statement. The use of reserved words as identifiers is <a href=\"https://dev.mysql.com/doc/refman/5.5/en/keywords.html\" rel=\"nofollow noreferrer\">only permitted</a> with quotes as described in <a href=\"https://dev.mysql.com/doc/refman/5.5/en/identifiers.html\" rel=\"nofollow noreferrer\">Section 9.2, \u201cSchema Object Names\u201d</a>. </p>\n\n<p>Change <code>index</code> to <code>`index`</code> in your <code>INSERT INTO</code> statement.</p>\n\n<p>I do not recommend to use reserved words in your table.</p>\n"}], "owner": {"reputation": 89, "user_id": 5666250, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/63b66f99544e24e30391abcf4f1226da?s=128&d=identicon&r=PG&f=1", "display_name": "Tim M", "link": "https://stackoverflow.com/users/5666250/tim-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483129479, "creation_date": 1483126583, "last_edit_date": 1483129479, "question_id": 41401781, "link": "https://stackoverflow.com/questions/41401781/why-do-i-get-a-sql-syntax-error-when-i-try-to-insert-values-into-a-table-with-a", "title": "Why do I get a SQL syntax error when I try to insert values into a table with a column named &quot;index&quot;?", "body": "<p>I am attempting to insert a binary file (JPG image) in to a <strong>MySQL</strong> database using perl</p>\n\n<p>Table:</p>\n\n<pre><code>CREATE TABLE `images` (\n    `sku` CHAR(12) NOT NULL,\n    `index` TINYINT(1) UNSIGNED NOT NULL,\n    `main` BLOB NULL\n)\nCOLLATE='utf8_general_ci'\nENGINE=InnoDB\nROW_FORMAT=DYNAMIC\n;\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>$dbh_local = DBI-&gt;connect(\"DBI:mysql:database=db;host=127.0.0.1;mysql_enable_utf8=1\", \"XXX\", \"XXX\", {'RaiseError' =&gt; 1, 'mysql_auto_reconnect' =&gt; 1});\n\nopen IMAGE, \"c:/image.jpg\" or die $!;\n    while(read IMAGE, $buff, 1024) {\n        $image .= $buff;\n    }\nclose(IMAGE);\n\nmy $sku = 'VM1000032999';\nmy $index = 1;\n\n$query = \"INSERT INTO images (sku,index,main) values (?,?,?)\";\n$sth = $dbh_local-&gt;prepare($query);\n$sth-&gt;bind_param(1,$sku);\n$sth-&gt;bind_param(2,$index);\n$sth-&gt;bind_param(3,$image, DBI::SQL_BLOB);\n$sth-&gt;execute();        \n$sth-&gt;finish();\n</code></pre>\n\n<p>However I am getting this error:</p>\n\n<pre><code>\"DBD::mysql::st execute failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index,main) values ('VM1000032999','1','????\\0\u25baJFIF\\0\u263a\u263a\u263a\\0H\\0H\\0\\0??\\0?\\0\u2660\u2666\u2663\u2660\u2663\u2666\u2660' at line 1 at ....\"\n</code></pre>\n\n<p>Any ideas? I have tried several variations, all giving the same error.</p>\n"}, {"tags": ["perl", "reference", "autovivification"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 0, "creation_date": 1483122540, "post_id": 41400902, "comment_id": 70003983, "body": "Well, what is the error message saying?  <code>Can&#39;t use an undefined value as a HASH reference...</code> What does that mean? What does that tell you about <code>$headers</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1483123187, "post_id": 41400902, "comment_id": 70004240, "body": "Is that code complete?  If so, <code>$headers</code> has <code>undef</code> as its value and you can&#39;t dereference the &#39;hash&#39; that it doesn&#39;t reference.  You should be using <code>use strict; use warnings;</code> and <code>my $headers;</code> at minimum.  You could consider <code>my $headers = { };</code> too.  What did your searching with a term such as &#39;perl autovivification&#39; return?  I used Google and got a number of useful looking articles to follow \u2014 Wikipedia, Perl Maven, Perl Monks.  Of those, <a href=\"http://www.perlmonks.org/?node_id=691557\" rel=\"nofollow noreferrer\">Explaining Autovivification</a> seems most apposite."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1483123227, "post_id": 41400902, "comment_id": 70004270, "body": "That doesn&#39;t produce that error. Could you provide a complete example?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483123364, "post_id": 41400902, "comment_id": 70004345, "body": "The <code>%$headers</code> has nothing to do with autovivification.  It merely attempts to <i>dereference</i> the scalar variable <code>$headers</code>, into a hash. With <code>use strict</code> in effect it prints that message, but without it it only complains about <i>uninitialized value</i>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1483128905, "post_id": 41400902, "comment_id": 70006626, "body": "I <i>think</i> you&#39;re really asking why <code>my $h; $h-&gt;{foo}</code> works and <code>my $h; %$h</code> doesn&#39;t. I like <a href=\"http://stackoverflow.com/questions/1643717/why-does-an-undef-value-become-a-valid-array-reference-in-perl#comment1514904_1643894\">ysth&#39;s explanation</a>: &quot;in general, things that are only reading from a dereference won&#39;t autovivify, while things that may modify what&#39;s dereferenced do. The for loop is an example of something that may modify (since $el is aliased into the array and the array may be changed through it). This is only a loose rule, though; there are some rough edges.&quot;"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483135355, "post_id": 41400902, "comment_id": 70008960, "body": "@ThisSuitIsBlackNot your commets are very usefull. I will award you on some your answers on last day of hats celebration! I can not award on comments ("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483137861, "post_id": 41400902, "comment_id": 70009762, "body": "Thanks for the update, this explains it (see my answer)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483202344, "post_id": 41400902, "comment_id": 70023235, "body": "@EugenKonkov Please don&#39;t do that, I&#39;d rather earn my imaginary internet points on merit alone :) This was a really interesting question, thanks for posting it!"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483213794, "post_id": 41400902, "comment_id": 70026039, "body": "@ThisSuitIsBlackNot: In any case I am planning to earn my points too: the <code>Philantropist</code> hat. So you will be my victim :D"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1483130269, "post_id": 41401301, "comment_id": 70007133, "body": "&quot;<code>%$hash</code> absolutely does autovivify when passed to a function (user or builtin)&quot; True for some operators (e.g. <code>keys</code>), but not others (e.g. <code>length</code>)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 5, "last_activity_date": 1483133870, "last_edit_date": 1483133870, "creation_date": 1483124294, "answer_id": 41401301, "question_id": 41400902, "link": "https://stackoverflow.com/questions/41400902/why-does-foo-bar-autovivify-but-foo-doesnt/41401301#41401301", "title": "Why does $foo-&gt;{bar} autovivify but %$foo doesn&#39;t?", "body": "<p><code>%$hash</code> absolutely does autovivify when passed to a sub.</p>\n\n<pre><code>$ perl -Mstrict -wE'my $foo; say $foo // \"undef\"'\nundef\n\n$ perl -Mstrict -wE'sub f { } my $bar; f(%$bar); say $bar // \"undef\"'\nHASH(0x10b50e0)\n</code></pre>\n\n<p>The error message comes from something else going on in <code>some_sub</code>, perhaps an improper assignment from <code>@_</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1483124618, "post_id": 41401306, "comment_id": 70004879, "body": "Actually, <code>%$foo</code> <i>does</i> trigger autovivification, <i>if</i> used in an l-value context: <code>perl -Mstrict -MDevel::Peek -wE&#39;my $h; 1 for %$h; Dump $h&#39;</code> (the <code>SV = PVHV</code> indicates that it&#39;s a hashref)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483130187, "post_id": 41401306, "comment_id": 70007109, "body": "@ThisSuitIsBlackNot At the risk of bothering you -- your <i>if</i> above is critical.  Of course it comes up when assigned to, and it does when queried for keys as in mob&#39;s answer (even without a debugger).  But I don&#39;t see that it actually gets to that when it is only dereferenced into a hash. Updated."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483130676, "post_id": 41401306, "comment_id": 70007278, "body": "The autovivification rules aren&#39;t really consistent (e.g. it doesn&#39;t make sense that <code>exists</code> would autovivify, but it does), but the best explanation I&#39;ve seen is that in general, autovivification kicks in when the dereferenced thing could be modified (e.g. in an assignment, a <code>foreach</code> loop, arguments to a sub, etc). See the answers to <a href=\"http://stackoverflow.com/q/6419618\">this question</a>, and <a href=\"http://stackoverflow.com/a/35031218\">this answer</a> to a related question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483134144, "post_id": 41401306, "comment_id": 70008587, "body": "@ThisSuitIsBlackNot Thank you, added this."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1483192597, "post_id": 41401306, "comment_id": 70020649, "body": "@zdim <code>&gt;So autovivication does not kick in and you get that error.</code> :in %$h case it seems if it behaves as <code>noop</code> it will be more handy"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1591777485, "last_edit_date": 1591777485, "creation_date": 1483124304, "answer_id": 41401306, "question_id": 41400902, "link": "https://stackoverflow.com/questions/41400902/why-does-foo-bar-autovivify-but-foo-doesnt/41401306#41401306", "title": "Why does $foo-&gt;{bar} autovivify but %$foo doesn&#39;t?", "body": "<p><strong>Note</strong> &nbsp; Code added to the question demostrates why autovivification doesn't happen.</p>\n\n<p><strong>Short</strong> &nbsp; Your sub takes a list (hash) which has an anonymous array as an element &ndash; and <code>%$headers</code> is buried in that array. It is the <em>anon array</em>\nthat is the scalar aliased to, thus there is no requirement for <code>%$headers</code> to be modifiable. Thus no autovivification happens, and you get the fatal runtime error described below, as dereferencing is attempted on an undefined reference.</p>\n\n<hr>\n\n<p>A <code>%$ref</code> autovivifies when used in <em>lvalue context</em>. This may happen in a sub call, see below.</p>\n\n<p>The error you show is due to the use of an undefined reference. For example, the statement</p>\n\n<pre><code>my %hash = %{ $ref };\n</code></pre>\n\n<p>attempts to copy a hash from the memory location stored in <code>$ref</code> and assign it to <code>%hash</code>. The symbol <code>%hash</code> is created at compile time, but if no hash is found at <code>$ref</code> or if there is nothing in <code>$ref</code>, we get an error.  No autovivification happens here. With <code>use strict</code> in effect</p>\n\n<pre><code>perl -wE'use strict; my $h; my %h = %$h; say $h'\n</code></pre>\n\n<p>this throws the fatal runtime error</p>\n\n<pre>\nCan't use an undefined value as a HASH reference at -e line 1.\n</pre>\n\n<p>When <code>eval</code>-ed to survive that</p>\n\n<pre><code>perl -wE'use strict; my $h; my %h = eval { %$h }; say $h; say \"hi\"'\n</code></pre>\n\n<p>it prints a warning about \"<em>uninitialized value</em>\", an empty line, and then <code>hi</code>.  No hash.</p>\n\n<p>However, when used as an argument in a subroutine call it autovivifies</p>\n\n<pre><code>perl -wE'use strict; sub tt { 1 }; my $h; tt( %$h ); say $h'\n</code></pre>\n\n<p>as this prints the line <code>HASH(0x257cd48)</code>, without warnings or errors. </p>\n\n<p>The autovivification happens when a dereferenced object is used in <em>lvalue context</em>, which means that it needs to be modifiable.  In a subroutine call the reason for this is that arguments to a function are aliased in <code>@_</code> so it must be possible to modify them. The same aliasing need makes it happen in a <code>foreach</code> loop, while <code>keys</code> resets the hash iterator. See <a href=\"https://stackoverflow.com/questions/6419618/perl-vivification-question-while-dereferencing-undefined-array-reference\">this post</a> and <a href=\"https://stackoverflow.com/questions/2206836/why-does-perl-autovivify-in-this-case\">this post</a> and <a href=\"https://stackoverflow.com/questions/35029084/why-does-autovivification-occur-with-keys-and-not/35031218#35031218\">this post</a>.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsBlackNot</a> for explanation and links.</p>\n\n<p>In your case the <code>%$ref</code> is passed as an element of an anonymous array, and is thus not aliased (the arrayref itself is). So autovivication does not kick in and you get that error.</p>\n\n<hr>\n\n<p>On <em>autovivification</em> from <a href=\"http://perldoc.perl.org/perlglossary.html#A\" rel=\"nofollow noreferrer\">perlglossary</a></p>\n\n<blockquote>\n  <p>In Perl, storage locations (lvalues) spontaneously generate themselves as needed, including the creation of any hard reference values to point to the next level of storage. The assignment <code>$a[5][5][5][5][5] = \"quintet\"</code> potentially creates five scalar storage locations, plus four references (in the first four scalar locations) pointing to four new anonymous arrays (to hold the last four scalar locations). But the point of autovivification is that you don\u2019t have to worry about it.</p>\n</blockquote>\n\n<p>Also see, for example, an <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\">article from Effective Perler</a></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 41401306, "answer_count": 2, "score": 3, "last_activity_date": 1591777485, "creation_date": 1483122346, "last_edit_date": 1568081214, "question_id": 41400902, "link": "https://stackoverflow.com/questions/41400902/why-does-foo-bar-autovivify-but-foo-doesnt", "title": "Why does $foo-&gt;{bar} autovivify but %$foo doesn&#39;t?", "body": "<p>I have the following code:</p>\n\n<pre><code>$headers;\nsome_sub( %$headers );\n</code></pre>\n\n<p>When I call <code>some_sub</code> I get an error:</p>\n\n<blockquote>\n  <p>Can't use an undefined value as a HASH reference at ...</p>\n</blockquote>\n\n<p>But similar code does not produce an error:</p>\n\n<pre><code>$headers-&gt;{ x };\n</code></pre>\n\n<p>Why doesn't autovivification work the same way in the first example as it does in the second?</p>\n\n<p><strong>UPD</strong></p>\n\n<p>I noted by <strong>@ThisSuitIsBlackNot</strong>. I really ask:  </p>\n\n<blockquote>\n  <p>why my $h; $h->{foo} works and my $h; %$h doesn't</p>\n</blockquote>\n\n<p><strong>UPD</strong><br>\nThe real code:</p>\n\n<pre><code>my $email =  Email::Simple-&gt;create(()\n    ,header =&gt;  [()\n        ,To             =&gt;  $address\n        ,From           =&gt;  $cnf-&gt;{ from }\n        ,Subject        =&gt;  $subject\n        ,'Content-Type' =&gt;  'text/html; charset=\"utf8\"'\n        ,%$headers\n    ]\n    ,body =&gt; $body\n);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1483108880, "post_id": 41397732, "comment_id": 69997789, "body": "What&#39;s in <code>$hash_infos{ope_ref}</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483114986, "post_id": 41397732, "comment_id": 70000523, "body": "Your query is correct and your Perl syntax is correct. If there are no results, that&#39;s because the query does not return any. That probably means the data inside your <code>$hash_infos{ope_ref}</code> variable does not correspond to a row in your database."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483115422, "post_id": 41397732, "comment_id": 70000736, "body": "<code>selectrow_array</code> returns an array, not an array reference. So write <code>my @envoi_numfact=...</code> or <code>my ($envoy_numfact)=...</code>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1483116038, "post_id": 41397732, "comment_id": 70001018, "body": "@PerlDuck in scalar context, <code>selectrow_array</code> returns a single element of the array (in that case, since only <code>envoi_numfact</code> is fetched, it returns it). However the documentation of DBI discourages using <code>selectrow_array</code> in scalar context."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1483116448, "post_id": 41397732, "comment_id": 70001204, "body": "@Dada Yes, you are right. They discourage it especially when it returns <code>undef</code>, like in the above case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1483138921, "post_id": 41397732, "comment_id": 70010110, "body": "@PerlDuck, or more precisely, it says that <code>selectrow_array</code> shouldn&#39;t be used because it may return either the first or last field. In this case, those are the same thing, so there&#39;s no problem."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1483115103, "post_id": 41399365, "comment_id": 70000582, "body": "No. What did you change? You just put parenthesis around the <code>$hash_infos{ope_ref}</code>? That&#39;s a list constructor that gets flattened out by Perl. It doesn&#39;t matter if those are there or not. You could wrap ten pairs of parens around it and nothing would change. It has to be something else you did. Probably you changed the values inside your hash. I&#39;m happy for you that you got it to work, but those parens are not what fixed it. ;)"}, {"owner": {"reputation": 135, "user_id": 1638387, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Lj3j6.jpg?s=128&g=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/1638387/ale"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483115241, "post_id": 41399365, "comment_id": 70000644, "body": "Thanks for the different answers !"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1483138818, "post_id": 41399365, "comment_id": 70010082, "body": "<code>($hash_infos{ope_ref})</code> is identical to <code>$hash_infos{ope_ref}</code> in that situation, just like <code>(2)+2</code> is identical to <code>2+2</code>."}], "tags": [], "owner": {"reputation": 135, "user_id": 1638387, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Lj3j6.jpg?s=128&g=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/1638387/ale"}, "is_accepted": false, "score": -4, "last_activity_date": 1483114977, "creation_date": 1483114977, "answer_id": 41399365, "question_id": 41397732, "link": "https://stackoverflow.com/questions/41397732/perl-get-info-from-database-with-selectrow-array/41399365#41399365", "title": "perl get info from database with selectrow_array", "body": "<p>I am a winner ! I have just forgotten the closing bracket.</p>\n\n<pre><code>my $envoi_numfact = $dbh-&gt;selectrow_array(\"SELECT envoi_numfact FROM user.envoi where envoi_reference=?\",undef,$hash_infos{ope_ref}    );\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>        my $envoi_numfact = $dbh-&gt;selectrow_array(\"SELECT envoi_numfact FROM user.envoi where envoi_reference = ?\",undef,($hash_infos{ope_ref}));\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 1638387, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Lj3j6.jpg?s=128&g=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/1638387/ale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1483138734, "creation_date": 1483107504, "last_edit_date": 1483138734, "question_id": 41397732, "link": "https://stackoverflow.com/questions/41397732/perl-get-info-from-database-with-selectrow-array", "title": "perl get info from database with selectrow_array", "body": "<p>I am working under perl. I am implementing a dynamic query and I have problems with this stuff , If you could give me a piece of advice during my searching.</p>\n\n<p>Now, my static query:</p>\n\n<pre><code> my $envoi_numfact = $dbh-&gt;selectrow_array(\"SELECT envoi_numfact FROM user.envoi where envoi_reference='hapiness'\");\n\n print Dumper($envoi_numfact);\n</code></pre>\n\n<p>I have a nice result :</p>\n\n<pre><code>$VAR1 = '1611029546';\n</code></pre>\n\n<p>So I would like to transform it in dynamic query such as :</p>\n\n<pre><code>my $envoi_numfact = $dbh-&gt;selectrow_array(\"SELECT envoi_numfact FROM user.envoi where envoi_reference=?\",undef,$hash_infos{ope_ref}    );\n</code></pre>\n\n<p>Where <code>$hash_infos{ope_ref}</code> represents <code>envoi_reference</code>.</p>\n\n<p>As a result, I have :</p>\n\n<pre><code>$VAR1 = undef;\n</code></pre>\n\n<p>Anyone couls help me ?</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1483816112, "last_edit_date": 1483816112, "creation_date": 1483104919, "answer_id": 41397179, "question_id": 41397171, "link": "https://stackoverflow.com/questions/41397171/how-to-run-mojolicious-appication-under-api-path-how-to-ignore-some-prefix-i/41397179#41397179", "title": "How to run Mojolicious appication under &#39;/api&#39; path( How to ignore some prefix in path )?", "body": "<p>This line should be fixed:</p>\n\n<pre><code># Application is always under /api/v1, /api/v2 etc. path\n$r =  $r-&gt;any( '/api/:api', [ api =&gt; qr/v\\d+/ ] )-&gt;partial( 1 )\n</code></pre>\n\n<p><strong>Update</strong><br>\nAs it was <a href=\"http://mojolicious.org/perldoc/Mojolicious/Routes/Route#partial\" rel=\"nofollow noreferrer\">documented</a>:</p>\n\n<blockquote>\n  <p>Route has no specific end, remaining characters will be captured in path.</p>\n</blockquote>\n\n<p>If you run <code>myapp.pl routes -v</code> you will see:</p>\n\n<pre><code>/api/:api        .D..  *        apiapi       ^\\/api/((?^:v\\d+))\n   +/users/me    ....  GET      usersme      ^\\/users\\/me/?(?:\\.([^/]+))?$\n</code></pre>\n\n<p>When request come it will be checked against this regex:</p>\n\n<pre><code>^\\/api/((?^:v\\d+))\\/users\\/me/?(?:\\.([^/]+))?$\n</code></pre>\n\n<p>Where only <code>/users/me</code> will be captured in the <code>path</code></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 41397179, "answer_count": 1, "score": 1, "last_activity_date": 1483816112, "creation_date": 1483104881, "last_edit_date": 1483115340, "question_id": 41397171, "link": "https://stackoverflow.com/questions/41397171/how-to-run-mojolicious-appication-under-api-path-how-to-ignore-some-prefix-i", "title": "How to run Mojolicious appication under &#39;/api&#39; path( How to ignore some prefix in path )?", "body": "<p>I have application it works fine. But now we decide to move it under <code>/api</code> path. So I use <a href=\"http://mojolicious.org/perldoc/Mojolicious/Routes/Route#detour\" rel=\"nofollow noreferrer\">detour</a></p>\n\n<pre><code>my $r = $self-&gt;routes;\n\n# Application is always under /api/v1, /api/v2 etc. path\n$r =  $r-&gt;any( '/api/:api', [ api =&gt; qr/v\\d+/ ] )-&gt;detour( 'MyApp' );\n\n$r-&gt;get( '/users/me' )-&gt;to( 'user#show_me' );\n</code></pre>\n\n<p>But after this nothing works. Request to <code>site.domain/api/v1</code> cause application to fall into endless loop.</p>\n\n<p>There is also <a href=\"http://mojolicious.org/perldoc/Mojolicious/Plugin/Mount\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::Mount</a> but it only useful to <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Application-embedding\" rel=\"nofollow noreferrer\">mount another one application</a> under specified route.</p>\n\n<p><a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Routing#Mount-applications\" rel=\"nofollow noreferrer\">This</a> guide also does not resolve problem.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483078038, "post_id": 41391360, "comment_id": 69984850, "body": "May I suggest (1) print the values <code>print &quot;@values\\n&quot;;</code>, or better <code>print &quot;|$_|\\n&quot; for @values;</code> so you can see &quot;values&quot; in between <code>||</code> (2) Read through <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>"}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1483089052, "post_id": 41391360, "comment_id": 69988914, "body": "Would you really expect <code>split(&#39;,&#39;, &quot;,Col2,Col3&quot;)</code> to return only 2 values? How about: <code>split(&#39;,&#39;, &quot;Col1,,Col3&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 7351608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434fff927f7e1948d767131b688dd050?s=128&d=identicon&r=PG&f=1", "display_name": "user7351608", "link": "https://stackoverflow.com/users/7351608/user7351608"}, "is_accepted": false, "score": 12, "last_activity_date": 1483078768, "creation_date": 1483078768, "answer_id": 41391564, "question_id": 41391360, "link": "https://stackoverflow.com/questions/41391360/why-the-split-function-is-returning-two-values/41391564#41391564", "title": "why the split function is returning two values?", "body": "<p>Check out <a href=\"http://perlmeme.org/howtos/perlfunc/split_function.html\" rel=\"nofollow noreferrer\">the perl split documentation</a>.</p>\n\n<p>See Example 6:</p>\n\n<p><strong><em>\"If the delimiter is at the start of the string then the first element in the array of results will be empty.\"</em></strong></p>\n\n<p>-<a href=\"http://perlmeme.org/howtos/perlfunc/split_function.html\" rel=\"nofollow noreferrer\">http://perlmeme.org/howtos/perlfunc/split_function.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1483082769, "post_id": 41391582, "comment_id": 69986640, "body": "The other only exception to this rule is the special <code>split &#39; &#39;</code> which acts like <code>split &#47;\\s+&#47;</code> but also ignores leading spaces.  The other other only exception is that a split expression that matches with zero width at the beginning of the string doesn&#39;t produce an empty first result."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 2, "last_activity_date": 1483078906, "creation_date": 1483078906, "answer_id": 41391582, "question_id": 41391360, "link": "https://stackoverflow.com/questions/41391360/why-the-split-function-is-returning-two-values/41391582#41391582", "title": "why the split function is returning two values?", "body": "<p>perl <code>split()</code> function splits the string by the passed regular expression and it does not enforce the string part on either side to be non-empty.</p>\n\n<p>The only exception for this rule is when the third parameter (LIMIT) is omitted - then any of the <em>trailing</em> separators are ignored and those potential empty strings as well. This does not apply to the beginning of the string which is the case in the question.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1483215449, "last_edit_date": 1483215449, "creation_date": 1483134449, "answer_id": 41403070, "question_id": 41391360, "link": "https://stackoverflow.com/questions/41391360/why-the-split-function-is-returning-two-values/41403070#41403070", "title": "why the split function is returning two values?", "body": "<p>The pattern defines what <em>separates</em> the elements of interest. By definition, if you a have separator, there must be two elements being separated. More generally, you will necessarily have one more item than the number of separators.</p>\n\n<p>You want</p>\n\n<pre><code>$string =~ s/^#//;  # Remove leading \"#\".\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5704404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588c7d37d01f767acdc721c453dd6173?s=128&d=identicon&r=PG&f=1", "display_name": "Manu Agarwal", "link": "https://stackoverflow.com/users/5704404/manu-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1483215476, "last_edit_date": 1483215476, "creation_date": 1483210552, "answer_id": 41410966, "question_id": 41391360, "link": "https://stackoverflow.com/questions/41391360/why-the-split-function-is-returning-two-values/41410966#41410966", "title": "why the split function is returning two values?", "body": "<p>Its splitting the given string on the basis of '#'. Since the string starts with #, first splitted element will be empty elemnt. and the second will be Tom. So the length returned is 2.</p>\n\n<pre><code>@values = ('', 'Tom')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6659657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689ed6d49d72bcf45fe41e7b7cb3e18a?s=128&d=identicon&r=PG&f=1", "display_name": "Akt 715", "link": "https://stackoverflow.com/users/6659657/akt-715"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1614118996, "creation_date": 1483077461, "last_edit_date": 1614118996, "question_id": 41391360, "link": "https://stackoverflow.com/questions/41391360/why-the-split-function-is-returning-two-values", "title": "why the split function is returning two values?", "body": "<pre><code>#!/usr/bin/perl -w\n$string=&quot;#Tom&quot;;\n@values=split(&quot;\\#&quot;,$string);\nprint scalar @values;\n</code></pre>\n<p>output:</p>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>As for my array, length should be 1.  But it is showing 2.</p>\n<p>Can somebody explain that?</p>\n<p>I have searched on net but nothing is given    about this.</p>\n"}, {"tags": ["arrays", "perl", "filter"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1483061677, "post_id": 41389492, "comment_id": 69981296, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2933347/difference-of-two-arrays-using-perl\">Difference of Two Arrays Using Perl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1483062539, "creation_date": 1483062539, "answer_id": 41389595, "question_id": 41389492, "link": "https://stackoverflow.com/questions/41389492/perl-filter-function-for-arrays/41389595#41389595", "title": "Perl - Filter function for arrays", "body": "<p>What you're looking for is the difference of two sets. This, along with union, intersection, and a bunch of others are <a href=\"https://en.wikipedia.org/wiki/Set_theory#Basic_concepts_and_notation\" rel=\"nofollow noreferrer\">set operations</a>. Rather than writing your own, there's plenty of <a href=\"https://metacpan.org/search?q=set\" rel=\"nofollow noreferrer\">modules for dealing with sets</a>.</p>\n\n<p><a href=\"https://metacpan.org/pod/Set::Object\" rel=\"nofollow noreferrer\">Set::Object</a> is very fast and featureful. I'd avoid using the operator interface (ie. $set1 - $set2) as it makes the code confusing. Instead use explicit method calls.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nuse Set::Object qw(set);\n\nmy $set1 = set(1, 2, 3, 4, 5);\nmy $set2 = set(1, 2, 3, 4, 5, 6, 7);\nsay join \", \", $set2-&gt;difference($set1)-&gt;members;\n</code></pre>\n\n<p>Note that sets are unordered and cannot contain duplicates. This may or may not be what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1483092744, "last_edit_date": 1483092744, "creation_date": 1483063853, "answer_id": 41389717, "question_id": 41389492, "link": "https://stackoverflow.com/questions/41389492/perl-filter-function-for-arrays/41389717#41389717", "title": "Perl - Filter function for arrays", "body": "<p>This uses <a href=\"http://search.cpan.org/~jkeenan/List-Compare-0.53/lib/List/Compare.pm\" rel=\"nofollow noreferrer\">List::Compare</a>, a module with a large collection of routines for comparing lists.</p>\n\n<p>Here you want <code>get_complement</code></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse List::Compare;\n\nmy @arr1 = ( 1, 2, 3, 4, 5 );\nmy @arr2 = ( 1, 2, 3, 4, 5, 6, 7);\n\nmy $lc = List::Compare-&gt;new(\\@arr1, \\@arr2);\n\nmy @only_in_second = $lc-&gt;get_complement;\n\nprint \"@only_in_second\\n\";\n</code></pre>\n\n<p>The module has many options. </p>\n\n<p>If you don't need the result sorted, pass <code>-u</code> to the constructor for faster operation.  </p>\n\n<p>There is also the \"<em>Accelerated Mode</em>\", obtained by passing <code>-a</code>. For the purpose of efficient repeated comparisons between the same arrays many things are precomputed at construction. With this flag that is suppressed, which speeds up single comparisons.  See <a href=\"http://search.cpan.org/~jkeenan/List-Compare-0.53/lib/List/Compare.pm#List::Compare_Modes\" rel=\"nofollow noreferrer\">List::Compare Modes</a>.</p>\n\n<p>These two options can be combined,  <code>List::Compare-&gt;new('-u', '-a', \\@a1, \\@a2)</code>.</p>\n\n<p>Operations on three or more lists are supported.</p>\n\n<p>There is also the functional interface, as a separate <a href=\"http://search.cpan.org/~jkeenan/List-Compare-0.53/lib/List/Compare/Functional.pm\" rel=\"nofollow noreferrer\">List::Compare::Functional</a> module.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1483065974, "creation_date": 1483065974, "answer_id": 41389952, "question_id": 41389492, "link": "https://stackoverflow.com/questions/41389492/perl-filter-function-for-arrays/41389952#41389952", "title": "Perl - Filter function for arrays", "body": "<p>You can't pass arrays to subs, only scalars. So when you do </p>\n\n<pre><code>my @filtered = filter_list(@filter, @base);\n</code></pre>\n\n<p>you are really doing</p>\n\n<pre><code>my @filtered = filter_list($filter[0], $filter[1], ..., $base[0], $base[1], ...);\n</code></pre>\n\n<p>As such, when you do</p>\n\n<pre><code>my @names = shift;\n</code></pre>\n\n<p>you are really doing</p>\n\n<pre><code>my @names = $filter[0];\n</code></pre>\n\n<p>which is obviously wrong.</p>\n\n<p>The simplest solution is to pass references to the arrays.</p>\n\n<pre><code>my @filtered = filter_list(\\@filter, \\@base);\n</code></pre>\n\n<p>A hash permits an efficient implementation (O(N+M)).</p>\n\n<pre><code>sub filter_list {\n   my ($filter, $base) = @_;\n   my %filter = map { $_ =&gt; 1 } @$filter;\n   return grep { !$filter{$_} } @$base;\n}\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code>my @filtered = filter_list(\\@filter, @base);\n</code></pre>\n\n<p>could be implemented as</p>\n\n<pre><code>sub filter_list {\n   my $filter = shift;\n   my %filter = map { $_ =&gt; 1 } @$filter;\n   return grep { !$filter{$_} } @_;\n}\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 41389952, "answer_count": 3, "score": 1, "last_activity_date": 1483092744, "creation_date": 1483061528, "last_edit_date": 1483061746, "question_id": 41389492, "link": "https://stackoverflow.com/questions/41389492/perl-filter-function-for-arrays", "title": "Perl - Filter function for arrays", "body": "<p>i am trying to create a subroutine that does the following :</p>\n\n<ol>\n<li>Takes two arrays as input (Filter, Base)</li>\n<li>Outputs only the values of the second array that do not exist in the first</li>\n</ol>\n\n<p>Example : </p>\n\n<pre><code>@a = ( 1, 2, 3, 4, 5 );\n@b = ( 1, 2, 3, 4, 5, 6, 7);\n\nExpected output :   @c = ( 6, 7 );\nCalled as : filter_list(@filter, @base)\n\n###############################################\n\nsub filter_list {\n    my @names = shift;\n    my @arrayout;\n    foreach my $element (@_)\n    {\n       if (!($element ~~ @names )){\n       push @arrayout, $element;\n    }\n    }\n   return @arrayout\n}\n</code></pre>\n\n<p>Test Run :</p>\n\n<pre><code>@filter = ( 'Tom', 'John' ); \n@array = ( 'Tom', 'John', 'Mary' );\n@array3 = filter_list(@filter,@array);\nprint @array3;\nprint \"\\n\";\n</code></pre>\n\n<p>Result : </p>\n\n<pre><code>JohnJohnMary\n</code></pre>\n\n<p>Can anyone help? Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483057879, "post_id": 41388866, "comment_id": 69980455, "body": "Can you show an example of output that you need from an input string?  The explanation isn&#39;t clear, with &quot;<i>parsing some chars ... and the other chars</i>&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483058767, "post_id": 41388866, "comment_id": 69980676, "body": "Why are you using <code>chop</code> instead of <code>chomp</code>? Actually, why are you modifying a global variable (<code>$_</code>) inside a function?"}, {"owner": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "edited": false, "score": 0, "creation_date": 1483063862, "post_id": 41388866, "comment_id": 69981752, "body": "zdim -&gt; thank you for your reply I updated the post with sample input and output. melpomene"}, {"owner": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "edited": false, "score": 0, "creation_date": 1483064120, "post_id": 41388866, "comment_id": 69981815, "body": "melpomene:Thank you for this thought, I wrote this test code to replicate a bug in a larger Perl module, I am not the author of the original nor am I able to change the original code other than to fix the bug."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483065779, "post_id": 41388866, "comment_id": 69982157, "body": "Perhaps I am not understanding what &quot;<i>the Tests ... should return</i>&quot; -- you can capture what you show in the edit by <code>&#47;&lt;\\?lsmb if (\\w+)&#47;</code>.  Is that all you need, to extract the <code>customerfax</code> or underscores or zeroes or <code>letter_reason_4</code> ... ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483068429, "post_id": 41388866, "comment_id": 69982656, "body": "@turtle  Btw, to have people notified of comments you need <code>@</code> in front of their username.  The owner of the post (question or answer) always gets notified, I used it here as an example."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483088075, "post_id": 41388866, "comment_id": 69988503, "body": "Is this example XML? It looks a bit like it, but I can&#39;t quite tell."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483105470, "post_id": 41388866, "comment_id": 69996260, "body": "I don&#39;t think it&#39;s XML. But I would like to know what it is. Also, do you really need <code>use diagnostics</code>? Do you read those? Don&#39;t keep it when you roll out your code, it&#39;s slowing down stuff a lot."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "edited": false, "score": 0, "creation_date": 1483074546, "post_id": 41389987, "comment_id": 69983962, "body": "Thank you \\w works. I will try to refactor the original code to not use $_."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "edited": false, "score": 0, "creation_date": 1483078477, "post_id": 41389987, "comment_id": 69984990, "body": "@turtle Nice, thank you for the update :) It&#39;s good, I have two remarks. (1) When you take the argument in the function, why call it same name as what the result will be called?  It&#39;s easy to make mistakes.  Call it, say, <code>my $test_string = shift;</code> and then <code>my ($test_res) = $test_string =~ &#47;...&#47;; return $test_res;</code>  (2) In <code>&#47;...&#47;x</code> that <code>x</code> is to allow us to use spaces inside, just for readability.  When you don&#39;t use extra spaces you don&#39;t need the <code>x</code> <i>modifier</i> (as it&#39;s called)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "edited": false, "score": 0, "creation_date": 1483078952, "post_id": 41389987, "comment_id": 69985164, "body": "@turtle I added a paragraph with comments right below the regex, at the beginning."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1485842031, "last_edit_date": 1485842031, "creation_date": 1483066266, "answer_id": 41389987, "question_id": 41388866, "link": "https://stackoverflow.com/questions/41388866/perl-regex-to-capture-group-and-stop-matching/41389987#41389987", "title": "Perl regex to capture group and stop matching", "body": "<p>If my understanding of your requirements is right, the needed phrase is extracted by simple</p>\n\n<pre><code>my ($match) = $string =~ /&lt;\\?lsmb \\s+ if \\s+ (\\w+)/x\n</code></pre>\n\n<p>In the <em>list context</em> the <em>match operator</em> <code>m//</code> returns a list with matches. Even if it's just one, we need the <em>list context</em> &ndash; in the <em>scalar context</em> its behavior is different. The list context comes from assigning to a list from it, <code>my (...) =</code>. The <code>/x</code> <em>modifier</em> merely allows us to use spaces inside, for readability. See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> for starters.</p>\n\n<p>What may precede <code>&lt;?</code> doesn't have to be specified, since the pattern matches anywhere in the string. The <code>\\w</code> is for <code>[A-Za-z0-9_]</code> (see <a href=\"http://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\">perlrecharclass</a>), what seems to match your examples and description. The <code>\\S</code> is more permissive. Nothing is needed after <code>\\w+</code>.</p>\n\n<p>Also, there is no need to first test whether the pattern is there</p>\n\n<pre><code>sub strip_markup \n{\n    my ($test_res) = $_[0] =~ /&lt;\\?lsmb if (\\w+)/;\n\n    if ($test_res) {\n        # ...\n    }\n\n    return $test_res;         # return something!\n}\n</code></pre>\n\n<p>There is no reason for the substitution so we use a match.</p>\n\n<p>I understand that you are working with code you can't change, but would still like to comment</p>\n\n<ul>\n<li><p>No need to remove the newline here. But when you do that, use <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a> and <em>not</em> <a href=\"http://perldoc.perl.org/functions/chop.html\" rel=\"nofollow noreferrer\">chop</a></p></li>\n<li><p>The sub uses global variables. That can lead to bugs. Declare in small scope. Pass</p></li>\n<li><p>The sub modifies global variables. That often leads to bugs while there is rarely <em>need</em> for it</p></li>\n<li><p>Use arrays for repetitions of the same thing</p></li>\n<li><p>This can be organized differently, to separate work more clearly</p></li>\n</ul>\n\n<hr>\n\n<p>For example</p>\n\n<pre><code>my @tests = (\n    qq|&lt;?lsmb if customerfax ?&gt;  caacaacac\\n|,\n    # ...\n);\n\nmy ($cnt, $t);\n\nforeach my $test (@tests) \n{\n    my $test_res = strip_markup($test);\n\n    if (defined $test_res) {\n        $t++;\n        print \"Test $t \";\n        #look up the result as the hash key\n        my $ok = $self-&gt;{$test_res};\n        if ($ok) { \n                $count++;\n                print \"OK passed $ok,\";\n        }\n        print qq|Test Value : '$_' \\n|;\n    }\n    else { }  # report failure\n}\n\nsub strip_markup {\n    my ($test_res) = $_[0] =~ /&lt;\\?lsmb \\s+ if \\s+ (\\w+)/x;\n    return $test_res;\n}\n</code></pre>\n\n<p>The <code>defined</code> test of <code>$test_res</code> is to allow for falsey things (like <code>0</code> or <code>''</code>) to be valid results.</p>\n\n<p>The reporting code can, and should be, in another subroutine.</p>\n"}], "owner": {"reputation": 75, "user_id": 7356003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc_XRVNW1xM/AAAAAAAAAAI/AAAAAAAAAG8/rpSVr-vrFbw/photo.jpg?sz=128", "display_name": "turtle", "link": "https://stackoverflow.com/users/7356003/turtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 41389987, "answer_count": 1, "score": 3, "last_activity_date": 1485842031, "creation_date": 1483055963, "last_edit_date": 1483064378, "question_id": 41388866, "link": "https://stackoverflow.com/questions/41388866/perl-regex-to-capture-group-and-stop-matching", "title": "Perl regex to capture group and stop matching", "body": "<p>I need some help with this perl regular expression</p>\n\n<pre><code>s/.*?&lt;\\?lsmb if\\s*?(\\S*)\\s*?\\?&gt;/$1/\n</code></pre>\n\n<p>in the code below parsing out some non-whitespace chars <code>[A-Z][a-z][0-9][_]</code> surrounded by any number of whitespace and the other chars. I have tried various Perl regular expressions which are all commented out in the program below.</p>\n\n<p>My main problem I think is stopping matching at the end.</p>\n\n<p>The code below runs 8 tests, and I am hoping to find something that passes all 8.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nmy $count = 0;\nmy $t = 0;\n#examples of things I need to match, match =&gt; catagory\nmy $self = {  'customerfax' =&gt; 'alpha',\n             '_____' =&gt; 'Underscore',\n             '000000' =&gt; 'numeric',\n             'letter_reason_4' =&gt; 'alfa-numeric-underscore',\n             'customerphone7' =&gt; 'alfa-numeric', \n             'customer_phone' =&gt; 'alfa-underscore',\n           };\n# must contain   &lt;?lsmb 'varname from $self' ?&gt; \n# may contain any amount of whitespace chars where one is depected\n# will end with \\n that is removed by chop below         \nmy $test1 = qq|&lt;?lsmb if customerfax ?&gt;  caacaacac\\n|;\nmy $test2 = qq|&lt;?lsmb if _____ ?&gt; bbb\\n|;\nmy $test3 = qq|&lt;?lsmb if 000000 ?&gt; cccc\\n|;\nmy $test4 = qq|&lt;?lsmb if letter_reason_4 ?&gt;&lt;t \\&gt;&lt;/'&gt;&lt;&gt;&lt;&gt;&lt;&gt;\\n|;  # /\nmy $test5 = qq| &lt;?lsmb if customerfax ?&gt; |;\nmy $test6 = qq|&lt;?lsmb if  customerphone7   ?&gt; \\&lt;?lsmb ignore this &gt;n|;\nmy $test7 = qq|&lt;?lsmb if  customer_phone  ?&gt;\\n|;\nmy $test8 = qq| avcscc 34534534 &lt;?lsmb if letter_reason_4 ?&gt; 0xffff\\n|;\n\nstrip_markup($test1);\nstrip_markup($test2);\nstrip_markup($test3);\nstrip_markup($test4);\nstrip_markup($test5);\nstrip_markup($test6);\nstrip_markup($test7);\nstrip_markup($test8);\n\nif ($count == 8) { print \"Passed All done\\n\";}\nelse { print \"All done passed  $count out of 8 Try again \\n\"; }\n\n\nsub strip_markup { \n    $_= shift;\n    #print \"strip_markup $_ \\n\";\n    if (/&lt;\\?lsmb if /) {\n        chop; # gets rid ot the new line\n        #original\n        #s/.*?&lt;\\?lsmb if (.+?) \\?&gt;/$1/;\n        #What I have tried:\n        #s/.*?&lt;\\?lsmb if(?:\\s)*?(\\S+?)(?:\\s)*?\\?&gt;\\b/$1/;\n        s/.*?&lt;\\?lsmb if\\s*?(\\S*)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([A-Za-z0-9_]*?)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if[\\s]*?(\\S*?)[\\s]*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if (\\S*?) \\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if (\\S+?) \\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if ([\\S]+?)([\\s]+?)\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if[\\s]+([\\S]+)[\\s]+\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([\\S]*?)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s+?([\\S]+?)[\\s]+?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if ([\\S]+?) \\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([\\S_]*?)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([[a-zA-Z]|[\\d]|[_]]*?)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([a-zA-Z\\d_]*?)\\s*?\\?&gt;/$1/;\n        #s/.*?&lt;\\?lsmb if\\s*?([^[:space:]]+?)\\s*?\\?&gt;/$1/;\n\n        $t++;\n        print \"Test $t \";\n        #look up the result as the hash key\n        my $ok = $self-&gt;{$_};\n        if ($ok) { \n                $count++;\n                print \"OK passed $ok,\";\n        }\n        print qq|Test Value : '$_' \\n|;\n    }\n}\n</code></pre>\n\n<p>Here are some of the Tests and what they should return: </p>\n\n<ul>\n<li>Test1 = <code>&lt;?lsmb if customerfax ?&gt;  caacaacac\\n</code> should return <code>customerfax</code></li>\n<li>Test2 = <code>&lt;?lsmb if _____ ?&gt; bbb\\n</code> should return   <code>_____</code></li>\n<li>Test8 =  <code>avcscc 34534534 &lt;?lsmb if letter_reason_4 ?&gt; 0xffff\\n</code>\nshould return <code>letter_reason_4</code></li>\n</ul>\n"}, {"tags": ["regex", "windows", "perl"], "comments": [{"owner": {"reputation": 1036, "user_id": 6718853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/520ca61cd070af30a14f90969ac892de?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6718853/richard"}, "edited": false, "score": 0, "creation_date": 1483055560, "post_id": 41388781, "comment_id": 69979954, "body": "You can install perl for windows. Or use a copy of sed for windows. Or a VBscript"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483057057, "post_id": 41388781, "comment_id": 69980267, "body": "There is no problem with running Perl on Windows.  It installs in minutes. You can make use of <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>, or better yet <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">File::Find::Rule</a>, to apply processing to all files. For individual file processing use a module for <code>XML</code>, either <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a> or <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\" rel=\"nofollow noreferrer\">XML::Twig</a>."}], "answers": [{"comments": [{"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483120385, "post_id": 41393527, "comment_id": 70003003, "body": "I put the correct path <code>-&gt; in ( &#39;C:\\Users\\PIO\\Documents\\serv\\data\\monsters&#39; ) )</code> , and changed the  <code>-&gt; name ( &#39;*.xml.txt&#39; )</code> into <code>-&gt; name ( &#39;*.xml&#39; )</code> because <code>*.xml.txt</code> had no effect (every files in folders are .xml&#39;s). It has processed all files, but only the first file is edited correctly, and the rest has been cleaned (empty files)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483127703, "post_id": 41393527, "comment_id": 70006203, "body": "Hmm, can&#39;t check it right now, but maybe an <i>all</i> handler to flush. Edited accordingly."}, {"owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "edited": false, "score": 0, "creation_date": 1483135243, "post_id": 41393527, "comment_id": 70008934, "body": "On line <code>$twig -&gt; parsefile_inplace($file);</code> shows error <b>Can&#39;t call method &quot;flush_up_to&quot; on an undefinied value at C:/Strawberry/perl/vendor/lib/XML/Twig.pm line 8452</b>.  The effect after executing program is copying first file, giving it strange name (hJ1DKyO1tH), that contains the same code, but on &lt;loot&gt; bracelets put some enters(newlines). I haven&#39;t found any solution to this error, and the Strawberry has been installed correctly (I think).  I have installed the latest recommended strawberry for Windows 64bit. Twig.pm on 8454 line has this code <code>$elt-&gt;twig-&gt;flush_up_to( $up_to, @_);</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1483127792, "last_edit_date": 1483127792, "creation_date": 1483089040, "answer_id": 41393527, "question_id": 41388781, "link": "https://stackoverflow.com/questions/41388781/edit-all-files-in-directory-tree-with-regular-expression-on-windows/41393527#41393527", "title": "Edit all files in directory tree with regular expression on Windows", "body": "<p>I would shy away from anything regex based - XML simply doesn't work with regular expressions. </p>\n\n<p>But fortunately, Perl for Windows is readily available. And better yet, if you go with Strawberry perl, it comes bundled with both <code>XML::Twig</code> and <code>XML::LibXML</code>. </p>\n\n<p>At which point the problem becomes inanely simple:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse File::Find::Rule;\nuse XML::Twig;\n\nsub delete_loot {\n   my ( $twig, $loot ) = @_;\n   foreach my $loot_entry ( $loot -&gt; children ) {\n      $loot_entry -&gt; delete;\n   }\n   $twig -&gt; flush;\n}\n\nmy $twig = XML::Twig -&gt; new ( pretty_print =&gt; 'indented', \n                              twig_handlers =&gt; { 'loot' =&gt; \\&amp;delete_loot ,\n          '_all_' =&gt; sub { $_ - &gt; flush } } ); \n\nforeach my $file ( File::Find::Rule  -&gt; file()\n                                     -&gt; name ( '*.xml.txt' )\n                                     -&gt; in ( 'C:\\tmp' ) ) {\n\n    print \"Processing $file\\n\";\n    $twig -&gt; parsefile_inplace($file); \n}\n</code></pre>\n\n<p>Of course, this <em>also</em> assumes that your XML is, in fact, XML - which your example isn't. If that example is actually correct, then you should really hit whoever wrote it around the head with a rolled up copy of the XML Spec whilst chanting 'don't make fake XML'. </p>\n"}], "owner": {"reputation": 568, "user_id": 4831637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e69c4752ec66749650d2e3bd3c6840a?s=128&d=identicon&r=PG&f=1", "display_name": "Piodo", "link": "https://stackoverflow.com/users/4831637/piodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1483127792, "creation_date": 1483055315, "question_id": 41388781, "link": "https://stackoverflow.com/questions/41388781/edit-all-files-in-directory-tree-with-regular-expression-on-windows", "title": "Edit all files in directory tree with regular expression on Windows", "body": "<p>I am looking for a program that can edit all files in directory tree like Perl on Unix systems. The files are xml's and another folders.</p>\n\n<p>The regex should delete all the content placed in <code>&lt;loot&gt;&lt;/loot&gt;</code> brackets.</p>\n\n<p>for example file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;monster name=\"Dragon\"/&gt;\n&lt;health=\"10000\"/&gt;\n&lt;immunities&gt;\n    &lt;immunity fire=\"1\"/&gt;\n&lt;/immunities&gt;\n&lt;loot&gt;\n&lt;item id=\"1\"/&gt;\n&lt;item id=\"3\"/&gt;\n    &lt;inside&gt;\n        &lt;item id=\"6\"/&gt;\n    &lt;/inside&gt;\n&lt;/item&gt;\n&lt;/loot&gt;\n</code></pre>\n\n<p>the file should look after edit:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;monster name=\"Dragon\"/&gt;\n&lt;health=\"10000\"/&gt;\n&lt;immunities&gt;\n    &lt;immunity fire=\"1\"/&gt;\n&lt;/immunities&gt;\n&lt;loot&gt;\n&lt;/loot&gt;\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483040171, "post_id": 41386004, "comment_id": 69974512, "body": "Try put brackets around <code>@{$hr-&gt;{OrderSP}}</code> : <code>Order =&gt; [ @{$hr-&gt;{OrderSP}} ]</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483087863, "post_id": 41386004, "comment_id": 69988422, "body": "This looks suspiciously like you&#39;ve parsed something - maybe some XML with XML::Simple? If so, there&#39;s probably a better way to tackle the problem."}], "answers": [{"comments": [{"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1483052289, "post_id": 41386576, "comment_id": 69979079, "body": "Thanks for your help! Your first example is what I did originally. But those Order arrays are big and repetitious, which is why I was trying to get them all to point to one place. Your second example certainly solves the problem, but I was hoping to make the hash self-contained, so I could simply call it with a printOrderedHash function. So, it&#39;s a matter of aesthetics, I suppose."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1483042526, "creation_date": 1483042526, "answer_id": 41386576, "question_id": 41386004, "link": "https://stackoverflow.com/questions/41386004/in-perl-how-can-i-refer-to-a-hash-element-in-a-parent-hash/41386576#41386576", "title": "In perl, How can I refer to a hash element in a parent hash?", "body": "<p>Yes, there is a way to do this.</p>\n\n<p>Your code has two issues:</p>\n\n<ol>\n<li>You're dereferencing the arrayref stored in the parent: <code>@{$hr-&gt;{OrderSP}}</code>. This makes no sense because a value in a hash must be a single scalar, not a list. Removing <code>@{</code> <code>}</code> would fix this.</li>\n<li>The big one: You're trying to use a data structure that doesn't exist yet. While the right-hand side of the assignment is being evaluated (and the hashes, subhashes, etc. are constructed), <code>$hr</code> hasn't been touched yet. The actual assignment only happens after the data structure has been built.</li>\n</ol>\n\n<p>Here's a working example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $hr = {\n    Order   =&gt; [qw(Sp Ls)],\n    OrderSP =&gt; [qw(a b)],\n    Sp =&gt; {\n        a =&gt; -1, \n        b =&gt; -1,\n    },\n    Ls =&gt; { \n        c =&gt; -1,\n        d =&gt; -1,\n        Order =&gt; [qw(c d)],\n    },\n};\n\n$hr-&gt;{Sp}{Order} = $hr-&gt;{OrderSP};\n\nprint \"\\@{\\$hr-&gt;{OrderSP}} = @{$hr-&gt;{OrderSP}}\\n\";\nprint \"\\@{\\$hr-&gt;{Ls}-&gt;{Order}} = @{$hr-&gt;{Ls}-&gt;{Order}}\\n\";\nprint \"\\@{\\$hr-&gt;{Sp}-&gt;{Order}} = @{$hr-&gt;{Sp}-&gt;{Order}}\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@{$hr-&gt;{OrderSP}} = a b\n@{$hr-&gt;{Ls}-&gt;{Order}} = c d\n@{$hr-&gt;{Sp}-&gt;{Order}} = a b\n</code></pre>\n\n<p>The crucial bit is that setting <code>$hr-&gt;{Sp}{Order}</code> has been split off into a separate step, so it only happens after <code>$hr-&gt;{OrderSP}</code> has been created (by the assignment to <code>my $hr</code>).</p>\n\n<p>Alternatively you could also do this:</p>\n\n<pre><code>my $OrderSP = [qw(a b)];\nmy $hr = {\n    Order   =&gt; [qw(Sp Ls)],\n    OrderSP =&gt; $OrderSP,\n    Sp =&gt; {\n        a =&gt; -1, \n        b =&gt; -1,\n        Order =&gt; $OrderSP,\n    },\n    Ls =&gt; { \n        c =&gt; -1,\n        d =&gt; -1,\n        Order =&gt; [qw(c d)],\n    },\n};\n</code></pre>\n\n<p>This time we don't modify <code>$hr</code> after the initial assignment. Instead we store <code>OrderSP</code> in a separate variable beforehand, which we can then reference from anywhere.</p>\n\n<p>(By the way, I've also fixed the newlines in your output. <code>\"\\n\"</code> is a line <em>terminator</em>; i.e. it goes at the end of each line, not the beginning.)</p>\n"}], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 41386576, "answer_count": 1, "score": 0, "last_activity_date": 1483042526, "creation_date": 1483039522, "question_id": 41386004, "link": "https://stackoverflow.com/questions/41386004/in-perl-how-can-i-refer-to-a-hash-element-in-a-parent-hash", "title": "In perl, How can I refer to a hash element in a parent hash?", "body": "<p>I've written a function to print hashes in a prescribed order by including an ordered key array as an element of the hash.</p>\n\n<p>Since there may be many subhashes with the same order, I want to be able to put the order string in the parent hash, and refer to it in each subhash.\nI can't get it to work, as shown in the code fragment below.</p>\n\n<p>Is there a way to do this?</p>\n\n<pre><code>$hr={\n    Order =&gt; [qw(Sp Ls)],\n    OrderSP =&gt; [qw(a b)],\n    Sp =&gt; {\n        a =&gt;-1, \n        b =&gt; -1,\n        Order =&gt; @{$hr-&gt;{OrderSP}}\n        },\n    Ls =&gt; { \n        c =&gt; -1,\n        d =&gt; -1,\n        Order =&gt; [qw(c d)]\n        }\n    }; \nprint \"\\n\\@{\\$hr-&gt;{OrderSP}} = \",@{$hr-&gt;{OrderSP}}; # ab\nprint \"\\n\\@{\\$hr-&gt;{Ls}-&gt;{Order}} = \",@{$hr-&gt;{Ls}-&gt;{Order}}; # cd \nprint \"\\n\\@{\\$hr-&gt;{Sp}-&gt;{Order}} = \",@{$hr-&gt;{Sp}-&gt;{Order}}; # blank\n\nResult:\n@{$hr-&gt;{OrderSP}} = ab\n@{$hr-&gt;{Ls}-&gt;{Order}} = cd\n@{$hr-&gt;{Sp}-&gt;{Order}} =\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483046578, "post_id": 41386100, "comment_id": 69977042, "body": "I suspect that the problem has been wrongly-stated. Splitting <code>Wafer Diameter: 8 IN</code> on the colon will leave a <code>$value</code> starting with a single space. Splitting that on <code>\\s</code> will produce a list with an empty string as the first element. Not the &quot;blank space&quot; that the OP describes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483047532, "post_id": 41386100, "comment_id": 69977410, "body": "@Borodin Oh, yes, that&#39;s what it is -- I misread it.  I thought that the problem is with splitting the part before the <code>:</code>, for some reason.  This is  clear now, I&#39;ll adjust. Thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1483048464, "last_edit_date": 1483048464, "creation_date": 1483039991, "answer_id": 41386100, "question_id": 41385996, "link": "https://stackoverflow.com/questions/41385996/perl-split-issue/41386100#41386100", "title": "Perl Split Issue", "body": "<p>When you <code>split</code> the line by <code>:</code> you get <code>&nbsp;8 IN</code> in the <code>$value</code>. Note the leading space.</p>\n\n<p>Then you are getting the expected behavior.  When a regex <code>/.../</code> is used the string is duly split by the given pattern and all substrings returned, except only for <em>trailing</em> spaces which are dropped.  There are a few details and special cases, please see <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>.</p>\n\n<p>A notable example is a string with leading spaces, where with <code>/\\s/</code> we get empty strings as first elements in the returned list. Even with <code>/\\s+/</code> we get the empty string as the first element, since that precedes the whitespace matched by the pattern. </p>\n\n<p>In your example there appears to be <em>one</em> leading space so one empty string is returned. I take it that by \"<em>empty spaces in ... array</em>\" you mean that there are array elements with \"nothing.\"  Those are empty <em>strings</em>, there should be no spaces.</p>\n\n<p>This can be changed by using the pattern <code>' '</code>, specifying any amount of any white space</p>\n\n<blockquote>\n  <p>... when the PATTERN is either omitted or a string composed of a single space character (such as <code>' '</code> or <code>\"\\x20\"</code> , but not e.g. <code>/ /</code> ). In this case, any leading whitespace in EXPR is removed before splitting occurs, and the PATTERN is instead treated as if it were <code>/\\s+/</code>; in particular, this means that any contiguous whitespace (not just a single space character) is used as a separator. However, this special treatment can be avoided by specifying the pattern <code>/ /</code> instead of the string <code>\" \"</code>, thereby allowing only a single space character to be a separator. In earlier Perls ...</p>\n</blockquote>\n\n<p>So, if you don't care for multiple spaces use</p>\n\n<pre><code>my @fields = split ' ', $value;\n</code></pre>\n\n<p>Remember that with the near-equivalent <code>/\\s+/</code> you have to watch for leading space.</p>\n\n<hr>\n\n<p>Note that when using a <em>single</em> space (or tab) there can be surprises. For example, there can easily be a 'hidden' tab, when text and spaces happen to have the length of a tab so we don't notice any extra space as it all aligns right on the tab.  </p>\n\n<p>If there is no use of multiple spaces it is much safer to use <code>' '</code>.</p>\n"}], "owner": {"reputation": 57, "user_id": 4736434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c6b8c2e36b5c0839272b6431cafd5?s=128&d=identicon&r=PG&f=1", "display_name": "sikquiver", "link": "https://stackoverflow.com/users/4736434/sikquiver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 41386100, "answer_count": 1, "score": 2, "last_activity_date": 1483048464, "creation_date": 1483039503, "last_edit_date": 1483040242, "question_id": 41385996, "link": "https://stackoverflow.com/questions/41385996/perl-split-issue", "title": "Perl Split Issue", "body": "<p>I'm using the split function to split a string on white space and for some reason split is keeping the white spaces in the array I'm saving it. Here's the code</p>\n\n<pre><code>while (&lt;FP&gt;) {\n    if (/$END_SECTION/) { last; }\n    if (/^\\s*$/)        { next; }\n    chomp;\n    ( $name, $value ) = split m/:/, $_;\n    print __LINE__, \"name: $name Value: $value\\n\" if $debug;\n    if ( $name =~ /Diameter/ ) {    #if Diameter is found\n        print __LINE__, \"Diameter: $value\\n\" if $debug;\n        @fields = split /\\s/, $value;\n        print __LINE__, \" Fields:@fields\\n\" if $debug;\n        my $wafer_size = $fields[1];    #save index [0] to wafer_size\n        print __LINE__, \"Diameter: $wafer_size\\n\" if $debug;\n        if ( $wafer_size =~ /8/ ) {\n            $p-&gt;{Diameter} = \"200\";\n        } elsif ( $wafer_size =~ /6/ ) {\n            $p-&gt;{Diameter} = \"150\";\n        }\n        print __LINE__, \"Diameter: $p-&gt;{Diameter}\\n\" if $debug;\n    }\n}\n</code></pre>\n\n<p>the text I'm splitting is this:    </p>\n\n<pre><code>Wafer Diameter: 8 IN                                   \nFlat Location (T,B,L,R): L   \nDie X Step: 31800 UM  \nDie Y Step: 25795 UM\n</code></pre>\n\n<p>when the code finds <code>/Diameter/</code> is saves the empty spaces in the <code>@fields</code> array. Any idea why this is happening?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1483038838, "post_id": 41385864, "comment_id": 69973935, "body": "There has to be a better way to do what you&#39;re doing than forking 32000 processes."}, {"owner": {"reputation": 109, "user_id": 3686233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/825b82bb7de72b36aaf273b2125197ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3686233", "link": "https://stackoverflow.com/users/3686233/user3686233"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483038955, "post_id": 41385864, "comment_id": 69973987, "body": "Its a sort of stress testing of the application. The application supports at max 32000 instances."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483038983, "post_id": 41385864, "comment_id": 69973996, "body": "Does it work with 31999?"}, {"owner": {"reputation": 109, "user_id": 3686233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/825b82bb7de72b36aaf273b2125197ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3686233", "link": "https://stackoverflow.com/users/3686233/user3686233"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483039053, "post_id": 41385864, "comment_id": 69974022, "body": "No, the lower limit I got was something around 500"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483039119, "post_id": 41385864, "comment_id": 69974053, "body": "What&#39;s the result of <code>ulimit -u</code> when you type that into your terminal?"}, {"owner": {"reputation": 3968, "user_id": 560902, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/iVnPX.png?s=128&g=1", "display_name": "Jochen Bedersdorfer", "link": "https://stackoverflow.com/users/560902/jochen-bedersdorfer"}, "edited": false, "score": 0, "creation_date": 1483039155, "post_id": 41385864, "comment_id": 69974072, "body": "This might help: <a href=\"https://superuser.com/questions/559709/how-to-change-the-maximum-number-of-fork-process-by-user-in-linux\" title=\"how to change the maximum number of fork process by user in linux\">superuser.com/questions/559709/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1483039161, "post_id": 41385864, "comment_id": 69974075, "body": "OK, so that&#39;s the result of your stress test -- it supports around 500.  In that environment, that is. The messages show that you are running out of (other) resources."}, {"owner": {"reputation": 109, "user_id": 3686233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/825b82bb7de72b36aaf273b2125197ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3686233", "link": "https://stackoverflow.com/users/3686233/user3686233"}, "edited": false, "score": 0, "creation_date": 1483039176, "post_id": 41385864, "comment_id": 69974087, "body": "I increased it upto 500000"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483039213, "post_id": 41385864, "comment_id": 69974101, "body": "@user3686233 what does it return when you type <code>ulimit -u</code> though?"}, {"owner": {"reputation": 109, "user_id": 3686233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/825b82bb7de72b36aaf273b2125197ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3686233", "link": "https://stackoverflow.com/users/3686233/user3686233"}, "edited": false, "score": 0, "creation_date": 1483039276, "post_id": 41385864, "comment_id": 69974130, "body": "I have set ulimit as 500000"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 6, "last_activity_date": 1483041487, "creation_date": 1483041487, "answer_id": 41386404, "question_id": 41385864, "link": "https://stackoverflow.com/questions/41385864/perl-unable-to-fork-32000-processes/41386404#41386404", "title": "Perl :: Unable to fork 32000 processes", "body": "<p>Your issue isn't with Perl, it's an operating system limitation.  Your kernel only allows the allocation of a finite number of ptys, and this is a global (system-wide) limit, not a per-user or per-process limit.</p>\n\n<p>Assuming you are running under Linux, <code>man 7 pty</code> tells us that</p>\n\n<blockquote>\n  <p>In kernels up to and including 2.6.3, this  limit  is configured  at \n  kernel  compilation  time (CONFIG_UNIX98_PTYS), and the permitted\n  number of pseudoterminals can be up to 2048, with  a  default setting \n  of  256.   Since  kernel  2.6.4,  the  limit  is  dynamically\n  adjustable via  /proc/sys/kernel/pty/max,  and  a  corresponding \n  file, /proc/sys/kernel/pty/nr,  indicates  how  many pseudoterminals\n  are currently in use.</p>\n</blockquote>\n\n<p>Thus, if you're using a relatively recent (2.6.4 or later) Linux kernel, you should be able to use <code>cat /proc/sys/kernel/pty/max</code> to see your system-wide maximum pty count.</p>\n\n<p>According to <a href=\"https://www.cyberciti.biz/tips/howto-linux-increase-pty-session.html\" rel=\"noreferrer\">this document</a> (I have not tried it myself to verify), you should be able to change the limit by editing <code>/etc/sysctl.conf</code> and adding the line <code>kernel.pty.max = 5120</code> (or whatever number), then using <code>sysctl -p</code> to reload the sysctl configuration.</p>\n\n<p>But note that each pty requires the allocation of other system resources (memory, file handles, etc.), so increasing the maximum ptys to an arbitrarily large number may do Very Bad Things to the rest of the system.</p>\n"}], "owner": {"reputation": 109, "user_id": 3686233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/825b82bb7de72b36aaf273b2125197ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3686233", "link": "https://stackoverflow.com/users/3686233/user3686233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483098890, "creation_date": 1483038772, "last_edit_date": 1483098890, "question_id": 41385864, "link": "https://stackoverflow.com/questions/41385864/perl-unable-to-fork-32000-processes", "title": "Perl :: Unable to fork 32000 processes", "body": "<p>I am writing a Perl script which fork 32000 processes and each processes perform a bunch of operation for 24 hours. But I am unable to fork that many processes. Any workaround? Please note,the code works perfectly fine for fewer number of processes. Here is the error which I am getting: </p>\n\n<pre><code>pty_allocate(nonfatal): posix_openpt(): No space left on device at /usr/local/lib64/perl5/IO/Pty.pm line 24.\npty_allocate(nonfatal): getpt(): No such file or directory at /usr/local/lib64/perl5/IO/Pty.pm line 24.\npty_allocate(nonfatal): getpt(): No such file or directory at /usr/local/lib64/perl5/IO/Pty.pm line 24.\npty_allocate(nonfatal): openpty(): No such file or directory at /usr/local/lib64/perl5/IO/Pty.pm line 24.\npty_allocate(nonfatal): open(/dev/ptmx): No space left on device at /usr/local/lib64/perl5/IO/Pty.pm line 24.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1483044273, "post_id": 41385456, "comment_id": 69976156, "body": "Related: <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=127182\" rel=\"nofollow noreferrer\">Bug #127182 for perl5: One digit short to correctly stringify a double</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483887869, "post_id": 41385456, "comment_id": 70273250, "body": "See also <a href=\"http://stackoverflow.com/q/41312890/2173773\">Why is Perl inconsistent with sprintf rounding?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483041750, "post_id": 41385913, "comment_id": 69975175, "body": "Nice resource, thank you. I searched and couldn&#39;t locate it in docs."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1483973623, "post_id": 41385913, "comment_id": 70306391, "body": "Thank you for your comments <a href=\"http://stackoverflow.com/questions/41400902/why-does-foo-bar-autovivify-but-foo-doesnt\">here</a>. This is your bounty as I promise ;-)"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 15, "last_activity_date": 1483043604, "last_edit_date": 1495539965, "creation_date": 1483039040, "answer_id": 41385913, "question_id": 41385456, "link": "https://stackoverflow.com/questions/41385456/why-do-i-get-a-different-result-when-i-do-math-on-a-quoted-vs-non-quoted-variab/41385913#41385913", "title": "Why do I get a different result when I do math on a quoted vs. non-quoted variable?", "body": "<p><code>$v1</code> is not exactly 1:</p>\n\n<pre><code>$ perl -e'\n    $v1 = (0.520371764072297 * 0.520371764072297) +\n          (0.853939826425894 * 0.853939826425894 * 1);\n    printf \"%.16f\\n\", $v1\n'\n1.0000000000000004\n</code></pre>\n\n<p>However, when you stringify it, <a href=\"https://stackoverflow.com/a/14104687/176646\">Perl only keeps 15 digits of precision</a>:</p>\n\n<pre><code>$ perl -MDevel::Peek -e'\n    $v1 = (0.520371764072297 * 0.520371764072297) +\n          (0.853939826425894 * 0.853939826425894 * 1);\n    Dump \"$v1\"\n'\nSV = PV(0x2345090) at 0x235a738\n  REFCNT = 1\n  FLAGS = (PADTMP,POK,pPOK)\n  PV = 0x2353980 \"1\"\\0      # string value is exactly 1\n  CUR = 1\n  LEN = 16\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5300851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JYTx3.jpg?s=128&g=1", "display_name": "x2m", "link": "https://stackoverflow.com/users/5300851/x2m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1483886639, "creation_date": 1483037031, "last_edit_date": 1483042986, "question_id": 41385456, "link": "https://stackoverflow.com/questions/41385456/why-do-i-get-a-different-result-when-i-do-math-on-a-quoted-vs-non-quoted-variab", "title": "Why do I get a different result when I do math on a quoted vs. non-quoted variable?", "body": "<p>I am working with latitudes and longitudes to determine business locations and ran into some odd behavior.</p>\n\n<p>In the Perl snippet below, the equation assigning data to <code>$v1</code> evaluates to 1. When I call <code>acos($v1)</code>, I receive a <code>sqrt</code> error. When I call <code>acos(\"$v1\")</code> (with quotes), I do not. Calling <code>acos(1)</code> does not produce the error, either. Why do the quotes matter?</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nsub acos {\n    my $rad = shift;\n    return (atan2(sqrt(1 - $rad**2), $rad));\n}\n\nmy $v1 = (0.520371764072297 * 0.520371764072297) +\n         (0.853939826425894 * 0.853939826425894 * 1);\n\nprint acos($v1);   # Can't take sqrt of -8.88178e-16 at foo line 8.\nprint acos(\"$v1\"); # 0\n</code></pre>\n"}, {"tags": ["perl", "batch-file", "escaping", "syntax-error", "bareword"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483038024, "post_id": 41385618, "comment_id": 69973550, "body": "That shouldn&#39;t be necessary: you have escaped far more characters than you need to."}], "tags": [], "owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "is_accepted": false, "score": -1, "last_activity_date": 1483037644, "creation_date": 1483037644, "answer_id": 41385618, "question_id": 41385158, "link": "https://stackoverflow.com/questions/41385158/using-a-windows-batch-file-command-line-that-runs-a-perl-s-command-how/41385618#41385618", "title": "using a windows batch file/command line that runs a perl s/(&quot;|&#39;)// command, how to do prevent a bareword found where operator expected error?", "body": "<p>So here is the ugliness that solved this problem. At least without a syntax error. However, the S&amp;R logic did not carry through and I will have to remove the parts that break the logic.</p>\n\n<pre><code>perl -p0777e \"\"s^/^(^'^|\"\"^)^/^&amp;^/g\"\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>Back into the salt mines after lunch...</p>\n\n<p>Thank you for trying @SAM-6!</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483043931, "post_id": 41385710, "comment_id": 69976036, "body": "if &#39; or &quot; then replace with &amp;. It still isn&#39;t replacing single quotes or double quotes in the output. But I&#39;m going to try some of the other suggestions like using hex/octal notation."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483044423, "post_id": 41385710, "comment_id": 69976206, "body": "@noobuserpm: My code replaces single quotes but only <i>pairs of</i> double quotes. I&#39;ve updated it. Does that work for you?"}, {"owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483044601, "post_id": 41385710, "comment_id": 69976287, "body": "It was trivial for me to try it (yay for scripting) but it did not work. It started streaming from the output file. Which is a lot of text. Not sure what went wrong there, but since I have the answer, I&#39;m going to let this one go. Thanks for trying though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483044698, "post_id": 41385710, "comment_id": 69976328, "body": "@noobuserpm: I thought it was clear that I had simply omitted the redirection of the output to avoid obfuscating the solution. If you want to send your data to a file then you should write <code>perl -pe &quot;s&#47;[&#39;\\&quot;]&#47;^&amp;&#47;g&quot; E:\\output.csv &gt; E:\\output2.csv</code>"}, {"owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483045073, "post_id": 41385710, "comment_id": 69976480, "body": "that&#39;s what I ran. I only changed the &quot;search for&quot; field. I kept the I/O options the same as my original. It started streaming to the cmd window which was new behavior."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483045898, "post_id": 41385710, "comment_id": 69976799, "body": "@noobuserpm: Then I suspect that you made a mistake. The only double quotes should be around the substution and the escaped one in the character class. It sounds like you dropped the <code>&gt;</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1483044305, "last_edit_date": 1483044305, "creation_date": 1483037981, "answer_id": 41385710, "question_id": 41385158, "link": "https://stackoverflow.com/questions/41385158/using-a-windows-batch-file-command-line-that-runs-a-perl-s-command-how/41385710#41385710", "title": "using a windows batch file/command line that runs a perl s/(&quot;|&#39;)// command, how to do prevent a bareword found where operator expected error?", "body": "<p>You don't need anything so convoluted as that</p>\n\n<p>But what are you trying to do? This converts all single quotes <code>'</code> or pairs of double quotes <code>\"\"</code> to a single ampersand <code>&amp;</code></p>\n\n<pre><code>perl -0777 -pe \"s/('|\\\"\\\")/&amp;/g\" E:\\output.csv\n</code></pre>\n\n<p>If you want to convert just single or double quotes to ampersands then it's even easier</p>\n\n<pre><code>perl -0777 -pe \"s/('|\\\")/^&amp;/g\" E:\\output.csv\n</code></pre>\n\n<p>or, using a character class</p>\n\n<pre><code>perl -0777 -pe \"s/['\\\"]/^&amp;/g\" E:\\output.csv\n</code></pre>\n\n<p>But why are you slurping the whole file? Line by line is fine, like this</p>\n\n<pre><code>perl -pe \"s/['\\\"]/^&amp;/g\" E:\\output.csv\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "edited": false, "score": 0, "creation_date": 1483044428, "post_id": 41385942, "comment_id": 69976210, "body": "This worked. Tbf to the other posts, I realized I was checking the logic using the wrong output file, but once I fixed that and I removed all of the escape characters, it was syntactically and logically correct. Thank you so much for saving my last work of 2016!"}, {"owner": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483045694, "post_id": 41385942, "comment_id": 69976734, "body": "@Borodin, yes, <code>\\&quot;</code> is clearer, but you have three parsers (<code>cmd</code>, argument parser, regular expression parser) <i>&quot;fighting&quot;</i> to deal with quoted data start/end and special characters. In this case, clearer still generates problems."}], "tags": [], "owner": {"reputation": 65411, "user_id": 2861476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a68ff169e2604d79847ef252e7b20ae?s=128&d=identicon&r=PG&f=1", "display_name": "MC ND", "link": "https://stackoverflow.com/users/2861476/mc-nd"}, "is_accepted": true, "score": 3, "last_activity_date": 1483044345, "last_edit_date": 1483044345, "creation_date": 1483039211, "answer_id": 41385942, "question_id": 41385158, "link": "https://stackoverflow.com/questions/41385158/using-a-windows-batch-file-command-line-that-runs-a-perl-s-command-how/41385942#41385942", "title": "using a windows batch file/command line that runs a perl s/(&quot;|&#39;)// command, how to do prevent a bareword found where operator expected error?", "body": "<p>The easiest way to handle it is to remove the problematic quote character </p>\n\n<pre><code>perl -p0777e \"s/('|\\x22)/&amp;/g\" \"e:\\output.csv\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118713, "user_id": 1012053, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDAXz.jpg?s=128&g=1", "display_name": "dbenham", "link": "https://stackoverflow.com/users/1012053/dbenham"}, "is_accepted": false, "score": 1, "last_activity_date": 1483090563, "last_edit_date": 1483090563, "creation_date": 1483046262, "answer_id": 41387304, "question_id": 41385158, "link": "https://stackoverflow.com/questions/41385158/using-a-windows-batch-file-command-line-that-runs-a-perl-s-command-how/41387304#41387304", "title": "using a windows batch file/command line that runs a perl s/(&quot;|&#39;)// command, how to do prevent a bareword found where operator expected error?", "body": "<p>You need to worry about escaping/quoting characters for both cmd.exe and perl.exe, and the rules are different.</p>\n\n<p><strong>cmd.exe</strong></p>\n\n<p>Poison characters like <code>&amp;</code>, <code>|</code>, etc. must be either quoted as <code>\"&amp;\"</code>, or escaped as <code>^&amp;</code> if they are to be interpreted as literals by cmd.exe.</p>\n\n<p>Double quotes are a state machine - the first unescaped quote turns quoting on, and the next one turns it off. A quote can be escaped as <code>^\"</code> to prevent quoting semantics from turning on, but once on, a quote cannot be escaped to prevent it from turning quoting off.</p>\n\n<p>If there are an odd number of quotes, then one of them must be escaped, else the quote semantics will continue past the last quote.</p>\n\n<p><strong>perl.exe</strong></p>\n\n<p>The double quote literal must be escaped as <code>\\\"</code></p>\n\n<p><strong>combined</strong></p>\n\n<p>If a quote needs to be escaped for both cmd.exe and perl.exe, you must remember that the cmd.exe escape is applied first. So the caret must go directly in front of the quote like <code>\\^\"</code>. After cmd.exe removes the caret escape, perl only sees <code>\\\"</code>.</p>\n\n<p>So, using the information above, any of the following should work.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -p0777e s/('^|\\^\")/^&amp;/g \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e \"s/('|\\\")/^&amp;/g^\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e ^\"s/('^|\\\")/&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>You should not require the parentheses</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -p0777e s/'^|\\^\"/^&amp;/g \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e \"s/'|\\\"/^&amp;/g^\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e ^\"s/'^|\\\"/&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>Another alternative is to use a character class instead of alternation</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -p0777e s/['\\^\"]/^&amp;/g \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e ^\"s/['\\\"]/&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7323957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62ec4763e1fa751f9b5b0c4d271b59b?s=128&d=identicon&r=PG&f=1", "display_name": "noobuserpm", "link": "https://stackoverflow.com/users/7323957/noobuserpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 41385942, "answer_count": 4, "score": 2, "last_activity_date": 1483090563, "creation_date": 1483035598, "last_edit_date": 1483036800, "question_id": 41385158, "link": "https://stackoverflow.com/questions/41385158/using-a-windows-batch-file-command-line-that-runs-a-perl-s-command-how", "title": "using a windows batch file/command line that runs a perl s/(&quot;|&#39;)// command, how to do prevent a bareword found where operator expected error?", "body": "<p>I've read the other posts and somehow the solutions don't work.</p>\n\n<pre><code>perl -p0777e \"s/('|\"\")/^&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>I've tried</p>\n\n<pre><code>perl -p0777e \"s/('|^\")/^&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\nperl -p0777e \"s/('|\\\")/^&amp;/g\" \"E:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>I tried putting all of the other possible funny characters with escape characters with no success. I know that it's the \" character that is the issue because I'm running variations of this perl command in the same FOR loop. </p>\n\n<p>This is what the error message says for the top most syntax: </p>\n\n<pre><code>Bareword found where operator expected at -e line 1, near \"s/('|\")/^&amp;/g E\"\nsyntax error at -e line 1, near \"s/('|\")/^&amp;/g E\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>I can't tell if the E is included because of proximity or because of the \" confusion. I can experiment with that.</p>\n\n<p>Can anyone help me figure out how to pass this S&amp;R command safely? Thank you in advance.</p>\n\n<p>EDIT: I can't even comment correctly...</p>\n\n<p>Latest attempt is </p>\n\n<pre><code>perl -p0777e \"s/^(^'^|^\"^)/^&amp;/g\" \"E^:\\output.csv\" &gt; \"E:\\output2.csv\"\n</code></pre>\n\n<p>with no success. Error message is </p>\n\n<pre><code>Bareword found where operator expected at -e line 1, near \"s/^(^'^|^)/&amp;/g E\"\nsyntax error at -e line 1, near \"s/^(^'^|^)/&amp;/g E\" Execution of -e aborted\ndue to compilation errors.\n</code></pre>\n"}, {"tags": ["python", "performance", "perl", "rabbitmq", "snmptrapd"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7355059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863890c134d97825981961dbf6c033a?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Costa", "link": "https://stackoverflow.com/users/7355059/fernando-costa"}, "edited": false, "score": 0, "creation_date": 1483118716, "post_id": 41385042, "comment_id": 70002257, "body": "Hi ikegami, I am questioning how can I mantain the channel always open. I&#39;m not trying to send messages on a closed channel. Don&#39;t treat me like I am stupid. No, the problem is in the publisher. All the messages I send on the publisher arrive on the consumer. The machine that contains the publisher struggles to send all the messages,  and it&#39;s not a resource problem because none of processes consumes all the CPU/Memory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7355059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863890c134d97825981961dbf6c033a?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Costa", "link": "https://stackoverflow.com/users/7355059/fernando-costa"}, "edited": false, "score": 0, "creation_date": 1483120429, "post_id": 41385042, "comment_id": 70003019, "body": "A channel is just a number that&#39;s sent with every message."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7355059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863890c134d97825981961dbf6c033a?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Costa", "link": "https://stackoverflow.com/users/7355059/fernando-costa"}, "edited": false, "score": 0, "creation_date": 1483120638, "post_id": 41385042, "comment_id": 70003119, "body": "If basic_publish was failing, you&#39;d be getting an exception. The problem is not on the publisher."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 7355059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863890c134d97825981961dbf6c033a?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Costa", "link": "https://stackoverflow.com/users/7355059/fernando-costa"}, "edited": false, "score": 0, "creation_date": 1483138479, "post_id": 41385042, "comment_id": 70009968, "body": "As you said &quot;at the network level I receive all the messages&quot;."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1483035478, "last_edit_date": 1483035478, "creation_date": 1483034933, "answer_id": 41385042, "question_id": 41384927, "link": "https://stackoverflow.com/questions/41384927/always-open-publish-channel-rabbitmq/41385042#41385042", "title": "Always Open Publish Channel RabbitMQ", "body": "<p>Asking if you can talk to RabbitMQ server without connecting to it first is like asking if you can talk to someone on the telephone without connecting to their phone first (by dialing and answering).</p>\n\n<p>You really should reuse your connection if you're going to send multiple messages, but you do need a connection first!</p>\n\n<p>Anyway, the problem isn't with the publisher. It's the consumer that's buggy if it's losing messages.</p>\n"}], "owner": {"reputation": 1, "user_id": 7355059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863890c134d97825981961dbf6c033a?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Costa", "link": "https://stackoverflow.com/users/7355059/fernando-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483035478, "creation_date": 1483034418, "last_edit_date": 1483035237, "question_id": 41384927, "link": "https://stackoverflow.com/questions/41384927/always-open-publish-channel-rabbitmq", "title": "Always Open Publish Channel RabbitMQ", "body": "<p>I am trying to integrate snmptrapd and RabbitMQ for delivering traps notifications to an exterior system.</p>\n\n<p>My system is composed of 3 components:</p>\n\n<ul>\n<li>A Linux virtual machine with snmptrapd and RabbitMQ (Publisher);</li>\n<li>A Linux virtual machine with RabbitMQ (Consumer);</li>\n<li>A Linux bare metal with docker so I can have a lot of containers sending traps (using nping)</li>\n</ul>\n\n<p>The snmptrapd part is simple:</p>\n\n<pre><code>authCommunity execute mycom\ntraphandle default /root/some_script\n</code></pre>\n\n<p>In my first attempts the <code>some_script</code> was written in Python, but the performance was not perfect (20 containers sending 1 trap per second during 10 seconds, I only received 160 messages in the consumer).</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport pika\nimport sys\n\nmessage = \"\"\n\nfor line in sys.stdin :\n        message += (line)\n\ncredentials = pika.PlainCredentials('test', 'test')\n\nparameters  = pika.ConnectionParameters('my_ip', 5672, '/', credentials)\n\nconnection  = pika.BlockingConnection(parameters)\nchannel     = connection.channel()\n\nchannel.queue_declare(queue='snmp')\n\nchannel.basic_publish(exchange='',\n                      routing_key='snmp',\n                      body=message)\nconnection.close()\n</code></pre>\n\n<p>I switched to Perl and now I can get 200 traps/messages.</p>\n\n<p>My Perl script uses <a href=\"https://metacpan.org/pod/Net::AMQP::RabbitMQ\" rel=\"nofollow noreferrer\"><code>Net::AMQP::RabbitMQ</code></a></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Net::AMQP::RabbitMQ;\n\nforeach my $line ( &lt;STDIN&gt; ) {\n    chomp( $line );\n    $message = \"$message\\n$line\";\n}\n\nmy $mq = Net::AMQP::RabbitMQ-&gt;new();\n\n$mq-&gt;connect(\"my_ip\", {\n    user     =&gt; \"test\",\n    password =&gt; \"test\",\n    vhost    =&gt; \"/\"\n});\n\n$mq-&gt;channel_open(1);\n$mq-&gt;publish(1, \"snmp\", $message);\n$mq-&gt;disconnect();\n</code></pre>\n\n<p>But I want better. I tried 200 containers sending 1 trap per second and it failed miserably, receiving only around 10% of messages in the consumer.</p>\n\n<p>I think this has to do with the overhead of always have to open, publish and close the channel in RabbitMQ per trap received, because at the network level I receive all the messages (checked trough a tcpdump).</p>\n\n<p>Is there a way to keep an always-open publish channel so I don't have to reopen/create a connection to the queue?</p>\n"}, {"tags": ["perl", "echo", "system", "io-redirection"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1483377787, "post_id": 41381870, "comment_id": 70067531, "body": "Your code isn&#39;t valid Perl (it&#39;s missing some quotes), so it won&#39;t run. Also, your script is probably doing something else, since <code>perl -E &#39;system(&quot;echo hi there &gt;&gt;log.txt&quot;);&#39;</code> works as expected. Show use your real code if you want us to help."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "edited": false, "score": 0, "creation_date": 1483088418, "post_id": 41382068, "comment_id": 69988638, "body": "actually that was my first appraoch, but for some reason, the .exe I am calling hangs sometimes when I call it using backticks, but does not when I do with system().. anyway to do it with system()?  I might as well also only use backticks for the echo.. that might be a good solution.."}], "tags": [], "owner": {"reputation": 985, "user_id": 3835948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/747c13ebadc9f0c860110aec544b26e9?s=128&d=identicon&r=PG&f=1", "display_name": "Randrian", "link": "https://stackoverflow.com/users/3835948/randrian"}, "is_accepted": false, "score": 1, "last_activity_date": 1483023299, "creation_date": 1483023299, "answer_id": 41382068, "question_id": 41381870, "link": "https://stackoverflow.com/questions/41381870/perl-system-echo-output-redirection/41382068#41382068", "title": "perl system echo output redirection", "body": "<p>You could call the command using backticks:</p>\n\n<pre><code>`echo hi there &gt;&gt;log.txt`;\n</code></pre>\n\n<p>Then the result will not be printed to STDOUT, but returned, so you could store it in a variable. But you don't need to, you can also just ignore it.</p>\n"}], "owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483384191, "creation_date": 1483022524, "last_edit_date": 1483384191, "question_id": 41381870, "link": "https://stackoverflow.com/questions/41381870/perl-system-echo-output-redirection", "title": "perl system echo output redirection", "body": "<p>The below code</p>\n\n<pre><code>system( echo hi there &gt;&gt;log.txt );\n</code></pre>\n\n<p>redirects correctly, but also prints the output to STDOUT.. so when I run my perl script I see</p>\n\n<pre><code> perl script.pl\n hi there\n</code></pre>\n\n<p>and the log.txt file is updated correclty.</p>\n\n<p>Question: how can I get it to only update the file and not STDOUT.</p>\n\n<p>Note:\nPlease do not suggest using a file handle, I have reasons to make me not want to do that.</p>\n"}, {"tags": ["r", "matlab", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "edited": false, "score": 1, "creation_date": 1483032606, "post_id": 41381802, "comment_id": 69971099, "body": "@ProcrastinatusMaximus: This question should not be tagged with <i>R</i> or <i>MATLAB</i>. Knowledge of those languages is neither necessary nor helpful in providing a solution."}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483033453, "post_id": 41381802, "comment_id": 69971474, "body": "@Borodin - I disagree.  If you are converting languages, wouldn&#39;t a knowledge of those syntaxes be required to do that?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 1, "creation_date": 1483034116, "post_id": 41381802, "comment_id": 69971783, "body": "@RichScriven: As I commented below, the problem is how to use Perl to convert spaces to commas within a string, but &quot;confine the operation to between the [ &amp; ]?&quot;. Not even minimal knowledge of R is required for that simple task."}, {"owner": {"reputation": 117262, "user_id": 1412059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MQ33X.jpg?s=128&g=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/1412059/roland"}, "edited": false, "score": 2, "creation_date": 1483038376, "post_id": 41381802, "comment_id": 69973712, "body": "Literal translations produce inferior code. Don&#39;t claim R is inefficient if the R code is slower than the original Matlab code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483051440, "post_id": 41381802, "comment_id": 69978835, "body": "@tranzmatt  In the light of the exchanges, I&#39;d like to pitch in.  Translating code correctly is very difficult and if there are good existing tools that&#39;d be best.  However, if you are going to process the file(s) yourself, from major languages I&#39;d suggest to use Perl or Python or C++, in no particular order. There is Ruby as well, and there are others, but MATLAB or R would be an awkward choice for this (unless these are the languages you know)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484256321, "post_id": 41381802, "comment_id": 70447961, "body": "I hope you got this sorted. As a reminder, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 0, "creation_date": 1483030677, "post_id": 41382221, "comment_id": 69970069, "body": "An interesting way to do it in R.  I might be better off hacking the mat2r script than trying to do it in perl?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483031430, "post_id": 41382221, "comment_id": 69970495, "body": "@NathanDay: R is a language intended for statistical and graphical application, and has only minimal text support. Why are you trying to use R to convert MATLAB to R?"}, {"owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 0, "creation_date": 1484163751, "post_id": 41382221, "comment_id": 70401438, "body": "Someone created a matconv library with the mat2r function.  It does some of the basic, but not all like handling syntax on vectors/matrices.  Originally, I thought perl might be quicker, but now I&#39;m thinking R to expand the library (and make it available to others), plus force me to learn R more.  If that makes sense."}], "tags": [], "owner": {"reputation": 9026, "user_id": 5878751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60cb34eaa09b522a6c26077f27e1f26?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/5878751/nate"}, "is_accepted": false, "score": 3, "last_activity_date": 1483023792, "creation_date": 1483023792, "answer_id": 41382221, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41382221#41382221", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>you could use a capture expression to grab the <code>sub_string</code> inside of the brackets and manipulate it separately:</p>\n\n<pre><code>string &lt;- \"bbox = [minX maxX minY maxY minZ maxZ]\"\n\nsub_string &lt;- gsub(\".*(\\\\[.*\\\\])\", \"\\\\1\", string)\nsub_string &lt;- gsub(\" \", \",\", sub_string)\nsub_string &lt;- gsub(\"\\\\[\", \"c(\", sub_string)\nsub_string &lt;- gsub(\"\\\\]\", \")\", sub_string)\n\nfinal &lt;- gsub(\"=\", \"&lt;-\", string)\nfinal &lt;- gsub(\"\\\\[.*\", sub_string, final)\nfinal\n[1] \"bbox &lt;- c(minX,maxX,minY,maxY,minZ,maxZ)\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 2, "creation_date": 1483030680, "post_id": 41382346, "comment_id": 69970072, "body": "An interesting way to do it in R.  I might be better off hacking the mat2r script than trying to do it in perl?"}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 0, "creation_date": 1483031211, "post_id": 41382346, "comment_id": 69970382, "body": "@tranzmatt these approaches seem pretty straightforward to me"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483031415, "post_id": 41382346, "comment_id": 69970481, "body": "@ProcrastinatusMaximus: R is a language intended for statistical and graphical applications, and has only minimal text support. Why are you trying to use R to convert MATLAB to R?"}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483031693, "post_id": 41382346, "comment_id": 69970637, "body": "@Borodin Why the downvote? OP asked for a method to go from one string to another. I provided two alternatives with R as the question was also labelled with <a href=\"https://stackoverflow.com/questions/tagged/r\">r</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483031771, "post_id": 41382346, "comment_id": 69970685, "body": "@ProcrastinatusMaximus: Had the request been to convert C to machine code using Perl, would you have offered a machine code solution?"}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483031894, "post_id": 41382346, "comment_id": 69970751, "body": "@Borodin again: what is wrong with providing an alternative in R?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483032068, "post_id": 41382346, "comment_id": 69970837, "body": "@ProcrastinatusMaximus: Because the OP asked for it: <i>&quot; I&#39;d like to use perl to go from...&quot;</i> and because they mention <i>&quot;the existing scripts&quot;</i>, which are presumably also in Perl. If you are recommending a wholesale rewrite into R, or even that part of the suite should be written in R instead of Perl, then you should say so in your answer and have a very good reason for it. Since the actual reason is that you don&#39;t Perl, I think you should have just stayed quiet. You even edited the subject line to remove <i>Perl</i>, which further hid the requirement."}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 4, "creation_date": 1483032114, "post_id": 41382346, "comment_id": 69970852, "body": "The question is tagged R.  I see no problem in providing an R answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "edited": false, "score": 0, "creation_date": 1483032302, "post_id": 41382346, "comment_id": 69970946, "body": "@RichScriven: When the question is clearly about using Perl to translate MATLAB to R, and <b><i>R</i></b> is tagged only because it is the destination language, I think it is perverse to use that as permission to avoid the OP&#39;s requirement. Even an <i>awk</i> or <i>sed</i> answer would have been more appropriate."}, {"owner": {"reputation": 89641, "user_id": 3063910, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/WybPg.jpg?s=128&g=1", "display_name": "Rich Scriven", "link": "https://stackoverflow.com/users/3063910/rich-scriven"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1483032543, "post_id": 41382346, "comment_id": 69971074, "body": "@Borodin - I don&#39;t understand why you are so upset about this.  The question is tagged with both R and Perl.  An R answer is here, and you can provide a Perl answer (which you&#39;ve done), and we all live happily ever after.  Is it really that big of a deal?"}, {"owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 3, "creation_date": 1483032656, "post_id": 41382346, "comment_id": 69971116, "body": "Given that the OP already explicitly mentioned the <code>mat2r</code> script, which is written in R, in this comment thread he obviously doesn&#39;t have an issue using R. This has quickly approached needlessly pedantic and rather childish. Rather than attacking each other and getting into an edit battle, how about you <b>ask the OP for clarification</b> and not make assumptions? Text on the internet and all..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 0, "creation_date": 1483033064, "post_id": 41382346, "comment_id": 69971311, "body": "@excaza: I don&#39;t think any clarification is needed. The core question is <i>&quot; I&#39;d like to use perl to go from [MATLAB] to [R]&quot;</i> which this doesn&#39;t solve. I would initially have written my answer, made my comments about the suitability of the R solutions, and left it at that, except that Mr Maximus has chosen to prevaricate."}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483033397, "post_id": 41382346, "comment_id": 69971450, "body": "@Borodin If you don&#39;t know [MATLAB] or [R], how could one possibly convert from one to the other? Furthermore: I removed <i>Perl</i> from the title as it was also tagged with <i>Perl</i>, as a result people from the <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a> community would see it anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483033868, "post_id": 41382346, "comment_id": 69971675, "body": "@ProcrastinatusMaximus: Ordinarily you would be correct, but the original message was clearly mistagged, and in this case the removal of <i>Perl</i> from the subject line makes it appear as if R or MATLAB solutions are viable. The problem is how to use Perl to convert spaces to commas within a string, but <i>&quot;confine the operation to between the [ &amp; ]?&quot;</i>. Not even minimal knowledge of R is required for that task."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 0, "creation_date": 1483036055, "post_id": 41382346, "comment_id": 69972681, "body": "@excaza: I think the call to maturity applies principally to the downvoter of my perfectly-good answer. If you thought that nothing more should be said then why did you weigh in in the first place and become <i>&quot;needlessly pedantic and rather childish&quot;</i> yourself."}, {"owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1483036441, "post_id": 41382346, "comment_id": 69972853, "body": "@Borodin If you&#39;d like to continue hashing this out, you&#39;re welcome to <a href=\"http://chat.stackoverflow.com/users/2748311/excaza\">find me in chat</a>."}, {"owner": {"reputation": 672, "user_id": 3968793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/upTQO.jpg?s=128&g=1", "display_name": "ballBreaker", "link": "https://stackoverflow.com/users/3968793/ballbreaker"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1483038039, "post_id": 41382346, "comment_id": 69973560, "body": "@Borodin if the OP accepts your answer, it will be pushed to the top. By what you&#39;re saying, this should happen anyways as he&#39;s looking for a Perl solution. Having alternatives doesn&#39;t hurt anybody. In fact it may help somebody in the future, so let&#39;s just forget about the imaginary unicorn points for a moment, or drop the principle you&#39;re fighting so hard for. I don&#39;t know why I&#39;m even commenting, this whole mess will hopefully be cleaned up by a mod."}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1483039860, "post_id": 41382346, "comment_id": 69974372, "body": "@Borodin OP wants to translate some Matlab code to R code and likes to do that with Perl. This doesn&#39;t mean that giving an alternative in the target language is wrong. OP&#39;s problem can be solved in Perl, R and Matlab; which is reflected in the given answers. As <b>ballBreaker</b> said: <i>&quot;Having alternatives doesn&#39;t hurt anybody.&quot;</i>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483051113, "post_id": 41382346, "comment_id": 69978702, "body": "@ProcrastinatusMaximus  Huh ... what an exchange.  I have to say,  proposing a solution with either MATLAB or R for this <i>is</i> in fact a bit wrong -- it proposes a wrong tool for the job.  There is a question of translating a file to another. Good tools? Perl, Python ... even C++ would be far, far better than either R or MATLAB. There is of course nothing wrong in posting (possibly interesting) code, but it is misleading."}, {"owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 1, "creation_date": 1483982797, "post_id": 41382346, "comment_id": 70312213, "body": "Actually, I was happy to see the R version too as I&#39;m still learning how to program R.   Alas, and I partially blame myself for this, the R method provided here doesn&#39;t seem to account for leading spaces in the code.  So if the matlab original text has leading spaces (indented):       bbox = [minX maxX minY maxY minZ maxZ]  became  ,,,,,bbox &lt;- c(minX,maxX,minY,maxY,minZ,maxZ)"}, {"owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "reply_to_user": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 0, "creation_date": 1483983006, "post_id": 41382346, "comment_id": 70312328, "body": "@tranzmatt to deal with leading/trailing spaces, you can use the <code>trimws</code> function in R, which removes leading &amp; trailing spaces; you can do that by doing <code>strng &lt;- trimws(strng)</code> before the steps I presented in the answer (added it to the answer as well now)"}], "tags": [], "owner": {"reputation": 71424, "user_id": 2204410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlX7B.jpg?s=128&g=1", "display_name": "Jaap", "link": "https://stackoverflow.com/users/2204410/jaap"}, "is_accepted": false, "score": 8, "last_activity_date": 1483983220, "last_edit_date": 1495541349, "creation_date": 1483024230, "answer_id": 41382346, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41382346#41382346", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>Two alternative approaches with R:</p>\n\n<p><strong>1)</strong> Using only <code>gsub</code>:</p>\n\n<pre><code>strng &lt;- 'bbox = [minX maxX minY maxY minZ maxZ]'\n\nstrng &lt;- gsub('\\\\s', ',', strng)\nstrng &lt;- gsub(',=,', ' &lt;- ', strng)\nstrng &lt;- gsub('\\\\[', 'c(', strng)\nstrng &lt;- gsub('\\\\]', ')', strng)\n</code></pre>\n\n<p><strong>2)</strong> Using <code>chartr</code> and <code>gsub</code>:</p>\n\n<pre><code>strng &lt;- chartr(' []',',()', strng)\nstrng &lt;- gsub(',=,', ' &lt;- c', strng)\n</code></pre>\n\n<p>or in a single line:</p>\n\n<pre><code>gsub(',=,', ' &lt;- c', chartr(' []',',()',strng))\n</code></pre>\n\n<p>which both give:</p>\n\n<pre><code>&gt; strng\n[1] \"bbox &lt;- c(minX,maxX,minY,maxY,minZ,maxZ)\"\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>With the <code>gsub</code>-function (format: <code>gsub(pattern, replacement, x, ...)</code>; see <code>?gsub</code> for the remaining parameters) you can replace speciic characters (or charactersets).</li>\n<li>With the <code>chartr</code>-function (format: <code>chartr(old, new, x)</code>) you can translate each character in <code>x</code> that is specified in <code>old</code> to the corresponding character specified in <code>new</code>. </li>\n</ul>\n\n<p>If the string has leading or trailing spaces (as said in the <a href=\"https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41382346?noredirect=1#comment70312213_41382346\">comments</a>), you should start both options with <code>strng &lt;- trimws(strng)</code> first.</p>\n\n<hr>\n\n<p>Notes:</p>\n\n<ol>\n<li>Converting code from one language to another with regular expressions might not be the right way to go as you will highly probably run into edge-cases. Rewriting your code in R will require a higher time investment, but worth the trouble if you are going to switch to R.</li>\n<li>Some extra resources:\n\n<ul>\n<li>A <a href=\"/questions/tagged/bash\" class=\"post-tag\" title=\"show questions tagged &#39;bash&#39;\" rel=\"tag\">bash</a> <a href=\"https://stat.ethz.ch/pipermail/r-help/2002-October/025532.html\" rel=\"nofollow noreferrer\">script</a> written by Paul Gilbert that converts Matlab code to R code.</li>\n<li>A <a href=\"http://cran.r-project.org/doc/contrib/Hiebeler-matlabR.pdf\" rel=\"nofollow noreferrer\">Matlab / R reference guide</a> by David Hiebeler</li>\n</ul></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "edited": false, "score": 0, "creation_date": 1483030672, "post_id": 41382743, "comment_id": 69970066, "body": "An interesting way to do it in R.  I might be better off hacking the mat2r script than trying to do it in perl?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1483031603, "post_id": 41382743, "comment_id": 69970586, "body": "@akrun: R is a language intended for statistics and graphics, and has only minimal text support. Why are you trying to use R to convert MATLAB to R?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1483034056, "post_id": 41382743, "comment_id": 69971762, "body": "@akrun: I have downvoted all of the R solutions as being contrary to the question. I am sorry that you have been misled."}], "tags": [], "owner": {"reputation": 661302, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": false, "score": 2, "last_activity_date": 1483027948, "last_edit_date": 1592644375, "creation_date": 1483025703, "answer_id": 41382743, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41382743#41382743", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p><strong>1</strong>) Using only <code>mgsub</code> from <code>qdap</code> and <code>sub</code> in a single line</p>\n<pre><code>library(qdap)\nsub(&quot;, &lt;-,&quot;, &quot; &lt;- &quot;, mgsub(c(&quot;=&quot;, &quot;[&quot;, &quot;]&quot;, &quot; &quot;), c(&quot;&lt;-&quot;, &quot;c(&quot;, &quot;)&quot;, &quot;, &quot;), strng))\n#[1] &quot;bbox &lt;-  c(minX, maxX, minY, maxY, minZ, maxZ)&quot;\n</code></pre>\n<hr />\n<p><strong>2</strong>) Using only <code>base R</code></p>\n<pre><code>gsub(&quot;\\\\s+&quot;, &quot;, &quot;, sub(&quot;\\\\s*=\\\\s+\\\\[([^]]+)\\\\]&quot;, &quot;&lt;-c(\\\\1)&quot;, strng))\n#[1] &quot;bbox&lt;-c(minX, maxX, minY, maxY, minZ, maxZ)&quot;\n</code></pre>\n<p>NOTE: Both of these solutions are single line code.</p>\n<h3>data</h3>\n<pre><code>strng &lt;- 'bbox = [minX maxX minY maxY minZ maxZ]'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1483036072, "last_edit_date": 1483036072, "creation_date": 1483031250, "answer_id": 41384175, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41384175#41384175", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>I don't know whether the answers so far have answered your question. To me, you seem to want a <em>Perl</em> solution to converting <em>MATLAB</em> code to <em>R</em> code. Is that right?</p>\n\n<p>I would generally use an <em>expression substitution</em> with the <code>/e</code> modifier, together with another <em>non-destructive substitution</em> for the replacement, which <em>returns</em> the result of the substitution instead of altering the object string directly</p>\n\n<p>This program demonstrates the idea</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'bbox = [minX maxX minY maxY minZ maxZ];';\n\n$s =~ s{ \\[ \\s* \\K ( .+? ) (?= \\s* \\] ) }{ $1 =~ s/\\s+/,/gr }ex;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>bbox = [minX,maxX,minY,maxY,minZ,maxZ];\n</code></pre>\n\n<p>An alternative way would be to use the fact that <code>substr</code> can act as an <em>lvalue</em> and so can be modified. This requires the <code>@-</code> and <code>@+</code> built-in arrays, which contain the offset of the start and end of the overall match in <code>$-[0]</code> and <code>$=[0]</code> and the starts and ends of the nth capture in <code>$-[n]</code> and <code>$+[n]</code> etc. where <code>n</code> is one or more</p>\n\n<p>It would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'bbox = [minX maxX minY maxY minZ maxZ];';\n\nif ( $s =~ / \\[ \\s* ( .+? ) \\s* \\] /x ) {\n    substr($s, $-[1], $+[1]-$-[1]) =~ s/\\s+/,/g;\n}\n\nsay $s;\n</code></pre>\n\n<p>The output is identical to that of the previous code sample</p>\n"}, {"tags": [], "owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "is_accepted": false, "score": 2, "last_activity_date": 1483036023, "last_edit_date": 1483036023, "creation_date": 1483035654, "answer_id": 41385171, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41385171#41385171", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>For completeness, here's a MATLAB <a href=\"https://www.mathworks.com/help/matlab/ref/regexp.html\" rel=\"nofollow noreferrer\">regexp</a> solution:</p>\n\n<p>The basic regex:</p>\n\n<pre><code>str = 'bbox = [minX maxX minY maxY minZ maxZ]';\n\nstr = regexprep(str, '(?&lt;!,)\\s+(?=[^\\\\\\[\\]]*\\])', ', ');\nstr = regexprep(str, '\\[', 'c(');\nstr = regexprep(str, '\\]', ')');\nstr = regexprep(str, '\\=', '&lt;-');\n</code></pre>\n\n<p>The <a href=\"https://regex101.com/r/X94mg8/2\" rel=\"nofollow noreferrer\">first regex</a> looks for any whitespace in the string that does not have a closing bracket following it or a comma preceding it. The remaining lines should be self-explanatory, but do note that they are very greedy implementations so they could negatively impact other portions of the code.</p>\n\n<p>MATLAB isn't the greatest at file IO so modifying the file in-place won't be the most elegant thing in the world. One quick approach is to read the entire file into memory, perform the replacement(s), and then write it back to the file.</p>\n\n<p>A naive example:</p>\n\n<pre><code>function MATLABarrays2R_sorta(filepath)\n% Pipe the output of type to a string so we can perform the regex\nevalcstr = sprintf('type(''%s'')', filepath);\nmymcode = evalc(evalcstr);\n\n% Regex can operate on cell arrays natively, so split now to ease writing\n% later\nmymcode = strsplit(mymcode, '\\n', 'CollapseDelimiters', 0)';\n\nmyrcode = regexprep(mymcode, '(?&lt;!,)\\s+(?=[^\\\\\\[\\]]*\\])', ', ');\nmyrcode = regexprep(myrcode, '\\[', 'c(');\nmyrcode = regexprep(myrcode, '\\]', ')');\nmyrcode = regexprep(myrcode, '\\=', '&lt;-');\n\n% Write the file\n[pathname, filename] = fileparts(filepath);\nfID = fopen(fullfile(pathname, [filename '.r']), 'w');\nfor ii = 1:length(mymcode)\n    fprintf(fID, '%s\\n', myrcode{ii});\nend\nfclose(fID);\nend\n</code></pre>\n\n<p>And a toy example:</p>\n\n<pre><code>% MATLAB\nA = [1 2 3 4 5 6];\nminX = 1;\nminY = 2;\nabcd = 3;\nABCD = 4;\nB = [minX minY abcd ABCD];\n\n% R\n% See, greedy regex isn't great!\nA &lt;- c(1, 2, 3, 4, 5, 6);\nminX &lt;- 1;\nminY &lt;- 2;\nabcd &lt;- 3;\nABCD &lt;- 4;\nB &lt;- c(minX, minY, abcd, ABCD);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45359, "user_id": 430909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97914083ef911ee7a1bef76dccd12902?s=128&d=identicon&r=PG", "display_name": "Greg Snow", "link": "https://stackoverflow.com/users/430909/greg-snow"}, "is_accepted": true, "score": 2, "last_activity_date": 1483037223, "creation_date": 1483037223, "answer_id": 41385512, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41385512#41385512", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>Here is an approach to substituting just the spaces within the brackets:</p>\n\n<pre><code>&gt; tmp &lt;- \"bbox = [minX maxX minY maxY minZ maxZ]\"\n&gt; \n&gt; gsub(\" +(?=[^\\\\[]+\\\\])\", ',', tmp, perl=TRUE)\n[1] \"bbox = [minX,maxX,minY,maxY,minZ,maxZ]\"\n</code></pre>\n\n<p>This uses the Perl look-ahead syntax to say match 1 or more spaces, but only if followed by 1 or more character other than <code>[</code> followed by a <code>]</code>.  The spaces before the first <code>[</code> or after the <code>]</code> will not match because the look-ahead part fails.</p>\n\n<p>This will replace a space between <code>[</code> and the first variable name or if you have multiple spaces between the last variable name and <code>]</code>:</p>\n\n<pre><code>&gt; tmp &lt;- \"bbox = [  minX maxX minY maxY minZ maxZ  ]\"\n&gt; gsub(\" +(?=[^\\\\[]+\\\\])\", ',', tmp, perl=TRUE)\n[1] \"bbox = [,minX,maxX,minY,maxY,minZ,maxZ, ]\"\n</code></pre>\n\n<p>But if that is an issue then the regex can be modified:</p>\n\n<pre><code>&gt; tmp &lt;- \"bbox = [  minX maxX minY maxY minZ maxZ  ]\"\n&gt; \n&gt; gsub(\"(?&lt;![\\\\[ ]) +(?=[^ ])(?=[^\\\\[]+\\\\])\", ',', tmp, perl=TRUE)\n[1] \"bbox = [  minX,maxX,minY,maxY,minZ,maxZ  ]\"\n</code></pre>\n\n<p>Now the spaces matched cannot be immediately preceded by <code>[</code> or a space and have to have at least one none space after them.</p>\n\n<p>This approach has the regex engine going over the area between <code>[</code> and <code>]</code> several times, so may be slower than pulling out the section between brackets and doing the substitution on just that section as suggested by others.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1484256505, "last_edit_date": 1484256505, "creation_date": 1483056128, "answer_id": 41388884, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string/41388884#41388884", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>Translating code correctly is very difficult. </p>\n\n<p>You do have a regex based solution for the shown example. Here is an approach that parses a line into tokens and processes them. It can be developed further, if needed.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $str = 'bbox = [minX maxX minY maxY minZ maxZ]';\n\n# Break by (any amount of any) whitespace. Then process and join as suitable\nmy @terms = split ' ', $str;\n\nmy $res;\nfor (@terms) \n{\n    if (/=/) { $res .= '&lt;-' }   # Translate = if found,\n    else     { $res .= $_;  }   # or copy the term\n\n    # Add comma for terms in '[' to ']' range, except for the last, with ']'\n    # Outside of the range restore the space\n    if (/^\\[/ .. /]$/) { $res .= ',' unless /]$/ }\n    else               { $res .= ' '             }\n}\n\nprint \"$res\\n\";\n</code></pre>\n\n<p>This prints the line &nbsp; <code>bbox &lt;- [minX,maxX,minY,maxY,minZ,maxZ]</code></p>\n\n<p>We break the string up by whitespace, then go term-by-term and change and join them as needed. This is where a more rounded analysis can be added as needed.</p>\n\n<p>What may need a comment is the <code>..</code> <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a>. It returns a true/false and <em>maintains its state</em>. So once a term matches <code>/^\\[/</code> it turns true and stays true until a term matches <code>/]$/</code>. It is normally used to identify a range of lines when processing a file, and also to make ranges of values, like <code>1..4</code> and <code>'a'..'z'</code>. Here we use it with the array of terms.</p>\n\n<p>However, there is a whole lot more. </p>\n\n<ul>\n<li><p>Statements in MATLAB can be on the same line, separated by <code>;</code>.  The code above won't work for it, since <code>/]$/</code> is the last thing in the string (no <code>;</code> accounted for). This is fixed easily.</p></li>\n<li><p>But, matrices can also be given by slices of other vector objects, and this may involve indices with commas and spaces which <em>should not</em> be replaced by <code>,</code>.  This is not fixed easily.</p></li>\n<li><p>Matrices can be built in a number of other ways, for example dynamically.</p></li>\n</ul>\n\n<p>With this approach you can develop the parser further. But the point is that it gets more and more difficult, as it is just hard to parse a programming language. Just a warning.</p>\n\n<hr>\n\n<p>Given the stirred up discussion, I'd like to comment on the choice of <em>the tool for the job</em>. </p>\n\n<p>This is firstly a text processing problem. I find the requested language (Perl) to be a good choice. The problem is yet harder given that the \"text\" is code, which makes the tool choice even more important.</p>\n"}], "owner": {"reputation": 175, "user_id": 1159672, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/546ea01f572ab407684fb077b52c1cf6?s=128&d=identicon&r=PG", "display_name": "tranzmatt", "link": "https://stackoverflow.com/users/1159672/tranzmatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 41385512, "answer_count": 7, "score": 0, "last_activity_date": 1485960020, "creation_date": 1483022311, "last_edit_date": 1483034367, "question_id": 41381802, "link": "https://stackoverflow.com/questions/41381802/apply-perl-substitution-between-two-delimiters-within-a-string", "title": "Apply Perl substitution between two delimiters within a string", "body": "<p>I'm trying to do some MATLAB to R conversion, and the existing scripts only get me so far. One thing missing is the handling of matrices.</p>\n\n<p>I'd like to use Perl to go from:</p>\n\n<pre><code>bbox = [minX maxX minY maxY minZ maxZ]\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>bbox &lt;- c(minX,maxX,minY,maxY,minZ,maxZ)\n</code></pre>\n\n<p>Replacing <code>=</code> with <code>&lt;-</code>, and <code>[]</code> with <code>()</code> is easy, but a global search/replace on spaces to commas won't work.</p>\n\n<p>How can I confine the operation to between the square brackets?</p>\n"}, {"tags": ["python", "perl", "awk", "sed", "bibliography"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483010508, "post_id": 41378586, "comment_id": 69958992, "body": "See also <a href=\"http://tex.stackexchange.com/q/203177/24422\">Convert .bbl file to .bib file</a>"}, {"owner": {"reputation": 503, "user_id": 1178454, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/88c9de4b53977382a81b5d7ac85ef88f?s=128&d=identicon&r=PG", "display_name": "Strohmi", "link": "https://stackoverflow.com/users/1178454/strohmi"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1483010838, "post_id": 41378586, "comment_id": 69959163, "body": "The \\bibitem entries are not in the .bbl file. I already checked that."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 3, "creation_date": 1483020950, "post_id": 41378586, "comment_id": 69964764, "body": "If you are looking for someone to convert or write a script for you, the question is too broad, unfortunately. The purpose of Stack Overflow is to help with specific and focussed problems."}, {"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1483052042, "post_id": 41378586, "comment_id": 69979019, "body": "I suggest to just learn how to use LaTeX and BibTeX, as it&#39;s worth knowing anyway. Write the BibTeX file yourself. (Yes, even if you have 100 references). Many publishers&#39; websites offer BibTeX entries for easy citation. Look up each paper you cite (you have the doi numbers), download the BibTeX entry, and append them all in a <code>.bib</code> file (they all go in one file). Then tweak the fields as needed (I&#39;d never use all the fields they give you). Or, you could just label the fields in the file you already have. Tweaking Perl scripts or meditating over awk and sed commands is a waste of time."}, {"owner": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "reply_to_user": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1483083400, "post_id": 41378586, "comment_id": 69986902, "body": "That is rather unstructured data, so you will need pretty good heuristics. The colon seems to separate authors and title, and the <code>href</code> element is clearly marked, but otherwise? Lists of random page numbers? <code>G03031</code>? I tend to agree with @e0k: do it by hand."}, {"owner": {"reputation": 503, "user_id": 1178454, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/88c9de4b53977382a81b5d7ac85ef88f?s=128&d=identicon&r=PG", "display_name": "Strohmi", "link": "https://stackoverflow.com/users/1178454/strohmi"}, "edited": false, "score": 0, "creation_date": 1483279868, "post_id": 41378586, "comment_id": 70036363, "body": "I ended up editing the .bib file by hand. There were 64 citations and it took me about 1,5 hours. Luckily, I had doi numbers for most citations. That made the procedure a lot faster. But thanks a lot for your hints and comments."}], "owner": {"reputation": 503, "user_id": 1178454, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/88c9de4b53977382a81b5d7ac85ef88f?s=128&d=identicon&r=PG", "display_name": "Strohmi", "link": "https://stackoverflow.com/users/1178454/strohmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1161, "favorite_count": 2, "closed_date": 1483043085, "answer_count": 0, "score": 3, "last_activity_date": 1597833216, "creation_date": 1483010037, "last_edit_date": 1597833216, "question_id": 41378586, "link": "https://stackoverflow.com/questions/41378586/adapting-a-perl-script-to-convert-bibitem-to-bibtex", "closed_reason": "Not suitable for this site", "title": "Adapting a perl script to convert bibitem to BibTeX", "body": "<p>I wrote a journal article some time ago that, luckily, was accepted. The publisher kindly sent me the LaTeX file derived from the article. I now want to include the LaTeX code into my PhD thesis. It is fully working except for the bibliography. The publisher included the bibliography in an <code>\\thebibliography</code> environment and used <code>\\bibitem</code> for each entry. The bibliography has the following format:</p>\n<pre><code>\\begin{thebibliography}{}\n\n\\bibitem{}\n{\\AA}gren, A., Buffam, I., Berggren, M., Bishop, K., Jansson, M., and Laudon,\nH.: Dissolved organic carbon characteristics in boreal streams in a\nforest-wetland gradient during the transition between winter and summer, J.\nGeophys. Res.-Biogeo., 113, G03031, \\href{http://dx.doi.org/10.1029/2007JG000674}{doi:10.1029/2007JG000674}, 2008.\n\n\\bibitem{}\nAlewell, C., Lischeid, G., Hell, U., and Manderscheid, B.: High temporal\nresolution of ion fluxes in semi-natural ecosystems -- gain of information or\nwaste of resources? Biogeochemistry, 69, 19--35,\n\\href{http://dx.doi.org/10.1023/B:BIOG.0000031029.46798.7f}{doi:10.1023/B:BIOG.0000031029.46798.7f}, 2004.\n\n\\end{thebibliography}\n</code></pre>\n<p>I now want to include the bibliography into my thesis using BibTeX/BibLaTeX. Therefore, I need to convert each \\bibitem into one <code>.bib</code> file. I already tried the website converter at text2bib but it gave me a lot of errors (not recognizing author and year published). I also ran the tex2bib-Perl script without any success.</p>\n<p>How can I adapt the Perl <a href=\"https://dl.dropboxusercontent.com/u/2108381/tex2bib.pl\" rel=\"nofollow noreferrer\">script</a> or writing some new importer using Python, Awk or Sed? I don't have much experience in using Awk and Sed but they should be able to do the trick. <a href=\"https://dl.dropboxusercontent.com/u/2108381/testfile.txt\" rel=\"nofollow noreferrer\">Here</a>, you can find some example data.</p>\n<p>A few hours of searching was to no avail.</p>\n"}, {"tags": ["perl", "scope"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1483008315, "post_id": 41377933, "comment_id": 69957840, "body": "This feels like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. What are you trying to accomplish here?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1483008367, "post_id": 41377933, "comment_id": 69957877, "body": "I think it&#39;s localized and thus you can&#39;t easily. But I am on my phone and can&#39;t try anything right now."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483008452, "post_id": 41377933, "comment_id": 69957924, "body": "@Sobrique as mentioned, I was exploring possible ways to golf down an existing solution when I stumbled across this behavior. I just want to understand why <code>$main::_</code> gives the locally-scoped <code>$_</code> rather than the global one."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1483008672, "post_id": 41377933, "comment_id": 69958046, "body": "<a href=\"http://stackoverflow.com/questions/32846792/what-is-in-perl\">stackoverflow.com/questions/32846792/what-is-in-perl</a> may be relevant."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483010183, "post_id": 41377933, "comment_id": 69958825, "body": "In case anyone&#39;s interested, I was trying to use it like so (under the <code>-n</code> flag): <code>say 1+grep{$::_&gt;&gt;=1}1..32</code>"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483010619, "post_id": 41377933, "comment_id": 69959042, "body": "@zdim I see it works when the local <code>$_</code> is explicitly declared with a <code>my</code>: <code>$_=0; for my $_ (1..4) { say $::_ }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1483010750, "post_id": 41377933, "comment_id": 69959111, "body": "Yes, tried playing with that ... this is puzzling :))"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1483011226, "post_id": 41377933, "comment_id": 69959404, "body": "More and more interesting ... <code>@main::_</code>  queried in a sub is the same as <code>@_</code> in that sub.   <code>perl -wE&#39; sub f { say &quot;@main::_ (@_)&quot; }; say @_; f(1,2); say @_&#39;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1483025212, "post_id": 41377933, "comment_id": 69967109, "body": "There is no lexical <code>$_</code> in your code. Only <code>my</code> creates lexical variables."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483026080, "post_id": 41377933, "comment_id": 69967612, "body": "@melpomene I don&#39;t know if it is significant to distinguish between local and lexical scope, but I hope the example makes my intended behavior clear"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1483026313, "post_id": 41377933, "comment_id": 69967731, "body": "By &quot;local&quot;, do you mean actual local scope (which is the same as &quot;lexical&quot;) or what the <code>local</code> keyword does in Perl (which is what&#39;s happening here)?"}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1483018270, "post_id": 41380737, "comment_id": 69963271, "body": "This doesn&#39;t answer the question. I want it to access the value of <code>$_</code> declared outside the loop from within the loop (so print 0&#39;s <i>inside</i> the loop)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1483022875, "post_id": 41380737, "comment_id": 69965777, "body": "This does answer the question. The <code>$_</code> in <code>for (1..4) {...}</code> is a localized <code>$main::_</code>, and you cannot access the original <code>$main::_</code> any more than you can in any other place where <code>local</code> hides a variables original value, e.g. <code>$foo::bar=42; for $foo::bar (1..6) { print $foo::bar #can&#39;t have the value 42 until this loop has ended }</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483027907, "post_id": 41380737, "comment_id": 69968596, "body": "@mob what about Scope::Upper or similar? That might work."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483028253, "post_id": 41380737, "comment_id": 69968798, "body": "Never heard of them. If you can come up with an answer for this question by using them, I&#39;d love to see it and be enlightened."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1483032324, "post_id": 41380737, "comment_id": 69970960, "body": "You can&#39;t access it directly. The best you can do is use a <code>my</code> variable for the loop."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1483043579, "post_id": 41380737, "comment_id": 69975919, "body": "@mob I will try tomorrow. Was on my phone the whole day."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1483018083, "creation_date": 1483018083, "answer_id": 41380737, "question_id": 41377933, "link": "https://stackoverflow.com/questions/41377933/why-does-main-refer-to-the-lexical-when-used-inside-a-map-or-for-loop/41380737#41380737", "title": "Why does $main::_ refer to the lexical $_ when used inside a map or for loop?", "body": "<p>Yes, it is expected. Your one liner is equivalent to this:</p>\n\n<pre><code>$_ = 0;\nsay $_;\n{\n    local $_;\n    $_ = 1;\n    while( $_ &lt;= 4 ){\n        say $_;\n    }continue{\n        $_++;\n    }\n}\n</code></pre>\n\n<p>Perl localizes <code>$_</code> in <code>for</code>, <code>map</code>, and <code>grep</code> so that they don't clobber the value already in it. It does the same for <code>$a</code> and <code>$b</code> in <code>sort</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1483029487, "last_edit_date": 1483029487, "creation_date": 1483028433, "answer_id": 41383445, "question_id": 41377933, "link": "https://stackoverflow.com/questions/41377933/why-does-main-refer-to-the-lexical-when-used-inside-a-map-or-for-loop/41383445#41383445", "title": "Why does $main::_ refer to the lexical $_ when used inside a map or for loop?", "body": "<blockquote>\n  <p><em>Is this behavior to be expected?</em></p>\n</blockquote>\n\n<p>Yes. You told the loop to use <code>$_</code> aka <code>$main::_</code><sup>[1]</sup> as the loop variable, so it did.</p>\n\n<p>If you want it to use a different variable, it's up to you to specify a different one.</p>\n\n<blockquote>\n  <p><em>Is this behavior any different in Perl 5.24?</em></p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p><em>I want it to access the value of $_ declared outside the loop from within the loop (so print 0's inside the loop)</em></p>\n</blockquote>\n\n<p>Use a different variable for your loop variable, make a copy of <code>$_</code> before the loop, take a reference to <code>$_</code> before the loop, or navigate the stack to find the directive that restores <code>$_</code>.</p>\n\n<hr>\n\n<ol>\n<li>As documented in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>, an unqualified reference to <code>$_</code> refers to <code>$main::_</code>, not <code>$_</code> in the current package.</li>\n</ol>\n"}], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 41383445, "answer_count": 2, "score": 3, "last_activity_date": 1483029557, "creation_date": 1483007839, "last_edit_date": 1492087139, "question_id": 41377933, "link": "https://stackoverflow.com/questions/41377933/why-does-main-refer-to-the-lexical-when-used-inside-a-map-or-for-loop", "title": "Why does $main::_ refer to the lexical $_ when used inside a map or for loop?", "body": "<p><em>In the process of <a href=\"https://codegolf.stackexchange.com/a/104849/2771\">golfing down a solution</a>, I stumbled across this seemingly weird behavior</em></p>\n\n<hr>\n\n<p>I would have thought that <code>$::_</code> or <code>$main::_</code> would refer to the global <code>$_</code>, not the loop-local <code>$_</code>:</p>\n\n<ul>\n<li><p><strong><code>$::_</code></strong></p>\n\n<pre><code>$ perl -E '$_=0; say $::_; say $::_ for 1..4'\n0\n1\n2\n3\n4\n</code></pre></li>\n<li><p><strong><code>$main::_</code></strong></p>\n\n<pre><code>$ perl -E '$_=0; say $main::_; say $main::_ for 1..4'\n0\n1\n2\n3\n4\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>Under <strong><code>-MO::Deparse</code></strong>, the results for both forms are identical:</p>\n\n<pre><code>$ perl -MO=Deparse -E '$_=0; say $::_; say $main::_ for 1..4'\nuse feature 'current_sub', 'evalbytes', 'fc', 'say', 'state', 'switch', 'unicode_strings', 'unicode_eval';\n$_ = 0;\nsay $_;\nsay $_ foreach (1 .. 4);\n-e syntax OK\n</code></pre>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>It looks like explicitly declaring the <code>$_</code> loop variable with a <code>my</code> allows <code>$main::_</code> to work as expected:</p>\n\n<pre><code>$ perl -E '$_=0; for my $_ (1..4) { say $::_ }'\n0\n0\n0\n0\n</code></pre>\n\n<p>And <code>-MO=Deparse</code> happily obliges:</p>\n\n<pre><code>$ perl -MO=Deparse -E '$_=0; for my $_ (1..4) { say $::_ }'\nuse feature 'current_sub', 'evalbytes', 'fc', 'say', 'state', 'switch', 'unicode_strings', 'unicode_eval';\n$_ = 0;\nforeach my $_ (1 .. 4) {\n    say $main::_;\n}\n-e syntax OK\n</code></pre>\n\n<p>Note that this is under Perl 5.16.3, so the <a href=\"http://perldoc.perl.org/perl5240delta.html#Lexical-%24_-has-been-removed\" rel=\"nofollow noreferrer\">deprecation of <code>my $_</code></a> doesn't apply.</p>\n\n<p><strong><em>Questions</em></strong></p>\n\n<ul>\n<li>Is this behavior to be expected?</li>\n<li>Is this behavior any different in Perl 5.24?</li>\n<li>How do I access the value of <code>$_</code> declared outside the loop from within the loop (so <code>0</code>s are printed by the loop)?</li>\n</ul>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 48960, "user_id": 2522554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83cebe27d4fdd15bb1fb77bab95ff493?s=128&d=identicon&r=PG", "display_name": "bansi", "link": "https://stackoverflow.com/users/2522554/bansi"}, "edited": false, "score": 0, "creation_date": 1482994165, "post_id": 41374455, "comment_id": 69950701, "body": "a dirty trick <code>m9[3-9]..........</code>"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1482994203, "post_id": 41374455, "comment_id": 69950714, "body": "you might need to match complete line"}, {"owner": {"reputation": 4299, "user_id": 466314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wZArg.png?s=128&g=1", "display_name": "Ultimater", "link": "https://stackoverflow.com/users/466314/ultimater"}, "edited": false, "score": 1, "creation_date": 1482994510, "post_id": 41374455, "comment_id": 69950832, "body": "Why aren&#39;t you matching something like <code>^(\\S+)\\s+(\\S+)\\s+(\\w+)\\s+(\\S+)\\s+(\\^\\[\\[\\d+.)?9[3-9]</code> etc. It&#39;s not that difficult to determine which column you&#39;re working with if you have an easy to work with space delimiter."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1482996924, "post_id": 41374455, "comment_id": 69951860, "body": "Do you have to use a single regex or can you split the string into an array and work on that? Should be way easier."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1483002744, "last_edit_date": 1483002744, "creation_date": 1483002435, "answer_id": 41376384, "question_id": 41374455, "link": "https://stackoverflow.com/questions/41374455/extract-specific-columns-from-line-and-match-against-given-range/41376384#41376384", "title": "Extract specific columns from line and match against given range", "body": "<p>I suggest you to split the line so that you can get the exact columns and then do desired processing on those columns. See the below approach:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile(&lt;DATA&gt;){\n    chomp;\n    my @columns = split/\\s+/, $_;\n    my $fifth_column = $columns[4];\n    my $seventh_column = $columns[6];\n\n    #Remove ^[[32m and ^[[0m\n    $fifth_column =~ s/\\^\\[\\[32m|\\^\\[\\[0m//g;\n    $seventh_column =~ s/\\^\\[\\[32m|\\^\\[\\[0m//g;\n\n    #Verify that above are between 93.00000 and 99.99999\n}\n\n__DATA__\n3  1  EDR  918771665157  ^[[32m97.01424  ^[[0m918489349209  ^[[32m97.01408   ^[[0m\n3  2  EDR  918493379596  ^[[32m87.01418  ^[[0m918775654999  ^[[32m87.01434   ^[[0m\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483002871, "creation_date": 1482993786, "last_edit_date": 1483002871, "question_id": 41374455, "link": "https://stackoverflow.com/questions/41374455/extract-specific-columns-from-line-and-match-against-given-range", "title": "Extract specific columns from line and match against given range", "body": "<p>I'm trying to identify numbers(float) within a certain range from text using regex, the text format is:\n<code>\n3  1  EDR  918771665157  ^[[32m97.01424  ^[[0m918489349209  ^[[32m97.01408   ^[[0m\n3  2  EDR  918493379596  ^[[32m87.01418  ^[[0m918775654999  ^[[32m87.01434   ^[[0m\n</code></p>\n\n<p>The <code>^[[32m</code> and <code>^[[0m</code> strings are because of colors.\nI'm trying to check if the 5th and 7th columns are between 93.00000 and 99.99999,\nhowever if the value is 93.00000 it might be shown as 93.\nI tried the following:<code>9[3-9](\\.\\d{1,5})?\\s+\\S+\\s+.*9[3-9](\\.\\d{1,5})?</code> but i have a problem since in the second line here the 5th and 7th columns are not in range but i get true because of the 4th and 6th columns</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1482996611, "post_id": 41374235, "comment_id": 69951715, "body": "You&#39;re making it sound like you are sure it&#39;s related to the Perl version. The behavior is from the module Hash::Util though. Start by reading its code. It&#39;s probably related to internals of Perl but I doubt that something changed in 5.24 specifically in this regard."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1482996692, "post_id": 41374235, "comment_id": 69951753, "body": "@simbabque I&#39;m not confident that it&#39;s related to the Perl version, but I haven&#39;t tested the code snippets with other Perl versions or on other platforms. I&#39;m not sure what the right way is to communicate that information."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1482996850, "post_id": 41374235, "comment_id": 69951822, "body": "You just did. :-) the second time you said 5.24 implied you were sure. I&#39;ll test it on different versions in a bit, I&#39;m on a phone right now. Look at <a href=\"http://perlbrew.pl\" rel=\"nofollow noreferrer\">perlbrew.pl</a> for installing multiple different Perls if you care to try yourself."}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": true, "score": 1, "last_activity_date": 1483031926, "last_edit_date": 1592644375, "creation_date": 1483015651, "answer_id": 41380042, "question_id": 41374235, "link": "https://stackoverflow.com/questions/41374235/restricted-hashes-update-not-atomic-only-with-lock-keys-not-lock-hash/41380042#41380042", "title": "Restricted hashes update not atomic only with `lock_keys` not `lock_hash`", "body": "<p>I have tried two different versions of Perl 5.10.1 and 5.18.2 and the behavior was the same as yours and probably there are some limitation when using old versions of Perl.</p>\n<p>There is a slightly difference between lock_hash and lock_key.</p>\n<p>When you call lock_hash it does:</p>\n<pre><code>lock_keys(%$hash);\n\nforeach my $key (keys %$hash) {\n    lock_value(%$hash, $key);\n}\n</code></pre>\n<p>So it locks the keys of your hash and the values while lock_keys:</p>\n<pre><code>Internals::hv_clear_placeholders %$hash;\nif( @keys ) {\n    my %keys = map { ($_ =&gt; 1) } @keys;\n    my %original_keys = map { ($_ =&gt; 1) } keys %$hash;\n    foreach my $k (keys %original_keys) {\n        die sprintf &quot;Hash has key '$k' which is not in the new key &quot;.\n                    &quot;set at %s line %d\\n&quot;, (caller)[1,2]\n          unless $keys{$k};\n    }\n\n    foreach my $k (@keys) {\n        $hash-&gt;{$k} = undef unless exists $hash-&gt;{$k};\n    }\n    Internals::SvREADONLY %$hash, 1;\n\n    foreach my $k (@keys) {\n        delete $hash-&gt;{$k} unless $original_keys{$k};\n    }\n}\nelse {\n    Internals::SvREADONLY %$hash, 1;\n}\n</code></pre>\n<p>I am supposing this is a bug, since you locked the keys but not the hash and then it returns an empty hash when you try to modify.</p>\n<p>However some people have already experienced something similar like you in this question:</p>\n<p><a href=\"https://stackoverflow.com/questions/4098816/should-i-use-internalssvreadonly-for-creating-readonly-variables-in-perl\">Should I use Internals::SvREADONLY for creating readonly variables in Perl?</a></p>\n<p>There are other ways of doing what you want like using TIE or Readonly for example.</p>\n<p>Also a piece of documentation about internals here if you want to have a look:</p>\n<p><a href=\"http://search.cpan.org/dist/perl-5.25.6/lib/Internals.pod\" rel=\"nofollow noreferrer\" title=\"Internals Documentation 2\">Internals Documentation </a></p>\n<p>Unfortunately this practice is discouraged :</p>\n<blockquote>\n<p>SvREADONLY(THING, [, $value])</p>\n<p>Set or get whether a variable is readonly or not. Exactly what the readonly flag means depend on the type of the variable affected and the version of perl used.</p>\n<p>You are strongly discouraged from using this function directly. It is used by various core modules, like Hash::Util, and the constant pragma to implement higher-level behavior which should be used instead.</p>\n<p>See the core implementation for the exact meaning of the readonly flag for each internal variable type.</p>\n</blockquote>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 41380042, "answer_count": 1, "score": 3, "last_activity_date": 1483031926, "creation_date": 1482992598, "last_edit_date": 1482993303, "question_id": 41374235, "link": "https://stackoverflow.com/questions/41374235/restricted-hashes-update-not-atomic-only-with-lock-keys-not-lock-hash", "title": "Restricted hashes update not atomic only with `lock_keys` not `lock_hash`", "body": "<p>Tested with Perl 5.24 on OS X</p>\n\n<p>I'm trying to figure out why attempting to update a restricted hash clears the hash table (violating atomicity) only when the <em>keys</em> of the hash are restricted. If <code>lock_hash</code> has been applied to the hash, then the illegal modification is completely rolled back.</p>\n\n<p>The documentation for <code>Hash::Util</code> claims, in part.</p>\n\n<blockquote>\n  <p>CAVEATS </p>\n  \n  <p>Note that the trapping of the restricted operations is not\n  atomic: for example</p>\n  \n  <p>eval { %hash = (illegal_key => 1) } </p>\n  \n  <p>leaves the %hash empty rather than with its original contents.</p>\n</blockquote>\n\n<p>I originally wanted to see whether individual operations like updating a single illegal key were atomic and whether Perl 5.24 would emit a warning in this situation, but when I first tried I couldn't reproduce the behavior.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse Hash::Util qw[lock_hash lock_keys];\nuse Data::Dumper;\n\nmy %hash = (a =&gt; 1, b =&gt; 2);\nlock_hash(%hash);\n\neval { %hash = (illegal_key =&gt; 1) };\n\nprint Dumper \\%hash;\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; 1,\n          'b' =&gt; 2\n        };\n</code></pre>\n\n<p>Using, <code>lock_keys</code>, however, does reproduce the behavior</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse Hash::Util qw[lock_hash lock_keys];\nuse Data::Dumper;\n\nmy %hash = (a =&gt; 1, b =&gt; 2);\nlock_keys(%hash);\n\neval { %hash = (illegal_key =&gt; 1) };\n\nprint Dumper \\%hash;\n</code></pre>\n\n<p>prints an empty hashref, as the documentation foretold</p>\n\n<pre><code>$VAR1 = {};\n</code></pre>\n\n<p>Why is there a difference in behavior depending on how the hash is restricted?</p>\n"}]