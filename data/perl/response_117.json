[{"tags": ["perl", "debugging", "tk"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491426913, "post_id": 43241579, "comment_id": 73553700, "body": "That line is being shown because it&#39;s the code for the <code>deiconify</code> method: it is converted into a call to the method named by <code>$fn</code> that passes <code>$sub</code> (presumably the string <code>&quot;deiconify&quot;</code>) as the first parameter. It&#39;s presumably XS code if the debugger isn&#39;t showing it. What is in <code>$fn</code> at that point?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491427011, "post_id": 43241579, "comment_id": 73553749, "body": "@Borodin <code>$fn</code> is equal to  <code>wm</code> as far as I can see"}], "answers": [{"tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": true, "score": 2, "last_activity_date": 1491461733, "creation_date": 1491461733, "answer_id": 43247839, "question_id": 43241579, "link": "https://stackoverflow.com/questions/43241579/how-to-locate-the-source-file-of-a-subroutine-call-when-debugging-a-complex-cpan/43247839#43247839", "title": "How to locate the source file of a subroutine call when debugging a complex CPAN distribution?", "body": "<p>Grepping the source a little more liberally (specifically including <code>*.c</code> files) finds the string <code>This procedure is invoked to process the \"wm deiconify\" Tcl command</code> in the file <code>pTk/mTk/win/tkWinWm.c</code>. It's in a comment introducing the C function <code>WmDeiconifyCmd</code>, which certainly looks like it's the actual implementation of that functionality.</p>\n\n<p>I haven't bothered to look into exactly how the Tk module XS code exposes that C function to the Perl level, but if that's what you're really interested in, you now know the endpoints and just have to fill in the middle :-)</p>\n\n<p>Once the function is exposed to the Perl level, the line in <code>Tk::Submethods</code> that you quote above is clearly where it gets injected into the appropriate symbol table so it can be called via <code>$tl-&gt;deiconify()</code>.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 43247839, "answer_count": 1, "score": 4, "last_activity_date": 1491461733, "creation_date": 1491426199, "question_id": 43241579, "link": "https://stackoverflow.com/questions/43241579/how-to-locate-the-source-file-of-a-subroutine-call-when-debugging-a-complex-cpan", "title": "How to locate the source file of a subroutine call when debugging a complex CPAN distribution?", "body": "<p>I am trying to debug a <a href=\"https://metacpan.org/pod/distribution/Tk/Tk.pod\" rel=\"nofollow noreferrer\"><code>Tk</code></a> program for a while now. The problem seems to be with a <code>deiconify()</code> call from a top level window, however I am not able to locate the source file where the <code>deiconify()</code> sub is defined. Here is a made-up example just to illustrate what I mean:</p>\n\n<p><strong>test.pl</strong>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\n\nmy $mw = MainWindow-&gt;new( -title =&gt; \"Main Window\" );\n$mw-&gt;Label(-text =&gt; \"Debugging\", -font =&gt; \"Times 20\")-&gt;pack( );\n$mw-&gt;Button(\n    -text    =&gt; 'Quit',\n    -command =&gt; sub { exit },\n)-&gt;pack;\n$mw-&gt;Button(\n    -text    =&gt; 'Show window',\n    -command =&gt; \\&amp;show_window,\n)-&gt;pack;\n\nmy $tl = $mw-&gt;Toplevel( -title =&gt; \"Toplevel 1\" );\n$tl-&gt;Button(\n    -text    =&gt; 'Quit',\n    -command =&gt; sub { exit },\n)-&gt;pack;\n$tl-&gt;withdraw();\nMainLoop;\n\nsub show_window {\n    #$DB::single = 1;\n    $tl-&gt;deiconify();  # &lt;--- Where is this sub defined??\n    $tl-&gt;raise();\n}\n</code></pre>\n\n<p>I first tried to grep the distribution for the sub name<sup>1</sup>:</p>\n\n<ul>\n<li><code>find . -name '*.pm' -exec grep -Hn deiconify {} \\;</code></li>\n<li><code>find . -name '*.xs' -exec grep -Hn deiconify {} \\;</code></li>\n<li><code>find . -name '*.al' -exec grep -Hn deiconify {} \\;</code></li>\n<li><code>find . -name '*.h' -exec grep -Hn deiconify {} \\;</code></li>\n</ul>\n\n<p>Then I tried to run the script under the debugger</p>\n\n<pre><code>perl -d test.pl\n</code></pre>\n\n<p>and set a breakpoint just before the call to <code>$tl-&gt;deiconify()</code> (see above). When I pressed <code>s</code> at the breakpoint</p>\n\n<pre><code>  DB&lt;1&gt; s\nTk::Submethods::CODE(0x56245540c658)(/home/hakon/perlbrew/perls/perl-5.24.1/lib/site_perl/5.24.1/x86_64-linux/Tk/Submethods.pm:37):\n37:      *{$package.'::'.$sub} = sub { shift-&gt;$fn($sub,@_) };\n</code></pre>\n\n<p>it shows the line where <code>deiconify()</code> was defined as anonymous subroutine ( Line 37 of <code>Tk::Submethods</code> ), but when I press <code>s</code> again to step into the anonymous subroutine, it just step over it and returns to line 32 in <code>test.pl</code>.</p>\n\n<p>I suspect the method must be defined in <code>Tk::wm</code> somehow (since it is related to the Window manager) maybe by the auto load mechanism or by dynaloader?</p>\n\n<p><strong>Footnotes</strong></p>\n\n<p><sub>\n1. The commands was run from the toplevel directory of the Tk distribution. To set it up, run this first:</p>\n\n<pre><code> cpan -g Tk\n tar zxvf Tk-804.033.tar.gz\n cd Tk-804.033\n</code></pre>\n\n<p></sub></p>\n"}, {"tags": ["regex", "bash", "perl", "pattern-matching", "match"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 4, "creation_date": 1491420484, "post_id": 43239974, "comment_id": 73550095, "body": "Did you try anything?"}, {"owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1491420723, "post_id": 43239974, "comment_id": 73550248, "body": "Yea, I can get the first field (A7247 and alat) with the following: ^[^,]*"}, {"owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1491420775, "post_id": 43239974, "comment_id": 73550273, "body": "Trying to find quotes (&quot;) now and find values between them. Do you think that is the right strategy?"}, {"owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1491421031, "post_id": 43239974, "comment_id": 73550433, "body": "Found a way to get everything in between brackets too: &quot;(?:[^\\&#93;|\\\\.)*&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "edited": false, "score": 0, "creation_date": 1491494332, "post_id": 43242464, "comment_id": 73589060, "body": "Thanks Matt! That worked really well and is broken up enough that I understand it well."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "edited": false, "score": 0, "creation_date": 1491509772, "post_id": 43242464, "comment_id": 73598445, "body": "@telecomToperl Is it actually JSON?"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1491430150, "creation_date": 1491430150, "answer_id": 43242464, "question_id": 43239974, "link": "https://stackoverflow.com/questions/43239974/parsing-file-for-relevant-fields/43242464#43242464", "title": "Parsing file for relevant fields", "body": "<p>The right-hand side (the part after the <code>:</code>) looks like JSON. If that's true, it would be better to treat it as such:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::XS;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my ($lhs, $rhs) = split(/:/, $_, 2);\n    my $array_ref = decode_json($rhs);\n\n    $lhs = (split(/,/, $lhs))[0];\n    $rhs = join(',', @$array_ref);\n\n    print join(':', $lhs, $rhs), \"\\n\";\n}\n\n__DATA__\nA7247, partOf:[\"LTA_SO\", \"dontact\"]\nalat, partOf:[\"WTP_ZR\"]\nyello, partOf:[]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A7247:LTA_SO,dontact\nalat:WTP_ZR\nyello:\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4135234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0d5b06ff1043a5ff7b636b60edec0e96?s=128&d=identicon&r=PG&f=1", "display_name": "telecomToperl", "link": "https://stackoverflow.com/users/4135234/telecomtoperl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491430150, "creation_date": 1491420382, "last_edit_date": 1491421634, "question_id": 43239974, "link": "https://stackoverflow.com/questions/43239974/parsing-file-for-relevant-fields", "title": "Parsing file for relevant fields", "body": "<p>How can a regular expression be used on a file with:</p>\n\n<pre><code>A7247, partOf:[\"LTA_SO\", \"dontact\"]\nalat, partOf:[\"WTP_ZR\"]\nyello, partOf:[] \n</code></pre>\n\n<p>And get back (notice not being a part of anything):</p>\n\n<pre><code>A7247:LTA_SO,dontact\nalat:WTP_ZR\nyello:\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "edited": false, "score": 0, "creation_date": 1491425805, "post_id": 43239258, "comment_id": 73553124, "body": "Is that space in <code>sosuiG   &#47;sosuigsubmit</code> in the original code?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491426176, "post_id": 43239258, "comment_id": 73553329, "body": "If that is your real code then the URL is wrong. Spaces are not allowed in URLs. You should examine <code>$mech-&gt;success</code> to make sure your calls to <code>get</code> and <code>submit_form</code> succeeded, <code>$mech-&gt;status</code> to find out what was wrong if it failed, and <code>$mech-&gt;text</code> to see what the form actually looks like."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491426381, "post_id": 43239258, "comment_id": 73553455, "body": "Also, it&#39;s very wasteful to open a file to check that it&#39;s valid. You can use <code>-e</code> to make sure it exists, <code>-f</code> to make sure it&#39;s a file and not a directory, <code>-s</code> to make sure it&#39;s not empty, and <code>-r</code> to make sure it can be read, all without going through the lengthy process of opening it."}, {"owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491427597, "post_id": 43239258, "comment_id": 73554036, "body": "@borodin, thanks for your comments. I am a beginner. Actualy there is no space in url."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1491460839, "post_id": 43239258, "comment_id": 73564421, "body": "Always start your Perl files with <code>use strict; use warnings;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1491461001, "post_id": 43247393, "comment_id": 73564517, "body": "Note that <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=83126\" rel=\"nofollow noreferrer\">File::Slurp has a nasty bug</a> (still unfixed). <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> seems to be better."}, {"owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "edited": false, "score": 1, "creation_date": 1491484986, "post_id": 43247393, "comment_id": 73581605, "body": "Thanks for guiding me towards the right direction. I finally solved it. :)"}, {"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "reply_to_user": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "edited": false, "score": 0, "creation_date": 1491500610, "post_id": 43247393, "comment_id": 73593068, "body": "@pali no problem, feel free to accept my answer if it was the key to your problem."}, {"owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1491500654, "post_id": 43247393, "comment_id": 73593091, "body": "@melpomene thanks, I updated my answer to reflect that."}], "tags": [], "owner": {"reputation": 14059, "user_id": 16777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e5c5dd043eb3a8c0b3639fd41844d30e?s=128&d=identicon&r=PG", "display_name": "Kev", "link": "https://stackoverflow.com/users/16777/kev"}, "is_accepted": true, "score": 1, "last_activity_date": 1491500640, "last_edit_date": 1491500640, "creation_date": 1491460232, "answer_id": 43247393, "question_id": 43239258, "link": "https://stackoverflow.com/questions/43239258/submit-multiple-fasta-sequence-using-wwwmechanize/43247393#43247393", "title": "Submit multiple fasta sequence using WWW::Mechanize", "body": "<p>For starters, this line:</p>\n\n<pre><code>    'in'    =&gt; $ARGV[0],\n</code></pre>\n\n<p>Means that you're sending them a filename, rather than the contents of the file.  You'll need to get the contents first, and send those.  Libraries like <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> are handy for this.</p>\n"}], "owner": {"reputation": 177, "user_id": 2525186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd560cef83df54a5198cc3d03c0acbc2?s=128&d=identicon&r=PG", "display_name": "pali", "link": "https://stackoverflow.com/users/2525186/pali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43247393, "answer_count": 1, "score": 0, "last_activity_date": 1491500640, "creation_date": 1491417932, "last_edit_date": 1491428076, "question_id": 43239258, "link": "https://stackoverflow.com/questions/43239258/submit-multiple-fasta-sequence-using-wwwmechanize", "title": "Submit multiple fasta sequence using WWW::Mechanize", "body": "<p>I want to summit multiple protein sequences in fasta format on <a href=\"http://harrier.nagahama-i-bio.ac.jp/sosui/sosuiG/sosuigsubmit.html\" rel=\"nofollow noreferrer\">this server</a> using following perl script</p>\n\n<pre><code>use WWW::Mechanize;\n\n# get the webpage with the form\n\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;show_progress(1);\n\nmy $url = \"http://harrier.nagahama-i-bio.ac.jp/sosui/sosu/sosuigsubmit.html\";\n$mech-&gt;get($url);\n\n# just checks to see if scripts call properly\n\nsub validateInput{\n    my $file = shift;\n    my $inFh = IO::File-&gt;new( $file ) || die \"can't open input file\\n\";\n    close($inFh);\n    return 1;\n}\n\nvalidateInput($ARGV[0]);\n\n# fill the fields with the appropriate data and submit\n\nmy $fields = {\n    'in'    =&gt; $ARGV[0],\n    'value' =&gt; 'Exec'\n};\n\n$mech-&gt;submit_form(\n     fields =&gt; $fields,\n);\n\n# print results\n\nprint $mech-&gt;content();\n</code></pre>\n\n<p>But every time I getting the result like this </p>\n\n<pre><code>&lt;HTML&gt;\n&lt;bR&gt;&lt;bR&gt;&lt;bR&gt;\n&lt;TABLE&gt;\n&lt;TR&gt;&lt;TD ALIGN=left WIDTH=300&gt;TOTAL PROTEINS&lt;/TD&gt;&lt;TH&gt;0&lt;/TH&gt;&lt;/TR&gt;\n&lt;TR&gt;&lt;TD ALIGN=left WIDTH=300&gt;TOTAL MEMBRANE PROTEINS&lt;/TD&gt;&lt;TH&gt;0&lt;/TH&gt;&lt;/TR&gt;\n&lt;TR&gt;&lt;TD ALIGN=left WIDTH=300&gt;PERCENTAGE&lt;/TD&gt;&lt;TH&gt; 0.0 %&lt;/TH&gt;&lt;/TR&gt;\n&lt;/TABLE&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>Which is a result page when you submit form without input. So I suspect that there is some problem with my sequence submission. My input file look like this</p>\n\n<pre><code>&gt;ATCG00420\nMQGTLSVWLAKRGLVHRSLGFDYQGIETLQIKPEDWHSIAVILYVYGYNYLRSQCAYDVAPGGLLASVYHLTRIEYGV    NQAEEVCIKVFTHRSNPRIPSVFWVWKSTDFQERESYDMLGITYDSHPRLKRILMPESWIGWPLRKDYIAPNFYEIQDAY\n&gt;ATCG00360\nMSAQSEGNYAEALQNYYEAMRLEIDPYDRSYILYNIGLIHTSNGEHTKALEYYFRALERNPFLPQAFNNMAVICHYRGEQAIQQGDSEMAEAWFAQAAEYWKQAITLTPGNYIEAQNWLTITRRFE\n</code></pre>\n\n<p>and I am calling my script like this </p>\n\n<pre><code>perl my_script input.seq &gt;output\n</code></pre>\n\n<p>Thanks for helping me out.</p>\n"}, {"tags": ["perl", "unicode"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491417717, "post_id": 43239078, "comment_id": 73548475, "body": "@H&#229;konH&#230;gland That will still return <code>X Y Z</code> as well"}], "answers": [{"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491417909, "post_id": 43239155, "comment_id": 73548607, "body": "@jm666 <code>NOT (NOT GREEK) OR (NOT UPPER) = GREEK AND UPPER</code>"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1491485986, "post_id": 43239155, "comment_id": 73582385, "body": "Is there a reason why there is no out-of-the-box way to <code>AND</code> within a regex? (Similar to <code>|</code> for <code>OR</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1491488793, "post_id": 43239155, "comment_id": 73584739, "body": "@Zaid, Aside from AND-THEN (as in &quot;AB&quot; = &quot;A AND-THEN B&quot;), what would you AND? If you want to AND character properties, then that&#39;s why <code>(?[ ])</code> was created. The other major need for AND is addressed by <code>&#47;A&#47; &amp;&amp; &#47;B&#47;</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1491421230, "last_edit_date": 1491421230, "creation_date": 1491417526, "answer_id": 43239155, "question_id": 43239078, "link": "https://stackoverflow.com/questions/43239078/how-to-combine-multiple-unicode-properties-in-perl-regex/43239155#43239155", "title": "How to combine multiple Unicode properties in perl regex?", "body": "<p>We can't use</p>\n\n<pre><code>/(?:\\p{Greek}|\\p{Upper})/         # Greek OR Upper\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/[\\p{Greek}\\p{Upper}]/            # Greek OR Upper\n</code></pre>\n\n<p>One way of achieving AND in a regex is using lookarounds.</p>\n\n<pre><code>/\\p{Greek}(?&lt;=\\p{Upper})/         # Greek AND Upper\n</code></pre>\n\n<p>Another way of getting an AND is to negate an OR. <a href=\"https://en.wikipedia.org/wiki/De_Morgan&#39;s_laws\" rel=\"noreferrer\">De Morgan's laws</a> tells us</p>\n\n<pre><code>NOT( Greek AND Upper )  \u21d4  NOT(Greek) OR NOT(Upper)\n</code></pre>\n\n<p>so</p>\n\n<pre><code>Greek AND Upper  \u21d4  NOT( NOT(Greek) OR NOT(Upper) )\n</code></pre>\n\n<p>This gives us</p>\n\n<pre><code>/[^\\P{Greek}\\P{Upper}]/           # Greek AND Upper\n</code></pre>\n\n<p>Since 5.18, there's also an experimental feature you can use:</p>\n\n<pre><code>no warnings qw( experimental::regex_sets );\n/(?[ \\p{Greek} &amp; \\p{Upper} ])/    # Greek AND Upper\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 5, "last_activity_date": 1491489358, "last_edit_date": 1491489358, "creation_date": 1491417975, "answer_id": 43239266, "question_id": 43239078, "link": "https://stackoverflow.com/questions/43239078/how-to-combine-multiple-unicode-properties-in-perl-regex/43239266#43239266", "title": "How to combine multiple Unicode properties in perl regex?", "body": "<p>This works in 5.14.0 as well:</p>\n\n<pre><code>sub InUpperGreek {\n    return &lt;&lt;'END'\n+utf8::Greek\n&amp;utf8::Upper\nEND\n}\n\nmy @upper_greek = ($str =~ /\\p{InUpperGreek}/g);\nsay \"Upper Greek: @upper_greek\";\n</code></pre>\n\n<p>Not sure if that's simpler. :)  For more information on how this works, see the <a href=\"https://metacpan.org/pod/perlunicode#User-Defined-Character-Properties\" rel=\"nofollow noreferrer\">perlunicode</a> documentation on user-defined character properties.</p>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 2, "accepted_answer_id": 43239155, "answer_count": 2, "score": 7, "last_activity_date": 1491489358, "creation_date": 1491417273, "question_id": 43239078, "link": "https://stackoverflow.com/questions/43239078/how-to-combine-multiple-unicode-properties-in-perl-regex", "title": "How to combine multiple Unicode properties in perl regex?", "body": "<p>Have this script:</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse utf8;    \nbinmode STDOUT, ':utf8';\n\nmy $str = \"XYZ \u03a6\u03a8\u03a9 zyz \u03c6\u03c8\u03c9\";\n\nmy @greek = ($str =~ /\\p{Greek}/g);\nsay \"Greek: @greek\";\n\nmy @upper = ($str =~ /\\p{Upper}/g);\nsay \"Upper: @upper\";\n\n#my @upper_greek = ($str =~ /\\p{Upper+Greek}/); #wrong.\n#say \"Upper+Greek: @upper_greek\";\n</code></pre>\n\n<p>Is possible combine multiple unicode properties? E.g how to select only <code>Upper and Greek</code>, and get the wanted:</p>\n\n<pre><code>Greek: \u03a6 \u03a8 \u03a9 \u03c6 \u03c8 \u03c9\nUpper: X Y Z \u03a6 \u03a8 \u03a9\nUpper+Greek: \u03a6 \u03a8 \u03a9      #&lt;-- how to get this?\n</code></pre>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 16493, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "edited": false, "score": 0, "creation_date": 1491412820, "post_id": 43237647, "comment_id": 73545485, "body": "Information about the keyboard layout depends on your operating system. Do you use Linux, BSD, or a Mac?"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 16493, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "edited": false, "score": 0, "creation_date": 1491412840, "post_id": 43237647, "comment_id": 73545494, "body": "@Socowi this is Ubuntu Linux"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491413120, "post_id": 43237647, "comment_id": 73545672, "body": "Which encoding is the <code>Library.bib</code> file in?"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491413374, "post_id": 43237647, "comment_id": 73545838, "body": "@H&#229;konH&#230;gland text/plain; charset=utf-8"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491413631, "post_id": 43237647, "comment_id": 73546002, "body": "<i>&quot;there are random characters which will not show up in the output PDF&quot;</i> That should work. It&#39;s very rare to find a font that doesn&#39;t include the accented European characters. <i>&quot;How can I grep or use perl regex for any character I cannot type on the keyboard&quot;</i> I don&#39;t understand. Why do you want to be able to type them? They&#39;re already in the data. Surely you want to fix them not appearing in the PDF? Also, you can type any Unicode character in bash by Ctrl/Shift/U followed by the four-digit hex codepoint."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491413643, "post_id": 43237647, "comment_id": 73546011, "body": "That would depend on your keyboard. What characters can your keyboard type?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491413740, "post_id": 43237647, "comment_id": 73546085, "body": "If it just accepts 4 hex characters, it actually covers only 1/17th of Unicode Code Points."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491413902, "post_id": 43237647, "comment_id": 73546196, "body": "There is also a POSIX character class <code>[:ascii:]</code> that matches any character in the ASCII character set"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491413949, "post_id": 43237647, "comment_id": 73546233, "body": "<code>[[:ascii:]]</code> is equilvalent to <code>[\\x00-\\x7F]</code>; so it includes control chars."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491414385, "post_id": 43237647, "comment_id": 73546516, "body": "@H&#229;konH&#230;gland thank you! that works perfectly, I&#39;d accept it as the answer if you wrote it in the answer area <code>grep -P [^[:ascii:]] ~&#47;Documents&#47;Library.bib</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1491415424, "last_edit_date": 1495541852, "creation_date": 1491414517, "answer_id": 43238246, "question_id": 43237647, "link": "https://stackoverflow.com/questions/43237647/grep-any-non-keyboard-character/43238246#43238246", "title": "grep any non-keyboard character", "body": "<p>You can use the POSIX character class <code>[:ascii:]</code> that matches any character in the ASCII character set. To print all lines with non ASCII characters:</p>\n\n<pre><code>grep -nP '[^[:ascii:]]' ~/Documents/Library.bib\n</code></pre>\n\n<p>or, to also highlight the non-ASCII characters:</p>\n\n<pre><code>grep --color=auto -nP '[^[:ascii:]]' ~/Documents/Library.bib\n</code></pre>\n\n<p>See <a href=\"https://www.gnu.org/software/grep/manual/html_node/Character-Classes-and-Bracket-Expressions.html\" rel=\"nofollow noreferrer\">Character Classes and Bracket Expressions</a> in the Gnu grep manual and <a href=\"http://www.regular-expressions.info/posixbrackets.html\" rel=\"nofollow noreferrer\">POSIX Bracket Expressions</a> at Regular-Expression.info for more information.</p>\n\n<p>See also: <a href=\"https://stackoverflow.com/q/3001177/2173773\">How do I grep for all non-ASCII characters in UNIX</a></p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 43238246, "answer_count": 1, "score": 1, "last_activity_date": 1491415424, "creation_date": 1491412566, "question_id": 43237647, "link": "https://stackoverflow.com/questions/43237647/grep-any-non-keyboard-character", "title": "grep any non-keyboard character", "body": "<p>I'm downloading BibTex entries, but often there are random characters which will not show up in the output PDF, e.g. \u00e0\u00e8\u00ec\u00f2\u00f9\u00e1\u00e9\u00ed\u00f3\u00fa\u00e4\u00eb\u00ef\u00f6\u00fc\u00e2\u00ea\u00ee\u00f4\u00fb\u00ff\u00f8\u00c0\u00c8\u00cc\u00d2\u00d9\u00c1\u00c9\u00cd\u00d3\u00da\u00c4\u00cb\u00cf\u00d6\u00dc but this list isn't comprehensive (random foreign letters which I cannot type).</p>\n\n<p>I've tried things like </p>\n\n<pre><code>grep -nP '[^a-zA-Z0-9\\/,=!@#$%^&amp;*()_]' ~/Documents/Library.bib\n</code></pre>\n\n<p>but there has got to be an easier way than this.</p>\n\n<p>How can I grep or use perl regex for any character I cannot type on the keyboard (is this ASCII too?) e.g. if I have an \"n\" with an accent is there some way I can know that?</p>\n"}, {"tags": ["perl", "cpan", "setuid"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 2397428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4debafa6be91da6d3d0b73ab791085b1?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nix", "link": "https://stackoverflow.com/users/2397428/robert-nix"}, "edited": false, "score": 0, "creation_date": 1491419133, "post_id": 43236717, "comment_id": 73549331, "body": "I was able to run &quot;HOME=&#39;/tmp&#39; cpan Net::foobar&quot;, and it worked. Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1491409498, "creation_date": 1491409498, "answer_id": 43236717, "question_id": 43235998, "link": "https://stackoverflow.com/questions/43235998/can-cpans-use-of-the-local-directory-be-redirected/43236717#43236717", "title": "Can cpan&#39;s use of the .local directory be redirected?", "body": "<p><code>cpan_home_dir_candidates</code> generates a list of directories.</p>\n\n<ol>\n<li>The first dir in the list that contains <code>CPAN/MyConfig.pm</code> is used.</li>\n<li>Otherwise, the first dir in the list that exists is used.</li>\n<li>Otherwise, the first dir in the list is used.</li>\n</ol>\n\n<p>So how is the list built?</p>\n\n<pre><code>if ($CPAN::META-&gt;has_usable('File::HomeDir')) {\n    if ($^O ne 'darwin') {\n        push @dirs, File::HomeDir-&gt;my_data;\n        # my_data is ~/Library/Application Support on darwin,\n        # which causes issues in the toolchain.\n    }\n    push @dirs, File::HomeDir-&gt;my_home;\n}\n# Windows might not have HOME, so check it first\npush @dirs, $ENV{HOME} if $ENV{HOME};\n...\n</code></pre>\n\n<p>Options include:</p>\n\n<ul>\n<li>Changing the <code>HOME</code> env var (if File::HomeDir isn't installed).</li>\n<li>Editing <code>cpan_home_dir_candidates</code> in <code>CPAN/HandleConfig.pm</code> to add <code>push @dirs, \"/alt/dir\";</code></li>\n<li>...</li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 2397428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4debafa6be91da6d3d0b73ab791085b1?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nix", "link": "https://stackoverflow.com/users/2397428/robert-nix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43236717, "answer_count": 1, "score": 3, "last_activity_date": 1491409498, "creation_date": 1491407432, "question_id": 43235998, "link": "https://stackoverflow.com/questions/43235998/can-cpans-use-of-the-local-directory-be-redirected", "title": "Can cpan&#39;s use of the .local directory be redirected?", "body": "<p>I have a setuid program which then calls cpan as root on behalf of the user. This works for commands like yum, but fails for cpan. My problem is that the users' home directories are NFS mounted shares, and use the root-squash option, so root has no access to the user's home directory. </p>\n\n<p>Cpan attempts to create a .local directory in the user's home, which fails due to the root-squash.</p>\n\n<p>Is there a way to configure cpan such that it would use another path as its base for building the package? Or, is there a way to set up root as the userid of record so that cpan would attempt to create the .local file there?</p>\n\n<p>Sample output:</p>\n\n<p>./cloudSoftware cpan foobar\nmkdir /home/auto/ts00086/.local: Permission denied at /usr/share/perl5/CPAN/HandleConfig.pm line 589.</p>\n"}, {"tags": ["regex", "perl", "perl-data-structures", "regex-group"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1491408152, "post_id": 43235656, "comment_id": 73542584, "body": "What structure/output are you looking for? Do you need to maintain ordering if the &#39;CAT_NAME&#39; entries?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1491409773, "post_id": 43235656, "comment_id": 73543694, "body": "For each <code>^Category</code> paragraph, are you looking to just find the cat name words and not the values? Also, are you looking to keep each paragraph data separate from other paragraphs? The regex is simple, it just depends on what you&#39;re trying to do. Also, it&#39;s better to slurp all the data into a single string before you parse it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1491410301, "post_id": 43235656, "comment_id": 73544005, "body": "<code>None of the names had their categories included (I put those on my example to make them more readable)</code> In this case, it would be better to show raw text, without your annotations."}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491411634, "post_id": 43235656, "comment_id": 73544801, "body": "@Sobrique I am generating a CSV dump as noted in a comment at the very last line in the code block under <b>Approach 2</b>"}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "edited": false, "score": 0, "creation_date": 1491411938, "post_id": 43235656, "comment_id": 73544958, "body": "@sln I can&#39;t disclose my real category names (NDA) but lets say they were Orange, Apples and Blueberry. Anything that could parse such fruit names categories would be easier to translate to the desired grammar. (and easier to generalize to other applications also)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491414110, "post_id": 43235656, "comment_id": 73546336, "body": "You have just shown us your log file and said that you want to parse it. It would help a lot if you explained what result you wanted"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491414182, "post_id": 43235656, "comment_id": 73546384, "body": "@sln: <i>&quot;Also, it&#39;s better to slurp all the data into a single string before you parse it&quot;</i> That&#39;s very misleading. It&#39;s probably not &quot;better&quot; at all, and may not even be possible."}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491421500, "post_id": 43235656, "comment_id": 73550703, "body": "@Borodin I am generating a CSV dump as noted in a comment at the very last line in the code block under <b>Approach 2</b>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491422894, "post_id": 43235656, "comment_id": 73551508, "body": "One question: the text after the names, like <code>CAT2_NAME</code> are always in one line (single-line)? or they could be multiline?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491425593, "post_id": 43235656, "comment_id": 73552996, "body": "@Rafareino  I added a solution to my answer, interpreting your comments that &quot;<i>Category</i>&quot; stands for a word out of a fixed list, for example as  you say &quot;<i>Orange, Apples and Blueberry</i>&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491432256, "post_id": 43235656, "comment_id": 73555745, "body": "@Borodin  - I guess I meant virtual ram. On the other hand no paged memory and  2k ram available after bootup would be a problem if a record $/ falls on a  5k boundary."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491580391, "post_id": 43235656, "comment_id": 73632899, "body": "@sln: Not at all; the operating system does the paging, but you should do all you can to limit the working set of your program so that it doesn&#39;t have to be paged out. And I&#39;m not &quot;playing&quot; to anyone, I&#39;m simply trying to get a response from you regarding your fallacious claim that slurping a file before parsing it is somehow &quot;better&quot; while you appear to be avoiding having to substantiate it by changing the subject to the irrelevant topic of virtual memory. Accordingly I take it that you&#39;re aware that your assertion has no basis in fact, and you are simply shy of having to admit it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491733976, "post_id": 43235656, "comment_id": 73676176, "body": "@sln: The moderators deleted those comments because I asked them to. The thread was way off topic, and I don&#39;t believe you would ever admit to being mistaken. If you have never heard of the <i>working set</i> of a process then you should look it up. It is at the heart of the concept of paged memory, and you can become better informed without publicly confessing your errors."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1491408890, "creation_date": 1491408890, "answer_id": 43236510, "question_id": 43235656, "link": "https://stackoverflow.com/questions/43235656/use-perl-regex-to-parse-structured-dump/43236510#43236510", "title": "Use Perl/Regex to parse &#39;structured&#39; dump", "body": "<p>Rule one in 'parsing ad-hoc formats' is: Find the field separator.</p>\n\n<p>In this case - You've got \"Category\" at start of line. If you had a proper 'blank line' then you could use paragraph mode, but you don't, so:</p>\n\n<pre><code>local $/ = \"\\nCategory\"; \n</code></pre>\n\n<p>To match it, with no whitepace. </p>\n\n<p>Rule two - look for the structure in your records. It looks like you have 'Uses' and 'Used' segments, and within those - key-value pairs, indented with <code>-</code> separators. Do you need to maintain ordering of those? Because if not, then a hash would make sense, and if so, then you need an array. </p>\n\n<p>And then third question - what does the output need to look like? You mention CSV, but ... if your data is hierarchical (like it is) then something like JSON might do it better.</p>\n\n<p>Anyway, parsing would look something like:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse JSON;\n\nmy @records;\n\nlocal $/ = \"\\nCategory\";\nwhile (&lt;&gt;) {\n\n   print \"Record $. looks like: \\n\\n\";\n   print;\n   print \"\\n\\n----\\n\\n\";\n\n\n   my ( $used_cat, $used_text, $uses_cat, $uses_text ) =\n     m/^\\s{4}Used by (\\w+) Resources:(.*)Uses Resource (\\w+):(.*)/gms;\n\n\n   print \"::\\n\";\n   print $used_text;\n   print \"\\n:::\\n\";\n\n   my $this_record;\n   $this_record-&gt;{used_cat} = $used_cat;\n   $this_record-&gt;{uses_cat} = $uses_cat;\n\n   for ( split /\\n/, $used_text ) {\n\n      if ( my ( $key, $value ) = m/^\\s+(\\w+)\\s*-\\s*(.*)$/ ) {\n         print \"$key =&gt; $value\\n\";\n         $this_record-&gt;{used}{$key} = $value;\n      }\n   }\n\n   for ( split /\\n/, $uses_text ) {\n\n      if ( my ( $key, $value ) = m/^\\s+(\\w+)\\s*-\\s*(.*)$/ ) {\n         print \"$key =&gt; $value\\n\";\n         $this_record-&gt;{uses}{$key} = $value;\n      }\n   }\n\n   push @records, $this_record;\n}\n\nprint Dumper \\@records;\nprint \"JSON Output:\\n\";\nprint to_json ( \\@records, { pretty =&gt; 1 } );\n</code></pre>\n"}], "owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492233744, "creation_date": 1491406405, "last_edit_date": 1491774493, "question_id": 43235656, "link": "https://stackoverflow.com/questions/43235656/use-perl-regex-to-parse-structured-dump", "title": "Use Perl/Regex to parse &#39;structured&#39; dump", "body": "<p>I was working with a proprietary software, and had to deal with very long/tedious analysis among the components of that software. </p>\n\n<p>To try to improve my productivity in this task, I used the software generated Report and as trying to parse it, my bet was that Perl was perfectly suited to it.</p>\n\n<p>The reports looks like (after removing page numbers):</p>\n\n<pre><code>Category one: NAME1    - Some free form text description goes here\n    Used by Cat2 Resources:\n        CAT2_NAME - Anoter free form text description here (there are lots of them, but they are pretty much useless, since no one cares about them, probably could not be that long.)\n        CAT2_NAME2 - And so on.\n        CAT2_NAME4 - U guessed it!\n    Uses Resource Cat4:\n        CAT4_NAMED   - A meaningless description that where copied from an unrelated resource (Save as...)\n\n\nCategory one: NAME7    - Description\n    Used by Cat2 Resources:\n        CAT2_NAME - Text\n        CAT2_NAME5 - And so on.\n\n        CAT2_NAME4 - U guessed it!\n    Uses Resource Cat4:\n        CAT4_NAME_  - Some names don't make any sense.\n\nCategory TWO: NAME7    - Description of another Category\n    Used by Cat3 Resources:\n        CAT3_NAME - Text\n        CAT3_NAME5 - And so on.\n        CAT3_NAME4 - U guessed it!\n    Uses Resource Cat4:\n        CAT4_NAME_  - Some names don't make any sense.\n</code></pre>\n\n<p>To be completely clear</p>\n\n<ul>\n<li>All element names where named in CAPITAL LETTERS, numbers and underscore (\"_\")</li>\n<li>Almost all elements relate with each others</li>\n<li>There are orphan elements</li>\n<li>None of the names had their categories included (I put those on my example to make them more readable)</li>\n<li>The spaces at the start of each line under a paragraph/sub-paragraph where one or two TABs</li>\n<li>There are some random empty lines here and there, I plan to clean this file a little better, but I am in a hurry right now. </li>\n</ul>\n\n<p>I would like to be able to generate something like:</p>\n\nOut_CAT1_CAT2.csv\n\n<pre><code>NAME1,CAT2_NAME\nNAME1,CAT2_NAME2\nNAME1,CAT2_NAME4\nNAME7,CAT2_NAME\nNAME7,CAT2_NAME5\nNAME7,CAT2_NAME4\n</code></pre>\n\nOut_CAT1_CAT4.csv\n\n<pre><code>NAME1,CAT4_NAMED\nNAME7,CAT2_NAME4\nNAME7,CAT4_NAME_\n</code></pre>\n\nOut_CAT2_CAT3.scv\n\n<pre><code>NAME7,CAT3_NAME\nNAME7,CAT3_NAME5\nNAME7,CAT3_NAME4\n</code></pre>\n\nOut_CAT2_CAT4.scv\n\n<pre><code>NAME7,CAT4_NAME_\n</code></pre>\n\n<p>To parse this file, I tried (and failed) one first approach that consisted of grabbing a complete paragraph (That one that started as Category/again, there is no 'Category' on that label, only the category name, like database/processing model, etc)</p>\n\n<h2>Approach 1</h2>\n\n<p>I tried to use multi line regex like <code>/(&lt;?=^Category one :)[A-Z0-9_]+.*+$(^\\s.*$)+/m</code> intending to capture a complete paragraph to an array (or yet best an array to each level one Category) but have tried a lot of combinations at <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> without any lucky.</p>\n\n<p>My aim was to create an array of such Cat1 paragraphs, that I would in turn parse with a subroutine. But I failed (I would appreciate some advice to it in comments please).</p>\n\n<p>Them I turned over to a completely different approach, I wrote something along os the lines of</p>\n\n<h2>Approach 2</h2>\n\n<pre><code>while(&lt;&gt;){\n    if(/^Category one: /){\n        $mode = CAT1PARSING;\n        # Used regex to grab the name as it came in this same line after the colon.\n        $cat1Name = /regex/;\n    }\n    elsif(/^Category TWO: /){\n        $mode = CAT2PARSING;\n    }\n    ...\n\n    if($mode == CAT1PARSING){\n        # Used some regex to capture the name and description as elements of an array\n        push @cat1Array, ($el1, $el2) = $_ =~ (/regex/);\n    }\n    ...\n}\n</code></pre>\n\n<p># Here I do some formatting to dump the same info to a lot of CSV files one to each category/sub-category pair, with  the appropriated headers</p>\n\n<h3>I do some formatting to dump the same info to a lot of CSV files one to each category/sub-category pair, with  the appropriated headers</h3>\n\n<p>My real program was made using approach 2, sets two control variables $mode and $subMode (I am luck that there are only two such levels), but I am unsatisfied with it.</p>\n\n<p>I am not sure if it is what is called a 'state machine', anyone can confirm?</p>\n\n<p>So of course I am not asking one question but a lot, nevertheless my main questions are: </p>\n\n<p><strong>There are any ways in which I could implement this with regex? As stated in the approach one? How?</strong> </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1491508205, "post_id": 43235471, "comment_id": 73597515, "body": "Your single regex transforms <code>&quot;&#47;&quot;</code> to <code>&quot;&#47;&#47;&quot;</code>, for similar reasons."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 0, "creation_date": 1491548858, "post_id": 43235471, "comment_id": 73611763, "body": "As others have answered your query, I thought I would point out that your initial &#39;Using a triple regex&#39; gives the correct result is actually flawed.  Both your prefix and suffix are looking for zero or more slashes at the start or end of the string when in fact you want to be looking for the absence of the slash at these points.  So for the prefix it would have been more correct to look for :- s,^([^/]),/\\1, .... This will check that there is not slash at the front and then add it plus the found character back again."}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 0, "last_activity_date": 1491406117, "creation_date": 1491406117, "answer_id": 43235575, "question_id": 43235471, "link": "https://stackoverflow.com/questions/43235471/regex-zero-width-word-boundary-makes-an-alternation-pattern-match-correctly/43235575#43235575", "title": "Regex - zero width &#39;word boundary&#39; makes an alternation pattern match correctly", "body": "<p>Here is a single regex to do all:</p>\n\n<pre><code>s='home/////test/tmp/'\nperl -pe 's~^(?!/)|(?&lt;!/)$|/{2,}~/~g' &lt;&lt;&lt; \"$s\"\n/home/test/tmp/\n\ns='home/test/tmp'\nperl -pe 's~^(?!/)|(?&lt;!/)$|/{2,}~/~g' &lt;&lt;&lt; \"$s\"\n/home/test/tmp/\n</code></pre>\n\n<p><strong>Regex Breakup:</strong></p>\n\n<pre><code>^(?!/) # Line start if not followed by /\n|\n(?&lt;!/)$ # Line end if not preceded by /\n|\n/{2,} # 2 or more /\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491705995, "post_id": 43248536, "comment_id": 73670294, "body": "@Sobrique I added to my post what I think shows it far more clearly than the original verbal statements alone.  Just letting you know in case you didn&#39;t get to see the change."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1497421096, "last_edit_date": 1497421096, "creation_date": 1491463860, "answer_id": 43248536, "question_id": 43235471, "link": "https://stackoverflow.com/questions/43235471/regex-zero-width-word-boundary-makes-an-alternation-pattern-match-correctly/43248536#43248536", "title": "Regex - zero width &#39;word boundary&#39; makes an alternation pattern match correctly", "body": "<p>The reason is that the <code>/+</code> alternation under <code>/g</code> matches the last slash &ndash; and the search then goes on because of the presence of the anchor. It continues from the position after the last substitution, thus after the last slash.  That search matches zero slashes at <code>$</code> and adds <code>/</code>. </p>\n\n<p>We can see this by</p>\n\n<pre><code>perl -wE'\n    $_ = \"home/dir///end/\"; \n    while (m{( ^/* | /+ | /*$ )}gx) { say \"Got |$1| at \", pos }\n'\n</code></pre>\n\n<p>which prints  (with aligned <code>at ...</code> for readability)</p>\n\n<pre>\nGot ||    at 0\nGot |/|   at 5\nGot |///| at 11\nGot |/|   at 15\nGot ||    at 15\n</pre>\n\n<p>With the actual substitution </p>\n\n<pre><code>s{( ^/* | /+ | /*$ )}{ say \"Got |$1| at \", pos; q(/) }egx\n</code></pre>\n\n<p>the numbers differ as they refer to positions in the intermediate strings, where the last two</p>\n\n<pre>\n...\nGot |/| at 14\nGot ||  at 15\n</pre>\n\n<p>are telling.</p>\n\n<p>I don't see what can go wrong with having <code>\\b</code>, as in the question or as <code>/*\\b$</code>.</p>\n\n<hr>\n\n<p>This is an interesting question, but I'd like to add that all these details are avoided by</p>\n\n<pre><code>$_ = '/' . (join '/', grep { /./ } split '/', $_) . '/'  for @paths;\n</code></pre>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1497421096, "creation_date": 1491405861, "last_edit_date": 1495540484, "question_id": 43235471, "link": "https://stackoverflow.com/questions/43235471/regex-zero-width-word-boundary-makes-an-alternation-pattern-match-correctly", "title": "Regex - zero width &#39;word boundary&#39; makes an alternation pattern match correctly", "body": "<p>With reference to: <a href=\"https://stackoverflow.com/questions/43211967/perl-string-catenation-and-substitution-in-a-single-line/43212333#43212333\">perl string catenation and substitution in a single line?</a></p>\n\n<p>Given an input of:</p>\n\n<pre><code>home/////test/tmp/\n</code></pre>\n\n<p>And a desired transform to:</p>\n\n<pre><code>/home/test/tmp/\n</code></pre>\n\n<p>(and other file-path like patterns, that need trailing and leading slashes, but no doubles. E.g. <code>/home/test/tmp/</code> passes through, but <code>/home/test/tmp</code> gets a trailing slash, etc.)</p>\n\n<p>Using a triple regex;</p>\n\n<pre><code>s,^/*,/,;  #prefix\ns,/*$,/,; #suffix\ns,/+,/,g; #double slashes anywhere else. \n</code></pre>\n\n<p>Gives us the right result:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $str = 'home/////teledyne/tmp/';\n$str =~ s,^/*,/,;    #prefix\n$str =~ s,/*$,/,;    #suffix\n$str =~ s,/+,/,g;    #double slashes anywhere else.\nprint $str; \n</code></pre>\n\n<p>But if I try and combine these patterns using alternation, I get:</p>\n\n<pre><code>s,(^/*|/+|/*$),/,g \n</code></pre>\n\n<p>Which looks like it <em>should</em> work... it actually doesn't, and I get a double trailing slash. </p>\n\n<p>But adding a zero width match, it works fine:</p>\n\n<pre><code>s,(^/*|/+|\\b/*$),/,g;\n</code></pre>\n\n<p>Can anyone help me understand what's happening differently in the alternation group, and is there a possible gotcha with just leaving that <code>\\b</code> in there? </p>\n"}, {"tags": ["perl", "byte", "unpack"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "edited": false, "score": 0, "creation_date": 1491403457, "post_id": 43234137, "comment_id": 73539085, "body": "Thanks for providing multiple solutions and explaining the available choices here"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "edited": false, "score": 1, "creation_date": 1491403645, "post_id": 43234137, "comment_id": 73539240, "body": "There&#39;s even <code>n&#47;C</code> if the number of character prefixes the characters."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1491403345, "last_edit_date": 1491403345, "creation_date": 1491402582, "answer_id": 43234137, "question_id": 43234010, "link": "https://stackoverflow.com/questions/43234010/unpack-without-for-loop/43234137#43234137", "title": "unpack() without for loop", "body": "<p>I think you were going for</p>\n\n<pre><code>my @AA = map { unpack('C', $_) } split //, substr($message, 3);\n</code></pre>\n\n<p>which can be optimized into</p>\n\n<pre><code>my @AA = map ord, split //, substr($message, 3);\n</code></pre>\n\n<p>But I would use <code>unpack</code>. The trick is that you can follow types with a number or <code>*</code> to indicate how many you want to extract.</p>\n\n<pre><code>my @AA = unpack('C*', substr($message, 3));\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my @AA = unpack('x3 C*', $message);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my ($header, @AA) = unpack('a3 C*', $message);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my ($header, $body) = unpack('a3 a*', $message);\nmy @AA = unpack('C*', $body);\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 3417549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3VOwl.jpg?s=128&g=1", "display_name": "titus.andronicus", "link": "https://stackoverflow.com/users/3417549/titus-andronicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 43234137, "answer_count": 1, "score": 3, "last_activity_date": 1491403345, "creation_date": 1491402271, "question_id": 43234010, "link": "https://stackoverflow.com/questions/43234010/unpack-without-for-loop", "title": "unpack() without for loop", "body": "<p>In Perl I am using the <a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack()</a> function to unpack binary data into bytes. So far I got this:</p>\n\n<pre><code>my $lenOverHead = 3;\nmy $lenWithoutOverheads = length($thing-&gt;{_raw}) - $lenOverHead;\n\nmy @AA;\nfor (my $i = 0; $i &lt; $lenWithoutOverheads; $i++)\n{\n    push (@AA,  unpack('C', substr($thing-&gt;{_raw}, $lenOverHead+$i)));\n}\n</code></pre>\n\n<p>Note that <code>$thing-&gt;{_raw}</code> is just a string with binary data.</p>\n\n<p>Now the question is, is there a better(=more efficient)/nicer way to do this with <code>map()</code> or similar, without requiring a <code>for</code> loop?</p>\n\n<p>I tried the following:</p>\n\n<pre><code>my @BB = map { unpack('C', $_) } substr($thing-&gt;{_raw}, $lenOverHead);\n</code></pre>\n\n<p>But of course it only unpacks the first byte, not all of them....</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491387819, "post_id": 43226012, "comment_id": 73526611, "body": "I think you need to show your whole program."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491388828, "post_id": 43226012, "comment_id": 73527374, "body": "the <code>if ( $ext eq &quot;.pdf&quot; ) {</code> will warn if the file has not any extension, e.g. if the <code>my ( $ext ) = $file =~ &#47;(\\.[^.]+)$&#47;;</code> will not match.."}], "answers": [{"comments": [{"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "edited": false, "score": 0, "creation_date": 1491384889, "post_id": 43227171, "comment_id": 73524416, "body": "The reboot happens once at 03:00 AM not every minute that&#39;d be bad. Also there is nothing more to show in the script - other than a script to get all files recursively."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "edited": false, "score": 0, "creation_date": 1491385076, "post_id": 43227171, "comment_id": 73524561, "body": "No, but if your <i>other</i> script <i>starts</i> running at 0300, and then the reboot happens in the middle, that&#39;d do the same thing, right? Might want to check the &#39;moved&#39; file is actually complete, because it might not have finished with the <code>mv</code> operation properly either."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491387954, "post_id": 43227171, "comment_id": 73526715, "body": "<i>&quot;Is there any chance that <code>$print_direction</code> doesn&#39;t match <code>$dir</code>?&quot;</i> But <code>$print_direction</code> is presumably a path string while <code>$dir</code> is a directory handle. Likewise <code>foreach my $file ( glob &quot;$dir&#47;*.pdf&quot; ) {</code> is wrong with a directory handle."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1491385462, "last_edit_date": 1491385462, "creation_date": 1491384560, "answer_id": 43227171, "question_id": 43226012, "link": "https://stackoverflow.com/questions/43226012/perl-script-in-crontab-didnt-move-a-file-overnight/43227171#43227171", "title": "Perl script in Crontab didn&#39;t move a file overnight", "body": "<p>Well, aside from a crontab reboot being a bit on the filthy side - the major thing that tends to break with \"readdir\" type operations like this, is that you're not adding <code>$dir</code> to any of the subsequent modifications. So it could be you're <em>reading</em> a different <code>$dir</code> to your current working directory. </p>\n\n<p>But the other possiblity is that your reboot meant that some transient state wasn't present, or the script was aborted part way, or maybe the database wasn't running as your script doesn't check return codes. If it \"runs once a minute\" and \"takes a while\" then it's <em>very</em> likely that a reboot will interrupt it. </p>\n\n<p>Mostly I'm guessing, because a lot of the things you're asking about aren't contained within your script, so it's not a reproducible problem.</p>\n\n<p>However, I'll also point out a few things:</p>\n\n<ul>\n<li><code>readdir</code> has <code>$dir</code> specified, but <code>move</code> doesn't. Is there any chance that <code>$print_direction</code> doesn't match <code>$dir</code>? </li>\n<li>you <code>opendir</code> then reject a bunch of stuff, looking for <code>.pdf</code>. Why not instead: <code>foreach my $file ( glob \"$dir/*.pdf\" ) {</code> because that has the path built in. </li>\n<li>Rather than massaging <code>localtime</code> like that, have you considered using <code>Time::Piece</code>: <code>my $date_str = localtime -&gt; strftime(\"%Y-%m-%d %H:%M:%S\");</code></li>\n<li>you don't check any return codes. If the server rebooted, it's quite possible that the database wasn't actually running at the time the <code>move</code> ran, especially if it happens every minute. </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1491404619, "post_id": 43233067, "comment_id": 73540075, "body": "So, this is an extremely localized problem which is not due to anything in your Perl code. You should delete your question."}], "tags": [], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "is_accepted": true, "score": -2, "last_activity_date": 1491399944, "creation_date": 1491399944, "answer_id": 43233067, "question_id": 43226012, "link": "https://stackoverflow.com/questions/43226012/perl-script-in-crontab-didnt-move-a-file-overnight/43233067#43233067", "title": "Perl script in Crontab didn&#39;t move a file overnight", "body": "<p>The file had this weird PhantomPDF format so even though it could be open with PDF viewers the format was not actually the same, so it never moved.</p>\n"}], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43233067, "answer_count": 2, "score": 0, "last_activity_date": 1491399944, "creation_date": 1491381367, "last_edit_date": 1491387766, "question_id": 43226012, "link": "https://stackoverflow.com/questions/43226012/perl-script-in-crontab-didnt-move-a-file-overnight", "title": "Perl script in Crontab didn&#39;t move a file overnight", "body": "<p>I have a script that might take a while to execute. It is executed once every minute. It has always worked:</p>\n\n<pre><code>while ( my $file = readdir $dir ) {\n\n    next if (\n           $file eq \".\"\n        or $file eq \"..\"\n        or $file eq \".bashrc\"\n        or $file eq \".bash_logout\"\n        or $file eq \".bash_profile\" );\n\n    my ( $ext ) = $file =~ /(\\.[^.]+)$/;\n\n    if ( $ext eq \".pdf\" ) {\n\n        my $from = $print_direction . \"/\" . \"$file\";\n\n        move( $from, $PDF_direction );\n\n        my ( $sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst ) = localtime( time );\n        $year = $year + 1900;\n        $mon++;\n\n        my $date       = \"$year-$mon-$mday $hour:$min:$sec \\n\";\n        my $insert_sql = \"INSERT INTO registerPDF (id, file_name, created_at) VALUES (  '$id'  ,  '$file' , '$date')\";\n        my $insert_sth = $dbh-&gt;prepare( $insert_sql );\n        $insert_sth-&gt;execute();\n\n        chmod 0755, $PDF_direction . \"/\" . \"$file\";\n        chown 48, 48, $PDF_direction . \"/\" . \"$file\";\n    }\n</code></pre>\n\n<p>This has worked just fine for months.</p>\n\n<p>I have recently added another Crontab script that reboots the server</p>\n\n<pre><code>system(\"reboot\");\n</code></pre>\n\n<p>Yesterday a file was moved where they were supposed to but its entry was never found in the Database.</p>\n\n<p>I am afraid this was caused by the system reboot which was triggered after a big file was being moved. Logs show nothing.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "macos", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7818687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a23fb304a36d96281959abeff6186b0?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Polizzotto", "link": "https://stackoverflow.com/users/7818687/joseph-polizzotto"}, "edited": false, "score": 0, "creation_date": 1491379917, "post_id": 43224813, "comment_id": 73520942, "body": "Thank you for this solution."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491380682, "post_id": 43224813, "comment_id": 73521441, "body": "you probably mean <code>-ple</code> not only <code>-pe</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491384507, "post_id": 43224813, "comment_id": 73524131, "body": "@jm666: True, fixed. Thanks."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1491384500, "last_edit_date": 1491384500, "creation_date": 1491377933, "answer_id": 43224813, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons/43224813#43224813", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>Perl to the rescue!</p>\n\n<pre><code>perl -00 -ple '$i = 0; s/\\n/($i++ % 2) ? \"\\n\\n\" : \"\\n\"/eg'\n</code></pre>\n\n<ul>\n<li><code>-00</code> turns on the \"paragraph mode\", i.e. Perl reads the input in blocks separated by at least two newlines.</li>\n<li><code>-l</code> removes the two newlines from the end of each block after reading it, but returns them back before printing, avoiding three consecutive newlines.</li>\n<li><code>/e</code> evaluates the right hand side of a substitution as code.</li>\n<li><code>$i++ % 2</code> is the increment plus the modulo. It returns 1 for line 1, 3, 5 etc. in each block.</li>\n<li><code>condition ? then : else</code> is the ternary operator. Newlines on lines 1, 3, 5... will be replaced by two newlines, the other ones will stay.</li>\n<li><code>$i</code> is reset for each block to start from 0 again.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1491378984, "creation_date": 1491378984, "answer_id": 43225185, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons/43225185#43225185", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>This will also restart the pattern for each paragraph:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = do { local $/; &lt;DATA&gt; };\nmy $i = 0;\n$str =~ s/(\\n+)/\n  if (length $1 &gt; 1) {\n      $i = 0;\n      \"\\n\\n\";\n  }\n  else {\n      $i++ % 2 ? \"\\n\\n\" : \"\\n\"\n  }\n  /ge;\nprint $str;\n\n__DATA__\nThis is my first\nline to appear in\nthe text.\n\nI need the second\nline to appear in\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\nappear as I want it\nto appear because sometimes\nthe new line happens where\nthere are two consecutive \nnew lines.\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>This is my first\nline to appear in\n\nthe text.\n\nI need the second\nline to appear in\n\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\n\nappear as I want it\nto appear because sometimes\n\nthe new line happens where\nthere are two consecutive \n\nnew lines.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7818687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a23fb304a36d96281959abeff6186b0?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Polizzotto", "link": "https://stackoverflow.com/users/7818687/joseph-polizzotto"}, "edited": false, "score": 0, "creation_date": 1491380209, "post_id": 43225198, "comment_id": 73521140, "body": "Thanks, this answer provides both outcomes I desired: 1) repeats pattern and 2) does not produce three consecutive new lines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491385116, "post_id": 43225198, "comment_id": 73524591, "body": "The <code>&#47;m</code> modifier is superfluous here, as you don&#39;t use either <code>$</code> or <code>^</code> in the pattern. It would perhaps be better written as <code>s&#47;.*\\n.*\\n\\K&#47;\\n&#47;g</code> or <code>s&#47;(?:.*\\n){2}\\K&#47;\\n&#47;g</code>"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 5, "last_activity_date": 1491385425, "last_edit_date": 1491385425, "creation_date": 1491379014, "answer_id": 43225198, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons/43225198#43225198", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>Paragraph mode in perl could help:</p>\n\n<pre><code>perl -00 -ple 's/.*\\n.*\\n/$&amp;\\n/g'\n</code></pre>\n\n<p>output</p>\n\n<pre><code>This is my first\nline to appear in\n\nthe text.\n\nI need the second\nline to appear in\n\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\n\nappear as I want it\nto appear because sometimes\n\nthe new line happens where\nthere are two consecutive \n\nnew lines.\n</code></pre>\n\n<p>Based on @Borodin comment:</p>\n\n<pre><code>perl -00 -ple 's/(?:.*\\n){2}\\K/\\n/g'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1491386470, "last_edit_date": 1491386470, "creation_date": 1491384306, "answer_id": 43227078, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons/43227078#43227078", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/\\S/!d;n;//!b;$!G' file\n</code></pre>\n\n<p>Delete all empty lines ahead of non-empty line, print it, if the next line is empty break out, otherwise append a newline (unless it is the last line) and repeat.</p>\n\n<p>If you prefer an empty line to signify the last true couplet:</p>\n\n<pre><code>sed '/\\S/!d;n;//G' file\n</code></pre>\n\n<p>As an afterthought, to group consecutive lines programmatically:</p>\n\n<pre><code>sed '/\\S/!d;:a;N;/\\n\\s*$/b;s/[^\\n]*/&amp;/5;Ta;G' file\n</code></pre>\n\n<p>This will split texts into groups of no more than five lines.</p>\n"}, {"tags": [], "owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "is_accepted": false, "score": 0, "last_activity_date": 1491405000, "last_edit_date": 1491405000, "creation_date": 1491394374, "answer_id": 43230859, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons/43230859#43230859", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>If you wait till you know if the next line is empty to make a decision about inserting a new-line, this becomes relatively straightforward.  Here expressed in awk:</p>\n\n<p><em>parse.awk</em></p>\n\n<pre class=\"lang-awk prettyprint-override\"><code># Remember line count in the paragraph with n\nNF  { n++ }\n!NF { n=0 }\n\n# Only emit new-line if n is non-zero and the previous line \n# number is divisible by m\nn&gt;=m &amp;&amp; (n-1)%m==0 { printf \"\\n\" }\n\n# Print $0\n1\n</code></pre>\n\n<p>Run it like this:</p>\n\n<pre><code>awk -v m=2 -f parse.awk file\n</code></pre>\n\n<p>Or, for example, like this:</p>\n\n<pre><code>awk -f parse.awk m=2 file m=3 file\n</code></pre>\n\n<p>Below is the output of the second invocation with the following header added to the script (The header is GNU awk specific):</p>\n\n<pre><code>BEGINFILE { \n  n = 0; \n  if(FNR != NR) \n    printf \"\\n\\n\"; print \"===&gt;&gt;&gt;   \" FILENAME \", m=\" m \"   &lt;&lt;&lt;===\"\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>===&gt;&gt;&gt;   file, m=2   &lt;&lt;&lt;===\nThis is my first\nline to appear in\n\nthe text.\n\nI need the second\nline to appear in\n\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\n\nappear as I want it\nto appear because sometimes\n\nthe new line happens where\nthere are two consecutive \n\nnew lines.\n\n\n===&gt;&gt;&gt;   file, m=3   &lt;&lt;&lt;===\nThis is my first\nline to appear in\nthe text.\n\nI need the second\nline to appear in\nthe way that follows\n\nthe pattern specified.\n\nI am not sure if\nthe third line will\nappear as I want it\n\nto appear because sometimes\nthe new line happens where\nthere are two consecutive \n\nnew lines.\n</code></pre>\n\n<p>Golfed version:</p>\n\n<pre><code>{n=NF?n+1:0}(n-1)%m==0&amp;&amp;n&gt;=m{printf \"\\n\"}1\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7818687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a23fb304a36d96281959abeff6186b0?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Polizzotto", "link": "https://stackoverflow.com/users/7818687/joseph-polizzotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 43225198, "answer_count": 5, "score": 3, "last_activity_date": 1491405000, "creation_date": 1491377108, "question_id": 43224527, "link": "https://stackoverflow.com/questions/43224527/how-do-i-insert-a-new-line-for-every-two-lines-except-when-encountering-two-cons", "title": "How do I insert a new line for every two lines except when encountering two consecutive new lines?", "body": "<p>I am trying to insert a new line for every two lines of text, except I want to restart this pattern whenever a new paragraph (two consecutive new lines) is encountered. (My desired output should not have three consecutive new lines.)</p>\n\n<p>For example, here is my input text:</p>\n\n<pre><code>This is my first\nline to appear in\nthe text.\n\nI need the second\nline to appear in\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\nappear as I want it\nto appear because sometimes\nthe new line happens where\nthere are two consecutive \nnew lines.\n</code></pre>\n\n<p>And here's is my desired output:</p>\n\n<pre><code>This is my first\nline to appear in\n\nthe text.\n\nI need the second\nline to appear in\n\nthe way that follows\nthe pattern specified.\n\nI am not sure if\nthe third line will\n\nappear as I want it\nto appear because sometimes\n\nthe new line happens where\nthere are two consecutive\n\nnew lines.\n</code></pre>\n\n<p>I have tried using awk:</p>\n\n<pre><code>    awk -v n=2 '1; NR % n == 0 {print \"\"}'\n</code></pre>\n\n<p>but this command does not restart the pattern after a new paragraph. Instead, I would get the following output from my example text above:</p>\n\n<pre><code>This is my first\nline to appear in\n\nthe text.\n\n\nI need the second\n\nline to appear in\nthe way that follows\n\nthe pattern specified.\n\n\nI am not sure if\nthe third line will\n\nappear as I want it\nto appear because sometimes\n\nthe new line happens where\nthere are two consecutive\n\nnew lines.\n</code></pre>\n\n<p>As this undesired output shows, without the restarting of the pattern, I would get instances of three consecutive new lines.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491377268, "post_id": 43224346, "comment_id": 73519266, "body": "(1) Are some of the variables in the subroutine global (or at least seen in the enclosing scope)?  Something can get set which triggers code in the caller to skip its loop.  For one thing, there is that <code>$numr</code> which gets incremented (or not), but is not used anywhere. (2) Can the return <code>($1)</code> cause the calling code to skip its iteration?"}, {"owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491377770, "post_id": 43224346, "comment_id": 73519569, "body": "I&#39;ve already checked whether the variables are used elsewhere. And the sub is called using $foundkit = &amp;FindKit($name);, so it sets $foundkit to $1 but this variable is used elsewhere: not within the problematic foreach that is getting skipped."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491377794, "post_id": 43224346, "comment_id": 73519588, "body": "This code needs a complete rewrite.  (1) When you <code>shift</code> you remove <i>the next</i> element.  That doesn&#39;t seem to be the intent (Try: <code>perl -E&#39;@ary = 1..10; for (@ary) { say; shift @ary }</code>) (2) if you want to skip <code>.</code>  you do <code>next if $kitfile eq &#39;.&#39;;</code> (same for <code>..</code>) (3) Read the whole file to see whether it&#39;s empty?  (And it allows one line in fact!)  That&#39;s what <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-z</code></a> is for (for which you don&#39;t even have to open the file). (4) Instead of the last <code>while</code> -- read one line and do your condition, then count <code>$numr++ while &lt;$fh&gt;</code> (then add 1);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491378596, "post_id": 43224346, "comment_id": 73520084, "body": "Another one: of all four (4) conditions to skip only the last one need stay: We skip if the first letter of file/dir name is not K -- but this <i>includes</i> all others (neither of <code>.</code> and <code>..</code> and <code>Thumbs.db</code> start with <code>K</code>).  Once we are at it -- you want only files that start with <code>K</code>? Then I&#39;d go for <code>my @files = glob &quot;K*&quot;</code>.  Unless I&#39;m missing something?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491378670, "post_id": 43224346, "comment_id": 73520120, "body": "(These comments are intended to be helpful and constructive -- not mean :)"}, {"owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491378907, "post_id": 43224346, "comment_id": 73520264, "body": "They&#39;re interpreted as helpful too, I&#39;m looking into improving the code now. Just to note: Empty files may contain just a header-line and no data, which is why I allowed a single line. And the code has worked fine on its own to list the files within a folder (numr is actually a remnant of this that I should remove now, as it was only there to number the listed files). And you are completely right on three of the four skips being redundant."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491378913, "post_id": 43224346, "comment_id": 73520268, "body": "Oh, I missed this: <code>$.</code> starts from <code>1</code>.  So the <code>if ($. == 0 ...</code> is <i>never</i> true, so this sub should always return <code>0</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491379354, "post_id": 43224346, "comment_id": 73520572, "body": "Yes, I suggest a nice cleanup.  None of this should cause the <i>caller</i> to skip its loop though, by what you say about the return not being used.  Nothing that I can see that is."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491379887, "post_id": 43224346, "comment_id": 73520919, "body": "What is the chance of <code>Maakartikel</code> being in that header line?"}, {"owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491380008, "post_id": 43224346, "comment_id": 73521010, "body": "My perl file is in the folder before the data folder, so $Find::Bin\\\\data returns the path to the data folder. Maakartikel is always in the header. I&#39;m going to clean this up and see if that makes it easier to figure this out"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491380272, "post_id": 43224346, "comment_id": 73521184, "body": "That  <code>&#47;g</code> modified in the regex <code>&#47;...&#47;g</code> is useless -- and potentially dangerous here.  The code needs one match, it will search the whole string for it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491385557, "post_id": 43224346, "comment_id": 73524933, "body": "The caller code would be needed to diagnose this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491388452, "post_id": 43224346, "comment_id": 73527079, "body": "@zdim: <i>&quot;When you shift you remove</i> <b>the next</b> <i>element&quot;</i> No. <code>shift</code> always removes the <i>first</i> element from the array, regardless of where the iteration has reached."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491412733, "post_id": 43224346, "comment_id": 73545431, "body": "@Borodin  Oh, of course!  It <i>skips</i> (processing of) the next element, since <code>for</code> picks the next position.  It&#39;s so unpleasant to think through that I&#39;d never <code>shift</code> in a <code>for</code> loop.  Thank you for correcting that.  (I try to be careful, but these things do slip in :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491413046, "post_id": 43224346, "comment_id": 73545625, "body": "@zdim: No worries. The entire design of SO is based on mutual correction and improvement. You&#39;re not expected to get things right every time."}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491384071, "post_id": 43225708, "comment_id": 73523815, "body": "the <code>glob &quot;$FindBin::Bin&#47;data&#47;K*&quot;</code> returns full path names. e.g. you don&#39;t need specify the <code>data</code> directory in the <code>open</code>... (<code>open (my $fhkits,&quot;&lt;&quot;,&quot;data\\\\$kitfile&quot;)</code>. Aren&#39;t?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491384276, "post_id": 43225708, "comment_id": 73523959, "body": "The thing that I&#39;m pretty sure is causing &#39;skipping loop&#39; will be modifying <code>@kitfiles</code> as it&#39;s being iterated, as that <code>shift</code> is just pulling the first element off the array and moving everything else &#39;up&#39; - so it&#39;ll miss things."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491384624, "post_id": 43225708, "comment_id": 73524223, "body": "@jm666  Thank you! Corrected.  (I lifted that line from OP while I changed their <code>opendir</code> to <code>glob</code>, and I even remarked on that in a comment ... and now introduced a bug :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491384689, "post_id": 43225708, "comment_id": 73524282, "body": "@Sobrique  That&#39;s wrong, I agree, and I stated it in comments.  But I don&#39;t see how it can cause it to skip the <i>caller&#39;s</i> loop.  (It&#39;s a loop in the calling code that&#39;s getting skipped!)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491384883, "post_id": 43225708, "comment_id": 73524410, "body": "Without seeing the caller&#39;s loop, or expected behaviour, it&#39;s really hard to say. I&#39;d imagine that having something that should match, but mysteriously doesn&#39;t might look quite similar though. Given the egregious logic errors in this &#39;looks ok&#39; subroutine, I wouldn&#39;t be confident that the caller was any better."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491385022, "post_id": 43225708, "comment_id": 73524530, "body": "@Sobrique  It reads a directory, closes it, and processes files.  Skipping some files can&#39;t cause it to skip an iteration in the calling code.  As for the expected behavior, I too raised that in a comment -- they say the return isn&#39;t used in that loop.  I don&#39;t see anything in their code, other than the <code>0</code> return (explained in yet another comment, due to expecting <code>$.</code> to start at 0).  Now it&#39;s all corrected, so we&#39;ll see."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491385244, "post_id": 43225708, "comment_id": 73524697, "body": "@Zyzyx Fixed a bug, curtesy of jm666&#39;s observation.  Once <code>glob</code> is used it returns full-path names so there is no need for <code>data</code> directory when opening the file.  (And with it it wouldn&#39;t find any files.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491388716, "post_id": 43225708, "comment_id": 73527285, "body": "@zdim: <i>&quot;We use core <code>File::Glob</code> which overrides the system&#39;s <code>glob</code>&quot;</i>  <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">perldoc glob</a> says <b>This operator is implemented using the standard <code>File::Glob</code> extension</b>. What you have done is to enable the <code>:bsd_glob</code> option, which allows embedded spaces inside file name patterns."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491413211, "post_id": 43225708, "comment_id": 73545724, "body": "@Borodin  Oh.  Thank you again.  I didn&#39;t realize that distinction.  Correcting..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1515696060, "last_edit_date": 1515696060, "creation_date": 1491380568, "answer_id": 43225708, "question_id": 43224346, "link": "https://stackoverflow.com/questions/43224346/perl-sub-skips-foreach-within-which-it-is-called/43225708#43225708", "title": "Perl sub skips foreach within which it is called", "body": "<p>To summarize comments, the refactored code:</p>\n\n<pre><code>use File::Glob ':bsd_glob';\n\nsub FindKit {\n    my $nametosearch = $_[0];\n\n    my @kitfiles = glob \"$FindBin::Bin/data/K*\";  # files that start with K\n    foreach my $kitfile (@kitfiles)\n    {\n        open my $fhkits, '&lt;', $kitfile or die \"$!\";\n\n        my $kitrow_first_line = &lt;$fhkits&gt;;    \n\n        1 while &lt;$fhkits&gt;;    # check number of lines ...\n\n        return if $. == 1;    # there was only one line, the header\n\n        my ($result) = $kitrow_first_line =~ \n            /Maakartikel :\\s*(\\S+)\\s+Montagekit.*?($nametosearch)\\s{3,}/;\n\n        return $result if $result;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I use core <a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a> and enable <code>:bsd_glob</code> option, which can handle spaces in filenames. I follow the docs note to use \"<em>real slash</em>\" on Win32 systems.</p>\n\n<p>I do not see how this can affect the calling code, other than by its return value.   Also, I don't see how the posted code can make the caller skip the beat, either.  That problem is unlikely to be in this sub.</p>\n\n<p>Please let me know if I missed some point with the above rewrite.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1491384043, "last_edit_date": 1491384043, "creation_date": 1491383492, "answer_id": 43226751, "question_id": 43224346, "link": "https://stackoverflow.com/questions/43224346/perl-sub-skips-foreach-within-which-it-is-called/43226751#43226751", "title": "Perl sub skips foreach within which it is called", "body": "<p>The thing that is almost certainly screwing you here, is that you are <code>shift</code>ing the list that you are iterating. </p>\n\n<p>That's bad news, as you're deleting elements ... but in places you aren't necessarily thinking.</p>\n\n<p>For example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @list = qw ( one two three ); \nmy $count;\n\nforeach my $value ( @list ) {\n   print \"Iteration \", ++$count,\" value is $value\\n\";\n   if ( $value eq 'two' ) { shift @list; next };\n}\n\nprint \"@list\";\n</code></pre>\n\n<p>How many times do you think that should iterate, and which values should end up in the array?</p>\n\n<p>Because you <code>shift</code> you never process element 'three' and you delete element 'one'. That's almost certainly what's causing you problems. </p>\n\n<p>You also:</p>\n\n<ul>\n<li><code>open</code> using a relative path, when your <code>opendir</code> used an absolute one. </li>\n<li>skip a bunch of files, and then skip anything that doesn't start with <code>K</code>. Why not just search for things that <em>do</em> start with <code>K</code>? </li>\n<li>read the file twice, and one is to just check if it's empty. The <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perl file test <code>-z</code></a> will do this just fine.</li>\n<li>you set <code>$kitrow</code> for each line in the file, but don't really use it for anything other than pattern matching. It'd probably work better using implicit variables. </li>\n<li>You only actually do anything on the first line - so you don't ever need to iterate the whole file. (<code>$numr</code> seems to be discarded). </li>\n<li>you use a global match, but only use one result. The <code>g</code> flag seems redundant here. </li>\n</ul>\n\n<p>I'd suggest a big rewrite, and do something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse FindBin;\n\nsub FindKit{\n    my ($nametosearch) = @_;\n\n    my $numr = 1;\n    foreach my $kitfile (glob \"$FindBin::Bin\\\\data\\\\K*\" )\n    {\n       if ( -z $kitfile ) {\n           print \"$kitfile is empty\\n\";\n           next;\n        }\n\n        # $kitfile is the file used on this iteration of the loop\n        open (my $fhkits,\"&lt;\", $kitfile) or die \"$!\";\n        &lt;$kitfile&gt; =~ m/Maakartikel :\\s*(\\S+)\\s+Montagekit.*?($nametosearch)\\s{3,}/ \n             and return $1; \n        return 0; \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491389707, "post_id": 43228215, "comment_id": 73527999, "body": "It&#39;s nopt safe to use <code>$0</code> for this purpose; firstly because its initial contents vary from system to system, and secondly because can be modified, and so may be completely different from the name of the program file. It&#39;s much better to <code>use FindBin ()</code> and <code>&quot;$FindBin::Bin&#47;$FindBin::Script&quot;</code>."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1491387538, "last_edit_date": 1491387538, "creation_date": 1491387229, "answer_id": 43228215, "question_id": 43224346, "link": "https://stackoverflow.com/questions/43224346/perl-sub-skips-foreach-within-which-it-is-called/43228215#43228215", "title": "Perl sub skips foreach within which it is called", "body": "<p>As a big fan of the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module (me have it always installed and using it in every project) my solution would be:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Tiny;\n\nmy $found = FindKit('mykit');\nprint \"$found\\n\";\n\nsub FindKit {\n    my($nametosearch) = @_;\n\n    my $datadir = path($0)-&gt;realpath-&gt;parent-&gt;child('data');\n    die \"$datadir doesn't exists\" unless -d $datadir;\n\n    for my $file ($datadir-&gt;children( qr /^K/ )) {\n        next if -z $file; #skip empty\n        my @lines = $file-&gt;lines;\n        return $1 if $lines[0] =~ /Maakartikel :\\s*(\\S+)\\s+Montagekit.*?($nametosearch)\\s{3,}/;\n    }\n    return;\n}\n</code></pre>\n\n<p>Some comments and still opened issues:</p>\n\n<ul>\n<li>Using the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> you could always use forward slashes in the path-names, regardless of the OS (UNIX/Windows), e.g. the <code>data/file</code> will work on windows too.</li>\n<li>AFAIK the FindBin is <a href=\"http://www.perlmonks.org/?node_id=41213\" rel=\"nofollow noreferrer\">considered broken</a> - so the above uses the <code>$0</code> and <code>realpath</code> ...</li>\n<li>what if the Kit is in multiple files? The above always returns on the 1st found one</li>\n<li>the <code>my @lines = $file-&gt;lines;</code> reads all lines - unnecessary - but on small files doesn't big deal.</li>\n<li>the the reality this function returns the arg for the <code>Maakartikel</code>, so probably better name would be <code>find_articel_by_kit</code> or <code>find_articel</code> :)</li>\n<li>easy to switch to <code>utf8</code> - just change the <code>$file-&gt;lines</code> to <code>$file-&gt;lines_utf8;</code></li>\n</ul>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43225708, "answer_count": 3, "score": 2, "last_activity_date": 1515696060, "creation_date": 1491376569, "last_edit_date": 1491406149, "question_id": 43224346, "link": "https://stackoverflow.com/questions/43224346/perl-sub-skips-foreach-within-which-it-is-called", "title": "Perl sub skips foreach within which it is called", "body": "<p>I'm having some problem with a subroutine that locates certain files and extracts some data out of them.</p>\n\n<p>This subroutine is called inside a foreach loop, but whenever the call is made the loop skips to its next iteration. So I am wondering whether any of the next;'s are somehow escaping from the subroutine to the foreach loop where it is called?</p>\n\n<p>To my knowledge the sub looks solid though so I'm hoping if anyone can see something I'm missing?</p>\n\n<pre><code>sub FindKit{\n    opendir(DH, \"$FindBin::Bin\\\\data\");\n    my @kitfiles = readdir(DH);\n    closedir(DH);\n\n    my $nametosearch = $_[0];\n    my $numr = 1;\n    foreach my $kitfile (@kitfiles)\n    {\n        # skip . and .. and Thumbs.db and non-K-files\n        if($kitfile =~ /^\\.$/) {shift @kitfiles; next;}\n        if($kitfile =~ /^\\.\\.$/) {shift @kitfiles; next;}\n        if($kitfile =~ /Thumbs\\.db/) {shift @kitfiles; next;}\n        if($kitfile =~ /^[^K]/) {shift @kitfiles; next;}\n\n        # $kitfile is the file used on this iteration of the loop\n        open (my $fhkits,\"&lt;\",\"data\\\\$kitfile\") or die \"$!\";\n        while (&lt;$fhkits&gt;) {}\n        if ($. &lt;= 1) {\n            print \" Empty File!\";\n            next;\n        }\n        seek($fhkits,0,0);\n        while (my $kitrow = &lt;$fhkits&gt;) {\n            if ($. == 0 &amp;&amp; $kitrow =~ /Maakartikel :\\s*(\\S+)\\s+Montagekit.*?($nametosearch)\\s{3,}/g) {\n                close $fhkits;\n                return $1;\n            }\n        }\n        $numr++;\n        close $fhkits;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["perl", "clone"], "answers": [{"comments": [{"owner": {"reputation": 3394, "user_id": 4805174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y0dE2.png?s=128&g=1", "display_name": "kayess", "link": "https://stackoverflow.com/users/4805174/kayess"}, "edited": false, "score": 2, "creation_date": 1491376574, "post_id": 43223765, "comment_id": 73518819, "body": "While this code snippet may solve the question, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. Please also try not to crowd your code with explanatory comments, this reduces the readability of both the code and the explanations!"}], "tags": [], "owner": {"reputation": 3134, "user_id": 58214, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca6e06b8f4582c770ea443f8bf4f48a3?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t", "link": "https://stackoverflow.com/users/58214/beno%c3%aet"}, "is_accepted": false, "score": 3, "last_activity_date": 1491397378, "last_edit_date": 1491397378, "creation_date": 1491374834, "answer_id": 43223765, "question_id": 43223764, "link": "https://stackoverflow.com/questions/43223764/how-do-i-clone-a-classstruct/43223765#43223765", "title": "How do I clone a Class::Struct?", "body": "<p>The <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\"><code>Storable</code></a> module provides a <code>dclone</code> function that is able to deep-copy the hash and the <a href=\"https://metacpan.org/pod/Class::Struct\" rel=\"nofollow noreferrer\"><code>Class::Struct</code></a> contents.</p>\n\n<pre><code>use Storable qw/dclone/;\n\nmy %a = ();\n$a{k} = MyStruct-&gt;new;\n\nmy %b =  %{dclone(\\%a)};\n</code></pre>\n"}], "owner": {"reputation": 3134, "user_id": 58214, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca6e06b8f4582c770ea443f8bf4f48a3?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t", "link": "https://stackoverflow.com/users/58214/beno%c3%aet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491397378, "creation_date": 1491374834, "last_edit_date": 1491397195, "question_id": 43223764, "link": "https://stackoverflow.com/questions/43223764/how-do-i-clone-a-classstruct", "title": "How do I clone a Class::Struct?", "body": "<p>I have a hash of <a href=\"https://metacpan.org/pod/Class::Struct\" rel=\"nofollow noreferrer\"><code>Class::Struct</code></a>, how do I clone it (deep copy)? <a href=\"https://metacpan.org/pod/Class::Struct\" rel=\"nofollow noreferrer\"><code>Class::Struct</code></a> does not provide a <code>clone</code> or <code>copy</code> method and manually copying the internals of <a href=\"https://metacpan.org/pod/Class::Struct\" rel=\"nofollow noreferrer\"><code>Class::Struct</code></a> would be hard.</p>\n\n<pre><code>my %a = ();\n\n$a{k} = MyStruct-&gt;new;\n\nmy %b = ... ?\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7818493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930c1204cfefd8f1dba9fbc96da4dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Stackman", "link": "https://stackoverflow.com/users/7818493/stackman"}, "edited": false, "score": 0, "creation_date": 1491375920, "post_id": 43223821, "comment_id": 73518414, "body": "No error pops up this time, thank you. However nothing happens, I should be getting on output of some kind. Also is it possible that the module isn&#39;t correctly installed as I just copy pasted it to my perl @INC directory"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 7818493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930c1204cfefd8f1dba9fbc96da4dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Stackman", "link": "https://stackoverflow.com/users/7818493/stackman"}, "edited": false, "score": 1, "creation_date": 1491383074, "post_id": 43223821, "comment_id": 73523145, "body": "That seems pretty likely, yes. Usually you install modules with a package manager or CPAN, because then stuff like prerequisites happen. For standalone stuff, you usually unpack them to a separate directory and manually set &#39;use lib`."}, {"owner": {"reputation": 1, "user_id": 7818493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930c1204cfefd8f1dba9fbc96da4dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Stackman", "link": "https://stackoverflow.com/users/7818493/stackman"}, "edited": false, "score": 0, "creation_date": 1491423035, "post_id": 43223821, "comment_id": 73551595, "body": "how can I find the path to my separate directory? It is in a folder on my mac desktop. How will I know if the manual use lib has worked. Whenever I enter perldoc HT::Conlang::S17 I get no results."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1491375037, "creation_date": 1491375037, "answer_id": 43223821, "question_id": 43223762, "link": "https://stackoverflow.com/questions/43223762/perl-illegal-declaration-of-subroutine/43223821#43223821", "title": "Perl illegal declaration of subroutine", "body": "<p>You're missing semicolons after the <code>use</code> and the <code>sub</code> lines. Put them back in, and it'll work.</p>\n\n<p>But actually, subroutine prototypes probably shouldn't be used - they're not what is commonly understood, and so they're only a good idea in particular niche situations. </p>\n"}], "owner": {"reputation": 1, "user_id": 7818493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930c1204cfefd8f1dba9fbc96da4dc8?s=128&d=identicon&r=PG&f=1", "display_name": "Stackman", "link": "https://stackoverflow.com/users/7818493/stackman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491375037, "creation_date": 1491374824, "question_id": 43223762, "link": "https://stackoverflow.com/questions/43223762/perl-illegal-declaration-of-subroutine", "title": "Perl illegal declaration of subroutine", "body": "<p>I have been trying to get the following program working for quite a while to no avail. I am new to perl and I haven't been able to figure it out. </p>\n\n<p>The program is here </p>\n\n<p><a href=\"http://www.theiling.de/downloads/idx.cgi/schcompile-1.0003.tgz/\" rel=\"nofollow noreferrer\">http://www.theiling.de/downloads/idx.cgi/schcompile-1.0003.tgz/</a>*?lang=en</p>\n\n<p>I have been trying to run this perl module in the Mac terminal, I've copied the module to @INC but I can't get it to work. </p>\n\n<pre><code>use HT::Conlang::S17\n\nsub step_normalise_Latin($;$$) \n\n$result= step_normalise_latin ($quercus);\n\nIllegal declaration of subroutine main::step_normalise_Latin at - line 3.\n</code></pre>\n\n<p>And here is some old discussion on the matter</p>\n\n<p><a href=\"http://archives.conlang.info/ga/gialqhia/thiantinkhuen.html\" rel=\"nofollow noreferrer\">http://archives.conlang.info/ga/gialqhia/thiantinkhuen.html</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1491384783, "post_id": 43222846, "comment_id": 73524345, "body": "You turn on <code>use strict; use warnings;</code>. Did you actually try running the code after doing that, or did you just add it to appease Stack Overflow? Because it <i>tells you</i> what&#39;s wrong if you compile this snippet: <code>Unmatched [ in regex; marked by &lt;-- HERE in m&#47;([ &lt;-- HERE ^&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1491384668, "post_id": 43222933, "comment_id": 73524268, "body": "... and you shouldn&#39;t use <code>$a</code>, ever, because it has a special meaning in <code>perl</code> and even if it didn&#39;t, single letter variable names are filthy. More importantly - the <code>use strict; use warnings;</code> that the OP included in their code would prevent it from compiling and tell them <i>exactly</i> what the problem is."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 3, "last_activity_date": 1491372952, "last_edit_date": 1491372952, "creation_date": 1491371851, "answer_id": 43222933, "question_id": 43222846, "link": "https://stackoverflow.com/questions/43222846/extract-string-after-the-last-slash-in-perl/43222933#43222933", "title": "Extract string after the last slash in perl", "body": "<p>Your code will give syntax error Because of the unescaped  <code>/</code>. First you should escape the <code>\\/</code> or use other <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">delimiters</a>.</p>\n\n<p>Then in your print statement you are printing the <code>$a</code> so you will get the full  data. </p>\n\n<p>You should use <code>$&amp;</code> to print the matched pattern or <code>$1</code> to print the first grouped element. </p>\n\n<p>In my below code I used <code>$1</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $data = \"E:/one/two/abc.dll\";\n\nif ($data =~ m/([^\\/]+)$/)  \n{\n   print \" the value is: $1  \\n\";\n}\n</code></pre>\n\n<p>And then please avoid using <code>$a</code> and <code>$b</code> as a variable name this won't give the syntax error or warning. But these are reserved keywords for sort. </p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1491399548, "creation_date": 1491399548, "answer_id": 43232900, "question_id": 43222846, "link": "https://stackoverflow.com/questions/43222846/extract-string-after-the-last-slash-in-perl/43232900#43232900", "title": "Extract string after the last slash in perl", "body": "<p>This is a good job for <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>. The below example splits the line on a slash character into a list, then simply extracts the last entry (in this case, <code>abc.dll</code>):</p>\n\n<pre><code>my $file = (split '/', $data)[-1];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "edited": false, "score": 0, "creation_date": 1532120155, "post_id": 43243267, "comment_id": 89870947, "body": "this is the better answer"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1491435076, "creation_date": 1491435076, "answer_id": 43243267, "question_id": 43222846, "link": "https://stackoverflow.com/questions/43222846/extract-string-after-the-last-slash-in-perl/43243267#43243267", "title": "Extract string after the last slash in perl", "body": "<p>The thing you have looks like a path. If that's true, you'd be better off using a module that's designed to parse paths in a portable way.</p>\n\n<p>All examples below assume use of <code>strict</code> and <code>warnings</code>.</p>\n\n<p><a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a></p>\n\n<pre><code>use File::Spec;\nmy ($volume, $dirs, $file) = File::Spec-&gt;splitpath('E:/one/two/abc.dll');\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename</a></p>\n\n<pre><code>use File::Basename;\nmy ($file, $dirs) = fileparse('E:/one/two/abc.dll');\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>use Path::Tiny;\nmy $path = path('E:/one/two/abc.dll');\nmy $file = $path-&gt;basename;\nmy $dirs = $path-&gt;parent-&gt;stringify;\n</code></pre>\n"}], "owner": {"reputation": 1294, "user_id": 2315104, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=128&d=identicon&r=PG", "display_name": "user2315104", "link": "https://stackoverflow.com/users/2315104/user2315104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3651, "favorite_count": 0, "accepted_answer_id": 43222933, "answer_count": 3, "score": 0, "last_activity_date": 1491435076, "creation_date": 1491371504, "question_id": 43222846, "link": "https://stackoverflow.com/questions/43222846/extract-string-after-the-last-slash-in-perl", "title": "Extract string after the last slash in perl", "body": "<p>i am using perl regular expression to match everything after the last slash. after reading the perl doc, i realised that following can be the code.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $a = \"E:/one/two/abc.dll\";\nif ($a =~ m/([^/]+$)/)\n{\n print \" the value is: $a  \\n\";\n}\n</code></pre>\n\n<p>but i am getting last string as : abc.dll. what could be the issue ? Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1491370161, "post_id": 43222331, "comment_id": 73515451, "body": "Maybe using <a href=\"http://perldoc.perl.org/File/Basename.html#fileparse\" rel=\"nofollow noreferrer\">fileparse</a> from <code>File::Basename</code> would be more appropriate that a manual splitting in that case."}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1491370384, "post_id": 43222331, "comment_id": 73515523, "body": "Thanks for your suggestion @Dada, it will try it. For now the solution provided by Srihari has worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1491369828, "post_id": 43222364, "comment_id": 73515329, "body": "A greedy quantifier instead of the non-greedy would produce the same result though."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491396536, "post_id": 43222364, "comment_id": 73533190, "body": "Would recommend not using <code>&#47;</code> as your pattern delimiter, if you&#39;re using it in the pattern.  <code>m,^(.*)&#47;(.*)$,</code> will work,and you don&#39;t need to escape the slash."}], "tags": [], "owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "is_accepted": true, "score": 0, "last_activity_date": 1491369734, "last_edit_date": 1491369734, "creation_date": 1491369369, "answer_id": 43222364, "question_id": 43222331, "link": "https://stackoverflow.com/questions/43222331/how-should-we-split-a-string-in-perl-and-store-it-in-two-variables/43222364#43222364", "title": "How should we split a string in perl and store it in two variables", "body": "<p>Using regular expression:</p>\n\n<p>The first <code>(.*)</code> is a greedy match and the second <code>(.*?)</code> is a non-greedy match so should have only the last part of <code>/</code></p>\n\n<pre><code>if($string =~ m/^(.*)\\/(.*?)$/)\n{\n   $string1 = $1;\n   $string2 = $2;\n}\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 43222364, "answer_count": 1, "score": 0, "last_activity_date": 1491369734, "creation_date": 1491369261, "question_id": 43222331, "link": "https://stackoverflow.com/questions/43222331/how-should-we-split-a-string-in-perl-and-store-it-in-two-variables", "title": "How should we split a string in perl and store it in two variables", "body": "<p>how can we split the following string in perl:</p>\n\n<p>Input:</p>\n\n<pre><code>$string='/path/to/the/file/on/server/date_in_yyyymmdd/filename-yyyymmdd.tar.gz'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$string1=/path/to/the/file/on/server/date_in_yyyymmdd\n$string2=filename-yyyymmdd.tar.gz\n</code></pre>\n"}, {"tags": ["perl", "csv", "awk", "paste", "cut"], "answers": [{"tags": [], "owner": {"reputation": 2682, "user_id": 6404949, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ksf1VmNZnPA/AAAAAAAAAAI/AAAAAAAAExQ/uleAWJ-xbJg/photo.jpg?sz=128", "display_name": "VIPIN KUMAR", "link": "https://stackoverflow.com/users/6404949/vipin-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1491367421, "creation_date": 1491367421, "answer_id": 43221998, "question_id": 43221772, "link": "https://stackoverflow.com/questions/43221772/save-columns-in-a-csv-files-into-multiple-files/43221998#43221998", "title": "Save columns in a csv files into multiple files", "body": "<p>You can achive this by using awk - </p>\n\n<pre><code>$ awk '{print $1 &gt; \"foobar-c1.csv\"; print $2 &gt; \"foobar-c2.csv\"}' foobar.csv \n$ cat foobar-c1.csv\nfoo\nblah\nblack\n$ cat foobar-c2.csv\nbar\nblah\nsheep\n</code></pre>\n"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491847002, "creation_date": 1491366157, "last_edit_date": 1491847002, "question_id": 43221772, "link": "https://stackoverflow.com/questions/43221772/save-columns-in-a-csv-files-into-multiple-files", "title": "Save columns in a csv files into multiple files", "body": "<p>Given a tab separated file:</p>\n\n<pre><code>$ cat foobar.tsv \nfoo bar\nblah    blah\nblack   sheep\n</code></pre>\n\n<p>I could do two separate cut operations to get columns into separate files:</p>\n\n<pre><code>$ cut -f1 foobar.tsv &gt; foobar-c1.tsv\n$ cut -f2 foobar.tsv &gt; foobar-c2.tsv\n\n\n$ cat foobar-c1.tsv \nfoo\nblah\nblack\n\n$ cat foobar-c2.tsv \nbar\nblah\nsheep\n</code></pre>\n\n<p><strong>Is it possible to just save columns into multiple files with just one cut operation?</strong> E.g.</p>\n\n<pre><code>cat foobar.tsv | cut -f1 -f2 &gt; foobar-c1.tsv,foobar-c1.tsv \n</code></pre>\n\n<p>Note: The above command doesn't really work.</p>\n\n<p><strong>Also Note</strong>:</p>\n\n<p>This don't count, -_-||| :</p>\n\n<pre><code>$ cut -f1 foobar.tsv &gt; foobar-c1.tsv &amp;&amp;  cut -f2 foobar.tsv &gt; foobar-c2.tsv \n</code></pre>\n"}, {"tags": ["perl", "localtime"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1491369096, "post_id": 43221144, "comment_id": 73515058, "body": "I removed the <code>&amp;</code> in front of the function calls, as these are no longer necessary (for at least the past 10 years)."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 4, "last_activity_date": 1491368841, "last_edit_date": 1491368841, "creation_date": 1491367434, "answer_id": 43222001, "question_id": 43221144, "link": "https://stackoverflow.com/questions/43221144/perl-function-localtime-giving-incorrect-values-for-years-between-1964-and-1967/43222001#43222001", "title": "Perl function localtime giving incorrect values for years between 1964 and 1967", "body": "<p>This is likely to do with how negative epoch values are handled in Time::Local.  Have a look at <a href=\"http://perldoc.perl.org/Time/Local.html#Negative-Epoch-Values\" rel=\"nofollow noreferrer\">perldoc Time::Local #Negative-Epoch-Values</a></p>\n\n<p>On my Linux box (perl 5.20), your code demonstrates the issue nicely.  If you print out the epoch value received, you will see the issue, namely that the epoch returned by <code>timelocal</code> becomes huge instead of more negative:</p>\n\n<pre><code>Year       Epoch Jan 1st (localtime)     Jan 1st (Gauss)\n1964  2966342400 2                       3 &lt;----- ERROR: off by  1\n1965  2997964800 4                       5 &lt;----- ERROR: off by  1\n1966  3029500800 5                       6 &lt;----- ERROR: off by  1\n1967  3061036800 6                       0 &lt;----- ERROR: off by -6\n1968   -63185400 1                       1\n1969   -31563000 3                       3\n1970      -27000 4                       4\n1971    31509000 5                       5\n1972    63045000 6                       6\n</code></pre>\n\n<p>Why don't you try using <a href=\"http://search.cpan.org/~drolsky/DateTime-1.42/lib/DateTime.pm\" rel=\"nofollow noreferrer\">DateTime</a> library instead:</p>\n\n<pre><code>use DateTime;\nmy $dt = DateTime-&gt;new(\n    year   =&gt; 1966, # Real Year\n    day    =&gt; 1,    # 1-31\n    month  =&gt; 1,    # 1-12\n    hour   =&gt; 0,    # 0-23\n    second =&gt; 0,    # 0-59\n);\nprint $dt-&gt;dow . \"\\n\";\n\n6\n</code></pre>\n\n<p><code>6 = Saturday</code> which matches the Wikipedian view: <a href=\"https://en.wikipedia.org/wiki/January_1966#January_1.2C_1966_.28Saturday.29\" rel=\"nofollow noreferrer\">Jan 1, 1966 (Saturday)</a></p>\n"}], "owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 43222001, "answer_count": 1, "score": 2, "last_activity_date": 1491369050, "creation_date": 1491361965, "last_edit_date": 1491369050, "question_id": 43221144, "link": "https://stackoverflow.com/questions/43221144/perl-function-localtime-giving-incorrect-values-for-years-between-1964-and-1967", "title": "Perl function localtime giving incorrect values for years between 1964 and 1967", "body": "<p>I was getting some whacky values from <strong>localtime</strong> function in Perl.  The following is some code for which I get incorrect values.  </p>\n\n<p>In particular, this code is meant to determine the weekday for the first of each year.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict 'vars';\nuse Time::Local;\nuse POSIX qw(strftime);\n\nmytable();\n\nsub mytable {\n   print \"Year\" . \" \"x4 .  \"Jan 1st (localtime)\" . \" \"x4 . \"Jan 1st (Gauss)\\n\";\n   foreach my $year ( 1964 .. 2017 )\n     {\n       my $janlocaltime = evalweekday( 1,1,$year);\n       my $jangauss     = gauss($year);\n       my $diff = $jangauss - $janlocaltime;\n       printf \"%4s%10s%-12s \",$year,\"\",$janlocaltime;\n       printf \"%12s\",$jangauss;\n       printf \" &lt;----- ERROR: off by %2s\", $diff if ( $diff != 0 );\n     print \"\\n\";\n     }\n}\n\nsub evalweekday {\n   ## Using \"localtime\"\n   my ($day,$month,$year) = @_;\n   my $epoch   =  timelocal(0,0,0, $day,$month-1,$year-1900);\n   my $weekday = ( localtime($epoch) ) [6];\n   return $weekday;\n }\n\nsub gauss {\n   ## Alternative approach\n   my ($year) = @_;\n   my $weekday =\n     (  1 + 5 * ( ( $year - 1 ) % 4 )\n      + 4 * ( ( $year - 1 ) % 100 )\n      + 6 * ( ( $year - 1 ) % 400 )\n    ) % 7;\n   return $weekday;\n }\n</code></pre>\n\n<p>Here is the output which shows the years with incorrect values:</p>\n\n<pre><code>Year    Jan 1st (localtime)    Jan 1st (Gauss)\n1964          2                       3 &lt;----- ERROR: off by  1\n1965          4                       5 &lt;----- ERROR: off by  1\n1966          5                       6 &lt;----- ERROR: off by  1\n1967          6                       0 &lt;----- ERROR: off by -6\n1968          1                       1\n1969          3                       3\n1970          4                       4\n1971          5                       5\n1972          6                       6\n1973          1                       1\n1974          2                       2\n1975          3                       3\n1976          4                       4\n1977          6                       6\n1978          0                       0\n1979          1                       1\n1980          2                       2\n1981          4                       4\n1982          5                       5\n1983          6                       6\n1984          0                       0\n1985          2                       2\n1986          3                       3\n1987          4                       4\n1988          5                       5\n1989          0                       0\n1990          1                       1\n1991          2                       2\n1992          3                       3\n1993          5                       5\n1994          6                       6\n1995          0                       0\n1996          1                       1\n1997          3                       3\n1998          4                       4\n1999          5                       5\n2000          6                       6\n2001          1                       1\n2002          2                       2\n2003          3                       3\n2004          4                       4\n2005          6                       6\n2006          0                       0\n2007          1                       1\n2008          2                       2\n2009          4                       4\n2010          5                       5\n2011          6                       6\n2012          0                       0\n2013          2                       2\n2014          3                       3\n2015          4                       4\n2016          5                       5\n2017          0                       0\n</code></pre>\n\n<p>In fact, the errors seem to extend as far back as 1900, but I just haven't verified that they are in fact wrong prior to 1964.</p>\n\n<p><strong>perl --version</strong> returns the following:</p>\n\n<pre><code>This is perl 5, version 18, subversion 2 (v5.18.2) built for darwin-thread-multi-2level\n(with 2 registered patches, see perl -V for more detail)\n\nCopyright 1987-2013, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n\n<p>I'm not sure whether it's relevant, but my operating system is macOS Sierra Version 10.12.3.  </p>\n\n<p>I've read through the documentation, but I don't see anything (or I'm being blind) regarding values returned prior to 1968.  I've also tried to do a websearch but am not pulling up anything beyond the typical misunderstandings of array values and the numbering of months and days of the year.</p>\n\n<p>Could someone help me out and explain what I'm getting wrong?  Or, if this is an issue with my version of Perl, let me know what I can do to fix it.</p>\n"}, {"tags": ["javascript", "perl", "websocket", "mojolicious"], "owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491361655, "creation_date": 1491361655, "question_id": 43221086, "link": "https://stackoverflow.com/questions/43221086/is-it-possible-to-render-a-web-page-whilst-closing-a-web-socket", "title": "Is it Possible to Render a Web Page Whilst Closing a Web Socket?", "body": "<p>I am opening a web socket connection to my server to generate some data. I display this data in a <em>simulated</em> terminal window on my web page. I would also like to show this data in a table on a new blank page.</p>\n\n<p>I'm using Mojolicious and Template Toolkit, and I'd like to take advantage of TT2 to generate this report. I'd prefer not to generate the table using javascript.</p>\n\n<p>Is it possible to render a new page as I close the web socket in Mojolicious?</p>\n\n<pre><code># all done, send report data to javascript and close web socket\n$c-&gt;on(finish =&gt; sub {\n    my ($c, $code, $reason) = @_;\n    $c-&gt;send({\n        json =&gt; {\n            command             =&gt; $cmd,\n            cli_flag            =&gt; $cli_flag,\n            cli_errstr          =&gt; $cli_errstr,\n            coord_bc            =&gt; \\%coord_bc,\n            coord               =&gt; \\%coord,\n        },\n    });\n    Mojo::IOLoop-&gt;remove($id);\n    $c-&gt;app-&gt;log-&gt;debug(\"WebSocket closed with status $code\");\n});\n</code></pre>\n\n<p>In other words, can I put:</p>\n\n<pre><code>$c-&gt;stash(\\%vars);\n$c-&gt;render(template =&gt; $template);\n</code></pre>\n\n<p>inside the <code>finish</code> event handler? I suspect this isn't possible.</p>\n\n<p>The only way I can think of to do this is to (1) generate the table in javascript or (2) redirect program flow back to a new get route in Mojolicious to have it render the page using TT2.</p>\n\n<p>What is the best way to do this? Thanks.</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 3, "creation_date": 1491343605, "post_id": 43216928, "comment_id": 73508205, "body": "Variables do not interpolate within single quotes."}, {"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491382274, "post_id": 43216928, "comment_id": 73522568, "body": "Thanks mate! I have finally used another shell script to do the ssh and called the same from my perl with system command and that worked!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1491382396, "post_id": 43224142, "comment_id": 73522647, "body": "I don&#39;t have privilege to install the package. But finally able to achieve the same by calling another shell script."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 2, "last_activity_date": 1491375970, "creation_date": 1491375970, "answer_id": 43224142, "question_id": 43216928, "link": "https://stackoverflow.com/questions/43216928/sshpass-command-to-run-a-shell-script-with-input-parameter/43224142#43224142", "title": "sshpass command to run a shell script with input parameter", "body": "<p>Quoting by hand is tricky, let perl do it for you:</p>\n\n<pre><code>use Net::OpenSSH;\nmy $ssh = Net::OpenSSH-&gt;new('user@hostname', password =&gt; $password);\n$ssh-&gt;system('cd', '/forlder1/fol2', \\\\'&amp;&amp;', './test.sh', $param1, $param2)\n    or $ssh-&gt;die_on_error(\"Command failed\");\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491375970, "creation_date": 1491337116, "last_edit_date": 1491374820, "question_id": 43216928, "link": "https://stackoverflow.com/questions/43216928/sshpass-command-to-run-a-shell-script-with-input-parameter", "title": "sshpass command to run a shell script with input parameter", "body": "<p>I am using the following command in a perl script to run a shell script with input parameter that resides in a particular folder of a different server.</p>\n\n<pre><code>system('sshpass -p password ssh user@hostname \"cd /folder1/fol2; ./test.sh $param1 $param2;\"');\n</code></pre>\n\n<p>But it seems that the input parameter is not getting considered. Can anyone help on this please?</p>\n"}, {"tags": ["angularjs", "perl", "cgi"], "comments": [{"owner": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491332584, "post_id": 43215413, "comment_id": 73502642, "body": "What happens when you remove || &quot;unknown&quot; from the assignments for $name and $phone?"}, {"owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "reply_to_user": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491332819, "post_id": 43215413, "comment_id": 73502763, "body": "Without the || &quot;unknown&quot; an execution error is thrown because $name and $phone are not set.  Apparently, $cgi-&gt;param(&#39;name&#39;), etc. don&#39;t exist."}, {"owner": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491333239, "post_id": 43215413, "comment_id": 73502962, "body": "It sounds like you have a mismatch of your data types. As the answer below indicates, you are mixing form encoding paradigms. What format would you like to send the data in?"}, {"owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "reply_to_user": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491333520, "post_id": 43215413, "comment_id": 73503142, "body": "Json format would be fine.  I"}, {"owner": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491334002, "post_id": 43215413, "comment_id": 73503425, "body": "Then you should set the content-type header to &#39;application/json&#39; and use the browser debugger to ensure that the payload is encoded as json."}, {"owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "reply_to_user": {"reputation": 532, "user_id": 2178363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7582362f4f6f3d13d410f07772dd2a?s=128&d=identicon&r=PG", "display_name": "Jason K.", "link": "https://stackoverflow.com/users/2178363/jason-k"}, "edited": false, "score": 0, "creation_date": 1491337017, "post_id": 43215413, "comment_id": 73505032, "body": "header : { &#39;Content-Type&#39;: &#39;application/json&#39; } did the trick."}], "answers": [{"tags": [], "owner": {"reputation": 4252, "user_id": 2044310, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bea92dbc617be7f9d81f3c101d1b8cad?s=128&d=identicon&r=PG", "display_name": "Fedaykin", "link": "https://stackoverflow.com/users/2044310/fedaykin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491333025, "last_edit_date": 1495540938, "creation_date": 1491332393, "answer_id": 43215519, "question_id": 43215413, "link": "https://stackoverflow.com/questions/43215413/angular-http-post-is-not-sending-the-entire-form/43215519#43215519", "title": "Angular $http.post is not sending the entire form", "body": "<p>It happens because you are using <code>x-www-form-urlencoded</code>, whenever you post using that mode you need to add the data on the posted url as a querystring.</p>\n\n<p>It would look like this:</p>\n\n<pre><code>$scope.insertData=function(){\n        $http.post(\"cgi-bin/in.cgi?bname=\" + $scope.bname + \"&amp;bphone=\" + $scope.bphone, {\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n           }).then(function(response){\n                console.log(\"Data Inserted Successfully\");\n            },function(error){\n                alert(\"Sorry! Data Couldn't be inserted!\");\n                console.error(error);\n\n            });\n        }\n    });\n</code></pre>\n\n<p>But you would need to properly encode the values you are sending, please refer to the following link for more information: \n<a href=\"https://stackoverflow.com/questions/24710503/how-do-i-post-urlencoded-form-data-with-http-in-angularjs\">How do I POST urlencoded form data with $http in AngularJS?</a></p>\n\n<p>Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1491351818, "post_id": 43217021, "comment_id": 73510746, "body": "The AngularJS default for content type is <code>application&#47;json</code>. I am surprised that it was not already sending that. Did your code override that default somewhere? For more information, see <a href=\"https://docs.angularjs.org/api/ng/service/%24http#setting-http-headers\" rel=\"nofollow noreferrer\">AngularJS $http API Reference - Setting HTTP Headers.</a>"}, {"owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "reply_to_user": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "edited": false, "score": 0, "creation_date": 1491409672, "post_id": 43217021, "comment_id": 73543633, "body": "Originally, POSTDATA had something that looked like the data I wanted (see original posting), but not until I followed Jason&#39;s suggestion of explicitly declaring the header as &quot;application/json&quot; did POSTDATA contain all the data in json format."}], "tags": [], "owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "is_accepted": true, "score": 2, "last_activity_date": 1491337444, "creation_date": 1491337444, "answer_id": 43217021, "question_id": 43215413, "link": "https://stackoverflow.com/questions/43215413/angular-http-post-is-not-sending-the-entire-form/43217021#43217021", "title": "Angular $http.post is not sending the entire form", "body": "<p>By setting $http.post's header to type json:</p>\n\n<pre><code>header : { 'Content-Type': 'application/json' } \n</code></pre>\n\n<p>$cgi->param('POSTDATA') became</p>\n\n<pre><code>{ \"bname\" : \"J Doe\", \"bphone\" : \"1234567\" }\n</code></pre>\n\n<p>From there, Perl's decode_json converted the string to a hash which finished off the problem.</p>\n\n<pre><code>my $decoded = decode_json($cgi-&gt;param('POSTDATA'));\n$sql =  \"insert into TestDB values ('$decoded-&gt;{bname}', '$decoded-&gt;{bphone}')\";\n</code></pre>\n\n<p>Stackoverflow comes through again. </p>\n"}], "owner": {"reputation": 802, "user_id": 2569618, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IScoG.jpg?s=128&g=1", "display_name": "user2569618", "link": "https://stackoverflow.com/users/2569618/user2569618"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 43217021, "answer_count": 2, "score": 0, "last_activity_date": 1491337444, "creation_date": 1491332016, "last_edit_date": 1491332721, "question_id": 43215413, "link": "https://stackoverflow.com/questions/43215413/angular-http-post-is-not-sending-the-entire-form", "title": "Angular $http.post is not sending the entire form", "body": "<p>A simple angular 1.x $https.post which submits a name (\"J Doe\") and a phone number (1234567):</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;script  src=\"http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js\"&gt;  &lt;/script&gt;\n    &lt;script&gt;\n    var app = angular.module('myApp',[]);\n    app.controller('myCtrl',function($scope,$http){\n        $scope.insertData=function(){\n            $http.post(\"cgi-bin/in.cgi\",{\n              'bname':$scope.bname,\n              'bphone':$scope.bphone\n               }).then(function(response){\n                    console.log(\"Data Inserted Successfully\");\n                },function(error){\n                    alert(\"Sorry! Data Couldn't be inserted!\");\n                    console.error(error);\n\n                });\n            }\n        });\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div ng-app=\"myApp\" ng-controller=\"myCtrl\"&gt;\n        &lt;form&gt;\n            Name:- &lt;input type=\"text\" ng-model=\"bname\" /&gt;\n            Phone:-&lt;input type=\"text\" ng-model=\"bphone\" /&gt;\n            &lt;input type=\"button\" value=\"Submit\" ng-click=\"insertData()\" /&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>To a Perl script which does an insert into MySQL:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse CGI qw(:standard);\nuse DBI;\nuse POSIX qw(strftime);\nuse JSON;\n\nmy $sql;\n\nmy $dbh = DBI-&gt;connect('****', '****', '****') || die \"Connecting from Perl to MySQL database failed: $DBI::errstr\";\n\nmy $cgi   = CGI-&gt;new;\nmy $name  = $cgi-&gt;param('bname') || \"unknown\";\nmy $phone = $cgi-&gt;param('bphone') || \"unknown\";\n\nprint \"Content-type:text/html\\r\\n\\r\\n\";\n\n$sql =  \"insert into TestDB values ('$name', '$phone')\";\n$dbh-&gt;do(\"$sql\") || die (\"Connecting from Perl to MySQL database failed: $DBI::errstr\");\n\n$dbh-&gt;disconnect;\n\nprint \"Record insert successfully\";\n</code></pre>\n\n<p>But the only thing being inserted into the DB is:</p>\n\n<pre><code>+---------+---------+\n| Name    | Phone   |\n+---------+---------+\n| unknown | unknown |\n+---------+---------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>The name and phone are nowhere, but a print of $cgi->param('POSTDATA') give the following:</p>\n\n<pre><code> {\"json\":\"J Doe\"}\n</code></pre>\n\n<p>OK, I found the name, \"J Doe\", along with some weird \"json\" key, but where's the phone number?<br>\nWhat am I missing?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 11, "user_id": 7815864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TCyv6.jpg?s=128&g=1", "display_name": "SetBabbageFree", "link": "https://stackoverflow.com/users/7815864/setbabbagefree"}, "edited": false, "score": 0, "creation_date": 1491330295, "post_id": 43214807, "comment_id": 73501333, "body": "OOPS! I think that I see my problem. I should call it just as $MyWord-&gt;Parse($io); After looking at if for days I see it right after I post it."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1491330988, "post_id": 43214807, "comment_id": 73501772, "body": "When that happens, it&#39;s typically referred to as <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Rubber duck debugging</a> :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491330990, "post_id": 43214807, "comment_id": 73501775, "body": "I suggest a good read on classes. (0) Nothing is passed to your constructor. If you want an object per filehandle, pass it in <code>new</code>. (If not then <code>fd</code> shouldn&#39;t be part of data. (1) In ctor you assign <code>undef</code>? If you pass fd then <code>fd =&gt; $fd</code>, in your case <code>fd =&gt; $args</code>. (But that&#39;s a bad name -- it takes <i>one argument</i>).  Then there&#39;s data in the class and <code>$MyWord-&gt;{fd}</code> is fine (without having to pass fh to the method, too).  (2) The &quot;good&quot; case works in a very bad way -- it directly assigns to class internals, fixing the error in the constructor."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491334158, "post_id": 43214807, "comment_id": 73503496, "body": "Are you using <i>ctor</i> as an abbreviation of <i>constructor</i>? I have never seen that before. Also, could you recommend where the OP might &quot;read on classes&quot; where he can find the advice you give here?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491336792, "post_id": 43214807, "comment_id": 73504907, "body": "@Borodin  Right, good point, thank you.  I was contemplating writing up something for them so didn&#39;t add references.   The <code>ctor</code> can be run into in (loose) C++ exchanges (probably elsewhere, I don&#39;t recall)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491337094, "post_id": 43214807, "comment_id": 73505070, "body": "Standard, and good, documents: tutorial <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a> and reference <a href=\"http://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a> on object-oriented work in Perl, <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perlmod</a> for modules (a class is a package), and a tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> for references.  Also, there is a lot written around, from tutorials to informative SO posts."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1502515056, "last_edit_date": 1502515056, "creation_date": 1491349378, "answer_id": 43219541, "question_id": 43214807, "link": "https://stackoverflow.com/questions/43214807/trouble-passing-an-iofile-handle-to-a-perl-class/43219541#43219541", "title": "Trouble passing an IO::File handle to a Perl class", "body": "<p>To summarize errors in the posted code: The class name is passed to the constructor behind the scenes, as is the object to methods; we <em>do not</em> supply them.  We do pass the filehandle to <code>new</code>, so that it is assigned to object's data and it can thus be used by methods in the class.</p>\n\n<p>Here is a basic example.  I try to stick to the posted design as much as possible.  This does not do much of what is needed with I/O objects, but is rather about writing a class in general.</p>\n\n<p>The class is meant to process a file, having been passed a filehandle for it.  We expect to have one filehandle per object. Since we get it open the reponsibility to close it is left to the caller.</p>\n\n<p><strong>script.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';    \nuse IO::File;\n\nuse ProcessFile;\n\nmy $filename = shift || $0;         # from command line, or this file    \nsay \"About to parse '$filename'\";    \nmy $io = IO::File-&gt;new($filename, \"r\") or die \"Can't open $filename: $!\";\n\nmy $word = ProcessFile-&gt;new($io);   # Create a new object, initialize with $io\n$word-&gt;parse();\n# OR, by chaining calls\n#my $word = ProcessFile-&gt;new($io)-&gt;parse();\n\nsay \"Have \", ProcessFile-&gt;num_objects(), \" open filehandles\";    \n\n$io-&gt;close;\n</code></pre>\n\n<p>The package file <strong>ProcessFile.pm</strong></p>\n\n<pre><code>package ProcessFile;\n\nuse warnings;\nuse strict;\nuse Carp qw(croak);\nuse Scalar::Util qw(openhandle);\n\n# Example of \"Class\" data and methods: how many objects (open filehandles)\nour $NumObjects;\nsub num_objects  { return $NumObjects }\nsub DESTROY      { --$NumObjects }\n\nsub new {\n    my ($class, $fh) = @_;   # class name, arguments passed to constructor    \n    # To also check the mode (must be opened for reading) use Fcntl module\n    croak \"No filehandle or not open or invalid \" if not openhandle $fh;\n\n    my $self = { _fh =&gt; $fh };  # add other data that may make sense\n    bless $self, $class;        # now $self is an object of class ProcessFile\n\n    ++$NumObjects;\n    return $self;\n}\n\nsub parse {\n    my ($self, @args) = @_;  # object, arguments passed to method (if any)\n\n    # Filehandle is retrieved from data, $self-&gt;{_fh}\n    while ( defined(my $inputline = $self-&gt;{_fh}-&gt;getline) ) {\n        print $inputline;\n    }\n\n    # Rewind before returning $self (or not, depending on design/@args)\n    # Can do more here, set some data etc, as needed by class design\n    seek $self-&gt;{_fh}, 0, 0;\n    return $self;\n}\n\n1;\n</code></pre>\n\n<p>A few comments on the above code follow.  Let me know if more would be helpful.</p>\n\n<p><em>Class</em> data and methods don't belong to any one object, and are used for purposes that relate to the class as a whole (for example, to track all objects in play).  </p>\n\n<p>The <code>DESTROY</code> method runs when an object is destroyed, for example when it goes out of scope.  Here we need it in order to decrease the count of existing objects.  Try: place the code creating an object in a block <code>{ ... };</code> and see what count we get after the block.</p>\n\n<p>We use <code>openhandle</code> from <a href=\"http://perldoc.perl.org/Scalar/Util.html\" rel=\"nofollow noreferrer\">Scalar::Util</a> to test whether the filehandle is open.  We should really also test whether it is open for <em>reading</em>, since that is the fixed purpose of the class, using <a href=\"http://perldoc.perl.org/Fcntl.html\" rel=\"nofollow noreferrer\">Fcntl</a>.</p>\n\n<p>In the sole, example method <code>parse</code> we read out the file and then rewind the filehandle, before returning the object.  That is a placeholder for saving and/or setting the state for repeated use. What is done depends on the purpose and design of the class, and can be controlled by arguments.</p>\n\n<p>Documentation: tutorial <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a> and reference <a href=\"http://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a> on object-oriented work in Perl, <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perlmod</a> for modules (a class is firstly a package), and a tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> for references.</p>\n\n<p>There are also many informative SO posts around, please search.</p>\n"}, {"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1491597145, "creation_date": 1491597145, "answer_id": 43286678, "question_id": 43214807, "link": "https://stackoverflow.com/questions/43214807/trouble-passing-an-iofile-handle-to-a-perl-class/43286678#43286678", "title": "Trouble passing an IO::File handle to a Perl class", "body": "<p>To summarize:</p>\n\n<pre><code>$MyWord-&gt;Parse($MyWord, $io);\n</code></pre>\n\n<p>Given that <code>$MyWord</code> is a reference blessed into the <code>Bad</code> class (i.e, it's an instance of <code>Bad</code>), this calls <code>Bad::Parse</code> with the arguments <code>($MyWord, $MyWord, $io)</code>. That is, it behaves as if you'd called:</p>\n\n<pre><code>Bad::Parse($MyWord, $MyWord, $io)`.\n</code></pre>\n\n<p>However, <code>Bad::Parse()</code> is written to expect the arguments <code>($MyWord, $io)</code>, so <code>$io</code> gets set to the second <code>$MyWord</code>, and <code>Bad::Parse()</code> throws an error when it tries to call <code>$io-&gt;getline</code> because the <code>Bad</code> module doesn't implement that method.</p>\n\n<p>The fix is simple:</p>\n\n<ol>\n<li><p>Call the function as <code>$MyWord-&gt;Parse($io)</code>.</p></li>\n<li><p>Change the variable name for the first argument in <code>Bad::Parse()</code> from <code>$MyWord</code> to <code>$self</code>. This isn't strictly <em>necessary</em> -- you can technically call this variable whatever you want -- but it's conventional, and will make your code much more readable to other Perl programmers.</p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 7815864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TCyv6.jpg?s=128&g=1", "display_name": "SetBabbageFree", "link": "https://stackoverflow.com/users/7815864/setbabbagefree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1502515056, "creation_date": 1491330062, "last_edit_date": 1502429515, "question_id": 43214807, "link": "https://stackoverflow.com/questions/43214807/trouble-passing-an-iofile-handle-to-a-perl-class", "title": "Trouble passing an IO::File handle to a Perl class", "body": "<p>If I pass it as an argument I get the error:</p>\n\n<p>'Can't locate object method \"getline\" via package \"Bad\" at Bad.pm line 27.'</p>\n\n<p>But if I insert it in the module it works.\nThis is the boiled down code. bad.pl uses the module Bad.pm. Set $CAUSE_ERROR to see the problem.</p>\n\n<pre><code>#!/usr/bin/env perl\n# This is bad.pl\n\nuse strict;\nuse warnings;\nuse IO::File;\nuse Bad;    # use the bad module \"Bad.pm\"\n\n&amp;Main();\n\nsub Main {\n    my $filename = \"bad.pl\";\n    warn \"About to parse '$filename'\\n\";\n    my $MyWord = Bad-&gt;new();   # Create a new object.\n\n    my $io = IO::File-&gt;new($filename, \"r\");\n\n    #####################\n    my $CAUSE_ERROR  = 1;   # Set to 0 it does NOT cause an error. Set to 1 it DOES.\n    #####################\n\n    if($CAUSE_ERROR ) {\n        $MyWord-&gt;Parse($MyWord, $io);\n    } else {\n        $MyWord-&gt;{fd} = $io;\n        $MyWord-&gt;Parse($MyWord);\n    }\n}\n</code></pre>\n\n<p>This is Bad.pm</p>\n\n<pre><code>package Bad;\n# This is Bad.pm\n\nuse warnings;\nuse strict;\n\nsub new {\n    my ($class, $args) = @_;\n    my $self = {\n        fd =&gt; undef,\n    };\n    return bless($self, $class);       # Changes a function to a class\n}\n\nsub Parse {\n    my ($MyWord, $io) = @_;\n\n    if(defined($MyWord-&gt;{fd})){\n        # WORKS\n        $io = $MyWord-&gt;{fd};\n        while ( defined(my $inputline = $io-&gt;getline) ) {\n            print \"${inputline}\";\n        }\n    } else {\n        # FAILS\n        while ( defined(my $inputline = $io-&gt;getline) ) {\n            print \"${inputline}\";\n        }\n    }\n}\n1;\n</code></pre>\n\n<p>Using Perl v5.22.3 under Cygwin.\nOriginally I had Bad.pm in a sub directory but I simplified it.\nThank you for you time.</p>\n"}, {"tags": ["perl", "console"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491331295, "post_id": 43214804, "comment_id": 73501935, "body": "Don&#39;t read from the screen. Keep the state of the puzzle in memory."}, {"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491341118, "post_id": 43214804, "comment_id": 73507165, "body": "But I need to update the memory by entering a number into a particular box on the screen. it would be a kludge to have to enter the box number and its content from the console, instead of just entering the new content into the box."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491342286, "post_id": 43214804, "comment_id": 73507639, "body": "<i>&quot;I could do it easily in Javascript&quot;</i> I don&#39;t understand you. How would that work?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491343345, "post_id": 43214804, "comment_id": 73508115, "body": "How do you propose the user navigates between the boxes on a standard terminal?"}, {"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1491345316, "post_id": 43214804, "comment_id": 73508924, "body": "The terminal currently allows SOME forms of mouse I/O, eg, copy and paste to the command line, and also allows output to any address on the screen. I was hoping that someone had put this together to allow me to click on any place on the screen, get a cursor and enter data there, and read it back into perl, e.g. with a getc()."}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1491391046, "creation_date": 1491391046, "answer_id": 43229638, "question_id": 43214804, "link": "https://stackoverflow.com/questions/43214804/in-perl-win7-how-do-i-read-the-character-from-a-specified-screen-location/43229638#43229638", "title": "In perl &amp; Win7, How do I read the character from a specified screen location?", "body": "<p>In module  Win32-Console, you have the routine</p>\n\n<pre><code>ReadChar [number, col, row]\n</code></pre>\n"}], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491391046, "creation_date": 1491330037, "question_id": 43214804, "link": "https://stackoverflow.com/questions/43214804/in-perl-win7-how-do-i-read-the-character-from-a-specified-screen-location", "title": "In perl &amp; Win7, How do I read the character from a specified screen location?", "body": "<p>Is it possible, under perl program control, to read a character from the screen?</p>\n\n<p>I'm using Win32::Console::ANSI and Term::ANSIScreen.</p>\n\n<p>My perl program can place the cursor on the desired character with 'locate', but I see no way to read it back into the program.</p>\n\n<p>getc doesn't work, since it requires me to type the character myself.</p>\n\n<p>Example use: filling in a sudoku puzzle on screen. </p>\n\n<p>OK, I could do it easily in Javascript, but I want to be able to write results to a local text file, which JS won't let me do.</p>\n\n<p>Or, is there a way to read the entire screen to a string in memory?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1491329656, "post_id": 43214655, "comment_id": 73500935, "body": "Please be more specific about what you are trying to do and in what way the code you showed isn&#39;t enough."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1491329782, "post_id": 43214655, "comment_id": 73501000, "body": "See file test operators in <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>perldoc -X</code></a>"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1491363093, "post_id": 43214655, "comment_id": 73513234, "body": "@zwol, the code works but i want the filenames of the files which exist."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491376090, "post_id": 43214655, "comment_id": 73518513, "body": "@Yash you said you want to check if file A is present, then you know the name is &quot;A&quot;?"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1491385628, "post_id": 43214655, "comment_id": 73524998, "body": "Sorry, the problem is resolved now. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "is_accepted": false, "score": 0, "last_activity_date": 1491329884, "creation_date": 1491329884, "answer_id": 43214748, "question_id": 43214655, "link": "https://stackoverflow.com/questions/43214655/check-the-existence-of-two-files-in-a-directory/43214748#43214748", "title": "Check the existence of two files in a directory", "body": "<p>Generally you assign the return value of <code>glob</code> to a list, and then use the size of that list:</p>\n\n<pre><code>my @files = glob '*.file'\nprint 'found ' . @files . \" files\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491342051, "creation_date": 1491329578, "last_edit_date": 1491342051, "question_id": 43214655, "link": "https://stackoverflow.com/questions/43214655/check-the-existence-of-two-files-in-a-directory", "title": "Check the existence of two files in a directory", "body": "<p>I want check if files A or B are present in a directory.\nThe user should be informed whether neither,\neither or both files are present.</p>\n\n<p>I found that it can be done using glob function in perl:</p>\n\n<pre><code>if ( glob(\"*.file\") ) {\n    # At least one file matches \"*.file\"\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "edited": false, "score": 1, "creation_date": 1491327939, "post_id": 43214005, "comment_id": 73499942, "body": "Your script works fine, you sure you pasted it verbatim?"}, {"owner": {"reputation": 187, "user_id": 7406399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f4e1e31b67a7c3ebd9e8037b0c14d172?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/7406399/patrick"}, "reply_to_user": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "edited": false, "score": 0, "creation_date": 1491328100, "post_id": 43214005, "comment_id": 73500025, "body": "Yes. I found that if I fail to enter anything I get the same kind of error, except help is replaced by a blank string:  <code>Argument &quot;&quot; isn&#39;t numeric in smart match at .&#47;manage.pl line 59, &lt;STDIN&gt; line 1.</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491344333, "post_id": 43214005, "comment_id": 73508525, "body": "The usual advice regarding <code>given</code> and <code>when</code> is not to use it. In the next version of Perl after yours\u2014v5.18\u2014it was marked as both experimental and deprecated, and you would get a warning message <code>given is experimental at ...</code> even if you don&#39;t enable warnings. It will not persist in its current form, and will  be either modified considerably or removed altogether before it loses its warning. You should use a chain of <code>if</code>/<code>elsif</code>/<code>else</code> instead, and you can wrap that in <code>for ( $value ) { ... }</code> as a topicaliser if you wish to deal with <code>$_</code> instead of <code>$value</code> directly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491344463, "post_id": 43214005, "comment_id": 73508588, "body": "You should also have seen a warning about <code>@_[0]</code> which should be <code>$_[0]</code>"}, {"owner": {"reputation": 187, "user_id": 7406399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f4e1e31b67a7c3ebd9e8037b0c14d172?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/7406399/patrick"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491352492, "post_id": 43214005, "comment_id": 73510899, "body": "@Borodin I changed it to that and am still receiving the same error. I was using Switch to process this earlier but I saw that Switch doesn&#39;t handle regular expressions as well as given/when. If the general best practice is to not use I&#39;ll try to find another avenue for that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491384877, "post_id": 43214005, "comment_id": 73524406, "body": "If you mean the <code>Switch</code> module, then that was also deprecated in v5.12. It uses a source filter, which is never a good idea. Take a look at <a href=\"http://perldoc.perl.org/perlfaq7.html#How-do-I-create-a-switch-or-case-statement%3f\" rel=\"nofollow noreferrer\"><i>How do I create a switch or case statement?</i></a>"}, {"owner": {"reputation": 187, "user_id": 7406399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f4e1e31b67a7c3ebd9e8037b0c14d172?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/7406399/patrick"}, "edited": false, "score": 0, "creation_date": 1491392918, "post_id": 43214005, "comment_id": 73530391, "body": "The first recommendation on there is <code>given-when</code> which I&#39;m avoiding based on your advice, then <code>if-else-elseif</code> which is cumbersome, but I guess I&#39;ll have to use since <code>Switch</code> is also deprecated.  Fairly annoying that Perl doesn&#39;t have anything not deprecated that&#39;s built-in. Other languages have Case statement support just fine."}], "owner": {"reputation": 187, "user_id": 7406399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f4e1e31b67a7c3ebd9e8037b0c14d172?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/7406399/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491327973, "creation_date": 1491327340, "last_edit_date": 1491327973, "question_id": 43214005, "link": "https://stackoverflow.com/questions/43214005/perl-smart-match-not-accepting-string-comparison", "title": "Perl Smart Match not accepting string comparison", "body": "<p>Just dipping my toes into perl. I have a menu-based system whose input is handled by a given/when statement. While most of the my input is numbers, I want to be able to take \"help\" number as input and then spit out help for the particular number. I am trying to isolate the help section using regex to process the command, but smart match is expecting a number instead of string.</p>\n\n<p>In another function, I have:</p>\n\n<pre><code> my $MenuInput = &lt;STDIN&gt;;\n chomp $MenuInput;\n MenuProcess($MenuInput);\n</code></pre>\n\n<p>and then a subroutine to handle that input:</p>\n\n<pre><code>sub MenuProcess {\n          my $value = @_[0];     \n          given ($value){\n                  when(1)         {CStatus()}\n                  when(2)         {CInstall()}\n                  when(3)         {CUpg()}\n                  when(4)         {CDest()}\n                  when(5)         {exit 0}\n                  when($value =~ /help/)\n                  {\n                          print \"help\";\n                  }\n\n          }\n }\n</code></pre>\n\n<p>Eventually the 'print \"help\" will be replaced by handling for whatever particular menu option the user needs help with.</p>\n\n<p>I am receiving this error</p>\n\n<p><code>Argument \"help \" isn't numeric in smart match at ./manage.pl line 59, &lt;STDIN&gt; line 1.</code></p>\n\n<p>I have <code>use 5.016;</code> specified and my perl -v output is as follows:</p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 16, subversion 3 (v5.16.3) built for x86_64-linux-thread-multi\n(with 34 registered patches, see perl -V for more detail)\n\nCopyright 1987-2012, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n"}, {"tags": ["perl", "perlscript"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491357464, "post_id": 43213816, "comment_id": 73511946, "body": "Follow the good advice of @zdim and use a dispatch table, but of course dynamic function calls are possible in perl: <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/eval.html</a>"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1493366958, "post_id": 43213816, "comment_id": 74396410, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/23039028/calling-perl-subroutines-from-the-command-line\">Calling perl subroutines from the command line</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 7, "last_activity_date": 1510115282, "last_edit_date": 1510115282, "creation_date": 1491327463, "answer_id": 43214045, "question_id": 43213816, "link": "https://stackoverflow.com/questions/43213816/ways-to-call-a-function-in-perl/43214045#43214045", "title": "Ways to call a function in Perl", "body": "<p>There are very few hard limits on what you can do in Perl, but this is one of those places that you don't want to go to.  One normal way about it is to use a <em>dispatch table</em></p>\n\n<pre><code>my %call = (\n    'name_1' =&gt; sub { function body },   # inline, anonymous subroutine\n    'name_2' =&gt; \\&amp;func,                  # or take a reference to a sub\n    ...\n);\n</code></pre>\n\n<p>where <code>sub {}</code> is an <em>anonymous subroutine</em>, so the value for <code>name_1</code> is a <em>code reference</em>.</p>\n\n<p>Then you use it as</p>\n\n<pre><code>my $name = &lt;STDIN&gt;;\nchomp $name;\n\n$call{$name}-&gt;(@arguments);  # runs the code associated with $name\n</code></pre>\n\n<p>This finds the key <code>$name</code> in the hash and dereferences its value, the coderef; so it runs that code. </p>\n\n<p>Documentation: overview <a href=\"https://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perlintro</a>,   tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, and references <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": false, "score": 0, "last_activity_date": 1510118560, "last_edit_date": 1510118560, "creation_date": 1510117218, "answer_id": 47171905, "question_id": 43213816, "link": "https://stackoverflow.com/questions/43213816/ways-to-call-a-function-in-perl/47171905#47171905", "title": "Ways to call a function in Perl", "body": "<p>A solution:</p>\n\n<pre><code>print \"Enter subroutine name:\";\n\n$var1 = &lt;STDIN&gt;;\nchomp($var1);\n\neval \"$var1()\";\n\nsub E111 {\n    print \"Hi this is E111 &amp; Bye \\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5204037, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-A_LP91h7YUk/AAAAAAAAAAI/AAAAAAAAAL4/Rp7C-533Lt0/photo.jpg?sz=128", "display_name": "Sriram P", "link": "https://stackoverflow.com/users/5204037/sriram-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1618863685, "creation_date": 1491326616, "last_edit_date": 1618863685, "question_id": 43213816, "link": "https://stackoverflow.com/questions/43213816/ways-to-call-a-function-in-perl", "title": "Ways to call a function in Perl", "body": "<p>Can I call a subroutine by taking its name dynamically as below?</p>\n<pre><code>printf &quot;Enter subroutine name: &quot;;\n$var1 = &lt;STDIN&gt;;      # Input is E111;\n$var1();\n</code></pre>\n<p>Function <em>E111</em>:</p>\n<pre><code>sub E111(){\n    printf &quot;Hi, this is E111 &amp; Bye \\n&quot;;\n}\n</code></pre>\n<p>Is there a possibility to do it like this?</p>\n"}, {"tags": ["regex", "string", "perl", "premature-optimization"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491321337, "post_id": 43211967, "comment_id": 73495839, "body": "Can you give an example of input/output?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491321500, "post_id": 43211967, "comment_id": 73495951, "body": "Try this: <code>$_ =~ s{(?:^(?!&#47;)|(?&lt;!&#47;)$|&#47;{2,})}{&#47;}g</code>.. but I don&#39;t know if its more readable"}, {"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491322944, "post_id": 43211967, "comment_id": 73496971, "body": "@Sobrique, typically input strings will look something like &quot;home/datamonster//c2counts&quot; or &quot;/home/teledyne/tmp/&quot;.  The code I&#39;m working on is a re-engineering job so it has to be able to use existing configuration files, which are of highly variable quality ;)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491323011, "post_id": 43211967, "comment_id": 73497012, "body": "Probably worth <a href=\"https://stackoverflow.com/posts/43211967/edit\">edit</a>ing that into your question, along with how it should look on output, just for clarity."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491323525, "post_id": 43211967, "comment_id": 73497355, "body": "You tagged this as <code>premature-optimisation</code>. So, your main point is: 1.) be readable, 2.) concise 3.) fast on execution? Just wondering..."}, {"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491323715, "post_id": 43211967, "comment_id": 73497466, "body": "@jm666, I was just poking fun at myself for something many people would call obsessive over-analysis of minutia.  I feel like the perl idioms I hope to learn from asking this question are more important than the actual problem itself."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491325895, "post_id": 43211967, "comment_id": 73498752, "body": "@Medievalist  I don&#39;t find it excessive at all -- for one thing, a missing first slash is a gross error, it&#39;s an incorrect path.  The last slash is for me almost a matter of design, about how I want to later use these paths. The middle slash can mess up alignment in prints, what can distract when visually inspecting things.  A good idea to clean&#39;em up, I think."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "edited": false, "score": 0, "creation_date": 1491324237, "post_id": 43212193, "comment_id": 73497800, "body": "Thanks, I thought that assignment syntax would work, it&#39;s nice to know I&#39;m still remembering some of perl correctly!"}], "tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491321542, "creation_date": 1491321542, "answer_id": 43212193, "question_id": 43211967, "link": "https://stackoverflow.com/questions/43211967/perl-string-catenation-and-substitution-in-a-single-line/43212193#43212193", "title": "perl string catenation and substitution in a single line?", "body": "<p>you could do it like this, but I wouldn't call it more readable:</p>\n\n<pre><code>foreach ( ($config-&gt;{'backup_path'},\n           $config-&gt;{'work_path'},\n           $config-&gt;{'output_path'}\n         ) ) {\n     ( $_ = \"/$_/\" ) =~ s/\\/{2,}/\\//g;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "edited": false, "score": 0, "creation_date": 1491324032, "post_id": 43212333, "comment_id": 73497675, "body": "That&#39;s exactly the kind of information I was looking for!  Thank you!"}, {"owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "edited": false, "score": 0, "creation_date": 1491325091, "post_id": 43212333, "comment_id": 73498305, "body": "The need for \\b is odd, though, I agree.  Isn&#39;t the slash after the \\b unnecessary since the comma is being used as a delimiter?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491325715, "post_id": 43212333, "comment_id": 73498659, "body": "<code>( $_ = &quot;&#47;$_&#47;&quot; ) =~ s|&#47;\\K&#47;+||g</code> or <code>s|(?:&#47;|\\A|\\z)&#47;*|&#47;|</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491374880, "post_id": 43212333, "comment_id": 73517712, "body": "Yes, I didn&#39;t need to escape that slash with a comma delimiter."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491397668, "post_id": 43212333, "comment_id": 73534107, "body": "I trying to understand the solution(s). In the regex <code>s,(?:^&#47;*|\\b\\&#47;*$|&#47;+),&#47;,g</code> why do you using word-boundary at the end of the path? e.g. you&#39;re used the <code>\\b\\&#47;*$</code>. Is here some reason exclude paths like <code>&#47;some&#47;strange&#47;path-</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491405296, "post_id": 43212333, "comment_id": 73540581, "body": "@Borodin - I think your second pattern has the same problem as mine - it ignores trailing slashes - <code>home&#47;&#47;&#47;&#47;&#47;teledyne&#47;tmp&#47;</code> -&gt; <code>&#47;home&#47;teledyne&#47;tmp&#47;&#47;</code> - but <code>s,(?:&#47;|\\A|\\b\\z)&#47;*,&#47;,g</code> (e.g. with a <code>\\b</code>) matches/replaces that trailing slash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491412936, "post_id": 43212333, "comment_id": 73545551, "body": "@Sobrique: You&#39;re quite right. I was very lazy writing that -- I didn&#39;t even get the delimiters right! This works <code>s{\\A&#47;*|&#47;&#47;+|[^&#47;]\\K&#47;*\\z}{&#47;}g</code>. I don&#39;t think you can rely on the path segments being exactly <code>\\w+</code>, and if they&#39;re not then <code>\\b</code> won&#39;t work either."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1491405056, "last_edit_date": 1495540458, "creation_date": 1491321935, "answer_id": 43212333, "question_id": 43211967, "link": "https://stackoverflow.com/questions/43211967/perl-string-catenation-and-substitution-in-a-single-line/43212333#43212333", "title": "perl string catenation and substitution in a single line?", "body": "<p>Well, just rewriting what you got:</p>\n\n<pre><code>my @vars = qw ( backup_path work_path output_path );\n\nfor ( @{$config}{@vars} ) {\n   s,^/*,/,;  #prefix\n   s,/*$,/,; #suffix\n   s,/+,/,g; #double slashes anywhere else. \n}\n</code></pre>\n\n<p>I'd be cautious - optimising for magic regex is not an advantage in every situation, because they become quite quickly unreadable. </p>\n\n<p>The above uses the <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">hash slice mechanism</a> to select values out of a hash (reference in this case), and the fact that <code>s///</code> implicitly operates on <code>$_</code> anyway. And modifies the original var when it does. </p>\n\n<p>But it's also useful to know, if you're operating on patterns containing <code>/</code> it's helpful to switch delimiters, because that way you don't get the \"leaning toothpicks\" effect. </p>\n\n<p><code>s/\\/{2,}/\\//g</code> can be written as:</p>\n\n<pre><code>s,/+,/,g\n</code></pre>\n\n<p>or</p>\n\n<pre><code> s|/{2,}|/|g\n</code></pre>\n\n<p>if you want to keep the numeric quantifier, as <code>+</code> is inherently 1 or more which works the same here, because it collapses a double into a single anyway, but it <em>technically</em> matches <code>/</code> (and replaces it with <code>/</code>) where the original pattern doesn't. But you wouldn't want to use the <code>,</code> if you have that in your pattern, for the same reason. </p>\n\n<p>However I think this does the trick;</p>\n\n<pre><code>s,(?:^/*|\\b\\/*$|/+),/,g for @{$config}{qw ( backup_path work_path output_path )};\n</code></pre>\n\n<p>This matches an alternation grouping, replacing either:</p>\n\n<ul>\n<li>start of line, zero or more <code>/</code></li>\n<li>word boundary, zero or more <code>/</code> end of line</li>\n<li>one or more slashes anywhere else. </li>\n</ul>\n\n<p>with a single <code>/</code>. </p>\n\n<p>uses the hash slice mechanism as above, but without the intermediate 'vars'. </p>\n\n<p>(For some reason the second grouping doesn't work correctly without the word boundary <code>\\b</code> zero width anchor - I think this is a backtracking issue, but I'm not entirely sure)</p>\n\n<p>For bonus points - you could probably select <code>@vars</code> using <code>grep</code> if your source data structure is appropriate:</p>\n\n<pre><code>my @vars = grep { /_path$/ } keys %$config; \n#etc. Or inline with:\ns,(?:^/*|\\b\\/*$|/+),/,g for @{$config}{grep { /_path$/ } keys %$config };\n</code></pre>\n\n<p>Edit: Or as <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> notes:</p>\n\n<pre><code>s|(?:/|\\A|\\z)/*|/|\n</code></pre>\n\n<p>Giving us:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $config = {\n   backup_path =&gt; \"/fish/\",\n   work_path   =&gt; \"narf//zoit\",\n   output_path =&gt; \"/wibble\",\n   test_path =&gt; 'home/datamonster//c2counts',\n   another_path =&gt; \"/home/teledyne/tmp/\",\n   again_path =&gt; 'home/////teledyne/tmp/',\n   this_path =&gt; '/var/backup/DOC/all_instruments/',\n};\n\ns,(?:/|\\A|\\b\\z)/*,/,g for @{$config}{grep { /_path$/ } keys %$config };\n\nprint Dumper $config;\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>$VAR1 = {\n          'output_path' =&gt; '/wibble/',\n          'this_path' =&gt; '/var/backup/DOC/all_instruments/',\n          'backup_path' =&gt; '/fish/',\n          'work_path' =&gt; '/narf/zoit/',\n          'test_path' =&gt; '/home/datamonster/c2counts/',\n          'another_path' =&gt; '/home/teledyne/tmp/',\n          'again_path' =&gt; '/home/teledyne/tmp/'\n        };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1491476675, "post_id": 43214069, "comment_id": 73575272, "body": "Readability is important. Sometimes implicit variables help, sometimes they don&#39;t, so go with what works for you. Clarity is <i>much</i> more important than being &#39;concise&#39; or &#39;clever&#39; (most of those get optimised by the compiler anyway)"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1491328027, "last_edit_date": 1491328027, "creation_date": 1491327545, "answer_id": 43214069, "question_id": 43211967, "link": "https://stackoverflow.com/questions/43211967/perl-string-catenation-and-substitution-in-a-single-line/43214069#43214069", "title": "perl string catenation and substitution in a single line?", "body": "<p>This question already got many fantastic answers.</p>\n\n<p>From the view of non-perl-expert (me), some are hard to read / understand. ;)</p>\n\n<p>So, I would probably use this:</p>\n\n<pre><code>my @vars = qw ( backup_path work_path output_path );\nfor my $var (@vars) {\n    my $value = '/' . $config-&gt;{$var} . '/';\n    $value =~ s|//+|/|g;\n    $config-&gt;{$var} = $value;\n}\n</code></pre>\n\n<p>For me, this is will be readable after a year too. :)</p>\n"}], "owner": {"reputation": 643, "user_id": 2300151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o7Vid.png?s=128&g=1", "display_name": "Medievalist", "link": "https://stackoverflow.com/users/2300151/medievalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43212333, "answer_count": 3, "score": 1, "last_activity_date": 1503821553, "creation_date": 1491320918, "last_edit_date": 1491324025, "question_id": 43211967, "link": "https://stackoverflow.com/questions/43211967/perl-string-catenation-and-substitution-in-a-single-line", "title": "perl string catenation and substitution in a single line?", "body": "<p>I need to modify a perl variable containing a file path; it needs to begin and end with a forward slash (/) and have all instances of multiple forward slashes reduced to a single slash.</p>\n\n<p>(This is because an existing process does not enforce a consistent configuration syntax, so there are hundreds of config files scattered everywhere that may or may not have slashes in the right places in file names and path names.)</p>\n\n<p>Something like this:</p>\n\n<pre><code>foreach ( ($config-&gt;{'backup_path'},\n           $config-&gt;{'work_path'},\n           $config-&gt;{'output_path'}\n         ) ) {\n     $_ = \"/\" . $_ . \"/\";\n     $_ =~ s/\\/{2,}/\\//g;\n}\n</code></pre>\n\n<p>but this does not look optimal or particularly readable to me; I'd rather have a more elegant expression (if it ends up using an unusual regex I'll use a comment to make it clearer.)</p>\n\n<p><strong>Input &amp; output examples</strong><br></p>\n\n<p><code>home/datamonster//c2counts</code> becomes <code>/home/datamonster/c2counts/</code></p>\n\n<p><code>home/////teledyne/tmp/</code> becomes <code>/home/teledyne/tmp/</code></p>\n\n<p>and <code>/var/backup/DOC/all_instruments/</code> will pass through unchanged </p>\n"}, {"tags": ["string", "copy-on-write", "perl"], "answers": [{"tags": [], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "is_accepted": false, "score": 5, "last_activity_date": 1491319587, "creation_date": 1491319587, "answer_id": 43211464, "question_id": 43211463, "link": "https://stackoverflow.com/questions/43211463/when-did-perl-5-get-copy-on-write-strings/43211464#43211464", "title": "When did Perl 5 get Copy-On-Write strings?", "body": "<p>It appears to have been <a href=\"http://perldoc.perl.org/5.20.0/perldelta.html#Performance-Enhancements\" rel=\"noreferrer\">Perl 5.20.0</a>:</p>\n\n<blockquote>\n  <p>Perl has a new copy-on-write mechanism that avoids the need to copy the internal string buffer when assigning from one scalar to another. This makes copying large strings appear much faster. Modifying one of the two (or more) strings after an assignment will force a copy internally. This makes it unnecessary to pass strings by reference for efficiency.</p>\n</blockquote>\n"}], "owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1491319587, "creation_date": 1491319587, "question_id": 43211463, "link": "https://stackoverflow.com/questions/43211463/when-did-perl-5-get-copy-on-write-strings", "title": "When did Perl 5 get Copy-On-Write strings?", "body": "<p>I know the Perl 5 now has COW strings, but I can't remember when they were implemented.</p>\n"}, {"tags": ["php", "perl", "rest", "oauth"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1491319799, "post_id": 43211434, "comment_id": 73494810, "body": "I doubt you can translate that literally. You&#39;d have to look at the implementation in PHP that does the OAuth to decide how to give it extra parameters, and at the client implementation you&#39;re using to learn how to add additional headers to a request. The <code>$request-&gt;to_authorization_header</code> does what it says on the box, it produces the oauth header, so you&#39;d have to find some tool that does that, or build it yourself. Stuff like this with advanced abstraction can usually not be <i>translated</i> or <i>converted</i>. It can be rewritten in a different language though."}, {"owner": {"reputation": 416, "user_id": 6597701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dmegv.jpg?s=128&g=1", "display_name": "Vilmos", "link": "https://stackoverflow.com/users/6597701/vilmos"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491484955, "post_id": 43211434, "comment_id": 73581584, "body": "Thank you for the input @simbabque. This script is accessing a REST server using OAuth 1.0 and while there is a lot out there about that version most of the links have good information but because they are so old the libraries associated with them are gone. You are probably correct saying that a will have to build my own tool to get this done."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491487385, "post_id": 43211434, "comment_id": 73583569, "body": "I&#39;m afraid I cannot say which library is the right pick for OAuth in PHP. I sincerely hope you do not have to roll your own. There will be tools for it, but of course Stack Overflow is the wrong place for Software Recommendations. A quick google gave me <a href=\"http://php.net/manual/en/book.oauth.php\" rel=\"nofollow noreferrer\">php.net/manual/en/book.oauth.php</a>, which sounds pretty much out of the box."}, {"owner": {"reputation": 416, "user_id": 6597701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dmegv.jpg?s=128&g=1", "display_name": "Vilmos", "link": "https://stackoverflow.com/users/6597701/vilmos"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491492262, "post_id": 43211434, "comment_id": 73587408, "body": "I did see the link in your last comment and do need to look into it further.  If I could I&#39;d give you an up vote for your help. But being new my reputation is not high enough. Until then I can only thank you again!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1491492461, "post_id": 43211434, "comment_id": 73587574, "body": "Don&#39;t worry about that. Voting on comments doesn&#39;t give reputation anyway, it just makes it easier to see useful comments first. Once you figure it out, feel free to self-answer the question with some appropriate PHP code. I&#39;ll edit the title to give it a visibility bump in the meantime."}, {"owner": {"reputation": 416, "user_id": 6597701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dmegv.jpg?s=128&g=1", "display_name": "Vilmos", "link": "https://stackoverflow.com/users/6597701/vilmos"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491492794, "post_id": 43211434, "comment_id": 73587829, "body": "Thanks again ... I have much to learn."}], "owner": {"reputation": 416, "user_id": 6597701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dmegv.jpg?s=128&g=1", "display_name": "Vilmos", "link": "https://stackoverflow.com/users/6597701/vilmos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491492492, "creation_date": 1491319509, "last_edit_date": 1491492492, "question_id": 43211434, "link": "https://stackoverflow.com/questions/43211434/how-do-i-do-oauth1-in-php-the-way-this-perl-code-does-it", "title": "How do I do OAuth1 in PHP the way this Perl code does it?", "body": "<p>I am trying to convert a Perl script that makes REST calls to PHP. I'm having trouble with 2 lines in the below code.</p>\n\n<pre><code>    my $url = 'https://awebsite.com/apilink';\n    my $oauthurl = $url.'?'.$xoauth.'='.$oauthmail;\n    my $client = REST::Client-&gt;new();\n    my %retval = ();\n\n    my $request = Net::OAuth-&gt;request('consumer')-&gt;new(\n        consumer_key =&gt; $oauthkey,\n        consumer_secret =&gt; $oauthsec,\n        request_url =&gt;  $url,\n        request_method =&gt; 'GET',\n        signature_method =&gt; $oauthsig,\n        timestamp =&gt; time,\n        nonce =&gt; nonce(),\n        extra_params =&gt; {\n           $xoauth =&gt; $oauthmail\n        }\n    );\n    $request-&gt;sign;\n    $client-&gt;addHeader('Content-type' =&gt; 'application/json');\n    $client-&gt;addHeader('Authorization' =&gt; $request-&gt;to_authorization_header);\n    $client-&gt;addHeader('Accept-Encoding' =&gt; 'identity');\n\n    $client-&gt;GET( $oauthurl );\n</code></pre>\n\n<p>These are the lines that are giving me trouble.</p>\n\n<pre><code>    extra_params =&gt; { $xoauth =&gt; $oauthmail }\n    $client-&gt;addHeader('Authorization' =&gt; $request-&gt;to_authorization_header);\n</code></pre>\n\n<p>I am unsure how to deal with the HASH used with the 'extra_params' or the dereference in the header creation.</p>\n"}, {"tags": ["perl", "perlscript"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491318567, "post_id": 43211045, "comment_id": 73493802, "body": "Try: <code>(my $var2 = $var1) =~ s&#47;\\.&#47;&#47;g</code> or use the <code>r</code> modifier"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1491319048, "post_id": 43211116, "comment_id": 73494212, "body": "On newish perls: <code>my $var2 = $var1 =~ s&#47;\\.&#47;&#47;gr;</code>"}], "tags": [], "owner": {"reputation": 270, "user_id": 1981087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8c68be0f2f40364dfc47225707ae6f6e?s=128&d=identicon&r=PG", "display_name": "Rob W.", "link": "https://stackoverflow.com/users/1981087/rob-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1491318703, "creation_date": 1491318703, "answer_id": 43211116, "question_id": 43211045, "link": "https://stackoverflow.com/questions/43211045/regular-expressions-on-variable-in-perl/43211116#43211116", "title": "Regular Expressions on variable in Perl", "body": "<p>Something like this should work:</p>\n\n<pre><code>(my $var2 = $var1) =~ s/\\.//g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1491319144, "creation_date": 1491319144, "answer_id": 43211302, "question_id": 43211045, "link": "https://stackoverflow.com/questions/43211045/regular-expressions-on-variable-in-perl/43211302#43211302", "title": "Regular Expressions on variable in Perl", "body": "<pre><code>my $var2 = $var1;\n$var2 =~ s/\\.//g;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>( my $var2 = $var1 ) =~ s/\\.//g;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>my $var2 = $var1 =~ s/\\.//gr;    # 5.14+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1491320370, "creation_date": 1491320370, "answer_id": 43211776, "question_id": 43211045, "link": "https://stackoverflow.com/questions/43211045/regular-expressions-on-variable-in-perl/43211776#43211776", "title": "Regular Expressions on variable in Perl", "body": "<p>You already got universal answers using <code>s///</code>.</p>\n\n<p>For this specific task, <em>removing <code>.</code> from a string</em> , you can also use the <code>y</code> (alias <code>tr</code>).</p>\n\n<pre><code>( my $var2 = $var1 ) =~ y/.//d;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $var2 = $var1 =~ y/.//dr; #the /r needs 5.14+\n</code></pre>\n\n<p>More info: <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">perlop - Quote-Like Operators</a></p>\n"}], "owner": {"reputation": 129, "user_id": 5204037, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-A_LP91h7YUk/AAAAAAAAAAI/AAAAAAAAAL4/Rp7C-533Lt0/photo.jpg?sz=128", "display_name": "Sriram P", "link": "https://stackoverflow.com/users/5204037/sriram-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1491320370, "creation_date": 1491318508, "last_edit_date": 1491319129, "question_id": 43211045, "link": "https://stackoverflow.com/questions/43211045/regular-expressions-on-variable-in-perl", "title": "Regular Expressions on variable in Perl", "body": "<p>I have value <code>E.1.1.1</code> in a variable, I want <code>E111</code> stored in different variable.</p>\n\n<pre><code>$var1 = \"E.1.1.1\";\n$var1 =~ s/\\.//g;\n</code></pre>\n\n<p>The above code changes the value in <code>$var1</code> variable. I want to try as below.</p>\n\n<pre><code>$var2 = s/\\.//g $var1;\n</code></pre>\n\n<p>Suggest how to do. I am new to Perl.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491314781, "post_id": 43208225, "comment_id": 73490608, "body": "You may as well just read the whole file into the hash. <code>my %extracted = map { chomp; split &#47;\\s*:\\s*&#47; } &lt;&gt;</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1491311430, "creation_date": 1491311430, "answer_id": 43208225, "question_id": 43207914, "link": "https://stackoverflow.com/questions/43207914/split-separate-lines-to-create-filename/43208225#43208225", "title": "Split separate lines to create filename", "body": "<p>You can use a regex to match the key, with grouping to extract the value:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %extracted;\nwhile (&lt;&gt;) {\n    if (my ($key, $value) = /^(Serial #|Part Number)\\s*:\\s*(.*)/) {\n        $extracted{$key} = $value;\n    }\n}\n\nrename $ARGV,\n    $extracted{'Part Number'} . '-' . $extracted{'Serial #'} . '.RPT'\n    or die $!;\n</code></pre>\n\n<p>If you want to process several files at once, you can use <a href=\"http://p3rl.org/eof\" rel=\"nofollow noreferrer\">eof</a> to detect the end of each file:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %extracted;\nwhile (&lt;&gt;) {\n    if (my ($key, $value) = /^(Serial #|Part Number)\\s*:\\s*(.*)/) {\n        $extracted{$key} = $value;\n    }\n    if (eof) {\n        rename $ARGV,\n            $extracted{'Part Number'} . '-' . $extracted{'Serial #'} . '.RPT'\n            or die $!;\n        undef %extracted;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7814300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c800014d239e4f91146e147dacf82ac8?s=128&d=identicon&r=PG&f=1", "display_name": "mshimazu2002", "link": "https://stackoverflow.com/users/7814300/mshimazu2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491316086, "creation_date": 1491310579, "last_edit_date": 1491316086, "question_id": 43207914, "link": "https://stackoverflow.com/questions/43207914/split-separate-lines-to-create-filename", "title": "Split separate lines to create filename", "body": "<p>I am very new to Perl and have a piece of code I am trying to modify. It opens a txt file and look for a serial number and renames that file with the serial number value. I am trying to also grab the part information and prepend that to the serial number. </p>\n\n<p>The files looks something like this: </p>\n\n<pre><code>999511.RPT\nC:\\users\\name\\test\nProgram Name      : Automation123\nPart Number       : A123987_2\nBoard #           : 1\nSerial #          : 999511\nMachine #         : AX-976\nOperator #        : 98512\n</code></pre>\n\n<p>Now from that, I want to go through the file and pull the Part Number and the Serial # and rename the file. </p>\n\n<p>So I would loop through the open file, grab those two values using a <code>split</code>, and the file would be renamed from <code>999511.RPT</code> to <code>A123987_2-999511.RPT</code> (I also need to add the <code>-</code> between those two values). </p>\n\n<p>Right now we are doing a Line_Count since this RPT is always the same but I think there must be an easier way to search and extract these two values. Any help is much appreciated. Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491309209, "post_id": 43207267, "comment_id": 73486124, "body": "<code>perl -E &#39;my  $p = sub {print @_}; $p-&gt;(&quot;Hello\\n&quot;)&#39;</code>"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1491309223, "post_id": 43207267, "comment_id": 73486139, "body": "Passing around, modifying and calling."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1491309226, "post_id": 43207267, "comment_id": 73486144, "body": "You can&#39;t take the reference of <code>print</code> (see <a href=\"http://perldoc.perl.org/CORE.html\" rel=\"nofollow noreferrer\">perldoc CORE</a>). And feel free to look at <a href=\"http://stackoverflow.com/q/1585560/4990392\">this</a> related question."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491314860, "post_id": 43207441, "comment_id": 73490680, "body": "Re &quot;<i>lists print as not available</i>&quot;, One can only obtain a reference to operators that can be replicated by subroutines, so you can&#39;t get a reference to the <code>print</code> operator (because of its optional  leading block/glob) any more than you can get a reference to the addition operator (because it&#39;s an infix operator)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2410502"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491318591, "post_id": 43207441, "comment_id": 73493814, "body": "Which also works in Perl 6 as-is: <code>my &amp;add = &amp;infix:&lt;+&gt;; say add 2, 5&#39;; # OUTPUT: 7</code> \ud83d\ude04"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491319318, "post_id": 43207441, "comment_id": 73494436, "body": "Not sure what you are trying to accomplish with that, but it&#39;s likely to cause confusion. At least, the bit in your answer is."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2410502"}, "is_accepted": true, "score": 5, "last_activity_date": 1491309902, "last_edit_date": 1491309902, "creation_date": 1491309381, "answer_id": 43207441, "question_id": 43207267, "link": "https://stackoverflow.com/questions/43207267/how-to-reference-print-in-perl/43207441#43207441", "title": "How to reference print in Perl?", "body": "<p>It'd be <code>\\&amp;CORE::print</code>, but <a href=\"http://perldoc.perl.org/CORE.html#DESCRIPTION\" rel=\"nofollow noreferrer\"><code>perldoc CORE</code> lists <code>print</code> as not available</a>.</p>\n\n<p>You can just wrap an anon sub around it and forward the args though:</p>\n\n<pre><code>my $p = sub { print @_ };\n$p-&gt;(\"hi\");\n</code></pre>\n\n<p>Also, the original method sans the backslash works fine in <a href=\"https://perl6.org/\" rel=\"nofollow noreferrer\">Perl 6</a>:</p>\n\n<pre><code>my $p = &amp;print; $p(\"hi\")\n</code></pre>\n"}], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 43207441, "answer_count": 1, "score": 3, "last_activity_date": 1491309902, "creation_date": 1491308911, "question_id": 43207267, "link": "https://stackoverflow.com/questions/43207267/how-to-reference-print-in-perl", "title": "How to reference print in Perl?", "body": "<p>How to reference <code>print</code>?</p>\n\n<p>I tried:</p>\n\n<pre><code>my $p = \\&amp;print;\n</code></pre>\n\n<p>But it throws:</p>\n\n<blockquote>\n  <p>Undefined subroutine <code>&amp;main::print</code></p>\n</blockquote>\n"}, {"tags": ["perl", "bioinformatics"], "answers": [{"tags": [], "owner": {"reputation": 3060, "user_id": 1515117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/317094104136ef2e6487bf5a61fb8217?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1515117/vince"}, "is_accepted": false, "score": 1, "last_activity_date": 1491318641, "creation_date": 1491318641, "answer_id": 43211100, "question_id": 43207223, "link": "https://stackoverflow.com/questions/43207223/retrieve-url-in-perl-get-method-because-of-its-over-length-in-a-bioinformatics-s/43211100#43211100", "title": "Retrieve URL in perl get method because of its over length in a bioinformatics server", "body": "<p>URL length is dictated by both client and server. See:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers\">What is the maximum length of a URL in different browsers?</a></p>\n\n<p>It would appear that you may not be able to submit such as long sequence of chars via <code>get()</code> as the limit may be server-side. You likely need to use <code>POST</code>, which is described here:</p>\n\n<p><a href=\"http://lwp.interglacial.com/ch05_07.htm\" rel=\"nofollow noreferrer\">http://lwp.interglacial.com/ch05_07.htm</a></p>\n\n<p>Specifically: </p>\n\n<blockquote>\n  <p>But the file-upload part involves some doing. First off, you have to\n  add a header line of 'Content_Type' => 'form-data' to mean that yes,\n  you really mean this to be a \"multipart/form-data\" POSTing. And\n  secondly, where you would have a string in 'saywhat'=>text, you\n  instead have an array reference where the first array item is the path\n  to the file you want to upload. So it ends up looking like this:</p>\n</blockquote>\n\n<pre><code>my $response = $browser-&gt;post(\n  'http://pastel.int/feedback.pl',\n  [ 'subject' =&gt; 'Demand for pie.',\n    'saywhat' =&gt; [\"./today/earth_pies1.dml\"],\n    'user'    =&gt; 'Adm. Kang',\n  ],\n  'Content_Type' =&gt; 'form-data',\n  ...any other header lines...\n);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6639443, "user_type": "registered", "profile_image": "https://graph.facebook.com/1017665084996624/picture?type=large", "display_name": "Saravana Kumar", "link": "https://stackoverflow.com/users/6639443/saravana-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1491318641, "creation_date": 1491308791, "question_id": 43207223, "link": "https://stackoverflow.com/questions/43207223/retrieve-url-in-perl-get-method-because-of-its-over-length-in-a-bioinformatics-s", "title": "Retrieve URL in perl get method because of its over length in a bioinformatics server", "body": "<p>I used perl program to make a bioinformatics server which takes only one sequence for finding motifs at a time, to take my sequences ($seq) simultaneously from a text file (example.txt) containing more than 6000 sequences with more than 10000bp. The problem is when my sequence exceeds 1408bp, I get the error that URL cannot be retrieved because of such a length. please help me to resolve this problem in perl..</p>\n\n<pre><code>#!usr/bin/perl\nuse LWP::Simple;\nmy $file = 'example.txt';\nopen my $fh, '&lt;', $file or die;\n$/ = undef;\n$all=&lt;$fh&gt;;\n@other=split(\"&gt;\",$all);\n\nfor($i=1;$i&lt;=$#other;$i++)\n{\n  my ($first,@other)=split(\"\\n\",$other[$i]);\n $seq=join(\"\\n\",@other);\n$len=length($seq);\n\nmy $link = \"http://regrna2.mbc.nctu.edu.tw/detection_output.php?S1=%3E%0D%0A$seq&amp;tfbs=ON&amp;tfbs_species=rice%2C+Oryza+sativa&amp;RadioGroup1=matrix&amp;matchscore=1&amp;rho=ON&amp;SplicingSite=ON&amp;GeneSplicer_species=Rice&amp;SplicingMotif_species=Homo+sapiens&amp;Polya=ON&amp;RBSfinder=ON&amp;UTRsite=ON&amp;AUrich=ON&amp;RNAediting=ON&amp;RiboSW=ON&amp;ERPIN=ON&amp;Rfam=ON&amp;LongStem=ON&amp;LongStem_len=40&amp;fRNAdb=ON&amp;fRNAdb_similarity=0.9&amp;fRNAdb_match_len=30&amp;miRNA=ON&amp;miRNA_species=Oryza+sativa&amp;score=170&amp;miRNA_FE=-25&amp;ncRNA=ON&amp;ncRNA_species=Oryza_sativa&amp;ncRNA_length=20&amp;ncRNA_FE=-20&amp;S2=&amp;GCratio=ON&amp;GCratio_window_size=100&amp;accessibility=ON&amp;accessibility_window_size=100&amp;unpair_size=6&amp;StartCodon=1&amp;draw_dotline=ON&amp;position_line_interval_len=100&amp;Size=950&amp;B1=Submit\";\n\n$link =~m/.\\/Results\\/(\\d+)\\.all\\.result/;\n\n\nmy $second = get(\"http://regrna2.mbc.nctu.edu.tw/Results/$1.all.result\") or die \"cannot retrieve code\\n\";\n\n\nmy $filename = \"$first.txt\";\nopen(my $fhh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fhh \"$second\";\nclose $fhh;\n\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "reference"], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 2, "last_activity_date": 1491303407, "creation_date": 1491303407, "answer_id": 43205246, "question_id": 43205089, "link": "https://stackoverflow.com/questions/43205089/cant-use-string-1-as-a-hash-ref-embedded-hash-issue/43205246#43205246", "title": "Can&#39;t use string (&quot;1&quot;) as a HASH ref, embedded hash issue", "body": "<p>You set the <code>$ini{'bf'}{\"${p}attrs\"}{$v}</code> to 1 and then later on (line 23) try to use the same as a hash.</p>\n\n<pre><code>my @keys = keys %{$ini{'bf'}};\nforeach (@keys) {\n    my $v = $ini{'bf'}{$_};\n    if (my ($p, $d) = $_ =~ /(top|sub)attr(\\d+)$/) {\n        $ini{'bf'}{\"${p}attrs\"}{$v} = 1;       #### &lt;==== HERE\n        delete $ini{'bf'}{$_};\n\n        if (my ($alt) = grep( /${p}attr${d}_alt\\d+/, @keys ) ) {\n            my ($altd) = $alt =~ /(\\d+)$/;\n            $ini{'bf'}{\"${p}attrs\"}{$v}{'alts'}[$altd] = $ini{'bf'}{$alt}; # line 23\n        }\n    }\n}\nprint Dumper(\\%ini);\n</code></pre>\n\n<p>Change the marked line to</p>\n\n<pre><code>$ini{'bf'}{\"${p}attrs\"}{$v} = {} ;\n</code></pre>\n\n<p>or simply remove the line because perl will create needed hashref due to autovivification.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 43205246, "answer_count": 1, "score": 0, "last_activity_date": 1491303407, "creation_date": 1491302995, "question_id": 43205089, "link": "https://stackoverflow.com/questions/43205089/cant-use-string-1-as-a-hash-ref-embedded-hash-issue", "title": "Can&#39;t use string (&quot;1&quot;) as a HASH ref, embedded hash issue", "body": "<p>Many similar questions have been asked, but mine is quite specific and none of the answers seem to work.</p>\n\n<p>The script below is run in a loop (over <code>@keys</code>). I want to check if some pattern is available as a value (second <code>if</code>). If it is, get the ending number out of it. Then, I want to add a value on the index of that number in an array that does not necessarily exist yet. The example input/output below might clarify things.</p>\n\n<p>The reference might be a bit complicated, but it is the idea that <code>%ini</code> is a hash, <code>bf</code> in there is a hash, and another one in there e.g. <code>topattrs</code>. Finally, in the next element <code>$v</code> I want to create an array <code>alts</code> if it doesn't exist yet. It has to be an array and not a hash because the order of this array matters! Then, I want to add the value of <code>$alt</code> on that index position.</p>\n\n<pre><code>my @keys = keys %{$ini{'bf'}};\nforeach (@keys) {\n    my $v = $ini{'bf'}{$_};\n    if (my ($p, $d) = $_ =~ /(top|sub)attr(\\d+)$/) {\n        $ini{'bf'}{\"${p}attrs\"}{$v} = 1;\n        delete $ini{'bf'}{$_};\n\n        if (my ($alt) = grep( /${p}attr${d}_alt\\d+/, @keys ) ) {\n            my ($altd) = $alt =~ /(\\d+)$/;\n            $ini{'bf'}{\"${p}attrs\"}{$v}{'alts'}[$altd] = $ini{'bf'}{$alt}; # line 23\n        }\n    }\n}\nprint Dumper(\\%ini);\n</code></pre>\n\n<p>However, Perl throws me an error:</p>\n\n<blockquote>\n  <p>Can't use string (\"1\") as a HASH ref while \"strict refs\" in use at line 23.</p>\n</blockquote>\n\n<p>So I guess Perl is interpreting <code>alts</code> as a hash, even though I want to use it as an array so I must be doing something wrong when referencing. Maybe the fact that the array doesn't exist beforehand has to do with it as well?</p>\n\n<p>Example input:</p>\n\n<pre><code>$VAR1 = {\n  'bf' =&gt; {\n    'subattr2_alt2' =&gt; 'pos',\n    'subattr2_alt1' =&gt; 'pt',\n    'topattr1' =&gt; 'cat',\n    'subattr1' =&gt; 'rel',\n    'subattr2' =&gt; 'cat'\n  }\n};\n</code></pre>\n\n<p>Output wanted:</p>\n\n<pre><code>$VAR1 = {\n  'bf' =&gt; {\n    'topattrs' =&gt; {\n      'cat' =&gt; 1\n    },\n    'subattrs' =&gt; {\n      'cat' =&gt; ['pt', 'pos'],\n      'rel' =&gt; 1\n    }\n  }\n</code></pre>\n"}, {"tags": ["arrays", "perl", "www-mechanize", "www-mechanize-firefox"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491301206, "post_id": 43204169, "comment_id": 73480417, "body": "That removes the whitespace before sent however anything after sent still has the whitespace"}], "tags": [], "owner": {"reputation": 26, "user_id": 7813417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3WzsgwJ9-bM/AAAAAAAAAAI/AAAAAAAAD7s/aIEkKDuCf88/photo.jpg?sz=128", "display_name": "neelkanth raju", "link": "https://stackoverflow.com/users/7813417/neelkanth-raju"}, "is_accepted": true, "score": 0, "last_activity_date": 1491301341, "last_edit_date": 1491301341, "creation_date": 1491300433, "answer_id": 43204169, "question_id": 43203885, "link": "https://stackoverflow.com/questions/43203885/how-do-you-remove-indentation-from-a-single-element-in-an-array-perl/43204169#43204169", "title": "How do you remove indentation from a single element in an array - perl?", "body": "<p>The following lines can be used to truncate all whitespaces from a multiline string. I would rather sugest putting these lines in to function.</p>\n\n<pre><code>@para_text[2] =~ s/[\\r\\n]//gm; # convert multiline to single line\n@para_text[2] =~ s/\\s*$//;   # remove trailing whitespaces\n@para_text[2] =~ s/^\\s*//;   # remove preceding whitespaces\n@para_text[2] =~ s/\\s+/ /;   # merge tabs\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43204169, "answer_count": 1, "score": -1, "last_activity_date": 1491301341, "creation_date": 1491299707, "question_id": 43203885, "link": "https://stackoverflow.com/questions/43203885/how-do-you-remove-indentation-from-a-single-element-in-an-array-perl", "title": "How do you remove indentation from a single element in an array - perl?", "body": "<pre><code>@para_text[2] = $mech-&gt;xpath('/html/body/form/table/tbody/tr[2]/td[3]/table/tbody/tr[2]/td/table/tbody/tr[1]/td/table/tbody/tr[4]', type =&gt; $mech-&gt;xpathResult('STRING_TYPE'));\n</code></pre>\n\n<p>I have the above code which returns the following in this format:</p>\n\n<pre><code>                                    Sent:\n\n\n                                    30 March 2017 11:59 \n</code></pre>\n\n<p>I need it to be in this format:</p>\n\n<p>Sent: 30 March 2017 11:59 </p>\n\n<p>They are indents and not just spaces, i have tried grep, trim and various substitution methods suggested in other forums and threads to no luck.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 1, "creation_date": 1491313710, "post_id": 43203477, "comment_id": 73489807, "body": "<a href=\"https://groups.google.com/forum/#!topic/perl.perl5.porters/-znN8wINCUI\" rel=\"nofollow noreferrer\">This</a> might be of interest, although it refers to HPUX, not Linux builds."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1492416013, "post_id": 43423168, "comment_id": 73950827, "body": "Thanks, this worked fine. I used the following command: <code>perlbrew install perl-5.24.1 --as perl-5.24.1-PIC -Accflags=-fPIC</code> to keep a separate installation for testing purposes.."}], "tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": true, "score": 4, "last_activity_date": 1492239264, "creation_date": 1492239264, "answer_id": 43423168, "question_id": 43203477, "link": "https://stackoverflow.com/questions/43203477/how-to-recompile-libperl-a-object-files-with-fpic-flag/43423168#43423168", "title": "How to recompile libperl.a object files with -fPIC flag?", "body": "<blockquote>\n  <p>How can I recompile the object files in libperl.a with -fPIC</p>\n</blockquote>\n\n<p>By recompiling libperl.a with the -fPIC flag.</p>\n\n<pre><code>./Configure -des -Accflags=-fPIC ...\n</code></pre>\n\n<blockquote>\n  <p>Could this recompilation cause other problems not related to QtCore4 (since it is likely that libperl.a will be used (linked with) by other applications/programs not related to QtCore4)?</p>\n</blockquote>\n\n<p>Yes. Prefer a shared libperl. <strong>-Duseshrplib</strong></p>\n\n<p>Which is required when embedding perl into shared libs. You can do away with the -fPIC trick which is required on ELF, but a shared libperl makes it much easier.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 43423168, "answer_count": 1, "score": 5, "last_activity_date": 1492239264, "creation_date": 1491298617, "last_edit_date": 1495540946, "question_id": 43203477, "link": "https://stackoverflow.com/questions/43203477/how-to-recompile-libperl-a-object-files-with-fpic-flag", "title": "How to recompile libperl.a object files with -fPIC flag?", "body": "<p>This question arose when trying to fix some <a href=\"https://stackoverflow.com/q/43191675/2173773\">installation problems</a>\n with <a href=\"https://metacpan.org/pod/QtCore4\" rel=\"nofollow noreferrer\"><code>QtCore4</code></a>. At some point <code>make</code> tried to run the following command:</p>\n\n<pre><code>/usr/bin/c++  -fPIC -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong \\\n -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O3 -DNDEBUG  \\\n -shared -Wl,-soname,QtCore4.so -o ../../blib/arch/auto/QtCore4/QtCore4.so \\\n CMakeFiles/perlqtcore4.dir/binding.cpp.o \\\n CMakeFiles/perlqtcore4.dir/handlers.cpp.o \\\n CMakeFiles/perlqtcore4.dir/marshall_types.cpp.o \\\n CMakeFiles/perlqtcore4.dir/util.cpp.o \\\n CMakeFiles/perlqtcore4.dir/QtCore4.c.o \\\n -lQtCore -lQtGui -lQtNetwork \\\n /home/hakon/perlbrew/perls/perl-5.24.1/lib/5.24.1/x86_64-linux/CORE/libperl.a \\\n ../../smokeqt/qtgui/libsmokeqtgui.so.3.0.0 \\\n ../../smokeqt/qtnetwork/libsmokeqtnetwork.so.3.0.0 \\\n -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc -lQtGui -lQtNetwork \\\n ../../smokeqt/qtcore/libsmokeqtcore.so.3.0.0 -lQtCore \\\n ../../smokegen/bin/libsmokebase.so.3.0.0 \\\n -Wl,-rpath,/home/hakon/Qt4-0.99.0/smokeqt/qtgui:/home/hakon/Qt4-0.99.0/smokeqt/qtnetwork:/home/hakon/Qt4-0.99.0/smokeqt/qtcore:/home/hakon/Qt4-0.99.0/smokegen/bin: \n</code></pre>\n\n<p>which failed with the following error message from the linker:</p>\n\n<pre><code>/usr/bin/ld: /home/hakon/perlbrew/perls/perl-5.24.1/lib/5.24.1/x86_64-linux/CORE/libperl.a(toke.o): \n  relocation R_X86_64_PC32 against symbol `PL_curcop' can not be used when making\n  a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Bad value\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>From the error message, it seems to me that the object files (here: <code>toke.o</code>) in\n<code>libperl.a</code> was compiled without the <code>-fPIC</code> flag set. </p>\n\n<p>The questions I have now are: </p>\n\n<ul>\n<li>How can I recompile the object files in <code>libperl.a</code> with <code>-fPIC</code> ?</li>\n<li>Could this recompilation cause other problems not related to\n<code>QtCore4</code> (since it is likely that <code>libperl.a</code> will be used (linked\nwith) by other applications/programs not related to <code>QtCore4</code>)?</li>\n</ul>\n\n<p>I am using Ubuntu 16.10 and perl version 5.24.1.</p>\n"}, {"tags": ["regex", "apache", "perl", "mod-rewrite"], "comments": [{"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "edited": false, "score": 0, "creation_date": 1491295447, "post_id": 43202193, "comment_id": 73476369, "body": "What if you try: <code>RewriteCond %{HTTP_COOKIE} %3C(.*?)%3E</code> and <code>RewriteRule ^.*$ - [E=FetchedValue:%1]</code>?"}, {"owner": {"reputation": 275, "user_id": 1844133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c13faf5d793b7d30b2f2e12ff2751de7?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Agarwal", "link": "https://stackoverflow.com/users/1844133/manoj-agarwal"}, "reply_to_user": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "edited": false, "score": 0, "creation_date": 1491295727, "post_id": 43202193, "comment_id": 73476561, "body": "No, it gives 9ba91570d204095439e82b74ab4d74b0, but I need &#39;ma&#39; sub-string."}, {"owner": {"reputation": 817, "user_id": 4612127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77e5b33fd361733419766d29957eb203?s=128&d=identicon&r=PG&f=1", "display_name": "kaldoran", "link": "https://stackoverflow.com/users/4612127/kaldoran"}, "edited": false, "score": 0, "creation_date": 1491295864, "post_id": 43202193, "comment_id": 73476642, "body": "What about <code>RewriteCond %{HTTP_COOKIE} (ma|am)%3C(.*?)%3E</code> and <code>RewriteRule ^.*$ - [E=FetchedValue:%2]</code>"}, {"owner": {"reputation": 275, "user_id": 1844133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c13faf5d793b7d30b2f2e12ff2751de7?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Agarwal", "link": "https://stackoverflow.com/users/1844133/manoj-agarwal"}, "edited": false, "score": 0, "creation_date": 1491296143, "post_id": 43202193, "comment_id": 73476811, "body": "No, this type of regex will not work, since (ma|am) is unknown.  It might by any other string also. I need to match any string within &#39;%3C&#39; and &#39;%3E&#39;, and that too at its second occurrence."}, {"owner": {"reputation": 4128, "user_id": 4607733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc604aa16e5409668cc4fd1f2f0c01e2?s=128&d=identicon&r=PG&f=1", "display_name": "horcrux", "link": "https://stackoverflow.com/users/4607733/horcrux"}, "edited": false, "score": 1, "creation_date": 1491296254, "post_id": 43202193, "comment_id": 73476892, "body": "<code>RewriteCond %{HTTP_COOKIE} %3C.*?%3E%3C(.*?)%3E</code> and <code>RewriteRule ^.*$ - [E=FetchedValue:%1]</code>"}, {"owner": {"reputation": 275, "user_id": 1844133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c13faf5d793b7d30b2f2e12ff2751de7?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Agarwal", "link": "https://stackoverflow.com/users/1844133/manoj-agarwal"}, "edited": false, "score": 0, "creation_date": 1491297152, "post_id": 43202193, "comment_id": 73477519, "body": "yes, the regex from &#39;horcrux&#39; works fine. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 2988805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a89054f186af398bb82ffa4a1c0a478?s=128&d=identicon&r=PG&f=1", "display_name": "Cama", "link": "https://stackoverflow.com/users/2988805/cama"}, "is_accepted": true, "score": 2, "last_activity_date": 1491296569, "creation_date": 1491296569, "answer_id": 43202676, "question_id": 43202193, "link": "https://stackoverflow.com/questions/43202193/perl-regex-to-find-a-string-that-is-not-matched/43202676#43202676", "title": "Perl regex to find a string that is not matched", "body": "<p>If you are really sure that it will always be the second string between %3C and %3E there is multiple possibility like:</p>\n\n<p><code>RewriteEngine on\nRewriteCond %{HTTP_COOKIE} %3C.*?%3E.*?%3C(.*?)%3E\nRewriteRule ^.*$ - [E=FetchedValue:%1]</code></p>\n"}, {"tags": [], "owner": {"reputation": 6398, "user_id": 187808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113b0b46b3de42ce4dee28c6006a85c5?s=128&d=identicon&r=PG", "display_name": "Tamas Rev", "link": "https://stackoverflow.com/users/187808/tamas-rev"}, "is_accepted": false, "score": 1, "last_activity_date": 1491296575, "creation_date": 1491296575, "answer_id": 43202679, "question_id": 43202193, "link": "https://stackoverflow.com/questions/43202193/perl-regex-to-find-a-string-that-is-not-matched/43202679#43202679", "title": "Perl regex to find a string that is not matched", "body": "<p>I think your regex is fine. On the other hand, you have an input / specification problem. Consider the following <code>grep</code> command, based on your regex:</p>\n\n<pre><code>echo '%3C9ba91570d204095439e82b74ab4d74b0%3E%3Cma%3E%3C5975%3E' | grep -Po '%3C.*?%3E'\n</code></pre>\n\n<ul>\n<li><code>grep -P</code> enables perl syntax. I skipped the trailing <code>.*</code> parts, otherwise it's the same regex as yours.</li>\n<li><code>grep -o</code> will keep the matches only</li>\n</ul>\n\n<p>So, we got three matches, the second one is what you want:</p>\n\n<pre><code>$ echo '%3C9ba91570d204095439e82b74ab4d74b0%3E%3Cma%3E%3C5975%3E' | grep -Po '%3C.*?%3E'\n%3C9ba91570d204095439e82b74ab4d74b0%3E\n%3Cma%3E\n%3C5975%3E\n</code></pre>\n\n<p>So, this raises two questions:</p>\n\n<ol>\n<li>Is this a valid cookie value</li>\n<li>How do you want to differentiate between the <code>ma</code> match and the other two?</li>\n</ol>\n"}], "owner": {"reputation": 275, "user_id": 1844133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c13faf5d793b7d30b2f2e12ff2751de7?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Agarwal", "link": "https://stackoverflow.com/users/1844133/manoj-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 43202676, "answer_count": 2, "score": 1, "last_activity_date": 1491296575, "creation_date": 1491295153, "last_edit_date": 1491295232, "question_id": 43202193, "link": "https://stackoverflow.com/questions/43202193/perl-regex-to-find-a-string-that-is-not-matched", "title": "Perl regex to find a string that is not matched", "body": "<p>I need to find a string that doesn't match a given regex in perl.  For example: If the string is:</p>\n\n<pre><code>%3C9ba91570d204095439e82b74ab4d74b0%3E%3Cma%3E%3C5975%3E\n</code></pre>\n\n<p>I need to fetch 'ma', that is a string within '%3C' and '%3E' sub-strings. So any string within these two sub-strings should be matched.  I mean, if 'ma' is not there, it may be any other string ('am') like in this example:</p>\n\n<pre><code> %3C9ba91570d204095439e82b74ab4d74b0%3E%3Cam%3E%3C5975%3E\n</code></pre>\n\n<p>It is to be used in RewriteRule in apache so that this fetched value is stored in an environment variable.</p>\n\n<p>I tried this, but it doesn't give what I desire:</p>\n\n<pre><code>RewriteEngine on\nRewriteCond %{HTTP_COOKIE} (%3C.*?%3E%3C.*?)(.*)\nRewriteRule ^.*$ - [E=FetchedValue:%2]\n</code></pre>\n\n<p>Any help to solve this will be great...!</p>\n"}, {"tags": ["excel", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1491296355, "post_id": 43201509, "comment_id": 73476963, "body": "Did you look at the formatting that your example file has? It looks like you&#39;re doing the right thing, but maybe you can learn something from the original file. Also might help to use Spreadsheet::XLSX to take a look at what that thinks the format is like in your file."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491299099, "post_id": 43201509, "comment_id": 73479028, "body": "why do you removed the screenshot?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7773733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b370c31cb262b2b15835fbcda16d7e4?s=128&d=identicon&r=PG&f=1", "display_name": "Shan Mugam", "link": "https://stackoverflow.com/users/7773733/shan-mugam"}, "edited": false, "score": 0, "creation_date": 1491300835, "post_id": 43203018, "comment_id": 73480159, "body": "Thank you so much! It worked as per our requirement."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 2, "last_activity_date": 1491297461, "creation_date": 1491297461, "answer_id": 43203018, "question_id": 43201509, "link": "https://stackoverflow.com/questions/43201509/how-to-display-the-excel-cell-value-as-1-1-1901-in-formula-bar-and-display-the/43203018#43203018", "title": "How to display the excel cell value as &quot;1/1/1901&quot; in formula bar and display the same as &quot;1901-01-01&quot; in the corresponding cell using perl", "body": "<p>From the docs:</p>\n\n<blockquote>\n  <p>The most direct way is to convert your dates to the ISO8601\n  <strong>yyyy-mm-ddThh:mm:ss.sss</strong> date format and use the write_date_time()\n  worksheet method:</p>\n</blockquote>\n\n<p>The demo:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Excel::Writer::XLSX;\n\nmy $wb = Excel::Writer::XLSX-&gt;new( 'perl.xlsx' );\nmy $ws = $wb-&gt;add_worksheet();\n\n$ws-&gt;set_column('A:B', 25);\n\nmy $date_format = $wb-&gt;add_format(num_format =&gt; 'yyyy-mm-dd');\n\nmy($d,$m,$y) = (20,1,1901);\n\n#your current\nmy $current = sprintf \"%02d/%02d/%04d\", $d,$m,$y;\n$ws-&gt;write('A1', 'using: %02d/%02d/%04d');\n$ws-&gt;write_date_time( 'B1', $current, $date_format );\n\n#you want\nmy $wanted = sprintf \"%04d-%02d-%02dT\", $y,$m,$d;\n$ws-&gt;write('A2', 'using: %04d-%02d-%02dT');\n$ws-&gt;write_date_time( 'B2', $wanted, $date_format );\n</code></pre>\n\n<p>produces in excel</p>\n\n<p><a href=\"https://i.stack.imgur.com/DduaO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DduaO.png\" alt=\"excel screenshot\"></a></p>\n"}], "owner": {"reputation": 75, "user_id": 7773733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b370c31cb262b2b15835fbcda16d7e4?s=128&d=identicon&r=PG&f=1", "display_name": "Shan Mugam", "link": "https://stackoverflow.com/users/7773733/shan-mugam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 43203018, "answer_count": 1, "score": 2, "last_activity_date": 1491298782, "creation_date": 1491292853, "last_edit_date": 1491298782, "question_id": 43201509, "link": "https://stackoverflow.com/questions/43201509/how-to-display-the-excel-cell-value-as-1-1-1901-in-formula-bar-and-display-the", "title": "How to display the excel cell value as &quot;1/1/1901&quot; in formula bar and display the same as &quot;1901-01-01&quot; in the corresponding cell using perl", "body": "<p>We have a requirement to generate the excel file and the cell value should be shown as mm/dd/yyyy format (1/1/1901) in Formula bar and display the same as yyyy-mm-dd format (1901-01-01) in the corresponding cell. Can some one please help how this can be achieved using Perl, Please refer the below screen shot which will show how we need. </p>\n\n<p>We are using the module Excel::Writer::XLSX and we have tried the below code, but it is showing the same format in both formula bar and cell.</p>\n\n<pre><code>        if ($cell =~ qr[^(\\d{4})/(\\d{1,2})/(\\d{1,2})$])\n        {\n        my $format1 = $workbook-&gt;add_format(num_format =&gt; 'yyyy-mm-dd');\n        my $date = sprintf \"%02d/%02d/%04d\", $2, $3, $1;\n        $worksheet-&gt;write_date_time( $iR, $iC, ${date}, $format1);\n        }\n</code></pre>\n\n<p>Screen shot</p>\n"}, {"tags": ["bash", "perl", "shell", "scripting", "scripting-language"], "comments": [{"owner": {"reputation": 144, "user_id": 7772011, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a52faf3d1c0acf8c5d0334719f16834?s=128&d=identicon&r=PG&f=1", "display_name": "John Is No", "link": "https://stackoverflow.com/users/7772011/john-is-no"}, "edited": false, "score": 2, "creation_date": 1491279996, "post_id": 43198198, "comment_id": 73468484, "body": "I don&#39;t get this. What are you exactly trying to do? Please elaborate more."}, {"owner": {"reputation": 11, "user_id": 7790571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5354c409bf20a5c96b9ccf22787c1d?s=128&d=identicon&r=PG&f=1", "display_name": "JLinFanatic", "link": "https://stackoverflow.com/users/7790571/jlinfanatic"}, "reply_to_user": {"reputation": 144, "user_id": 7772011, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a52faf3d1c0acf8c5d0334719f16834?s=128&d=identicon&r=PG&f=1", "display_name": "John Is No", "link": "https://stackoverflow.com/users/7772011/john-is-no"}, "edited": false, "score": 0, "creation_date": 1491280619, "post_id": 43198198, "comment_id": 73468675, "body": "I need to remove the lines that begin with &lt;PATTERN&gt; and end with &lt;PATTERN&gt;. A explanation would be helpful"}], "answers": [{"tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 3, "last_activity_date": 1491281276, "last_edit_date": 1491281276, "creation_date": 1491280874, "answer_id": 43198412, "question_id": 43198198, "link": "https://stackoverflow.com/questions/43198198/how-do-i-remove-the-content-between-two-patterns-on-multiple-lines-using-sed/43198412#43198412", "title": "How do i remove the content between two patterns on multiple lines using sed?", "body": "<pre><code>grep -Pv '^&lt;PATTERN&gt;.*&lt;PATTERN&gt;$' input\nhai people&lt;PATTERN&gt;  we had\n\nwriting scri pts\nWe will&lt;PATTERN&gt;\nhave more\nHurray!\n</code></pre>\n\n<p>using <code>sed</code> ,although its an overkill:</p>\n\n<pre><code>sed  '/^&lt;PATTERN&gt;.*&lt;PATTERN&gt;$/d' input\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7790571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5354c409bf20a5c96b9ccf22787c1d?s=128&d=identicon&r=PG&f=1", "display_name": "JLinFanatic", "link": "https://stackoverflow.com/users/7790571/jlinfanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491313771, "creation_date": 1491279750, "last_edit_date": 1491313771, "question_id": 43198198, "link": "https://stackoverflow.com/questions/43198198/how-do-i-remove-the-content-between-two-patterns-on-multiple-lines-using-sed", "title": "How do i remove the content between two patterns on multiple lines using sed?", "body": "<p>This is the input</p>\n\n<pre><code>hai people&lt;PATTERN&gt;  we had\n&lt;PATTERN&gt;a lot of fun&lt;PATTERN&gt;\n\nwriting scri pts\nWe will&lt;PATTERN&gt;\nhave more\n&lt;PATTERN&gt;tomorrow&lt;PATTERN&gt;\nHurray!\n</code></pre>\n\n<p>Need to have</p>\n\n<pre><code>hai people&lt;PATTERN&gt;  we had\n\nwriting scripts\nWe will&lt;PATTERN&gt;\nhave more\nHurray!\n</code></pre>\n\n<p>For me the first pattern match removes using the following command</p>\n\n<pre><code>sed '/PATTERN/{n;/PATTERN/d}' filename\n</code></pre>\n"}, {"tags": ["mysql", "windows", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 1, "creation_date": 1491294928, "post_id": 43197638, "comment_id": 73476034, "body": "I am assuming you are using windows. can you try <code>mysqldumpslow.pl -s c -t 10 C:\\Somedirectory\\somelogfile.log</code>"}, {"owner": {"reputation": 63, "user_id": 6606167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d40c980f21c6b98aeea2feb485f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "fun", "link": "https://stackoverflow.com/users/6606167/fun"}, "edited": false, "score": 0, "creation_date": 1491361293, "post_id": 43197638, "comment_id": 73512766, "body": "@User5422332 it works! Thx! (and seems I install starwberry perl instead of active perl, so that I can can run <code>.pl</code> file everywhere now). On more question, can I set a default path to my log file? (I noticed that  <code>mysqldumpslow</code> will check the <code>*-slow.log</code> file from a specific path by default in linux)"}], "owner": {"reputation": 63, "user_id": 6606167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d40c980f21c6b98aeea2feb485f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "fun", "link": "https://stackoverflow.com/users/6606167/fun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1214, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491275801, "creation_date": 1491275801, "question_id": 43197638, "link": "https://stackoverflow.com/questions/43197638/how-to-install-mysqldumpslow-on-windows", "title": "how to install mysqldumpslow on windows", "body": "<p>I'm tring to install mysqldumpslow on windows, noticed that it is a perl script <code>mysqldumpslow.pl</code>. </p>\n\n<p>I install Perl on windows and run <code>perl mysqldumpslow.pl</code> on cmd and it keep warning me: <em>Can't determine basedir from 'my_print_defaults mysqld'</em></p>\n\n<p>I'm sure that I've set the basedir in <code>my.ini</code> and restart the server, but nothing change.</p>\n\n<p>if i use <code>perl mysqldumpslow.pl</code> + <em>my-mysql-slow-query-log</em>, it work. But i hope to use command <code>mysqldumpslow</code> directly just like other <code>.exe</code> file. </p>\n\n<p>what should i do? should i trl to compile the <code>.pl</code> to <code>.exe</code> file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1491273850, "post_id": 43197382, "comment_id": 73467062, "body": "The first example prints <code>1</code> when I run it (with no trailing newline, which might make it difficult to read). Try: <code>perl -e &#39;$a=&quot;root&quot;;$b=$a=~m&#47;root&#47;;print(&quot;$b\\n&quot;);&#39;</code>"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1491274410, "post_id": 43197382, "comment_id": 73467175, "body": "@KeithThompson Oh, I understand what is going on. I used fish shell. And the shell prompt eat my output, thank you so much"}, {"owner": {"reputation": 1716, "user_id": 695867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d624c0405e2368e571c51fccc69704?s=128&d=identicon&r=PG", "display_name": "Sam Choukri", "link": "https://stackoverflow.com/users/695867/sam-choukri"}, "edited": false, "score": 2, "creation_date": 1491280361, "post_id": 43197382, "comment_id": 73468597, "body": "If you use <code>-l</code> switch, it will automatically append a newline character <code>\\n</code> to whatever string you are printing. <code>perl -le &#39;$a=&quot;root&quot;;$b=$a=~m&#47;root&#47;;print(&quot;$b&quot;);&#39;</code>"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491273741, "creation_date": 1491273741, "question_id": 43197382, "link": "https://stackoverflow.com/questions/43197382/perls-print-shows-nothing-when-printing-one-variable", "title": "perl&#39;s print shows nothing when printing one variable", "body": "<p>I test below two examples</p>\n\n<pre><code>perl -e '$a=\"root\";$b=$a=~m/root/;print(\"$b\");'\n</code></pre>\n\n<p>it output nothing, while</p>\n\n<pre><code>perl -e '$a=\"root\";$b=$a=~m/root/;print(\"$b,$b\");'\n</code></pre>\n\n<p>output <code>1,1</code></p>\n\n<p>I don't understand why the first code line output nothing?</p>\n"}, {"tags": ["vba", "perl", "outlook"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1491270952, "post_id": 43197026, "comment_id": 73466496, "body": "<code>&#39;log.txt&#39;</code> is relative. Are you sure you&#39;re looking in the proper place for the file? Have you checked whether the script is being executed at all? Why are you calling <code>run_python()</code> on a Perl script? My guess is that if things are executing properly, you&#39;re not checking the correct file for the information. Try printing to STDOUT instead... in the Perl script: <code>print &quot;hello, world!\\n&quot;;</code> You do not show where <code>run_python()</code> is called. Are you sure you&#39;re calling it?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1491271005, "post_id": 43197026, "comment_id": 73466514, "body": "++ for <code>use warnings; use strict;</code> and 3-arg open with a check, btw."}, {"owner": {"reputation": 11116, "user_id": 4539709, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/0pdoL.jpg?s=128&g=1", "display_name": "0m3r", "link": "https://stackoverflow.com/users/4539709/0m3r"}, "edited": false, "score": 0, "creation_date": 1491271702, "post_id": 43197026, "comment_id": 73466652, "body": "May be use <i>Use Shell + Explorer.exe</i> <code>Shell &quot;Explorer.exe &quot;&quot;C:\\Users\\lachlann\\Desktop\\test.pl&quot;&quot;&quot;, 1</code> see if that works"}], "owner": {"reputation": 27, "user_id": 5317570, "user_type": "registered", "profile_image": "https://graph.facebook.com/1168265746520585/picture?type=large", "display_name": "Lachlan Newman", "link": "https://stackoverflow.com/users/5317570/lachlan-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491270751, "creation_date": 1491270751, "question_id": 43197026, "link": "https://stackoverflow.com/questions/43197026/visual-basic-outlook-run-perl-script", "title": "Visual Basic Outlook Run Perl Script", "body": "<p>I am trying to use visual basic in outlook to run a script which runs a perl script in the specified folder</p>\n\n<pre><code>Sub run_python()\n    Shell (\"perl C:\\Users\\lachlann\\Desktop\\test.pl\")\nEnd Sub\n</code></pre>\n\n<p>this is the perl script</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = 'log.txt';\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh \"My first report generated by perl\\n\";\nclose $fh;\n</code></pre>\n\n<p>however when i run the visual basic macro there is no text written in the file log.txt</p>\n"}, {"tags": ["windows", "perl", "cpan", "strawberry-perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491263689, "post_id": 43195604, "comment_id": 73464818, "body": "At first glance, almost all of the CPAN testers <a href=\"http://www.cpantesters.org/distro/P/POSIX-strptime.html?oncpan=1&amp;distmat=1&amp;version=0.13&amp;grade=3\" rel=\"nofollow noreferrer\">failures</a> are on Windows. To rephrase, there are no passing tests for the Win platform. I&#39;m doing some quick testing now though."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491264082, "post_id": 43195604, "comment_id": 73464922, "body": "After cursory review, it looks like the distribution is using <code>time.h</code>, which isn&#39;t found on Windows, which may be breaking things. If so, the POD should state this, and there should be checks in the <code>Makefile.PL</code> to halt building if <code>$^O =~ &#47;Win32&#47;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491272406, "post_id": 43195604, "comment_id": 73466802, "body": "<a href=\"http://stackoverflow.com/questions/321849/strptime-equivalent-on-windows\">Related</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491272410, "post_id": 43195604, "comment_id": 73466803, "body": "Alternative: <a href=\"http://search.cpan.org/perldoc?DateTime::Format::Strptime\" rel=\"nofollow noreferrer\">DateTime::Format::Strptime</a>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491314121, "post_id": 43195604, "comment_id": 73490114, "body": "@stevieb <code>time.h</code> does indeed exist on Windows. It is the non-ANSI/ISO function <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strptime.html\" rel=\"nofollow noreferrer\">strptime</a> that is missing."}, {"owner": {"reputation": 55, "user_id": 1461368, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b624b15f2c2914510189f32e8564c569?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1461368/matt"}, "edited": false, "score": 0, "creation_date": 1491415632, "post_id": 43195604, "comment_id": 73547240, "body": "Thanks for the feedback everyone."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1461368, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b624b15f2c2914510189f32e8564c569?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1461368/matt"}, "edited": false, "score": 1, "creation_date": 1491415409, "post_id": 43209147, "comment_id": 73547133, "body": "Ultimately I am trying to install Image::ExifTool which depends on POSIX::strptime, so switching probably means I&#39;ll need to modify source somewhere. Thanks for you help Sinan, much appreciated."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 55, "user_id": 1461368, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b624b15f2c2914510189f32e8564c569?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1461368/matt"}, "edited": false, "score": 0, "creation_date": 1491421235, "post_id": 43209147, "comment_id": 73550538, "body": "@Matt AFAIK, <code>POSIX::strptime</code> is an optional dependency for <code>exiftool</code> ... It can use <code>Time::Piece</code> instead. I would just force install <code>Image::ExifTool</code>."}, {"owner": {"reputation": 55, "user_id": 1461368, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b624b15f2c2914510189f32e8564c569?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1461368/matt"}, "edited": false, "score": 0, "creation_date": 1491567113, "post_id": 43209147, "comment_id": 73623366, "body": "Good to know, I&#39;ll give it a go. Again, thanks Sinan"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 2, "last_activity_date": 1491313723, "creation_date": 1491313723, "answer_id": 43209147, "question_id": 43195604, "link": "https://stackoverflow.com/questions/43195604/unable-to-install-perl-cpan-module-posixstrptime/43209147#43209147", "title": "Unable to install perl CPAN module POSIX::strptime", "body": "<p>In your log, the key error is:</p>\n\n<blockquote>\n  <p><code>strptime.o:strptime.c:(.text+0x121): undefined reference to 'strptime'</code></p>\n</blockquote>\n\n<p>There is no <code>strptime</code> on Windows to link to. Therefore, the module does not have a chance of building on Windows. <code>Makefile.PL</code> should test for that and bail out.</p>\n\n<p>As has been pointed out, <a href=\"https://metacpan.org/pod/DateTime::Format::Strptime\" rel=\"nofollow noreferrer\">DateTime::Format::Strptime</a> may be a suitable replacement. <a href=\"https://metacpan.org/pod/Time::Strptime\" rel=\"nofollow noreferrer\">Time::Strptime</a> and <a href=\"https://metacpan.org/pod/Time::Piece#Date-Parsing\" rel=\"nofollow noreferrer\">Time::Piece->strptime</a> are other alternatives.</p>\n"}], "owner": {"reputation": 55, "user_id": 1461368, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b624b15f2c2914510189f32e8564c569?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1461368/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 1, "accepted_answer_id": 43209147, "answer_count": 1, "score": 2, "last_activity_date": 1491313723, "creation_date": 1491259968, "question_id": 43195604, "link": "https://stackoverflow.com/questions/43195604/unable-to-install-perl-cpan-module-posixstrptime", "title": "Unable to install perl CPAN module POSIX::strptime", "body": "<p>I'm trying to install the perl module <code>POSIX::strptime</code> on a Windows 10 system, which is running Strawberry Perl 5.24.1.1 (64 bit), using cpan command but it fails to build and install. The command I'm using is:</p>\n\n<pre><code>cpan&gt; install POSIX::strptime\n</code></pre>\n\n<p>and the output is:</p>\n\n<pre><code>Running install for module 'POSIX::strptime'\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\G\\GO\\GOZER\\POSIX-strptime-0.13.tar.gz ok\nConfiguring G/GO/GOZER/POSIX-strptime-0.13.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for POSIX::strptime\nWriting MYMETA.yml and MYMETA.json\n  GOZER/POSIX-strptime-0.13.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- OK\nRunning make for G/GO/GOZER/POSIX-strptime-0.13.tar.gz\ncp lib/POSIX/strptime.pm blib\\lib\\POSIX\\strptime.pm\nRunning Mkbootstrap for strptime ()\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644 \"strptime.bs\"\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- strptime.bs blib\\arch\\auto\\POSIX\\strptime\\strptime.bs 644\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"C:\\Strawberry\\perl\\lib\\ExtUtils\\xsubpp\"  -typemap C:\\STRAWB~1\\perl\\lib\\ExtUtils\\typemap  strptime.xs &gt; strptime.xsc\nPlease specify prototyping behavior for strptime.xs (see perlxs manual)\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- strptime.xsc strptime.c\ngcc -c  -I.     -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2        -DVERSION=\\\"0.13\\\"    -DXS_VERSION=\\\"0.13\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   strptime.c\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Mksymlists \\\n  -e \"Mksymlists('NAME'=&gt;\\\"POSIX::strptime\\\", 'DLBASE' =&gt; 'strptime', 'DL_FUNCS' =&gt; {  }, 'FUNCLIST' =&gt; [], 'IMPORTS' =&gt; {  }, 'DL_VARS' =&gt; []);\" \ng++ strptime.def -o blib\\arch\\auto\\POSIX\\strptime\\strptime.xs.dll -mdll -s -L\"C:\\STRAWB~1\\perl\\lib\\CORE\" -L\"C:\\STRAWB~1\\c\\lib\" strptime.o   \"C:\\STRAWB~1\\perl\\lib\\CORE\\libperl524.a\" -lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 -lshell32 -lole32 -loleaut32 -lnetapi32 -luuid -lws2_32 -lmpr -lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32 -Wl,--enable-auto-image-base\nstrptime.o:strptime.c:(.text+0x121): undefined reference to `strptime'\ncollect2.exe: error: ld returned 1 exit status\ndmake.exe:  Error code 129, while making 'blib\\arch\\auto\\POSIX\\strptime\\strptime.xs.dll'\n  GOZER/POSIX-strptime-0.13.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe -- NOT OK\nStopping: 'install' failed for 'POSIX::strptime'.  \nFailed during this command:\n  GOZER/POSIX-strptime-0.13.tar.gz             : make NO\n</code></pre>\n\n<p>Is anyone able to help me resolve this issue?</p>\n\n<p>Thanks,\nMatt</p>\n"}, {"tags": ["perl", "command-line"], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": true, "score": 5, "last_activity_date": 1491272617, "last_edit_date": 1491272617, "creation_date": 1491261664, "answer_id": 43195868, "question_id": 43195553, "link": "https://stackoverflow.com/questions/43195553/how-to-pass-multiple-parameters-for-the-same-commandline-argument/43195868#43195868", "title": "How to pass multiple parameters for the same commandline argument?", "body": "<p>You could just pass the argument with a separator:</p>\n\n<p><a href=\"http://perldoc.perl.org/Getopt/Long.html#Options-with-multiple-values\" rel=\"noreferrer\">Options with multiple values</a></p>\n\n<blockquote>\n  <p>Often it is useful to allow comma-separated lists of values as well as\n  multiple occurrences of the options. This is easy using Perl's split()\n  and join() operators:</p>\n\n<pre><code>    GetOptions (\"library=s\" =&gt; \\@libfiles);\n    @libfiles = split(/,/,join(',',@libfiles));\n</code></pre>\n</blockquote>\n\n<p>Or another option is:</p>\n\n<blockquote>\n<pre><code>    --library lib/stdlib --library lib/extlib\n</code></pre>\n  \n  <p>To accomplish this behaviour, simply specify an array reference as the\n  destination for the option:</p>\n\n<pre><code>    GetOptions (\"library=s\" =&gt; \\@libfiles);\n</code></pre>\n</blockquote>\n\n<p>Using the first example, your command line would be:</p>\n\n<pre><code>./script -a \"Homeworld\" -a \"Supernatural\" -a \"Breaking Bad\"\n   -or-\n./script -a \"Homeworld,Supernatural,Breaking Bad\"\n   -or-\n./script -a \"Homeworld,Supernatural\" -a \"Breaking Bad\"\n</code></pre>\n\n<p>Using the second example, your command line would be:</p>\n\n<pre><code>./script -a \"Homeworld\" -a \"Supernatural\" -a \"Expanse, The\"\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4294, "favorite_count": 0, "accepted_answer_id": 43195868, "answer_count": 1, "score": 1, "last_activity_date": 1491272617, "creation_date": 1491259742, "last_edit_date": 1491260376, "question_id": 43195553, "link": "https://stackoverflow.com/questions/43195553/how-to-pass-multiple-parameters-for-the-same-commandline-argument", "title": "How to pass multiple parameters for the same commandline argument?", "body": "<p>Scenario: I need to pass names of multiple tv shows to a script:\nEg. <code>./script -a \"Homeworld\" -a \"Supernatural\"</code></p>\n\n<p>I'm using Getopt::Long::Configure to get the options.</p>\n\n<pre><code>sub ArgParser\n{\n    my ($help,$addshow,$delshow,$checkshow,$listshows) = ();\n    GetOptions ('help|h' =&gt; \\$help,             \n                'add|a=s' =&gt; \\$addshow,             \n                );\n    if ($help)\n    {\n        HelpPrint;      \n    }\n    elsif ($addshow)\n    {\n        say $addshow;       \n    }   \n    else \n    {        \n        HelpPrint(\"Invalid option or no options specified!\");\n    }\n    exit;\n}\n\nArgParser;\n</code></pre>\n\n<p>Currently, only the last specified argument is being received by the script. How can I detect whether multiple parameters to the same argument are being passed on the command line? </p>\n\n<p>@ARGV does contain all arguments, so how can I use them?</p>\n"}, {"tags": ["perl", "html-treebuilder"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1491250451, "post_id": 43192829, "comment_id": 73459828, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491250577, "post_id": 43192829, "comment_id": 73459901, "body": "@zdim Thank you for your answer! Based on it, I updated one of my subfunctions (Which I added in the thread) and tried to run it, and got this: <code>Couldn&#39;t get team number</code> Any idea why It can&#39;t get it?"}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1491251011, "post_id": 43192829, "comment_id": 73460128, "body": "Note: I realized I made a mistake in doing <code>!defined</code> instead of <code>defined</code>, so I changed that, and instead of getting the error message, I got no message at all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491251981, "post_id": 43192829, "comment_id": 73460622, "body": "Yourr <code>defined</code> test needs to be inside of the loop.  Also, provide <code>else</code> where you print a message if the thing isn&#39;t found.  See my answer, now posted. Let me know if it needs explanations."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491257983, "post_id": 43192829, "comment_id": 73463249, "body": "You don&#39;t encourage people to answer your questions. There are so many headers and irrelevant narrative that the information gets lost, and you don&#39;t bother to format your code so that it&#39;s readable. I&#39;ve said this to you twice before, but all you seem to take away is the Perl code that does what you ask, and ignore any other advice. I&#39;ve edited your question again, but please make an effort to write something more like this next time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491258571, "post_id": 43192829, "comment_id": 73463474, "body": "I have to say that your code is very extended and wasteful. You have fifteen or so values that you want to retrieve, and you&#39;ve coded a separate variable and subroutine for every one of them. What&#39;s more, each of those subroutines opens the HTML file, reads it into memory, parses it, extracts one of the values, and then throws all of that away to be repeated by the next subroutine. This happens 45,000 times (15 x 3,000) and must be horribly slow."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492199069, "post_id": 43193799, "comment_id": 73895449, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/141741/discussion-between-ultracrepidarian-and-zdim\">continue this discussion in chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493054659, "post_id": 43193799, "comment_id": 74238189, "body": "@Ultracrepidarian  I edited my last addition (last &quot;section&quot;, below the horizontal line), so now it prints a spreadsheet per your template.  I&#39;ll read over and edit a little more, perhaps"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493055165, "post_id": 43193799, "comment_id": 74238472, "body": "@Ultracrepidarian  You have the &quot;Complete program&quot; from before.  Now, what is shown in the last section replaces a couple of parts: the <code>getNames()</code> sub (where really just a few lines are changed), and the <code>foreach my $file (@files) { }</code> loop in the main.  Note that in <code>getNames()</code> I fetch the page from internet, you may need to adjust that.  Also, I used here <code>LWP::Simple</code> and if you keep that then you need <code>use LWP::Simple;</code> at the top.  I am trying here to crop the image of the result spreadsheet but something&#39;s messing with me ... it&#39;s exactly your template from docs.google"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493055558, "post_id": 43193799, "comment_id": 74238679, "body": "@Ultracrepidarian  I added the image of the printed spreadsheet, at the end"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493056654, "post_id": 43193799, "comment_id": 74239299, "body": "@Ultracrepidarian  This had come up already -- use the program from &quot;<i>The whole program</i>&quot; section.  (In order to use <code>state</code> (and <code>say</code>, which is nice) one needs to say <code>use feature qw(say state);</code>, which is in &quot;The whole program&quot;.)   Then, in it you replace the <code>getNames()</code> and <code>foreach my $file (@files) { }</code> by the ones given in the last, new, section"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493057309, "post_id": 43193799, "comment_id": 74239663, "body": "@Ultracrepidarian  One more comment.  If you have those HTML pages in files, then in the beginning of <code>getNames()</code> you only need <code>my ($file) = @_;</code> and then <code>my $tree = HTML::TreeBuilder-&gt;new_from_content( path($file) );</code>, and then the rest of the sub to process that. It&#39;s like in the first code section in my answer.  (In this last version I fetch the page from the URL you gave so that I can test.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493063854, "post_id": 43193799, "comment_id": 74243514, "body": "@Ultracrepidarian What you are posting is not the &quot;<i>The whole program</i>&quot; from my answer. The subs are in the middle, the <code>fill_row()</code> doesn&#39;t have the closing <code>}</code> (so it shouldn&#39;t even run) ... please see my previous two comments -- you use the &quot;<i>The whole program</i>&quot;, replace the <code>getNames()</code> sub and <code>foreach my $file (@files) { }</code> loop in the main, and change the first few lines in <code>getNames()</code> to take web pages from files (as in the first chunk of code in my answer.) I don&#39;t know what you are actually running so I don&#39;t know what&#39;s off. This produces the spreadsheet with posted image."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493064510, "post_id": 43193799, "comment_id": 74243910, "body": "@Ultracrepidarian  That means that <code>$table</code> is undefined, what means that in the previous line it got nothing by <code>$tree-&gt;look_down(...)</code>. Most likely something is different in the format of the HTML file from the one you showed here (and in your previous question).  I have to go now ... I&#39;ll be able to look briefly only tonight, and then tomorrow."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493066510, "post_id": 43193799, "comment_id": 74244963, "body": "So I couldn&#39;t figure out what was wrong with that part of it, so as a test, I ran it with the URL, as you did, and... It worked almost too well. It ended up printing those same 7 lines over five thousand times xD Any clue what went down?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1493076951, "post_id": 43193799, "comment_id": 74248747, "body": "@Ultracrepidarian  I am running around here ... it would have to mean that the HTML pages you run it on are different than the ones in this question (and the previous one).  So it&#39;s finding a lot more of those <code>MasterTable</code> or particular <code>td</code>&#39;s or some such, and repeating.  I don&#39;t see another reason.  Look at the code and see what it does and adjust to your real pages..."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1493057607, "last_edit_date": 1493057607, "creation_date": 1491251801, "answer_id": 43193799, "question_id": 43192829, "link": "https://stackoverflow.com/questions/43192829/not-getting-output-from-htmltreebuilder/43193799#43193799", "title": "Not getting output from HTML::TreeBuilder", "body": "<p>In short, some of those <code>'name'</code> are probably just not found in (some of) HTML files. So test first to see whether it is there, then write to <code>$val</code> or print message about it not being found.</p>\n\n<p>The most apparent thing to be improved: there is no need for separate functions.  You can search and find all of them in one call, and store them in the hash <code>name =&gt; value</code>, which is returned.</p>\n\n<pre><code>sub getNames {\n    my ($file) = @_;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content( path($file) );\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    # List phrases to find, and build hash with their derived names\n    # Should probably be defined globally, once for the whole program\n    my @patterns  = map { '$txt_' . $_ } \n        qw(TeamName TeamNumber SchoolName Area District \n           Phone Phone2 Fax Address1 Address2 City State Zip Website);\n\n    # Name for each pattern: everything after first _ (so after $txt_) \n    my %patt_name = map { $_ =&gt; (/[^_]+_(.*)/)[0] } @patterns;\n    my %name_val;\n    foreach my $node (@nodes) {\n        foreach my $patt (@patterns) {\n            my $name = $node-&gt;look_down('name', qr/\\Q$patt/);\n            if ($name) {\n                $name_val{$patt_name{$patt}} = $name-&gt;attr('value') || '';\n            }\n        }\n    }\n\n    # Name and Email are stored differently. Fetch those now\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) { \n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        # Discard incomplete Name-Email records -- either both or none\n        if (2 == grep { not ref $_ } @td) {\n            @name_val{qw(Name Email)} = map { $_-&gt;as_trimmed_text } @td[0,1];\n        }\n        else { @name_val{qw(Name Email)} = ('', '') }\n    }\n    return \\%name_val;\n}\n</code></pre>\n\n<p>For <code>Name</code> and <code>Email</code> we require both to be there as text, or both are thrown out.  (The sample source has <code>There are no people ...</code>  inside a <code>div</code> for <code>Name</code>, and nothing for <code>Email</code>.)</p>\n\n<p>To get whatever is there, instead of <code>if-else</code> above use</p>\n\n<pre><code>@name_val{qw(Name Email)} = \n    map { (defined) ? $_-&gt;as_trimmed_text : '' } @td[0,1];\n</code></pre>\n\n<p>and we get the note quoted above for <code>Name</code> and an empty string for <code>Email</code>,  with this sample.</p>\n\n<p>Then</p>\n\n<pre><code># Specify spreadsheet headers in desired order and write  to file\nmy @headers = ('Name', 'Email', 'Team Number', 'Team Name', ...);\n$worksheet-&gt;write_row(0, 0, \\@headers);               # first row\n\n# Build ancillary data structures to later sort results by this order\n# each header with its index from @headers (specifies columns' order)\nmy %ho = map { state $idx; $_ =&gt; ++$idx } @headers;\n# each name (`TeamNumber` ...) with the index of its header\nmy %name_order = ( Name =&gt; $ho{Name}, Email =&gt; $ho{Email}, \n    TeamNumber =&gt; $ho{'Team Number'}, TeamName =&gt; $ho{'Team Name'}, ... \n);\n\nmy $row = 1;\nforeach my $file (@files) {\n    next if -d $file;\n\n    my %name_val = %{ getNames($file) };\n    fill_row($worksheet, $row++, \\%name_val, \\%name_order);\n\n    foreach my $name (sort keys %name_val) {  # demo\n        if ($name_val{$name}) { print \"$name =&gt; $name_val{$name}\\n\" }\n        else                  { print \"Not found $name in $file\\n\" }\n    }\n}\n\nsub fill_row {\n   my ($ws, $row, $rdata, $rorder) = @_;    \n   my %name_val   = %$rdata;\n   my %name_order = %$rorder;\n\n   my @vals = map { $name_val{$_} } \n              sort { $name_order{$a} &lt;=&gt; $name_order{$b} } \n              keys %name_val;\n\n   $ws-&gt;write_row($row, 0, \\@vals);  # add check (returns 0 on success)\n\n   return 1;\n}\n</code></pre>\n\n<p>The <a href=\"http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel-2.40/lib/Spreadsheet/WriteExcel.pm#write_row%28$row,_$column,_$array_ref,_$format%29\" rel=\"nofollow noreferrer\">write_row</a> takes a reference to an array and writes out a row with \nits elements.  Note that <code>write</code> can be used that way, too, when an arrayref is given.</p>\n\n<p>The output on the linked HTML file</p>\n\n<pre>\nArea => 1\nDistrict => 1\nState => NM\nTeamName => Ruidoso\nTeamNumber => 83\n</pre>\n\n<p>and <code>Not found ...</code> for others.  The <code>.xls</code> file is correct (when the full list of names is used).</p>\n\n<hr>\n\n<p>The whole program</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature qw(say state);\n\nuse Path::Tiny;\nuse HTML::TreeBuilder;\nuse Spreadsheet::WriteExcel;\n\n\nmy @src = qw(TeamName TeamNumber SchoolName Area District Phone Phone2 \n    Fax Address1 Address2 City State Zip Website);\nmy @headers = ('Name', 'Email', 'Team Number', 'Team Name', 'School Name', \n    'Area', 'District', 'Ag Dept Phone', 'School Phone', 'Fax', 'Address One', \n    'Address Two', 'City', 'State', 'Zip Code', 'Web Site'\n);\nmy @lens = map { length } @headers;  # for printing\n\n# Numeric order of headers' fields (so, columns)\nmy %ho = map { state $idx; $_ =&gt; ++$idx } @headers;\n# Translation: name from HTML source =&gt; column number (retrieved from %ho)\nmy %name_order = ( \n    Name =&gt; $ho{Name}, Email =&gt; $ho{Email}, \n    TeamNumber =&gt; $ho{'Team Number'},\n    TeamName =&gt; $ho{'Team Name'}, \n    SchoolName =&gt; $ho{'School Name'}, Area =&gt; $ho{'Area'},\n    District =&gt; $ho{'District'}, Phone2 =&gt; $ho{'Ag Dept Phone'},\n    Phone =&gt; $ho{'School Phone'}, Fax =&gt; $ho{'Fax'}, \n    Address1 =&gt; $ho{'Address One'},\n    Address2 =&gt; $ho{'Address Two'}, \n    City =&gt; $ho{'City'}, State =&gt; $ho{'State'}, 'Zip' =&gt; $ho{'Zip Code'},\n    Website =&gt; $ho{'Web Site'}\n);\n\nsay \"Order (column) of names from HTML source to follow headers:\";\nprintf(\"%-10s  ==&gt;  %s\\n\", $_, $name_order{$_})\n    for sort { $name_order{$a} &lt;=&gt; $name_order{$b} } keys %name_order;\nsay '';\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new('data.xls');\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n# Print headers to .xls file (and to screen)\n$worksheet-&gt;write_row(0, 0, \\@headers);\nsay \"Spreadsheet, header and rows:\";\nprn_row(\\@headers);  # print to screen\n\nmy @files = ('fetch_names.html');\nmy $row = 1;\nforeach my $file (@files) {\n    next if -d $file;\n\n    # Parse the file, print the row to spreadsheet\n    my %name_val = %{ getNames($file) };\n    fill_row($worksheet, $row++, \\%name_val, \\%name_order);\n}\n\n\n# Functions\n\nsub fill_row {\n    my ($ws, $row, $rdata, $rorder) = @_;\n\n    my %name_val = %$rdata;\n    my $name_order = %$rorder;\n\n    my @vals =\n        map { $name_val{$_} }\n        sort { $name_order{$a} &lt;=&gt; $name_order{$b} }\n        grep { exists $name_order{$_} }\n        keys %name_val;\n\n    prn_row(\\@vals);  # print to screen\n\n    $worksheet-&gt;write_row($row, 0, \\@vals);  # test this (returns 0 on success)\n\n    return 1;\n}\n\nsub prn_row {\n    my @ary = @{ $_[0] };\n    for (0..$#ary) {\n        my $len = $lens[$_];\n        printf(\"%${len}s  \", $ary[$_]);\n    }\n    say '';\n}\n\nsub getNames {\n    my ($file) = @_;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content( path($file)-&gt;slurp );\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my @patterns = map { '$txt_' . $_ } @src;\n    # List phrases to find, and build hash with their derived names\n    # Name for each pattern: everything first _ (so after \\$txt_)\n    my %patt_name = map { $_ =&gt; (/[^_]+_(.*)/)[0] } @patterns;\n\n    my %name_val;\n    foreach my $node (@nodes) {\n        foreach my $patt (@patterns) {\n            my $name = $node-&gt;look_down('name', qr/\\Q$patt/) or next;\n            $name_val{$patt_name{$patt}} = $name-&gt;attr('value') // '';\n        }\n    }\n\n    # Name and Email are stored differently, fetch those now\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) {\n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        # Discard incomplete Name-Email records -- either both or none\n        if (2 == grep { not ref } @td) {\n            @name_val{qw(Name Email)} = map { $_-&gt;as_trimmed_text } @td[0,1];\n        }\n        else { @name_val{qw(Name Email)} = ('', '') }\n    }\n    return \\%name_val;\n}\n</code></pre>\n\n<p>This works as a complete program with the supplied sample HTML source.</p>\n\n<hr>\n\n<p>Addition: an actual page may have multiple name-email pairs</p>\n\n<pre><code>use LWP::Simple qw(get);\n\nsub getNames {\n    my ($file) = @_; \n    my $url = 'https://www.judgingcard.com/Directory/Directory.aspx?ID=1643';\n    my $page = get($url) or die \"Can't get the page $url: $!\";\n    my $tree = HTML::TreeBuilder-&gt;new_from_content( $page );\n\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my @patterns = map { '$txt_' . $_ } @src;\n    # List phrases to find, and build hash with their derived names\n    # Name for each pattern: everything first _ (so after \\$txt_)\n    my %patt_name = map { $_ =&gt; (/[^_]+_(.*)/)[0] } @patterns;\n\n    my %name_val;\n    foreach my $node (@nodes) {\n        foreach my $patt (@patterns) {\n            my $name = $node-&gt;look_down('name', qr/\\Q$patt/) or next;\n            $name_val{$patt_name{$patt}} = $name-&gt;attr('value') // ''; \n        }   \n    }   \n\n    # Name and Email are stored differently, fetch those now\n    my %name_email;\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) { \n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        # There may be more than one Name-Email pair\n        # so enter key-value pair explicitely\n        if (2 &lt;= grep { ref } @td) {\n            $name_email{$td[0]-&gt;as_trimmed_text} = $td[1]-&gt;as_trimmed_text;\n        }\n        else { %name_email = ('', '') }\n    }\n    return \\%name_val, \\%name_email;\n}\n</code></pre>\n\n<p>Then in the main you need</p>\n\n<pre><code>foreach my $file (@files) {\n    next if -d $file;\n\n    # Parse the file, unpack name-value and name-email hashes\n    my ($rname_val, $rname_email) = getNames($file);\n    my %name_val   = %$rname_val;\n    my %name_email = %$rname_email;\n\n    # Print a row for each Name-Email, adding them to %name_val\n    foreach my $name (keys %name_email) {\n        $name_val{Name}  = $name;\n        $name_val{Email} = $name_email{$name};\n        fill_row($worksheet, $row++, \\%name_val, \\%name_order);\n    }\n}\n</code></pre>\n\n<p>The desired format with mutpliple Name-Email pairs is: same headers, and for each pair a separate row is printed to file, where all information other than Name-Email is the same.</p>\n\n<p>The printed spreadsheet (URL used was provided in comments)</p>\n\n<p><a href=\"https://i.stack.imgur.com/lKrzg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lKrzg.png\" alt=\"Printed spreadsheet. URL was provided in comments\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 3, "last_activity_date": 1491253212, "creation_date": 1491253212, "answer_id": 43194174, "question_id": 43192829, "link": "https://stackoverflow.com/questions/43192829/not-getting-output-from-htmltreebuilder/43194174#43194174", "title": "Not getting output from HTML::TreeBuilder", "body": "<p>You probably could reduce the code. Even if in the following example me not using HTML::TreeBuidler, the approach is similar. Using <a href=\"https://metacpan.org/pod/Mojo::DOM58\" rel=\"nofollow noreferrer\">Mojo::DOM58</a>,</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse Mojo::DOM58;\nuse Path::Tiny;\nuse Data::Dumper;\n\nmy @fields = qw( TeamName TeamNumber SchoolName Area District Phone Phone2 Fax Address1 Address2 City State Zip Website );\n\nmy $html = path('team.html')-&gt;slurp;\nmy $dom = Mojo::DOM58-&gt;new($html);\n\nmy $data;\nfor my $field( @fields ) {\n    $data-&gt;{$field} = $dom-&gt;at(qq{input[name*=\"txt_$field\"]})-&gt;attr('value') // \"\";\n}\n\nsay Dumper $data;\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>$VAR1 = {\n          'TeamName' =&gt; 'Ruidoso',\n          'Zip' =&gt; '',\n          'State' =&gt; 'NM',\n          'City' =&gt; '',\n          'District' =&gt; '1',\n          'Phone2' =&gt; '',\n          'Area' =&gt; '1',\n          'SchoolName' =&gt; '',\n          'Address2' =&gt; '',\n          'Website' =&gt; '',\n          'Address1' =&gt; '',\n          'Phone' =&gt; '',\n          'Fax' =&gt; '',\n          'TeamNumber' =&gt; '83'\n        };\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 43193799, "answer_count": 2, "score": 2, "last_activity_date": 1493057607, "creation_date": 1491247902, "last_edit_date": 1592644375, "question_id": 43192829, "link": "https://stackoverflow.com/questions/43192829/not-getting-output-from-htmltreebuilder", "title": "Not getting output from HTML::TreeBuilder", "body": "<p>I'm trying to get a whole bunch of values from around 3,000 HTML files and save them to a spreadsheet.</p>\n<p>I'm using\n<a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\"><code>HTML::TreeBuilder</code></a> to process the HTML and creating a spreadsheet using\n<a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel\" rel=\"nofollow noreferrer\"><code>Spreadsheet::WriteExcel</code></a>.</p>\n<p>But my script doesn't successfully get the values. I see</p>\n<blockquote>\n<p>Use of uninitialized value $val in concatenation (.) or string at spreadsheet.pl line 63.</p>\n</blockquote>\n<p>What might I be doing wrong?</p>\n<p>Here's an example of <a href=\"https://pastebin.com/DqDWGBYy\" rel=\"nofollow noreferrer\">my HTML files on <code>pastebin.com</code></a>. It was too large to post in the question.</p>\n<h3>My Perl code</h3>\n<pre><code>use warnings 'all';\nuse strict;\n\nuse LWP::Simple 'get';\nuse Spreadsheet::WriteExcel;\nuse HTML::TreeBuilder;\nuse Path::Tiny;\nuse constant URL =&gt; 'http://pastebin.com/raw/qLwu80ZW';\n\nmy $teamNumber  = &quot;&quot;;\nmy $teamName    = &quot;&quot;;\nmy $schoolName  = &quot;&quot;;\nmy $area        = &quot;&quot;;\nmy $district    = &quot;&quot;;\nmy $agDeptPhone = &quot;&quot;;\nmy $schoolPhone = &quot;&quot;;\nmy $fax         = &quot;&quot;;\nmy $addressOne  = &quot;&quot;;\nmy $addressTwo  = &quot;&quot;;\nmy $city        = &quot;&quot;; \nmy $state       = &quot;&quot;;\nmy $zipCode     = &quot;&quot;;\nmy $name        = &quot;&quot;;\nmy $email       = &quot;&quot;;\nmy $row         = &quot;&quot;;\nmy $Ypos        = 0; \n\nmy $path = &quot;Z:\\\\_WEB_CLIENTS\\\\Morgan Livestock\\\\Judging Card&quot;;\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new('perlOutput.xlsx');\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n\nsub getTeamNumber {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_TeamNumber/)-&gt;attr('value');\n    }\n\n    print &quot;Got Team Number $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getTeamName {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_TeamName/)-&gt;attr('value');\n    }\n\n    print &quot;Got Team Name $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getSchoolName {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(tag_ =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_SchoolName/)-&gt;attr('value');\n    }\n\n    print &quot;Got School Name $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getArea{\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(tag_ =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Area/)-&gt;attr('value');\n    }\n\n    print &quot;Got Area $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getDistrict{\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_District/)-&gt;attr('value');\n    }\n\n    print &quot;Got District $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getDeptPhone {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Phone/)-&gt;attr('value');\n    }\n\n    print &quot;Got Dept Phone $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getSchoolPhone{\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Phone2/)-&gt;attr('value');\n    }\n\n    print &quot;Got School Phone $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getFax{\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Fax/)-&gt;attr('value');\n    }\n\n    print &quot;Got Fax $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getAddress1 {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Address1/)-&gt;attr('value');\n    }\n\n    print &quot;Got Address One $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getAddress2 {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Address2/)-&gt;attr('value');\n    }\n\n    print &quot;Got Address Two $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getCity {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_City/)-&gt;attr('value');\n    }\n\n    print &quot;Got Address Two $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getState {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_State/)-&gt;attr('value');\n    }\n\n    print &quot;Got State $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getZip {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Zip/)-&gt;attr('value');\n    }\n\n    print &quot;Got Zip $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getWebsite {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $val;\n\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Website/)-&gt;attr('value');\n    }\n\n    print &quot;Got Website $val\\n&quot;;\n\n    return $val;\n}\n\n\nsub getNameAndEmail {\n    my ($file) = @_;\n\n    my $tree = HTML::TreeBuilder-&gt;new_from_content(get URL);\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n\n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) {\n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        my ($name, $email) = map { $_-&gt;as_trimmed_text } @td[0,1];\n    }\n\n    print &quot;Got Name and Email $name and $email\\n&quot;;\n\n    return ($name, $email);\n}\n\n# FILLER: This fills the spreadsheet with all the variables we've acquired\n\nsub fill {\n    my ($name, $email, $teamNumber, $teamName, $schoolName,\n        $area, $district, $agDeptPhone, $schoolPhone,\n        $fax, $addressOne, $addressTwo, $city, $state, $zipCode) = (@_);\n\n    $worksheet-&gt;write($Ypos, 1, $name);\n    $worksheet-&gt;write($Ypos, 2, $email);\n    $worksheet-&gt;write($Ypos, 3, $teamNumber);\n    $worksheet-&gt;write($Ypos, 4, $teamName);\n    $worksheet-&gt;write($Ypos, 5, $schoolName);\n    $worksheet-&gt;write($Ypos, 6, $area);\n    $worksheet-&gt;write($Ypos, 7, $district);\n    $worksheet-&gt;write($Ypos, 8, $agDeptPhone);\n    $worksheet-&gt;write($Ypos, 9, $schoolPhone);\n    $worksheet-&gt;write($Ypos, 10, $fax);\n    $worksheet-&gt;write($Ypos, 11, $addressOne);\n    $worksheet-&gt;write($Ypos, 12, $addressTwo);\n    $worksheet-&gt;write($Ypos, 13, $city);\n    $worksheet-&gt;write($Ypos, 14, $state);\n    $worksheet-&gt;write($Ypos, 15, $zipCode);\n}\n\n# Open judgingcard directory\n\nopendir (DIR, $path) or die &quot;Unable to open directory 'Judging Card': $!&quot;;\n\nmy @files = readdir(DIR);\n\n# This fills out all top row info\n\n$worksheet-&gt;write(&quot;A1&quot;, &quot;Name&quot;);\n$worksheet-&gt;write(&quot;B1&quot;, &quot;Email&quot;);\n$worksheet-&gt;write(&quot;C1&quot;, &quot;Team Number&quot;);\n$worksheet-&gt;write(&quot;D1&quot;, &quot;Team Name&quot;);\n$worksheet-&gt;write(&quot;E1&quot;, &quot;School Name&quot;);\n$worksheet-&gt;write(&quot;F1&quot;, &quot;Area&quot;);\n$worksheet-&gt;write(&quot;G1&quot;, &quot;District&quot;);\n$worksheet-&gt;write(&quot;H1&quot;, &quot;Ag Dept Phone&quot;);\n$worksheet-&gt;write(&quot;I1&quot;, &quot;School Phone&quot;);\n$worksheet-&gt;write(&quot;J1&quot;, &quot;Fax&quot;);\n$worksheet-&gt;write(&quot;K1&quot;, &quot;Address One&quot;);\n$worksheet-&gt;write(&quot;L1&quot;, &quot;Address Two&quot;);\n$worksheet-&gt;write(&quot;M1&quot;, &quot;City&quot;);\n$worksheet-&gt;write(&quot;N1&quot;, &quot;State&quot;);\n$worksheet-&gt;write(&quot;O1&quot;, &quot;Zip Code&quot;);\n\n###################################\n\nforeach my $file (@files) { # run through all files in directory\n\n    next if (-d $file); # Skip file if file is folder\n\n    $Ypos = $Ypos + 1;\n\n    my ($name1, $email1) = getNameAndEmail($file);\n\n    $name        = $name1;\n    $email       = $email1;\n    $teamNumber  = getTeamNumber($file);\n    $teamName    = getTeamName($file);\n    $schoolName  = getSchoolName($file);\n    $area        = getArea($file);\n    $district    = getDistrict($file);\n    $agDeptPhone = getDeptPhone($file);\n    $schoolPhone = getSchoolPhone($file);\n    $fax         = getFax($file);\n    $addressOne  = getAddress1($file);\n    $addressTwo  = getAddress2($file);\n    $city        = getCity($file);\n    $state       = getState($file);\n    $zipCode     = getZip($file);\n\n    fill($name, $email, $teamNumber, $teamName, $schoolName,\n        $area, $district, $agDeptPhone, $schoolPhone, $fax,\n        $addressOne, $addressTwo, $city, $state, $zipCode);\n\n    print &quot;Progressing                    $file                ($Ypos)\\n&quot;\n}\n\nclosedir(DIR);\n\n\nsub getTeamNumber {\n    my ($file) = @_;\n\n    my $html = path($file);\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    my $name;\n    my $val;\n\n    foreach my $node (@nodes) {\n        $name = $node-&gt;look_down('name', qr/\\$txt_TeamNumber/);\n    }\n\n    if ( ! defined $name ) {\n        print &quot;Couldn't get team number\\n&quot;;\n    }\n\n    if ( $name ) {\n        $val = $name-&gt;attr('value');\n        print &quot;Got Team number $val\\n&quot;;\n    }\n\n    return $val;\n}\n</code></pre>\n<p><strong>New script:</strong></p>\n<pre><code>use LWP::Simple 'get';\nuse Spreadsheet::WriteExcel;\nuse HTML::TreeBuilder;\nuse Path::Tiny;\n\nmy $path = &quot;Z:\\\\_WEB_CLIENTS\\\\Morgan Livestock\\\\Judging Card&quot;;\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new('perlOutput.xlsx');\nmy $worksheet = $workbook-&gt;add_worksheet();\n\nopendir (DIR, $path) or die &quot;Unable to open directory 'Judging Card': $!&quot;;\nmy @files = readdir(DIR);\n\n# Specify spreadsheet headers in desired order and write  to file\nmy @headers = ('Name', 'Email', 'Team Number', 'Team Name', 'School Name', 'Area', 'District', 'Ag Dept Phone', 'School Phone', 'Fax', 'Address One'\n    , 'Address Two', 'City', 'State', 'Zip Code');\n$worksheet-&gt;write_row(0, 0, \\@headers);               # first row\n\n# Build ancillary data structures to later sort results by this order\n# each header with its index from @headers (specifies columns' order)\nmy %ho = map { state $idx; $_ =&gt; ++$idx } @headers;\n# each name (`TeamNumber` ...) with the index of its header\nmy %name_order = ( Name =&gt; $ho{Name}, Email =&gt; $ho{Email}, \n    TeamNumber =&gt; $ho{'Team Number'}, TeamName =&gt; $ho{'Team Name'}, SchoolName =&gt; $ho{'School Name'}, Area =&gt; $ho{'Area'}, District =&gt; $ho{'District'}, \n        AgDeptPhone =&gt; $ho{'Ag Dept Phone'}, SchoolPhone =&gt; $ho{'School Phone'}, Fax =&gt; $ho{'Fax'}, AddressOne =&gt; $ho{'Address One'},\n        AddressTwo =&gt; $ho{'Address Two'}, City =&gt; $ho{'City'}, State =&gt; $ho{'State'}, Zip =&gt; $ho{'Zip Code'});\n        \nsub getNames {\n    my ($file) = @_;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content( path($file) );\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n\n    # List phrases to find, and build hash with their derived names\n    # Should probably be defined globally, once for the whole program\n    my @patterns  = map { '$txt_' . $_ } \n        qw(TeamName TeamNumber SchoolName Area District \n           Phone Phone2 Fax Address1 Address2 City State Zip Website);\n\n    # Name for each pattern: everything after first _ (so after $txt_) \n    my %patt_name = map { $_ =&gt; (/[^_]+_(.*)/)[0] } @patterns;\n    my %name_val;\n    foreach my $node (@nodes) {\n        foreach my $patt (@patterns) {\n            my $name = $node-&gt;look_down('name', qr/\\Q$patt/);\n            if ($name) {\n                $name_val{$patt_name{$patt}} = $name-&gt;attr('value') || '';\n            }\n        }\n    }\n\n    # Name and Email are stored differently. Fetch those now\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) { \n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        # Discard incomplete Name-Email records -- either both or none\n        @name_val{qw(Name Email)} = \n            map { (defined) ? $_-&gt;as_trimmed_text : '' } @td[0,1];\n    }\n    return \\%name_val;\n}\n\nsub fill_row {\n   my ($ws, $row, $rdata, $rorder) = @_;    \n   my %name_val   = %$rdata;\n   my %name_order = %$rorder;\n\n   my @vals = map { $name_val{$_} } \n              sort { $name_order{$a} &lt;=&gt; $name_order{$b} } \n              keys %name_val;\n\n   $ws-&gt;write_row($row, 0, \\@vals);  # add check (returns 0 on success)\n\n   return 1;\n\n    my $row = 1;\n}\n\nforeach my $file (@files) {\n    next if -d $file;\n\n    my %name_val = %{ getNames($file) };\n\n    foreach my $name (sort keys %name_val) {\n        # Fill the spreadsheet with all info in one go\n        if ($name_val{$name}) {\n            print &quot;$name =&gt; $name_val{$name}\\n&quot;;\n        } else {\n            print &quot;Not found $name in $file\\n&quot;;\n        }\n    }\n\n    \n    my %name_val = %{ getNames($file) };\n    fill_row($worksheet, $row++, \\%name_val, \\%name_order);\n\n    foreach my $name (sort keys %name_val) {  # demo\n        if ($name_val{$name}) { print &quot;$name =&gt; $name_val{$name}\\n&quot; }\n        else                  { print &quot;Not found $name in $file\\n&quot; }\n    }\n    \n    print &quot;Progressing $Ypos \\n&quot;\n}\n\n                                                                                                  \n</code></pre>\n"}, {"tags": ["c++", "qt", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1491313383, "post_id": 43194304, "comment_id": 73489498, "body": "Does recompiling with <code>-fPIC</code> (like the compiler suggests) help with the new issue?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1491313481, "post_id": 43194304, "comment_id": 73489586, "body": "@hlt I think it requires recompilation of the object files in <code>libperl.a</code> with <code>-fPIC</code> flag.. I am not sure how to do this, see <a href=\"http://stackoverflow.com/q/43203477/2173773\">this</a> question."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 5896, "user_id": 1106415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6fvK.png?s=128&g=1", "display_name": "hlt", "link": "https://stackoverflow.com/users/1106415/hlt"}, "edited": false, "score": 0, "creation_date": 1492424729, "post_id": 43194304, "comment_id": 73954797, "body": "Added <a href=\"https://rt.cpan.org/Ticket/Display.html?id=121203\" rel=\"nofollow noreferrer\">cpan bug report</a>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1491253737, "creation_date": 1491253737, "answer_id": 43194304, "question_id": 43191675, "link": "https://stackoverflow.com/questions/43191675/failed-to-install-qtcore4-on-ubuntu-16-10-perl-version-5-24-1/43194304#43194304", "title": "Failed to install QtCore4 on Ubuntu 16.10, perl version 5.24.1", "body": "<p>Seems like there was a missing a destructor in the derived class <code>x_QDBusConnectionInterface</code>:</p>\n\n<blockquote>\n  <p>/home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp:1594:7: note: \u2018virtual\n  __smokeqtdbus::x_QDBusConnectionInterface::~x_QDBusConnectionInterface()\u2019\n  is implicitly deleted because the default definition would be\n  ill-formed:</p>\n</blockquote>\n\n<p>By inserting a default destructor at line 1595 in <code>/home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp</code>:</p>\n\n<pre><code>~x_QDBusConnectionInterface();\n</code></pre>\n\n<p>the error disappeared. However, three other files now also had this missing destructor error: </p>\n\n<ul>\n<li><p><code>/home/hakon/Qt4-0.99.0/smokeqt/qtgui/x_3.cpp:4024</code></p></li>\n<li><p><code>/home/hakon/Qt4-0.99.0/smokeqt/qtgui/x_13.cpp:3572</code></p></li>\n<li><p><code>/home/hakon/Qt4-0.99.0/smokeqt/qthelp/x_1.cpp:873</code></p></li>\n</ul>\n\n<p>Fixing these error the same way as the first, still a new error showed up:</p>\n\n<pre><code>/home/hakon/Qt4-0.99.0/qtcore/src/util.cpp: In function \u2018void\nXS_AUTOLOAD(CV*)\u2019: /home/hakon/Qt4-0.99.0/qtcore/src/util.cpp:2234:59:\nerror: cannot convert \u2018bool\u2019 to \u2018void*\u2019 in initialization    \n     static smokeperl_object nothis = { 0, 0, 0, false };\n                                                       ^\n</code></pre>\n\n<p>The definition of <code>smokeperl_object</code> is given in <code>/home/hakon/Qt4-0.99.0/qtcore/src/smokeperl.h</code> at line 9:</p>\n\n<pre><code>struct smokeperl_object {\n    bool allocated;\n    Smoke* smoke;\n    int classId;\n    void* ptr;\n};\n</code></pre>\n\n<p>According to this definition, replacing the <code>false</code> at <code>/home/hakon/Qt4-0.99.0/qtcore/src/util.cpp:2234</code> with a <code>0</code> seemed to be a good try:</p>\n\n<pre><code>static smokeperl_object nothis = { 0, 0, 0, 0 };\n</code></pre>\n\n<p>No recompiling fixed this error, but revealed yet a linker error:</p>\n\n<pre><code>/usr/bin/c++  -fPIC -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong \\\n -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O3 -DNDEBUG  \\\n -shared -Wl,-soname,QtCore4.so -o ../../blib/arch/auto/QtCore4/QtCore4.so \\\n CMakeFiles/perlqtcore4.dir/binding.cpp.o \\\n CMakeFiles/perlqtcore4.dir/handlers.cpp.o \\\n CMakeFiles/perlqtcore4.dir/marshall_types.cpp.o \\\n CMakeFiles/perlqtcore4.dir/util.cpp.o \\\n CMakeFiles/perlqtcore4.dir/QtCore4.c.o \\\n -lQtCore -lQtGui -lQtNetwork \\\n /home/hakon/perlbrew/perls/perl-5.24.1/lib/5.24.1/x86_64-linux/CORE/libperl.a \\\n ../../smokeqt/qtgui/libsmokeqtgui.so.3.0.0 \\\n ../../smokeqt/qtnetwork/libsmokeqtnetwork.so.3.0.0 \\\n -lpthread -lnsl -ldl -lm -lcrypt -lutil -lc -lQtGui -lQtNetwork \\\n ../../smokeqt/qtcore/libsmokeqtcore.so.3.0.0 -lQtCore \\\n ../../smokegen/bin/libsmokebase.so.3.0.0 \\\n -Wl,-rpath,/home/hakon/Qt4-0.99.0/smokeqt/qtgui:/home/hakon/Qt4-0.99.0/smokeqt/qtnetwork:/home/hakon/Qt4-0.99.0/smokeqt/qtcore:/home/hakon/Qt4-0.99.0/smokegen/bin: \n\n/usr/bin/ld: /home/hakon/perlbrew/perls/perl-5.24.1/lib/5.24.1/x86_64-linux/CORE/libperl.a(toke.o): \n  relocation R_X86_64_PC32 against symbol `PL_curcop' can not be used when making\n  a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Bad value\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I am still not sure how to fix this last error..</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491253737, "creation_date": 1491243599, "last_edit_date": 1495539984, "question_id": 43191675, "link": "https://stackoverflow.com/questions/43191675/failed-to-install-qtcore4-on-ubuntu-16-10-perl-version-5-24-1", "title": "Failed to install QtCore4 on Ubuntu 16.10, perl version 5.24.1", "body": "<p>I am trying to install <a href=\"https://metacpan.org/pod/QtCore4\" rel=\"nofollow noreferrer\"><code>QtCore4</code></a> on Ubuntu 16.10, perl version 5.24.1:</p>\n\n<pre><code>sudo apt-get install cmake\nsudo apt-get install qt4-designer libqtgui4-perl\ncpan -g QtCore4\nbunzip2 Qt4-0.99.0.tar.bz2\ntar xvf Qt4-0.99.0.tar\ncd Qt4-0.99.0\nperl Makefile.PL\nmake VERBOSE=1\n</code></pre>\n\n<p>Here <code>make</code> fails with error message:</p>\n\n<pre><code>Building CXX object smokeqt/qtdbus/CMakeFiles/smokeqtdbus.dir/x_1.cpp.o\n\ncd /home/hakon/Qt4-0.99.0/smokeqt/qtdbus\n/usr/bin/c++   -DSMOKE_BUILDING -Dsmokeqtdbus_EXPORTS \\\n -I/usr/include/qt4/QtDesigner \\\n -I/usr/include/qt4/QtDeclarative \\\n -I/usr/include/qt4/QtScriptTools \\\n -I/usr/include/qt4/QtDBus \\\n -I/usr/include/qt4/QtXml \\\n -I/usr/include/qt4/QtSql \\\n -I/usr/include/qt4/QtOpenGL \\\n -I/usr/include/qt4/QtNetwork \\\n -I/usr/include/qt4/QtXmlPatterns \\\n -I/usr/include/qt4/QtHelp \\\n -I/usr/include/qt4/QtUiTools \\\n -I/usr/include/qt4/QtTest \\\n -I/usr/include/qt4/QtScript \\\n -I/usr/include/qt4/QtSvg \\\n -I/usr/include/qt4/Qt3Support \\\n -I/usr/include/qt4/QtGui \\\n -I/usr/include/qt4/QtCore \\\n -I/usr/share/qt4/mkspecs/default \\\n -I/usr/include/qt4 \\\n -I/home/hakon/Qt4-0.99.0/src \\\n -I/home/hakon/Qt4-0.99.0/smokeqt \\\n -I/home/hakon/Qt4-0.99.0/smokegen \\\n -I/home/hakon/Qt4-0.99.0/smokeqt/qtdbus \\\n -I/home/hakon/Qt4-0.99.0/smoke \\\n -I/home/hakon/Qt4-0.99.0/smoke/qtdbus  \\\n -O3 -DNDEBUG -fPIC   -o CMakeFiles/smokeqtdbus.dir/x_1.cpp.o \\\n -c /home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp\n\n/home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp:1594:7: error: deleted function \u2018virtual __smokeqtdbus::x_QDBusConnectionInterface::~x_QDBusConnectionInterface()\u2019\n class x_QDBusConnectionInterface : public QDBusConnectionInterface {\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/qt4/QtDBus/QtDBus:8:0,\n                 from /home/hakon/Qt4-0.99.0/smokeqt/qtdbus/qtdbus_includes.h:2,\n                 from /home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp:2:\n/usr/include/qt4/QtDBus/qdbusconnectioninterface.h:73:5: error: overriding non-deleted function \u2018virtual QDBusConnectionInterface::~QDBusConnectionInterface()\u2019\n     ~QDBusConnectionInterface();\n     ^\n/home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp:1594:7: note: \u2018virtual __smokeqtdbus::x_QDBusConnectionInterface::~x_QDBusConnectionInterface()\u2019 is implicitly deleted because the default definition would be ill-formed:\n class x_QDBusConnectionInterface : public QDBusConnectionInterface {\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~\n/home/hakon/Qt4-0.99.0/smokeqt/qtdbus/x_1.cpp:1594:7: error: \u2018virtual QDBusConnectionInterface::~QDBusConnectionInterface()\u2019 is private within this context\n</code></pre>\n\n<p>These threads might be related:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/q/7587154/2173773\">What is this error message about implicitly deleted virtual destructors?</a></p></li>\n<li><p><a href=\"https://sourceforge.net/p/pythonqt/discussion/631393/thread/568fa0c0/\" rel=\"nofollow noreferrer\">PythonQt Dynamic Python binding for Qt Applications: build error in C++11 mode</a></p></li>\n</ul>\n"}, {"tags": ["qt", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491239803, "post_id": 43190485, "comment_id": 73454116, "body": "...and remove the <code>defined</code> from the next two lines following line 1420 as well. Those three lines appear to be the only location where that specific error will be triggered."}], "answers": [{"comments": [{"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1491240106, "post_id": 43190628, "comment_id": 73454283, "body": "It helps, but I got another error: <a href=\"http://imgur.com/a/M6kKz\" rel=\"nofollow noreferrer\">imgur.com/a/M6kKz</a> Why is this Perl module so buggy?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1491241155, "post_id": 43190628, "comment_id": 73454849, "body": "Updated answer."}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1491242501, "post_id": 43190628, "comment_id": 73455645, "body": "Another error: <a href=\"http://imgur.com/a/qaVeI\" rel=\"nofollow noreferrer\">imgur.com/a/qaVeI</a> what is wrong with that PerlQt? You helped me.. but there are so many erros, Im thinking if PyQt is not better.."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492444040, "post_id": 43190628, "comment_id": 73964915, "body": "Seems like the module is not being actively maintained, added <a href=\"https://rt.cpan.org/Ticket/Display.html?id=121203\" rel=\"nofollow noreferrer\">bug report</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1491241146, "last_edit_date": 1491241146, "creation_date": 1491239878, "answer_id": 43190628, "question_id": 43190485, "link": "https://stackoverflow.com/questions/43190485/perlqt-cant-use-definedarray/43190628#43190628", "title": "PerlQt - Can&#39;t use &#39;defined(@array)&#39;", "body": "<blockquote>\n  <p><em>Can't use 'defined(@array)' (Maybe you should just omit the defined()?) at QtCore4.pm line 1420.</em></p>\n</blockquote>\n\n<p><code>QtCore4</code> does something that makes no sense. For now, it \"works\"&mdash;albeit noisly&mdash;but</p>\n\n<pre><code>@{$classinfos} = () if !defined @{$classinfos};\n@{$signals} = () if !defined @{$signals};\n@{$slots} = () if !defined @{$slots};\n</code></pre>\n\n<p>should be changed to</p>\n\n<pre><code>$classinfos ||= [];\n$signals ||= [];\n$slots ||= [];\n</code></pre>\n\n<p>in <code>QtCore4.pm</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>\"SvREFCNT_inc\" is not exported by the Devel::Peek module</em><br>\n  <em>Can't continue after import errors at QtGui4.pm line 25.</em></p>\n</blockquote>\n\n<p>This appears to be a bug in Devel::Peek. It used to export <code>SvREFCNT_inc</code>, and the docs still claims it does, but it doesn't anymore.</p>\n\n<p>You can work around this by replacing</p>\n\n<pre><code>use Devel::Peek qw( SvREFCNT_inc );\n</code></pre>\n\n<p>with</p>\n\n<pre><code>use Devel::Peek qw( );\nBEGIN { *SvREFCNT_inc = \\&amp;Devel::Peek::SvREFCNT_inc; }\n</code></pre>\n\n<p>in <code>QtGui4.pm</code>:</p>\n\n<p>(Note, Perl code should never have to use <code>SvREFCNT_inc</code>, so its use a hack if not a bug!)</p>\n"}], "owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 0, "accepted_answer_id": 43190628, "answer_count": 1, "score": 2, "last_activity_date": 1491241146, "creation_date": 1491239349, "question_id": 43190485, "link": "https://stackoverflow.com/questions/43190485/perlqt-cant-use-definedarray", "title": "PerlQt - Can&#39;t use &#39;defined(@array)&#39;", "body": "<p>I am trying to create simple PerlQt app but when I start my Perl script I get this error:</p>\n\n<pre><code>Can't use 'defined(@array)' (Maybe you should just omit the defined()?) at /usr/local/lib/x86_64-linux-gnu/perl/5.22.1/QtCore4.pm line 1420.\nCompilation failed in require at ./perlqt.pl line 5.\nBEGIN failed--compilation aborted at ./perlqt.pl line 5.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse QtCore4;\nuse QtGui4;\nuse Window;\n\nsub main\n{\n    my $app = Qt::Application( \\@ARGV );\n\n    if (!Qt::SystemTrayIcon::isSystemTrayAvailable()) {\n        Qt::MessageBox::critical(0, Qt::Object::this-&gt;tr('Systray'),\n                              Qt::Object::this-&gt;tr('I couldn\\'t detect any system tray ' .\n                                          'on this system.'));\n        return 1;\n    }\n    Qt::Application::setQuitOnLastWindowClosed(0);\n\n    my $window = Window();\n    $window-&gt;show();\n    return $app-&gt;exec();\n}\n\nexit main();\n</code></pre>\n\n<p>Please how to fix it? I don't use any array in my code.</p>\n"}, {"tags": ["regex", "perl", "sed", "regex-group"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1491234478, "post_id": 43188741, "comment_id": 73451079, "body": "Sed doesn&#39;t know non-greedy matching with <code>.*?</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491234707, "post_id": 43188741, "comment_id": 73451234, "body": "Can you give some sample of desired input/output?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491236239, "post_id": 43188741, "comment_id": 73452187, "body": "Why does this have a Perl tag? Are you looking for a Perl alternative solution?"}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1491237123, "post_id": 43188741, "comment_id": 73452681, "body": "Actually, I&#39;m just using perl as a tool to understand how to get this to work in a different tool that supports (Java) Regex where the <code>substitute</code> and <code>replace</code> are &quot;coded&quot; in text boxed (yikes)"}], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1491497742, "post_id": 43189440, "comment_id": 73591400, "body": "The answer/trick was about making proper use of non-capturing groups, that did it for me! Thanks. I just wonder why are you using the <code>&#47;s</code> modifier ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1491498837, "post_id": 43189440, "comment_id": 73592035, "body": "Why would I want to check if the characters are newlines?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1491236535, "last_edit_date": 1495542331, "creation_date": 1491235818, "answer_id": 43189440, "question_id": 43188741, "link": "https://stackoverflow.com/questions/43188741/replace-regex-with-captured-group-only/43189440#43189440", "title": "Replace regex with captured group ONLY", "body": "<p>First of all, <a href=\"https://stackoverflow.com/questions/16658333/grep-p-no-longer-works-how-can-i-rewrite-my-searches/16658690\">this</a> shows how to duplicate <code>grep -o</code> using Perl.</p>\n\n<hr>\n\n<p>You're asking why</p>\n\n<pre><code>foo Some text bar\n012345678901234567\n</code></pre>\n\n<p>results in just a empty string instead of</p>\n\n<pre><code>Some text\n</code></pre>\n\n<p>Well,</p>\n\n<ul>\n<li>At position 0, <code>^</code> matches 0 characters.</li>\n<li>At position 0, <code>(.*?)</code> matches 0 characters.</li>\n<li>At position 0, <code>(Some text)?</code> matches 0 characters.</li>\n<li>At position 0, <code>(.*)</code> matches 17 characters.</li>\n<li>At position 17, <code>$</code> matches 0 characters.</li>\n<li>Match succeeds.</li>\n</ul>\n\n<p>You could use</p>\n\n<pre><code>s{^ .*? (?: (Some[ ]text) .* | $ )}{ $1 // \"\" }exs;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s{^ .*? (?: (Some[ ]text) .* | $ )}{$1}xs;     # Warns if warnings are on.\n</code></pre>\n\n<p>Far simpler:</p>\n\n<pre><code>$_ = /(Some text)/ ? $1 : \"\";\n</code></pre>\n\n<hr>\n\n<p>I question your use of <code>-p</code>. Are you sure you want a line of output for each line of input? It seems to me you'd rather have</p>\n\n<pre><code>perl -nle'print $1 if /(Some text)/'\n</code></pre>\n"}], "owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "accepted_answer_id": 43189440, "answer_count": 1, "score": 0, "last_activity_date": 1491236974, "creation_date": 1491233791, "last_edit_date": 1495539998, "question_id": 43188741, "link": "https://stackoverflow.com/questions/43188741/replace-regex-with-captured-group-only", "title": "Replace regex with captured group ONLY", "body": "<p>I'm trying to understand why the following does not give me what I <em>think</em> (or want :)) should be returned:</p>\n\n<pre><code>sed -r 's/^(.*?)(Some text)?(.*)$/\\2/' list_of_values\n</code></pre>\n\n<p>or Perl:</p>\n\n<pre><code>perl -lpe 's/^(.*?)(Some text)?(.*)$/$2/' list_of_values\n</code></pre>\n\n<p>So I want my result to be <strong>just the <code>Some text</code></strong>, otherwise (meaning if there was nothing captured in <code>$2</code>) then it should just be EMPTY.</p>\n\n<p>I did notice that with <strong>perl</strong> it <em>does</em> work if <code>Some text</code> is at the start of the line/string (which baffles me...). (Also noticed that removing <code>^</code> and <code>$</code> has no effect)</p>\n\n<p>Basically, I'm trying to get what <code>grep</code> would return with the <code>--only-matching</code> option as discussed <a href=\"https://stackoverflow.com/q/1546711/3299282\">here</a>. Only I want/need to use sub/replace in the regex.</p>\n\n<p><strong>EDITED</strong> (added sample data)</p>\n\n<p>Sample input:</p>\n\n<pre><code>$ cat -n list_of_values\n     1  Black\n     2  Blue\n     3  Brown\n     4  Dial Color\n     5  Fabric\n     6  Leather and Some text after that ....\n     7  Pearl Color\n     8  Stainless Steel\n     9  White\n    10  White Mother-of-Pearl Some text stuff\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>$ perl -ple '$_ = /(Some text)/ ? $1 : \"\"' list_of_values | cat -n\n     1\n     2\n     3\n     4\n     5\n     6  Some text\n     7\n     8\n     9\n    10  Some text\n</code></pre>\n"}, {"tags": ["regex", "perl", "replace", "multiline"], "comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 2, "creation_date": 1491243540, "post_id": 43185670, "comment_id": 73456232, "body": "Honestly, i still dont get what do you want - because: your input data containing too much unnecessary parts, and mainly, because you MISSED to add the WANTED output... :) The <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is a good thing."}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491251275, "post_id": 43185670, "comment_id": 73460280, "body": "I did detail the required output above. I need to remove the entirety of a block from Charts.... to the next Charts WHERE Layer=7.  I honestly don&#39;t know how else to articulate this. Sorry, it is actually a really simple requirement but I seem not to be able to communicate it."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491259684, "post_id": 43185670, "comment_id": 73463811, "body": "Yesterday I already answered your question. Replace the <code>===NEED STRIP NEW LINE HERE===</code> with the <code>$contents = join &#39;CHARTS&#39;, grep { !&#47;Layer\\s*=\\s*7\\b&#47; } split &#47;\\bCHARTS\\b&#47;, $contents;</code> (from the <a href=\"http://stackoverflow.com/a/43168103/632407\">yesterday&#39;s answer</a> and you&#39;re done. You also could use any other answer too, like <code>$contents =  join &#39;&#39;, grep { !&#47;Layer\\s*=\\s*7\\b&#47; } split &#47;^(?=CHARTS)&#47;m, $contents</code>. Both solves the problem, and here isn&#39;t any need asking again the same question."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1491259991, "post_id": 43185670, "comment_id": 73463904, "body": "Did you even tried any of the yesterday&#39;s answers about removing the charts block with <code>Layer=7</code>?"}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491300239, "post_id": 43185670, "comment_id": 73479805, "body": "@jm666 I tried both suggestions above but the output file is created but empty. Neither creates any errors and runs but produces zero output."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491301987, "post_id": 43185670, "comment_id": 73481000, "body": "@PaulC my last try to help you. Added an answer. Using <b>exactly</b> your code (and your run command) and your data, just added the one line. It produces output. If for you not, you either: using different script, or ... nah. :)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491304777, "post_id": 43204651, "comment_id": 73482879, "body": "thanks a million for your support. It works A OK. I see now that my issue was a missing print OUTPUT line.  Sorry for being so slow, this is not my forte and I appreciate your patience."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491305242, "post_id": 43204651, "comment_id": 73483202, "body": "@PaulC yw and enjoy. :) You also could read: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1492854455, "post_id": 43204651, "comment_id": 74166601, "body": "I just wanted to follow up with @jm666 on this. I tried to vote on this solution when you posted it but apparently my reputation was insufficient (&lt;15) and I wasn&#39;t allowed to vote. I was though able to select it as the answer. I came back today to ask a follow up question and see that my reputation is mysteriously now 16 so I am voting. Sorry if it seemed I vanished without giving you props for the work you put into the solution and thanks once again."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 0, "last_activity_date": 1491301760, "last_edit_date": 1495542357, "creation_date": 1491301760, "answer_id": 43204651, "question_id": 43185670, "link": "https://stackoverflow.com/questions/43185670/regex-multine-replacement-perl/43204651#43204651", "title": "Regex multine replacement perl", "body": "<p>So, from your question:</p>\n\n<blockquote>\n  <p>I am looking to add a third 'strip' line that strips out each block in\n  its entirety <strong>WHERE Layer=7</strong>.</p>\n</blockquote>\n\n<p>Did you noticed, that in your sample data isn't any section containing <code>Layer=7</code>?</p>\n\n<p>Now the solution:</p>\n\n<p><strong>Excetly your code</strong>, with the added line from the comments (e.g. from the answers to <a href=\"https://stackoverflow.com/q/43167768/632407\">your previous same question</a>.</p>\n\n<pre><code>#!/usr/bin/perl\n\n$sub = shift @ARGV;\n$input = shift @ARGV;\n$output = shift @ARGV;\n\n\nopen INPUT, \"&lt;\",\"$input\" or die $!;         \nopen OUTPUT, \"&gt;\",\"$output\" or die $!;           \n\nlocal $/ = undef;\n$contents = &lt;INPUT&gt;;\n\n@subs = split('; ', $sub);\nforeach (@subs)\n{\n    @re = split( m/(?&lt;!\\\\)\\//, $_);\n    tr/\\\\//d for @re;\n\n    $contents =~ s/$re[1]/$re[2]/g;\n}\n\n$contents =~ s/\\[19\\]\\= &lt;&lt;&lt;\\s+Circle(?s).*?\\[28\\]\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//g;\n$contents =~ s/\\[19\\]\\= &lt;&lt;&lt;\\s+Draw Line Alarmed(?s).*?\\[28\\]\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//g;\n\n#this is the added line\n$contents = join '', grep { !/Layer\\s*=\\s*7\\b/ } split /^(?=CHARTS)/m, $contents;\n#or this works too\n#$contents = join 'CHARTS', grep { !/Layer\\s*=\\s*7\\b/ } split /\\bCHARTS\\b/, $contents;\n\nprint OUTPUT $contents;\n\nclose INPUT;\nclose OUTPUT;\n</code></pre>\n\n<p>The above:</p>\n\n<ul>\n<li>Is tested against <strong>your</strong> data.</li>\n<li>It produces output.</li>\n<li>And, if you will have in the input data some <code>CHARTS section</code> containing <code>Layer=7</code> it will be removed.</li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 43204651, "answer_count": 1, "score": 1, "last_activity_date": 1491301760, "creation_date": 1491225356, "question_id": 43185670, "link": "https://stackoverflow.com/questions/43185670/regex-multine-replacement-perl", "title": "Regex multine replacement perl", "body": "<p>Posting this question after confusing people yesterday with a slightly sloppy prior version which didn't include sufficient information.</p>\n\n<p>The questions is, I think, a fairly easy one but I am providing a LOT of context to help.</p>\n\n<p>So, I have a file (FILEA.txt), created by an automated system a subset of that file is posted at the bottom of this question and headed as ===DATA===. I am not posting the entire file as it is 36k lines long....unless it is deemed necessary.</p>\n\n<p>The file consists of MANY blocks of text, each of which describe entities (lines/circles/notations etc) on financial charts.</p>\n\n<p>Each block starts with a consistent three lines...</p>\n\n<pre><code>CHARTS\n  Color=14671839\n  Layer=X\n</code></pre>\n\n<p>Where X is a number from 1 through 12. So in the example from the file shown below we have Layer=12.</p>\n\n<p>I already have an automated process which runs daily to reformat the file into multiple formats (FILEB, FILEC, FILED etc) for users that need different formats.</p>\n\n<p>That process consists of 6-7 files. 5-6 of them produce the various formats. These are batch files and one of the examples is below:</p>\n\n<pre><code>perl supplement.pl \"s/Feed=5,8,F/Feed=3,8,F/g; s/@NQ#/NQ #F/g; s/@ES#/ES #F/g; s/@YM#/YM #F/g; s/QGC#/GC #F/g; s/QSI#/SI #F/g; s/QCL#/CL #F/g; s/QPA#/PA #F/g; s/QHG#/HG #F/g; s/QNG#/NG #F/g; s/@LB#/LBS #F/g; s/@O#/ZO #F/g; s/@RR#/ZR #F/g; s/@S#/ZS #F/g; s/@W#/ZW #F/g; s/@GF#/FC #F/g; s/@LE#/LC #F/g; s/QHO#/HO #F/g; s/@C#/ZC #F/g; s/@DX#/DX #F/g; s/AUDUSD.COMP/AUD A0-FX/g; s/USDCAD.COMP/CAD A0-FX/g; s/USDCHF.COMP/CHF A0-FX/g; s/EURUSD.COMP/EUR A0-FX/g; s/GBPUSD.COMP/GBP A0-FX/g; s/USDJPY.COMP/JPY A0-FX/g; s/NZDUSD.COMP/NZD A0-FX/g; s/@US#/ZB #F/g; s/@TY#/ZN #F/g;\" c:/PATHTOFILE/FILEA.txt c:/PATHTOFILE/FILEB.txt\n</code></pre>\n\n<p>It reads in FILEA.txt, performs the conversions and outputs to FILEB.txt</p>\n\n<p>The final file is a supplement.pl, which in addition to the format changes that are contained within each of the batch files, strips two elements from each and every format. The two lines in supplement.pl that strips out alert lines and circles each start with \"$contents =~\".</p>\n\n<p>I am looking to add a third 'strip' line that strips out each block in its entirety WHERE Layer=7. I figured this would look for Charts/n  Color=14671839/n  Layer=7 all the way through to the next \"Charts\" and replace the lot with \"Charts\" meaning the prior block vanishes. I hope this makes sense.</p>\n\n<p>I have tried to be comprehensive here but I am happy to provde additional information if it helps.</p>\n\n<p>===START SUPPLEMENT.PL===</p>\n\n<pre><code>#!/usr/bin/perl\n\n$sub = shift @ARGV;\n$input = shift @ARGV;\n$output = shift @ARGV;\n\n\nopen INPUT, \"&lt;\",\"$input\" or die $!;         \nopen OUTPUT, \"&gt;\",\"$output\" or die $!;           \n\nlocal $/ = undef;\n$contents = &lt;INPUT&gt;;\n\n@subs = split('; ', $sub);\nforeach (@subs)\n{\n    @re = split( m/(?&lt;!\\\\)\\//, $_);\n    tr/\\\\//d for @re;\n\n    $contents =~ s/$re[1]/$re[2]/g;\n}\n\n$contents =~ s/\\[19\\]\\= &lt;&lt;&lt;\\s+Circle(?s).*?\\[28\\]\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//g;\n$contents =~ s/\\[19\\]\\= &lt;&lt;&lt;\\s+Draw Line Alarmed(?s).*?\\[28\\]\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//g;\n===NEED STRIP NEW LINE HERE===\n\nprint OUTPUT $contents;\n\nclose INPUT;\nclose OUTPUT;\n</code></pre>\n\n<p>===END SUPPLEMENT.PL===</p>\n\n<p>==START SAMPLE DATA===</p>\n\n<pre><code>CHARTS\n  Color=14671839\n  Layer=12\n  [0] Font=MS SAN SERIF,10,0,F,F,\n  [1] Show=F,F,F,T,T,F,T,F,F,T,\n  [2] Scale=F,F,T,F,F,F,F,F,0,T,F,\n  [3] Grid=F,F,F,F,1,\n  [4] Paint=F,F,F,0,0,0,\n  [5] Bars=1,2000,1970,\n  [6] Colors=65793,0,0,8388608,32767,65793,0,0,\n  [7] Theme=6,0,255,65280,7566080,0,16777215,0,\n  [8] Candles=F,F,F,F,1,F,\n  [9] Filter=T,F,F,F,F,0,0\n  [10] Type=F,F,F,F,15,44656,\n  [11] Spacing=3,49,0,10,4,-7,73,\n  [12] Range=56.16,18.72,0.01,0.01\n  [13] Volume=0,100,0,0,0,0,\n  [14] Refresh=0,0,0,\n  [15] Feed=5,1,F,\n  [16] Template=\n  [17] Symbol=XLP.W\n  [18] SubSizes=0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Note: SPDR Consumer Staples Sector   &gt;&gt;&gt;\n  [20]=76,44700,0,0,513,2304,29325,4158,10,59619,29671,10589,21907,2496,29325,4158,10,\n  [21]=-2083405824,1,0,8388608,255,16711680,16711680,16711680,16711680,11842740,0,0,0,0,0,0,32,32,32,32,32,32,32,32,\n  [22]=-2083405705,1,1035611788,-1096111445,1151639552,1101497088,1147076608,1435707648,1696464,5525461,1921845696,659518,13,29,182101436,1696464,1696712,1696552,139104368,4830724,1696712,2,1696712,4225200,139104368,1696552,\n  [23]=8,0,2,67167744,1150116,0,1150116,67137536,1150828,0,0,0,0,0,0,1,1,1,1,3,1,0,0,0,0,\n  [24]=0,71,1,0,0,0,0,0,0,0,0,0,0,84,0,0,0,0,0,0,0,0,28,83,80,68,82,32,67,111,110,115,117,109,101,114,32,83,116,97,112,108,101,115,32,83,101,99,116,111,114,\n  [25]=255,242,118,160,226,25,0,80,120,35,2,0,0,0,0,71,1,0,0,0,0,0,0,0,0,0,0,213,15,122,1,240,27,244,118,0,0,0,0,252,36,11,116,152,13,232,115,116,20,35,\n  [26]=0,71,1,0,0,236,162,218,10,0,0,0,0,192,73,156,1,177,2,0,0,0,0,0,0,24,198,216,10,28,0,0,0,166,13,232,115,42,0,0,0,16,227,25,0,92,15,167,118,36,\n  [27]=163,218,10,252,197,216,10,28,0,0,0,0,0,0,0,224,228,25,0,228,4,0,0,105,15,167,118,110,115,117,109,0,0,0,0,28,0,0,0,0,0,0,64,1,0,0,0,68,227,25,\n  [28]=5506571,1696712,139104368,139104368,5506571,1696712,139104368,139104368,1944577216,24776661,0,327,0,0,3366912,1,1435707981,-2147483648,1995709424,327,0,0,0,2298996,0,\n\n  [19]= &lt;&lt;&lt;    Line     h    19.28    58.58   &gt;&gt;&gt;\n  [20]=65,44701,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,118.33334,0,118.33334,19.2794,58.58068,58.58068,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1161209,0,1161209,255,1090313,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     i    45.35    84.64   &gt;&gt;&gt;\n  [20]=65,44702,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,359.66666,0.33333,359.66666,45.34758,84.64344,84.64344,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1161209,0,1161209,255,1131025,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n  Color=14671839\n  Layer=12\n  [0] Font=MS SAN SERIF,10,0,F,F,\n  [1] Show=F,F,F,T,T,F,T,F,F,T,\n  [2] Scale=F,F,T,F,F,F,F,F,0,T,F,\n  [3] Grid=F,F,F,F,1,\n  [4] Paint=F,F,F,0,0,0,\n  [5] Bars=1,2000,1970,\n  [6] Colors=65793,0,0,8388608,32767,65793,0,0,\n  [7] Theme=6,0,255,65280,7566080,0,16777215,0,\n  [8] Candles=F,F,F,F,1,F,\n  [9] Filter=T,F,F,F,F,0,0\n  [10] Type=F,F,F,F,15,44657,\n  [11] Spacing=10,261,0,10,4,-7,73,\n  [12] Range=53.46,41.04,0.01,0.01\n  [13] Volume=0,100,0,0,0,0,\n  [14] Refresh=0,0,0,\n  [15] Feed=5,1,F,\n  [16] Template=\n  [17] Symbol=EWW.W\n  [18] SubSizes=0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     p    57.74    31.41   &gt;&gt;&gt;\n  [20]=65,47387,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,82.25,0,82.25,57.74,31.41068,31.41068,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1161209,0,1161209,255,1130628,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     q    77.54    51.23   &gt;&gt;&gt;\n  [20]=65,47388,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,65.5,0.25,65.5,77.53828,51.22672,51.22672,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1161209,0,1161209,255,1130301,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     r    62.76    36.45   &gt;&gt;&gt;\n  [20]=65,47389,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,165.25,0,165.25,62.75862,36.44707,36.44707,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1161209,0,1161209,255,1150130,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n  Color=14671839\n  Layer=12\n  [0] Font=MS SAN SERIF,10,0,F,F,\n  [1] Show=F,F,F,T,T,F,T,F,F,T,\n  [2] Scale=F,F,T,F,F,F,F,F,0,T,F,\n  [3] Grid=F,F,F,F,1,\n  [4] Paint=F,F,F,0,0,0,\n  [5] Bars=1,2000,1970,\n  [6] Colors=65793,20480,1376384,8388608,32767,65793,0,0,\n  [7] Theme=6,0,255,65280,7566080,0,16777215,0,\n  [8] Candles=F,F,F,F,1,F,\n  [9] Filter=T,F,F,F,F,0,0\n  [10] Type=F,F,F,F,15,44658,\n  [11] Spacing=3,290,0,10,4,-7,73,\n  [12] Range=39.6,7.92,0.62,0.01\n  [13] Volume=0,100,0,0,0,0,\n  [14] Refresh=0,0,0,\n  [15] Feed=5,1,F,\n  [16] Template=\n  [17] Symbol=XHB.W\n  [18] SubSizes=0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     o    19.94    43.15   &gt;&gt;&gt;\n  [20]=65,9114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,27.5,0,27.5,19.94,43.1505,43.1505,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=1,0,0,0,1160101,0,1160101,255,1100423,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     p     7.96    31.18   &gt;&gt;&gt;\n  [20]=65,9115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,-0.25,0.25,-0.25,7.95896,31.18213,31.18213,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=3,0,0,0,1150605,0,1150605,255,1090313,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     q    11.20    34.43   &gt;&gt;&gt;\n  [20]=65,9116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,88.75,0.25,88.75,11.20242,34.42559,34.42559,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=3,0,0,0,1160101,0,1160101,255,1110624,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Line     r    18.50    41.72   &gt;&gt;&gt;\n  [20]=65,9117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [21]=16711680,16711680,8421376,0,255,255,16711680,16711680,65280,16744447,32767,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [22]=0,0,133,0.5,133,18.5002,41.72338,41.72338,5,0,0,0,0,0,0,1,0,0.1,0,0,0,0,0,0,0,0,\n  [23]=3,0,0,0,1160101,0,1160101,255,1120427,1,2,2,1,0,1,1,1,1,1,1,1,0,0,0,0,\n  [24]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [25]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [26]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [27]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n  [19]= &lt;&lt;&lt;    Note: SPDR Homebuilders ETF   &gt;&gt;&gt;\n  [20]=76,44659,0,0,513,63488,25,5552,29674,39301,9851,27405,26412,63420,25,2963,29325,\n  [21]=-2083405824,1,0,8388608,255,16711680,16711680,16711680,16711680,11842740,0,0,0,0,0,0,32,32,32,32,32,32,32,32,\n  [22]=-2083405705,1,1056964608,1106597205,1155792896,1090936302,1146437632,0,1,0,0,112,-1,-1,1944577820,1944579083,0,0,0,0,0,1921845696,0,31918584,0,16,\n  [23]=\n</code></pre>\n\n<p>==END SAMPLE DATA===</p>\n"}, {"tags": ["perl", "counting", "word-count"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1491223355, "post_id": 43183490, "comment_id": 73442793, "body": "<code>@tab</code> is always one element array, and <code>foreach&#47;last</code> over it doesn&#39;t make sense."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1491223714, "post_id": 43183490, "comment_id": 73443057, "body": "remove the <code>map { split }</code> from the <code>map { split } &lt;$fh2&gt;;</code>"}, {"owner": {"reputation": 3751, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491230595, "post_id": 43183490, "comment_id": 73448366, "body": "You have <code>use autodie;</code> twice and you don&#39;t have <code>use warnings;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1491230200, "last_edit_date": 1491230200, "creation_date": 1491229448, "answer_id": 43187212, "question_id": 43183490, "link": "https://stackoverflow.com/questions/43183490/why-doesnt-last-let-me-quit-a-foreach-loop/43187212#43187212", "title": "Why doesn&#39;t `last` let me quit a foreach loop?", "body": "<p>The code expects <code>@tab_phrase_CORPUS</code> to contain lines, but it contains words.</p>\n\n<pre><code>my @tab_phrase_CORPUS = do {\n    open my $fh2, \"&lt;:utf8\", CORPUS_Phrases;\n    map { split } &lt;$fh2&gt;;\n};\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>my @tab_phrase_CORPUS = do {\n    open my $fh2, \"&lt;:utf8\", CORPUS_Phrases;\n    map { chomp; $_ } &lt;$fh2&gt;;\n};\n</code></pre>\n\n<hr>\n\n<p>Tip: Remove <code>chomp @tab;</code>. The newlines have already been removed as you read from the file, which is the proper time to do it.</p>\n\n<p>Tip: <code>my @tab = split(/ /, $ph);</code> is better written as <code>my @tab = split(' ', $ph);</code>. The former splits on individual spaces, the latter is a special case that splits on whitespace.</p>\n"}], "owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491231776, "creation_date": 1491218992, "last_edit_date": 1491231776, "question_id": 43183490, "link": "https://stackoverflow.com/questions/43183490/why-doesnt-last-let-me-quit-a-foreach-loop", "title": "Why doesn&#39;t `last` let me quit a foreach loop?", "body": "<p>I want to calculate the number of sentences that contain a word. I have 2 files, one contains sentences and the other contains words, so for each word I would count the number of sentences containing this word.</p>\n\n<p>This is my code:</p>\n\n<pre><code>use strict;\nuse autodie;\nuse autodie;\n\nopen my $fh_resultat, \"&gt;:utf8\", 'out';\nuse constant CORPUS_MOT =&gt; 'test';\nuse constant CORPUS_Phrases =&gt; 'phrases';\nmy @tab_MOT_CORPUS = do {\n    open my $fh1, \"&lt;:utf8\", CORPUS_MOT;\n    map { split } &lt;$fh1&gt;;\n\n};\n\nmy @tab_phrase_CORPUS = do {\n    open my $fh2, \"&lt;:utf8\", CORPUS_Phrases;\n    map { split } &lt;$fh2&gt;;\n\n};\n\nforeach my $mot (@tab_MOT_CORPUS) {\n\n    my $nb_phrase = 0;\n\n    foreach my $ph (@tab_phrase_CORPUS) {\n\n        my @tab = split(/ /, $ph);\n\n        chomp @tab ;\n\n        #it should quit foreach if mot == val \n        foreach my $val(@tab) {\n\n          if ($mot eq $val) {\n\n            $nb_phrase = $nb_phrase + 1;\n            last;\n\n          }\n\n        }\n\n    }\n\n    print $fh_resultat \"$mot:$nb_phrase\\n\";\n}\n\nprint \"$nbre_ligne\\n\";\n</code></pre>\n\n<p>For example if I have these 2 sentences:</p>\n\n<pre><code>word1 is in sentence1 word1 \n\nword2 is in sentence2\n</code></pre>\n\n<p>the result should be:</p>\n\n<pre><code>word1:1\n\nword2:1\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 3, "last_activity_date": 1491213863, "creation_date": 1491213863, "answer_id": 43181741, "question_id": 43181671, "link": "https://stackoverflow.com/questions/43181671/extract-only-pattern-matched-text/43181741#43181741", "title": "Extract only pattern matched text", "body": "<p>If you want to print 1234, you need to change your regex and print the 2nd match:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line = \"ABMA 1234\";\n$line =~ /(\\s)(\\d{4})/;\n\nprint $2;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1491215089, "post_id": 43181775, "comment_id": 73436974, "body": "What is the use of character class in your regex?"}], "tags": [], "owner": {"reputation": 7142, "user_id": 5345150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sql34.jpg?s=128&g=1", "display_name": "Abhishek Gurjar", "link": "https://stackoverflow.com/users/5345150/abhishek-gurjar"}, "is_accepted": false, "score": 2, "last_activity_date": 1491213989, "creation_date": 1491213989, "answer_id": 43181775, "question_id": 43181671, "link": "https://stackoverflow.com/questions/43181671/extract-only-pattern-matched-text/43181775#43181775", "title": "Extract only pattern matched text", "body": "<p>I don't know how you output the match in perl but you can use below regex for output the full match in your regex, you might getting space appended with your result in your current regex.</p>\n\n<pre><code>\\b[\\d]{4}\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/426AUg/1\" rel=\"nofollow noreferrer\"><strong>DEMO</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491220186, "post_id": 43181844, "comment_id": 73440378, "body": "The character class <code>[A-z]</code> includes <code>[</code>, <code>`, </code>]<code>, </code>^<code>, </code>_<code>, and </code>`` as well as the upper and lower case English letters. You want <code>[A-Za-z]</code>, or <code>[[:alpha:]]</code> or <code>\\p{PosixAlpha}</code>, both of whixh need the <code>&#47;a</code> modifier to prevent matching non-ASCII letters."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 2, "last_activity_date": 1491214222, "creation_date": 1491214222, "answer_id": 43181844, "question_id": 43181671, "link": "https://stackoverflow.com/questions/43181671/extract-only-pattern-matched-text/43181844#43181844", "title": "Extract only pattern matched text", "body": "<p>You can replace the exact value with the corresponding values. And your are not removing the text <code>\\w</code>;</p>\n\n<pre><code>use strict;  \nuse warnings;\n\nmy $line = \"ABMA 1234\";\n$line=~s/([A-z]*)\\s+(\\d+)/$2/;\n\nprint $line; #prints only 1234\n</code></pre>\n\n<p>If you want to store the value in the new string then </p>\n\n<pre><code>(my $newstring = $line)=~s/([A-z]*)\\s+(\\d+)/$2/;\n\nprint $newstring; #prints only 1234\n</code></pre>\n\n<p>Just try this:</p>\n"}], "owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43181844, "answer_count": 3, "score": 1, "last_activity_date": 1492580911, "creation_date": 1491213645, "last_edit_date": 1492580911, "question_id": 43181671, "link": "https://stackoverflow.com/questions/43181671/extract-only-pattern-matched-text", "title": "Extract only pattern matched text", "body": "<p>I have written a basic program using regular expression.\nHowever the entire line is being returned instead of the matched part.</p>\n\n<p>I want to extract the number only.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line = \"ABMA 1234\";\n$line =~ /(\\s)(\\d){4}/;\n\nprint $line; #prints *ABMA 1234*\n</code></pre>\n\n<p>Is my regular expression incorrect?</p>\n"}, {"tags": ["perl", "operators"], "answers": [{"comments": [{"owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "edited": false, "score": 0, "creation_date": 1491216572, "post_id": 43181352, "comment_id": 73437959, "body": "Thanks. Consider all the time I&#39;ve spent reading through the Perl documentation, this was quite embarrasing that I couldn&#39;t figure out myself. Considering the <i>Help Center &gt; Asking</i>-article, I&#39;m now a little unsure if I should delete the question, which was about nothing but trivial syntax, after all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "edited": false, "score": 2, "creation_date": 1491230442, "post_id": 43181352, "comment_id": 73448263, "body": "@Magnus, No need to delete."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 8, "last_activity_date": 1491215479, "last_edit_date": 1491215479, "creation_date": 1491212659, "answer_id": 43181352, "question_id": 43181102, "link": "https://stackoverflow.com/questions/43181102/what-does-this-perl-statement-mean/43181352#43181352", "title": "What does this Perl statement mean?", "body": "<p>In the</p>\n\n<pre><code>$var2 =~ s|/|\\\\|g;\n</code></pre>\n\n<p>the <code>s/pattern/replacement/</code> is the <a href=\"http://perldoc.perl.org/functions/s.html\" rel=\"noreferrer\">substitution operator</a>.</p>\n\n<blockquote>\n  <p>Searches a string for a pattern, and if found, replaces that pattern\n  with the replacement text and returns the number of substitutions\n  made. Otherwise it returns false (specifically, the empty string).</p>\n</blockquote>\n\n<p>The <code>|</code> isn't \"<em>binary or</em>\" - it is a delimiter. In the <code>s</code> you can use any delimiter, especially for easier reading.</p>\n\n<p>from the <code>perlop</code> <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"noreferrer\">Regexp Quote-Like Operators</a></p>\n\n<blockquote>\n  <p>Any non-whitespace delimiter may replace the slashes. Add space after\n  the s when using a character allowed in identifiers. If single quotes\n  are used, no interpretation is done on the replacement string (the /e\n  modifier overrides this, however). Note that Perl treats backticks as\n  normal delimiters; the replacement text is not evaluated as a command.\n  If the PATTERN is delimited by bracketing quotes, the REPLACEMENT has\n  its own pair of quotes, which may or may not be bracketing quotes, for\n  example, s(foo)(bar) or s/bar/.</p>\n</blockquote>\n\n<p>The above replaces every <code>/</code> with <code>\\</code> in the <code>$var2</code>. (The <code>\\</code> is escape character, therefore you need use <code>\\\\</code>).</p>\n\n<pre><code>my $v='/a/b/c';\n$v =~ s|/|\\\\|g;\nprint \"$v\\n\";\n# \\a\\b\\c\n</code></pre>\n\n<p>Also,</p>\n\n<blockquote>\n  <p>If no string is specified via the =~ or !~ operator, the $_ variable\n  is searched and modified.</p>\n</blockquote>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$_ = $v;     # assign the $_\ns{\\\\}{/}g;   # substitution on the $_ using bracketed delimiters\nprint;       # without args prints the $_\n# /a/b/c\n</code></pre>\n"}], "owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 43181352, "answer_count": 1, "score": 3, "last_activity_date": 1491218699, "creation_date": 1491211930, "last_edit_date": 1491218699, "question_id": 43181102, "link": "https://stackoverflow.com/questions/43181102/what-does-this-perl-statement-mean", "title": "What does this Perl statement mean?", "body": "<p>I'm trying to parse a Perl script to Python. I have next to no experience with Perl, but still it's going surprisingly smooth. The Perl documentation is vast and impressive. However, from time to time there are some really cryptic syntax I really can't figure out and I'm not in a position of communicating with the author of the script. The following has given me a headache for quite some time now:</p>\n\n<pre><code>sub someSubroutine\n{\n    my ($var1, $var2, $var3) = @_;\n\n    # some Perl code\n\n    $var2 =~ s|/|\\\\|g;\n\n    # and then some more code ..\n}\n</code></pre>\n\n<p>I really don't get this one particular and lonely line</p>\n\n<pre><code>$dst =~ s|/|\\\\|g;\n</code></pre>\n\n<p>I'm clear that it makes a search/string-match in <code>$var2</code> with some binary OR operations, but the result is not stored.</p>\n\n<p>I wonder if it has any not so apparent side effects, for instance is it automatically stored in <code>$_</code>?</p>\n\n<p>From what I've read, the default variables are set automatically when one calls a subroutine, initiates a loop or similar, but nothing about when using operators.</p>\n\n<p>I would really appreciate any help or pointers to appropriate documentation.</p>\n"}, {"tags": ["perl", "datetime", "parsing", "strptime"], "comments": [{"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1491210310, "post_id": 43180254, "comment_id": 73433815, "body": "Note that there is no such thing as a &quot;European date format&quot;. While <code>dd&#47;mm&#47;yyyy</code> is probably the most common, germanic countries generally use dots (<code>dd.mm.yyyy</code>) instead, as in the given <code>$format</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491211989, "post_id": 43180254, "comment_id": 73434960, "body": "Why subtract the five hours individually? What&#39;s wrong with <code>5 * ONE_HOUR</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491212658, "post_id": 43180254, "comment_id": 73435450, "body": "By &quot;European date format&quot;, I think you mean &quot;<a href=\"https://en.wikipedia.org/wiki/Date_format_by_country\" rel=\"nofollow noreferrer\">date format used in most of the world</a>&quot; :-)"}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 0, "creation_date": 1491213890, "post_id": 43180254, "comment_id": 73436241, "body": "By European date format, I mean first the day and then the month (American formats tend to put the month before), hence &quot;03/04/2017&quot; means &quot;third of April&quot; and not &quot;Fourth of March&quot;. I&#39;m sorry but I have no clue on date formats in other continents :-)"}], "answers": [{"comments": [{"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 1, "creation_date": 1491210797, "post_id": 43180363, "comment_id": 73434138, "body": "Sorry, I&#39;m not really well awake :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 0, "creation_date": 1491211068, "post_id": 43180363, "comment_id": 73434345, "body": "@Dominique don&#39;t worry about it. I&#39;ll edit your title so it is actually valid and retract my close-vote for typo. I&#39;ve run into this myself a couple of times, and I think it makes sense to keep this around."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1491209728, "creation_date": 1491209728, "answer_id": 43180363, "question_id": 43180254, "link": "https://stackoverflow.com/questions/43180254/why-does-strptime-from-timepiece-not-parse-my-format/43180363#43180363", "title": "Why does strptime from Time::Piece not parse my format?", "body": "<p>In the format you have dots <code>.</code> as the date delimiter, but in the data you have slashes <code>/</code>. That's why it doesn't parse. It needs an exact match.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1491212438, "creation_date": 1491212438, "answer_id": 43181273, "question_id": 43180254, "link": "https://stackoverflow.com/questions/43180254/why-does-strptime-from-timepiece-not-parse-my-format/43181273#43181273", "title": "Why does strptime from Time::Piece not parse my format?", "body": "<p>I think it's worth clarifying that <code>strptime()</code> will parse most date and time formats - that's the point of the method. But you need to define the format of the date string that you are parsing. That's what the second parameter to <code>strptime()</code> (in this case, your <code>$format</code> variable) is for.</p>\n\n<p>The letters used in the format are taken from a standard list of definitions which used by every implementation of <code>strptime()</code> (and its inverse, <code>strftime()</code>). See <code>man strptime</code> on your system for a complete list of the available options.</p>\n\n<p>In your case, the format is <code>%d.%m.%Y %H:%M</code> - which means that it will parse timestamps which have the day, month and year separated by dots, followed by a space and the hours and minutes separated by a colon. If you want to parse timestamps in a different format, then you will need to change the definition of <code>$format</code>.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 43180363, "answer_count": 2, "score": 1, "last_activity_date": 1604259525, "creation_date": 1491209482, "last_edit_date": 1604259525, "question_id": 43180254, "link": "https://stackoverflow.com/questions/43180254/why-does-strptime-from-timepiece-not-parse-my-format", "title": "Why does strptime from Time::Piece not parse my format?", "body": "<p>My collegue (who has left the company) has written a bunch of scripts, including batch and Perl scripts, and I'm getting rid of the regional settings dependencies.</p>\n\n<p>In the last Perl script, he's written the following piece of code:</p>\n\n<pre><code>my $format = \"%d.%m.%Y %H:%M\";\nmy $today_converted = Time::Piece-&gt;strptime($today, $format) - ONE_HOUR - ONE_HOUR - ONE_HOUR - ONE_HOUR - ONE_HOUR; \n</code></pre>\n\n<p>(the idea is to get five hours before midnight of that particular date)</p>\n\n<p>The value of <code>$today</code> seems to be \"03/04/2017\" (which stands for the third of April (European dateformat)), which seems not to be understood by Time::Piece implementation:</p>\n\n<pre><code>Error parsing time at C:/Perl64/lib/Time/Piece.pm line 481.\n</code></pre>\n\n<p>Which format can I use which is understood by Time::Piece Perl implementation?</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1491209117, "post_id": 43180087, "comment_id": 73433156, "body": "Which sendmail function you would like to use?"}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1491209226, "post_id": 43180087, "comment_id": 73433219, "body": "Actually, within my code, I&#39;m calling my sub correctly. The sendmail within my sub Sendmail is part of the Email::Simple class."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1491209288, "post_id": 43180087, "comment_id": 73433249, "body": "The you have to call it eith the package name <code>Email::Simple::sendmail</code>"}, {"owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1491209538, "post_id": 43180087, "comment_id": 73433379, "body": "Sorry. It was actually part of something else. I needed to <code>use Email::Sender::Simple qw(sendmail);</code>"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1491209622, "post_id": 43180087, "comment_id": 73433433, "body": "That is the second possibility"}], "answers": [{"tags": [], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "is_accepted": false, "score": 1, "last_activity_date": 1491225361, "creation_date": 1491225361, "answer_id": 43185671, "question_id": 43180087, "link": "https://stackoverflow.com/questions/43180087/subroutine-declaration-issue/43185671#43185671", "title": "Subroutine declaration issue", "body": "<p>In the SendEmail subroutine, I had used <code>sendmail</code> without remembering to declare it. </p>\n\n<p>This is solved by explicitly declaring it with:</p>\n\n<pre><code>use Email::Sender::Simple qw(sendmail);\n</code></pre>\n\n<p>before using the call to sendmail.</p>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "closed_date": 1491227362, "answer_count": 1, "score": 0, "last_activity_date": 1491225361, "creation_date": 1491208898, "last_edit_date": 1491211680, "question_id": 43180087, "link": "https://stackoverflow.com/questions/43180087/subroutine-declaration-issue", "closed_reason": "Not suitable for this site", "title": "Subroutine declaration issue", "body": "<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Web::Scraper;\nuse Data::Dumper;\nuse Config::Simple;\nuse Email::Simple ();\nuse Email::Sender::Transport::SMTP;\nuse URI;\nuse JSON;\nuse Digest::MD5 qw(md5_hex);\nuse POSIX qw/strftime/;\n\nmy $TimeStamp    = strftime('%Y-%m-%d',localtime);\nmy $purlToScrape = 'http://www.natboard.edu.in/dnbfinal.php';\nmy $webdata      = scraper {      \n    process 'td.noticeboard', \"data[]\" =&gt; 'TEXT';      \n};\nmy $dnbnotices   = $webdata-&gt;scrape(URI-&gt;new($purlToScrape));\nmy (@data)       = ();\nmy $configfile   = '/root/dnbfscrape.conf';\nmy $olddigest;\nmy $EmailSub     = '';\nmy $EmailBody    = '';\n\nsub WriteConfigurationFile;\nsub LoadConfigurationFile;\nsub SendEmail;\n\nLoadConfigurationFile;\n\nmy $board=$dnbnotices-&gt;{data};\nmy @noticeboard = @$board;\n\nmy $count = 0;\n\nprintf ( \"%3s %-18s %-30s %-30s\\n\", \"No:\", \"Session\", \"Title\", \"Last date\" );\n\nfor ( my $index = 0; $index &lt;= $#noticeboard; $index += 5 ) {\n    printf ( \"%3d %-18s %-30s %-30s\\n\", ++$count, $noticeboard[$index], $noticeboard[$index+1], $noticeboard[$index+2] );  \n}\n\nmy $json_str = encode_json(\\@noticeboard);  # This will work now\nmy $digest   = md5_hex($json_str);\n\nif ( $digest eq $olddigest ) {\n\n    print \"The page has not changed.\\n\";\n\n    my $EmailSub  = 'No change in DNB Final Notices';\n    my $EmailBody = 'The DNB Notice page for applications has not changed as of '.$TimeStamp.\"\\n\";\n\n    SendEmail;\n}\n\n# print \"$digest\";\n\nWriteConfigurationFile($digest);\n\n\nsub WriteConfigurationFile {  \n    my $digest = shift;\n\n    # print \"\\n\\n\". $digest.\"\\n\";\n\n    my $cfg = new Config::Simple(syntax =&gt; 'ini');\n\n    $cfg-&gt;param(\"dnb.digest\", $digest); \n    # $cfg-&gt;param(\"old.digest\", md5_hex($new_title));\n\n    $cfg-&gt;write($configfile);\n}\n\nsub LoadConfigurationFile {\n\n    my $cfg = new Config::Simple(syntax =&gt; 'ini');\n\n    $cfg-&gt;read($configfile);\n    $olddigest = $cfg-&gt;param(\"dnb.digest\");  \n}\n\nsub SendEmail {\n\n    my $smtpserver   = 'smtp.mandrillapp.com';\n    my $smtpport     = 587;\n    my $smtpuser     = 'servermailer@eyrie.in';\n    my $smtppassword = 'ed61DZIbxGIKRANRnsWyug';\n\n    my $transport = Email::Sender::Transport::SMTP-&gt;new( {\n        host          =&gt; $smtpserver,\n        port          =&gt; $smtpport,\n        sasl_username =&gt; $smtpuser,\n        sasl_password =&gt; $smtppassword,\n    } );\n\n    my $email = Email::Simple-&gt;create(\n        header =&gt; [\n            To      =&gt; 'joel@eyrie.in',\n            From    =&gt; 'servermailer@eyrie.in',\n            Subject =&gt; $EmailSub,\n        ],\n        body   =&gt; $EmailBody.\"\\n\",\n    );\n\n    sendmail( $email, { transport =&gt; $transport } );\n}\n</code></pre>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>Undefined subroutine &amp;main::sendmail called at ./test1.pl line 86.</p>\n</blockquote>\n\n<p>even though I explicitly declared it. Why?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491206385, "post_id": 43178857, "comment_id": 73431709, "body": "If you want to dump a hash or array, use <code>Dumper(\\%hash)</code> or <code>Dumper(\\@array)</code>. It&#39;s too confusing otherwise, as you&#39;ve found out (since your array truly does have only one element, a reference to another array)."}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 4, "last_activity_date": 1491205328, "creation_date": 1491205328, "answer_id": 43179112, "question_id": 43178857, "link": "https://stackoverflow.com/questions/43178857/unexpected-output-with-arrays/43179112#43179112", "title": "Unexpected output with arrays", "body": "<p>1- <a href=\"https://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\"><code>ref</code></a> returns an empty string when called on something else than a ref. So when doing <code>ref @xxx</code>, you can't expect anything else than an empty string.<br>\nFurthermore, <code>ref @noticeboard.\"\\n\\n\"</code> is the same as <code>ref ((scalar @noticeboard).\"\\n\\n\")</code>, which is <code>ref \"1\\n\\n\"</code>, which returns an empty string.</p>\n\n<p>2-3-4- <a href=\"http://search.cpan.org/~miyagawa/Web-Scraper-0.38/lib/Web/Scraper.pm#scrape\" rel=\"nofollow noreferrer\"><code>scrape</code></a> returned you an array reference, not an array. So when assigning it to an array (<code>my @noticeboard=$dnbnotices-&gt;{data}</code>), it went in the first element. (the fact that the array only has one element that is an array ref explains your question 2, 3 and 4).</p>\n\n<p>Your script should be:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Web::Scraper;\nuse Data::Dumper;\nuse URI;\nmy $purlToScrape='http://www.natboard.edu.in/dnbfinal.php';\nmy $webdata = scraper {      \n      process 'td.noticeboard', \"data[]\" =&gt; 'TEXT';      \n  };\nmy $dnbnotices = $webdata-&gt;scrape(URI-&gt;new($purlToScrape));\nmy $noticeboard=$dnbnotices-&gt;{data};\nprint \"ref=\",ref($noticeboard),\"\\n\\n\";\nprint \"dumper:\",Dumper($noticeboard);\nprint \"nb elements:\",scalar @$noticeboard,\"\\n\";\nprint \"content:\\n\";\nfor my $notice ( @$noticeboard ) {\n    if ($notice) {\n        print \"  \",$notice,\"\\n\";\n    }    \n}\nprint \"first element:\",$noticeboard-&gt;[1];\n</code></pre>\n\n<p>Also, feel free to use <a href=\"https://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\"><code>say</code></a> instead of <code>print ... \"\\n\"</code>, it can be more convenient. (you'll need <code>use feature 'say'</code> or <code>use v5.10</code> or higher though).</p>\n\n<p>If you need further references about references, see <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>.</p>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 43179112, "answer_count": 1, "score": 0, "last_activity_date": 1491205328, "creation_date": 1491204451, "question_id": 43178857, "link": "https://stackoverflow.com/questions/43178857/unexpected-output-with-arrays", "title": "Unexpected output with arrays", "body": "<p>This is my script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Web::Scraper;\nuse Data::Dumper;\nuse URI;\nmy $purlToScrape='http://www.natboard.edu.in/dnbfinal.php';\nmy $webdata = scraper {      \n      process 'td.noticeboard', \"data[]\" =&gt; 'TEXT';      \n  };\nmy $dnbnotices = $webdata-&gt;scrape(URI-&gt;new($purlToScrape));\nmy @noticeboard=$dnbnotices-&gt;{data};\nprint ref @noticeboard.\"\\n\\n\";\nprint Dumper(@noticeboard);\nprint scalar @noticeboard.\"\\n\";\nfor my $notice ( @noticeboard ) {\n    if ($notice) {\n        print $notice.\"\\n\";\n    }    \n}\nprint $noticeboard[1];\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> $VAR1 = [\n           'December - 2016 ',\n           'DNB Final December -2016',\n           '30th September, 2016',\n           '',\n           '',\n           'JUNE - 2016 ',\n           'DNB Final JUNE -2016',\n           '15th May, 2016',\n           '',\n           '',\n           'Dec - 2015 ',\n           'DNB Final Dec -2015',\n           '9th October, 2015',\n           '',\n           '',\n           'June - 2015 ',\n           'DNB Final June -2015',\n           '6th May, 2015',\n           '',\n           '',\n           'December - 2014 ',\n           'DNB Final December - 2014',\n           '30th September, 2014',\n           '',\n           ''\n         ];\n 1\n ARRAY(0x4521bd8)\n Use of uninitialized value in print at ./test1.pl line 21.\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>Why is the ref not printing out \"ARRAY\"?</li>\n<li>Why is the array count shown as 1? It's not a single element array.</li>\n<li>Why are the elements of the array not being printed out?</li>\n<li>Why is <code>$noticeboard[1]</code> uninitialized?</li>\n</ol>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1491522814, "post_id": 43178671, "comment_id": 73603753, "body": "I changed some text formatting, highlighted some numbers and added two relevant tags."}], "answers": [{"comments": [{"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "reply_to_user": {"reputation": 3, "user_id": 7807185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMvxVY0ChmQ/AAAAAAAAAAI/AAAAAAAAAQA/BZLZlex-1oM/photo.jpg?sz=128", "display_name": "Manjunath S", "link": "https://stackoverflow.com/users/7807185/manjunath-s"}, "edited": false, "score": 1, "creation_date": 1491522400, "post_id": 43181954, "comment_id": 73603628, "body": "@ManjunathS: On SO, if you find that an answer has helped you, it is considered polite to accept it."}], "tags": [], "owner": {"reputation": 28, "user_id": 7262244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205950586363323/picture?type=large", "display_name": "Abhishek Mohan", "link": "https://stackoverflow.com/users/7262244/abhishek-mohan"}, "is_accepted": true, "score": 1, "last_activity_date": 1491214487, "creation_date": 1491214487, "answer_id": 43181954, "question_id": 43178671, "link": "https://stackoverflow.com/questions/43178671/perl-script-to-convert-the-string-exp501-1-01-0-to-exp501-01/43181954#43181954", "title": "perl script to convert the string EXP501.1-01.0 to EXP501_01", "body": "<pre><code>    my $string = \"EXP501.1-01.0\";\n    $short = substr($string, 0, -7);\n    $new = substr($string,8,-2);\n    my $str = $short . $new;\n    $str =~ s/ - /_/g; # Replace all \" - \" with \"_\"\n    $str =~ s/[^A-Za-z0-9]/_/g; # Replace all non-alphanumericals with \"_\"\n\n    print $str . \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7807185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WMvxVY0ChmQ/AAAAAAAAAAI/AAAAAAAAAQA/BZLZlex-1oM/photo.jpg?sz=128", "display_name": "Manjunath S", "link": "https://stackoverflow.com/users/7807185/manjunath-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 2, "accepted_answer_id": 43181954, "answer_count": 1, "score": -1, "last_activity_date": 1508334101, "creation_date": 1491203802, "last_edit_date": 1508334101, "question_id": 43178671, "link": "https://stackoverflow.com/questions/43178671/perl-script-to-convert-the-string-exp501-1-01-0-to-exp501-01", "title": "perl script to convert the string EXP501.1-01.0 to EXP501_01", "body": "<p>I want to convert the string </p>\n\n<blockquote>\n  <p>EXP501.1-01.0 </p>\n</blockquote>\n\n<p>to </p>\n\n<blockquote>\n  <p>EXP501_01</p>\n</blockquote>\n\n<p>That means <code>-01</code>, <code>-02</code>, <code>-03</code>... are incremental and I want to append that same number which is in first string next to the <code>_</code> of the second string (which will be parsed on the basis of the first string).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1491202686, "post_id": 43178009, "comment_id": 73429796, "body": "What is the format of the input files? How much memory does your machine have?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491202913, "post_id": 43178009, "comment_id": 73429915, "body": "SO you out trying to to identify the lines in file2 that aren&#39;t in file1?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1491203367, "post_id": 43178009, "comment_id": 73430110, "body": "@nmkishore as mentioned in the other question, we just need to read the lines 1 by one and not store everything in memory, I will write an answer now."}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1526905168, "post_id": 43178009, "comment_id": 87910712, "body": "So\u2026 this is a Perl question about working with really big files in an environment where it appears Hadoop is running. Could you have used Hadoop?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1491204880, "last_edit_date": 1491204880, "creation_date": 1491203646, "answer_id": 43178623, "question_id": 43178009, "link": "https://stackoverflow.com/questions/43178009/my-perl-comparison-script-is-failing-while-running-on-huge-txt-files-can-any-one/43178623#43178623", "title": "My perl comparison script is failing while running on huge txt files can any one help out on performance improvement", "body": "<p>You're loading the entire file into memory. Obviously, that's a no-go.</p>\n\n<p>So you out trying to to identify the lines in file2 that aren't in file1? That can be done with no memory if the files are sorted. So start by sorting the files. The unix <code>sort</code> utility can handle files of arbitrary size, so let's use that.</p>\n\n<pre><code>diff -u &lt;( sort -u file1 ) &lt;( sort -u file2 ) | tail -n +3 | grep ^+ | cut -c 2-\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub compare {\n   my ($qfn1, $qfn2) = @_;\n\n   open(my $fh1, '-|', 'sort', '-u', '--', $qfn1) or die $!;\n   open(my $fh2, '-|', 'sort', '-u', '--', $qfn2) or die $!;\n\n   my $line1 = &lt;$fh1&gt;;\n   my $line2 = &lt;$fh2&gt;;\n   while ($line1 &amp;&amp; $line2) {\n      my $cmp = $line1 cmp $line2;\n      print($line2) if $cmp &gt; 0;\n      $line1 = &lt;$fh1&gt; if $cmp &lt;= 0;\n      $line2 = &lt;$fh2&gt; if $cmp &gt;= 0;\n   }\n\n   while ($line2) {\n      print($line2);\n      $line2 = &lt;$fh2&gt;;\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "is_accepted": false, "score": 0, "last_activity_date": 1526908840, "last_edit_date": 1526908840, "creation_date": 1526908533, "answer_id": 50449752, "question_id": 43178009, "link": "https://stackoverflow.com/questions/43178009/my-perl-comparison-script-is-failing-while-running-on-huge-txt-files-can-any-one/50449752#50449752", "title": "My perl comparison script is failing while running on huge txt files can any one help out on performance improvement", "body": "<p>I see you're processing a Hadoop environment's output and worried about files that are too large to process with Perl on a single machine. Luckily Hadoop gives you an environment to use multiple-machines (or not) for your problem. They call it <a href=\"http://hadoop.apache.org/docs/current3/hadoop-streaming/HadoopStreaming.html\" rel=\"nofollow noreferrer\">Hadoop Streaming</a>.</p>\n\n<p>So, if you made a mapper that mapped all input lines to a file name, you could run multiple such mappers over multiple files or file splits, producing something like:</p>\n\n<pre><code># key \\t value\nlineA \\t file1\nlineB \\t file1\nlineC \\t file1\nlineA \\t file2\nlineC \\t file2\n\u2026\n</code></pre>\n\n<p>A set of reducers could then run to reduce the results. Mappers hash the keys to determine which reducer the key value pair will be sent to, so any number of reducers which append values together should produce the correct intermediate representation like:</p>\n\n<pre><code># key \\t value-reduced\nlineA \\t file1 , file2\nlineB \\t file1\nlineC \\t file1 , file2\n</code></pre>\n\n<p>This can be stored to multiple files in a hdfs directory if the line itself is stored with the value. That could be mapped with Hive to a table where you could query just the lines you're interested in using SQL syntax. Or you could run another mapper(s) over all this input to drop lines you're not interested in (only in file2?, in both files? in all files (you could be handling more files)).</p>\n\n<p>All of this could be implemented using the <a href=\"http://hadoop.apache.org/docs/r1.2.1/streaming.html\" rel=\"nofollow noreferrer\">hadoop-streaming</a> (a.ka. plain-text) interface, and perl/python/bash. Though honestly implementing it perfectly is not something I have time for right here &amp; now.\nThe input file name is available in the <a href=\"http://hadoop.apache.org/docs/r1.2.1/mapred_tutorial.html#Configured+Parameters\" rel=\"nofollow noreferrer\">job conf variables</a>.</p>\n\n<p>There's a way to split inputs by size to mappers. The default input format TextInputFormat supports it for uncompressed text. However I can't find the right document about the property you might set to choose to keep the splits to say 256mb or what have you.</p>\n\n<p>As you might imagine, due to the input line containing almost any (utf-8?) values, you might want to change the default Key Value separator too; that's in the previously linked docs. Lots of people use the Start of Heading 0x01 or Vertical Tab 0x0B.</p>\n"}], "owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 43178623, "answer_count": 2, "score": 0, "last_activity_date": 1526908840, "creation_date": 1491201644, "last_edit_date": 1491202646, "question_id": 43178009, "link": "https://stackoverflow.com/questions/43178009/my-perl-comparison-script-is-failing-while-running-on-huge-txt-files-can-any-one", "title": "My perl comparison script is failing while running on huge txt files can any one help out on performance improvement", "body": "<p>Right now the above script is able to compare around 9GB to 10GBfiles. But I wanted to compare with very big files like more than 50GB. While running my script it has been killed automatically. Can anyone help how to improve the performance to compare such big files with my script.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Getopt::Std;\nuse FileHandle;\n\nopen STDOUT, \"&gt;\", \"output.txt\" or die \"$0: open: $!\";\nmy %opts;\nmy $optstr = \"i:o:\";\ngetopts(\"$optstr\", \\%opts);\nif($opts{i} eq '' || $opts{o} eq '' )\n{\n        print \"usage: perl TextCompare_Fund.pl &lt;-i INPUTFILE&gt; &lt;-o MAPREDUCE OUTPUTFILE&gt;\\n\";\n        die 1;\n}\nmy $inputFilesPath=$opts{i};\nmy $outputFilesPath=$opts{o};\nmy @ifiles=`ls $inputFilesPath`;\nmy @ofiles=`ls $outputFilesPath`;\nforeach my $ifile (@ifiles)\n{\n    my $ifile_substr=substr(\"$ifile\",0,-25);\n    foreach my $ofile (@ofiles)\n    {\n        my $ofile_substr=substr(\"$ofile\",0,-25);\n        my $result=$ifile_substr cmp $ofile_substr;\n        if($result eq 0)\n        {\n            #print \"$result\\n\";\n            #print \"$ifile\\n\";\n            compare($ifile,$ofile)\n        }\n    }\n}\nsub compare\n{\n    my $afile=\"$_[0]\";\n    my $bfile=\"$_[1]\";\n    my $path1=\"$inputFilesPath/$afile\";\n    my $path2=\"$outputFilesPath/$bfile\";\n    chomp $path1;\n    chomp $path2;\n    #open FILE, \"&lt;\", $path1 or die \"$!:$path1\";\n    open my $infile, \"&lt;\", $path1 or die \"Couldn't open $path1: $!\";\n    my %a_lines;\n    my %b_lines;\n    my $count1=0;\n    while (my $line = &lt;$infile&gt;) \n    {\n        chomp $line;\n            $a_lines{$line} = undef;\n        $count1=$count1+1;\n    }\n    print\"$bfile records count : $count1\\n\";\n    close $infile;\n    my $file=substr(\"$afile\",0,-25);\n    my $OUTPUT = \"/hadoop/user/m6034690/Kishore/CompareResult_Files/$file.comparision_result\";\n    open my $outfile, \"&lt;\", $path2 or die \"Couldn't open $path2: $!\";\n    open (OUTPUT, \"&gt;$OUTPUT\") or die \"Cannot open $OUTPUT \\n\";\n\n    my $count=0;\n    my $count2=0;\n    while (my $line = &lt;$outfile&gt;) \n    {\n        chomp $line;\n        $b_lines{$line} = undef;\n        $count2=$count2+1;\n        next if exists $a_lines{$line};\n        $count=$count+1;\n        print OUTPUT \"$line \\t===&gt; The Line which is selected from file2/arg2 is mismatching/not available in file1\\n\";\n    }   \n    print \"$bfile records count : $count2\\n\";\n    print \"Total mismatching/unavailable records in file1 : $count\\n\";\n    close $outfile;\n    close OUTPUT;\n}\nclose (STDOUT);\n</code></pre>\n"}, {"tags": ["windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5, "user_id": 6659276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7559bc27fe261070b44411295dce5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash Tiwari", "link": "https://stackoverflow.com/users/6659276/avinash-tiwari"}, "edited": false, "score": 0, "creation_date": 1491242950, "post_id": 43177531, "comment_id": 73455912, "body": "@AvinashTiwari Nice. (Consider <a href=\"http://stackoverflow.com/help/someone-answers\">marking the answer as accepted</a>?)"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1491199557, "creation_date": 1491199557, "answer_id": 43177531, "question_id": 43177430, "link": "https://stackoverflow.com/questions/43177430/pattern-is-not-getting-matched-showing-sanjay-is-not-recognized-as-an-interna/43177531#43177531", "title": "Pattern is not getting matched, showing &#39;Sanjay&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<p>That error message sounds like you're in <code>cmd</code> on Windows. <code>cmd</code> doesn't recognize <code>'</code> <code>'</code> as quoting symbols; you have to use double quotes (<code>\"</code>) instead:</p>\n\n<pre><code>perl -n -e \"if(/Avinash/../Sanjay/){next if(/Avinash|Sanjay/); print $_;}\" avinash.txt&gt;sumeet.txt\n</code></pre>\n\n<p>If your code uses <code>\"</code> <code>\"</code> strings internally, they can normally replaced by <code>qq(</code> <code>)</code>. But in your case I could just remove them entirely because <code>print $_</code> is perfectly valid code.</p>\n"}], "owner": {"reputation": 5, "user_id": 6659276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7559bc27fe261070b44411295dce5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash Tiwari", "link": "https://stackoverflow.com/users/6659276/avinash-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491199595, "creation_date": 1491199029, "last_edit_date": 1491199595, "question_id": 43177430, "link": "https://stackoverflow.com/questions/43177430/pattern-is-not-getting-matched-showing-sanjay-is-not-recognized-as-an-interna", "title": "Pattern is not getting matched, showing &#39;Sanjay&#39; is not recognized as an internal or external command, operable program or batch file", "body": "<pre><code>perl -n -e'if(/Avinash/../Sanjay/){next if(/Avinash|Sanjay/);    print \"$_\";}' avinash.txt&gt;sumeet.txt\n</code></pre>\n\n<p>I want to write content between the Words Avinash and Sanjay in a file sumeet.txt, but when i am giving the pattern in next if ,it is throwing this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Sanjay' is not recognized as an internal or external command, operable program or batch file.\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1491203644, "post_id": 43177224, "comment_id": 73430247, "body": "He <b>is</b> pushing references to hashes onto his array. The only difference between <code>{ %hash }</code> and <code>\\%hash</code> is that the former takes a copy of <code>%hash</code> and returns a reference to that copy, whereas the latter returns a reference to the original hash."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491205497, "post_id": 43177224, "comment_id": 73431224, "body": "@DaveCross hum, very true indeed, I overlooked that, thanks for pointing it out."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3958394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd4950e099efb68a0024852542d3d082?s=128&d=identicon&r=PG&f=1", "display_name": "Bellamy", "link": "https://stackoverflow.com/users/3958394/bellamy"}, "edited": false, "score": 0, "creation_date": 1491204843, "post_id": 43178034, "comment_id": 73430888, "body": "Thanks.  [I said thanks earlier in a previous comment, but it didn&#39;t appear to post??]"}, {"owner": {"reputation": 3975, "user_id": 2413778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73cd4efaa221f0b4fe583808f079368?s=128&d=identicon&r=PG", "display_name": "John C", "link": "https://stackoverflow.com/users/2413778/john-c"}, "reply_to_user": {"reputation": 75, "user_id": 3958394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd4950e099efb68a0024852542d3d082?s=128&d=identicon&r=PG&f=1", "display_name": "Bellamy", "link": "https://stackoverflow.com/users/3958394/bellamy"}, "edited": false, "score": 0, "creation_date": 1491206344, "post_id": 43178034, "comment_id": 73431687, "body": "No worries.  Perl references are just like C pointers but without the memory leaks!"}], "tags": [], "owner": {"reputation": 3975, "user_id": 2413778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73cd4efaa221f0b4fe583808f079368?s=128&d=identicon&r=PG", "display_name": "John C", "link": "https://stackoverflow.com/users/2413778/john-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1491201711, "creation_date": 1491201711, "answer_id": 43178034, "question_id": 43177224, "link": "https://stackoverflow.com/questions/43177224/perl-how-to-pass-array-element-by-reference-to-sub/43178034#43178034", "title": "Perl: How to pass array element by reference to sub", "body": "<p>Well that was fun.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @array;\nmy $hash;\n\n$hash = {}; # initialise to a blank hash.\n$hash-&gt;{'key1'} = 1;\n$hash-&gt;{'key2'} = 2;\n$hash-&gt;{'key3'} = 3;\n$hash-&gt;{'key4'} = 4;\npush @array, $hash;\n\n$hash = {};  # initialise to a blank hash.\n$hash-&gt;{'key1'} = 10;\n$hash-&gt;{'key2'} = 20;\n$hash-&gt;{'key3'} = 30;\n$hash-&gt;{'key4'} = 40;\npush @array, $hash;\n\n# Expect:\n#   @array[0] like 1,2,3,4\n#   @array[1] like 10,20,30,40\nprint Dumper(\\@array);   # Dumper takes a reference.\n\ndoChange($array[1]); # pass a pointer (reference) to the hash.\n\n# Expect:\n#   @array[0] like 1,2,3,4\n#   @array[1] like 100,200,300,400 &lt;&lt;== VALUES HAVE CHANGED\nprint Dumper(\\@array);\n\nsub doChange\n{\n    my $h = shift; # Get the pointer to your hash.\n\n    $h-&gt;{'key1'} = 100;  # mess with it.\n    $h-&gt;{'key2'} = 200;\n    $h-&gt;{'key3'} = 300;\n    $h-&gt;{'key4'} = 400;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3958394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd4950e099efb68a0024852542d3d082?s=128&d=identicon&r=PG&f=1", "display_name": "Bellamy", "link": "https://stackoverflow.com/users/3958394/bellamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43178034, "answer_count": 1, "score": 1, "last_activity_date": 1491201711, "creation_date": 1491198073, "question_id": 43177224, "link": "https://stackoverflow.com/questions/43177224/perl-how-to-pass-array-element-by-reference-to-sub", "title": "Perl: How to pass array element by reference to sub", "body": "<p>I'm coming to Perl from a C/C++ background and am progressing very slowly, so please bear with me...</p>\n\n<p>I've got an array of hashes and I want to pass one element of the array to a sub-routine (by reference) where that element will be modified.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy @array;\nmy %hash;\n\n$hash{'key1'} = 1;\n$hash{'key2'} = 2;\n$hash{'key3'} = 3;\n$hash{'key4'} = 4;\npush @array, {%hash};\n\n$hash{'key1'} = 10;\n$hash{'key2'} = 20;\n$hash{'key3'} = 30;\n$hash{'key4'} = 40;\npush @array, {%hash};\n\n# Expect:\n#   @array[0] like 1,2,3,4\n#   @array[1] like 10,20,30,40\nprint Dumper(@array); \n\ndoChange(\\@array[1]); # &lt;&lt;==== THIS IS THE BIT WHERE I NEED ASSISTANCE TO PASS ARRAY ELEMENT BY REFERENCE, IF POSSIBLE\n\n# Expect:\n#   @array[0] like 1,2,3,4\n#   @array[1] like 100,200,300,400 &lt;&lt;== VALUES HAVE CHANGED\nprint Dumper(@array);      \n\nsub doChange\n{\n    my %h = @_; # &lt;&lt;===  THIS IS NOT RIGHT EITHER!?\n\n    $h{'key1'} = 100;\n    $h{'key2'} = 200;\n    $h{'key3'} = 300;\n    $h{'key4'} = 400;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491176852, "post_id": 43174727, "comment_id": 73423342, "body": "Please show what input you have, and what output you expect. Besides the actual issue you may be facing, take a peruse of <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7806171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10211744977527386/picture?type=large", "display_name": "Weiqing Wang", "link": "https://stackoverflow.com/users/7806171/weiqing-wang"}, "edited": false, "score": 0, "creation_date": 1491179518, "post_id": 43174829, "comment_id": 73423840, "body": "Thank you so much! That was very helpful!"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1491186763, "last_edit_date": 1491186763, "creation_date": 1491177423, "answer_id": 43174829, "question_id": 43174727, "link": "https://stackoverflow.com/questions/43174727/perl-what-is-the-difference-between-the-two-scripts/43174829#43174829", "title": "perl what is the difference between the two scripts", "body": "<p>The <code>-p</code> flag to perl wraps your script in a loop:</p>\n\n<pre><code>LINE: while (&lt;&gt;) {\n    \u2026 your script \u2026\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<p>In other words: it reads each line into <code>$_</code>, runs your script, and prints <code>$_</code> afterwards. This is what your first script snippet is depending on.</p>\n\n<p>Your second script prints something on its own, but that doesn't make Perl skip its own <code>print</code>, so it ends up printing the original value of <code>$_</code> afterwards. You can bypass this by using the <code>-n</code> flag instead of <code>-p</code> -- this behaves the same way, except without the automatic <code>print</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 7806171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10211744977527386/picture?type=large", "display_name": "Weiqing Wang", "link": "https://stackoverflow.com/users/7806171/weiqing-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491186763, "creation_date": 1491176438, "last_edit_date": 1491176693, "question_id": 43174727, "link": "https://stackoverflow.com/questions/43174727/perl-what-is-the-difference-between-the-two-scripts", "title": "perl what is the difference between the two scripts", "body": "<pre><code>echo ab cd ef | perl -pe 'if($.==1){@L=split;foreach(@L)\n{$_=\"SING.$_\";}$_=\"@L\\n\"}'\nSING.ab SING.cd SING.ef\n\necho ab cd ef | perl -pe 'if($.==1){@L=split;foreach(@L)  \n{$_=\"SING.$_\";}print\"@L\\n\"}'\nSING.ab SING.cd SING.ef\nab cd ef\n</code></pre>\n\n<p>What is <code>$_=\"@L\\n\"</code> doing? What does it mean? I suppose the first output is the output I want, but why can't I get it using the second code?</p>\n"}, {"tags": ["html", "mysql", "database", "perl", "dbi"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1491170019, "post_id": 43173925, "comment_id": 73421854, "body": "Please always use <code>use strict;</code> as well as <code>use warnings;</code>."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491171507, "post_id": 43173925, "comment_id": 73422251, "body": "What is the best way to validate perl code?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491172488, "post_id": 43173925, "comment_id": 73422508, "body": "<code>perl -c script.pl</code> will verify that it can be compiled. Having the pragmas I mentioned in the previous comment is the best way to ensure things are legit while coding."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491633091, "post_id": 43173925, "comment_id": 73649252, "body": "I see you&#39;ve corrected <code>$las</code> to <code>@las</code> in the <code>map</code> line,  but you missed the use of <code>$las</code> in the <code>print()</code> on the following line. And why is <code>$b-&gt;disconnect()</code> spread over three lines?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491183363, "post_id": 43174199, "comment_id": 73424572, "body": "ok, sorry. I fixed it to just focus on getting the username for right now."}], "tags": [], "owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "is_accepted": false, "score": 2, "last_activity_date": 1491171970, "creation_date": 1491171970, "answer_id": 43174199, "question_id": 43173925, "link": "https://stackoverflow.com/questions/43173925/how-to-replace-an-array-in-perl-with-a-query-for-contents-of-a-sql-database/43174199#43174199", "title": "How to replace an array in perl with a query for contents of a sql database?", "body": "<p>Your SQL query is a union of two subqueries, but one subquery has one column in its result and the other has two columns. This is not allowed in a UNION. All subqueries must have the same number of columns, and compatible data types in all columns. This has nothing to do with Perl, it's just a requirement of the SQL language.</p>\n\n<p>In Perl, you should have called the query in a way that allowed you to see the SQL error it caused.</p>\n\n<pre><code>$sth-&gt;execute();\nif ($sth-&gt;err)\n{\n  die \"ERROR! return code: . $sth-&gt;err . \" error msg: \" . $sth-&gt;errstr . \"\\n\";\n}\n</code></pre>\n\n<p>DBI also has connection options to make any SQL error cause the calling script to die, or print the error. See <a href=\"http://www.perlhowto.com/dbi_handling_database_errors\" rel=\"nofollow noreferrer\">http://www.perlhowto.com/dbi_handling_database_errors</a></p>\n\n<pre><code>my $dbh = DBI-&gt;connect($dsn, $user, $pw, { RaiseError =&gt; 1, PrintError =&gt; 0 });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491221382, "post_id": 43178543, "comment_id": 73441218, "body": "I&#39;m having trouble understanding how to implement this with the existing code. Also wouldn&#39;t it be (&quot;DBI:mysql:myadmpr01&quot;, &quot;user&quot;, &quot;pass64&quot;)?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491221896, "post_id": 43178543, "comment_id": 73441628, "body": "I just took your code and added a single line after it. I&#39;m not sure what part is confusing you. Also, I changed the double quotes to single quotes as you only need double quotes for variable interpolation and escape sequences like <code>\\n</code> or <code>\\t</code>."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491226998, "post_id": 43178543, "comment_id": 73445561, "body": "gotcha, i&#39;m giving it a go, looks like I was combining 2 different sections. I may have to ask the people maintaining the database if the names for SELECT are right"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491493504, "post_id": 43178543, "comment_id": 73588394, "body": "&quot;I seem to be doing something wrong&quot; isn&#39;t very helpful. What makes you think that? What unexpected behaviour are you seeing? To be honest, I think the biggest mistake you are making is to just ignore all the good advice you have been given over the last few questions that you have asked. Why haven&#39;t you added <code>strict</code> and <code>warnings</code>? Why aren&#39;t you using CSS? Why are you using multiple <code>print</code> statements instead of templates? Why are you trying to set <code>$las</code> when my code used <code>@las</code>?"}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491566912, "post_id": 43178543, "comment_id": 73623236, "body": "sorry, more specifically, I wonder if my DBI is correct:  my $dbh = DBI-&gt;connect(&quot;DBI:mysql:lsopskeys:myadmpr01.itap.purdue.edu&quot;&zwnj;&#8203;, &quot;user&quot;, &quot;passcode&quot;)"}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491567185, "post_id": 43178543, "comment_id": 73623420, "body": "is myadmpr01.itap.purdue.edu correct way to do host? I&#39;ve also seen some formats where &#39;port&#39; is used as part of the argument. Not sure if this ins needed here..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491576402, "post_id": 43178543, "comment_id": 73630140, "body": "@JozefPietrzak: I have three things to say to you. Firstly, the questions you are now asking have little to do with your original question. Perhaps you should ask a new question. Secondly, if you have questions about the syntax to use for DBI, then I good start might be the <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> (or <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">DBD::Oracle</a>) documentation. Finally, if you don&#39;t start to use (or, at least, acknowledge) the good help you&#39;re getting, then people might stop taking the time to help you."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491885757, "post_id": 43178543, "comment_id": 73737493, "body": "I think i&#39;m having trouble understanding how &#39;{ $_-&gt;[0] }&#39; functions in &#39;my @las = map { $_-&gt;[0] } $sth-&gt;fetchall_arrayref;&#39; The -&gt;[0] would seem to indicate number values, but these will be strings"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 1, "creation_date": 1491889040, "post_id": 43178543, "comment_id": 73738643, "body": "Here is the <a href=\"https://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">documentation for <code>map</code></a>. <code>map</code> is a mechanism for transforming lists. You pass it a block of code (in this case <code>{ $_-&gt;[0] }</code>) and a list (in this case the return value from <code>$sth-&gt;fetchall_arrayref</code>). Each element of the list, in turn, is assigned to <code>$_</code> and the block of code is executed. Whatever the the block of code returns is added to the transformed list. The <code>$_-&gt;[0]</code> is looking up the first element in an array reference that&#39;s held in <code>$_</code>. Nothing about that code indicates that we are dealing with numbers."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1491889122, "post_id": 43178543, "comment_id": 73738676, "body": "@JozefPietrzak: You seem very confused. I really think it&#39;s worth your time to spend a few days working through <i>Learning Perl</i> and <i>Intermediate Perl</i>. That will save you a lot of time."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1494260797, "post_id": 43178543, "comment_id": 74741042, "body": "I FINALLY got it... My sql database was spitting out references instead of readable strings. That&#39;s why the results wouldn&#39;t compare. I ended up needing to do <code>next unless $currentuser~~@{las};</code> then they actually compared! :)"}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1494261079, "post_id": 43178543, "comment_id": 74741199, "body": "I really did appreciate your and everyone else&#39;s input greatly. I&#39;m sorry if that come accross"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 1, "creation_date": 1494261108, "post_id": 43178543, "comment_id": 74741225, "body": "You ended up needing to do... nothing? It&#39;s not your database that is returning references. Your database knows nothing at all about references. It was DBI or DBD::mysql that was creating references (because that&#39;s the only way to create complex data structures in Perl)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1494264588, "post_id": 43178543, "comment_id": 74743229, "body": "No. DBI wasn&#39;t misreading it. DBI was doing exactly what it is supposed to to. As I said in my last comment, using references is the only way to create complex data structures of the kind that DBI methods need to return. The only error here was you misreading (or, perhaps, not reading) the documentation."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1494264706, "post_id": 43178543, "comment_id": 74743296, "body": "And I don&#39;t know what you think that <code>$currentuser ~~ @{las}</code> is doing. The braces are completely superfluous and using the smartmatch operator (<code>~~</code>) is a terrible idea as it is currently marked as &quot;experimental&quot; and is likely to be removed or have its behaviour changed greatly in future versions of Perl."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1494272309, "post_id": 43178543, "comment_id": 74747622, "body": "I&#39;m sorry, it seemed stable enough, it was recommended by a friend. I seriously doubt we will be changing our perl version on our server anytime soon. I am open to better ways to write the comparison."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1491895877, "last_edit_date": 1491895877, "creation_date": 1491203373, "answer_id": 43178543, "question_id": 43173925, "link": "https://stackoverflow.com/questions/43173925/how-to-replace-an-array-in-perl-with-a-query-for-contents-of-a-sql-database/43178543#43178543", "title": "How to replace an array in perl with a query for contents of a sql database?", "body": "<p>If you're trying to populate <code>@las</code> from the database, then you want something like this:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect('DBI:mysql:myadmpr01', 'user', 'pass64')\n  or die \"Unable to connect: $DBI::errstr\\n\";\n\nmy $sql = qq{ \n  SELECT  user_id, \n  FROM    lsoemployee_info\n};\n\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\nmy @las = map { $_-&gt;[0] } $sth-&gt;fetchall_arrayref;\n</code></pre>\n\n<p><strong>Update:</strong> I wrote that last line of code as I would write it for a client. I always assume that my code will be read and maintained by people who know Perl. If you have doubts about the abilities of your programmers, you might be better advised to write something like that:</p>\n\n<pre><code>my @las;\n\nforeach ($sth-&gt;fetchall_arrayref) {\n  push @las, $_-&gt;[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 43178543, "answer_count": 2, "score": 1, "last_activity_date": 1492311579, "creation_date": 1491169729, "last_edit_date": 1492311579, "question_id": 43173925, "link": "https://stackoverflow.com/questions/43173925/how-to-replace-an-array-in-perl-with-a-query-for-contents-of-a-sql-database", "title": "How to replace an array in perl with a query for contents of a sql database?", "body": "<p>Edit: (See Revised Code Near bottom) I have the code working to pull from the 2 databases (I know some cleaning is still needed),\nbut where I am stuck is, I was prviously able to use:</p>\n\n<pre><code>next unless $currentuser ~~ @las;\n</code></pre>\n\n<p>but once I linked the mySQL database, it isn't filtering out undefined/unqualified (blank) results. I am not sure how to restructure this function to re-enable the functionality. (I think the way I am approaching the logic may be off). But this is where I am currently confused and need guidance.  </p>\n\n<hr>\n\n<p>I currently use this code to view logged in users to check for employees in our department:</p>\n\n<pre><code> #! /usr/bin/perl\nuse strict;\nuse warnings;\n\n$ENV{'ORACLE_HOME'} =\"/usr/lib/oracle/11.2/client64\";\nuse DBI;\n($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime();\n\n#current emplyees go here:\nmy @las = qw( \n\nuser12\nuser13\nuser14\nuser15\nuser16\nuser17\nuser18\nuser19\nuser20\nuser21\nuser22\nuser23\nuser24\nuser25\nuser26\nuser27\nuser28\nuser29\nuser30\nuser31\nuser32\nuser33\nuser34\nuser35\nuser36\nuser37\nuser38\nuser39\nuser40\nuser41\nuser42\nuser43\nuser44\nuser45\nuser46\nuser47\nuser48\nuser49\nuser50\nuser51\nuser52\nuser53\nuser54\nuser55\nuser56\nuser57\nuser58\nuser59\nuser60\nuser61\nuser62\nuser63\nuser64\nuser65\nuser66\nuser67\nuser68\nuser69\nuser70\nuser71\nuser72\nuser73\nuser74\nuser75\nuser76\nuser77\nuser78\nuser79\nuser80\nuser81\nuser82\nuser83\nuser84\nuser85\nuser86\nuser87\nuser88\nuser89\nuser90\nuser91\nuser92\nuser93\nuser94\nuser95\nuser96\nuser97\nuser98\nuser99\nuser100\nuser101\nuser102\nuser103\nuser104\nuser105\nuser106\nuser107\nuser108\nuser109\nuser110\nuser111\nuser112\nuser113\nuser114\nuser115\nuser116\nuser117\nuser118\nuser119\nuser120\nuser121\nuser122\nuser123\nuser124\nuser125\nuser126\nuser127\nuser128\nuser129\nuser130\nuser131\nuser132\nuser133\nuser134\nuser135\nuser136\nuser137\nuser138\nuser139\nuser140\nuser141\nuser142\nuser143\nuser144\nuser145\nuser146\nuser147\nuser148\nuser149\nuser150\nuser151\nuser152\nuser153\nuser154\nuser155\nuser156\nuser157\nuser158\nuser159\nuser160\nuser161\nuser162\nuser163\nuser164\nuser165\nuser166\nuser167\nuser168\nuser169\nuser170\nuser171\nuser172\nuser173\nuser174\nuser175\nuser176\nuser177\nuser178\nuser179\nuser180\nuser181\nuser182\nuser183\nuser184\nuser185\nuser186\nuser187\nuser188\nuser189\nuser190\nuser191\nuser192\nuser193\nuser194\nuser195\nuser196\nuser197\nuser198\nuser199\nuser200\nuser201\nuser202\nuser203\nuser204\nuser205\nuser206\nuser207\nuser208\nuser209\nuser210\nuser211\nuser212\nuser213\nuser214\nuser215\nuser216\nuser217\nuser218\nuser219\nuser220\nuser221\nuser222\nuser223\nuser224\nuser225\nuser226\nuser227\nuser228\nuser229\nuser230\nuser231\nuser232\nuser233\nuser234\nuser235\nuser236\nuser237\nuser238\nuser239\nuser240\nuser241\nuser242\nuser243\nuser244\nuser245\nuser246\nuser247\nuser248\nuser249\nuser250\nuser251\nuser252\nuser253\nuser254\nuser255\nuser256\nuser257\nuser258\nuser259\nuser260\nuser261\nuser262\nuser263\nuser264\nuser265\nuser266\nuser267\nuser268\nuser269\nuser270\nuser271\nuser272\nuser273\nuser274\nuser275\nuser276\nuser277\n\nsystemdefault\nadmin1\nadmin2\nadmin3\n\n\n);\n\n#Find Current Users\n$login=\"logg\";\n$password=\"pass32\";\nmy $dbh = DBI-&gt;connect(\"DBI:Oracle:icsprod\",$login,$password);\ndie \"Unable to connect: $DBI::errstr\\n\" unless (defined $dbh);\n\n# Search Zone 2\n\nmy $sql = qq{ \nSELECT  hosts.currentuser, TO_CHAR(hosts.lastlogin, 'HH:MM:SS MM/DD/YYYY'),\n        hosts.host_name\nFROM    infadmin.inv_hosts hosts\nWHERE  (hosts.host_name = '1408bcc204ap1')\nOR      (hosts.host_name = '1408mathg135p1')\nOR      (hosts.host_name = '1408mathg135p2')\nOR      (hosts.host_name = '1408mathg135p3')\nOR      (hosts.host_name = '1408mathg135p4')\nOR      (hosts.host_name = '1408mathg135m1')\nOR      (hosts.host_name = '1408mathb10p1')\nOR      (hosts.host_name = '1408mathb10p2')\nOR      (hosts.host_name = '1408mathb10p3')\nOR      (hosts.host_name = '1408mathb10p4')\nOR      (hosts.host_name = '1408mathb10p5')\nOR      (hosts.host_name = '1408mathb10p6')\nOR      (hosts.host_name = '1408mathb10p7')\nOR      (hosts.host_name = '1408mathb10p8')\nOR      (hosts.host_name = '1408mathb10p9')\nOR      (hosts.host_name = '1408mathb10p10')\nOR      (hosts.host_name = '1408mathb10p10')\nOR      (hosts.host_name = '1408mathb10p10')\nOR      (hosts.host_name = '1408mathb10p10')\n\n\n\nORDER BY hosts.host_name\n};\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\nmy($currentuser, $lastlogin, $host_name);\n$sth-&gt;bind_columns(undef, \\$currentuser, \\$lastlogin, \\$host_name);\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;html&gt;\\n\";\nprint \"&lt;meta http-equiv=refresh content=300&gt;\\n\";\nprint \"&lt;meta http-equiv='pragma' content='no-cache'&gt;\\n\";\nprint \"&lt;style type=\\\"text/css\\\"&gt;\\n\";\nprint \"body { font-family: \\\"Arial\\\", sans-serif; font-size: small; color: black }\\n\";\nprint \"&lt;/style&gt;\\n\";\nprint \"&lt;head&gt;\\n\";\nprint \"&lt;title&gt;\\n\";\nprint \"Staff Stations\\n\";\nprint \"&lt;/title&gt;\\n\";\nprint \"&lt;/head&gt;\\n\";\nprint \"&lt;body&gt;\\n\";\nprint \"&lt;table&gt;\\n\";\nprintf(\"%02d:%02d:%02d\", $hour, $min, $sec);\nprint \"&lt;tr&gt;&lt;td&gt;&lt;u&gt;Zone 2&lt;/u&gt;&lt;/td&gt;&lt;td&gt;&lt;u&gt;Login&lt;/u&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\nwhile($sth-&gt;fetch()) {\n        next unless $currentuser~~@las  ;\n        $lastlogin=~s/ .*$//;\n        $host_name=~s/1408//;\n        foreach(@las)   {\n                if ($currentuser eq \"$_\") {\n                       $lacolor = \"orange\";\n                        last;\n                } else {\n                        $lacolor = \"black\";\n                }\n        }\n        print \"&lt;tr&gt;\";\n        print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n        print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;$currentuser&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\n$sth-&gt;finish();\n\nprint \"&lt;/table&gt;\";\nprint \"&lt;/body&gt;\\n\";\nprint \"&lt;/html&gt;\\n\";\n\n$sth-&gt;finish();$sth-&gt;finish();\n\n#end code\n\n$\nb\n-&gt;disconnect();\n</code></pre>\n\n<p>The usernames are already stored in a mysql database, I am trying to add lines to connect to it as follows, but I am stuck as to how to continue:</p>\n\n<pre><code>#Read Employee database\n\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:myadmpr01\", \"user\", \"pass64\");\ndie \"Unable to connect: $DBI::errstr\\n\" unless (defined $dbh);\n\nmy $sql = qq{ \nSELECT  user_id, \nFROM    lsoemployee_info\n\n};\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n</code></pre>\n\n<p>I am trying to compare the <code>icsprod</code>against the <code>myadmpr01</code> for usernames so that out hr department can maintain this easily as they update the <code>myadmpr01</code> database for current/non-current employees. <code>icsprod</code> is updated continuously and simply defines the current user. We would also like to return the user's fullname, rather than continuously look up usernames. Any help is greatly appreciated.</p>\n\n<p>Revised code:  </p>\n\n<pre><code>  #! /usr/bin/perl\n$ENV{'ORACLE_HOME'} =\"/usr/lib/oracle/11.2/client64\";\nuse DBI;\n\n($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime();\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:lsopskeys:myadmpr01.itap.purdue.edu\", \"lsops\", \"Fl4sh_l1ght\")\n  or die \"Unable to connect: $DBI::errstr\\n\";\n\nmy $sql = qq{ \n  SELECT  user_id, \n  FROM    lsoemployee_data\n};\n\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\nmy @las = map { $_-&gt;[0] } $sth-&gt;fetchall_arrayref;\n\n$login=\"user\";\n$password=\"pass\";\nmy $dbh = DBI-&gt;connect(\"DBI:Oracle:icsprod\",$login,$password);\ndie \"Unable to connect: $DBI::errstr\\n\" unless (defined $dbh);\n\n# Zone 2 ROWS CODE\nmy $sql = qq{ \nSELECT  hosts.currentuser, TO_CHAR(hosts.lastlogin, 'HH:MM:SS MM/DD/YYYY'),\n        hosts.host_name\nFROM    infadmin.inv_hosts hosts\nWHERE   (hosts.host_name = '1408stew102p1')\nOR      (hosts.host_name = '1408stew102p2')\nOR      (hosts.host_name = '1408stew102p3')\n\nOR      (hosts.host_name = '1408stew111p1')\nOR      (hosts.host_name = '1408stew111p2')\nOR      (hosts.host_name = '1408stew111p3')\nOR      (hosts.host_name = '1408stew111p4')\nOR      (hosts.host_name = '1408stew111p5')\nOR      (hosts.host_name = '1408stew111p6')\nOR      (hosts.host_name = '1408stew111p7')\nOR      (hosts.host_name = '1408stew111p8')\nOR      (hosts.host_name = '1408stew111p9')\nOR      (hosts.host_name = '1408stew111p10')\nOR      (hosts.host_name = '1408stew111p11')\nOR      (hosts.host_name = '1408mathg135p1')\nOR      (hosts.host_name = '1408mathb18p5')\nOR      (hosts.host_name = '1408mathg135p2')\nOR      (hosts.host_name = '1408mathg135p3')\nOR      (hosts.host_name = '1408mathg135p4')\n\nOR      (hosts.host_name = '1408heav227m1')\nOR      (hosts.host_name = '1408heav227m2')\nOR      (hosts.host_name = '1408heav227m3')\nOR      (hosts.host_name = '1408mthw116p1')\nOR      (hosts.host_name = '1408hamp3144p21')\n\nORDER BY hosts.host_name\n};\n\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\nmy($currentuser, $lastlogin, $host_name);\n$sth-&gt;bind_columns(undef, \\$currentuser, \\$lastlogin, \\$host_name);\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;html&gt;\\n\";\nprint \"&lt;meta http-equiv=refresh content=300&gt;\\n\";\nprint \"&lt;meta http-equiv='pragma' content='no-cache'&gt;\\n\";\nprint \"&lt;style type=\\\"text/css\\\"&gt;\\n\";\nprint \"body { font-family: \\\"Arial\\\", sans-serif; font-size: small; color: black }\\n\";\nprint \"&lt;/style&gt;\\n\";\nprint \"&lt;head&gt;\\n\";\nprint \"&lt;title&gt;\\n\";\nprint \"LA station usage.\\n\";\nprint \"&lt;/title&gt;\\n\";\nprint \"&lt;/head&gt;\\n\";\nprint \"&lt;body&gt;\\n\";\nprint \"&lt;table&gt;\\n\";\nprintf(\"%02d:%02d:%02d\", $hour, $min, $sec);\nprint \"&lt;tr&gt;&lt;td&gt;&lt;font color=\\\"DodgerBlue \\\"&gt;&lt;u&gt;Zone 2 Station&lt;/u&gt;&lt;/td&gt;&lt;td&gt;&lt;font color=\\\"DodgerBlue \\\"&gt;&lt;u&gt;Login&lt;/u&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\nwhile($sth-&gt;fetch()) {\n      #next unless $currentuser ~~ @las;\n       $lastlogin=~s/ .*$//;\n        $host_name=~s/1408//;\n        foreach(@las)   {\n                if ($currentuser eq \"$_\") {\n                       $lacolor = \"orange\";\n                        last;\n                } else {\n                        $lacolor = \"black\";\n                }\n        }\n        print \"&lt;tr&gt;\";\n        print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n        print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;$currentuser&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\n$sth-&gt;finish();\nprint \"&lt;/table&gt;\";\nprint \"&lt;/body&gt;\\n\";\nprint \"&lt;/html&gt;\\n\";\n$sth-&gt;finish();$sth-&gt;finish();\n\n#end code\n$\nb\n-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["html", "perl", "http", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1491162183, "post_id": 43172709, "comment_id": 73419470, "body": "Should the  Mojo ua not produce these objects?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491162244, "post_id": 43172709, "comment_id": 73419499, "body": "@simbabque  Right, I would hope so, but I don&#39;t know for fact that it does."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491222291, "post_id": 43172709, "comment_id": 73441960, "body": "@simbabque: <i>&quot;Should the Mojo ua not produce these objects?&quot;</i> That&#39;s pretty much where I&#39;m coming from. I would think so, but I can&#39;t find it anywhere."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491222645, "post_id": 43172709, "comment_id": 73442262, "body": "@zdim: Yeah, <code>$res-&gt;headers-&gt;content_location</code> just returns the value of the HTTP header, while <code>$dom-&gt;at(&#39;head base&#39;)-&gt;attr(&#39;href&#39;)</code> just returns any URL in the a <code>&lt;base&gt;</code> element. The base URL is one of these <i>or</i> the request URL of the most recent redirection, depending which of them exists. I can find all of them separately and use the first to be found, but I would have hoped that something like this which is part of the HTTP specification would be coded into the module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491222785, "post_id": 43172709, "comment_id": 73442379, "body": "@zdim: <i>&quot;This implies searching through the content&quot;</i> That doesn&#39;t matter. The DOM has to be built and searched anyway, because it is the source of the relative URLs that I need a base URL for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491237349, "post_id": 43172709, "comment_id": 73452817, "body": "@Borodin  Right, I understand the quest. I expected it to be found, too, and spent hours bouncing around documentation and all those various components.  I will look more, but at this point it seems to me that it just isn&#39;t there.  I added the DOM part merely to complete the statement."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491238510, "post_id": 43172709, "comment_id": 73453447, "body": "@Borodin As for DOM and searching throught it, I meant that it would be nice that one doesn&#39;t have to reprocess by hand.  I am a little surprised that UA doesn&#39;t check for <code>&lt;base&gt;</code>.  (Also: it apparently <i>does not</i> redirect by default.)"}, {"owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 0, "creation_date": 1491255093, "post_id": 43172709, "comment_id": 73462113, "body": "The OP asked especially about the <code>base</code> method in a spirit of the <code>HTTP::Response</code>. (which has implemented it - with a nice amount of logic behind). AFAIK in the Mojolicious for the <code>M::M::Response</code> you need write it yourself (or clone it from the <code>M::M::Request</code>, which in turn has the <code>Mojo::URL</code> which has the <code>base</code> method... :D :D )"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 1, "creation_date": 1491255386, "post_id": 43172709, "comment_id": 73462251, "body": "@Nemo  Well, yes, and I haven&#39;t found it.  I couldn&#39;t see how to use <code>Mojo::URL::base</code> to do anything like what is needed here.  It&#39;s a separate class that has to be instantiated with its own URL which it then converts between rel and abs, for all I could see. I don&#39;t think that it can run with an existing <code>Mojo::UA</code> object (or, rather, transaction or response objects). I don&#39;t think it&#39;s meant to.  Please post an answer if you know how to do that!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1491513584, "post_id": 43172709, "comment_id": 73600455, "body": "@Borodin  At this point I have to call it and conclude for myself that it just isn&#39;t there.  Of course, I cannot make definitive statements on such a sprawling framework, but I did look through sources and everything that came up.  (The docs did leave me wanting them to be far better.)  I updated with a mention of a couple more classes that came up."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1504814432, "last_edit_date": 1504814432, "creation_date": 1491161924, "answer_id": 43172709, "question_id": 43170389, "link": "https://stackoverflow.com/questions/43170389/base-url-of-mojolicious-response/43172709#43172709", "title": "Base URL of Mojolicious response", "body": "<p><strong>Update</strong> &nbsp; At this point I think that this framework doesn't have an equivalent of <code>base</code> from <code>LWP</code></p>\n\n<hr>\n\n<p>I am finding the <a href=\"https://metacpan.org/pod/Mojo::Headers#content_location\" rel=\"nofollow noreferrer\">content_location</a> method in <a href=\"https://metacpan.org/pod/Mojo::Headers\" rel=\"nofollow noreferrer\">Mojo::Headers</a> class. The <a href=\"https://metacpan.org/pod/Mojo::Message::Response\" rel=\"nofollow noreferrer\">Mojo::Message::Response</a> inherits from the base <a href=\"https://metacpan.org/pod/Mojo::Message\" rel=\"nofollow noreferrer\">Mojo::Message</a> and <code>Mojo::Headers</code> seems to be picked up as well</p>\n\n<p>Adding to the example from synopsis</p>\n\n<pre><code>my $res = Mojo::Message::Response-&gt;new;\n$res-&gt;parse(\"HTTP/1.0 200 OK\\x0d\\x0a\");\n$res-&gt;parse(\"Content-Length: 12\\x0d\\x0a\");\n$res-&gt;parse(\"Content-Type: text/plain\\x0d\\x0a\\x0d\\x0a\");\n$res-&gt;parse('Hello World!');\nsay $res-&gt;code;\nsay $res-&gt;headers-&gt;content_type;\nsay $res-&gt;body;\n\nsay $res-&gt;headers-&gt;content_location // 'location not defined';  # /\n$res-&gt;headers-&gt;content_location('set_some_location');\nsay $res-&gt;headers-&gt;content_location // 'location not defined';\n</code></pre>\n\n<p>seems to work.  Is this suitable?  I can't readily find a real page to try with.</p>\n\n<p>This doesn't scan the document content but only works with headers. The <code>LWP</code> sets headers from the document when producing the <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">HTTP::Response</a> object, as explained in the question and under <code>base</code>. In my tests (v5.16) <code>Mojo::UA</code> doesn't do that. I couldn't find a direct capability for this. </p>\n\n<p>One way to obtain base URL would then be via DOM, for instance</p>\n\n<pre><code>use Mojo::UserAgent;\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $base_url = $ua-&gt;get($url)\n    -&gt;res-&gt;dom\n    -&gt;at('head')-&gt;at('base')-&gt;attr('href');\n</code></pre>\n\n<p>The method <code>dom</code> is from <code>Mojo::Message</code> while <code>base</code> and <code>attr</code> are in <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>.  Or</p>\n\n<pre><code>$dom-&gt;at('head &gt; base[href]');\n</code></pre>\n\n<p>which returns a hashref <code>{ href =&gt; URL }</code>, while the first example returns the URL.</p>\n\n<p>The <code>at</code> returns <code>undef</code> on failure so one first needs to check.</p>\n\n<p>This is an additional, manual search through the content but at least it's focused in <code>&lt;head&gt;</code>.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>I have looked over the source code of the mentioned components and their parent classes. This also brought up <a href=\"http://search.cpan.org/~sri/Mojolicious-7.29/lib/Mojo/Content.pm\" rel=\"nofollow noreferrer\">Mojo::Content</a> whose subclass <code>Single</code> is returned by <code>Mojo::Message::content</code>, and <a href=\"http://search.cpan.org/~jhthorsen/Mojolicious-5.17/lib/Mojo/UserAgent/Transactor.pm\" rel=\"nofollow noreferrer\">Mojo::UserAgent::Transactor</a> with its <code>redirect</code> method, that makes use of <a href=\"http://search.cpan.org/~sri/Mojolicious-7.29/lib/Mojo/URL.pm\" rel=\"nofollow noreferrer\">Mojo::URL</a>.  However, they have different purposes. Altogether I found no help to directly unearth the base URL.</p>\n\n<p>At this point I have to conclude that a direct capability like <code>base</code> in <code>LWP</code> isn't available here. </p>\n"}], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1504814432, "creation_date": 1491148688, "last_edit_date": 1491155214, "question_id": 43170389, "link": "https://stackoverflow.com/questions/43170389/base-url-of-mojolicious-response", "title": "Base URL of Mojolicious response", "body": "<p>The <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\"><code>HTTP::Response</code></a> module has a <code>base</code> method that returns the base URL to use when converting relative URLs in the content of the message to absolute ones. It retrieves it from the message body (as a <code>&lt;base&gt;</code> element inside the HTML <code>&lt;head&gt;</code>), the HTTP header <code>Content-Location</code> (or the obsolete <code>Content-Base</code>), or the requested URL (from the most recent redirect, if any)</p>\n\n<p>I can't see any way that <a href=\"https://metacpan.org/pod/Mojo::Message::Response\" rel=\"nofollow noreferrer\"><code>Mojo::Message::Response</code></a> provides the same information, and I don't want to have to code it myself if it's already in there somewhere</p>\n\n<p>Can anyone help me out?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491133484, "post_id": 43167768, "comment_id": 73409831, "body": "The <code>CHARTS</code> are always separated by an empty line and no other empty lines in the file? you want include an empty line before the <code>Layer=4</code>?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491133576, "post_id": 43167768, "comment_id": 73409856, "body": "if the <code>CHARTS</code> are separated by empty line (and no other empty lines are in the file) the: <code>perl -00 -nlE &#39;$&#47;=&quot;\\n\\n&quot;;say unless &#47;Layer=7\\b&#47;&#39; &lt; file</code> could do the job..."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1491134246, "post_id": 43167768, "comment_id": 73410048, "body": "Are you trying to strip out a complete block which has a <code>Layer=7</code> in it? Or you wanna strip out lines starting from <code>Layer=7</code> up to <code>Layer=[Any digits except 7]?</code>"}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491134403, "post_id": 43167768, "comment_id": 73410081, "body": "There are other empty lines in the file unfortunately. This is a file created by a system over which I have no control so I cannot remove them.  Yes, I am looking to remove the entire &quot;Layer=7&quot; block and NOT just the line in which it sits."}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491134655, "post_id": 43167768, "comment_id": 73410141, "body": "Is there a reason the replace string I am currently using is not working?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1491136703, "post_id": 43167768, "comment_id": 73410767, "body": "Yes, your regex doesn&#39;t even match a single byte because at the first place it can&#39;t match a block with beginning of <code>CHARTSLayer=7</code> implemented in your regex."}], "answers": [{"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": -1, "last_activity_date": 1491137400, "last_edit_date": 1491137400, "creation_date": 1491134700, "answer_id": 43168103, "question_id": 43167768, "link": "https://stackoverflow.com/questions/43167768/regex-multiline-replacement-failing-to-strip-anything/43168103#43168103", "title": "Regex multiline replacement failing to strip anything", "body": "<p>One of possible solutions could be the: <code>split -&gt; filter -&gt; re-join</code> approach. E.g.</p>\n\n<ul>\n<li>split the string on the <code>CHARTS</code>, you will get a list of blocks</li>\n<li>filter out the unwanted elements (grep by the block content)</li>\n<li>re-join using the same string <code>CHARTS</code></li>\n</ul>\n\n\n\n<pre><code>use strict;\nuse warnings;\n\nmy $contents = do { local $/; &lt;DATA&gt; };\n$contents = join 'CHARTS', grep { !/Layer\\s*=\\s*7\\b/ } split /\\bCHARTS\\b/, $contents;\nprint $contents;\n\n__DATA__\nCHARTS\n  Color=14671839\n\n  Layer=7\n\n  [0] Font=MS SAN SERIF,10,0,F,F,\n'''other lines'''\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n\n Color=14671839\n  Layer=77\n  [0] Font=MS SAN SERIF,10,0,F,F,\n...other lines...\n\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n  Color=14671839\n  Layer=7\n  [0] Font=MS SAN SERIF,10,0,F,F,\n'''other lines'''\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n Color=14671839\n\n  Layer=4\n  [0] Font=MS SAN SERIF,10,0,F,F,\n\n...other lines...\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n</code></pre>\n\n<p>output</p>\n\n<pre><code>CHARTS\n\n Color=14671839\n  Layer=77\n  [0] Font=MS SAN SERIF,10,0,F,F,\n...other lines...\n\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\nCHARTS\n Color=14671839\n\n  Layer=4\n  [0] Font=MS SAN SERIF,10,0,F,F,\n\n...other lines...\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491138594, "post_id": 43168271, "comment_id": 73411349, "body": "Just because you&#39;ve heard of regex conditional expressions and backtrack control verbs, you don&#39;t have to use them in every application. This is a horribly arcane mishmash to achieve such a simple thing."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491138779, "post_id": 43168271, "comment_id": 73411394, "body": "Sorry but I don&#39;t care about such comments which try to degrade a valid answer. It&#39;s not a good way to promote yours."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491138998, "post_id": 43168271, "comment_id": 73411455, "body": "It&#39;s &quot;valid&quot; only in the sense that it works. And you care so little about my comment that you felt the need to tell us all about it and downvote my solution? That&#39;s just spiteful."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491139032, "post_id": 43168271, "comment_id": 73411464, "body": "Hope you understood my last comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491139386, "post_id": 43168271, "comment_id": 73411566, "body": "I do, but I&#39;m not so sure about your most recent."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491148011, "post_id": 43168271, "comment_id": 73414233, "body": "<i>&quot;Whenever you want to ask a question, try to ask it in the most silly way&quot;</i> Is that a guideline that you apply to answers as well?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491150868, "post_id": 43168271, "comment_id": 73415241, "body": "Believe me, you can&#39;t win out over this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491164106, "post_id": 43168271, "comment_id": 73420147, "body": "No one&#39;s trying to &quot;win out&quot; unless you are. I can&#39;t even imagine what that might mean in this context. I&#39;m just bemused about your unmannerly response to my criticism and your pompous misuse of the SO voting system."}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491169285, "post_id": 43168271, "comment_id": 73421657, "body": "All, many apologies for asking a question without giving all the information.  I will create a new, more comprehensive question which hopefully will give the information needed that will allow a suitable answer."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 1, "last_activity_date": 1491137679, "last_edit_date": 1491137679, "creation_date": 1491135884, "answer_id": 43168271, "question_id": 43167768, "link": "https://stackoverflow.com/questions/43167768/regex-multiline-replacement-failing-to-strip-anything/43168271#43168271", "title": "Regex multiline replacement failing to strip anything", "body": "<p>The idea is to ignore all <code>CHARTS</code> blocks which have a <code>Layer</code> attribute assigned to something other than <code>7</code> from being removed:</p>\n\n<pre><code>$contents =~ s/CHARTS\\R*(^(?!CHARTS) *+(?(?=Layer=(?:7\\d+|[^7]))(*SKIP)(*F)|.*)\\R)*//gm;\n</code></pre>\n\n<p><a href=\"http://ideone.com/QQYKuk\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491137727, "post_id": 43168533, "comment_id": 73411071, "body": "Ahhh... Non-capturing regex in the split. Me <i>always</i> forget such... ;( Really neat!!"}, {"owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491144061, "post_id": 43168533, "comment_id": 73412945, "body": "My existing replacement lines are as follows:  $contents =~ s/&#91;19&#93;\\= &lt;&lt;&lt;\\s+Circle(?s).*?&#91;28&#93;\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0&zwnj;&#8203;,0,0,0,0,0,0,0,0,0,0&zwnj;&#8203;,0,//g; $contents =~ s/&#91;19&#93;\\= &lt;&lt;&lt;\\s+Draw Line Alarmed(?s).*?&#91;28&#93;\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,&zwnj;&#8203;0,0,0,0,0,0,0,0,0,//&zwnj;&#8203;g;  How would I add the one above (perl -0777 -ne &#39;/Layer=7\\b/ or print for split /^(?=CHARTS)/m&#39; myfile) in the same format?  Sorry for the low level of expertise here!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491147652, "post_id": 43168533, "comment_id": 73414101, "body": "@PaulC: This needs to be a new question. I started by adding it to your existing question (which is where it should have been -- please don&#39;t post information in comments as it gets overlooked) but rolled it back as I see it&#39;s wrong anyway. Your <code>[19]</code> is creating a character class, and will not match <code>[19]</code> but instead <i>either</i> <code>1</code> <i>or</i> <code>9</code>. You need to escape square brackets if you want to match them literally. Also, please don&#39;t use <code>(?s)</code> inside a regex pattern unless you want to switch the <code>&#47;s</code> modifier on and off inside the pattern. Otherwise it&#39;s much better to apply it at the end."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "edited": false, "score": 0, "creation_date": 1491147695, "post_id": 43168533, "comment_id": 73414118, "body": "@PaulC: Also don&#39;t escape equals signs. And what are the <code>&lt;&lt;&lt;</code>? I don&#39;t see anything like that in your data. You&#39;d better show some <i>real</i> data in your new question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491139434, "last_edit_date": 1491139434, "creation_date": 1491137401, "answer_id": 43168533, "question_id": 43167768, "link": "https://stackoverflow.com/questions/43167768/regex-multiline-replacement-failing-to-strip-anything/43168533#43168533", "title": "Regex multiline replacement failing to strip anything", "body": "<p>Assuming the files are <em>fairly</em> regular (for instance, there are never any spaces around <code>=</code> in <code>Layer=7</code>, and <code>CHARTS</code> is always alone at the beginning of a line) this Perl one-line command will print the filtered output to stdout. I trust you know how to redirect it to a new file?</p>\n\n<pre><code>perl -0777 -ne '/Layer=7\\b/ or print for split /^(?=CHARTS)/m' myfile\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>CHARTS\n Color=14671839\n  Layer=4\n  [0] Font=MS SAN SERIF,10,0,F,F,\n...other lines...\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n</code></pre>\n\n<p>,</p>\n"}], "owner": {"reputation": 39, "user_id": 7804352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbbc47e4f9ae550430a4055f3f05fe14?s=128&d=identicon&r=PG&f=1", "display_name": "PaulC", "link": "https://stackoverflow.com/users/7804352/paulc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1491147395, "creation_date": 1491132440, "last_edit_date": 1491147395, "question_id": 43167768, "link": "https://stackoverflow.com/questions/43167768/regex-multiline-replacement-failing-to-strip-anything", "title": "Regex multiline replacement failing to strip anything", "body": "<p>I have a large text file with the following example of text in it. There are many \"CHARTS\" blocks, probably 200+ in total. </p>\n\n<pre><code>CHARTS\n  Color=14671839\n  Layer=7\n  [0] Font=MS SAN SERIF,10,0,F,F,\n'''other lines'''\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n\n\nCHARTS\n Color=14671839\n  Layer=4\n  [0] Font=MS SAN SERIF,10,0,F,F,\n...other lines...\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n</code></pre>\n\n<p>I am trying to strip all blocks where \"Layer=7\" meaning the above text would end up as </p>\n\n<pre><code>CHARTS\n Color=14671839\n\n  Layer=4\n  [0] Font=MS SAN SERIF,10,0,F,F,\n...other lines...\n  [28]=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n</code></pre>\n\n<p>I have used the following:</p>\n\n<pre><code>$contents =~ s/CHARTS(?s)Layer\\=7(?s).*?\\[28\\]\\=0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,//g;\n</code></pre>\n\n<p>I am not getting any errors BUT nothing is being stripped.</p>\n\n<p>I have spent the last hour playing around with it but am getting nowhere. Can someone point me in the right direction?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["javascript", "php", ".htaccess", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1247, "user_id": 8892091, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647324131984529/picture?type=large", "display_name": "Bluetree", "link": "https://stackoverflow.com/users/8892091/bluetree"}, "edited": false, "score": 0, "creation_date": 1571292637, "post_id": 43168174, "comment_id": 103193406, "body": "Did you change also the permission of subfolders? and did you also change the file permission?"}, {"owner": {"reputation": 84, "user_id": 7773867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/462fc13d4678300f14cdac8604f41b5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/7773867/ahmed"}, "reply_to_user": {"reputation": 1247, "user_id": 8892091, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647324131984529/picture?type=large", "display_name": "Bluetree", "link": "https://stackoverflow.com/users/8892091/bluetree"}, "edited": false, "score": 1, "creation_date": 1571397885, "post_id": 43168174, "comment_id": 103237442, "body": "yes ,i changed all dirs and files , that solve the problem"}], "tags": [], "owner": {"reputation": 84, "user_id": 7773867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/462fc13d4678300f14cdac8604f41b5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/7773867/ahmed"}, "is_accepted": false, "score": 2, "last_activity_date": 1491135274, "creation_date": 1491135274, "answer_id": 43168174, "question_id": 43167403, "link": "https://stackoverflow.com/questions/43167403/500-internal-server-error-error-was-encountered-while-trying-to-use-an-errordocu/43168174#43168174", "title": "500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request", "body": "<p>Hi guys i solve it by change permissions to 0644, this was from my server configurations \nthanks</p>\n"}], "owner": {"reputation": 84, "user_id": 7773867, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/462fc13d4678300f14cdac8604f41b5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/7773867/ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491135274, "creation_date": 1491129917, "question_id": 43167403, "link": "https://stackoverflow.com/questions/43167403/500-internal-server-error-error-was-encountered-while-trying-to-use-an-errordocu", "title": "500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request", "body": "<p>i have Xfilesharing (perl) script here the official site of it (<a href=\"https://sibsoft.net/xfilesharing.html\" rel=\"nofollow noreferrer\">https://sibsoft.net/xfilesharing.html</a>)<br>\ni installed it on server, and i have javaScript plugin work with php file\ni should put the JavaScript in HTML page then call php file to do something, i try the php file on my localhot and it's work 100%, but along without perl script.</p>\n\n<p>when i upload it to server the following message come to me</p>\n\n<pre><code>The server encountered an internal error or misconfiguration and was unable to complete your request.\n\nPlease contact the server administrator, webmaster@*****.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.\n\nMore information about this error may be available in the server error log.\n\nAdditionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request.\n</code></pre>\n\n<p>i google it and found some solutions like change permissions and i change it to 0777 but it's not work.</p>\n\n<p>also i changed the name of .htaccess file to .htaccess2 to see what's happened but nothing work.</p>\n\n<p>this .htaccess file</p>\n\n<pre><code>deny from 10.0.0.182\n\nAddDefaultCharset utf-8\nRewriteEngine on\n\nRewriteCond %{HTTP:Authorization} ^(.*)\nRewriteRule ^(.*) - [E=HTTP_CGI_AUTHORIZATION:%1]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteRule    ^([0-9A-Za-z]{12})(\\/.+|\\.html?|$)   /cgi-bin/index_dl.cgi?op=download1&amp;id=$1&amp;fname=$2 [L]\n\nRewriteRule    ^embed-([0-9A-Za-z]{12})\\.html$      /cgi-bin/index_dl.cgi?op=video_embed&amp;file_code=$1 [L]\nRewriteRule    ^embed-([0-9A-Za-z]{12})-(\\d+)x(\\d+)\\.html$      /cgi-bin/index_dl.cgi?op=video_embed&amp;file_code=$1&amp;w=$2&amp;h=$3 [L]\nRewriteRule    ^embedmp3-([0-9A-Za-z]{12})\\.html$   /cgi-bin/index_dl.cgi?op=mp3_embed&amp;file_code=$1 [L]\n\nRewriteRule    ^mp3embed-([0-9A-Za-z]{12})\\.mp3$    /cgi-bin/index_dl.cgi?op=mp3_embed2&amp;file_code=$1 [L]\nRewriteRule    ^vidembed-([0-9A-Za-z]{12})      /cgi-bin/index_dl.cgi?op=video_embed2&amp;file_code=$1 [L]\n\nRewriteRule    ^box$                    /cgi-bin/index_box.cgi [L]\nRewriteRule    ^dl$                 /cgi-bin/index_dl.cgi [L]\nRewriteRule    ^download$               /cgi-bin/index_dl.cgi?op=download1 [L]\n\nRewriteRule    ^$                   /cgi-bin/index.cgi [L]\nRewriteRule    ^free([0-9]+)\\.html$         /cgi-bin/index.cgi?op=registration&amp;aff_id=$1 [L]\n#RewriteRule    ^checkfiles\\.html$          /cgi-bin/index.cgi?op=checkfiles [L]\nRewriteRule    ^contact\\.html$              /cgi-bin/index.cgi?op=contact [L]\nRewriteRule    ^premium\\.html$              /cgi-bin/index.cgi?op=payments [L]\nRewriteRule    ^login\\.html$                /cgi-bin/index.cgi?op=login [L]\nRewriteRule    ^catalogue(.*)\\.html$            /cgi-bin/index.cgi?op=catalogue&amp;date=$1 [L]\nRewriteRule    ^news([0-9]*)\\.html$         /cgi-bin/index.cgi?op=news&amp;page=$1 [L]\nRewriteRule    ^n([0-9]+)-.*\\.html$         /cgi-bin/index.cgi?op=news_details&amp;news_id=$1 [L]\nRewriteRule    ^faq\\.html$              /cgi-bin/index.cgi?op=page&amp;tmpl=faq [L]\nRewriteRule    ^DMCA\\.html$             /cgi-bin/index.cgi?op=page&amp;tmpl=DMCA [L]\nRewriteRule    ^tos\\.html$              /cgi-bin/index.cgi?op=page&amp;tmpl=tos [L]\nRewriteRule    ^links\\.html$                /cgi-bin/index.cgi?op=links [L]\nRewriteRule    ^make_money\\.html$           /cgi-bin/index.cgi?op=make_money [L]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteRule    ^pages/([a-z0-9\\-\\_]+).html      /cgi-bin/index.cgi?op=page&amp;tmpl=$1$2 [L]\n\nRewriteCond %{QUERY_STRING} .*page=[0-9]+.*\nRewriteRule     ^users/([0-9A-Za-z\\-_]{4,64})/?([0-9]+|$)   /cgi-bin/index.cgi [L,NC,QSA]\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule     ^users/([0-9A-Za-z\\-_]{4,64})/?([0-9]+|$)   /cgi-bin/index.cgi?op=user_public&amp;usr_login=$1&amp;fld_id=$2 [L,NC]\nRewriteRule     ^u/([0-9A-Za-z\\-_]+)            /cgi-bin/index_dl.cgi?op=deurl&amp;id=$1 [L,NC]\nRewriteRule     ^d/([0-9A-Za-z\\-_]+)                    /cgi-bin/index_dl.cgi?op=deurl&amp;id=$1&amp;mode=2 [L,NC]\n\nRewriteRule    \\.pm$                    /404.html [L]\n\nErrorDocument 404 /404.html\n\n&lt;IfModule mod_php5.c&gt;\n        php_flag engine off\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>anyone can help me ?</p>\n"}, {"tags": ["xml", "perl", "unix"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 1, "creation_date": 1491118617, "post_id": 43165806, "comment_id": 73405939, "body": "not clear for which programming language you want the solution"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491195157, "post_id": 43165806, "comment_id": 73426953, "body": "What a stupid format. Anyway, you want something like <a href=\"https://pastebin.com/a0EBAbr7\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1491283608, "post_id": 43165806, "comment_id": 73469700, "body": "@AnkurJyotiPhukan, that portion is perfectly clear to me, because the heading specifically says &quot;How to extract specific tags from XML file using Perl&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1491283936, "post_id": 43165806, "comment_id": 73469831, "body": "@SAM1 please review the edits and approve and the thread can be taken off the hold status, then we can answer."}, {"owner": {"reputation": 11, "user_id": 7803837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c6796c1871022b0d4e16e85c14fde7?s=128&d=identicon&r=PG&f=1", "display_name": "SAM1", "link": "https://stackoverflow.com/users/7803837/sam1"}, "edited": false, "score": 0, "creation_date": 1491444746, "post_id": 43165806, "comment_id": 73559026, "body": "@User5422332 I have tried editing the post now. Please tell me if it makes sense now"}, {"owner": {"reputation": 11, "user_id": 7803837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c6796c1871022b0d4e16e85c14fde7?s=128&d=identicon&r=PG&f=1", "display_name": "SAM1", "link": "https://stackoverflow.com/users/7803837/sam1"}, "edited": false, "score": 0, "creation_date": 1491446205, "post_id": 43165806, "comment_id": 73559338, "body": "I have just been able to extract title elements using the following perl code-                                                                                                       perl -lne &#39;BEGIN{undef $/} while (/&lt;title&gt;(.*?)&lt;\\/title&gt;/sg){print $1}&#39; sample.xml . Can you tell me how to obtain other elements from all the tags. I don&#39;t have much knowledge about this. @User5422332"}], "owner": {"reputation": 11, "user_id": 7803837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c6796c1871022b0d4e16e85c14fde7?s=128&d=identicon&r=PG&f=1", "display_name": "SAM1", "link": "https://stackoverflow.com/users/7803837/sam1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491748947, "creation_date": 1491118458, "last_edit_date": 1491444716, "question_id": 43165806, "link": "https://stackoverflow.com/questions/43165806/how-to-extract-specific-tags-from-xml-file-using-perl", "title": "How to extract specific tags from XML file using Perl", "body": "<p>I have a XML file.\nI want to extract the elements between the following tags- article-id, title,p \nI want to know how to extract the elements stored in between these tags and save to a csv file.</p>\n\n<p>XML file- </p>\n\n<pre><code>&lt;artile-id&gt;1234&lt;/article-id&gt;\n&lt;title&gt;A&lt;/title&gt;\n&lt;p&gt;Hi&lt;/p&gt;\n&lt;title&gt;B&lt;/title&gt;\n&lt;p&gt;contents&lt;/p&gt;\n&lt;title&gt;C&lt;/title&gt;\n&lt;p&gt;Hello&lt;/p&gt;\n</code></pre>\n\n<p>I only want to extract the elements between title tags when only 'A' or 'C' is present and the contents stored under the title between p tags.</p>\n\n<p>Desired output- 1234,A,Hi,C,Hello</p>\n\n<p>I want to know how to search and match the elements of title tag also include the elements stored between p tags using Perl</p>\n"}, {"tags": ["regex", "perl", "ubuntu", "pam"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 5, "creation_date": 1491117364, "post_id": 43165604, "comment_id": 73405656, "body": "Let me just guess because you are missing any useful context: you are using a newer Perl version on your system then the one which came with the system and now you are seeing problems caused by this. For now these are just warnings you can ignore if you don&#39;t understand Perl. In any case better use the original Perl which came with your system for any scripts which are shipped with the system. If you understand Perl you can fix the warning by escaping the <code>{</code> inside the Regex, i.e. <code>\\{</code>."}, {"owner": {"reputation": 179, "user_id": 7803830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a0e329267c6c41d797ecc74db552d8?s=128&d=identicon&r=PG&f=1", "display_name": "TheCabDriverCheatedMeToday", "link": "https://stackoverflow.com/users/7803830/thecabdrivercheatedmetoday"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1491118173, "post_id": 43165604, "comment_id": 73405835, "body": "Thanks a lot!  That worked.  Yeah I did a sudo apt-get upgrade and somehow newer packages got installed on my Ubuntu 14.04.  Am slowly trying to fix them one by one... T_T  Does this by any chance affect my samba or ldap?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1491121911, "post_id": 43165604, "comment_id": 73406750, "body": "Since it is unknown what exactly the changes were it is unknown what impact they might have."}], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 137158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UlJ6L.jpg?s=128&g=1", "display_name": "cas", "link": "https://stackoverflow.com/users/137158/cas"}, "edited": false, "score": 2, "creation_date": 1501243458, "post_id": 43176613, "comment_id": 77706792, "body": "escaping the <code>{</code> isn&#39;t always the best solution.  sometimes <code>{,n}</code> is used instead of <code>{0,n}</code> to indicate 0..n repetitions.  this used to work, now the 0 is no longer optional."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 626, "user_id": 137158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UlJ6L.jpg?s=128&g=1", "display_name": "cas", "link": "https://stackoverflow.com/users/137158/cas"}, "edited": false, "score": 0, "creation_date": 1501258913, "post_id": 43176613, "comment_id": 77717904, "body": "@cas, Fixed. . ."}, {"owner": {"reputation": 495, "user_id": 6330670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXmfw.jpg?s=128&g=1", "display_name": "M.S. Arun", "link": "https://stackoverflow.com/users/6330670/m-s-arun"}, "edited": false, "score": 0, "creation_date": 1511945365, "post_id": 43176613, "comment_id": 82053544, "body": "Works perfect!!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 14, "last_activity_date": 1501258907, "last_edit_date": 1501258907, "creation_date": 1491194555, "answer_id": 43176613, "question_id": 43165604, "link": "https://stackoverflow.com/questions/43165604/unescaped-left-brace-regex-error/43176613#43176613", "title": "Unescaped left brace regex error", "body": "<p>It's a deprecation <em>warning</em> indicating the code will stop working <em>in the future</em>.</p>\n\n<p>If you want to match a <code>{</code> literally, you should escape it. </p>\n\n<p>In other words, you can fix the issue (silencing the warning) by replacing the first <code>{</code> with <code>\\{</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 4814971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzV61.jpg?s=128&g=1", "display_name": "Jacques", "link": "https://stackoverflow.com/users/4814971/jacques"}, "is_accepted": false, "score": -1, "last_activity_date": 1529631032, "creation_date": 1529631032, "answer_id": 50979452, "question_id": 43165604, "link": "https://stackoverflow.com/questions/43165604/unescaped-left-brace-regex-error/50979452#50979452", "title": "Unescaped left brace regex error", "body": "<p>Instead of escaping the left or right brace, how about using its unicode equivalent value? Like so:</p>\n\n<p><code>while ($rest =~ m/^(.*?)(\\\\)?\\$\\x7B([^\\x7B\\x7D]+)\\x7D(.*)$/sg) {</code></p>\n\n<p>I had the similar problem, and this solved it for me.</p>\n"}], "owner": {"reputation": 179, "user_id": 7803830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a0e329267c6c41d797ecc74db552d8?s=128&d=identicon&r=PG&f=1", "display_name": "TheCabDriverCheatedMeToday", "link": "https://stackoverflow.com/users/7803830/thecabdrivercheatedmetoday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16144, "favorite_count": 0, "answer_count": 2, "score": 12, "last_activity_date": 1529631032, "creation_date": 1491117100, "last_edit_date": 1491117276, "question_id": 43165604, "link": "https://stackoverflow.com/questions/43165604/unescaped-left-brace-regex-error", "title": "Unescaped left brace regex error", "body": "<p>I\u2019m not an expert in regex and can't figure what I am supposed to change here.</p>\n\n<p>I get these two errors</p>\n\n<p>Unescaped left brace in regex is deprecated, passed through in regex; marked by <code>&lt;-- HERE</code> in <code>m/^(.*?)(\\\\)?\\${ &lt;-- HERE ([^{}]+)}(.*)$/</code> at /usr/share/perl5/Debconf/Question.pm line 72.</p>\n\n<p>Unescaped left brace in regex is deprecated, passed through in regex; marked by <code>&lt;-- HERE</code> in <code>m/\\${ &lt;-- HERE ([^}]+)}/</code> at /usr/share/perl5/Debconf/Config.pm line 30.</p>\n\n<p>When I jump to the line 72 this is what I see</p>\n\n<pre><code>while ($rest =~ m/^(.*?)(\\\\)?\\${([^{}]+)}(.*)$/sg) {\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1491107000, "post_id": 43164363, "comment_id": 73403772, "body": "<code>my @captures = $info =~ m&#47;^\\s*(\\d+\\.)&#47;mg;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491107954, "post_id": 43164363, "comment_id": 73403905, "body": "I am not sure -- do you wan to split <i>by</i> <code>8.</code> (etc)?  In other words, do you want to have <code>9 ... Run</code> (etc) in the end, OR, <code>8. 9. ...</code> (etc)?"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1491109197, "post_id": 43164363, "comment_id": 73404110, "body": "What have you tried?  These posts lately have low scores and no demonstrated effort on execution.  There are language docs that show you how to implement the language, this seems more like trying to get someone to do your work for you."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1491163215, "last_edit_date": 1491163215, "creation_date": 1491107116, "answer_id": 43164634, "question_id": 43164363, "link": "https://stackoverflow.com/questions/43164363/how-to-use-split-in-perl-with-regular-expression/43164634#43164634", "title": "How to Use Split in perl with regular expression", "body": "<p>If the objective is to split <em>by</em> <code>8.</code>, <code>9.</code> (etc) </p>\n\n<pre><code>my @contents = grep { /./ } split /\\d+\\./, $info;\n</code></pre>\n\n<p>The array <code>@contents</code> has <code>9   Run ...</code>(up to 9.), etc, with newlines and all.  The pattern <code>/.../</code> in <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> is a full regular expression, which when matched in the string is taken to be a separator to split by. The regex above specifies a number followed by a period, so the string is split by any such.</p>\n\n<p>Since <code>split</code> in this case also captures (the empty string) <em>before</em> the first match (<code>8.</code>), we use <a href=\"https://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> to filter out empty strings, by requiring that each element matches at least one character. </p>\n\n<p>You may also want to opt  for more substantial filtering, like with <code>grep { /\\S/ }</code>, which would require that each element has at least one non-space thus discarding those which have only spaces.</p>\n\n<p>Or, you can check only the first element</p>\n\n<pre><code>my @contents = split /\\d+\\./, $info;\nshift @contents if $contents[0] eq '';\n</code></pre>\n\n<p>In the shown example there surely will be an empty string first.</p>\n\n<p>What the most suitable approach is in general depends on what may actually be before <code>8.</code>, what you want to do with it, and what you want to do with possible elements containing only spaces (like from <code>14.  15.</code>), or even empty strings (from <code>14.15.</code>).</p>\n\n<hr>\n\n<p>If the objective was to <em>capture</em> <code>8.</code>, <code>9.</code> (etc) then regex is better</p>\n\n<pre><code>my @num_dot = $info =~ /(\\d+\\.)/g;\n</code></pre>\n\n<p>The array <code>@num_dot</code> contains: <code>8. 9. 10. 11. 12.</code></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1491187231, "last_edit_date": 1491187231, "creation_date": 1491111421, "answer_id": 43164990, "question_id": 43164363, "link": "https://stackoverflow.com/questions/43164363/how-to-use-split-in-perl-with-regular-expression/43164990#43164990", "title": "How to Use Split in perl with regular expression", "body": "<p>It's not quite clear what you want, but splitting on the numbers seems like a poor approach to accomplishing anything.</p>\n\n<p>At the very least, you want to make per-record changes and/or extract per-record information, so it would be far better to split the data into records. Each record is separated by a blank line, so we can use</p>\n\n<pre><code>my @items = split /\\n\\n/, $info;\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>my @items = (\n   \"8. 9         Run\\n       Keywords :- RUN;\",\n   \"    9. 10        spreadshee\\n       Keywords :- spreadsheet;\",\n   \"   10. 11        Book\\n       Keywords :- Book;\",\n   \"   11. 15        Hide\\n       Keywords :- Hide;\",\n   \"   12. 132        Pick\\n       Keywords :- Pick;\",\n);\n</code></pre>\n\n<p>Now, it seems you want to remove the numbers.</p>\n\n<pre><code>s/^\\s*\\K\\d+\\.\\s*// for @items;   # Preserves the leading whitespace.\n\ns/^\\s*\\d+\\.\\s*// for @items;     # Removes the leading whitespace.\n</code></pre>\n\n<p>The latter gives:</p>\n\n<pre><code>my @items = (\n   \"9         Run\\n       Keywords :- RUN;\",\n   \"10        spreadshee\\n       Keywords :- spreadsheet;\",\n   \"11        Book\\n       Keywords :- Book;\",\n   \"15        Hide\\n       Keywords :- Hide;\",\n   \"132        Pick\\n       Keywords :- Pick;\",\n);\n</code></pre>\n\n<p>You could reconstruct <code>$info</code> minus the numbers by using</p>\n\n<pre><code>$info = join(\"\\n\\n\", @items);\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>9         Run\n       Keywords :- RUN;\n\n10        spreadshee\n       Keywords :- spreadsheet;\n\n11        Book\n       Keywords :- Book;\n\n15        Hide\n       Keywords :- Hide;\n\n132        Pick\n       Keywords :- Pick;\n</code></pre>\n\n<p>If this doesn't answer your question, but clarify what output you expect from your example.</p>\n"}], "owner": {"reputation": 261, "user_id": 7025995, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/499907293467257/picture?type=large", "display_name": "Amit Dangwal", "link": "https://stackoverflow.com/users/7025995/amit-dangwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 43164634, "answer_count": 2, "score": 0, "last_activity_date": 1491187231, "creation_date": 1491104144, "last_edit_date": 1491151611, "question_id": 43164363, "link": "https://stackoverflow.com/questions/43164363/how-to-use-split-in-perl-with-regular-expression", "title": "How to Use Split in perl with regular expression", "body": "<p>I want to Split the Content from a number followed by .</p>\n\n<pre><code>my $info = \"8. 9         Run\n       Keywords :- RUN;\n\n    9. 10        spreadsheet\n       Keywords :- spreadsheet;\n\n   10. 11        Book\n       Keywords :- Book;\n\n   11. 15        Hide\n       Keywords :- Hide;\n\n   12. 132        Pick\n       Keywords :- Pick;\n</code></pre>\n\n<p>This the string that i have split the content according to the numbers like 8., 9., 10., 11.,12. \nAny suggestion how to do this in Perl and make sure that numbers like 8. does't appear after spiting.</p>\n"}, {"tags": ["perl", "http", "http-headers", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491092701, "post_id": 43163055, "comment_id": 73401426, "body": "You can only send one header! You can&#39;t return both a 401 and a 302 (redirect). You could use an &quot;http-equiv&quot; or JS to get the browser to redirect, but why just return the 302?"}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 6155139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c09d1f850551b06ef91daa250c86a8?s=128&d=identicon&r=PG", "display_name": "Fashim", "link": "https://stackoverflow.com/users/6155139/fashim"}, "edited": false, "score": 0, "creation_date": 1491094684, "post_id": 43163421, "comment_id": 73401784, "body": "Ahh I getcha, just implemented it. Thanks a bunch ikegami."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1491095000, "last_edit_date": 1491095000, "creation_date": 1491093078, "answer_id": 43163421, "question_id": 43163055, "link": "https://stackoverflow.com/questions/43163055/perl-cgi-redirect-after-cancelling-on-a-401/43163421#43163421", "title": "Perl CGI redirect after cancelling on a 401", "body": "<p><code>sendAuthenticationHeader()</code> emits a header with a 401 status code.</p>\n\n<p><code>print $cgi-&gt;redirect($ENV{HTTP_REFERER});</code> emits a header with a 302 status code. Of course, since you've already emitted a header, this gets treated as the body.</p>\n\n<p>There's no point to return a 401 if you want to redirect. Change your code to</p>\n\n<pre><code>sub checkAuth {\n  my ($user, $pass) = getAuthUsers();\n\n  if (!$user || !checkUser($user, $pass)) {\n    print CGI::redirect($ENV{HTTP_REFERER});\n    exit;\n  }\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Removed incorrect <code>&amp;</code>. Don't tell Perl to ignore the prototype of subs. Address the underlying issue instead if required.</li>\n<li>The return value of <code>checkUser</code> is boolean, so it should return either a true or a false value (e.g. <code>0</code> or <code>1</code>), not two true values (e.g. <code>N</code> or <code>Y</code>). The above code assumed you fixed this.</li>\n</ul>\n"}], "owner": {"reputation": 144, "user_id": 6155139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c09d1f850551b06ef91daa250c86a8?s=128&d=identicon&r=PG", "display_name": "Fashim", "link": "https://stackoverflow.com/users/6155139/fashim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 43163421, "answer_count": 1, "score": 0, "last_activity_date": 1491095000, "creation_date": 1491088968, "question_id": 43163055, "link": "https://stackoverflow.com/questions/43163055/perl-cgi-redirect-after-cancelling-on-a-401", "title": "Perl CGI redirect after cancelling on a 401", "body": "<p>I've currently got a small script running that sends a 401 to the client, upon cancelling and not providing user details the script will return nothing.</p>\n\n<p>I'd like to send a redirect to the page they have come from instead.</p>\n\n<p>The main subroutine looks like this;</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse CGI;\n\nsub checkAuth {\n  my ($user, $pass) = &amp;getAuthUsers(); # Get the user and pass of already authenticated users.\n  unless ($user) {\n    &amp;sendAuthenticationHeader(); # Send 401\n  }\n\n  # Check user against DB and return 1 for success.\n  if ( &amp;checkUser($user, $pass) eq 'Y') { return 1 };\n  else { # This is the redirect I'm trying to issue.\n    my $cgi = CGI-&gt;new();\n    print $cgi-&gt;redirect($ENV{HTTP_REFERER}); # Redirect to the referer url\n    exit;\n  }\n}\n</code></pre>\n\n<p>Unfortunately whenever I try to send new headers it's just received as plain text.</p>\n\n<p>Any help is appreciated, thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491065940, "post_id": 43159304, "comment_id": 73394188, "body": "I concur with your assessment. Workaround: You could use <code>$&amp;</code> (<code>$MATCH</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1491082826, "creation_date": 1491082826, "answer_id": 43162305, "question_id": 43159304, "link": "https://stackoverflow.com/questions/43159304/the-match-and-the-p-modifier-in-perl-v24/43162305#43162305", "title": "The ${^MATCH} and the /p modifier in perl v24", "body": "<p>There is indeed a discrepancy between the code's behaviour and the documented behaviour. Filed a bug report as ticket <a href=\"https://rt.perl.org/Ticket/Display.html?id=131087\" rel=\"noreferrer\">RT#131087</a>.</p>\n\n<p>As a workaround, you can use use <code>$&amp;</code> (<code>$MATCH</code>).</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 43162305, "answer_count": 1, "score": 7, "last_activity_date": 1491082826, "creation_date": 1491064254, "question_id": 43159304, "link": "https://stackoverflow.com/questions/43159304/the-match-and-the-p-modifier-in-perl-v24", "title": "The ${^MATCH} and the /p modifier in perl v24", "body": "<p>The <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"noreferrer\">perlre</a> says:</p>\n\n<blockquote>\n  <p>p</p>\n  \n  <p>Preserve the string matched such that ${^PREMATCH} , ${^MATCH} , and\n  ${^POSTMATCH} are available for use after matching.</p>\n  \n  <p>In Perl 5.20 and higher this is ignored. Due to a new copy-on-write\n  mechanism, ${^PREMATCH} , ${^MATCH} , and ${^POSTMATCH} will be\n  available after the match regardless of the modifier.</p>\n</blockquote>\n\n<p>also the <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"noreferrer\">perlvar</a></p>\n\n<blockquote>\n  <p>${^MATCH}\n  This is similar to $&amp; ($MATCH ) except that it does not incur the\n  performance penalty associated with that variable.</p>\n  \n  <p>In Perl v5.18 and earlier, it is only guaranteed to return a defined \n  value when the pattern was compiled or executed with the /p modifier. \n  In Perl v5.20, the /p modifier does nothing, so ${^MATCH} does the same thing as $MATCH .</p>\n</blockquote>\n\n<p>test:</p>\n\n<pre><code>echo 'Lorem ipsum dolor sit ut dicta qui dolores.' |\\\n perl -nE 'say ${^MATCH} while m/dolor/g'\n</code></pre>\n\n<p>output: two empty lines (2x <code>\\n</code>)</p>\n\n<p>but the:</p>\n\n<pre><code>echo 'Lorem ipsum dolor sit ut dicta qui dolores.' |\\\n perl -nE 'say ${^MATCH} while m/dolor/gp'\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>dolor\ndolor\n</code></pre>\n\n<p>My perl:</p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 24, subversion 0 (v5.24.0) built for darwin-2level\n(with 1 registered patch, see perl -V for more detail)\n</code></pre>\n\n<p>So in the <code>5.24.0</code> the <code>/p</code> modifier is still needed? Or what me missed?</p>\n"}, {"tags": ["python", "regex", "linux", "bash", "perl"], "comments": [{"owner": {"reputation": 51, "user_id": 1800744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf324e8e072f24edfb7336e3f809fdef?s=128&d=identicon&r=PG", "display_name": "kenberland", "link": "https://stackoverflow.com/users/1800744/kenberland"}, "edited": false, "score": 0, "creation_date": 1491064189, "post_id": 43159219, "comment_id": 73393539, "body": "<code>ruby -e&quot;strings = %w&#47;60FLPFXXXXXX 60FLPPXXXXXX 60PLPFXXXXXX 60PLPPXXXXXX&#47;;strings.each {|string| p &#47;60([FLPF]{4})[A-Z0-9]{6}&#47;.match(string)}&quot;</code>"}, {"owner": {"reputation": 1184, "user_id": 1133626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43a0439a260464652eb0d502eada677?s=128&d=identicon&r=PG", "display_name": "jakeehoffmann", "link": "https://stackoverflow.com/users/1133626/jakeehoffmann"}, "edited": false, "score": 0, "creation_date": 1491064259, "post_id": 43159219, "comment_id": 73393576, "body": "A regex could have infinitely many strings that will match. Think of any regex with <code>*</code> in it."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7601012"}, "is_accepted": true, "score": 5, "last_activity_date": 1491066111, "creation_date": 1491066111, "answer_id": 43159657, "question_id": 43159219, "link": "https://stackoverflow.com/questions/43159219/how-i-can-generate-all-combinations-from-regex-regular-expression/43159657#43159657", "title": "How I can generate all combinations from RegEx (regular expression)?", "body": "<p>I found a solution. With the tool rexgen (<a href=\"https://github.com/teeshop/rexgen\" rel=\"noreferrer\">https://github.com/teeshop/rexgen</a>) is it possible to generate all combinations from a given regular expression :)</p>\n\n<pre><code>$ rexgen 60[FP]LP[FP]XXXXXX\n60FLPFXXXXXX\n60PLPFXXXXXX\n60FLPPXXXXXX\n60PLPPXXXXXX\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66615, "user_id": 229602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/50063ac5c0d377349bb613953cf61be4?s=128&d=identicon&r=PG", "display_name": "Noufal Ibrahim", "link": "https://stackoverflow.com/users/229602/noufal-ibrahim"}, "edited": false, "score": 1, "creation_date": 1491066322, "post_id": 43159670, "comment_id": 73394321, "body": "A potentially infinite set of strings (e.g. <code>a*</code>) so in it&#39;s most general sense, the answer to the question is that it&#39;s not possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 66615, "user_id": 229602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/50063ac5c0d377349bb613953cf61be4?s=128&d=identicon&r=PG", "display_name": "Noufal Ibrahim", "link": "https://stackoverflow.com/users/229602/noufal-ibrahim"}, "edited": false, "score": 2, "creation_date": 1491066796, "post_id": 43159670, "comment_id": 73394497, "body": "@Noufal Ibrahim, Not so. The fact that you don&#39;t have the time generate the matching set of every regex doesn&#39;t mean it&#39;s not possible. If it&#39;s possible to do with a glob, it&#39;s possible to do with a regex as well."}, {"owner": {"reputation": 66615, "user_id": 229602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/50063ac5c0d377349bb613953cf61be4?s=128&d=identicon&r=PG", "display_name": "Noufal Ibrahim", "link": "https://stackoverflow.com/users/229602/noufal-ibrahim"}, "edited": false, "score": 0, "creation_date": 1491131597, "post_id": 43159670, "comment_id": 73409270, "body": "It&#39;s not possible, in the most general sense, to enumerate all strings that match any given glob pattern (e.g. <code>foo.*</code>) so my point still stands unless I&#39;ve misunderstood your counter."}, {"owner": {"reputation": 66615, "user_id": 229602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/50063ac5c0d377349bb613953cf61be4?s=128&d=identicon&r=PG", "display_name": "Noufal Ibrahim", "link": "https://stackoverflow.com/users/229602/noufal-ibrahim"}, "edited": false, "score": 0, "creation_date": 1491196450, "post_id": 43159670, "comment_id": 73427304, "body": "It is possible to do what the OP wants which is why I qualified my sentence with &quot;in the most general sense&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 66615, "user_id": 229602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/50063ac5c0d377349bb613953cf61be4?s=128&d=identicon&r=PG", "display_name": "Noufal Ibrahim", "link": "https://stackoverflow.com/users/229602/noufal-ibrahim"}, "edited": false, "score": 1, "creation_date": 1491200985, "post_id": 43159670, "comment_id": 73428952, "body": "I&#39;m disagreeing with &quot;<i>the answer to the question is that it&#39;s not possible</i>&quot;. You are wrong. It&#39;s possible to do what the OP wants, period. You can see it done <a href=\"http://stackoverflow.com/a/43159657/589924\">here</a>.  That fact that you can make infinite loops doesn&#39;t make &quot;loops impossible in the general sense&quot;!!!"}, {"owner": {"reputation": 89, "user_id": 9425669, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210525199152980/picture?type=large", "display_name": "Yuval Zilber", "link": "https://stackoverflow.com/users/9425669/yuval-zilber"}, "edited": false, "score": 0, "creation_date": 1605184135, "post_id": 43159670, "comment_id": 114576336, "body": "for the question &quot;Is it possible to write print all natural numbers to the console?&quot; the answer is &quot;YES&quot;. <code>i = 0; while (True) print(i);</code> theoretically prints all natural numbers. It will print (eventually) any natural number. to contradict my statement &quot;this code print all natural numbers&quot; you must show that there is a natural number this code won&#39;t print. which you can&#39;t. Therefore, it is possible to print all matches for a regex pattern."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1491066165, "creation_date": 1491066165, "answer_id": 43159670, "question_id": 43159219, "link": "https://stackoverflow.com/questions/43159219/how-i-can-generate-all-combinations-from-regex-regular-expression/43159670#43159670", "title": "How I can generate all combinations from RegEx (regular expression)?", "body": "<p>A regular expression patterns defines a set of strings, so it's theoretically possible to use it to generate the list of strings in the set, but they aren't meant to do that. I'm not sure if someone's written a module to do that.</p>\n\n<p>A glob, on the other hand, is designed to do exactly what you want. Could you use a glob instead?</p>\n\n<pre><code>say while glob('60{F,P}LP{F,P}XXXXXX');\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7601012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2083, "favorite_count": 0, "accepted_answer_id": 43159657, "answer_count": 2, "score": 4, "last_activity_date": 1491066165, "creation_date": 1491063690, "question_id": 43159219, "link": "https://stackoverflow.com/questions/43159219/how-i-can-generate-all-combinations-from-regex-regular-expression", "title": "How I can generate all combinations from RegEx (regular expression)?", "body": "<p>For example, I have the following regular expression:</p>\n\n<p>60[FP]LP[FP]XXXXXX</p>\n\n<p>And now need all possible combinations, in this case:</p>\n\n<p>60<strong>F</strong>LP<strong>F</strong>XXXXXX</p>\n\n<p>60<strong>F</strong>LP<strong>P</strong>XXXXXX</p>\n\n<p>60<strong>P</strong>LP<strong>F</strong>XXXXXX</p>\n\n<p>60<strong>P</strong>LP<strong>P</strong>XXXXXX</p>\n\n<p>Input RegEx is 12 characters long and consists of uppercase letters [A-Z] and numbers [0-9]</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491066660, "post_id": 43158857, "comment_id": 73394443, "body": "See also: <a href=\"http://stackoverflow.com/questions/16658333/grep-p-no-longer-works-how-can-i-rewrite-my-searches/16658690\">grep -P no longer works how can I rewrite my searches</a>. (Not a Perl-specific question, but the top answer answers this question.)"}], "answers": [{"tags": [], "owner": {"reputation": 102, "user_id": 4881069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3995c7f634efc01805574a757cf7d26a?s=128&d=identicon&r=PG&f=1", "display_name": "sdocio", "link": "https://stackoverflow.com/users/4881069/sdocio"}, "is_accepted": false, "score": 0, "last_activity_date": 1491061939, "creation_date": 1491061939, "answer_id": 43158900, "question_id": 43158857, "link": "https://stackoverflow.com/questions/43158857/what-is-perls-equivalent-one-liner-of-grep-o/43158900#43158900", "title": "What is perl&#39;s equivalent one liner of grep -o", "body": "<p>You could just change the code:</p>\n\n<pre><code>perl -ne 'if(/(regex)/) {print \"$1\\n\"}' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491061979, "creation_date": 1491061979, "answer_id": 43158906, "question_id": 43158857, "link": "https://stackoverflow.com/questions/43158857/what-is-perls-equivalent-one-liner-of-grep-o/43158906#43158906", "title": "What is perl&#39;s equivalent one liner of grep -o", "body": "<pre><code>perl -nE 'say $&amp; while /regex/g' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1491066402, "creation_date": 1491066402, "answer_id": 43159708, "question_id": 43158857, "link": "https://stackoverflow.com/questions/43158857/what-is-perls-equivalent-one-liner-of-grep-o/43159708#43159708", "title": "What is perl&#39;s equivalent one liner of grep -o", "body": "<p>If you want to do the minimal amount of work, change</p>\n\n<pre><code>grep -o -P 'PATTERN' file\n</code></pre>\n\n<p>to</p>\n\n<pre><code>perl -nle'print $&amp; if m{PATTERN}' file\n</code></pre>\n\n<p>So from</p>\n\n<pre><code>grep -o -P '(?&lt;=foo)bar(?=baz)' file\n</code></pre>\n\n<p>you get:</p>\n\n<pre><code>perl -nle'print $&amp; if m{(?&lt;=foo)bar(?=baz)}' file\n</code></pre>\n\n<p>However, it can be simpler to use a capture.</p>\n\n<pre><code>perl -nle'print $1 if /foo(bar)baz/' file\n</code></pre>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 43159708, "answer_count": 3, "score": 1, "last_activity_date": 1491066601, "creation_date": 1491061673, "question_id": 43158857, "link": "https://stackoverflow.com/questions/43158857/what-is-perls-equivalent-one-liner-of-grep-o", "title": "What is perl&#39;s equivalent one liner of grep -o", "body": "<p>My question is simple as my title says \"What is perl's equivalent one liner of grep -o?\". That is print the matched regex only instead of whole line?</p>\n\n<pre><code>perl -pe some_option?? 'm/regex/' file\n</code></pre>\n"}, {"tags": ["perl", "execution"], "comments": [{"owner": {"reputation": 2198, "user_id": 1477876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4D58M.jpg?s=128&g=1", "display_name": "Amnon", "link": "https://stackoverflow.com/users/1477876/amnon"}, "edited": false, "score": 0, "creation_date": 1491052820, "post_id": 43157353, "comment_id": 73389969, "body": "Try entering &#39;which perl&#39; at the command line. The resulting path should be the path typed out in the first line. Regarding permissions, chmod u+x XXX.pl should be enough"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1491053639, "post_id": 43157353, "comment_id": 73390200, "body": "try <code>.&#47;XXX.pl</code> - e.g. your <code>$PATH</code> (where shell searching for the executables) doesn&#39;t includes the <code>.</code> (current dir)."}, {"owner": {"reputation": 11, "user_id": 7465630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22f470a0c08970cc63df12488f4d9ff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Saly", "link": "https://stackoverflow.com/users/7465630/peter-saly"}, "edited": false, "score": 0, "creation_date": 1491055962, "post_id": 43157353, "comment_id": 73390908, "body": "To Amnon, which perl gives: /usr/bin/perl"}, {"owner": {"reputation": 11, "user_id": 7465630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22f470a0c08970cc63df12488f4d9ff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Saly", "link": "https://stackoverflow.com/users/7465630/peter-saly"}, "edited": false, "score": 0, "creation_date": 1491056034, "post_id": 43157353, "comment_id": 73390930, "body": "To jm666,  ./XXX.pl  gives: bash: ./XXX: No such file or directory"}, {"owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "edited": false, "score": 1, "creation_date": 1491059416, "post_id": 43157353, "comment_id": 73391842, "body": "A nasty catch is when you got your script from a Windows system. In that case, the line terminator is CR-LF instead of LF for Linux. If you try to run such a script on Linux, the CR character will be considered part of the interpreter name and you will get a command not found error. The solution in this case: run the command <code>dos2unix XXX.pl</code> and retry."}, {"owner": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "edited": false, "score": 0, "creation_date": 1491061920, "post_id": 43157353, "comment_id": 73392709, "body": "@Peter Saly: Could you show us the output of the command <code>hexdump XXX.pl | head -n1</code> please? Just to make sure we don&#39;t have the encoding problems Hellmar Becker is talking about."}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1491066792, "post_id": 43158410, "comment_id": 73394495, "body": "please @inferno, add an explanation yourself to the use of <code>#!&#47;usr&#47;bin&#47;env perl</code>, to ensure it will run with a non-system perl, for example, after installing Perlbrew (which is a good practice when beginning Perl)"}, {"owner": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1491067443, "post_id": 43158410, "comment_id": 73394739, "body": "Yes, I was about to add this but then I realized that it can cause problems when you run your script as root. In this case the wrong perl interpreter might be chosen."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 2, "creation_date": 1491068563, "post_id": 43158410, "comment_id": 73395115, "body": "@vanHoesel, If you want your script to run with a Perl other than <code>&#47;usr&#47;bin&#47;perl</code>, you should include that path, not use <code>env</code>. (Changing the path in the shebang line should be done by the script&#39;s installer. MM and MB both adjust the shebang line when installing a script.)"}], "tags": [], "owner": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "is_accepted": false, "score": 5, "last_activity_date": 1492564994, "last_edit_date": 1492564994, "creation_date": 1491059004, "answer_id": 43158410, "question_id": 43157353, "link": "https://stackoverflow.com/questions/43157353/unable-to-execute-perl-script-unless-perl-is-inserted-before-script-name/43158410#43158410", "title": "Unable to execute Perl script unless Perl is inserted before script name", "body": "<p>The two usual options to execute your Perl script are:</p>\n\n<pre><code>perl XXX.pl\n</code></pre>\n\n<p>or</p>\n\n<pre><code>./XXX.pl\n</code></pre>\n\n<p>Both ways assume that your current working directory contains the script <em>XXX.pl</em>, otherwise it won't work.</p>\n\n<p>As already pointed out by jm666 in the comments, you can usually not execute a program or script from your current working directory without prepending <code>./</code>, primarily because of security reasons. Now, you may wonder why it's necessary.</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Your shell uses the contents of an environment variable called <code>$PATH</code> to find out about where external commands (non-builtin programs) are located in your filesystem. If you want to see what's in <code>$PATH</code>, just type the following in your shell:</p>\n\n<pre><code>echo $PATH\n</code></pre>\n\n<p>Now you can see that the <code>$PATH</code> variable does NOT contain your current working directory. The consequence is that your shell is not able to find the program <em>XXX.pl</em>. By prepending <code>./</code> you instruct the shell to execute the program which comes after.\nBut there are two requirements if you want to execute your Perl script with <code>./script.pl</code>:</p>\n\n<ol>\n<li>The script has to be executable (check with <code>ls -l</code>)</li>\n<li>The first line (shebang line) has to be <code>#!/path/to/your/perl</code> because your shell needs that information to find the perl interpreter in order to run your script</li>\n</ol>\n\n<p><em>However</em>, #1 and #2 are NOT required when you execute your script with </p>\n\n<pre><code>perl XXX.pl\n</code></pre>\n\n<p>because it invokes the perl interpreter directly with your script.</p>\n\n<p>See <a href=\"https://perlmaven.com/hashbang\" rel=\"nofollow noreferrer\">how to make Perl scripts executable on Linux</a> and <a href=\"http://tldp.org/LDP/abs/html/invoking.html\" rel=\"nofollow noreferrer\">make the script itself directly executable with chmod</a> for some more details.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7465630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22f470a0c08970cc63df12488f4d9ff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Saly", "link": "https://stackoverflow.com/users/7465630/peter-saly"}, "edited": false, "score": 0, "creation_date": 1491744370, "post_id": 43160007, "comment_id": 73679109, "body": "1) I am in the directory with the script is stored. So no need for a path to it. 2) Yes the file is executable. (By default all new scripts are automatically made executable"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 7465630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22f470a0c08970cc63df12488f4d9ff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Saly", "link": "https://stackoverflow.com/users/7465630/peter-saly"}, "edited": false, "score": 0, "creation_date": 1491760085, "post_id": 43160007, "comment_id": 73684506, "body": "Re &quot;<i>I am in the directory with the script is stored. So no need for a path to it</i>&quot;, <a href=\"https://pastebin.com/LFe5dA8Z\" rel=\"nofollow noreferrer\">You are mistaken!</a> On unix systems, a program in the current directory isn&#39;t executed unless you use provide a path to the program (e.g. <code>.&#47;program</code>) or <code>.</code> is in <code>PATH</code>.  This means you&#39;ve only checked 1 of the three possible issues."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1491068309, "creation_date": 1491068309, "answer_id": 43160007, "question_id": 43157353, "link": "https://stackoverflow.com/questions/43157353/unable-to-execute-perl-script-unless-perl-is-inserted-before-script-name/43160007#43160007", "title": "Unable to execute Perl script unless Perl is inserted before script name", "body": "<h2>Can the script be found?</h2>\n\n<p>Is <code>.</code> in your path? If it's not, add it to your path, or use <code>./XXX.pl</code> instead of <code>XXX.pl</code>.</p>\n\n<h2>Can the script be executed?</h2>\n\n<p>Do you have execute permission to the file? Fix using <code>chmod u+x XXX.pl</code>.</p>\n\n<h2>Is the interpreter correct?</h2>\n\n<p><code>which perl</code> will tell you which interpreter is used when you use <code>perl XXX.pl</code>. That's the path that should be on your shebang (<code>#!</code>) line.</p>\n"}], "owner": {"reputation": 11, "user_id": 7465630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22f470a0c08970cc63df12488f4d9ff?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Saly", "link": "https://stackoverflow.com/users/7465630/peter-saly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3706, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492564994, "creation_date": 1491052555, "last_edit_date": 1491053832, "question_id": 43157353, "link": "https://stackoverflow.com/questions/43157353/unable-to-execute-perl-script-unless-perl-is-inserted-before-script-name", "title": "Unable to execute Perl script unless Perl is inserted before script name", "body": "<p>Running Lubuntu - \nBeginner Perl programmer</p>\n\n<p>Script is <code>XXX.pl</code> located at <code>~/projects/XXX/XXX.pl</code></p>\n\n<p>First line is the shebang</p>\n\n<pre><code>#!/usr/bin/perl\n</code></pre>\n\n<p>Permission to run is set to Anyone.</p>\n\n<p>In directory <code>~/projects/XXX</code>, the command</p>\n\n<pre><code>~/projects/XXX$ perl XXX.pl\n</code></pre>\n\n<p>works as desired, but the command </p>\n\n<pre><code>~/projects/XXX$ XXX.pl\n</code></pre>\n\n<p>Fails with <code>XXX.pl: command not found</code></p>\n\n<p>What am I missing ?</p>\n"}, {"tags": ["perl", "uninstallation", "perlbrew"], "comments": [{"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 1, "creation_date": 1491055430, "post_id": 43156850, "comment_id": 73390739, "body": "try to check your env vars to make sure if there is a path to perlbrew home and also check this answer might be helpful <a href=\"http://stackoverflow.com/questions/14084323/perlbrew-command-not-found\">perlbrew command not found</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1491096834, "last_edit_date": 1491096834, "creation_date": 1491081071, "answer_id": 43162066, "question_id": 43156850, "link": "https://stackoverflow.com/questions/43156850/how-to-uninstall-perlbrew-from-macbook/43162066#43162066", "title": "how to uninstall perlbrew from macbook", "body": "<ol>\n<li><p>From the login script, delete the line</p>\n\n<pre><code>source ~/perl5/perlbrew/etc/bashrc\n</code></pre></li>\n<li><p>Delete the <code>perlbrew</code> directory</p>\n\n<pre><code>rm -rf ~/perl5/perlbrew\n</code></pre></li>\n</ol>\n\n<p>That assumes you installed <code>perlbrew</code> in its default location. If not, env var <code>$PERLBREW_ROOT</code> should indicate to where it's installed.</p>\n\n<hr>\n\n<p>If instead you'd rather fix the problem,</p>\n\n<ol>\n<li>Move <code>~/perl5/perlbrew/perls</code> to somewhere safe.</li>\n<li>Delete <code>~/perl5/perlbrew</code>.</li>\n<li>Reinstall <code>perlbrew</code>.</li>\n<li>Restore the <code>perls</code> directory.</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 7801590, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GZV7vVpPPmA/AAAAAAAAAAI/AAAAAAAAACg/7jJBmSztn6s/photo.jpg?sz=128", "display_name": "The Anonymous", "link": "https://stackoverflow.com/users/7801590/the-anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491096834, "creation_date": 1491049511, "question_id": 43156850, "link": "https://stackoverflow.com/questions/43156850/how-to-uninstall-perlbrew-from-macbook", "title": "how to uninstall perlbrew from macbook", "body": "<p>I have few modules associated with it. However when I try to switch from system perl to perlbrew it displays</p>\n\n<blockquote>\n  <p>-sh: perlbrew: command not found</p>\n</blockquote>\n\n<p>however in the directory I have,</p>\n\n<blockquote>\n  <p>bin        lib        man         perlbrew</p>\n</blockquote>\n\n<p>It has been almost over a year since I used perl and perlbrew and I am not able to figure it out how I did it the last time. Any help is appreciated. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1491046563, "post_id": 43156259, "comment_id": 73388110, "body": "Providing a sample input would be nice."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491046994, "post_id": 43156259, "comment_id": 73388229, "body": "You may want to include the space in the <code>q</code> pattern like this: <code>([^?]+)\\?(\\w+)\\?([^?]+)</code>"}, {"owner": {"reputation": 65, "user_id": 5954796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532ad12d14b340c26ef13d671f7fb86?s=128&d=identicon&r=PG&f=1", "display_name": "sobeit", "link": "https://stackoverflow.com/users/5954796/sobeit"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1491047414, "post_id": 43156259, "comment_id": 73388338, "body": "@revo - sample input and current/desired output added - thanks!"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1491048129, "post_id": 43156259, "comment_id": 73388548, "body": "What is wrong with <a href=\"https://regex101.com/r/xgQTcC/1\" rel=\"nofollow noreferrer\"><b><code>$line =~ s&#47;(\\?{1,2})(\\w+)\\1(?!\\?)&#47;$2&#47;;</code></b></a>?"}, {"owner": {"reputation": 65, "user_id": 5954796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532ad12d14b340c26ef13d671f7fb86?s=128&d=identicon&r=PG&f=1", "display_name": "sobeit", "link": "https://stackoverflow.com/users/5954796/sobeit"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491049850, "post_id": 43156259, "comment_id": 73389053, "body": "@H&#229;konH&#230;gland - That worked well! Thank you!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1491051172, "post_id": 43156259, "comment_id": 73389478, "body": "Why do you need to distinguish the two? Your desired output is the same in both cases."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1491051042, "post_id": 43156905, "comment_id": 73389439, "body": "Don&#39;t use <code>map</code> in void context (<code>map</code> collects a list of results; why collect anything if you&#39;re just going to throw it away?). You can just write <code>s&#47;\\?+(\\w+)\\?+&#47;$1&#47; for @strings;</code>."}], "tags": [], "owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "is_accepted": false, "score": -2, "last_activity_date": 1491051379, "last_edit_date": 1491051379, "creation_date": 1491049929, "answer_id": 43156905, "question_id": 43156259, "link": "https://stackoverflow.com/questions/43156259/regex-matching-and-printing-string-issue/43156905#43156905", "title": "Regex matching and printing string issue", "body": "<p>Pure regex substitution example <a href=\"https://regex101.com/r/gwaK4a/2/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Perl script code (may test it <a href=\"https://ideone.com/erGq9J\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @strings = (\n    'The box is ?Red? in colour.',\n    'The box is ??green?? in colour.'\n);\n\nlocal $\" = \"\\n\\t\";\n\nprint \"Before:\\n\\t @strings\\n\";\n\ns/\\?+(\\w+)\\?+/$1/ for @strings;\n\nprint \"After:\\n\\t @strings\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1491051485, "last_edit_date": 1491051485, "creation_date": 1491050619, "answer_id": 43157024, "question_id": 43156259, "link": "https://stackoverflow.com/questions/43156259/regex-matching-and-printing-string-issue/43157024#43157024", "title": "Regex matching and printing string issue", "body": "<p>You said: <em>I need to be able to distinguish between the two</em>. But because your wanted output is the same in both cases and doesn't show any difference, in the following examples it is demonstrated by:</p>\n\n<ul>\n<li>the <code>??str??</code> going to be uppercase,</li>\n<li>the <code>?str?</code> lowercase.</li>\n</ul>\n\n\n\n<pre><code>use 5.014;\nuse warnings;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    say \"orig: [$_]\";\n    s/ (\\?(\\?)?) (\\w+?) (\\1) / $2 ? uc($3) : lc($3) /gex;\n    say \"new : [$_]\";\n}\n\n__DATA__\nThe box is ?Red? in colour.\nThe box is ??green?? in colour. \nThe box is ?Red? but inside is an ??green?? one\nAren't nicer the ?blue?? Or the ??violet???\nWhat?  ??blue?  ???violet??!\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>orig: [The box is ?Red? in colour.]\nnew : [The box is red in colour.]\norig: [The box is ??green?? in colour. ]\nnew : [The box is GREEN in colour. ]\norig: [The box is ?Red? but inside is an ??green?? one]\nnew : [The box is red but inside is an GREEN one]\norig: [Aren't nicer the ?blue?? Or the ??violet???]\nnew : [Aren't nicer the blue? Or the VIOLET?]\norig: [What?  ??blue?  ???violet??!]\nnew : [What?  ?blue  ?VIOLET!]\n</code></pre>\n\n<p>you can also replace the <code>$2 ? uc($3) : lc($3)</code> with a subroutine call, like:</p>\n\n<pre><code>while(&lt;DATA&gt;) {\n    chomp;\n    say \"orig: [$_]\";\n    s/ (\\?(\\?)?) (\\w+?) (\\1) / make_result($3,$2) /gex;\n    say \"new : [$_]\";\n}\n\nsub make_result {\n    my($str, $two) = @_;\n    return uc($str) if $two;\n    return lc($str);\n}\n</code></pre>\n\n<p>with the same output.</p>\n"}, {"tags": [], "owner": {"reputation": 3226, "user_id": 1964690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120d7c6980b552a124f79016300ca954?s=128&d=identicon&r=PG", "display_name": "jrefior", "link": "https://stackoverflow.com/users/1964690/jrefior"}, "is_accepted": false, "score": 0, "last_activity_date": 1491147984, "creation_date": 1491147984, "answer_id": 43170273, "question_id": 43156259, "link": "https://stackoverflow.com/questions/43156259/regex-matching-and-printing-string-issue/43170273#43170273", "title": "Regex matching and printing string issue", "body": "<p>As you said, your code is \"almost working perfectly\": it is very close to doing exactly what you want.</p>\n\n<p>You can make it do exactly what you want by moving two parentheses in your first pattern to include the <code>[^\\?]</code> pattern match in the capture groups.  This will capture the spaces on either side of <code>?Red?</code> in your sample input.</p>\n\n<p>So </p>\n\n<pre><code>'(.*\\s?)[^\\?]\\?(\\w.*)\\?[^\\?](.*)'\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>'(.*\\s?[^\\?])\\?(\\w.*)\\?([^\\?].*)'\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5954796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532ad12d14b340c26ef13d671f7fb86?s=128&d=identicon&r=PG&f=1", "display_name": "sobeit", "link": "https://stackoverflow.com/users/5954796/sobeit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1491147984, "creation_date": 1491046222, "last_edit_date": 1491054450, "question_id": 43156259, "link": "https://stackoverflow.com/questions/43156259/regex-matching-and-printing-string-issue", "title": "Regex matching and printing string issue", "body": "<p></p>\n\n<p>In Perl, I am trying to match three groups. Some groups have two question marks around them, others have one. I need to be able to distinguish between the two.</p>\n\n<p><strong>Sample Input:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The box is ?Red? in colour.\nThe box is ??green?? in colour. \n</code></pre>\n\n<p><strong>Current Output:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The box isRedin colour.\n\nThe box is green in colour. \n</code></pre>\n\n<p><strong>Desired Output:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The box is Red in colour.\n\nThe box is green in colour. \n</code></pre>\n\n<p>Here is what is almost working perfectly:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $pattern_q  = '(.*\\s?)[^\\?]\\?(\\w.*)\\?[^\\?](.*)';\nmy $pattern_qq = '(.*\\s?)\\?\\?(\\w.*)\\?\\?(.*)';\n\nif ( $line =~ /$pattern_q/ ) {\n    print \"\\n\" . $1 . $2 . $3 . \"\\n\";       \n}\n\nif ( $line =~ /$pattern_qq/ ) {\n    print \"\\n\" . $1 . $2 . $3 . \"\\n\";\n</code></pre>\n\n<p>When I get a match against <code>$pattern_qq</code> - it handles everything correctly, except for the <code>\\n</code> at the end, which I can live with.</p>\n\n<p>When I get a match against <code>$pattern_q</code> - It removes the spaces between the three groups, which I want to retain.</p>\n"}, {"tags": ["perl", "text-xslate"], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 3, "answer_count": 0, "score": 7, "last_activity_date": 1491310519, "creation_date": 1491035794, "question_id": 43154630, "link": "https://stackoverflow.com/questions/43154630/filtering-content-in-textxslate", "title": "Filtering content in Text::Xslate", "body": "<p>In <a href=\"https://metacpan.org/pod/distribution/Mason/lib/Mason/Manual/Syntax.pod#%3C%25filter-name-params%3E\" rel=\"noreferrer\">Mason</a> i could define a filter:</p>\n\n<pre><code>&lt;%filter Div($class)&gt;\n        &lt;div class=\"&lt;% $class %&gt;\"&gt;\n                &lt;% $yield-&gt;() %&gt;\n        &lt;/div&gt;\n&lt;/%filter&gt;\n</code></pre>\n\n<p>And later i could use it</p>\n\n<pre><code>% $.Div(\"row\") {{\n   1 The \"$yield-&gt;()\" method returns everything from here (free text)\n%       $.Div(\"col\") {{\n                2 even could have another nested filter, etc...\n%       }}\n% }}\n</code></pre>\n\n<p>with result</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    1 The \"$yield-&gt;()\" method returns everything from here (free text)\n   &lt;div class=\"col\"&gt;\n            2 even could have another nested filter, etc...   \n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>E.g. the <code>$yield-&gt;()</code> method returns everything what is inside of the enclosed filter.</p>\n\n<p>Want achieve same functionality using <a href=\"https://metacpan.org/pod/Text::Xslate::Syntax::Kolon\" rel=\"noreferrer\">Text::Xslate</a>, but don't know how.</p>\n\n<p>The closest thing what I found ,are the <a href=\"https://metacpan.org/pod/Text::Xslate::Syntax::Kolon#Macro-blocks\" rel=\"noreferrer\">macro blocks</a> where i could write:</p>\n\n<pre><code>: macro div -&gt; ($cls,$str) {\n&lt;div class=\"&lt;: $cls :&gt;\"&gt;\n        &lt;: $str :&gt;\n&lt;/div&gt;\n: }\n</code></pre>\n\n<p>and use it as</p>\n\n<pre><code>: div(\"row\",\n:       div(\"col\",\n:               \"my string\"\n:       )\n: )\n</code></pre>\n\n<p>but the <code>my string</code> must be quoted and <code>:</code> marked, so it is impossible to use  any free html text. E.g. the following dies.</p>\n\n<pre><code>: div(\"row\",\n\nsome free text here\n\n:       div(\"col\",\n               nested\n               here\n:       )\n: )\n</code></pre>\n\n<p>After the long introduction, the question is simple:</p>\n\n<p>Exists in the <code>Text::Xslate</code> something as the Mason's <code>$yield-&gt;()</code> call, which returns the content of the enclosed filter call? (or if not exists, how i could mimic it?)</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1491032258, "post_id": 43153971, "comment_id": 73384533, "body": "<a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">man perlrun</a> - read about the <code>-i</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491037264, "post_id": 43153971, "comment_id": 73385649, "body": "See @jm666 comment. And use the optional (mandatory on some Mac OS) extension for backups, better safe than sorry."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1491037476, "post_id": 43153971, "comment_id": 73385707, "body": "Your code looks like it should have output on the console. At the very least it should show the unchanged input, but actually it should show &quot;bar bar&quot;. This is a different phrasing for what @jm666 comments."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491038169, "post_id": 43153971, "comment_id": 73385876, "body": "@SDonnelly: Your command looks correct; the modified file contents should be printed to the console. Are you sure <i>&quot;nothing happens&quot;</i>, or do you just mean the file isn&#39;t modified? If you want to write your output to a file then you may redirect the output on the command line with <code>perl -pe &#39;s&#47;foo&#47;bar&#47;&#39; test &gt; new_file</code>."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 1, "creation_date": 1491043499, "post_id": 43153971, "comment_id": 73387301, "body": "It is hard to imagine you have done anything to try and solve this extremely simple operation. Te only thing I have to add to the above is that you have not tried this on a Windows generated file?  If so, try using dos2unix first and then try your code again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 1, "creation_date": 1491055212, "post_id": 43153971, "comment_id": 73390669, "body": "@grail: The substitution in the question can&#39;t be affected by the line endings."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7800828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f7e5226a5b7bdf8380d7bc2a915234?s=128&d=identicon&r=PG&f=1", "display_name": "S Donnelly", "link": "https://stackoverflow.com/users/7800828/s-donnelly"}, "edited": false, "score": 0, "creation_date": 1491288518, "post_id": 43160313, "comment_id": 73472213, "body": "I think it was because I was using windows."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1491070054, "creation_date": 1491070054, "answer_id": 43160313, "question_id": 43153971, "link": "https://stackoverflow.com/questions/43153971/simple-substitution-in-a-file/43160313#43160313", "title": "Simple substitution in a file", "body": "<p>There is no issue to answer here.</p>\n\n<h3>File <code>test.txt</code></h3>\n\n<pre><code>foo\nbar\n</code></pre>\n\n<h2>Shell command</h2>\n\n<pre><code>$ perl -pe 's/foo/bar/g' test.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>bar\nbar\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7800828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f7e5226a5b7bdf8380d7bc2a915234?s=128&d=identicon&r=PG&f=1", "display_name": "S Donnelly", "link": "https://stackoverflow.com/users/7800828/s-donnelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 43160313, "answer_count": 1, "score": -2, "last_activity_date": 1491070054, "creation_date": 1491031061, "last_edit_date": 1491037789, "question_id": 43153971, "link": "https://stackoverflow.com/questions/43153971/simple-substitution-in-a-file", "title": "Simple substitution in a file", "body": "<p>I have a file <code>test</code> with the following contents</p>\n\n<pre><code>foo\nbar\n</code></pre>\n\n<p>I want to replace <code>foo</code> with <code>bar</code>.</p>\n\n<p>I run <code>perl -p -e 's/foo/bar/g' test</code> but nothing happens.</p>\n\n<p>I'm sure this has been done before, but any help would be appreciated.</p>\n"}, {"tags": ["arrays", "perl", "sorting"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491029990, "post_id": 43153575, "comment_id": 73383994, "body": "What Perl version are you using? The smartmatch operator has been changed a few times. I don&#39;t remember if the use case array and array was affected, but better tell us."}, {"owner": {"reputation": 15, "user_id": 4851094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFonc.jpg?s=128&g=1", "display_name": "orange", "link": "https://stackoverflow.com/users/4851094/orange"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491030154, "post_id": 43153575, "comment_id": 73384051, "body": "the Perl version is v5.12.1,thank you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491030318, "post_id": 43153575, "comment_id": 73384105, "body": "With the current 5.24.1 behavior it should do string equal on each pair for arrays. But you have lists, not arrays. That might make a difference. Maybe they get forced into scalar context. I don&#39;t have a computer right now. Try to put the arrays directly."}, {"owner": {"reputation": 15, "user_id": 4851094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFonc.jpg?s=128&g=1", "display_name": "orange", "link": "https://stackoverflow.com/users/4851094/orange"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491034131, "post_id": 43153575, "comment_id": 73384918, "body": "If put the sorted array to a new array, and use smartmatch to compare the new arrays, it is correct. here is the new test codes.  &quot;eq2&quot; will be printed, &quot;eq1&quot; will not.<code>my @arr0 = (&quot;a&quot;,&quot;b&quot;);my @arr1 = (&quot;b&quot;,&quot;a&quot;);print &quot;eq1\\n&quot; if ( sort @arr0 ~~ sort @arr1 ) ;my @sorted0 = sort @arr0;my @sorted1 = sort @arr1;print &quot;eq2\\n&quot; if ( @sorted0 ~~ @sorted1 );</code> thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1491068833, "post_id": 43153575, "comment_id": 73395208, "body": "<b>The smart-matching experimental feature should be avoided because it will be removed or changed in a manner that is not backwards compatible.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1491047545, "post_id": 43155874, "comment_id": 73388379, "body": "I would add a third bullet point: Don&#39;t use smartmatch. It&#39;s experimental and will definitely change in the future."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491055398, "post_id": 43155874, "comment_id": 73390730, "body": "@ThisSuitIsBlackNot: Yes, I meant to mention that. Thanks for the reminder. I&#39;ve added it to my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491068801, "post_id": 43155874, "comment_id": 73395198, "body": "Re &quot;<i>Its behaviour has been tweaked in pretty much every Perl release since</i>&quot;, That&#39;s not true. There&#39;s only been two changes: 5.10.1 (functional changes), and 5.18 (marked as experimental)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1491069866, "post_id": 43155874, "comment_id": 73395594, "body": "There are tweaks mentioned in perldelta for 5.14 and 5.16 as well. They were bug-fixes, but they changed the behaviour of the operator. And, to be honest, I have no problem with a small amount of poetic licence if it steers people away from the smartmatch operator."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1491055366, "last_edit_date": 1495540458, "creation_date": 1491043794, "answer_id": 43155874, "question_id": 43153575, "link": "https://stackoverflow.com/questions/43153575/perl-compare-sorted-array-using-smart-match/43155874#43155874", "title": "perl compare sorted array using smart match", "body": "<p>[<strong>Note:</strong> All links to documentation in this answer are to the documentation for version 5.12.1. This ensures the answer is useful for the original poster - it might make it less useful for other people.]</p>\n\n<p>It's important to realise that arrays and lists are not the same. This is one case where the behaviour is different.</p>\n\n<p>It's also important to read the <a href=\"https://perldoc.perl.org/5.12.1/functions/sort.html\" rel=\"nofollow noreferrer\">documentation for <code>sort()</code></a>, which starts by saying:</p>\n\n<blockquote>\n  <p>In list context, this sorts the LIST and returns the sorted list value. In scalar context, the behaviour of sort() is undefined.</p>\n</blockquote>\n\n<p>There are two important things there. Firstly, in list context, <code>sort()</code> returns a list, not an array. And secondly, in scalar context, its behaviour is undefined.</p>\n\n<p>Now let's look at the <a href=\"http://perldoc.perl.org/5.12.1/perlsyn.html#Smart-matching-in-detail\" rel=\"nofollow noreferrer\">smartmatch documentation</a>. That's a big table of left- and right-operands that I won't reproduce here. But note that it doesn't mention lists at all. So, almost certainly, smartmatch is calling <code>sort()</code> in scalar context and doing either a string or numeric comparison \non the results (one of the last few rows in the table).</p>\n\n<p>But we know that <code>sort()</code>'s behaviour in scalar context is undefined. So who knows what value smartmatch is comparing. But I guess that whatever random value it is returning, it is (at least) returning the same random value for both of your lists. Which means they appear to be equal.</p>\n\n<p>As you've said in a comment, it works when you save the sorted results in arrays and pass arrays to smartmatch. That's because arrays have special behaviours defined in the smartmatch table.</p>\n\n<ul>\n<li>Arrays are not lists</li>\n<li>Don't call <code>sort()</code> in scalar context</li>\n</ul>\n\n<p><strong>Update:</strong> As <a href=\"https://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsNotBlack</a> mentions in the comments, smartmatch has been rather unstable since it was introduced in Perl 5.10. Its behaviour has been tweaked in pretty much every Perl release since then and its final form still isn't completely agreed. For that reason, I strongly discourage you from using it at all.</p>\n"}], "owner": {"reputation": 15, "user_id": 4851094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tFonc.jpg?s=128&g=1", "display_name": "orange", "link": "https://stackoverflow.com/users/4851094/orange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 43155874, "answer_count": 1, "score": 1, "last_activity_date": 1491055366, "creation_date": 1491028064, "question_id": 43153575, "link": "https://stackoverflow.com/questions/43153575/perl-compare-sorted-array-using-smart-match", "title": "perl compare sorted array using smart match", "body": "<p>The following is the code, actually, @arr0 and @arr1 are not equal, even after sorting, they are not equal, but why \"eq\" will be printed? at first, I thought about the return value of sort funtion, but it did return an array,so what's the reason?</p>\n\n<pre><code>my @arr0 = (1,2);\nmy @arr1 = (\"a\",\"b\");\n\nif ( (sort @arr0) ~~ (sort @arr1) ) {\n    print \"eq\\n\";\n};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491040454, "post_id": 43153449, "comment_id": 73386484, "body": "The code you show appears to work. Please show the program that isn&#39;t working."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491042864, "post_id": 43153449, "comment_id": 73387135, "body": "Please <a href=\"http://stackoverflow.com/posts/43153449/edit\">edit your question</a> to add the output that you are expecting. It&#39;s currently unclear what you mean by &quot;I unable to do the same in when the condition is increased to 10001 to 20000 and 30001 to 40000 and so on&quot;."}, {"owner": {"reputation": 3, "user_id": 7800532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SmR45rDVX0/AAAAAAAAAAI/AAAAAAAABZo/RJMWbkBGpcE/photo.jpg?sz=128", "display_name": "Priti Prasad", "link": "https://stackoverflow.com/users/7800532/priti-prasad"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491307232, "post_id": 43153449, "comment_id": 73484607, "body": "@DaveCross I edit my question. Sorry for late response."}, {"owner": {"reputation": 3, "user_id": 7800532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SmR45rDVX0/AAAAAAAAAAI/AAAAAAAABZo/RJMWbkBGpcE/photo.jpg?sz=128", "display_name": "Priti Prasad", "link": "https://stackoverflow.com/users/7800532/priti-prasad"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491307247, "post_id": 43153449, "comment_id": 73484620, "body": "@Borodin Yes, this code is working but it does not work in a loop...I have large data so I want to add all in 10000 windows.sorry for late response"}, {"owner": {"reputation": 3, "user_id": 7800532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SmR45rDVX0/AAAAAAAAAAI/AAAAAAAABZo/RJMWbkBGpcE/photo.jpg?sz=128", "display_name": "Priti Prasad", "link": "https://stackoverflow.com/users/7800532/priti-prasad"}, "edited": false, "score": 0, "creation_date": 1491307326, "post_id": 43153449, "comment_id": 73484674, "body": "I am very new to this forum. Sorry for inconvenient. :)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7800532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SmR45rDVX0/AAAAAAAAAAI/AAAAAAAABZo/RJMWbkBGpcE/photo.jpg?sz=128", "display_name": "Priti Prasad", "link": "https://stackoverflow.com/users/7800532/priti-prasad"}, "edited": false, "score": 0, "creation_date": 1496817306, "post_id": 43213621, "comment_id": 75809382, "body": "Yes, It works fine. Thanks a lot.It is very helpful for me because before it, I did it wth the awk command."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1491748992, "last_edit_date": 1491748992, "creation_date": 1491325985, "answer_id": 43213621, "question_id": 43153449, "link": "https://stackoverflow.com/questions/43153449/i-want-to-add-2nd-and-3rd-column-if-1st-column-within-range-of-1-to-10000/43213621#43213621", "title": "I want to add 2nd and 3rd column if 1st column within range of 1 to 10000", "body": "<p>By starting with the simple case and then trying to build on that, you're actually making things harder than they need to be. This is one example where seeing the bigger picture helps to simplify the code.</p>\n\n<p>You're splitting your data into \"buckets\" - using the first column to determine which bucket the record should go into and then summing the second and third columns within a bucket.</p>\n\n<p>I would write it something like this.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\n# Store bucket totals here\nmy @totals;\n\n# Read from STDIN\nwhile (&lt;&gt;) {\n  # Skip blank lines\n  next unless /\\S/;\n\n  # Split the data on white space\n  my @cols = split;\n\n  # Calculate the bucket.\n  #      1 - 10,000 is bucket 0\n  # 10,001 - 20,000 is bucket 1\n  # etc...\n  my $bucket = int($cols[0] / 10_000);\n\n  # Each element in @totals is a two-element array.\n  # The first element is the sum of column two.\n  # The second element is the sum of column three\n  $totals[$bucket][0] += $cols[1];\n  $totals[$bucket][1] += $cols[2];\n}\n\n# Walk the @totals array and display the results.\nfor (0 .. $#totals) {\n  my $start = ($_ * 10_000) + 1;\n  my $end   = ($_ + 1) * 10_000;\n  say \"$start $end $totals[$_][0] $totals[$_][1]\";\n}\n</code></pre>\n\n<p>As we read from <code>&lt;&gt;</code>, there is no need to bother with opening filehandles.</p>\n\n<p>I put this in a file called <code>sum</code> and called it like this:</p>\n\n<pre><code>$ ./sum in.txt\n</code></pre>\n\n<p>And the result I got was:</p>\n\n<pre><code>1 10000 102 54\n10001 10001 124 47\n20001 10002 28 12\n</code></pre>\n\n<p>Which looks correct to me. Let me know if you have any questions.</p>\n"}], "owner": {"reputation": 3, "user_id": 7800532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6SmR45rDVX0/AAAAAAAAAAI/AAAAAAAABZo/RJMWbkBGpcE/photo.jpg?sz=128", "display_name": "Priti Prasad", "link": "https://stackoverflow.com/users/7800532/priti-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 43213621, "answer_count": 1, "score": -1, "last_activity_date": 1491748992, "creation_date": 1491027001, "last_edit_date": 1491306962, "question_id": 43153449, "link": "https://stackoverflow.com/questions/43153449/i-want-to-add-2nd-and-3rd-column-if-1st-column-within-range-of-1-to-10000", "title": "I want to add 2nd and 3rd column if 1st column within range of 1 to 10000", "body": "<p>This is sample file with tab separted. </p>\n\n<pre><code>2000    46  26\n\n3000    52  25\n\n5149    4   3\n\n10000   104 32\n\n10500   20  12\n\n13397   0   3\n\n20000   20  12   \n\n24489   8   0\n</code></pre>\n\n<p>I try this with my Perl code, this works fine with one condition then I unable to do the same in when the condition is increased to 10001 to 20000 and 30001 to 40000 and so on, until the end of the file.</p>\n\n<p>I want output as :-</p>\n\n<pre><code>1 10000  102   54  \n\n10001   20000  124  47 \n\n20001   30000   28   12      so on.....  \n\n\n\n\n#! /usr/bin/perl\n\nmy $file = \"$ARGV[0]\";\nopen (f, $file);\n@f = &lt;f&gt;;\n\nforeach $F1 (@f) {\n\n    ($a, $b, $c) = split(/\\t/, $F1);\n\n    $x = \"1\";\n    $y =  \"10000\" ;\n\n    if ( ( $a &gt; $x ) &amp;&amp; ( $a &lt;= $y ) ) {\n        $total += $b ;\n          $total_1 += $c;\n    }\n\n    #$x = $y;\n    #$y = $y*2;\n}\n\nprint \"$x\\t$y\\t$total\\t$total_1\\n\" ; \n</code></pre>\n"}, {"tags": ["perl", "websocket"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1491018375, "post_id": 43152590, "comment_id": 73381744, "body": "Yes, you can do it... should you do it? how you do it? these are project related specifics... Maybe pass raw data with the websocket and have formatting occur on the client side, or pass parsed HTML to the client from the server... (I would do A)... there are many different ways to do this."}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1491019337, "post_id": 43152590, "comment_id": 73381889, "body": "The example I provided shows that I am passing data from the server to the client over the web socket. The problem is that the individual &quot;counts&quot; coming from the server do not get displayed in real time in the textarea as the server counts up from zero. Instead, the server spits out everything after the loop is complete. I should&#39;ve made this more clear in my question. I&#39;m having no trouble passing data to and fro the web socket, I just can&#39;t figure out how to send the data in real time while the server is in a loop."}, {"owner": {"reputation": 574431, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1491026919, "post_id": 43152590, "comment_id": 73383324, "body": "Is there a specific problem with the code you show that you want help with?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1491027093, "post_id": 43152590, "comment_id": 73383351, "body": "That&#39;s because javascript is both evened and single-threaded - which means that <code>send</code> schedules an event that isn&#39;t processed until your code exits the loop. As long as your code is running, no other events are being processed. I&#39;m simplifying the explanation, but the rule of thumb is &quot;<b>assume that nothing happens before your code returns</b>&quot;. P.S. Oh, <b>oops</b>, I didn&#39;t notice the server was in <code>perl</code>, however, the same rule might apply...?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491047397, "post_id": 43152590, "comment_id": 73388332, "body": "Sounds like a classic buffering issue. Have you tried replacing the <code>for</code> loop with a call to <a href=\"https://metacpan.org/pod/Mojo::IOLoop#recurring\" rel=\"nofollow noreferrer\"><code>Mojo::IOLoop-&gt;recurring</code></a>?"}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1491053805, "post_id": 43152590, "comment_id": 73390241, "body": "Yes @Myst, I discussed this with a friend and I&#39;ve learned that I cannot do what I want to do in a single thread. Your rule of thumb is helpful as I am clearly breaking this rule in my example. And yes, the server side code is written in Perl, and I&#39;m using the Mojolicious framework."}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491054355, "post_id": 43152590, "comment_id": 73390401, "body": "Thank you @ThisSuitIsBlackNot I have not used <code>Mojo::IOLoop-&gt;recurring</code> before, but I will give it a try and report back."}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "edited": false, "score": 0, "creation_date": 1491058630, "post_id": 43152590, "comment_id": 73391620, "body": "Unfortunately <code>Mojo::IOLoop-&gt;recurring</code> is of no use. It simply invokes the callback repeatedly <i>after</i> the loop terminates. So if I were to try to use this in conjunction with a real world command like <code>$cmd = echo &quot;tr -r&quot; | nc 10.0.0.10 23</code> via <code>my @response = $ssh-&gt;capture($cmd)</code> none of the command response data will be passed back to the browser until the command finishes (just like the loop example provided). There is no real time data being sent back down the web socket. I believe the only way to do this sort of thing is to make it multithreaded."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491086235, "post_id": 43152590, "comment_id": 73400221, "body": "&quot;It simply invokes the callback repeatedly after the loop terminates&quot; What loop? <code>recurring</code> is supposed to replace the loop, not be called inside it."}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491152709, "post_id": 43152590, "comment_id": 73415865, "body": "Not tracking you @ThisSuitIsBlackNot, can you provide an example?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1491155453, "post_id": 43152590, "comment_id": 73416921, "body": "Delete the <code>for</code> loop and replace it with <code>my $id = Mojo::IOLoop-&gt;recurring(1 =&gt; sub {...});</code>, and put what was inside the loop into the sub (except for the <code>sleep</code>, which you can delete)."}, {"owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491163495, "post_id": 43152590, "comment_id": 73419953, "body": "Thanks @ThisSuitIsBlackNot, your suggestion is very helpful. I&#39;ve edited my OP with a solution using <code>Mojo::IOLoop-&gt;recurring</code> in case anyone else runs into this issue."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5292841"}, "is_accepted": false, "score": 1, "last_activity_date": 1496833034, "last_edit_date": 1496833034, "creation_date": 1496832503, "answer_id": 44410549, "question_id": 43152590, "link": "https://stackoverflow.com/questions/43152590/can-i-dynamically-update-html-over-a-web-socket/44410549#44410549", "title": "Can I Dynamically Update HTML Over a Web Socket?", "body": "<p>you need to make javascript websocket listener on the page and insert the data passed into the DOM. </p>\n\n<pre><code>const socket = new WebSocket('ws://localhost:8080');\nsocket.addEventListener('open', function (event) {\n    socket.send('Hello Server!');\n});\n\nsocket.addEventListener('message', function (event) {\n    var div = document.getElementById('divID');\n    div.innerHTML = event.data;\n});\n</code></pre>\n\n<p>oh I see, your question is about the server Perl code. What I suggest is making a static array of connections in in the Perl, assigning them on open event, deassigning them on close event. You shouldn't need to send the data back in the on message sub. You could use Event::Lib $event->add( [$timeout] )  and then enumerate over the open sockets (to various different web clients) calling the $c->send(\"$i\\n\"); it's totally asynchronous, so no need to tie this to an on message sub. The server can do it whenever it wants. </p>\n\n<p>Make static variable in PERL:\n<a href=\"http://www.perlmonks.org/?node_id=8299\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=8299</a></p>\n"}], "owner": {"reputation": 111, "user_id": 6483841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/32PJW.jpg?s=128&g=1", "display_name": "MySilmaril", "link": "https://stackoverflow.com/users/6483841/mysilmaril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2952, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1496833034, "creation_date": 1491018217, "last_edit_date": 1491163138, "question_id": 43152590, "link": "https://stackoverflow.com/questions/43152590/can-i-dynamically-update-html-over-a-web-socket", "title": "Can I Dynamically Update HTML Over a Web Socket?", "body": "<p>I'm new to web sockets, and I'm building a web GUI around a command line interface that talks to IoT devices. Some of the commands take several seconds to run because I'm sending them to a large network of devices.</p>\n\n<p>It would be very helpful if I could pass the individual device responses to a textarea (resembling a terminal window) as the responses come in.</p>\n\n<p>I'm using a web socket connection between the client and server. Here is a simplified example of the effect I'm trying to achieve.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Mojolicious::Lite;\n\nget '/' =&gt; 'index';\n\nwebsocket '/get_loop' =&gt; sub {\n\n    my $c = shift;\n\n    $c-&gt;app-&gt;log-&gt;debug(\"Websocket opened\");\n\n    $c-&gt;on(message =&gt; sub {\n\n        my ($c, $msg) = @_;\n\n        for (my $i = 0; $i &lt; 10; $i++) {\n            $c-&gt;send(\"$i\\n\");\n            $c-&gt;app-&gt;log-&gt;debug(\"$i\\n\");\n            sleep (1);\n        };\n    });\n\n    $c-&gt;on(finish =&gt; sub {\n        my ($c, $code, $reason) = @_;\n        $c-&gt;app-&gt;log-&gt;debug(\"WebSocket closed with status $code\");\n    });\n};\n\napp-&gt;start;\n\n__DATA__\n\n@@ index.html.ep\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Websocket Test&lt;/title&gt;\n    &lt;style type=\"text/css\"&gt;\n        textarea {\n            height: 200px;\n            width: 100px;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Websocket Test&lt;/h1&gt;\n    &lt;textarea id=\"terminal\" readonly&gt;&lt;/textarea&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        var ws = new WebSocket('ws://127.0.0.1:3000/get_loop');\n        var terminal = document.getElementById('terminal');\n        ws.onopen = function() {\n            ws.send('start');\n        };\n        ws.onmessage = function(event) {\n            var msg = event.data;\n            terminal.innerHTML += msg;\n        };\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>In this example, I have a loop counting from 0 to 14. I'm trying to send each count to the textarea via the web socket for display as the loop counts up. The loop simulates the CLI responses in my actual application. Is this even possible to do over a web socket?</p>\n\n<p>-EDIT-</p>\n\n<p>Modifying the above web socket code and using <code>Mojo::IOLoop-&gt;recurring</code> solves the problem without having to resort to multithreading.</p>\n\n<pre><code>websocket '/get_loop' =&gt; sub {\n\n    my $c = shift;\n\n    $c-&gt;app-&gt;log-&gt;debug(\"Websocket opened\");\n\n    my $id;\n    $c-&gt;on(message =&gt; sub {\n\n        my ($c, $msg) = @_;\n\n        my $count = 0;\n        $id = Mojo::IOLoop-&gt;recurring(1 =&gt; sub {\n            $c-&gt;send(\"$count\\n\");\n            $c-&gt;app-&gt;log-&gt;debug($count);\n            sleep (1);\n            $c-&gt;finish if $count++ == 10;\n        });\n    });\n\n    $c-&gt;on(finish =&gt; sub {\n        my ($c, $code, $reason) = @_;\n        Mojo::IOLoop-&gt;remove($id);\n        $c-&gt;app-&gt;log-&gt;debug(\"WebSocket closed with status $code\");\n    });\n};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491012016, "post_id": 43151916, "comment_id": 73380723, "body": "It&#39;s hard to determine what the bug in your code is without seeing it!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1491012309, "last_edit_date": 1491012309, "creation_date": 1491011966, "answer_id": 43151986, "question_id": 43151916, "link": "https://stackoverflow.com/questions/43151916/perl-remove-double-quotes-from-file-name-in-a-directory/43151986#43151986", "title": "Perl - remove double quotes from file name in a directory", "body": "<blockquote>\n  <p><em>How can I work around it?</em></p>\n</blockquote>\n\n<p>No work around is needed; you simply have to fix your bug. To remove remove double-quotes (<code>\"</code>) from a string, you can use the following:</p>\n\n<pre><code>$string =~ s/\"//g;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><em>I've tried to call it with backtick inside my perl script <code>rename \\\" \"\" *</code></em></p>\n</blockquote>\n\n<p>You did </p>\n\n<pre><code>`rename \\\" \"\" *`    # Produces the string &lt;&lt;rename \" \"\" *&gt;&gt; and executes it.\n</code></pre>\n\n<p>when you should have used</p>\n\n<pre><code>`rename \\\\\" \"\" *`   # Produces the string &lt;&lt;rename \\\" \"\" *&gt;&gt; and executes it.\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7800135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e97d65eed7c2ce9c3f2afc0f82bd15?s=128&d=identicon&r=PG&f=1", "display_name": "Donnie Irvandy", "link": "https://stackoverflow.com/users/7800135/donnie-irvandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491012309, "creation_date": 1491011277, "question_id": 43151916, "link": "https://stackoverflow.com/questions/43151916/perl-remove-double-quotes-from-file-name-in-a-directory", "title": "Perl - remove double quotes from file name in a directory", "body": "<p>I'm trying to find the best way to remove double quotes from all files in directory with perl. I know I can do this through 'rename \\\" \"\" *'. However when I have that in perl script, perl always complain the double quote is not closed. How can I work around it?</p>\n\n<p>I've tried to call it with backtick inside my perl script <code>rename \\\" \"\" *</code> but this gave me bash error: 'unexpected EOF while looking for matching `\"' </p>\n\n<p>THe situation I have. I have files in directory with this name 123.\"ABC\".xyz. I want to rename them with perl scripts ideally with rename command.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["javascript", "html", "forms", "perl", "download"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491029812, "post_id": 43145592, "comment_id": 73383939, "body": "Does the Perl program redirect to another page, or does it output the page? It seems you misunderstand what linking means. Your form gets submitted to the Perl program. That doesn&#39;t mean it can&#39;t send the user back. However, a single html document usually doesn&#39;t handle incoming data very well. Please show us how your form looks like, be more specific about what kind of page it is in, and show the part of the Perl script that happens after processing the upload is done. Also, do you want it available for download for the same user or for other users later?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491029558, "post_id": 43145725, "comment_id": 73383867, "body": "The op says that they control the server side application that creates the document. There is no need to do anything client side."}], "tags": [], "owner": {"reputation": 511, "user_id": 5012606, "user_type": "registered", "profile_image": "https://graph.facebook.com/800817983358409/picture?type=large", "display_name": "Lixus", "link": "https://stackoverflow.com/users/5012606/lixus"}, "is_accepted": false, "score": -4, "last_activity_date": 1490978467, "creation_date": 1490978467, "answer_id": 43145725, "question_id": 43145592, "link": "https://stackoverflow.com/questions/43145592/creating-a-download-link-in-a-new-page-once-a-form-is-submited-html/43145725#43145725", "title": "Creating a download link in a new page once a form is submited html", "body": "<p>You can try jQuery and append your link like this:</p>\n\n<pre><code>$('body').append('&lt;a href\\'data.xls\\'&gt;Download Link&lt;/a&gt;');\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7709770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d05e6b99a0b1e46f89f621483a3430f?s=128&d=identicon&r=PG&f=1", "display_name": "orangepeel", "link": "https://stackoverflow.com/users/7709770/orangepeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1490986031, "creation_date": 1490977926, "last_edit_date": 1490986031, "question_id": 43145592, "link": "https://stackoverflow.com/questions/43145592/creating-a-download-link-in-a-new-page-once-a-form-is-submited-html", "title": "Creating a download link in a new page once a form is submited html", "body": "<p>I have an HTML form that saves the information entered and puts it in an Excel file on the server. I want to make this file available for download once the form is submitted. </p>\n\n<p>My current download button is </p>\n\n<pre><code>&lt;a href=\"data.xlsx\"&gt;Download data&lt;/a&gt;\n</code></pre>\n\n<p>My form links to a Perl script that processes the data. However once the form is processed it goes to a new page. I would like the new page to either display an error message or a link to download the file. I am unsure how to link to a new page because my form is already linked to the perl script. </p>\n\n<p>I'm not very familiar with HTML or JavaScript, so if anyone has a simple idea for me that would be appreciated.</p>\n"}, {"tags": ["perl", "www-mechanize", "www-mechanize-firefox"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490971918, "post_id": 43142971, "comment_id": 73364618, "body": "Try this: <code>&#39;document.getElementsByName(&quot;txtbdy&quot;)[0].value = &quot;&#39; . &quot;@para_text&quot; . &#39;&quot;&#39;</code>"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490972949, "post_id": 43142971, "comment_id": 73365355, "body": "@H&#229;kon H&#230;gland I get MozRepl::RemoteObject: SyntaxError: unterminated string literal at Mech.pl line 59. (This is that line of code)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490973072, "post_id": 43142971, "comment_id": 73365449, "body": "Why is that an array? If you interpolate the array into a string, all elements will be joined on <code>$,</code>, which defaults to a space <code>&quot; &quot;</code>. Is that what you want? What&#39;s inside <code>@para_text</code>? Maybe it has quotes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490976385, "post_id": 43142971, "comment_id": 73367486, "body": "@simbabque: Arrays are stringified using <code>$&quot;</code> as the separator. <code>$,</code> is the separator for <code>print</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490977995, "post_id": 43142971, "comment_id": 73368534, "body": "@Borodin right, sorry."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491067183, "post_id": 43142971, "comment_id": 73394630, "body": "@simbabque Inside the array is text that need to be put into a text box on a webpage which i have attempted using the last line of code"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491207288, "post_id": 43145071, "comment_id": 73432201, "body": "MozRepl::RemoteObject: SyntaxError: unterminated string literal at Mech.pl line 60. (The line on which that code is on)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491210805, "post_id": 43145071, "comment_id": 73434146, "body": "@JamalMahroof: You must have copied my code wrongly. It compiles fine."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491212587, "post_id": 43145071, "comment_id": 73435390, "body": "Its quite hard to incorrectly copy and paste :) perhaps your not using strawberry perl?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491212865, "post_id": 43145071, "comment_id": 73435595, "body": "@JamalMahroof: Strawberry Perl doesn&#39;t have a different idea about strings from any other Perl. The only string terminator on that line is the slash at the end before the closing parenthesis. Are you sure that&#39;s there? And have you added a semicolon? Are there any double quotes in <code>@para_text</code>?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491216168, "post_id": 43145071, "comment_id": 73437681, "body": "$mech-&gt;eval_in_page(qq/document.getElementsByName(&quot;txtbdy&quot;)[&zwnj;&#8203;0].value = &quot;@para_text&quot;/);  Am I being extremely stupid and blind somewhere? There is only text inside the array. I have tried making it a string and then replacing &quot;@para_text&quot; in that line with &quot;$para_text&quot; but no luck."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491216422, "post_id": 43145071, "comment_id": 73437874, "body": "I think maybe i need &quot;txtbody&quot; to be special"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491217421, "post_id": 43145071, "comment_id": 73438524, "body": "@JamalMahroof: I&#39;ve just realised that that isn&#39;t a Perl error message. You must be using <code>WWW::Mechanize::PhantomJS</code>? It&#39;s JavaScript issuing that error, and it must be because you have quotes in your array as I said. Please double check."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491217727, "post_id": 43145071, "comment_id": 73438735, "body": "Ah I see what you mean, I am using WWW:Mechanize:Firefox, in the array is a date \u201c29-Mar-2017\u201d which has those double quotes included. The problem being that the array is filled with this text that is taken from the email on the webpage, how can i always assure that the array is checked for doubel quotes and that they get removed?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491218259, "post_id": 43145071, "comment_id": 73439128, "body": "@JamalMahroof: Add <code>s&#47;([&quot;\\\\])&#47;\\\\$1&#47;g for @para_text</code> as a new preceding line. That will escape any double quotes or backslashes that may be in the array. I trust you don&#39;t need the contents of the array for anything else?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491220052, "post_id": 43145071, "comment_id": 73440286, "body": "The array only has one element, so i assume the loop goes through once and doesnt find a single character so it doesnt work? ive tried splitting the array up but the double quotes get replaced by these weird characters &#226;\u20ac\u0153 and &#226;\u20ac Just to note I get this output when printing the array to the cmd window &#212;&#199;&#163;29-Mar-2017&#212;&#199;&#216; however when putting it into a text file it comes out fine"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491220791, "post_id": 43145071, "comment_id": 73440785, "body": "When manually entering the text into the array, without any double quotes or backslashes, the code you suggested will still not input the text into the textbox, same error occurs, perhaps i should learn selenium and rewrite the program in that module?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491220966, "post_id": 43145071, "comment_id": 73440916, "body": "@JamalMahroof: Try putting the date directly into the call: <code>qq&#47;document.getElementsByName(&quot;txtbdy&quot;)[0].value = &quot;29-Mar-2017&quot;&#47;</code>. What does that do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491221821, "post_id": 43145071, "comment_id": 73441567, "body": "@JamalMahroof: I&#39;m back at a PC now so I can be a bit more useful. Your array has Unicode left and right quotation marks <code>U+201C</code> and <code>U+201D</code>, which shouldn&#39;t trouble JavaScript. Please dump the whole array with <code>use Data::Dumper; $Data::Dumper::Useqq = 1; print Dumper \\@para_text;</code> and tell me what you get. Please also try the date directly in the JavaScript as in my previous comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491222104, "post_id": 43145071, "comment_id": 73441797, "body": "@JamalMahroof: Also, show the output from <code>print Dumper qq&#47;document.getElementsByName(&quot;txtbdy&quot;)[0].value = &quot;@para_text&quot;&#47;;</code> without modifying <code>@para_text</code>."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491224603, "post_id": 43145071, "comment_id": 73443707, "body": "I get: 29-Mar-2017 The data dumper output is this (the date is only part of the array):   ($VAR1 = [           &quot;\\nHi All,\\n\\n\\x{a0}\\nWe have booked a slot for\\n(UK 14:00:00 BST/18:3 0 IST) \\x{a0}on \\x{201c}29-Mar-2017\\x{201d}.\\n\\x{a0}\\nPlease kick off the build as scheduled.\\n\\x{a0}\\nTech Leads -&gt; If there is any objection on build kick-off , please shout before 05:00 PM IST. Contact me for any disconnect.\\x{a0}\\x{a0}\\x {a0}\\n\\n\\x{a0}\\nThanks,\\nHimanshu\\n&quot;         ];"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491224696, "post_id": 43145071, "comment_id": 73443790, "body": "For the last line you told me to try, this comes up: print() on unopened filehandle Dumper at Mech.pl line 81, &lt;&gt; line 1."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491225158, "post_id": 43145071, "comment_id": 73444135, "body": "Managed to get this from that last line you suggested: $VAR1 = &quot;document.getElementsByName(\\&quot;txtbdy\\&quot;)[0].value = \\&quot; Hi All,  \\x{a0} We have booked a slot for (UK 14:00:00 BST/18:30 IST) \\x{a0}on \\x{201c}29-Mar-2017\\x{201d}. \\x{a0} Please kick off the build as scheduled. \\x{a0} Tech Leads -&gt; If there is any objection on build kick-off, please shout before 0 5:00 PM IST. Contact me for any disconnect.\\x{a0}\\x{a0}\\x{a0}  \\x{a0} Thanks, Himanshu \\&quot;&quot;;"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491225542, "post_id": 43145071, "comment_id": 73444446, "body": "I have also tried manually stripping the array of any punctuation whatsoever, to no luck"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491226232, "post_id": 43145071, "comment_id": 73445000, "body": "I think the issue is here XD <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Unterminated_string_literal\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a> The text cant be split across lines, explains why it used to work with another string which was all on a very long single line. I spent almost a week figuring out why this wasnt working... Something so simple can break my whole program, the joys of programming XD"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491227938, "post_id": 43145071, "comment_id": 73446301, "body": "The original issue is somewhat resovled in that i can now put the text into the text box, this raises a new issue because its an email and i require the old text from the previous email to stay in the bottom of the textbox and my program to add the new reply to the top, rather what happens is the whole textbox is emptied and the new text is put in, if that makes any sense? Essentially I want to reply to an email while keeping the previous email at the bottom of the new one, which outlook automatically does, but my program deletes all text in the text box and adds the new text."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491228467, "post_id": 43145071, "comment_id": 73446715, "body": "@JamalMahroof: Yes. You&#39;re right. I didn&#39;t realise that about JavaScript. You can escape all the special characters like that with <code>s&#47;([\\\\&quot;])&#47;\\\\$1&#47;g, s&#47;\\n&#47;\\\\n&#47;g for @para_text</code> before the call to <code>eval_in_page</code>. That includes the backslashes and double quotes that I mentioned before. Anything else really needs to be a new question, as we&#39;re way off topic now."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491228536, "post_id": 43145071, "comment_id": 73446755, "body": "Thank you for your help, been a huge aid in finding the solution :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491229040, "post_id": 43145071, "comment_id": 73447192, "body": "@JamalMahroof: That&#39;s okay. It took a lot longer than I imagined but I&#39;m glad we got there. By the way, you should use the code above rather than just deleting any newlines, if that&#39;s what you&#39;ve done. I&#39;ll look out for another question from you."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491292931, "post_id": 43145071, "comment_id": 73474755, "body": "I used the code you provided although i am looking into trying to get my head around it, being new to pearl im trying to understand any code people help me with. Im going to attempt to find a solution myself first as thats always the best way to learn but if need help i will be sure to post a question :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1490976202, "creation_date": 1490976202, "answer_id": 43145071, "question_id": 43142971, "link": "https://stackoverflow.com/questions/43142971/issue-with-eval-in-page-trying-to-interpolate-an-array/43145071#43145071", "title": "Issue with eval_in_page - Trying to interpolate an array", "body": "<p>To define a string that itself contains double quotes as well as interpolating variable values, you may use the alternative form of the double quote <code>qq/ ... /</code>, where you can choose the delimiter yourself and prevent the double quote <code>\"</code> from being special</p>\n\n<p>So you can write</p>\n\n<pre><code>$mech-&gt;eval_in_page(qq/document.getElementsByName(\"txtbdy\")[0].value = \"@para_text\"/)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 43145071, "answer_count": 1, "score": 0, "last_activity_date": 1490976202, "creation_date": 1490969924, "question_id": 43142971, "link": "https://stackoverflow.com/questions/43142971/issue-with-eval-in-page-trying-to-interpolate-an-array", "title": "Issue with eval_in_page - Trying to interpolate an array", "body": "<pre><code>my @para_text = $mech-&gt;xpath('/html/body/form/table/tbody/tr[2]/td[3]/table/tbody/tr[2]/td/table/tbody/tr[3]/td/div/div/div', type =&gt; $mech-&gt;xpathResult('STRING_TYPE'));\n#BELOW IS JUST TO MAKE SURE THE ABOVE CAPTURED THE CORRECT TEXT \nprint \"Look here: @para_text\";\n\n$mech-&gt;click_button( id =&gt; \"lnkHdrreplyall\");\n$mech-&gt;eval_in_page('document.getElementsByName(\"txtbdy\")[0].value = \"@para_text\"');\n</code></pre>\n\n<p>In the last line of my code I need to put the contents of the @para_text array as the text to output into a text box on a website however from the \"document\" till the end of the line it needs to be surrounded by '  ' to work. Obviously this doesnt allow interpolation as that would require \"  \" Any ideas on what to do?</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 6167, "user_id": 244811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVPtR.jpg?s=128&g=1", "display_name": "Scott Weaver", "link": "https://stackoverflow.com/users/244811/scott-weaver"}, "edited": false, "score": 0, "creation_date": 1490969105, "post_id": 43142118, "comment_id": 73362544, "body": "i mean, it seems like a &quot;quantified dot&quot; more or less does this <code>.{50}whateverpattern</code>  would start at the position right after the 50th character..."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1490969524, "post_id": 43142118, "comment_id": 73362807, "body": "Are you seeking <code>m&#47;&#47;g</code> in a <code>while</code> loop?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1490969584, "post_id": 43142118, "comment_id": 73362861, "body": "Your question got downvoted because there is a lot of text, but there is not a minimal example script that shows what you are doing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490973242, "post_id": 43142118, "comment_id": 73365584, "body": "How are you going to establish these indices where you want to initiate a search?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490974170, "post_id": 43142118, "comment_id": 73366200, "body": "It would help if you at least described more clearly what you want do do at these character positions. What sort of thing are you searching for, and what pattern are you using?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490978540, "post_id": 43142118, "comment_id": 73368829, "body": "@antred with 800+ rep you should know the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. At least you should include <code>few example strings</code> for the match and the wanted result."}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1495608684, "post_id": 43142118, "comment_id": 75318859, "body": "@jm666 What minimal example? This is a conceptual question. I don&#39;t have a piece of code that doesn&#39;t work and needs debugging!"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1495716469, "post_id": 43142118, "comment_id": 75375866, "body": "@antred ok,it is not about the code - again: <i>you should include few example strings for the match and the wanted result</i>. That&#39;s all. Something is wrong with the question, if it got -4... isn&#39;t? Sometimes is helpful just listen and learn. :)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1491009603, "last_edit_date": 1491009603, "creation_date": 1490974529, "answer_id": 43144575, "question_id": 43142118, "link": "https://stackoverflow.com/questions/43142118/telling-regex-search-to-only-start-searching-at-a-certain-index/43144575#43144575", "title": "Telling regex search to only start searching at a certain index", "body": "<p>So you want to match against the words of a body of text.</p>\n\n<p>(The examples find words that contain <code>i</code>.)</p>\n\n<p>You think having the starting positions of the words would help, but it isn't useful. The following illustrates what it might look like to obtain the positions and use them:</p>\n\n<pre><code>my @positions;\nwhile ($text =~ /\\w+/g) {\n   push @positions, $-[0];\n}\n\nmy @matches;\nfor my $pos (@positions) {\n   pos($text) = $pos;\n   push @matches $1 if $text =~ /\\G(\\w*i\\w*)/g;\n}\n</code></pre>\n\n<p>If would far simpler not to use the starting positions at all. Aside from being far simpler, we also remove the need for two different regex patterns to agree as to what constitute a word. The result is the following:</p>\n\n<pre><code>my @matches;\nwhile ($text =~ /\\b(\\w*i\\w*)/g) {\n   push @matches $1;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @matches = $text =~ /\\b(\\w*i\\w*)/g;\n</code></pre>\n\n<p>A far better idea, however, is to extra the words themselves in advance. This approach allows for simpler patterns and more advanced definitions of \"word\"<sup>[1]</sup>.</p>\n\n<pre><code>my @matches;\nwhile ($text =~ /(\\w+)/g) {\n   my $word = $1;\n   push @matches, $word if $word =~ /i/;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @matches = grep { /i/ } $text =~ /\\w+/g;\n</code></pre>\n\n<hr>\n\n<ol>\n<li>For example, a proper tokenizer could be used.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490975429, "creation_date": 1490975429, "answer_id": 43144830, "question_id": 43142118, "link": "https://stackoverflow.com/questions/43142118/telling-regex-search-to-only-start-searching-at-a-certain-index/43144830#43144830", "title": "Telling regex search to only start searching at a certain index", "body": "<p>In the absence of more information, I can only suggest the <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\"><code>pos</code> function</a></p>\n\n<p>When doing a global regex search, the engine saves the position where the previous match ended so that it knows where to start searching for the next iteration. The <code>pos</code> function gives access to that value and allows it to be set explicitly, so that a subsequent <code>m//g</code> will start looking at the specified position instead of at the start of the string</p>\n\n<p>This program gives an example. The string is searched for the first non-space character after each of a list of offsets, and displays the character found, if any</p>\n\n<p>Note that the global match must be done in <em>scalar context</em>, which is applied by <code>if</code> here, so that only the next match will  be reported. Otherwise the global search will just run on to the end of the file and leave information about only the very last match</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $str = 'a  b  c  d  e  f  g  h  i  j  k  l  m  n';\n#          0123456789012345678901234567890123456789\n#                    1         2         3\n\nfor ( 4, 31, 16, 22 ) {\n\n    pos($str) = $_;\n\n    say $1 if $str =~ /(\\S)/g;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>c\nl\ng\ni\n</code></pre>\n"}], "owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 1, "accepted_answer_id": 43144575, "answer_count": 2, "score": -4, "last_activity_date": 1491009603, "creation_date": 1490967399, "question_id": 43142118, "link": "https://stackoverflow.com/questions/43142118/telling-regex-search-to-only-start-searching-at-a-certain-index", "title": "Telling regex search to only start searching at a certain index", "body": "<p>Normally, a regex search will start searching for matches from the beginning of the string I provide. In this particular case, I'm working with a very large string (up to several megabytes), and I'd like to run successive regex searches on that string, but beginning at specific indices.</p>\n\n<p>Now, I'm aware that I could use the <code>substr</code> function to simply throw away the part at the beginning I want to exclude from the search, but I'm afraid this is not very efficient, since I'll be doing it several thousand times.</p>\n\n<p>The specific purpose I want to use this for is to jump from word to word in a very large text, skipping whitespace (regardless of whether it's simple space, tabs, newlines, etc). I know that I could just use the split function to split the text into words by passing <code>\\s+</code> as the delimiter, but that would make things for more complicated for me later on, as there a various other possible word delimiters such as quotes (ok, I'm using the term 'word' a bit generously here), so it would be easier for me if I could just hop from word to word using successive regex searches on the same string, always specifying the next index at which to start looking as I go. Is this doable in Perl?</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 1, "last_activity_date": 1591437034, "last_edit_date": 1591437034, "creation_date": 1591388315, "answer_id": 62223541, "question_id": 43141771, "link": "https://stackoverflow.com/questions/43141771/perl-mojolicious-under/62223541#62223541", "title": "Perl Mojolicious Under", "body": "<pre><code>package a;\nuse Mojo::Base 'Mojolicious';\n\n# This method will run once at server start\nsub startup {\n  my $self = shift;\n\n  # Load configuration from hash returned by config file\n  my $config = $self-&gt;plugin('Config');\n\n  # Configure the application\n  $self-&gt;secrets($config-&gt;{secrets});\n\n  # Router\n  my $r = $self-&gt;routes;\n\n  my $ur = $r-&gt;under('/foo/:bar');\n\n  $ur-&gt;delete()-&gt;to('example#two');\n  $ur-&gt;any()-&gt;to('example#one');\n}\n\n1;\n</code></pre>\n\n<p>You can always list all defined routes this way:</p>\n\n<pre><code>script/a routes\n</code></pre>\n\n<p>This feature very useful for debugging in such situations. You can read more about Mojolicious CLI  here <a href=\"https://mojolicious.org/perldoc/Mojolicious/Commands\" rel=\"nofollow noreferrer\">Mojolicious::Commands</a>.</p>\n\n<p>Here comes example output with routes mentioned above:</p>\n\n<pre><code>/foo/:bar  *       foobar\n  +/       DELETE  \n  +/     \n*\n</code></pre>\n\n<p>So, we can see, that Mojolicious now will serve url <code>/foo/:bar/</code> for <code>DELETE</code> and any other request method, but trailing slash is always optional, and <code>/foo/:bar</code> will work fine.</p>\n\n<p>In this case: <code>under('/foo/:bar')-&gt;to( example#zero )</code>, <code>example#zero</code> is intermediate destination, so all routes defined under this one, will visit <code>example#zero</code> and only after it will continue execution of own destination. So, <code>under( ... )-&gt;to( ... )</code> can be used for auth and another similar tasks. In my example <code>under()</code> used without <code>to()</code>.</p>\n\n<p>P.S. Mojolicious comes with wonderful documentation and I encourage everyone to actively use it</p>\n\n<p><a href=\"https://mojolicious.org/perldoc/Mojolicious/Routes/Route\" rel=\"nofollow noreferrer\">Mojolicious::Routes::Route</a></p>\n\n<p><a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Routing\" rel=\"nofollow noreferrer\">Mojolicious::Guides::Routing</a></p>\n"}], "owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1591437034, "creation_date": 1490966319, "last_edit_date": 1490967139, "question_id": 43141771, "link": "https://stackoverflow.com/questions/43141771/perl-mojolicious-under", "title": "Perl Mojolicious Under", "body": "<p>In order to correctly route the input information within this mojolicious application I am using the 'under' functionality. How come this code doesn't work but the code in the second block does for actually deleting the selected item from the database.</p>\n\n<pre><code> my $r_hostservices = $r-&gt;\n        under('/hosts_services:host_services_id')-&gt;\n        to('hosts_services#hosts_services');\n\n $r_hostservices-&gt;\n        delete(':hosts_services_id')-&gt;\n        to('hosts#hosts_services_deletion')-&gt;\n        name('hosts_services_deletion');\n</code></pre>\n\n<p>The second (working) block is as follows</p>\n\n<pre><code> $r-&gt;delete('/hosts_services/:hosts_services_id')-&gt;\n        to('hosts#hosts_services_deletion')-&gt;\n        name('hosts_services_deletion');\n</code></pre>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490967607, "post_id": 43140260, "comment_id": 73361485, "body": "Perhaps you could <a href=\"http://stackoverflow.com/posts/43140260/edit\">edit your question</a> to show us what output you are expecting. Your sample code is rather confused. You are comparing the number of elements in each of your second level arrays, not any of the element. And you&#39;re comparing those numbers using a string comparison (<code>eq</code>) rather than a numeric comparison (<code>==</code>)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1490977313, "post_id": 43140260, "comment_id": 73368112, "body": "If you want to check which files are identical then forget about reading them all into memory. Just use <a href=\"https://metacpan.org/pod/Digest::MD5\" rel=\"nofollow noreferrer\"><code>Digest::MD5</code></a> to create a checksum for each of them and compare the results."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1490967325, "post_id": 43140928, "comment_id": 73361277, "body": "If the only parameter to <code>arrayKey</code> has to be an array reference, then surely <code>\\@</code> would be a better prototype than <code>$</code>. You could then call the subroutine as <code>arrayKey(@datalist)</code> and everything would still work. Mind you, like most people here, I think that prototypes are far more trouble than they&#39;re worth and I would never use them in examples aimed at beginners."}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1490963973, "creation_date": 1490963973, "answer_id": 43140928, "question_id": 43140260, "link": "https://stackoverflow.com/questions/43140260/looking-for-duplicates-in-arrays-inside-arrays-multi-dimensional-array/43140928#43140928", "title": "Looking for duplicates in arrays inside arrays (multi-dimensional array)", "body": "<p>When you create the @dataList, create a key for it and check for that key before you do the push, something like:</p>\n\n<pre><code>my %checkHash=undef;\nmy $key=arrayKey(\\@datalist);\nif (!$checkHash{$key}) {\n    push(@arrayofarrays,[@datalist]);\n    push(@filenames,$file);\n    $checkHash{$key}=1;\n    last;\n}\n\nsub arrayKey($) {\n    my $arrayRef = shift;\n    my $output=undef;\n    for (@$arrayRef) {\n        if (ref($_) eq 'ARRAY') {\n            $output.=\"[\";\n            $output.=arrayKey($_);\n            $output.=\"]\";\n        }\n        else {\n            $output.=\"$_,\";\n        }\n    }\n    return $output;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "is_accepted": false, "score": 1, "last_activity_date": 1491002266, "creation_date": 1491002266, "answer_id": 43150925, "question_id": 43140260, "link": "https://stackoverflow.com/questions/43140260/looking-for-duplicates-in-arrays-inside-arrays-multi-dimensional-array/43150925#43150925", "title": "Looking for duplicates in arrays inside arrays (multi-dimensional array)", "body": "<p>Instead of array of arrays I'd create a hash of arrays, producing keys from subarrays' data by flattening subarrays to strings optionally turning them to checksums (this would be appropriate for multidimensional subarrays). You may want to read this discussion on PerlMonks:</p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=1121378\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=1121378</a></p>\n\n<p>The abstract example given an already existing array with duplicate data in subarrays (you may test it <a href=\"https://ideone.com/mgxwAR\" rel=\"nofollow noreferrer\">here on ideone.com</a>):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nmy @array = (\n    [1,'John','ABXC12132328'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322'],\n    [0,'John','ABXC12132322']\n);\nmy %uniq_helper = ();\nmy @uniq_data = grep { !$uniq_helper{\"@$_\"}++ } @array;\nprint Dumper(\\%uniq_helper) . \"\\n\";\nprint Dumper(\\@uniq_data) . \"\\n\";\n</code></pre>\n\n<p>For your case it will probably look like this:</p>\n\n<pre><code>my %datalist;\nwhile (my $row = &lt;$fh&gt;) {\n    unless ($. == 0) {\n        {\n            local $/; # enable slurp\n            @data = &lt;$fh&gt; =~ /\\s*\\d*\\/\\s*\\d*\\|\\s*(.*?)\\|.*?(?:.*?\\|){4}\\s*(\\S*)\\|(\\S*).*\\|/g; #extract article numbers # $1 = article number, $2 = quantity, $3 = unit\n        }\n        $datalist{\"@data\"} = \\@data;\n        push(@filenames,$file);\n        last;\n    }\n}\n$numr++;\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491002266, "creation_date": 1490961924, "question_id": 43140260, "link": "https://stackoverflow.com/questions/43140260/looking-for-duplicates-in-arrays-inside-arrays-multi-dimensional-array", "title": "Looking for duplicates in arrays inside arrays (multi-dimensional array)", "body": "<p>I've gotten into a bit of a jam and was wondering if someone could clear it up.\nWhat I want to do is:</p>\n\n<ol>\n<li>Opening a bunch of data containing .txt files</li>\n<li>Creating a multidimensional array that holds @array[@filenames][@data]</li>\n<li>Find which files are duplicates of eachother in terms of data</li>\n</ol>\n\n<p>Here I slurp a file into a variable, use regex to obtain my data and put it into an array:</p>\n\n<pre><code>    while (my $row = &lt;$fh&gt;) {\n        unless ($. == 0) {\n            {\n            local $/; # enable slurp\n            @datalist = &lt;$fh&gt; =~ /\\s*\\d*\\/\\s*\\d*\\|\\s*(.*?)\\|.*?(?:.*?\\|){4}\\s*(\\S*)\\|(\\S*).*\\|/g; #extract article numbers # $1 = article number, $2 = quantity, $3 = unit\n            }\n            push(@arrayofarrays,[@datalist]);\n            push(@filenames,$file);\n            last;\n            }\n        }\n        $numr++;\n}\nopen(my $feh,\"&gt;\",\"test.txt\");\nprint {$feh} Dumper \\@arrayofarrays;\n</code></pre>\n\n<p>A Dumper shows that my data looks fine (pseudoresults to make it easy to read and short):</p>\n\n<pre><code>$VAR1 = [\n          [\n            'data type1',\n            'data type2',\n            'data type3',\n            'data type1',\n            'data type2',\n            'data type3',\n            ...\n          ],\n          [\n            'data type1',\n            'data type2',\n            'data type3',\n            ...\n          ],\n        ...\n     ];\n</code></pre>\n\n<p>So I'm wondering if anyone knows an easy way to check for duplicates between sets of data? I know I can print individual data sets using </p>\n\n<p>What I tried might give a better idea as to what I need to do:</p>\n\n<pre><code>my $i = 0;\nmy $j = 0;\nwhile ( $i &lt;= scalar @arrayofarrays) {\n    $j = 0;\n    while ( $j &lt;= scalar @arrayofarrays) {\n        if (@{$arrayofarrays[$i]} eq @{$arrayofarrays[$j]}) {\n            print \"\\n'$filenames[$i]' is duplicate to '$filenames[$j]'.\";\n            } $j++;\n        } $i++;\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 4, "creation_date": 1490952053, "post_id": 43136966, "comment_id": 73351016, "body": "As it was said to you yesterday, add <code>use strict; use warnings;</code> at the beginning of your script. Then you&#39;ll notice that you should be going <code>my %replace_contents</code> instead of <code>my $replace_contents</code>. Moreover, this code is a bit weird: <code>create_mmd_and_transfer</code> isn&#39;t called with enough parameters, and regardless, it basically does nothing but discarding arguments and calling another function. Also, please indent your code properly, it will be much easier for us to read."}, {"owner": {"reputation": 305, "user_id": 3815923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dni0w.jpg?s=128&g=1", "display_name": "thomson", "link": "https://stackoverflow.com/users/3815923/thomson"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1490952267, "post_id": 43136966, "comment_id": 73351171, "body": "I am very new to perl coding. This code is given to me and i need to make it work. I am unable to understand, why its not replacing the contents. I will try as u suggested @Dada"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 6, "creation_date": 1490952743, "post_id": 43136966, "comment_id": 73351446, "body": "I really recommend you start by learning Perl (at least the basics, with a book or a tutorial) then. Anyway, please show us some data (your input file - or at least a minimalistic working example; and how <code>send_request</code> is called exactly) so we can see for ourselves what is happening."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1490952868, "post_id": 43136966, "comment_id": 73351538, "body": "1/ Add <code>use warnings</code> and <code>use strict</code> (and then fix the errors they reveal). 2/ Fix the indentation in the code. 3/ Check the return values from any file opens and take appropriate action (<code>open my $fh, &#39;&lt;&#39;, $file or die $!</code>)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490957879, "post_id": 43136966, "comment_id": 73354832, "body": "I have the feeling that there is also some CGI in the mix."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490984225, "post_id": 43139753, "comment_id": 73371798, "body": "Is that an attempt to answer the question at the bottom? Maybe they didn&#39;t think it was?"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1490960793, "last_edit_date": 1490960793, "creation_date": 1490960305, "answer_id": 43139753, "question_id": 43136966, "link": "https://stackoverflow.com/questions/43136966/how-are-these-quoted-strings-replaced-with-the-values-in-perl-pm-file/43139753#43139753", "title": "How are these quoted strings replaced with the values in perl .pm file?", "body": "<p>The following will not make your script work, just create the better base for some future questions.</p>\n\n<p>Before you even thinking about posting a <code>perl</code> question here:</p>\n\n<p>1.) add to the top of your script:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>Posting a code here without these two lines, nobody will bother even trying to read the code.</p>\n\n<p>2.) use <code>perl -c SomePackage.pm</code> for the check. If it will tell you: <code>SomePackage.pm syntax OK</code> - you can start thinking about posting a question here. ;)</p>\n\n<p>Some basic problems with your script:</p>\n\n<pre><code>package SomePackage;\nuse strict;   # see the above\nuse warnings;\n\nrequire Exporter;\n\n# these variables are defined outside of this package, so, tell perl this fact. use the `our`\nour @ISA    = qw(Exporter);\n#the use warnings will warn you about the following line\n# @EXPORT = qw(send_request, create_mmd_and_transfer, update_mmd_file);\n#the correct one is without commas\nour @EXPORT = qw(send_request create_mmd_and_transfer update_mmd_file); #not saying anything about the @EXPORT rudeness. :)\n\n#my $replace_contents = ();\n#the $replace_contents is a scalar. Bellow you using a hash. So,\nmy %replace_contents;\n#or use the scalar but the lines bellow should use the hashref notation, e.g.\n# $replace_contents-&gt;{\"REPLACE_Service\"} = $service;\n# you decide. :)\n\n# the seller_request_mmd contains undef here.\ncreate_mmd_and_transfer( \\%replace_contents, $seller_request_mmd, \"/MMD.xml\");\n# also bellow, in the subroutine definition it wants 4 arguments.\n# indicates a problem...\n\n# using 2-arg open is not the best practice.\n# Also, you should to use lexical filehandles\n# open (MMD_FILE, \"&lt;$input_file\") \n# better\nopen (my $mmd_file, '&lt;', $input_file)\n# of course, you need change every MMD_FILE to $mmd_file\n# check the result of the open and die if not successful\n# or you can use the \nuse autodie;\n\n# instead of $exact_value = ${%$contents}{$content};\n# you probably want\nmy $exact_value = $contents-&gt;{$content};\n</code></pre>\n\n<p>Indent your code!</p>\n\n<p>All the above are just about the syntactic problems and not solving anything about the \"logic\" of your code.</p>\n\n<p><em>Ps: And me is still an beginner, so, others sure will find much more problems with the above code.</em></p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491688532, "post_id": 43154437, "comment_id": 73666988, "body": "Does anyone else know that feeling when you spend an hour debugging someone else&#39;s code and you get no response - not even an acknowledgement :-("}, {"owner": {"reputation": 305, "user_id": 3815923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dni0w.jpg?s=128&g=1", "display_name": "thomson", "link": "https://stackoverflow.com/users/3815923/thomson"}, "edited": false, "score": 0, "creation_date": 1542627142, "post_id": 43154437, "comment_id": 93623191, "body": "I apologize. Issue was taken &amp; resolved by my team member(perl programmer) &amp; I was completely occupied with some other work. I didn&#39;t get time to look into it again or understand the resolution."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1491213101, "last_edit_date": 1491213101, "creation_date": 1491034467, "answer_id": 43154437, "question_id": 43136966, "link": "https://stackoverflow.com/questions/43136966/how-are-these-quoted-strings-replaced-with-the-values-in-perl-pm-file/43154437#43154437", "title": "How are these quoted strings replaced with the values in perl .pm file?", "body": "<p>Ok. Here's what I've done to test this.</p>\n\n<p>Firstly, you didn't give us an input file or the code that you use to call the module. So I invented them. I made the simplest possible input file:</p>\n\n<pre><code>REPLACE_Service\nREPLACE_RequestAction\nREPLACE_TradingPartner\nREPLACE_Requestxml\n</code></pre>\n\n<p>And this driver program:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse SomePackage;\n\nsend_request('foo', 'bar', 'baz');\n\nsub error_exit {\n  die @_;\n}\n</code></pre>\n\n<p>The first time, I ran it, I got this error:</p>\n\n<blockquote>\n  <p>Undefined subroutine &amp;main::send_request called at test line 8.</p>\n</blockquote>\n\n<p>That was because your <code>@EXPORT</code> line was wrong. You had:</p>\n\n<pre><code>@EXPORT = qw(send_request, create_mmd_and_transfer, update_mmd_file);\n</code></pre>\n\n<p>But the point of <code>qw(...)</code> is that you don't need the commas. So I corrected it to:</p>\n\n<pre><code>@EXPORT = qw(send_request create_mmd_and_transfer update_mmd_file);\n</code></pre>\n\n<p>Then I re-ran the program and got this error:</p>\n\n<blockquote>\n  <p>Cannot open MMD file template<br>\n   not found int the Templates folder \n  Please place the same and then run the script  at test line 11.</p>\n</blockquote>\n\n<p>That looked like there was something missing. I changed the error message, adding indicators of where the variable interpolation was supposed to happen:</p>\n\n<pre><code>open( MMD_FILE, \"&lt;$input_file\" )\n        or main::error_exit(\" Cannot open MMD file template &lt;$input_file&gt; \\n &lt;$input_file&gt; not found int the Templates folder \\n Please place the same and then run the script \");\n</code></pre>\n\n<p>Then the error message looked like this:</p>\n\n<blockquote>\n  <p>Cannot open MMD file template &lt;> \n   &lt;> not found int the Templates folder \n  Please place the same and then run the script  at test line 11.</p>\n</blockquote>\n\n<p>So it seems clear that the <code>$input_file</code> variable isn't set in the <code>update_mmd_file()</code> subroutine. Tracing that variable back, we see that this value is originally the <code>$seller_request_mmd</code> variable in <code>send_request()</code>. But in <code>send_request()</code> you declare <code>$seller_request_mmd</code> but you never give it a value. So let's do that:</p>\n\n<pre><code>my ( $seller_request_mmd ) = 'test_input.txt';\n</code></pre>\n\n<p>Now, when I run your program, it runs to completion without any errors. And I find a new <code>temp_mmd_file.xml</code> is generated. But it is exactly the same as the input file. So more investigation is needed.</p>\n\n<p>Digging into the <code>update_mmd_file()</code> subroutine, we find this interesting line:</p>\n\n<pre><code>my $exact_value = ${%$contents}{$content};\n</code></pre>\n\n<p>I think you're trying to extract a value from <code>$contents</code>, which is a hash reference. But your syntax is wrong. You were probably aiming at:</p>\n\n<pre><code>my $exact_value = ${$contents}{$content};\n</code></pre>\n\n<p>But most Perl programmers prefer the arrow notation for working with reference look-ups.</p>\n\n<pre><code>my $exact_value = $contents-&gt;{$content};\n</code></pre>\n\n<p>Making that change and re-running the program, I get an output file that contains:</p>\n\n<pre><code>foo\nbar\nbaz\nRequest.xml\n</code></pre>\n\n<p>Which is exactly what I expected. So the program now works.</p>\n\n<p>But there is still a lot of work to do. As you have been told repeatedly, you should always add:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>to your code. That will find a lot of potential problems in your code - which you should fix.</p>\n\n<p>To be honest, this feels to me like you were trying to run before you could walk. I'd recommend spending some time to work through <a href=\"http://shop.oreilly.com/product/0636920049517.do\" rel=\"nofollow noreferrer\">a good Perl introductory book</a> before taking on my more Perl work.</p>\n\n<p>And there was a lot of useful information missing from your question. It wouldn't have taken as long to get to the solution if you had shown us your driver program and your input data.</p>\n"}], "owner": {"reputation": 305, "user_id": 3815923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dni0w.jpg?s=128&g=1", "display_name": "thomson", "link": "https://stackoverflow.com/users/3815923/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1491213101, "creation_date": 1490951878, "last_edit_date": 1490967312, "question_id": 43136966, "link": "https://stackoverflow.com/questions/43136966/how-are-these-quoted-strings-replaced-with-the-values-in-perl-pm-file", "title": "How are these quoted strings replaced with the values in perl .pm file?", "body": "<p>Below is the Perl code in .pm file which is supposed to replace the specified strings (that are in \"quotes\") with some values. But its not happening. Can anyone explain what is happening in this code?</p>\n\n<pre><code>package SomePackage;\n\nrequire Exporter;\n\n@ISA    = qw(Exporter);\n@EXPORT = qw(send_request, create_mmd_and_transfer, update_mmd_file);\n\nsub send_request {\n    my ( $service, $action, $torole ) = @_;\n\n    my ( $seller_request_mmd );\n\n    my $replace_contents = ();\n    $replace_contents{\"REPLACE_Service\"}        = $service;\n    $replace_contents{\"REPLACE_RequestAction\"}  = $action;\n    $replace_contents{\"REPLACE_TradingPartner\"} = $torole;\n    $replace_contents{\"REPLACE_Requestxml\"}     = \"Request.xml\";\n\n    create_mmd_and_transfer( \\%replace_contents, $seller_request_mmd, \"/MMD.xml\" );\n}\n\nsub create_mmd_and_transfer {\n\n    my $local_replace_contents = shift;\n    my $input_mmd              = shift;\n    my $local_output_mmd       = shift;\n    my $output_mmd             = shift;\n\n    update_mmd_file( \"$input_mmd\", \"temp_mmd_file.xml\", $local_replace_contents );\n}\n\nsub update_mmd_file {\n\n    my $input_file  = shift;\n    my $output_file = shift;\n    my $contents    = shift;\n\n    open( MMD_FILE, \"&lt;$input_file\" )\n            or main::error_exit(\" Cannot open MMD file template $input_file \\n $input_file not found int the Templates folder \\n Please place the same and then run the script \");\n\n    open( TEMP_MMD_FILE, \"&gt;$output_file\" );\n\n    while ( &lt;MMD_FILE&gt; ) {\n\n        s/^M//g;    # Getrid of the ^Ms\n\n        foreach my $content ( keys( %$contents ) ) {\n\n            my $exact_value = ${%$contents}{$content};\n\n            if ( $main::test_scenario =~ /^Invalid Request Action \\a\\n\\d Service/\n                and ( $content =~ /REPLACE_Service|REPLACE_RequestAction/i ) ) {\n            }\n            else {\n\n                if ( $exact_value ne \"\" ) {\n                    s/$content/$exact_value/g;\n                }\n            }\n        }\n\n        print TEMP_MMD_FILE;\n    }\n\n    close MMD_FILE;\n    close TEMP_MMD_FILE;\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "perl-module"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1490950157, "post_id": 43135504, "comment_id": 73349927, "body": "<a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;discouraged&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490950127, "post_id": 43135833, "comment_id": 73349910, "body": "This one will work best, because it&#39;s stream parsing, not loading the whole XML into RAM."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1490953583, "post_id": 43135833, "comment_id": 73351986, "body": "Just fun.. You probably want change the <code>&#47;&#47;</code> comments to<code>#</code> :)"}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490953746, "post_id": 43135833, "comment_id": 73352083, "body": "@jm666 Too much Java and JavaScript these days :)"}, {"owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "edited": false, "score": 0, "creation_date": 1490954943, "post_id": 43135833, "comment_id": 73352901, "body": "@RobbyCornelissen I executed the code given above and i got the below error: encmap iso-8859-15.enc: No such file or directory  at /usr/lib/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/X&zwnj;&#8203;ML/Parser.pm line 187  at test4.pl line 35  at test4.pl line 35"}, {"owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490955579, "post_id": 43135833, "comment_id": 73353355, "body": "yes... I tried the below code given by @jm666 with the same XML and it worked using XML::LibXML::Reader."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1490964310, "post_id": 43135833, "comment_id": 73359049, "body": "If you don&#39;t have euro signs in your data you can replace <code>encoding=&quot;ISO-8859-15&quot;</code> in the XML declaration with <code>encoding=&quot;ISO-8859-1&quot;</code> and it should work."}], "tags": [], "owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "is_accepted": false, "score": 5, "last_activity_date": 1490953721, "last_edit_date": 1490953721, "creation_date": 1490948325, "answer_id": 43135833, "question_id": 43135504, "link": "https://stackoverflow.com/questions/43135504/listing-all-the-child-nodes-of-document-element/43135833#43135833", "title": "Listing all the child nodes of document element", "body": "<p>You can use <code>XML::Twig</code> which, according to its <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\" rel=\"nofollow noreferrer\">documentation</a>, is a <em>perl module for processing huge XML documents in tree mode.</em></p>\n\n<p>Here's an example fitting your use case:</p>\n\n<pre><code>use feature qw(say);\nuse XML::Twig;\n\nXML::Twig-&gt;new(twig_handlers =&gt; {\n    'document/*' =&gt; sub {\n        say $_-&gt;name; # print out the element name\n        $_-&gt;purge; # remove the entire element from memory\n    }   \n})-&gt;parsefile('sample.xml');\n</code></pre>\n\n<p>When used with your sample document, this prints out:</p>\n\n<pre><code>TITLE\nPART001\nPART002\nPART003\nPART004\n</code></pre>\n\n<p>Using a streaming parser might be even faster.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490980472, "post_id": 43136145, "comment_id": 73369843, "body": "<code>document</code> is the root element, so <code>q{&#47;&#47;document&#47;*}</code> should be <code>q{&#47;document&#47;*}</code>,"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 6, "last_activity_date": 1490957540, "last_edit_date": 1490957540, "creation_date": 1490949361, "answer_id": 43136145, "question_id": 43135504, "link": "https://stackoverflow.com/questions/43135504/listing-all-the-child-nodes-of-document-element/43136145#43136145", "title": "Listing all the child nodes of document element", "body": "<p>By using <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a> and <code>XPath</code>.</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse XML::LibXML;\n\nmy $file = 'xml';\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $file);\n\nfor my $child ($dom-&gt;findnodes( q{//document/*} )) {\n    say $child-&gt;nodeName();\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>TITLE\nPART001\nPART002\nPART003\nPART004\n</code></pre>\n\n<p>or just for the case, if you need only the <code>PART</code>s</p>\n\n<pre><code>for my $part ($dom-&gt;findnodes( q{//*[contains(name(),'PART')]} )) {\n    say $part-&gt;nodeName();\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>PART001\nPART002\nPART003\nPART004\n</code></pre>\n\n<p><strong>EDIT:</strong> Using the pull parser (doesn't loads the whole xml into memory):</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse XML::LibXML::Reader qw(XML_READER_TYPE_ELEMENT);\n\nmy $file=\"xml\";    \nmy $reader = XML::LibXML::Reader-&gt;new(location =&gt; $file) or die \"problem $!\";\n\nwhile($reader-&gt;read()) {\n        if( $reader-&gt;depth == 1 &amp;&amp; $reader-&gt;nodeType == XML_READER_TYPE_ELEMENT ) {\n                say $reader-&gt;name;\n        }\n}\n\nTITLE\nPART001\nPART002\nPART003\nPART004\n</code></pre>\n\n<p><strong>EDIT2</strong></p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse XML::LibXML::Reader qw(XML_READER_TYPE_ELEMENT);\nmy $file=\"xml\";\n\nmy $reader = XML::LibXML::Reader-&gt;new(location =&gt; $file) or die \"problem $!\";\nmy $indoc;\nwhile($reader-&gt;read()) {\n        # sets the flag in youre inside the &lt;document&gt;\n        if( $reader-&gt;name eq 'document' ) {\n                $indoc = $reader-&gt;nodeType == XML_READER_TYPE_ELEMENT ? 1 : 0;\n        }\n        # all nodes with level 1 if they're inside of the &lt;document&gt;\n        if( $indoc &amp;&amp;  $reader-&gt;depth == 1 &amp;&amp; $reader-&gt;nodeType == XML_READER_TYPE_ELEMENT ) {\n                say $reader-&gt;name;\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 43136145, "answer_count": 2, "score": 4, "last_activity_date": 1490957540, "creation_date": 1490947107, "question_id": 43135504, "link": "https://stackoverflow.com/questions/43135504/listing-all-the-child-nodes-of-document-element", "title": "Listing all the child nodes of document element", "body": "<p>I have a very huge XML file and i want to list down all the child nodes for document element.\nI am using the below code which is working fine but it is taking very long time to process the file and also it is getting data from the document element which is not required:</p>\n\n<pre><code>use XML::Simple;\nmy $xml = XML::Simple-&gt;new();\nmy $d = $xml-&gt;XMLin(\"sample.xml\");\nmy @arr = keys %$d;\nprint \"@arr\\n\";\n</code></pre>\n\n<p>Example XML:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"ISO-8859-15\"?&gt;\n&lt;document version=\"1.0\" createdAt=\"2017-03-31T11:41:34\"&gt;\n   &lt;TITLE&gt;Computer Parts&lt;/TITLE&gt;\n   &lt;PART001&gt;\n      &lt;ITEM&gt;Motherboard&lt;/ITEM&gt;\n      &lt;MANUFACTURER&gt;ASUS&lt;/MANUFACTURER&gt;\n      &lt;MODEL&gt;P3B-F&lt;/MODEL&gt;\n      &lt;COST&gt; 123.00&lt;/COST&gt;\n   &lt;/PART001&gt;\n   &lt;PART002&gt;\n      &lt;ITEM&gt;Video Card&lt;/ITEM&gt;\n      &lt;MANUFACTURER&gt;ATI&lt;/MANUFACTURER&gt;\n      &lt;MODEL&gt;All-in-Wonder Pro&lt;/MODEL&gt;\n      &lt;COST&gt; 160.00&lt;/COST&gt;\n   &lt;/PART002&gt;\n   &lt;PART003&gt;\n      &lt;ITEM&gt;Sound Card&lt;/ITEM&gt;\n      &lt;MANUFACTURER&gt;Creative Labs&lt;/MANUFACTURER&gt;\n      &lt;MODEL&gt;Sound Blaster Live&lt;/MODEL&gt;\n      &lt;COST&gt; 80.00&lt;/COST&gt;\n   &lt;/PART003&gt;\n   &lt;PART004&gt;\n      &lt;ITEM&gt;14 inch Monitor&lt;/ITEM&gt;\n      &lt;MANUFACTURER&gt;LG Electronics&lt;/MANUFACTURER&gt;\n      &lt;MODEL&gt; 995E&lt;/MODEL&gt;\n      &lt;COST&gt; 290.00&lt;/COST&gt;\n   &lt;/PART004&gt;\n&lt;/document&gt;\n</code></pre>\n\n<p>Expected Output:\nTITLE,\nPART001,\nPART002,\nPART003,\nPART004</p>\n\n<p>Can anyone please suggest a faster and better way to get the required output?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 20552, "user_id": 460557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=128&d=identicon&r=PG", "display_name": "Jorge Campos", "link": "https://stackoverflow.com/users/460557/jorge-campos"}, "edited": false, "score": 0, "creation_date": 1490933492, "post_id": 43130711, "comment_id": 73342530, "body": "I&#39;m not sure if I understood, is that <a href=\"https://www.debuggex.com/r/on_W3yEqk8U0DX03\" rel=\"nofollow noreferrer\">sample</a> what you are looking for ?"}, {"owner": {"reputation": 20552, "user_id": 460557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=128&d=identicon&r=PG", "display_name": "Jorge Campos", "link": "https://stackoverflow.com/users/460557/jorge-campos"}, "edited": false, "score": 1, "creation_date": 1490933793, "post_id": 43130711, "comment_id": 73342622, "body": "Never mind... Now I understand, what I provided is actually brute force :)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490934932, "last_edit_date": 1490934932, "creation_date": 1490932476, "answer_id": 43132163, "question_id": 43130711, "link": "https://stackoverflow.com/questions/43130711/is-there-a-non-brute-force-regex-for-matching-1st-x-to-y-characters-of-a-word/43132163#43132163", "title": "is there a non brute force regex for matching 1st (x to y) characters of a word?", "body": "<p>It's easier if you turn things inside out. Instead of</p>\n\n<pre><code>\"divo settlement talks\" =~ /\\b(div|divo|divor|divorc|divorce|divorces)\\b/i\n</code></pre>\n\n<p>let's do</p>\n\n<pre><code>\"divorced\" =~ /^(?:divo|settlement|talks)/i\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>sub mymatch {\n    my ($str, $targ, $min) = @_;\n    my $max = length($targ);\n    for my $word (grep { length($_) &gt;= $min &amp;&amp; length($_) &lt;= $max } $str =~ /\\w+/g) {\n        return 1 if $targ =~ /^$word/i;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub mymatch {\n    my ($str, $targ, $min) = @_;\n    my $max = length($targ);\n    for my $word ($str =~ /\\b\\w{$min,$max}\\b/g) {\n        return 1 if $targ =~ /^$word/i;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub mymatch {\n    my ($str, $targ, $min) = @_;\n    my $max = length($targ);\n    my $pat = '^(?:' . join('|', $str =~ /\\b\\w{$min,$max}\\b/g) . ')';\n    return $targ =~ /$pat/i;\n}\n</code></pre>\n\n<hr>\n\n<p>Your way, while more complex, has the advantage of a building a regex that can search large amounts of text, and even multiple words at once.</p>\n\n<pre><code>sub build_pattern {\n    my $min = shift;\n    my @targs;\n    for my $targ (@_) {\n        push @targs, map { substr($targ, 0, $_) } $min..length($targ);\n    }\n\n    my $pat = join('|', @targs);\n    return qr/\\b(?:$pat)\\b/i;\n}\n\nmy $re = build_pattern(3, qw( divorced ... ));\n\n$str =~ $re\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 1, "last_activity_date": 1490937663, "creation_date": 1490937663, "answer_id": 43132983, "question_id": 43130711, "link": "https://stackoverflow.com/questions/43130711/is-there-a-non-brute-force-regex-for-matching-1st-x-to-y-characters-of-a-word/43132983#43132983", "title": "is there a non brute force regex for matching 1st (x to y) characters of a word?", "body": "<p>You're aware of word boundaries in your regex. So, try splitting the text into words:</p>\n\n<pre><code>my $text = \"The case took a dive when the two parties divided over division of assets in the divorce.\";\n\nmy @text_words = split(/\\s+/, $text);\n</code></pre>\n\n<p>Now make a (set) hash of key words you are interested in:</p>\n\n<pre><code>my %key_words = map { $_ =&gt; 1 } qq(div divo divor divorc divorce divorces);\n</code></pre>\n\n<p>And look for the one in the other:</p>\n\n<pre><code>foreach my $word (@text_words) {\n    if (exists $key_words{$word}) {\n        # Your code goes here.\n        print \"OK, I found the substring I needed.\";\n    }\n}\n</code></pre>\n\n<p>This has the advantage that you can merge is with other words/prefixes you might be interested in, and search for them all at the same time.</p>\n"}], "owner": {"reputation": 1488, "user_id": 6395052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-XKoXECLm9OM/AAAAAAAAAAI/AAAAAAAAADw/PIOmJsiX89U/photo.jpg?sz=128", "display_name": "aschultz", "link": "https://stackoverflow.com/users/6395052/aschultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43132163, "answer_count": 2, "score": 1, "last_activity_date": 1490937663, "creation_date": 1490921806, "question_id": 43130711, "link": "https://stackoverflow.com/questions/43130711/is-there-a-non-brute-force-regex-for-matching-1st-x-to-y-characters-of-a-word", "title": "is there a non brute force regex for matching 1st (x to y) characters of a word?", "body": "<p>I have the following regex which works, in PERL, to find if the start of a word is contained in a string. I want it to be okay to find, say, <strong>divo</strong> but not <strong>dive</strong>. This is not too bad with brute force.</p>\n\n<pre><code>if ($a =~ /\\b(div|divo|divor|divorc|divorce|divorces)\\b/i)\n{\n  print \"OK, I found the substring I needed.\";\n}\n</code></pre>\n\n<p>In other words, if my program sees the start of \"divorces\" in a string, it flags that string as something I want to look at.</p>\n\n<p>This is okay if I want to do this once, but I have a reason to do this multiple times with multiple words.</p>\n\n<p>Is there a way to do this just with regexes, or would I have to do something like:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (my $str = &lt;STDIN&gt;)\n{\n  if (mymatch($str, \"divorces\", 3, 8))\n  {\n    print \"Yay!\\n\";\n  }\n}\n\nsub mymatch\n{\n  my $temp;\n  for ($_[2]..$_[3])\n  {\n    $temp = substr($_[1], 0, $_);\n    if ($_[0] =~ /\\b$temp\\b/i)\n    {\n      return 1;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>While being able to use a function like the above is acceptable to me, I have a feeling I'm missing a powerful advanced regex that might be helpful to me in the future as well.</p>\n\n<p>Thanks for any and all help with this!</p>\n"}, {"tags": ["perl", "macos-sierra", "cpanm", "dbd-mysql"], "answers": [{"comments": [{"owner": {"reputation": 1182, "user_id": 6832, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3331f7c8e992404730507460a0818430?s=128&d=identicon&r=PG", "display_name": "Sam Kington", "link": "https://stackoverflow.com/users/6832/sam-kington"}, "edited": false, "score": 1, "creation_date": 1494895704, "post_id": 43146486, "comment_id": 75010644, "body": "Typo: the first &quot;oenssl&quot; should be &quot;openssl&quot;."}], "tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": true, "score": 6, "last_activity_date": 1495496837, "last_edit_date": 1495496837, "creation_date": 1490981326, "answer_id": 43146486, "question_id": 43130366, "link": "https://stackoverflow.com/questions/43130366/installing-perl-dbdmysql-fails-on-mac-sierra-with-mysql-brew-install/43146486#43146486", "title": "Installing perl DBD::mysql fails on Mac Sierra with mysql brew install", "body": "<p>You can pass <code>libs</code> and <code>cflags</code> arg to help <code>Makefile.PL</code> find the libaries on the machine (in my case the openssl libraries were installed with homebrew):</p>\n\n<p><code>cpanm  --configure-args=\"--libs='-L/usr/local/opt/openssl/lib -L/usr/local/Cellar/mysql/5.7.17/lib' --cflags='-I/usr/local/opt/openssl/include -I/usr/local/Cellar/mysql/5.7.17/include/mysql'\" DBD::mysql</code></p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 903280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3tmhq.jpg?s=128&g=1", "display_name": "Gedge", "link": "https://stackoverflow.com/users/903280/gedge"}, "is_accepted": false, "score": 0, "last_activity_date": 1501022857, "creation_date": 1501022857, "answer_id": 45314701, "question_id": 43130366, "link": "https://stackoverflow.com/questions/43130366/installing-perl-dbdmysql-fails-on-mac-sierra-with-mysql-brew-install/45314701#45314701", "title": "Installing perl DBD::mysql fails on Mac Sierra with mysql brew install", "body": "<p>This worked for me:</p>\n\n<p><code>cpanm --configure-args=\"--libs='-L/usr/local/opt/openssl/lib -L/usr/local/Cellar/mysql/5.7.19/lib -lmysqlclient -lssl -lcrypto' --cflags='-I/usr/local/opt/openssl/include -I/usr/local/Cellar/mysql/5.7.19/include/mysql'\" DBD::mysql</code></p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2021, "favorite_count": 2, "accepted_answer_id": 43146486, "answer_count": 2, "score": 5, "last_activity_date": 1501022857, "creation_date": 1490919284, "question_id": 43130366, "link": "https://stackoverflow.com/questions/43130366/installing-perl-dbdmysql-fails-on-mac-sierra-with-mysql-brew-install", "title": "Installing perl DBD::mysql fails on Mac Sierra with mysql brew install", "body": "<p>Trying to install <code>DBD::mysql</code> on my Mac Sierra computer running mysql v 5.7.17. Getting the following error when trying to install with <code>cpanm install DBD::mysql</code>:</p>\n\n<p><code>Checking if libs are available for compiling...\nCan't link/include C library 'ssl', 'crypto', aborting.</code></p>\n\n<p>Other solutions I have found so far don't address this issue with Sierra.</p>\n"}, {"tags": ["bash", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 3089, "user_id": 6165935, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5SjwIcK5M8I/AAAAAAAAAAI/AAAAAAAAAFQ/xyQQHb_jXoQ/photo.jpg?sz=128", "display_name": "Michael Vehrs", "link": "https://stackoverflow.com/users/6165935/michael-vehrs"}, "edited": false, "score": 1, "creation_date": 1490939789, "post_id": 43130304, "comment_id": 73344542, "body": "You tried <code>awk &#39;{$1=$1}1&#39;</code>? Is that supposed to be funny?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7582373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_9u5vWWY9XY/AAAAAAAAAAI/AAAAAAAAAWQ/_70jr5PbG80/photo.jpg?sz=128", "display_name": "Cris Olson", "link": "https://stackoverflow.com/users/7582373/cris-olson"}, "edited": false, "score": 0, "creation_date": 1490987757, "post_id": 43130947, "comment_id": 73373589, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 0, "last_activity_date": 1490923774, "creation_date": 1490923774, "answer_id": 43130947, "question_id": 43130304, "link": "https://stackoverflow.com/questions/43130304/split-column-using-awk-or-sed/43130947#43130947", "title": "Split column using awk or sed", "body": "<p><code>awk</code> to the rescue!</p>\n\n<pre><code>awk -v OFS=, 'NF==1 {h[++c]=$1} \n              NF==2 {v[c,$1]=$2; ks[$1]} \n              END   {printf \"%s\", \"A-Z\"; \n                     for(k in ks) printf \"%s\", OFS k; \n                     print \"\"; \n                     for(i=1;i&lt;=c;i++) \n                       {printf \"%s\", h[i]; \n                        for(k in ks) printf \"%s\", OFS v[i,k]+0; \n                        print \"\"}}' file'\n</code></pre>\n\n<p>order of the columns will be random.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1503810685, "last_edit_date": 1503810685, "creation_date": 1490937968, "answer_id": 43133036, "question_id": 43130304, "link": "https://stackoverflow.com/questions/43130304/split-column-using-awk-or-sed/43133036#43133036", "title": "Split column using awk or sed", "body": "<p>With Perl</p>\n\n<pre><code>perl -00 -nE'\n    ($t, %p) = split /[\\n\\s]/; $h{$t} = {%p};     # Top line, Pairs on lines\n    $o{$t} = ++$c;                                # remember Order\n    %k = map { $_, 1} keys %p;                    # find full set of subKeys\n    }{                                            # END block starts\n    say join \",\", \"A-Z\", sort keys %k;\n    for $t (sort { $o{$a} &lt;=&gt; $o{$b} } keys %h) { \n        say join \",\", $k, map { ($h{$k}{$_} // 0) } sort keys %k;\n    }\n' data.txt\n</code></pre>\n\n<p>prints, in the original order</p>\n\n<pre>\nA-Z,aa,bb,cc,dd\ndog,6469,5946,715,0\ncat,5692,0,0,0\nBird,3056,2893,1399,33\n</pre>\n"}, {"tags": [], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "is_accepted": false, "score": 1, "last_activity_date": 1503898871, "last_edit_date": 1503898871, "creation_date": 1503897071, "answer_id": 45912101, "question_id": 43130304, "link": "https://stackoverflow.com/questions/43130304/split-column-using-awk-or-sed/45912101#45912101", "title": "Split column using awk or sed", "body": "<p>Here's a sed solution, which works on your input, but requires that you know the column names in advance and that the column names are given as sorted full ranges starting with the first column name (so nothing like <em>aa, cc</em> or <em>bb, aa</em> or <em>bb, cc</em>) and that every paragraph is followed by one empty line. You would also need to adjust the script if you don't have exactly four numeric columns:</p>\n\n<p><code>echo 'A-Z, aa, bb, cc, dd';sed -e '/./{s/.* //;H;d};x;s/\\n/, /g;s/, //;s/$/, 0, 0, 0, 0/;:a;s/,[^,]*//5;ta' file</code></p>\n\n<p>If you need to look up the sed commands, you can look at <code>info sed</code>, especially <em>3.5 Less Frequently-Used Commands</em>. </p>\n"}], "owner": {"reputation": 3, "user_id": 7582373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_9u5vWWY9XY/AAAAAAAAAAI/AAAAAAAAAWQ/_70jr5PbG80/photo.jpg?sz=128", "display_name": "Cris Olson", "link": "https://stackoverflow.com/users/7582373/cris-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 43130947, "answer_count": 3, "score": -2, "last_activity_date": 1503898871, "creation_date": 1490918869, "last_edit_date": 1490922833, "question_id": 43130304, "link": "https://stackoverflow.com/questions/43130304/split-column-using-awk-or-sed", "title": "Split column using awk or sed", "body": "<p>I have a file containing  the following text.</p>\n\n<blockquote>\n  <p>dog<br>\n  aa  6469<br>\n  bb  5946<br>\n  cc  715</p>\n  \n  <p>cat<br>\n  aa  5692</p>\n  \n  <p>Bird<br>\n  aa  3056<br>\n  bb  2893<br>\n  cc  1399<br>\n  dd  33  </p>\n</blockquote>\n\n<p>I need the following output:</p>\n\n<blockquote>\n  <blockquote>\n    <p>A-Z   ,aa ,bb,    cc, dd<br>\n    dog,    6469,   5946    ,715,   0<br>\n    cat ,5692,  0,  0,  0<br>\n    Bird    ,3056,  2893,   1399,   33  </p>\n  </blockquote>\n</blockquote>\n\n<p>I tried:\nawk '{$1=$1}1' OFS=\",\" RS=\nBut is not giving the format I need. </p>\n\n<p>Thanks in advance for your help.</p>\n\n<p>Cris</p>\n"}, {"tags": ["perl", "rename"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490916017, "post_id": 43129734, "comment_id": 73338297, "body": "<i>&quot;escaping doesnt work&quot;</i> Okay but what <i>does</i> happen? And is this the Perl <code>rename</code>, because <code>rename &#39;s&#47;-24&#47;&#47;g&#39; *</code> won&#39;t do anything useful in Perl?"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 7101544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ta4Cf.jpg?s=128&g=1", "display_name": "karina", "link": "https://stackoverflow.com/users/7101544/karina"}, "edited": false, "score": 0, "creation_date": 1491009597, "post_id": 43129879, "comment_id": 73380364, "body": "thank Youu.. i mean rename from homebrew... this is what is working others not <code>rename &#39;s&#47;-48&#47;\\x402x&#47;g&#39; *</code>.... ios uses <code>@</code> for image pixel..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 427, "user_id": 7101544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ta4Cf.jpg?s=128&g=1", "display_name": "karina", "link": "https://stackoverflow.com/users/7101544/karina"}, "edited": false, "score": 0, "creation_date": 1491034814, "post_id": 43129879, "comment_id": 73385050, "body": "@karina  You are welcome :)  That would mean that <code>rename</code> doesn&#39;t take full regex.  Thanks for feedback -- I didn&#39;t know about the <code>@</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1610393567, "last_edit_date": 1610393567, "creation_date": 1490915707, "answer_id": 43129879, "question_id": 43129734, "link": "https://stackoverflow.com/questions/43129734/rename-multiple-files-possible-unintended-interpolation/43129879#43129879", "title": "rename multiple files possible unintended interpolation", "body": "<p>I don't know what &quot;<em>brew rename</em>&quot; is, but if it uses normal regex</p>\n<pre><code>'s/pattern/q(@replacement)/e'\n</code></pre>\n<p>This uses <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">/e modifier</a> to evaluate the replacement side as code, where <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">q() operator</a> (single quotes) is used to insert literal characters.</p>\n<p>Another way is to use <a href=\"https://en.wikipedia.org/wiki/ASCII#Printable_characters\" rel=\"nofollow noreferrer\"><code>\\x40</code></a> for <code>@</code> character</p>\n<pre><code>'s/pattern/\\x40replacement/'\n</code></pre>\n<p>or just escape it, use <code>\\@</code> in the replacement.</p>\n<p>This is suitable for when there's just one character to deal with, like here. if there's more than that then it's easier to single-quote the whole thing, with <code>q()</code> (for which we need <code>/e</code> flag).</p>\n<hr />\n<p>Can't help it but ask -- are you certain that you want to have <code>@</code> in a file name?  That character gets interpreted in various ways by many tools. For instance, sticking that file name in a variable in a Perl script leads to no end of trouble.  Why not even simply <code>file_at_2x.png</code>?</p>\n<p>This may be more of a curiousity, but if you have a lot of files you can rename them all with</p>\n<pre><code>'s{ \\-([0-9]+) }{ ($r = $1/24) &gt; 1 &amp;&amp; qq(_at_${r}x) || q() }ex'\n</code></pre>\n<p>This captures the number <code>([0-9]+)</code> into <code>$1</code>. Then, it finds the ratio (<code>$r = $1/24</code>) and if that is <code>&gt;1</code> then (<code>&amp;&amp;</code> short-circuits) it replaces <code>-number</code> with <code>_at_${r}x</code>, otherwise (<code>||</code>) removes it by putting an empty string, <code>q()</code>.</p>\n<p>I use <code>{}{}</code> delimiters so that I may use <code>/</code> inside, and <code>}x</code> allows spaces inside, for readability.</p>\n<p>Please test this carefully with (a copy of) your actual files, as always.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1610409157, "creation_date": 1610409157, "answer_id": 65676150, "question_id": 43129734, "link": "https://stackoverflow.com/questions/43129734/rename-multiple-files-possible-unintended-interpolation/65676150#65676150", "title": "rename multiple files possible unintended interpolation", "body": "<p>I know this question is old and maybe the version of <code>rename</code> that apt-get installs is lightly different or improved. However, escaping with a single backslash seems to work:</p>\n<pre><code>$ rename -n -v 's/-48/\\@2x/g' *\nrename(foo-48.txt, foo@2x.txt)\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 7101544, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ta4Cf.jpg?s=128&g=1", "display_name": "karina", "link": "https://stackoverflow.com/users/7101544/karina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 2, "accepted_answer_id": 43129879, "answer_count": 2, "score": 1, "last_activity_date": 1610409157, "creation_date": 1490914813, "last_edit_date": 1610408867, "question_id": 43129734, "link": "https://stackoverflow.com/questions/43129734/rename-multiple-files-possible-unintended-interpolation", "title": "rename multiple files possible unintended interpolation", "body": "<p>I'm using brew rename to rename multiple files...</p>\n<pre><code>file-24.png =&gt; file.png\nfile-48.png =&gt; file@2x.png\nfile-72.png =&gt; file@3x.png\n</code></pre>\n<p>the first one is succeed with,,</p>\n<pre><code>rename 's/-24//g' *\n</code></pre>\n<p>the second and third...</p>\n<pre><code>rename 's/-48/@2x/g' *\n</code></pre>\n<p>and getting <code>Possible unintended interpolation of @2 in string at (eval 2) line 1.</code>..</p>\n<p>escaping doesnt work..</p>\n<pre><code>rename 's/-48/\\@2x/g' *\n</code></pre>\n<p>other possible ways to rename multiple files like this case are also welcome..</p>\n"}, {"tags": ["database", "perl", "sqlite"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490912032, "post_id": 43129104, "comment_id": 73337145, "body": "Turn off <code>PrintError</code> on the database handle? Set <code>RaiseError</code> to true and use an <code>eval</code> block to do exception handling?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1490912262, "post_id": 43129104, "comment_id": 73337226, "body": "As an aside, you&#39;re kind of defeating the purpose of using prepared statements by calling <code>prepare()</code> in every iteration of the loop."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1490912247, "creation_date": 1490912247, "answer_id": 43129319, "question_id": 43129104, "link": "https://stackoverflow.com/questions/43129104/unique-constraint-failed-omit/43129319#43129319", "title": "UNIQUE constraint failed (Omit)", "body": "<p>Change your statement to \"INSERT OR IGNORE INTO...\"</p>\n"}], "owner": {"reputation": 67, "user_id": 6951348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a5497c817ce67e393b9af6572e7876a?s=128&d=identicon&r=PG&f=1", "display_name": "The_Makings_Of_A_Coder", "link": "https://stackoverflow.com/users/6951348/the-makings-of-a-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 43129319, "answer_count": 1, "score": 0, "last_activity_date": 1490912247, "creation_date": 1490911172, "question_id": 43129104, "link": "https://stackoverflow.com/questions/43129104/unique-constraint-failed-omit", "title": "UNIQUE constraint failed (Omit)", "body": "<p>Attempting to compile a data base but on output in command prompt I am getting the following:</p>\n\n<pre><code>DBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port\n</code></pre>\n\n<p>I understand why it is doing this due to there being duplicates attempted to being added to the database, but I am wondering how I can omit this from the output on the command line. </p>\n\n<p>A portion of the current output: </p>\n\n<pre><code>DBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2832.\nDBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2840.\nDBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2841.\nDBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2842.\nDBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2845.\nDBD::SQLite::st execute failed: UNIQUE constraint failed: Probes.Source, Probes.Port at lab8.pl line 67, &lt;Lab4File&gt; line 2886.\nThe file contained 628 records\n</code></pre>\n\n<p>The output I wish to receive:</p>\n\n<pre><code>The file contained 628 records\n</code></pre>\n\n<p>The code for reference:</p>\n\n<pre><code># Modules used ------------------\nuse DBI;\nuse warnings;\nuse strict; \n# End of Modules used -----------\n\n# Variables Used ----------------\nmy $DBPath;\nmy $RecCount;\nmy $ProbedDB;\nmy $Line;\nmy $ipAddr;\nmy $portNum;\nmy $insertPortDB;\nmy $StatHandle;\n# End of Variables Used ---------\n\n\n\n# Creats a path for the database\n$DBPath = 'D:\\Everything\\Fleming College\\Semester 2\\PERL\\Lab 8\\lab8.db';\n\n# Used to keep track of records in log file \n$RecCount = 0; \n\n# Creates database handle and connects database to be used by program\n$ProbedDB = DBI-&gt;connect(\"dbi:SQLite:dbname=$DBPath\",\"\",\"\")\n        or die \"Can't connect to the database: $DBI::errstr\\n\"; \n\n# Creates the table \n$ProbedDB-&gt;do(\"CREATE TABLE Probes (Source Char(15) NOT NULL,\n        Port Char(5) NOT NULL, PRIMARY KEY (Source, Port))\");\n\n# Opens up the specified file that contains all of the logs used,\n# if unable to open, notifies the user.\nopen Lab4File, \"&lt;sample.log\"\n    or die \"Unable to open sample.log\\n\", $!;\n\n\n\n# Scans text file \nwhile($Line = &lt;Lab4File&gt;)\n{   \n    if($Line =~ /INext-DROP/)  # Filters out the ports that were scanned \n    {\n            if($Line =~ /SRC=([\\d+\\.]*).*DPT=([\\d+\\.]*)/) # Filters out the IP \n                                                          # address &amp; the port number only\n            {\n                $ipAddr = $1;   # Stores the info following SRC= into variable\n                $portNum = $2;  # Stores the info following DPT= into variable\n\n                # This variable determines ports and values\n                $insertPortDB = 'INSERT INTO Probes (Source, Port) Values(?,?)'; \n\n                # Create statement handle\n                $StatHandle = $ProbedDB-&gt;prepare($insertPortDB);\n\n                # Puts info into database\n                $StatHandle-&gt;execute($ipAddr,$portNum);\n\n                # Incremented to keep track \n                $RecCount++;\n            };\n    };\n}\nprintf(\"The file contained %i records\", \"$RecCount\");\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "edited": false, "score": 0, "creation_date": 1490907405, "post_id": 43128122, "comment_id": 73335157, "body": "<a href=\"http://stackoverflow.com/questions/2112469/delete-specific-line-numbers-from-a-text-file-using-sed\" title=\"delete specific line numbers from a text file using sed\">stackoverflow.com/questions/2112469/&hellip;</a>"}, {"owner": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "edited": false, "score": 0, "creation_date": 1490907562, "post_id": 43128122, "comment_id": 73335252, "body": "There should be a way to invoke command from inside perl. With that all you need to do is <code>sed -e &#39;1d&#39; filename.txt</code>"}, {"owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "reply_to_user": {"reputation": 747, "user_id": 2373278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff834f7363c1dc9c48b525fc48c67912?s=128&d=identicon&r=PG", "display_name": "ViFI", "link": "https://stackoverflow.com/users/2373278/vifi"}, "edited": false, "score": 0, "creation_date": 1490907792, "post_id": 43128122, "comment_id": 73335401, "body": "because i have a lot of file how can i change sed -e &#39;1d&#39; filename.txt to remove the first line from many file in the same time (directory of file)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490908194, "post_id": 43128122, "comment_id": 73335587, "body": "You should preprend <code>$filename</code> with <code>$directory</code> before reading from it: <code>$filename = $directory . &#39;&#47;&#39; . $filename</code>. Also it is not necessary to encode the filename before opening it. See <a href=\"http://stackoverflow.com/documentation/perl/4375/unicode/15287/create-filenames#t=201703302112430306543\">this topic of SO docs</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490908582, "post_id": 43128122, "comment_id": 73335773, "body": "Also when printing the array back to file you should set <code>$, = &quot;\\n&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1490908455, "creation_date": 1490908455, "answer_id": 43128461, "question_id": 43128122, "link": "https://stackoverflow.com/questions/43128122/remove-the-first-line-from-my-directory/43128461#43128461", "title": "Remove the first line from my directory", "body": "<p>The accepted pattern for doing this kind of thing is as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $old_file = '/path/to/old/file.txt';\nmy $new_file = '/path/to/new/file.txt';\n\nopen(my $old, '&lt;', $old_file) or die $!;\nopen(my $new, '&gt;', $new_file) or die $!;\n\nwhile (&lt;$old&gt;) {\n    next if $. == 1;\n    print $new $_;\n}\n\nclose($old) or die $!;\nclose($new) or die $!;\n\nrename($old_file, \"$old_file.bak\") or die $!;\nrename($new_file, $old_file) or die $!;\n</code></pre>\n\n<p>In your case, we're using <code>$.</code> (the <a href=\"http://perldoc.perl.org/perlvar.html#%24INPUT_LINE_NUMBER\" rel=\"nofollow noreferrer\">input line number variable</a>) to skip over the first line.</p>\n"}], "owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490919986, "creation_date": 1490907274, "last_edit_date": 1490919986, "question_id": 43128122, "link": "https://stackoverflow.com/questions/43128122/remove-the-first-line-from-my-directory", "title": "Remove the first line from my directory", "body": "<p>how can i remove the first line from my list of file , this is my code, </p>\n\n<p>open my directory: </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse utf8;\n\nuse Encode;\n\nuse Encode::Guess;\n\nuse Devel::Peek;\nmy $new_directory = '/home/lenovo/corpus';\nmy $directory = '/home/lenovo/corpus';\nopen( my $FhResultat, '&gt;:encoding(UTF-8)', $FichierResulat );\nmy $dir = '/home/corpus';\nopendir (DIR, $directory) or die $!;\nmy @tab;\nwhile (my $file = readdir(DIR)) {\n\n next if ($file eq \".\" or $file eq \"..\" );\n    #print \"$file\\n\";\n\nmy $filename_read = decode('utf8', $file); \n        #print $FichierResulat \"$file\\n\";\n\npush @tab, \"$filename_read\";\n\n}\n closedir(DIR);\n</code></pre>\n\n<p>open my file:</p>\n\n<pre><code>foreach my $val(@tab){\n\n\nutf8::encode($val);\n\nmy $filename = $val;\n\nopen(my $in, '&lt;:utf8', $filename) or die \"Unable to open '$filename' for read: $!\";\n</code></pre>\n\n<p>rename file</p>\n\n<pre><code>my $newfile = \"$filename.new\";\n\nopen(my $out, '&gt;:utf8', $newfile) or die \"Unable to open '$newfile' for write: $!\";\n</code></pre>\n\n<p>remove the first line</p>\n\n<pre><code>my @ins = &lt;$in&gt;; # read the contents into an array\nchomp @ins;\nshift @ins; # remove the first element from the array   \n\nprint $out   @ins;\n    close($in);\n    close $out;\n</code></pre>\n\n<p>the probem my new file is empty !\n    rename $newfile,$filename or die \"unable to rename '$newfile' to '$filename': $!\";\n    }</p>\n\n<p>It seems true but the result is an empty file.</p>\n"}, {"tags": ["perl", "encryption", "ms-word"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490908095, "post_id": 43128018, "comment_id": 73335542, "body": "what does the <code>_is_office_doc</code>? because your file contains the <code>&lt;encryption xmlns)</code> so it should be identified by the 1st rule."}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490914542, "post_id": 43128018, "comment_id": 73337833, "body": "Can you tell me what method you used to read the file to determine it contains the <code>&lt;encryption xmlns)</code> ?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490939544, "post_id": 43128018, "comment_id": 73344450, "body": "<code>xxd g9kfak164.docx | less</code> so again the question. What doing the <code>_is_office_doc</code> method?"}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490972477, "post_id": 43128018, "comment_id": 73365028, "body": "I&#39;ve uploaded the full code I&#39;ve been given here <a href=\"https://pastebin.com/UebVFnJ9\" rel=\"nofollow noreferrer\">pastebin.com/UebVFnJ9</a> I believe the issue is with the markers that are used to detect these files is no longer accurate for these strong encryption word docs. Thanks so much for your help."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1490916312, "post_id": 43129386, "comment_id": 73338362, "body": "I think you mean <code>if ($data eq 208) {</code> ? It otherwise prints <code>Argument &quot;&lt;D0&gt;&quot; isn&#39;t numeric in numeric eq (==)</code>. It also never equals 208, and always just returns 0. Other ideas?"}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1490925453, "post_id": 43129386, "comment_id": 73340520, "body": "This still doesn&#39;t work for me :-( It always just returns 0 in a loop for every character in the file. Printing $data shows that it is indeed &quot;&lt;D0&gt;&quot; (zero), but it never matches..."}, {"owner": {"reputation": 386, "user_id": 7781307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sW6ol.jpg?s=128&g=1", "display_name": "SLWS", "link": "https://stackoverflow.com/users/7781307/slws"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1490949223, "post_id": 43129386, "comment_id": 73349444, "body": "Ok. Lets try a different approach then. (Answer edited)"}], "tags": [], "owner": {"reputation": 386, "user_id": 7781307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sW6ol.jpg?s=128&g=1", "display_name": "SLWS", "link": "https://stackoverflow.com/users/7781307/slws"}, "is_accepted": false, "score": 1, "last_activity_date": 1490951304, "last_edit_date": 1490951304, "creation_date": 1490912698, "answer_id": 43129386, "question_id": 43128018, "link": "https://stackoverflow.com/questions/43128018/identifying-encrypted-word-docs-with-perl/43129386#43129386", "title": "Identifying encrypted Word docs with perl", "body": "<p>As far as I can see in the link you reference, generally files beginning with the \u00d0\u00cf prefix are protected, &amp; I've not found any unprotected word documents that do begin with that prefix. So unless you need to distinguish between e.g. Excel and Word and which version the documents are (which might be better handled via file ext), you can simply test for files beginning with \u00d0.</p>\n\n<pre><code>use Fcntl qw(:seek);\n\nmy($fh, $FILE, $byte_position, $byte_value);\n\n$FILE      = \"path/to/file\";\n$byte_position = 0;\n\nopen($fh, \"&lt;\", $FILE)\n  || die \"can't open $FILE: $!\";\n\nbinmode($fh)\n  || die \"can't binmode $FILE\";\n\nsysseek($fh, $byte_position, SEEK_CUR)  # NB: 0-based\n  || die \"couldn't see to byte $byte_position in $FILE: $!\";\n\nsysread($fh, $byte_value, 1) == 1\n  || die \"couldn't read byte from $FILE: $!\";\n\nif (ord($byte_value) == 208){\n  return 1;\n}\nelse {\n  return 0;\n}\n</code></pre>\n\n<p>i.e. Read first byte of file to see if it is D0hex (ASCII \u00d0), if it is return 1 for protected document, otherwise return 0.</p>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490951304, "creation_date": 1490906856, "last_edit_date": 1495535451, "question_id": 43128018, "link": "https://stackoverflow.com/questions/43128018/identifying-encrypted-word-docs-with-perl", "title": "Identifying encrypted Word docs with perl", "body": "<p>I have a series of Word docs that require a password to decode and would like to be able to identify them as having a password among a series of non-encrypted Word docs.</p>\n\n<p>I've followed much of the guidance provided by this stackoverflow link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14347513/how-to-detect-if-a-word-document-is-password-protected-before-uploading-the-file/14347730#14347730\">How to detect if a Word document is password protected before uploading the file to server?</a></p>\n\n<p>Here is the code I am currently using:</p>\n\n<pre><code> sub _is_encrypted_doc {\n   my ($data) = @_;\n\n if (_is_office_doc($data)) {\n     if ($data =~ /(?:&lt;encryption xmlns)/i) {\n       return 1;\n     }\n     if (index($data, \"\\x13\") == 523) {\n       return 1;\n     }\n     if (index($data, \"\\x2f\") == 532) {\n       return 1;\n     }\n     if (index($data, \"\\xfe\") == 520) {\n       return 1;\n     }\n     my $tdata = substr $data, 2000;\n     $tdata =~ s/\\\\0/ /g;\n     if (index($tdata, \"E n c r y p t e d P a c k a g e\") &gt; -1) {\n       return 1;\n     }\n   }\n }\n</code></pre>\n\n<p>However, my code doesn't appear to identify all variations we've received. I've uploaded one such file here:</p>\n\n<p><a href=\"https://www.dropbox.com/s/uk51fixkc12aove/g9kfak164.docx?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/uk51fixkc12aove/g9kfak164.docx?dl=0</a></p>\n\n<p>Use \"NZlttUtz\" to decode. I'm relatively new at this, so I hoped someone could guide me here. Is there more comprehensive code already available to do this?</p>\n"}, {"tags": ["performance", "perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490899444, "post_id": 43125309, "comment_id": 73330900, "body": "The <code>JSON::XS</code> is fast, but so is <code>Storable</code> so you&#39;d have to compare.  Changing the design from a giantic straight hash to else would probably help directly, if possible."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490899494, "post_id": 43125309, "comment_id": 73330939, "body": "Does your use allow you to read it in a separate thread while doing other useful work (or does it have to be fully loaded for anything to be done)?"}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490899525, "post_id": 43125309, "comment_id": 73330955, "body": "It has to be fully loaded."}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490899647, "post_id": 43125309, "comment_id": 73331028, "body": "And it need to be this giant hash because I have to lookup for &quot;wordleft&quot; very often once all data has been loaded."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1490899906, "post_id": 43125309, "comment_id": 73331172, "body": "Try Sereal.  Also consider just keeping the data in Berkeley DB or sqlite"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1490900062, "post_id": 43125309, "comment_id": 73331256, "body": "How often is very often?  Maybe a better way to put that: how many times will you be looking up the data for each time you read it in?  (I&#39;d guess it would have to be in the 10s or 100s of millions to make keeping the data all in memory even possibly worth it)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1490900644, "post_id": 43125309, "comment_id": 73331547, "body": "Put it in a SQLite database, or <i>any</i> better format than a gig of separated values in text files."}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1490901011, "post_id": 43125309, "comment_id": 73331729, "body": "I don&#39;t think a database is the solution. After reading the data I need to lookup &quot;words&quot; as fast as possible a few million times, in some special cases even a few billion (!) times. SQL selects would be too slow here. With an in-memory-hash it&#39;s fast enough."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490901519, "post_id": 43125309, "comment_id": 73331984, "body": "On my notebook the simple <code>time perl -e &#39;$hash{$_} = &quot;sometext&quot; for (1..32_000_000)&#39;</code> e.g. inmemory hash assignment tooks 26 seconds..."}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 4, "creation_date": 1490901577, "post_id": 43125309, "comment_id": 73332006, "body": "Fun fact: I even implemented the reading and hash storing with different programming languages, in particular with C++ (using a hash class from the stdlib), Java, C# and Go. My original Perl implementation is still the fastest."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490907599, "post_id": 43125309, "comment_id": 73335268, "body": "Did you try to read it with multiple threads?  It&#39;s one disk alright, but there should still be concurrency benefits.  Keep data over some, say, half-dozen files (tweak the number) and read with as many threads (maybe each into its own hash).  May get a considerable speedup, perhaps by a factor of 2 or more."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490911150, "post_id": 43125309, "comment_id": 73336850, "body": "A FastMMap might also be a good idea to reload it in a fast way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490993972, "post_id": 43125309, "comment_id": 73376401, "body": "The C++ you mention ... is that of interest to you? I am puzzled by the comparison and will probably try that. But how would you use it in Perl-based code?  (Or was it just a test out of curiousity?)"}, {"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1490996373, "post_id": 43125309, "comment_id": 73377273, "body": "It was just a test out of curiosity, because I&#39;d like to find out how different hash map implementations behave in my special use case. I did not expect the Perl implementation to be the fastest one. (There is a C++ hash implementation from Google called &quot;sparsehash&quot;, which has a reputation of beeing very fast. I did not try this one yet.)"}, {"owner": {"reputation": 461, "user_id": 1547069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f933d9a29c415d761a0e77cfc5f7b84?s=128&d=identicon&r=PG", "display_name": "simonhf", "link": "https://stackoverflow.com/users/1547069/simonhf"}, "edited": false, "score": 0, "creation_date": 1504286923, "post_id": 43125309, "comment_id": 78971528, "body": "Try writing it in C using SharedHashFile [1] allowing to memory map the key, value pairs into RAM. There is a small kernel overhead when you access a virtual page for the first time containing a key, value pair. Use process a to write the key, value pairs &amp; process b for reading so there is almost no overhead due to shared memory. For extra speed keep the binary files on a RAM disk, e.g. /dev/shm. Also, use multiple processes to concurrently read and write key, value pairs; tests show over 10 million reads per second on a single box. [1] <a href=\"https://github.com/simonhf/sharedhashfile\" rel=\"nofollow noreferrer\">github.com/simonhf/sharedhashfile</a>"}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 1, "creation_date": 1490951720, "post_id": 43132635, "comment_id": 73350807, "body": "I tried this. Creating the database is fast enough and opening the database is really fast indeed. Unfortunately, lookups took about 6 times longer than with an in-memory-hash and therefore the overall running time of my task is longer than reading all data into a hash.  But I&#39;ll keep this module in mind, because it may come in handy for other tasks. Thanks a lot."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1491183774, "post_id": 43132635, "comment_id": 73424648, "body": "You could try making a copy of the cdb hash <code>my %copy = %tied_hash;</code> to make the lookups faster (3x faster on my laptop), but the copy may take too long for you."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1490935543, "creation_date": 1490935543, "answer_id": 43132635, "question_id": 43125309, "link": "https://stackoverflow.com/questions/43125309/fast-loading-of-large-hash-table-in-perl/43132635#43132635", "title": "fast loading of large hash table in Perl", "body": "<p>You could try using Dan Bernstein's CDB file format using a tied hash, which will require minimal code change.  You may need to install <a href=\"http://search.cpan.org/~toddr/CDB_File-0.98/CDB_File.pm\" rel=\"nofollow noreferrer\">CDB_File</a>.  On my laptop, the cdb file is opened very quickly and I can do about 200-250k lookups per second.   Here is an example script to create/use/benchmark a cdb:</p>\n\n<p><strong>test_cdb.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Benchmark qw(:all) ;\nuse CDB_File 'create';\nuse Time::HiRes qw( gettimeofday tv_interval );\n\nscalar @ARGV or die \"usage: $0 number_of_keys seconds_to_benchmark\\n\";\nmy ($size)    = $ARGV[0] || 1000;\nmy ($seconds) = $ARGV[1] || 10;\n\nmy $t0;\ntic();\n\n# Create CDB\nmy ($file, %data);\n\n%data = map { $_ =&gt; 'something' } (1..$size);\nprint \"Created $size element hash in memory\\n\";\ntoc();\n\n$file = 'data.cdb';\ncreate %data, $file, \"$file.$$\";\nmy $bytes = -s $file;\nprint \"Created data.cdb [ $size keys and values, $bytes bytes]\\n\";\ntoc();\n\n# Read from CDB\nmy $c = tie my %h, 'CDB_File', 'data.cdb' or die \"tie failed: $!\\n\";\nprint \"Opened data.cdb as a tied hash.\\n\";\ntoc();\n\ntimethese( -1 * $seconds, {\n          'Pick Random Key'    =&gt; sub { int rand $size },\n          'Fetch Random Value' =&gt; sub { $h{ int rand $size }; },\n});\n\ntic();\nprint \"Fetching Every Value\\n\";\nfor (0..$size) {\n    no warnings; # Useless use of hash element\n    $h{ $_ };\n}\ntoc();\n\nsub tic {\n    $t0 = [gettimeofday];    \n}\n\nsub toc {\n    my $t1 = [gettimeofday];\n    my $elapsed = tv_interval ( $t0, $t1);\n    $t0 = $t1;\n    print \"==&gt; took $elapsed seconds\\n\";\n}\n</code></pre>\n\n<p><strong>Output ( 1 million keys, tested over 10 seconds )</strong></p>\n\n<pre><code>./test_cdb.pl 1000000 10\n\nCreated 1000000 element hash in memory\n==&gt; took 2.882813 seconds\nCreated data.cdb [ 1000000 keys and values, 38890944 bytes]\n==&gt; took 2.333624 seconds\nOpened data.cdb as a tied hash.\n==&gt; took 0.00015 seconds\nBenchmark: running Fetch Random Value, Pick Random Key for at least 10 CPU seconds...\nFetch Random Value: 10 wallclock secs (10.46 usr +  0.01 sys = 10.47 CPU) @ 236984.72/s (n=2481230)\nPick Random Key:  9 wallclock secs (10.11 usr +  0.02 sys = 10.13 CPU) @ 3117208.98/s (n=31577327)\nFetching Every Value\n==&gt; took 3.514183 seconds\n</code></pre>\n\n<p><strong>Output ( 10 million keys, tested over 10 seconds )</strong></p>\n\n<pre><code>./test_cdb.pl 10000000 10\n\nCreated 10000000 element hash in memory\n==&gt; took 44.72331 seconds\nCreated data.cdb [ 10000000 keys and values, 398890945 bytes] \n==&gt; took 25.729652 seconds\nOpened data.cdb as a tied hash.\n==&gt; took 0.000222 seconds\nBenchmark: running Fetch Random Value, Pick Random Key for at least 10 CPU seconds...\nFetch Random Value: 14 wallclock secs ( 9.65 usr +  0.35 sys = 10.00 CPU) @ 209811.20/s (n=2098112)\nPick Random Key: 12 wallclock secs (10.40 usr +  0.02 sys = 10.42 CPU) @ 2865335.22/s (n=29856793)\nFetching Every Value\n==&gt; took 38.274356 seconds\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1491046579, "post_id": 43151267, "comment_id": 73388115, "body": "I tried Sereal. I takes 25 seconds to read the data back, the Storable module tooks 28 seconds. Sereal is a little bit faster, but it takes a lot of memory while encoding, because unlike Storable it can&#39;t write into a file directly (at least I found no way to do so)."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1491006480, "last_edit_date": 1491006480, "creation_date": 1491004874, "answer_id": 43151267, "question_id": 43125309, "link": "https://stackoverflow.com/questions/43125309/fast-loading-of-large-hash-table-in-perl/43151267#43151267", "title": "fast loading of large hash table in Perl", "body": "<p>It sounds like you do have a good use case for wanting an in-memory perl hash.</p>\n\n<p>For faster storing/retrieving, I would recommend Sereal (<a href=\"http://p3rl.org/Sereal::Encoder\" rel=\"nofollow noreferrer\">Sereal::Encoder</a>/<a href=\"http://p3rl.org/Sereal::Decoder\" rel=\"nofollow noreferrer\">Sereal::Decoder</a>).  If your disk storage is slow, you may even want to enable Snappy compression.</p>\n"}], "owner": {"reputation": 293, "user_id": 6212907, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/CxA43.jpg?s=128&g=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/6212907/andr%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1491045347, "creation_date": 1490897238, "last_edit_date": 1491045347, "question_id": 43125309, "link": "https://stackoverflow.com/questions/43125309/fast-loading-of-large-hash-table-in-perl", "title": "fast loading of large hash table in Perl", "body": "<p>I have about 30 text files with the structure</p>\n\n<pre><code>wordleft1|wordright1\nwordleft2|wordright2\nwordleft3|wordright3\n...\n</code></pre>\n\n<p>The total size of the files is about 1 GB with about 32 million lines of word combinations. </p>\n\n<p>I tried a few approaches to load them as fast as possible and store the combinations within a hash</p>\n\n<pre><code>$hash{$wordleft} = $wordright\n</code></pre>\n\n<p>Opening file by file and reading line by line takes about 42 seconds. I then store the hash with the Storable module </p>\n\n<pre><code>store \\%hash, $filename\n</code></pre>\n\n<p>Loading the data again</p>\n\n<pre><code>$hashref = retrieve $filename\n</code></pre>\n\n<p>reduces the time to about 28 seconds. I use a fast SSD drive and a fast CPU and have enough RAM to hold all the data (it takes about 7 GB).</p>\n\n<p>I'm searching for a faster way to load this data into the RAM (I can't keep it there for a few reasons).</p>\n"}, {"tags": ["regex", "linux", "perl", "rename"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1490879654, "post_id": 43118958, "comment_id": 73317114, "body": "Why did you use <code>?</code> quantifier? It makes the pattern optional. Remove it. <code>s&#47;\\.&#47; - &#47;</code> should work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490879720, "post_id": 43118958, "comment_id": 73317165, "body": "Are you renaming mp3 files? :)"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1490879771, "post_id": 43118958, "comment_id": 73317197, "body": "<code>s&#47;([^\\.]*)\\.&#47;$1-&#47;</code> Just try this"}, {"owner": {"reputation": 376, "user_id": 3998664, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b309ee25f6badf4c84dfaf82d93f478?s=128&d=identicon&r=PG&f=1", "display_name": "Wt Riker", "link": "https://stackoverflow.com/users/3998664/wt-riker"}, "edited": false, "score": 0, "creation_date": 1490879833, "post_id": 43118958, "comment_id": 73317253, "body": "Thanks for the reply. It is my understanding that regexp is greedy and will use all &#39;.&#39; not just the first one. I thought by adding the &#39;?&#39; it will limit it to the first one. So the question is how do I stop after the first match?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1490879868, "post_id": 43118958, "comment_id": 73317274, "body": "Doesn&#39;t <code>s&#47;\\.&#47; - &#47;</code>  work as expected?"}, {"owner": {"reputation": 376, "user_id": 3998664, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b309ee25f6badf4c84dfaf82d93f478?s=128&d=identicon&r=PG&f=1", "display_name": "Wt Riker", "link": "https://stackoverflow.com/users/3998664/wt-riker"}, "edited": false, "score": 0, "creation_date": 1490880101, "post_id": 43118958, "comment_id": 73317449, "body": "ssr1012: Thanks. That did it. I didn&#39;t realize I could set a variable ($1) with regex."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1490880930, "post_id": 43118958, "comment_id": 73318154, "body": "@WtRiker: Why do you need the group and the backreference at all? If you do not use <code>&#47;g</code> modifier, you will only find <i>one single</i> match in the input."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1490884605, "post_id": 43118958, "comment_id": 73321159, "body": "Please <b><i>don&#39;t use</i></b> that program. It is amateurish code, and uses <code>eval</code> inappropriately and unnecessarily."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1490884760, "post_id": 43118958, "comment_id": 73321280, "body": "@ssr1012: That is pretty poor code too. It is overkill when <code>s&#47;\\.&#47;-&#47;</code> will do just fine"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490942828, "post_id": 43118958, "comment_id": 73345956, "body": "@Borodin: Ummm. I know and given that two regex an option."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1490884895, "post_id": 43119158, "comment_id": 73321395, "body": "I guess you need the <code>&#47;i</code> modifier in case you come across lower-case full stops?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490942676, "post_id": 43119158, "comment_id": 73345879, "body": "hahaha... Just I copied the regex from the previous line. Thanks."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1490942689, "last_edit_date": 1490942689, "creation_date": 1490880105, "answer_id": 43119158, "question_id": 43118958, "link": "https://stackoverflow.com/questions/43118958/regexp-for-renaming-multiple-files-using-rename-pl/43119158#43119158", "title": "regexp for renaming multiple files using &#39;rename.pl&#39;", "body": "<p>Just try this for simple regex pattern.</p>\n\n<pre><code>my $str = \"nn.some.title.string.ext\";\n\n$str=~s/^([^\\.]*)\\./$1-/i;\nor\n$str=~s/\\./-/;\n\n#^([^\\.]*)       Starting point upto the first dot\n\nprint $str;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2103, "user_id": 3632526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qBSeT.jpg?s=128&g=1", "display_name": "volkinc", "link": "https://stackoverflow.com/users/3632526/volkinc"}, "is_accepted": false, "score": 1, "last_activity_date": 1490885785, "creation_date": 1490885785, "answer_id": 43121422, "question_id": 43118958, "link": "https://stackoverflow.com/questions/43118958/regexp-for-renaming-multiple-files-using-rename-pl/43121422#43121422", "title": "regexp for renaming multiple files using &#39;rename.pl&#39;", "body": "<p>Probably you will want to make sure that firs point is not the last. I mean if by any chance you will have nn_some_title_string.ext file name the script will not change a last dot.</p>\n\n<pre><code>$fileName = \"nn.some.title.string.ext\";\n\n$fileName =~s/\\.(?=\\w+\\.\\w+)/-/;\n\nprint \"FileName: \" . $fileName .\"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1490890744, "creation_date": 1490890744, "answer_id": 43123267, "question_id": 43118958, "link": "https://stackoverflow.com/questions/43118958/regexp-for-renaming-multiple-files-using-rename-pl/43123267#43123267", "title": "regexp for renaming multiple files using &#39;rename.pl&#39;", "body": "<p><code>\\.?</code> can match a sequence of zero characters, so <code>s/\\.?/ - /</code> replaces the dot or the empty string at the start of the input.</p>\n\n<pre><code>\"abc.def.ghi\" \u21d2  \" - abc.def.ghi\"\n\".abc\"        \u21d2  \" - abc\"\n</code></pre>\n\n<hr>\n\n<p>To replace the first <code>.</code>, you can use the following:</p>\n\n<pre><code>s/\\./ - /\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>\"abc.def.ghi\" \u21d2 \"abc - def.ghi\"\n</code></pre>\n\n<hr>\n\n<p>To substitute all <code>.</code> but a leading one or the one in the extension, you can use the following:</p>\n\n<pre><code>s/(?!^)\\.(?!\\w+\\z)/ - /g\n</code></pre>\n"}], "owner": {"reputation": 376, "user_id": 3998664, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b309ee25f6badf4c84dfaf82d93f478?s=128&d=identicon&r=PG&f=1", "display_name": "Wt Riker", "link": "https://stackoverflow.com/users/3998664/wt-riker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1490942689, "creation_date": 1490879592, "question_id": 43118958, "link": "https://stackoverflow.com/questions/43118958/regexp-for-renaming-multiple-files-using-rename-pl", "title": "regexp for renaming multiple files using &#39;rename.pl&#39;", "body": "<p>I'm using <a href=\"http://stackoverflow.org/wiki/Rename.pl\" rel=\"nofollow noreferrer\">rename.pl</a> to rename a multiple files. I am having trouble coming up with the right regexp. My file names are of the form:</p>\n\n<p>nn.some.title.string.ext</p>\n\n<p>I want to change just the first '.' to ' - '. I thought this would work but it does not.</p>\n\n<pre><code>s/\\.?/ - /\n</code></pre>\n\n<p>Can someone help me out with this? TIA.</p>\n"}, {"tags": ["perl", "monitor", "inotify", "inode"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6724868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UftqrX8-jZo/AAAAAAAAAAI/AAAAAAAABfk/iwZXrpC_O8Q/photo.jpg?sz=128", "display_name": "vikas chib", "link": "https://stackoverflow.com/users/6724868/vikas-chib"}, "edited": false, "score": 0, "creation_date": 1490878897, "post_id": 43118582, "comment_id": 73316410, "body": "Can you share few examples where I can have a reference for a message passing systems ?"}, {"owner": {"reputation": 839, "user_id": 2261349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e843e82fbb2a5a476808321e72c720c?s=128&d=identicon&r=PG", "display_name": "Znik", "link": "https://stackoverflow.com/users/2261349/znik"}, "edited": false, "score": 0, "creation_date": 1601397262, "post_id": 43118582, "comment_id": 113392869, "body": "It is true, if you mount NFS without shared flocks. But with this option, we must check it."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1490878675, "creation_date": 1490878675, "answer_id": 43118582, "question_id": 43118455, "link": "https://stackoverflow.com/questions/43118455/can-we-use-perl-inotify2-pm-perl-module-for-monitoring-file-on-the-shared-dire/43118582#43118582", "title": "Can we use Perl &#39;inotify2.pm&#39; perl module for monitoring file on the shared directories having different machines?", "body": "<p>No, you can't. NFS doesn't work this way. </p>\n\n<p>inotify is a kernel hook, that lets the kernel notify 'watchers' when 'something else' changes the file.</p>\n\n<p>However the kernel isn't made aware of every change on a remote filesystem, because that'd get a bit insane, fast. So it can only 'notify' for changes that go through the kernel, and practically speaking that means only stuff that happens locally. (Which can, in some cases, be remote filesystems, but the notification doesn't propagate)</p>\n\n<p>If you need to do this, then the answer is really - don't use a filesystem as a semaphore mechanism. It's optimised for 'at rest' data, not real time synchronisation between distributed processes. Use a message passing system instead. I've used Redis with Publish/Subscribe for this sort of IPC, and it works very nicely, for example. </p>\n"}], "owner": {"reputation": 83, "user_id": 6724868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UftqrX8-jZo/AAAAAAAAAAI/AAAAAAAABfk/iwZXrpC_O8Q/photo.jpg?sz=128", "display_name": "vikas chib", "link": "https://stackoverflow.com/users/6724868/vikas-chib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 43118582, "answer_count": 1, "score": 0, "last_activity_date": 1490878675, "creation_date": 1490878385, "question_id": 43118455, "link": "https://stackoverflow.com/questions/43118455/can-we-use-perl-inotify2-pm-perl-module-for-monitoring-file-on-the-shared-dire", "title": "Can we use Perl &#39;inotify2.pm&#39; perl module for monitoring file on the shared directories having different machines?", "body": "<p>my intention is to monitor for newly created files in a directory and the same directory is shared among many computers and below is the script for your reference and once i run the script which identifies the files which are created from the machine xyz (on which i am running notifier script)and it does not recognizes the files from machine abc! Is there anything i need to consider for monitoring newly created files under the given directory ?. irrespective of the machine from which the files are created.</p>\n\n<p>Is there any way to track the file created on different machines using 'inotify2.pm' ? </p>\n\n<pre><code>use Linux::Inotify2;\nmy $inotify;\n$inotify = new Linux::Inotify2 ;\nmy $dir=\"/home/vikas/\";\nopendir(DIR, $dir);\n\nwhile(readdir DIR)\n{\n   print \"$dir/$_\\n\";\n  -d $_ and $inotify-&gt;watch($_,IN_CREATE, \\&amp;watch_new);\n}\nclose DIR;\nsub watch_new\n{\n  my $e = shift;\n  my $name = $e-&gt;fullname;\n  print \"File was created! $name\\n\";\n}\nwhile(1)\n{\n  $inotify-&gt;poll;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490901607, "post_id": 43115720, "comment_id": 73332024, "body": "Not quite the same.  If $a is undef, . will warn and .= will not"}], "tags": [], "owner": {"reputation": 245, "user_id": 5762823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMzPc.png?s=128&g=1", "display_name": "DocWeird", "link": "https://stackoverflow.com/users/5762823/docweird"}, "is_accepted": false, "score": -1, "last_activity_date": 1490871028, "creation_date": 1490871028, "answer_id": 43115720, "question_id": 43115622, "link": "https://stackoverflow.com/questions/43115622/what-is-the-meaning-for-dot-in-perl/43115720#43115720", "title": "What is the meaning for .= (dot + =) in perl", "body": "<p>Yes, the value is concatenated to the variable on left.</p>\n\n<p>Essentially</p>\n\n<pre><code>$a .= $ipval\n</code></pre>\n\n<p>Is the same as:</p>\n\n<pre><code>$a = $a . $ipval\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "closed_date": 1490871563, "answer_count": 1, "score": -5, "last_activity_date": 1490871028, "creation_date": 1490870781, "last_edit_date": 1490870811, "question_id": 43115622, "link": "https://stackoverflow.com/questions/43115622/what-is-the-meaning-for-dot-in-perl", "closed_reason": "Duplicate", "title": "What is the meaning for .= (dot + =) in perl", "body": "<p>I am new to perl scripting, so can anyone please let me know what is the meaning for .= in perl scripting. Will the data will be appended to that variable?</p>\n\n<p>Input file has \n1\n2\n3</p>\n\n<p>Using loop access the file and write the variable.</p>\n\n<p>I see the corresponding value are assigned like below.</p>\n\n<pre><code>$a .= $ipval\n</code></pre>\n\n<p>So please let me know what does <code>.=</code> refers to.</p>\n"}, {"tags": ["bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 0, "last_activity_date": 1490867432, "creation_date": 1490867432, "answer_id": 43114275, "question_id": 43114202, "link": "https://stackoverflow.com/questions/43114202/match-columns-in-2-tab-delimited-text-files/43114275#43114275", "title": "match columns in 2 tab-delimited text files", "body": "<p>You can use standard awk command to join 2 files:</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\"\\t\"} FNR == NR { a[$1]; next } $4 in a' file2 file1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2682, "user_id": 6404949, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ksf1VmNZnPA/AAAAAAAAAAI/AAAAAAAAExQ/uleAWJ-xbJg/photo.jpg?sz=128", "display_name": "VIPIN KUMAR", "link": "https://stackoverflow.com/users/6404949/vipin-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490867679, "creation_date": 1490867679, "answer_id": 43114378, "question_id": 43114202, "link": "https://stackoverflow.com/questions/43114202/match-columns-in-2-tab-delimited-text-files/43114378#43114378", "title": "match columns in 2 tab-delimited text files", "body": "<p>try this - </p>\n\n<pre><code>awk -F'[ ]+' 'NR==FNR {a[$1]++;next} $4 in a{print $0}' f2 f1\n1       x       x       A       x\n2       y       y       A       x\n3       z       z       A       x\n4       x       x       B       x\n5       x       y       B       x\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490875495, "post_id": 43117220, "comment_id": 73313836, "body": "Better to use a hash: <code>my %keys = map { chomp; $_ =&gt; 1 } &lt;$fh&gt;</code> because then you can do <code>print if $keys{$fields[3]}</code>. Also, you could use <code>print scalar &lt;$fh&gt;</code> right after the second <code>open</code> to print the header. That way there is no need to check the line with a regex."}, {"owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490884296, "post_id": 43117220, "comment_id": 73320898, "body": "Very nice ideas, thank you!  Have edited based on your suggestions."}], "tags": [], "owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "is_accepted": false, "score": 0, "last_activity_date": 1490884262, "last_edit_date": 1490884262, "creation_date": 1490875016, "answer_id": 43117220, "question_id": 43114202, "link": "https://stackoverflow.com/questions/43114202/match-columns-in-2-tab-delimited-text-files/43117220#43117220", "title": "match columns in 2 tab-delimited text files", "body": "<p>Since you also asked about Perl, here's a reusable perl solution.  You first read file 2, generate an array of lookup values, and then read file 1, printing out any line in which column 4 matches a value inside of the array we created above.  Something like this might work:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\n\nmy $key_file = shift;\nopen(my $fh, \"&lt;\", $key_file);\nmy $header = &lt;$fh&gt;; # read the header line into '$h'\nmy %keys = map{ chomp; $_ =&gt; 1 }&lt;$fh&gt;;\nclose $fh;\n\nmy $query_file = shift;\nopen(my $q_fh, \"&lt;\", $query_file);\nprint scalar &lt;$q_fh&gt;;\nwhile (&lt;$q_fh&gt;) {\n    my @fields = split;\n    print if $keys{$fields[3]};\n}\nclose $q_fh;\n</code></pre>\n\n<p>You can run this as <code>table_combine.pl &lt;file2&gt; &lt;file1&gt;</code>.</p>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 43114275, "answer_count": 3, "score": 0, "last_activity_date": 1490884262, "creation_date": 1490867274, "question_id": 43114202, "link": "https://stackoverflow.com/questions/43114202/match-columns-in-2-tab-delimited-text-files", "title": "match columns in 2 tab-delimited text files", "body": "<p>I have two tab-delimited .txt files</p>\n\n<p>file1 has 20 million lines and the following structure</p>\n\n<pre><code>col1    col2    col3    col4    col5\n1       x       x       A       x\n2       y       y       A       x\n3       z       z       A       x\n4       x       x       B       x\n5       x       y       B       x\n6       x       y       E       x\n7       x       z       F       x\n</code></pre>\n\n<p>file2 has 3000 lines and the following structure</p>\n\n<pre><code>col1\nA\nB\nC\nD\n</code></pre>\n\n<p>Now I want to extract from file1 the lines where there is a match between col1 from file2 and col4 of file1</p>\n\n<p>So the new file3 should look like this</p>\n\n<pre><code>col1    col2    col3    col4    col5\n1       x       x       A       x\n2       y       y       A       x\n3       z       z       A       x\n4       x       x       B       x\n5       x       y       B       x\n</code></pre>\n\n<p>How can I do this with perl or bash?</p>\n"}, {"tags": ["perl", "scope", "dbi"], "comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1490869214, "post_id": 43112595, "comment_id": 73309463, "body": "Related: <a href=\"http://www.nntp.perl.org/group/perl.dbi.users/2015/03/msg37124.html\" rel=\"nofollow noreferrer\">nntp.perl.org/group/perl.dbi.users/2015/03/msg37124.html</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490875955, "post_id": 43112595, "comment_id": 73314134, "body": "What is the result of <code>perl -MDBI -E&quot;say $DBI::VERSION&quot;</code> on Perl v 5.24?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490876479, "post_id": 43112595, "comment_id": 73314526, "body": "Shouldn&#39;t have to, but maybe adding <code>$dbh-&gt;disconnect();</code> will help?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7793071, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p9qqC9YR3CU/AAAAAAAAAAI/AAAAAAAAABQ/SgwFJ7Prmtk/photo.jpg?sz=128", "display_name": "DrtomDe", "link": "https://stackoverflow.com/users/7793071/drtomde"}, "is_accepted": false, "score": 0, "last_activity_date": 1490889251, "creation_date": 1490889251, "answer_id": 43122717, "question_id": 43112595, "link": "https://stackoverflow.com/questions/43112595/repeated-dbi-connect-does-not-work-with-lexical-variable-in-perl-5-24-0/43122717#43122717", "title": "Repeated DBI connect does not work with lexical variable in Perl 5.24.0", "body": "<p>Thank you for your helpful advices!  On perl 5.16.0 I used DBI 1.631 and on perl 5.24.0 DBI 1.636. I had not considered the different DBI versions on both environments. The hint to use the disconnect was also working, but am I still surprised at the different behavior of the two DBI versions.</p>\n"}], "owner": {"reputation": 71, "user_id": 7790486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dabc5a8db7df40f174803a2ea83de37?s=128&d=identicon&r=PG&f=1", "display_name": "DrtomDe", "link": "https://stackoverflow.com/users/7790486/drtomde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1490889251, "creation_date": 1490863085, "last_edit_date": 1490868649, "question_id": 43112595, "link": "https://stackoverflow.com/questions/43112595/repeated-dbi-connect-does-not-work-with-lexical-variable-in-perl-5-24-0", "title": "Repeated DBI connect does not work with lexical variable in Perl 5.24.0", "body": "<p>When I switched my perl environment from 5.16.0 to 5.24.0 I got a strange behavior that I cannot understand. This code</p>\n\n<pre><code>use DBI;\n\nmy $conn   = 'dbi:ODBC:sqlserver_xxxx';  \nmy $userid = 'dw_select';  \nmy $passwd = 'xxxx';\n\nfor ( 1 .. 100 ) {\n    warn \"start try $_\";\n    my $dbh = DBI-&gt;connect($conn, $userid, $passwd, { RaiseError =&gt; 1 } );\n    warn \"end try $_\";  \n}\n</code></pre>\n\n<p>runs fine on 5.16.0 but when switched to 5.24.0 I got following result:</p>\n\n<pre><code>start try 1 at test_con.pl line 9.\nend try 1 at test_con.pl line 11.\nstart try 2 at test_con.pl line 9.\nend try 2 at test_con.pl line 11.\nstart try 3 at test_con.pl line 9.\nDBI connect('sqlserver_xxxx','dw_select',...) failed: \n Unable to fetch information about the error at test_con.pl line 10.\n</code></pre>\n\n<p>with this modification it runs without errors again:</p>\n\n<pre><code>use DBI;\n\nmy $conn   = 'dbi:ODBC:sqlserver_xxxx';  \nmy $userid = 'dw_select';  \nmy $passwd = 'xxxx';\n\nmy $dbh;    \nfor ( 1 .. 100 ) {\n    warn \"start try $_\";\n    $dbh = DBI-&gt;connect($conn, $userid, $passwd, { RaiseError =&gt; 1 } );\n    warn \"end try $_\";  \n}\n</code></pre>\n\n<p>Does anyone of you have an explanation for that? </p>\n"}]