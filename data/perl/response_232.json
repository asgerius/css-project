[{"tags": ["perl", "rhel"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1560976256, "post_id": 56675272, "comment_id": 99918121, "body": "So it crashes in <code>File&#47;Temp.pm:934</code>? What happens at that line? How did it reach that line?"}, {"owner": {"reputation": 153, "user_id": 11672482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1RI7B.jpg?s=128&g=1", "display_name": "jgm_GIS", "link": "https://stackoverflow.com/users/11672482/jgm-gis"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560978576, "post_id": 56675272, "comment_id": 99918982, "body": "I&#39;m not a strong enough Perl programmer to understand how the programs in the sub directories of /usr/share/perl5 function.  The debugger reached that line by me endlessly stepping into and over subroutines of perl programs, then restarting, until I gave up.  I&#39;m sure if I had stepped into that subroutine instead of over it, the debugger would have kept going."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560979275, "post_id": 56675272, "comment_id": 99919211, "body": "It would be interesting to know why <code>File::Temp</code> is involved? Can you locate any code creating temporary files or directories? Are you sure the error occurs at the <code>warn</code> statement? I would expect it occurred at the closing brace after the <code>warn</code>, since that is a location where lexical objects/variables go out of scope (and hence temporary files or directories will be unlinked)."}, {"owner": {"reputation": 153, "user_id": 11672482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1RI7B.jpg?s=128&g=1", "display_name": "jgm_GIS", "link": "https://stackoverflow.com/users/11672482/jgm-gis"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560979900, "post_id": 56675272, "comment_id": 99919432, "body": "All I&#39;m sure of is that I got to the warn statement in the debugger, I entered s to step into the next line of execution, then the debugger started going into temp.pm, dbi.pm and path.pm.  The debugger didn&#39;t reach the breakpoint at the return statement on the next line.  My perl program does create temporary files .  I&#39;m unsure if temp files were created in this instance, but I&#39;ll investigate."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 2, "creation_date": 1560994416, "post_id": 56675272, "comment_id": 99922391, "body": "<code>File::Temp::cleanup</code> is called automatically when the process exits. So the problem might be with something triggering the exit and not with <code>File::Temp</code>. Try to comment <code>$err = strip_special_chars($err);</code> and/or <code>warn</code> lines. There might be some magic tied to the <code>$info</code>, <code>$err</code> variables or to the <code>warn</code> handler."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1560996207, "post_id": 56675272, "comment_id": 99922689, "body": "most likely issue is some module built for a different perl; rebuild all the modules you use with the new perl"}], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 11672482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1RI7B.jpg?s=128&g=1", "display_name": "jgm_GIS", "link": "https://stackoverflow.com/users/11672482/jgm-gis"}, "is_accepted": true, "score": 1, "last_activity_date": 1561056372, "creation_date": 1561056372, "answer_id": 56692147, "question_id": 56675272, "link": "https://stackoverflow.com/questions/56675272/perl-code-crashes-after-upgrading-from-rhel6-to-rhel8/56692147#56692147", "title": "Perl code crashes after upgrading from rhel6 to rhel8", "body": "<p>The program exits because of Carp settings:</p>\n\n<pre><code>use Carp qw(confess);\n$SIG{__DIE__} = \\&amp;confess;\n$SIG{__WARN__} = \\&amp;confess;\n</code></pre>\n\n<p>It did not exit on the Rhel 6 server because the $err variable wasn't raised.  I will post a new question if I cannot determine why the $err was raised on the Rhel8 server, but not the Rhel6 server.</p>\n"}], "owner": {"reputation": 153, "user_id": 11672482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1RI7B.jpg?s=128&g=1", "display_name": "jgm_GIS", "link": "https://stackoverflow.com/users/11672482/jgm-gis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 56692147, "answer_count": 1, "score": 2, "last_activity_date": 1561056372, "creation_date": 1560975585, "last_edit_date": 1560995896, "question_id": 56675272, "link": "https://stackoverflow.com/questions/56675272/perl-code-crashes-after-upgrading-from-rhel6-to-rhel8", "title": "Perl code crashes after upgrading from rhel6 to rhel8", "body": "<p>I have been migrating from a rhel6 server with Perl 5.10 to a server with rhel8 and perl 5.24 and 5.26.  </p>\n\n<p>Everything works fine except one Perl program crashes executing a warn statement.</p>\n\n<p>Using the built in debugger, I traced the error to the line below. Entering n to step over the subroutine terminated execution.</p>\n\n<pre><code>File::Temp::cleanup(/usr/share/perl5/vendor_perl/File/Temp.pm:934):\n934: @{ $dirs_to_unlink{$$} } = ()\nDB&lt;44&gt; n\n</code></pre>\n\n<p>The sub function with the warn statement that fails is:</p>\n\n<pre><code>sub add_rec_to_db {\n    my $info = shift;\n    # Returns (errorcode, errormsg). No errorcode means GOOD.\n\n    my $af_rec = Logs::stats_transform($info);\n    my $lpd = Logs::db_lpd();\n    my $db_file = \"$lpd/persistent.db\";\n    my $dbh = LogsCommon::open_db($db_file);\n    my $err = LogsCommon::sql_insert_or_update($dbh, $af_rec, 'all_recs', 'FID');\n    if ($err) {\n    if ($err =~ /database is locked/) {\n        return \"DATABASE_IS_LOCKED\";\n    }\n    $err = strip_special_chars($err);\n    warn \"AddRecToDb: FID=$info-&gt;{REC_ID} UNRECOGNIZED_DB_ERROR: $err\";\n    return \"UNRECOGNIZED_DB_ERROR\";\n    }\n    return undef;\n}\n</code></pre>\n\n<p>The Perl program executes without error if I change the parameters so it doesn't run this section of code.  DBI and DBD seem to be installed and working correctly.  Even for the sub function that crashes, the code does what it should, until the warn statement.  After executing the warn statement, it should return \"UNRECOGNIZED_DB_ERROR\".</p>\n\n<p>Using module streams to switch from Perl 5.26 to 5.24 didn't resolve this issue.</p>\n"}, {"tags": ["perl", "http", "firefox"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 1332108, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e039f80e0a2ff6b7df67e065c5d2a8b?s=128&d=identicon&r=PG&f=1", "display_name": "mathog", "link": "https://stackoverflow.com/users/1332108/mathog"}, "edited": false, "score": 0, "creation_date": 1561137652, "post_id": 56674296, "comment_id": 99979062, "body": "That makes sense.   Thanks."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1560971031, "creation_date": 1560971031, "answer_id": 56674296, "question_id": 56674097, "link": "https://stackoverflow.com/questions/56674097/which-http-headers-to-suppress-this-document-is-no-longer-available-on-browse/56674296#56674296", "title": "Which http headers to suppress &quot;This document is no longer available.&quot; on browser back button?", "body": "<blockquote>\n  <p>print $q->header(-expires => '+0s');</p>\n</blockquote>\n\n<p>This gets translated into <code>Expires: .. current date and time ..</code> which means that the response expires immediately. This means the result gets not cached and thus can not be displayed when going back in the browser.</p>\n\n<blockquote>\n  <p>print \"Expires: +0s\\n\";</p>\n</blockquote>\n\n<p>This gets not translated but send as it is to the browser, i.e: <code>Expires: +0s</code>. Since <code>Expires</code> header expects an actual date and time which is not provided by you, this invalid header simply gets ignored and the default caching policy applies instead. This means that the page gets cached and can be  displayed when going back in the browser.</p>\n"}], "owner": {"reputation": 305, "user_id": 1332108, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e039f80e0a2ff6b7df67e065c5d2a8b?s=128&d=identicon&r=PG&f=1", "display_name": "mathog", "link": "https://stackoverflow.com/users/1332108/mathog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560971031, "creation_date": 1560970122, "question_id": 56674097, "link": "https://stackoverflow.com/questions/56674097/which-http-headers-to-suppress-this-document-is-no-longer-available-on-browse", "title": "Which http headers to suppress &quot;This document is no longer available.&quot; on browser back button?", "body": "<p>A perl script creates a download page with this URL</p>\n\n<pre><code>http://server/cgi-bin/oursite/script.pl?action=checkme&amp;username=myname\n</code></pre>\n\n<p>with headers set by:</p>\n\n<pre><code>my $q = new CGI;\n...\nprint $q-&gt;header(-expires =&gt; '+0s');\n</code></pre>\n\n<p>with a bunch of links on it.  Here is one:</p>\n\n<pre><code>http://server/cgi-bin/oursite/script.pl?username=myname&amp;action=retrieve&amp;rmime=text__plain&amp;rfile=HM_vmK9Ah.status\n</code></pre>\n\n<p>(That is the URL in an &lt;A href=\"URL\"&gt;filename&lt;/A&gt; construct.)\nIf a user clicks on this link the target file is sent to the browser with headers:</p>\n\n<pre><code>  print \"Content-type: $RMIME\\n\";\n  print \"Content-Disposition: inline\\n\\n\";\n</code></pre>\n\n<p>Followed by the text of that file.  That displays as it should.  Unfortunately, if the user then attempts to use the browser's back arrow it fails.  Firefox (for instance), says this:</p>\n\n<p>Document Expired</p>\n\n<pre><code>This document is no longer available.\n\nThe requested document is not available in the browser\u2019s cache.\n\n    As a security precaution, the browser does not automatically re-request sensitive documents.\n    Click Try Again to re-request the document from the website. \n    [Try Again]\n</code></pre>\n\n<p>Clicking the \"reload\" button in the browser or \"Try Again\" in the message and then \"resend\" returns to the download page.</p>\n\n<p>If the headers for the download page are instead generated by:</p>\n\n<pre><code>print \"Expires: +0s\\n\";\nprint \"Content-type: text/html\\n\\n\";\n</code></pre>\n\n<p>Then the \"back\" button works as expected.</p>\n\n<p>I don't understand why the behavior differs in the two cases since other than the failure of the \"back\" button the pages are displayed the same (as text/html).  Can somebody please explain this?</p>\n\n<p>A related question - if the browser is told to \"show page source\" on the download page created with the first header method that also brings up the \"Document expired\" message, and \"Try again\" \"resend\" shows the URL of the top page provided by the script.  However \"show page source\" on the top page immediately shows it, without the \"Document expired\" message.  If a page was created with the second header method then \"show page source\" does indeed show the source of the current page.  Again, why the difference?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "csv", "text-parsing", "string-parsing", "perl5.30"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1560957737, "post_id": 56670693, "comment_id": 99909727, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=11101571\" rel=\"nofollow noreferrer\">PerlMonks</a>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1560959978, "post_id": 56670693, "comment_id": 99910994, "body": "I would use <code>split</code> unless benchmarking indicated it was a bottleneck. Or a CSV parsing module."}, {"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1560961020, "post_id": 56670693, "comment_id": 99911468, "body": "split takes forever on a file this large. I was hoping that there is perhaps a faster alternative approach to cut down on the wall time to process the file."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560961522, "post_id": 56670693, "comment_id": 99911673, "body": "How do you know it&#39;s split that takes forever? How long does it take just to read the file line by line?"}, {"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560962321, "post_id": 56670693, "comment_id": 99912019, "body": "@choroba, that part is very fast, as is the filtering for lines ending in empty fields. This is a very powerful machine, but the unnecessary creation of arrays and parsing with split add enough overhead to make it slow."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1560969344, "post_id": 56670693, "comment_id": 99915151, "body": "The IO is the bottleneck. You might be able to speed that up by reading a bug chunk using <code>sysread</code> instead of reading a line at a time. (I say &quot;might&quot; because you now have the extra task of extracting the lines.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560983204, "post_id": 56670693, "comment_id": 99920334, "body": "@ikegami if there are 200 fields in a line and 8 million split calls, all those extra SVs being created can make quite a difference.  on my machine, limiting the split saves 3 minutes"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1560989662, "post_id": 56670693, "comment_id": 99921630, "body": "@ysth I find the same -- to the point that <code>Text::CSV</code> which I tried is an order of magnitude slower (x20) in a benchmark (wrote a tsv file with 260 fields per line).  I tried <code>-&gt;fragment</code> in newer <code>Text::CSV</code>, which does give me back only wanted columns -- but is even slower"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1560990043, "post_id": 56670693, "comment_id": 99921692, "body": "@ysth (I mean, I think <code>Text::CSV</code> is slower only because it has to take the whole lines. Whenever I timed it against manual splitting it was 50%-ish-or-so faster.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561003294, "post_id": 56670693, "comment_id": 99923929, "body": "@zdim, Why would you ever use Text::CSV over Text::CSV_XS?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1561003384, "post_id": 56670693, "comment_id": 99923948, "body": "@ysth, The OP said there were only 30 fields (though they said they wanted the 31st)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561003397, "post_id": 56670693, "comment_id": 99923955, "body": "@ikegami oups, yes, I meant <code>Text::CSV_XS</code> (It&#39;s <i>always</i> set up but I always use the wrapper <code>use</code> statement). That&#39;s a good way to put it, I wouldn&#39;t <i>ever</i> want to :))"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561003505, "post_id": 56670693, "comment_id": 99923968, "body": "@ikegami &quot;<i>OP said there were only 30 fields</i>&quot; -- I think they meant that they are picking out of the fist 30 or so but there&#39;s ... a few hundred?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561003523, "post_id": 56670693, "comment_id": 99923970, "body": "@zdim, They said they were picking about 7 out of 30"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1561003626, "post_id": 56670693, "comment_id": 99923986, "body": "@ikegami for some reason I thought ~100s ... looking for it ..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1561003694, "post_id": 56670693, "comment_id": 99923998, "body": "@zdim, And on PM, they also said they wanted one of of the last fields."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1561003734, "post_id": 56670693, "comment_id": 99924007, "body": "That leaves: Reducing IO times, reusing scalars, and custom parser (though <code>split</code> is quite fast)"}, {"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1561142096, "post_id": 56670693, "comment_id": 99980907, "body": "OP here. There are 34 fields, I misspoke when I said thirty."}], "answers": [{"comments": [{"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1561142065, "post_id": 56672216, "comment_id": 99980897, "body": "I&#39;ll give you the checkmark, for now, but I was hoping to see alternative more performant approaches to split."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1561147552, "post_id": 56672216, "comment_id": 99982857, "body": "if there are only 34 fields, this is not going to make a significant difference.  a regex match might give some improvement.  So you have lines that are about 1000 characters and 34 fields in each line and maybe 30 million lines, of which 75% are ignored because of the empty field at the end?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 5, "last_activity_date": 1560961825, "creation_date": 1560961825, "answer_id": 56672216, "question_id": 56670693, "link": "https://stackoverflow.com/questions/56670693/what-is-a-performant-way-to-split-long-lines-when-only-a-subset-of-fields-is-des/56672216#56672216", "title": "What is a performant way to split long lines when only a subset of fields is desired", "body": "<p>You can tell split when to stop with its limit parameter:</p>\n\n<pre><code>my @fields=split(/\\t/,$_,33);\n</code></pre>\n\n<p>(Specify one more than the number of fields you actually want, because the last field it produces will contain the remainer of the line.)</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 4196566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Ti7Wo00kMQ/AAAAAAAAAAI/AAAAAAAAEWQ/dXI0-UENGmk/photo.jpg?sz=128", "display_name": "JUNPA", "link": "https://stackoverflow.com/users/4196566/junpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1563341726, "creation_date": 1563341726, "answer_id": 57069092, "question_id": 56670693, "link": "https://stackoverflow.com/questions/56670693/what-is-a-performant-way-to-split-long-lines-when-only-a-subset-of-fields-is-des/57069092#57069092", "title": "What is a performant way to split long lines when only a subset of fields is desired", "body": "<pre><code>grep -P -v \"\\t\\s*$\" yourFile.tsv | cut -f2,3,12-18,25-28,31\n</code></pre>\n\n<p>You don't even have to write a perl code for this.</p>\n\n<p>Here,</p>\n\n<p><code>-P</code> is \"perl grep\" which provides more functionality to naive grep.</p>\n\n<p><code>-v</code> is inverse matching, which corresponds to your <code>next if</code></p>\n\n<p>BTW, if you have enough cores and memory, then you might want to speed up the process by split and merge as:</p>\n\n<pre><code>split -n 10 -d yourFile.tsv yourFile.tsv.\n</code></pre>\n\n<p>That will generate <code>yourFile.tsv.00, ..., yourFile.tsv.09</code></p>\n\n<p>Thus, the whole code looks like something like the block in the below:</p>\n\n<pre><code>`split -n 10 -d yourFile.tsv yourFile.tsv.`\n@yourFiles = `ls yourFile.tsv.*`;\nforeach $file (@yourFiles) {\n      `grep -P -v \"\\t\\s*$\" $file | cut -f2,3,12-18,25-28,31 &gt; $file.filtered &amp;`;\n}\n`cat yourFile.*.filtered &gt; final.output.tsv`\n</code></pre>\n"}], "owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 2, "accepted_answer_id": 56672216, "answer_count": 2, "score": 2, "last_activity_date": 1563341726, "creation_date": 1560956303, "last_edit_date": 1561142021, "question_id": 56670693, "link": "https://stackoverflow.com/questions/56670693/what-is-a-performant-way-to-split-long-lines-when-only-a-subset-of-fields-is-des", "title": "What is a performant way to split long lines when only a subset of fields is desired", "body": "<p>The details of my query follow:</p>\n\n<ol>\n<li>I have a very large TSV (Tab Sep. Value) file (where large > 30 GB).</li>\n<li>I want to extract certain lines from this file that don't end with an empty last field. Since this is a TSV file, those lines that don't end with <code>\\t\\n</code>, which is a trivial test and not the subject of this question. That will remove some 75% of the lines, right off the bat, reducing the workload.</li>\n<li>Then I want to extract a small subset of fields from the remaining lines. The fields are not contiguous, but they are few in number (e.g., let's say seven out of just over thirty in total). For example, say fields <code>2,3,12-18,25-28,31</code>.</li>\n<li>The lines I am extracting from are very long, most are as long as 1,000 characters, because they contain a large number of tab delimited fields.</li>\n</ol>\n\n<p>One option is to obviously use the following simple code, which I've tried to nicely format and include comments to show my reasoning:</p>\n\n<pre><code>use warnings;\nuse strict;\n# I am using the latest stable version of Perl for this exercise\nuse 5.30.0;\n\nwhile (&lt;&gt;)\n{\n  # Skip lines ending with an empty field\n  next if substr($_,-2) eq \"\\t\\n\";\n\n  # Remove \"\\n\"\n  chomp;\n\n  # Split matching lines into fields on \"\\t\", creating @fields\n  my @fields=split(/\\t/,$_);\n\n  # Copy only the desired fields from @fields to create a new\n  # line in TSV format\n  # This can be done in one simple step in Perl, using\n  # array slices and the join() function\n  my $new_line=join(\"\\t\",@fields[2,3,12..18,25..28,31]);\n\n  # ...\n}\n</code></pre>\n\n<p>But, using <code>split</code> leads to extra parsing (beyond the last field I need) and produces a complete array of fields which I also don't need. I think it would be more efficient to not create the array, but to parse each line looking for tabs and counting the field indexes as I go, creating the output line on the way, and stopping at the last field I need.</p>\n\n<p>Am I correct in my assessment, or is just doing a simple <code>split</code>, followed by a <code>join</code> of the slices containing the fields of interest, the best way to go here from a performance perspective?</p>\n\n<p><strong>Update</strong>: Unfortunately, no one mentioned the possibility of using <code>GNU cut</code> for the split and piping the results into Perl for the rest of the processing. This is probably the most performant way, without writing lots of custom (C) code to do this or resorting to large block based reads with custom line parsing (also in C).</p>\n"}, {"tags": ["perl", "terminal", "termcap"], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 9558455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce75a8c01717840ed5b8eb5bf0418843?s=128&d=identicon&r=PG&f=1", "display_name": "KevinJWalters", "link": "https://stackoverflow.com/users/9558455/kevinjwalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1561122714, "last_edit_date": 1561122714, "creation_date": 1560955850, "answer_id": 56670552, "question_id": 56669542, "link": "https://stackoverflow.com/questions/56669542/how-to-display-a-statement-at-a-specfic-row-and-column-using-termcap-module-in/56670552#56670552", "title": "How to display a statement at a specfic row and column using Term::Cap module in perl", "body": "<p>My original answer was partly incorrect, I've corrected it.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Term::Cap\" rel=\"nofollow noreferrer\">Term::Cap</a> module is for manipulating a simple, antiquated terminal-related database. From the description:</p>\n\n<blockquote>\n  <p>These are low-level functions to extract and use capabilities from a\n  terminal capability (termcap) database.</p>\n</blockquote>\n\n<p>This database may not be present on a modern implementation of Unix (e.g. Linux). The perl module uses <code>infocmp -C</code> to obtain the terminal information if it cannot find the database file.</p>\n\n<p>I think your example is based on the documentation which appears a little misleading with its use of <code>$FH</code>. The <code>print</code> statement in perl is simply going to standard output and will be devoid of any positioning because <code>Tgoto</code> returns the control characters for the positioning. It can be used for positioning in two ways:</p>\n\n<pre><code>print $terminal-&gt;Tgoto('cm',5,2);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$terminal-&gt;Tgoto('cm',5,2,*STDOUT);\n</code></pre>\n\n<p>You are likely to also want to automatically flush standard output too to avoid buffering effects, see below for a complete example which also features correct use of <code>Trequire</code>:</p>\n\n<pre><code>use Term::Cap;\nuse strict;\n\nmy $ospeed = 9600; \nmy $terminal = Tgetent Term::Cap { TERM =&gt; undef, OSPEED =&gt; $ospeed };\n$terminal-&gt;Trequire(qw/cl cm/);\n\nSTDOUT-&gt;autoflush(1);          ### turn off buffering\nprint $terminal-&gt;Tputs('cl');  ### clear screen\n\nmy ($row, $col) = (16, 10);\n\nforeach my $word (reverse(qw(ALL YOUR TERMCAP ARE BELONG TO US))) {\n  sleep(1);\n  print $terminal-&gt;Tgoto('cm', $row, $col--);  ### position cursor\n  print $word;\n}\n\nprint $terminal-&gt;Tgoto('cm', 0, 18);\n</code></pre>\n\n<p><code>Trequire</code> is checking the <strong>term</strong>inal you are using the <strong>cap</strong>abilities you are using in the program represented by the short <a href=\"https://www.gnu.org/software/termutils/manual/termcap-1.3/html_mono/termcap.html#SEC44\" rel=\"nofollow noreferrer\">termcap character codes</a>. In the progam above: <code>cl</code> for clear screen and home cursor and <code>cm</code> for position cursor. It will throw an exception and terminate the program if the terminal does not support the specified list.</p>\n\n<p>The ancient <em>higher-level</em> libraries in this space for unix were called curses and were used for \"full-screen\" commands like <code>vi</code>. A modern version of this is <a href=\"https://en.wikipedia.org/wiki/Ncurses\" rel=\"nofollow noreferrer\">ncurses</a>. I'd suggest looking searching for curses on <a href=\"https://www.cpan.org/\" rel=\"nofollow noreferrer\">CPAN</a> to find something that has the features suitable for your use case.</p>\n"}], "owner": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1561122714, "creation_date": 1560952906, "last_edit_date": 1561114423, "question_id": 56669542, "link": "https://stackoverflow.com/questions/56669542/how-to-display-a-statement-at-a-specfic-row-and-column-using-termcap-module-in", "title": "How to display a statement at a specfic row and column using Term::Cap module in perl", "body": "<p>I writing a code which will display a statement at 2 nd row and 10th column using Term::Cap module in perl .</p>\n\n<p>I have tried the below code </p>\n\n<pre><code>#!/apps/perl/5.8.9/bin/perl\n#\nuse strict;\nuse warnings;\n\nrequire POSIX;\nuse Term::Cap;\n\nmy $termios =new  POSIX::Termios;\n$termios-&gt;getattr;\nmy $ospeed =$termios-&gt;getospeed;\n\nmy $terminal = Tgetent Term::Cap {TERM=&gt;undef, OSPEED=&gt;$ospeed};\n$terminal-&gt;Trequire(qw/ce ku kd/);\n$terminal-&gt;Tgoto('cm',5,2);\nprint \"Hello World\\n\";\n$terminal-&gt;Tputs('c1');\n</code></pre>\n\n<p>I am getting output without any row and column position which I specific. Also what will  Trequire(), Tgetent(), do . Also is it possible to display Hello in (r1,c1) and World at (r1,c2).</p>\n"}, {"tags": ["perl", "floating-point"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1560951990, "post_id": 56669067, "comment_id": 99906009, "body": "<code>map { $sum += $_ } @x</code> is better written as <code>$sum += $_ for @x</code>. You shouldn&#39;t use <code>map</code> as a loop, it&#39;s there to transform one list into another."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560952518, "post_id": 56669067, "comment_id": 99906356, "body": "Fixed.  It didn&#39;t change the math."}, {"owner": {"reputation": 139227, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 5, "creation_date": 1560952702, "post_id": 56669067, "comment_id": 99906489, "body": "Floating-point arithmetic is not associative. Among other aspects, if you accumulate large values first, there is not enough precision to add small values accurately. But if you add small values first, they can be summed accurately, with large values added later."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1560952887, "post_id": 56669067, "comment_id": 99906614, "body": "&quot;Floating-point arithmetic is not associative.&quot;  That was the answer I was looking for.  It makes sense the way you&#39;ve described it.  In this particular case, the floats come in on a time interval, but I&#39;ll remember about the small values first in the future."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560953316, "post_id": 56669067, "comment_id": 99906871, "body": "@ErikBennett: I didn&#39;t claim that it would fix your problem. It was just a bit of &quot;best practices&quot; advice."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1560953403, "post_id": 56669067, "comment_id": 99906928, "body": "@DaveCross  And I appreciate it!  It&#39;s what I meant to do.  The <code>map</code> thing was sloppy."}, {"owner": {"reputation": 3691, "user_id": 1289675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/edlUo.jpg?s=128&g=1", "display_name": "Netch", "link": "https://stackoverflow.com/users/1289675/netch"}, "edited": false, "score": 1, "creation_date": 1561735011, "post_id": 56669067, "comment_id": 100173080, "body": "Very close question: <a href=\"https://stackoverflow.com/q/33974176/1289675\">stackoverflow.com/q/33974176/1289675</a>"}], "answers": [{"tags": [], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "is_accepted": true, "score": 1, "last_activity_date": 1560966551, "creation_date": 1560966551, "answer_id": 56673314, "question_id": 56669067, "link": "https://stackoverflow.com/questions/56669067/adding-an-array-of-floats-produces-weird-sums-adding-forward-vs-backward/56673314#56673314", "title": "Adding an array of floats produces weird sums adding forward vs. backward", "body": "<p>As Eric mentioned in the comments, floating point arithmetic is not associative; so the order you do the operations will impact the answer.</p>\n\n<p>While \"add smaller values first\" is good advice, it is important to emphasize that you can have differences even with just regular \"small\" values. Here's one example:</p>\n\n<pre><code>  x  =  1.004028\n  y  = 3.0039678\n  z  =  4.000855\n</code></pre>\n\n<p>If these are taken to be IEEE-754 single-precision floats (i.e., 32-bit binary format), then we get:</p>\n\n<pre><code>  x + (y+z) = 8.008851\n  (x+y) + z = 8.00885\n</code></pre>\n\n<p>Infinitely precise result is <code>8.0088508</code>. So neither are very good! And the error isn't insignificant for scientific computations and it accumulates.</p>\n\n<p>This is a rich field with many numerical algorithms to ensure precision. While which one you pick entirely depends on your problem domain and particular needs and resources you have available, one of the best-known algorithms is Kahan's summation algorithm, see: <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Kahan_summation_algorithm</a>. You can easily adopt it to your problem for (hopefully) better results.</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 56673314, "answer_count": 1, "score": 0, "last_activity_date": 1560966551, "creation_date": 1560951500, "last_edit_date": 1560952483, "question_id": 56669067, "link": "https://stackoverflow.com/questions/56669067/adding-an-array-of-floats-produces-weird-sums-adding-forward-vs-backward", "title": "Adding an array of floats produces weird sums adding forward vs. backward", "body": "<p>I'm adding (summing) and array of floats in perl, and I was trying to speed it up.  When I tried, I started getting weird results.</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $total = 0;\nmy $sum = 0;\n\n# Compute $sum (adds from index 0 forward)\nmy @y = @{$$self{\"closing\"}}[-$periods..-1];\nmy @x = map {${$_}{$what}} @y;\n# map { $sum += $_ } @x;\n$sum += $_ for @x;\n\n# Compute $total (adds from index -1 backward)\n\nfor (my $i = -1; $i &gt;= -$periods; $i--) {\n    $total += ${${$$self{\"closing\"}}[$i]}{$what};\n}\n\nif($total != $sum) {\n    printf(\"SMA($what, $periods) total ($total) != sum ($sum) %g\\n\",\n       ($total - $sum));\n}\n\n# Example output:\n#    SMA(close, 20) total (941.03) != sum (941.03) -2.27374e-13\n</code></pre>\n\n<p>I seem to get different answers when I compute <code>$sum</code> and <code>$total</code>.</p>\n\n<p>The only thing I can think of is that one method adds forward through the array, and the other backward.</p>\n\n<p>Would this cause them to overflow differently?  I would expect so, but it never occurred to me that I would get different answers.  Notice that the difference is small (-2.27374e-13).</p>\n\n<p>Is this what's going on, or is my code busted?</p>\n\n<p>This is perl 5, version 16, subversion 3 (v5.16.3) built for x86_64-linux-thread-multi</p>\n"}, {"tags": ["file", "perl", "binary", "data-conversion"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560950899, "post_id": 56668629, "comment_id": 99905335, "body": "Probably the 10 is taken as a new line character <code>0x0a</code> somehow?"}, {"owner": {"reputation": 190, "user_id": 11135313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9oknouqh8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJOqTlNk8nS49zZMFDBxndERbR5w/mo/photo.jpg?sz=128", "display_name": "dalex78", "link": "https://stackoverflow.com/users/11135313/dalex78"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560951393, "post_id": 56668629, "comment_id": 99905645, "body": "@H&#229;konH&#230;gland, but why is it the only one ? And how to prevent that ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560972237, "post_id": 56668629, "comment_id": 99916480, "body": "Note that the <code>{1}</code> is useless."}, {"owner": {"reputation": 190, "user_id": 11135313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9oknouqh8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJOqTlNk8nS49zZMFDBxndERbR5w/mo/photo.jpg?sz=128", "display_name": "dalex78", "link": "https://stackoverflow.com/users/11135313/dalex78"}, "edited": false, "score": 0, "creation_date": 1561043486, "post_id": 56668629, "comment_id": 99943428, "body": "I know, in other part of my code (not shown above), I have <code>{3}</code>, for more genericity, I keept the <code>{1}</code>. Thanks for the remarks anyway :-)"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1560951406, "creation_date": 1560951406, "answer_id": 56669021, "question_id": 56668629, "link": "https://stackoverflow.com/questions/56668629/problem-converting-a-text-file-into-binary-file-using-perl/56669021#56669021", "title": "Problem converting a text file into binary file using perl", "body": "<p>You need to add the <code>s</code> modifier to the regexp substitution in order to match a 10 (newline) :</p>\n\n<pre><code>$data =~ s/(.{1})/unpack(\"C*\",$1).\".0000 \\n\"/seg;\n</code></pre>\n\n<p>From <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">perldoc perlre</a> :</p>\n\n<blockquote>\n  <p><em>s</em><br>\n   Treat the string as single line. That is, change \".\" to match any\n  character whatsoever, even a newline, which normally it would not\n  match.</p>\n</blockquote>\n"}], "owner": {"reputation": 190, "user_id": 11135313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9oknouqh8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJOqTlNk8nS49zZMFDBxndERbR5w/mo/photo.jpg?sz=128", "display_name": "dalex78", "link": "https://stackoverflow.com/users/11135313/dalex78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 56669021, "answer_count": 1, "score": 1, "last_activity_date": 1560951406, "creation_date": 1560950315, "question_id": 56668629, "link": "https://stackoverflow.com/questions/56668629/problem-converting-a-text-file-into-binary-file-using-perl", "title": "Problem converting a text file into binary file using perl", "body": "<p>I would like to convert some data in binary using Perl. The data needs to be output in 8 bits binary. The original data comes in this format: </p>\n\n<pre><code>137.0000\n136.0000\n133.0000\n136.0000\n10.0000\n134.0000\n0.0000\n132.0000\n132.0000\n</code></pre>\n\n<p>To do so, I transformed the data to suppress the \".0000\" then I use the <code>pack</code> function with the option <code>C*</code> (this format correspond to an \"unsigned character (usually 8 bits)\" according to the documentation). \nI called this file <code>txt2bin.pl</code>:</p>\n\n<pre><code>my $file = $ARGV[0];\nmy $fileout = $file.\".bin\";\n\nif($file eq \"-h\" or $file eq \"-help\" or $file eq \"\")\n{  \n    print \"Usage : txt2bin.pl file_in\\n\";\n    print \"        file_out = file_in.bin\\n\";\n    print \"This script converts a txt file to a binary file\\n\";\n\n}\n\nelse\n{\n  print \"File in = $file\\n\";\n  print \"File out = $fileout\\n\";\n\n  open(FILE,\"&lt;$file\") or die $!;\n  open(FILEOUT,\"&gt;$fileout\") or die $!;\n    binmode FILEOUT;\n    while(defined(my $line=&lt;FILE&gt;))\n    {\n      chomp($line);\n      $line =~ s/\\.0000//;\n      syswrite FILEOUT, pack(\"C*\",$line);\n    }\n  close(FILE);\n  close(FILEOUT);\n}\n</code></pre>\n\n<p>I also need to be able to do the reverse operation, so, I created another file <code>bin2txt.pl</code>:</p>\n\n<pre><code>my $file = $ARGV[0];\nmy $fileout = $file.\".txt\";\n\nif($file eq \"-h\" or $file eq \"-help\" or $file eq \"\")\n{\n    print \"Usage : bin2txt.pl file_in\\n\";\n    print \"        file_out = file_in.txt\\n\";\n    print \"This script converts a binairy file to a txt file\\n\";\n}\n\nelse\n{\n  print \"File in = $file\\n\";\n  print \"File out = $fileout\\n\";\n\n  my $file = \"&lt;$file\";\n\n  # undef $/ to read whole file in one go\n  undef $/;\n\n  open(FILE,$file) or die $!;\n  open(FILEOUT,\"&gt;$fileout\") or die $!;\n\n  # binmode FILE to supress conversion of line endings\n  binmode FILE;\n\n  my $data = &lt;FILE&gt;;\n  $data =~ s/(.{1})/unpack(\"C*\",$1).\".0000 \\n\"/eg;\n  syswrite FILEOUT, $data;\n}\n</code></pre>\n\n<p>However, when I execute the first program <code>txt2bin.pl</code>, then the second, I should get: </p>\n\n<pre><code>137.0000\n136.0000\n133.0000\n136.0000\n10.0000\n134.0000\n0.0000\n132.0000\n132.0000\n</code></pre>\n\n<p>Instead, of that, I get this:</p>\n\n<pre><code>137.0000\n136.0000\n133.0000\n136.0000\n\n134.0000\n0.0000\n132.0000\n132.0000\n</code></pre>\n\n<p>The <code>10.0000</code> does not show up, do you guys have any idea about this ? \nThanks for helping.</p>\n"}, {"tags": ["syntax-error", "filehandle", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1560942069, "post_id": 56665897, "comment_id": 99900071, "body": "Yup, missing something obvious. :)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "edited": false, "score": 0, "creation_date": 1560942373, "post_id": 56666087, "comment_id": 99900226, "body": "Happens to the best of us. Took me a moment to find the right manual too, with the changes going on at perldoc.perl.org at the moment."}, {"owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "edited": false, "score": 0, "creation_date": 1560942540, "post_id": 56666087, "comment_id": 99900314, "body": "Problem was that I actually looked at it before and I didn&#39;t notice the only visible block of code in it. Deary me."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1560941930, "creation_date": 1560941930, "answer_id": 56666087, "question_id": 56665897, "link": "https://stackoverflow.com/questions/56665897/syntax-error-using-a-filehandle-stored-in-a-hash-value/56666087#56666087", "title": "Syntax error using a filehandle stored in a hash value", "body": "<p>You need to wrap the handle in a bare block.</p>\n\n<pre><code>print { $hash{ $field_value } } \"String\";\n</code></pre>\n\n<p>This is documented in the <a href=\"https://perldoc.perl.org/5.30.0/functions/print.html\" rel=\"noreferrer\"><code>print</code> perldoc</a>.</p>\n\n<blockquote>\n  <p>If you're storing handles in an array or hash, or in general whenever\n  you're using any expression more complex than a bareword handle or a\n  plain, unsubscripted scalar variable to retrieve it, you will have to\n  use a block returning the filehandle value instead, in which case the\n  LIST may not be omitted:</p>\n\n<pre><code>print { $files[$i] } \"stuff\\n\";\nprint { $OK ? *STDOUT : *STDERR } \"stuff\\n\";\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 129, "user_id": 198516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75a9db90d3601d39ecee93b3c88ec8f?s=128&d=identicon&r=PG", "display_name": "Fulvio Scapin", "link": "https://stackoverflow.com/users/198516/fulvio-scapin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 56666087, "answer_count": 1, "score": 2, "last_activity_date": 1560941930, "creation_date": 1560941295, "question_id": 56665897, "link": "https://stackoverflow.com/questions/56665897/syntax-error-using-a-filehandle-stored-in-a-hash-value", "title": "Syntax error using a filehandle stored in a hash value", "body": "<p>I am trying, with a one-liner, to write lines read from an input source to different files according to the contents of a field of the line itself.</p>\n\n<p>My method was to use a hash to store the filehandles in order to avoid opening the same file multiple times, adding keys to that hash dynamically once a value for the field which hadn't appeared before is found on a new line read.</p>\n\n<p>However using the hash value which stores the filehandle with a common print/printf call, such as</p>\n\n<pre><code>print $hash{ $field_value } \"String\"\n</code></pre>\n\n<p>results in a compilation error.\nReplacing <code>$hash{ $field_value }</code> with <code>STDERR</code>, for instance, results in a clean compilation.</p>\n\n<p>Below an example with a sample one-liner.</p>\n\n<pre><code>$ cat /tmp/input_file \nmail1.sql:INSERT INTO\nmail2.sql:INSERT INTO\nmail3.sql:INSERT INTO\nmail4.sql:INSERT INTO\nmail6.sql:INSERT INTO\nmail7.sql:INSERT INTO\nmail8.sql:INSERT INTO\nmail9.sql:INSERT INTO\nmaildev.sql:INSERT INTO\n\n$ perl -C -nE '\nm{^(?&lt;server&gt;mail[^.]+)\\.sql:(?&lt;string&gt;INSERT INTO)};\nexists $fd-&gt;{$+{server}} or open($fd-&gt;{$+{server}}, \"&gt;&gt;\", \"/tmp/\". $+{server}.\".tmp.sql\");\nprint sprintf(qq{server %s.domain.tld command %s;\\n}, $+{server}, $+{string});\n' /tmp/input_file \nserver mail1.domain.tld command INSERT INTO;\nserver mail2.domain.tld command INSERT INTO;\nserver mail3.domain.tld command INSERT INTO;\nserver mail4.domain.tld command INSERT INTO;\nserver mail6.domain.tld command INSERT INTO;\nserver mail7.domain.tld command INSERT INTO;\nserver mail8.domain.tld command INSERT INTO;\nserver mail9.domain.tld command INSERT INTO;\nserver maildev.domain.tld command INSERT INTO;\n\n# The files were opened, creating them. print-ing to STDOUT works fine.\n\n$ ls -1  /tmp/mail*sql\n/tmp/mail1.tmp.sql\n/tmp/mail2.tmp.sql\n/tmp/mail3.tmp.sql\n/tmp/mail4.tmp.sql\n/tmp/mail6.tmp.sql\n/tmp/mail7.tmp.sql\n/tmp/mail8.tmp.sql\n/tmp/mail9.tmp.sql\n/tmp/maildev.tmp.sql\n\n# Now using $fd-&gt;{$+{server}} as filehandle for print\n\n$ perl -C -nE '\nm{^(?&lt;server&gt;mail[^.]+)\\.sql:(?&lt;string&gt;INSERT INTO)};\nexists $fd-&gt;{$+{server}} or open($fd-&gt;{$+{server}}, \"&gt;&gt;\", \"/tmp/\". $+{server}.\".tmp.sql\");\nprint $fd-&gt;{$+{server}} sprintf(qq{server %s.domain.tld command %s;\\n}, $+{server}, $+{string});\n' /tmp/input_file\nsyntax error at -e line 4, near \"} sprintf\"\nsyntax error at -e line 5, near \";}\"\nExecution of -e aborted due to compilation errors.\n\n# Simplifying further\n\n$ perl -C -nE '\nmy $a = \"test\";                                      \nexists $fd-&gt;{$a} or open($fd-&gt;{$a}, \"&gt;&gt;\", \"/tmp/\". $a.\".tmp.sql\");\nprint $fd-&gt;{$a} sprintf(qq{AAA %s AAA\\n}, $a);\n' /tmp/input_file\nsyntax error at -e line 4, near \"} sprintf\"\nBEGIN not safe after errors--compilation aborted at -e line 4.\n\n</code></pre>\n\n<p>I've attempted this using perl 5.22 and 5.30, just to check whether it was some kind of bug fixed recently.</p>\n\n<p>Maybe I am missing something obvious, but I can't see what.</p>\n\n<p>Does anyone have an idea?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1560921074, "post_id": 56660050, "comment_id": 99889894, "body": "Btw, if you want to increment then do that, not hard-code a number. (Also, why lookarounds? Just match and discard with <code>\\K</code>)  -- <code>s&#47;[0-9]+\\.[0-9]+\\.\\K([0-9]+)&#47;$1+1&#47;e;</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1560930451, "post_id": 56660050, "comment_id": 99893831, "body": "See  also: <a href=\"https://stackoverflow.com/questions/10221835\">stackoverflow.com/questions/10221835</a>, <a href=\"https://stackoverflow.com/questions/11025114\">stackoverflow.com/questions/11025114</a>, <a href=\"https://stackoverflow.com/questions/25003162\">stackoverflow.com/questions/25003162</a>, <a href=\"https://stackoverflow.com/questions/43987641\">stackoverflow.com/questions/43987641</a>..."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560923294, "post_id": 56660077, "comment_id": 99890552, "body": "You can also do <code>set +H</code> to disable <code>!</code> history expansion in the current shell. And <code>shopt -s histreedit</code> will let you edit a failed history expansion instead of just throwing the typed command away."}], "tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": true, "score": 6, "last_activity_date": 1561139389, "last_edit_date": 1561139389, "creation_date": 1560918607, "answer_id": 56660077, "question_id": 56660050, "link": "https://stackoverflow.com/questions/56660050/perl-regex-command-line-issue/56660077#56660077", "title": "Perl Regex Command Line Issue", "body": "<p>In Bash, <code>!</code> is the \"<a href=\"https://www.gnu.org/software/bash/manual/bash.html#History-Interaction\" rel=\"nofollow noreferrer\">history expansion</a> character\", except when escaped with a backslash or single-quotes. (Double-quotes do <em>not</em> disable this; that is, history expansion is supported inside double-quotes. See <a href=\"https://stackoverflow.com/questions/6697753/difference-between-single-and-double-quotes-in-bash\">Difference between single and double quotes in Bash</a>)</p>\n\n<p>So, just change your double-quotes to single-quotes:</p>\n\n<pre><code>echo 1.41.1 | perl -pe 's/(?![0-9]+\\.[0-9]+\\.)[0-9]$/2/g'\n</code></pre>\n\n<p>and voil&agrave;:</p>\n\n<pre><code>1.41.2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3291, "user_id": 462575, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/524849342/picture?type=large", "display_name": "Allen", "link": "https://stackoverflow.com/users/462575/allen"}, "edited": false, "score": 1, "creation_date": 1560919421, "post_id": 56660081, "comment_id": 99889560, "body": "thanks emma! this works but single quotes would be the more direct route."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3291, "user_id": 462575, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/524849342/picture?type=large", "display_name": "Allen", "link": "https://stackoverflow.com/users/462575/allen"}, "edited": false, "score": 1, "creation_date": 1560921218, "post_id": 56660081, "comment_id": 99889933, "body": "@Allen Um, you have single quotes, too ... but lookarounds are really not needed here"}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 4, "last_activity_date": 1560922635, "last_edit_date": 1560922635, "creation_date": 1560918637, "answer_id": 56660081, "question_id": 56660050, "link": "https://stackoverflow.com/questions/56660050/perl-regex-command-line-issue/56660081#56660081", "title": "Perl Regex Command Line Issue", "body": "<p>I'm guessing that this expression also might work: </p>\n\n<pre><code>([0-9.]+)\\.([0-9]+)\n</code></pre>\n\n<h3>Test</h3>\n\n<pre><code>perl -e'\n    my $name = \"1.41.1\";\n    $name =~ s/([0-9.]+)\\.([0-9]+)/$1\\.2/;\n    print \"$name\\n\";\n    '\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>1.41.2\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/zMrbPd/2/\" rel=\"nofollow noreferrer\">Please see the demo here.</a></h3>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1563959835, "last_edit_date": 1563959835, "creation_date": 1560926817, "answer_id": 56661593, "question_id": 56660050, "link": "https://stackoverflow.com/questions/56660050/perl-regex-command-line-issue/56661593#56661593", "title": "Perl Regex Command Line Issue", "body": "<p>If you want to \"<em>increment</em>\" a number then you can't hard-code the new value but need to capture what is there and increment that</p>\n\n<pre><code>echo \"1.41.1\" | perl -pe's/[0-9]+\\.[0-9]+\\.\\K([0-9]+)/$1+1/e'\n</code></pre>\n\n<p>Here <code>/e</code> modifier makes it so that the replacement side is evaluated as code, and we can <code>+1</code> the captured number, what is then substituted. The <code>\\K</code> drops previous matches so we don't need to put them back; see \"<em>Lookaround Assertions</em>\" <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">in Extended Patterns in perlre</a>.</p>\n\n<p>The lookarounds are sometimes just the thing you want, but they increase the regex complexity (just by being there), can be tricky to get right, and hurt efficiency.  They aren't needed here.</p>\n\n<p>The strange output you get is because the double quotes used around the Perl program \"invite\" the shell to look at what's inside whereby it interprets the <code>!</code> as history expansion and runs that, as explained in ruakh's post.</p>\n"}], "owner": {"reputation": 3291, "user_id": 462575, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/524849342/picture?type=large", "display_name": "Allen", "link": "https://stackoverflow.com/users/462575/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 1, "accepted_answer_id": 56660077, "answer_count": 3, "score": 10, "last_activity_date": 1563959835, "creation_date": 1560918316, "question_id": 56660050, "link": "https://stackoverflow.com/questions/56660050/perl-regex-command-line-issue", "title": "Perl Regex Command Line Issue", "body": "<p>I'm trying to use a negative lookahead in perl in command line:</p>\n\n<pre><code>echo 1.41.1 | perl -pe \"s/(?![0-9]+\\.[0-9]+\\.)[0-9]$/2/g\"\n</code></pre>\n\n<p>to get an incremented version that looks like this:</p>\n\n<pre><code>1.41.2\n</code></pre>\n\n<p>but its just returning me:</p>\n\n<pre><code>![0-9]+\\.[0-9]+\\.: event not found\n</code></pre>\n\n<p>i've tried it in regex101 (PCRE) and it works fine, so im not sure why it doesn't work here</p>\n"}, {"tags": ["perl", "utf-8", "mariadb", "utf8mb4", "dbd"], "comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1560934882, "post_id": 56659131, "comment_id": 99896122, "body": "I&#39;m not familiar with Perl, but it should be either <code>\\u00D6</code> if Perl supports 16-bit escapes, or <code>\\xC3\\x96</code> for the two bytes that make up the UTF-8 encoding."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560955936, "post_id": 56659131, "comment_id": 99908540, "body": "Are you using DBD::MariaDB? Where does the $fullText variable get populated from?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560956036, "post_id": 56659131, "comment_id": 99908598, "body": "Note that while your connection and the database might use utf8mb4 by default, you should also check the table definition as the column itself has the setting on what character set is ultimately used for storage."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560959217, "post_id": 56659131, "comment_id": 99910605, "body": "You would use <code>\\N{U+00D6}</code> to represent the character in a string by the way. Not the UTF-8 encoding (that is the job of the DBI driver and MariaDB)."}, {"owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "edited": false, "score": 0, "creation_date": 1560963254, "post_id": 56659131, "comment_id": 99912415, "body": "make sure you mysql connection setup contains this flag set <code>mysql_enable_utf8</code> or even better <code>mysql_enable_utf8mb4</code>"}, {"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1560979413, "post_id": 56659131, "comment_id": 99919267, "body": "I&#39;ve updated the post to include a little info on the use of quote() prior to performing the INSERT and the connect() function, including the use of &quot;mysql_enable_utf8mb4 =&gt; 1&quot;"}, {"owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "edited": false, "score": 0, "creation_date": 1561051494, "post_id": 56659131, "comment_id": 99947550, "body": "ok. I agree with Rick&#39;s suggestion to first check if you got bogus characters in the database already. also very important: use <code>?</code> syntax to safely insert data, so you write <code>?</code> for value in sql string and pass the values as parameters to <code>execute</code>"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1560978381, "post_id": 56674408, "comment_id": 99918902, "body": "Would you expand on &quot;SELECT HEX(col), col ...&quot; ? Also, I thought I was escaping the $fulltext variable with the backticks? I also believe I&#39;m using mysql_enable_utf8mb4, although I&#39;m not sure. I&#39;ll update the post to include the full DBI-&gt;connect() function."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1560991186, "post_id": 56674408, "comment_id": 99921902, "body": "@AlexRegan - Backtics are uses around column <i>names</i>.  The contents needs things like quotes escaped so you can make a quoted string!"}], "tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1560971989, "last_edit_date": 1560971989, "creation_date": 1560971541, "answer_id": 56674408, "question_id": 56659131, "link": "https://stackoverflow.com/questions/56659131/execute-failed-incorrect-string-value-xd6sterl-with-mariadb-and-perl-dbd/56674408#56674408", "title": "execute failed: Incorrect string value: &#39;\\xD6sterl...&#39; with mariadb and perl DBD", "body": "<p><code>D6</code> is hex for <code>\u00d6</code> in <code>CHARACTER SET latin1</code> (and several others).</p>\n\n<p>You have declared that your client uses <code>UTF-8</code> (utf8mb4) encoding, so it spit at you.</p>\n\n<p>Please provide <code>SELECT HEX(col), col ...</code> to see if the <code>D6</code> got into the database (hence an <em>insert</em> problem) or something else (possibly a fetch/display problem).</p>\n\n<p>Also, you have not quoted your <code>$fulltext</code> string, so you are likely to get all sorts of syntax errors.</p>\n\n<p>Please don't blindly put strings into <code>INSERT</code> statements, but escape them as you put them in.</p>\n\n<p>There may be some useful Perl hint in this:</p>\n\n<pre><code>    use utf8;\n    use open ':std', ':encoding(UTF-8)';\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:\".$dsn, $user, $password, {\n   PrintError =&gt; 0,\n   RaiseError =&gt; 1,\n   mysql_enable_utf8 =&gt; 1,  # Switch to UTF-8 for communication and decode.\n});\n# or {mysql_enable_utf8mb4 =&gt; 1} if using utf8mb4\n</code></pre>\n\n<p>And look for techniques for binding/quoting/escaping.</p>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560979356, "creation_date": 1560909882, "last_edit_date": 1560979356, "question_id": 56659131, "link": "https://stackoverflow.com/questions/56659131/execute-failed-incorrect-string-value-xd6sterl-with-mariadb-and-perl-dbd", "title": "execute failed: Incorrect string value: &#39;\\xD6sterl...&#39; with mariadb and perl DBD", "body": "<p>I'm a novice perl programmer trying to use DBI to write a buffer of text that contains an email with umlauts and other non-ASCII characters to a joomla database and having a problem.</p>\n\n<pre><code>DBD::mysql::st execute failed: Incorrect string value: '\\xD6sterl...' for column `lsv5webstage`.`xuxgc_content`.`fulltext` at row 1 at /home/alerts/scripts_linstage/AdvisoryTest.pm line 373.\n</code></pre>\n\n<p>I'm not familiar enough with how encoding works to fully understand what the problem is. This is a fedora29 system with mariadb-10.3.12 and joomla-3.9.</p>\n\n<p>Apparently the '\\xD6' is an O with an umlaut in \"Sebastian \ufffdsterlund\". I read something about utf8 not being able to handle 4-char, but I don't fully understand.</p>\n\n<p>I found the following reference online which talks about changing the encoding type from utf8 to utf8mb4, but the tables all appear to already be using that encoding:</p>\n\n<pre><code>&gt; SHOW VARIABLES WHERE Variable_name LIKE 'character\\_set\\_%' OR \nVariable_name LIKE 'collation%';\n+--------------------------+--------------------+\n| Variable_name            | Value              |\n+--------------------------+--------------------+\n| character_set_client     | utf8mb4            |\n| character_set_connection | utf8mb4            |\n| character_set_database   | utf8mb4            |\n| character_set_filesystem | binary             |\n| character_set_results    | utf8mb4            |\n| character_set_server     | utf8mb4            |\n| character_set_system     | utf8               |\n| collation_connection     | utf8mb4_unicode_ci |\n| collation_database       | utf8mb4_unicode_ci |\n| collation_server         | utf8mb4_unicode_ci |\n+--------------------------+--------------------+\n</code></pre>\n\n<p>I'm not sure it's helpful, but this is the insert statement I'm using in my perl code:</p>\n\n<pre><code>    my $sql                 = &lt;&lt;EOF;\n    INSERT INTO xuxgc_content (title, alias, introtext, `fulltext`, state, catid, created, created_by, created_by_alias, modified, modified_by, checked_out, checked_out_time, publish_up, publish_down, images, urls, attribs, version, ordering, metakey, metadesc, metadata, access, hits, language)\n    VALUES ($title, \"$title_alias\", $introText, $fullText, $state, $catid, $created, $created_by, $created_by_alias, $modified, $modified_by, $checked_out, $checked_out_time, $publish_up, $publish_down, $images, $urls, $attribs, $version, $ordering, $metakey, $metadesc, $metadata, $access, $hits, $language);\n    EOF\n\n    my $sth = $dbh-&gt;prepare($sql);\n    $sth-&gt;execute();\n    db_disconnect($dbh);\n</code></pre>\n\n<p>The $fullText variable is populated from a buffer that contains the body of the email. I'm running it through quote() before performing the INSERT. </p>\n\n<pre><code>$fullText       = $dbh-&gt;quote($fullText);\n</code></pre>\n\n<p>I also tried using \"SET NAMES utf8mb4;INSERT INTO Mytable ...;\" and it just didn't like the format.</p>\n\n<p>Here's the full function that's used to connect to the database:</p>\n\n<pre><code>sub db_connect () {\n  my %DB        = (\n    'host'  =&gt; 'myhost',\n    'db'    =&gt; 'mydb',\n    'user'  =&gt; 'myuser',\n    'pass'  =&gt; 'mypass',\n  );\n\n  return DBI-&gt;connect(\"DBI:mysql:database=$DB{'db'};host=$DB{'host'}\", $DB{'user'}, $DB{'pass'}, { mysql_enable_utf8mb4 =&gt; 1 });\n }\n</code></pre>\n\n<p>I don't recall having this problem in the past, and this script has been in use for quite a while.</p>\n"}, {"tags": ["perl", "http", "http-proxy"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11665250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b18f05fe9131973697b366ed3293e13b?s=128&d=identicon&r=PG&f=1", "display_name": "Dougie O", "link": "https://stackoverflow.com/users/11665250/dougie-o"}, "edited": false, "score": 0, "creation_date": 1560960368, "post_id": 56657721, "comment_id": 99911177, "body": "So, to be clear, are you saying the proxy itself needs to be configured for SSL, or the protocol in the just needs to be changed in the proxy declaration? If i just change the proxy declaration to            <code>$ua-&gt;proxy(&#39;https&#39;, &#39;http:&#47;&#47;localhost:3128&#47;&#39;); </code>  I get a 500 back and see        <code>1560959645.942 0 ::1 TCP_DENIED&#47;407 4127 CONNECT stackoverflow.com:443 - HIER_NONE&#47;- text&#47;html</code>  in the logs.  An earlier version I had written was printing out <code>500 establishing SSL tunnel failed: 407 Proxy Authentication Required</code>  but I don&#39;t remember how I got that to print out."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3, "user_id": 11665250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b18f05fe9131973697b366ed3293e13b?s=128&d=identicon&r=PG&f=1", "display_name": "Dougie O", "link": "https://stackoverflow.com/users/11665250/dougie-o"}, "edited": false, "score": 0, "creation_date": 1560960670, "post_id": 56657721, "comment_id": 99911328, "body": "@DougieO: The line you cite shows a 407 response from the proxy, i.e. authentication required for the proxy. To specify credentials for the proxy use <code>http:&#47;&#47;user:pass@localhost:3128&#47;</code> syntax."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1560896092, "creation_date": 1560896092, "answer_id": 56657721, "question_id": 56657530, "link": "https://stackoverflow.com/questions/56657530/perl-http-request-skips-proxy-server-and-connects-to-target-directly/56657721#56657721", "title": "Perl HTTP request skips proxy server and connects to target directly", "body": "<pre><code>$ua-&gt;proxy('http', 'http://localhost:3128/');\nmy $req = HTTP::Request-&gt;new('GET', 'https://stackoverflow.com');\n</code></pre>\n\n<p>Given that you access a <code>https://</code>  URL you need to set the proxy for the protocol <code>https</code>, not <code>http</code> as you did.</p>\n\n<pre><code>$ENV{'HTTP_PROXY'} = 'http://localhost:3128/';\n</code></pre>\n\n<p>This setting is only used if you explicitly enable proxy setting by environment, i.e. <code>$ua-&gt;env_proxy</code>. Moreover the setting should be for <code>HTTPS_PROXY</code> not <code>HTTP_PROXY</code> here too.</p>\n"}], "owner": {"reputation": 3, "user_id": 11665250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b18f05fe9131973697b366ed3293e13b?s=128&d=identicon&r=PG&f=1", "display_name": "Dougie O", "link": "https://stackoverflow.com/users/11665250/dougie-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 56657721, "answer_count": 1, "score": 0, "last_activity_date": 1560896092, "creation_date": 1560894790, "question_id": 56657530, "link": "https://stackoverflow.com/questions/56657530/perl-http-request-skips-proxy-server-and-connects-to-target-directly", "title": "Perl HTTP request skips proxy server and connects to target directly", "body": "<p>I'm trying to write a perl script to pull data from a web address through a Squid proxy server. I have Squid server running on CentOS7, listening on port 3128 and authenticating with <code>/usr/lib64/squid/basic_ncsa_auth</code>. However, I keep getting perl seems to bypass the proxy entirely and connects to the target directly. </p>\n\n<p>I was able to do this through curl but not with perl.</p>\n\n<p>I have rewritten my perl script several ways. I've updated perl versions (currently on 5.28). </p>\n\n<pre><code>\nuse LWP::UserAgent;\n\n$ENV{'HTTP_PROXY'} = 'http://localhost:3128/';\n$ENV{'HTTP_PROXY_USERNAME'} = 'user1';\n$ENV{'HTTP_PROXY_PASSWORD'} = 'password1';\n\n$ua = LWP::UserAgent-&gt;new();\n\n$ua-&gt;proxy('http', 'http://localhost:3128/');\n\nmy $req = HTTP::Request-&gt;new('GET', 'https://stackoverflow.com');\n\n$req-&gt;proxy_authorization_basic(\"user1\", \"password1\");\nmy $res = $ua-&gt;request($req);\n\nprint $res-&gt;code .\"\\n\";\n</code></pre>\n\n<p>So, the above code produces a '200' however, I see no entry in my squid access logs. When I attempt the maneuver in curl </p>\n\n<p><code>curl --proxy-user user1:password1 -x http://localhost:3128 https://stackoverflow.com)</code> </p>\n\n<p>I get </p>\n\n<p><code>1560893906.291    513 ::1 TCP_TUNNEL/200 270148 CONNECT stackoverflow.com:443 user1 HIER_DIRECT/151.101.65.69 -</code> </p>\n\n<p>in the access log. </p>\n\n<p>Obviously, there's some step that I'm missing, but I've copied examples from the perl documentation and was unable to get it to work.</p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1560892169, "post_id": 56656989, "comment_id": 99884070, "body": "Do you have any documentation for this format? It would be helpful to see something describing the &quot;EBCDIC timestamp&quot; instead of trying to reverse-engineer it from code that doesn&#39;t work."}, {"owner": {"reputation": 23, "user_id": 11666804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc76d45cc334b3810e310d31138e314?s=128&d=identicon&r=PG", "display_name": "Marcelo Miranda", "link": "https://stackoverflow.com/users/11666804/marcelo-miranda"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1560893907, "post_id": 56656989, "comment_id": 99884649, "body": "<a href=\"http://www.pacsys.com/mainframe-topics/stck_abstime.htm\" rel=\"nofollow noreferrer\">pacsys.com/mainframe-topics/stck_abstime.htm</a>  STCKTIME \tFields defined with this type just contain the results of the hardware STCK instruction. It is a 8-byte binary number of &quot;CPU timer units&quot; since midnight GMT 1/1/900.  Calculations where copied from a COBOL code and from Natural/Adabas code."}, {"owner": {"reputation": 23, "user_id": 11666804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc76d45cc334b3810e310d31138e314?s=128&d=identicon&r=PG", "display_name": "Marcelo Miranda", "link": "https://stackoverflow.com/users/11666804/marcelo-miranda"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1560894271, "post_id": 56656989, "comment_id": 99884760, "body": "In Natural I have an API that do the conversion for me: <code>Function  Conversion  S     Store clock into date, time and microseconds Function ...... S Store clock ... D508FF8D00000000 Result: Time .......... 2018-10-05 18:46:22.1 Microseconds .. 3747753982164992</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11666804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc76d45cc334b3810e310d31138e314?s=128&d=identicon&r=PG", "display_name": "Marcelo Miranda", "link": "https://stackoverflow.com/users/11666804/marcelo-miranda"}, "edited": false, "score": 0, "creation_date": 1560896057, "post_id": 56657619, "comment_id": 99885217, "body": "That is exactly what I want! Thanks so much."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1560899490, "post_id": 56657619, "comment_id": 99885995, "body": "You might need timegm if it&#39;s from 1900 GMT and not local time. Then use localtime or gmtime depending which time zone you want the result in."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560924380, "post_id": 56657619, "comment_id": 99890929, "body": "Yeah, the docs linked by an earlier comment suggest <code>timegm</code> should be used instead of <code>timelocal</code>."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 4, "last_activity_date": 1560895370, "creation_date": 1560895370, "answer_id": 56657619, "question_id": 56656989, "link": "https://stackoverflow.com/questions/56656989/perl-milliseconds-to-datetime/56657619#56657619", "title": "Perl: Milliseconds to Date+Time", "body": "<p>You need to get the time value for 1900-01-01 and use it as your epoch:</p>\n\n<pre><code>use Time::Local;\n\nmy $epoch = timelocal(0,0,0,1,0,1900);\n\nmy $ms = 3747753982164.99;\nmy $time = $ms / 1000;\n\nprint scalar localtime $epoch + $time, \"\\n\";\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>Fri Oct  5 19:16:05 2018\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1560907738, "creation_date": 1560907738, "answer_id": 56658929, "question_id": 56656989, "link": "https://stackoverflow.com/questions/56656989/perl-milliseconds-to-datetime/56658929#56658929", "title": "Perl: Milliseconds to Date+Time", "body": "<p>Since you were using DateTime,</p>\n\n<pre><code>my $dt = DateTime-&gt;new( year =&gt; 1900, time_zone =&gt; \"UTC\" );\n$dt-&gt;add( seconds =&gt; 3747753982164.99 / 1000 );\nsay $dt-&gt;strftime(\"%Y-%m-%dT%H:%M:%S.%06N%z\");  # 2018-10-05T18:45:55.000000+0000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 2, "last_activity_date": 1561315000, "creation_date": 1561315000, "answer_id": 56726811, "question_id": 56656989, "link": "https://stackoverflow.com/questions/56656989/perl-milliseconds-to-datetime/56726811#56726811", "title": "Perl: Milliseconds to Date+Time", "body": "<p>The conversions as translated from another language are far more complicated than needed. Building on ikegami's answer and the link provided in a comment, this works end-to-end:</p>\n\n<pre><code>use DateTime;\nmy $micros = hex(substr $updt_time, 0, 13);\nmy $dt = DateTime-&gt;new(year =&gt; 1900, time_zone =&gt; \"UTC\");\n$dt-&gt;add(seconds =&gt; $micros / 1e6);\nsay $dt-&gt;strftime(\"%Y-%m-%dT%H:%M:%S.%06N%z\"); # 2018-10-05T18:45:55.000000+0000\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11666804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc76d45cc334b3810e310d31138e314?s=128&d=identicon&r=PG", "display_name": "Marcelo Miranda", "link": "https://stackoverflow.com/users/11666804/marcelo-miranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "accepted_answer_id": 56726811, "answer_count": 3, "score": 2, "last_activity_date": 1561315000, "creation_date": 1560891680, "last_edit_date": 1560891771, "question_id": 56656989, "link": "https://stackoverflow.com/questions/56656989/perl-milliseconds-to-datetime", "title": "Perl: Milliseconds to Date+Time", "body": "<p>I am trying to convert a variable in Perl that contains milliseconds to date/time format.\nThe catch is that variable came from mainframe TIMESTAMP that can not be converted by Unix/Linux because the duration, if I am not mistaken, starts in 1900-01-01 00:00:00.\nThanks in advance.</p>\n\n<p>perl:</p>\n\n<pre><code>my $milli_secs = ((hex(unpack('H*', substr($updt_time,0,3))) * 1099511627776) +\n              (hex(unpack('H*', substr($updt_time,3,3))) * 65536) +\n              (hex(unpack('H*', substr($updt_time,6,2)))));\n$milli_secs = $milli_secs / 16;\n$milli_secs = ($milli_secs * 3.90625) / 1000000;\nprint \"$milli_secs\\n\";\nmy $tp = DateTime-&gt;from_epoch( epoch =&gt; $milli_secs );\nprint \"Date ==&gt; $tp\\n\";\n</code></pre>\n\n<p>Result:\n3747753982164.99\nDate ==> 120731-08-07T04:49:24</p>\n\n<p>My variables:\nEBCDIC timestamp: D508FF8D00000000\nWith some calculations I have:\nNano seconds: 3.74775398216499e+18\nMilliseconds: 3747753982164.99</p>\n\n<p>Which should give me (I think):\n2018-10-05 18:46:22.1</p>\n"}, {"tags": ["python-3.x", "perl", "comparison"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1560895196, "creation_date": 1560895196, "answer_id": 56657591, "question_id": 56656962, "link": "https://stackoverflow.com/questions/56656962/convert-perl-to-python3/56657591#56657591", "title": "Convert perl to python3", "body": "<p>Here is an example in Python 3:</p>\n\n<pre><code>import os\nimport re\n\nwith open( \"file.name.txt\") as fp:\n    for line in fp:\n        name = line.rstrip()\n        name = re.sub(r'\\.Q20L20\\.fq\\.gz', '', name)\n        with open(name + '.sh', 'w') as fpw:\n            fpw.write(\"#!/bin/bash\" + os.linesep)\n            fpw.write(\"tophat2 -output -input {}.Q20L20.fq.gz\".format(name));\n        print(name)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11596095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9567d0a08ee722045c8ee1ac8e486447?s=128&d=identicon&r=PG&f=1", "display_name": "ghv8", "link": "https://stackoverflow.com/users/11596095/ghv8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 56657591, "answer_count": 1, "score": -2, "last_activity_date": 1560895196, "creation_date": 1560891550, "question_id": 56656962, "link": "https://stackoverflow.com/questions/56656962/convert-perl-to-python3", "title": "Convert perl to python3", "body": "<p>I am trying to re-create a perl code into python3 code. I do not have enough python expertise to do it. Thanks in advance.</p>\n\n<p>I tried (in python) to split() and other thing but I am getting no where. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(FILE,\"file.name.txt\") or die;\nwhile(&lt;FILE&gt;){\n    chomp;\n    my $name = $_;\n    $name =~ s/\\.Q20L20\\.fq\\.gz//;\n    open(OUT,\"&gt;$name.sh\") or die;\n    print OUT \"#!/bin/bash\\n\";\n    print OUT \"tophat2 -output -input $name.Q20L20.fq.gz\";\n    print $name;\n    close OUT;\n }\n close FILE;\n</code></pre>\n\n<p>the perl script works great but i can't make it into Python</p>\n"}, {"tags": ["linux", "shell", "perl", "unix"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560874609, "post_id": 56653212, "comment_id": 99876482, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560875160, "post_id": 56653212, "comment_id": 99876737, "body": "You are expected to make an effort. Also see <a href=\"https://www.joelonsoftware.com/2018/04/23/strange-and-maddening-rules/\" rel=\"nofollow noreferrer\">Strange and maddening rules</a> and <a href=\"https://meta.stackexchange.com/q/158289\">Why is the \u201chow to move the turtle in logo\u201d question closed?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1560937705, "creation_date": 1560937705, "answer_id": 56664785, "question_id": 56653212, "link": "https://stackoverflow.com/questions/56653212/filtering-files-with-the-given-range-of-inputin-perl/56664785#56664785", "title": "Filtering files with the given range of inputin perl", "body": "<p>It's easy enough to generate a list of the timestamps that you're interested in. In this code, I've used <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> which has been part of the standard Perl distribution since version 5.10 in 2007.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\nuse Time::Seconds;\n\n@ARGV == 2 or die \"Usage: $0 &lt;start&gt; &lt;end&gt;\\n\";\n\nmy ($start_str, $end_str) = @ARGV;\n\nmy $format = '%Y%m%d%H';\n\nmy $start = Time::Piece-&gt;strptime($start_str, $format);\nmy $end   = Time::Piece-&gt;strptime($end_str,   $format);\n\nmy $curr  = $start;\n\nwhile ($curr &lt;= $end) {\n  say $curr-&gt;strftime($format);\n  $curr += ONE_HOUR;\n}\n</code></pre>\n\n<p>This might give you problems over a period where daylight saving time either starts or ends. Fixing that is left as an exercise for the reader :-)</p>\n"}], "owner": {"reputation": 9, "user_id": 8651169, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0fulHFmfUnQ/AAAAAAAAAAI/AAAAAAAAADg/HvFLKPfN_Q8/photo.jpg?sz=128", "display_name": "harish", "link": "https://stackoverflow.com/users/8651169/harish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1560938818, "answer_count": 1, "score": -5, "last_activity_date": 1560937705, "creation_date": 1560874389, "question_id": 56653212, "link": "https://stackoverflow.com/questions/56653212/filtering-files-with-the-given-range-of-inputin-perl", "closed_reason": "Not suitable for this site", "title": "Filtering files with the given range of inputin perl", "body": "<p>The perl script which takes an input i.e name of the file, I need to find all the files that matches with that pattern.</p>\n\n<pre><code>Example: given input as 2019052300 2019052323 (YYYYMMDDHH)\n</code></pre>\n\n<p>Here, I need to fetch all the files that named with 2019052300 to 2019052323. like 2019052300,2019052301.. 2019052323.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560866897, "post_id": 56650675, "comment_id": 99871816, "body": "Try include the current directory in the module search path: <code>use lib &#39;.&#39;</code>. See also <a href=\"https://stackoverflow.com/q/46549671/2173773\">Doesn&#39;t Perl include current directory in @INC by default?</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560874578, "post_id": 56650675, "comment_id": 99876470, "body": "@H&#229;konH&#230;gland: You should expand that into an answer. I bet it&#39;s the correct solution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560887002, "post_id": 56650675, "comment_id": 99881944, "body": "@H&#229;kon H&#230;gland, You should read the page you linked, seeing as it explains that <code>use lib &#39;.&#39;;</code> is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1560886880, "post_id": 56653617, "comment_id": 99881890, "body": "Re &quot;<i>Case is significant.</i>&quot;, Technically, <code>use Student;</code> + <code>package Student;</code> + &#39;student.pm` will work on a case-insensitive file system. But I agree that the file <i>should</i> be named <code>Student.pm</code> even if it&#39;s not required."}, {"owner": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561025095, "post_id": 56653617, "comment_id": 99932810, "body": "If both files are in different directories, is there any changes to be made from the above program."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561025252, "post_id": 56653617, "comment_id": 99932900, "body": "@Ekanvitha Yes if for example <code>Student.pm</code> is in directory <code>lib</code> relative to <code>person.pl</code> you need <code>use lib &quot;${RealBin}&#47;lib&quot;</code>"}, {"owner": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561029280, "post_id": 56653617, "comment_id": 99935065, "body": "I have saved student.pm in D:\\Ekanvitha\\modules and Student.pl in D:\\Ekanvitha\\perl. I have added like this use lib &quot; ${RealBin}\\Ekanvitha\\modules&quot;; error is displaying as Useless use of \\E at D:\\Ekanvitha\\perl\\student.pl line 6. Unrecognized escape \\m passed through at D:\\Ekanvitha\\perl\\student.pl line 6. Global symbol &quot;$RealBin&quot; requires explicit package name (did you forget to declare &quot;my $RealBin&quot;?) at D:\\Ekanvitha\\perl\\student.pl line 6. BEGIN not safe after errors--compilation aborted at D:\\Ekanvitha\\perl\\student.pl line 6."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561030484, "post_id": 56653617, "comment_id": 99935648, "body": "@Ekanvitha If you use backslashes in the path, you would need to escape them. Alternatively, you could try <code>use lib ($RealBin . &#39;\\..\\modules&#39;);</code> since single quotes do not interpret backslash escape sequences"}, {"owner": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561031473, "post_id": 56653617, "comment_id": 99936154, "body": "I&#39;m facing this error -Global symbol &quot;$RealBin&quot; requires explicit package name (did you forget to declare &quot;my $RealBin&quot;?) at D:\\Ekanvitha\\perl\\student.pl line 6. BEGIN not safe after errors--compilation aborted at D:\\Ekanvitha\\perl\\student.pl line 6."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "edited": false, "score": 0, "creation_date": 1561031753, "post_id": 56653617, "comment_id": 99936307, "body": "@Ekanvitha Could you send me the code you are working on? Then I will have a look at it. You can find my email in my profile."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1560886947, "last_edit_date": 1560886947, "creation_date": 1560876046, "answer_id": 56653617, "question_id": 56650675, "link": "https://stackoverflow.com/questions/56650675/how-to-install-package-modulesmanually-in-activeperl/56653617#56653617", "title": "How to install package modules(manually) in activeperl", "body": "<p>To load a module in the current directory, add the current directory to the module search path <code>@INC</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse FindBin qw( $RealBin );  # The script's directory.\nuse lib $RealBin;            # Look for modules there.\nuse Student; \nmy $object = Student-&gt;new( \"Ram\", \"3th\");\n</code></pre>\n\n<p>Also note that the module name should be <code>Student.pm</code> and not <code>student.pm</code>. Case is significant.</p>\n\n<pre><code> package Student;\n use Exporter qw(import);\n our @EXPORT = qw(); \n sub new   {  \n     my $class = shift;  \n     my $self = {  \n         _name =&gt; shift,  \n         _rank  =&gt; shift,     \n     };  \n\n     print \"Student's name is $self-&gt;{_name}\\n\";  \n     print \"Student's rank is $self-&gt;{_rank}\\n\";  \n\n     bless $self, $class;  \n     return $self;  \n }  \n\n 1;  \n</code></pre>\n\n<p><strong>NOTES</strong>:</p>\n\n<ul>\n<li><p><code>new Student</code> is the old way of instantiating an object (using so-called indirect object notation). The recommended way is now <code>Student-&gt;new(...)</code></p></li>\n<li><p><code>our @EXPORT =('new')</code>: You do not need to export <code>new</code> and it is usually a mistake to do so. Since object creation should be qualified by the module name, it does not make sense to export <code>new</code>.</p></li>\n<li><p><code>require Exporter; use vars qw(@ISA @EXPORT); @ISA = qw(Exporter);</code> is old style. Better to write <code>use Exporter qw(import)</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 25, "user_id": 11130057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5d5fc7f183e98a174d850087c2e23a?s=128&d=identicon&r=PG&f=1", "display_name": "Ekanvitha", "link": "https://stackoverflow.com/users/11130057/ekanvitha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1560887045, "accepted_answer_id": 56653617, "answer_count": 1, "score": 0, "last_activity_date": 1560886947, "creation_date": 1560865561, "question_id": 56650675, "link": "https://stackoverflow.com/questions/56650675/how-to-install-package-modulesmanually-in-activeperl", "closed_reason": "Duplicate", "title": "How to install package modules(manually) in activeperl", "body": "<p>I'm working on an example in perl in oops concept.I'm unable to install the perl package modules.</p>\n\n<p>This file is saved with student.pm  </p>\n\n<pre><code> package Student;\n require Exporter;\n use vars qw(@ISA @EXPORT);\n @ISA = qw(Exporter);\n our @EXPORT =('new'); \n sub new   \n {  \n     my $class = shift;  \n     my $self = {  \n         _name =&gt; shift,  \n         _rank  =&gt; shift,     \n     };  \n\n     print \"Student's name is $self-&gt;{_name}\\n\";  \n     print \"Student's rank is $self-&gt;{_rank}\\n\";  \n\n     bless $self, $class;  \n     return $self;  \n }  \n\n 1;  \n</code></pre>\n\n<p>This file is saves with person.pl</p>\n\n<pre><code>  use Student; \n  $object = new Student( \"Ram\", \"3th\");  \n</code></pre>\n\n<p>I'm getting error message like this\nCan't locate Student.pm in @INC (you may need to install the Student module) (@INC contains: C:/Perl64/site/lib C:/Perl64/lib)........</p>\n"}, {"tags": ["python", "windows", "perl", "nlp", "summarization"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5619835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d6a97c62e699eaa175f7d74848b9ad?s=128&d=identicon&r=PG&f=1", "display_name": "mulaixi", "link": "https://stackoverflow.com/users/5619835/mulaixi"}, "edited": false, "score": 0, "creation_date": 1567684185, "post_id": 57558462, "comment_id": 102041337, "body": "Thanks for your answer, I have tried what you said but It didn&#39;t make any difference. And also it can read the plain text files, and it has its own script to convert them to the ROUGE format. But what I did was realizing it was about Perl installation, I did all the steps related to Perl again, now seems like working. <a href=\"https://github.com/bheinzerling/pyrouge/issues/9\" rel=\"nofollow noreferrer\">by the help of this</a>"}], "tags": [], "owner": {"reputation": 407, "user_id": 7554387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d34a3bb1c495a186861f6414dbe8374?s=128&d=identicon&r=PG&f=1", "display_name": "sk_462", "link": "https://stackoverflow.com/users/7554387/sk-462"}, "is_accepted": false, "score": 0, "last_activity_date": 1566223722, "creation_date": 1566223722, "answer_id": 57558462, "question_id": 56650274, "link": "https://stackoverflow.com/questions/56650274/filenotfounderror-while-trying-to-run-pyrouge/57558462#57558462", "title": "&#39;FileNotFoundError&#39; while trying to run pyrouge", "body": "<p>I had a similar issue. The first error is caused if the path is not set properly.</p>\n\n<blockquote>\n  <p>D:\\study\\ROUGE-1.5.5\\ROUGE-1.5.5.pl -e D:\\study\\ROUGE-1.5.5\\data -c 95 -2 -1 -U -r 1000 -n 4 -w 1.2 -a -m C:\\Users\\admin\\AppData\\Local\\Temp\\tmpirzhwufa\\rouge_conf.xml</p>\n</blockquote>\n\n<p>Make sure the rouge paths are added in the environment variables and the cmd/terminal recognizes the path. </p>\n\n<p>The second error may be due to some error in formatting of the decoded/reference sentences. The sentences must be in separate lines. You can check the processed output in the saved temp directory. It must be of the following structure:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;dummy title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor=\"white\"&gt;\n&lt;a name=\"1\"&gt;[1]&lt;/a&gt; &lt;a href=\"#1\" id=1&gt;sentence 1&lt;/a&gt;\n&lt;a name=\"2\"&gt;[2]&lt;/a&gt; &lt;a href=\"#2\" id=2&gt;sentence 2&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5619835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d6a97c62e699eaa175f7d74848b9ad?s=128&d=identicon&r=PG&f=1", "display_name": "mulaixi", "link": "https://stackoverflow.com/users/5619835/mulaixi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567688048, "creation_date": 1560864426, "last_edit_date": 1567688048, "question_id": 56650274, "link": "https://stackoverflow.com/questions/56650274/filenotfounderror-while-trying-to-run-pyrouge", "title": "&#39;FileNotFoundError&#39; while trying to run pyrouge", "body": "<p>I've been trying to install Python package <strong>pyrouge</strong> for a while. Finally by following all these steps <a href=\"https://stackoverflow.com/a/47045437/5619835\">here</a> I installed. It was the most helpful answer related to pyrouge I have seen so far. It does not give any error, I can import <code>Rouge155</code> successfully. However when I try to do the same test as in step 8(with the same code), I got  <code>FileNotFoundError</code>. I compared the given output in the answer and my output, and I think it can not find the file 'rouge_conf.xml'. I checked, the file was created. Since I don't have enough rep, I can not ask this as a comment, so I have to open a new question. Do you know what is the problem exactly, and how to fix? (win10, python 3.7). Thanks in advance for any help. </p>\n\n<p>This is the error I get(you can compare with the link):</p>\n\n<pre><code>2019-06-18 21:14:14,361 [MainThread  ] [INFO ]  Writing summaries.\n2019-06-18 21:14:14,362 [MainThread  ] [INFO ]  Processing summaries. Saving system files to C:\\Users\\admin\\AppData\\Local\\Temp\\tmp86sm5x3u\\system and model files to C:\\Users\\admin\\AppData\\Local\\Temp\\tmp86sm5x3u\\model.\n2019-06-18 21:14:14,363 [MainThread  ] [INFO ]  Processing files in systems.\n2019-06-18 21:14:14,363 [MainThread  ] [INFO ]  Processing text.001.txt.\n2019-06-18 21:14:14,365 [MainThread  ] [INFO ]  Saved processed files to C:\\Users\\admin\\AppData\\Local\\Temp\\tmp86sm5x3u\\system.\n2019-06-18 21:14:14,366 [MainThread  ] [INFO ]  Processing files in references.\n2019-06-18 21:14:14,367 [MainThread  ] [INFO ]  Processing text.A.001.txt.\n2019-06-18 21:14:14,369 [MainThread  ] [INFO ]  Saved processed files to C:\\Users\\admin\\AppData\\Local\\Temp\\tmp86sm5x3u\\model.\n2019-06-18 21:14:14,374 [MainThread  ] [INFO ]  Written ROUGE configuration to C:\\Users\\admin\\AppData\\Local\\Temp\\tmpirzhwufa\\rouge_conf.xml\n2019-06-18 21:14:14,374 [MainThread  ] [INFO ]  Running ROUGE with command perl  D:\\study\\ROUGE-1.5.5\\ROUGE-1.5.5.pl -e D:\\study\\ROUGE-1.5.5\\data -c 95 -2 -1 -U -r 1000 -n 4 -w 1.2 -a -m C:\\Users\\admin\\AppData\\Local\\Temp\\tmpirzhwufa\\rouge_conf.xml\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-21-732ec1e402fb&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/admin/Desktop/somefolder/untitled0.py', wdir='C:/Users/admin/Desktop/somefolder')\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py\", line 827, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py\", line 110, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"C:/Users/admin/Desktop/somefolder/untitled0.py\", line 16, in &lt;module&gt;\n    output = r.convert_and_evaluate()\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\pyrouge-0.1.3-py3.7.egg\\pyrouge\\Rouge155.py\", line 368, in convert_and_evaluate\n    rouge_output = self.evaluate(system_id, rouge_args)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\pyrouge-0.1.3-py3.7.egg\\pyrouge\\Rouge155.py\", line 343, in evaluate\n    rouge_output = check_output(command, env=env).decode(\"UTF-8\")\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 395, in check_output\n    **kwargs).stdout\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 472, in run\n    with Popen(*popenargs, **kwargs) as process:\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py\", line 143, in __init__\n    super(SubprocessPopen, self).__init__(*args, **kwargs)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 775, in __init__\n    restore_signals, start_new_session)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 1178, in _execute_child\n    startupinfo)\n\nFileNotFoundError: [WinError 2] The system cannot find the file specified \n</code></pre>\n\n<p><strong>Edit:</strong> Today, I ran the same code again, weirdly the error changed to <code>CalledProcessError</code>. Which is the same error written <a href=\"https://github.com/bheinzerling/pyrouge/issues/30\" rel=\"nofollow noreferrer\">here</a>. Here is the output:</p>\n\n<pre><code>2019-06-19 16:00:15,115 [MainThread  ] [INFO ]  Writing summaries.\n... The same as the first one...\n2019-06-19 16:00:15,129 [MainThread  ] [INFO ]  Running ROUGE with command perl  D:\\study\\ROUGE-1.5.5\\ROUGE-1.5.5.pl -e D:\\study\\ROUGE-1.5.5\\data -c 95 -2 -1 -U -r 1000 -n 4 -w 1.2 -a -m C:\\Users\\admin\\AppData\\Local\\Temp\\tmpgyd8zauc\\rouge_conf.xml\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-2-732ec1e402fb&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/admin/Desktop/somefolder/untitled0.py', wdir='C:/Users/admin/Desktop/somefolder')\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py\", line 827, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\spyder_kernels\\customize\\spydercustomize.py\", line 110, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"C:/Users/admin/Desktop/somefolder/untitled0.py\", line 16, in &lt;module&gt;\n    output = r.convert_and_evaluate()\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\pyrouge-0.1.3-py3.7.egg\\pyrouge\\Rouge155.py\", line 368, in convert_and_evaluate\n    rouge_output = self.evaluate(system_id, rouge_args)\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\site-packages\\pyrouge-0.1.3-py3.7.egg\\pyrouge\\Rouge155.py\", line 343, in evaluate\n    rouge_output = check_output(command, env=env).decode(\"UTF-8\")\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 395, in check_output\n    **kwargs).stdout\n\n  File \"C:\\Users\\admin\\Anaconda3\\lib\\subprocess.py\", line 487, in run\n    output=stdout, stderr=stderr)\n\nCalledProcessError: Command '['perl ', 'D:\\\\study\\\\ROUGE-1.5.5\\\\ROUGE-1.5.5.pl', '-e', 'D:\\\\study\\\\ROUGE-1.5.5\\\\data', '-c', '95', '-2', '-1', '-U', '-r', '1000', '-n', '4', '-w', '1.2', '-a', '-m', 'C:\\\\Users\\\\admin\\\\AppData\\\\Local\\\\Temp\\\\tmpgyd8zauc\\\\rouge_conf.xml']' returned non-zero exit status 255.\n</code></pre>\n"}, {"tags": ["perl", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 1, "creation_date": 1560871052, "post_id": 56650427, "comment_id": 99874563, "body": "no, it&#39;s not a question of stacktrace. I need to print name of each function immediately after it was executed. I can&#39;t use stacktrace since it may not reach moment of printing it."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1560864822, "creation_date": 1560864822, "answer_id": 56650427, "question_id": 56648503, "link": "https://stackoverflow.com/questions/56648503/is-it-possible-to-run-only-particular-sub-under-debugger/56650427#56650427", "title": "Is it possible to run only particular sub under debugger?", "body": "<p>Is this just a question about how to produce a stack trace? You don't need the debugger for that.</p>\n\n<pre><code>use Carp;\nsub bar {\n    Carp::cluck(\"entering main::bar\");\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1560878320, "last_edit_date": 1560878320, "creation_date": 1560874130, "answer_id": 56653160, "question_id": 56648503, "link": "https://stackoverflow.com/questions/56648503/is-it-possible-to-run-only-particular-sub-under-debugger/56653160#56653160", "title": "Is it possible to run only particular sub under debugger?", "body": "<p>You would benefit from converting your script to a modulino.</p>\n\n<p>The problem you are experiencing is that <code>foo()</code> is called directly as soon as Perl enters runtime. But this is not the behavior you desire from a debugging perspective.</p>\n\n<p>The purpose of a modulino is to allow the bulk of the code to be treated as an embedded module, and to allow the startup or kickoff code to only run if the script is run directly, but to not be run if the script is instead loaded as a module. By doing this you're able to write a test suite against the modulino code, leaving only minimal kickoff code outside the reach of unit tests.</p>\n\n<p>One of several writeups on this topic exists here: <a href=\"https://perlmaven.com/modulino-both-script-and-module\" rel=\"nofollow noreferrer\">https://perlmaven.com/modulino-both-script-and-module</a></p>\n\n<p>For your purposes, the modulino lets you be more selective about what you run with the Perl debugger.</p>\n\n<p>If you structured your code as follows, you would be more successful:</p>\n\n<pre><code>package MyModulino;\nuse parent 'Exporter';\nour @EXPORT = qw(foo bar);\n\nsub foo {\n    print \"Hello world\\n\";\n    # enable debugger from this moment with PERLDB_OPTS='NonStop frame=1'\n    bar();\n    # disable debugger from this moment\n    return;\n}\n\nsub bar {\n    print \"Just another Perl hacker\\n\";\n    return;\n}\n\npackage main;\n\nif(!caller) {\n    MyModulino-&gt;import();\n    foo();\n}\n</code></pre>\n\n<p>Now you can do this:</p>\n\n<pre><code>perl -I/some/path/to/script -e 'do \"scriptname\"; MyModulino::bar()'\n</code></pre>\n\n<p>In other words, you can now treat <code>scriptname</code>, whatever it is, as a module with a package named <code>MyModulino</code>, and you can call <code>bar()</code> directly rather than relying on <code>foo()</code> to call it. The call to <code>foo()</code> only happens if <code>caller()</code> returns false, which it will do if you run the program directly, but will not do if you invoke it as a module.</p>\n\n<p>By treating <code>scriptname</code> as a module, the <code>foo()</code> call doesn't run implicitly, and your debugger code can invoke <code>bar()</code> from the <code>MyModulino</code> package.</p>\n\n<p>This one liner should drop you into the debugger without having called <code>foo()</code>.</p>\n\n<pre><code>perl -d -I/path/to/script -e 'do \"scriptname\"; MyModulino::bar()'\n</code></pre>\n\n<p>You can combine this technique along with <code>Test::MockModule</code> to mock the portions of the call stack you don't care about when testing <code>bar()</code> also. But when you start going down that path you really should invest the time to implement these strategies in an automated test script. The 'modulino' advice still applies in that case.</p>\n"}, {"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1560948616, "post_id": 56661279, "comment_id": 99903865, "body": "Thanks, <code>$DB::frame</code> is exactly what I need :)"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1561023571, "post_id": 56661279, "comment_id": 99931932, "body": "But... How to run debugger in runtime, without <code>-d</code> option at start ? I tried to use <a href=\"https://metacpan.org/pod/distribution/Enbugger/lib/Enbugger.pod\" rel=\"nofollow noreferrer\">Enbugger</a> module, but I can not pass <code>PERLDB_OPTS=&#39;NonStop frame=1&#39;</code> options to it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1561023677, "post_id": 56661279, "comment_id": 99932008, "body": "@PaulSerikov Why don&#39;t you want to pass <code>-d</code> at start?"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1560925488, "creation_date": 1560925488, "answer_id": 56661279, "question_id": 56648503, "link": "https://stackoverflow.com/questions/56648503/is-it-possible-to-run-only-particular-sub-under-debugger/56661279#56661279", "title": "Is it possible to run only particular sub under debugger?", "body": "<p>You can just set <code>$DB::frame</code> directly from within your code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nfoo();\n\nsub foo {\n    print \"Hello world\\n\";\n    $DB::frame = 1;\n    bar();\n    $DB::frame = 0;\n    return;\n}\n\nsub bar {\n    print \"Just another Perl hacker\\n\";\n    return;\n}\n</code></pre>\n\n<p>This can be run as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ PERLDB_OPTS=NonStop perl -d try.pl\nHello world\n   entering main::bar\nJust another Perl hacker\n</code></pre>\n\n<p>That's it.</p>\n\n<hr>\n\n<p>If you wanted to do it manually and define your own custom debugger, you could do it as follows:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nfoo();\n\nsub foo {\n    print \"Hello world\\n\";\n    $DB::xtrace = 1;\n    bar();\n    $DB::xtrace = 0;\n    return;\n}\n\nsub bar {\n    print \"Just another Perl hacker\\n\";\n    return;\n}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ PERL5DB='BEGIN { package DB; sub DB {} sub sub { print STDERR \"    entering $sub\\n\" if $xtrace; &amp;$sub } }' perl -d try.pl\nHello world\n    entering main::bar\nJust another Perl hacker\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 56661279, "answer_count": 3, "score": 3, "last_activity_date": 1560925488, "creation_date": 1560858733, "question_id": 56648503, "link": "https://stackoverflow.com/questions/56648503/is-it-possible-to-run-only-particular-sub-under-debugger", "title": "Is it possible to run only particular sub under debugger?", "body": "<p>I want to print stacktrace only of particular subroutine. \nIs it possible ? Script is running under perl without <code>-d</code> option.</p>\n\n<p>Simple example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nfoo();\n\nsub foo {\n    print \"Hello world\\n\";\n    # enable debugger from this moment with PERLDB_OPTS='NonStop frame=1'\n    bar();\n    # disable debugger from this moment\n    return;\n}\n\nsub bar {\n    print \"Just another Perl hacker\\n\";\n    return;\n}\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>$ perl test.pl \nHello world\n    entering main::bar\nJust another Perl hacker\n</code></pre>\n\n<p>I tried to play with <code>$ENV{PERL5DB}</code> but no effect:</p>\n\n<pre><code>$ENV{PERL5DB}='sub DB::DB {} sub sub {print ++$i, \" $sub\\n\"; &amp;$sub}';\nbar();\n$ENV{PERL5DB} = undef;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "edited": false, "score": 0, "creation_date": 1560857220, "post_id": 56648054, "comment_id": 99865728, "body": "* while (my $dir = readdir DIR) {"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1560857698, "post_id": 56648054, "comment_id": 99865996, "body": "<a href=\"https://stackoverflow.com/questions/4493482/detect-empty-directory-with-perl\">Please check</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1187, "user_id": 3205558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffc8fc604953fb170da4593973045d8?s=128&d=identicon&r=PG", "display_name": "vlumi", "link": "https://stackoverflow.com/users/3205558/vlumi"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1560865674, "post_id": 56648257, "comment_id": 99871044, "body": "@mob Good catch, added to my answer."}], "tags": [], "owner": {"reputation": 1187, "user_id": 3205558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffc8fc604953fb170da4593973045d8?s=128&d=identicon&r=PG", "display_name": "vlumi", "link": "https://stackoverflow.com/users/3205558/vlumi"}, "is_accepted": false, "score": 10, "last_activity_date": 1560865654, "last_edit_date": 1560865654, "creation_date": 1560857791, "answer_id": 56648257, "question_id": 56648054, "link": "https://stackoverflow.com/questions/56648054/is-there-any-way-to-check-whether-a-file-is-an-empty-file-using-perl-program/56648257#56648257", "title": "Is there any way to check whether a file is an empty file using PERL program?", "body": "<p>The relevant <a href=\"https://www.perltutorial.org/perl-file-test-operators/\" rel=\"nofollow noreferrer\">file test operators</a> are:</p>\n\n<ul>\n<li>-z: check if the file is empty.</li>\n<li>-s: check if the file has nonzero size (returns size in bytes).</li>\n</ul>\n\n<p>You are checking if <code>$dir</code> is non-empty, so opposite of what you are trying to achieve. Use <code>-z</code> (or <code>!-s</code>) instead.</p>\n\n<p>Also, each <code>$dir</code> is just the filename without the path, so you need to include it yourself if you aren't processing the current directory.</p>\n\n<pre><code>if (-z \"$directory/$dir\") {\n    print \"This is an empty file\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "edited": false, "score": 0, "creation_date": 1560871769, "post_id": 56650425, "comment_id": 99874983, "body": "@varunkumar: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1560864821, "creation_date": 1560864821, "answer_id": 56650425, "question_id": 56648054, "link": "https://stackoverflow.com/questions/56648054/is-there-any-way-to-check-whether-a-file-is-an-empty-file-using-perl-program/56650425#56650425", "title": "Is there any way to check whether a file is an empty file using PERL program?", "body": "<p>Your main problem is that <code>readdir()</code> doesn't return what you think it does. It returns the names of the files in the directory. But the names you get back don't have the directory path attached. And the <code>-s</code> operator needs the full path to the file in order to find it.</p>\n\n<p>So you need to attach the directory name yourself. Something like this will work:</p>\n\n<pre><code>opendir DIR, $directory ;\nwhile (my $dir = readdir DIR) {\n    # Note: Full path here.\n    if (-s \"$directory/$dir\") {\n        print \"This is an empty file\";\n    } \n}\n</code></pre>\n\n<p>But there are a couple of other things I'll fix. Firstly <code>-s</code> returns the size of the file. So that's true for a non-empty file. Which means that your logic is reversed. It actually needs to be this:</p>\n\n<pre><code>if (-s \"$directory/$dir\") {\n    print \"This is a non-empty file\";\n} else {\n    print \"This is an empty file\";\n}\n</code></pre>\n\n<p>It's also worth noting that using bareword directory handles isn't a very good idea. It's far better to use lexical variables as handles. I'd write your code like this:</p>\n\n<pre><code>opendir my $dir_h, $directory ;\nwhile (my $file = readdir $dir_h) {\n    # Note: Full path here.\n    if (-s \"$directory/$file\") {\n        print \"This is a non-empty file\";\n    } else {\n        print \"This is an empty file\";\n    } \n}\n</code></pre>\n\n<p>Oh, I also sneakily changed a variable name. <code>$file</code> seems a far better name thant <code>$dir</code> :-)</p>\n"}], "owner": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2532, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560865654, "creation_date": 1560857169, "last_edit_date": 1560857480, "question_id": 56648054, "link": "https://stackoverflow.com/questions/56648054/is-there-any-way-to-check-whether-a-file-is-an-empty-file-using-perl-program", "title": "Is there any way to check whether a file is an empty file using PERL program?", "body": "<p>I am looking a small script which will tell me whether a file is an empty file or not , but i am unable to display this.</p>\n\n<p>I have used the below code :</p>\n\n<pre><code>opendir DIR,$directory ;\nwhile (my $dir =readdir DIR) {\n    if (-s \"$dir\") {\n    print \"This is an empty file\";\n    }\n}\n</code></pre>\n\n<p>Here i am unable to print \"This is an empty file\" and my code does not went inside the if loop. Can anyone tell me what is the wrong in the above code</p>\n"}, {"tags": ["perl", "datetime", "date-manipulation"], "comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1560850238, "post_id": 56645792, "comment_id": 99861810, "body": "I wasn&#39;t quickly able to find where exactly Date::Manip makes its decision of whether you&#39;re on standard time or DST, but the US changed its start/end dates for DST in 2007. Is it possible that your Date::Manip might be old enough to still be using the old start/end dates instead of the current ones?"}, {"owner": {"reputation": 1491, "user_id": 629960, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/2i6rf.jpg?s=128&g=1", "display_name": "Roman Gelembjuk", "link": "https://stackoverflow.com/users/629960/roman-gelembjuk"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1560850777, "post_id": 56645792, "comment_id": 99862146, "body": "I have the version 6.54 , according to their docs it is from 2016-05-31 . <a href=\"https://metacpan.org/changes/distribution/Date-Manip\" rel=\"nofollow noreferrer\">metacpan.org/changes/distribution/Date-Manip</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1560852141, "post_id": 56645792, "comment_id": 99862936, "body": "I&#39;ve run your code using the latest version of Date::Manip (6.77) and I&#39;m still seeing the same, incorrect, behaviour. I suggest <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Date-Manip\" rel=\"nofollow noreferrer\">reporting it as a bug</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560869398, "post_id": 56645792, "comment_id": 99873490, "body": "It&#39;s important to remember that EST and EDT are not fully realized time zones. They are offsets. The time zone is America/New_York (or the appropriate locale). This is how you can have a winter datetime and a summer datetime in the same timezone with a different offset. So the &quot;decision&quot; whether DST is in effect depends on both the timezone and the datetime in question."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560869605, "post_id": 56645792, "comment_id": 99873630, "body": "Therefore it sounds like Date::Manip is trying to be too clever, and assuming that all EST time zones are America/New_York."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1561743143, "last_edit_date": 1561743143, "creation_date": 1560852141, "answer_id": 56646574, "question_id": 56645792, "link": "https://stackoverflow.com/questions/56645792/perl-datemanip-detects-timezone-wrong-for-est-and-edt/56646574#56646574", "title": "Perl Date::Manip detects timezone wrong for EST and EDT", "body": "<p>One way to find the time zone is with <a href=\"https://metacpan.org/pod/DateTime::TimeZone\" rel=\"nofollow noreferrer\">DateTime::TimeZone</a>. Used with <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> for other needs</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse DateTime; \nuse DateTime::TimeZone; \n\nmy $tz = DateTime::TimeZone-&gt;new(name =&gt; \"local\");\nsay $tz-&gt;name();                                   #--&gt; America/Los_Angeles\n\n\nmy $dt = DateTime-&gt;now(time_zone =&gt; \"local\");\nsay \"local: $dt\";                             #--&gt; local: 2019-06-18T09:57:58\n\n$dt-&gt;set_time_zone(\"UTC\"); \nsay \"UTC: $dt\";                               #--&gt; UTC: 2019-06-18T16:57:58\n</code></pre>\n\n<p>Please see documentation for details, at least for the <a href=\"https://metacpan.org/pod/DateTime::TimeZone#DateTime::TimeZone-%3Enew(-name-=%3E-$tz_name-)\" rel=\"nofollow noreferrer\">DateTime::TimeZone constructor</a>. </p>\n\n<p>Also note their recommendation to <em>not</em> use \"short\" names (\"EST\"), under <a href=\"https://metacpan.org/pod/DateTime::TimeZone#$tz-%3Eshort_name_for_datetime(-$dt-)\" rel=\"nofollow noreferrer\">$tz->short_name...</a></p>\n\n<hr>\n\n<p>Once you are working with <code>DateTime</code> can also have offset</p>\n\n<pre><code>my $dt = DateTime-&gt;now(time_zone =&gt; 'local');\n\nsay $dt-&gt;offset/(60*60);                       #--&gt; -7\n\nsay $dt-&gt;strftime(\"%z\");                       #--&gt; -0700\n</code></pre>\n\n<p>The method <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Eoffset()\" rel=\"nofollow noreferrer\">offset</a> returns the time-zone offset in seconds. </p>\n\n<p>The <a href=\"https://metacpan.or/pod/DateTime#$dt-%3Estrftime(-$format,-...-)\" rel=\"nofollow noreferrer\">strftime</a> offer formats we normally expect; docs say \"<em>any deviation from the POSIX standard is probably a bug.</em>\" A full timestamp example: <code>$dt-&gt;strftime('%Y-%m-%dT%H:%M:%S%z')</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1560852178, "creation_date": 1560852178, "answer_id": 56646587, "question_id": 56645792, "link": "https://stackoverflow.com/questions/56645792/perl-datemanip-detects-timezone-wrong-for-est-and-edt/56646587#56646587", "title": "Perl Date::Manip detects timezone wrong for EST and EDT", "body": "<p>The Date::Manip::TZ documentation has a section on <a href=\"https://metacpan.org/pod/Date::Manip::TZ#DETERMINING-THE-SYSTEM-TIME-ZONE\" rel=\"nofollow noreferrer\">Determining the System Time Zone</a>.  If you scroll down a bit, you will find a list of which methods are used (and in what order) to determine the system time zone, depending on whether you're running under Unix or Windows.</p>\n\n<p>Based on what you've posted in the question, it appears to be reading the local time correctly, but failing to identify the right time zone, so you should be able to find the root problem by going down the list of TZ identification methods used on your OS.  (i.e., for Unix, check <code>$::TZ</code>, then the <code>zone</code> and <code>TZ</code> environment settings, then <code>/etc/TIMEZONE</code>, etc. until you find one that both exists and has the wrong timezone listed)</p>\n"}], "owner": {"reputation": 1491, "user_id": 629960, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/2i6rf.jpg?s=128&g=1", "display_name": "Roman Gelembjuk", "link": "https://stackoverflow.com/users/629960/roman-gelembjuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1561743143, "creation_date": 1560849695, "question_id": 56645792, "link": "https://stackoverflow.com/questions/56645792/perl-datemanip-detects-timezone-wrong-for-est-and-edt", "title": "Perl Date::Manip detects timezone wrong for EST and EDT", "body": "<p>I have the server where system timezone is EST</p>\n\n<p>It was set with </p>\n\n<pre><code># timedatectl set-timezone EST\n# timedatectl \n  Local time: Tue 2019-06-18 03:29:42 EST\n  Universal time: Tue 2019-06-18 08:29:42 UTC\n    RTC time: Tue 2019-06-18 08:29:42\n    Time zone: EST (EST, -0500)\n    NTP enabled: yes\n    NTP synchronized: no\n    RTC in local TZ: no\n    DST active: n/a\n</code></pre>\n\n<p>Then in my <strong>perl</strong> code i try to detect timezone and convert time to UTC\nAnd for some reason, a timezone is detected as EDT. Currently (summer) EST is one our after EDT</p>\n\n<p>My perl code is</p>\n\n<pre><code># cat test.cgi # code file is named test.cgi\n#!/usr/bin/perl -w\n\nuse Date::Manip;\n\nprint \"Local time: \".UnixDate(\"now\",\"%Y-%m-%d %H:%M:%S %Z\").\"\\n\";\n\n# get local system timezone\nmy $TZ = UnixDate(\"now\",\"%Z\");\n\n# convert time to GMT \nmy $dtlocal =  Date_ConvTZ(ParseDate(UnixDate(\"now\",\"%g\")),$TZ,\"GMT\");\n\n# format GMT time\nmy $dt =  UnixDate($dtlocal,\"%Y-%m-%d %H:%M:%S\"); \n\nprint \"Timezone: $TZ\\n\";\nprint \"UTC time: $dt\\n\";\n</code></pre>\n\n<p>And i execute the script</p>\n\n<pre><code># date\nTue Jun 18 04:17:56 EST 2019\n# date -u\nTue Jun 18 09:17:58 UTC 2019\n# ./test.cgi \nLocal time: 2019-06-18 04:18:00 EDT\nTimezone: EDT\nUTC time: 2019-06-18 08:18:00\n</code></pre>\n\n<p>What can be the reason that Date::Manip detects timezone wrongly? \nIs there other good way to detect system timezone?</p>\n\n<p>UPDATE.</p>\n\n<p>I have just found that POSIX detects timezone correctly. So, the problem is with Date::Manip</p>\n\n<pre><code> use POSIX;\n print strftime(\"%Z\", localtime()), \"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "terminal", "remote-connection", "rsh", "qx"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1560837596, "post_id": 56642361, "comment_id": 99855524, "body": "It is unclear what exactly run from the command line. If this is the exact line you have inside <code>$cmd = &quot;rsh ....&quot;</code> then you might need to add another level of escaping, since the double quotes interpret <code>\\\\path</code> as <code>\\path</code>."}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1560837864, "post_id": 56642361, "comment_id": 99855610, "body": "When I run the command printed by the second line (ie string value of <code>$cmd</code>), from the terminal it runs fine. But, the third line (ie <code>qx($cmd)</code>) gives error as mentioned in the question. I have already used four backslashes ` \\\\\\\\ ` , in the beginning of the path and has escpaed every other backslash as ` \\\\ `."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1560909395, "post_id": 56642361, "comment_id": 99887722, "body": "Personally, I&#39;d build the command using a combo of String::ShellQuote and Win32::ShellQuote"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1560838328, "creation_date": 1560838328, "answer_id": 56642694, "question_id": 56642361, "link": "https://stackoverflow.com/questions/56642361/perl-qx-command-not-working-as-expected/56642694#56642694", "title": "Perl qx() command not working as expected", "body": "<p>While you escape your meta-characters against interpolation by double-quotes and by the remote shell, <code>qx</code> might itself interpolate the string again, in which case you might need to add another level of escaping. From <a href=\"https://perldoc.pl/perlop#qx/STRING/\" rel=\"nofollow noreferrer\">the documentation of qx</a>:</p>\n\n<blockquote>\n  <p>A string which is (possibly) <strong>interpolated</strong> and then executed as a system command with /bin/sh or its equivalent. ...<br>\n  How that string gets evaluated is entirely <strong>subject to the command interpreter on your system</strong>. On most platforms, you will have to <strong>protect shell metacharacters if you want them treated literally</strong>. This is in practice difficult to do, as it's unclear how to escape which characters. See perlsec for a clean and safe example of a manual fork() and exec() to emulate backticks safely.</p>\n</blockquote>\n"}], "owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "accepted_answer_id": 56642694, "answer_count": 1, "score": 1, "last_activity_date": 1560838328, "creation_date": 1560836345, "question_id": 56642361, "link": "https://stackoverflow.com/questions/56642361/perl-qx-command-not-working-as-expected", "title": "Perl qx() command not working as expected", "body": "<p>I have a perl script as below, where I want to access a network path on a remote windows machine from a linux machine using rsh.</p>\n\n<pre><code>$cmd = \"rsh -l $username $host \\\"pushd \\\\\\\\network\\\\path\\\\to\\\\the\\\\directory &amp;&amp; dir\\\"\";\nprint $cmd, \"\\n\";\nprint qx($cmd);\n</code></pre>\n\n<p>When I run the script the third line prints output <code>The system cannot find the path specified.</code> However, if I run the command printed by the second line directly from the terminal it works fine. </p>\n\n<p>I'm not able to understand why the script is not working. If the command works from the terminal, it should work using qx() too.</p>\n"}, {"tags": ["regex", "perl", "replace"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1560803455, "creation_date": 1560803455, "answer_id": 56638516, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56638516#56638516", "title": "Perl string replace not working with $1 and $2", "body": "<p><code>$2</code> in the replacement part refers to the capture group from the pattern part of the same substitution. Therefore, you only need one variable to remember $2.</p>\n\n<pre><code>perl -lwe '$_ = \"start middle end\" ; if (/sta(.*?)\\s\\w+\\s(.*)/) {my $rep = $2; s/$1/$rep/; print}'\nstaend middle end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1560803613, "creation_date": 1560803613, "answer_id": 56638552, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56638552#56638552", "title": "Perl string replace not working with $1 and $2", "body": "<p>The capture variables are reset by running the match in the first part of the s/// operator, for the replacement to use. The m// operator in list context will return the captured values so you can easily assign them there. Also you may want to use \\Q (<a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\">quotemeta</a>) if your search string is not a regex.</p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   if (my ($orig, $rep) = $name =~ /sta(.*?)\\s\\w+\\s(.*)/) {\n      $name =~ s/\\Q$orig/$rep/;\n      print \"$name\\n\";\n   }\n'\nsta middle end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1560827064, "last_edit_date": 1560827064, "creation_date": 1560803799, "answer_id": 56638596, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56638596#56638596", "title": "Perl string replace not working with $1 and $2", "body": "<p>Yes, the new successful regex match replaces <code>$1</code> and <code>$2</code>.</p>\n\n<p>You could avoid the global vars entirely as follows:</p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   if ( my ($orig, $rep) = $name =~ /sta(.*?)\\s\\w+\\s(.*)/ ) {\n      $name =~ s/\\Q$orig/$rep/;\n      CORE::say $name;\n   }\n'\n</code></pre>\n\n<p>Better yet, you could avoid doing two matches as follows:</p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   if ( $name =~ s/sta\\K.*?(?=\\s\\w+\\s(.*))/$1/ ) {\n      CORE::say $name;\n   }\n'\n</code></pre>\n\n<p>However, I'd use the following:</p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   if ( (my ($prefix, $suffix, $foo) = $name =~ /^(.*?sta).*?(\\s\\w+\\s(.*))/ ) {\n      CORE::say \"$prefix$foo$suffix\";\n   }\n'\n</code></pre>\n\n<p>Note that your code suffered from a <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">code injection</a> bug which I fixed using <code>quotemeta</code> (as <code>\\Q</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1560814694, "creation_date": 1560814694, "answer_id": 56640060, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56640060#56640060", "title": "Perl string replace not working with $1 and $2", "body": "<p>You can avoid other variables by using the last match start and end global arrays <code>@-</code> and <code>@+</code> and just doing a substring replace:</p>\n\n<pre><code>my $name = \"start middle end\";\nif ($name =~ /sta(.*?)\\s\\w+\\s(.*)/) {\n    substr($name, $-[1], $+[1]-$-[1], $2);\n    print \"$name\\n\";\n}\n</code></pre>\n\n<p>See the entry for <code>@-</code> in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perldoc perlvar</code></a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1560816234, "creation_date": 1560816234, "answer_id": 56640203, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56640203#56640203", "title": "Perl string replace not working with $1 and $2", "body": "<p>The regex capture variables exhibit strange behavior depending on code<br>\nflow, function calls and other stuff.<br>\nTo fully explain and wrap a head around this requires a few pages<br>\nof explanation.  </p>\n\n<p>As for now, avoid the whole mess and just use a single regex  </p>\n\n<pre><code> perl -e'\n    my $name = \"start middle end\";\n    $name =~ s/^(sta)(.*?)(\\s\\w+\\s)(.*)/$1$4$3$4/;\n    print \"$name\\n\";\n '\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1560829067, "last_edit_date": 1560829067, "creation_date": 1560828288, "answer_id": 56641359, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2/56641359#56641359", "title": "Perl string replace not working with $1 and $2", "body": "<p>Here, just in case, we'd have had unexpected extra spaces, we could also try this expression:</p>\n\n<pre><code>(sta)([a-z]*)\\s+(\\w+)\\s+(.+)\n</code></pre>\n\n<p>It's just another option. </p>\n\n<h3>TEST</h3>\n\n<pre><code>perl -e'\n    my $name = \"start       middle    end\";\n    $name =~ s/(sta)([a-z]*)\\s+(\\w+)\\s+(.+)/$1$4 $3 $4/;\n    print \"$name\\n\";\n    '\n</code></pre>\n\n<h3>OUTPUT</h3>\n\n<pre><code>staend middle end\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/u7H36y/1/\" rel=\"nofollow noreferrer\">Please see the demo here</a></h3>\n"}], "owner": {"reputation": 29, "user_id": 8709996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d877b22a141469646623901e1197792d?s=128&d=identicon&r=PG&f=1", "display_name": "user8709996", "link": "https://stackoverflow.com/users/8709996/user8709996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1560829067, "creation_date": 1560803181, "last_edit_date": 1560803522, "question_id": 56638459, "link": "https://stackoverflow.com/questions/56638459/perl-string-replace-not-working-with-1-and-2", "title": "Perl string replace not working with $1 and $2", "body": "<p>Search and replace is not working when I use $1 and $2 defined earlier. </p>\n\n<p>It works when I store it in a new variable. </p>\n\n<p>Does not work as intended.</p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   my $rep = \"\";\n   my $orig = \"\";\n   if ($name =~ /sta(.*?)\\s\\w+\\s(.*)/) {\n      $orig = $1;\n      $rep = $2;\n      $name =~ s/$1/$2/;\n      print \"$name\\n\";\n   }\n'\nsta middle end\n</code></pre>\n\n<p>Is it because $1 and $2 are getting replaced in the new $name =~ I am doing? </p>\n\n<p>Works as intended. </p>\n\n<pre><code>perl -e'\n   my $name = \"start middle end\";\n   my $rep = \"\";\n   my $orig = \"\";\n   if ($name =~ /sta(.*?)\\s\\w+\\s(.*)/) {\n      $orig = $1;\n      $rep = $2;\n      $name =~ s/$orig/${rep}/;\n      print \"$name\\n\";\n   }\n'\nstaend middle end\n</code></pre>\n\n<p>Is there a better one liner to do this? I do not want to define new variables.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1560801499, "post_id": 56637945, "comment_id": 99847107, "body": "$recordLine =~ s/role_name=&quot;.*?&quot;/role_name=&quot;&quot;/g;"}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1560801733, "post_id": 56637945, "comment_id": 99847200, "body": "@Andrey thank you that&#39;s exactly what I was looking for. A regex. Please add that as an answer and I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1560801649, "creation_date": 1560801649, "answer_id": 56638147, "question_id": 56637945, "link": "https://stackoverflow.com/questions/56637945/perl-replace-string-contents-within-quotes/56638147#56638147", "title": "Perl replace string contents within quotes", "body": "<p>Use an XML-aware tool to process XML. Processing it line by line can lead to broken non-well formed XML.</p>\n\n<p>In Perl, you can use <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $dom = 'XML::LibXML'-&gt;load_xml(IO =&gt; *DATA);\n\nfor my $role ($dom-&gt;findnodes('//Role[@role_name]')) {\n    $role-&gt;{role_name} = \"\";\n}\n\nprint $dom;\n\n__DATA__\n&lt;Root&gt;\n&lt;Role elemId=\"id35\" island_id=\"0\" role_name=\"Design\" value=\"True\"/&gt;\n&lt;Role elemId=\"id34\" island_id=\"0\" role_name=\"Lead\" value=\"False\"/&gt;\n&lt;!--\n&lt;Role elemId=\"id34\" island_id=\"0\" role_name=\"Lead\" value=\"False\"/&gt;\n--&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>There's also <a href=\"http://metacpan.org/pod/distribution/XML-XSH2/xsh\" rel=\"nofollow noreferrer\">xsh</a>, a wrapper around XML::LibXML which I happen to maintain. It's interactive and less verbose:</p>\n\n<pre><code>open file.xml ;\nfor //@role_name set . \"\" ;\nsave :b ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 0, "last_activity_date": 1560801793, "creation_date": 1560801793, "answer_id": 56638191, "question_id": 56637945, "link": "https://stackoverflow.com/questions/56637945/perl-replace-string-contents-within-quotes/56638191#56638191", "title": "Perl replace string contents within quotes", "body": "<p>This should do what you need:</p>\n\n<pre><code>$recordLine =~ s/role_name=\".*?\"/role_name=\"\"/g;\n</code></pre>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56638191, "answer_count": 2, "score": 0, "last_activity_date": 1560801793, "creation_date": 1560800704, "question_id": 56637945, "link": "https://stackoverflow.com/questions/56637945/perl-replace-string-contents-within-quotes", "title": "Perl replace string contents within quotes", "body": "<p>I have a large xml file that I am reading line by line.</p>\n\n<pre><code>&lt;Role elemId=\"id35\" island_id=\"0\" role_name=\"Design\" value=\"True\"/&gt;\n&lt;Role elemId=\"id34\" island_id=\"0\" role_name=\"Lead\" value=\"False\"/&gt;\n</code></pre>\n\n<p>What I need to do is whenever I see role_name in the string I need to make it blank. </p>\n\n<p>For example this is my desired output. Notice role_name is blanked out.</p>\n\n<pre><code>&lt;Role elemId=\"id35\" island_id=\"0\" role_name=\"\" value=\"True\"/&gt;\n&lt;Role elemId=\"id34\" island_id=\"0\" role_name=\"\" value=\"False\"/&gt;\n</code></pre>\n\n<p>role_name could have any number or combination of values. so I cannot hardcode for it</p>\n\n<p>Here's my working code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"\\nPerl Starting ... \\n\\n\"; \n\nwhile (my $recordLine =&lt;DATA&gt;) \n{\n    chomp($recordLine);\n\n    print \"$recordLine ...\\n\";\n\n    if (index($recordLine, \"role_name\") != -1) \n    {\n        #Found role_name tag ... now blank it ... how?\n        $recordLine =~ s/role_name=\"Design\"/role_name=\"\"/g; #I need a generic reg experssion here\n        print \"recordLine: $recordLine ...\\n\";\n\n    }\n}\n\nprint \"\\nPerl End ... \\n\\n\"; \n\n__DATA__\n&lt;Role elemId=\"id35\" island_id=\"0\" role_name=\"Design\" value=\"True\"/&gt;\n&lt;Role elemId=\"id34\" island_id=\"0\" role_name=\"Lead\" value=\"False\"/&gt;\n</code></pre>\n"}, {"tags": ["perl", "search", "catalyst"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560796310, "post_id": 56636839, "comment_id": 99844981, "body": "You are using forward slashes instead of backslashes and you have two more slashes than needed in <code>$temp</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1560796524, "creation_date": 1560796524, "answer_id": 56637027, "question_id": 56636839, "link": "https://stackoverflow.com/questions/56636839/unable-to-retrieve-data-from-stash-with-key-that-contains-a-single-quote/56637027#56637027", "title": "Unable to retrieve data from stash with key that contains a single quote", "body": "<p>You are using forward slashes instead of backslashes and you have two more slashes than needed in <code>$temp</code>. Try:</p>\n\n<pre><code>$temp =~ s{'}{\\\\'}g;\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 4520979, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/461450d2d32187c0e0fc9fb1d1a5a668?s=128&d=identicon&r=PG&f=1", "display_name": "schu777", "link": "https://stackoverflow.com/users/4520979/schu777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 56637027, "answer_count": 1, "score": 0, "last_activity_date": 1560796524, "creation_date": 1560795573, "question_id": 56636839, "link": "https://stackoverflow.com/questions/56636839/unable-to-retrieve-data-from-stash-with-key-that-contains-a-single-quote", "title": "Unable to retrieve data from stash with key that contains a single quote", "body": "<p>The database contains company names that have single quotes within the name.  When the user selects a company, I need to retrieve from a hash with the key=CompanyName.  Problem I'm having is not being able to retrieve the contents from Stash.</p>\n\n<p>In Debug mode, I've validated the following, able to use single quotes and double quotes around the company name:</p>\n\n<pre><code>  DB&lt;12&gt; x $c-&gt;stash-&gt;{'company_list'}-&gt;{'corp_summary'}-&gt;{'Waldo\\\\\\'s Merchandising Services, LLC'}\n0  'c635|i1193|i1194|i1220|i1221|'\n  DB&lt;13&gt; x $c-&gt;stash-&gt;{'company_list'}-&gt;{'corp_summary'}-&gt;{\"Waldo\\\\\\'s Merchandising Services, LLC\"}\n0  'c635|i1193|i1194|i1220|i1221|'\n</code></pre>\n\n<p>The code prints out the name I'm looking for and the replacement I've done, yet the last line of code \"$codes\" remains empty.</p>\n\n<pre><code>306       print \"$cc\\n\";\n307       print \"$cc\\n\";\n308       print \"$cc\\n\";\n309       print \"$cc\\n\";\n310       my $temp = $cc;\n311       $temp =~ s/'/\\/\\/\\/\\'/g;\n312       \n313       print \"$temp\\n\";\n314       print \"$temp\\n\";\n315       print \"$temp\\n\";\n316       print \"$temp\\n\";\n317       print \"$temp\\n\";\n318       my $codes = $c-&gt;stash-&gt;{'company_list'}-&gt;{'corp_summary'}-&gt;{\"$temp\"};\n</code></pre>\n\n<p>Output from print statements:</p>\n\n<pre><code>Waldo's Merchandising Services, LLC\nWaldo's Merchandising Services, LLC\nWaldo's Merchandising Services, LLC\nWaldo's Merchandising Services, LLC\nWaldo///'s Merchandising Services, LLC\nWaldo///'s Merchandising Services, LLC\nWaldo///'s Merchandising Services, LLC\nWaldo///'s Merchandising Services, LLC\nWaldo///'s Merchandising Services, LLC\n</code></pre>\n\n<p>My expected output is to have $codes to contain \"c635|i1193|i1194|i1220|i1221|\"</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1560787439, "creation_date": 1560787439, "answer_id": 56635048, "question_id": 56634936, "link": "https://stackoverflow.com/questions/56634936/calling-a-perl-hash-function/56635048#56635048", "title": "Calling a Perl hash function", "body": "<p>To declare a hash, use round parentheses. Curly braces are for hash references / anonymous hashes.</p>\n\n<pre><code>%hash = ( 1 =&gt; \\&amp;some_function );\nsub some_function {\n    my $arg = $_[0];\n    return $arg\n}\n$hash{1}($arg);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1560793099, "post_id": 56635051, "comment_id": 99843760, "body": "Note that <code>%hash = { &quot;1&quot; =&gt; \\&amp;some_function }</code> will produce a &quot;Reference found where even-sized list expected&quot; warning.  warnings will help you avoid many coding errors; make sure you have them enabled"}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 6, "last_activity_date": 1560787451, "creation_date": 1560787451, "answer_id": 56635051, "question_id": 56634936, "link": "https://stackoverflow.com/questions/56634936/calling-a-perl-hash-function/56635051#56635051", "title": "Calling a Perl hash function", "body": "<p><code>%hash</code> is a hash. <code>{ \"1\" =&gt; \\&amp;some_function }</code> is a hash reference.\nYou need one of the following variants:</p>\n\n<pre><code>$hash = { \"1\" =&gt; \\&amp;some_function };\n$hash-&gt;{\"1\"}-&gt;($arg);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>%hash = ( \"1\" =&gt; \\&amp;some_function );\n$hash{\"1\"}-&gt;($arg);\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/5.30.0/perldata.html#List-value-constructors\" rel=\"noreferrer\">perldata</a> and <a href=\"https://perldoc.perl.org/5.30.0/perlref.html\" rel=\"noreferrer\">perlref</a> for details.</p>\n"}], "owner": {"reputation": 225, "user_id": 4125650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006734197908/picture?type=large", "display_name": "Pang Ser Lark", "link": "https://stackoverflow.com/users/4125650/pang-ser-lark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56635051, "answer_count": 2, "score": 1, "last_activity_date": 1560787451, "creation_date": 1560787000, "question_id": 56634936, "link": "https://stackoverflow.com/questions/56634936/calling-a-perl-hash-function", "title": "Calling a Perl hash function", "body": "<p>How do you call a function from a hash value? </p>\n\n<pre><code>%hash = { \"1\" =&gt; \\&amp;some_function } ; # this function has one parameter\nsub some_function {\n  my $arg = $_[0];\n  return $arg;\n}\n$hash{\"1\"}-&gt;($arg); &lt;-- tried this but doesn't work.\n</code></pre>\n"}, {"tags": ["windows", "perl", "windows-10", "mingw", "strawberry-perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560783666, "post_id": 56633883, "comment_id": 99839608, "body": "What do you mean by &quot;doen&#39;t work&quot;?"}, {"owner": {"reputation": 2721, "user_id": 3849791, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f2840455ea0aebfc471ac08011dfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravaal", "link": "https://stackoverflow.com/users/3849791/ravaal"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560783718, "post_id": 56633883, "comment_id": 99839642, "body": "<code>&#39;.&#39; is not recognized as an internal or external command, operable program or batch file.</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560796872, "post_id": 56633883, "comment_id": 99845213, "body": "See also <a href=\"https://stackoverflow.com/q/23455637/2173773\">In Windows cmd, how do I run an executable in the current directory</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1560833114, "creation_date": 1560833114, "answer_id": 56641892, "question_id": 56633883, "link": "https://stackoverflow.com/questions/56633883/how-do-i-run-build-files-through-strawberry-perl-command-line/56641892#56641892", "title": "How do I run build files through Strawberry Perl command line?", "body": "<p>The bourne shell command you posted is equivalent to the following Windows command shell commands:</p>\n\n<pre><code>\"./build\" --mode=gcc-4.8.1 --arch=x86_64\n\n.\\build --mode=gcc-4.8.1 --arch=x86_64\n\nbuild --mode=gcc-4.8.1 --arch=x86_64\n</code></pre>\n\n<p>Of course, that assumes <code>build</code> refers to a Windows binary or a file otherwise understood by Windows (e.g. a batch file). If not, you have other problems lying ahead.</p>\n"}], "owner": {"reputation": 2721, "user_id": 3849791, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f2840455ea0aebfc471ac08011dfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravaal", "link": "https://stackoverflow.com/users/3849791/ravaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560833236, "creation_date": 1560783370, "last_edit_date": 1560833236, "question_id": 56633883, "link": "https://stackoverflow.com/questions/56633883/how-do-i-run-build-files-through-strawberry-perl-command-line", "title": "How do I run build files through Strawberry Perl command line?", "body": "<p>I am using Strawberry Perl and the command line. I need to know how to install packages like MinGW. I've downloaded MinGW from Github and I need to run the following command-</p>\n\n<pre><code>./build --mode=gcc-4.8.1 --arch=x86_64\n</code></pre>\n\n<p>But it doesn't work. Am I doing something wrong? Am I using the wrong command or should I be using something other than the command line?</p>\n\n<p>The error is: </p>\n\n<blockquote>\n  <p><code>'.' is not recognized as an internal or external command, operable\n  program or batch file.</code></p>\n</blockquote>\n\n<p>I'm using Windows 10.</p>\n\n<p><a href=\"https://github.com/StrawberryPerl/mingw-builds\" rel=\"nofollow noreferrer\">The code came from here.</a></p>\n"}, {"tags": ["shell", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1560782689, "post_id": 56633500, "comment_id": 99839037, "body": "are you ignoring the first token in the input file?  Also, what if there are more than one record satisfying the condition?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1560783149, "post_id": 56633500, "comment_id": 99839278, "body": "I have no idea what the mapping is between the input you posted and the output you posted. Hopefully others will be able to figure it out but you might want to add an explanation to your question."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1560804194, "post_id": 56633500, "comment_id": 99848235, "body": "Try <code>sed &#39;s&#47;.*\\(tap.*\\)&#47;.1.3.2.1.\\1 .0.3.2.1.\\1&#47;;p;N;N;d&#39; tap.file</code>, and then consider how you could improve the question."}, {"owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "edited": false, "score": 0, "creation_date": 1560837338, "post_id": 56633500, "comment_id": 99855441, "body": "I modified question bit, its for more records(not fixed) and also <i>tap</i> I mentioned just for understanding on how the sequence goes, my question is how to read each grep of both s1 and s2 and keep as temporary variable inside and print both (like: echo $s1 $s2). Please let me know if this is bit clear."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560843251, "post_id": 56633500, "comment_id": 99858075, "body": "<code>s1= cat $file</code> is the same as <code>cat $file</code>. <code>grep -i &#39;.1.2.3.1&#39;</code> is the same as <code>grep &#39;.1.2.3.1&#39;</code>. <code>cat $file | grep &#39;.1.2.3.1&#39;</code> is the same as <code>grep &#39;.1.2.3.1&#39; $file</code>. <code>grep &#39;.1.2.3.1&#39; $file | awk &#39;{$1=&quot;&quot;; print $0}&#39;</code> is the same as <code>awk &#39;&#47;.1.2.3.1&#47;{$1=&quot;&quot;; print $0}&#39;</code>. None of this makes any sense. What are <code>s1</code> and <code>s2</code> supposed to be? Why do none of the outputs match up?"}, {"owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "edited": false, "score": 0, "creation_date": 1560855425, "post_id": 56633500, "comment_id": 99864735, "body": "s1 , s2, echo, I tried mentioning just for understanding, that is not working, if its just one line that will work.      But in our current case s1 will give few hundred as it&#39;s just grep, even s2 also gives few hundred as its just grep, also my echo will also not work here as its not reading one grep and keep in some tem variable to print using echo.   We will not get echo output because as desired because it grepping for all.  Please check my modified summary, hope it may help on my expectation. Thanks!"}, {"owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "edited": false, "score": 0, "creation_date": 1560856510, "post_id": 56633500, "comment_id": 99865354, "body": "[root@server]$cat file0 .1.2.3.0 .0.3.2.1.1 .1.2.3.1 .1.3.2.1.1  [root@server]$ s1=<code>cat file0 | grep -i &#39;.1.2.3.1&#39; | awk &#39;{$1=&quot;&quot;; print $0}&#39;</code> [root@server]$ s2=<code>cat file0 | grep &#39;.1.2.3.0&#39; | awk &#39;{$1=&quot;&quot;; print $0}&#39;</code> host$ echo $s1 $s2 .1.3.2.1.1 .0.3.2.1.1"}, {"owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1560914347, "post_id": 56633500, "comment_id": 99888628, "body": "My requirement is bit complex, so I have tried simplifying the question a lot for all people understanding.  I think this will be bit easy for all understanding, pls let me know if this helps along with other posts by @Beta"}, {"owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "edited": false, "score": 0, "creation_date": 1561002546, "post_id": 56633500, "comment_id": 99923800, "body": "Any inputs, please let me know for any details for any simplification further."}], "answers": [{"tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1561249598, "creation_date": 1561249598, "answer_id": 56720131, "question_id": 56633500, "link": "https://stackoverflow.com/questions/56633500/print-in-rows-for-selected-greps-in-sequence-of-lines/56720131#56720131", "title": "Print in rows for selected greps in sequence of lines", "body": "<p>Here is a single <code>awk</code> script that do the task:</p>\n\n<p><code>script.awk</code></p>\n\n<pre><code>BEGIN {FS = \"[\\r ]\"}     # input line field separator &lt;CR&gt; or &lt;SPACE&gt;\n/TAP/ &amp;&amp; NR &gt; 1{print output; output = \"\"} # print output when matched TAP (but not first line), then reset output\n/^.1.2.3.[10]/ {output = $2 OFS output} # if matched pattern, left pad 2nd input field to output\nEND {print output} # print the final outuput\n</code></pre>\n\n<p>running:</p>\n\n<pre><code>awk -f script.awk input.txt\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>.1.3.2.1.1 .0.3.2.1.1\n.1.3.2.1.2 .0.3.2.1.2\n.1.3.2.1.3 .0.3.2.1.3\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10573563, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b7zezrDyb8w/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCNpP584TXXdR8UcGJlDzSAjVLtYw/mo/photo.jpg?sz=128", "display_name": "Hari Subramanyam", "link": "https://stackoverflow.com/users/10573563/hari-subramanyam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1561249598, "creation_date": 1560782056, "last_edit_date": 1561020516, "question_id": 56633500, "link": "https://stackoverflow.com/questions/56633500/print-in-rows-for-selected-greps-in-sequence-of-lines", "title": "Print in rows for selected greps in sequence of lines", "body": "<p>I have file like below, with few hundreds of lines:</p>\n\n<pre><code>$ cat file1\nTAP 1.0\n.1.2.3.0 .0.3.2.1.1\n.1.2.3.1 .1.3.2.1.1\n.1.2.3.2 .2.3.2.1.1\n.1.2.3.3 .3.3.2.1.1\n.1.2.3.4 .4.3.2.1.1\n.1.2.3.5 .5.3.2.1.1\nTAP 1.0\n.1.2.3.0 .0.3.2.1.2\n.1.2.3.1 .1.3.2.1.2\n.1.2.3.2 .2.3.2.1.2\n.1.2.3.3 .3.3.2.1.2\n.1.2.3.4 .4.3.2.1.2\n.1.2.3.5 .5.3.2.1.2\nTAP 1.0\n.1.2.3.0 .0.3.2.1.3\n.1.2.3.1 .1.3.2.1.3\n.1.2.3.2 .2.3.2.1.3\n.1.2.3.3 .3.3.2.1.3\n.1.2.3.4 .4.3.2.1.3\n.1.2.3.5 .5.3.2.1.3\n.....\n</code></pre>\n\n<p>From above file, I need to grep only two \".1.2.3.1\" and \".1.2.3.0\" and print as below:</p>\n\n<pre><code>    (( Desired Output))\n    .1.3.2.1.1 .0.3.2.1.1 \n    .1.3.2.1.2 .0.3.2.1.2 \n    .1.3.2.1.3 .0.3.2.1.3     \n....\n</code></pre>\n\n<p>My code works out just for grepping particular string as below with below awk:</p>\n\n<p>s1 output is below, where it grepping for .1.2.3.1 and giving output of all columns except 1st column as below:</p>\n\n<pre><code>command:  s1= cat $file1 | grep -i '.1.2.3.1' | awk '{$1=\"\"; print $0}'\nO/P(Output):\n.1.3.2.1.1\n.1.3.2.1.2\n.1.3.2.1.3\n</code></pre>\n\n<p>In same way s2 is giving output as above for grepping .1.2.3.0 as below:</p>\n\n<pre><code>command: s2= cat $file1 | grep '.1.2.3.0' | awk '{$1=\"\"; print $0}'\nO/P:\n.0.3.2.1.1\n.0.3.2.1.2\n.0.3.2.1.3\n</code></pre>\n\n<p>So complete output for s1 and s2 will be as below when I run simultaneously(<strong><em>this is not I want</em></strong>):</p>\n\n<pre><code>s1= cat $file1 | grep -i '.1.2.3.1' | awk '{$1=\"\"; print $0}'\ns2= cat $file1 | grep '.1.2.3.0' | awk '{$1=\"\"; print $0}'\nO/P:\n.1.3.2.1.1\n.1.3.2.1.2\n.1.3.2.1.3\n.0.3.2.1.1\n.0.3.2.1.2\n.0.3.2.1.3\n</code></pre>\n\n<p>I need output as below, how can I print my above as below:(<strong><em>Should be as below</em></strong>)</p>\n\n<pre><code>Desired Output:\n    .1.3.2.1.1 .0.3.2.1.1\n    .1.3.2.1.2 .0.3.2.1.2\n    .1.3.2.1.3 .0.3.2.1.3\n    .. etc\n</code></pre>\n\n<p>Output should be in \"echo $s1 $s2\" format itself, but output should be as above with some loop condition by reading and printing one variable of S1 and S2 at a time, instead of printing all S1 first followed by all S2 grepped output. </p>\n\n<p>So I need to keep every read variable temporarily in S1 and S2 and print one by one in sequence as above.</p>\n\n<p>So above output will come only when, if it does below in script:</p>\n\n<pre><code>- First grepped output of .1.2.3.1 should be kept in variable s1\n- First grepped output of .1.2.3.0 should be kept in variable s2\nthen print both first grepped one's of both temporary string as echo $s1 $s2 as below:\n.1.3.2.1.1 .0.3.2.1.1\n- Do in the same way for second grepped temporary output for both as below:\n.1.3.2.1.2 .0.3.2.1.2\n- Do in the same way for all Nth grepped output as below:\n.1.3.2.1.1 .0.3.2.1.1\n.1.3.2.1.2 .0.3.2.1.2\n....\n.1.3.2.1.Nth .0.3.2.1.Nth\n</code></pre>\n\n<p>For all sequence it should print by consider one grep at a time, instead of all grepped output.</p>\n\n<p>As for your better understanding it works out better for one line for particular grep as below:</p>\n\n<pre><code>[root@server]$cat file0\n.1.2.3.0 .0.3.2.1.1\n.1.2.3.1 .1.3.2.1.1\n.1.2.3.7 .3.3.2.1.1\n\n\n\n[root@server]$ s1=`cat file0 | grep -i '.1.2.3.1' | awk '{$1=\"\"; print $0}'`\n[root@server]$ s2=`cat file0 | grep '.1.2.3.0' | awk '{$1=\"\"; print $0}'`\nhost$ echo $s1 $s2\n.1.3.2.1.1 .0.3.2.1.1\n</code></pre>\n\n<p>But how it works for \"file1\" like \"file0\" and how can I print as above!!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["mysql", "regex", "perl", "concatenation", "truncate"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 11564138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc781cf5f2d8436163ffd31aa1d5822d?s=128&d=identicon&r=PG&f=1", "display_name": "Bl00D4NGEL", "link": "https://stackoverflow.com/users/11564138/bl00d4ngel"}, "is_accepted": false, "score": 0, "last_activity_date": 1560778071, "creation_date": 1560778071, "answer_id": 56632333, "question_id": 56632155, "link": "https://stackoverflow.com/questions/56632155/perl-truncate-where-values-overlap-and-concatenate/56632333#56632333", "title": "Perl - truncate where values overlap and concatenate", "body": "<p>What you could start with is a regular expression that splits every word of the first data entry (<code>a.address_1</code>) into an array:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my ($addr_1, $addr_2) = $sth-&gt;fetchrow_array();\nmy @words = ($addr_1 =~ /(.*?)\\s+/g);\n</code></pre>\n\n<p>After that you can iterate over every word and remove it from the second address</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>for my $word (@words) {\n    $addr_2 =~ s/$word//g;\n}\n</code></pre>\n\n<p>Once you're done with that you can basically merge the two strings into one:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $concatenated_string = $addr_1 . $addr_2;\n</code></pre>\n\n<p>And after you've done that you should be very close to what you were asking.</p>\n\n<p>NOTE: Syntax errors might be possible, I've written this off the top of my head.</p>\n"}], "owner": {"reputation": 71, "user_id": 7087292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1bfad66454c41536b7804a3e84d76eea?s=128&d=identicon&r=PG&f=1", "display_name": "ComputersAreNeat", "link": "https://stackoverflow.com/users/7087292/computersareneat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1560778071, "creation_date": 1560777356, "question_id": 56632155, "link": "https://stackoverflow.com/questions/56632155/perl-truncate-where-values-overlap-and-concatenate", "title": "Perl - truncate where values overlap and concatenate", "body": "<p>I am new to the Perl language and am trying to convert some data from a MYSQL database.</p>\n\n<p>I'm working on pulling addresses from two different tables, and my goal is to concatenate a \"complete\" address. In some cases the addresses are fragmented between columns from each table.</p>\n\n<p>For example:</p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551   \u2551 a.address_1         \u2551 b.address_2          \u2551\n\u2560\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 1 \u2551 6418 Main St        \u2551 Main St, Detroit MI  \u2551\n\u2551 2 \u2551 11 S Pole Rd        \u2551 Miami, FL 33166      \u2551\n\u2551 3 \u2551 Pittsburgh, PA 15222\u2551 Third Ave, Pittsburgh\u2551\n\u255a\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p>I need to check to see if any part of the address is matching, and if so truncate the overlap and concatenate the remaining address</p>\n\n<pre><code>\u2554\u2550\u2550\u2550\u2566\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551   \u2551 address                              \u2551\n\u2560\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 1 \u2551 6418 Main St, Detroit MI             \u2551\n\u2551 2 \u2551 11 S Pole Rd Miami, FL 33166         \u2551\n\u2551 3 \u2551 Fifth Avenue, Pittsburgh, PA 15222   \u2551\n\u255a\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p>At this point I am pulling the two addresses in and storing them, but now I need to convert them to a single \"complete\" address.</p>\n\n<p>Can someone please help me with a solution?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1560775545, "post_id": 56631501, "comment_id": 99834962, "body": "<code>... if ($row-&gt;[0] eq $code) { print $row-&gt;[1]; }...</code> or instead of an array you could use a hash with the code as key, if the code is unique in the file. How you wrote it, <code>$content{$code}</code>, you&#39;re probably after that."}, {"owner": {"reputation": 86, "user_id": 11564138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc781cf5f2d8436163ffd31aa1d5822d?s=128&d=identicon&r=PG&f=1", "display_name": "Bl00D4NGEL", "link": "https://stackoverflow.com/users/11564138/bl00d4ngel"}, "edited": false, "score": 1, "creation_date": 1560777297, "post_id": 56631501, "comment_id": 99836045, "body": "Kinda off-topic but please try to always <code>use strict</code>in your Perl scripts! Just makes sure that in the future any &quot;major&quot; mistake is pointed out when executing the script beforehand"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "edited": false, "score": 0, "creation_date": 1560779331, "post_id": 56632371, "comment_id": 99837209, "body": "Thank you for your explanation.. Now it is working. I will fix the typo mentioned (use strict, split, $content)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1560778204, "creation_date": 1560778204, "answer_id": 56632371, "question_id": 56631501, "link": "https://stackoverflow.com/questions/56631501/how-to-print-rows-information-from-two-dimensional-array-in-perl/56632371#56632371", "title": "How to print rows information from two dimensional array in Perl?", "body": "<p>There are a few problems here. And they can mostly be found by adding <code>use strict</code> to your code. The vast majority of experienced Perl programmers will always start their programs with:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>as these additions will find a huge number of common mistakes that programmers are prone to make.</p>\n\n<p>The first problem can't be found like that. It seems to be a typo. You split your input using <code>split /;+/</code> but your input file seems to be delimited by whitespace. So change <code>split /;+/</code> to just <code>split</code>.</p>\n\n<p>Now let's add <code>use strict</code> to your code and see what happens.</p>\n\n<pre><code>$ perl 2d\nGlobal symbol \"$content\" requires explicit package name (did you forget to declare \"my $content\"?) at 2d line 20.\nGlobal symbol \"%content\" requires explicit package name (did you forget to declare \"my %content\"?) at 2d line 21.\nGlobal symbol \"%content\" requires explicit package name (did you forget to declare \"my %content\"?) at 2d line 22.\nExecution of 2d aborted due to compilation errors.\n</code></pre>\n\n<p>Although there are three errors listed here, the second and third ones are both the same. But let's start with the first. Line 20 in my program is:</p>\n\n<pre><code>foreach my $row ($content) {\n</code></pre>\n\n<p>But what's that <code>$content</code> variable? You don't use that anywhere else. I suspect it's a typo for <code>@content</code>. Let's change that and try again.</p>\n\n<pre><code>$ perl 2d\nGlobal symbol \"%content\" requires explicit package name (did you forget to declare \"my %content\"?) at 2d line 21.\nGlobal symbol \"%content\" requires explicit package name (did you forget to declare \"my %content\"?) at 2d line 22.\nExecution of 2d aborted due to compilation errors.\n</code></pre>\n\n<p>Ok. That fixed the first problem, but I guess we now have to look at the repeated error. This is generated by lines 21 and 22, which look like this:</p>\n\n<pre><code>    if ($content{$code}) {\n        print \"$content{$code}\\n\";\n</code></pre>\n\n<p>Obviously, there's no mention of <code>%content</code> on either of those lines - so what's the problem?</p>\n\n<p>Well, the problem is that <code>%content</code> is mentioned on both of those lines, but it's disguised as <code>$content{$code}</code> in both cases. You have an array called <code>@content</code> and you'd look up values in that array using syntax like <code>$content[0]</code>. The face that you're using <code>{...}</code> instead of <code>[...]</code> means that you're looking in <code>%content</code>, not <code>@content</code> (in Perl you're allowed to have an array and a hash - and also a scalar - all with the same name, which is always a terrible idea!)</p>\n\n<p>But we can't just change <code>$content{$code}</code> to <code>$content[$code]</code> because <code>$code</code> is string (\"BM\") and array indexes are integers. I we need to rethink this from scratch and actually store the data in <code>%content</code>, not <code>@content</code>. And, actually, I think that makes the code simpler.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nprint(\"Type code: \");\nmy $code = &lt;STDIN&gt;;\nchomp($code);\n\nmy %content;\n\nif  (!open(TABLET, \"file.txt\")){\n  die \"Unable to open the file\\n\";\n}\n\nwhile(&lt;TABLET&gt;){\n  chomp;\n  my @record = split;\n  $content{$record[0]} = \\@record;\n}\n\nif (exists $content{$code}) {\n  print \"$content{$code}[1]\\n\";\n} else {\n  print \"$code is not a valid code\\n\";\n}\n\nclose(TABLET);\n</code></pre>\n\n<p>We can clean that up a bit (for example, by using lexical filehandles and the three-arg version of <code>open()</code>) to get this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint(\"Type code: \");\nchomp( my $code = &lt;STDIN&gt; );\n\nmy %content;\n\nopen my $tablet_fh, '&lt;', 'file.txt'\n  or die \"Unable to open the file\\n\";\n\nwhile(&lt;$tablet_fh&gt;){\n  chomp;\n  my @record = split;\n  $content{$record[0]} = \\@record;\n}\n\nif (exists $content{$code}) {\n  print \"$content{$code}[1]\\n\";\n} else {\n  print \"$code is not a valid code\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56632371, "answer_count": 1, "score": 0, "last_activity_date": 1560779425, "creation_date": 1560775132, "last_edit_date": 1560779425, "question_id": 56631501, "link": "https://stackoverflow.com/questions/56631501/how-to-print-rows-information-from-two-dimensional-array-in-perl", "title": "How to print rows information from two dimensional array in Perl?", "body": "<p>I have the following two dimensional array (file.txt):</p>\n\n<pre><code>Code  Element  Repetitions\nAL     Train       23\nBM      Car        30\nCN      Bike       44\n</code></pre>\n\n<p>From an input (Code) given by the user, I want to extract the \ncorresponding Element information.</p>\n\n<pre><code>Example input: BM   \nExample output:Car    \n</code></pre>\n\n<p>I tried with this code but I do not know how to compare the input name with array content. Thank you a lot</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nprint(\"Type code: \");  \nmy $code = &lt;STDIN&gt;;\nchomp($code);\n\nmy @content;\n\nif(!open(TABLET, \"file.txt\")){              \ndie \"Unable to open the file\\n\";\n}\nwhile(&lt;TABLET&gt;){\n    chomp;\n  push @content, [split / /];\n}\n\nforeach my $row ($content) {\n    if ($content{$code}) {                                    \n        print \"$content{$code}\\n\";\n    }\n}\n\nclose(TABLET);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560768114, "post_id": 56629544, "comment_id": 99831120, "body": "<i>&quot;...in case if the file doesn&#39;t having the input file..&quot;</i> what does that mean? Please clarify"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560768164, "post_id": 56629544, "comment_id": 99831148, "body": "Maybe try writing the string to a temp file? See e.g. <a href=\"https://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560768347, "post_id": 56629544, "comment_id": 99831228, "body": "@H&#229;konH&#230;gland: Question Updated.... Temp file doesn&#39;t support. Since programmatically I am receiving input file or content of the file."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1560769049, "post_id": 56629544, "comment_id": 99831587, "body": "@ssr1012 Do you want to pass an entire file\u2019s contents as a command line argument? Why?! That\u2019s just strange, and the error you\u2019re getting is quite sane; the command line becomes too long. There\u2019s a reason this is not a common thing. Sending contents via STDIN, however, is."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1560769302, "post_id": 56629544, "comment_id": 99831730, "body": "@Biffen: Yes I know that. But the full content only input for my script... And how can I receive the input content to the script?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1560769352, "post_id": 56629544, "comment_id": 99831754, "body": "@ssr1012 STDIN?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1560769767, "post_id": 56629544, "comment_id": 99831957, "body": "@Biffen: I am receiving the error message <i>The syntax of the command is in incorrect</i>."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1560770034, "post_id": 56629544, "comment_id": 99832111, "body": "@ssr1012 What would I do with that information?! I have no idea what command that is!"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560776297, "post_id": 56629544, "comment_id": 99835412, "body": "<i>&quot;Temp file doesn&#39;t support...&quot;</i> I was thinking you could write temp file after receiving the string. Then call <code>support.pl</code> with the name of the temp file"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560776951, "post_id": 56629544, "comment_id": 99835809, "body": "@H&#229;konH&#230;gland: Yes I can do... However Once I have received then only I can save the temp file. The problem is the tool can&#39;t receive the content as an input. That&#39;s the issue."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560777203, "post_id": 56629544, "comment_id": 99835984, "body": "@ssr1012  <i>&quot;...the tool can&#39;t receive the content as an input.&quot;</i> sorry if I misunderstood, but the tool (<code>support.pl</code>) can take a file name (as you show). Then why can&#39;t you give it the name of the temp file?"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1560788529, "post_id": 56632251, "comment_id": 99841973, "body": "Quoting is only an issue if you go through the shell. You can call programs directly (and pass arbitrary arguments) without going through the shell; at least this is the case on Unix. Windows is a different issue."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1560837092, "post_id": 56632251, "comment_id": 99855354, "body": "Actually the question is how to parse the content as an input in the perl script... <b><i>_you to create a temporary file in /tmp/_</i></b> this thing should be happened in the another program which doesn&#39;t happened."}], "tags": [], "owner": {"reputation": 86, "user_id": 11564138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc781cf5f2d8436163ffd31aa1d5822d?s=128&d=identicon&r=PG&f=1", "display_name": "Bl00D4NGEL", "link": "https://stackoverflow.com/users/11564138/bl00d4ngel"}, "is_accepted": false, "score": 0, "last_activity_date": 1560777750, "creation_date": 1560777750, "answer_id": 56632251, "question_id": 56629544, "link": "https://stackoverflow.com/questions/56629544/input-argument-is-a-file-or-an-either-content-to-perl/56632251#56632251", "title": "Input argument is a file or an either content to Perl", "body": "<p>First of all regarding the error you're getting:\nPerl (or your shell) is complaining that your input argument is too long.</p>\n\n<p>Parsing entire files as arguments to scripts is generally a bad idea anyway, for example quotation mark escaping etc. might not be handled and thus leave a wide open vulnarbility to <strong>your entire system</strong>!</p>\n\n<p>So the solution to this is to modify your script so that it can take the file as an argument (if that isn't already the case) and if you really need to have an entire file's content parsed as an argument I'd really advise you to create a temporary file in <code>/tmp/</code> (if on Linux) or in your <code>%TEMP%</code> directory on Windows and parse the file the content into the file and after that give your <code>support.pl</code> script the new temp file as an argument.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560777750, "creation_date": 1560767744, "last_edit_date": 1560769003, "question_id": 56629544, "link": "https://stackoverflow.com/questions/56629544/input-argument-is-a-file-or-an-either-content-to-perl", "title": "Input argument is a file or an either content to Perl", "body": "<p>I wrote a Perl script to convert from TEX format to JSON format.</p>\n\n<p>Calling in the batch file: </p>\n\n<pre><code> perl -w C:\\test\\support.pl TestingSample.tex\n</code></pre>\n\n<p>This is working fine now.</p>\n\n<p>Perl script having two types of input from another program (might be any platform/technology) one is file (*TEX) or else content (*TEX file) <em>either this or that option</em>.</p>\n\n<p>How can I receive the full content as the input to the Perl script?</p>\n\n<p>Now my Perl script is:</p>\n\n<pre><code> my $texfile = $ARGV[0]; my $texcnt = \"\";\n readFileinString($texfile, \\$texcnt);\n</code></pre>\n\n<p>I am trying to update:</p>\n\n<pre><code> perl -w C:/test/support.pl --input $texcnt\" #Content is Input\n</code></pre>\n\n<p>I am receiving error message:</p>\n\n<pre><code> The command line is too long.\n</code></pre>\n\n<p>Could someone please advice?</p>\n"}, {"tags": ["regex", "perl", "match"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1560948321, "post_id": 56627863, "comment_id": 99903669, "body": "FYI: <code>{1,}</code> doesn&#39;t mean &quot;more than one time&quot; but &quot;one or more times&quot;"}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1562139215, "post_id": 56627863, "comment_id": 100279124, "body": "@TOto, I am sorrry for that mistake."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1560826186, "post_id": 56628350, "comment_id": 99852969, "body": "thanks a lot. Your solution could be an easier way to do this. I just wondered why it can&#39;t match exact times. If something matches two times it will also match one time, then what&#39;s the difference of <code>{1}, {1,}, {1,2}</code>. I don&#39;t get the point to create these different forms."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "reply_to_user": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1560944130, "post_id": 56628350, "comment_id": 99901233, "body": "<code>&#47;a{2,3}&#47;</code> will match all of <code>aa</code>, <code>aaa</code>, <code>aaaa</code> and so on. But it wil not match <code>ababa</code>. The <code>{\u2026}</code> part means to repeat the previos &quot;atom&quot;. So with your <code>$cut_seq</code> being <code>abc</code>, <code>&#47;$cut_seq{2,3}&#47;</code> will not match at all in <code>xabcxabcxabcx</code>. It would only match for example <code>xabcabcabcx</code>."}], "tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 1, "last_activity_date": 1560763260, "creation_date": 1560763260, "answer_id": 56628350, "question_id": 56627863, "link": "https://stackoverflow.com/questions/56627863/get-error-result-when-search-match-for-only-one-time/56628350#56628350", "title": "Get error result when search match for only one time", "body": "<p>If something matches two times it also matches one time. That's why your \"one time\" match always kicks in.</p>\n\n<p>The easiest approach, I think, is to simply split at your <code>$cut_seq</code> and check the number of splitted elements.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $test=\"abc1234abc5678abcdef910\";\nmy $cut_seq=\"abc\";\nmy @elts= split /$cut_seq/, $test;\nprint scalar(@elts)-1,\" times\\n\";\n</code></pre>\n\n<p>P.S. This does not count '$cut_seq` at the end of the string - sorry! You'll have to append something which will not be part of your sequence like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $test=\"abc1234abc5678abcdef910\";\nmy $cut_seq=\"abc\";\nmy @elts= split /$cut_seq/, $test . chr(0);\nprint scalar(@elts)-1,\" times\\n\";\n</code></pre>\n\n<pre><code>\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560948132, "creation_date": 1560761475, "last_edit_date": 1560948132, "question_id": 56627863, "link": "https://stackoverflow.com/questions/56627863/get-error-result-when-search-match-for-only-one-time", "title": "Get error result when search match for only one time", "body": "<p>I wanted to search a string that matched exact times in another string, while I met some problem.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $test=\"abc1234abc5678abcdef910\";\nmy $cut_seq=\"abc\";\n\nprint $test,\"\\tone time\\n\" if($test=~/$cut_seq{1}/);\n\nprint $test,\"\\tmore than one times\\n\" if($test=~/$cut_seq{1,}/);\n</code></pre>\n\n<p>I expected the result: </p>\n\n<pre><code>abc1234abc5678abcdef910 more than one times\n</code></pre>\n\n<p>But the result showed as:</p>\n\n<pre><code>abc1234abc5678abcdef910 one time\nabc1234abc5678abcdef910 more than one times\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>print $test,\"\\tone time\\n\" if($test=~/$cut_seq{0,1}/);\nprint $test,\"\\tone time\\n\" if($test=~/$cut_seq{1,1}/);\nprint $test,\"\\tmore than one times\\n\" if($test=~/$cut_seq{1,}/);\n</code></pre>\n\n<p>But nothing changed. I just wonder why it can't match exact times. If something matches two times it will also match one time, then what's the difference of {1}, {1,}, {1,1}, {1,2}. I don't get the point to create these different forms. </p>\n"}, {"tags": ["perl", "ip", "cidr"], "comments": [{"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1560764368, "post_id": 56627525, "comment_id": 99829215, "body": "/224 is invalid as no IP4 address has more than 32 bits. Or am I misunderstanding?"}, {"owner": {"reputation": 86, "user_id": 11564138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc781cf5f2d8436163ffd31aa1d5822d?s=128&d=identicon&r=PG&f=1", "display_name": "Bl00D4NGEL", "link": "https://stackoverflow.com/users/11564138/bl00d4ngel"}, "edited": false, "score": 0, "creation_date": 1560778255, "post_id": 56627525, "comment_id": 99836612, "body": "Might wanna check out Wikipedia&#39;s article on the basics of CIDR if you&#39;re going to implement something that&#39;s supposed to check CIDR addresses: <a href=\"https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1560779458, "post_id": 56627525, "comment_id": 99837266, "body": "A quick search on metacpan found <a href=\"https://metacpan.org/pod/Regexp::Common::net::CIDR\" rel=\"nofollow noreferrer\">this module</a> among others."}], "answers": [{"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 1, "last_activity_date": 1560948788, "creation_date": 1560948788, "answer_id": 56668132, "question_id": 56627525, "link": "https://stackoverflow.com/questions/56627525/how-to-check-cidr-value-is-valid-or-not/56668132#56668132", "title": "How to check cidr value is valid or not", "body": "<p>You could use <a href=\"https://metacpan.org/pod/Net::Works::Network\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Net::Works::Network</a> for this.  If the network is not valid, an exception will be thrown.  You can trap the exception and then decide how you want to handle it.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Net::Works::Network ();\nuse Try::Catch qw( catch try );\n\nmy $network;\ntry {\n    $network\n        = Net::Works::Network-&gt;new_from_string( string =&gt; '148.64.0.0/224' );\n}\ncatch {\n    print \"Not a valid network: $_\\n\";\n};\n\n# ... maybe do something with $network here\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 2304217, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c6e689c7c74bc5535aa0eb45262a06e3?s=128&d=identicon&r=PG", "display_name": "Karthik S", "link": "https://stackoverflow.com/users/2304217/karthik-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560948788, "creation_date": 1560760186, "question_id": 56627525, "link": "https://stackoverflow.com/questions/56627525/how-to-check-cidr-value-is-valid-or-not", "title": "How to check cidr value is valid or not", "body": "<p>I am reading CIDR values from the text file, once reading list of CIDR values. I have to validate the CIDR value whether it is valid one or not. How can i Validate the CIDR value is correct or not.\nFor example when I try with 148.64.0.0/224 CIDR value in following website (i.e <a href=\"https://www.ipaddressguide.com/cidr\" rel=\"nofollow noreferrer\">https://www.ipaddressguide.com/cidr</a>) it is showing as  \"Invalid CIDR format\".\nCan you please provide sample snippet code in perl language to validate the CIDR value?</p>\n\n<p>I tried to validate with whois website, but it did not work.</p>\n"}, {"tags": ["perl", "for-loop", "foreach", "scope", "nested"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747404, "post_id": 56624856, "comment_id": 99822294, "body": "&quot;<i>new to Perl and tempted to write this in something else</i>&quot; -- this has nothing to do with Perl (or else) ... you&#39;re clearly assigning a char (+space) to <code>$str</code> (<code>=</code>) in every iteration.  What do you expect -- to have all 50 after the loop?  Then you want to add, <code>.=</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560748866, "post_id": 56624856, "comment_id": 99822677, "body": "With the edit now <code>$str</code> is only one character (no space anymore) so the output can&#39;t be what&#39;s shown. again, nothing to do with languages. But, how did my previous suggestion work, to have <code>$str .= $dna[$nt];</code>  (Instead of <code>=</code>) ? That way it builds <code>$str</code> to 50 characters.  (If that&#39;s what you want, the question isn&#39;t clear)"}, {"owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560749147, "post_id": 56624856, "comment_id": 99822759, "body": "That is the regenerated output. 10 iterations of 50. Regardless of the language, I still think it&#39;s a scope problem that I can&#39;t figure out. So far, nothing too helpful but I&#39;ll try again after a night&#39;s sleep"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1560749313, "post_id": 56624856, "comment_id": 99822811, "body": "Um, I am telling you (twice) what it is:  You <i>assign</i> to <code>$str</code> every time, so it always has one character, and after the loop it&#39;s the last one that was assigned.  What you see is the accumulated print out.   Change <code>$str = $dna[$nt];</code> to <code>$str .= $dna[$nt];</code> and after the loop with 50 the <code>$str</code> will be 50 characters."}], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 1, "last_activity_date": 1560764846, "creation_date": 1560764846, "answer_id": 56628764, "question_id": 56624856, "link": "https://stackoverflow.com/questions/56624856/variable-scope-outside-foreach-loop-perl/56628764#56628764", "title": "Variable Scope outside foreach loop Perl", "body": "<pre class=\"lang-perl prettyprint-override\"><code>for (my $i=1; $i&lt;11; $i++){\n    fifty();\n</code></pre>\n\n<p>In<code>fifty</code>you return something but you discard ist, as you do no assignement like <code>$str= fifty();</code></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    print $str;\n}\n</code></pre>\n\n<p>And here you print something that has no value yet as it seems - in fact you assign a value in <code>fifty</code>- but you shouldn't use global variables.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub fifty {\n    foreach (1 .. 50){\n        my $nt = int(rand $#dna + 1);\n        $str = $dna[$nt];\n</code></pre>\n\n<p>Here you discard whatever is in <code>$str</code> and assign one letter instead. Also you assign to a global variable - which you should avoid.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>        return $str;\n    }\n}\n</code></pre>\n\n<p>And here you directly leave <code>fifty</code> and return just the one character - which you (see above) discard.</p>\n"}, {"comments": [{"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1560944364, "post_id": 56639122, "comment_id": 99901360, "body": "I know why youe were stuck: You do not yet understand programming. Sorry if that sounds harsh, but your issue is not related to variable scope."}, {"owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "reply_to_user": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1561681719, "post_id": 56639122, "comment_id": 100154141, "body": "@Skeeve I was wrong in assuming scope, but in fact it kinda was considering what I was trying to do. I figured it out myself anyways. You&#39;re comment is quite rude. I don&#39;t appreciate it. Your &quot;sorry&quot; means nothing."}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 0, "creation_date": 1561890106, "post_id": 56639122, "comment_id": 100200665, "body": "The issue is: You got really helpful answers from zdim, but it seems you didn&#39;t understand. Your code clearly shows that you didn&#39;t even try to follow his advice. Instead of trying to understand the most basic priniciple you created your own workaround. If you&#39;re happy with that, be happy. Still it leaves the impression I&#39;ve stated above."}], "tags": [], "owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "is_accepted": false, "score": 1, "last_activity_date": 1560806823, "creation_date": 1560806823, "answer_id": 56639122, "question_id": 56624856, "link": "https://stackoverflow.com/questions/56624856/variable-scope-outside-foreach-loop-perl/56639122#56639122", "title": "Variable Scope outside foreach loop Perl", "body": "<p>I found this to work perfectly: Turns out to be scope as far as I could tell and not sure why I was stuck. Regardless, moving on now.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @dna = ('A','G','T','C');\nmy $i;\nmy $str;\n\nfor ($i=1; $i&lt;11; $i++){\n    my $filename = \"seq_\" . $i;\n    open(my $OUT, '&gt;', $filename) or die(\"Can't open $filename($!)\");\n\n    foreach(1..50){\n        my $nt = int(rand $#dna + 1);\n        $str = $dna[$nt];\n        print $OUT $str;\n    }\n\nclose $filename;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4926965, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDOxy.jpg?s=128&g=1", "display_name": "SadieRose", "link": "https://stackoverflow.com/users/4926965/sadierose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1560806823, "creation_date": 1560746867, "last_edit_date": 1560749011, "question_id": 56624856, "link": "https://stackoverflow.com/questions/56624856/variable-scope-outside-foreach-loop-perl", "title": "Variable Scope outside foreach loop Perl", "body": "<p>Here is the problem:\nGenerating 10 iterations of 50 iterations and accessing the 50 character string outside the inner foreach loop.</p>\n\n<p>I have tried putting the 50x iteration inside a sub function and calling it, but that was unsuccessful.\nThus far, I only get a single character outside the foreach loop whether it's in a sub function or not. I'm fairly certain this is a scope issue that I'm failing to see.</p>\n\n<p>So, code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @dna = ('A','G','T','C');\nmy $i;\nmy $str;\n\nfor ($i=1; $i&lt;11; $i++){\n    #print $i . \" \";\n\n    foreach(1..50){\n        my $nt = int(rand $#dna + 1);\n        $str = $dna[$nt];\n        #correct here all 50 nts\n        print $str;\n    }\n\n#single nt here\n#print $str;\nprint \"\\n\";\n\n}\n</code></pre>\n\n<p>Output: Corerct, but I need to access $str as is below but <i><b>outside</b></i> the foreach loop <b>and</b> within the first for loop.</p>\n\n<p>TGATTAGCGTCCGCGCGTATTGTATTAAGCCACAGAATGTAATGCCAAGA\nGCTATAGGAAGACGCCGATCCCTGGACCGGCACAGGCACGGTAACAGCAG\nTTGTTGTAGGATCCCAGGGAGCGAAGCACGTGAACTGCGACTAATTTCAA\nTAACCAGGCAACACTAAACAGCTCCCATGTGTAAGGACGTATAGGCAGTT\nGTAATTGTAGATCACAAAATTTACACGGTATAGCATTAACTGGAACCTGC\nAACAGTGCCGTTTATTAATCTCCTCTAGTGTAGGGACGAATCGACCACGG\nCGTGAGCAAGCACAAATATCCTTTAGGGGTGTGCTTAAAACACCCAGTAG\nGAGTTCATAGGCCAACAATATGGCAAAGCCTTGCCCCATCAAATTCGGCG\nTTGCGTCTGCGAACACTGTTGGTGTGCCTTTAGTGCGGGTTACTCGAGAA\nCGCGATCTCCGTTTATAACGCTAGCAAACTACTACGGACCGAGGCATCGC</p>\n\n<p>I removed the extra space in the string. It was superfluous.</p>\n\n<p>This was another attempt at getting to the variable to no avail:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str;\nmy @dna = ('A','G','T','C');\n\nfor (my $i=1; $i&lt;11; $i++){\n    fifty();\n    print $str;\n}\n\nsub fifty {\n    foreach (1 .. 50){\n        my $nt = int(rand $#dna + 1);\n        $str = $dna[$nt];\n        return $str;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "lwp"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560746625, "post_id": 56624683, "comment_id": 99822064, "body": "Works for me ... ?  This <code>perl -MLWP::Simple -wE&#39;say get(&quot;http:&#47;&#47;www.perlmeme.org&quot;)&#39;</code> prints the page (ran from command-line)."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747320, "post_id": 56624683, "comment_id": 99822261, "body": "Thank, didnt work either, I got Can&#39;t find string terminator &quot;&#39;&quot; anywhere before EOF at -e line 1. Also tried with perl -e LWP::Simple -wE &#39;say get(&quot;<a href=\"http://www.perlmeme.org&quot;\" rel=\"nofollow noreferrer\">perlmeme.org&quot;</a>)&#39; , no luck"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747578, "post_id": 56624683, "comment_id": 99822341, "body": "Oh ... that&#39;s about basic syntax ... well,  I really meant to say that you probably have a connection issue or some such (since it works for me)."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747733, "post_id": 56624683, "comment_id": 99822377, "body": "You are probably right, my firewall and proxy is filtering my script out, I will have to try at home, but its very frustrating as you probably can understand that everywhere I read they tell LWP useragent is so easy but I cant even simply get a json out. I will ask that in another post. Sorry..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747855, "post_id": 56624683, "comment_id": 99822408, "body": "eh, sorry about that ... i sure get the frustration.  This problem, it seems that it&#39;s not about the module.  That <code>JSON</code> thing ... yes, ask a question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560748183, "post_id": 56624683, "comment_id": 99822492, "body": "On Windows you need to invert the quotes: <code>perl -MLWP::Simple -wE &quot;say get(&#39;http:&#47;&#47;www.perlmeme.org&#39;)&quot;</code> (but that will just give you the same non-result)."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1560747246, "post_id": 56624826, "comment_id": 99822236, "body": "Thanks but didnt work, i got : 500 Can&#39;t connect to www.perlmeme.org:80 at get.pl line 8."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1560747376, "post_id": 56624826, "comment_id": 99822281, "body": "@dbnoob Can you <code>ping www.perlmeme.org</code>? Also, what OS are you on?"}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1560747545, "post_id": 56624826, "comment_id": 99822334, "body": "No, i cannot ping, im behind proxy and firewall, but I tried out intranet website and still no luck. But I get 401 unauthorised error...may be thats why."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1560748043, "post_id": 56624826, "comment_id": 99822454, "body": "@dbnoob Yeah, looks like something is blocking your connection attempts. 401 means the connection succeeded, but the site itself rejected your request. It probably wants a username / password."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1560748085, "post_id": 56624826, "comment_id": 99822466, "body": "oh, im on windows... thanks @melpomene, you all are very helpful, i shall try from home and post back."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 1, "creation_date": 1560764665, "post_id": 56624826, "comment_id": 99829372, "body": "Hey guys,It works from home. Thanks zdim and melpomene"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560789448, "post_id": 56624826, "comment_id": 99842294, "body": "I wrote <a href=\"https://metacpan.org/pod/HTTP::Simple\" rel=\"nofollow noreferrer\">HTTP::Simple</a> if you want an LWP::Simple-like interface with more useful (or at least, existing) error handling."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1560746560, "creation_date": 1560746560, "answer_id": 56624826, "question_id": 56624683, "link": "https://stackoverflow.com/questions/56624683/lwpsimple-get-fails-mysteriously/56624826#56624826", "title": "LWP::Simple get() fails mysteriously", "body": "<p>LWP::Simple really is simple. It assumes the <code>GET</code> request will probably succeed and does not provide any interesting error information.</p>\n\n<p>Try this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $agent = LWP::UserAgent-&gt;new;\nmy $response = $agent-&gt;get('http://www.perlmeme.org');\n\n$response-&gt;is_success or die $response-&gt;status_line;\nprint $response-&gt;decoded_content;\n</code></pre>\n\n<p>That should at least give you an error message.</p>\n\n<p>(You don't need <code>exit 0</code> at the end; that's the default behavior anyway.)</p>\n"}], "owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560746631, "creation_date": 1560745376, "last_edit_date": 1560746631, "question_id": 56624683, "link": "https://stackoverflow.com/questions/56624683/lwpsimple-get-fails-mysteriously", "title": "LWP::Simple get() fails mysteriously", "body": "<p>In <a href=\"http://perlmeme.org/tutorials/lwp.html\" rel=\"nofollow noreferrer\">http://perlmeme.org/tutorials/lwp.html</a> the first example with LWP::Simple didn't work. I simply copied the code and ran:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::Simple;\n\nmy $content = get('http://www.perlmeme.org') or die 'Unable to get page';\nprint $content; \n\n exit 0;\n</code></pre>\n\n<p>And it didn't work, threw error: <code>Unable to get page at get.pl line 6.</code></p>\n\n<p>What's going on?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560743500, "post_id": 56624472, "comment_id": 99821511, "body": "As the error message says, you should have <code>while (my $filename = readdir(DIR))</code>.  What do you mean by &quot;<i>combined this to another script</i>&quot; -- how do you &quot;<i>combine</i>&quot; them?"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560743632, "post_id": 56624472, "comment_id": 99821535, "body": "actually not a combine.. im adding this to a existing script."}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560743787, "post_id": 56624472, "comment_id": 99821557, "body": "but my concern why it works if i run only above script and gives this error when i run my script which is included this ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560744699, "post_id": 56624472, "comment_id": 99821710, "body": "A guess: In this script you don&#39;t have <code>use strict;</code> so a variable introduced as <code>$fileName</code> (no <code>my</code>) is OK.  But the other script has <code>use strict;</code> so all variables have to be declared with <code>my</code>, so when you add this code to that script the undeclared <code>$fileName</code> now draws that error message.  (Btw, my recommendation: <i>always</i> have <code>use strict;</code> and <code>use warnings;</code> at the beginning of every script.)"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747582, "post_id": 56624472, "comment_id": 99822344, "body": "yes!!!! LIFE SAVIOR!!! thanks"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560747802, "post_id": 56624472, "comment_id": 99822396, "body": "maybe in future someone will get same question ?"}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1560748837, "post_id": 56624999, "comment_id": 99822670, "body": "thanks for the explanation. of course ill update the script."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1560747902, "creation_date": 1560747902, "answer_id": 56624999, "question_id": 56624472, "link": "https://stackoverflow.com/questions/56624472/symlink-two-dirs-in-perl/56624999#56624999", "title": "Symlink two dirs in perl", "body": "<p>In your code <code>$fileName</code> is not declared. In the absence of <code>strict</code> mode, it implicitly becomes a global variable.</p>\n\n<p>However, your other script probably does <code>use strict;</code> (as it should), so undeclared variables are an error. The fix is (as the error message suggests) to make it a local variable with <code>my</code>:</p>\n\n<pre><code>while( ( my $fileName = readdir(DIR))){\n</code></pre>\n\n<hr>\n\n<p>By the way, <code>DIR</code> is also effectively global in your code. There's no reason for that:</p>\n\n<pre><code>opendir(my $dh, $Directory) or die \"$0: error in opening directory $Directory: $!\\n\";\nwhile (my $fileName = readdir($dh)) {\n</code></pre>\n\n<p>You can use a normal variable instead of a bareword handle. Also, the error message should include <code>$0</code> (the name of your script) and <code>$!</code> (the reason for the error).</p>\n\n<p>Also, you probably shouldn't try to symlink <code>.</code> and <code>..</code>:</p>\n\n<pre><code>    next if $fileName eq '.' || $fileName eq '..';\n</code></pre>\n\n<p>As for <code>my $filePath = \"$Directory\".\"$fileName\"</code>, you should either use plain concatenation or string interpolation:</p>\n\n<pre><code>    my $filePath = $Directory . $fileName;\n    # -or-\n    my $filePath = \"$Directory$fileName\";\n</code></pre>\n\n<p>There's no need to quote <code>\"$variables\"</code> on their own. This isn't a shell script.</p>\n\n<p><code>symlink</code> can fail. Your code should probably check for that:</p>\n\n<pre><code>    symlink($filePath, $symLinkDirectory . $fileName) or warn \"$0: can't symlink $filePath to $symLinkDirectory$fileName: $!\\n\";\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 56624999, "answer_count": 1, "score": 1, "last_activity_date": 1560748338, "creation_date": 1560743036, "last_edit_date": 1560748338, "question_id": 56624472, "link": "https://stackoverflow.com/questions/56624472/symlink-two-dirs-in-perl", "title": "Symlink two dirs in perl", "body": "<p>I have below code for symlink two dirs..</p>\n\n<pre><code>my $Directory = \"/data/backups/\";\nmy $symLinkDirectory = \"newdisk/data/backups/\";\n\nopendir ( DIR, $Directory ) || die \"Error in opening directory $Directory\\n\";\nwhile( ( $fileName = readdir(DIR))){\n    my $filePath = \"$Directory\".\"$fileName\";\n    symlink(\"$filePath\",\"$symLinkDirectory\".\"$fileName\");\n}\n\nclosedir(DIR);\n</code></pre>\n\n<p>This works fine when i run it locally.. but when i combined  this to another script this give an error..</p>\n\n<pre><code>Global symbol \"$fileName\" requires explicit package name (did you forget to declare \"my $fileName\"?) at\n</code></pre>\n\n<p>Any idea why this happen ? why works in local and not when combined?</p>\n"}, {"tags": ["perl", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1560652060, "post_id": 56615455, "comment_id": 99805444, "body": "Thank you, but I don&#39;t see how the scripts can differ in the number of elements in <code>@ARGV</code>.  AFAICT, whenever the script is called with exactly two arguments, <code>@ARGV</code> will be empty by the time the <code>while ( &lt;&gt; ) {</code> line is executed, regardless of which version of the script I&#39;m referring to."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1560661123, "post_id": 56615455, "comment_id": 99806457, "body": "@kjo  Did you try the second &quot;one&quot;-liner?  Or, add to your script <code>say &quot;@ARGV&quot;;</code> after you call the sub.  The sub doesn&#39;t empty the <code>@ARGV</code>, since it (nicely!) uses its (<code>local</code>) copy.   Thus the <code>while</code> in the main has filenames in <code>@ARGV</code> and that&#39;s what it does (prints those files); it never gets to <code>STDIN</code>. Another way to see this: add another <code>print while &lt;&gt;;</code>, at the end of your script.  Then <i>that</i> one will wait at <code>STDIN</code>.  (These are some of the things I did here for testing.) And try the one-liners I posted."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1560760467, "last_edit_date": 1560760467, "creation_date": 1560649230, "answer_id": 56615455, "question_id": 56615229, "link": "https://stackoverflow.com/questions/56615229/function-definition-changes-the-outward-behavior-of/56615455#56615455", "title": "Function definition changes the outward behavior of &lt;&gt;", "body": "<p>For <code>&lt;&gt;</code> to work with <code>STDIN</code> it has to be called when <code>@ARGV</code> is  empty. If there are filenames in <code>@ARGV</code> when <code>&lt;&gt;</code> is run they are removed from there as files are read, and then you'd <em>need to call <code>&lt;&gt;</code> again</em> in order to wait for the <code>STDIN</code>.</p>\n\n<pre><code>perl -wE'if (@ARGV) { print while &lt;&gt; }; print while &lt;&gt;' file\n</code></pre>\n\n<p>It is the second <code>print while &lt;&gt;</code> that waits on <code>STDIN</code> (without it <code>file</code> is printed and program exits).</p>\n\n<p>That could in principle happen with your sub, if it were to read all files from <code>@ARGV</code> and once the control is back at the <code>&lt;&gt;</code> invocation in the main that one would then wait for <code>STDIN</code>. </p>\n\n<p>However, your sub <em>localizes</em> the <code>@ARGV</code> (good practice!), so once it exits the global <code>@ARGV</code> still has what it did in the beginning.<sup>&dagger;</sup> Then <code>while</code> in the main reads those files (again), gets that one <code>undef</code> that it is due at the end of the last file, and exits. </p>\n\n<p>One way to see this: remove all from <code>@ARGV</code> after the sub that reads input is called and before the <code>while</code> in main,. Then that <code>while</code> will wait for <code>STDIN</code> again, regardless of the sub. Like</p>\n\n<pre><code>perl -wE'\n    sub ri { local @ARGV = @_; return &lt;&gt; }; \n    print for ri(@ARGV); \n    say\"argv: @ARGV\";\n    @ARGV=(); \n    print while &lt;&gt;\n' file\n</code></pre>\n\n<p>(A detail to note is that your example seems to take two files while the sub deals with one, so even if the sub were to use the global <code>@ARGV</code> (not <code>local</code>-ized) and remove a file from <code>@ARGV</code>, there'd still be one file left there to occupy the <code>while</code> in the main.  So you still wouldn't get <code>STDIN</code>.)</p>\n\n<p>Another way to see all this: add another <code>print while &lt;&gt;</code>, at the end; <em>that</em> one will wait on <code>STDIN</code>.</p>\n\n<p>This is all described in <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">I/O Operators (perlop)</a>, albeit it requires quite close reading.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;On <code>local $GLOBAL_VAR;</code> the value of <code>$GLOBAL_VAR</code> is copied away, and it gets restored as that scope is exited. So <a href=\"https://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a> protects the global variable from changes, within its scope.</p>\n"}, {"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1560687319, "post_id": 56616700, "comment_id": 99810855, "body": "Thank you.  Adding <code>1 while &lt;&gt;;</code> to <code>slurp</code> restored the desired behavior.  It is still somewhat startling, because it suggests that the localization of <code>@ARGV</code> in <code>slurp</code> is not perfect.  Its effects &quot;leak&quot;, to affect external code..."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 1, "creation_date": 1560699098, "post_id": 56616700, "comment_id": 99813497, "body": "@kjo It is not <a href=\"https://perldoc.pl/variables/@ARGV\" rel=\"nofollow noreferrer\">@ARGV</a> that &quot;leaks&quot;, but the <a href=\"https://perldoc.pl/variables/ARGV\" rel=\"nofollow noreferrer\">ARGV</a> magic (global) handle that an empty readline operator makes use of. All handles keep their state within and <code>ARGV</code> has additional state as to which file it is iterating through (represented by <a href=\"https://perldoc.pl/variables/%24ARGV\" rel=\"nofollow noreferrer\">$ARGV</a>). When you return without getting to eof, it maintains its state, and it only uses <code>STDIN</code> if it <i>starts</i> with an empty <code>@ARGV</code>."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1560703159, "post_id": 56616700, "comment_id": 99814423, "body": "@Grinnz: thank you for those observations!  They spurred further experimentation.  I discovered that adding <code>local *ARGV;</code> to the definition of <code>slurp</code> obviates the need to exhaust the iterator with <code>1 while &lt;&gt;</code>..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560703417, "post_id": 56616700, "comment_id": 99814491, "body": "Interesting! I would not have anticipated that outcome."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1560703605, "post_id": 56616700, "comment_id": 99814525, "body": "@ikegami: as a further wrinkle, the <code>local *ARGV</code> must happen before the <code>local @ARGV</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1560703663, "post_id": 56616700, "comment_id": 99814535, "body": "Yes, because <code>*ARGV</code> (the symbol table entry for variables named <code>ARGV</code>) contains <code>$ARGV</code> (<code>${ *ARGV{SCALAR} }</code>), <code>@ARGV</code> (<code>@{ *ARGV{ARRAY} }</code>), etc in addition to <code>*ARGV{IO}</code> (the file handle). You could try the more targetted <code>local *ARGV{IO};</code>, but I don&#39;t know if you can localize glob slots."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1560704380, "post_id": 56616700, "comment_id": 99814686, "body": "@ikegami: <code>local *ARGV{IO}</code> resulted in an error, but I&#39;m happy with <code>local *ARGV</code>; as you noted, it renders the <code>local @ARGV</code> unnecessary."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560704418, "post_id": 56616700, "comment_id": 99814694, "body": "Not surprised, but thanks for letting me know. And not just <code>@ARGV</code>; it&#39;s good to localize <code>$ARGV</code> too. So yeah, it&#39;s a good way to go."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1560668994, "last_edit_date": 1560668994, "creation_date": 1560667252, "answer_id": 56616700, "question_id": 56615229, "link": "https://stackoverflow.com/questions/56615229/function-definition-changes-the-outward-behavior-of/56616700#56616700", "title": "Function definition changes the outward behavior of &lt;&gt;", "body": "<p>You need to exhaust the iterator (by calling it until it returns <code>undef</code>) before it considers using STDIN again.</p>\n\n<pre><code>sub slurp {\n   local $/ = undef;\n   local @ARGV = @_;\n   my $rv = &lt;&gt;;   # Read file specified by $_[0].\n   1 while &lt;&gt;;    # Exhaust the iterator.\n   return $rv;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub slurp {\n   local $/ = undef;\n   local @ARGV = @_;\n   my $rv = \"\";\n   while (my $file = &lt;&gt;) {\n      $rv .= $file;\n   }\n\n   return $rv;  # Concatenation of all files specified by @_.\n}\n</code></pre>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3057, "favorite_count": 0, "accepted_answer_id": 56616700, "answer_count": 2, "score": 1, "last_activity_date": 1560760467, "creation_date": 1560645890, "last_edit_date": 1560652245, "question_id": 56615229, "link": "https://stackoverflow.com/questions/56615229/function-definition-changes-the-outward-behavior-of", "title": "Function definition changes the outward behavior of &lt;&gt;", "body": "<p><strong>IMPORTANT:</strong> The motivation for this question is not to solve a problem, but to understand Perl's behavior.</p>\n\n<hr>\n\n<p>Consider the following toy script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\n\nsub main {\n\n  @ARGV &gt;= 2 or die \"$0: not enough arguments\\n\";\n\n  my $arg_a = shift @ARGV;\n  my $arg_b = shift @ARGV;\n\n  while ( &lt;&gt; ) {\n    print \"+++ $_\";\n  }\n}\n\nmain();\n\n__END__\n</code></pre>\n\n<p>This script takes 2 or more arguments (which it doesn't use).  All it does is to echo (with a <code>+++</code> prefix) either its standard input or the contents of however many files are specified as its third, fourth, etc., arguments.</p>\n\n<p>So far the code behaves as I expect it to.</p>\n\n<p>Now consider this slightly modified version:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\n\nsub slurp {\n  local $/ = undef;\n  local @ARGV = @_;\n  return &lt;&gt;;\n}\n\nsub main {\n\n  @ARGV &gt;= 2 or die \"$0: not enough arguments\\n\";\n\n  my $arg_a = shift @ARGV;\n  my $arg_b = shift @ARGV;\n\n  my $content = slurp( $arg_a );\n\n  while ( &lt;&gt; ) {\n    print \"+++ $_\";\n  }\n}\n\nmain();\n\n__END__\n</code></pre>\n\n<p>This version of the script does not ignore its first argument; rather, it interprets as the path to a file, and reads its contents into the variable <code>$content</code> (which it subsequently ignores).  Other than this, the script should behave exactly as before.</p>\n\n<p>Unfortunately, this version of the script no longer echoes its stdin (though it still does echo the contents of its 3rd, 4th, etc. arguments).</p>\n\n<p>I know that the problem has to do with the way the <code>slurp</code> function is implemented, because if I change this implementation to</p>\n\n<pre><code>sub slurp {\n  local $/ = undef;\n  open my $input, $_[ 0 ] or die \"$!\";\n  return &lt;$input&gt;;\n}\n</code></pre>\n\n<p>...then the script once more echoes its stdin, when available.</p>\n\n<p>I would like to understand why the first version of <code>slurp</code> causes the script to stop working as expected.</p>\n"}, {"tags": ["regex", "perl", "vim", "sed", "equivalent"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5207995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mgCHnR0Kb2k/AAAAAAAAAAI/AAAAAAAABso/wC5zrlRv700/photo.jpg?sz=128", "display_name": "Atlas Sullivan", "link": "https://stackoverflow.com/users/5207995/atlas-sullivan"}, "edited": false, "score": 0, "creation_date": 1560603617, "post_id": 56610576, "comment_id": 99796089, "body": "yeah I just copypasted it to be quick. poor practice. thanks for the answer, by the way."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1560614450, "post_id": 56610576, "comment_id": 99798764, "body": "See <a href=\"https://perldoc.pl/perlrebackslash#Modifiers\" rel=\"nofollow noreferrer\">perlrebackslash</a>, but note these can be used in any interpolated string, not just regex replacements."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560786037, "post_id": 56610576, "comment_id": 99840842, "body": "That regex isn&#39;t invalid. You can use <code>\\1</code>, <code>\\2</code>, etc in the replacement text of a substitution operator. It&#39;s not recommended and it&#39;ll trigger a warning saying &quot;\\1 better written as $1&quot;. But it works :-)"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560786202, "post_id": 56610576, "comment_id": 99840923, "body": "@DaveCross: I didn&#39;t say that <code>\\1</code> is invalid, but the regex <code>(*.)</code> <b>is</b>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1560786938, "post_id": 56610576, "comment_id": 99841310, "body": "@Toto: Oops. Yes, you&#39;re right. Sorry. Ignore me :-/"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 6, "last_activity_date": 1560603182, "creation_date": 1560603182, "answer_id": 56610576, "question_id": 56610555, "link": "https://stackoverflow.com/questions/56610555/is-there-a-perl-equivalent-to-seds-or-vims-l-and-u-in-substituting/56610576#56610576", "title": "Is there a perl equivalent to sed&#39;s or vim&#39;s `\\l` and `\\u` in substituting?", "body": "<p>Yes, all of them exist in Perl.</p>\n\n<p>But your regex is invalid, I guess you want:</p>\n\n<pre><code>while(&lt;&gt;) {\n  s/(.*)/\\L$1/g;\n}\n</code></pre>\n\n<p>If you want to lowercased the whole string, I suggest you <a href=\"https://perldoc.perl.org/5.30.0/functions/lc.html\" rel=\"noreferrer\">lc</a>:</p>\n\n<pre><code>while(&lt;&gt;) {\n  $_ = lc $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5207995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mgCHnR0Kb2k/AAAAAAAAAAI/AAAAAAAABso/wC5zrlRv700/photo.jpg?sz=128", "display_name": "Atlas Sullivan", "link": "https://stackoverflow.com/users/5207995/atlas-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 56610576, "answer_count": 1, "score": 0, "last_activity_date": 1560603182, "creation_date": 1560602980, "question_id": 56610555, "link": "https://stackoverflow.com/questions/56610555/is-there-a-perl-equivalent-to-seds-or-vims-l-and-u-in-substituting", "title": "Is there a perl equivalent to sed&#39;s or vim&#39;s `\\l` and `\\u` in substituting?", "body": "<p>in <code>sed(1)</code> &amp; <code>vim(1)</code>, there are a set of 'operators' in the regex substitution syntax, <code>\\u</code>, <code>\\l</code>, <code>\\U</code>, &amp; <code>\\L</code>. These translit characters to either lowercase, or uppercase. So if one were to type <code>s/(*.)/\\L\\1/g</code>, it would translit the entire string to lowercase, theoretically.</p>\n\n<p>Is there equivalent functionality in Perl? Is something or eqivalent like...</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while(&lt;&gt;) {\n  s/(*.)/\\L\\1/g;\n}\n</code></pre>\n\n<p>vaild?</p>\n"}, {"tags": ["perl", "http", "methods", "head", "fuzzing"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1560581222, "post_id": 56607993, "comment_id": 99791475, "body": "Did you copy your code correctly? Looks like you&#39;re missing a closing quote <code>&quot;</code> on line 4."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1560584002, "post_id": 56607993, "comment_id": 99792008, "body": "You&#39;re calling method <code>get</code> on <code>$browser</code> ... but no <code>$browser</code> variable has been defined anywhere. So, yeah, it&#39;s trying to &quot;<i>call method &quot;get&quot; on an undefined value...</i>&quot;.  Seems that that <code>$browser</code> should really be <code>$ua</code>..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560584339, "post_id": 56607993, "comment_id": 99792071, "body": "In the call to <code>get</code> (once you fix it to be called on <code>$ua</code>) you don&#39;t want the single quotes around <code>$url</code>. That variable need be evaluated (to the URL string), what can&#39;t happen under <code>&#39;&#39;</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560795659, "post_id": 56607993, "comment_id": 99844735, "body": "You got responses for the code you posted, to fix errors (and to employ good practices).   But as for &quot;fuzz&quot; testing, I don&#39;t see how the question connects with that topic (except for mentioning it)? I think that there are modules for that (or that provide for it), search."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560795693, "post_id": 56607993, "comment_id": 99844744, "body": "Also, please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1560765417, "creation_date": 1560765417, "answer_id": 56628920, "question_id": 56607993, "link": "https://stackoverflow.com/questions/56607993/how-to-pass-fuzz-logic-in-head-http-for-perl/56628920#56628920", "title": "How to pass fuzz logic in head http for perl?", "body": "<p>It seems likely that you do not have <code>use strict</code> turned on in your code. This is a mistake. The vast majority of experienced Perl programmers will recommend starting all of your Perl code with:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>as these additions will tell you about a huge number of silly mistakes that programmers commonly make.</p>\n\n<p>One of the most important things that <code>use strict</code> does is to force you to declare your variables. This prevents errors like the one you seem to have made here.</p>\n\n<p>You create an LWP::UserAgent object in a variable called <code>$ua</code>. You then try to use that object in a variable called <code>$browser</code>. You are using the inconsistant variable names.</p>\n\n<p>(It's also worth pointing out that variables are not expanded in single-quoted strings - so you want <code>$ua-&gt;get($url, ...)</code>, not <code>$ua-&gt;get('$url', ...)</code>.)</p>\n"}], "owner": {"reputation": 27, "user_id": 8684368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6f621eb69118195e11a996d1671e48?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Ahmad", "link": "https://stackoverflow.com/users/8684368/haroon-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56628920, "answer_count": 1, "score": 0, "last_activity_date": 1560765417, "creation_date": 1560580701, "question_id": 56607993, "link": "https://stackoverflow.com/questions/56607993/how-to-pass-fuzz-logic-in-head-http-for-perl", "title": "How to pass fuzz logic in head http for perl?", "body": "<p>I want to fuzz http parameters using perl, how to do that, please view my sub code.</p>\n\n<p>I have tried method using head but I'm getting error.</p>\n\n<p>Code from line 620 to 624.</p>\n\n<pre><code>sub print_fuzz_methods( ) {\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:31.0) Gecko/20130401 Firefox/31.0.\");\nprint color(\"BOLD RED\"), \"\\n\\n                              my $res = $ua-&gt;head( $url );\nmy $response = $browser-&gt;get(\n  '$url',\n  'Referer' =&gt;  \"&lt;SCRIPT&gt;alert('document.domain='+document.domain)&lt;/SCRIPT&gt;\",\n);\n</code></pre>\n\n<p>Error:\nCan't call method \"get\" on an undefined value at tishna.pl line 621,  line 1</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560542618, "post_id": 56603171, "comment_id": 99785225, "body": "I cannot reproduce. Maybe try running <code>pp</code> through the debugger: <code>perl -d pp -o test -A addlist.txt test1.pl</code> and try to locate the problem? Or add an issue at <a href=\"https://github.com/rschupp/PAR-Packer\" rel=\"nofollow noreferrer\">the issue tracker</a>"}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1560612313, "post_id": 56603171, "comment_id": 99798251, "body": "Have you put <code>use lib &#39;lib&#39;;</code> in your perl script?"}, {"owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "edited": false, "score": 0, "creation_date": 1560655541, "post_id": 56603171, "comment_id": 99805808, "body": "yes, I did use <code>use lib path_of_lib</code> in my script"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "is_accepted": false, "score": 1, "last_activity_date": 1560807365, "creation_date": 1560807365, "answer_id": 56639197, "question_id": 56603171, "link": "https://stackoverflow.com/questions/56603171/get-error-when-use-pp-for-perl-script-under-ubuntu/56639197#56639197", "title": "get error when use pp for perl script under Ubuntu", "body": "<p>I get help from githut. </p>\n\n<p>The error is because the end of line of addlist.txt is windows. When I save the addlist.txt as Unix/Linux end of line, the error gong.</p>\n"}], "owner": {"reputation": 171, "user_id": 2799433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011e057102e676020e526b0b82f1949?s=128&d=identicon&r=PG&f=1", "display_name": "user2799433", "link": "https://stackoverflow.com/users/2799433/user2799433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560807365, "creation_date": 1560535293, "question_id": 56603171, "link": "https://stackoverflow.com/questions/56603171/get-error-when-use-pp-for-perl-script-under-ubuntu", "title": "get error when use pp for perl script under Ubuntu", "body": "<p>command:</p>\n\n<pre><code>pp -o test -A addlist.txt test1.pl\n</code></pre>\n\n<p>content in addlist.txt:</p>\n\n<pre><code>lib_3.pm\nlib\n</code></pre>\n\n<p>there are <code>lib_1.pm</code> and <code>lib_2.pm</code> under folder <code>lib</code>\ntest1.pl call functions defined in <code>lib_1.pm</code> and <code>lib_2.pm</code> and <code>lib_3.pm</code></p>\n\n<p>after I run the command above, I get error:</p>\n\n<pre><code>for packingin/pp: cannot find file or directory lib_3.pm\nfor packingin/pp: cannot find file or directory lib\n</code></pre>\n\n<p>Although I get the error, the output file from pp can print correct output. Who can tell me why?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560526608, "post_id": 56601214, "comment_id": 99778543, "body": "What parts of the string are varying? What&#39;s wrong with <code>&#47;^The file FILENAME has not been received$&#47;</code>?"}, {"owner": {"reputation": 305, "user_id": 6139563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pepuy.jpg?s=128&g=1", "display_name": "greenage", "link": "https://stackoverflow.com/users/6139563/greenage"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560529211, "post_id": 56601214, "comment_id": 99779820, "body": "Thank you, the FILENAME is variable.  Should a specific filename appear in the string I want the match to fail.  But if any other filename appears, I need a match.  Hope that clarifies.  Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560526960, "post_id": 56601272, "comment_id": 99778717, "body": "Why a separate <code>$regex</code> variable? Why <code>&#47;g</code>? What &quot;named capture groups&quot;?"}, {"owner": {"reputation": 305, "user_id": 6139563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pepuy.jpg?s=128&g=1", "display_name": "greenage", "link": "https://stackoverflow.com/users/6139563/greenage"}, "edited": false, "score": 1, "creation_date": 1560529119, "post_id": 56601272, "comment_id": 99779782, "body": "Thanks all, the filename is a variable, so if the file name in the middle of the entire string is FAILNAME then it should fail to match.  But anything else, should match.  As you mention, my regex works if my string ends at the filename.  But there is extra text which I&#39;d like to also match.  Just exclude the FAILNAME.  Trying to avoid matching a particular filename should it appear in the string."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": -1, "last_activity_date": 1560530604, "last_edit_date": 1560530604, "creation_date": 1560526292, "answer_id": 56601272, "question_id": 56601214, "link": "https://stackoverflow.com/questions/56601214/perl-regex-to-exclude-certain-strings-within-the-middle-of-a-string/56601272#56601272", "title": "Perl Regex to exclude certain strings within the middle of a string", "body": "<p>My guess is that we wish to fail those that have <code>FAILNAME</code>, which your original expression seems to be working fine, and we'd then slightly modify that, which this might work: </p>\n\n<pre><code>^(?=The\\sfile\\s)(?!.*\\s\\bFAILNAME\\b\\s.*).*$\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/ApibxX/1/\" rel=\"nofollow noreferrer\">Demo 1</a></h3>\n\n<p>Here we are adding two spaces as an extra left and right boundaries, which if we do not wish to have those, we'd be simply excluding. </p>\n\n<h3>Example</h3>\n\n<pre><code>use strict;\n\nmy $str = 'The file FILENAME has not been received\nThe file FILENAME has been received\nThe file FILENAME\nThe file AFAILNAME has not been received\nFILENAME\nThe file FAILNAME has not been received\nFAILNAME has not been received\nThe file FAILNAME\n\n\n';\nmy $regex = qr/^(?=The\\sfile\\s)(?!.*\\s\\bFAILNAME\\b\\s.*).*$/mp;\n\nif ( $str =~ /$regex/g ) {\n  print \"Whole match is ${^MATCH} and its start/end positions can be obtained via \\$-[0] and \\$+[0]\\n\";\n  # print \"Capture Group 1 is $1 and its start/end positions can be obtained via \\$-[1] and \\$+[1]\\n\";\n  # print \"Capture Group 2 is $2 ... and so on\\n\";\n}\n\n# ${^POSTMATCH} and ${^PREMATCH} are also available with the use of '/p'\n# Named capture groups can be called via $+{name}\n</code></pre>\n\n<h3>RegEx Circuit</h3>\n\n<p><a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a> visualizes regular expressions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YjEac.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YjEac.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 6139563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pepuy.jpg?s=128&g=1", "display_name": "greenage", "link": "https://stackoverflow.com/users/6139563/greenage"}, "edited": false, "score": 0, "creation_date": 1560769882, "post_id": 56601431, "comment_id": 99832017, "body": "Thank you! I&#39;m getting a pattern error on a demo: <a href=\"https://regex101.com/r/j4VSVw/1\" rel=\"nofollow noreferrer\">regex101.com/r/j4VSVw/1</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 305, "user_id": 6139563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pepuy.jpg?s=128&g=1", "display_name": "greenage", "link": "https://stackoverflow.com/users/6139563/greenage"}, "edited": false, "score": 0, "creation_date": 1560788096, "post_id": 56601431, "comment_id": 99841799, "body": "@greenage That&#39;s because my answer assumes Perl, but regex101 uses PHP (and the PCRE library)."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1560526871, "creation_date": 1560526871, "answer_id": 56601431, "question_id": 56601214, "link": "https://stackoverflow.com/questions/56601214/perl-regex-to-exclude-certain-strings-within-the-middle-of-a-string/56601431#56601431", "title": "Perl Regex to exclude certain strings within the middle of a string", "body": "<p>I'd do it in two steps:</p>\n\n<pre><code>if ($message =~ /\\AThe file (\\S+) has not been received\\z/ &amp;&amp; $1 ne 'FAILNAME') {\n</code></pre>\n\n<p>I.e. use a regex to validate the general format and extract the filename, then check the extracted name separately.</p>\n\n<p>Why cram everything into a single regex?</p>\n\n<p>Speaking of which, you can actually cram arbitrary conditions into a regex. I wouldn't recommend it in this case, but:</p>\n\n<pre><code>/\\AThe file (\\S+) has not been received\\z(?(?{ $1 eq 'FAILNAME' })(*FAIL))/\n</code></pre>\n\n<p>This extended pattern essentially says \"if <code>$1</code> equals <code>FAILNAME</code>, fail the match\".</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560527192, "post_id": 56601444, "comment_id": 99778853, "body": "That would also reject <code>FAILNAME-NOT</code>. Your second regex even rejects <code>NOT-FAILNAME</code>."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560527480, "post_id": 56601444, "comment_id": 99778990, "body": "@ melpomene You are right, thank you! I have added a word boundaries."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560527816, "post_id": 56601444, "comment_id": 99779172, "body": "Anda a version with lookarounds as well."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560527913, "post_id": 56601444, "comment_id": 99779208, "body": "That last one will fail reject <code>NOT A FAILNAME</code>."}], "tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 2, "last_activity_date": 1560529669, "last_edit_date": 1560529669, "creation_date": 1560526935, "answer_id": 56601444, "question_id": 56601214, "link": "https://stackoverflow.com/questions/56601214/perl-regex-to-exclude-certain-strings-within-the-middle-of-a-string/56601444#56601444", "title": "Perl Regex to exclude certain strings within the middle of a string", "body": "<p>You could move the negative lookahead to after <code>file</code> followed by a whitespace character to assert what is directly on the right is not <code>FAILNAME</code>:</p>\n\n<pre><code>^The\\sfile\\s(?!\\bFAILNAME\\b).*$\n</code></pre>\n\n<p>Or of it can not occur in the string after <code>The file</code> use a quantifier:</p>\n\n<pre><code>^The\\sfile\\s(?!.*\\bFAILNAME\\b).*$\n</code></pre>\n\n<p>If there can not be anything before and after <code>FAILNAME</code> you could lookarounds:</p>\n\n<pre><code>^The\\sfile\\s(?!.*(?&lt;!\\S)FAILNAME(?!\\S)).*$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/88oL1D/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}], "owner": {"reputation": 305, "user_id": 6139563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pepuy.jpg?s=128&g=1", "display_name": "greenage", "link": "https://stackoverflow.com/users/6139563/greenage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 56601431, "answer_count": 3, "score": 1, "last_activity_date": 1560530604, "creation_date": 1560526067, "question_id": 56601214, "link": "https://stackoverflow.com/questions/56601214/perl-regex-to-exclude-certain-strings-within-the-middle-of-a-string", "title": "Perl Regex to exclude certain strings within the middle of a string", "body": "<p>I have this string:</p>\n\n<pre><code>The file FILENAME has not been received\n</code></pre>\n\n<p>I'm trying to get the regex to match this, but not if the string is this (for example):</p>\n\n<pre><code>The file FAILNAME has not been received\n</code></pre>\n\n<p>I've got this regex so far:</p>\n\n<pre><code>/^(?=.*?\\bThe\\sfile\\b)((?!FAILNAME).)*$/\n</code></pre>\n\n<p>But I'm unsure how to continue the expected text after the exclusion.</p>\n\n<p>I hope I've explained that correctly :)</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["regex", "apache", "perl", "substring", "uri"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560522823, "post_id": 56600243, "comment_id": 99776351, "body": "You tagged this with Perl but is this Perl code? Because in Perl the best way would be with a module, not regex."}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1560522986, "post_id": 56600243, "comment_id": 99776454, "body": "Try <code>&#47;(?:api|web)&#47;(\\w+)&#47;v1&#47;method</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560546049, "post_id": 56600324, "comment_id": 99786344, "body": "While the question is specifically only about a generic path, I think it&#39;s still worth commenting that this solution doesn&#39;t parse a URI (since they mention it in the title) but rather only a path with forward slashes"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1560548136, "post_id": 56600324, "comment_id": 99786920, "body": "It does not parse any URI: it parses the path component of a URI, as the examples in the OP are."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1560524785, "last_edit_date": 1560524785, "creation_date": 1560522976, "answer_id": 56600324, "question_id": 56600243, "link": "https://stackoverflow.com/questions/56600243/get-the-second-string-of-the-uri-with-perl-regex/56600324#56600324", "title": "Get the second string of the URI with Perl regex", "body": "<p>A general regex (Perl or PCRE syntax) solution would be:</p>\n\n<pre><code>^/[^/]+/([^/]+)\n</code></pre>\n\n<p>Each section is delimited with <code>/</code>, so just capture as many non-<code>/</code> characters as there are.</p>\n\n<p>This is preferable to non-greedy regexes because it does not need to backtrack, and allows for whatever else the sections may contain, which can easily contain non-word characters such as <code>-</code> that won't be matched by <code>\\w</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 1, "last_activity_date": 1560524939, "last_edit_date": 1560524939, "creation_date": 1560523681, "answer_id": 56600530, "question_id": 56600243, "link": "https://stackoverflow.com/questions/56600243/get-the-second-string-of-the-uri-with-perl-regex/56600530#56600530", "title": "Get the second string of the URI with Perl regex", "body": "<p>Your pattern <code>([^\\/api]\\w*)</code> consists of a capturing group and a negated character class that will first match 1 time not a <code>/</code>, <code>a</code>, <code>p</code> or <code>i</code>. See <a href=\"https://regex101.com/r/W0s0Hj/1\" rel=\"nofollow noreferrer\">demo</a>.</p>\n\n<p>After that 0+ times a word char will be matched. The pattern could for example only match a single char which is not listed in the character class.</p>\n\n<p>What you might do is use a capturing group and match <code>\\w+</code></p>\n\n<pre><code>^/(?:api|web)/(\\w+)/v1/method\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>^</code> Start of string</li>\n<li><code>(?:api|web)</code> Non capturing group with alternation. Match either api or web</li>\n<li><code>(\\w+)</code> Capturing group 1, match 1+ word chars</li>\n<li><code>/v1/method</code> Match literally as in your example data.</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/cQZX5I/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1560616347, "last_edit_date": 1560616347, "creation_date": 1560524106, "answer_id": 56600642, "question_id": 56600243, "link": "https://stackoverflow.com/questions/56600243/get-the-second-string-of-the-uri-with-perl-regex/56600642#56600642", "title": "Get the second string of the URI with Perl regex", "body": "<p>There are so many options that we can do so, not sure which one would be best, but it could be as simple as: </p>\n\n<pre><code>\\/(.+?)\\/(.+?)\\/.*\n</code></pre>\n\n<p>which our desired output is in the second capturing group <code>$2</code>.</p>\n\n<h3><a href=\"https://regex101.com/r/2T7kZA/1/\" rel=\"nofollow noreferrer\">Demo 1</a></h3>\n\n<h3>Example</h3>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nmain();   \n\nsub main{    \n   my $string = '/api/application/v1/method\n/web/application/v1/method';\n   my $pattern = '\\/(.+?)\\/(.+?)\\/.*';\n   my $match = replace($pattern, '$2', $string); \n   say $match , \" is a match \ud83d\udc9a\ud83d\udc9a\ud83d\udc9a \";\n\n}        \n\nsub replace {\n   my ($pattern, $replacement, $string) = @_;\n   $string =~s/$pattern/$replacement/gee;\n\n   return $string;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>application\napplication is a match \ud83d\udc9a\ud83d\udc9a\ud83d\udc9a\n</code></pre>\n\n<h3>Advice</h3>\n\n<p><a href=\"https://stackoverflow.com/users/4653379/zdim\">zdim</a> advises that: </p>\n\n<blockquote>\n  <p>A legitimate approach, notes: </p>\n  \n  <p>(1) there is no need for the trailing .*</p>\n  \n  <p>(2) Need /|$ (not just /), in case the path finishes without / (to\n  terminate the non-greedy pattern at the end of string, if there is no\n  /)</p>\n  \n  <p>(3) note though that /ee can be vulnerable (even just to errors),\n  since the second evaluation (e) will run code if the first evaluation\n  results in code. And it may be difficult to ensure that that is always\n  done under full control. More to the point, for this purpose there is\n  no reason to run a substitution --- just match and capture is enough.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560541005, "post_id": 56603242, "comment_id": 99784633, "body": "This is a URL; File::Spec would not be appropriate, but URI and Mojo::URL would."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560545285, "post_id": 56603242, "comment_id": 99786116, "body": "@Grinnz nah, apart from dropping the word &quot;URI&quot; they gave us no hints of it, no schema; they ask for regex and all answers, including yours, just parse a path (rightly, as that&#39;s all that&#39;s given).  Btw. I saw no suitable methods in <code>URI</code> (which would be a gross overkill anyway); same with Mojo.  I specifically went out to find something so that I can support use of a module, and ended up with the plain ol&#39; <code>File::Spec</code> (somewhat disappointing)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560545600, "post_id": 56603242, "comment_id": 99786214, "body": "@Grinnz If you know of a module that parses the &quot;host&quot; path in the context of URI and conveniently, I&#39;ll be glad to add it.  (Or if I missed something from <code>URI</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560546149, "post_id": 56603242, "comment_id": 99786371, "body": "@Grinnz I&#39;m curious, did you notice the last sentence (from the main part) in my answer?  Well, and the first two really -- I spell it out that this is only about parsing a path, no?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560548069, "post_id": 56603242, "comment_id": 99786903, "body": "My answer is specifically for a URL path which the OP is clearly asking about. Filesystem paths require the portability provided by File::Spec, such as (most commonly) allowing backslashes to be separators and allowing volume labels on Windows."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560548383, "post_id": 56603242, "comment_id": 99787001, "body": "Mojo::Path is specifically for parsing this part of a URL, so could be used for this: <code>Mojo::Path-&gt;new(&#39;&#47;api&#47;application&#47;v1&#47;method&#39;)-&gt;parts-&gt;[1]</code>. For URI you would use path_segments, which starts with an empty one: <code>(URI-&gt;new(&#39;&#47;api&#47;application&#47;v1&#47;method&#39;)-&gt;path_segments)[2]</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560548735, "post_id": 56603242, "comment_id": 99787098, "body": "Filesystem paths and URI paths are not generally compatible as the former is system dependent and the latter is not; the module <a href=\"https://metacpan.org/pod/URI::file\" rel=\"nofollow noreferrer\">URI::file</a> exists to convert between the two taking the OS into account (with the file: schema of course)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560550538, "post_id": 56603242, "comment_id": 99787516, "body": "@Grinnz Ah, OK, you meant the portability point. I was OK with that ... but I did miss <code>path_segments</code> (I tried it ... ? .. apparently not well), and I wasn&#39;t familiar with <code>Mojo::Path</code>.  Will update shortly, thank you."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560560848, "post_id": 56603242, "comment_id": 99789080, "body": "From past experience, the slowness of URI is entirely unsurprising."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1562117225, "last_edit_date": 1562117225, "creation_date": 1560535760, "answer_id": 56603242, "question_id": 56600243, "link": "https://stackoverflow.com/questions/56600243/get-the-second-string-of-the-uri-with-perl-regex/56603242#56603242", "title": "Get the second string of the URI with Perl regex", "body": "<p>With all the regex, explicitly asked for, I'd like to bring up other approaches.</p>\n\n<p>These also parse only a (URI style) path, like the regex ones, and return the second directory.</p>\n\n<ul>\n<li><p>The most basic and efficient one, just <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> the string on <code>/</code></p>\n\n<pre><code>my $dir = ( split /\\//, $path )[2];\n</code></pre>\n\n<p>The <code>split</code> returns <code>''</code> first (before the first <code>/</code>) thus we need the third element. (Note that we <em>can</em> use an alternate delimiter for the separator pattern, it being regex: <code>split m{/}, $path</code>.)</p></li>\n<li><p>Use appropriate modules, for example <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a></p>\n\n<pre><code>use URI;\nmy $dir = ( URI-&gt;new($path)-&gt;path_segments )[2];\n</code></pre>\n\n<p>or <a href=\"https://metacpan.org/pod/Mojo::Path\" rel=\"nofollow noreferrer\">Mojo::Path</a></p>\n\n<pre><code>use Mojo::Path;\nmy $dir = Mojo::Path-&gt;new($path)-&gt;parts-&gt;[1];\n</code></pre></li>\n</ul>\n\n<p>What to use depends on details of what you do -- if you've got any other work with URLs and web then you clearly want modules for that; otherwise they may (or may not) be an overkill.</p>\n\n<p>I've benchmarked these for a sanity check of what one is paying with modules. </p>\n\n<p>The <code>split</code> either beats regex by up to <code>10-15%</code> (the regex using negated character class and the one based on non-greedy <code>.+?</code> come around the same), or is about the same with them.  They are faster than <code>Mojo</code> by about <code>30%</code>, and only <code>URI</code> lags seriously, by a factor of 5 behind <code>Mojo</code>.</p>\n\n<p>That's for paths typical for real-life URLs, with a handful of short components.  With only two very long strings (10k chars), <code>Mojo::Path</code> (surprisingly for me) is a factor of six ahead of <code>split</code> (!), which is ahead of character-class regex by more than an order of magnitude. </p>\n\n<p>The negated-character-class regex for such long strings beats the non-greedy (<code>.+?</code>) one by a factor of 3, good to know in its own right.</p>\n\n<p>In all this the URI and Mojo objects were created once, ahead of time. </p>\n\n<hr>\n\n<p>Benchmark code. I'd like to note that the details of these timings are far less important than the structure and quality of code.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse URI;\nuse Mojo::Path;\nuse Benchmark qw(cmpthese);\n\nmy $runfor = shift // 3;  #/    \n#my $path = '/' . 'a' x 10_000 . '/' . 'X' x 10_000;\nmy $path = q(/api/app/v1/method);    \nmy $uri = URI-&gt;new($path);\nmy $mojo = Mojo::Path-&gt;new($path);\n\nsub neg_cc {\n    my ($dir) = $path =~ m{ [^/]+ / ([^/]+) }x;      return $dir; #/\n}\nsub non_greedy {\n    my ($dir) = $path =~ m{ .+? / (.+?) (?:/|$) }x;  return $dir; #/  \n}\nsub URI_path {\n    my $dir = ( $uri-&gt;path_segments )[2];            return $dir;\n}\nsub Mojo_path {\n    my $dir = $mojo-&gt;parts-&gt;[1];                     return $dir;\n}\nsub just_split {\n    my $dir = ( split /\\//, $path )[2];              return $dir;\n}\n\ncmpthese( -$runfor, {\n    neg_cc      =&gt; sub { neg_cc($path) },\n    non_greedy  =&gt; sub { non_greedy($path) },\n    just_split  =&gt; sub { just_split($path) },\n    URI_path    =&gt; sub { URI_path($path) },  \n    Mojo_path   =&gt; sub { Mojo_path($path) },  \n}); \n</code></pre>\n\n<p>With a (10-second) run this prints, on a laptop with v5.16</p>\n\n<pre>\n                Rate   URI_path  Mojo_path non_greedy     neg_cc just_split\nURI_path    146731/s         --       -82%       -87%       -87%       -89%\nMojo_path   834297/s       469%         --       -24%       -28%       -36%\nnon_greedy 1098243/s       648%        32%         --        -5%       -16%\nneg_cc     1158137/s       689%        39%         5%         --       -11%\njust_split 1308227/s       792%        57%        19%        13%         --\n</pre>\n\n<p>One should keep in mind that the overhead of the function-call is very large for such a simple job, and in spite of <code>Benchmark</code>'s work these numbers are probably best taken as a cursory guide.</p>\n"}], "owner": {"reputation": 35, "user_id": 4904177, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tTs7invQF1s/AAAAAAAAAAI/AAAAAAABSLM/zqaLUO6_jcg/photo.jpg?sz=128", "display_name": "Santiago Flores", "link": "https://stackoverflow.com/users/4904177/santiago-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 56600324, "answer_count": 4, "score": 2, "last_activity_date": 1562117225, "creation_date": 1560522725, "last_edit_date": 1560738098, "question_id": 56600243, "link": "https://stackoverflow.com/questions/56600243/get-the-second-string-of-the-uri-with-perl-regex", "title": "Get the second string of the URI with Perl regex", "body": "<p>I need to get the second part of the URI, the possible URI are:</p>\n\n<pre><code>/api/application/v1/method\n/web/application/v1/method\n</code></pre>\n\n<p>I can get <code>\"application\"</code> using:</p>\n\n<pre><code>([^\\/api]\\w*)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>([^\\/web]\\w*)\n</code></pre>\n\n<p>But I know is not the best approach, what would be the good way?</p>\n\n<p>Thanks!</p>\n\n<p>Edit: thank you all for the input, the goal was to set the second parte of the uri into a header in apache with rewrite rules</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1560514165, "post_id": 56597399, "comment_id": 99771703, "body": "<code>&#39;print &#39;cat &#47;home&#47;james&#47;test.txt&#39;&#39;</code> Try using double quotes inside the single quotes: <code>&#39;print &quot;cat &#47;home&#47;james&#47;test.txt&quot;&#39;</code> If you are trying to run the <code>cat</code> command, use backquotes instead"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1560514716, "post_id": 56597399, "comment_id": 99771993, "body": "Why are you using <code>sudo</code> for everything? I believe Kali autologins to <code>root</code>, so you are already super user. Kali aside, you don&#39;t use root unless you need to elevate privileges. Reading <code>&#47;home&#47;james&#47;test.txt</code> from the <code>james</code> account does not need <code>sudo</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560514832, "post_id": 56597399, "comment_id": 99772050, "body": "Why not just <code>perl -e &#39;exec &quot;&#47;bin&#47;bash&quot;&#39;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1560516825, "last_edit_date": 1560516825, "creation_date": 1560515915, "answer_id": 56598393, "question_id": 56597399, "link": "https://stackoverflow.com/questions/56597399/how-to-read-a-file-using-cat-with-perl-e-parameters/56598393#56598393", "title": "How to read a file using cat with Perl -e parameters?", "body": "<p>I think you wanted </p>\n\n<pre><code>sudo -u james2 perl -e 'print `cat /home/james/test.txt`'\n</code></pre>\n\n<p>Backticks are used to execute a shell command and capture its output.</p>\n\n<p>That's a weird way of doing</p>\n\n<pre><code>sudo -u james2 perl -e 'system \"cat /home/james/test.txt\"'\n</code></pre>\n\n<p>which is a weird way of doing</p>\n\n<pre><code>sudo -u james2 cat /home/james/test.txt\n</code></pre>\n\n<p>And since you're root, that's a weird way of doing</p>\n\n<pre><code>cat /home/james/test.txt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11647678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4cb8ed2d4ecc851c49791be131b688?s=128&d=identicon&r=PG&f=1", "display_name": "PepeLePew", "link": "https://stackoverflow.com/users/11647678/pepelepew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560516825, "creation_date": 1560512319, "last_edit_date": 1560514607, "question_id": 56597399, "link": "https://stackoverflow.com/questions/56597399/how-to-read-a-file-using-cat-with-perl-e-parameters", "title": "How to read a file using cat with Perl -e parameters?", "body": "<p>I've set up a penetration testing VM and am trying to practice privilege escalation.</p>\n\n<p>I'm currently trying to read a file. I do not have access to the user's home directory where the file is located but I have permissions to run <code>/usr/bin/perl</code> as the <code>user/admin</code>.</p>\n\n<p>My understanding is that I could run the following command to essentially cat the file and see what's inside using the perl permissions granted to me but it doesn't seem to be working and gives no result back</p>\n\n<pre><code>james@linuxtest:~$ sudo -l\n</code></pre>\n\n<p>Matching Defaults entries for james on linuxtest:</p>\n\n<pre><code>env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n</code></pre>\n\n<p>User james may run the following commands on linuxtest:</p>\n\n<pre><code>(james2) /usr/bin/perl\n\njames@linuxtest:~$ sudo -u james2 perl -e 'print 'cat /home/james/test.txt''\n</code></pre>\n\n<p>I expected the result to be the contents of the file or at least an error of some sort but no result. Am I making a stupid mistake here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1560512434, "post_id": 56597382, "comment_id": 99770868, "body": "Try running the script with <code>system(&quot;chmod 0777 $dir&quot;) and die &quot;Cannot change permissions&quot;;</code> to have error checking."}, {"owner": {"reputation": 3, "user_id": 9933644, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706308312809907/picture?type=large", "display_name": "Rohit Pardeshi", "link": "https://stackoverflow.com/users/9933644/rohit-pardeshi"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1560512649, "post_id": 56597382, "comment_id": 99770970, "body": "Its not working I have tried it already"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 6, "creation_date": 1560512885, "post_id": 56597382, "comment_id": 99771080, "body": "Why do you need to use system? Perl has <code>chmod</code> built-in.. simply try <code>chmod &#39;0777&#39;, $dir</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 2, "creation_date": 1560513245, "post_id": 56597382, "comment_id": 99771266, "body": "@sergiotarxz but that would cause a custom error message. <code>system(&quot;chmod 0777 $dir&quot;) or die &quot;$!&quot;</code>"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 3, "creation_date": 1560517328, "post_id": 56597382, "comment_id": 99773439, "body": "Please <a href=\"https://stackoverflow.com/posts/56597382/edit\">edit</a> your question and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Include the current owner and permissions of the file, and under which user (and group) you run your code. Include the <code>and die ...</code> part @sergiotarxz mentioned. Can you <code>chmod</code> the file on the shell?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1560617417, "post_id": 56597382, "comment_id": 99799483, "body": "@GerhardBarnard That should be <code>and die</code>, not <code>or die</code>. <code>system</code> returns <code>0</code> on success."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560673201, "post_id": 56597382, "comment_id": 99808191, "body": "@melpomene, yes, I cannot edit it, but I was refering to <code>$!</code>"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1560617241, "post_id": 56611716, "comment_id": 99799438, "body": "I would include <code>$dir</code> in the error message. In the second case, a successful <code>chmod</code> will not set <code>$!</code> to <code>0</code>, so you can&#39;t rely on that. You&#39;d need to check if <code>$each == @dirs</code>."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1560612369, "creation_date": 1560612369, "answer_id": 56611716, "question_id": 56597382, "link": "https://stackoverflow.com/questions/56597382/system-command-not-working-properly-in-perl-script/56611716#56611716", "title": "System command not working properly in Perl script", "body": "<p>I cannot tell you why your command failed, because you did  not give enough detail, but there is no need to use <code>system</code> in this case as Perl has <code>chmod</code> built in and it behaves exactly the same.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $dir = \"/some/dir\";\nchmod 0777, $dir or die \"$!\";\n</code></pre>\n\n<p>This will also give you a valid error message if the command failed.</p>\n\n<p>You can also do list of directories and files.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @dirs = (\"dir1\", \"dir2\");\nmy $each = chmod 0777, @dirs;\nprint \"$each modified\\n\";\ndie $! if ($!);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9933644, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706308312809907/picture?type=large", "display_name": "Rohit Pardeshi", "link": "https://stackoverflow.com/users/9933644/rohit-pardeshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560612369, "creation_date": 1560512212, "last_edit_date": 1560516267, "question_id": 56597382, "link": "https://stackoverflow.com/questions/56597382/system-command-not-working-properly-in-perl-script", "title": "System command not working properly in Perl script", "body": "<p>Changing permission of specific directory using Perl script. Script is running properly but not changing permission of directory.</p>\n\n<pre><code>system(\"chmod 0777 $dir\");\n</code></pre>\n\n<p><code>$dir</code>: path is declared in this variable.</p>\n\n<p>Failed to set permission.</p>\n"}, {"tags": ["python", "perl", "debugging", "breakpoints", "conditional-execution"], "comments": [{"owner": {"reputation": 10156, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 2, "creation_date": 1561841013, "post_id": 56596274, "comment_id": 100194482, "body": "In case you&#39;re still interested in reciving an answer, is there something missing from my post that&#39;s necessary for you to pass as acceptable?"}], "answers": [{"comments": [{"owner": {"reputation": 8172, "user_id": 719016, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/RWd7T.png?s=128&g=1", "display_name": "719016", "link": "https://stackoverflow.com/users/719016/719016"}, "edited": false, "score": 0, "creation_date": 1560710738, "post_id": 56621097, "comment_id": 99816244, "body": "Thanks for your answer. It seems like pdb jumps to the <code>import pdb; pdb.set_trace()</code> line when I run the script, rather than staying outside of <code>my_trace()</code>. Any ideas why?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 8172, "user_id": 719016, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/RWd7T.png?s=128&g=1", "display_name": "719016", "link": "https://stackoverflow.com/users/719016/719016"}, "edited": false, "score": 0, "creation_date": 1560711072, "post_id": 56621097, "comment_id": 99816333, "body": "Strange, it works for me (Python 3.7.1). Did you save the <code>.pdbrc</code> in the current directory? It won&#39;t work without it and the <code>r</code> (<code>return</code>) command"}, {"owner": {"reputation": 8172, "user_id": 719016, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/RWd7T.png?s=128&g=1", "display_name": "719016", "link": "https://stackoverflow.com/users/719016/719016"}, "edited": false, "score": 1, "creation_date": 1560712195, "post_id": 56621097, "comment_id": 99816589, "body": "Ah! Apologies, I was running python 2.x instead of python 3.x. I now got it to work with the behavior that you describe when using python 3.4.3 (old Ubuntu 14.04 laptop). Last thing is to be able to have a single line equivalent to <code>$DB::single=1;1;</code> so the pdb pointer stops in the <code>my_trace()</code> line rather than in the line with a statement <i>after</i> the <code>my_trace()</code> line."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 8172, "user_id": 719016, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/RWd7T.png?s=128&g=1", "display_name": "719016", "link": "https://stackoverflow.com/users/719016/719016"}, "edited": false, "score": 1, "creation_date": 1560713581, "post_id": 56621097, "comment_id": 99816894, "body": "Seems like it is not possible to add statements at the same line as in Perl, and have the debugger respect that as separate statements. The only thing I could suggest is to add a line below <code>my_trace()</code>. For example a dummy statement like: <code>debug = debug</code> should work"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 4, "last_activity_date": 1560705957, "creation_date": 1560705957, "answer_id": 56621097, "question_id": 56596274, "link": "https://stackoverflow.com/questions/56596274/python-conditional-debug-breakpoint-one-liner-for-versions-before-3-7-pep-553-th/56621097#56621097", "title": "python conditional debug breakpoint one-liner for versions before 3.7 PEP 553 that acts similarly to Perl&#39;s $DB::single=1", "body": "<p>Here is a simple way using a <code>.pdbrc</code> file in the current directory:</p>\n\n<p><strong>t.py</strong></p>\n\n<pre><code>def my_trace():\n    global debug\n    if debug:\n        import pdb; pdb.set_trace()\n\ndebug = True\na= 1\nmy_trace()\nb = 2\nc = 3\nmy_trace()\nd = 4\n</code></pre>\n\n<p><strong>.pdbrc</strong>:</p>\n\n<pre><code>r\n</code></pre>\n\n<p><strong>Example session</strong>:</p>\n\n<pre><code>$ python t.py\n--Return--\n&gt; [...]/t.py(12)&lt;module&gt;()\n-&gt; b = 2\n(Pdb) p a\n1\n(Pdb) p b\n*** NameError: name 'b' is not defined\n(Pdb) !debug=False\n(Pdb) c\n$ \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10156, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1560927173, "post_id": 56655162, "comment_id": 99892141, "body": "I didn&#39;t include anything about how to start the session before the next line, since I don&#39;t have something useful to add. But as a side note, it might be a little more idiomatic to use <code>...</code> (the <a href=\"https://docs.python.org/3/library/constants.html#Ellipsis\" rel=\"nofollow noreferrer\">Ellipsis</a> object) as a dummy statement instead of <code>dummy = None</code>."}], "tags": [], "owner": {"reputation": 10156, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "is_accepted": false, "score": 7, "last_activity_date": 1561122552, "last_edit_date": 1592644375, "creation_date": 1560883127, "answer_id": 56655162, "question_id": 56596274, "link": "https://stackoverflow.com/questions/56596274/python-conditional-debug-breakpoint-one-liner-for-versions-before-3-7-pep-553-th/56655162#56655162", "title": "python conditional debug breakpoint one-liner for versions before 3.7 PEP 553 that acts similarly to Perl&#39;s $DB::single=1", "body": "<h3>Setting a conditional breakpoint</h3>\n<p>Same as perl, python can be run with <code>-d</code> to set a debug flag:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ python --help\n[...]\n-d     : debug output from parser; also PYTHONDEBUG=x\n[...]\n</code></pre>\n<p>You can check its state during runtime via <code>sys.flags</code> :</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ python -d\nPython 2.7.15+ (default, Nov 27 2018, 23:36:35) \n[GCC 7.3.0] on linux2\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.\n&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.flags\nsys.flags(debug=1, py3k_warning=0, division_warning=0, ...)\n#         ^ there it is, right at the front\n</code></pre>\n<p>Which allows for the following one-liner to enable debugging:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import pdb, sys; pdb.set_trace() if sys.flags[0] else None\n</code></pre>\n<hr />\n<h3>Disabling conditional breakpoints from the debugger</h3>\n<p>Regarding this part</p>\n<blockquote>\n<p>[...] once I am happy that it does not need stopping anywhere else, then execute [something] which will make it not stop at the second or other similar breakpoint lines in the code.</p>\n</blockquote>\n<p>it gets a little trickier though, since python doesn't allows mutation of <a href=\"https://docs.python.org/3/glossary.html#term-struct-sequence\" rel=\"noreferrer\">the <code>flags</code> structure</a>, or even creating an instance of it:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.flags.debug = 0                 # no mutating ...\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: readonly attribute\n&gt;&gt;&gt; type(sys.flags)()                   # ... and no instanciating\nTraceback (most recent call last):\n  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: cannot create 'sys.flags' instances\n</code></pre>\n<p>But as far as I have tested, unless you run python with other flags, the following works to deactivate subsequent traces without altering your program's other behavior:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import sys; sys.flags = [0]*len(sys.flags)  # even fits onto a single line\n</code></pre>\n<hr />\n<p>For a slightly more robust monkey patch that you should use in case the former one leads to strange bugs, you'll need to have something like this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def untrace():\n  &quot;&quot;&quot;Call this function in the pdb session to skip debug-only set_trace() calls&quot;&quot;&quot;\n  import re\n  import sys\n  from collections import namedtuple  # has the same interface as struct sequence\n  sys.flags = namedtuple(\n    'sys_flags', \n    [m.group() for m in re.finditer(r'\\w{2,}', repr(sys.flags)[10:-1])]\n  )(0, *sys.flags[1:])\n</code></pre>\n<p>While this statement <em>can</em> be put on a single line, it's probably a little too much. You can either paste this function into the <code>.py</code> file where you plan to use it, or have some kind of <code>utils.py</code> from which you import it during debugging, after which a c(ontinue) should again run the rest of the program:</p>\n<pre class=\"lang-py prettyprint-override\"><code>(Pdb) import utils; utils.untrace()\n(Pdb) c\n</code></pre>\n"}], "owner": {"reputation": 8172, "user_id": 719016, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/RWd7T.png?s=128&g=1", "display_name": "719016", "link": "https://stackoverflow.com/users/719016/719016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "answer_count": 2, "score": 16, "last_activity_date": 1561122552, "creation_date": 1560508066, "last_edit_date": 1560700096, "question_id": 56596274, "link": "https://stackoverflow.com/questions/56596274/python-conditional-debug-breakpoint-one-liner-for-versions-before-3-7-pep-553-th", "title": "python conditional debug breakpoint one-liner for versions before 3.7 PEP 553 that acts similarly to Perl&#39;s $DB::single=1", "body": "<p>In python versions before PEP 553 <code>breakpoint()</code> utility, what is the recommended way to add (ideally a one-liner) code to have a breakpoint that can be ignored upon a condition (e.g. a global debug flag or args.debug flag).</p>\n\n<p>In Perl, I am used to use <code>$DB::single=1;1;</code> single-lines, which I know I can safely leave in the code and won't affect the normal running of <code>perl code.pl</code> unless explicitly calling <code>perl -d code.pl</code>. E.g.:</p>\n\n<pre><code>my $a = 1;\n$DB::single=1;1; # breakpoint line\nmy $b = 2;\nprint \"$a $b\\n\";\n</code></pre>\n\n<p>If I run this code as: <code>perl code.pl</code>, it will run to completion.\nIf I run this code with: <code>perl -d code.pl</code>, the <code>pdb</code> will stop at the breakpoint line (not before the next line with a <code>my $b = 2;</code> statement) because it contains a <code>1;</code> statement after the <code>$DB::single=1;</code> statement;</p>\n\n<p>Similarly, if I write:</p>\n\n<pre><code>my $debug = 1;\nmy $a = 1;\n$DB::single=$debug;1; # first breakpoint line\nmy $b = 2;\n$DB::single=$debug;1; # second breakpoint line\nprint \"$a $b\\n\";\n# [...] Lots more code sprinkled with more of these\n$DB::single=$debug;1; # n'th breakpoint line\n</code></pre>\n\n<p>I can then execute <code>perl -d code.pl</code>, which will stop in the first breakpoint line, then in the <code>pdb</code> session, once I am happy that it does not need stopping anywhere else, then execute: <code>$debug = 0</code>, then <code>pdb</code> continue <code>c</code>, which will make it not stop at the second or other similar breakpoint lines in the code.</p>\n\n<p>How can I achieve the same, ideally in single-line statements, in python (2.x and 3.x before PEP 553)?</p>\n\n<p>I am aware of PEP 553 and apart from the hassle of having to explicitly set <code>PYTHONBREAKPOINT=0 python3.7 code.py</code> or comment out the <code>breakpoint()</code> lines, it is a solution to the question here.</p>\n\n<p>I thought of options like:</p>\n\n<pre><code>import pdb; pdb.set_trace()\ndummy=None;\n</code></pre>\n\n<p>The statement underneath <code>pdb.set_trace()</code> is so that I can achieve the same as the <code>1;</code> in the same line after <code>$DB::single=1;</code> in Perl, which is to have the debugger stop where I placed the breakpoint, rather than the next statement. This is so that if there are large chunks of commented code or documentation in-between, the debugger does not jump to the next statement far away from the breakpoint. </p>\n\n<p>Or with conditionals like:</p>\n\n<pre><code>if args.debug or debug:\n    import pdb; pdb.set_trace()\n    _debug=False; #args.debug=False\n</code></pre>\n\n<p>So that if I am done debugging for a script, I can set <code>args.debug=False</code> or <code>debug=False</code> and not have to touch all these breakpoints in the code.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1560502762, "post_id": 56594614, "comment_id": 99766067, "body": "How do you <code>freeze</code> your data and where do you store it? You might need to update <code>Storable</code> and/or use some encoding-decoding."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1560503272, "post_id": 56594614, "comment_id": 99766307, "body": "It could be that the <code>$agg_blob</code> was stored with a different <code>perl</code> / <code>Storable.pm</code> that was more recent than the one you are trying to read it with. Then you might have to restore it with the newer version, or if that is not possible: try to downgrade the current version to the older version"}, {"owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "edited": false, "score": 0, "creation_date": 1560503761, "post_id": 56594614, "comment_id": 99766558, "body": "I tried using decode and encode but still same error."}, {"owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "edited": false, "score": 0, "creation_date": 1560503790, "post_id": 56594614, "comment_id": 99766576, "body": "I am using same module to freeze and thaw."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1560506359, "post_id": 56594614, "comment_id": 99767977, "body": "In order to side-step the problem, <a href=\"https://stackoverflow.com/a/10684780/46395\">use a different serialiser</a>."}, {"owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "edited": false, "score": 0, "creation_date": 1560508243, "post_id": 56594614, "comment_id": 99768842, "body": "Thanks for your reply. In my case data is already stored in DB and now i cant change data store logic. Please guide me if there is a way to read blob data from DB without using thaw, though data is already stored using storable freez."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1560515836, "post_id": 56594614, "comment_id": 99772591, "body": "v60.156 isn&#39;t anywhere close to being a valid Storable version. Either the file wasn&#39;t created by Storable, or it has gotten messed up by encoding issues when being written or read, or when copied around between systems."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1560519969, "post_id": 56594614, "comment_id": 99774897, "body": "DB usually has a storage encoding and connection encoding. It might change your data. Check that you get the same binary data from your DB."}, {"owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "edited": false, "score": 0, "creation_date": 1560935823, "post_id": 56594614, "comment_id": 99896669, "body": "Thanks everyone for your help. I resolved this issue, and actual issue was with the data. BLOB data was getting truncated some how hence it was giving issue in thaw function. Error massage is totally wrong and very misleading."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1560936088, "creation_date": 1560936088, "answer_id": 56664251, "question_id": 56594614, "link": "https://stackoverflow.com/questions/56594614/storable-binary-image-v60-156-more-recent-than-i-am-v2-10-at/56664251#56664251", "title": "Storable binary image v60.156 more recent than I am (v2.10) at", "body": "<p>Thanks everyone for your help. Issue is resolved now. Actual issue was with the data. BLOB data was getting truncated some how hence it was giving issue in thaw function. Error massage (Storable binary image v60.156 more recent than I am (v2.10) ....) is totally wrong and very misleading.</p>\n"}, {"tags": [], "owner": {"reputation": 3946, "user_id": 65706, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e0652a12b8a5b2577f91f0e192ea3f9?s=128&d=identicon&r=PG", "display_name": "Yordan Georgiev", "link": "https://stackoverflow.com/users/65706/yordan-georgiev"}, "is_accepted": false, "score": 0, "last_activity_date": 1580416392, "creation_date": 1580416392, "answer_id": 59994056, "question_id": 56594614, "link": "https://stackoverflow.com/questions/56594614/storable-binary-image-v60-156-more-recent-than-i-am-v2-10-at/59994056#59994056", "title": "Storable binary image v60.156 more recent than I am (v2.10) at", "body": "<p>you are most probably serializing something, which you think you are de-serializing, which is not the case ... </p>\n\n<pre><code>sub setData {\n   my $self       = shift ;\n   my $config = ${ shift @_ } || croak 'no config provided !!!' ;\n   my $key        = shift ;\n   my $data       = shift ;\n   my $server  = $config-&gt;{'env'}-&gt;{'redis'}-&gt;{'server'};\n   my $port    = $config-&gt;{'env'}-&gt;{'redis'}-&gt;{'port'};\n   my $serialized = freeze ($data);\n   my $redis = Redis-&gt;new('server' =&gt; \"$server:$port\");\n   $redis-&gt;set($key =&gt; $serialized);\n}\n\nsub getData {\n       my $self       = shift ;\n       my $config = ${ shift @_ } || croak 'no config provided !!!' ;\n       my $key        = shift ;\n       my $server  = $config-&gt;{'env'}-&gt;{'redis'}-&gt;{'server'};\n       my $port    = $config-&gt;{'env'}-&gt;{'redis'}-&gt;{'port'};\n       my $redis = Redis-&gt;new('server' =&gt; \"$server:$port\");\n       my $serialized = $redis-&gt;get($key);\n       my $data = thaw($serialized);\n       return $data ;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3963800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2029781d3fa0b299cf449ebc48d9cf9e?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/3963800/raaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1580416392, "creation_date": 1560502047, "last_edit_date": 1560503178, "question_id": 56594614, "link": "https://stackoverflow.com/questions/56594614/storable-binary-image-v60-156-more-recent-than-i-am-v2-10-at", "title": "Storable binary image v60.156 more recent than I am (v2.10) at", "body": "<p>I am using perl 5.20.3 and using Storable.pm to freeze and thaw blob data.</p>\n\n<p>I am getting error while thaw:</p>\n\n<pre><code>Storable binary image v60.156 more recent than I am (v2.10) at /opt/app/brix/perl/lib/5.20.3/i686-linux-thread-multi/Storable.pm line 418\n</code></pre>\n\n<p>Please help me to resolve this issue.</p>\n\n<pre><code>my $thawed = thaw($agg_blob);\n</code></pre>\n"}, {"tags": ["perl", "routes", "mojolicious"], "comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 0, "creation_date": 1560503607, "post_id": 56594183, "comment_id": 99766475, "body": "I have seen the %2f transformation to / is the intended behavior in a laravel issue...<a href=\"https://github.com/laravel/framework/issues/22125\" rel=\"nofollow noreferrer\">github.com/laravel/framework/issues/22125</a> Anyway I would like to avoid the usage of GET parameters."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": false, "score": 1, "last_activity_date": 1560511642, "creation_date": 1560511642, "answer_id": 56597249, "question_id": 56594183, "link": "https://stackoverflow.com/questions/56594183/mojolicious-route-with-a-parameter-not-matching-if-the-parameter-contains-2f/56597249#56597249", "title": "Mojolicious route with a parameter not matching if the parameter contains %2f", "body": "<p>Finally I have discovered how to use regular expressions to solve the problem.</p>\n\n<pre><code>$r-&gt;get('/select_folder/:folder'=&gt;[folder=&gt;qr/.*/])-&gt;to('mail#change_folder');\n</code></pre>\n\n<p>I made :folder match any character, now it is working.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1560522254, "creation_date": 1560522254, "answer_id": 56600116, "question_id": 56594183, "link": "https://stackoverflow.com/questions/56594183/mojolicious-route-with-a-parameter-not-matching-if-the-parameter-contains-2f/56600116#56600116", "title": "Mojolicious route with a parameter not matching if the parameter contains %2f", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Routing#Wildcard-placeholders\" rel=\"nofollow noreferrer\">wildcard placeholders</a> to allow <code>/</code> to be part of the matched parameter.</p>\n\n<pre><code>  $r-&gt;get('/select_folder/*mail')-&gt;to('mail#change_folder');\n</code></pre>\n\n<p>The reason why %2F is interpreted as a <code>/</code> is because the URL is decoded before being applied to routing.</p>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "accepted_answer_id": 56600116, "answer_count": 2, "score": 1, "last_activity_date": 1560522254, "creation_date": 1560500340, "last_edit_date": 1560503751, "question_id": 56594183, "link": "https://stackoverflow.com/questions/56594183/mojolicious-route-with-a-parameter-not-matching-if-the-parameter-contains-2f", "title": "Mojolicious route with a parameter not matching if the parameter contains %2f", "body": "<p>I have the following route</p>\n\n<pre><code>  $r-&gt;get('/select_folder/:mail')-&gt;to('mail#change_folder');\n</code></pre>\n\n<p>It works well almost every time but when the route contains the %2f sequence of characters, equivalent to / it works as if %2f is a path separatator instead of a escaped sequence.</p>\n\n<p>This is an example input:</p>\n\n<blockquote>\n  <p><a href=\"http://127.0.0.1:5000/select_folder/%5bGmail%5d%2fDestacados\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/select_folder/%5bGmail%5d%2fDestacados</a></p>\n</blockquote>\n\n<p>This is part of the error:</p>\n\n<blockquote>\n  <p>None of these routes could generate a response for your GET request for /select_folder/[Gmail]/Destacados, maybe you need to add a new one? </p>\n</blockquote>\n\n<p>I would like to know some way to get a parameter like this as an url part without using GET or POST parameters.</p>\n"}, {"tags": ["perl", "sequence"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1560500046, "creation_date": 1560500046, "answer_id": 56594105, "question_id": 56593626, "link": "https://stackoverflow.com/questions/56593626/perl-how-to-find-motifs-in-a-multi-fasta-file/56594105#56594105", "title": "Perl how to find motifs in a multi fasta file", "body": "<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nsub output {\n    my ($id, $seq) = @_;\n    my $count = () = $seq =~ /(?=[NC].[CT]|[AT][AN]..[CG])/g;\n    say \"$id\\t$count\" if $count;\n}\n\nmy ($id, $seq);\nwhile (&lt;&gt;) {\n    chomp;\n    if (/^&gt;(\\S*)/) {\n        output($id, $seq) if defined $id;\n        $id = $1;\n        $seq = \"\";\n    } else {\n        $seq .= $_;\n    }\n}\noutput($id, $seq);\n</code></pre>\n\n<p>Process the file line by line. When you encounter a sequence header, remember the id, otherwise concatenate the sequence to its previous part - the pattern can match over a line boundary!</p>\n\n<p>The <code>output</code> is called once more at the end, otherwise the last sequence wouldn't have been processed.</p>\n\n<p>I used a look-ahead <code>(?=...)</code> for matching, because the patterns can overlap.</p>\n"}], "owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560500046, "creation_date": 1560498124, "last_edit_date": 1560499629, "question_id": 56593626, "link": "https://stackoverflow.com/questions/56593626/perl-how-to-find-motifs-in-a-multi-fasta-file", "title": "Perl how to find motifs in a multi fasta file", "body": "<p>Given a multi fasta file named file.txt: </p>\n\n<pre><code>&gt;seq1  \nCCTTTGGATGGCAAAATTTNTNGTAAA\nAGGGCACCCANTTCTGGC  \n&gt;seq2\nNNNNNGGGGCGTAANGAGGGGCACGG\nTNCC\n&gt;seq3   \nAAAAAANNNNTAC\n</code></pre>\n\n<p>I want to find motifs matching with the pattern<br>\n[NC].[CT] (element N or C followed by any element . followed by an element C or T)<br>\nand<br>\n[AT][AN]..[CG] (element A or T followed element A or N followed by any two elements .. followed by an element C or G)<br>\nfor each sequence starting with symbol '>' and count how many sequences contain the motif. The main problem I am encountering with this code is the iteration over each sequence. Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\n\nif(!open(MY_HANDLE, \"file.txt\")){\n    die \"Cannot open the file\";\n}\n @content = &lt;MY_HANDLE&gt;;\nclose(MY_HANDLE);\nforeach $row(@content){\n  chomp($row);\n     if (@matches1=$row =~ /([AT][AN]..[CG]+)/g)  {\n     $numMat=scalar(@matches1);\n     print(\"@matches1,$numMat\\n\");\n     }\n     elsif (@matches2=$row =~ /[NC].[CT]+/g)  {\n     print(\"@matches2\\n\");\n     }\n  }\n\n</code></pre>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["perl", "windows-10", "strawberry-perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1560489770, "last_edit_date": 1560489770, "creation_date": 1560489408, "answer_id": 56591775, "question_id": 56591605, "link": "https://stackoverflow.com/questions/56591605/strawberry-perl-on-windows-10-does-not-find-modules-in-current-directory/56591775#56591775", "title": "Strawberry perl on windows 10 does not find modules in current directory", "body": "<p>It doesn't make sense to look in the current work directory. It often makes sense for a script to look for modules bundled with it, which is to say it sometimes makes sense to tell Perl to look for modules in a path relative to the location of the script. To that end, the script should include</p>\n\n<pre><code>use FindBin qw( $RealBin );\n\nuse lib $RealBin;   # or \"$RealBin/lib\" or \"$RealBin/../lib\", etc\n</code></pre>\n\n<p>If this is only for development, setting env var <code>PERL5LIB</code> might make more sense.</p>\n"}], "owner": {"reputation": 63, "user_id": 8811993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a611a766fe6c7c15dd438a6e04775933?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Kyle", "link": "https://stackoverflow.com/users/8811993/kiran-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "closed_date": 1560489518, "answer_count": 1, "score": 1, "last_activity_date": 1560489770, "creation_date": 1560488417, "question_id": 56591605, "link": "https://stackoverflow.com/questions/56591605/strawberry-perl-on-windows-10-does-not-find-modules-in-current-directory", "closed_reason": "Duplicate", "title": "Strawberry perl on windows 10 does not find modules in current directory", "body": "<p>I've installed Strawberry Perl v5.28.0 MSWin32-x64-multi-thread on windows 10. However, I noticed that it does not find module under the current directory and every time I run any script, I've to add current directory into the path.</p>\n\n<pre><code>perl -I . somescript.pl\n</code></pre>\n\n<p>This was not the case earlier. Is there a way to put the current directory in the path by default so I don't have to run with </p>\n\n<pre><code>perl -I .\n</code></pre>\n\n<p><strong>Note:</strong> While browsing, I read somewhere(can't remember the link or website) that latest versions of Perl excluded a current directory from @INC for security reasons. But I'm trying to find a solution for a development machine.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1560480851, "post_id": 56590674, "comment_id": 99758994, "body": "Can you show us your code, what you&#39;ve tried in order to solve your problem?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560508805, "post_id": 56595657, "comment_id": 99769080, "body": "How would I write the output to another file ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560509740, "post_id": 56595657, "comment_id": 99769548, "body": "The simplest way would be just pipe it: <code>perl script.pl &gt; output.txt</code>"}, {"owner": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560612371, "post_id": 56595657, "comment_id": 99798263, "body": "Is there a way to add in the write file to the code instead of doing it from the command line"}, {"owner": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560791029, "post_id": 56595657, "comment_id": 99842938, "body": "Say for I say for instance one of the 5 lines didn\u2019t have ### but had number 006 already there would the count still count correctly  or would I have to add an or to the elsif statement"}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "reply_to_user": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560794114, "post_id": 56595657, "comment_id": 99844149, "body": "@Trey This would be a good test case to add to your test suite. If you haven&#39;t written one yet, this is a good time to start!"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "edited": false, "score": 0, "creation_date": 1560795969, "post_id": 56595657, "comment_id": 99844865, "body": "@Trey If you change this line: <code>500000120180117###000000006000L</code> to this: <code>500000120180117000000006000L</code>, for example it will not know where to insert the count. Previously it knew that it should insert the count after <code>###</code> but now, what should it use to determine where to insert (when there are no <code>#</code>s)?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1560612930, "last_edit_date": 1560612930, "creation_date": 1560505772, "answer_id": 56595657, "question_id": 56590674, "link": "https://stackoverflow.com/questions/56590674/read-in-text-file-then-write-new-file-with-new-output/56595657#56595657", "title": "Read in text file then write new file with new output", "body": "<p>Here is an example of how it can be done:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse List::Util qw(sum);\n\nmy $fn = 'ex.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy @lines;\nmy @count;\nmy $cur_count = undef; # undef --&gt; before first line starting with 6\nmy $flag = 2;\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    push @lines, $line;\n    if ( $line =~ /^6/) {\n        $cur_count = 0 if !defined $cur_count;\n        $flag = 2 if $flag == 1;\n        $cur_count++;\n    }\n    elsif ($line =~ /^5/ ) {\n        push @count, $cur_count if (defined $cur_count) &amp;&amp; $flag == 2;\n        $cur_count = 0;\n        $flag = 1;\n    }\n    else {\n        $flag = 2 if $flag == 1;\n    }\n}\npush @count, $cur_count if defined $cur_count;\nclose $fh;\n\nmy $total = sum @count;\n\nmy $j = 0;\nfor (@lines) {\n    if (/^(5[^#]*)[#]+(.*)$/) {\n        say $1, (sprintf \"%06d\", $count[$j++]), $2;\n    }\n    elsif (/^(9[^#]*)[#]+(.*)$/) {\n        say $1, (sprintf \"%06d\", $total), $2;\n    }\n    else {\n        say;\n    }\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>To write to a file from within the script:</p>\n\n<pre><code># [...]\nmy $savefn = 'output.txt';\nopen ( my $sfh, '&gt;', $savefn ) or die \"Could not open file '$savefn': $!\";\nmy $j = 0;\nfor (@lines) {\n    if (/^(5[^#]*)[#]+(.*)$/) {\n        say $sfh $1, (sprintf \"%06d\", $count[$j++]), $2;\n    }\n    elsif (/^(9[^#]*)[#]+(.*)$/) {\n        say $sfh $1, (sprintf \"%06d\", $total), $2;\n    }\n    else {\n        say $sfh $_;\n    }\n}\nclose $sfh;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11644454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fb75aef3e8b03e894d81099304f47d?s=128&d=identicon&r=PG&f=1", "display_name": "Trey", "link": "https://stackoverflow.com/users/11644454/trey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 56595657, "answer_count": 1, "score": -1, "last_activity_date": 1560791601, "creation_date": 1560479448, "last_edit_date": 1560791601, "question_id": 56590674, "link": "https://stackoverflow.com/questions/56590674/read-in-text-file-then-write-new-file-with-new-output", "title": "Read in text file then write new file with new output", "body": "<p>I'm very new to <code>perl</code>. I have a text file I want to read in and count the number of rows beginning with \"6\" and return the total to the previous line that began with \"5\" where the <code>###</code> are. At the end I want to return the total of all lines beginning with \"6\" on the last line that begins with \"9\" where the <code>######</code>. How can I go about this program.</p>\n\n<hr>\n\n<p><strong>ex.txt</strong></p>\n\n<pre><code>120180117674189                                                                 \n500000120180117###000000006000L                                                 \n6CC0000490      00001013   000001000 000000000003590CNCP0001                    \n6CC0000491      00001007   000001000 000000000003591CNCP0001                    \n6CC0000493      00001002   000001000 000000000003592CNCP0001                    \n6CC0000490      00001013   000001000 000000000003590CNCP0001                    \n6CC0000491      00001007   000001000 000000000003591CNCP0001                    \n6CC0000493      00001002   000001000 000000000003592CNCP0001                    \n500000220180117###000000162420L                                                 \n6CC0000458      00001019   000078600 000000000003585CNCP0001                    \n6CC0000447      00001019   000005500 000000000003584CNCP0001                    \n6CC0000483      00001005   000001800 000000000003588CNCH0001                    \n6CC0000488      00001005   000023800 000000000003589CNCP0001                    \n6CC0000446      00001005   000052720 000000000003583CNCP0001                    \n500000320180117###000000429631L                                                 \n61234           00001017   000085831 000000000123456   12345                    \n6123            00001017   000000000 000000000012345    1234                    \n612             00001003   000343800 000000000001234     123                    \n9      ######000000592051\n</code></pre>\n\n<p><strong>Wex.txt</strong> (should output)</p>\n\n<pre><code>120180117674189                                                                 \n500000120180117006000000006000L                                                 \n6CC0000490      00001013   000001000 000000000003590CNCP0001                    \n6CC0000491      00001007   000001000 000000000003591CNCP0001                    \n6CC0000493      00001002   000001000 000000000003592CNCP0001                    \n6CC0000490      00001013   000001000 000000000003590CNCP0001                    \n6CC0000491      00001007   000001000 000000000003591CNCP0001                    \n6CC0000493      00001002   000001000 000000000003592CNCP0001                    \n500000220180117005000000162420L                                                 \n6CC0000458      00001019   000078600 000000000003585CNCP0001                    \n6CC0000447      00001019   000005500 000000000003584CNCP0001                    \n6CC0000483      00001005   000001800 000000000003588CNCH0001                    \n6CC0000488      00001005   000023800 000000000003589CNCP0001                    \n6CC0000446      00001005   000052720 000000000003583CNCP0001                    \n500000320180117003000000429631L                                                 \n61234           00001017   000085831 000000000123456   12345                    \n6123            00001017   000000000 000000000012345    1234                    \n612             00001003   000343800 000000000001234     123                    \n9      000014000000592051\n</code></pre>\n\n<p>New file </p>\n\n<p>120180117674189<br>\n500000120180117006000000006000L<br>\n6CC0000490      00001013   000001000 000000000003590CNCP0001<br>\n6CC0000491      00001007   000001000 000000000003591CNCP0001<br>\n6CC0000493      00001002   000001000 000000000003592CNCP0001<br>\n6CC0000490      00001013   000001000 000000000003590CNCP0001<br>\n6CC0000491      00001007   000001000 000000000003591CNCP0001<br>\n6CC0000493      00001002   000001000 000000000003592CNCP0001<br>\n500000220180117###000000162420L<br>\n6CC0000458      00001019   000078600 000000000003585CNCP0001<br>\n6CC0000447      00001019   000005500 000000000003584CNCP0001<br>\n6CC0000483      00001005   000001800 000000000003588CNCH0001<br>\n6CC0000488      00001005   000023800 000000000003589CNCP0001<br>\n6CC0000446      00001005   000052720 000000000003583CNCP0001<br>\n500000320180117###000000429631L<br>\n61234           00001017   000085831 000000000123456   12345<br>\n6123            00001017   000000000 000000000012345    1234<br>\n612             00001003   000343800 000000000001234     123<br>\n9      ######000000592051</p>\n"}, {"tags": ["perl", "docker", "perlbrew", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560485367, "post_id": 56590443, "comment_id": 99759707, "body": "Re &quot;<i>A sub-shell is launched with</i>&quot;, Well, for starters, you didn&#39;t add <code>source &quot;${PERLBREW_ROOT:-$HOME&#47;perl5&#47;perlbrew}&quot;&#47;etc&#47;bashrc</code> to <code>.bashrc</code> as instructed. <code>perlbrew use</code> and <code>perlbrew switch</code> simply manipulate the <code>PATH</code>. To be able to do this, the sourced script creates a function named <code>perlbrew</code> in the shell. As a fallback for when these functions are missing, there&#39;s a script called <code>perlbrew</code> too. The script obviously can&#39;t change the <code>PATH</code> of the shell that called it, so it launches a subshell with the fixed up <code>PATH</code> instead."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560485590, "post_id": 56590443, "comment_id": 99759755, "body": "So, without the functions, your pipeline can&#39;t possibly be affected by <code>perlbrew switch</code>. Start by fixing this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560485758, "post_id": 56590443, "comment_id": 99759787, "body": "Re &quot;<i>How to force perlbrew change @INC in Dockerfile ?</i>&quot;, Despite repeated statements that claim you want to change <code>@INC</code>, that&#39;s not what you want to do. You actually want to change which install of <code>perl</code> is being used."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560503682, "post_id": 56590443, "comment_id": 99766528, "body": "@ikegami thanks you so much for that detailed explanation. But I don&#39;t undertand how and when perlbrew fix <code>$PATH</code>. I tried to print <code>$PATH</code> before and after <code>RUN echo &#39;source &quot;${PERLBREW_ROOT}&quot;&#47;etc&#47;bashrc&#39; &gt;&gt; .bashrc</code>, step, it wasn&#39;t changed and is <code>&#47;usr&#47;local&#47;perlbrew&#47;bin:&#47;usr&#47;local&#47;sbin:&#47;usr&#47;local&#47;bin:&#47;usr&#47;&zwnj;&#8203;sbin:&#47;usr&#47;bin:&#47;sbin:&zwnj;&#8203;&#47;bin</code> in both cases."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560505805, "post_id": 56590443, "comment_id": 99767667, "body": "For now, I just directly set <code>PATH</code> in <code>Dockerfile</code>: <code>ENV PATH ${PERLBREW_ROOT}&#47;perls&#47;perl-$PERL_VERSION&#47;bin:$PATH</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1560504046, "post_id": 56591301, "comment_id": 99766726, "body": "<code>RUN ${PERLBREW_ROOT}&#47;perls&#47;perl-$PERL_VERSION&#47;bin&#47;perl --version</code> shows correct version, but <code>RUN ${PERLBREW_ROOT}&#47;perls&#47;perl-$PERL_VERSION&#47;bin&#47;perl cpm install -gv CGI &amp;&amp; perlbrew list-modules</code> will produce <code>Can&#39;t open perl script &quot;cpm&quot;: No such file or directory</code> error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1560515716, "post_id": 56591301, "comment_id": 99772516, "body": "Oh sorry, provide the full path to <code>cpm</code> or use <code>...&#47;perl -S cpm ...</code>. (<code>-S</code> tell Perl search the path for the script.) Fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1566889937, "last_edit_date": 1566889937, "creation_date": 1560485787, "answer_id": 56591301, "question_id": 56590443, "link": "https://stackoverflow.com/questions/56590443/install-modules-with-perlbrew-and-cpm-perlbrew-switch-does-not-change-inc-dur/56591301#56591301", "title": "Install modules with perlbrew and cpm - perlbrew switch does not change @INC during docker build", "body": "<p>For starters, \"<em>A sub-shell is launched with ...</em>\" indicates you have an incorrectly setup <code>perlbrew</code>. You were instructed to add the following to your shell's startup script:</p>\n\n<pre><code>source \"${PERLBREW_ROOT:-$HOME/perl5/perlbrew}\"/etc/bashrc\n</code></pre>\n\n<p>Without this, a fallback mechanism is used to try to provide the desired functionality, but it's completely useless outside of interactive shells.</p>\n\n<hr>\n\n<p>Secondly, this is a rather dubious use of perlbrew. If your docker script worked as intended, it would have far reaching consequences. That's not a good thing. You could use <code>perlbrew use</code>, but you could instead use the correct <code>perl</code> build directly using</p>\n\n<pre><code>RUN \"${PERLBREW_ROOT:-$HOME/perl5/perlbrew}\"/perls/perl-5.31.0/bin/perl -S cpm install -gv CGI\n</code></pre>\n\n<p>In your case, this should resolve to</p>\n\n<pre><code>RUN /usr/local/perlbrew/perls/perl-5.31.0/bin/perl -S cpm install -gv CGI\n</code></pre>\n\n<p>for you.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 56591301, "answer_count": 1, "score": 2, "last_activity_date": 1566889937, "creation_date": 1560476891, "question_id": 56590443, "link": "https://stackoverflow.com/questions/56590443/install-modules-with-perlbrew-and-cpm-perlbrew-switch-does-not-change-inc-dur", "title": "Install modules with perlbrew and cpm - perlbrew switch does not change @INC during docker build", "body": "<p>I'd like to use fast <a href=\"https://github.com/skaji/cpm\" rel=\"nofollow noreferrer\">cpm</a> module installer instead of cpanm in my projects.</p>\n\n<p>Also I install target perl version using <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a>.</p>\n\n<p>According <a href=\"https://metacpan.org/pod/App::cpm::Tutorial#First-step\" rel=\"nofollow noreferrer\">documentation</a> of cpm <code>-g</code> option will install modules into current @INC</p>\n\n<p>How to force perlbrew change @INC in Dockerfile ?</p>\n\n<p>Below is part of my Dockerfile</p>\n\n<pre><code>RUN perl -le 'print for @INC' &amp;&amp; \\\n    perlbrew switch perl-5.31.0 &amp;&amp; \\\n    perl -le 'print for @INC' &amp;&amp; \\\n    cpm install -gv CGI &amp;&amp; \\\n    perlbrew list-modules\n</code></pre>\n\n<p>When I build Dockerfile output of <code>perl -le 'print for @INC'</code> is same both times:</p>\n\n<pre><code>/etc/perl\n/usr/local/lib/x86_64-linux-gnu/perl/5.22.1\n/usr/local/share/perl/5.22.1\n/usr/lib/x86_64-linux-gnu/perl5/5.22\n/usr/share/perl5\n/usr/lib/x86_64-linux-gnu/perl/5.22\n/usr/share/perl/5.22\n/usr/local/lib/site_perl\n/usr/lib/x86_64-linux-gnu/perl-base\n</code></pre>\n\n<p>But if I do same manually result is ok:</p>\n\n<pre><code>$ docker run -it pavelsr/xxxhub\nroot@1a34ea34a3fb:/# perl -le 'print for @INC'\n/etc/perl\n/usr/local/lib/x86_64-linux-gnu/perl/5.22.1\n/usr/local/share/perl/5.22.1\n/usr/lib/x86_64-linux-gnu/perl5/5.22\n/usr/share/perl5\n/usr/lib/x86_64-linux-gnu/perl/5.22\n/usr/share/perl/5.22\n/usr/local/lib/site_perl\n/usr/lib/x86_64-linux-gnu/perl-base\n.\nroot@1a34ea34a3fb:/# perlbrew switch perl-5.31.0\n\nA sub-shell is launched with perl-5.31.0 as the activated perl. Run 'exit' to finish it.\n\nroot@1a34ea34a3fb:/# perl -le 'print for @INC'\n/usr/local/perlbrew/perls/perl-5.31.0/lib/site_perl/5.31.0/x86_64-linux\n/usr/local/perlbrew/perls/perl-5.31.0/lib/site_perl/5.31.0\n/usr/local/perlbrew/perls/perl-5.31.0/lib/5.31.0/x86_64-linux\n/usr/local/perlbrew/perls/perl-5.31.0/lib/5.31.0\nroot@1a34ea34a3fb:/# cpm install -g CGI\nDONE install HTML-Tagset-3.20\nDONE install HTML-Parser-3.72\nDONE install CGI-4.44\n3 distributions installed.\nroot@1a34ea34a3fb:/# perlbrew list-modules\nCGI\nHTML::Parser\nHTML::Tagset\nPerl\n</code></pre>\n"}, {"tags": ["excel", "perl", "csv"], "comments": [{"owner": {"reputation": 121871, "user_id": 478884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLckc.jpg?s=128&g=1", "display_name": "Tim Williams", "link": "https://stackoverflow.com/users/478884/tim-williams"}, "edited": false, "score": 0, "creation_date": 1560467462, "post_id": 56589537, "comment_id": 99756717, "body": "Start here: <a href=\"https://stackoverflow.com/search?q=perl+excel+write\">stackoverflow.com/search?q=perl+excel+write</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1560528479, "creation_date": 1560528479, "answer_id": 56601818, "question_id": 56589537, "link": "https://stackoverflow.com/questions/56589537/writing-to-excel-file-in-specific-format-using-perl/56601818#56601818", "title": "Writing to Excel file in specific format using Perl", "body": "<p>Programming is all about solving problems. But sometimes a problem is really big and seems too complicated. What you need to do then is break it down into smaller problems that are easier to solve.</p>\n\n<p>You say you want to turn a CSV file into an Excel file. You will have to decide if you want <a href=\"https://en.wikipedia.org/wiki/Microsoft_Excel#File_formats\" rel=\"nofollow noreferrer\">XLS or XLSX</a> first. Both formats look the same when you open them in Excel, but they are actually very different under the hood.</p>\n\n<p>When solving something in Perl, the first place to search is always <a href=\"https://metacpan.org/\" rel=\"nofollow noreferrer\">metacpan</a>. Let's try:</p>\n\n<ul>\n<li>XLS: <a href=\"https://metacpan.org/search?q=write+excel\" rel=\"nofollow noreferrer\">https://metacpan.org/search?q=write+excel</a> leads to <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Spreadsheet::WriteExcel</a></li>\n<li>XLSX: <a href=\"https://metacpan.org/search?q=excel+xlsx\" rel=\"nofollow noreferrer\">https://metacpan.org/search?q=excel+xlsx</a> leads to <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Excel::Writer::XLSX</a></li>\n</ul>\n\n<p>I'll pick Excel::Writer::XLSX. The <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#QUICK-START\" rel=\"nofollow noreferrer\">Quick Start part of the docs</a> suggests this to make a file and write one column.</p>\n\n<blockquote>\n<pre><code>use Excel::Writer::XLSX;                                   # Step 0\n\nmy $workbook = Excel::Writer::XLSX-&gt;new( 'perl.xlsx' );    # Step 1\n$worksheet = $workbook-&gt;add_worksheet();                   # Step 2\n$worksheet-&gt;write( 'A1', 'Hi Excel!' );                    # Step 3\n\n$workbook-&gt;close();                                        # Step 4\n</code></pre>\n</blockquote>\n\n<p>Now we know where to look to write to an Excel file. But there are still some problems. Let's break the whole thing down.</p>\n\n<p>Googling \"How do I read a CSV file in Perl?\" gives us <a href=\"https://perlmaven.com/how-to-read-a-csv-file-using-perl\" rel=\"nofollow noreferrer\">this article</a> as the first hit. It has a couple of solutions (as is often the case in Perl). The best one is using Text::CSV, as it does all the work for you. Again, refer to <a href=\"https://metacpan.org/pod/Text::CSV#SYNOPSIS\" rel=\"nofollow noreferrer\">the documentation on metacpan</a> for more details.</p>\n\n<blockquote>\n<pre><code># Object interface\nuse Text::CSV;\n\nmy @rows;\n# Read/parse CSV\nmy $csv = Text::CSV-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 1 });\nopen my $fh, \"&lt;:encoding(utf8)\", \"test.csv\" or die \"test.csv: $!\";\nwhile (my $row = $csv-&gt;getline ($fh)) {\n    $row-&gt;[2] =~ m/pattern/ or next; # 3rd field should match\n    push @rows, $row;\n    }\nclose $fh;\n</code></pre>\n</blockquote>\n\n<p>Of course this is not entirely what you want, but it's a good start.</p>\n\n<p>Now you need to iterate over each line and take each column, and write that into the Excel file. I will assume you know how to iterate over a list. The above example already does that. What we need to do exactly is this:</p>\n\n<ul>\n<li>for every line in the CSV file \n\n<ul>\n<li>take each column value of the CSV file ...</li>\n<li>... and put it into the corresponding column in your Excel file</li>\n</ul></li>\n<li>save the Excel file</li>\n</ul>\n\n<p>If you are having problems with those steps now, you can search for more specific problems.</p>\n\n<hr>\n\n<p>Many Perl modules come with examples. If you look at the release on metacpan, you will see there are quite a few for <a href=\"https://metacpan.org/release/Excel-Writer-XLSX\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a>. Click the name of the module to go to the distribution page, and scroll down.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UY6e7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UY6e7.png\" alt=\"click this link\"></a></p>\n\n<p>Text::CSV comes with similar examples too.</p>\n"}], "owner": {"reputation": 1, "user_id": 5641986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94075b435facfcc09fdf3aef8f6e346?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shim", "link": "https://stackoverflow.com/users/5641986/michael-shim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1560528479, "creation_date": 1560467118, "last_edit_date": 1560467352, "question_id": 56589537, "link": "https://stackoverflow.com/questions/56589537/writing-to-excel-file-in-specific-format-using-perl", "title": "Writing to Excel file in specific format using Perl", "body": "<p>How would I print a csv file line that looks like:</p>\n\n<p>string1,string2,string3,string4</p>\n\n<p>string5,string6,string7,string8</p>\n\n<p>.</p>\n\n<p>to an Excel file that looks like:</p>\n\n<p>string1 string2 string3 string4</p>\n\n<p>string5 string6 string7 string8</p>\n\n<p>.</p>\n\n<p>with string1 and string5 being in column A, 2 and 6 in columnB, etc?</p>\n\n<p>I just started using Perl and I am not sure how to approach this. Thank you!</p>\n"}, {"tags": ["perl", "debian", "cpan", "cpanm", "perlcc"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560453904, "post_id": 56587263, "comment_id": 99752551, "body": "Adjusted question since it kept referring <code>cpan</code>, while the error is only hidden by <code>cpanm</code>. That said, <code>cpan</code> would not have been able to install the module either."}], "answers": [{"tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 1, "last_activity_date": 1560453562, "creation_date": 1560453562, "answer_id": 56587264, "question_id": 56587263, "link": "https://stackoverflow.com/questions/56587263/installing-bc-with-cpanm-hangs/56587264#56587264", "title": "Installing B::C with cpanm hangs?", "body": "<p>First you'll want to try to check the install by using the verbose flag <code>cpanm -v B::C</code>, after which you should see a lot of looping like</p>\n\n<pre><code>x86_64-linux-gnu-gcc  -D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fwrapv -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/lib/x86_64-linux-gnu/perl/5.28/CORE  -o cccode1_o1 cccode1_o1.c  -Wl,-E  -fstack-protector-strong -L/usr/local/lib  -L/usr/lib/x86_64-linux-gnu/perl/5.28/CORE -lperl -ldl -lm -lpthread -lc -lcrypt 2&gt;/dev/null 2&gt;&amp;1\n# /usr/bin/ld: cannot find -lperl\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>This is because <code>ld</code> can't find <code>libperl.so</code>. If you're on Debian you'll need to run,</p>\n\n<pre><code>sudo apt install libperl-dev\n</code></pre>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 56587264, "answer_count": 1, "score": 1, "last_activity_date": 1613554413, "creation_date": 1560453562, "last_edit_date": 1613554413, "question_id": 56587263, "link": "https://stackoverflow.com/questions/56587263/installing-bc-with-cpanm-hangs", "title": "Installing B::C with cpanm hangs?", "body": "<p>When I install B::C with <code>cpanm</code>, it hangs</p>\n\n<pre><code>$ sudo cpanm B::C\n--&gt; Working on B::C\nFetching http://www.cpan.org/authors/id/R/RU/RURBAN/B-C-1.57.tar.gz ... OK\nConfiguring B-C-1.57 ... OK\nBuilding and testing B-C-1.57 ... ^C\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560449336, "post_id": 56585777, "comment_id": 99750492, "body": "Having the main thing fixed by <code>mwp</code>, also note: (1) Need to use <code>or</code> for error checking above, not <code>||</code> (2) print <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\"><code>$!</code> variable</a> which has the actual reason for the error (3) Use &quot;lexical filehandle&quot; (look it up).  So: <code>opendir my $dfh, $dirname  or die &quot;Can&#39;t open $dirname: $!&quot;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560449751, "post_id": 56585777, "comment_id": 99750679, "body": "The <code>||</code> <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">operator</a> &quot;binds&quot; too tightly for the above use: it evaluates <code>&quot;&#47;home&#47;...&quot; || die</code> first, and since the string <code>&quot;&#47;home&#47;...&quot;</code> is indeed &quot;true&quot; it opens the directory, and if that fails it won&#39;t go to <code>die</code> anymore.  But if you use <code>or</code> (Instead of <code>||</code>) then you get <code>(open my $dfh, $dir)  or (die ...)</code> -- so now it checks whether <code>open</code> works first, and if it didn&#39;t it goes to <code>die</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560449833, "post_id": 56585777, "comment_id": 99750717, "body": "Also, please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560451621, "post_id": 56585777, "comment_id": 99751561, "body": "To specifically answer the question: &quot;Use of uninitialized value in concatenation (.) or string&quot; is a warning, not an error, and it&#39;s emitted by interpolating (concatenating) <code>$_</code> into <code>&quot;$_\\n&quot;</code> because <code>$_</code> has not been set to a defined value."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "edited": false, "score": 0, "creation_date": 1560447743, "post_id": 56585838, "comment_id": 99749806, "body": "Thank you. 1st method helped to generate output"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1560451510, "post_id": 56585838, "comment_id": 99751512, "body": "I&#39;d also recommend either of these methods in general instead of relying on bare readdir in while - not only does it use the global <code>$_</code> which can be affected by anything you call, it doesn&#39;t localize it, similar to the bare while-readline construct."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 2, "last_activity_date": 1560447247, "creation_date": 1560447247, "answer_id": 56585838, "question_id": 56585777, "link": "https://stackoverflow.com/questions/56585777/why-does-the-below-perl-code-show-use-of-uninitialized-value-in-concatenation/56585838#56585838", "title": "Why does the below Perl code show &quot;Use of uninitialized value in concatenation (.) or string&quot; when I try to use the command opendir", "body": "<p>A bare <code>readdir</code> is only valid in a while-loop expression on Perl 5.12+. If you're on an earlier version of Perl, you'll need to use a different syntax to force scalar context:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while (my $ent = readdir DIR) {\n  print \"$ent\\n\";\n}\n</code></pre>\n\n<p>Or you can use <code>readdir</code> in list context, just note that it will query the entire directory contents before displaying the first entry:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $ent (readdir DIR) {\n  print \"$ent\\n\";\n}\n</code></pre>\n\n<p>Hope that helps! </p>\n"}], "owner": {"reputation": 79, "user_id": 9622969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V6hrSsqIqXc/AAAAAAAAAAI/AAAAAAAACFo/OXrzpBJYLIY/photo.jpg?sz=128", "display_name": "varun kumar", "link": "https://stackoverflow.com/users/9622969/varun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1560472183, "creation_date": 1560446964, "last_edit_date": 1560472183, "question_id": 56585777, "link": "https://stackoverflow.com/questions/56585777/why-does-the-below-perl-code-show-use-of-uninitialized-value-in-concatenation", "title": "Why does the below Perl code show &quot;Use of uninitialized value in concatenation (.) or string&quot; when I try to use the command opendir", "body": "<p>I was writing code to display all the files and subfolders in a directory.\nIs <code>opendir</code> and <code>readdir</code> only used to display files or can it display subdirectories as well?</p>\n\n<p>Following is the code I am using, i don't know what I should try instead.</p>\n\n<pre><code>#!/apps/perl/5.8.9/bin/perl\n\nuse strict;\nuse warnings;\n\nopendir DIR , \"/home/x0280511/\" || die;\nwhile (readdir DIR) {\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>I am getting the following error message</p>\n\n<blockquote>\n  <p>Use of uninitialized value in concatenation (.) or string</p>\n</blockquote>\n\n<p>What exactly does the above error message mean?</p>\n"}, {"tags": ["perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1560446339, "last_edit_date": 1560446339, "creation_date": 1560442321, "answer_id": 56584636, "question_id": 56584382, "link": "https://stackoverflow.com/questions/56584382/remove-row-from-a-file-perl/56584636#56584636", "title": "Remove row from a file perl", "body": "<pre><code>perl -F'\\|' -wlane'print if $F[7] ne \"U\"' file  &gt; new\n</code></pre>\n\n<p>With <code>-a</code> switch each line is split into words, available in <code>@F</code> array. The separator to split on can be set with <code>-F</code> option (default is whitespace) and here it's <code>|</code>.  See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">switches in perlrun</a>. Then we just check for the 8th field and print.</p>\n\n<p>In order to change the input file <em>in-place</em> add <code>-i</code> switch</p>\n\n<pre><code>perl -i -F'\\|' -wlane'print if $F[7] ne \"U\"' file\n</code></pre>\n\n<p>or use <code>-i.bak</code> to keep (<code>.bak</code>) backup as well.  </p>\n\n<hr>\n\n<p>I see that a question popped up about logging those lines that aren't kept in the file.</p>\n\n<p>One way is to hijack the <code>STDERR</code> stream for them</p>\n\n<pre><code>perl -i -F'\\|' -wlane'$F[7] ne \"U\" ? print : print STDERR $_' file 2&gt; excluded\n</code></pre>\n\n<p>where the file <code>excluded</code> gets the <code>STDERR</code> stream, redirected (in bash) using <code>2&gt;</code>.  However, that can be outright dangerous since now possible warnings are hidden and corrupt the file intended for excluded lines (as they also go to that file).</p>\n\n<p>So better collect those lines and print them at the end</p>\n\n<pre><code>perl -i -F'\\|' -wlanE'\n    $F[7] ne \"U\" ? print : push @exclude, $_; \n    END { say for @exclude }\n' input &gt; excluded\n</code></pre>\n\n<p>where file <code>excluded</code> gets all omitted (excluded) lines. (I switched <code>-e</code> to <code>-E</code> so to have <code>say</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1560443288, "post_id": 56584667, "comment_id": 99747702, "body": "I want to log this removed line into a log file as well. How we can do this ?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1560443484, "post_id": 56584667, "comment_id": 99747814, "body": "Add <code>2&gt;&gt;the_log_file</code> to the end of the command line or change <code>print|&quot;cat&gt;&amp;2&quot;</code> to <code>print &gt;&gt; &quot;the_log_file&quot;</code>."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 0, "creation_date": 1560443816, "post_id": 56584667, "comment_id": 99747984, "body": "can&#39;t we store this a string variable using perl ?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "edited": false, "score": 2, "creation_date": 1560443905, "post_id": 56584667, "comment_id": 99748031, "body": "How the heck would I know? I&#39;m giving you an awk answer. Ask the guy providing the perl answer if you have a perl question."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1560444032, "last_edit_date": 1560444032, "creation_date": 1560442404, "answer_id": 56584667, "question_id": 56584382, "link": "https://stackoverflow.com/questions/56584382/remove-row-from-a-file-perl/56584667#56584667", "title": "Remove row from a file perl", "body": "<p>Sounds like this might be what you want:</p>\n\n<pre><code>$ cat file\nA|B|DADD|H|O| |123 A Street; Apt.2|U|M\nA|B|DADD|H|O| |123 A Street; Apt.2|A|M\nA|B|DADD|H|O| |123 A Street; Apt.2|B|M\nA|B|DADD|H|O| |123 A Street; Apt.2|U|M\n\n$ awk -i inplace -F'[|]' '$8==\"U\"{print|\"cat&gt;&amp;2\"; next} 1' file\nA|B|DADD|H|O| |123 A Street; Apt.2|U|M\nA|B|DADD|H|O| |123 A Street; Apt.2|U|M\n\n$ cat file\nA|B|DADD|H|O| |123 A Street; Apt.2|A|M\nA|B|DADD|H|O| |123 A Street; Apt.2|B|M\n</code></pre>\n\n<p>The above uses GNU awk for <code>-i inplace</code>. With other awks you'd just do:</p>\n\n<pre><code>awk -F'[|]' '$8==\"U\"{print|\"cat&gt;&amp;2\"; next} 1' file &gt; tmp &amp;&amp; mv tmp file\n</code></pre>\n\n<p>To log the deleted line to a file named <code>log1</code>:</p>\n\n<pre><code>awk -F'[|]' '$8==\"U\"{print &gt;&gt; \"log1\"; next} 1' file\n</code></pre>\n\n<p>To log it and print it to stderr:</p>\n\n<pre><code>awk -F'[|]' '$8==\"U\"{print|\"tee -a log1 &gt;&amp;2\"; next} 1' file\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 56584636, "answer_count": 2, "score": 0, "last_activity_date": 1560449886, "creation_date": 1560441393, "last_edit_date": 1560449886, "question_id": 56584382, "link": "https://stackoverflow.com/questions/56584382/remove-row-from-a-file-perl", "title": "Remove row from a file perl", "body": "<p>I have file with <code>|</code> delimited row in that i want to add check on the value of 8th position if the value matches i want to remove that row from the file and if it not matching i want to leave that in file.</p>\n\n<p>Below is the file format , i want to remove all the rows which have <code>U</code> value on the 8th position</p>\n\n<pre><code>A|B|DADD|H|O| |123 A Street; Apt.2|U|M\nA|B|DADD|H|O| |123 A Street; Apt.2|A|M\nA|B|DADD|H|O| |123 A Street; Apt.2|B|M\nA|B|DADD|H|O| |123 A Street; Apt.2|U|M \n</code></pre>\n\n<p>How we can do it this Perl or is there any way we can use Awk or Sed. But after removing i want to print  them as well .</p>\n\n<p>I have tried sed but is matching through out the file i want to match at specific position.</p>\n\n<pre><code>sed -i '' \"/$pattern/d\" $file\n</code></pre>\n"}, {"tags": ["perl", "sockets", "io-socket"], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 2, "last_activity_date": 1560439403, "creation_date": 1560439403, "answer_id": 56583810, "question_id": 56583551, "link": "https://stackoverflow.com/questions/56583551/perl-print-backticks-stdout/56583810#56583810", "title": "Perl print backticks STDOUT", "body": "<p>Your problem is with <code>$sock-&gt;send(@cmd)</code>. The send method expects the message to be a scalar not an array. You can fix this by the following</p>\n\n<pre><code>my $CRLF=\"\\x0D\\x0A\"; # Network line break\n$sock-&gt;send(join $CRLF, @cmd); # Convert @command into a single string\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 7547440, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-gxeBmchq7Ik/AAAAAAAAAAI/AAAAAAAAQRA/Qvq-l6_odA0/photo.jpg?sz=128", "display_name": "Hamperfait", "link": "https://stackoverflow.com/users/7547440/hamperfait"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 56583810, "answer_count": 1, "score": 0, "last_activity_date": 1560439403, "creation_date": 1560438616, "question_id": 56583551, "link": "https://stackoverflow.com/questions/56583551/perl-print-backticks-stdout", "title": "Perl print backticks STDOUT", "body": "<p>I am writing a very simple bind shell in Perl that is supposed to open a specific port on windows and when I connect to it with ncat, I should be able to write commands from ncat, those be executed on the machine and to return me STDOUT.\nHere is my code so far:</p>\n\n<pre><code>use strict; use IO::Socket; \nmy($sock, $newmsg, $cmd, $MAXLEN, $PORTNO); \n$MAXLEN = 2048;\n$PORTNO = 4444;\n$sock = IO::Socket::INET-&gt;new(LocalPort =&gt; $PORTNO, Proto =&gt; 'udp');\nwhile ($sock-&gt;recv($newmsg, $MAXLEN)) {\n    my($port, $ipaddr) = sockaddr_in($sock-&gt;peername);\n    my @cmd = qx($newmsg);\n    print(@cmd);\n    $sock-&gt;send(@cmd);\n}\n</code></pre>\n\n<p>If I type something easy like <code>echo Hello world</code> it returns as expected, <code>Hello World</code>. Problem arises when I type <code>dir</code> or something that includes new lines(or so I have guessed, I'm pretty new with <code>perl</code>).\nWhen typing <code>dir</code>, the result gets printed on the perl shell (as expected, due to <code>print(@cmd)</code>, but then also prints <code>usage: $sock-&gt;send(BUF, [FLAGS, [TO]]) at -e line 1.</code> and exits, but I never receive the message in ncat.</p>\n\n<p>I am running the command from a command shell as a one-liner:\n<code>perl -e \"use strict; use IO::Socket; my($sock, $newmsg, $cmd, $MAXLEN, $PORTNO); $MAXLEN = 1024; $PORTNO = 4444; $sock = IO::Socket::INET-&gt;new(LocalPort =&gt; $PORTNO, Proto =&gt; 'udp'); while ($sock-&gt;recv($newmsg, $MAXLEN)) {my($port, $ipaddr) = sockaddr_in($sock-&gt;peername);my @cmd = qx($newmsg);print(@cmd);$sock-&gt;send(@cmd);}\"</code></p>\n\n<p>How can I do it so that it prints things as dir?</p>\n"}, {"tags": ["xml", "perl", "xml-parsing", "namespaces", "xml-namespaces"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1560430528, "post_id": 56580783, "comment_id": 99739750, "body": "Are you referring to the <code>xmlns</code> attributes?"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1560430675, "post_id": 56580783, "comment_id": 99739849, "body": "Yes, they are not displayed in the xml file for the &quot;sheetView&quot; and &quot;sheetFormatPr&quot; tags but found by LibXML."}], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 3, "last_activity_date": 1560432341, "last_edit_date": 1560432341, "creation_date": 1560431161, "answer_id": 56581213, "question_id": 56580783, "link": "https://stackoverflow.com/questions/56580783/libxml-xmlns-attribute-being-reported-but-not-in-xml-input-file/56581213#56581213", "title": "LibXML: &quot;xmlns&quot; attribute being reported but not in XML input file", "body": "<p>Here is the minimal set of changes I know of to exclude the <code>xmlns</code> attributes.  Note changed lines marked <code>###</code>.  I am not sure what your other code may be doing with <code>$NERROR1</code>.  I removed it here for simplicity.  Most of this is adapted from the <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Reader.pod\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\nuse XML::LibXML::Reader;\n\nmy $reader = XML::LibXML::Reader-&gt;new( location =&gt; 'foo.xml' );\n$reader-&gt;read();\n\n###my $NERROR1;              # Needed to add this because of `use strict`\n###while($NERROR1==0){\nwhile($reader-&gt;read) {       ### Per the docs.\n    my $node = $reader-&gt;copyCurrentNode(1);    ### Might not be a document, so $node instead of $doc\n###    if(!defined $doc){\n###        $NERROR1=-1;\n###    } else {\n        if($reader-&gt;attributeCount&gt;0){\n            print \"tag name:\" . $reader-&gt;name . \"\\n\";\n###            my @attributelist = $doc-&gt;attributes();\n###            for my $iAtt (0 .. scalar @attributelist-1){\n            for my $att ($node-&gt;attributes) {           ### Simpler form of the loop --- don't need the indices.\n                next if $att-&gt;nodeName =~ /^xmlns\\b/;   ### &lt;== The key - skip to the next attribute if this one starts with \"xmlns\"\n                print \"Att name:\" . $att-&gt;nodeName . \"\\n\";\n                print \"Att value:\" . $att-&gt;value . \"\\n\";\n            }\n        }\n###        $reader-&gt;nextElement();\n###    }\n}\n$reader-&gt;close();\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>tag name:dimension\nAtt name:ref\nAtt value:A1\ntag name:sheetView\nAtt name:tabSelected\nAtt value:1\nAtt name:topLeftCell\nAtt value:M1\nAtt name:workbookViewId\nAtt value:0\ntag name:selection\nAtt name:activeCell\nAtt value:A1\nAtt name:sqref\nAtt value:A1\ntag name:sheetFormatPr\nAtt name:defaultRowHeight\nAtt value:15\nAtt name:x14ac:dyDescent\nAtt value:0.25\ntag name:pageMargins\nAtt name:left\nAtt value:0.7\nAtt name:right\nAtt value:0.7\nAtt name:top\nAtt value:0.75\nAtt name:bottom\nAtt value:0.75\nAtt name:header\nAtt value:0.3\nAtt name:footer\nAtt value:0.3\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p>I found a <a href=\"https://www.perlmonks.org/?node_id=1128682\" rel=\"nofollow noreferrer\">PerlMonks thread</a> that links to <a href=\"https://tools.ietf.org/html/rfc4918#page-40\" rel=\"nofollow noreferrer\">RFC 4918, p. 40</a>, which clarifies that</p>\n\n<blockquote>\n  <p>Since the \"xmlns\" attribute does not contain a prefix, the namespace applies by default to all enclosed elements.</p>\n</blockquote>\n\n<p>In this case, the <code>&lt;worksheet&gt;</code> tag declares the default namespace <code>xmlns=\"http://schemas...2006/main\"</code>.  That applies to the contained elements, so the <code>&lt;sheetView&gt;</code> and <code>&lt;sheetFormatPr&gt;</code> tags inside <code>&lt;worksheet&gt;</code> also have that default namespace.  XML::LibXML::Reader is giving you access to that information by reporting an <code>xmlns</code> attribute on those nodes.</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 56581213, "answer_count": 1, "score": 2, "last_activity_date": 1560443555, "creation_date": 1560429819, "last_edit_date": 1560443555, "question_id": 56580783, "link": "https://stackoverflow.com/questions/56580783/libxml-xmlns-attribute-being-reported-but-not-in-xml-input-file", "title": "LibXML: &quot;xmlns&quot; attribute being reported but not in XML input file", "body": "<p>I have the following XML file <code>sheetX.xml</code> (taken from an Excel XML sheet file):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" \n           xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n           xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n           xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\"\n           xmlns:xr=\"http://schemas.microsoft.com/office/spreadsheetml/2014/revision\"\n           xmlns:xr2=\"http://schemas.microsoft.com/office/spreadsheetml/2015/revision2\"\n           xmlns:xr3=\"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3\"\n           mc:Ignorable=\"x14ac xr xr2 xr3\"\n           xr:uid=\"{109BF357-4A9A-4969-B57D-8A2B0130DC3F}\"&gt;\n  &lt;dimension ref=\"A1\"/&gt;\n  &lt;sheetViews&gt;\n    &lt;sheetView tabSelected=\"1\" topLeftCell=\"M1\" workbookViewId=\"0\"&gt;\n      &lt;selection activeCell=\"A1\" sqref=\"A1\"/&gt;\n    &lt;/sheetView&gt;\n  &lt;/sheetViews&gt;\n  &lt;sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/&gt;  \n  &lt;sheetData/&gt;\n  &lt;pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/&gt;\n&lt;/worksheet&gt;\n</code></pre>\n\n<p>I am reading the file with the <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> Perl module</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\nuse XML::LibXML::Reader;\n\nmy $reader = XML::LibXML::Reader-&gt;new( location =&gt; sheetX.xml);\n$reader-&gt;read();\nwhile($NERROR1==0){\n    my $doc = $reader-&gt;copyCurrentNode(1);\n    if(!defined $doc){\n        $NERROR1=-1;\n    } else {\n        if($reader-&gt;attributeCount()&gt;0){\n            print \"tag name:\" . $reader-&gt;name() . \"\\n\";\n            my @attributelist = $doc-&gt;attributes();\n            for my $iAtt (0 .. scalar @attributelist-1){\n                print \"Att name:\" . $attributelist[$iAtt]-&gt;nodeName() . \"\\n\";\n                print \"Att value:\" . $attributelist[$iAtt]-&gt;value . \"\\n\";\n            }\n        }\n        $reader-&gt;nextElement();\n    }\n}\n$reader-&gt;close();\n</code></pre>\n\n<p>The output for some of the tags from the perl module are:</p>\n\n<pre><code>tag name:worksheet\nAtt name:mc:Ignorable\nAtt value:x14ac xr xr2 xr3\nAtt name:xr:uid\nAtt value:{00000000-0001-0000-0400-000000000000}\nAtt name:xmlns\nAtt value:http://schemas.openxmlformats.org/spreadsheetml/2006/main\nAtt name:xmlns:mc\nAtt value:http://schemas.openxmlformats.org/markup-compatibility/2006\nAtt name:xmlns:r\nAtt value:http://schemas.openxmlformats.org/officeDocument/2006/relationships\nAtt name:xmlns:x14ac\nAtt value:http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\nAtt name:xmlns:xr\nAtt value:http://schemas.microsoft.com/office/spreadsheetml/2014/revision\nAtt name:xmlns:xr2\nAtt value:http://schemas.microsoft.com/office/spreadsheetml/2015/revision2\nAtt name:xmlns:xr3\nAtt value:http://schemas.microsoft.com/office/spreadsheetml/2016/revision3\n</code></pre>\n\n<p>and</p>\n\n<pre><code>tag name:sheetView\nAtt name:tabSelected\nAtt value:1\nAtt name:topLeftCell\nAtt value:M1\nAtt name:workbookViewId\nAtt value:0\nAtt name:xmlns\nAtt value:http://schemas.openxmlformats.org/spreadsheetml/2006/main\n</code></pre>\n\n<p>and</p>\n\n<pre><code>tag name:sheetFormatPr\nAtt name:defaultRowHeight\nAtt value:15\nAtt name:x14ac:dyDescent\nAtt value:0.25\nAtt name:xmlns\nAtt value:http://schemas.openxmlformats.org/spreadsheetml/2006/main\nAtt name:xmlns:x14ac\nAtt value:http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\n</code></pre>\n\n<p>So, basically, the code is printing out <code>xmlns</code> attributes that are not shown in the XML file for the <code>sheetView</code> and <code>sheetFormatPr</code> tags, but the <code>worksheet</code> tag has all the attributes that are shown in the file and no extra ones.</p>\n\n<p>At some stage I will need to reconstruct the XML file from the data generated by my perl program (the program also prints out tags, values, etc.). So my question: Is there any way to get my perl program to print out the tags that are displayed in the XML file and not the other ones that are not displayed?</p>\n"}, {"tags": ["perl", "header", "output"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560423623, "post_id": 56578313, "comment_id": 99735741, "body": "I guess the dots don&#39;t belong to the input nor output."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "edited": false, "score": 0, "creation_date": 1560428869, "post_id": 56579046, "comment_id": 99738680, "body": "Thank you for your answer. I tried but I am still not able to implement the initial code and print headers in the output file. Any hint?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1560429294, "post_id": 56579046, "comment_id": 99738934, "body": "Instead of the <code>&lt;&gt;</code> put your file handle."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1560433702, "post_id": 56579046, "comment_id": 99741825, "body": "Use <code>&lt;$filehandle&gt;</code> instead of <code>&lt;&gt;</code> and <code>print {$filehandle_out}</code> instead of <code>print</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1560423800, "creation_date": 1560423800, "answer_id": 56579046, "question_id": 56578313, "link": "https://stackoverflow.com/questions/56578313/how-to-print-part-of-header-and-string-in-another-file-in-perl/56579046#56579046", "title": "How to print part of header and string in another file in Perl", "body": "<p>Keep the header in a variable, print it when you encounter the pattern:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $def;\nwhile (&lt;&gt;) {\n    $def = $1 if m{/def=\"CODE:(.*?)\"};\n    print \"&gt;$def\\n$1\\n\" if m{/pattern=\"(.*?)\"};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "edited": false, "score": 0, "creation_date": 1560428546, "post_id": 56579162, "comment_id": 99738497, "body": "Thank you. Now file_OUT.txt contains both patterns but headers are not printed. Maybe something in regex ($row =~ /def=&quot;[A-Z]\\:([A-Z|0-9]+)&quot;/)?"}], "tags": [], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "is_accepted": false, "score": 1, "last_activity_date": 1560424263, "creation_date": 1560424263, "answer_id": 56579162, "question_id": 56578313, "link": "https://stackoverflow.com/questions/56578313/how-to-print-part-of-header-and-string-in-another-file-in-perl/56579162#56579162", "title": "How to print part of header and string in another file in Perl", "body": "<p>Another answer, but while editing some minor details in the posted script</p>\n\n<pre><code>use strict;\nuse warnings;\n\nif(!open(MY_HANDLE, \"file_IN.txt\")){\n    die \"Cannot open the file\";\n}\nmy @content = &lt;MY_HANDLE&gt;;\nclose(MY_HANDLE);\n\nif(!open(WRITE_HANDLE, \"&gt;&gt;file_OUT.txt\")){\n    die \"Cannot open the file\";\n}\n\nforeach my $row (@content){\n  chomp($row);\n  if ($row =~ /def=\"[A-Z]*\\:([A-Z|0-9]+)\"/g){\n    print (WRITE_HANDLE \"&gt;\".$1.\"\\n\");\n  }\n  if ($row =~ /pattern=\"([A-Z\\s]+)\"/){\n    print (WRITE_HANDLE $1.\"\\n\");\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1560434608, "creation_date": 1560421011, "last_edit_date": 1560434608, "question_id": 56578313, "link": "https://stackoverflow.com/questions/56578313/how-to-print-part-of-header-and-string-in-another-file-in-perl", "title": "How to print part of header and string in another file in Perl", "body": "<p>I am starting to work in Perl. I have a file called <code>file_IN.txt</code> which contains the following lines:</p>\n\n<pre><code>SITE     1   \n         /def=\"CODE:X22\"      \n         /pattern=\"BBAACCLLDDCC\"     \nSITE     2  \n         /def=\"CODE:X33\".  \n         /pattern=\"MMKKNNJJXXVV\"\n</code></pre>\n\n<p>I want to print all \"patterns\" (i.e.  BBAACCLLDDCC) in another file called <code>file_OUT.txt</code>, taking into consideration the \"def\" part (i.e. X22) as a header:</p>\n\n<p>Example outputs:  </p>\n\n<pre><code>&gt;X22  \nBBAACCLLDDCC.  \n&gt;X33        \nMMKKNNJJXXVV\n</code></pre>\n\n<p>I tried the following code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse warnings;\n\nif(!open(MY_HANDLE, \"file_IN.txt\")){\n    die \"Cannot open the file\";\n}\n@content = &lt;MY_HANDLE&gt;;\nclose(MY_HANDLE);\n\nif(!open(WRITE_HANDLE, \"&gt;&gt;file_OUT.txt\")){\n    die \"Cannot open the file\";\n}\nforeach $row (@content){\n    if ($row =~ /def=\"([A-Z\\/:A-Z]+)\"/g){\n    $def = $1\n    }\n    if ($row =~ /pattern=\"([A-Z\\s]+)\"/){\n    $seqs = $1;\n    }\n}\nprint(WRITE_HANDLE $seqs);\n</code></pre>\n\n<p>The problems I encountered with this code are:</p>\n\n<ol>\n<li>It only prints the last pattern into <code>file_OUT.txt</code></li>\n<li>I don't know how to print the header and the pattern consecutively for each site.</li>\n</ol>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1560454661, "post_id": 56577034, "comment_id": 99752866, "body": "The OP&#39;s original code would do multiple substitutions per string. To that end, one would apply your solution as follows: <code>use charnames (); say $text =~ s&#47;[a-zA-Z]&#47; chr(charnames::vianame(&quot;LATIN LETTER SMALL CAPITAL $&amp;&quot;)) &#47;egr;</code>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 5, "last_activity_date": 1560417299, "last_edit_date": 1560417299, "creation_date": 1560416729, "answer_id": 56577034, "question_id": 56575782, "link": "https://stackoverflow.com/questions/56575782/interpolate-variable-inside-n/56577034#56577034", "title": "Interpolate variable inside \\N", "body": "<p><code>\\N{}</code> is a compile-time construct. Use <a href=\"http://p3rl.org/charnames\" rel=\"noreferrer\">charnames</a> to look up a character by name at run-time.</p>\n\n<pre><code>perl -C -mcharnames -E'\n    say chr charnames::vianame(\n        \"LATIN LETTER SMALL CAPITAL \" . $_\n    ) for qw(I N R)\n'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1560455315, "last_edit_date": 1560455315, "creation_date": 1560419994, "answer_id": 56578002, "question_id": 56575782, "link": "https://stackoverflow.com/questions/56575782/interpolate-variable-inside-n/56578002#56578002", "title": "Interpolate variable inside \\N", "body": "<p><code>\\N{}</code> is a compile-time construct. One solution is therefore to generate code and evaluate it. <code>s///</code> has built-in support for this in the form of <code>/ee</code>.</p>\n\n<pre><code>use open ':encoding(UTF-8)';\nuse feature qw(say);\n\nmy $text = 'A';\nsay $text =~ s/([a-zA-Z])/ qq{\"\\\\N{LATIN LETTER SMALL CAPITAL $1}\"} /eer;\n</code></pre>\n\n<p>How this works:</p>\n\n<ol>\n<li>The first <code>e</code> causes <code>qq{\"\\\\N{LATIN LETTER SMALL CAPITAL $1}\"}</code> to be evaluated, producing <code>\"\\N{LATIN LETTER SMALL CAPITAL A}\"</code>.</li>\n<li>The second <code>e</code> causes <code>\"\\N{LATIN LETTER SMALL CAPITAL A}\"</code> to be evaluated, producing <code>\u1d00</code>.</li>\n<li>The <code>A</code> is substituted with <code>\u1d00</code>.</li>\n</ol>\n"}], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56577034, "answer_count": 2, "score": 1, "last_activity_date": 1560455315, "creation_date": 1560412357, "question_id": 56575782, "link": "https://stackoverflow.com/questions/56575782/interpolate-variable-inside-n", "title": "Interpolate variable inside \\N", "body": "<p>I want to make a script which should be able to transform the input to small capitals.\nI've tried the following code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse feature qw(say);\nbinmode STDOUT, \":utf8\";\nmy $text = join '',&lt;STDIN&gt;;\nsay $text=~s/[a-zA-Z]/\\N{LATIN LETTER SMALL CAPITAL $&amp;}/gr;\n</code></pre>\n\n<p>But I get </p>\n\n<blockquote>\n  <p>Unknown charname '\"LATIN LETTER SMALL CAPITAL $&amp;\"' at small.pl line 7,\n  within string Execution of small.pl aborted due to compilation errors.</p>\n</blockquote>\n\n<p>I am open to other ways to do it.</p>\n"}, {"tags": ["perl", "pipe", "ipc"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1560403994, "post_id": 56573847, "comment_id": 99725930, "body": "A simple and specific example of a pseudo-terminal with <code>IPC::Run</code> in <a href=\"https://stackoverflow.com/a/54547957/4653379\">this post</a>.  There&#39;s also an option to use the program <code>unbuffer</code>, if available; see the other answer at the linked page."}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560927310, "post_id": 56573933, "comment_id": 99892207, "body": "Using <code>run \\@cmdArr, &#39;&gt;pty&gt;&#39;, sub { print &quot;@_&quot; }</code> solved the problem. But, suppose I also want to pass a string to the program I am running as input (the program prompts the user for an input),  then how should I modify this statement ?"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560930453, "post_id": 56573933, "comment_id": 99893833, "body": "The command I&#39;m trying to actually run is a <code>ssh</code> command. And the input I am trying to pass is the user password for remote login. I tried this - <code>run \\@cmdArr, \\$sshpwd, &#39;&gt;pty&gt;&#39;, sub { print &quot;@_&quot; }</code> - but this doesn&#39;t seem to work, it still asks for the password."}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1561011281, "post_id": 56573933, "comment_id": 99925995, "body": "I found my answer here - <a href=\"https://stackoverflow.com/questions/24454037/pass-a-password-to-ssh-in-pure-bash\" title=\"pass a password to ssh in pure bash\">stackoverflow.com/questions/24454037/&hellip;</a>. Instead of using <code>ssh</code> to login into remote system use  <code>sshpass</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1560404047, "creation_date": 1560404047, "answer_id": 56573933, "question_id": 56573847, "link": "https://stackoverflow.com/questions/56573847/running-external-program-in-perl-without-simultaneous-output/56573933#56573933", "title": "Running external program in Perl without simultaneous output", "body": "<p>The child sends output in chunks of 4 or KiB or 8 KiB rather than a line at a time. Perl programs, like most programs, flush STDOUT on linefeed, but only when connected to a terminal; they fully buffer the output otherwise. You can add <code>$| = 1;</code> to the child to disable buffering of STDOUT.</p>\n\n<p>If you can't modify the child, such programs can be fooled by using pseudo-ttys instead of pipes. See <a href=\"http://search.cpan.org/perldoc?IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>. (Search its documentation for \"pty\".)</p>\n"}], "owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 56573933, "answer_count": 1, "score": 1, "last_activity_date": 1560929272, "creation_date": 1560403598, "last_edit_date": 1560929272, "question_id": 56573847, "link": "https://stackoverflow.com/questions/56573847/running-external-program-in-perl-without-simultaneous-output", "title": "Running external program in Perl without simultaneous output", "body": "<p>I have a Perl script </p>\n\n<pre><code>for my $i (1..10) {\n    print \"How $i\\n\";\n    sleep(1);\n}\n</code></pre>\n\n<p>I want to run it from another perl script and capture its output. I know that I can use qx() or backticks, but they will return all the output simultaneously when the program exits. </p>\n\n<p>But, what I instead want is to print the output of the first script from the second script as soon as they are available ie. for the example code the output of the first script is printed in ten steps from the second script and not in one go.</p>\n\n<p>I looked at <a href=\"https://stackoverflow.com/questions/4443659/calling-command-from-perl-need-to-see-output\">this question</a> and wrote my second script as </p>\n\n<pre><code>my $cmd = \"perl a.pl\";\nopen my $cmd_fh, \"$cmd |\";\n\nwhile(&lt;$cmd_fh&gt;) {\n    print \"Received: $_\\n\";\n    STDOUT-&gt;flush();\n}\n\nclose $cmd_fh;\n</code></pre>\n\n<p>However, the output is still being printed simultaneously. I wanted to know a way to get this done ?</p>\n"}, {"tags": ["perl", "pack", "unpack"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "edited": false, "score": 0, "creation_date": 1561003257, "post_id": 56573476, "comment_id": 99923922, "body": "Another issue which i am facing is when i pack value &quot;a&quot; using command pack(&quot;H2&quot;, &quot;0a&quot;) i am getting value &quot; &quot; and a new line. so when i try to unpack this using command unpack (&quot;H2&quot; , &quot;  &quot;) i am getting value &quot;20&quot;. Any idea why this is coming?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1560400931, "creation_date": 1560400931, "answer_id": 56573476, "question_id": 56573421, "link": "https://stackoverflow.com/questions/56573421/query-about-how-to-unpack-a-packed-binary-data/56573476#56573476", "title": "Query about how to unpack a packed binary data", "body": "<p>The inverse of</p>\n\n<pre><code>my $single_byte_str = pack(\"H2\" , $two_hex_digits);\n   or\nmy $single_byte_str = pack(\"C\" , hex($two_hex_digits));\n   or\nmy $single_byte_str = chr(hex($two_hex_digits));\n</code></pre>\n\n<p>is</p>\n\n<pre><code>my $two_hex_digits = unpack(\"H2\" , $single_byte_str);\n  or\nmy $two_hex_digits = sprintf(\"%02x\", unpack(\"C\" , $single_byte_str));\n  or\nmy $two_hex_digits = sprintf(\"%02x\", ord($single_byte_str));\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560400931, "creation_date": 1560400439, "question_id": 56573421, "link": "https://stackoverflow.com/questions/56573421/query-about-how-to-unpack-a-packed-binary-data", "title": "Query about how to unpack a packed binary data", "body": "<p>I have a packed binary data using below code:\nmy $binarydata .= pack (\"H2\" , $no);</p>\n\n<p>This gives me some binary data which is not in readable format.</p>\n\n<p>I need to take this binary data and convert back to ascii using unpack.\nAny help would be greatly appreciated</p>\n"}]