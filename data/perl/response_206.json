[{"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545257384, "post_id": 53859362, "comment_id": 94567616, "body": "Can you please <a href=\"https://stackoverflow.com/posts/53859362/edit\">edit</a> your post and add the Perl code you&#39;ve already written?"}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 2, "creation_date": 1545259438, "post_id": 53859362, "comment_id": 94568353, "body": "A <code>split &#47;SBSDRYTGT&#47;</code> and a count of the items resulting might lead you in fruitful directions."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1545263535, "post_id": 53859362, "comment_id": 94569460, "body": "&quot;<i>Again, efficient way please.</i>&quot; -- um ... can you <i>please</i> show us what you&#39;ve tried? This seems like a mere request for code (and efficient code &quot;please&quot;)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545263561, "post_id": 53859362, "comment_id": 94569467, "body": "Voting to close as off-topic (and too broad)"}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 0, "last_activity_date": 1545323927, "creation_date": 1545323927, "answer_id": 53872738, "question_id": 53859362, "link": "https://stackoverflow.com/questions/53859362/how-can-i-show-a-string-before-a-keyword-in-a-data-file-using-bash-and-perl-sepa/53872738#53872738", "title": "How can I show a string before a keyword in a data file using BASH and PERL separately?", "body": "<p>Questions:</p>\n\n<ol>\n<li>is there something wrong with your input file -- why is datapoint 5 on the same line as 4?</li>\n<li>why is there SBSDRYTGT in the recommended output if you want what's \"between keywords PRMRYTGT and first SBSDRYTGT\"?  Your specification doesn't match your example.</li>\n</ol>\n\n<p>This should get you started; modify to suit.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\n\n@ARGV == 3 or die(\"Usage: &lt;infile&gt; &lt;outfile1&gt; &lt;outfile2&gt;\\n\");\nmy ($infile, $outfile1, $outfile2) = @ARGV;\n\nopen(my $in, '&lt;', $infile) or die($!);\nopen(my $out1, '&gt;', $outfile1) or die($!);\nopen(my $out2, '&gt;', $outfile2) or die($!);\n\nwhile (&lt;$in&gt;)\n{\n    chomp;\n    next unless $_; # skip blank lines\n\n    /^(\\d+) (.+)$/ or die(\"Unparseable line: $_\\n\"); # get datapoint num.\n    my $n = $1;\n    my ($p, @s) = split(/SBSDRYTGT/, $2);\n    @s = map { \"SBSDRYTGT $_\" } @s; # add SBSDRYTGT back to elements\n    print $out1 \"$n $p\\n\\n\"; # \\n\\n maintains doublespacing\n    @s and print $out2 \"$n @s\\n\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1545323927, "creation_date": 1545254736, "last_edit_date": 1592644375, "question_id": 53859362, "link": "https://stackoverflow.com/questions/53859362/how-can-i-show-a-string-before-a-keyword-in-a-data-file-using-bash-and-perl-sepa", "title": "How can I show a string before a keyword in a data file using BASH and PERL separately?", "body": "<p>My research data has variable columns. Each line has at least one label/keyword, like &quot;PRMRYTGT&quot; and/or &quot;SBSDRYTGT&quot;. Below is the data example.</p>\n<blockquote>\n<p>0  PRMRYTGT     16655      O     16657      H  0.991     16656      H  1.053</p>\n<p>1  PRMRYTGT     16655      O     16657      H  1.013     16656      H  1.093</p>\n<p>2  PRMRYTGT     16655      O     16657      H  0.931     16656      H  1.148  SBSDRYTGT     16656      H     15821      O  1.407  SBSDRYTGT     15821      O     16656      H  1.407     15823      H  1.370     15822      H  1.019</p>\n<p>3  PRMRYTGT     16655      O     16657      H  1.052     16656      H  1.300     16113      H  1.468  SBSDRYTGT     16656      H     15821      O  1.137  SBSDRYTGT     15821      O     16656      H  1.137     15822      H  0.980</p>\n<p>4  PRMRYTGT     16655      O     16657      H  0.881     15747      H  1.491  SBSDRYTGT     15747      H     15746      O  1.116  SBSDRYTGT     15746      O     15748      H  1.003     15747      H  1.116\n5  PRMRYTGT     16655      O     16657      H  1.018     16113      H  1.459  SBSDRYTGT     16113      H     16112      O  1.161  SBSDRYTGT     16112      O     16114      H  1.017</p>\n<p>6  PRMRYTGT     16655      O     16657      H  0.926     16656      H  1.369  SBSDRYTGT     16656      H     15821      O  1.103  SBSDRYTGT     15821      O     16656      H  1.103     15822      H  1.042</p>\n<p>7  PRMRYTGT     16655      O     16657      H  0.960     16656      H  1.354  SBSDRYTGT     16656      H     15821      O  1.087  SBSDRYTGT     15821      O     16656      H  1.087     15822      H  1.060</p>\n<p>8  PRMRYTGT     16655      O     16657      H  0.969     16656      H  1.336  SBSDRYTGT     16656      H     15821      O  1.120  SBSDRYTGT     15821      O     16656      H  1.120     15822      H  0.955</p>\n<p>9  PRMRYTGT     16655      O     16657      H  0.951</p>\n<p>10  PRMRYTGT     16655      O    16657      H  0.970     16113      H  1.354  SBSDRYTGT     16113      H     16112      O  1.193  SBSDRYTGT     16112      O     16114      H  0.983</p>\n<p>11  PRMRYTGT     16655      O    16657      H  0.966     16113      H  1.204  SBSDRYTGT     16113      H     16112      O  1.317  SBSDRYTGT     16112      O     16114      H  1.053</p>\n</blockquote>\n<p>According to research requests, I want to display the content between keywords PRMRYTGT and 1st SBSDRYTGT, and then show data after the 1ST SBSDRYTGT. The variable columns make it hard to show the data. Is there any EFFICIENT to extract the data? Again, efficient way please. My data is up to  10GB and my analysis cost up to 20 days.\nI want the results look like:</p>\n<blockquote>\n<p>0  PRMRYTGT     16655      O     16657      H  0.991     16656      H  1.053</p>\n<p>1  PRMRYTGT     16655      O     16657      H  1.013     16656      H  1.093</p>\n<p>2  PRMRYTGT     16655      O     16657      H  0.931     16656      H  1.148</p>\n<p>3  PRMRYTGT     16655      O     16657      H  1.052     16656      H  1.300     16113      H  1.468</p>\n<p>4  PRMRYTGT     16655      O     16657      H  0.881     15747      H  1.491  SBSDRYTGT     15747      H     15746      O  1.116</p>\n<p>......</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>2 SBSDRYTGT     16656      H     15821      O  1.407  SBSDRYTGT     15821      O     16656      H  1.407     15823      H  1.370     15822      H  1.019</p>\n<p>3 SBSDRYTGT     16656      H     15821      O  1.137  SBSDRYTGT     15821      O     16656      H  1.137     15822      H  0.980</p>\n<p>4 SBSDRYTGT     15747      H     15746      O  1.116  SBSDRYTGT     15746      O     15748      H  1.003     15747      H  1.116</p>\n</blockquote>\n<p>Any help would be highly appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1545245746, "post_id": 53857305, "comment_id": 94562846, "body": "Is perl a requirement?"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545245764, "post_id": 53857305, "comment_id": 94562853, "body": "Does the order matter?  For example, if Y came before X, would it mess you up if it still captured?  I was thinking <code>my @matches = $example =~ &#47;[XY]\\{([^}]+)\\}&#47;g;</code>  Also this would capture multiple occurrences of X and Y."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1545246264, "post_id": 53857305, "comment_id": 94563094, "body": "Provide more samples of input with expected output"}], "answers": [{"comments": [{"owner": {"reputation": 1846, "user_id": 309816, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/161a80c6c0ae69ebb9d2580e640f3154?s=128&d=identicon&r=PG", "display_name": "Alexandros", "link": "https://stackoverflow.com/users/309816/alexandros"}, "edited": false, "score": 0, "creation_date": 1545259142, "post_id": 53859251, "comment_id": 94568255, "body": "Thanks for this detailed explanation. I was intent to get it to work with one pattern but now I understand why multiple patterns is the only way to go."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1545259804, "post_id": 53859251, "comment_id": 94568467, "body": "Nice use of /x modifier (ignore whitespace) to make the regex readable"}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 1, "last_activity_date": 1545258146, "last_edit_date": 1545258146, "creation_date": 1545254249, "answer_id": 53859251, "question_id": 53857305, "link": "https://stackoverflow.com/questions/53857305/optional-token-for-group-seems-to-prevent-capture/53859251#53859251", "title": "Optional token for group seems to prevent capture?", "body": "<p>You should remind yourself of the basic facet of regular expressions: they're greedy by default as long as the entire expression can match.</p>\n\n<p>Your example of</p>\n\n<pre><code>/.*(,X\\{(.*?)\\})?.*(,Y\\{(.*?)\\})?/\n</code></pre>\n\n<p>only has optional elements, so it will always match - an empty string if nothing else.</p>\n\n<p>Problem is, RE will be greedy at the earliest possible position and to the greatest extent possible (while still being able to match the rest of the expression). Therefore the first <code>.*</code> will consume everything in your string, leaving the other subexpressions to default to matching empty strings (via <code>?</code> or <code>*</code>).</p>\n\n<p>It's hard to make the X{} and Y{} optional while still preferring them to be present; If you make them optional, the regex engine will end up never using them if it can get away with it.</p>\n\n<p>I'd suggest using subexpressions with alternating combinations of X{} and Y{} present either inside <code>(?:...|...)</code> (with subsequent assignment of values to variables depending on the branch used) or inside branch reset <code>(?|...|...)</code> (written as proper code in order to use the <code>/x</code>):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nforeach my $data (&lt;DATA&gt;) {\n    chomp $data;\n\n    if ($data =~ /\n                     (?|\n                         .*?                  # both X and Y present\n                         ,X \\{ ([^{}]*) \\}\n                         .*?\n                         ,Y \\{ ([^{}]*) \\}\n                     |\n                         .*?                  # only X present\n                         ,X \\{ ([^{}]*) \\}\n                         .*\n                         ()\n                     |\n                         .*?                  # only Y present\n                         ()\n                         ,Y \\{ ([^{}]*) \\}\n                     |                \n                         () ()                # neither X nor Y present\n                     )\n                 /x) {\n\n        print \"$1, $2\\n\";\n    }\n}\n\nexit 0;\n\n__DATA__\nexample ,X{whateverX},...,Y{whateverY} the end\nexample2 ,X{whateverX2},random data to the end\nexample3 with data before ,Y{whateverY3} the end\nexample4 with just data and no separators\n</code></pre>\n\n<p>Will output:</p>\n\n<pre><code>whateverX, whateverY\nwhateverX2, \n, whateverY3\n, \n</code></pre>\n\n<p>Note that the leading <code>.*?</code>'s are needed, or otherwise the <code>()()</code> would end up matching in each case.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 9725432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZkBEF.jpg?s=128&g=1", "display_name": "theMage", "link": "https://stackoverflow.com/users/9725432/themage"}, "is_accepted": false, "score": 0, "last_activity_date": 1545257272, "creation_date": 1545257272, "answer_id": 53859817, "question_id": 53857305, "link": "https://stackoverflow.com/questions/53857305/optional-token-for-group-seems-to-prevent-capture/53859817#53859817", "title": "Optional token for group seems to prevent capture?", "body": "<p>Specially because your second group is optional, you need to make sure that your middle discard match the .* in the middle doesn't match with the start of your second block:</p>\n\n<pre><code>echo \"example ,X{whateverX},...,Y{whateverY} the end\" | \\\nperl -ne 'print \"$2 $4 \\n\" if /.*(,X\\{(.*?)\\})(?:(?!,Y).)*(,Y\\{(.*?)\\})?/;'\nwhateverX whateverY \n</code></pre>\n\n<p>The important bit in there is this:</p>\n\n<pre><code>(?:(?!,Y).)*\n</code></pre>\n\n<p>the (?: ) makes sure this is not a capture group</p>\n\n<p>the (?!,Y) makes sure that this block does not include the string ,Y</p>\n\n<p>If you want to be more precise, you can use (?!,Y{) as well.</p>\n"}, {"tags": [], "owner": {"reputation": 6167, "user_id": 244811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVPtR.jpg?s=128&g=1", "display_name": "Scott Weaver", "link": "https://stackoverflow.com/users/244811/scott-weaver"}, "is_accepted": false, "score": 0, "last_activity_date": 1547322842, "last_edit_date": 1547322842, "creation_date": 1545260655, "answer_id": 53860370, "question_id": 53857305, "link": "https://stackoverflow.com/questions/53857305/optional-token-for-group-seems-to-prevent-capture/53860370#53860370", "title": "Optional token for group seems to prevent capture?", "body": "<p>Another, arguably much simpler approach: let the engine do more than one match per line with the global modifier.   Your pattern then becomes a trivial alternation,  without all the <code>.*</code> or <code>?</code> shenanigans:</p>\n\n<p><code>/X\\{(?&lt;X&gt;.*?)\\}|Y\\{(?&lt;Y&gt;.*?)\\}/g</code></p>\n\n<p><a href=\"https://regex101.com/r/lIfCKh/2/\" rel=\"nofollow noreferrer\">regex 101 demo</a></p>\n"}], "owner": {"reputation": 1846, "user_id": 309816, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/161a80c6c0ae69ebb9d2580e640f3154?s=128&d=identicon&r=PG", "display_name": "Alexandros", "link": "https://stackoverflow.com/users/309816/alexandros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 53859251, "answer_count": 3, "score": 1, "last_activity_date": 1547322842, "creation_date": 1545244517, "last_edit_date": 1545245761, "question_id": 53857305, "link": "https://stackoverflow.com/questions/53857305/optional-token-for-group-seems-to-prevent-capture", "title": "Optional token for group seems to prevent capture?", "body": "<p>I want to capture the text between the brackets of X{} and Y{}:</p>\n\n<pre><code>echo \"example ,X{whateverX},...,Y{whateverY} the end\" | \\\n  perl -ne 'print \"$2 $4 \\n\" if /.*(,X\\{(.*?)\\}).*(,Y\\{(.*?)\\})/;' \nwhateverX whateverY\n</code></pre>\n\n<p>Now, I want to make the presence of X and/or Y optional, but as soon as I add the optional modifier it stops matching/capturing:</p>\n\n<pre><code>echo \"example ,X{whateverX},...,Y{whateverY} the end\" | \\\n      perl -ne 'print \"$2 $4 \\n\" if /.*(,X\\{(.*?)\\})?.*(,Y\\{(.*?)\\})?/;' \n&lt;nothing printed&gt;\n</code></pre>\n\n<p>NOTE: above I added the ? modifier at the and of each of the X/Y groups as highlighted below (last character):</p>\n\n<pre><code>.\\*(,X\\\\{(.\\*?)\\\\})**?**\n\n.\\*(,Y\\\\{(.\\*?)\\\\})**?**\n</code></pre>\n\n<p>For instance, here I only have Y as optional and only X is matched:</p>\n\n<pre><code>echo \"example ,X{whateverX},...,Y{whateverY} the end\" | \\\n      perl -ne 'print \"$2 $4 \\n\" if /.*(,X\\{(.*?)\\}).*(,Y\\{(.*?)\\})?/;'\nwhateverX\n</code></pre>\n\n<p>I expected all three to produce \"whateverX whateverY\" but only the first one does...</p>\n\n<p>What am I missing? Why does making the capture-group optional break my matching?</p>\n"}, {"tags": ["regex", "perl", "interpolation", "metacharacters"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545241509, "post_id": 53855712, "comment_id": 94561044, "body": "Why are you using <code>our</code>??? You should never use <code>our</code> except when required (e.g. for <code>@ISA</code> and <code>@EXPORT</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545241580, "post_id": 53855712, "comment_id": 94561074, "body": "It&#39;s not clear what you&#39;re asking. Does <code>$regexp</code> contain a regex pattern, or text to match literally? What problem are you having? You have failed to demonstrate your problem. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545242074, "post_id": 53855712, "comment_id": 94561288, "body": "What do you mean by &quot;it&#39;s not working&quot;? Regexp metacharacters like <code>$</code> work after <code>\\E</code>. But maybe your regular expression is not what you think, or you have whitespace at the end of <code>$regexp</code> and so your input will not match your regular expression. It&#39;s hard to say without seeing concrete data. Please <a href=\"https://stackoverflow.com/posts/53855712/edit\">edit</a> your question and add hardcoded data to reproduce the problem."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1545242376, "post_id": 53855712, "comment_id": 94561422, "body": "<i>&quot;but not being the same thing fundamentally</i>&quot; : Please clarify what you mean."}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545249047, "post_id": 53855712, "comment_id": 94564267, "body": "@ikegami I use our and my because the Perl books with camels and llamas on the told me to. The regexp may or may not contain any metacharacters and needs to be a literal match, but the issue arises when I try to anchor the regexp to not match any additional characters, like:      &quot;ABC&quot; =~ /ABC/; # This is fine.     &quot;ABCD&quot; =~ /ABC^/; # This is fine.     &quot;ABCD&quot; =~ /ABC/; # I don&#39;t want to match this.  That is the issue. When I try to anchor, the program &quot;freezes&quot; during the evaluation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545249118, "post_id": 53855712, "comment_id": 94564305, "body": "I seriously seriously doubt that. None of the <code>our</code> in your program should be <code>our</code>. That&#39;s very very wrong. They should ALL be <code>my</code>, You should reread what was actually said in the books"}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545249243, "post_id": 53855712, "comment_id": 94564346, "body": "I use our for &quot;global&quot; variables, and my for &quot;private&quot; variables"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545249281, "post_id": 53855712, "comment_id": 94564364, "body": "Noone of those variables should be global. You should be using <code>my</code> for all of them."}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545249764, "post_id": 53855712, "comment_id": 94564572, "body": "I don&#39;t have the entire program listed here, just the section that is giving me the problem. I have subroutines that I want to access values of some variables in, but don&#39;t want to pass in references or the variable itself. I understand this may not be efficient, or elegant, but that is not my focus currently. I am still learning how to use Perl, and will eventually get there. Currently, deadlines and immediate needs drive my code development, not an earnest desire to generate textbook quality code"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545249845, "post_id": 53855712, "comment_id": 94564600, "body": "Backwards. Not following proper development practices causes development to take LONGER. That&#39;s the whole point!"}], "answers": [{"comments": [{"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545303060, "post_id": 53857453, "comment_id": 94581509, "body": "Aah, interesting...  admittedly, I did not know that about \\Q\\E.  Alas, if he uses \\Q, then won&#39;t that just literally look for the string &quot;$dev&quot; every time?  Obviously not, based on your answer..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545325818, "post_id": 53857453, "comment_id": 94593531, "body": "<code>\\Q</code> still allows interpolation and other string literal operations (e.g. <code>\\L</code>). It even allows <code>\\ </code> to work normally in double-quoted strings literals"}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 0, "last_activity_date": 1545245253, "creation_date": 1545245253, "answer_id": 53857453, "question_id": 53855712, "link": "https://stackoverflow.com/questions/53855712/how-can-i-properly-stop-and-start-metacharacter-interpolation-in-regexp-in-perl/53857453#53857453", "title": "How can I properly stop and start metacharacter interpolation in regexp in Perl", "body": "<p>I would use <code>quotemeta</code>.  Here is an example of how it compares:</p>\n\n<pre><code>my $regexp = '\\t';\nmy $metaxp = quotemeta ($regexp);\n\nwhile (&lt;DATA&gt;) {\n  print \"match \\$regexp - $_\" if /$regexp/;\n  print \"match \\$metaxp - $_\" if /$metaxp/;\n}\n\n__DATA__\nThis \\t is not a tab\nThis    is a tab\n</code></pre>\n\n<p>(there is literally a tab in the second line)</p>\n\n<p>The meta version will match line 1, as it turned \"\\t\" into essentially \"\\t,\" and the non-meta (original) version will match line 2, which assumes you are looking for a tab.</p>\n\n<pre><code>match $metaxp - This \\t is not a tab\nmatch $regexp - This    is a tab\n</code></pre>\n\n<p>Hopefully you get my meaning.</p>\n\n<p>I think adding <code>$regexp = quotemeta ($regexp)</code> (or doing it when you capture the standard input) should meet your need.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545249895, "post_id": 53858365, "comment_id": 94564631, "body": "Yes sir. That is a typo. The code should have a &#39;$&#39; instead of a &#39;^&#39;. My bad."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545249911, "post_id": 53858365, "comment_id": 94564636, "body": "No, it shouldn&#39;t. It should be <code>\\z</code>. And as you can see, it works. If you still think otherwise, please feel free to provide a demonstration of your problem. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251170, "post_id": 53858365, "comment_id": 94565105, "body": "I really appreciate you trying to help me, but I cannot get your method to work in the perl script, or from the command line      [kthmgr@q4098 bin]$ perl -e &#39;open $fh, &quot;&lt;/tmp/file.csv&quot;; chomp(@devs = &lt;$fh&gt;); $regex = &quot;find+th/s-str*ng&quot;; CORE::say $_ for grep { $_ eq $regex } @devs;&#39;     CORE::say is not a keyword at -e line 1.     kthmgr@q4098 bin]$ perl -e &#39;open $fh, &quot;&lt;/tmp/file.csv&quot;; chomp(@devs = &lt;$fh&gt;); $regex = &quot;find+th/s-str*ng&quot;; print &quot;$_\\n&quot; for grep { $_ eq $regex } @devs;&#39;     [kthmgr@q4098 bin]$   This could be due to my version of perl being only 5.8, not sure"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251420, "post_id": 53858365, "comment_id": 94565194, "body": "Re &quot;<i>CORE::say is not a keyword</i>&quot;, You&#39;re using an old version of Perl. Use <code>print &quot;$_\\n&quot;</code> instead of <code>CORE::say</code>"}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251473, "post_id": 53858365, "comment_id": 94565214, "body": "Ok, using either method, I am not getting a match from the program:      Please enter the program name:     Match+this     No matches found"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251487, "post_id": 53858365, "comment_id": 94565222, "body": "Agian, you have no demonstrated your problem. Why do you insist on hiding things?"}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251531, "post_id": 53858365, "comment_id": 94565235, "body": "I tried it both ways, if you find the second attempt in the bundle of command lines I put up. I though indenting with 4 spaces would convert the comment to code    like this"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251546, "post_id": 53858365, "comment_id": 94565242, "body": "The file. What&#39;s in the file?"}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251596, "post_id": 53858365, "comment_id": 94565267, "body": "What more do you need from me? The command doesn&#39;t work for me"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251611, "post_id": 53858365, "comment_id": 94565274, "body": "Re &quot;<i>What more do you need from me?</i>&quot;, The file. What&#39;s in the file?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545251623, "post_id": 53858365, "comment_id": 94565280, "body": "Re &quot;<i>The command doesn&#39;t work for me</i>&quot;, Unless there&#39;s a problem opening the file, it&#39;s working. There are simply no matches in the file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545252126, "post_id": 53858365, "comment_id": 94565494, "body": "Re &quot;<i>I though indenting with 4 spaces would convert the comment to code like this</i>&quot;, To fix the question, edit the question."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1545310607, "post_id": 53858365, "comment_id": 94585228, "body": "@WetCheerios What we need to better help you is the value of <code>$dev</code> in your program, and a representative line or trhree of the file <code>&#47;path&#47;file.csv</code>. The code itself works, so something must be wrong/misunderstood with your data. As we don&#39;t see your data, please tell us your data and <code>$dev</code>. For example, <code>print &quot;[[$dev]]\\n&quot;</code> outputs what is in <code>$dev</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1545251442, "last_edit_date": 1545251442, "creation_date": 1545249531, "answer_id": 53858365, "question_id": 53855712, "link": "https://stackoverflow.com/questions/53855712/how-can-i-properly-stop-and-start-metacharacter-interpolation-in-regexp-in-perl/53858365#53858365", "title": "How can I properly stop and start metacharacter interpolation in regexp in Perl", "body": "<p>The device id followed by the start of the string? <code>/\\Q$dev\\E^/</code> makes no sense. You want the device id to be preceded by the start of the string and followed by the end of the string.</p>\n\n<pre><code>grep { /^\\Q$dev\\E\\z/ }\n</code></pre>\n\n<p>Better yet, let's avoid spinning up the regex engine for nothing.</p>\n\n<pre><code>grep { $_ eq $dev }\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ perl -e'my $dev = \"ccc\"; CORE::say for grep { /^\\Q$dev\\E\\z/ } qw( accc ccc ccce );'\nccc\n\n$ perl -e'my $dev = \"ccc\"; CORE::say for grep { $_ eq $dev } qw( accc ccc ccce );'\nccc\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1545251442, "creation_date": 1545238073, "last_edit_date": 1545248806, "question_id": 53855712, "link": "https://stackoverflow.com/questions/53855712/how-can-i-properly-stop-and-start-metacharacter-interpolation-in-regexp-in-perl", "title": "How can I properly stop and start metacharacter interpolation in regexp in Perl", "body": "<p>Editing to be more concise, pardon.</p>\n\n<p>I need to be able to grep from an array using a string that may contain one of the following characters: '.', '+', '/', '-'. The string will be captured via  from the user. The array contains each line of the file I'm searching through (I'm chomping the file into the array to avoid keeping it open while the user is interfacing with the program because it is on a cron and I do not want to have it open when the cron runs), and each line has a unique identifier within it which is the basis for the search string used in the regexp. The code below shows the grep statement I am using, and I use OUR and MY in my programs to make the variables I want access to in all namespaces available, and the ones I use only in subroutines not. If you do want to try and replicate the issue</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Switch;\nuse Data::Dumper;\n\nour $pgm_path = \"/tmp/\";\nour $device_info = \"\";\n\nour @new_filetype1 = ();\nour @new_filetype2 = ();\nour @dev_info = ();\nour @pgm_files = ();\n\nour %arch_rtgs = ();\n\nour $file = \"/path/file.csv\";\nopen my $fh, '&lt;', $file or die \"Couldn't open $file!\\n\";\nchomp(our @source_file = &lt;$fh&gt;);\nclose $fh;\n\nprint \"Please enter the device name:\\n\";\nchomp(our $dev = &lt;STDIN&gt;);\n\nwhile ($device_info eq \"\") {\n    # Grep the device info from the sms file\n    my @sms_device = grep(/\\Q$dev\\E/, @source_file);\n    if (scalar(@sms_device) &gt; 1) {\n        my $which_dup = find_the_duplicate(\\@sms_device);\n        if ($which_dup eq \"program\") {\n            print \"\\n-&gt; $sms_dev &lt;- must be a program name instead of a device name.\" .\n            \"\\nChoose the device from the list you are working on, specifically.\\n\";\n            foreach my $fix(@sms_device) {\n                my @fix_array = split(',', $fix);\n                print \"$fix_array[1]\\n\";\n                undef @fix_array;\n            }\n            chomp($sms_dev = &lt;STDIN&gt;);\n            } else { $device_info = $which_dup; }\n        } elsif (scalar(@sms_device) == 1) { \n            ($device_info) = @sms_device;\n            @sms_device = ();\n        }\n}\n</code></pre>\n\n<p>When I try the code with an anchor:</p>\n\n<pre><code>my @sms_device = grep(/\\Q$dev\\E^/, @source_file);\n</code></pre>\n\n<p>No more activity from the program is noticed. It just sits there like it's waiting on some more input from the user. This is not what I expected to happen. The reason I would like to anchor the search pattern is because there are many, many examples of similarly named devices that have the same character order as the search pattern, but also include additional characters that are ignored in the regexp evaluation. I don't want them to be ignored, in the sense that they are included in matches. I want to force an exact match of the string in the variable.</p>\n\n<p>Thanks in advance for wading through my terribly inexperienced code and communication attempts at detailing my problem.</p>\n"}, {"tags": ["perl", "bugzilla"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10811554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJYyB.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10811554/brian"}, "edited": false, "score": 1, "creation_date": 1545323761, "post_id": 53871296, "comment_id": 94592491, "body": "I ended up solving my problem in an orthogonal way that did not require adding new comments, but I&#39;ll try this approach and report back."}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 1, "last_activity_date": 1545318629, "creation_date": 1545318629, "answer_id": 53871296, "question_id": 53854637, "link": "https://stackoverflow.com/questions/53854637/adding-a-comment-from-a-specific-user-in-a-bugzilla-extension/53871296#53871296", "title": "Adding a comment from a specific user in a bugzilla extension", "body": "<p>The docs for add_comment do not mention the \"who\" parameter.</p>\n\n<p>However, there is <code>Bugzilla::Comment</code>, which has an author.</p>\n\n<p>I would therefore think that the way of achieving what you want is to make a new <code>Bugzilla::Comment</code> with the bug id and author.</p>\n\n<p>You should have the bug id available in the hook.\nYou will have to fetch the <code>Bugzilla::User</code> object for the author ( via the email, which you seem to have ).</p>\n\n<p>I have not tested this.</p>\n"}], "owner": {"reputation": 101, "user_id": 10811554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJYyB.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10811554/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545318629, "creation_date": 1545234158, "question_id": 53854637, "link": "https://stackoverflow.com/questions/53854637/adding-a-comment-from-a-specific-user-in-a-bugzilla-extension", "title": "Adding a comment from a specific user in a bugzilla extension", "body": "<p>I am writing a bugzilla extension which adds a comment to bugs when they are submitted using the <code>bug_end_of_create()</code> hook. Regardless of what I pass in the \"who\" parameter, the comment always appears to have been created by the user that submitted the bug. How do you set the user when creating a comment?</p>\n\n<pre><code>use Bugzilla::User;\n\nour $VERSION = '0.01';\n\nsub install_update_db {\n    my ($self, $args) = @_;\n\n}\n\nsub bug_end_of_create {\n    my ($self, $args) = @_;\n    my $bug = $args-&gt;{'bug'};\n\n    $bug-&gt;add_comment('[automated message]', {\"who\" =&gt; 'me@domain.com'});\n}\n\n__PACKAGE__-&gt;NAME;\n</code></pre>\n"}, {"tags": ["linux", "perl", "mms", "hexdump"], "comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545233659, "post_id": 53853745, "comment_id": 94556464, "body": "So far I am unable to get the commands to work. I get Use of uninitialized value $_ in pattern match (m//) at -e line 1. and Use of uninitialized value $/ in string ne at /usr/share/perl/5.20/B/Deparse.pm line 772. -e syntax OK respectively. The copy of one of the smil files I am working with can be seen and downloaded here: <a href=\"https://wetransfer.com/downloads/2d64b2fab5eeada6f34c3cbc8b596fa720181217205049/1c30cd\" rel=\"nofollow noreferrer\">wetransfer.com/downloads/&hellip;</a>"}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545234245, "post_id": 53853745, "comment_id": 94556888, "body": "The last command does not give me errors but the thumbnail.jpeg file that is creates does not appear to be a proper jpeg as it is only 206 bytes and is not viewable with Ristretto Image Viewer."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545232010, "post_id": 53853942, "comment_id": 94555375, "body": "The pipeline converts the file to a hexdump, munges the hexdump and then converts the hexdump back to a file. This is much better done in Perl directly by editing the file directly (resp. extracting from the file directly)."}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545232470, "post_id": 53853942, "comment_id": 94555638, "body": "Yep. Totally agree."}], "tags": [], "owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1545231828, "creation_date": 1545231828, "answer_id": 53853942, "question_id": 53853745, "link": "https://stackoverflow.com/questions/53853745/extract-a-jpeg-from-a-smil-file/53853942#53853942", "title": "extract a jpeg from a SMIL file", "body": "<p>Write the whole command to a temp file and execute that.</p>\n\n<p>It will let you build the command in several statements if you like, which will make it more readable. </p>\n\n<p>Or, better, run the first command in a readable pipe. Parse the data yourself, rather than farming it out in a bash pipeline to <code>tr</code> <em>and</em> <code>sed</code>, both of which are pretty weak compared to perl. Then direct the output through a writable popen.</p>\n\n<p>Maybe you could even find a module that would let you handle what <code>xxd</code> is doing as well so that you don't need this at all. Maybe <a href=\"https://metacpan.org/pod/Data::HexDump::XXD\" rel=\"nofollow noreferrer\">Data::HexDump::XXD</a>? </p>\n\n<p>(haven't looked in detail, just trying to toss a quick, hopefully useful lead.)</p>\n"}, {"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545236415, "post_id": 53854978, "comment_id": 94558301, "body": "... did you test that solution against the file linked in the comments? Also, you never populate <code>$_</code>, so you should copy that version from the comment as well."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545240555, "post_id": 53854978, "comment_id": 94560592, "body": "Thanks but it gave me the following error: Use of uninitialized value $_ in pattern match (m//) at -e line 1. and created an empty jpeg file."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545240621, "post_id": 53854978, "comment_id": 94560626, "body": "This answer fails if there are any newlines in the JPEG file, and never reads in the data."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": -1, "last_activity_date": 1545293575, "last_edit_date": 1545293575, "creation_date": 1545235409, "answer_id": 53854978, "question_id": 53853745, "link": "https://stackoverflow.com/questions/53853745/extract-a-jpeg-from-a-smil-file/53854978#53854978", "title": "extract a jpeg from a SMIL file", "body": "<p>According to the jpeg standard there is a start of image and an end of image marker these are <code>OxFF OxD8</code> and <code>0xFF 0xD9</code> respectively.</p>\n\n<p>So the following one liner should work</p>\n\n<pre><code>perl -0777 -wne '/(\\x{FF}\\x{D8}.*?\\x{FF}\\x{D9})/ and print $1' input.smil &gt; thumbnail.jpeg\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545241433, "post_id": 53856438, "comment_id": 94561001, "body": "Awesome! Thank you. Maybe consider making it a perl module. Could not find anything that I though was suitable when I searched."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545241512, "post_id": 53856438, "comment_id": 94561046, "body": "@gatorreina I&#39;m not sure it makes sense to have JPEG extraction in arbitrary files, and I don&#39;t know anything about SMIL files in general..."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 1, "creation_date": 1545241554, "post_id": 53856438, "comment_id": 94561061, "body": "@gatorreina BTW, maybe the question should be retitled to &quot; perl script to extract a jpeg from a SMIL file&quot; ? You could do that ..."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545765538, "post_id": 53856438, "comment_id": 94691565, "body": "While the above solution does work on some smil files it appears to not work on all -- while the original bash command does. For example, it does not extract the jpeg from this file <a href=\"https://wetransfer.com/downloads/70862c5b7e88937a07eba0ae4de05b8620181225191154/026f03\" rel=\"nofollow noreferrer\">wetransfer.com/downloads/&hellip;</a> and truncates the jpeg to about 8% of the original file. I suspect that this may be due to a difference in the regex but am not sure. Still playing with it to try and make it work on all the files."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545768095, "post_id": 53856438, "comment_id": 94692106, "body": "I believe that it might be because the regex appears to truncate after every instance of the magic number (ff d8 ff) and if the file contains the sequence more than once large sections are deleted. I believe the solution above might work if it were to keep everything after the first instance of the magic number sequence. Don&#39;t know enough about regex to test."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1545242143, "last_edit_date": 1545242143, "creation_date": 1545240577, "answer_id": 53856438, "question_id": 53853745, "link": "https://stackoverflow.com/questions/53853745/extract-a-jpeg-from-a-smil-file/53856438#53856438", "title": "extract a jpeg from a SMIL file", "body": "<p>After testing against the example file, I converted the oneliner from the comments to a proper script.</p>\n\n<p>The meat of the script is the regex <code>/(\\xff\\xd8\\xff.*?\\x{ff}\\x{d9})/s</code>, which extracts the start of a JPEG header until (and including) the end of the JPEG marker <code>\\xff\\xd9</code>, while still allowing for newlines etc. in it ( <code>/s</code> modifier ):</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\n$/ = undef;\n\nmy( $filename ) = 'wapenc_T=mavodi-6-13b-1f-4-7c-4806803';\nmy( $outfilename ) = \"$filename-thumbnail.jpeg\";\n\nopen my $fh, '&lt;:raw', $filename\n    or die \"Couldn't read '$filename': $!\";\nmy $buffer;\n{\n    local $/;\n    $buffer = &lt;$fh&gt;;\n};\n\nopen my $output, '&gt;:raw', $outfilename\n    or die \"Couldn't write to '$outfilename': $!\";\n\nif( $buffer =~ /(\\xff\\xd8\\xff.*?\\x{ff}\\x{d9})/s ) {;\n    print $output $1\n};\n</code></pre>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 53856438, "answer_count": 3, "score": 1, "last_activity_date": 1545293575, "creation_date": 1545231132, "last_edit_date": 1545242166, "question_id": 53853745, "link": "https://stackoverflow.com/questions/53853745/extract-a-jpeg-from-a-smil-file", "title": "extract a jpeg from a SMIL file", "body": "<p>I am needing for my perl script to extract a jpeg from a SMIL file. The only way I have seen that does this is in linux is with the following command. </p>\n\n<pre><code>xxd -c1 -p wapenc\\?T\\=mavodi-6-13b-1f-4-7c-4806803 | tr \"\\n\" \" \" | sed -n -e 's/.*\\(ff d8 ff .*\\)/\\1/p' | xxd -r -p &gt; image.jpeg\n</code></pre>\n\n<p>Wrapping it in a system() call does not work. What would be the proper way to incorporate such a series of commands into perl?</p>\n"}, {"tags": ["string", "perl", "character"], "answers": [{"comments": [{"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 1, "creation_date": 1545240727, "post_id": 53850493, "comment_id": 94560681, "body": "Alternatively, <code>my ($newfoo) = $foo =~ &#47;(.*\\|)&#47;;</code> if you want the result in a named variable."}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 1, "last_activity_date": 1545226144, "last_edit_date": 1545226144, "creation_date": 1545219683, "answer_id": 53850493, "question_id": 53850352, "link": "https://stackoverflow.com/questions/53850352/perl-get-a-substring-until-the-last-occurence-of-a-character/53850493#53850493", "title": "perl: get a substring until the last occurence of a character", "body": "<p>In Perl, matches are by default \"greedy\", so you can simply do a match of everything up to the character you are using as your delimiter:</p>\n\n<pre><code>$foo=\"gi|1339058241|ref|XP_023717639.1|zinc finger and BTB domain-containing protein 18-like [Cryptotermes secundus]\";\n$foo =~ /.*\\|/; \nprint \"$&amp;\\n\"\n</code></pre>\n\n<p>The <code>$&amp;</code> represents the string matched by the last successful pattern match, in this case, everything up to the last <code>|</code> character.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "edited": false, "score": 0, "creation_date": 1545223565, "post_id": 53850746, "comment_id": 94550366, "body": "Thanks, but I don&#39;t understand why it does not stop at the first &#39;|&#39;: so &quot;gi|&quot; ?"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545240530, "post_id": 53850746, "comment_id": 94560579, "body": "The regex is saying strip all non-pipe characters at the end of the string.  Once it reaches the first pipe (from the right), it &quot;stops&quot;"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 1, "last_activity_date": 1545220651, "creation_date": 1545220651, "answer_id": 53850746, "question_id": 53850352, "link": "https://stackoverflow.com/questions/53850352/perl-get-a-substring-until-the-last-occurence-of-a-character/53850746#53850746", "title": "perl: get a substring until the last occurence of a character", "body": "<p>Here is another solution, that works by removing all characters different than <code>|</code> at the end of the given string.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = \"gi|1339058241|ref|XP_023717639.1|zinc finger and BTB domain-containing protein 18-like [Cryptotermes secundus]\";\n\n$str =~ s/[^|]*$//;\nprint \"$str\\n;\"\n</code></pre>\n\n<p>Explanation :</p>\n\n<ul>\n<li><code>[^|]</code> is a <em>character class</em> : it matches any char but <code>|</code> (the \"but\" is denoted by the <code>^</code> character)</li>\n<li><code>*</code> is a quantifier, meaning 0 to N characters</li>\n<li><code>$</code> represents the end of the string</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 1, "last_activity_date": 1545222785, "creation_date": 1545222785, "answer_id": 53851361, "question_id": 53850352, "link": "https://stackoverflow.com/questions/53850352/perl-get-a-substring-until-the-last-occurence-of-a-character/53851361#53851361", "title": "perl: get a substring until the last occurence of a character", "body": "<p>You can use <code>rindex</code> which is like <code>index</code>, only it searches from the right instead of the left side of the string -- pulling the last occurrence of a string instead of the first:</p>\n\n<pre><code>substr($str, 0, rindex ($str, '|') + 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 0, "last_activity_date": 1545325774, "last_edit_date": 1545325774, "creation_date": 1545325052, "answer_id": 53873004, "question_id": 53850352, "link": "https://stackoverflow.com/questions/53850352/perl-get-a-substring-until-the-last-occurence-of-a-character/53873004#53873004", "title": "perl: get a substring until the last occurence of a character", "body": "<p>I recognize these as NCBI seq header lines so I know they have a fixed number of fields. </p>\n\n<p>Since these are fields/columns, you can split and join:</p>\n\n<pre><code>my @rec = split(/\\|/, $id);\nmy $idShort = join(\"|\", @rec[0..3]);\nprint $idShort, \"\\n\";\n</code></pre>\n\n<p>Or you can use a regex:</p>\n\n<pre><code>if ($id =~ /^(gi\\|\\d+\\|\\w+\\|[\\w\\_]+\\.\\d+\\|)/) { print \"$1\\n\" } else { die(\"Unparseable: $id\\n\") }\n</code></pre>\n\n<p>But I like Hambone's use of rindex.</p>\n"}], "owner": {"reputation": 39, "user_id": 3819464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf68207a7173e5c883472c85e7c7a49?s=128&d=identicon&r=PG&f=1", "display_name": "Picasa", "link": "https://stackoverflow.com/users/3819464/picasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 53850746, "answer_count": 4, "score": 0, "last_activity_date": 1545325774, "creation_date": 1545219211, "question_id": 53850352, "link": "https://stackoverflow.com/questions/53850352/perl-get-a-substring-until-the-last-occurence-of-a-character", "title": "perl: get a substring until the last occurence of a character", "body": "<p>In perl, from this:</p>\n\n<pre><code>gi|1339058241|ref|XP_023717639.1|zinc finger and BTB domain-containing protein 18-like [Cryptotermes secundus]\n</code></pre>\n\n<p>if my character is <code>|</code>, how can I get the string: </p>\n\n<pre><code>gi|1339058241|ref|XP_023717639.1|\n</code></pre>\n\n<p>thanks.</p>\n"}, {"tags": ["perl", "debugging", "breakpoints", "constant-expression"], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1545236086, "post_id": 53850526, "comment_id": 94558095, "body": "Is there a way to avoid modifying the source (like some command line switch)?"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1545293484, "post_id": 53850526, "comment_id": 94576735, "body": "@U.Windl not that I know of"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1545318281, "post_id": 53850526, "comment_id": 94589522, "body": "I&#39;ve illustrated a means of avoiding code modification in my answer."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 5, "last_activity_date": 1545252337, "last_edit_date": 1545252337, "creation_date": 1545219826, "answer_id": 53850526, "question_id": 53850119, "link": "https://stackoverflow.com/questions/53850119/how-can-i-set-a-working-breakpoint-to-a-constant-expression/53850526#53850526", "title": "How can I set a working breakpoint to a constant expression?", "body": "<p>You are trying to put a break point in a <code>use</code> block.\nA use block is in effect a <code>BEGIN</code> block with a <code>require</code> in it.\nThe Perl debugger by default does not stop in compile phase.\nHowever you can force the Perl debugger into single step mode inside a <code>BEGIN</code> block by setting the variable <code>$DB::single</code> to <code>1</code></p>\n\n<p>See <code>Debugging Compile-Time Statements</code> in <code>perldoc perldebug</code></p>\n\n<p>If you change your code to</p>\n\n<pre><code>use constant C =&gt; map {\n    $DB::single = 1;\n    ...;\n} (0..255);\n</code></pre>\n\n<p>The Perl debugger will stop in the use statement.</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1546215291, "post_id": 53871183, "comment_id": 94802360, "body": "I had a similar idea using an environment variable to enable <code>$DB::single = 1</code> conditionally."}], "tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 3, "last_activity_date": 1545319266, "last_edit_date": 1545319266, "creation_date": 1545318237, "answer_id": 53871183, "question_id": 53850119, "link": "https://stackoverflow.com/questions/53850119/how-can-i-set-a-working-breakpoint-to-a-constant-expression/53871183#53871183", "title": "How can I set a working breakpoint to a constant expression?", "body": "<p>You can avoid altering your code if you create a simple module like this (<a href=\"https://metacpan.org/pod/Debug::Phases\" rel=\"nofollow noreferrer\">concept originated here</a>):</p>\n\n<pre><code>package StopBegin;\n\nBEGIN {\n    $DB::single=1;\n}\n1;\n</code></pre>\n\n<p>Then, run your code as </p>\n\n<pre><code>perl -I./  -MStopBegin -d test.pl\n</code></pre>\n\n<p><strong>Pertinent Answer (previous, not-so-pertinent answer is below this one)</strong></p>\n\n<p>If test.pl looks like this:</p>\n\n<pre><code>use constant C =&gt; {\n    map {;\n        \"C$_\" =&gt; $_;\n    } 0 .. 255\n};\n</code></pre>\n\n<p>here's what the debug interaction looks like:</p>\n\n<pre><code>% perl -I./  -MStopBegin -d test.pl\n\nLoading DB routines from perl5db.pl version 1.53\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nStopBegin::CODE(0x55db6287dac0)(StopBegin.pm:8):\n8:  1;\n  DB&lt;1&gt; s\nmain::CODE(0x55db6287db38)(test.pl:5):\n5:  };\n  DB&lt;1&gt; -\n1   use constant C =&gt; {\n2:      map {;\n3:          \"C$_\" =&gt; $_;\n4       } 0 .. 255\n5==&gt;    };\n  DB&lt;2&gt; b 3\n  DB&lt;3&gt; c\nmain::CODE(0x55db6287db38)(test.pl:3):\n3:          \"C$_\" =&gt; $_;\n  DB&lt;3&gt; \n</code></pre>\n\n<p>Note the use of the breakpoint to stop inside the <code>map</code>.</p>\n\n<p><strong>Previous, Not-So-Pertinent Answer</strong></p>\n\n<p>If <code>test.pl</code> looks like this:</p>\n\n<pre><code>my $foo;\n\nBEGIN {\n    $foo = 1;\n};\n</code></pre>\n\n<p>here's what the debug interaction looks like:</p>\n\n<pre><code>% perl -I./  -MStopBegin -d test.pl\n\nLoading DB routines from perl5db.pl version 1.53\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nStopBegin::CODE(0x5567e3d79a80)(StopBegin.pm:8):\n8:  1;\n  DB&lt;1&gt; s\nmain::CODE(0x5567e40f0db0)(test.pl:4):\n4:      $foo = 1;\n  DB&lt;1&gt; s\nmain::(test.pl:1):  my $foo;\n  DB&lt;1&gt; s\nDebugged program terminated.  Use q to quit or R to restart,\nuse o inhibit_exit to avoid stopping after program termination,\nh q, h R or h o to get additional info.\n  DB&lt;1&gt; \n</code></pre>\n\n<p>Note the use of the <code>s</code> command to advance, otherwise it'll skip over the <code>BEGIN</code> block in <code>test.pl</code></p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 53850526, "answer_count": 2, "score": 0, "last_activity_date": 1545319266, "creation_date": 1545218215, "last_edit_date": 1545234843, "question_id": 53850119, "link": "https://stackoverflow.com/questions/53850119/how-can-i-set-a-working-breakpoint-to-a-constant-expression", "title": "How can I set a working breakpoint to a constant expression?", "body": "<p>I have Perl code that uses a constant with an initializing block like this:</p>\n\n<pre><code>use constant C =&gt; map {\n    ...;\n} (0..255);\n</code></pre>\n\n<p>When I try to <em>set a breakpoint</em> at the <code>...;</code> line, it does not work, meaning: I <em>can set</em> the breakpoint, but the debugger <em>does not stop</em> there.</p>\n\n<p>I tried:</p>\n\n<ol>\n<li>Start the program with the debugger (<code>perl -d program.pl</code>)</li>\n<li>Set the breakpoint in the debugger (<code>b 2</code>)</li>\n<li>Reload using <code>R</code>, then run (<code>r</code>) the program</li>\n</ol>\n\n<p>But still the debugger did not stop at the line, just as if I had no breakpoint set.</p>\n\n<p>My Perl is not the latest; it's 5.18.2, just in case it matters...</p>\n"}, {"tags": ["perl", "pipe"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545221758, "post_id": 53850116, "comment_id": 94549424, "body": "Do you want <code>my_script.pl</code> to continue running even if you <code>kill -9 parent_script.pl</code> ?"}, {"owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545222505, "post_id": 53850116, "comment_id": 94549816, "body": "I want the parent script to close the pipe when all the children scripts are killed... but the problem is that my_script.pl becomes defunct"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545227604, "post_id": 53850116, "comment_id": 94552731, "body": "Hmm - I don&#39;t understand what happens when. Can you please add a list/tree of which process starts which other process, and then tell us which process gets killed and when? I guess you want to move all processes into one process group so they all get killed together, but I don&#39;t understand your problem yet."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1545246053, "post_id": 53850116, "comment_id": 94562975, "body": "If &quot;the pipe hangs&quot;, then some process still has the write side of the pipe open.  Post a process tree of all the processes that <code>my_script.pl</code> may have spawned.  At least one of them is still running."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545263200, "post_id": 53850116, "comment_id": 94569391, "body": "What do you want to be able to do? To kill <code>my_script.pl</code> manually, from command line, while this script is running?  That&#39;s &quot;rude&quot; and you should expect that it may not work cleanly, precisely because <code>my_script.pl</code> may be tied up in something; so add a signal handler to it, in which you can clean up / close resources as needed.  If this isn&#39;t what you are after can you state the goal?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545325544, "post_id": 53850116, "comment_id": 94593399, "body": "What do you mean by &quot;the pipe hangs&quot;? 1) Pipes don&#39;t do anything. 2) There is no pipe if you kill -9 the parent and the child."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1545248233, "last_edit_date": 1545248233, "creation_date": 1545244522, "answer_id": 53857307, "question_id": 53850116, "link": "https://stackoverflow.com/questions/53850116/perl-pipe-hangs-and-process-becomes-defunct/53857307#53857307", "title": "Perl pipe hangs and process becomes defunct", "body": "<p>When a program exits, it becomes a zombie (defunct process) until its parent reaps it (by calling <code>wait</code>).<sup>[1]</sup> If the process disappeared entirely, programs wouldn't be able to get the exit code of child processes. This is entirely normal, and not a problem.</p>\n\n<ol>\n<li>Orphans (including zombie orphans) get adopted by process 1, which immediately reaps its children as they finish.</li>\n</ol>\n"}], "owner": {"reputation": 2481, "user_id": 1444748, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WqxKU.jpg?s=128&g=1", "display_name": "Morad", "link": "https://stackoverflow.com/users/1444748/morad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1545248233, "creation_date": 1545218211, "question_id": 53850116, "link": "https://stackoverflow.com/questions/53850116/perl-pipe-hangs-and-process-becomes-defunct", "title": "Perl pipe hangs and process becomes defunct", "body": "<p>I have a perl script that executes another script using pipe:</p>\n\n<pre><code>$pid = open (OUTPUT, \"my_script.pl 2&gt;&amp;1 |\") || \"\";\nif ($pid) {\n  while (&lt;OUTPUT&gt;) {\n    print;\n  }\n  close (OUTPUT);\n}\n</code></pre>\n\n<p><code>my_script.pl</code> forks another child process. When I first kill <code>my_script.pl</code> and then kill its child process (I kill the processes manually using <code>kill -9</code>), then <code>my_script.pl</code> process becomes a defunct and the pipe hangs.\nAny idea how to solve this issue? </p>\n\n<p>I don't want to kill the child process first.</p>\n"}, {"tags": ["perl", "uri", "lwp", "punycode"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545219804, "post_id": 53850040, "comment_id": 94548378, "body": "Your code does not compile. Please <a href=\"https://stackoverflow.com/posts/53850040/edit\">edit</a> your code and change it to actually compiling code. Most likely you stripped off a <code>qw</code> from the URI::_punicode import: <code>use URI::_punycode qw(encode_punycode decode_punycode);</code>."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545220250, "post_id": 53850040, "comment_id": 94548621, "body": "<code>\\u</code> in Perl does not mean &quot;Unicode escape&quot;. Perl uses <code>\\N{U+43f}</code>. What is the actual input you have? Is it the literal string <code>\\u043f...</code> or is it a byte sequence containing UTF-8-encoded character 043f ?"}, {"owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545223817, "post_id": 53850040, "comment_id": 94550501, "body": "My input is a fqdn (probably with chinese characters). I use LWP to get it from a web page and it returns &quot;\\u&quot; format in the shell."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545242729, "post_id": 53850040, "comment_id": 94561564, "body": "Is the web page returning JSON?"}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "edited": false, "score": 0, "creation_date": 1545223822, "post_id": 53850955, "comment_id": 94550505, "body": "My input is a fqdn (probably with chinese characters). I use LWP to get it from a web page and it returns &quot;\\u&quot; format in the shell."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 2, "last_activity_date": 1545224586, "last_edit_date": 1545224586, "creation_date": 1545221331, "answer_id": 53850955, "question_id": 53850040, "link": "https://stackoverflow.com/questions/53850040/punycode-with-perl/53850955#53850955", "title": "Punycode... with Perl", "body": "<p><code>\\u</code> in Perl does not mean \"Unicode escape\". Perl uses the syntax <code>\\N{U+43f}</code>. Changing your program to conform to the Perl syntax, it works for me:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse utf8;\nuse URI::_punycode qw(decode_punycode encode_punycode);\n\nbinmode STDOUT, ':encoding(UTF-8)';\n\nmy $fqdn = \"\\N{U+043f}\\N{U+0441}\\N{U+0438}\\N{U+0445}\\N{U+043e}\\N{U+0442}\\N{U+0435}\\N{U+0440}\\N{U+0430}\\N{U+043f}\\N{U+0438}\\N{U+044f}.net\";\nprint \"FQDN: [$fqdn]\\n\";\n\nprint \"\\n---\\n\";\nmy $punicode  = encode_punycode($fqdn);\nprint \"\\n---\\n\";\nprint \"[$punicode]\\n\";\n</code></pre>\n\n<p>This outputs the following for me, which I assume is the intended result:</p>\n\n<pre><code>FQDN: [\u043f\u0441\u0438\u0445\u043e\u0442\u0435\u0440\u0430\u043f\u0438\u044f.net]\n\n---\n\n---\n[.net-43d3auc5ciekjq7byl]\n</code></pre>\n\n<p>If you have the fqdn literally as a string like<code>\\uabcd\\u1234...</code>, you can convert it to Unicode using:</p>\n\n<pre><code>$fqdn =~ s/\\\\u([[:xdigit:]]{4})/chr(hex($1))/ge;\n</code></pre>\n\n<p>For further details see the other answer.</p>\n\n<h3>See also</h3>\n\n<p><a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">Quote and Quote-like operators in Perl</a> for the string escapes</p>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "edited": false, "score": 0, "creation_date": 1545223826, "post_id": 53851229, "comment_id": 94550508, "body": "My input is a fqdn (probably with chinese characters). I use LWP to get it from a web page and it returns &quot;\\u&quot; format in the shell."}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "edited": false, "score": 0, "creation_date": 1545224042, "post_id": 53851229, "comment_id": 94550644, "body": "Could you give us the actual HTTP response?"}, {"owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "edited": false, "score": 0, "creation_date": 1545224148, "post_id": 53851229, "comment_id": 94550719, "body": "I&#39;ve three examples of fqdn:  \u0634\u0647\u0631\u062f\u0627\u0646\u0627\u06cc\u06cc.net \u6e56\u5357\u4e5d\u6d32\u56fd\u9645\u65c5\u884c\u793e.net hydr&#225;2w&#232;b.net"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "edited": false, "score": 0, "creation_date": 1545224664, "post_id": 53851229, "comment_id": 94551015, "body": "But they all are Unicode characters, no one have &quot;\\uXXXX&quot; described in RFC5137. <a href=\"https://tools.ietf.org/html/rfc5137\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc5137</a>"}], "tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": 0, "last_activity_date": 1545222302, "creation_date": 1545222302, "answer_id": 53851229, "question_id": 53850040, "link": "https://stackoverflow.com/questions/53850040/punycode-with-perl/53851229#53851229", "title": "Punycode... with Perl", "body": "<p><code>\\uXXXX</code> is not related with Punycode/IDN at all.  It seems like JSON string format that represents Unicode characters and you need to use right tools for them.</p>\n\n<p>First off, you have to escape backslashes inside double quotes, or use single quotes.</p>\n\n<p>If you don't need dealing with surrogate pairs, you can simply convert numbers to unicode characters.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse utf8;\nuse Encode;\n\nmy $fqdn = '\\u043f\\u0441\\u0438\\u0445\\u043e\\u0442\\u0435\\u0440\\u0430\\u043f\\u0438\\u044f.net';\n$fqdn =~ s/\\\\u([[:xdigit:]]{4})/chr(hex($1))/ge;\n\nprint encode_utf8 $fqdn;\nprint \"\\n\";\n</code></pre>\n\n<p>If you have to consider them, you still can convert without non-CORE CPAN modules.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse utf8;\nuse Encode;\n\nmy $fqdn = '\\u043f\\u0441\\u0438\\u0445\\u043e\\u0442\\u0435\\u0440\\u0430\\u043f\\u0438\\u044f.net';\n\nmy $re_hex = qr/[[:xdigit:]]{4}/;\nmy $re_uni = qr/\\\\u$re_hex/;\nmy $re_uni_capture = qr/\\\\u($re_hex)/;\n\n$fqdn = join q{}, map {\n    /^$re_uni/\n        ? decode 'utf-16-be', pack \"n*\", map { hex } m/$re_uni_capture/g\n        : $_\n} split qr/(${re_uni}*)/, $fqdn;\n\nprint encode_utf8 $fqdn;\nprint \"\\n\";\n</code></pre>\n\n<p>PS: Please someone correct my poor English, thanks</p>\n"}], "owner": {"reputation": 285, "user_id": 476918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/qGBOr.jpg?s=128&g=1", "display_name": "Alfons", "link": "https://stackoverflow.com/users/476918/alfons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545224586, "creation_date": 1545217915, "question_id": 53850040, "link": "https://stackoverflow.com/questions/53850040/punycode-with-perl", "title": "Punycode... with Perl", "body": "<p>With bash:</p>\n\n<p>$ echo '\\u043f\\u0441\\u0438\\u0445\\u043e\\u0442\\u0435\\u0440\\u0430\\u043f\\u0438\\u044f.net' | ascii2uni -a U -q</p>\n\n<p>\u043f\u0441\u0438\u0445\u043e\u0442\u0435\u0440\u0430\u043f\u0438\u044f.net</p>\n\n<p>How can make this with perl?</p>\n\n<pre><code>use utf8;\nuse URI::_punycode (decode_punycode,encode_punycode);\n\n$fqdn = \"\\u043f\\u0441\\u0438\\u0445\\u043e\\u0442\\u0435\\u0440\\u0430\\u043f\\u0438\\u044f.net\";\n\n$fqdn = `echo $fqdn | ascii2uni -a U -q`;\n$unicode  = encode_punycode($fqdn);\nprint \"$unicode\\n\";\n</code></pre>\n\n<p>returns:</p>\n\n<p>$ perl test.pl</p>\n\n<p>043f044104380445043e0442043504400430043f0438044f.net</p>\n"}, {"tags": ["javascript", "regex", "perl", "pcre", "regex-group"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1545208544, "post_id": 53847144, "comment_id": 94542155, "body": "What have you tried? What problems are you having? Please show us your code. (Hint: I&#39;m not sure that a regex is the best tool here.)"}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1545208965, "post_id": 53847144, "comment_id": 94542343, "body": "@DaveCross I tried regex pattern like: ([^,\\s][^\\,]*[^,\\s]*) but I have no idea to exclude &quot;Menu:&quot;"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1545209470, "post_id": 53847144, "comment_id": 94542614, "body": "@NguyenDuyTanTo: Use <code>[a-zA-Z-]+</code> regex which will match the words you want to. What do you exactly want to do? If you don&#39;t want commas in your string, you can just remove all commas from your string."}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "reply_to_user": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "edited": false, "score": 0, "creation_date": 1545211923, "post_id": 53847144, "comment_id": 94543949, "body": "@IslamElshobokshy Hello, could you please edit your answer in regex101.com link. Like my wish comment below, thank you very much :(("}, {"owner": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "edited": false, "score": 0, "creation_date": 1545212038, "post_id": 53847144, "comment_id": 94544010, "body": "@NguyenDuyTanTo like <a href=\"https://regex101.com/r/N0AfW7/2\" rel=\"nofollow noreferrer\">this</a> ?"}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "reply_to_user": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "edited": false, "score": 0, "creation_date": 1545212247, "post_id": 53847144, "comment_id": 94544164, "body": "@IslamElshobokshy No, like <a href=\"https://regex101.com/r/N0AfW7/1\" rel=\"nofollow noreferrer\">regex101.com/r/N0AfW7/1</a> but instead of it bold the <b>apple</b> <b>orange-juice</b> <b>bananas</b>"}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "reply_to_user": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "edited": false, "score": 0, "creation_date": 1545212329, "post_id": 53847144, "comment_id": 94544210, "body": "@IslamElshobokshy because the input is a variable have the same format, not a static string"}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "reply_to_user": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "edited": false, "score": 0, "creation_date": 1545212545, "post_id": 53847144, "comment_id": 94544343, "body": "@IslamElshobokshy Your answer, it bold &quot;Menu:&quot; and &quot;,&quot; and &quot;,&quot; but the my desire answer inverse with you, it must &quot;apple&quot; and &quot;orange-juice&quot; and &quot;bananas&quot;"}, {"owner": {"reputation": 26365, "user_id": 1973271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef8a47614e304d850123f76deaab2a62?s=128&d=identicon&r=PG", "display_name": "flup", "link": "https://stackoverflow.com/users/1973271/flup"}, "edited": false, "score": 0, "creation_date": 1546449140, "post_id": 53847144, "comment_id": 94857594, "body": "Like this: <a href=\"https://regex101.com/r/TOTWq0/1\" rel=\"nofollow noreferrer\">regex101.com/r/TOTWq0/1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "edited": false, "score": 0, "creation_date": 1545210032, "post_id": 53847623, "comment_id": 94542903, "body": "Thank you very much but... I write code in bash, and grep it. So I just need the regex pattern. Could you please write your pattern in regex101.com and show it for me. Thank you very much!"}, {"owner": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "reply_to_user": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "edited": false, "score": 0, "creation_date": 1545210148, "post_id": 53847623, "comment_id": 94542983, "body": "@NguyenDuyTanTo updated my answer. Note that you can&#39;t replace in regex, you need JS for that. Regex is only used to find out patterns in strings."}, {"owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "edited": false, "score": 0, "creation_date": 1545210479, "post_id": 53847623, "comment_id": 94543152, "body": "Yes, I know, the story that I write in bash, &quot;grep&quot; will help me output, but I stucked with the regex pattern to find out words in string. Thank you very much for your help but... I&#39;m a newbie in this field can you reverse your answer in regex, exactly that it bold the <b>apple</b> <b>orange-juice</b> <b>bananas</b>"}], "tags": [], "owner": {"reputation": 8758, "user_id": 9942418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-751XvqWRLcs/AAAAAAAAAAI/AAAAAAAAAAA/gxL9_WS89Pg/photo.jpg?sz=128", "display_name": "Islam Elshobokshy", "link": "https://stackoverflow.com/users/9942418/islam-elshobokshy"}, "is_accepted": true, "score": 0, "last_activity_date": 1545210134, "last_edit_date": 1545210134, "creation_date": 1545209636, "answer_id": 53847623, "question_id": 53847144, "link": "https://stackoverflow.com/questions/53847144/regex-match-after-semicolon-and-separated-comma/53847623#53847623", "title": "Regex match after semicolon and separated comma", "body": "<p>You can do the following in javascript :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var string = \"Menu: apple, orange-juice, bananas\";\r\nconsole.log(string.replace(/Menu: |\\,/g, \"\"))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Regex101 : <a href=\"https://regex101.com/r/N0AfW7/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/N0AfW7/1</a></p>\n"}], "owner": {"reputation": 54, "user_id": 8328561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E30fh4b5cMg/AAAAAAAAAAI/AAAAAAAAL-g/qLfR-9yoIcA/photo.jpg?sz=128", "display_name": "Nguyen Duy Tan To", "link": "https://stackoverflow.com/users/8328561/nguyen-duy-tan-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1545209631, "accepted_answer_id": 53847623, "answer_count": 1, "score": -2, "last_activity_date": 1545210134, "creation_date": 1545207734, "question_id": 53847144, "link": "https://stackoverflow.com/questions/53847144/regex-match-after-semicolon-and-separated-comma", "closed_reason": "Needs more focus", "title": "Regex match after semicolon and separated comma", "body": "<p>I have a string like</p>\n\n<pre><code>Menu: apple, orange-juice, bananas\n</code></pre>\n\n<p>I want to use REGEX to match only <strong>apple</strong> <strong>orange-juice</strong> <strong>bananas</strong>\nI have tried to search Google and regex101.com for help but still no any idea.</p>\n\n<p>I would appreciate any help! Thank you</p>\n"}, {"tags": ["perl", "format", "nagios"], "comments": [{"owner": {"reputation": 1107, "user_id": 5102940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ac659f5ab992d426d7a1b2b1384a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Rohlik", "link": "https://stackoverflow.com/users/5102940/rohlik"}, "edited": false, "score": 0, "creation_date": 1545207469, "post_id": 53844508, "comment_id": 94541657, "body": "<code>&#47;var&#47;log&#47;nagios&#47;status.dat: Pascal source, ASCII text, with very long lines</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1545208479, "post_id": 53844508, "comment_id": 94542131, "body": "It&#39;s Nagios config file format. I&#39;m not sure what other information you need."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 2, "creation_date": 1545215362, "post_id": 53844508, "comment_id": 94546021, "body": "We can tell you that it&#39;s an application-specific file format, but I don&#39;t think that&#39;s likely to be much help to you. What is the actual problem you&#39;re trying to solve? Are you writing a nagios plugin and want to output its status correctly? Are you trying to parse the output of nagios plugins? Are you doing something else entirely? (And I would recommend editing the question to contain that actual problem.)"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1545230991, "post_id": 53844508, "comment_id": 94554765, "body": "Also see <a href=\"https://metacpan.org/pod/Nagios::Config\" rel=\"nofollow noreferrer\">metacpan.org/pod/Nagios::Config</a> for a parser for Nagios config files."}, {"owner": {"reputation": 655, "user_id": 1720947, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/j7uLJ.png?s=128&g=1", "display_name": "Tim Holum", "link": "https://stackoverflow.com/users/1720947/tim-holum"}, "edited": false, "score": 0, "creation_date": 1545236107, "post_id": 53844508, "comment_id": 94558108, "body": "I was hoping it was a standard, that would have a node or php library for it, I ended up writting a php parser to extract the info I wanted."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1545304748, "post_id": 53844508, "comment_id": 94582367, "body": "If you wanted a Node or PHP parser, then why did you tag this question with &quot;perl&quot; and not either of those?"}, {"owner": {"reputation": 655, "user_id": 1720947, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/j7uLJ.png?s=128&g=1", "display_name": "Tim Holum", "link": "https://stackoverflow.com/users/1720947/tim-holum"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1545328206, "post_id": 53844508, "comment_id": 94594607, "body": "@DaveCross I tagged it with perl because the program that produced the file was perl, and I though it was some form of a standard perl file format, and I was just looking for the standard&#39;s name."}], "answers": [{"tags": [], "owner": {"reputation": 655, "user_id": 1720947, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/j7uLJ.png?s=128&g=1", "display_name": "Tim Holum", "link": "https://stackoverflow.com/users/1720947/tim-holum"}, "is_accepted": true, "score": 0, "last_activity_date": 1545328283, "creation_date": 1545328283, "answer_id": 53873763, "question_id": 53844508, "link": "https://stackoverflow.com/questions/53844508/what-file-format-is-this-used-for-a-perl-script-status/53873763#53873763", "title": "What file format is this? ( Used for a perl script status )", "body": "<p>Found that it is not a standard, but a nagios custom format</p>\n"}], "owner": {"reputation": 655, "user_id": 1720947, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/j7uLJ.png?s=128&g=1", "display_name": "Tim Holum", "link": "https://stackoverflow.com/users/1720947/tim-holum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 53873763, "answer_count": 1, "score": -1, "last_activity_date": 1545328283, "creation_date": 1545193041, "question_id": 53844508, "link": "https://stackoverflow.com/questions/53844508/what-file-format-is-this-used-for-a-perl-script-status", "title": "What file format is this? ( Used for a perl script status )", "body": "<p>I am trying to find out what format status file in nagios is, it has a .dat extention but is not the standard .dat ( at least not the windows .dat )</p>\n\n<p>Here is an example of the format</p>\n\n<pre><code>contactstatus {\n        contact_name=noc\n        modified_attributes=0\n        modified_host_attributes=0\n        modified_service_attributes=0\n        host_notification_period=24x7\n        service_notification_period=24x7\n        last_host_notification=0\n        last_service_notification=1545078717\n        host_notifications_enabled=1\n        service_notifications_enabled=1\n        }\n\ncontactstatus {\n        contact_name=slack\n        modified_attributes=0\n        modified_host_attributes=0\n        modified_service_attributes=0\n        host_notification_period=24x7\n        service_notification_period=24x7\n        last_host_notification=0\n        last_service_notification=1545078717\n        host_notifications_enabled=1\n        service_notifications_enabled=1\n        }\n</code></pre>\n"}, {"tags": ["linux", "perl", "ssh"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1545208351, "post_id": 53843757, "comment_id": 94542074, "body": "You seem to have forgotten to mention what the problem is. What unexpected behaviour are you seeing? Is it as simple having <code>usr&#47;bin&#47;ssh</code> where I suspect you want <code>&#47;usr&#47;bin&#47;ssh</code>?"}, {"owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1545209143, "post_id": 53843757, "comment_id": 94542426, "body": "Hi. @DaveCross The problem of my code is not working for checking whether the directory exists or not in the remote server."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "edited": false, "score": 0, "creation_date": 1545209073, "post_id": 53845061, "comment_id": 94542393, "body": "Hi. Thanks for your answer. The answer is working. May I ask how can I create directory for the path if it is not a directory? I have tried <code>system(&quot;$ssh $user\\@$host [ mkdir -p $destination_path ]&quot;)</code> but it don&#39;t seem to be working."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1545197155, "creation_date": 1545197155, "answer_id": 53845061, "question_id": 53843757, "link": "https://stackoverflow.com/questions/53843757/check-whether-directory-exists-in-remote-server-for-perl/53845061#53845061", "title": "Check Whether Directory Exists In Remote Server For Perl", "body": "<p><code>[</code> is the name of a command, and it must be separated from other words on the command line. So just use more spaces:</p>\n\n<pre><code>$ssh $user\\@$host [ -d $destination_path ]\n</code></pre>\n\n<p>To actually execute this command, you'll want to use the builtin <a href=\"http://metacpan.org/pod/perlfunc#system\" rel=\"nofollow noreferrer\"><code>system</code></a> function. <code>system</code> returns 0 when the command it executes is successful (see the docs at the link)</p>\n\n<pre><code>if (0 == system(\"$ssh $user\\@$host [ -d $destination_path ]\")) {\n    print \"Is a directory.\\n\";\n} else {\n    print \"Is not a directory.\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1545225190, "creation_date": 1545225190, "answer_id": 53852005, "question_id": 53843757, "link": "https://stackoverflow.com/questions/53843757/check-whether-directory-exists-in-remote-server-for-perl/53852005#53852005", "title": "Check Whether Directory Exists In Remote Server For Perl", "body": "<p>Accessing the remote file system through SFTP:</p>\n\n<pre><code>use Net::SFTP::Foreign;\n\n$sftp = Net::SFTP::Foreign-&gt;new(\"rsync.$site.com\");\nif ($sftp-&gt;test_d($destination_path)) {\n    \"print $destination_path is a directory!\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 53845061, "answer_count": 2, "score": -1, "last_activity_date": 1545225190, "creation_date": 1545186639, "question_id": 53843757, "link": "https://stackoverflow.com/questions/53843757/check-whether-directory-exists-in-remote-server-for-perl", "title": "Check Whether Directory Exists In Remote Server For Perl", "body": "<p>I wish to check whether a path given is exists or is a directory in another site server in Perl. My code is as below.</p>\n\n<pre><code>my $destination_path = \"&lt;path&gt;\";\nmy $ssh = \"usr/bin/ssh\";\nmy $user_id = getpwuid( $&lt; );\nmy $site = \"&lt;site_name&gt;\";\nmy $host = \"rsync.$site.com\";\n\nif ($ssh $user_id\\@$host [-d $destination_path]){\n  print \"Is a directory.\\n\";\n}\nelse{\n  print \"Is not a directory.\\n\";\n}\n</code></pre>\n\n<p>I am sure my code is wrong as I modify the code according to bash example I see from another question but I have no clue how to fix it. Thanks for everyone that helps here.</p>\n"}, {"tags": ["xml", "perl", "svg"], "comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1545231770, "post_id": 53840457, "comment_id": 94555229, "body": "the SVG shown here is a bit weird: the first &lt;g&gt; element has a namespace, the others don&#39;t. The scope of a namespace declaration is the element and its descendants: <a href=\"https://www.w3.org/TR/xml-names/#scoping-defaulting\" rel=\"nofollow noreferrer\">w3.org/TR/xml-names/#scoping-defaulting</a>"}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "edited": false, "score": 0, "creation_date": 1545177484, "post_id": 53842617, "comment_id": 94533687, "body": "Thanks, I got it to work using your code, though I did have to use XML::LibXML::XPathContext (as described in the linked article at the top of my post): i.e. NODES: for my $node ($xpc-&gt;findnodes(&#39;//x:g&#39;)) { ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "edited": false, "score": 0, "creation_date": 1545180972, "post_id": 53842617, "comment_id": 94534449, "body": "@MrSparkly But your document doesn&#39;t mess with namespaces, like the linked question does (which is precisely the problem there). Did you try this as it stands, and/or am I missing something?"}, {"owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545181435, "post_id": 53842617, "comment_id": 94534538, "body": "@zdim Yes, I tried it as it stands. Literally, switching between the original $doc-&gt;findnodes.. line  and the $xpc-&gt;findnodes... line produces either nothing, or the results I want."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "edited": false, "score": 0, "creation_date": 1545201409, "post_id": 53842617, "comment_id": 94539122, "body": "@MrSparkly Hm, it works for me -- when I add prints (instead of the comment <code># do stuff</code>) I get all those things you want.  Even just printing <code>$attr</code> instead of the first <code># do stuff</code> and <code>$pathnode</code> instead of the second shows everything."}, {"owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545228575, "post_id": 53842617, "comment_id": 94553313, "body": "@zdim I just tried it again: the original code doesn&#39;t work for me. I&#39;m on Win, maybe it somehow makes a difference. I tried single slashes (&#39;/g&#39;), double slashes (&#39;//g&#39;): nothing."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "edited": false, "score": 0, "creation_date": 1545261995, "post_id": 53842617, "comment_id": 94569073, "body": "@MrSparkly OK. I just looked better, following a new comment, that your document <i>does</i> have a namespace (on <i>one</i> element!); perhaps that somehow makes it either work or not this way?  At any rate, you did get it working so that&#39;s good :)"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": true, "score": 2, "last_activity_date": 1545241462, "last_edit_date": 1545241462, "creation_date": 1545176037, "answer_id": 53842617, "question_id": 53840457, "link": "https://stackoverflow.com/questions/53840457/perl-parse-svg-file/53842617#53842617", "title": "Perl: parse SVG file", "body": "<p>First of all,  you don't need to use <code>XML::LibXML::XPathContext</code> because your XML is not using namespaces. </p>\n\n<p><s>However, you will have to loop through all the node attributes and check them.</s> One way is to loop through the node attributes, and once you have found the nodes you want, do stuff with them (like extract attribute values, get child nodes, etc.) with the methods from <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Node.pod\" rel=\"nofollow noreferrer\"><code>XML::LibXML::Node</code></a></p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;load_xml( location =&gt; $ARGV[0] );\n\nNODES: for my $node ($doc-&gt;findnodes('//g')) {\n    for my $attr ($node-&gt;attributes) {\n        if ($attr-&gt;nodeName eq 'id' &amp;&amp; $attr-&gt;value =~ /^Drawing/) {\n            # it's a drawing node\n            # do stuff\n            next NODES;\n        }\n    }\n    # it's not a drawing node\n    for my $pathnode ($node-&gt;findnodes('path')) {\n        # do stuff\n    }\n}\n</code></pre>\n\n<p>You can also use pure XPath to find the nodes.</p>\n\n<pre><code>my @drawings = $doc-&gt;findnodes('//g[starts-with(@id,\"Drawing\")]');\nmy @paths = $doc-&gt;findnodes('//path[not(ancestor::g[starts-with(@id,\"Drawing\")])]');\n</code></pre>\n\n<p>Credit to these posts for XPath reference:</p>\n\n<p><a href=\"https://stackoverflow.com/a/17192270/4709524\">XPath Select Nodes where all parent nodes do not contain specific attribute and value</a> \n<br>\n<a href=\"https://stackoverflow.com/a/21405499/4709524\">XPath: using regex in contains function</a></p>\n"}], "owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 53842617, "answer_count": 1, "score": 0, "last_activity_date": 1545241462, "creation_date": 1545164384, "last_edit_date": 1545164729, "question_id": 53840457, "link": "https://stackoverflow.com/questions/53840457/perl-parse-svg-file", "title": "Perl: parse SVG file", "body": "<p>I want to parse an SVG file in Perl, but I see advice NOT to use certain libraries (XML::Simple, XML::XPath) for different reasons. The thread below suggests XML::LibXML::XPathContext;</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21677123/perl-xml-svg-parser-unable-to-findnodes\">Perl XML/SVG Parser unable to findnodes</a></p>\n\n<p>Assuming I use XML::LibXML::XPathContext, I'm still not sure how to extract the nodes I'm interested in:\n1) Those with an \"id\" that contains \"Drawing...\", their size (path fill... d=\".. etc) and text (\"tspan\")\n2) The \"path\" nodes (at the bottom of the SVG) which are NOT part of any \"Drawing_\" node and their location (d=\"...)</p>\n\n<pre><code>use XML::LibXML;\nuse XML::LibXML::XPathContext;\n\nmy $doc = XML::LibXML-&gt;load_xml( location =&gt; $file);\nmy $xpc = XML::LibXML::XPathContext-&gt;new( $doc);\n$xpc-&gt;registerNs(x =&gt; 'http://www.w3.org/2000/svg');\n\nforeach my $drawing ($xpc-&gt;findnodes( ??? ) {\n    print \"Found drawing\\n\";\n}\n\nforeach my $path ($xpc-&gt;findnodes( ??? ) {\n    print \"Found path\\n\";\n}\n</code></pre>\n\n<p>My SVG:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;svg version=\"1.2\"&gt;\n &lt;g visibility=\"visible\" id=\"Master\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\"&gt;\n  &lt;rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"86360\" height=\"55880\"/&gt;\n &lt;/g&gt;\n &lt;g visibility=\"visible\" id=\"Page1\"&gt;\n  &lt;g id=\"Drawing_1\"&gt;\n   &lt;path fill=\"rgb(255,211,32)\" stroke=\"none\" d=\"M 15350,3285 L 31988,3285 31988,4937 15350,4937 15350,3285 15350,3285 Z\"/&gt;\n   &lt;path fill=\"none\" stroke=\"rgb(128,128,128)\" stroke-width=\"102\" stroke-linejoin=\"round\" d=\"M 15350,3285 L 31988,3285 31988,4937 15350,4937 15350,3285 15350,3285 Z\"/&gt;\n   &lt;g fill=\"rgb(0,0,0)\" stroke=\"none\" font-family=\"Arial Narrow embedded\" font-size=\"635\" font-style=\"normal\" font-weight=\"700\"&gt;\n    &lt;text x=\"19327\" y=\"3967\"&gt;\n     &lt;tspan x=\"19327 19471 19788 19962\"&gt;Info&lt;/tspan&gt;&lt;/text&gt;\n    &lt;text fill=\"rgb(0,0,0)\" stroke=\"none\" x=\"17558\" y=\"4699\"&gt;\n     &lt;tspan x=\"17558\"&gt;I&lt;/tspan&gt;&lt;/text&gt;\n   &lt;/g&gt;\n  &lt;/g&gt;\n  &lt;g id=\"Drawing_2\"&gt;\n   &lt;path fill=\"rgb(207,231,245)\" stroke=\"none\" d=\"M 8747,10525 L 4810,10525 4810,8239 12684,8239 12684,10525 8747,10525 Z\"/&gt;\n   &lt;path fill=\"none\" stroke=\"rgb(128,128,128)\" stroke-width=\"102\" stroke-linejoin=\"round\" d=\"M 8747,10525 L 4810,10525 4810,8239 12684,8239 12684,10525 8747,10525 Z\"/&gt;\n   &lt;g fill=\"rgb(0,0,0)\" stroke=\"none\" font-family=\"Arial Narrow embedded\" font-size=\"635\" font-style=\"normal\" font-weight=\"700\"&gt;\n    &lt;text x=\"5547\" y=\"8872\"&gt;\n     &lt;tspan x=\"5547 6030\"&gt;OK&lt;/tspan&gt;&lt;/text&gt;\n    &lt;text fill=\"rgb(0,0,0)\" stroke=\"none\" x=\"5215\" y=\"9604\"&gt;\n     &lt;tspan x=\"5215 5359 5676 5850\"&gt;Info&lt;/tspan&gt;&lt;/text&gt;\n   &lt;/g&gt;\n  &lt;/g&gt;\n  ...\n  &lt;g&gt;\n   &lt;path fill=\"none\" stroke=\"rgb(51,153,255)\" id=\"Drawing_78_0\" stroke-width=\"102\" stroke-linejoin=\"round\" d=\"M 47291,16367 C 47291,17129 48093,16793 48482,17017\"/&gt;\n   &lt;path fill=\"rgb(51,153,255)\" stroke=\"none\" id=\"Drawing_78_1\" d=\"M 48688,17383 L 48598,16917 48337,17064 48688,17383 Z\"/&gt;\n  &lt;/g&gt;\n  &lt;g&gt;\n   &lt;path fill=\"none\" stroke=\"rgb(51,153,255)\" id=\"Drawing_79_0\" stroke-width=\"102\" stroke-linejoin=\"round\" d=\"M 39417,4937 C 39417,14271 23887,8230 23425,16977\"/&gt;\n   &lt;path fill=\"rgb(51,153,255)\" stroke=\"none\" id=\"Drawing_79_1\" d=\"M 23415,17383 L 23577,16937 23277,16929 23415,17383 Z\"/&gt;\n  &lt;/g&gt;\n  ...\n &lt;/g&gt;\n&lt;/svg&gt;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545153507, "post_id": 53837958, "comment_id": 94524276, "body": "Apparently, due to the nature of the separator, I get the following errors.  &#39;\\09&#39; resolved to &#39;\\o{0}9&#39; in regex; marked by &lt;-- HERE in m/^(.+)(\\09 &lt;-- HERE 8\\455\\098.+)$/ at test_split.pl line 5. &#39;\\09&#39; resolved to &#39;\\o{0}9&#39; in regex; marked by &lt;-- HERE in m/^(.+)(\\098\\455\\09 &lt;-- HERE 8.+)$/ at test_split.pl line 5."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545154135, "post_id": 53837958, "comment_id": 94524576, "body": "I really do mean &#39;octal characters&#39; the strings will have a slash with three digits."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545154889, "post_id": 53837958, "comment_id": 94524964, "body": "@gatorreina <code>\\455</code> is not a valid octal character. The maximum is <code>\\o{277}</code>. I guess you might want to encode Unicode characters. that would be <code>\\u{...}</code>"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1545153486, "last_edit_date": 1545153486, "creation_date": 1545152938, "answer_id": 53837958, "question_id": 53837817, "link": "https://stackoverflow.com/questions/53837817/perl-split-but-keep-special-separator-with-second-string/53837958#53837958", "title": "perl split but keep special separator with second string", "body": "<p>Don't use <code>split()</code> use pattern matching.</p>\n\n<p><strong>EDIT</strong> I guess you really meant <code>\\</code> not octal characters:</p>\n\n<pre><code>my $string = \"State of mind is primary\\\\098\\\\455\\\\098\\everything else is secondary. -Eckhart Tolle\";\nmy($a, $b) = ($string =~ /^(.+)(\\\\098\\\\455\\\\098.+)$/);\nprint \"A: '$a'\\n\";\nprint \"B: '$b'\\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>A: 'State of mind is primary'\nB: '\\098\\455\\098ertyhing else is secondary. -Eckhart Tolle'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545155027, "post_id": 53838164, "comment_id": 94525040, "body": "And my goodness, a reputation of 261k? Really? Hats off to you sir. That&#39;s incredible -- mind boggling really."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1545155839, "last_edit_date": 1545155839, "creation_date": 1545153859, "answer_id": 53838164, "question_id": 53837817, "link": "https://stackoverflow.com/questions/53837817/perl-split-but-keep-special-separator-with-second-string/53838164#53838164", "title": "perl split but keep special separator with second string", "body": "<p>Split on the 0-length string that precedes the sequence.</p>\n\n<pre><code>my ($x, $y) = split(/(?=\\\\098\\\\455\\\\098)/, $string);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1545153908, "creation_date": 1545153908, "answer_id": 53838177, "question_id": 53837817, "link": "https://stackoverflow.com/questions/53837817/perl-split-but-keep-special-separator-with-second-string/53838177#53838177", "title": "perl split but keep special separator with second string", "body": "<p>Use a positive lookahead.</p>\n\n<p>(I've simplified your separator to remove one potential source of confusion)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $string = 'State of mind is primaryXXXevertyhing else is secondary. -Eckhart Tolle';\nmy $separator = 'XXX';\n\nmy ($first, $second) = split /(?=$separator)/, $string;\n\nsay \"$first / $second\";\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>$ perl split\nState of mind is primary / XXXevertyhing else is secondary. -Eckhart Tolle\n</code></pre>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 53838164, "answer_count": 3, "score": 0, "last_activity_date": 1545155839, "creation_date": 1545152394, "last_edit_date": 1545153816, "question_id": 53837817, "link": "https://stackoverflow.com/questions/53837817/perl-split-but-keep-special-separator-with-second-string", "title": "perl split but keep special separator with second string", "body": "<p>I have the following string below that I need to split up but I need to keep the separator with the second portion of the string. So that I end up with:</p>\n\n<pre><code>$a = 'State of mind is primary';\n$b = '\\098\\455\\098evertyhing else is secondary.-Eckhart Tolle '\n</code></pre>\n\n<p>My attempt:</p>\n\n<pre><code>my $string = 'State of mind is primary\\098\\455\\098evertyhing else is secondary. -Eckhart Tolle';\n\nmy $separator = '\\098\\455\\098';\nmy ($a, $b) = split($separator, $string);\nprint \"$a\\n\";\nprint \"$b\\n\";\n</code></pre>\n\n<p>How can I accomplish this with perl split?</p>\n"}, {"tags": ["perl", "io-async"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545148890, "post_id": 53836806, "comment_id": 94521649, "body": "With the amount of information you&#39;ve given, it&#39;s hard to give you a good answer. Please <a href=\"https://stackoverflow.com/posts/53836806/edit\">edit</a> your post and add some relevant example code to flesh out <code>doSomething</code>. Most likely you will want <code>doSomething</code> to start an asynchronous request and have it return a handle. You then collect those handles and wait until they indicate that they are finished."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545149168, "post_id": 53836806, "comment_id": 94521818, "body": "I <i>do</i> want doSomething() to start an asynchronous request, that&#39;s correct.  I can&#39;t figure out the syntax."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1545154097, "post_id": 53836806, "comment_id": 94524553, "body": "Sounds like you should look into e.g. <code>IO::Async::Function</code> with your <code>doSomething</code> as code block. Then the loop can use <code>$function-&gt;call()</code> to pass in parameters and store the result of that call in an array. Then you need a second loop that would harvest the async function calls, i.e. that is the code that will &quot;block&quot; waiting for the results."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1545154613, "post_id": 53836806, "comment_id": 94524800, "body": "<code>IO::Async::Routine</code> might be applicable too. The example from the man page looks like it can be directly adapted to solve your problem. You only have to define the stop condition for the loop, maybe a counter that reaches 0 when all functions have returned?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545154651, "post_id": 53836806, "comment_id": 94524823, "body": "The examples you see in docs don&#39;t show you what you want because this is an <i>event</i> handling system, first and foremost. Yes, you can use it for any asynchronous processing, but that&#39;s not the main purpose of the framework.  Why not <code>Parallel::ForkManager</code>, what seems to suit precisely what you want?  It&#39;ll be a few lines of code and conceptually <i>much</i> simpler."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1545155590, "post_id": 53836806, "comment_id": 94525327, "body": "For the <code>IO::Async::Function</code> solution: <code>foreach (...) { push(@futures, $function-&gt;call($element)); } Future-&gt;wait_all(@futures);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1545164386, "post_id": 53839045, "comment_id": 94529247, "body": "Instead of <code>$_-&gt;get for @futures</code> you can use <a href=\"https://metacpan.org/pod/Future\" rel=\"nofollow noreferrer\">Future</a> composition to resolve them as they complete: <code>Future-&gt;wait_all(@futures)-&gt;await;</code> (<code>await</code> is just <code>get</code> that doesn&#39;t return the success or throw an exception on failure, and <code>wait_all</code> can&#39;t fail.) There are of course lots of other options if you want to have Future handle failures (in this case, exceptions thrown in the function) gracefully, etc."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1545164443, "post_id": 53839045, "comment_id": 94529274, "body": "Personally I prefer IO::Async::Function as a solution for this because of the flexibility that the event loop and Futures provide for integration with the rest of your program."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1545164696, "post_id": 53839045, "comment_id": 94529383, "body": "@Grinnz : thanks for the comment, updated the answer accordingly. And yes, I enjoy IO::Async and Future lot too, I find it brilliant"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545165005, "post_id": 53839045, "comment_id": 94529524, "body": "I agree that using futures is better (but then perhaps a bit of a comment would help the uninitiated?). And why not <a href=\"https://metacpan.org/pod/IO::Async::Future\" rel=\"nofollow noreferrer\">IO::Async::Future</a> then?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545167079, "post_id": 53839045, "comment_id": 94530383, "body": "@zdim : sure, thanks... Updated my answer (see <i>NB1</i>)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545242312, "post_id": 53839045, "comment_id": 94561393, "body": "@zdim IO::Async::Future is already the Future subclass that IO::Async::Function will end up returning, so Future-&gt;wait_all will create a Future of the same class (since that&#39;s what gets passed to it). It&#39;s also the subclass returned by $loop-&gt;new_future where $loop is an IO::Async::Loop. You always need a subclass specific to the event loop you&#39;re using in order for <code>get</code> and <code>await</code> to work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545271397, "post_id": 53839045, "comment_id": 94571084, "body": "@Grinnz I don&#39;t understand -- are you saying that <code>use IO::Async::Future</code> instead of <code>use Future</code>, with suitable other (small) code changes, won&#39;t work here?  All I meant was to suggest to make that explicit."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545288120, "post_id": 53839045, "comment_id": 94574737, "body": "@zdim The Future class you use for wait_all won&#39;t matter, as out of necessity it will use the subclass of the Futures you pass to it, which are created by IO::Async::Function. So it&#39;s normal to just use Future for that. You would use a specific subclass when you need to initially create a future yourself, but to create an IO::Async::Future you almost always want to just use $loop-&gt;new_future so there&#39;s never a reason to use it directly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545330227, "post_id": 53839045, "comment_id": 94595451, "body": "@Grinnz OK. So is there a problem with doing precisely <i>that</i> (futures&#39; loop), which is all we need here from the framework, to merely run in parallel?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545331374, "post_id": 53839045, "comment_id": 94595966, "body": "@zdim I don&#39;t understand the question. But see the documentation for IO::Async::Future, which suggests to only instantiate such objects via the IO::Async loop or related classes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545332120, "post_id": 53839045, "comment_id": 94596291, "body": "@Grinnz But that is exactly what I&#39;m saying, to use <code>$loop</code> (needed anyway) directly to build futures, using the subclass. Can&#39;t run any of this now, will try later; perhaps I&#39;m missing something here."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545341124, "post_id": 53839045, "comment_id": 94599772, "body": "@zdim That&#39;s what IO::Async::Function does internally. In this example there are no Futures created by the user except for the convergent future, which is created based on the class of the Futures passed in."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545341510, "post_id": 53839045, "comment_id": 94599930, "body": "@Grinnz Ah, thank you.  I should look into all that code at some point, and play with this way more."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 4, "last_activity_date": 1545167040, "last_edit_date": 1545167040, "creation_date": 1545157602, "answer_id": 53839045, "question_id": 53836806, "link": "https://stackoverflow.com/questions/53836806/how-can-i-use-ioasync-with-an-array-as-input/53839045#53839045", "title": "How can I use IO::Async with an array as input?", "body": "<p>As commented by @StefanBecker, the simplest way to handle this with <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a> is by using an <a href=\"https://metacpan.org/pod/IO::Async::Function\" rel=\"nofollow noreferrer\">IO::Async::Function</a>.</p>\n\n<p>From the docs :</p>\n\n<blockquote>\n  <p>This subclass of <a href=\"https://https://metacpan.org/pod/IO::Async::Notifier\" rel=\"nofollow noreferrer\">IO::Async::Notifier</a> wraps a function body in a collection of worker processes, to allow it to execute independently of the main process.</p>\n</blockquote>\n\n<p>In the <code>IO::Async</code> framework, the typical use case for <code>IO::Async::Function</code> is when a blocking process needs to be executed asynchronously.</p>\n\n<p>Disclaimer : please note that, as commented also by @zdim, <code>IO::Async</code> might not be the best fit for your use case. A pure process parallelizer such as <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> would probably be your best option here, as it basically implements the same functionality (forking and executing in parallel), yet in a much more straight-forward fashion. One of the main differentiating factor of <code>IO::Async</code> comes with its I/O multiplexing capabilities, that you are seemingly not using here.</p>\n\n<p>But since you namely asked for <code>IO::Async</code>, here is an example of such implementation : I turned <code>doSomething</code> into a dummy method that just waits the amount of time given as argument. This allows you to observe the effect of asynchronous execution.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse IO::Async::Function;\nuse IO::Async::Loop;\nuse Future;\n\n# dummy sub\nsub doSomething { \n    my ( $delay ) = @_;\n    print \"start waiting $delay second(s)\\n\";\n    sleep $delay;\n    print \"done sleeping $delay second(s)\\n\"; \n    return $delay;\n}\n\n# prepare the function for execution\nmy $loop = IO::Async::Loop-&gt;new;\nmy $function = IO::Async::Function-&gt;new( code =&gt; sub { return doSomething($_[0]) } );\n$loop-&gt;add($function);\n\n# trigger asynchronous processing\nmy @array = qw/5 2 4 0/;\nmy @futures = map { $function-&gt;call( args =&gt; [ $_ ] ) } @array;\n\n# safely wait for all ops to complete\nFuture-&gt;wait_all(@futures)-&gt;await;\nprint \"all done !\\n\";\n</code></pre>\n\n<p>This yields :</p>\n\n<pre><code>start waiting 5 second(s)\nstart waiting 2 second(s)\nstart waiting 4 second(s)\nstart waiting 0 second(s)\ndone sleeping 0 second(s)\ndone sleeping 2 second(s)\ndone sleeping 4 second(s)\ndone sleeping 5 second(s)\nall done !\n</code></pre>\n\n<p>NB1 : <code>Future-&gt;wait_all(@futures)-&gt;await</code> could also be written <code>$_-&gt;get for @futures</code>, however the first expression, that uses convergent Futures, has the advantages that it will never fail, even if an underlying call actually dies.</p>\n\n<p>NB2 : many options are available in <code>IO::Async::Function</code> and <code>Future</code> to handle errors, manage the number of workers and their behavior, and so on. Check out the docs for more details...</p>\n"}], "owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 53839045, "answer_count": 1, "score": 2, "last_activity_date": 1545167040, "creation_date": 1545148760, "last_edit_date": 1545158263, "question_id": 53836806, "link": "https://stackoverflow.com/questions/53836806/how-can-i-use-ioasync-with-an-array-as-input", "title": "How can I use IO::Async with an array as input?", "body": "<p>I have this loop:</p>\n\n<pre><code>foreach my $element ( @array ) {\n     my $result = doSomething($element);\n}\n</code></pre>\n\n<p>Since it doesn't matter that the array is processed in order, and the script runs long, I'd like run <code>doSomething()</code> asynchronously.</p>\n\n<p>I am looking at <a href=\"https://metacpan.org/release/IO-Async\" rel=\"nofollow noreferrer\">IO::Async</a> for this, but I can't seem to find an example where the input to the loop is a simple array as above.  The example seem to focus on open sockets, STDIN, etc.</p>\n\n<p>Here is the example given, showing feeding data to the loop via STDIN:</p>\n\n<pre><code>$loop-&gt;add( IO::Async::Stream-&gt;new_for_stdin(\n   on_read =&gt; sub {\n      my ( $self, $buffref, $eof ) = @_;\n\n      while( $$buffref =~ s/^(.*)\\n// ) {\n          print \"You typed a line $1\\n\";\n      }\n\n      return 0;\n   },\n) );\n</code></pre>\n\n<p>How can I feed it the array elements instead?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1545142778, "post_id": 53834985, "comment_id": 94518072, "body": "sort them and take the last one?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1545142850, "post_id": 53834985, "comment_id": 94518110, "body": "(OT: <i>Always</i> <code>use strict; use warnings;</code>!)"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545143173, "post_id": 53834985, "comment_id": 94518278, "body": "yes, i use use strict; use warnings"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1545143249, "post_id": 53834985, "comment_id": 94518333, "body": "@dfgert No. No, you don\u2019t."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545143788, "post_id": 53834985, "comment_id": 94518632, "body": "i have this message with use strict and warning Global symbol &quot;@files&quot; requires explicit package name at test.pl line 40. BEGIN not safe after errors--compilation aborted at test.pl line 40."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1545143957, "post_id": 53834985, "comment_id": 94518725, "body": "@dfgert <a href=\"https://qntm.org/files/perl/perl.html\" rel=\"nofollow noreferrer\">qntm.org/files/perl/perl.html</a>"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1545144233, "post_id": 53834985, "comment_id": 94518890, "body": "The <code>-M</code> file file test will give you a numeric value relative to when the file was last modified that can be sorted on to find the latest file."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1545144622, "post_id": 53834985, "comment_id": 94519139, "body": "@JGNI where i will should put thr option -M ?"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1545145032, "post_id": 53834985, "comment_id": 94519374, "body": "Change your loop code to <code>print( (sort {-M $a &lt;=&gt; -M $b } @files) [0])</code>"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1545146525, "post_id": 53834985, "comment_id": 94520282, "body": "@JGNI i put but its blocked"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1545147084, "post_id": 53834985, "comment_id": 94520589, "body": "@dfgert I don&#39;t understand you. If you are getting an error message then please post it."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9725432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZkBEF.jpg?s=128&g=1", "display_name": "theMage", "link": "https://stackoverflow.com/users/9725432/themage"}, "edited": false, "score": 1, "creation_date": 1545255583, "post_id": 53836282, "comment_id": 94566921, "body": "keep in mind that quite often you are going to be exchanging code readability for tiny increments in performance - for instance, in this case, if you have 100_000 items in your list, the sort will take about 11 times more time than just doing the gt, but we are talking about microseconds (if not nanoseconds), while the code gets harder to understand (assuming you are a bit familiar with Perl or similar syntaxes)."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 79, "user_id": 9725432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZkBEF.jpg?s=128&g=1", "display_name": "theMage", "link": "https://stackoverflow.com/users/9725432/themage"}, "edited": false, "score": 0, "creation_date": 1545255796, "post_id": 53836282, "comment_id": 94567016, "body": "Yes, that&#39;s a reasonable statement.  Readabiliy and maintainability should always factor into which approach one takes.  I tend to over-optimize for the sake of those nanoseconds, so your comment is quite fair."}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": true, "score": 1, "last_activity_date": 1545147277, "last_edit_date": 1545147277, "creation_date": 1545146947, "answer_id": 53836282, "question_id": 53834985, "link": "https://stackoverflow.com/questions/53834985/print-only-recent-file/53836282#53836282", "title": "Print only recent file", "body": "<p>It depends on what you want...  if you can take for granted that the filename will always be in order of when it was created, then something like this will work:</p>\n\n<pre><code>my @files = &lt;'/mnt/SESSIONS*'&gt;;\nmy $latest;\n\nforeach my $file (@files) {\n  $latest = $file if $file gt $latest;\n}\n\nprint $latest;\n</code></pre>\n\n<p>Or, if you want to go based on when the last file was modified (ignoring filenames), you could do this:</p>\n\n<pre><code>my @files = &lt;'/mnt/SESSIONS*'&gt;;\nmy @latest = (undef, undef);\n\nforeach my $file (@files) {\n  my $mod = -M $file;\n  if (!$latest[1] or $mod &lt; $latest[1]) {\n    @latest = ($file, $mod);\n  }\n}\n\nprint $latest[0];\n</code></pre>\n\n<p>Nothing against a sort, but a sort is average case O(n log n), whereas this approach is O(n) and will guarantee only one traversal of all files.  Granted, the number of files in a directory will unlikely be so great as to impact performance, but this is a consideration.</p>\n\n<p>Alternatively, if you just want to make a system call, you can do this:</p>\n\n<pre><code>ls -A1t /mnt/SESSIONS* | head -1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 9725432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZkBEF.jpg?s=128&g=1", "display_name": "theMage", "link": "https://stackoverflow.com/users/9725432/themage"}, "is_accepted": false, "score": 2, "last_activity_date": 1545148355, "creation_date": 1545148355, "answer_id": 53836694, "question_id": 53834985, "link": "https://stackoverflow.com/questions/53834985/print-only-recent-file/53836694#53836694", "title": "Print only recent file", "body": "<p>The previous suggestions in the comments refer you to -M operator/function, which returns (a definition of) the modification time of a file - that assumes that the files are modified only while they are used than never changed after that.</p>\n\n<p>The way you state your problem suggests that you want the file that is named with the latest name - and that makes it faster to just use the information you already have in memory, which is the names themselves.</p>\n\n<pre><code>my ($latest) = sort { $b cmp $a } @files;\nprint \"$latest\\n\";\n</code></pre>\n\n<p>the things referred to and that you may want to read a bit more about are:</p>\n\n<ul>\n<li>-M (and the other file functions): <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/-X.html</a></li>\n<li>sort: <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/sort.html</a></li>\n<li>cmp and &lt;=> : <a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlop.html#Equality-Operators</a></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53836282, "answer_count": 2, "score": -2, "last_activity_date": 1545148355, "creation_date": 1545142551, "last_edit_date": 1545143140, "question_id": 53834985, "link": "https://stackoverflow.com/questions/53834985/print-only-recent-file", "title": "Print only recent file", "body": "<p>I want to print only the recent file in a repertory.</p>\n\n<p>My script:</p>\n\n<pre><code>#!/usr/bin/perl\n#use strict;\n#use warnings;\n\n@files = &lt;'/mnt/SESSIONS*'&gt;;\nforeach $file (@files) {\n  print $file . \"\\n\";\n} \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>/mnt/SESSIONS2018-12-18_14_00.log\n/mnt/SESSIONS2018-12-18_14_15.log\n/mnt/SESSIONS2018-12-18_14_30.log\n/mnt/SESSIONS2018-12-18_14_45.log\n/mnt/SESSIONS2018-12-18_15_00.log\n</code></pre>\n\n<p>I want only recent file name which is <code>/mnt/SESSIONS2018-12-18_15_00.log</code>.</p>\n\n<p>Do you have an idea?</p>\n"}, {"tags": ["xml", "perl", "twig", "xml-twig"], "comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1545145713, "post_id": 53834063, "comment_id": 94519779, "body": "how do you generate the output? it&#39;s not shown in your code. FWIW when I do <code>$twig-&gt;print</code> I don&#39;t get the extra empty lines"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1545145846, "post_id": 53834063, "comment_id": 94519862, "body": "@mirod, What if the original had CRLF line endings?"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1545146295, "post_id": 53834063, "comment_id": 94520131, "body": "@ikegami, the parser normalizes those &quot;to a single #xA character&quot; (<a href=\"https://www.w3.org/TR/REC-xml/#sec-line-ends\" rel=\"nofollow noreferrer\">w3.org/TR/REC-xml/#sec-line-ends</a>)... oh wait! Not with <code>keep_encoding</code>! that&#39;s it, that&#39;s the problem."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 4380155, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d807912a2e1caa459162fc97d3cd1e99?s=128&d=identicon&r=PG", "display_name": "Jaydeep", "link": "https://stackoverflow.com/users/4380155/jaydeep"}, "edited": false, "score": 0, "creation_date": 1545198201, "post_id": 53836191, "comment_id": 94537997, "body": "Thanks a lot, removing keep_encoding did resolve the issue but just wondering would it have any impact? Because in this example the encoding is &quot;UTF-8&quot; but that won&#39;t be the case always."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 189, "user_id": 4380155, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d807912a2e1caa459162fc97d3cd1e99?s=128&d=identicon&r=PG", "display_name": "Jaydeep", "link": "https://stackoverflow.com/users/4380155/jaydeep"}, "edited": false, "score": 0, "creation_date": 1545221200, "post_id": 53836191, "comment_id": 94549129, "body": "By default the encoding of the output will be utf-8, if you know the encoding ahead of time you can use a filter `   my $conv = XML::Twig::encode_convert( &#39;latin1&#39;);   my $t = XML::Twig-&gt;new(output_filter =&gt; $conv);` or you can do the conversion back to the original encoding as a separate step using <code>iconv</code> for example. It is pretty rare these days to work with anything else than unicode (UTF-8 in *nix, I guess it could be UTF-16 on windows)."}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 1, "last_activity_date": 1545146595, "creation_date": 1545146595, "answer_id": 53836191, "question_id": 53834063, "link": "https://stackoverflow.com/questions/53834063/xmltwig-is-adding-empty-newline-for-values-provided-in-multi-line/53836191#53836191", "title": "XML::Twig is adding empty newline for values provided in multi-line", "body": "<p>Remove the <code>keep_encoding</code> option. It's useless since the input is in utf-8, and it makes the module bypass some of the parser features, notably the one that normalizes LF/CR</p>\n\n<p>It should not be used anyway: it's a relic of a time when Unicode was not as prevalent as today. It allowed people stuck with old encodings to still be able to process their XML.</p>\n\n<p>Thanks ikegami!</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 4380155, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d807912a2e1caa459162fc97d3cd1e99?s=128&d=identicon&r=PG", "display_name": "Jaydeep", "link": "https://stackoverflow.com/users/4380155/jaydeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1545198283, "creation_date": 1545198283, "answer_id": 53845244, "question_id": 53834063, "link": "https://stackoverflow.com/questions/53834063/xmltwig-is-adding-empty-newline-for-values-provided-in-multi-line/53845244#53845244", "title": "XML::Twig is adding empty newline for values provided in multi-line", "body": "<p>Thanks a lot, removing <code>keep_encoding</code> did resolve the issue but just wondering would it have any impact? Because in this example the encoding is <code>UTF-8</code> but that won't be the case always.</p>\n"}], "owner": {"reputation": 189, "user_id": 4380155, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d807912a2e1caa459162fc97d3cd1e99?s=128&d=identicon&r=PG", "display_name": "Jaydeep", "link": "https://stackoverflow.com/users/4380155/jaydeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 53836191, "answer_count": 2, "score": 2, "last_activity_date": 1545198283, "creation_date": 1545139528, "question_id": 53834063, "link": "https://stackoverflow.com/questions/53834063/xmltwig-is-adding-empty-newline-for-values-provided-in-multi-line", "title": "XML::Twig is adding empty newline for values provided in multi-line", "body": "<p>I am using XML::Twig to parse the file in my perl script. I am bit new to this. I got following kind of entries (sample example here) in my XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mytag1 name=\"abc\"&gt;\n    &lt;mytag2&gt;This is line 1.\n        This is line 2.\n        This is line 3.\n     &lt;/mytag2&gt;\n&lt;/mytag1&gt;\n</code></pre>\n\n<p>And in my perl script, I am doing something like:</p>\n\n<pre><code>my $twig = XML::Twig-&gt;new( keep_encoding=&gt;1, keep_atts_order=&gt;1, pretty_print =&gt; 'indented', comments =&gt; 'keep' );\n$twig-&gt;parsefile($in_file);\n</code></pre>\n\n<p>I have some validation code around after which following kind of output is getting generated.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mytag1 name=\"abc\"&gt;\n    &lt;mytag2&gt;This is line 1.\n\n        This is line 2.\n\n        This is line 3.\n\n     &lt;/mytag2&gt;\n&lt;/mytag1&gt;\n</code></pre>\n\n<p>The extra blank lines are getting generated in output, I am not sure what's going wrong. I tried to search around but couldn't find much useful information on this. Any help will be appreciated. </p>\n"}, {"tags": ["linux", "bash", "shell", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3268, "user_id": 9563318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MnYi1.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9563318/jon"}, "is_accepted": true, "score": 3, "last_activity_date": 1545137762, "creation_date": 1545137762, "answer_id": 53833523, "question_id": 53833215, "link": "https://stackoverflow.com/questions/53833215/perl-how-to-add-lines-before-word-in-file/53833523#53833523", "title": "Perl + how to add lines before word in file", "body": "<p>The problem here is that in Bash double quotes don't cause <code>\\n</code> to be interpreted as a newline character.</p>\n\n<p>For this, I think I'd just include literal newlines in the string:</p>\n\n<pre><code>export info=\"The Postfix error(8) delivery agent processes delivery requests from the \nqueue manager.\nEach request specifies a queue file, a sender address,\nthe reason for non-delivery (specified as the next-hop destination), and recipient\"\nperl -i -plne 'print \"$ENV{info}\" if(/ERROR:/);' file\n</code></pre>\n\n<p>Otherwise, you could use <code>printf</code>, but that seems overkill:</p>\n\n<pre><code>export info=$(printf \"The Postfix error(8) delivery agent processes delivery requests from the queue manager. \\nEach request specifies a queue file, a sender address, \\nthe reason for non-delivery (specified as the next-hop destination), and recipient\")\nperl -i -plne 'print \"$ENV{info}\" if(/ERROR:/);' file\n</code></pre>\n"}], "owner": {"reputation": 1017, "user_id": 10194070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWbkw.png?s=128&g=1", "display_name": "Judy", "link": "https://stackoverflow.com/users/10194070/judy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 53833523, "answer_count": 1, "score": 1, "last_activity_date": 1545137762, "creation_date": 1545136751, "last_edit_date": 1545137507, "question_id": 53833215, "link": "https://stackoverflow.com/questions/53833215/perl-how-to-add-lines-before-word-in-file", "title": "Perl + how to add lines before word in file", "body": "<p>I write the following code in my bash script ( runs on redhat 7.2 version )</p>\n\n<p>in order to add the content of $info variable before the word \u2013 <strong>ERROR:</strong> in file</p>\n\n<pre><code>export info=\"The Postfix error(8) delivery agent processes delivery requests from the queue manager. Each request specifies a queue file, a sender address, the reason for non-delivery (specified as the next-hop destination), and recipient\"\nperl -i -plne 'print \"$ENV{info}\" if(/ERROR:/);' file\n</code></pre>\n\n<p>after we run the code the output of file that we can see is too long and its better to separate the line to 3 lines </p>\n\n<pre><code>more file\n\nThe Postfix error(8) delivery agent processes delivery requests from the queue manager. Each request specifies a queue file, a sender address, the reason for non-delivery (specified as the next-hop destination), and recipient\nERROR:\n</code></pre>\n\n<p>So I add \u201c\\n\u201d in the info line as the following:\nand we run the code again</p>\n\n<pre><code>export info=\"The Postfix error(8) delivery agent processes delivery requests from the queue manager. \\nEach request specifies a queue file, a sender address, \\nthe reason for non-delivery (specified as the next-hop destination), and recipient\"\nperl -i -plne 'print \"$ENV{info}\" if(/ERROR:/);' file\n</code></pre>\n\n<p>but the file still not include the new lines ( actually the \"\\n\" are in line )</p>\n\n<pre><code>The Postfix error(8) delivery agent processes delivery requests from the queue manager. \\nEach request specifies a queue file, a sender address, \\nthe reason for non-delivery (specified as the next-hop destination), and recipient\nERROR:\n</code></pre>\n\n<p><strong><em>while Expected results should be:</em></strong></p>\n\n<pre><code>The Postfix error(8) delivery agent processes delivery requests from the queue manager. \nEach request specifies a queue file, a sender address, \nthe reason for non-delivery (specified as the next-hop destination), and recipient\nERROR:\n</code></pre>\n\n<p><strong>Where I am wrong here?</strong></p>\n"}, {"tags": ["perl", "servicenow"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1545136944, "post_id": 53832913, "comment_id": 94514652, "body": "If you add four spaces at the start of a line, then StackOverflow will format that line as code. I&#39;ve just edited your question to do that. Please consider doing it yourself in future."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1545139363, "post_id": 53832913, "comment_id": 94515985, "body": "If you run the <code>curl</code> command directly from the command line (bash or so), is it working ?"}, {"owner": {"reputation": 13, "user_id": 1755889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629a2c9fd2f6a06ae38b909ddc93cc88?s=128&d=identicon&r=PG", "display_name": "Varun C.h", "link": "https://stackoverflow.com/users/1755889/varun-c-h"}, "edited": false, "score": 0, "creation_date": 1545149840, "post_id": 53832913, "comment_id": 94522167, "body": "yes, it is working"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1755889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629a2c9fd2f6a06ae38b909ddc93cc88?s=128&d=identicon&r=PG", "display_name": "Varun C.h", "link": "https://stackoverflow.com/users/1755889/varun-c-h"}, "edited": false, "score": 0, "creation_date": 1545200480, "post_id": 53837757, "comment_id": 94538724, "body": "Thanks for the help. It worked. I tried with slight modifications                                   my @cmd = (&quot;curl&quot;, $url, &quot;-i&quot;, &quot;-s&quot;, &quot;--insecure&quot;, &quot;--request&quot;,         &quot;PUT&quot;, &quot;--header&quot;, &quot;Accept:application/json&quot;, &quot;--header&quot;,         &quot;Content-Type:application/json&quot;,         &quot;--data&quot;, qq[{&quot;comments&quot;:\\&quot;$comments\\&quot;}], &quot;--user&quot;, &quot;test:test&quot;);"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1545152164, "creation_date": 1545152164, "answer_id": 53837757, "question_id": 53832913, "link": "https://stackoverflow.com/questions/53832913/calling-rest-api-with-special-characters-in-data-parameters-from-perl-is-failing/53837757#53837757", "title": "Calling REST API with special characters in data parameters from Perl is failing", "body": "<p>I can get this working with</p>\n\n<pre><code>my $comments = \"b\\\"'\\\"c\";\n</code></pre>\n\n<p>The string that gets passed to the shell is then</p>\n\n<pre><code>--data '{\"comments\":\"b'\"'\"'c\"}'\n</code></pre>\n\n<p>which is three separate tokens concatenated together:</p>\n\n<pre><code>'{\"comments\":\"b'       resolves to    {\"comments\":\"b\n\"'\"                    resolves to    '\n'c\"}'                  resolves to    c\"}\n</code></pre>\n\n<p>Also see <a href=\"http://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\"><code>String::ShellQuote</code></a>, which is a godsend for problems like this.</p>\n\n<pre><code>use String::ShellQuote;\n$comments = \"b'c\";\n@cmd = (\"curl\", $URL, \"-i\", \"-s\", \"--insecure\", \"--request\",\n        \"PUT\", \"--header\", \"Accept:applicatin/json\", \"--header\",\n        \"Content-Type:application/json\",\n        \"--data\", qq[{\"comments\":$comments}], \"--user\", \"test:test\");\n$cmd = shell_quote(@cmd);\nprint $cmd;\n</code></pre>\n\n<p>Gives you:</p>\n\n<pre><code>curl 'https://test.service-now.com/api/now/table/incident/code?sysparm_display_value=true' \n    -i -s --insecure --request PUT --header \n    Accept:application/json --header Content-Type:application/json \n    --data '{\"comments\":\"b'\\''c\"}' --user test:test\n</code></pre>\n\n<p>which would also satisfy the shell's syntax checker.</p>\n"}], "owner": {"reputation": 13, "user_id": 1755889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629a2c9fd2f6a06ae38b909ddc93cc88?s=128&d=identicon&r=PG", "display_name": "Varun C.h", "link": "https://stackoverflow.com/users/1755889/varun-c-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 53837757, "answer_count": 1, "score": 0, "last_activity_date": 1545152164, "creation_date": 1545135731, "last_edit_date": 1545136862, "question_id": 53832913, "link": "https://stackoverflow.com/questions/53832913/calling-rest-api-with-special-characters-in-data-parameters-from-perl-is-failing", "title": "Calling REST API with special characters in data parameters from Perl is failing", "body": "<p>From perl i'm trying to call a servicenow rest api to update some data attributes.</p>\n\n<p>I'm using curl command to achieve this and for some reasons i can't use any of the perl modules available.</p>\n\n<p>I'm able to achieve this successfully without any special characters in the value field of the json.</p>\n\n<p>Following is the code used for formatting the cmd:</p>\n\n<pre><code>my $comments = \"b'c\";\nmy $cmd = `curl \\\"$url\\\" -i -s --insecure --user test:test --request PUT --header \"Accept:application/json\" --header \"Content-Type:application/json\"  --data '{\\\"comments\\\":\\\"$comments\\\"}'`;\n</code></pre>\n\n<p>If the above value is \"bc\" i'm able to get the data, but if i give \"b'c\" the i'm getting following errors:</p>\n\n<pre><code>sh: -c: line 0: unexpected EOF while looking for matching `\"'\n\nsh: -c: line 1: syntax error: unexpected end of file\n</code></pre>\n\n<p>Even i tried the following code:</p>\n\n<pre><code>my $cmd = system \"curl https://test.service-now.com/api/now/table/incident/code?sysparm_display_value=true -i -s --insecure --request PUT --header \\\"Accept:application/json\\\" --header \\\"Content-Type:application/json\\\"  --data '{\\\"comments\\\":\\\"bc\\\"}' --user test:test\";\n</code></pre>\n\n<p>If a string with single quote b'c is given I'm getting the same error.</p>\n\n<p>Could somebody please tell me how to handle single quote inside double quoted string?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1545124433, "post_id": 53829103, "comment_id": 94507647, "body": "I&#39;m afraid this really isn&#39;t clear. In your file, what is a different user? What are you trying to achieve here? What output do you want? Please explain the format of your input file in more detail. What are <code>def</code> and <code>ghi</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1545127122, "post_id": 53829103, "comment_id": 94509174, "body": "I&#39;ve just noticed that you&#39;re storing your data file in your <code>cgi-bin</code> directory. This is a very bad idea. <code>cgi-bin</code> is intended for executable files. Data files should usually be stored outside of your web root."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1545149566, "post_id": 53829800, "comment_id": 94522035, "body": "I&#39;d probably use <code>map</code> for that last line, because I feel it a little clearer: <code>my %superadminstaff = map { $_ =&gt; &quot;Y&quot; } @prelist;</code> - same result though, so it&#39;s a matter of taste."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 4, "last_activity_date": 1545124893, "creation_date": 1545124893, "answer_id": 53829800, "question_id": 53829103, "link": "https://stackoverflow.com/questions/53829103/how-does-perl-take-my-text-file-containing-different-users/53829800#53829800", "title": "how does perl take my text file containing different users", "body": "<p>Well let's re write the code so it a) compiles, b) uses current best practice and c) doesn't fork out to <code>cat</code></p>\n\n<pre><code>my @prelist = ();\nmy %superadminstaff = ();\nopen my $admin, '&lt;', '../cgi-bin/superadmin.txt' or die \"Can't open ../cgi-bin/superadmin.txt: $!\\n\";\nchomp(@prelist = &lt;$admin&gt;);\n@superadminstaff{@prelist} = (\"Y\") x @prelist;\n</code></pre>\n\n<p>So we have two variables <code>@prelist</code> and <code>%superadminstaff</code>, <code>@prelist</code> will hold each line of the file and <code>%superadminstaff</code> will end up keyed on each entry in the file. </p>\n\n<p>Line 3 attempts to open the file, and if if can't will stop the script and print out a message explaining what went wrong.</p>\n\n<p>Line 4 reads the file into <code>@prelist</code> and uses <code>chomp</code> to strip off the line endings. Note that <code>chomp</code> is used in preference to <code>chop</code> as the last line in the file my not have a line ending.</p>\n\n<p>Line 5 uses some Perl magic called a hash slice to create entries in <code>%superadminstaff</code> for each element in<code>@prelist</code> and then uses the <code>x</code> operator to create a list containing as many <code>Y</code> elements as there are elements in <code>@prelist</code> this list of <code>Y</code>s is then assigned to the newly created elements in <code>%superadminstaff</code>.</p>\n\n<p>So at the end of this code you now have <code>%superadminstaff</code> containing each entry of the file. However the order of the elements in the file will not be preserved and any duplicate entries in the file will be reduced to one entry in <code>%superadminstaff</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 3738247, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nncls.jpg?s=128&g=1", "display_name": "rashmi1705", "link": "https://stackoverflow.com/users/3738247/rashmi1705"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545124893, "creation_date": 1545122189, "last_edit_date": 1545123038, "question_id": 53829103, "link": "https://stackoverflow.com/questions/53829103/how-does-perl-take-my-text-file-containing-different-users", "title": "how does perl take my text file containing different users", "body": "<p>The superadmin.txt file is in the form:</p>\n\n<pre><code>def\nghi\npqr\n...etc\n</code></pre>\n\n<p>How would Perl read different users?\nWill it be able to identify different text from superadmin.txt?\nHere is the code:</p>\n\n<pre><code>  @prelist = ();\n  @prelist = `cat ../cgi-bin/superadmin.txt`;\n  foreach $prename (@prelist) {\n  $prename =~s/\\n//g ;\n  $superadminstaff{$prename} = \"Y\";\n</code></pre>\n"}, {"tags": ["perl", "cgi", "cgi.pm"], "answers": [{"comments": [{"owner": {"reputation": 15825, "user_id": 791265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39036238b938857447a544341adcaa8f?s=128&d=identicon&r=PG", "display_name": "jimp", "link": "https://stackoverflow.com/users/791265/jimp"}, "edited": false, "score": 0, "creation_date": 1545168850, "post_id": 53829192, "comment_id": 94531018, "body": "For a library that blogs claim to be a drop in replacement for CGI.pm, I found CGI::Simple not very compatible at all. I had to rewrite most of my code to get it working. Your answer definitely pointed me in the right direction. Thanks!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 15825, "user_id": 791265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39036238b938857447a544341adcaa8f?s=128&d=identicon&r=PG", "display_name": "jimp", "link": "https://stackoverflow.com/users/791265/jimp"}, "edited": false, "score": 0, "creation_date": 1545207660, "post_id": 53829192, "comment_id": 94541752, "body": "@jimp: Being a drop-in replacement just means that CGI::Simple implements all of the methods in CGI. It doesn&#39;t mean that the opposite is also true."}, {"owner": {"reputation": 15825, "user_id": 791265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39036238b938857447a544341adcaa8f?s=128&d=identicon&r=PG", "display_name": "jimp", "link": "https://stackoverflow.com/users/791265/jimp"}, "edited": false, "score": 0, "creation_date": 1545235452, "post_id": 53829192, "comment_id": 94557732, "body": "I see that, but I think some of the methods have different output. Maybe the two libraries diverged over time (not a bad thing)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1545208186, "last_edit_date": 1545208186, "creation_date": 1545122525, "answer_id": 53829192, "question_id": 53827798, "link": "https://stackoverflow.com/questions/53827798/how-do-i-get-a-list-of-cgi-pm-fields-that-are-only-file-uploads/53829192#53829192", "title": "How do I get a list of CGI.pm fields that are only file uploads?", "body": "<p>CGI.pm doesn't have an equivalent of the <code>upload_fieldnames()</code> method, but you can synthesise something by using a combination of the <code>param()</code> and <code>upload()</code> methods. <code>param()</code> will give you a list of all of the parameter names and you can use <code>upload()</code> to check whether or not each one is a file upload.</p>\n\n<pre><code>my @upload_fieldnames;\n\nforeach (param()) {\n  push @upload_fieldnames, $_ if upload($_);\n}\n</code></pre>\n\n<p>Or, as a one-liner:</p>\n\n<pre><code>my @upload_fields = grep { upload($_) } param();\n</code></pre>\n\n<p><strong>Update:</strong> I just wanted to add a comment on this.</p>\n\n<blockquote>\n  <p>I am trying to adapt this code to use CGI.pm, because it is more commonly available for CentOS 7</p>\n</blockquote>\n\n<p>I'm not sure what your use case is here, but I strongly suspect that your time would be better spent working out how to install your required modules rather than working around the absence of certain modules.</p>\n\n<p>If it helps you at all, I've just built an RPM of CGI::Simple and uploaded it to my RPM repository at <a href=\"https://rpm.mag-sol.com/\" rel=\"nofollow noreferrer\">rpm-mag-sol.com</a>.</p>\n"}], "owner": {"reputation": 15825, "user_id": 791265, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39036238b938857447a544341adcaa8f?s=128&d=identicon&r=PG", "display_name": "jimp", "link": "https://stackoverflow.com/users/791265/jimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53829192, "answer_count": 1, "score": 2, "last_activity_date": 1545208186, "creation_date": 1545116187, "question_id": 53827798, "link": "https://stackoverflow.com/questions/53827798/how-do-i-get-a-list-of-cgi-pm-fields-that-are-only-file-uploads", "title": "How do I get a list of CGI.pm fields that are only file uploads?", "body": "<p>I have used <code>CGI::Simple</code> in the past, for a general purpose upload processor. I apparently used an internal method called <code>upload_fieldnames</code>, which returns an array of field names that are uploads.</p>\n\n<p>I am trying to adapt this code to use CGI.pm, because it is more commonly available for CentOS 7. How would I get a list of only file upload fields? All of the examples I've found use known field names, which I don't know in advance. Other fields might be submitted with the form, and I only need to act on the ones that provide a file upload.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1545087530, "post_id": 53824132, "comment_id": 94497293, "body": "Post your sample file content, not an image of it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545087948, "post_id": 53824132, "comment_id": 94497440, "body": "You never reset <code>$sum</code> as you move onto next <code>$FI</code> iteration. So it keeps adding."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545088108, "post_id": 53824132, "comment_id": 94497514, "body": "First read the depth-file into a suitable data structure, and use that to work with each line of the file with intervals. (Do you really need to process each line independently, even for same chr?) This way you open and iterate over depth-file anew for every single line of intervals-file.  (Can the depth-file be too large for your memory?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545088323, "post_id": 53824132, "comment_id": 94497587, "body": "Don&#39;t declare things up front; it is generally good, and important, to declare variables in as small a scope as possible. In your program most variables can be declared right as they are assigned."}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545099483, "post_id": 53825081, "comment_id": 94500030, "body": "@zdim OP also has the first chr1 line sum as 19091 instead of 19099, and the chr3 line includes values from a row of the depths table that is out of range of the corresponding interval."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545153669, "post_id": 53825081, "comment_id": 94524367, "body": "(fyi, it seems that the OP cleaned up the numbers)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1545095548, "creation_date": 1545095548, "answer_id": 53825081, "question_id": 53824132, "link": "https://stackoverflow.com/questions/53824132/find-sum-of-all-values-which-overlap-with-multiple-ranges-perl/53825081#53825081", "title": "Find sum of all values which overlap with multiple ranges perl", "body": "<p>A lot of the numbers in your sample output don't match up with your description of what you're doing and the numbers in your sample input - things not adding up right, numbers out of range showing up, etc. so either your sample input, output, or description are wrong, and I'm not sure which. Plus, your sample code doesn't produce anything close to your expected output format (Which appears to be intended to be, for each interval range, the name, min and max depths in that range, and the sum of that last column)...</p>\n\n<p>Still, this does what I <em>think</em> you're trying to do:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse autodie;\n\n# Read the depths file into a hash table to avoid re-reading it for\n# every line of the intervals file.\nmy %depths;\nopen my $depth, \"&lt;\", $ARGV[1];\nwhile (&lt;$depth&gt;) {\n  chomp;\n  my @F = split /\\t/;\n  push @{$depths{$F[0]}}, [ $F[1], $F[3] ];\n}\n\nopen my $intervals, \"&lt;\", $ARGV[0];\n$, = \"\\t\";\nwhile (&lt;$intervals&gt;) {\n  chomp;\n  my @F = split /\\t/;\n  my $sum = 0;\n  my ($min, $max);\n  for my $d (@{$depths{$F[0]}}) {\n    if ($d-&gt;[0] &gt;= $F[1] &amp;&amp; $d-&gt;[0] &lt;= $F[2]) {\n      $sum += $d-&gt;[1];\n      $min = $d-&gt;[0] if !defined $min || $d-&gt;[0] &lt; $min;\n      $max = $d-&gt;[0] if !defined $max || $d-&gt;[0] &gt; $max;\n    }\n  }\n  say $F[0], $min, $max, $sum;\n}\n</code></pre>\n\n<p>Note all the things zdim mentioned in comments: the tighter scoping of variables (Leading to not keeping the previous values between new intervals), and only reading the depths file once, instead of once per line of the intervals file, making it a lot more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1545157133, "last_edit_date": 1545157133, "creation_date": 1545097282, "answer_id": 53825270, "question_id": 53824132, "link": "https://stackoverflow.com/questions/53824132/find-sum-of-all-values-which-overlap-with-multiple-ranges-perl/53825270#53825270", "title": "Find sum of all values which overlap with multiple ranges perl", "body": "<p>Somewhat similar to Shawn's solution, but instead of a hash of arrays, I used a hash of hashes. Also, I did not adjust the boundaries as Shawn did with <code>min</code> and <code>max</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %int;\nopen my $fh, '&lt;', 'f2.txt' or die $!;\n# depth file\nwhile (&lt;$fh&gt;) {\n    my ($chr, $num, $amt) = (split)[0,1,3];\n    $int{$chr}{$num} = $amt;\n}\nclose $fh or die $!;\n\nopen $fh, '&lt;', 'f1.txt' or die $!;\n\n# intervals file\nwhile (&lt;$fh&gt;) {\n    chomp;\n    my ($chr, $start, $stop) = split;\n\n    my $href = $int{$chr}; # hash reference\n    my $sum = 0;\n    for my $num (keys %$href) {\n        if ($start &lt;= $num &amp;&amp; $num &lt;= $stop) {\n            $sum += $href-&gt;{$num};\n        }   \n    }\n    print \"$_\\t$sum\\n\";\n\n}\nclose $fh or die $!;\n</code></pre>\n\n<p>The results from this were:</p>\n\n<pre><code>chr1    121087394   121087399   19099\nchr1    121087820   121087822   5005\nchr20   1934714     1934716     5311\nchr3    108047283   108047284   3505\n</code></pre>\n\n<p>EDIT: The OP changed her inputs. I made a change in my last line of output to reflect this. She reports '5331' in the third line of the outout, but the correct number is '5311'</p>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53825081, "answer_count": 2, "score": 1, "last_activity_date": 1545157133, "creation_date": 1545087080, "last_edit_date": 1545146094, "question_id": 53824132, "link": "https://stackoverflow.com/questions/53824132/find-sum-of-all-values-which-overlap-with-multiple-ranges-perl", "title": "Find sum of all values which overlap with multiple ranges perl", "body": "<p>I have two file structures as follows:</p>\n\n<p>Intervals:</p>\n\n<pre><code>chr1    121087394   121087399\nchr1    121087820   121087822\nchr20   1934714     1934716\nchr3    108047283   108047285\n</code></pre>\n\n<p>Depth:</p>\n\n<pre><code>chr1 121087395 A 3799\nchr1 121087396 T 3818\nchr1 121087397 G 3824\nchr1 121087398 T 3827\nchr1 121087399 G 3831\nchr1 121087821 T 2499\nchr1 121087822 T 2506\nchr20 1934715  G 2650\nchr20 1934716  T 2661\nchr3 108047284 T 1755\nchr3 108047285 C 1750\n</code></pre>\n\n<p>I want the output, where column 4 is sum of all values from column 4 of depth file falling in specific range.\nOutput:</p>\n\n<pre><code>    chr1 121087395 121087399 19099\n    chr1 121087821 121087822 5005\n    chr20 1934715  1934716   5331\n    chr3  108047284 108047285 3505\n</code></pre>\n\n<p>My code is as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $intervals = $ARGV[0];\nmy $depth = $ARGV[1];\n\nmy $args = $#ARGV+1;\n\n\nmy ($FI, $FD, @F, $i_chr, $i_start, $i_end, @diff, $i, $j);\nmy $z; \nmy $nr=0;\nmy $sum=0;\nopen($FI, '&lt;', $intervals) or die \"Could not open file: $intervals\\n\";\n\nwhile(&lt;$FI&gt;){\n    chomp $_;\n    ($i_chr, $i_start, $i_end) = split(\"\\t\", $_);\n    open($FD, '&lt;', $depth) or die \"Could not open file: $depth\\n\";\n    while(&lt;$FD&gt;){\n    chomp $_;\n    @F = split(\"\\t\", $_);\n    if($F[0] eq $i_chr &amp;&amp; $F[1] &gt; $i_start &amp;&amp; $F[1] &lt;= $i_end){\n        $nr++;\n        $sum += $F[3];\n    }\n    }print \"$sum\\n\";\n}\n</code></pre>\n\n<p>The if loop is not working. It is printing the sum of all values of column 4 of depth file. </p>\n\n<p>How can i modify this loop?</p>\n"}, {"tags": ["postgresql", "perl", "large-data", "dbi", "database-cursor"], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "edited": false, "score": 4, "creation_date": 1545077625, "post_id": 53820403, "comment_id": 94493367, "body": "There should be no need to keep recreating the statement handle inside the loop. Making that change helps other optimizations, like replacing fetchrow_hashref with one <a href=\"https://metacpan.org/pod/DBI#bind_columns\" rel=\"nofollow noreferrer\">bind_colums</a> call outside the loop then a simple fetch inside, which would be much faster."}], "tags": [], "owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "is_accepted": false, "score": 6, "last_activity_date": 1550051965, "last_edit_date": 1550051965, "creation_date": 1545068308, "answer_id": 53820403, "question_id": 53820401, "link": "https://stackoverflow.com/questions/53820401/how-to-walk-through-a-large-result-set-with-perl-and-postgresql/53820403#53820403", "title": "How to walk through a large result set with perl and postgresql", "body": "<p>To work around this problem, declare a cursor. And then fetch blocks of data using the cursor. The ReadOnly and AutoCommit settings are important for this to work. Since PostgreSQL will only do CURSORS for reading.</p>\n\n\n\n<pre><code>use DBI;\nmy $dbh =   DBI-&gt;connect(\"dbi:Pg:dbname=big_db\",\"user\",\"password\",{\n        AutoCommit =&gt; 0,\n        ReadOnly =&gt; 1,\n        PrintError =&gt; 1,\n        RaiseError =&gt;  1,\n});\n\n$dbh-&gt;do(&lt;&lt;'SQL');\nDECLARE mycursor CURSOR FOR\nSELECT * FROM big_table\nSQL\n\nmy $sth = $dbh-&gt;prepare(\"FETCH 1000 FROM mycursor\");\nwhile (1) {\n  warn \"* fetching 1000 rows\\n\";\n  $sth-&gt;execute();\n  last if $sth-&gt;rows == 0;\n  while (my $row = $sth-&gt;fetchrow_hashref('NAME_lc')){\n    # do something with the $row hash\n  }\n}\n$dbh-&gt;disconnect();\n</code></pre>\n"}], "owner": {"reputation": 4591, "user_id": 235990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4a6bad1085e07d7f29498019f1840f4b?s=128&d=identicon&r=PG", "display_name": "Tobi Oetiker", "link": "https://stackoverflow.com/users/235990/tobi-oetiker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1550051965, "creation_date": 1545068308, "question_id": 53820401, "link": "https://stackoverflow.com/questions/53820401/how-to-walk-through-a-large-result-set-with-perl-and-postgresql", "title": "How to walk through a large result set with perl and postgresql", "body": "<p>The <code>DBD::Pg</code> PostgreSQL bindings for Perl will always fetch the entire result set of your query. So if you are using a simple prepare execute to walk through a large table you will end up with the whole table in memory just by running <code>$sth-&gt;execute()</code>. Prepared statements and calls like <code>fetch_row</code> don't help.</p>\n\n<p>The following will fail miserably if you are working with a BIG table.</p>\n\n\n\n<pre><code>use DBI;\nmy $dbh =   DBI-&gt;connect(\"dbi:Pg:dbname=big_db\",\"user\",\"password\",{\n        AutoCommit =&gt; 0,\n        ReadOnly =&gt; 1,\n        PrintError =&gt; 1,\n        RaiseError =&gt;  1,\n});\n\nmy $sth = $dbh-&gt;prepare('SELECT * FROM big_table');\n$sth-&gt;execute(); #prepare to run out of memory here\nwhile (my $row = $sth-&gt;fetchrow_hashref('NAME_lc')){\n  # do something with the $row hash\n}\n$dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["string", "perl", "indexing", "substr"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1545060489, "post_id": 53818205, "comment_id": 94484841, "body": "So you have database dumps and want to perform text search on them? Why?"}, {"owner": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "edited": false, "score": 0, "creation_date": 1545060866, "post_id": 53818205, "comment_id": 94485074, "body": "its not about the datbase dumps. getting emails from other people. There fore i wrote this script in order to get IDs faster (e.g. in a SQL query). Therefore, I just dont want to prepare the &quot;list&quot; in lines, that &quot;Anfragekennziffer&quot; is at the start in a row. I would kike to search for it, and than do a substr.    e.g. &quot;yszadszadjadkak Anfragkennziffer 123458 yaidgqfoiqhfoqo&quot; - so I expect here the ID 123458, cause I found &quot;Anfragekennziffer&quot;."}, {"owner": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "edited": false, "score": 0, "creation_date": 1545061953, "post_id": 53818205, "comment_id": 94485714, "body": "done. maybe its better to understand."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "edited": false, "score": 0, "creation_date": 1545069358, "post_id": 53818835, "comment_id": 94489730, "body": "great, it works fine. Thank you very much! Now, I am trying to aggregate the ids as follows:  e.g.: &#39;59092&#39;,&#39;1491915&#39;,11851&#39;  Tried this so far (see below), but it retunrs only one ID. (The last one)  <code>my @ids; while(my $row = &lt;QUELLE&gt;) {     if ($row =~ m&#47;Anfragekennziffer\\s*(\\d+)&#47;)     {         push @ids, $1; \t\t@ids=&quot;&#39;&quot;.$1.&quot;&#39;,&quot;;     } } print join &quot;,&quot;, @ids;  print ZIEL1 &quot;@ids&quot;;  print ZIEL2 &quot;@ids&quot;;</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "edited": false, "score": 0, "creation_date": 1545072955, "post_id": 53818835, "comment_id": 94491317, "body": "No no - <code>@ids</code> already has the list of the ids. Don&#39;t do string concatenation with it. Just <code>push</code> items onto that list, and in the end, <code>print</code> the <code>join</code>ed list to your files. Don&#39;t do <code>print &quot;@ids&quot;</code> unless you want the list to be space-separated."}, {"owner": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "edited": false, "score": 0, "creation_date": 1545143157, "post_id": 53818835, "comment_id": 94518267, "body": "Thank you! Gonna try it tomorrow! :)"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1545062573, "creation_date": 1545062573, "answer_id": 53818835, "question_id": 53818205, "link": "https://stackoverflow.com/questions/53818205/search-a-specific-string-in-lines-and-than-do-a-substr-at-this-point-in-perl/53818835#53818835", "title": "Search a specific string in lines and than do a substr at this point in PERL", "body": "<p>Finding the numbers after the keyword <code>Anfragekennziffer</code> is easiest done using a regular expression that also matches the number and captures it:</p>\n\n<pre><code>my @ids;\nwhile(my $row = &lt;QUELLE&gt;)\n{\n    if ($row =~ m/Anfragekennziffer\\s*(\\d+)/)\n    {\n        push @ids, $1;\n    }\n}\nprint join \",\", @ids;\n</code></pre>\n\n<p>If you feel more comfortable using <code>substr</code>, then the <a href=\"http://perldoc.perl.org/functions/index.html\" rel=\"nofollow noreferrer\">index</a> function can give you the position where your keyword starts in the string and you can try to extract the number from there:</p>\n\n<pre><code>my @ids;\nwhile(my $row = &lt;QUELLE&gt;)\n{\n    if (my $pos = index('Anfragekennziffer', $row))\n    {\n        push @ids, substr( $row, $pos + length('Anfragekennziffer'), 10 );\n    }\n}\nprint join \",\", @ids;\n</code></pre>\n\n<p>This approach is far more fragile than the approach directly matching the number.</p>\n\n<p>In both cases, instead of building a string, I've switched to accumulating the information in an array (<code>@ids</code>) and then printing that array at the end using the <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\">join</a> function. Keeping lists as arrays helps your code stay flexible in the case you want to do something else with the data later on.</p>\n"}], "owner": {"reputation": 13, "user_id": 10801889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b71a769028209a69c6754b04769d5e?s=128&d=identicon&r=PG&f=1", "display_name": "truncateUser", "link": "https://stackoverflow.com/users/10801889/truncateuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53818835, "answer_count": 1, "score": 1, "last_activity_date": 1545062573, "creation_date": 1545060316, "last_edit_date": 1545061970, "question_id": 53818205, "link": "https://stackoverflow.com/questions/53818205/search-a-specific-string-in-lines-and-than-do-a-substr-at-this-point-in-perl", "title": "Search a specific string in lines and than do a substr at this point in PERL", "body": "<p>I would like to search in a line for a string. After I found this string, I want to do a substr in that in order get ID. Here an example.</p>\n\n<p>String <code>Testname Testfile 21345 Anfragekennziffer 4519349 Teststring</code></p>\n\n<ul>\n<li>so, in this case I would like the script to catch the string \"Anfragekennziffer\" and to get the ID, which is here: <code>4519349</code>.</li>\n</ul>\n\n<p>I wrote a script so far, that get me the Ids but only if \"Anfragekennziffer\" is at the beginning in a line. E.g:</p>\n\n<pre><code>line 1 \"Anfragekennziffer4586268\" result: \"4586268\"\nline 2 \"Anfragekennziffer5686797\" result: \"5686797\"\n</code></pre>\n\n<p>E.G.</p>\n\n<p>An input file could have the following content:</p>\n\n<pre><code>da adad Anfragekennziffer 6797456\ndadad  Anfragekennziffer6453914\ndasdssss Anfragekennziffer6797433\ndddsaaa Anfragekennziffer6609572\naaa Anfragekennziffer2435282\nAnfragekennziffer 1234567\nAnfragekennziffer21415666\n</code></pre>\n\n<p>My script (see below) would get the following result:</p>\n\n<pre><code>'nnziffer6','nziffer645','ennziffer6','nnziffer66','ffer243528','1234567','21415666'\n</code></pre>\n\n<p>So, I would like the script to start at \"Anfragekennziffer\" and get me the ID - npo matter where Anfragekennziffer is located in the line.</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nno warnings 'uninitialized';\n\nmy $Source = \"Anfragekennziffer.txt\";\nmy $SQL1 = \"SQL_Confluence_Tabelle.txt\";\nmy $SQL2 = \"SQL_Provider_Antwort.txt\";\nmy $time = localtime;\n\nprint \"\\n\";\nprint \"Local date and time: $time\\n\";\nprint \"\\n\";\nprint \"IDs wurden \u00fcbertragen.\\n\";\nprint \"Folgende SQL-Statements wurden erstellt:\\n\";\nprint \"\\n\";\nprint \"'SQL_Confluence_Tabelle'\\n\";\nprint \"'SQL_Provider_Antwort'\\n\";\nprint \"\\n\";\n\nopen(QUELLE, \"$Source\") or die \"Open failed:$!\";\nopen(ZIEL1, \"&gt;$SQL1\") or die \"Open failed:$!\";\nopen(ZIEL2, \"&gt;$SQL2\") or die \"Open failed:$!\";\n\nmy $ids;\nmy $weg;\n\nwhile(my $row = &lt;QUELLE&gt;)\n{\n    if ($row =~m/Anfragekennziffer/)\n    {\n        $row=substr($row,17,10); #gebe nur IDs aus\n        $row=~ s/^\\s+|\\s+$//g; #l\u00f6scht Leerzeichen\n        $ids=$ids.\"'\".$row.\"',\"; #kumuliere IDs\n        $ids=~ s/\\r|\\n//g;\n    }\n}\n$weg=chop($ids);\n\nprint ZIEL1 \"$ids\";\n\nprint ZIEL2 \"$ids\";\nclose(QUELLE); \nclose(ZIEL1); \nclose(ZIEL2);\n</code></pre>\n\n<p>Would be great if someone  would have an idea!</p>\n\n<p>THANKS!</p>\n"}, {"tags": ["string", "perl", "newline"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545055407, "post_id": 53816783, "comment_id": 94481859, "body": "So, what is your code and how does it fail? Please <a href=\"https://stackoverflow.com/posts/53816783/edit\">edit</a> your question and add the relevant code."}, {"owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545055526, "post_id": 53816783, "comment_id": 94481932, "body": "I do not have a code, I really do not know how to do this"}, {"owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545056531, "post_id": 53816783, "comment_id": 94482512, "body": "I dont know if this edit help you, but i all i have..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545072966, "post_id": 53816783, "comment_id": 94491325, "body": "@raulvarga  As you saw it now, it does help when you show us what you have :).  I suggest to always do that: post your code.  (Also, in addition to being able to help you out people will often also offer other improvements.)"}], "answers": [{"tags": [], "owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "is_accepted": true, "score": 4, "last_activity_date": 1545076715, "last_edit_date": 1545076715, "creation_date": 1545058496, "answer_id": 53817708, "question_id": 53816783, "link": "https://stackoverflow.com/questions/53816783/remove-multiple-new-lines-from-a-string-in-perl/53817708#53817708", "title": "remove multiple new lines from a string in perl", "body": "<p>You're close, you need the modifier <code>g</code></p>\n\n<p>See the behavior of this program, the second print shows you what you want.</p>\n\n<p>You can see all the modifiers in <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">perlre</a> on perldoc.perl.org.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $val = &lt;&lt;'END';\ncity: London\nCode: 123\naddress: 1, Napoleon\nPhone: 123-123-1232\nEND\n\nprint $val;\n\n$val =~ s/\\n/ /g;\n\nprint $val;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 3, "last_activity_date": 1545073834, "creation_date": 1545073834, "answer_id": 53821618, "question_id": 53816783, "link": "https://stackoverflow.com/questions/53816783/remove-multiple-new-lines-from-a-string-in-perl/53821618#53821618", "title": "remove multiple new lines from a string in perl", "body": "<p>I think the transliterate operator would also do the trick:</p>\n\n<pre><code>$val =~ tr/\\n/ /;\n</code></pre>\n\n<p>Transliterate does a one-for-one mapping of characters, which means it's not as multi-purpose, but it does nicely for things like this.  It can also do cool things like:</p>\n\n<pre><code>$val =~ tr/\\n/ /s;\n</code></pre>\n\n<p>Where the \"s\" suffix means take any number of newline characters and replace them with a single space, in the event you have blank spaces -- like if the \"address line 2\" is optional and might be blank.</p>\n"}], "owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 53817708, "answer_count": 2, "score": 2, "last_activity_date": 1545076715, "creation_date": 1545055215, "last_edit_date": 1545056336, "question_id": 53816783, "link": "https://stackoverflow.com/questions/53816783/remove-multiple-new-lines-from-a-string-in-perl", "title": "remove multiple new lines from a string in perl", "body": "<p>I have a string like this:</p>\n\n<pre><code>city: London\nCode: 123\naddress: 1, Napoleon\nPhone: 123-123-1232\n</code></pre>\n\n<p>And all lines are in one string, and i want to print all information, but in one line with a separator.</p>\n\n<p>i tried with this code:</p>\n\n<pre><code>$val =~ s/\\n/\\ /;\n</code></pre>\n\n<p>but nothing.</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545054557, "post_id": 53816483, "comment_id": 94481377, "body": "Can you please <a href=\"https://stackoverflow.com/posts/53816483/edit\">edit</a> your post and add the (relevant) code here? Linking to off-site code doesn&#39;t help much with giving good answers."}], "answers": [{"comments": [{"owner": {"reputation": 2617, "user_id": 738503, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abb31c3924f1a156f26f8dfb522f4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/738503/sam"}, "edited": false, "score": 0, "creation_date": 1545118617, "post_id": 53821964, "comment_id": 94505022, "body": "Hi, thanks for your input. Unfortunately, i am dealing with this kind of malformed csv&#39;s. I have no control over the source of these files and they do come quoted, but not escaped. Yes... not escaped... I know it&#39;s a long shot trying to fix these files.."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 2617, "user_id": 738503, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abb31c3924f1a156f26f8dfb522f4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/738503/sam"}, "edited": false, "score": 0, "creation_date": 1545147515, "post_id": 53821964, "comment_id": 94520833, "body": "Oh wow...  Yeah, that&#39;s a different matter.  You probably need to write some code to cleanse the data.  To do this, you need to know a lot about the data -- how many fields, datatypes, etc and derive possible values from that.  I don&#39;t envy the task."}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 0, "last_activity_date": 1545075635, "creation_date": 1545075635, "answer_id": 53821964, "question_id": 53816483, "link": "https://stackoverflow.com/questions/53816483/fixing-newlines-within-csv-with-perl-textcsv-xs/53821964#53821964", "title": "Fixing newlines within CSV with perl Text::CSV_XS", "body": "<p>Your sample input looks like malformed csv -- I don't think what you listed can be parsed into proper CSV.  For example:</p>\n\n<pre><code>\"test\"and also newline\\nhere or something\";2;3;4;5;6\n\"this happens also! \"\\n here or something\";2;3;4;5;6\n</code></pre>\n\n<p>The \"quotes\" around data indicates everything contained therein may have special characters (the delimiter, newline character, etc), but when you close the quote here:</p>\n\n<pre><code>\"test\"and also newline\\nhere or something\";2;3;4;5;6\n     ^\n</code></pre>\n\n<p>You break that.  To embed a quote, you would need to put two quotes.  This would be properly formed:</p>\n\n<pre><code>\"test\"\"and also newline\\nhere or something\";2;3;4;5;6\n</code></pre>\n\n<p>Assuming the actual (rendered) text was <code>test\" and also...</code></p>\n\n<p>If I understand what you are trying to do -- replace newline characters with an HTML break, I think this would do the trick:</p>\n\n<pre><code>use Text::CSV_XS qw(csv);\n\nmy @rows;\n\nmy $csv = Text::CSV_XS-&gt;new({\n  binary =&gt; 1,\n  auto_diag =&gt; 1,\n  sep_char =&gt; ';'\n});\n\nopen my $IN, '&lt;:encoding(utf8)', \"test.csv\" or die;\nopen my $OUT, '&gt;:encoding(utf8)', \"new.csv\" or die;\nwhile (my $row = $csv-&gt;getline($IN)) {\n  s/\\n/&lt;br&gt;/g for @$row;\n  $csv-&gt;print ($OUT, $row);\n  print $OUT \"\\n\";\n}\nclose $OUT;\nclose $IN;\n</code></pre>\n\n<p>If this is the sample input:</p>\n\n<pre><code>a;b;c;d;e;f\n\"test\"\"ja ze\";2;3;4;5;6\n2;3;\"This Text has\na newline\";5;6;7\n3;4;5;6;7;8\n4;5;6;7;8;9\n</code></pre>\n\n<p>This would be the output:</p>\n\n<pre><code>a;b;c;d;e;f\n\"test\"\"ja ze\";2;3;4;5;6\n2;3;\"This Text has&lt;br&gt;a newline\";5;6;7\n3;4;5;6;7;8\n4;5;6;7;8;9\n</code></pre>\n\n<p>But again, this all assumes properly formed CSV data.</p>\n"}, {"comments": [{"owner": {"reputation": 2617, "user_id": 738503, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abb31c3924f1a156f26f8dfb522f4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/738503/sam"}, "edited": false, "score": 0, "creation_date": 1545377630, "post_id": 53857671, "comment_id": 94608346, "body": "Hi beasy, this is actually a nice solution since i am sure about how many columns a specific file has. However ; is not escaped so splitting on that character will not cause correct behaviour.   A very difficult line might be: &quot;foo&quot;;&quot;b&quot;\\nar&quot;;&quot;;&quot;foobar&quot;\\n  Yes... &quot;b&quot;\\nar&quot;;&quot;; is 1 column... How can anyone fix that?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 2617, "user_id": 738503, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abb31c3924f1a156f26f8dfb522f4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/738503/sam"}, "edited": false, "score": 0, "creation_date": 1545421080, "post_id": 53857671, "comment_id": 94626857, "body": "It may not be possible, unless you can identify some kind of pattern that lets you distinguish between columns"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1545246521, "last_edit_date": 1545246521, "creation_date": 1545246215, "answer_id": 53857671, "question_id": 53816483, "link": "https://stackoverflow.com/questions/53816483/fixing-newlines-within-csv-with-perl-textcsv-xs/53857671#53857671", "title": "Fixing newlines within CSV with perl Text::CSV_XS", "body": "<p>You might be able to parse the data without <code>Text::CSV</code> if your separation character (';') never needs to be escaped, and the number of columns in your rows are constant. Then you could clean it up as needed. However, you would need to know some Perl to clean up the cells as per your specific needs.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# slurp file into a string and split it\nopen my $fh,'&lt;',$ARGV[0];\n$/ = undef;\nmy @data = split ';', &lt;$fh&gt;;\n\nmy $columns = 6;\nmy @new_data;\n\n# splice 6 elements from the array at a time until the array is out of elements\nwhile (@data) {\n    my @row = splice @data, 0, $columns;\n    for my $cell (@row) {\n        # inspect / clean up $cell \n    }\n    push @new_data, \\@row; \n}\n\nfor my $row (@new_data) {\n    print join(';', @$row).\"\\n\"; \n}\n</code></pre>\n\n<p>Not that this will preserve all newlines in <code>$cell</code>, including at the end of each row.</p>\n"}], "owner": {"reputation": 2617, "user_id": 738503, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abb31c3924f1a156f26f8dfb522f4ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/738503/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545246521, "creation_date": 1545054200, "last_edit_date": 1545079265, "question_id": 53816483, "link": "https://stackoverflow.com/questions/53816483/fixing-newlines-within-csv-with-perl-textcsv-xs", "title": "Fixing newlines within CSV with perl Text::CSV_XS", "body": "<p>I'm trying to cleanup some csv files which have no escaping.</p>\n\n<p>I have no perl experience but scraping a few lines of code together from the examples of Text::CSV_XS i managed to get a working script, except for non escaped newlines.</p>\n\n<p><a href=\"https://gist.github.com/samvdb/761d12cb6e0275105a689ce25765496d\" rel=\"nofollow noreferrer\">https://gist.github.com/samvdb/761d12cb6e0275105a689ce25765496d</a></p>\n\n<pre><code>#!/usr/bin/perl\n\n# This script can be used as a base to parse unreliable CSV streams\n# Modify to your own needs\n#\n#      (m)'08 [23 Apr 2008] Copyright H.M.Brand 2008-2018\n\nuse strict;\nuse warnings;\n\nsub usage {\n    my $err = shift and select STDERR;\n    print &lt;&lt;\"EOH\";\nusage: $0 [-o file] [-s S] [file]\n    -o F  --out=F     output to file F (default STDOUT)\n    -s S  --sep=S     set input separator to S (default ; , TAB or |)\nEOH\n    exit $err;\n} # usage\n\nuse Getopt::Long qw(:config bundling);\nGetOptions (\n    \"help|?\"        =&gt; sub { usage (0); },\n    \"s|sep=s\"       =&gt; \\my $in_sep,\n    \"o|out=s\"       =&gt; \\my $opt_o,\n    ) or usage (1);\n\nuse Text::CSV_XS qw( csv );\n\nmy $io  = shift || \\*DATA;\nmy $eol = \"\\n\";\n\nbinmode STDOUT, \":encoding(utf-8)\";\n\nmy @hdr;\nmy @opt_i = (\n    in  =&gt; $io,\n    binary             =&gt; 1,\n    blank_is_undef     =&gt; 1,\n    allow_loose_quotes =&gt; 1,\n    allow_loose_escapes =&gt; 1,\n    sep =&gt; \";\",\n    encoding =&gt; \"utf16le\",\n    );\n\nmy @opt_o = (out =&gt; \\*STDOUT, eol =&gt; $eol, sep =&gt; \",\", quo =&gt; '\"',             always_quote  =&gt; 1,);\n\n\npush @opt_i,\n    bom          =&gt; 1,\n    sep_set      =&gt; [ $in_sep ],\n    keep_headers =&gt; \\@hdr;\npush @opt_o,\n    headers      =&gt; \\@hdr;\n\ncsv (in =&gt; csv (@opt_i), @opt_o);\n\n__END__\na;b;c;d;e;f\n\"test\"and also newline\\nhere or something\";2;3;4;5;6\n\"this happens also! \"\\n here or something\";2;3;4;5;6\n2;3;4;5;6;7\n3;4;5;6;7;8\n4;5;6;7;8;9\n</code></pre>\n\n<p>example input: </p>\n\n<pre><code>a;b;c;d;e;f\n\"test\"and also newline\\nhere or something\";2;3;4;5;6\n\"this happens also! \"\\n here or something\";2;3;4;5;6\n2;3;4;5;6;7\n3;4;5;6;7;8\n4;5;6;7;8;9\n</code></pre>\n\n<p>Expected result for line:</p>\n\n<pre><code>\"test\"\"and also newline&lt;br/&gt;here or something\";2;3;4;5;6\n\"this happens also! \"\"&lt;br/&gt; here or something\";2;3;4;5;6\n</code></pre>\n\n<p>Can someone help me fix this perl script so the replacement of \\n to <br/> happens?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545034836, "post_id": 53810850, "comment_id": 94470714, "body": "A good approach to see where a regular expression fails is to use <a href=\"https://metacpan.org/pod/Regexp::Debugger\" rel=\"nofollow noreferrer\">Regexp::Debugger</a> to step through the matching process. In your case, you expect only a negative timezone offset but not a timezone offset with <code>+</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": 0, "last_activity_date": 1545035735, "creation_date": 1545035735, "answer_id": 53811423, "question_id": 53810850, "link": "https://stackoverflow.com/questions/53810850/why-does-this-regexp-not-match/53811423#53811423", "title": "Why does this regexp not match?", "body": "<p>The main problem of your regex is that it does not take into account the <code>+08:00</code> present in your <code>$line</code>. </p>\n\n<p>Change it in into:</p>\n\n<pre><code>\\A(?:(\\d{6}\\s+\\d{1,2}:\\d\\d:\\d\\d|\\d{4}-\\d{1,2}-\\d{1,2}T\\d\\d:\\d\\d:\\d\\d\\.\\d+(?:Z|-?\\d\\d:\\d\\d)?))?(?:\\+\\d\\d:\\d\\d)?\\s+(?:\\s*(\\d+))\\s+(\\w+)\\s+(.*)\\Z\n</code></pre>\n\n<p><strong>demo:</strong></p>\n\n<p><a href=\"https://regex101.com/r/fgRCv1/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/fgRCv1/3</a></p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1545038440, "post_id": 53811478, "comment_id": 94472546, "body": "What version of Perl is needed for branch reset groups?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1545038548, "post_id": 53811478, "comment_id": 94472595, "body": "@ysth <a href=\"https://perldoc.perl.org/perlre.html#(%3f%7cpattern)\" rel=\"nofollow noreferrer\"><i>It is available starting from perl 5.10.0.</i></a>"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1545036260, "last_edit_date": 1545036260, "creation_date": 1545035909, "answer_id": 53811478, "question_id": 53810850, "link": "https://stackoverflow.com/questions/53810850/why-does-this-regexp-not-match/53811478#53811478", "title": "Why does this regexp not match?", "body": "<p>You have <code>+08:00</code> in your input, but <code>-?</code> in <code>(?:Z|-?\\d\\d:\\d\\d)?</code> only accounts for a negative value or values with no sign. </p>\n\n<p>Thus, on the first regex line, you should replace <code>-?</code> with <code>[+-]?</code> to match an optional <code>-</code> <em>or</em> <code>+</code>. Also, since <code>+08:00</code> part should not be part of Group 1, I suggest using a <em>branch reset group</em>, <code>(?|...|...)</code>, to capture different parts inside the group into the same group, Group 1:</p>\n\n<pre><code>(?|(\\d{6}\\s+\\d{1,2}:\\d\\d:\\d\\d)|(\\d{4}-\\d{1,2}-\\d{1,2}T\\d\\d:\\d\\d:\\d\\d\\.\\d+)(?:Z|[-+]?\\d\\d:\\d\\d)?)?\n ^^^                         ^ ^                                         ^     ^^^^         \n</code></pre>\n\n<p>Fixed pattern:</p>\n\n<pre><code>my $genlog_line_1= qr{\n   \\A\n   (?|(\\d{6}\\s+\\d{1,2}:\\d\\d:\\d\\d)|(\\d{4}-\\d{1,2}-\\d{1,2}T\\d\\d:\\d\\d:\\d\\d\\.\\d+)(?:Z|[-+]?\\d\\d:\\d\\d)?)? # Timestamp\n   \\s+\n   (?:\\s*(\\d+))                     # Thread ID\n   \\s\n   (\\w+)                            # Command\n   \\s+\n   (.*)                             # Argument\n   \\Z\n}xs;\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/0CSrMu/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>Note the <code>?</code>  after the brach reset group might not be necessary if the TIMESTAMP is always present in the input.</p>\n"}], "owner": {"reputation": 63, "user_id": 10384413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-u2cu1b8cGoo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP3w7OIqhpkYu0vD51uhisE_xcGRA/mo/photo.jpg?sz=128", "display_name": "wayuki", "link": "https://stackoverflow.com/users/10384413/wayuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 53811478, "answer_count": 2, "score": 1, "last_activity_date": 1545036260, "creation_date": 1545032841, "last_edit_date": 1545036247, "question_id": 53810850, "link": "https://stackoverflow.com/questions/53810850/why-does-this-regexp-not-match", "title": "Why does this regexp not match?", "body": "<pre><code>my $genlog_line_1= qr{\n   \\A\n   (?:(\\d{6}\\s+\\d{1,2}:\\d\\d:\\d\\d|\\d{4}-\\d{1,2}-\\d{1,2}T\\d\\d:\\d\\d:\\d\\d\\.\\d+(?:Z|-?\\d\\d:\\d\\d)?))? # Timestamp\n   \\s+\n   (?:\\s*(\\d+))                     # Thread ID\n   \\s\n   (\\w+)                            # Command\n   \\s+\n   (.*)                             # Argument\n   \\Z\n}xs;\n\nmy $line = \"2018-12-14T17:32:52.236100+08:00        477637459 Query SELECT dv.mandatory,dv.optional FROM dbversion dv\";\n\nmy ($ts, $thread_id, $cmd, $arg) = $line =~ m/$genlog_line_1/;\n\nprint $ts, $thread_id, $cmd, $arg;\n</code></pre>\n\n<p>Why does the regexp not match? What I expect is:</p>\n\n<pre><code>Timestamp 2018-12-14T17:32:52.236100\nthread_id 477637459 \ncmd Query \narg  SELECT dv.mandatory,dv.optional FROM dbversion dv\n</code></pre>\n"}, {"tags": ["perl", "bioinformatics"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1545036741, "post_id": 53810848, "comment_id": 94471576, "body": "There are many ways to do this, you could e.g. use command line parameters, environment variables, or a config file. What is the &quot;bioinformatics&quot; tag about?"}, {"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1545037805, "post_id": 53810848, "comment_id": 94472172, "body": "Because I am student of bioinformatics and may be other bioinformatician can help me that&#39;s why"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "edited": false, "score": 0, "creation_date": 1545046334, "post_id": 53812719, "comment_id": 94476845, "body": "Thank you. Its working properly"}, {"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "edited": false, "score": 0, "creation_date": 1545046700, "post_id": 53812719, "comment_id": 94477030, "body": "But if there is a shell script link with this Perl Script and I want to use this user define path in Perl script and also in Shell script. what changes are required?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "edited": false, "score": 2, "creation_date": 1545046796, "post_id": 53812719, "comment_id": 94477089, "body": "@RochiSaurabh: If you have further requirements that you omitted from this question, then it&#39;s best to post a new question with full details."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1545040480, "creation_date": 1545040480, "answer_id": 53812719, "question_id": 53810848, "link": "https://stackoverflow.com/questions/53810848/how-to-save-user-define-path-into-a-variable/53812719#53812719", "title": "How to save user define path into a variable?", "body": "<p>What you're describing here is the standard behaviour of a variable. So I have to wonder if I'm missing something.</p>\n\n<pre><code>my $default_path = '/the/default/path';\n\nprint \"Enter your path [$default_path]: \";\nchomp(my $user_path = &lt;STDIN&gt;);\n\nmy $path = $user_path // $default_path;\n\nprint \"The path we'll use is: $path\";\n\n# And then, much later in the program...\n\nmy $filename = 'somefile.txt';\nopen my $fh, '&gt;', \"$path/$filename\"\n  or die \"Cannot open $path/$filename: $!\";\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1545041362, "accepted_answer_id": 53812719, "answer_count": 1, "score": 1, "last_activity_date": 1545040480, "creation_date": 1545032834, "question_id": 53810848, "link": "https://stackoverflow.com/questions/53810848/how-to-save-user-define-path-into-a-variable", "closed_reason": "Needs more focus", "title": "How to save user define path into a variable?", "body": "<p>How  to save user define path into a variable  in Perl and use that variable in other places in script so if user gives a new path it will update the path each place where that variable is used.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1545021215, "post_id": 53808936, "comment_id": 94466375, "body": "no this is different - there is something going on with the while loop and I don wane to include the start text - just what is in between the key words"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1545022069, "post_id": 53808936, "comment_id": 94466580, "body": "Are there multiple question/answer blocks in your text file? Do you want a flash block printed for each one?"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1545022364, "post_id": 53808936, "comment_id": 94466647, "body": "for the file shown, it prints a bunch of block - I just want one."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1545022483, "post_id": 53808936, "comment_id": 94466675, "body": "Thanks--I understand that, but is your file only one question and answer as shown, or are there multiple questions and answers?"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1545022619, "post_id": 53808936, "comment_id": 94466696, "body": "one question one answer"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 0, "last_activity_date": 1545024704, "last_edit_date": 1545024704, "creation_date": 1545024241, "answer_id": 53809382, "question_id": 53808936, "link": "https://stackoverflow.com/questions/53808936/perl-grabbing-text-between-two-keywords/53809382#53809382", "title": "perl grabbing text between two keywords", "body": "<p>Your approach involves reading the file line by line, but your regex is attempting to grab multiple lines between a question/answer's start and end. No lines in your file will match such a multiline regex and you'll ultimately wind up with uninitialized <code>$question</code> and <code>$answer</code> variables and a block/warning printed for each line in your file. </p>\n\n<p>It makes sense to read the whole text file into a string, then split it on question/answer blocks and trim contents (if desired):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'file.txt' or die \"Can't open file $!\";\nmy @qa = grep(/\\w+/g, split /^(questionstart|answerstart|questionend|answerend)$/mg, do {local $/; &lt;$fh&gt;});\ns/^\\s+|\\s+$//g foreach @qa;\n\nmy $flashblock = &lt;&lt; \"FLASH\";\n&lt;!-- BEGIN --&gt;\n&lt;p class=\"question\"&gt;\n    $qa[0]\n&lt;/p&gt;\n&lt;p class=\"answer\"&gt;\n    $qa[1]\n&lt;/p&gt;\n&lt;!-- END --&gt;\nFLASH\n\nprint $flashblock;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;!-- BEGIN --&gt;\n&lt;p class=\"question\"&gt;\n    hellphellohellohello\n&lt;/p&gt;\n&lt;p class=\"answer\"&gt;\n    hellohellohello\n&lt;/p&gt;\n&lt;!-- END --&gt;\n</code></pre>\n\n<p>If you have multiple question/answer pairs in one file, you can loop over the <code>@qa</code> array and print pairs or put them into a hash and use as desired.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1545263981, "last_edit_date": 1545263981, "creation_date": 1545026194, "answer_id": 53809645, "question_id": 53808936, "link": "https://stackoverflow.com/questions/53808936/perl-grabbing-text-between-two-keywords/53809645#53809645", "title": "perl grabbing text between two keywords", "body": "<p>Since the file is read line by line the sought phrase, that spans multiple lines, can never matched.</p>\n\n<p>One basic approach to resolve this is to have flags for question and answer regions. Since you have very clear markers for entering and leaving these regions the code is really simple</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($question, $answer);\nmy ($in_Q, $in_A);\n\nwhile (my $line = &lt;&gt;) {\n    next if $line =~ /^\\s*$/;\n\n    if    ($line =~ /^\\s*questionstart/) { $in_Q = 1; next }   \n    elsif ($line =~ /^\\s*questionend/)   { $in_Q = 0; next }   \n    elsif ($line =~ /^\\s*answerstart/)   { $in_A = 1; next }   \n    elsif ($line =~ /^\\s*answerend/)     { $in_A = 0; next }       \n\n    if    ($in_Q) { $question .= $line }\n    elsif ($in_A) { $answer   .= $line }\n}\n\nsay \"Question: $question\";\nsay \"Answer: $answer\";\n</code></pre>\n\n<p>(I condensed <code>if-elsif</code> statements only for brevity and emphasis here)</p>\n\n<p>This code makes some reasonable assumptions about the input file. I require the markers to start the line (with possible spaces), but allow for more text following them.  If you want to make sure that they are the only thing on the line add the <code>$</code> anchor at the end of regex (again with <code>\\s*</code>).</p>\n\n<p>It is stated that input has one Q/A. If it ever changes to multiple ones then move the prints inside the loop, once the answer-end comes so under <code>elsif (/^\\s*answerend/) { .. }</code></p>\n\n<p>The printing in the question is fine so I don't repeat it here. If there is ever a chance to print format other than HTML, then clean up the resulting strings from leading and trailing spaces, multiple spaces, and newlines.</p>\n\n<hr>\n\n<p>The repeated tests on the same variable may lead one to seek a case-type construct, what in Perl would be <a href=\"https://perldoc.perl.org/perlsyn.html#Switch-Statements\" rel=\"nofollow noreferrer\">switch</a>. However, that is still an experimental feature, which operates in a way which</p>\n\n<blockquote>\n  <p>is hard to describe precisely</p>\n</blockquote>\n\n<p>(documentation!).  Further, it may also get <em>smart matching</em> involved, which is plain hard to describe, widely understood to be broken in its current form, and certain to be changed. So I recommend to stick with cascading if-elsif statements (in this approach).</p>\n"}, {"comments": [{"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1545073616, "post_id": 53812607, "comment_id": 94491626, "body": "The other answer are great - but this one seems the easiest."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1545045277, "last_edit_date": 1545045277, "creation_date": 1545040066, "answer_id": 53812607, "question_id": 53808936, "link": "https://stackoverflow.com/questions/53808936/perl-grabbing-text-between-two-keywords/53812607#53812607", "title": "perl grabbing text between two keywords", "body": "<p>As others have pointed out, a multi-line regex is never going to work when you're reading your input file a line at a time.</p>\n\n<p>This is a perfect use for Perl \"flip/flop\" operator (<code>..</code>).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy ($question, $answer);\n\nwhile (&lt;DATA&gt;) {\n  if (/questionstart/ .. /questionend/ and ! /question(start|end)/) {\n    $question .= $_;\n  }\n\n  if (/answerstart/ .. /answerend/ and ! /answer(start|end)/) {\n    $answer .= $_;\n  }\n\n  # If we're at the end of an answer, do all the stuff\n  if (/answerend/) {\n    q_and_a($question, $answer);\n\n    # reset text variables\n    $question = $answer = '';\n  }\n}\n\nsub q_and_a {\n  my ($q, $a) = @_;\n\n  print &lt;&lt;\"FLASH\";\n&lt;!-- BEGIN --&gt;\n&lt;p class=\"question\"&gt;\n  $question\n&lt;/p&gt;\n&lt;p class=\"answer\"&gt;\n   $answer\n&lt;/p&gt;\n&lt;!-- END --&gt;\nFLASH\n}\n\n__DATA__\nquestionstart\n\nhellphellohellohello\n\n\nquestionend\n\nanswerstart\n\nhellohellohello\n\nanswerend\n</code></pre>\n\n<p><strong>Update:</strong> Moved the display into a subroutine to make the main loop cleaner.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 53812607, "answer_count": 3, "score": 2, "last_activity_date": 1545263981, "creation_date": 1545020584, "question_id": 53808936, "link": "https://stackoverflow.com/questions/53808936/perl-grabbing-text-between-two-keywords", "title": "perl grabbing text between two keywords", "body": "<p>I am trying to read in the text between two keywords. Not really working though. All I want is to read in the question and answer and then have it print out. It does not work, just keeps on printing out a really big loop. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict ;\nuse warnings;\nmy $question ;\nmy $answer ;\n\nwhile(my $line = &lt;&gt;){\nchomp $line ;\n\nif ($line =~ /questionstart(.*)questionend/) {\n    $question = $1 ; }\nelsif ($line  =~ /answerstart(.*)answerend/) {\n    $answer = $1 ; }\n\nmy $flashblock = &lt;&lt;\"FLASH\" ;\n&lt;!-- BEGIN --&gt;\n&lt;p class=\"question\"&gt;\n  $question\n&lt;/p&gt;\n&lt;p class=\"answer\"&gt;\n   $answer\n&lt;/p&gt;\n&lt;!-- END --&gt;\nFLASH\nprint $flashblock ;\n}\n</code></pre>\n\n<p>This is a sample of the file </p>\n\n<pre><code>questionstart\n\nhellphellohellohello\n\n\nquestionend\n\nanswerstart\n\nhellohellohello\n\nanswerend\n</code></pre>\n"}, {"tags": ["javascript", "regex", "perl", "whitespace", "transpiler"], "comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1544998476, "post_id": 53806745, "comment_id": 94462554, "body": "Updated the question: This question is specifically about a transpiler or transpiler extension. RegExp() is object-creation is massively slower and constructs the RegExp on each iteration."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544998825, "post_id": 53806745, "comment_id": 94462629, "body": "Just use the JS equivalent of Perl&#39;s <code>state re = qr&#47;...&#47;;</code>, which would be something along the lines of <code>persistent_var ||= new RegExp(...);</code>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1544999393, "post_id": 53806745, "comment_id": 94462731, "body": "If you&#39;re specifically asking for a tool, then this is off topic anyway."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544999462, "post_id": 53806745, "comment_id": 94462742, "body": "@ikegami that incurs a runtime compilation cost every time the pattern is encountered which is pretty substantial."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544999549, "post_id": 53806745, "comment_id": 94462760, "body": "No, the cost only occurs once."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544999562, "post_id": 53806745, "comment_id": 94462764, "body": "@ikegami <a href=\"http://javascript-benchmark.info/NhN\" rel=\"nofollow noreferrer\"><b>benchmark</b></a>"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1545001737, "post_id": 53806745, "comment_id": 94463157, "body": "My bad. That I didn&#39;t see. That would work to do what I want as a workaround. I&#39;m going to see if I can write that into a transpiler and self-answer with that. You want to write that as an answer, I&#39;ll mark it for now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545002501, "post_id": 53806745, "comment_id": 94463297, "body": "Hmmm, did you post the wrong link? That doesn&#39;t use my solution. <a href=\"http://javascript-benchmark.info/ThN/1\" rel=\"nofollow noreferrer\">Fixed benchmark</a>"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545018538, "post_id": 53806745, "comment_id": 94465873, "body": "@ikegami as a side note, there are some differences from regex-literal notations and RegExp objects <a href=\"https://stackoverflow.com/a/17863171/124486\">stackoverflow.com/a/17863171/124486</a>"}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "is_accepted": true, "score": 1, "last_activity_date": 1545005913, "creation_date": 1545005913, "answer_id": 53807661, "question_id": 53806745, "link": "https://stackoverflow.com/questions/53806745/javascript-regex-transpiler/53807661#53807661", "title": "JavaScript regex transpiler?", "body": "<p>I believe you're looking for something exactly like this: <a href=\"https://www.npmjs.com/package/babel-plugin-transform-modern-regexp\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/babel-plugin-transform-modern-regexp</a></p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 53807661, "answer_count": 1, "score": 0, "last_activity_date": 1545005913, "creation_date": 1544996610, "last_edit_date": 1544998268, "question_id": 53806745, "link": "https://stackoverflow.com/questions/53806745/javascript-regex-transpiler", "title": "JavaScript regex transpiler?", "body": "<p><strong>This question is specifically about a transpiler or transpiler extension. <code>RegExp()</code> is object-creation is <a href=\"http://javascript-benchmark.info/NhN\" rel=\"nofollow noreferrer\">massively slower and constructs the RegExp on each iteration</a>.</strong></p>\n\n<p>It seems JavaScript does't permit insensitive whitespace in its regex. Is there any transpiler for JavaScript that permits something like <code>/x</code> from perl, in the Regex.</p>\n\n<blockquote>\n  <p><code>/x</code> and  <code>/xx</code> A single \"/x\" tells the regular expression parser to <strong>ignore most\n      whitespace that is neither backslashed nor within a bracketed character\n      class.</strong> You can use this to break up your regular expression into more\n      readable parts. Also, the \"#\" character is treated as a metacharacter\n      introducing a comment that runs up to the pattern's closing delimiter, or\n      to the end of the current line if the pattern extends onto the next line.\n      Hence, this is very much like an ordinary Perl code comment. (You can\n      include the closing delimiter within the comment only if you precede it\n      with a backslash, so be careful!)</p>\n</blockquote>\n\n<p>This allows you to write something like</p>\n\n<pre><code>let res = name.match(/^([^\\d]*?)(?:\\s*[.,]\\s*([0-9]+)(?: mo)?)?[.,]?$/);\n</code></pre>\n\n<p>Like this,</p>\n\n<pre><code>let res = name.match(/\n  ^\n  ([^\\d]*?)                       # name\n  (?:\\s*[.,]\\s*([0-9]+)(?: mo)?)? # age, mo\n  [.,]?                           # trailing dirt\n  $\n /);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1544997478, "post_id": 53806641, "comment_id": 94462313, "body": "How exactly have you tested what was in PERL5LIB and what was in @INC?"}, {"owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "edited": false, "score": 0, "creation_date": 1544997704, "post_id": 53806641, "comment_id": 94462369, "body": "Yes, please test by data dumping @INC like so:  <code>perl -e &#39;use Data::Dumper; print Dumper(\\@INC), &quot;\\n&quot;&#39;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545005021, "post_id": 53806641, "comment_id": 94463712, "body": "You need to show your script and how you&#39;re running it. In short, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545080909, "post_id": 53806641, "comment_id": 94494736, "body": "I didn&#39;t read the Q carefully -- yes, you run v5.26.2 and use module installed for v5.14.2 what isn&#39;t right (as my now deleted comment said), but that wouldn&#39;t cause the error you report. On the other hand, your actual run indeed doesn&#39;t get that <code>PERL5LIB</code> as you susspected"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545081995, "post_id": 53806641, "comment_id": 94495127, "body": "It seems that altogether you only need to install <code>HTML::Entities</code> under the perl you want to use, v5.26.2."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545081339, "post_id": 53807669, "comment_id": 94494884, "body": "This doesn&#39;t help at all. <code>&#47;opt&#47;perl&#47;lib&#47;site_perl&#47;5.14.2&#47;x86_64-linux-thread-multi&#47;HTM&zwnj;&#8203;L</code> is not in the error message, so the problem is not that <code>&#47;opt&#47;perl&#47;lib&#47;site_perl&#47;5.14.2&#47;x86_64-linux-thread-multi&#47;HTM&zwnj;&#8203;L</code> instead of <code>&#47;opt&#47;perl&#47;lib&#47;site_perl&#47;5.14.2&#47;x86_64-linux-thread-multi</code>. In fact, what you are suggesting is harmful. You should not provided a path that contains modules installed using 5.14 to a 5.26 build of Perl!!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545081437, "post_id": 53807669, "comment_id": 94494919, "body": "This won&#39;t cause the reported error as @ikegami says, but it does raise other valid problems -- while it needs to solve them both (not use a wrong-version path while solving the first problem). I&#39;d suggest to edit so to include a correct-version path, and perhaps add a comment to state that these are yet other errors? (So the readers don&#39;t neglect it once they see that it doesn&#39;t solve the problem.)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1545007781, "last_edit_date": 1545007781, "creation_date": 1545006045, "answer_id": 53807669, "question_id": 53806641, "link": "https://stackoverflow.com/questions/53806641/cant-update-inc-with-export-perl5lib/53807669#53807669", "title": "Can&#39;t update @INC with export PERL5LIB", "body": "<p><code>use HTML::Entities</code> looks for a file <code>HTML/Entities.pm</code> in the directories in <code>@INC</code>. No such path is found because it's looking for ones like <code>/opt/perl/lib/site_perl/5.14.2/x86_64-linux-thread-multi/HTML/HTML/Entities.pm</code>.</p>\n\n<p>Leave off the <code>HTML/</code> part in the directory you're trying to add to the search path and you might have better luck.</p>\n\n<p>Edit: There's still the version mismatch, but as long as the module is pure Perl without any XS components I don't <em>think</em> that will be a big problem. Still better to get it in the right path for the version of perl you're actually using. Do that and you shouldn't have to manipulate the search path at all.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1545079745, "creation_date": 1545079745, "answer_id": 53822785, "question_id": 53806641, "link": "https://stackoverflow.com/questions/53806641/cant-update-inc-with-export-perl5lib/53822785#53822785", "title": "Can&#39;t update @INC with export PERL5LIB", "body": "<p>Two possibilities:</p>\n\n<ul>\n<li>Either the <code>PERL5LIB</code> env var wasn't set in the parent of the <code>perl</code> process giving the error (e.g. you launched it from a web server), or</li>\n<li>The <code>-T</code> command line switch was provided to <code>perl</code> process giving the error (since this causes <code>PERL5LIB</code> to be ignored).</li>\n</ul>\n\n<p>In either case, you can use <code>use lib</code> in the source instead of <code>PERL5LIB</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1545110895, "last_edit_date": 1545110895, "creation_date": 1545085099, "answer_id": 53823799, "question_id": 53806641, "link": "https://stackoverflow.com/questions/53806641/cant-update-inc-with-export-perl5lib/53823799#53823799", "title": "Can&#39;t update @INC with export PERL5LIB", "body": "<p>This is to summarize the problems and state what seems to be the simplest solution.</p>\n\n<p>From the output of your test one-liner it is clear that a module installed under v5.14.2 is used in a program meant to run under v5.26.2. That is not good, even if it happens to work.</p>\n\n<p>So install <code>HTML::Entities</code> under the perl build that needs it, v5.26.2.</p>\n\n<p>That also solves the problem you are asking about, since then you won't have to muck about with <code>PERL5LIB</code> or anything else.</p>\n\n<p>Further, the <code>@INC</code> in your one-liner test clearly <em>isn't</em> loaded in your real run, just as you suspected. Possible reasons are given in ikegami's answer, as well as the solution, to <code>use lib \"...\";</code>.  But then you need to use the module version installed for v5.26.2, and once you installed it with that perl there'll actually be no need to specify extra library paths.</p>\n\n<p>Finally, if you end up needing to add that path for some reason, leave off the <code>HTML</code> (last) directory, as Shawn's answer indicates. With <code>use HTML::Entities</code> the directory <code>HTML</code> will be searched (for <code>Entities.pm</code> file) and you only need to provide the directory that contains it.</p>\n"}], "owner": {"reputation": 69, "user_id": 7506406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3134efc1aae54493d20f7867dacc701?s=128&d=identicon&r=PG&f=1", "display_name": "Helen K.", "link": "https://stackoverflow.com/users/7506406/helen-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 53822785, "answer_count": 3, "score": 2, "last_activity_date": 1545110895, "creation_date": 1544995762, "last_edit_date": 1545079594, "question_id": 53806641, "link": "https://stackoverflow.com/questions/53806641/cant-update-inc-with-export-perl5lib", "title": "Can&#39;t update @INC with export PERL5LIB", "body": "<p>I'm trying to add the HTML::Entities module path to <code>@INC</code>. I did export <code>PERL5LIB=/mypath/HTML/</code> followed by <code>source ~/.bashrc</code>. That path is reflected in <code>PERL5LIB</code>, but not in <code>@INC</code>. Is there an additional step that I'm missing?</p>\n\n<p>I'm using perl 5.26.2 on CentOS6.5</p>\n\n<p>Edit:</p>\n\n<p>I (wrongly) assumed that my path wasn't being added to @INC because when I run my perl script I get</p>\n\n<pre><code>Can't locate HTML/Entities.pm in @INC (you may need to install the HTML::Entities module)\n(@INC contains:\n/home/hek/anaconda3/bin/aux/lib/perl5\n/home/hek/anaconda3/lib/site_perl/5.26.2/x86_64-linux-thread-multi\n/home/hek/anaconda3/lib/site_perl/5.26.2\n/home/hek/anaconda3/lib/5.26.2/x86_64-linux-thread-multi\n/home/hek/anaconda3/lib/5.26.2\n)\n</code></pre>\n\n<p>(Line breaks added for readability)</p>\n\n<p>But it does appear below</p>\n\n<pre><code>echo $PERL5LIB\n/opt/rh/devtoolset-2/root//usr/lib64/perl5/vendor_perl:/opt/rh/devtoolset-2/root/usr/lib/perl5:/opt/rh/devtoolset-2/root//usr/share/perl5/vendor_perl:/opt/perl/lib/site_perl/5.14.2/x86_64-linux-thread-multi/HTML/\n\nperl -e 'use Data::Dumper; print Dumper(\\@INC), \"\\n\"'\n$VAR1 = [\n          '/opt/rh/devtoolset-2/root//usr/lib64/perl5/vendor_perl',\n          '/opt/rh/devtoolset-2/root/usr/lib/perl5',\n          '/opt/rh/devtoolset-2/root//usr/share/perl5/vendor_perl',\n          '/opt/perl/lib/site_perl/5.14.2/x86_64-linux-thread-multi/HTML/',\n          '/home/hek/anaconda3/lib/site_perl/5.26.2/x86_64-linux-thread-multi',\n          '/home/hek/anaconda3/lib/site_perl/5.26.2',\n          '/home/hek/anaconda3/lib/5.26.2/x86_64-linux-thread-multi',\n          '/home/hek/anaconda3/lib/5.26.2',\n          '.'\n        ];\n</code></pre>\n\n<p>Why would there be this discrepency?</p>\n\n<p>I do have multiple versions of perl installed, but <code>which perl</code> returns the version that I need to use, <code>~/anaconda3/bin/perl</code>.</p>\n\n<p>I tried changing the shebang in my script from <code>#!/usr/bin/env perl</code> to <code>#!/~/anaconda3/bin/perl</code>, but that didn't help.</p>\n"}, {"tags": ["perl", "apache-spark"], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "is_accepted": false, "score": 1, "last_activity_date": 1544937279, "creation_date": 1544937279, "answer_id": 53799625, "question_id": 53799289, "link": "https://stackoverflow.com/questions/53799289/perl-api-for-apache-spark/53799625#53799625", "title": "perl API for Apache Spark?", "body": "<p>It appears there is indeed no Perl API on CPAN or otherwise. What I've observed others doing is calling Perl scripts from Scala : <a href=\"https://wiki.ufal.ms.mff.cuni.cz/spark:recipes:using-perl-via-pipes\" rel=\"nofollow noreferrer\">https://wiki.ufal.ms.mff.cuni.cz/spark:recipes:using-perl-via-pipes</a></p>\n\n<p>The documentation at <a href=\"https://spark.apache.org/docs/latest/rdd-programming-guide.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/rdd-programming-guide.html</a> says in regards to pipes: </p>\n\n<blockquote>\n  <p>Pipe each partition of the RDD through a shell command, e.g. a Perl or bash script. RDD elements are written to the process's stdin and lines output to its stdout are returned as an RDD of strings. </p>\n</blockquote>\n\n<p>It should be noted that python is support is via a <a href=\"https://github.com/apache/spark/blob/master/python/pyspark/java_gateway.py\" rel=\"nofollow noreferrer\">java gateway</a>.</p>\n\n<p>The equivalent could be done in Perl using a distro such as <a href=\"https://metacpan.org/pod/Java\" rel=\"nofollow noreferrer\">Java</a>.</p>\n"}], "owner": {"reputation": 109, "user_id": 425909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ea355dd4e5244c2b72870309ea5aa1e?s=128&d=identicon&r=PG", "display_name": "user425909", "link": "https://stackoverflow.com/users/425909/user425909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544937279, "creation_date": 1544932401, "question_id": 53799289, "link": "https://stackoverflow.com/questions/53799289/perl-api-for-apache-spark", "title": "perl API for Apache Spark?", "body": "<p>I'm a longtime perl developer and I've been told to \"go learn Apache Spark\".\nSo my plan is, 1) figure out what Apache spark is, 2) figure out how to\ntalk to it with perl.  We are early in the process here...</p>\n\n<p>I see a lot of web pages like\n<a href=\"https://www.kdnuggets.com/2018/05/apache-spark-python-scala.html\" rel=\"nofollow noreferrer\">https://www.kdnuggets.com/2018/05/apache-spark-python-scala.html</a>\nthat say \"Though Spark has API\u2019s for Scala, Python, Java\nand R but the popularly used languages are the former two.\"</p>\n\n<p>Nowhere have I found anything about a perl API for Spark -- searching CPAN turned up\na couple things with 'Spark' in the name, but nothing actually relevant.\nThis is perplexing ... how can one of the most popular APIs for Spark be\nPython-oriented, yet for perl there's nothing out there?</p>\n\n<p>I'm having trouble accepting that \"you can only talk to Spark via Python,\nnot perl\", but that's where I'm at so far.  So my question is, how is the perl\ncommunity interfacing with Apache Spark, and how does this facility compare to\nthe Python facility, in terms of feature-completeness?</p>\n"}, {"tags": ["perl", "trace", "call-graph"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 2, "creation_date": 1544925858, "post_id": 53798816, "comment_id": 94447297, "body": "This code won&#39;t work. The last line should be <code>A::_x()</code> instead of just <code>_x()</code>"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 1, "creation_date": 1544953877, "post_id": 53798816, "comment_id": 94450866, "body": "Hmm, code is working at my side, no errors."}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1544955496, "post_id": 53799183, "comment_id": 94451211, "body": "thanks for answer, but your code has syntax error near &quot;)[&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1544965477, "post_id": 53799183, "comment_id": 94453530, "body": "@PaulSerikov, Fixed"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544965535, "post_id": 53799183, "comment_id": 94453542, "body": "Note that this will greatly slow down the program."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544965617, "post_id": 53799183, "comment_id": 94453563, "body": "This will print the subs multiple times each, even multiple times per call. Adding  <code>|| !$seen{$_}++</code> to the <code>if</code> will do it."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1544999399, "last_edit_date": 1544999399, "creation_date": 1544930740, "answer_id": 53799183, "question_id": 53798816, "link": "https://stackoverflow.com/questions/53798816/how-can-i-print-all-executed-subroutines/53799183#53799183", "title": "How can I print all executed subroutines?", "body": "<p>Thinking about debugging modules puts you on the right track. When debug mode is enabled, Perl calls the function <code>DB::DB()</code> at every execution step in your program. From here you can extract the subroutine name from the <code>caller</code> builtin (which will include the package name), and output it as you see fit.</p>\n\n<p>Start with a file called <code>Devel/AllSubs.pm</code> somewhere in your <code>@INC</code> path:</p>\n\n<pre><code>package Devel::AllSubs;\nmy $count = 0;\nmy $last_sub = '::';\nsub DB::DB {\n    my ($pkg, $file, $line,$sub) = caller(1);\n    if ($sub ne $last_sub) {\n        print STDERR ++$count,\" $sub\\n\";\n        $last_sub = $sub;\n    }\n}\n1;\n</code></pre>\n\n<p>And then run your program as</p>\n\n<pre><code>$ perl -d:AllSubs script.pl\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>1 A::_x\nHello world!\n2 B::_y\nJust Another Perl Hacker\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1545004826, "creation_date": 1545004826, "answer_id": 53807568, "question_id": 53798816, "link": "https://stackoverflow.com/questions/53798816/how-can-i-print-all-executed-subroutines/53807568#53807568", "title": "How can I print all executed subroutines?", "body": "<p>It can be done with the standard perl debugger:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ PERLDB_OPTS=\"NonStop frame=1\" perl -d prog.pl\n  entering CODE(0x260cd78)\n   entering strict::import\n  entering CODE(0x260cd18)\n   entering warnings::import\nPackage try.pl.\n  entering DB::Obj::_init\n  entering A::_x\nHello world!\n   entering B::_y\nJust Another Perl Hacker\n</code></pre>\n\n<p>(Note that I had to change <code>_x();</code> to <code>A::_x();</code> to get your code to run.)</p>\n\n<p>If you want to place the output in a file, add <code>LineInfo=filenamehere</code>. See <a href=\"https://perldoc.pl/perldebug\" rel=\"nofollow noreferrer\"><code>perldoc perldebug</code></a> for details. (In particular, if you change the options to say <code>frame=2</code>, you also get messages for returning from subroutines.)</p>\n\n<p>The <code>CODE</code> references are for the implicit <code>BEGIN</code> blocks around <code>use</code> statements:</p>\n\n<pre><code>use strict;\n</code></pre>\n\n<p>really means</p>\n\n<pre><code>BEGIN {\n    require \"strict.pm\";\n    strict-&gt;import();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1545323081, "post_id": 53865927, "comment_id": 94592137, "body": "Yes, NYTProf is great tool, but for profiling, not for code tracing. NYTProf shows listing of executed functions in order by time wasted, not chance to sort by original order. By the way, you can disable logging core function calls by setting <code>start=init</code> instead of default <code>start=begin</code>. I created a playground repository for testing tracer modules from cpan, you are welcome to check and contribute <a href=\"https://github.com/pavelsr/perl-debug-example\" rel=\"nofollow noreferrer\">github.com/pavelsr/perl-debug-example</a>"}], "tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 3, "last_activity_date": 1545300014, "last_edit_date": 1545300014, "creation_date": 1545298755, "answer_id": 53865927, "question_id": 53798816, "link": "https://stackoverflow.com/questions/53798816/how-can-i-print-all-executed-subroutines/53865927#53865927", "title": "How can I print all executed subroutines?", "body": "<p>An alternative solution, using the already-mentioned <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">Devel::NYTProf</a> (a profiler instead of a debugger, to be more precise), which doesn't require you to write any additional code and gives you a lot more information.</p>\n\n<pre><code>% perl -d:NYTProf yourscript.pl\n</code></pre>\n\n<p>This will by default create an <code>nytprof.out</code> file. You can then do:</p>\n\n<pre><code>% nytprofcalls nytprof.out\n</code></pre>\n\n<p>which will give you detailed call information. An example script:</p>\n\n<pre><code>use strict;\n\nsub f1 {\n  print \"hi;\\n\";\n  f2();\n}\n\nsub f2 {\n  print \"hi2\\n\";\n}\n\nf1();\n</code></pre>\n\n<p>and sample output:</p>\n\n<pre><code>main::f1;main::f2 30\nmain::f1;main::CORE:print 124\nmain::f1;main::f2;main::CORE:print 40\nmain::BEGIN@1 4262\nmain::f1 113\nmain::BEGIN@1;strict::import 39\nmain::BEGIN@1;strict::BEGIN@7 396\nmain::BEGIN@1;strict::BEGIN@7;strict::CORE:match 58\n</code></pre>\n\n<p>You can see that NYTProf also lists calls to core function (CORE::print), among other things.</p>\n\n<p>As a bonus, you can see the whole profile output using:</p>\n\n<pre><code>% nytprofhtml\n</code></pre>\n\n<p>then open the report page, e.g. using:</p>\n\n<pre><code>% firefox nytprof/index.html\n</code></pre>\n\n<p>You can see the subroutines that were executed (ordered by how long they run), how many times they were run, and much much more.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 53807568, "answer_count": 3, "score": 5, "last_activity_date": 1545300014, "creation_date": 1544925281, "last_edit_date": 1545005341, "question_id": 53798816, "link": "https://stackoverflow.com/questions/53798816/how-can-i-print-all-executed-subroutines", "title": "How can I print all executed subroutines?", "body": "<p>E.g. I have following Perl script </p>\n\n<pre><code>{ \n    package A;\n\n    {\n        package B;\n\n        sub _y {\n            print \"Just Another Perl Hacker\\n\";\n\n        }\n\n    }\n\n    sub _x {\n        print \"Hello world!\\n\";\n        B::_y();\n    }\n}\n\n\nuse strict;\nuse warnings;\n\n_x();\n</code></pre>\n\n<p>How can I print every executed sub with package qualifier to STDERR or any log file?</p>\n\n<p>E.g. from the script above I expect to see the following output:</p>\n\n<pre><code>1 A::_x()\n2 B::_y()\n</code></pre>\n\n<p>I presume that it's possible to do with debugger like Devel::NYTProf, but I haven't found particular debugger modules or their params for that simple task.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl", "curses"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544917531, "post_id": 53798138, "comment_id": 94446134, "body": "<code>&quot;\\r&quot;</code> aka <code>&quot;\\x0D&quot;</code>, and <code>&quot;\\c[&quot;</code> aka <code>&quot;\\x1B&quot;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 1017216, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c977600e3c59522b5f222d921c66d7a5?s=128&d=identicon&r=PG", "display_name": "Vitali Pom", "link": "https://stackoverflow.com/users/1017216/vitali-pom"}, "edited": false, "score": 0, "creation_date": 1561050804, "post_id": 53798700, "comment_id": 99947248, "body": "KEY_ENTER() indeed as you said and must using the relevant sub libraries as in your example. thanks"}], "tags": [], "owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "is_accepted": false, "score": 4, "last_activity_date": 1544954509, "last_edit_date": 1544954509, "creation_date": 1544923740, "answer_id": 53798700, "question_id": 53798138, "link": "https://stackoverflow.com/questions/53798138/binding-return-and-esc-keys-in-curses-library-in-perl/53798700#53798700", "title": "binding return and esc keys in curses library (in perl)", "body": "<p>To add to the original comment, the best resources in this case are going to be the distro's various module documentation, the source code, and the ncurses library. \n We can see <a href=\"https://metacpan.org/source/MARCUS/Curses-UI-0.95/lib/Curses/UI/Common.pm#L367\" rel=\"nofollow noreferrer\">here</a> that <code>esc</code> and a few other keys are special cases. </p>\n\n<p>As an example you would use the subroutine <code>Curses::UI::Common::CUI_ESC()</code> or <code>\"\\x1B\"</code> as originally suggested.  </p>\n\n<p>We can see it in use <a href=\"https://github.com/gdm/Curses-UI/blob/7f14eeab6cd07f1a35663fe0a0e0e771bf388e6d/lib/Curses/UI/Menubar.pm#L137\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>One of the modules that seems to be quite relevant to this topic is <a href=\"https://metacpan.org/pod/Curses::UI::Widget\" rel=\"nofollow noreferrer\">Curses::UI::Widget</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8085928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5bcb8e8e334ef3199767bd4f9b0af4?s=128&d=identicon&r=PG&f=1", "display_name": "Vitali Pomanitski", "link": "https://stackoverflow.com/users/8085928/vitali-pomanitski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544954509, "creation_date": 1544916644, "last_edit_date": 1544954391, "question_id": 53798138, "link": "https://stackoverflow.com/questions/53798138/binding-return-and-esc-keys-in-curses-library-in-perl", "title": "binding return and esc keys in curses library (in perl)", "body": "<p>In order to bind the CTRL+Q key using Perl's Curses library, it'll be :</p>\n\n<pre><code>$cui-&gt;set_binding( sub {exit 0;}, \"\\cQ\" );\n</code></pre>\n\n<p>How can I bind the ENTER and the ESC keys? Where can I find a good resource except for this one for those modules?</p>\n\n<p><a href=\"https://metacpan.org/pod/release/MDXI/Curses-UI-0.9607/lib/Curses/UI/Tutorial.pod\" rel=\"nofollow noreferrer\">A good resource for Perl Curses::UI</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544853632, "post_id": 53789602, "comment_id": 94431212, "body": "What do you mean by &quot;<i>recursively</i>&quot; ?"}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "edited": false, "score": 0, "creation_date": 1544970315, "post_id": 53789602, "comment_id": 94454679, "body": "What do you want to convert to lowercase, the names of files or their contents? Both require different approach. The one liner you mention converts to lowercase <i>the contents</i> of files in current directory, ending with <code>.ods</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10793534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dcm4TvA2k-Y/AAAAAAAAAAI/AAAAAAAAJE0/cu2hm0Z3_e4/photo.jpg?sz=128", "display_name": "SriHarsha Vinjamury", "link": "https://stackoverflow.com/users/10793534/sriharsha-vinjamury"}, "edited": false, "score": 0, "creation_date": 1544907068, "post_id": 53789694, "comment_id": 94443945, "body": "This doesn&#39;t seem to work. firstly, it&#39;s not Matching *.ods..and when I just executed perl -p -i -e &#39;tr/a-z/A-Z/&#39;, it did not show any issues, but it did not seem to change the file names.  does this command change contents of the files or the filenames itself ??"}, {"owner": {"reputation": 99, "user_id": 7197335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fdpYJ.jpg?s=128&g=1", "display_name": "iamejboy", "link": "https://stackoverflow.com/users/7197335/iamejboy"}, "reply_to_user": {"reputation": 11, "user_id": 10793534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dcm4TvA2k-Y/AAAAAAAAAAI/AAAAAAAAJE0/cu2hm0Z3_e4/photo.jpg?sz=128", "display_name": "SriHarsha Vinjamury", "link": "https://stackoverflow.com/users/10793534/sriharsha-vinjamury"}, "edited": false, "score": 0, "creation_date": 1544923118, "post_id": 53789694, "comment_id": 94446909, "body": "It changes the content of the files matching files with extension <i>.ods</i> on a path specified. This should be more clearer,  <code>perl -p -i -e &#39;tr&#47;a-z&#47;A-Z&#47;&#39; &#47;path-to-file-directory&#47;*.ods</code>"}], "tags": [], "owner": {"reputation": 99, "user_id": 7197335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fdpYJ.jpg?s=128&g=1", "display_name": "iamejboy", "link": "https://stackoverflow.com/users/7197335/iamejboy"}, "is_accepted": false, "score": 2, "last_activity_date": 1544850347, "creation_date": 1544850347, "answer_id": 53789694, "question_id": 53789602, "link": "https://stackoverflow.com/questions/53789602/one-liner-to-convert-lower-case-to-upper-case-recursively-on-files-ending-with-a/53789694#53789694", "title": "One liner to convert lower case to upper case recursively on files ending with a particular extension", "body": "<p>This could do it.</p>\n\n<p><code>perl -p -i -e 'tr/a-z/A-Z/' *.ods</code></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1544852025, "creation_date": 1544852025, "answer_id": 53789841, "question_id": 53789602, "link": "https://stackoverflow.com/questions/53789602/one-liner-to-convert-lower-case-to-upper-case-recursively-on-files-ending-with-a/53789841#53789841", "title": "One liner to convert lower case to upper case recursively on files ending with a particular extension", "body": "<ul>\n<li><code>-i</code> takes an optional \"argument\" (the extension to use for the backup). If you don't want a backup, you need to place a space after the <code>-i</code>.</li>\n<li><code>s/a-z/A-Z/g</code> replaces all instances of the string <code>a-z</code> with the string <code>A-Z</code>.</li>\n</ul>\n\n<p>Fix:</p>\n\n<pre><code>perl -i -pe'tr/a-z/A-Z/' *.ods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12004, "user_id": 988678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a073cbc871c26b0fb4f1cc1f808e9749?s=128&d=identicon&r=PG", "display_name": "zxq9", "link": "https://stackoverflow.com/users/988678/zxq9"}, "edited": false, "score": 1, "creation_date": 1544932199, "post_id": 53798416, "comment_id": 94447959, "body": "Context-flexible alternatives to the higher-level task. Excellent."}], "tags": [], "owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "is_accepted": false, "score": 2, "last_activity_date": 1544920277, "last_edit_date": 1544920277, "creation_date": 1544919946, "answer_id": 53798416, "question_id": 53789602, "link": "https://stackoverflow.com/questions/53789602/one-liner-to-convert-lower-case-to-upper-case-recursively-on-files-ending-with-a/53798416#53798416", "title": "One liner to convert lower case to upper case recursively on files ending with a particular extension", "body": "<p>The examples given so far will operate on the contents of the file vs the file name. While you can indeed use Perl to achieve what you want, I'd advise to just use bash itself, assuming that's an option.</p>\n\n<p>If you really want to use Perl for this I would make a script vs a one-liner: </p>\n\n<h1>Perl example</h1>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nsub rename_file_extensions {\n    my ( $dir, $orig_ext, $new_ext ) = @_;\n    chdir($dir) or die \"Can't chdir to $dir $!\";\n    opendir my $dh, $dir or die \"Couldn't opendir: $!\\n\";\n    for my $file ( readdir $dh ) {\n        if ( -d $file &amp;&amp; $file !~ /^\\.+$/ ) {\n            rename_file_extensions( \"$dir/$file\", $orig_ext, $new_ext );\n        }\n        else {\n            if ( ( my $txt = $file ) =~ s/$orig_ext$/$new_ext/ ) {\n                rename( $file, $txt ) or die \"Can't rename: $!\";\n            }\n        }\n    }\n    closedir $dh;\n}\n\nrename_file_extensions( $ARGV[0], $ARGV[1], $ARGV[2] );\n</code></pre>\n\n<p>The script above would be called as <code>perl script.pl  /path_to_files ods ODS</code>. It will recurse through all directories in /path_to_files; renaming each instance of <code>file.ods</code> to <code>file.ODS</code>.</p>\n\n<h1>Bash only example</h1>\n\n<p><code>find . -name \"*.ods\" -exec bash -c 'mv \"$1\" \"${1%.ods}\".ODS' - '{}' \\;</code></p>\n\n<p>Cheers</p>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 2, "last_activity_date": 1545299790, "creation_date": 1545299790, "answer_id": 53866243, "question_id": 53789602, "link": "https://stackoverflow.com/questions/53789602/one-liner-to-convert-lower-case-to-upper-case-recursively-on-files-ending-with-a/53866243#53866243", "title": "One liner to convert lower case to upper case recursively on files ending with a particular extension", "body": "<p>Assuming you do want to modify the <em>name</em> of files instead of content, here's another way using the <code>find</code> and <code>xargs</code> commands and a Perl script called <code>rename</code> (it is an example script that comes with Perl and available on Debian via the <code>rename</code> package).</p>\n\n<pre><code>% find -type f -name '*.ods' | xargs rename -n 's!(.+/)(.+)!$1 . lc($2)!e'\n</code></pre>\n\n<p>The advantage of using this script is you can do a simulation (dry-mode) first before actually changing your filenames, using the <code>-n</code> option. Once you confirm that the result is what you intended, you run again without the <code>-n</code> option.</p>\n\n<p>Sample files:</p>\n\n<pre><code>% find\n.\n./Sub1\n./Sub1/FOUR.ODS\n./Sub1/three.ods\n./Sub1/Two.ods\n./sub2\n./sub2/five.ODS\n./sub2/Five.ods\n./One.ods\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>rename(./Sub1/Two.ods, ./Sub1/two.ods)\nrename(./sub2/Five.ods, ./sub2/five.ods)\nrename(./One.ods, ./one.ods)\n</code></pre>\n\n<p>Yet another alternative is using the <a href=\"https://metacpan.org/pod/perlmv\" rel=\"nofollow noreferrer\">perlmv</a> script, available from CPAN (install it using e.g. <code>cpanm -n App::perlmv</code>). This script is glorified form of <code>rename</code> and supports recursive mode so you can skip using <code>find</code> and <code>xargs</code>:</p>\n\n<pre><code>% perlmv -d -R -e'$_ = lc if /\\.ods$/' .\n</code></pre>\n\n<p>The <code>-d</code> is for dry-run mode, the <code>-R</code> is for recursive. Sample output:</p>\n\n<pre><code>INFO: chdir `/zpool_host_mnt/mnt/home/s1/tmp/ods/.` ...\nDRYRUN: move `One.ods` -&gt; `one.ods`\nINFO: chdir `/zpool_host_mnt/mnt/home/s1/tmp/ods/Sub1` ...\nDRYRUN: move `Two.ods` -&gt; `two.ods`\nINFO: chdir `/zpool_host_mnt/mnt/home/s1/tmp/ods/sub2` ...\nDRYRUN: move `Five.ods` -&gt; `five.ods`\n</code></pre>\n\n<p>Once you are sure you get the right results, remove the <code>-d</code> option.</p>\n"}], "owner": {"reputation": 11, "user_id": 10793534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dcm4TvA2k-Y/AAAAAAAAAAI/AAAAAAAAJE0/cu2hm0Z3_e4/photo.jpg?sz=128", "display_name": "SriHarsha Vinjamury", "link": "https://stackoverflow.com/users/10793534/sriharsha-vinjamury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1545299790, "creation_date": 1544849075, "last_edit_date": 1544853252, "question_id": 53789602, "link": "https://stackoverflow.com/questions/53789602/one-liner-to-convert-lower-case-to-upper-case-recursively-on-files-ending-with-a", "title": "One liner to convert lower case to upper case recursively on files ending with a particular extension", "body": "<p>I've been trying to get this working for some time now. I see posts for search and replace in Perl recursively using <code>perl -pie</code> but I can't get it to work.</p>\n\n<p>This is what I have:</p>\n\n<pre><code>perl -pie 's/a-z/A-Z/g' *.ods\n</code></pre>\n\n<p>This says no match.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1544825344, "post_id": 53787256, "comment_id": 94426636, "body": "We&#39;re not here to do your homework for you."}, {"owner": {"reputation": 9, "user_id": 10792852, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GECxLBJkCUY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iKVPVS0DoBw6d5HNVdOriHeIv0-g/mo/photo.jpg?sz=128", "display_name": "Shanae Allen", "link": "https://stackoverflow.com/users/10792852/shanae-allen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544825608, "post_id": 53787256, "comment_id": 94426721, "body": "I am not asking for you to do my homework i am asking for help . I don&#39;t understand at all i need some guidance. I put the question there for someone to understand what i am asking"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1544825791, "post_id": 53787256, "comment_id": 94426775, "body": "What don&#39;t you understand?"}, {"owner": {"reputation": 9, "user_id": 10792852, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GECxLBJkCUY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iKVPVS0DoBw6d5HNVdOriHeIv0-g/mo/photo.jpg?sz=128", "display_name": "Shanae Allen", "link": "https://stackoverflow.com/users/10792852/shanae-allen"}, "edited": false, "score": 0, "creation_date": 1544826082, "post_id": 53787256, "comment_id": 94426856, "body": "$string =~[A]  this is what I have so far. Im not getting any where is this the correct format or should it be different"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544826528, "post_id": 53787256, "comment_id": 94426969, "body": "Well, for starters, it would help to know what&#39;s a regular expression. You&#39;re writing Perl code (kinda) instead of a regular expression. The regular expression is what you&#39;d replace <code>...</code> with in <code>$string =~ &#47;...&#47;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544827405, "post_id": 53787256, "comment_id": 94427207, "body": "Hint: The answer isn&#39;t <code>A</code> or <code>[A]</code> because while those match <code>AAAA</code> (as they should), they also match <code>ZAZ</code> (when they shouldn&#39;t)."}, {"owner": {"reputation": 9, "user_id": 10792852, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GECxLBJkCUY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iKVPVS0DoBw6d5HNVdOriHeIv0-g/mo/photo.jpg?sz=128", "display_name": "Shanae Allen", "link": "https://stackoverflow.com/users/10792852/shanae-allen"}, "edited": false, "score": 0, "creation_date": 1544827679, "post_id": 53787256, "comment_id": 94427270, "body": "ok thank you so much"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1544827952, "creation_date": 1544827952, "answer_id": 53787889, "question_id": 53787256, "link": "https://stackoverflow.com/questions/53787256/perl-regular-expressions-pattern-matching/53787889#53787889", "title": "Perl: Regular expressions Pattern matching", "body": "<p>No.</p>\n\n<p>The regular expression pattern <code>[A]</code> can be simplified to just <code>A</code>. It will match any string that contains <code>A</code>. While that includes <code>AAAA</code>, it also includes <code>ZAZ</code>.</p>\n\n<p>For starters, you will need to anchor the match.</p>\n"}, {"tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 1, "last_activity_date": 1544830583, "creation_date": 1544830583, "answer_id": 53788221, "question_id": 53787256, "link": "https://stackoverflow.com/questions/53787256/perl-regular-expressions-pattern-matching/53788221#53788221", "title": "Perl: Regular expressions Pattern matching", "body": "<p>Anything in square brackets is a <a href=\"https://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\"><em>character class</em></a>. This is complicated enough that it has its own Perl documentation page (in the link), so it's not a surprise it wasn't evident how it works.</p>\n\n<p>A character class defines a <em>set</em> of possible characters; when pattern matching, a character class by itself matches <em>one</em> character from the input, no matter how many characters there are inside the square brackets.</p>\n\n<pre><code>/[A]/     # find one copy of 'A' anywhere in the string\n/[abcd]/  # find one copy of any of 'a', 'b', 'c', or 'd' anywhere in the string\n/[A..Z]/  # find any one uppercase ASCII character somewhere in the string\n</code></pre>\n\n<p>If you want your class to match differently, you can add modifiers:</p>\n\n<pre><code>/[A..Z]+/ # find one or more uppercase ASCII characters in a row\n/[A]*/    # find zero or more 'A's in a row\n</code></pre>\n\n<p>The linked page will show you a lot of other options to specify sets of characters inside the square brackets. But the key is that one set of square brackets matches one character unless you add <code>+</code> (one or more of these) or '*' (zero or more of these).</p>\n"}], "owner": {"reputation": 9, "user_id": 10792852, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GECxLBJkCUY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iKVPVS0DoBw6d5HNVdOriHeIv0-g/mo/photo.jpg?sz=128", "display_name": "Shanae Allen", "link": "https://stackoverflow.com/users/10792852/shanae-allen"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1544844345, "answer_count": 2, "score": -3, "last_activity_date": 1544830583, "creation_date": 1544823743, "last_edit_date": 1544827992, "question_id": 53787256, "link": "https://stackoverflow.com/questions/53787256/perl-regular-expressions-pattern-matching", "closed_reason": "Not suitable for this site", "title": "Perl: Regular expressions Pattern matching", "body": "<p>Is <code>[A]</code> a regular expression that will match a string of characters which contains any number of occurrences of the letter A (and only the letter A, with no other characters or spaces) such as <code>AAAA</code>?</p>\n"}, {"tags": ["perl", "geoip", "geoip2", "geolite2", "geolitecity"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1544815421, "post_id": 53783844, "comment_id": 94422976, "body": "can you show your code?  and say exactly how and when you got your database file?"}, {"owner": {"reputation": 33, "user_id": 10791841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9602b358b96c4ee9739389b0e82d2b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Friedrich", "link": "https://stackoverflow.com/users/10791841/friedrich"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1544821367, "post_id": 53783844, "comment_id": 94425251, "body": "There is no code. That&#39;s what I&#39;m looking for. I downloaded the new file today from Maxmind&#39;s website."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10791841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9602b358b96c4ee9739389b0e82d2b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Friedrich", "link": "https://stackoverflow.com/users/10791841/friedrich"}, "edited": false, "score": 0, "creation_date": 1546462708, "post_id": 53794624, "comment_id": 94863046, "body": "Thank you, that helped me understand how all the pieces go together.  Small typo in source, should be $client instead of $reader for it to be runnable.  <code>my $client = GeoIP2::Database::Reader-&gt;new(</code>"}, {"owner": {"reputation": 1557, "user_id": 2535509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13c5ac433fe64c7be20098cdda4d8a9?s=128&d=identicon&r=PG", "display_name": "Greg Oschwald", "link": "https://stackoverflow.com/users/2535509/greg-oschwald"}, "reply_to_user": {"reputation": 33, "user_id": 10791841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9602b358b96c4ee9739389b0e82d2b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Friedrich", "link": "https://stackoverflow.com/users/10791841/friedrich"}, "edited": false, "score": 0, "creation_date": 1546557635, "post_id": 53794624, "comment_id": 94898602, "body": "Thanks. I fixed the typo."}], "tags": [], "owner": {"reputation": 1557, "user_id": 2535509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c13c5ac433fe64c7be20098cdda4d8a9?s=128&d=identicon&r=PG", "display_name": "Greg Oschwald", "link": "https://stackoverflow.com/users/2535509/greg-oschwald"}, "is_accepted": true, "score": 0, "last_activity_date": 1546557622, "last_edit_date": 1546557622, "creation_date": 1544887917, "answer_id": 53794624, "question_id": 53783844, "link": "https://stackoverflow.com/questions/53783844/does-geolite2-provide-coordinates/53794624#53794624", "title": "Does GeoLite2 provide coordinates?", "body": "<p>GeoLite2 provides latitude and longitude. With the Perl <code>GeoIP2</code> API, you should be able to access as follows:</p>\n\n<pre><code>my $reader = GeoIP2::Database::Reader-&gt;new(\n    file    =&gt; '/path/to/database',\n);\nmy $city = $reader-&gt;city( ip =&gt; '24.24.24.24' );\nsay $city-&gt;location-&gt;latitude;\nsay $city-&gt;location-&gt;longitude;\n</code></pre>\n\n<p>Please note these coordinates are coarse estimates. See <code>$city-&gt;location-&gt;accuracy_radius</code> for the estimated accuracy (67% confidence level) of the coordinates in <em>kilometers</em>.</p>\n"}], "owner": {"reputation": 33, "user_id": 10791841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9602b358b96c4ee9739389b0e82d2b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Friedrich", "link": "https://stackoverflow.com/users/10791841/friedrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 53794624, "answer_count": 1, "score": 0, "last_activity_date": 1546557622, "creation_date": 1544806215, "last_edit_date": 1544807457, "question_id": 53783844, "link": "https://stackoverflow.com/questions/53783844/does-geolite2-provide-coordinates", "title": "Does GeoLite2 provide coordinates?", "body": "<p>I'm confused, does the free GeoLite2 database provide coordinates (latitude, longitude) anymore?</p>\n\n<p>I have been using GeoLite and was able to use <code>Geo::IP</code> and <code>-&gt;latitude</code> calls to get coordinates. I've looked through the documentation and grepped <code>GeoIP2::Database::Reader</code> but there are no references to coordinates. Seems like it is only available when querying Maxmind through the web API.</p>\n\n<blockquote>\n  <p>Note: After careful consideration, taking into account customer\n  feedback, we have decided against removing latitude and longitude\n  coordinates from the GeoLite2 databases.</p>\n</blockquote>\n\n<p>Maxmind seems to suggest it should still be there? But how is it accessible with Perl then?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1544798889, "post_id": 53781743, "comment_id": 94415173, "body": "(OT: Unless you\u2019re using the capturing group in <code>([\\s]+)?</code> it could be shortened to <code>\\s*</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544801343, "post_id": 53781743, "comment_id": 94416606, "body": "You&#39;ve abstracted away too much to give a proper answer."}, {"owner": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544801823, "post_id": 53781743, "comment_id": 94416882, "body": "What do you mean? I think that example is okay @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544803563, "post_id": 53781743, "comment_id": 94417788, "body": "That&#39;s because it&#39;s very likely that you already decided on poor approach to solve the problem, and presented the problem in terms that would be solved by that approach. This will invariable lead to poor answers. If were knew what you were <a href=\"https://www.perlmonks.org/?node_id=542341\" rel=\"nofollow noreferrer\">actually doing</a>, we could provide better answers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544815533, "post_id": 53781743, "comment_id": 94423012, "body": "...Except no, the OP said in a comment below that they are really looking for two natural-language words in a natural-language sentence. I&#39;ll leave my previous comment as a cautionary note, but it doesn&#39;t appear to apply in this circumstance."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1544802066, "last_edit_date": 1544802066, "creation_date": 1544799151, "answer_id": 53781999, "question_id": 53781743, "link": "https://stackoverflow.com/questions/53781743/how-to-use-negative-lookbehind-with-quantifiers/53781999#53781999", "title": "How to use negative lookbehind with quantifiers?", "body": "<p>You can use the SKIP and FAIL verbs.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Test::More tests =&gt; 7;\n\nmy $regex = qr/big\\s*dog(*SKIP)(?!)|dog/;\n\nunlike 'bigdog',    $regex;\nunlike 'big dog',   $regex;\nunlike 'big   dog', $regex;\nunlike 'cat',       $regex;\n\nlike 'dog',       $regex;\nlike 'small dog', $regex;\nlike 'medium dog and big dog', $regex;\n</code></pre>\n\n<p><code>qr/(?&lt;!big)\\s*dog/</code> is problematic as</p>\n\n<pre><code>big dog\n    ^\n    |\nmatches here: is not preceded by \"big\" but \"big \"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "edited": false, "score": 0, "creation_date": 1544807822, "post_id": 53782711, "comment_id": 94419870, "body": "Thanks for your reply! I can try to explain in more detail. I have several text files and I need to detect that they have special text prefix before the distinct word. @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "edited": false, "score": 0, "creation_date": 1544815115, "post_id": 53782711, "comment_id": 94422840, "body": "And both the prefix and the word are English words found in an English sentence?"}, {"owner": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "edited": false, "score": 0, "creation_date": 1544815310, "post_id": 53782711, "comment_id": 94422924, "body": "Yes, like this)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "edited": false, "score": 0, "creation_date": 1544815361, "post_id": 53782711, "comment_id": 94422952, "body": "Ah ok, I stand corrected :) Usually, when we get this kind of questions, it&#39;s really about extracting data from XML or something."}, {"owner": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "edited": false, "score": 0, "creation_date": 1544816650, "post_id": 53782711, "comment_id": 94423438, "body": "I should say that I have template toolkit file. I want to use an only regular expression for solving. Sorry if I misled you. @ikegami"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1544803366, "last_edit_date": 1544803366, "creation_date": 1544801746, "answer_id": 53782711, "question_id": 53781743, "link": "https://stackoverflow.com/questions/53781743/how-to-use-negative-lookbehind-with-quantifiers/53782711#53782711", "title": "How to use negative lookbehind with quantifiers?", "body": "<p>For the problem as specified, you could use any of the following:</p>\n\n<pre><code>/(?&lt;!big)(?&lt;!\\s)\\s*dog/\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/\n   ^\n   (?: big \\s* dog\n   |   (?! big \\s* dog ) .\n   )*\n   dog\n/xs\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/\n   (?: (?:^|[^b]) ig\n   |   (?:^|[^i]) g\n   |   (?:^|[^g\\s])\n   )\n   \\s* dog\n/x\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s/big\\s*dog/!/rg =~ /dog/\n</code></pre>\n\n<p>or</p>\n\n<pre><code>reverse($_) =~ /god(?!\\s*gib)/\n</code></pre>\n\n<p>I gave many alternatives because not one is particularly good. Better solutions probably exist in practice, but that requires knowing the <a href=\"https://www.perlmonks.org/?node_id=542341\" rel=\"nofollow noreferrer\">actual problem</a> that needs solving.</p>\n"}], "owner": {"reputation": 51, "user_id": 10791006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ysLnOKDpc8/AAAAAAAAAAI/AAAAAAAAB38/wtDnNgsbJtY/photo.jpg?sz=128", "display_name": "Roman Domoratskii", "link": "https://stackoverflow.com/users/10791006/roman-domoratskii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1544809089, "creation_date": 1544798288, "last_edit_date": 1544809089, "question_id": 53781743, "link": "https://stackoverflow.com/questions/53781743/how-to-use-negative-lookbehind-with-quantifiers", "title": "How to use negative lookbehind with quantifiers?", "body": "<p>I want to use negative lookbehind with quantifiers. But I have the error. I use Perl.</p>\n\n<p>I have several text files and I need to detect that they have special text prefix before the distinct word.</p>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>A quantifier inside a lookbehind makes it non-fixed width</p>\n</blockquote>\n\n<p>My regular expression:</p>\n\n<pre><code>/(?&lt;!big([\\s]+)?)dog/\n</code></pre>\n\n<p>I want to get the fourth and fifth number.</p>\n\n<pre><code>1. bigdog - not ok\n2. big   dog - not ok\n3. big dog - not ok\n4. dog - ok\n5. dog any text except big.  dog - ok\n</code></pre>\n"}, {"tags": ["perl", "file-io"], "comments": [{"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 1, "creation_date": 1544781734, "post_id": 53777354, "comment_id": 94406011, "body": "What do you think <a href=\"https://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\"><code>select(OUT_FILE)</code></a> does?"}, {"owner": {"reputation": 69, "user_id": 7456018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1fcaf79a17689e2cd4f9457e567ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Rui", "link": "https://stackoverflow.com/users/7456018/rui"}, "reply_to_user": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1545016565, "post_id": 53777354, "comment_id": 94465550, "body": "Got it. thanks @Robby"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1544781762, "creation_date": 1544781762, "answer_id": 53777459, "question_id": 53777354, "link": "https://stackoverflow.com/questions/53777354/perl-log-message-is-unexpected-written-into-dest-file/53777459#53777459", "title": "Perl log message is unexpected written into dest file", "body": "<p>You have <a href=\"http://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\"><code>select</code></a>ed your file handle <code>OUT_FILE</code>. <code>select</code> will make output from <code>print</code> and <code>printf</code> go to the selected handle instead of <code>STDOUT</code>, which is selected by default.</p>\n\n<p>Remove the call to <code>select</code>. You don't need it.</p>\n\n<hr>\n\n<p>Please note your code is very old-fashioned. It could be rewritten as follows, to take into account lexical file handles and proper error handling:</p>\n\n<pre><code>open my $fh, '&gt;', $destfile or die \"Can't open file '$destfile': $!\";\nbinmode $fh;\nprintf \"test file name:\\t'%s'\\n\", $destfile;\nwritebinary($fh, pack('H*', $name));\n</code></pre>\n\n<p>Of course you're not telling us what <code>writebinary</code> does. You might need to make changes there. But keep in mind that glob filehandles are global, and other parts of your program might mess with your <code>OUT_FILE</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 7456018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1fcaf79a17689e2cd4f9457e567ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Rui", "link": "https://stackoverflow.com/users/7456018/rui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 53777459, "answer_count": 1, "score": -1, "last_activity_date": 1544781762, "creation_date": 1544781432, "question_id": 53777354, "link": "https://stackoverflow.com/questions/53777354/perl-log-message-is-unexpected-written-into-dest-file", "title": "Perl log message is unexpected written into dest file", "body": "<p>Here is a segment of test code for writing data to files,</p>\n\n<pre><code>open(OUT_FILE, \"&gt;\", $destfile)||die(\"can not open file!\");\nselect(OUT_FILE);\nbinmode(OUT_FILE);\nprintf \"test file name:\\t'%s'\\n\", $destfile;\nwritebinary(OUT_FILE,pack('H*', $name))\n</code></pre>\n\n<p>Log message \"test file name: datatest.txt\" is appended in datatest.txt\nWhat's wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544777099, "post_id": 53776039, "comment_id": 94403415, "body": "Works for me ... ?  (I copy-pasted your code).  Btw, why is there <code>Time::HiRes</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544777175, "post_id": 53776039, "comment_id": 94403450, "body": "However, <code>$starttime</code> doesn&#39;t change in the loop and is the same in each iteration."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544777268, "post_id": 53776039, "comment_id": 94403505, "body": "Tip: <code>foreach my $i (1..10) { ... }</code> is the same as the C-style for loop but much nicer."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544778794, "post_id": 53776039, "comment_id": 94404265, "body": "Think about where you set <code>$starttime</code> and where your loop is. When do you want <code>$starttime</code> to change?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1544792073, "post_id": 53776039, "comment_id": 94411415, "body": "I&#39;m not sure why you gave this question the title you did. Surely, it&#39;s obvious that running your code takes 20 seconds. So the call to <code>sleep()</code> is clearly working as expected :-)"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1544800332, "post_id": 53776039, "comment_id": 94416037, "body": "Change <code>sleep (120)</code> to <code>sleep(120)</code> without space. Perl is forgiving thou."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1544874435, "post_id": 53776039, "comment_id": 94435009, "body": "@KjetilS. - That change would be completely pointless."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1544889270, "post_id": 53776039, "comment_id": 94439279, "body": "@DaveCross Maybe not to someone new to Perl."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1544898137, "post_id": 53776039, "comment_id": 94441683, "body": "@KjetilS. - Not sure what you mean. <code>sleep(120)</code> and <code>sleep (120)</code> both mean <i>exactly</i> the same thing to Perl."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "edited": false, "score": 0, "creation_date": 1544802780, "post_id": 53777080, "comment_id": 94417377, "body": "After running the Script it is creating the file but not writing into the file (file size is o KB)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "edited": false, "score": 0, "creation_date": 1544803292, "post_id": 53777080, "comment_id": 94417636, "body": "@sravs: If you have a new question, it&#39;s probably best to ask it as a new question."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1544780527, "creation_date": 1544780527, "answer_id": 53777080, "question_id": 53776039, "link": "https://stackoverflow.com/questions/53776039/sleep-function-not-working-inside-for-loop-using-perl-script/53777080#53777080", "title": "Sleep function not working inside for loop using Perl Script", "body": "<p>You set <code>$starttime</code> outside of the loop and never change it. Therefore it always has the same value. If you want it to change in the loop, then you need to change it in the loop.</p>\n\n<pre><code>for ($i = 1; $i &lt;= 10; $i++){  \n  my $starttime = localtime-&gt;strftime('%Y%m%d%H%M'); \n  print $file \"Start_time_$i = $starttime\\n\";\n  sleep (120);\n}\n</code></pre>\n\n<p>Of course, at that point, you have to wonder if there's any good reason to have the variable at all.</p>\n\n<pre><code>for ($i = 1; $i &lt;= 10; $i++){  \n  print $file \"Start_time_$i = \", localtime-&gt;strftime('%Y%m%d%H%M'), \"\\n\";\n  sleep (120);\n}\n</code></pre>\n\n<p>And, please make your maintenance programmer's life easier by using a <code>foreach</code> loop there.</p>\n\n<pre><code>foreach my $i (1 .. 10) {  \n  print $file \"Start_time_$i = \", localtime-&gt;strftime('%Y%m%d%H%M'), \"\\n\";\n  sleep (120);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 53777080, "answer_count": 1, "score": 0, "last_activity_date": 1544791973, "creation_date": 1544776477, "last_edit_date": 1544791973, "question_id": 53776039, "link": "https://stackoverflow.com/questions/53776039/sleep-function-not-working-inside-for-loop-using-perl-script", "title": "Sleep function not working inside for loop using Perl Script", "body": "<p>My code is:</p>\n\n<pre><code>#!/usr/local/bin/perl \nuse Time::Piece;\nuse Time::HiRes;\nuse strict;\nuse warnings 'all';\nmy $i = 1;\nmy $starttime = localtime-&gt;strftime('%Y%m%d%H%M');\nopen my  $file, '&gt;', 'order.properties' or die $!;\nfor ($i = 1; $i &lt;= 10; $i++){   \n  print $file \"Start_time_$i = $starttime\\n\";\n  sleep (120);\n}\nclose $file;\n</code></pre>\n\n<p>In the above code I am creating an <code>order.properties</code> file and writing a variable called <code>Starttime</code> and assigning date and time in a format of <code>YYYYMMDDHH24MM</code> and iterating the variable for 10 time with sleep time 2 mins, but sleep is not working and after adding sleep function to the Script, it's just creating a file not writing anything into it.</p>\n\n<p>For each iteration of for loop I need 2 mins of sleep like: </p>\n\n<pre><code> Start_time_1 = 201812141350\n Start_time_2 = 201812141352\n</code></pre>\n\n<p>The output should be like above.</p>\n"}, {"tags": ["linux", "shell", "perl", "text-processing"], "comments": [{"owner": {"reputation": 4122, "user_id": 2869795, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMYyR.jpg?s=128&g=1", "display_name": "Kalanidhi", "link": "https://stackoverflow.com/users/2869795/kalanidhi"}, "edited": false, "score": 0, "creation_date": 1544771961, "post_id": 53775023, "comment_id": 94401351, "body": "What is your expected result? Can you post ?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1544772213, "post_id": 53775023, "comment_id": 94401439, "body": "Not enough for an answer, but my 2 cents: 1. The modern Excel file format, suffix .xlsx, is xml based and hence can probably be parsed with tools like <a href=\"https://linux.die.net/man/1/xml_grep\" rel=\"nofollow noreferrer\">xml_grep</a>. For more sophisticated results you&#39;ll probably want to use Perl or another scripting language with XML plugins. 2. If you can get a CSV output you are probably able to parse it with the traditional *nix tools awk, sed and bash proper."}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "reply_to_user": {"reputation": 4122, "user_id": 2869795, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMYyR.jpg?s=128&g=1", "display_name": "Kalanidhi", "link": "https://stackoverflow.com/users/2869795/kalanidhi"}, "edited": false, "score": 0, "creation_date": 1544772260, "post_id": 53775023, "comment_id": 94401455, "body": "@Kalanidhi updated my question with the output"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1544773090, "post_id": 53775023, "comment_id": 94401777, "body": "<b>&quot;compare two excel sheet&quot;</b> - you cannot use text processing against the excel <code>.xls</code> files (you must dump them to text or .csv first) the Excel file format contains MUCH MUCH more than what you see on the screen. (try opening the excel files in Notepad and see what all is there -- ouch!)"}, {"owner": {"reputation": 83, "user_id": 3489485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kX9VT.png?s=128&g=1", "display_name": "ljgww", "link": "https://stackoverflow.com/users/3489485/ljgww"}, "edited": false, "score": 0, "creation_date": 1544875506, "post_id": 53775023, "comment_id": 94435222, "body": "tagging of this question is off. It has nothing to do with all given tag categories."}], "answers": [{"comments": [{"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1544773571, "post_id": 53775292, "comment_id": 94401945, "body": "In my case I have two different excel sheets(not in one sheet).. Will your suggestion works on two different excel sheet?"}, {"owner": {"reputation": 209, "user_id": 6904845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c08228014a87f5d7105a4f6d3b3de61?s=128&d=identicon&r=PG&f=1", "display_name": "theMerakist", "link": "https://stackoverflow.com/users/6904845/themerakist"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 1, "creation_date": 1544779642, "post_id": 53775292, "comment_id": 94404721, "body": "Yes it will work, while selecting B2, select it from other sheet."}, {"owner": {"reputation": 209, "user_id": 6904845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c08228014a87f5d7105a4f6d3b3de61?s=128&d=identicon&r=PG&f=1", "display_name": "theMerakist", "link": "https://stackoverflow.com/users/6904845/themerakist"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1544780271, "post_id": 53775292, "comment_id": 94405110, "body": "=VLOOKUP(A2,Sheet1!$A$2:$A$7,1,FALSE) Considering sheet 1 is ACnumbers and sheet2 has Custnumber"}, {"owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1544814481, "post_id": 53775292, "comment_id": 94422602, "body": "Both of my sheets (sheet1 and sheet2) have lot of columns but &quot;AccountNumber&quot; is the first column in sheet1 and &quot;Customer Number&quot; is the first column in sheet2 always. So considering I have seet1 and sheet2 as you described, where I am supposed to run the above formula <code>=VLOOKUP(A2,Sheet1!$A$2:$A$7,1,FALSE)</code>. I am relatively new to vlookup so trying to understand that.."}, {"owner": {"reputation": 209, "user_id": 6904845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c08228014a87f5d7105a4f6d3b3de61?s=128&d=identicon&r=PG&f=1", "display_name": "theMerakist", "link": "https://stackoverflow.com/users/6904845/themerakist"}, "reply_to_user": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "edited": false, "score": 0, "creation_date": 1544942433, "post_id": 53775292, "comment_id": 94449093, "body": "@falsh I had taken the same, I&#39;m trying to populate results in sheet2 just beside customer number column, so select A2 which is &quot;CustomerNumber&quot; 1st value,and then select Shee11 &quot;AccountNumber&quot; column all items form A2 to A7, and 1 is for index of your column, False for exact match. Hope you got it. It works as you expected."}], "tags": [], "owner": {"reputation": 209, "user_id": 6904845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c08228014a87f5d7105a4f6d3b3de61?s=128&d=identicon&r=PG&f=1", "display_name": "theMerakist", "link": "https://stackoverflow.com/users/6904845/themerakist"}, "is_accepted": true, "score": 1, "last_activity_date": 1546972139, "last_edit_date": 1546972139, "creation_date": 1544772849, "answer_id": 53775292, "question_id": 53775023, "link": "https://stackoverflow.com/questions/53775023/compare-two-excel-sheet-and-print-the-difference/53775292#53775292", "title": "compare two excel sheet and print the difference?", "body": "<p>VlookUp will work for this kind of matching.</p>\n\n<pre><code>=VLOOKUP(A2,B2:B9,1,FALSE)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3R7Yf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3R7Yf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Matching numbers from column \"AccountNumber\" with \"customer number\" and resulting the matched numbers of column 1. Filter out N/A (Not matched) you will get all numbers which are not matched from column 1.</p>\n\n<p>For Different sheets</p>\n\n<pre><code>=VLOOKUP(A2,Sheet1!$A$2:$A$7,1,FALSE)\n</code></pre>\n\n<p>Considering sheet 1 is ACnumbers and sheet2 has Custnumber</p>\n"}], "owner": {"reputation": 1610, "user_id": 9049216, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bbb078bd76dc5110b4a3ba8569142b3d?s=128&d=identicon&r=PG&f=1", "display_name": "flash", "link": "https://stackoverflow.com/users/9049216/flash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53775292, "answer_count": 1, "score": 0, "last_activity_date": 1546972139, "creation_date": 1544771613, "last_edit_date": 1545016794, "question_id": 53775023, "link": "https://stackoverflow.com/questions/53775023/compare-two-excel-sheet-and-print-the-difference", "title": "compare two excel sheet and print the difference?", "body": "<p>I have two excel sheet (sheetA and sheetB) and I need to compare one column from sheetA with sheetB and print the difference.</p>\n\n<p><strong>sheetA</strong></p>\n\n<pre><code>Account Number  |    Status\n----------------|-------------\n876251251       |    Not Active\n716126181       |    Not Active\n888281211       |    Not Active\n666615211       |    Not Active\n787878787       |    Not Active\n111212134       |    Not Active\n</code></pre>\n\n<p><strong>sheetB</strong></p>\n\n<pre><code>Customer Number \n----------------\n876251251\n716126181\n792342108\n792332668\n666615211\n760332429\n791952441\n676702288\n</code></pre>\n\n<p>I need to compare \"Account Number\" with \"Customer Number\". </p>\n\n<ul>\n<li>All account numbers from <code>sheetA</code> should be present in customer number in <code>sheetB</code> and if sheetB is missing any \"account number\" then we should print out those info.</li>\n<li>And all those extra customer numbers in <code>sheetB</code> that are not present in <code>sheetA</code> account number, I want to print that as well.</li>\n</ul>\n\n<p>I was reading about <code>awk</code> and I think we can it using <code>awk</code> but not able to understand how to do it?</p>\n\n<pre><code>$ awk -F'|' 'NR==FNR{c[$1$2]++;next};c[$1$2] &gt; 0' sheetB sheetA\n</code></pre>\n\n<p>Output should be:</p>\n\n<pre><code>Account Number:\n888281211\n787878787\n111212134\n\nCustomerNumber:\n792342108\n792332668\n760332429\n791952441\n676702288\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "job-queue", "hypnotoad"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544771682, "post_id": 53774276, "comment_id": 94401260, "body": "The documentation only suggests that the <i>command</i> becomes available, but I think you&#39;re still supposed to start the worker yourself. Most likely the worker stops after some time when there is no more work to be done, but you should look into its log for that"}, {"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544775056, "post_id": 53774276, "comment_id": 94402530, "body": "Thanks @Corion. I got confused by documentation as the minion command is available even when hypnotoad is not running. I mean <code>&#47;var&#47;www&#47;apps&#47;script&#47;apps minion worker -m production</code> still runs fine when app is not run. I am not sure if there is log for minion. However, looks like log for hypnotoad suggests that workers were stopped gracefully after sometime:"}, {"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544775835, "post_id": 53774276, "comment_id": 94402847, "body": "example worker being stopped: <code>[Fri Dec 14 13:59:24 2018] [info] Stopping worker 9716 gracefully (120 seconds)</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1544850701, "post_id": 53774276, "comment_id": 94430795, "body": "The hypnotoad log is referring to Mojolicious workers. Minion workers are separate unrelated processes, that you must start and manage on their own."}, {"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "edited": false, "score": 0, "creation_date": 1544895029, "post_id": 53774276, "comment_id": 94440872, "body": "Thank you. I thought there might be some way to manage Minion automatically."}], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": true, "score": 4, "last_activity_date": 1545014308, "last_edit_date": 1545014308, "creation_date": 1544895757, "answer_id": 53795694, "question_id": 53774276, "link": "https://stackoverflow.com/questions/53774276/mojolicious-minion-worker-doesnt-start-automatically/53795694#53795694", "title": "Mojolicious - minion worker doesn&#39;t start automatically", "body": "<p>As Corion and Grinnz mentioned in comments:</p>\n\n<blockquote>\n  <p>Minion workers are separate unrelated processes, that you must start\n  and manage on your own.</p>\n</blockquote>\n\n<h3>Good news:</h3>\n\n<p>Mojolicious team has opened this issue. Will be solved soon:\n<a href=\"https://github.com/mojolicious/minion/issues/76\" rel=\"nofollow noreferrer\">Allow for Minion worker to be started by the application server</a></p>\n"}, {"tags": [], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "is_accepted": false, "score": 0, "last_activity_date": 1610363377, "creation_date": 1610363377, "answer_id": 65665770, "question_id": 53774276, "link": "https://stackoverflow.com/questions/53774276/mojolicious-minion-worker-doesnt-start-automatically/65665770#65665770", "title": "Mojolicious - minion worker doesn&#39;t start automatically", "body": "<p>Using <code>Mojo::IOLoop::Subprocess</code> you can start a subprocess within the app like this:</p>\n<pre><code>my $subprocess = Mojo::IOLoop::Subprocess-&gt;new;\n$subprocess-&gt;run(sub {...}, sub{...})\n</code></pre>\n<p>Documentation <a href=\"https://metacpan.org/pod/Mojo::IOLoop::Subprocess#run\" rel=\"nofollow noreferrer\">here</a></p>\n<p>That means that you can use the <code>before_server_start</code> hook to start worker subprocesses via <code>app-&gt;minion-&gt;worker-&gt;run</code></p>\n<p>Once they've started though there seems AFAIK no easy way to stop them when the app itself stops, so you have to check them and reap them - which is where <a href=\"https://metacpan.org/pod/Proc::ProcessTable\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a> can help.</p>\n<p>I've put all this together in a quick and dirty plugin <a href=\"https://gist.github.com/simonecesano/5da478e8c9f52dfa70d5e5cfe101eb10\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 53795694, "answer_count": 2, "score": 0, "last_activity_date": 1610363377, "creation_date": 1544767609, "last_edit_date": 1544768565, "question_id": 53774276, "link": "https://stackoverflow.com/questions/53774276/mojolicious-minion-worker-doesnt-start-automatically", "title": "Mojolicious - minion worker doesn&#39;t start automatically", "body": "<p>I am using <a href=\"https://mojolicious.org/\" rel=\"nofollow noreferrer\">Mojolicious</a> full app and loading <a href=\"https://mojolicious.org/perldoc/Minion\" rel=\"nofollow noreferrer\">Minion</a> (backend sqlite).\nMy question is why minion worker doesn't start by itself when I start mojolicious app with <a href=\"https://mojolicious.org/perldoc/Mojo/Server/Hypnotoad\" rel=\"nofollow noreferrer\">hypnotoad</a>. According to the documentation <a href=\"https://mojolicious.org/perldoc/Minion\" rel=\"nofollow noreferrer\">Minion</a> it should: </p>\n\n<blockquote>\n  <p>Background worker processes are usually started with the command\n  Minion::Command::minion::worker, which becomes automatically available\n  when an application loads Mojolicious::Plugin::Minion.</p>\n</blockquote>\n\n<h3>Environment:</h3>\n\n<ul>\n<li>Red Hat Enterprise Linux Server  - 7.5 (Maipo)</li>\n<li>Perl v5.16.3</li>\n<li>Mojolicious 8.0 (Supervillain)</li>\n<li>Minion 9.01</li>\n</ul>\n\n<h3>Mojolicious full app</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Apps;\n\nuse Moo;\nextends 'Mojolicious';\n\nsub startup {\n    my $self = shift;\n\n    $self-&gt;plugin(Config =&gt; file =&gt; '/var/www/apps/lib/appconf.perl');\n    $self-&gt;plugin(Minion =&gt; {SQLite =&gt; 'sqlite:/var/www/apps/db/minion_backend_sqlite.db'});\n    ...\n}\n</code></pre>\n\n<p><strong>This is how I start my server:</strong></p>\n\n<p><code>/usr/local/bin/hypnotoad /var/www/apps/script/apps</code></p>\n\n<p><strong>Currently, I start <a href=\"https://mojolicious.org/perldoc/Minion\" rel=\"nofollow noreferrer\">minion</a> worker in background( which also gets killed somehow after sometime, starangely) like this:</strong></p>\n\n<p><code>/var/www/apps/script/apps minion worker -m production</code></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544773242, "post_id": 53774095, "comment_id": 94401836, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/23733255/perl-xmllibxml-replace-text\">23733255</a>?"}, {"owner": {"reputation": 41, "user_id": 3687494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a89342c78f374cd60c8ad6a40e77878?s=128&d=identicon&r=PG&f=1", "display_name": "user49758", "link": "https://stackoverflow.com/users/3687494/user49758"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544793674, "post_id": 53774095, "comment_id": 94412302, "body": "@Stefan: I have updated my question and i would like to change the element tag &lt;mi&gt; should change to &lt;mtext&gt; globally. How to achieve this?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3687494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a89342c78f374cd60c8ad6a40e77878?s=128&d=identicon&r=PG&f=1", "display_name": "user49758", "link": "https://stackoverflow.com/users/3687494/user49758"}, "edited": false, "score": 0, "creation_date": 1545030784, "post_id": 53781479, "comment_id": 94469107, "body": "I had found the <code>xpath</code> solution is <code>$newNode-&gt;appendText($node-&gt;firstChild-&gt;data);</code>. But i have need to change <code>&lt;mi&gt;</code> to <code>&lt;mtext&gt;</code> more than one alphabetic characters. For example <code>&lt;mi&gt;ab&lt;&#47;mi&gt;</code> is need to change <code>&lt;mtext&gt;ab&lt;&#47;mtext&gt;</code>. and <code>&lt;mi&gt;d&lt;&#47;mi&gt;</code> is no need to change. How do fix this?"}, {"owner": {"reputation": 41, "user_id": 3687494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a89342c78f374cd60c8ad6a40e77878?s=128&d=identicon&r=PG&f=1", "display_name": "user49758", "link": "https://stackoverflow.com/users/3687494/user49758"}, "edited": false, "score": 0, "creation_date": 1545295593, "post_id": 53781479, "comment_id": 94577600, "body": "Thanks for your reply and my replacement text it any text as per <code>mathml</code> IN-TEXT. It&#39;s means &lt;mi&gt;abc&lt;/mi&gt;, &lt;mi&gt;dsa&lt;/mi&gt;, &lt;mi&gt;etc.&lt;/mi&gt;. Could you please advise and how do avoid single letter is no need to change <code>&lt;mtext&gt;</code>. For example, <code>&lt;mi&gt;a&lt;&#47;mi&gt;</code> need to mainintain <code>&lt;mi&gt;a&lt;&#47;mi&gt;</code> only."}, {"owner": {"reputation": 41, "user_id": 3687494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a89342c78f374cd60c8ad6a40e77878?s=128&d=identicon&r=PG&f=1", "display_name": "user49758", "link": "https://stackoverflow.com/users/3687494/user49758"}, "edited": false, "score": 0, "creation_date": 1545383003, "post_id": 53781479, "comment_id": 94610300, "body": "It&#39;s working fine and thanks for your spending your valuable time for this."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1545325134, "last_edit_date": 1545325134, "creation_date": 1544797212, "answer_id": 53781479, "question_id": 53774095, "link": "https://stackoverflow.com/questions/53774095/perl-with-xmllibxml-dom-globally-find-and-replace-xml/53781479#53781479", "title": "Perl with XML::LibXML Dom (Globally Find and Replace XML)", "body": "<p>Your XML has a namespace but your XPath queries don't, see note under <code>findnodes</code> in <code>man XML::LibXML::Node</code>. This code should work:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\nuse XML::LibXML::XPathContext;\n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; &lt;&lt;'END_OF_XML');\n&lt;math xmlns=\"http://www.w3.org/1998/Math/MathML\"&gt;\n    &lt;mfrac&gt;\n         &lt;mi&gt;a&lt;/mi&gt;\n         &lt;mrow&gt;\n            &lt;mi&gt;bcde&lt;/mi&gt;\n         &lt;/mrow&gt;\n    &lt;/mfrac&gt;\n    &lt;msqrt&gt;\n        &lt;mi&gt;s&lt;/mi&gt;\n        &lt;mi&gt;e&lt;/mi&gt;\n        &lt;mi&gt;f&lt;/mi&gt;\n    &lt;/msqrt&gt;\n&lt;/math&gt;\nEND_OF_XML\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs('math', 'http://www.w3.org/1998/Math/MathML');\n\nforeach my $node ($xpc-&gt;findnodes('/math:math/math:mfrac/math:mrow/math:mi', $dom)) {\n    my $newNode = XML::LibXML::Element-&gt;new('mtext');\n    $newNode-&gt;appendText('pqsd');\n\n    $node-&gt;replaceNode($newNode);\n}\n\nprint $dom-&gt;toString();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl dummy.pl\n&lt;?xml version=\"1.0\"?&gt;\n&lt;math xmlns=\"http://www.w3.org/1998/Math/MathML\"&gt;\n    &lt;mfrac&gt;\n         &lt;mi&gt;a&lt;/mi&gt;\n         &lt;mrow&gt;\n             &lt;mtext&gt;pqsd&lt;/mtext&gt;\n         &lt;/mrow&gt;\n    &lt;/mfrac&gt;\n    &lt;msqrt&gt;\n        &lt;mi&gt;s&lt;/mi&gt;\n        &lt;mi&gt;e&lt;/mi&gt;\n        &lt;mi&gt;f&lt;/mi&gt;\n    &lt;/msqrt&gt;\n&lt;/math&gt;\n</code></pre>\n\n<p><strong>EDIT</strong> Maybe I have misunderstood your question and you want to replace all occurrences of <code>&lt;mi&gt;bcde&lt;/mi&gt;</code>? Then the <code>foreach</code> would change to</p>\n\n<pre><code>foreach my $node ($xpc-&gt;findnodes('//math:mi[text()=\"bcde\"]', $dom)) {\n</code></pre>\n\n<p><strong>EDIT 2</strong> to find multiple <code>&lt;mi&gt;xyz&lt;/mi&gt;</code> and replace them you could use <code>text=replacement</code> command line parameters, i.e.</p>\n\n<pre><code>foreach my $argv (@ARGV) {\n    next\n        unless my($find, $replace) = ($argv =~ /^([^=]+)=(.*)$/);\n\n    foreach my $node ($xpc-&gt;findnodes(qq{//math:mi[text()=\"${find}\"]}, $dom)) {\n        my $newNode = XML::LibXML::Element-&gt;new('mtext');\n        $newNode-&gt;appendText($replace);\n\n        $node-&gt;replaceNode($newNode);\n    }\n}\n</code></pre>\n\n<p>and your replacement example would be</p>\n\n<pre><code>$ perl dummy.pl bcde=pqsd\n</code></pre>\n\n<p><strong>EDIT 3</strong> replace all <code>&lt;mi&gt;xxx&lt;/mi&gt;</code> where xxx has more than one character with <code>mtext</code>:</p>\n\n<pre><code>foreach my $node ($xpc-&gt;findnodes('//math:mi', $dom)) {\n    my $text = $node-&gt;textContent();\n\n    # strip surrounding white space from text\n    $text =~ s/^\\s+//;\n    $text =~ s/\\s+$//;\n\n    # if text has more than one character then replace \"mi\" with \"mtext\"\n    if (length($text) &gt; 1) {\n        my $newNode = XML::LibXML::Element-&gt;new('mtext');\n        $newNode-&gt;appendText($text);\n\n        $node-&gt;replaceNode($newNode);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3687494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a89342c78f374cd60c8ad6a40e77878?s=128&d=identicon&r=PG&f=1", "display_name": "user49758", "link": "https://stackoverflow.com/users/3687494/user49758"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 53781479, "answer_count": 1, "score": 1, "last_activity_date": 1545325134, "creation_date": 1544766369, "last_edit_date": 1544793619, "question_id": 53774095, "link": "https://stackoverflow.com/questions/53774095/perl-with-xmllibxml-dom-globally-find-and-replace-xml", "title": "Perl with XML::LibXML Dom (Globally Find and Replace XML)", "body": "<p>I am new to <code>DOM</code> and <code>XML-LibXML</code>.</p>\n\n<p>This is my sample mathml (XML) file. My XML filename is <code>in.xml</code> and i need the final output XML filename is <code>out.xml</code>. I would like to find <code>&lt;mi&gt;bcde&lt;/mi&gt;</code> and need to modify <code>&lt;mtext&gt;pqsd&lt;/mtext&gt;</code> globally and store in <code>out.xml</code>. How to achieve this.</p>\n\n<pre><code>&lt;math xmlns=\"http://www.w3.org/1998/Math/MathML\"&gt;\n    &lt;mfrac&gt;\n         &lt;mi&gt;a&lt;/mi&gt;\n         &lt;mrow&gt;\n            &lt;mi&gt;bcde&lt;/mi&gt;\n         &lt;/mrow&gt;\n    &lt;/mfrac&gt;\n    &lt;msqrt&gt;\n        &lt;mi&gt;s&lt;/mi&gt;\n        &lt;mi&gt;e&lt;/mi&gt;\n        &lt;mi&gt;f&lt;/mi&gt;\n    &lt;/msqrt&gt;\n&lt;/math&gt; \n\n\n#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\nuse XML::LibXML;\n\nmy $mediaIdFrom = \"MEDIAID_TEST\";\nmy $VodItemIdFrom = \"VODITEM_ID_TEST\";\nmy $mediaId=\"\";\nmy $vodItemId=\"\";\n\nmy $filename = 'sample1.xml';\nmy $out_filename = \"sample2.xml\";\n\nmy $dom = XML::LibXML -&gt; load_xml(location =&gt; $filename);\n\nforeach $mediaId ($dom-&gt;findnodes('/ScheduleProvider/Episode/Media/@id')) {\n    $mediaId-&gt;setValue(\"xx \" . $mediaIdFrom . \" yy\");\n}\n\nforeach $vodItemId ($dom-&gt;findnodes('/ScheduleProvider/VoidItem/@id')) {\n    $vodItemId-&gt;setValue($VodItemIdFrom);\n}\n#### for storing the output separate XML file\n$dom-&gt;toFile($out_filename);`\n</code></pre>\n"}, {"tags": ["regex", "bash", "macos", "perl"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1544760827, "post_id": 53773381, "comment_id": 94398320, "body": "Maybe by parsing it.  It look like XML to me, a syntax famously difficult to model in regex"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1544763074, "post_id": 53773381, "comment_id": 94398786, "body": "Choose the right tool first. I suggest to use an XML/HTML parser (xmlstarlet, e.g.)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544763690, "post_id": 53773381, "comment_id": 94398916, "body": "Regex <code>s&#47;a&#47;X&#47;</code> changes <code>a</code> to <code>X</code>, while <code>m&#47;a&#47;</code> <i>matches</i> <code>a</code> (well, tries to). Both by default work on <code>$_</code>. The match itself returns true/false, so you can do <code>say &quot;yes&quot; if &#47;a&#47;</code> (print yes if it matches <code>a</code>, so if there is an <code>a</code> in <code>$_</code>). You may leave off <code>m</code> with <code>&#47;...&#47;</code>. Then, if you add parens, <code>&#47;(a)&#47;</code> it also <i>captures</i> (whatever it matched, <code>a</code> here) and returns that if called in <i>list context</i>. Btw, use <code>$1</code> (etc) in replacement, not <code>\\1</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544764039, "post_id": 53773381, "comment_id": 94398989, "body": "But if you want to just scan the file to see whether that pattern is there, drop that <code>-i</code> and change <code>-p</code> to <code>-n</code>. So <code>perl -0777 -nE&#39;say &quot;yes&quot; if &#47;your-pattern&#47;&#39; ...</code>. The <code>-0777</code> slurps the whole file, which is what your <code>-0</code> is used, but <code>-0</code> <i>can</i> do something else in fact (even though it&#39;s unlikely)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544764373, "post_id": 53773381, "comment_id": 94399061, "body": "Now, if you are going to work with this please at least skim through <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> and <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perlrun</a>"}, {"owner": {"reputation": 581, "user_id": 8041935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edce89a4cdadcd918591f96c38a4f00?s=128&d=identicon&r=PG&f=1", "display_name": "CBlew", "link": "https://stackoverflow.com/users/8041935/cblew"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544764445, "post_id": 53773381, "comment_id": 94399072, "body": "@zdim Thanks for the pointers, mate."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544764677, "post_id": 53773381, "comment_id": 94399121, "body": "Like I showed you. You can invert the usual <code>if(COND) { ... }</code> in Perl (not exactly always) and go <code>say &quot;yes&quot; if COND;</code> (don&#39;t even need parens around condition now).  So what I used, <code>say &quot;yes&quot; if &#47;...&#47;;</code> tests whether the regex matches (against <code>$_</code> by default, which is the currently read line in a one-liner), and if it did it prints <code>yes</code>.  (The <code>say</code> is <code>print</code> with newline. To enable it you need <code>use feature &quot;say&quot;;</code>. In a one-liner, <code>-E</code> instead of <code>-e</code> enables all &quot;feature&quot;s.)  My second comment is the full one-liner; just put in <code>your-pattern</code> and files to process."}, {"owner": {"reputation": 581, "user_id": 8041935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edce89a4cdadcd918591f96c38a4f00?s=128&d=identicon&r=PG&f=1", "display_name": "CBlew", "link": "https://stackoverflow.com/users/8041935/cblew"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544764841, "post_id": 53773381, "comment_id": 94399155, "body": "@zdim Sorry, didn&#39;t see your second comment at first. If you post <code>perl -0777 -nE &#39;say &quot;yes&quot; if &#47;myKey\\s*\\n\\s*myValue&#47;&#39; -- &quot;$filepath&quot;</code>, I will gladly accept that as an answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544765282, "post_id": 53773381, "comment_id": 94399239, "body": "Oh, I see now (by your comment&#39;s edit). Thanks for the offer, but this may be a bit too basic to be considered generally useful on this site.  If I wrote up a little more it&#39;d be a generic introduction to basic regex concepts; well, many nice ones have been written :). Glad it helped :))  Thank you again for offering to take care of that :)"}, {"owner": {"reputation": 581, "user_id": 8041935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edce89a4cdadcd918591f96c38a4f00?s=128&d=identicon&r=PG&f=1", "display_name": "CBlew", "link": "https://stackoverflow.com/users/8041935/cblew"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544766366, "post_id": 53773381, "comment_id": 94399537, "body": "@zdim I would argue, that my problem was more with the fact that if one doesn&#39;t know perl, it is not obvious how to extract a yes/no answer out of <code>perl</code> command (since it always returns 0 unless execution error occurs). In hindsight, I should\u2019ve googled something like &#39;perl print statement&#39; and &#39;perl if construct&#39;. In any case, thank you again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544766785, "post_id": 53773381, "comment_id": 94399651, "body": "Well, it really isn&#39;t simple at all if you don&#39;t know the language; specially in a one-liner where a lot of language/syntax shortcuts are at work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544766977, "post_id": 53773381, "comment_id": 94399709, "body": "Come to think of it ... there is one other thing you can do: <code>exit</code> from that Perl program (one-liner) with a code that indicates whether there was a match or not.  So <code>perl -0777 -nE&#39;exit( &#47;...&#47; )&#39; ...</code>.  So after this command the <code>$?</code> (in <code>bash</code>) will have a <code>1</code> if there was a match, or <code>0</code> if there wasn&#39;t.  Better yet, it seems that you want to do that substitution but only want to <i>also</i> know whether anything was found ... in which case you can do the same, since <code>s&#47;..&#47;..&#47;</code> operator returns the number of subs made. So <code>perl -i -p0e &#39;exit(s&#47;...&#47;...&#47;)&#39; ...</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544767119, "post_id": 53773381, "comment_id": 94399755, "body": "Perhaps this would be good to write up (post) then, after all.  Please let me know whether that comment above makes sense -- is that better, that the bash script itself can check, and whether you&#39;d want to substitute <i>and</i> check?"}, {"owner": {"reputation": 581, "user_id": 8041935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edce89a4cdadcd918591f96c38a4f00?s=128&d=identicon&r=PG&f=1", "display_name": "CBlew", "link": "https://stackoverflow.com/users/8041935/cblew"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544767269, "post_id": 53773381, "comment_id": 94399804, "body": "@zdim And there it is, we\u2019ve come down to the very root of the problem. It\u2019s amazing what we can do with computers these days... The <code>exit(...)</code> part is perfect. I agree that a short write-up is warranted, if you have the time."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544767354, "post_id": 53773381, "comment_id": 94399833, "body": "Yes, this is good to post now, I think.  I&#39;ll get to it in a bit.  If you think of anything else/more please update the question."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1544945075, "last_edit_date": 1544945075, "creation_date": 1544769875, "answer_id": 53774692, "question_id": 53773381, "link": "https://stackoverflow.com/questions/53773381/match-multiline-pattern-in-bash-using-perl-on-macos/53774692#53774692", "title": "Match multiline pattern in bash using Perl on macOS", "body": "<p>For the basic question you only need to change the substitution operator to the match operator, and print conditionally on whether it matches or not. This can also be done with substitution.</p>\n\n<p>However, since this is in a <code>bash</code> script you can also <code>exit</code> from the perl program (one-liner) with a code that indicates whether there was a match/substitution; then the script can check <code>$?</code>.</p>\n\n<p>To only check whether a pattern is in a file</p>\n\n<pre><code>perl -0777 -nE'say \"yes\" if /pattern/' -- \"$file\"\n</code></pre>\n\n<p>The <code>-0777</code>, that \"slurps\" the whole file (into <code>$_</code>), is safer than <code>-0</code> which uses the null byte as records separator. Also, here you don't want <code>-i</code> (change file <em>in place</em>) and want <code>-n</code> (loop over records) instead of <code>-p</code> (also prints each). I use <code>-E</code> instead of <code>-e</code> to enable (all) <code>feature</code>s, for <code>say</code>. See all this <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">in perlrun</a>.</p>\n\n<p>Inside a shell script you can use the truthy/falsy return of the match operator in <code>exit</code></p>\n\n<pre><code>perl -0777 -nE'exit(/pattern/)' -- \"$file\"\n# now check $? in shell\n</code></pre>\n\n<p>where you can now programatically check whether the pattern was found in the file.</p>\n\n<p>Finally, to run the original substitution <em>and</em> be able to check whether any were made</p>\n\n<pre><code>perl -i -0777 -pe'exit(s/pattern/replacement/)' -- \"$file\"\n# now check $? in shell\n</code></pre>\n\n<p>where now the exit code, so <code>$?</code> in the shell, is the number of substitutions made.</p>\n\n<p>Keep in mind that this does abuse the basic success/failure logic of return codes.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> for a regex tutorial.</p>\n"}], "owner": {"reputation": 581, "user_id": 8041935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edce89a4cdadcd918591f96c38a4f00?s=128&d=identicon&r=PG&f=1", "display_name": "CBlew", "link": "https://stackoverflow.com/users/8041935/cblew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 53774692, "answer_count": 1, "score": 1, "last_activity_date": 1544945075, "creation_date": 1544760227, "last_edit_date": 1544767783, "question_id": 53773381, "link": "https://stackoverflow.com/questions/53773381/match-multiline-pattern-in-bash-using-perl-on-macos", "title": "Match multiline pattern in bash using Perl on macOS", "body": "<p>On <code>macOS</code>, using built-in <code>bash</code>, I need to match two words on two consecutive lines within a file, say <code>myKey</code> and <code>myValue</code>.</p>\n\n<p>Example file:</p>\n\n<pre><code>&lt;dict&gt;\n    &lt;key&gt;myKey&lt;/key&gt;\n    &lt;string&gt;myValue&lt;/string&gt;\n&lt;/dict&gt;\n</code></pre>\n\n<p>I already have a working command for <em>substituting</em> a value in such a pair using <code>perl</code>:</p>\n\n<pre><code>perl -i -p0e 's/(&lt;key&gt;myKey&lt;\\/key&gt;\\s*\\n\\s*&lt;string&gt;).+(&lt;\\/string&gt;)/$1newValue$2/' -- \"$filepath\"\n</code></pre>\n\n<p>Question is, how do I simply find whether the file <em>contains</em> that key/value pair, without substituting anything, or, more to the point, just get to know, whether any substitution was made?</p>\n\n<p>EDIT:</p>\n\n<ol>\n<li>Within replacement pattern: <code>\\1</code> -> <code>$1</code>.</li>\n<li>Added clarification to the question.</li>\n</ol>\n"}, {"tags": ["perl", "timeout", "waitpid"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1544737785, "post_id": 53770493, "comment_id": 94393023, "body": "See <a href=\"https://metacpan.org/pod/IPC::Cmd\" rel=\"nofollow noreferrer\">IPC::Cmd</a> it has a timeout parameter, so you can avoid the busy waiting loop. See also <a href=\"https://stackoverflow.com/q/50040421/2173773\">Timeout for launching a bash command in perl</a>"}, {"owner": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1544740908, "post_id": 53770493, "comment_id": 94394024, "body": "Using IPC::Cmd and run my script seems to patiently wait for the process to end and THEN notifiy me if it violated the timeout or not.  Running with &#39;ping google.com /t&#39; causes run to hang waiting for ping to stop even though i have timeout set to 4.  In linux it seems to work as intended."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544742426, "post_id": 53770493, "comment_id": 94394502, "body": "Unfortunately Windows does not have real forking so it is emulated via ithreads. Windows also does not support POSIX signaling. This is probably why you&#39;re seeing different behavior."}], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544745484, "post_id": 53771631, "comment_id": 94395346, "body": "That works.... strangely...If I just use your code and replace sleep 20 with ping google.com /t then I get the following message on prompt: &quot;Terminating on signal SIGBREAK(21)&quot; and my script completely dies.   If it put in a catch for $SIG{BREAK} then i see my SIG{BREAK} message at about the timeout period i put in.... but the script still hangs on the ping for at least another 20 seconds....  Maybe it&#39;s trying to somehow gracefully kill the command?  Can i make it more forceful?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544746038, "post_id": 53771631, "comment_id": 94395484, "body": "@serpixo heh ... I had searched before posting (can&#39;t test on Win right now), and there were a few references to <code>SIGBREAK</code> -- but only with regards to the module <i>installation</i>.  There are other ways to time stuff, and full example(s) on the linked section of the docs.  Can you look there? I just can&#39;t test on Windows right now :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544747066, "post_id": 53771631, "comment_id": 94395739, "body": "@serpixo  If you can catch it then you can almost surely rig it.  I&#39;d try this: <a href=\"https://metacpan.org/pod/IPC::Run#kill_kill\" rel=\"nofollow noreferrer\">kill_kill</a> that command in the &quot;signal&quot; handler (no true signals on Win32 but only emulation of basic ones).  Of course, it&#39;d be better to not have to do all that; try other other way(s) to time from docs."}, {"owner": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544747355, "post_id": 53771631, "comment_id": 94395803, "body": "Thanks zdim, I&#39;ll get back to you if I find something that works better.  For now your solution is the best  for my needs.  Hopefully I&#39;ll find a more... timely solution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544747508, "post_id": 53771631, "comment_id": 94395830, "body": "@serpixo OK. I&#39;ll look more and try to test on Windows later.  If it stays at terminating the process manually out of the handler please let me know and I can add code for that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "edited": false, "score": 0, "creation_date": 1544773892, "post_id": 53771631, "comment_id": 94402075, "body": "@serpixo Added a way to stop the process from the handler. Still can&#39;t test on Windows (my VM is busted) ... :(. Tested on Linux with <code>$SIG{INT}</code> instead."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1577325747, "last_edit_date": 1577325747, "creation_date": 1544744400, "answer_id": 53771631, "question_id": 53770493, "link": "https://stackoverflow.com/questions/53770493/perl-timeout-command-in-windows-and-linux/53771631#53771631", "title": "Perl timeout command in windows and linux", "body": "<p>The <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> has support for various <a href=\"https://metacpan.org/pod/IPC::Run#Timeouts-and-Timers\" rel=\"nofollow noreferrer\">timeouts and timers</a>, which should also work on Win32.</p>\n\n<p>Basic:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse IPC::Run qw(run timeout);\n\nmy $out;\n\neval {\n    run [ qw(sleep 20) ], \\undef, \\$out, timeout(2) or die \"Can't run: $?\"\n};  \nif ($@) { \n    die $@ if $@ !~ /^IPC::Run: timeout/;\n    say \"Eval: $@\";\n}\n</code></pre>\n\n<p>The <code>timeout</code> throws an exception, thus the <code>eval</code>.  There are other timers, with behavior which is more subtle and manageable. Please see documentation.</p>\n\n<p>The exception is re-thrown if the one caught isn't caused by <code>IPC::Run</code>'s timer -- judged by what the module's version on my system prints in the message, a string starting with <em>IPC::Run: timeout</em>. Please check what that is on your system.</p>\n\n<p>While some things don't work on Windows the timers should, I think. I can't test right now.</p>\n\n<hr>\n\n<p>It's reported that, while the above works, with a more meaningful command in place the <code>SIGBREAK (21)</code> is emitted at timeout, and once it is handled the process stays around.</p>\n\n<p>In this case terminate it manually in the handler</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse IPC::Run qw(run harness timeout);\n\nmy $out;\nmy @cmd = qw(sleep 20);\n\nmy $h = harness \\@cmd, \\undef, \\$out, timeout(2);\n\nHANDLE_RUN: {\n    local $SIG{BREAK} = sub {\n        say \"Got $_[0]. Terminate IPC::Run's process\";\n        $h-&gt;kill_kill;\n    };  \n\n    eval { run $h };  \n    if ($@) { \n        die $@ if $@ !~ /^IPC::Run: timeout/;\n        say \"Eval: $@\";\n    }\n};\n</code></pre>\n\n<p>In order to be able to use the module's <code>kill_kill</code> here I first create the harness, which is then available when the handler is installed, and on which <code>kill_kill</code> can be called when it fires.</p>\n\n<p>Another way would be to find the process ID (with <a href=\"https://metacpan.org/pod/release/PLICEASE/Win32-Process-Info-1.022/lib/Win32/Process/Info.pm\" rel=\"nofollow noreferrer\">Win32::Process::Info</a> or <a href=\"https://metacpan.org/pod/release/RPAGITSCH/Win32-Process-List-0.09/List.pm\" rel=\"nofollow noreferrer\">Win32::Process::List</a>),\nand terminate it with <code>kill</code>, or <a href=\"https://metacpan.org/pod/release/JDB/Win32-Process-0.16/Process.pm\" rel=\"nofollow noreferrer\">Win32::Process</a>, or <code>TASKKILL</code>.  See <a href=\"https://stackoverflow.com/a/36470817/4653379\">this post</a> (second half).</p>\n\n<p>A block is added only to <code>local</code>-ize the signal handler. In real code all this is likely scoped in some way so an extra block may not be needed.</p>\n\n<p>Note that Windows doesn't have POSIX signals and that Perl emulates only a few very basic UNIX signals, along with the Windows-specific <code>SIGBREAK</code>.</p>\n"}], "owner": {"reputation": 310, "user_id": 5666808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a2fd91126cff4d5a3cd36caa2c042e?s=128&d=identicon&r=PG&f=1", "display_name": "serpixo", "link": "https://stackoverflow.com/users/5666808/serpixo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 53771631, "answer_count": 1, "score": 5, "last_activity_date": 1577325747, "creation_date": 1544737281, "last_edit_date": 1544737683, "question_id": 53770493, "link": "https://stackoverflow.com/questions/53770493/perl-timeout-command-in-windows-and-linux", "title": "Perl timeout command in windows and linux", "body": "<p>I'm writing a perl script that needs to work in windows and linux that will run a process, timeout if it takes too long, return the exit code assuming it didn't timeout, and return stdout assuming the exitcode was zero and it didn't timeout. I don't need STDIN or STDERR. I've tried to use <code>IPC::run</code> but couldn't get it to work.</p>\n\n<p>The closest I got is with <code>IPC::Open3</code> and <code>waitpid($pid, WNOHANG)</code>.  But I've hit a snag.  I'm seeing different results on windows and linux.  In the code below I give <code>open3</code> a command that will fail (ping doesn't have any argument <code>-z</code>).  On linux the code immediately returns a negative exit code.  On windows the command times out.  Running <code>ping google.com -z</code> on the windows command line immediately returns telling me there is no such argument.  Why does ``waitpid` return a zero?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse POSIX \":sys_wait_h\";\nuse IPC::Open3;\n\nmy $inFH;\nmy $outFH;\nmy @cmd = (\"ping\", \"google.com\", \"-z\");\nmy $pid = open3( $inFH, $outFH, 0, @cmd);\nmy $counter=0;\nmy $waitret;\nmy $exitcode;\ndo{\n    $counter++;\n    $waitret = waitpid($pid,WNOHANG);   \n    $exitcode = $?;\n}while( !$waitret and ($counter &lt; 4_000_000));\n\nif ($counter &gt;= 4_000_000) {\n    print \"Command timed out\\n\";\n    kill(9, $pid);\n} else {\n    print \"Exit Code: $exitcode\\n\";\n}\n</code></pre>\n\n<p>Other solutions are welcome. The only reason I use waitpid with nohang is to kill the process if it takes too long.  I dont have any other processing I need to do in the meantime.\nI'm using windows 10 strawberry perl 5.28 portable on windows.  My debian machine has perl 5.24.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1544730080, "creation_date": 1544730080, "answer_id": 53768988, "question_id": 53768130, "link": "https://stackoverflow.com/questions/53768130/reorganizing-a-file-in-a-special-way-perl/53768988#53768988", "title": "reorganizing a file in a special way [Perl]", "body": "<p>You could build a hash of pids keyed by parent pid.</p>\n\n<pre><code>use feature qw( current_sub );\n\nuse Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nmy %process_children_by_pid;\nmy %process_name_by_pid;\nwhile (my $row = $csv-&gt;getline(*STDIN)) {\n   my ($pid, $parent, $name) = @$row;\n   $process_name_by_pid{$pid} = $name;\n   push @{ $processes_children_by_pid{$parent} }, $pid;\n}\n\nsub {\n   my $pid = pop;\n   push @_, $process_name_by_pid{$pid};\n   $csv-&gt;say(*STDOUT, \\@_);\n   __SUB__-&gt;(@_, $_) for @{ $processes_children_by_pid{$pid} };\n}-&gt;($_) for @{ $processes_children_by_pid{'*'} };\n</code></pre>\n\n<p>Or you could use Graph.pm. This has more overhead, but it makes error checking easy.</p>\n\n<pre><code>use feature qw( current_sub );\n\nuse Graph        qw( );\nuse Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nmy $tree = Graph-&gt;new();\nmy %process_name_by_pid;\nwhile (my $row = $csv-&gt;getline(*STDIN)) {\n   my ($pid, $parent, $name) = @$row;\n   $process_name_by_pid{$pid} = $name;\n   $tree-&gt;add_edge($parent, $pid);\n}\n\ndie \"Bad data\" if $tree-&gt;has_a_cycle;\n\nmy @roots = $tree-&gt;predecessorless_vertices();\ndie \"Bad data\" if @roots != 1 || $roots[0] ne '*';\n\nsub {\n   my $pid = pop;\n   push @_, $process_name_by_pid{$pid};\n   $csv-&gt;say(*STDOUT, \\@_);\n   __SUB__-&gt;(@_, $_) for $tree-&gt;successors($pid);\n}-&gt;($_) for $tree-&gt;successors('*');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544820609, "post_id": 53780403, "comment_id": 94424957, "body": "PIDs are 16-bit numbers, if not larger. Using a hash would be better than an array. /// This mis-parses and mis-generates CSV. Use a module; it&#39;s just two extra lines. /// This approach makes 15 process name lookups for the sample data, whereas mine only does 6. /// This version assumes the children always come after their parents in the input. That&#39;s an unsafe assumption since the format is suggestive of a database table. /// All those limitations for what?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544821083, "post_id": 53780403, "comment_id": 94425134, "body": "For deep trees, it would be faster to using <code>push</code> then <code>reverse</code> instead of <code>unshift</code>. <code>unshift</code> is optimized, but still leads to multiple whole-array copies in that situation. (For shallow trees, it probably doesn&#39;t matter either way)"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1545124481, "post_id": 53780403, "comment_id": 94507676, "body": "@Hambone, I really like your solution. One problem is that your solution is depended on the that the main parent line location (meaning it should be at the first line when it should not always be like this). For example fo <code>6,5,XYZ \\n 5,*,ABC</code> it won&#39;t give the expected output. Is it possible to insert the data into a hash or an array instead of printing?"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545145066, "post_id": 53780403, "comment_id": 94519392, "body": "Your feedback is appropriate and consistent with ikegami&#39;s.  Perl is obviously not my core competency -- I love it and use it in my work, but I am far from an expert and would defer to experts like ikegami on best practices.  I did edit the solution to use a hash instead of an array, and it&#39;s no longer dependent on file order -- although the solution was to &quot;rewind&quot; the file to the beginning.  It still suffers from multiple lookups for the same items, as pointed out."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545145312, "post_id": 53780403, "comment_id": 94519528, "body": "Also, you could certainly loop through the results via an array/hash instead of printing...  can you clarify specifically how you would want that done?"}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 0, "last_activity_date": 1545144909, "last_edit_date": 1545144909, "creation_date": 1544792802, "answer_id": 53780403, "question_id": 53768130, "link": "https://stackoverflow.com/questions/53768130/reorganizing-a-file-in-a-special-way-perl/53780403#53780403", "title": "reorganizing a file in a special way [Perl]", "body": "<p>I would handle it by storing an array of the parent relationships and then traversing through that array each time a line was read:</p>\n\n<pre><code>my @parent;\n\nopen my $IN, '&lt;', 'file' or die;\nwhile (&lt;$IN&gt;) {\n  chomp;\n  my ($id, $parent, $name) = split /,/;\n  $parent[$id] = [ $parent, $name ];\n\n  if ($parent eq '*') {\n    print $name;\n  } else {\n    my @output = ( [ $parent, $name ] );\n\n    while (my $p = $parent[${$output[0]}[0]]) {\n      unshift @output, $p;\n    }\n\n    print join ',', map { ${$_}[1] } @output;\n  }\n\n  print \"\\n\";\n}\nclose $IN;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ABC\nABC,XYZ\nABC,123\nABC,XYZ,xyz\nABC,XYZ,xyz,xox\nABC,XYZ,yoy\n</code></pre>\n\n<p>-- EDIT -- Per feedback, revised to use hashes and not be dependent on file order:</p>\n\n<pre><code>my %parent;\n\nopen my $IN, '&lt;', 'file' or die;\nwhile (&lt;$IN&gt;) {\n  chomp;\n  my ($id, $parent, $name) = split /,/;\n  $parent{$id} = [ $parent, $name ];\n}\n\nseek $IN, 0, 0;\nwhile (&lt;$IN&gt;) {\n  chomp;\n  my ($id, $parent, $name) = split /,/;\n\n  if ($parent eq '*') {\n    print $name;\n  } else {\n    my @output = ( [ $parent, $name ] );\n\n    while (my $p = $parent{${$output[0]}[0]}) {\n      unshift @output, $p;\n    }\n\n    print join ',', map { ${$_}[1] } @output;\n  }\n\n  print \"\\n\";\n}\nclose $IN;\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1545144909, "creation_date": 1544726017, "question_id": 53768130, "link": "https://stackoverflow.com/questions/53768130/reorganizing-a-file-in-a-special-way-perl", "title": "reorganizing a file in a special way [Perl]", "body": "<p>Consider the following file:</p>\n\n<pre><code>5,*,ABC\n6,5,XYZ\n7,5,123\n4,6,xyz\n1,4,xox\n8,6,yoy\n</code></pre>\n\n<p>The format of each line: (<code>*</code> has no parent)</p>\n\n<pre><code>pid,parent-pid,name\n</code></pre>\n\n<p>I would like to somehow to create the following file:</p>\n\n<pre><code>ABC,\nABC,XYZ\nABC,123\nABC,XYZ,xyz\nABC,XYZ,xyz,xyx\nABC,XYZ,yoy\n</code></pre>\n\n<p>Meaning for every PID, I can go to its greatest parent on the same line.\nI thought to implement it (in Perl) with hash by inserting it into a hash. problem is I don't really know what would be the length of each line and then the length of the hash.\nAlso, I'm looking for the most efficient way possible.</p>\n\n<p>What good algorithm would solve this problem?</p>\n"}, {"tags": ["regex", "bash", "git", "perl"], "comments": [{"owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1544715624, "post_id": 53764609, "comment_id": 94382597, "body": "@oguzismail done - thanks for the comment."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1544715180, "creation_date": 1544715180, "answer_id": 53765212, "question_id": 53764609, "link": "https://stackoverflow.com/questions/53764609/multi-line-regex-should-match-multiple-times-in-a-file-one-line-command-if-poss/53765212#53765212", "title": "Multi-line regex should match multiple times in a file (one-line command if possible)", "body": "<p>The <code>//g</code> operator returns the captured results in list context. Since there are 5 sets of capturing parentheses and 4 matches, the returned list has 20 elements. You need to iterate over that list. Your code only looks at the first match. Here's one technique:</p>\n\n<pre><code>perl -0777 -nE '\n    @matches = /commit (.+)\\n(?:.*\\n)+?similarity index (\\d+)+%\\n(rename|copy) from (.+)\\n\\3 to (.+)\\n/g;\n    $\" = \",\";\n    while (@matches) {\n        @thismatch = splice @matches, 0, 5;\n        say \"@thismatch\";\n    }\n' Pawns.java.history.txt \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1544715493, "creation_date": 1544715493, "answer_id": 53765315, "question_id": 53764609, "link": "https://stackoverflow.com/questions/53764609/multi-line-regex-should-match-multiple-times-in-a-file-one-line-command-if-poss/53765315#53765315", "title": "Multi-line regex should match multiple times in a file (one-line command if possible)", "body": "<p>You just need to convert your <code>if</code> with <code>while</code>:</p>\n\n<pre><code>perl -0777 -ne 'while (/commit (.+)\\n(?:.*\\n)+?similarity index (\\d+)+%\\n(rename|copy) from (.+)\\n\\3 to (.+)\\n/g) { print $1.\",\".$2.\",\".$3.\",\".$4.\",\".$5.\"\\n\" }' file\n</code></pre>\n\n<p></p>\n\n<pre><code>2701af4b3b66340644b01835a03bcc760e1606f8,100,rename,alexo-chess/src/ao/chess/v2/move/Pawns.java,alexo-chess/src/main/java/ao/chess/v2/move/Pawns.java\nea53898dcc969286078700f42ca5be36789e7ea7,100,copy,src/chess/v2/move/Pawns.java,alexo-chess/src/ao/chess/v2/move/Pawns.java\nb869f395429a2c1345ce100953bfc6038d9835f5,100,copy,ao/chess/v2/move/Pawns.java,src/chess/v2/move/Pawns.java\n4c697c510f5154d20be7500be1cbdecbaf99495c,95,rename,v2/move/Pawns.java,ao/chess/v2/move/Pawns.java\n</code></pre>\n"}], "owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 53765315, "answer_count": 2, "score": 3, "last_activity_date": 1544715493, "creation_date": 1544713142, "last_edit_date": 1544715356, "question_id": 53764609, "link": "https://stackoverflow.com/questions/53764609/multi-line-regex-should-match-multiple-times-in-a-file-one-line-command-if-poss", "title": "Multi-line regex should match multiple times in a file (one-line command if possible)", "body": "<p>I'm trying to convert some (multi-line) git history info (extract file name changes) into a CSV file. Here's my <a href=\"https://www.debuggex.com/r/ziqa0AV9QQ4MZQzj\" rel=\"nofollow noreferrer\">regex and sample file</a>. It's working perfectly on that site.</p>\n\n<p>Regex:</p>\n\n<pre><code>commit (.+)\\n(?:.*\\n)+?similarity index (\\d+)+%\\n(rename|copy) from (.+)\\n\\3 to (.+)\\n\n</code></pre>\n\n<p>Sample input:</p>\n\n<pre><code>commit 2701af4b3b66340644b01835a03bcc760e1606f8\nAuthor: ostrovsky.alex &lt;ostrovsky.alex@a51b5712-02d0-11de-9992-cbdf800730d7&gt;\nDate:   Sat Oct 16 20:44:32 2010 +0000\n\n    * Moved old sources to Maven src/main/java\n\ndiff --git a/alexo-chess/src/ao/chess/v2/move/Pawns.java b/alexo-chess/src/main/java/ao/chess/v2/move/Pawns.java\nsimilarity index 100%\nrename from alexo-chess/src/ao/chess/v2/move/Pawns.java\nrename to alexo-chess/src/main/java/ao/chess/v2/move/Pawns.java\n\ncommit ea53898dcc969286078700f42ca5be36789e7ea7\nAuthor: ostrovsky.alex &lt;ostrovsky.alex@a51b5712-02d0-11de-9992-cbdf800730d7&gt;\nDate:   Sat Oct 17 03:30:43 2009 +0000\n\n    synch\n\ndiff --git a/src/chess/v2/move/Pawns.java b/alexo-chess/src/ao/chess/v2/move/Pawns.java\nsimilarity index 100%\ncopy from src/chess/v2/move/Pawns.java\ncopy to alexo-chess/src/ao/chess/v2/move/Pawns.java\n\ncommit b869f395429a2c1345ce100953bfc6038d9835f5\nAuthor: ostrovsky.alex &lt;ostrovsky.alex@a51b5712-02d0-11de-9992-cbdf800730d7&gt;\nDate:   Wed Oct 7 22:43:06 2009 +0000\n\n    MctsPlayer works\n\ndiff --git a/ao/chess/v2/move/Pawns.java b/src/chess/v2/move/Pawns.java\nsimilarity index 100%\ncopy from ao/chess/v2/move/Pawns.java\ncopy to src/chess/v2/move/Pawns.java\n\ncommit 4c697c510f5154d20be7500be1cbdecbaf99495c\nAuthor: ostrovsky.alex &lt;ostrovsky.alex@a51b5712-02d0-11de-9992-cbdf800730d7&gt;\nDate:   Wed Sep 23 15:06:17 2009 +0000\n\n    * synch\n\ndiff --git a/v2/move/Pawns.java b/ao/chess/v2/move/Pawns.java\nsimilarity index 95%\nrename from v2/move/Pawns.java\nrename to ao/chess/v2/move/Pawns.java\nindex e0172a3..e3659c5 100644\n--- a/v2/move/Pawns.java\n+++ b/ao/chess/v2/move/Pawns.java\n</code></pre>\n\n<p>However, when I try to run the following <code>perl</code> command (in git bash on Windows 10), I only get a single matching line (as opposed to the 4 lines in the sample you can see on the site I linked to above). </p>\n\n<p>I know it's probably something stupid, like it needs to be in a loop. But I'm confused about slurping <code>-0777</code> and applying a pattern multiple times. I tried the <code>-p</code> option but it prints out the entire input, and I only want to see output from the <code>print</code> (i.e., the CSV lines). I also thought <code>/g</code> would make the pattern be applied multiple times to the input file, but since <code>-0777</code> makes it all one line, I'm not sure anymore.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>&lt;Pawns.java.history.txt perl -0777 -ne 'if (/commit (.+)\\n(?:.*\\n)+?similarity index (\\d+)+%\\n(rename|copy) from (.+)\\n\\3 to (.+)\\n/g) { print $1.\",\".$2.\",\".$3.\",\".$4.\",\".$5.\"\\n\" }'\n</code></pre>\n\n<p>The output is only one line, whereas it should be 4 lines in total with the <a href=\"https://www.debuggex.com/r/ziqa0AV9QQ4MZQzj\" rel=\"nofollow noreferrer\">sample file</a>:</p>\n\n<pre><code>2701af4b3b66340644b01835a03bcc760e1606f8,100,rename,alexo-chess/src/ao/chess/v2/move/Pawns.java,alexo-chess/src/main/java/ao/chess/v2/move/Pawns.java\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>2701af4b3b66340644b01835a03bcc760e1606f8,100,rename,alexo-chess/src/ao/chess/v2/move/Pawns.java,alexo-chess/src/main/java/ao/chess/v2/move/Pawns.java\nea53898dcc969286078700f42ca5be36789e7ea7,100,copy,src/chess/v2/move/Pawns.java,alexo-chess/src/ao/chess/v2/move/Pawns.java\nb869f395429a2c1345ce100953bfc6038d9835f5,100,copy,ao/chess/v2/move/Pawns.java,src/chess/v2/move/Pawns.java\n4c697c510f5154d20be7500be1cbdecbaf99495c,95,rename,v2/move/Pawns.java,ao/chess/v2/move/Pawns.java\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl", "unix"], "comments": [{"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 1, "creation_date": 1544712821, "post_id": 53764424, "comment_id": 94380727, "body": "We&#39;ll need to see more of the code."}, {"owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "reply_to_user": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1544713410, "post_id": 53764424, "comment_id": 94381125, "body": "I&#39;m just asking about how to send the indicator, not anything to do with the rest of the logic (which is substantial). What more would you like to see?"}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1544714502, "post_id": 53764424, "comment_id": 94381806, "body": "A main point of <a href=\"https://stackoverflow.com/help/asking\">this guide to good questions</a> is creating an <a href=\"https://stackoverflow.com/help/mcve\">example of what you&#39;ve tried</a> for us to suggest improvements. Without it folk might be inclined to downvote for <a href=\"http://idownvotedbecau.se/nocode/\" rel=\"nofollow noreferrer\">no code</a>, <a href=\"http://idownvotedbecau.se/noresearch/\" rel=\"nofollow noreferrer\">no research</a>, or of course, <a href=\"http://idownvotedbecau.se/nomcve/\" rel=\"nofollow noreferrer\">no MCVE</a>. Give us context. :)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1544715748, "post_id": 53764424, "comment_id": 94382671, "body": "Your perl command invokes the report.sh script and uudecodes the entire output. Now you want the report script to print the uuencoded data <b>and</b> some plain text?"}, {"owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "edited": false, "score": 0, "creation_date": 1544715959, "post_id": 53764424, "comment_id": 94382807, "body": "I think it all has to be uuencoded data because of how the network works. I&#39;ll update my question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544731776, "post_id": 53764424, "comment_id": 94390503, "body": "I am not sure that I get it ... if you need to change the shell script called by a Perl script so that it sends back yet more information, can you not just add to the shell script a print to <code>STDOUT</code>? I don&#39;t know how you run the shell script, but you can do it so to get every &quot;line&quot; as it is printed.  Then you can check each line to see whether it conforms to some &quot;protocol&quot; (for instance, whether it is, or starts with, <code>special-file-found</code> string) and act accordingly -- set flags for further calls or write control file for following runs, etc. If it doesn&#39;t, it&#39;s the encoded file."}, {"owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "edited": false, "score": 0, "creation_date": 1544735195, "post_id": 53764424, "comment_id": 94391948, "body": "zdim That pretty much answers my question, if you want to post it as an Answer and get a nice check mark :) Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544775457, "post_id": 53764424, "comment_id": 94402693, "body": "Alright, posted, with a basic example.  Let me know how it goes"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1577327326, "last_edit_date": 1577327326, "creation_date": 1544746147, "answer_id": 53771843, "question_id": 53764424, "link": "https://stackoverflow.com/questions/53764424/pass-a-indicator-from-bash-back-to-perl-over-ssh-via-stdin/53771843#53771843", "title": "Pass a indicator from Bash back to Perl over SSH via STDIN", "body": "<p>I take it that the objective is to modify a shell script which returns to the caller an encoded file, so that it sends yet more information, specifically a string to be used as a flag in the caller.</p>\n\n<p>It is not clear how the shell script is run from the Perl script, but there are ways to do this so that the caller gets back separate \"lines\" that are printed, either as they are emitted or altogether after the run completes. </p>\n\n<p>Then you can just add to the shell script the needed extra print to <code>STDOUT</code>, and in the caller check each line of shell output to see whether it conforms to some \"protocol;\" for example, whether it is, or starts with, <em>special-file-found</em> string. Then you can set flags for further calls or write control file for following runs, etc. Otherwise, the line is the encoded file.</p>\n\n<p>A made-up basic example using <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">pipe-open</a> (see by the end of the page)</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @cmd = qw(ls -l ./);\n\nmy $file_found = quotemeta 'special-file-found';\n\nmy ($flag, $binfile);\n\nmy $pid = open(my $out, '-|', @cmd)   // die \"Can't open @cmd: $!\";\n\nwhile (&lt;$out&gt;) {\n    chomp;\n    if (/^$file_found/) { \n        $flag = 1;\n    }\n    else {\n        $binfile = $_;\n        # whatever else need be done, or perhaps  last;\n    }\n}\nclose $out;\n</code></pre>\n\n<p>This example runs the command <code>ls -l ./</code> but instead of it you can run any executable, like <code>@cmd = ('report.sh', 'arg1', 'arg2',...)</code>.</p>\n\n<p>Another way is to use <em>backticks</em> (<a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">qx</a>) and assign its return to an array, in which case each element receives a line of output. </p>\n\n<p>Yet another, better, way is to use a module which manages  external commands.  For example, from simple to more capable: <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>, <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>, <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n"}], "owner": {"reputation": 647, "user_id": 4288069, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OitGe.jpg?s=128&g=1", "display_name": "Ben Quigley", "link": "https://stackoverflow.com/users/4288069/ben-quigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 53771843, "answer_count": 1, "score": 3, "last_activity_date": 1577327326, "creation_date": 1544712412, "last_edit_date": 1544716528, "question_id": 53764424, "link": "https://stackoverflow.com/questions/53764424/pass-a-indicator-from-bash-back-to-perl-over-ssh-via-stdin", "title": "Pass a indicator from Bash back to Perl over SSH via STDIN", "body": "<p>We have a Linux server which can run a diagnostic script, <code>diag.pl</code>, which coordinates reporting over other servers.</p>\n\n<p><code>diag.pl</code> iterates over the child servers, and for each of them, SSHs in and runs a bash script, which passes information back:</p>\n\n<pre><code>my $cmd=sprintf(\"ssh %s sudo /usr/lib/support/report.sh -e %s | uudecode -o \\\"%s-outfile.tgz\\\") 2&gt;%1 |\", $server, $specialparam, $servername)\n</code></pre>\n\n<p>The line of code in <code>report.sh</code> that sends the data back is:</p>\n\n<pre><code> uuencode --base64 ${REPORT}.tar.gz /dev/stdout\n</code></pre>\n\n<p>I would like to update <code>report.sh</code> to send back an additional line of information, something like:</p>\n\n<pre><code> echo \"special-file-found=${SFF}\" &gt; /tmp/sff.cfg\n uuencode --base64 /tmp/sff.cfg &gt; /dev/stdout\n</code></pre>\n\n<p>Once the special file has been found, the Perl script will update so that it no longer sends the <code>specialparam</code> back to subsequent <code>report.sh</code> calls.</p>\n\n<p>Is there a good way to send that input so that it will be easy for Perl to catch it?</p>\n\n<p><strong>What have I tried</strong></p>\n\n<ol>\n<li>Setting a <code>user.comment</code> attr on the tar.gz using <code>setattr</code>, but the comment does not survive the uuencoding</li>\n<li>Currently thinking that my best bet is to use the pseudocode above, creating a new file to encode and send along, and update the Perl script to check it with each new transmission until it finds the special file.</li>\n</ol>\n"}, {"tags": ["perl", "cpanm"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1544712323, "post_id": 53763790, "comment_id": 94380405, "body": "Not having Archive::Extract installed suggests you are using a really old version of Perl. What does <code>perl -v</code> produce?"}, {"owner": {"reputation": 169, "user_id": 5454215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zbHsB.jpg?s=128&g=1", "display_name": "Poiu Rewq", "link": "https://stackoverflow.com/users/5454215/poiu-rewq"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1544714567, "post_id": 53763790, "comment_id": 94381858, "body": "@JGNI it&#39;s 5.10.1, but I think, using local::lib somehow makes it older or something, I don&#39;t know, what&#39;s happening :("}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 4, "creation_date": 1544716184, "post_id": 53763790, "comment_id": 94382967, "body": "Ok try using perlbrew <a href=\"https://metacpan.org/pod/App::perlbrew\" rel=\"nofollow noreferrer\">metacpan.org/pod/App::perlbrew</a> which lets you install your own version of Perl in your home directory"}], "owner": {"reputation": 169, "user_id": 5454215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zbHsB.jpg?s=128&g=1", "display_name": "Poiu Rewq", "link": "https://stackoverflow.com/users/5454215/poiu-rewq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544776754, "creation_date": 1544710336, "question_id": 53763790, "link": "https://stackoverflow.com/questions/53763790/failing-to-start-perl-program-because-of-missing-modules", "title": "Failing to start perl program because of missing modules", "body": "<p>Okay, so I'm not familiar with perl and all I want is to run a bioinformatic tool from <a href=\"http://www.smallrnagroup.uni-mainz.de/software.html\" rel=\"nofollow noreferrer\">here</a> on a server where I don't have root privileges. But I keep getting errors about missing modules:</p>\n\n<pre><code>Perl module Archive::Extract (in core since 2007-07-07) is not installed on this machine!\nPerl modules are available for download at http://www.cpan.org/\n\nIf you have CPAN installed try the following:\n cpan\n install Archive::Extract\n exit\n</code></pre>\n\n<p>Our system administrator is a huge Richard, so, naturally, I went to search for answers online and it only got worse! I tried to set up PERL5LIB, I found and installed cpanm from <a href=\"https://stackoverflow.com/questions/2980297/how-can-i-use-cpan-as-a-non-root-user\">this</a> answer. Then it worked, but when I tried to install Archive::Extract it said:</p>\n\n<pre><code>Archive::Extract is up to date. (0.80)\n</code></pre>\n\n<p>And now I'm about to lose my mind. Please help me before I crash that server with a sledgehammer (just kidding, but any help is much appreciated).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544710197, "post_id": 53763709, "comment_id": 94379039, "body": "1) By using <code>-&gt;file()</code>, you specifically filter out directories. 2) You need to use <code>rmdir</code> for directories, not <code>unlink</code>."}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1544711907, "post_id": 53763709, "comment_id": 94380098, "body": "Perhaps &quot;rmdir -r&quot; ?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544714356, "post_id": 53763709, "comment_id": 94381710, "body": "Are you just trying to delete all subdirectories under a given directory ?"}, {"owner": {"reputation": 37, "user_id": 8610171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b40eb1fa410fc5f2ddd552c9529ead?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj.V", "link": "https://stackoverflow.com/users/8610171/manoj-v"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544716513, "post_id": 53763709, "comment_id": 94383144, "body": "@GMB, Yes.. All subdirectories and files in the given directory if it is 90 days old."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544717200, "post_id": 53763709, "comment_id": 94383488, "body": "Ok. Are there any nested subdirectories in your subdirectories ?"}, {"owner": {"reputation": 37, "user_id": 8610171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b40eb1fa410fc5f2ddd552c9529ead?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj.V", "link": "https://stackoverflow.com/users/8610171/manoj-v"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544718258, "post_id": 53763709, "comment_id": 94384139, "body": "@GMB, No.. Mostly files are residing in the main directory."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544726246, "post_id": 53763709, "comment_id": 94388111, "body": "To remove a directory and all its contents use <a href=\"https://perldoc.pl/File::Path#remove_tree(-%24dir1,-%24dir2,-....-)\" rel=\"nofollow noreferrer\">remove_tree from File::Path</a> or the <a href=\"https://metacpan.org/pod/Path::Tiny#remove_tree\" rel=\"nofollow noreferrer\">Path::Tiny wrapper</a>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8610171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b40eb1fa410fc5f2ddd552c9529ead?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj.V", "link": "https://stackoverflow.com/users/8610171/manoj-v"}, "edited": false, "score": 0, "creation_date": 1545199825, "post_id": 53769834, "comment_id": 94538517, "body": "Thank you GMB! Error occurred for the module File/Find/Rule.  Can&#39;t locate File/Find/Rule.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .)"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 37, "user_id": 8610171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b40eb1fa410fc5f2ddd552c9529ead?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj.V", "link": "https://stackoverflow.com/users/8610171/manoj-v"}, "edited": false, "score": 0, "creation_date": 1545205421, "post_id": 53769834, "comment_id": 94540808, "body": "@ManojV well your. original post was mentioning this module so provided a solution based on it... you will need to have it installed"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1544737961, "last_edit_date": 1544737961, "creation_date": 1544734118, "answer_id": 53769834, "question_id": 53763709, "link": "https://stackoverflow.com/questions/53763709/how-to-list-the-directories-with-specified-name-which-more-than-90-days-old-and/53769834#53769834", "title": "How to list the directories with specified name which more than 90 days old and delete them using perl script?", "body": "<p>Your code is built in a way that allows it to handle only <em>files</em> older than 90 days, not <em>directories</em> :</p>\n\n<ul>\n<li>the <code>file()</code> rule of <code>File::Find::Rule</code> matches on files only, and excludes directories : you need to remove this rule</li>\n<li>Perl built-in <code>unlink</code> function can delete files only, not directories ; to delete dirs, you may, for example, use method <code>remove_tree</code> from code module <a href=\"https://metacpan.org/pod/File::Path\" rel=\"nofollow noreferrer\"><code>File::Path</code></a>.</li>\n</ul>\n\n<p>Also it is possible to add a <code>mtime</code> rule to the <code>File::Find::Rule</code> search, in order to filter files (and dirs) by modification date upfront, instead of afterwards in the <code>for</code> loop. <code>mtime</code> expects an epoch timestamp (see <a href=\"https://metacpan.org/pod/perlfunc#stat\" rel=\"nofollow noreferrer\">perldoc stat</a>).</p>\n\n<p>The below code uses <code>File::Find::Rule</code> to find all files/dirs in the current directory that were not modified since 90 days (one level deep only). Then it walks the returned paths, and applies the correct deletion method according to the path type (file or dir). It also includes a security that prevents the current directory to be deleted, even if it was not modified since 90 days.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse File::Find::Rule;\nuse File::Path qw/remove_tree/;\n\nmy $dir = \".\";\nmy $mtime = time - 90 * 60 * 60 * 24;\n\nmy @things = File::Find::Rule-&gt;maxdepth(1)-&gt;mtime( \"&lt;= $mtime\" )-&gt;in($dir);\n\nfor my $thing (@things) {\n    next if $thing eq $dir;\n    if ( -f $thing) {\n        unlink $thing or warn \"could not delete file $thing : $!\";\n    } else {\n        remove_tree($thing);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8610171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b40eb1fa410fc5f2ddd552c9529ead?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj.V", "link": "https://stackoverflow.com/users/8610171/manoj-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544737961, "creation_date": 1544710072, "question_id": 53763709, "link": "https://stackoverflow.com/questions/53763709/how-to-list-the-directories-with-specified-name-which-more-than-90-days-old-and", "title": "How to list the directories with specified name which more than 90 days old and delete them using perl script?", "body": "<p>I've used this command to fetch that, but it fails. Because I don't have module installed for File::Find::Rule and it works only for files.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse File::Find::Rule;\n\nmy $dir = '.';\nmy $days = 90;\n\nmy @files = File::Find::Rule-&gt;file()\n                            -&gt;maxdepth(1)\n                            -&gt;in($dir);\n\nfor my $file (@files){\n    if (-M $file &gt; 90){\n        print \"deleting $file\\n\";\n        unlink $file or warn $!;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544705174, "post_id": 53761072, "comment_id": 94375957, "body": "Can you please tell us where exactly you have problems? This seems like a straightforward matter of programming to me."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1544705506, "post_id": 53761072, "comment_id": 94376144, "body": "I don&#39;t understand the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544706927, "post_id": 53761072, "comment_id": 94377031, "body": "ALWAYS use <code>use strict; use warnings;</code>!!!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544707506, "post_id": 53762794, "comment_id": 94377381, "body": "You could use File::ReadBackwards to get the last line of <code>order.properties</code> and extract <code>$i</code> from it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1544707183, "creation_date": 1544707183, "answer_id": 53762794, "question_id": 53761072, "link": "https://stackoverflow.com/questions/53761072/create-a-new-variablename-in-properties-file-at-each-run-of-perlscript/53762794#53762794", "title": "create a new variablename in properties file at each run of perlScript", "body": "<p>I'm not going to give you a complete answer as you'll learn more by working it out for yourself. But I will point out the two things you'll need to fix.</p>\n\n<ol>\n<li><p>You open your file using <code>&gt;</code>, which overwrites the file each time you run your program. You need to, instead, use \"append\" mode, which adds new data to the end of your file. You do that by using <code>&gt;&gt;</code> instead of <code>&gt;</code>.</p></li>\n<li><p>You also need to work out which number gets appended to <code>Start_time</code>. Obviously, your program closes down each time it finishes, so you can't store it as a variable. I would suggest that the easiest approach is probably to count the lines that are currently in the file before writing your new lines.</p></li>\n</ol>\n\n<p>Two more pieces of advice. The <a href=\"https://perldoc.perl.org/perlfaq.html\" rel=\"nofollow noreferrer\">Perl FAQ</a> is a great source of Perl programming advice and you should <strong>always</strong> have <code>use strict</code> and <code>use warnings</code> in your Perl programs.</p>\n"}], "owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53762794, "answer_count": 1, "score": -1, "last_activity_date": 1544707183, "creation_date": 1544701321, "last_edit_date": 1544706557, "question_id": 53761072, "link": "https://stackoverflow.com/questions/53761072/create-a-new-variablename-in-properties-file-at-each-run-of-perlscript", "title": "create a new variablename in properties file at each run of perlScript", "body": "<p>my variable  inside the properties file is $starttime and the value is current date in YYYYMMDDHH24MI after i run second time a new variable with $stattime_2 with current date value.</p>\n\n<p>my code is </p>\n\n<pre><code>#!/usr/local/bin/perl\nuse Time::Piece;\n$starttime = localtime-&gt;strftime('%Y%m%d%H%M');\n$i = 0;\nopen my  $file, '&gt;', 'order.properties' or die $!;\n\nprint $file \"Start_time\", $i, \" = \", $starttime;\nclose $file;\n</code></pre>\n\n<p>for each run the order.properties file should update like</p>\n\n<p>at first time</p>\n\n<pre><code>Start_time_1 = 2018121317:04(the current system Time)\n</code></pre>\n\n<p>at second time</p>\n\n<pre><code>Start_time_2 = 2018121317:05.........\n</code></pre>\n\n<p>3rd,4th,5th the variable name should change and current date and time should assign</p>\n\n<p>OUTPUT will be like\nat 3rd run</p>\n\n<pre><code>Start_time_1 = 2018121317:04\nStart_time_2 = 2018121317:05\nStart_time_3 = 2018121317:09\n</code></pre>\n\n<p>How may execution of Script equal to the entries of start time in the properties file </p>\n"}, {"tags": ["regex", "perl", "sed", "grep", "command"], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1544724554, "post_id": 53759369, "comment_id": 94387319, "body": "And why do you need to enable EREs? Answer: Because you have unnecessary parens in your regexp."}, {"owner": {"reputation": 1179, "user_id": 5800969, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-gcKBCifKR-w/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNF-RQWiwdfsjaS-3LEIT0zKtbn1A/mo/photo.jpg?sz=128", "display_name": "iamabhaykmr", "link": "https://stackoverflow.com/users/5800969/iamabhaykmr"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1544725259, "post_id": 53759369, "comment_id": 94387709, "body": "Okay. Right.  Thank you."}], "tags": [], "owner": {"reputation": 1179, "user_id": 5800969, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-gcKBCifKR-w/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNF-RQWiwdfsjaS-3LEIT0zKtbn1A/mo/photo.jpg?sz=128", "display_name": "iamabhaykmr", "link": "https://stackoverflow.com/users/5800969/iamabhaykmr"}, "is_accepted": true, "score": 0, "last_activity_date": 1544695622, "creation_date": 1544695622, "answer_id": 53759369, "question_id": 53759290, "link": "https://stackoverflow.com/questions/53759290/delete-multiple-lines-from-multiple-files-using-sed/53759369#53759369", "title": "Delete multiple lines from multiple files using sed", "body": "<p>Worked by changing small e to E which includs  --regexp-extended regex in sed.</p>\n\n<pre><code>sed -i -E '/.*Society[ \\t]*([0-9]*[ \\t]*[0-9]*)[ \\t]*bhavan$/d' *.ann\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38442, "user_id": 1331399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a22763d295c9d45db0dd0c692bb4051?s=128&d=identicon&r=PG", "display_name": "Thor", "link": "https://stackoverflow.com/users/1331399/thor"}, "is_accepted": false, "score": 2, "last_activity_date": 1544708242, "creation_date": 1544708242, "answer_id": 53763125, "question_id": 53759290, "link": "https://stackoverflow.com/questions/53759290/delete-multiple-lines-from-multiple-files-using-sed/53763125#53763125", "title": "Delete multiple lines from multiple files using sed", "body": "<p>You can just add the <code>-v</code> switch to <code>grep</code>. This will invert the logic, i.e. only select lines not matching the pattern.</p>\n\n<p>From <code>grep.info</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u2018-v\u2019\n\u2018--invert-match\u2019\n     Invert the sense of matching, to select non-matching lines.  (\u2018-v\u2019\n     is specified by POSIX.)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1544724360, "creation_date": 1544724360, "answer_id": 53767747, "question_id": 53759290, "link": "https://stackoverflow.com/questions/53759290/delete-multiple-lines-from-multiple-files-using-sed/53767747#53767747", "title": "Delete multiple lines from multiple files using sed", "body": "<p>Just remove the <code>(</code> and <code>)</code> from the regexp as they aren't present in your input. You're telling grep to use a PCRE (<code>-P</code>) where those parens represent a capture group (which you aren't using and so they are redundant) but then calling sed without any RE-specific options so it's using a BRE where those parens are literal characters. The <code>.*</code> at the start of your regexp is doing nothing useful, btw, so you could just remove that too.</p>\n"}], "owner": {"reputation": 1179, "user_id": 5800969, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-gcKBCifKR-w/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNF-RQWiwdfsjaS-3LEIT0zKtbn1A/mo/photo.jpg?sz=128", "display_name": "iamabhaykmr", "link": "https://stackoverflow.com/users/5800969/iamabhaykmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53759369, "answer_count": 3, "score": 0, "last_activity_date": 1544724360, "creation_date": 1544695399, "question_id": 53759290, "link": "https://stackoverflow.com/questions/53759290/delete-multiple-lines-from-multiple-files-using-sed", "title": "Delete multiple lines from multiple files using sed", "body": "<p>I am trying do delete some line that match following regex using sed.</p>\n\n<p>Command to get all lines from all files which are to be deleted</p>\n\n<pre><code>grep  -P '.*Society[ \\t]*([0-9]*[ \\t]*[0-9]*)[ \\t]*bhavan$' *.ann \n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>file0122.ann:T324   Society 4520 4526   bhavan\nfile0126.ann:T225   Society 9191 9197   bhavan\nfile0319.ann:T84    Society 43 49   bhavan\nfile0376.ann:T65    Society 2611 2617   bhavan\nfile0627.ann:T171   Society 4104 4110   bhavan\nfile1159.ann:T87    Society 4073 4079   bhavan\nfile1533.ann:T150   Society 2787 2793   bhavan\nfile1582.ann:T80    Society 2548 2554   bhavan\nfile1813.ann:T115   Society 1213 1219   bhavan\nfile1876.ann:T163   Society 1998 2004   bhavan\nfile1879.ann:T165   Society 2513 2519   bhavan\nfile2521.ann:T109   Society 326 332 bhavan\nfile2537.ann:T100   Society 2574 2580   bhavan\nfile3725.ann:T109   Society 2988 2994   bhavan\n</code></pre>\n\n<p>I am using following sed command to delete above lines from all files</p>\n\n<p><code>sed -i -e '/.*Society[ \\t]*([0-9]*[ \\t]*[0-9]*)[ \\t]*bhavan$/d' *.ann</code></p>\n\n<p>But it doing nothing. Can anybody tell what I am doing wrong ? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "posix"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1544695360, "post_id": 53759211, "comment_id": 94370531, "body": "<a href=\"https://stackoverflow.com/questions/32785149/finding-the-time-between-two-dates-in-perl\" title=\"finding the time between two dates in perl\">stackoverflow.com/questions/32785149/&hellip;</a>"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1544696413, "post_id": 53759211, "comment_id": 94371161, "body": "Hi Mat, in the link you gave me they suggested to use the module Time::Piece which is not available on my machine...only standard POSIX"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1544696556, "post_id": 53759211, "comment_id": 94371250, "body": "What Perl version do you have?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1544696680, "post_id": 53759211, "comment_id": 94371307, "body": "Don&#39;t call your variable <code>$b</code>. <code>$a</code> and <code>$b</code> are weird global variables reserved for <code>sort</code>. Use descriptive names instead."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1544697193, "post_id": 53759211, "comment_id": 94371589, "body": "@Unsal: Time::Piece has been part of the standard Perl distribution since version 5.10 in 2007. If you have an older version than that, I strongly recommend you upgrade."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1544697374, "post_id": 53759211, "comment_id": 94371710, "body": "My Perl Version is v5.8.4"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1544698210, "post_id": 53759211, "comment_id": 94372188, "body": "@Unsal: Why would you use a version of Perl from 2004?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1545126726, "last_edit_date": 1545126726, "creation_date": 1544696932, "answer_id": 53759761, "question_id": 53759211, "link": "https://stackoverflow.com/questions/53759211/subtract-two-date-strings-in-perl-with-conversion-to-unix-time-and-reverting-bac/53759761#53759761", "title": "Subtract two date strings in Perl with conversion to unix time and reverting back", "body": "<p>It works for me. But I think that's because I'm in GMT and you're in CET (GMT+1).</p>\n\n<p>The flaw is in your final step. You are confusing two concepts - a point in time and a duration.</p>\n\n<p>You correctly convert your two points in time to Unix epoch numbers and then you subtract those numbers to get the number of seconds between them. That number is a duration. And you want to convert that duration into a human-readable format. Using <code>localtime()</code> and <code>POSIX::strtime()</code> is not the way to do that. <code>POSIX::strftime()</code> and <code>localtime()</code> deal with points in time, not durations.</p>\n\n<p>The number you get is 1,200. By passing that to <code>localtime()</code> you are saying \"what is the epoch number 1,200 when converted to a date and time in my local timezone?\" 1,200 is 20 past midnight on Jan 1st 1970 GMT. But in your local, Frankfurt, timezone, it's 20 past 1am. Which is why you're getting 1:20 and I'm getting 0:20.</p>\n\n<p>There are a couple of ways to fix this. You can do the conversion manually.</p>\n\n<pre><code>my $duration = 1_200;\n\nmy $mins = int($duration/60);\nmy $secs = $duration % 60;\n</code></pre>\n\n<p>Or you can use a proper date/time handling module like <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> (along with its associated module <a href=\"https://metacpan.org/pod/DateTime::Duration\" rel=\"nofollow noreferrer\">DateTime::Duration</a>).</p>\n\n<p>It might work if you use <code>timegm()</code> and <code>gmtime()</code> in place of <code>timelocal()</code> and <code>localtime()</code> - but I really don't recommend this approach as it perpetuates the confusion between points in time and durations.</p>\n\n<p><strong>Update:</strong> A version using DateTime.</p>\n\n<pre><code>#/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DateTime;\nuse DateTime::Format::Strptime;\n\nmy $h_end   = '2018.11.12 00:50:00';\nmy $h_start = '2018.11.12 00:30:00';\n\nmy $date_p = DateTime::Format::Strptime-&gt;new(\n  pattern =&gt; '%Y.%m.%d %H:%M:%S'\n);\n\nmy $duration = $date_p-&gt;parse_datetime($h_end)\n             - $date_p-&gt;parse_datetime($h_start);\n\nprintf '%02d:%02d:%02d', $duration-&gt;in_units('hours', 'minutes', 'seconds');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1544708604, "last_edit_date": 1544708604, "creation_date": 1544708221, "answer_id": 53763116, "question_id": 53759211, "link": "https://stackoverflow.com/questions/53759211/subtract-two-date-strings-in-perl-with-conversion-to-unix-time-and-reverting-bac/53763116#53763116", "title": "Subtract two date strings in Perl with conversion to unix time and reverting back", "body": "<p>1200, the value of <code>$duration</code>, signifies the following when treated as a epoch timestamp</p>\n\n<pre><code>1970-01-01T01:20:00+01:00\n           ^^^^^^^^\n</code></pre>\n\n<p>The solution is to replace</p>\n\n<pre><code>strftime(\"%H:%M:%S\", localtime($duration));\n</code></pre>\n\n<p>with</p>\n\n<pre><code>strftime(\"%H:%M:%S\", gmtime($duration));\n</code></pre>\n\n<p>This gives</p>\n\n<pre><code>1970-01-01T00:20:00Z\n           ^^^^^^^^\n</code></pre>\n\n<p>Of course, this is still a hack. You're not suppose to be passing a duration to <code>gmtime</code>. Use an appropriate module instead.</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n   pattern =&gt; '%Y.%m.%d %H:%M:%S',\n   on_error =&gt; 'croak',\n);\n\nmy $h_end   = $format-&gt;parse_datetime('2018.11.12 00:50:00');\nmy $h_start = $format-&gt;parse_datetime('2018.11.12 00:30:00');\n\nmy $dur = $h_end - $h_start;\nprintf \"%02d:%02d:%02d\\n\", $dur-&gt;in_units(qw( hours minutes seconds ));\n</code></pre>\n\n<hr>\n\n<p>By the way,</p>\n\n<pre><code>timelocal($a[5],$a[4],$a[3],$a[2],$a[1],$a[0])\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>timelocal($a[5],$a[4],$a[3],$a[2],$a[1]-1,$a[0])\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 53759761, "answer_count": 2, "score": 1, "last_activity_date": 1545126726, "creation_date": 1544695163, "last_edit_date": 1544707751, "question_id": 53759211, "link": "https://stackoverflow.com/questions/53759211/subtract-two-date-strings-in-perl-with-conversion-to-unix-time-and-reverting-bac", "title": "Subtract two date strings in Perl with conversion to unix time and reverting back", "body": "<p>I want to subtract two timestamps in Perl. I converted them to unix-time via the function below and convert the unix timestamp back to how it was. In the example below the result is 01:20:00 instead of 00:20:00\n(I think it has sth to do with the start of the unix timestamp 1.1.1970 01:00:00 but not sure how to resolve it)</p>\n\n<p>Any idea? Many thanks for your help in advance.</p>\n\n<pre><code>use POSIX       qw( strftime );\nuse Time::Local qw( timelocal );\n\nsub to_epoch {\n    $_ = shift;\n    my @a = split /\\W+/, $_;\n\n    my $b = timelocal($a[5],$a[4],$a[3],$a[2],$a[1],$a[0]);\n    return $b;\n}\n\nmy $h_end   = \"2018.11.12 00:50:00\";\nmy $h_start = \"2018.11.12 00:30:00\";\nmy $duration = to_epoch($h_end) - to_epoch($h_start);\nmy $convert_back = POSIX::strftime(\"%H:%M:%S\", localtime($duration));\nprint $convert_back , \"\\n\";\n</code></pre>\n\n<p>Ouptut: 01:20:00</p>\n"}, {"tags": ["perl", "http"], "comments": [{"owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "edited": false, "score": 0, "creation_date": 1544694862, "post_id": 53758875, "comment_id": 94370254, "body": "Looks like you instead of  <code>=&gt;</code> you need <code>,</code> after <code>GET</code>  in <code>HTTP::Request-&gt;new</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "edited": false, "score": 0, "creation_date": 1544776329, "post_id": 53758875, "comment_id": 94403070, "body": "@talex: <code>=&gt;</code> and <code>,</code> do the same thing. <code>=&gt;</code> is a &quot;fat comma&quot;. That&#39;s not the problem."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1544712877, "creation_date": 1544712877, "answer_id": 53764543, "question_id": 53758875, "link": "https://stackoverflow.com/questions/53758875/invalid-character-found-in-method-name-http-method-names-must-be-tokens-persis/53764543#53764543", "title": "Invalid character found in method name. HTTP method names must be tokens, persists even with http request", "body": "<p>In amongst your pile of headers, you have this:</p>\n\n<pre><code>'User-Agent' =&gt;\n'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.80 Safari/537.36',\n'Cookie' =&gt;\n'Original-X-Forwarded-For'   =&gt; '10.45.103.166',\n</code></pre>\n\n<p>Notice that there's no value for the <code>Cookie</code> header. That means all of the headers after that will be wrong (the names and values will be muddled up).</p>\n\n<p>Either remove the <code>Cookie</code> line completely or set its value to <code>undef</code>.</p>\n\n<pre><code>'Cookie' =&gt; undef,\n</code></pre>\n\n<p>(Removing it is probably best)</p>\n"}], "owner": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544712877, "creation_date": 1544693993, "last_edit_date": 1544695044, "question_id": 53758875, "link": "https://stackoverflow.com/questions/53758875/invalid-character-found-in-method-name-http-method-names-must-be-tokens-persis", "title": "Invalid character found in method name. HTTP method names must be tokens, persists even with http request", "body": "<p>I am trying to warm up my controller so that the service gets hot during each deployment.</p>\n\n<p>In order to do this i have written a perl script as below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#!perl\r\nuse strict;\r\nuse warnings;\r\nuse WWW::Mechanize;\r\nuse HTTP::Request;\r\n\r\n\r\nmy $ua = WWW::Mechanize-&gt;new();\r\nmy $r  = HTTP::Request-&gt;new(\r\n    'GET' =&gt;\r\n'http://gaurav_setia.microsoft.com:8080/b2h/homepage?_encoding=UTF8&amp;opf_redir=1&amp;portalDebug=1',\r\n    [\r\n        'Connection' =&gt; 'Keep-Alive',\r\n        'Via'        =&gt; 'HTTP/1.1 ShoppingSchedule',\r\n        'Accept' =&gt;\r\n'text/x-html-parts,text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\r\n        'Accept-Charset'  =&gt; 'UTF-8',\r\n        'Accept-Encoding' =&gt; 'identity',\r\n        'Accept-Language' =&gt; 'en-US',\r\n        'Host'            =&gt; 'gaurav_setia.microsoft.com',\r\n        'User-Agent' =&gt;\r\n'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.80 Safari/537.36',\r\n        'Cookie' =&gt;\r\n        'Original-X-Forwarded-For'   =&gt; '10.45.103.166',\r\n        'X-MS-Internal-Ip-Class' =&gt; 'rfc1918',\r\n        'X-MS-Internal-Via' =&gt;\r\n          '1.1 us-beta-opf-1a-1-67440dc2.us-east-1.ms.com (OPF)',\r\n        'X-MS-Urlspace'                =&gt; 'NoPageType',\r\n        'X-MS-Portal-Customer-Id'         =&gt; 'AMY4OD2PMM9T31',\r\n        'X-MS-Portal-Default-Merchant-Id' =&gt; 'BTLPDKIKX0DE41',\r\n        'X-MS-Portal-Device-Attr'         =&gt; 'desktop',\r\n        'X-MS-Portal-Language'            =&gt; 'en_US',\r\n        'X-MS-Portal-Marketplace-Id'      =&gt; 'ATVPDKIKX0DER',\r\n        'X-MS-Portal-Page-Type'           =&gt; 'AQGate',\r\n        'X-MS-Portal-Request-Attr'        =&gt; 'internal, http, portal-debug',\r\n        'X-MS-Portal-Session-Id'          =&gt; '1M0-493PO66-0596753',\r\n        'X-MS-Portal-Ubid'                =&gt; '1P2-465OP632-8831161',\r\n        'X-MS-Portal-User-Attr'           =&gt; 'business',\r\n        'X-MS-Rid'        =&gt; 'G308MPK95BWTA69EY2MW',\r\n        'X-Forwarded-For'  =&gt; '10.45.101.126',\r\n        'X-Forwarded-Host' =&gt; 'development.ms.com',\r\n        'X-Forwarded-Server' =&gt;\r\n'development.ms.com, b-hp-shpomnpng-na-2b-02af3555.us-west-2.amazon.com',\r\n        'X-Original-Args'   =&gt; 'portalDebug=1',\r\n        'X-Original-Method' =&gt; 'GET',\r\n        'X-Original-Scheme' =&gt; 'http',\r\n        'X-Original-Uri'    =&gt; '/',\r\n    ],\r\n\r\n);\r\nmy $res = $ua-&gt;request( $r, );\r\n\r\nif ( $res-&gt;is_success() )\r\n{\r\n    print $response-&gt;is_success();\r\n}\r\n\r\nprint $response-&gt;status_line;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This script should run after each deployment.</p>\n\n<p>But in the catalina.out logs i am getting the following error:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> Dec 13, 2018 9:08:11 AM org.apache.coyote.http11.AbstractHttp11Processor process\r\n  INFO: Error parsing HTTP request header\r\n   Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\n  java.lang.IllegalArgumentException: Invalid character found in method name. HTTP method names must be tokens\r\n          at org.apache.coyote.http11.AbstractNioInputBuffer.parseRequestLine(AbstractNioInputBuffer.java:235)\r\n          at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1055)\r\n          at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:684)\r\n          at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1539)\r\n          at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1495)\r\n          at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n          at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n          at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n          at java.lang.Thread.run(Thread.java:748)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I am unable to find the fix!</p>\n\n<p>Many answers say that this is due to https/http issue, but i am making a http call here itself!</p>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544683837, "post_id": 53755924, "comment_id": 94365056, "body": "<a href=\"https://metacpan.org/pod/Time::Format\" rel=\"nofollow noreferrer\">Time::Format</a> looks promising. Or there&#39;s <a href=\"http://perldoc.perl.org/POSIX.html\" rel=\"nofollow noreferrer\">POSIX</a>, which provides <code>strftime()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544710505, "post_id": 53756474, "comment_id": 94379217, "body": "Re &quot;<i>On some systems</i>&quot;, Time::Piece uses its own formatting engine, so it&#39;s not system-sensitive."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544723771, "post_id": 53756474, "comment_id": 94386909, "body": "@ikegami  On my system (CentOS 7, v5.16) the <code>%F</code> isn&#39;t recognized: the module dies with a parsing error, at a line with <code>_strptime</code> which I can only trace to <code>Dynaloader</code>.  It seems like it is using the system for that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544725011, "post_id": 53756474, "comment_id": 94387586, "body": "Maybe it only uses its own implementation of <code>strftime</code> as a fallback? That&#39;s not what I was told. Leaving that comment so you can keep your reply."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544726044, "post_id": 53756474, "comment_id": 94388037, "body": "@ikegami In my copy, the <code>sub strptime</code> in <code>&#47;usr&#47;lib64&#47;perl5&#47;Time&#47;Piece.pm</code> directly goes to <code>_strptime</code>; same with <code>strftime</code>.  I don&#39;t know what <code>Dynaload</code> loads though, but I&#39;d guess that it isn&#39;t module&#39;s own C code?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1598502445, "last_edit_date": 1598502445, "creation_date": 1544684072, "answer_id": 53756474, "question_id": 53755924, "link": "https://stackoverflow.com/questions/53755924/how-to-format-date-to-2018-10-29-114933/53756474#53756474", "title": "How to format date to &quot;2018-10-29 11:49:33&quot;", "body": "<p>I'd recommend to do it all using modules. The all-capable and very complete module is <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a>, and for this job you'd also need <a href=\"https://metacpan.org/pod/DateTime::Format::Strptime\" rel=\"nofollow noreferrer\">DateTime::Format::Strptime</a>.</p>\n<p>One other option is the simpler and much smaller core module <a href=\"https://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\">Time::Piece</a></p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Time::Piece;\n\ndie &quot;Usage $0 YYYY-MM-DD H:M:S&quot; if @ARGV != 2;\nmy $time = join ' ', @ARGV;\n\nmy $tp = Time::Piece-&gt;strptime($time, &quot;%Y-%m-%d %T&quot;);\n\nmy $local = localtime($tp-&gt;epoch);\n\nsay $local;\n\n# In the desired format\nsay join('-', $local-&gt;mday, uc $local-&gt;month, $local-&gt;yy),\n    ' ', $local-&gt;hms;\n\n# If &quot;Oct&quot; is ok instead of block capitals for month abbreviation\nsay $local-&gt;strftime(&quot;%d-%b-%y %T&quot;);\n</code></pre>\n<p>This converts GMT time, with invocation as in the question, to the local time on my machine</p>\n<pre>\nMon Oct 29 04:09:33 2018\n29-OCT-18 04:09:33\n29-Oct-18 04:09:33\n</pre>\n<p>where the middle one was asked for.</p>\n<p>On some systems there is the <code>%F</code> format specifier for <code>%Y-%m-$d</code>.<sup>\u2020</sup> There may be a defined format for <code>29-OCT-18</code>, in which case you don't have to patch it by hand, but I am not aware of it.</p>\n<hr />\n<p><sup>\u2020</sup> Or the module has its own formatting in which case that's portable. But origin of the error when it fails to do <code>%F</code> on my system isn't clear to me in that sense.</p>\n"}, {"comments": [{"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1544713309, "post_id": 53763801, "comment_id": 94381071, "body": "While this code may answer the question, it is better to explain how to solve the problem and provide the code as an example or reference. Code-only answers can be confusing and lack context."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 1, "creation_date": 1544713462, "post_id": 53763801, "comment_id": 94381159, "body": "@RobertColumbia, You really think adding &quot;you can use <code>strftime</code>&quot; before showing they can use <code>strftime</code> is useful? No. That&#39;s just patronising noise. Just like excessive comments can be detrimental, so can redundant explanations"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3959, "user_id": 970200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3aee53cff7e3344644aeb5a40802d1?s=128&d=identicon&r=PG", "display_name": "Ian Lim", "link": "https://stackoverflow.com/users/970200/ian-lim"}, "edited": false, "score": 0, "creation_date": 1544756710, "post_id": 53763801, "comment_id": 94397637, "body": "@IanLim, huh? Check again"}, {"owner": {"reputation": 3959, "user_id": 970200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3aee53cff7e3344644aeb5a40802d1?s=128&d=identicon&r=PG", "display_name": "Ian Lim", "link": "https://stackoverflow.com/users/970200/ian-lim"}, "edited": false, "score": 0, "creation_date": 1544758169, "post_id": 53763801, "comment_id": 94397874, "body": "Not enough explanation"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3959, "user_id": 970200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3aee53cff7e3344644aeb5a40802d1?s=128&d=identicon&r=PG", "display_name": "Ian Lim", "link": "https://stackoverflow.com/users/970200/ian-lim"}, "edited": false, "score": 1, "creation_date": 1544758377, "post_id": 53763801, "comment_id": 94397910, "body": "@Ian Lim, That&#39;s not what you original comment said. And that&#39;s not a constructive comment. What&#39;s missing?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1544758367, "last_edit_date": 1544758367, "creation_date": 1544710378, "answer_id": 53763801, "question_id": 53755924, "link": "https://stackoverflow.com/questions/53755924/how-to-format-date-to-2018-10-29-114933/53763801#53763801", "title": "How to format date to &quot;2018-10-29 11:49:33&quot;", "body": "<p>You can use</p>\n\n<pre><code>use POSIX qw( strftime );\n\nprint(strftime(\"%d-%b-%y %H:%M:%S\", localtime($time)), \"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5886828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24bfdc6152eedeb98723edddc1eba67?s=128&d=identicon&r=PG&f=1", "display_name": "SwapnilM", "link": "https://stackoverflow.com/users/5886828/swapnilm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53756474, "answer_count": 2, "score": 2, "last_activity_date": 1598502445, "creation_date": 1544681576, "last_edit_date": 1598502065, "question_id": 53755924, "link": "https://stackoverflow.com/questions/53755924/how-to-format-date-to-2018-10-29-114933", "title": "How to format date to &quot;2018-10-29 11:49:33&quot;", "body": "<p>I have to convert the GMT date to region specific date with format like \"YYYY-MM-DD H:M:S\". \n<strong>Code developed is :-</strong> </p>\n\n<pre><code>use Time::Local;\n\n($year,$mon,$day) = split /\\-/, $ARGV[0];\n($hrs,$min,$sec ) = split /:/, $ARGV[1];\n$time = timegm( $sec, $min, $hrs, $day, $mon-1, $year-1900);\nprint scalar localtime($time), \"\\n\";\n</code></pre>\n\n<p>But when I run it like :- </p>\n\n<pre><code>$ perl testDateGMTToLocal.pl 2018-10-29 11:49:33\n</code></pre>\n\n<p>It gives o/p converted in local time zone:- </p>\n\n<pre><code>Mon Oct 29 07:49:33 2018\n</code></pre>\n\n<p>But I want this o/p in below format </p>\n\n<pre><code>29-OCT-18 07:49:33\n</code></pre>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 1, "creation_date": 1544676751, "post_id": 53755123, "comment_id": 94362888, "body": "your regex don&#39;t even match what you stated as positive."}, {"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544677217, "post_id": 53755123, "comment_id": 94362990, "body": "@CodeManiac Sorry fix now. Copied it from my Trello board and it removed the asterisks because of its markdown formatting :\\"}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544677279, "post_id": 53755123, "comment_id": 94362997, "body": "So you just want if the variable name start with capital letters. right ?"}, {"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544677327, "post_id": 53755123, "comment_id": 94363008, "body": "No I want the variable names start with lowercase."}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544677506, "post_id": 53755123, "comment_id": 94363052, "body": "check this <a href=\"https://regex101.com/r/u364yG/1\" rel=\"nofollow noreferrer\">regex101.com/r/u364yG/1</a>"}, {"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544677980, "post_id": 53755123, "comment_id": 94363184, "body": "@CodeManiac Ok I was trying to say I want to catch for those start with capital letters and fail those, and I want variable names start with lowercase in my code."}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 1, "creation_date": 1544678353, "post_id": 53755123, "comment_id": 94363287, "body": "well this is what i asked in my previous comment. check this one <a href=\"https://regex101.com/r/u364yG/3\" rel=\"nofollow noreferrer\">regex101.com/r/u364yG/3</a>"}, {"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1544678577, "post_id": 53755123, "comment_id": 94363351, "body": "@CodeManiac wow looks like it works well, I will test it on more code"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "edited": false, "score": 0, "creation_date": 1544721559, "post_id": 53755514, "comment_id": 94385909, "body": "should have given some actual examples in the question, it doesn&#39;t work on real lines of code, see my edited examples above"}], "tags": [], "owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "is_accepted": false, "score": 2, "last_activity_date": 1544682625, "last_edit_date": 1544682625, "creation_date": 1544679167, "answer_id": 53755514, "question_id": 53755123, "link": "https://stackoverflow.com/questions/53755123/how-to-use-regex-to-scan-for-lines-of-code-that-define-static-variable-with-init/53755514#53755514", "title": "How to use regex to scan for lines of code that define static variable with initial capital carmel case names in .c files?", "body": "<p><strong>You can try this mate</strong></p>\n\n<pre><code>^\\s*static\\s(?:(const|inline|volatile|void)\\s)?(unsigned\\s)?([A-Za-z_]\\w+\\s[A-Z]\\w+)$\n</code></pre>\n\n<blockquote>\n  <p>Explanation</p>\n</blockquote>\n\n<ul>\n<li><code>^</code> - Matches start of string.</li>\n<li><code>\\s*</code> - Matches space zero or more times.</li>\n<li><code>static\\s?</code> - Matches <code>static</code> or <code>static</code>.</li>\n<li><code>(?:(const|inline|volatile|void)\\s)?</code> - Matches <code>const</code> or <code>inline</code> or <code>volatile</code> or <code>void</code> followed by a space.(? makes it optional).</li>\n<li><code>(unsigned\\s)?</code> - Matches <code>unsigned</code>.</li>\n<li><code>([A-Za-z_]\\w+\\s[A-Z]\\w+)</code> - Matches anything start with a letter followed by one or more word character followed by space followed by a capital letter followed by one or more character.</li>\n<li><code>$</code> - End of string.</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/u364yG/6\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 0, "creation_date": 1544682816, "post_id": 53755777, "comment_id": 94364685, "body": "This answer would be more valuable if you explained <i>what</i> you changed and <i>why</i>."}, {"owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "edited": false, "score": 0, "creation_date": 1544747447, "post_id": 53755777, "comment_id": 94395821, "body": "It doesn&#39;t work if you test on my edited examples above"}], "tags": [], "owner": {"reputation": 520, "user_id": 1764454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4eee098a7624c1c41673b72fd571c9?s=128&d=identicon&r=PG", "display_name": "Ashish Sapkale", "link": "https://stackoverflow.com/users/1764454/ashish-sapkale"}, "is_accepted": false, "score": 1, "last_activity_date": 1544680758, "creation_date": 1544680758, "answer_id": 53755777, "question_id": 53755123, "link": "https://stackoverflow.com/questions/53755123/how-to-use-regex-to-scan-for-lines-of-code-that-define-static-variable-with-init/53755777#53755777", "title": "How to use regex to scan for lines of code that define static variable with initial capital carmel case names in .c files?", "body": "<p>I have just updated your existing Regular Expression,</p>\n\n<pre><code>^\\s*static\\s((const|inline|volatile)\\s)?(unsigned\\s)?[a-zA-Z_][\\w]+\\s\\*?[a-zA-Z_][\\w]+$\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7386906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84690ccb0db576b037f18600d74042a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/7386906/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544722024, "creation_date": 1544676153, "last_edit_date": 1544722024, "question_id": 53755123, "link": "https://stackoverflow.com/questions/53755123/how-to-use-regex-to-scan-for-lines-of-code-that-define-static-variable-with-init", "title": "How to use regex to scan for lines of code that define static variable with initial capital carmel case names in .c files?", "body": "<p>I am using regex to automatically enforce coding style in the code base during code review. I am having trouble to come up with the regex to scan for static variables and function names that begin with capital letter in .c files, since the scan patterns are pretty complex and dynamic, i.e., between 'static' and the variable name, there could be data type such as int, and keyword such as const. </p>\n\n<p>My current solution looks like this: </p>\n\n<pre><code>^\\s*static\\s((const|inline|volatile)\\s)?(unsigned\\s)?[a-zA-Z0-9_]+\\s\\*?[A-Z].*$\n</code></pre>\n\n<p>It works pretty well for many patterns, but it has false positives when data type also starts with capital letter. For example, it would be positive for 'static volatile Data_type variableName' even though 'variableName' starts with lower case. </p>\n\n<p>Also some examples here: </p>\n\n<pre><code>   /* positives */\nstatic void ZVar_Able(void)\nstatic void Variable\nstatic const int_64 Variable\nstatic MyDataType_t DefinedVariable =\nstatic const unsigned int INIT_VARIABLE = someValue;\nstatic void GivenVariable(uint32_t para)\nstatic __attribute__ ((naked)) void Function(int_64 param)\nstatic void Var_Var_var_var(void)\n\n\n/* negatives */\nstatic const char hex[] = \"000000\"\nstatic uint8_t variableHandler(uint32_t argc, char **argv)\nstatic volatile Data_type variable\nstatic void variable\nstatic int *variable\nstatic char *variablename = \"just a name\";\nstatic inline void variable_enable(void)\nstatic volatile bool_t variableIsVariable;\n  static const Variabletype_t definedVariable =\n</code></pre>\n\n<p>Any ideas or alternatives would be very helpful! Thanks in advance!</p>\n"}, {"tags": ["perl", "cgi", "dbi"], "comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1544690648, "post_id": 53755052, "comment_id": 94368002, "body": "FYI, you appear to have accidentally pasted your code twice in the question. I have edited it to remove the duplicate copy. Please double-check to verify that I didn&#39;t accidentally change it into something other than your actual code while doing so."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1544694611, "post_id": 53755052, "comment_id": 94370110, "body": "Please don&#39;t use a) the HTML generation functions from CGI.pm (like <code>start_html()</code> and <code>end_html()</code>) or b) raw HTML in your Perl code. <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> will show you some better alternatives."}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 4, "last_activity_date": 1544691163, "creation_date": 1544691163, "answer_id": 53758103, "question_id": 53755052, "link": "https://stackoverflow.com/questions/53755052/calculations-from-db-values-perl-cgi/53758103#53758103", "title": "Calculations from db values perl cgi", "body": "<blockquote>\n  <p>For the grade of U or F the credits earned should be 0 but that is not what the output is.</p>\n</blockquote>\n\n<p>When you generate the output, you are printing the content of <code>$row[5]</code> before even looking at what the grade was.  To display it correctly as 0, you will need to check the grade first and then print either <code>0</code> (if the grade was \"F\" or \"U\") or <code>$row[5]</code> (if the grade was anything else).</p>\n\n<p>In real-world code, I would recommend using a templating system (such as <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template::Toolkit</a>) instead of printing out HTML directly, which would help to avoid this sort of mistake, but I see that this looks like a homework assignment and I doubt that using alternative methods like that would be within the boundaries of the assignment.</p>\n\n<blockquote>\n  <p>Also is there a way to print GPA out to three decimal places?</p>\n</blockquote>\n\n<p>Use <code>printf</code> or <code>sprintf</code>:</p>\n\n<pre><code>$gpa = sprintf('%0.3f', $gpa / $attemptedCredits);\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 53758103, "answer_count": 1, "score": 0, "last_activity_date": 1544691163, "creation_date": 1544675558, "last_edit_date": 1544690548, "question_id": 53755052, "link": "https://stackoverflow.com/questions/53755052/calculations-from-db-values-perl-cgi", "title": "Calculations from db values perl cgi", "body": "<p>I am trying to fetch calculate the gpa of a student by fetching their grade and the number of credits their class is and calculating it. I am having an issue where it is not calculating the creditsEarned and GPA properly. For the grade of U or F the credits earned should be 0 but that is not what the output is. I am not sure what is wrong with my statements.</p>\n\n<pre><code>#!/usr/bin/perl \n#This is going to be the user login check and will set a cookie\n\nuse DBI;\nuse CGI qw(:standard);\n\nuse strict;\n\n#Connection error \nsub showErrorMsgAndExit {\n    print header(), start_html(-title=&gt;shift);\n    print (shift);\n    print end_html();\n    exit;\n}\n\n#Connecting to the database\nmy $dbUsername = \"root\";\nmy $dbPassword = \"password\";\n\nmy $dsn = \"DBI:mysql:f18final:localhost\";\nmy $dbh = DBI-&gt;connect($dsn, $dbUsername, $dbPassword, {PrintError =&gt; 0});\n\n#error checking\nif(!$dbh) {\n    print header(), start_html(-title=&gt;\"Error connecting to DB\");\n    print (\"Unable to connec to the database\");\n    print end_html();\n    exit;\n}\n\nprint header;\nprint start_html(-title=&gt;'Edit Classes');\n\n#Need to execute sql command and then iterate row by row\nmy $sql = \"SELECT * FROM tblclasses\";\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\nmy $passedCredits = 0;\nmy $attemptedCredits = 0;\nmy $totalHonor = 0;\nmy $gpa = 0.000;\n\n\n##SSSssssssearch part\n\n\nprint \"&lt;table border=solid 1px&gt;\"; #start of table\nprint \"&lt;tr&gt;&lt;th&gt;Class Name&lt;/th&gt;&lt;th&gt;Department&lt;/th&gt;&lt;th&gt;Class Number&lt;/th&gt;&lt;th&gt;Grade&lt;/th&gt;&lt;th&gt;Credits&lt;/th&gt;\";\nprint \"&lt;/tr&gt;\";\nwhile( my @row = $sth-&gt;fetchrow_array) {\n    print \"&lt;tr&gt;&lt;td&gt;\";\n    print $row[1];\n    print \"&lt;/td&gt;\";\n    print \"&lt;td&gt;\";\n    print $row[2];\n    print \"&lt;/td&gt;\";\n    print \"&lt;td&gt;\";\n    print $row[3];\n    print \"&lt;/td&gt;\";\n    print \"&lt;td&gt;\";\n    print $row[4];\n    print \"&lt;/td&gt;\";\n    print \"&lt;td&gt;\";\n    print $row[5];\n    print \"&lt;/td&gt;\";\n\n    $attemptedCredits = $attemptedCredits + $row[5];\n    if($row[4] == 'A' || $row[4] == 'a') {\n        $passedCredits = $passedCredits + $row[5];\n        $gpa = $gpa + (4 * $row[5]);\n    }\n    elsif($row[4] == 'B' || $row[4] == 'b') {\n        $passedCredits = $passedCredits + $row[5];\n        $gpa = $gpa + (3 * $row[5]);\n    }\n    elsif($row[4] == 'C' || $row[4] == 'c') {\n        $passedCredits = $passedCredits + $row[5];\n        $gpa = $gpa + (2 * $row[5]);\n    }\n    elsif($row[4] == 'D' || $row[4] == 'd') {\n        $passedCredits = $passedCredits + $row[5];\n        $gpa = $gpa + (1 * $row[5]);\n    }\n    elsif($row[4] == 'F' || $row[4] == 'f') {\n\n    }\n    elsif($row[4] == 'S' || $row[4] == 's') {\n        $passedCredits = $passedCredits + $row[5];\n    }\n    elsif($row[4] == 'U' || $row[4] == 'u') {\n\n    }\n\n    #calculate\n\n    print \"&lt;/tr&gt;\";\n\n}\n\n\nprint \"&lt;/table&gt;\";\n\n#Need to make a table and populate it with text boxes of all the class data\n\n\nprint \"&lt;/table&gt;\"; #End of table\n\n$gpa = $gpa / $attemptedCredits;\n\n##RReturn values\nprint qq{\n&lt;table border = '1px solid'&gt;\n&lt;tr&gt;\n&lt;td&gt;\nAttempted Credits\n&lt;/td&gt;\n&lt;td&gt;\nPassed Credits\n&lt;/td&gt;\n&lt;td&gt;\nGPA\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;\n$attemptedCredits\n&lt;/td&gt;\n&lt;td&gt;\n$passedCredits\n&lt;/td&gt;\n&lt;td&gt;\n$gpa\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n};\nprint \"&lt;form action=http://localhost/cgi-bin/actions.pl method = 'post' &gt;\";\nprint \"&lt;input type = 'submit' name = 'submit' value = 'More Options'&gt;\";\nprint \"&lt;/form&gt;\";\nprint \"&lt;form action=http://localhost/cgi-bin/searchingTran.pl method = 'post' &gt;\";\nprint \"&lt;input type = 'text' name = 'search' size = '25'&gt;&lt;br&gt;\";\nprint \"&lt;input type = 'submit' name = 'submit' value = 'Search'&gt;\";\nprint \"&lt;/form&gt;\";\nprint end_html();\n</code></pre>\n\n<p>Here is my output<a href=\"https://i.stack.imgur.com/CTtI9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CTtI9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also is there a way to print GPA out to three decimal places?</p>\n"}, {"tags": ["arrays", "perl", "indexing"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544673078, "post_id": 53754708, "comment_id": 94362147, "body": "It means there is nothing at <code>$Lst_1[2]</code> (third element of <code>@Lst_1</code> is <code>undef</code> or you don&#39;t even have three elements). The &quot;<i>in string</i>&quot; part of the warning is because <code>$Lst_1[2]</code> is evaluated under quotes -- which you probably don&#39;t need."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545112253, "post_id": 53754708, "comment_id": 94502649, "body": "Hi zdim, The array has three elements. $Lst_1[2] is having 0 as its value."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545115814, "post_id": 53754708, "comment_id": 94503879, "body": "Then the error is not from the expression <code>&quot;$Lst_1[2]&quot;</code> itself, since a 0 is a fine value to use there; the error you got specifically means that an undefined variable is being evaluated.  Perhaps the error comes from inside the <code>write</code> method?  Also, I can&#39;s see how that literal string <code>Row</code> may appear just like that; does some module define it?  There is just not enough information altogether."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545112432, "post_id": 53758811, "comment_id": 94502707, "body": "Hi k-mx, There are three elements in the array. And Lst_1[2] is having 0 as its value.  Whenever I tried to fetch the value of Lst_1[2] it is showing the error."}, {"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545113238, "post_id": 53758811, "comment_id": 94502947, "body": "I need full source and error message to understand what&#39;s going on."}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1544811725, "last_edit_date": 1544811725, "creation_date": 1544693761, "answer_id": 53758811, "question_id": 53754708, "link": "https://stackoverflow.com/questions/53754708/use-of-uninitialized-value-in-array-value/53758811#53758811", "title": "Use of uninitialized value in array value", "body": "<p>First index of array is 0. Second element will be <code>$List_1[1];</code></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse v5.22;\nuse warnings;\n\nmy @array = qw(foo bar);\n\n# number of elements in array\nsay scalar(@array);\n\n# last index of array\nsay $#array;\n\n# undefined element (warn)\nsay $array[ $#array + 1];                         \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1547684185, "creation_date": 1547684185, "answer_id": 54227301, "question_id": 53754708, "link": "https://stackoverflow.com/questions/53754708/use-of-uninitialized-value-in-array-value/54227301#54227301", "title": "Use of uninitialized value in array value", "body": "<p>If you just want to silence the error,</p>\n\n<pre><code>$Log_Sheet-&gt;write(Row, 0, $Lst_1[2] // 0, $Format);\n</code></pre>\n\n<p>This does use a feature of perl 5.10, but that's ancient enough you really should be using a sufficiently new perl to have it.  I mean, there's a lot of ancient perl bugs, so it behooves you to be using a newer version.</p>\n\n<p>As far as understanding the issue, no, $Lst_1[2] doesn't contain a 0.  It contains an undef, which just happens to be treated mostly like 0 in numeric contexts.</p>\n\n<p>Yes, I did remove the quotes around $Lst_1[2] - that was necessary, because <code>\"$Lst_1[2]\"</code> treats that undef like a string, so it's become the empty string for the purpose of a <code>\"$Lst_1[2]\" // 0</code> test.  (The empty string also happens to be treated like 0, so that doesn't change the behavior in a numeric context.)</p>\n\n<p>It's not clear from your short excerpt whether @Lst_1 is less than 3 elements long, or if there's an explicit undef in @Lst_1.  You'd need to show a larger excerpt of your code - or possibly even the whole thing and the data it is processing - for us to be able to determine that by looking.  You could determine it, however, by adding something like the following in front of the line you gave:</p>\n\n<pre><code>if (@Lst_1 &lt; 3) {\n    print \"\\@Lst_1 only has \" . @Lst_1 . \" elements\\n\"\n} elsif (not defined($Lst_1[2])) {\n    print \"\\$Lst_1[2] is set to undef\\n\";\n}\n</code></pre>\n\n<p>There are two basic ways a list can have an explicit undef element in it.  The following code demonstrates both:</p>\n\n<pre><code>my @List = map \"Index $_\", 0 .. 3;\n$List[2] = undef;\n$List[5] = \"Index 5\";\n\nuse Data::Dump;\ndd @List;\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>(\"Index 0\", \"Index 1\", undef, \"Index 3\", undef, \"Index 5\")\n</code></pre>\n\n<p>The first undef was because I set it, the second was because there wasn't a fifth element but I put something in the sixth slot.</p>\n"}], "owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547684185, "creation_date": 1544672478, "last_edit_date": 1544811608, "question_id": 53754708, "link": "https://stackoverflow.com/questions/53754708/use-of-uninitialized-value-in-array-value", "title": "Use of uninitialized value in array value", "body": "<p>I am having an array named @Lst_1. One of my elements is 0 in array.\nWhenever I call that element. In example below the value stored in second index of an array is 0.</p>\n\n<pre><code>$Log_Sheet-&gt;write(Row,0,\"$Lst_1[2]\",$Format);\n</code></pre>\n\n<p>I am getting a warning saying </p>\n\n<blockquote>\n  <p>Use of uninitialized value within @Lst_1 in string.</p>\n</blockquote>\n\n<p>Please help me do that.</p>\n"}]