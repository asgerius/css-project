[{"tags": ["perl", "perl-exporter"], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1513209046, "post_id": 47803545, "comment_id": 82569162, "body": "Perfect. This solved my problem, though I was also missing the <code>import</code> part from <code>use Exporter</code> as suggested (and needed apparently) by @zdim. I really appreciate the clarification on packages vs classes too and the advice as well."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 2, "last_activity_date": 1513206907, "creation_date": 1513206907, "answer_id": 47803545, "question_id": 47803493, "link": "https://stackoverflow.com/questions/47803493/perl-exporter-use-variables-from-export-ok-in-a-subclass/47803545#47803545", "title": "Perl Exporter use variables from @EXPORT_OK in a subclass", "body": "<p>In Perl, inheritance only affects how <em>method calls</em> are resolved. Everything else \u2013 variables, subroutines, and so on \u2013 remains just the same.</p>\n\n<p>That means you should import those symbols into your derived class, just like you'd import from any other module:</p>\n\n<pre><code>package Internal::Utility;\n...\nuse Internal ':all';\nuse parent qw(Internal);\n...\n</code></pre>\n\n<p>Perl uses packages as its sole namespacing mechanisms, but packages can also be used as classes. This can be a bit confusing. As a general advice, you should never mix those two: a package should EITHER offer an object-oriented interface OR an exporter-based, procedural interface. Mixing the two tends to result in misleading designs.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1513208909, "post_id": 47803549, "comment_id": 82569111, "body": "Both you and @amon have valid answers that contributed to solving my problem.  I was missing the <code>import</code> function from my <code>use Exporter</code> call, but I also needed to <code>use Internal qw(:all);</code> before <code>use parent qw(Internal);</code> in order to get rid of the error. The thing that tripped me up from the parent.pm documentation was this line: &quot;Allows you to both load one or more modules, <i>while setting up inheritance</i> from those modules at the same time.&quot; (my emphasis)  Not sure which answer to &quot;accept&quot; now... lol"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1513231147, "post_id": 47803549, "comment_id": 82574817, "body": "@Speeddymon Thank you for feedback! As for accept-choice ... your problem :))  I added a full example with classes. Please note that it is longish only because it offers a few ways and has lots of prints.  Of course, there is <i>nothing</i> wrong with using plain modules."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1579801707, "last_edit_date": 1579801707, "creation_date": 1513206942, "answer_id": 47803549, "question_id": 47803493, "link": "https://stackoverflow.com/questions/47803493/perl-exporter-use-variables-from-export-ok-in-a-subclass/47803549#47803549", "title": "Perl Exporter use variables from @EXPORT_OK in a subclass", "body": "<p>You are trying to \"inherit\", with <code>use parent</code>, in a module from a module.  The <a href=\"https://perldoc.perl.org/parent.html\" rel=\"nofollow noreferrer\">parent</a> says</p>\n\n<blockquote>\n  <p>Establish an ISA relationship with base <strong>classes</strong> at compile time</p>\n</blockquote>\n\n<p>(my emphasis). It is a pragma to set up use of a base class in a derived one, and <code>Internal</code> and <code>Internal::Utility</code> are not classes (they don't <code>bless</code>). See a note at the end.</p>\n\n<p>Write them as classes. (Then you won't need to think about exporting symbols.) That will give you a whole lot more capability and control, too.</p>\n\n<hr>\n\n<p>As for the <code>Exporter</code>, you <em>have to</em> say</p>\n\n<pre><code>use Exporter 'import';\n</code></pre>\n\n<p>so that the sub <code>import</code> is available to the module. </p>\n\n<p>A sub named \"import\" is used to push symbols, that you specify in <code>@EXPORT_OK</code> etc, to the caller and thus must exist in a module. Or, quite nicely, a module may \"borrow\" it from <code>Exporter</code>, instead of implementing its own. But the <code>Exporter</code> doesn't export it by default.</p>\n\n<hr>\n\n<p>An example with classes, showing a few ways to make constants available, along with a few other bits. When you choose one way (and remove code for others) and remove prints it gets far simpler; the longest <code>Internal::Utility</code> class shrinks to a few lines.</p>\n\n<p>Base class <code>Internal.pm</code></p>\n\n<pre><code>package Internal;\n\nuse warnings;\nuse strict;\n\n# Set up constants for derived classes to use, for demo \n# BOTH via class data and method, and via an attribute\n\nour $NOW = time;\nsub get_NOW { return $NOW }\n\nsub new { \n    my ($class, @pars) = @_;\n    # Set up object's data (\"attributes\"), using @pars\n    my $self = { _now =&gt; $NOW };  # ...\n    # Make $self an object and this package a class\n    return bless $self, $class;\n}\n\nsub other_methods { }\n\n1;\n</code></pre>\n\n<p>Derived class (subclass), <code>Internal/Utility.pm</code></p>\n\n<pre><code>package Internal::Utility;\n\nuse warnings;\nuse strict;\nuse feature 'say';\n\nuse parent 'Internal';  # now have everything from 'Internal' class\n\n# Retrieve constant from parent, if you *must*\n# It is much better to use a method or an attribute \nuse mro; \nmy $NOW = do {\n    my $Parent = (__PACKAGE__)-&gt;mro::get_linear_isa-&gt;[1];\n    my $now = $Parent . '::NOW';\n    no strict 'refs';\n    $$now;\n};  \nmy $Now = $Internal::NOW;  # or use hard-coded parent name\n\n# Constructor is also inherited (can change or override it altogether)\n\nsub print_start_time {\n    my $self = $_[0];\n    say \"\\tIn \", __PACKAGE__, \". Start time:\";\n    say \"\\tObject's method (inherited): \", $self-&gt;get_NOW;\n    say \"\\tObject's data (inherited):   \", $self-&gt;{_now};\n    say \"\\tDirectly, as class method:   \", Internal-&gt;get_NOW;\n    say \"\\tClass variable, from parent: $NOW\";\n    say \"\\tOther class variable:        $Now\";\n};\n\n1;\n</code></pre>\n\n<p>Driver <code>main.pl</code></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Internal::Utility;\n\nmy $obj = Internal::Utility-&gt;new();\n\nsay \"Created \", ref $obj, \" object\";\n\n$obj-&gt;print_start_time();\n\nsay \"class constant:   $Internal::NOW\";\nsay \"as object method: \", $obj-&gt;get_NOW;\nsay \"as class method:  \", Internal-&gt;get_NOW;\n</code></pre>\n\n<p>This prints</p>\n\n<pre>\nCreated Internal::Utility object\n        In Internal::Utility. Start time:\n        Object's data (inherited):   1513229709\n        Object's method (inherited): 1513229709\n        Directly, as class method:   1513229709\n        Class variable, from parent: 1513229709\n        Other class variable:        1513229709\nclass constant:   1513229709\nas object method: 1513229709\nas class method:  1513229709\n</pre>\n\n<p>It is best to simply use the parent's attribute or its method, which are both inherited by its subclasses. If you use an attribute then provide an accessor for it in each subclass that uses it, for users of those subclasses. </p>\n\n<p>There are differences between these two and which to choose depends on design details. As a basic I'd go with the method.  Remember that the parent's class variables are accessible to any user of its derived classes.</p>\n\n<p>Once you get to working with objects in Perl I recommend getting familiar with its native system. However, at some point one should look into <a href=\"http://search.cpan.org/~ether/Moose-2.2009/lib/Moose.pm\" rel=\"nofollow noreferrer\">Moose</a>\n and/or its light-weight sibling <a href=\"http://search.cpan.org/~haarg/Moo-2.003004/lib/Moo.pm\" rel=\"nofollow noreferrer\">Moo</a></p>\n\n<p><strong>A note on class vs. object (instance) methods</strong></p>\n\n<p>A \"class method\" does not relate to any one object in particular, but rather to a class as a whole (say, return a number of objects created up to that point); thus it doesn't need an object's data.  When a method is called on the class name it is the class name that is passed to it as the first argument and this is what makes it a \"class\" method. </p>\n\n<p>An \"object (instance) method\" is meant to do work for a specific object, and when called on an object it is the object (reference to a Perl data structure used to store data in that class) that is passed to it. </p>\n\n<p>Perhaps confusingly, we <em>can</em> call a method intended as a class method on an object as well, without errors (unless the method uses the class name which now it wouldn't have); this shouldn't be done as it muddies the purpose. Calling an instance-meant method with the class name would be bad, since it most likely does expect an object to be passed, while it will get a plain string with a class name.</p>\n\n<p>This apparent ambiguity may be more confusing in this simple demo, as <code>get_NOW</code> can be called equally well on a class and on an object. Its intent is clearly of a class method. But it can also be useful with an object, in inherited classes where methods don't have the parent's name.</p>\n\n<p><strong>A note on packages and classes</strong></p>\n\n<p>A <a href=\"https://perldoc.perl.org/functions/package.html\" rel=\"nofollow noreferrer\">package</a></p>\n\n<blockquote>\n  <p>Declares the BLOCK or the rest of the compilation unit as being in the given namespace. </p>\n</blockquote>\n\n<p>Then you define <code>sub</code>s in it and provide a way for those symbols (names) to be exported to the caller so that they can use them conveniently.  You have a library of functions and that is that. This is mostly called a \"module,\" which is how I used the term above.  See more <a href=\"https://perldoc.perl.org/perlmod.html#Packages\" rel=\"nofollow noreferrer\">in perlmod</a>.</p>\n\n<p>A <em>class</em> is code/namespace (for the lack of a better noun for it) that can be <em>instantiated</em>, meaning that you can create an <em>instance</em> of it, an <em>object</em>. This object \"knows\" what class it is associated with so that it can use subs provided in that class, making them <em>methods</em>. The system also provides a way for a class to set up data (attributes), and each object gets its own copy. See <a href=\"https://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a>.</p>\n\n<p>In Perl, a class is defined as (<em>is</em>) a package. What makes it a class, so that one can instantiate an object for it, is that there is a subroutine in which a reference (typically to a hash) is <a href=\"http://perldoc.perl.org/functions/bless.html\" rel=\"nofollow noreferrer\">bless</a>ed \"into\" the package (<code>bless REF, PACKAGENAME</code>) and returned. The <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a> says (my emphasis)</p>\n\n<blockquote>\n  <p>Objects are merely Perl data structures (hashes, arrays, scalars, filehandles, etc.) that have been <strong>explicitly associated with a particular class</strong>.</p>\n</blockquote>\n\n<p>That <em>object</em> (the <code>bless</code>-ed and returned hashref) has an <code>OBJECT</code> flag in it, on top of other properties that a hashref internally has. So when it is dereferenced the interpreter can tell that the sub should be sought in that package; thus this is an object of a class.</p>\n\n<p>Note that a class in Perl is also often called generically a \"module,\" what may cause confusion.</p>\n\n<p>Thus the modules in this question are just not classes. Then what about \"inheritance,\" a typical object-oriented term? Since Perl's OO system is minimalist some facilities apply to both generic modules and classes, and the terminology may get fuzzy here or there. For instance, \"inheritance\" may be used with its more generic meaning, where one unit picks up things setup in another.</p>\n\n<p>I'd still advise to not use <code>parent</code> pragma on modules which aren't classes, even as <a href=\"https://perldoc.perl.org/perlobj.html#A-Class-is-Simply-a-Package\" rel=\"nofollow noreferrer\">it works</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1513211707, "creation_date": 1513211707, "answer_id": 47804218, "question_id": 47803493, "link": "https://stackoverflow.com/questions/47803493/perl-exporter-use-variables-from-export-ok-in-a-subclass/47804218#47804218", "title": "Perl Exporter use variables from @EXPORT_OK in a subclass", "body": "<p>You can't just <code>use Exporter</code> and expect it to work. In your <code>Internal</code> package you need to either <em>inherit</em> from it using</p>\n\n<pre><code>use Exporter;\nour @ISA = 'Exporter';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use parent 'Exporter';\n</code></pre>\n\n<p>or, with more recent versions of the module, you can simply <em>import</em> its <code>import</code> subroutine</p>\n\n<pre><code>use Exporter 'import';\n</code></pre>\n\n<p>You <em>could</em> write your own <code>import</code> if you need something special, but in most typical cases there is no need</p>\n"}], "owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 47803545, "answer_count": 3, "score": 1, "last_activity_date": 1579801707, "creation_date": 1513206591, "question_id": 47803493, "link": "https://stackoverflow.com/questions/47803493/perl-exporter-use-variables-from-export-ok-in-a-subclass", "title": "Perl Exporter use variables from @EXPORT_OK in a subclass", "body": "<p>I have looked for the last few hours and I am stumped.</p>\n\n<p>I did see <a href=\"https://stackoverflow.com/questions/2671845/how-can-i-share-variables-between-a-base-class-and-subclass-in-perl\">How can I share variables between a base class and subclass in Perl?</a> but it does not answer my question</p>\n\n<p>I am trying to write a utility module (testing purposes at this point) for use in internally developed scripts. But I seem to be having a tough go at getting exporter to actually export what I need it to.</p>\n\n<p>What I have is below:</p>\n\n<p>lib/Internal.pm:</p>\n\n<pre><code>package Internal;\n\nuse     5.008_008;\nuse     strict;\nuse     warnings;\nuse     Exporter;\n\nour $VERSION = 1;\nour @EXPORT_OK = qw($EMPTY $NOW);\nour %EXPORT_TAGS = ( ':all' =&gt; \\@EXPORT_OK );\n\nour $EMPTY = q{};\nour $NOW = time;\n\n1;\n</code></pre>\n\n<p>lib/Internal/Utility.pm:</p>\n\n<pre><code>package Internal::Utility;\n\nuse     5.008_008;\nuse     strict;\nuse     warnings;\nuse     FindBin::libs;\nuse     parent qw(Internal);\nuse     Data::Dumper;\n\nour $VERSION = 1;\nour @EXPORT_OK = qw(run);\nour %EXPORT_TAGS = ( ':all' =&gt; \\@EXPORT_OK );\n\nsub run\n{\n    print Dumper $NOW;\n    print Dumper $EMPTY;\n    exit;\n}\n\n1;\n</code></pre>\n\n<p>bin/test.pl:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse     5.008_008;\nuse     strict;\nuse     warnings;\nuse     FindBin::libs;\nuse     Internal::Utility qw(:all);\n\nrun();\nexit;\n</code></pre>\n\n<p>When I run the test.pl, I get the below error:</p>\n\n<pre><code>Global symbol \"$NOW\" requires explicit package name at lib/Internal/Utility.pm line 8.\nGlobal symbol \"$EMPTY\" requires explicit package name at lib/Internal/Utility.pm line 9.\nCompilation failed in require at ./test.pl line 7.\nBEGIN failed--compilation aborted at ./test.pl line 7.\n</code></pre>\n\n<p>Why is the <code>use parent</code> in Internal::Utility not importing the variables from Internal.pm? Is there a way to tell use parent to explicitly import some variable?</p>\n"}, {"tags": ["c#", "python", "regex", "string", "perl"], "comments": [{"owner": {"reputation": 554, "user_id": 7351752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fe7a9cbec5b00ca0195ed0c6b31fc?s=128&d=identicon&r=PG&f=1", "display_name": "etaloof", "link": "https://stackoverflow.com/users/7351752/etaloof"}, "edited": false, "score": 0, "creation_date": 1513205458, "post_id": 47803203, "comment_id": 82568033, "body": "What would the output be in your example?"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 554, "user_id": 7351752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fe7a9cbec5b00ca0195ed0c6b31fc?s=128&d=identicon&r=PG&f=1", "display_name": "etaloof", "link": "https://stackoverflow.com/users/7351752/etaloof"}, "edited": false, "score": 0, "creation_date": 1513209736, "post_id": 47803203, "comment_id": 82569381, "body": "@afc11hn Good point, I have added a more detailed R sample with the output."}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 1, "last_activity_date": 1513205639, "creation_date": 1513205639, "answer_id": 47803330, "question_id": 47803203, "link": "https://stackoverflow.com/questions/47803203/stri-replace-all-fixed-equivalent-replace-values-based-on-list/47803330#47803330", "title": "stri_replace_all_fixed equivalent: Replace values based on list", "body": "<p>The general approach is:</p>\n\n<ol>\n<li>create a dictionary mapping words to their replacements</li>\n<li>compile a regex matching all keys in the dictionary</li>\n<li>Match the regex, and replace each match with the dictionary value of the matched key.</li>\n</ol>\n\n<p>In Perl, such a function would look like this:</p>\n\n<pre><code>sub replace_all {\n  my ($string, %replacements) = @_;\n  # Assemble the regex. \n  # Sort reverse so that longer keys are matched first.\n  # Quotemeta each key in order to escape special characters.\n  my $pattern = join '|', map quotemeta, reverse sort keys %replacements;\n  $string =~ s/($pattern)/$replacements{$1}/g;  # replace all\n  return $string;\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>use Test::More;\nmy $output = replace_all(\n  \"The quick brown fox jumped over the lazy dog.\",\n  quick =&gt; 'slow',\n  brown =&gt; 'black',\n  fox =&gt; 'bear');\nmy $expected = \"The slow black bear jumped over the lazy dog.\";\nis $output, $expected;\ndone_testing;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1513206210, "post_id": 47803337, "comment_id": 82568256, "body": "Awesome, I like that!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1513219962, "post_id": 47803337, "comment_id": 82571877, "body": "@wp78de Great :)  I added an explanation (for sorting, by length)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1513219880, "last_edit_date": 1513219880, "creation_date": 1513205682, "answer_id": 47803337, "question_id": 47803203, "link": "https://stackoverflow.com/questions/47803203/stri-replace-all-fixed-equivalent-replace-values-based-on-list/47803337#47803337", "title": "stri_replace_all_fixed equivalent: Replace values based on list", "body": "<p>Use a hash to map words to be replaced with their replacements.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $string = 'The quick brown fox jumped over the lazy dog.';\n\nmy @words     = qw(quick brown fox);\nmy @change_to = qw(slow black bear);\n\nmy %replacement;\n@replacement{@words} = @change_to;  # populate hash: quick =&gt; 'slow', ...\n\nmy $pattern = join '|', map { quotemeta } sort { length $a &lt; length $b } @words;\n\n$string =~ s/($pattern)/$replacement{$1}/g;\n\nsay $string;\n</code></pre>\n\n<p>Note that we need to <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> components of the pattern by their <a href=\"https://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">length</a>, so that longer words come before shorter ones; otherwise, with <code>/no|none/</code> the <code>'no'</code> can get replaced in the word <code>'none'</code>.</p>\n\n<p>Wrap it in a subroutine with the desired interface, say</p>\n\n<pre><code>sub_name($string, \\@words, \\@change_to);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1513219068, "post_id": 47804307, "comment_id": 82571661, "body": "&quot;<i>I&#39;m not absolutely sure if this is useful</i>&quot; -- it is absolutely necessary, but the way you have it is <b>wrong</b>, and it&#39;s wrong in Perl in this way, too. The pattern  <code>p1|p2|...</code> need be built so that the longest words come first; otherwise a short sub-word can get replaced wrongly (<code>no</code> in <code>nothing</code>, when <code>nothing</code> happens before <code>no</code> in target). However, in Perl <code>sort</code> by default does it <i>alphabetically</i> and here we need it by length; see my answer. In Python you also must tell it how it should be <code>sorted</code> and you want to use <code>key</code> parameter.  Fix it please."}, {"owner": {"reputation": 554, "user_id": 7351752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fe7a9cbec5b00ca0195ed0c6b31fc?s=128&d=identicon&r=PG&f=1", "display_name": "etaloof", "link": "https://stackoverflow.com/users/7351752/etaloof"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513258434, "post_id": 47804307, "comment_id": 82590588, "body": "I updated my answer. Thank you for explaining why this is so important."}], "tags": [], "owner": {"reputation": 554, "user_id": 7351752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fe7a9cbec5b00ca0195ed0c6b31fc?s=128&d=identicon&r=PG&f=1", "display_name": "etaloof", "link": "https://stackoverflow.com/users/7351752/etaloof"}, "is_accepted": false, "score": 1, "last_activity_date": 1513258371, "last_edit_date": 1513258371, "creation_date": 1513212342, "answer_id": 47804307, "question_id": 47803203, "link": "https://stackoverflow.com/questions/47803203/stri-replace-all-fixed-equivalent-replace-values-based-on-list/47804307#47804307", "title": "stri_replace_all_fixed equivalent: Replace values based on list", "body": "<p>In Python you can pass a replacement function to <code>re.sub</code> to return a string to be used as a substitute for a given match. We can create a dict containing all the patterns and their replacements first and then write a lookup function which gives use the suitable replacement string.</p>\n\n<pre><code>import re\n\n\ndef stri_replace_all_fixed(stri, patterns, replacements):\n    pattern_to_replacement = {p: r for p, r in zip(patterns, replacements)}\n\n    def switch(match):\n        return pattern_to_replacement[match.group(0)]\n\n    # To make sure that longer patterns are matched first\n    # we sort the list by the length of its elements and reverse it\n    patterns = sorted(patterns, key=len, reverse=True)\n\n    print(re.sub('|'.join(patterns), switch, stri))\n\n\npattern = \"quick\", \"brown\", \"fox\"\nreplace = \"slow\", \"black\", \"bear\"\nstri_replace_all_fixed(\"The quick brown fox jumped over the lazy dog.\", pattern, replace)\n</code></pre>\n"}], "owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 47803337, "answer_count": 3, "score": 1, "last_activity_date": 1513258371, "creation_date": 1513204875, "last_edit_date": 1513238041, "question_id": 47803203, "link": "https://stackoverflow.com/questions/47803203/stri-replace-all-fixed-equivalent-replace-values-based-on-list", "title": "stri_replace_all_fixed equivalent: Replace values based on list", "body": "<p>R has a powerful string processing package called <a href=\"https://cran.r-project.org/web/packages/stringi/index.html\" rel=\"nofollow noreferrer\">stringi</a>. In particular, I would like to achieve the same as with <a href=\"https://www.rdocumentation.org/packages/stringi/versions/1.1.6/topics/stri_replace_all\" rel=\"nofollow noreferrer\">stri_replace_all_fixed</a> function: replace matches based on a list/dictionary in let's say Perl/PHP/Python or C#.</p>\n\n<pre><code>#install.packages(\"stringi\")\nlibrary(stringi)\nstri_replace_all_fixed(\"The quick brown fox jumped over the lazy dog.\",\n    c(\"quick\", \"brown\", \"fox\"), c(\"slow\",  \"black\", \"bear\"), vectorize_all=FALSE)\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>\"The slow black bear jumped over the lazy dog.\"  </p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513203131, "post_id": 47802721, "comment_id": 82567157, "body": "Signal is delivered to the process and I&#39;d think that it&#39;s a global thing, only. Do you need it hidden in a thread?  You can use a (global) variable that you&#39;d set in handler, but I don&#39;t see how that would help individual threads."}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513203386, "post_id": 47802721, "comment_id": 82567248, "body": "Hmm. I guess not but what if I had a different thread that I wanted to do some cleanup on a KILL signal?"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513203553, "post_id": 47802721, "comment_id": 82567313, "body": "Thanks that&#39;s what I&#39;m looking for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513203793, "post_id": 47802721, "comment_id": 82567400, "body": "hm, your code&#39;s right out of docs, I didn&#39;t realize that. I can confirm the behavior, on v5.16."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513243581, "post_id": 47803193, "comment_id": 82580810, "body": "I&#39;ve hit problems like this before - it&#39;s because the &#39;kill&#39; isn&#39;t actually a signal, it&#39;s a deferred safe-signal - that only happens when it&#39;s appropriate to process (so won&#39;t interrupt certain operations). Sleep is generally safe to interrupt with a handler."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513272755, "post_id": 47803193, "comment_id": 82600079, "body": "@Sobrique Right, it&#39;s not the OS-delivered signal, which is why I included the quote and the link (there is way more there than what I quote). The problem though is due to race conditions, not signals themselves, as shown in detail in ikegami&#39;s answer. (There may not be such a problem with kernel signals -- is that what you mean? -- but that is moot, and we couldn&#39;t test it, since those can&#39;t go to a particular thread)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1516429572, "last_edit_date": 1516429572, "creation_date": 1513204835, "answer_id": 47803193, "question_id": 47802721, "link": "https://stackoverflow.com/questions/47802721/signal-handler-not-found/47803193#47803193", "title": "Signal handler not found", "body": "<p>This appears to be some sort of race condition, and it works when there is more going on.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse threads;\nuse threads::shared;\n\nmy $thread_handler_on :shared = 0;\n\nsub test_handler {\n    say \"\\tIn thread.\";\n    $SIG{'KILL'} = sub {\n        $thread_handler_on = 1;\n        say \"\\tSet flag, exiting the thread in handler\";\n        threads-&gt;exit();\n    };\n    sleep 3;\n    say \"\\tSet handler\";\n    sleep 1;\n    say \"\\tHandler done napping\";\n}\n\nmy $new_thread = threads-&gt;create( 'test_handler' );\n\nsleep 1;\n\nsay \"Sending 'kill' to thread\";\n$new_thread-&gt;kill('KILL')-&gt;detach();\n\nsleep 5;\n\nsay \"Did handler run: $thread_handler_on\";\n</code></pre>\n\n<p>The code in the question is right <a href=\"https://perldoc.perl.org/threads.html#THREAD-SIGNALLING\" rel=\"nofollow noreferrer\">out of threads</a> docs (along with <code>detach</code>). \nThis prints </p>\n\n<pre>\n        In thread.\nSending 'kill' to thread\n        Set flag, exiting the thread in handler\nDid handler run: 1\n</pre>\n\n<p>Without those <code>sleep</code>s in the main thread I also get the reported behavior. </p>\n\n<p>Note that these \"signals\" <em>are not</em> sent via kernel, per <a href=\"https://perldoc.perl.org/threads.html#THREAD-SIGNALLING\" rel=\"nofollow noreferrer\">Threads signalling</a></p>\n\n<blockquote>\n  <p>The thread signalling capability provided by this module does not actually send signals via the OS. It emulates signals at the Perl-level such that signal handlers are called in the appropriate thread. </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1598212334, "last_edit_date": 1598212334, "creation_date": 1513210529, "answer_id": 47804065, "question_id": 47802721, "link": "https://stackoverflow.com/questions/47802721/signal-handler-not-found/47804065#47804065", "title": "Signal handler not found", "body": "<p>There are not one but two race conditions that could lead to the behaviour you observe:</p>\n<ul>\n<li><p>You're sending the KILL signal before the child has a chance to setup the signal handler.</p>\n<p>Below, I used synchronization to ensure the signal handler is created before the signal is sent.</p>\n</li>\n<li><p>You're exiting the program before the signal handler has a chance to call <code>threads-&gt;exit</code>.</p>\n<p>Why do people insist on using <code>-&gt;detach</code>?</p>\n</li>\n</ul>\n<p>Fixed:</p>\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse threads;\nuse threads::shared;\n\nsub test_handler {\n    say sprintf &quot;[%s %s] Starting thread&quot;, time, threads-&gt;tid;\n    say sprintf &quot;[%s %s] Doing stuff&quot;, time, threads-&gt;tid;\n    sleep 4;\n    say sprintf &quot;[%s %s] Done doing stuff&quot;, time, threads-&gt;tid;\n    say sprintf &quot;[%s %s] Exiting thread&quot;, time, threads-&gt;tid;\n}\n\nsub create_thread(&amp;) {\n   my ($thread_func) = @_;\n\n   # Reap any threads that might have exited.\n   $_-&gt;join() for threads-&gt;list(threads::joinable);\n\n   my $ready :shared = 0;\n   my $thread = async {\n      $SIG{KILL} = sub {\n         say sprintf &quot;[%s %s] Forcibly exiting thread&quot;, time, threads-&gt;tid;\n         threads-&gt;exit();\n      };\n\n      # Signal creator that the thread is initialized.\n      { lock $ready; $ready = 1; cond_signal($ready); }\n      $thread_func-&gt;();\n   };\n\n   # Wait for the thread to finish initializing.    \n   { lock $ready; while (!$ready) { cond_wait($ready); } }\n   return $thread;\n}\n\nmy $thread = create_thread(\\&amp;test_handler);\n\nsay sprintf &quot;[%s %s] Sending KILL signal&quot;, time, threads-&gt;tid;\n$thread-&gt;kill('KILL');\n\nsay sprintf &quot;[%s %s] Doing stuff&quot;, time, threads-&gt;tid;\nsleep(2);\nsay sprintf &quot;[%s %s] Done doing stuff&quot;, time, threads-&gt;tid;\n\n# Wait for threads to exit.\nsay sprintf &quot;[%s %s] Waiting for threads to exit&quot;, time, threads-&gt;tid;\n$_-&gt;join() for threads-&gt;list();\nsay sprintf &quot;[%s %s] Exiting&quot;, time, threads-&gt;tid;\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[1513212149 1] Starting thread\n[1513212149 1] Doing stuff\n[1513212149 0] Sending KILL signal\n[1513212149 0] Doing stuff\n[1513212151 0] Done doing stuff\n[1513212151 0] Waiting for threads to exit\n[1513212153 1] Forcibly exiting thread\n[1513212153 0] Exiting\n</code></pre>\n<p><strong>IMPORTANT</strong> Note that the signal didn't interrupt <code>sleep</code>. No actual POSIX signal is sent<sup>[1]</sup> (since you can only send those to a process), so OS calls can't be interrupted. Instead, Perl actively checks if a signal was sent between most Perl opcodes<sup>[2]</sup>. But that means that long-running opcodes like <code>sleep</code>, <code>m//</code> and XS functions calls can delay the signal handler indefinitely.</p>\n<hr />\n<ol>\n<li>That's fortunate for you, seeing as you're not using a POSIX system.</li>\n<li>Some time ago, it used to be between each opcode, but the number of checks was reduced. I think Perl now checks once per statement.</li>\n</ol>\n"}], "owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 47803193, "answer_count": 2, "score": 3, "last_activity_date": 1598212334, "creation_date": 1513202241, "last_edit_date": 1513202619, "question_id": 47802721, "link": "https://stackoverflow.com/questions/47802721/signal-handler-not-found", "title": "Signal handler not found", "body": "<p>For some reason threads doesn't seem to be able to find the $SIG{'KILL') signal. I got the code from a comment here <a href=\"http://www.perlmonks.org/index.pl?node_id=557219\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/index.pl?node_id=557219</a> This is on Windows.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse threads;\n\nsub test_sub{\n    $SIG{'KILL'} = sub { threads-&gt;exit(); };\n    while(1){}  \n}\n\nmy $new_thread = threads-&gt;create('test_sub');\n\n$new_thread-&gt;kill('KILL')-&gt;detach();\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>Signal KILL received in thread 1, but no signal handler set. at test1.pl line 13.\nPerl exited with active threads:\n        1 running and unjoined\n        0 finished and unjoined\n        0 running and detached\n</code></pre>\n\n<p>Edit: looks like I'm using threads version '1.43'. I don't know if that the problem but I'll try a newer version.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31, "user_id": 6443069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719073668364453/picture?type=large", "display_name": "Luan Barbosa", "link": "https://stackoverflow.com/users/6443069/luan-barbosa"}, "edited": false, "score": 2, "creation_date": 1513196109, "post_id": 47801223, "comment_id": 82564003, "body": "I&#39;ve look into version you&#39;re right. I&#39;m running 5.16 and have this problem. It&#39;s a major problem"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 3, "creation_date": 1513196442, "post_id": 47801223, "comment_id": 82564173, "body": "@LuanBarbosa which system? redhat or centos maybe? you have to install the <code>perl-core</code> package, as the perl package itself doesn&#39;t include all perl core modules."}, {"owner": {"reputation": 31, "user_id": 6443069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719073668364453/picture?type=large", "display_name": "Luan Barbosa", "link": "https://stackoverflow.com/users/6443069/luan-barbosa"}, "edited": false, "score": 0, "creation_date": 1513196811, "post_id": 47801223, "comment_id": 82564360, "body": "I&#39;m using RedHat 7. Thank you very much. I&#39;ve installed the core package and works now. The problem  was solved."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1513200224, "last_edit_date": 1513200224, "creation_date": 1513199917, "answer_id": 47802262, "question_id": 47801223, "link": "https://stackoverflow.com/questions/47801223/how-to-fix-cant-locate-archive-tar-pm/47802262#47802262", "title": "How to fix &quot;Can&#39;t locate Archive/Tar.pm&quot;", "body": "<p>Archive::Tar has been bundled with Perl since Perl 5.10, so unless you are using an ancient version of Perl, you have a partial or corrupted install of Perl.</p>\n\n<p>Some Linux distributions (e.g. Redhat) gut out lesser-used parts of Perl and provide them in an package (e.g. <code>perl-core</code>) that can be installed using the OS distribution's package manager.</p>\n\n<p>Alternatively, Archive::Tar is available for install separately from Perl &mdash;it is <a href=\"https://stackoverflow.com/questions/6009476/what-is-a-dual-life-module\">\"dual-lived\"</a>&mdash; so you can <a href=\"https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module\">install</a> it from CPAN.</p>\n"}], "owner": {"reputation": 31, "user_id": 6443069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719073668364453/picture?type=large", "display_name": "Luan Barbosa", "link": "https://stackoverflow.com/users/6443069/luan-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2622, "favorite_count": 0, "closed_date": 1513211101, "answer_count": 1, "score": 0, "last_activity_date": 1513200224, "creation_date": 1513195196, "last_edit_date": 1513199960, "question_id": 47801223, "link": "https://stackoverflow.com/questions/47801223/how-to-fix-cant-locate-archive-tar-pm", "closed_reason": "Duplicate", "title": "How to fix &quot;Can&#39;t locate Archive/Tar.pm&quot;", "body": "<p>I'm trying update a software and when I running for make update I've a issue:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate Archive/Tar.pm in @INC (@INC contains: ...)\n</code></pre>\n\n<p>How I can fix this?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513184626, "post_id": 47798400, "comment_id": 82558033, "body": "The approach you&#39;d use with TT: <code>some_page.tt</code>: <code>[% stylesheet = ... %][% WRAPPER wrapper.tt %]...[% END %]</code> and <code>wrapper.tt</code>: <code>&lt;head&gt;[% stylesheet %]&lt;&#47;head&gt;[% content %]</code>. Does Mojolicious have some kind of wrapper directive?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513187482, "post_id": 47798400, "comment_id": 82559747, "body": "@ikegami: Seems it is <code>layout</code> helper command"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1513187037, "post_id": 47798601, "comment_id": 82559509, "body": "With your help I understand the problem I have"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513191714, "post_id": 47798601, "comment_id": 82561800, "body": "@amon: <i>&quot;This allows data to flow from inner templates to outer layouts&quot;</i> I&#39;m unsure that that&#39;s either true or relevant"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513192012, "post_id": 47798601, "comment_id": 82561948, "body": "@Borodin Thank you for your style improvements (I&#39;ll come back later to edit relevant technical terms back in). I think mentioning the data flow is very relevant because that&#39;s at the core of the question: the data cannot flow back in time to where a block was already rendered, but it can flow to an outer layout."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513210997, "post_id": 47798601, "comment_id": 82569738, "body": "@amon: You&#39;re welcome, but I don&#39;t think <i>data flow</i> is any more relevant to <i>Mojolicious</i> templates than it is to Perl subroutines, where you would never think to emphasise the concept."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1513202964, "last_edit_date": 1513202964, "creation_date": 1513184600, "answer_id": 47798601, "question_id": 47798400, "link": "https://stackoverflow.com/questions/47798400/how-to-postpone-head-rendering/47798601#47798601", "title": "How to postpone &lt;head&gt; rendering?", "body": "<p>Mojolicous layouts are rendered inside-out, and you can nest arbitrarily many layouts.</p>\n\n<p>Create a template that includes just the outermost document content and other HTML boilerplate, with a placeholder for the content of <code>&lt;body&gt;</code></p>\n\n<pre><code>&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    %= content_for 'stylesheets'\n  &lt;/head&gt;\n  &lt;body&gt;\n    %= content\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Then you can use that template as the layout for the body of your HTML page. I.e., use the <code>layout</code> helper like this:</p>\n\n<pre><code>% layout 'outermost_layout';\n%= include 'layouts/v2/header'\n&lt;main class=\"main\"&gt;\n  %= include 'layouts/v2/menu'\n  &lt;div class=\"content\"&gt;\n  %= content\n  &lt;/div&gt;\n&lt;/main&gt;\n</code></pre>\n\n<p>After rendering the template, Mojolicious will check whether you specified a <code>layout</code> and then render it, using the output from this template as the outer layout's <code>content</code>. So because the innermost layout is rendered first, data can flow from your templates through the stash to wrapping layouts.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 47798601, "answer_count": 1, "score": 3, "last_activity_date": 1513202964, "creation_date": 1513183977, "last_edit_date": 1513187346, "question_id": 47798400, "link": "https://stackoverflow.com/questions/47798400/how-to-postpone-head-rendering", "title": "How to postpone &lt;head&gt; rendering?", "body": "<p>I have the layout like this:</p>\n\n<pre><code>@@ layouts/v2.html.ep\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    %= content_for 'stylesheets'\n  &lt;/head&gt;\n&lt;body&gt;\n  %= include 'layouts/v2/header'\n  &lt;main class=\"main\"&gt;\n    %= include 'layouts/v2/menu'\n    &lt;div class=\"content\"&gt;\n    %= content\n    &lt;/div&gt;\n  &lt;/main&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n\n@@ layouts/v2/menu\n% content_for stylesheets =&gt; begin\n  %= stylesheet 'v2/css/menu.css'\n% end\n&lt;aside class=\"menu\"&gt;\n  ...\n&lt;/aside&gt;\n\n@@ layouts/v2/header\n% content_for stylesheets =&gt; begin\n  %= stylesheet 'v2/css/header.css'\n% end\n&lt;header class=\"header\"&gt;\n  ...\n&lt;/header&gt;\n</code></pre>\n\n<p>Here when templates are included I include their style sheets.\nNotice this in template:</p>\n\n<pre><code>% content_for stylesheets =&gt; begin\n  %= stylesheet 'v2/css/menu.css'\n% end\n</code></pre>\n\n<p>But this is too late to do that, because the <code>&lt;head&gt;</code> is already rendered.</p>\n\n<p>As workaround this problem I can move <code>%= content_for 'stylesheets'</code> from <code>&lt;head&gt;</code> to the bottom of page. But I want style sheets are loaded first.</p>\n\n<p><strong>Is there any way to postpone rendering for the content of 'stylesheets' block until whole page is rendered?</strong></p>\n\n<p><strong>UPD</strong></p>\n\n<p>Thank to @amon about that <code>Mojolicous layouts are rendered inside out</code>. I understand the problem and there for templates included from first <code>layout</code> I include stylesheets manually:</p>\n\n<pre><code>@@ layouts/v2.html.ep\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    %= stylesheet 'v2/css/header.css'\n    %= stylesheet 'v2/css/menu.css'\n    %= content_for 'stylesheets'\n  &lt;/head&gt;\n&lt;body&gt;\n  %= include 'layouts/v2/header'\n  &lt;main class=\"main\"&gt;\n    %= include 'layouts/v2/menu'\n    &lt;div class=\"content\"&gt;\n    %= content\n    &lt;/div&gt;\n  &lt;/main&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So in any rendered/included template (except layout) next works fine:</p>\n\n<pre><code>@@ some/template\n% content_for stylesheets =&gt; begin\n  %= stylesheet 'some/template.css'\n% end\ntemplate content\n</code></pre>\n"}, {"tags": ["c", "perl", "sha1", "pam"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513192021, "post_id": 47797148, "comment_id": 82561951, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! You clearly have some incorrectly-scoped variables."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513196983, "post_id": 47797148, "comment_id": 82564445, "body": "When saving a password verifier just using a hash function is not sufficient and just adding a salt does little to improve the security. Instead iterate over an HMAC with a random salt for about a 100ms duration and save the salt with the hash. Better yet use a function such as <code>PBKDF2</code>, <code>Rfc2898DeriveBytes</code>, <code>Argon2</code>, <code>password_hash</code>, <code>Bcrypt</code> or similar functions. The point is to make the attacker spend substantial of time finding passwords by brute force."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513198093, "post_id": 47800756, "comment_id": 82564984, "body": "1) Salting prevents pre-building a dictionary. 2) Salting prevents dictionary attacks against multiple users at once (which is the usually way of using a dictionary attack). 3) Salting prevents two people having the same password from having the same encoded password. 4) In the way the password is used, HMAC only helps if you can find a collision for <code>sha1($plaintext_password)</code>, i.e. it only helps if sha1 is already broken. HMAC <a href=\"https://en.wikipedia.org/wiki/Hash-based_message_authentication_code#Design_principles\" rel=\"nofollow noreferrer\">prevents</a> other attacks that aren&#39;t relevant here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513198487, "post_id": 47800756, "comment_id": 82565158, "body": "There are better options that <code>sha1</code>, but HMAC has nothing to do with that."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513202668, "post_id": 47800756, "comment_id": 82566982, "body": "See <a href=\"http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-63b.pdf\" rel=\"nofollow noreferrer\">NIST Digital Identity Guidelines</a> June 2017. Look at the section about PBKDF2. Excerpts: &quot;Examples of suitable key derivation functions include Password-based Key Derivation Function 2 (PBKDF2&quot;, &quot;The key derivation function SHALL use an approved one-way function such as Keyed Hash Message Authentication Code (<b>HMAC</b>)&quot;, &quot;PBKDF2, the cost factor is an iteration count .... SHOULD be as large as verification server performance will allow, typically at least 10,000 iterations.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203259, "post_id": 47800756, "comment_id": 82567194, "body": "@zaph, Re &quot;<i>Using SHA1 with a salt is not secure and should not be used for a password verifier.</i>&quot;, I&#39;ve already conceded that, and that&#39;s different then what you originally said."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203288, "post_id": 47800756, "comment_id": 82567203, "body": "@zaph, Re &quot;<i>Current attacks do not rely on pre-building a dictionary (that is so 80&#39;s) but rather fast hash methods such as SHA1 and dictionaries of common passwords.</i>&quot;, Well, which one is it. It doesn&#39;t or it does?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203385, "post_id": 47800756, "comment_id": 82567247, "body": "@zaph, Re &quot;<i>HMAC is just hashing with a salt in a manor that does not allow length extension.</i>&quot;, Like I said, not relevant here."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203434, "post_id": 47800756, "comment_id": 82567266, "body": "&quot;dictionaries of common passwords&quot;, not password hashes:   <a href=\"https://github.com/danielmiessler/SecLists/tree/master/Passwords\" rel=\"nofollow noreferrer\">SecLists</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203508, "post_id": 47800756, "comment_id": 82567290, "body": "You created a chat, but then you ignore it? Not only that, but to post some imbicilic straw men?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203728, "post_id": 47800756, "comment_id": 82567381, "body": "@zaph, You&#39;re apologizing for the wrong thing; apologizing for following the rules makes no sense, and you&#39;re still posting outside the chat."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203925, "post_id": 47800756, "comment_id": 82567454, "body": "@zaph, wut? You don&#39;t want to follow the site&#39;s rules? You&#39;d rather keep spamming that sha1 shouldn&#39;t be used? How nice."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204045, "post_id": 47800756, "comment_id": 82567493, "body": "I&#39;ve already conceded that three times. Constructive criticism would be better. But hey, you&#39;ve already wasted all of my time and then some. That&#39;s far better!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204121, "post_id": 47800756, "comment_id": 82567518, "body": "Constructive criticism welcome. So far, you&#39;ve only said &quot;Using SHA1 with a salt is not secure and should not be used for a password verifier.&quot;. Not useful."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204453, "post_id": 47800756, "comment_id": 82567633, "body": "@zaph, I promise to look into that. Right now, just going to add that as a one liner. I have no time left."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204971, "post_id": 47800756, "comment_id": 82567844, "body": "Great, I will delete most of my comments."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1513204537, "last_edit_date": 1513204537, "creation_date": 1513193211, "answer_id": 47800756, "question_id": 47797148, "link": "https://stackoverflow.com/questions/47797148/c-function-to-password-match-salted-sha1/47800756#47800756", "title": "C function to password match salted sha1", "body": "<p>First of all, your existing code suffers from a serious security bug. The salt shouldn't be constant. A different, random salt should be used for each password.</p>\n\n<pre><code>use Math::Random::Secure::RNG qw( );  # Or some other cryptographic-safe number generator\n\nuse feature qw( state );\n\nsub generate_salt {\n    state $rng = Math::Random::Secure::RNG-&gt;new();\n    my $uint32 = $rng-&gt;irand();\n    return pack('N', $uint32);\n}\n\nsub hash_password {\n    my ($password, $salt) = @_;\n    return sha1($password . $salt);\n}\n\nsub encode_password {\n    my ($plaintext_password) = @_;\n    my $salt = generate_salt();\n    my $hashed_password = hash_password($plaintext_password, $salt);\n    return join('-',\n       encode_base64($salt, ''),\n       encode_base64($hashed_password, ''),\n    );\n}\n\nsub is_correct_password {\n   my ($plaintext_password, $encoded_password) = @_;\n   my ($salt_base64, $hashed_password_base64) = split(/-/, $encoded_password);\n   my $salt = decode_base64($salt_base64);\n   my $hashed_password = decode_base64($hashed_password_base64);\n\n   return hash_password($plaintext_password, $salt) eq $hashed_password;\n}\n</code></pre>\n\n<p>To change password:</p>\n\n<pre><code>my $plaintext_password = '...from user...';\nmy $encoded_password = encode_password($plaintext_password);\n</code></pre>\n\n<p>To check password:</p>\n\n<pre><code>my $plaintext_password = '...from user...';\nmy $encoded_password = '...from storage...';\nif (!is_correct_password($plaintext_password, $encoded_password)) {\n   die(\"Authentication error\\n\");\n}\n</code></pre>\n\n<p>This is still wrong, though. <code>sha1</code> is far too weak. <code>PBKDF2</code> with at least 10,000 iterations should be used instead.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513204537, "creation_date": 1513180155, "question_id": 47797148, "link": "https://stackoverflow.com/questions/47797148/c-function-to-password-match-salted-sha1", "title": "C function to password match salted sha1", "body": "<p>I am using a perl function to generate passwords in sha1 with a salt. </p>\n\n<pre><code>sub  set_new_password{\n    my ($newpass)=@_;\n    $salt='4Ly5W7xx';\n    $pass= encode_base64(sha1($newpass.$salt).$salt);\n    return $pass;\n}\n</code></pre>\n\n<p>Now I have to verify this password in a C program. \nThere are sha1 verifiers like <a href=\"https://pastebin.com/CPC1vYAK\" rel=\"nofollow noreferrer\">https://pastebin.com/CPC1vYAK</a> but how do I verify passwords with a salt </p>\n\n<p>Is there some sample I can copy from </p>\n"}, {"tags": ["json", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1513163098, "post_id": 47791364, "comment_id": 82543908, "body": "It&#39;s an <i>array</i>. <code>my $count2 = @$x</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1513170583, "post_id": 47791364, "comment_id": 82548537, "body": "Please don&#39;t post images of text. The text itself is far more useful to us."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 1, "creation_date": 1513185537, "post_id": 47791364, "comment_id": 82558635, "body": "it&#39;s quite common for a json data structure to be an array of hashes"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1513216716, "post_id": 47794880, "comment_id": 82571082, "body": "Thanks shawnhcorey!  That was awesome. Although I used if (ref $w eq &#39;ARRAY&#39;) instead of creating $ref.  Do you foresee an issue with that approach?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1513255511, "post_id": 47794880, "comment_id": 82588642, "body": "<code>if( ref( $w ) eq &#39;ARRAY&#39; )</code> Include the parenthesis around <code>$w</code> for clarity. There is nothing wrong with this. TIMTOWTDI."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1513260970, "post_id": 47794880, "comment_id": 82592288, "body": "@user: Shawn&#39;s approach avoids calculating <code>ref $w</code> twice."}, {"owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1513345709, "post_id": 47794880, "comment_id": 82630314, "body": "Thanks for the feedback. Helped a lot!"}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": true, "score": 1, "last_activity_date": 1513173748, "creation_date": 1513173748, "answer_id": 47794880, "question_id": 47791364, "link": "https://stackoverflow.com/questions/47791364/perl-json-issue-when-string-starts-with-and-not/47794880#47794880", "title": "Perl JSON issue when string starts with [ and not {", "body": "<p>Use the <code>ref</code> function to determine what type the reference is. See <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\"><code>perldoc -f ref</code></a>.</p>\n\n<pre><code>my $w = decode_json $string1;\nmy $count = 1;\n\nif( my $ref = ref( $w ) ){\n    if( $ref eq 'HASH' ){\n        $count = keys %$w;\n    }elsif( $ref eq 'ARRAY' ){\n        $count = scalar @$w;\n    }else{\n        die \"invalid reference '$ref'\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47794880, "answer_count": 1, "score": -2, "last_activity_date": 1513173748, "creation_date": 1513162745, "question_id": 47791364, "link": "https://stackoverflow.com/questions/47791364/perl-json-issue-when-string-starts-with-and-not", "title": "Perl JSON issue when string starts with [ and not {", "body": "<p>Hope some Perl gurus out there can help me out here. Basically my issue is when a JSON string starts with a \"[\" instead of a \"{\", Perl doesn't treat the variable as a hash after I use decode_json. </p>\n\n<p>Here's a sample code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse JSON;\n\nuse Data::Dumper;\n$string1 = '{\"Peti Bar\":{\"Literature\":88,\"Mathematics\":82,\"Art\":99},\"Foo Bar\":{\"Literature\":67,\"Mathematics\":97}}';\n$string = '[{\"ActionID\":5,\"ActionName\":\"TEST- 051017\"},{\"ActionID\":10,\"ActionName\":\"Something here\"},{\"ActionID\":13,\"ActionName\":\"Some action\"},{\"ActionID\":141,\"ActionName\":\"Email Reminder\"}]';\nprint \"First string that starts with \\\"{\\\" below:\\n$string1\\n\\n\";\nmy $w = decode_json $string1;\nmy $count = keys %$w;\nprint \"printing \\$count's value -&gt; $count\\n\\n\";\nprint \"Second string starts with \\\"[\\\" below:\\n$string\\n\\n\";\nmy $x = decode_json $string;\nmy $count2 = keys %$x;\nprint \"printing \\$count2's value -&gt;  $count2\\n\\n\";\n</code></pre>\n\n<p>Below is the script output.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nEDo6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nEDo6.png\" alt=\"&lt;code&gt;Script output&lt;/code&gt;\"></a>  </p>\n\n<p>Both $w and $x works though. It's just I have to use <strong>keys $x</strong> instead of <strong>keys %$x</strong> on the other json string.</p>\n\n<p>Now the issue with using that is I get a <strong>keys on reference is experimental at tests/jsontest.pl</strong> error. It won't stop the script but I'm worried about future compatibility issues. </p>\n\n<p>What's the best way to approach this? </p>\n"}, {"tags": ["perl", "csv", "duplicates", "delete-row", "multiple-entries"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513161425, "post_id": 47790791, "comment_id": 82542799, "body": "Please show the whole of your code, your input data, your current output, and the required output, and describe in detail the algorithm you want to implement."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513161452, "post_id": 47790791, "comment_id": 82542823, "body": "Some sample data and desired output would help greatly with understanding what you&#39;re doing. But for &quot;current price&quot; I&#39;d suggest you don&#39;t want the <code>ne</code> string comparison, but rather <code>!=</code> numeric comparison. Your use of ternary operators isn&#39;t helping your code clarity."}, {"owner": {"reputation": 1, "user_id": 6619093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186029e276ea12d20a3d3e346b79b2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Porridge", "link": "https://stackoverflow.com/users/6619093/porridge"}, "edited": false, "score": 0, "creation_date": 1513161647, "post_id": 47790791, "comment_id": 82542950, "body": "<a href=\"https://f.perl.bot/p/dmnuol\" rel=\"nofollow noreferrer\">f.perl.bot/p/dmnuol</a>"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 0, "creation_date": 1513163388, "post_id": 47790791, "comment_id": 82544097, "body": "Your link includes the output: Can&#39;t locate TVK/All.pm in @INC (you may need to install the TVK::All module)."}, {"owner": {"reputation": 1, "user_id": 6619093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186029e276ea12d20a3d3e346b79b2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Porridge", "link": "https://stackoverflow.com/users/6619093/porridge"}, "edited": false, "score": 0, "creation_date": 1513164843, "post_id": 47790791, "comment_id": 82545038, "body": "No I have that, its just the perlbot being weird. Script definitely runs ok"}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1513173912, "creation_date": 1513173912, "answer_id": 47794936, "question_id": 47790791, "link": "https://stackoverflow.com/questions/47790791/delete-duplicate-entries-printing-to-a-csv/47794936#47794936", "title": "Delete duplicate entries printing to a csv", "body": "<p>Use a proven module, like <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>, to create the file. Don't reinvent the wheel.</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1513190324, "creation_date": 1513190324, "answer_id": 47800010, "question_id": 47790791, "link": "https://stackoverflow.com/questions/47790791/delete-duplicate-entries-printing-to-a-csv/47800010#47800010", "title": "Delete duplicate entries printing to a csv", "body": "<p>I feel compelled to clean this up </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\n# it seems like your data structure is something like this:\nmy @all_costs = (\n    {\n        label =&gt; 'label1',\n        rate =&gt; {\n            service_name =&gt; 'name1',\n            total_price =&gt; 42\n        }\n    },\n    {\n        label =&gt; 'label2',\n        rate =&gt; {\n            service_name =&gt; 'name2',\n            total_price =&gt; 43\n        }\n    }\n);\n\nmy $fh = *STDOUT;\nsay {$fh} join ',', 'Country', 'Shipping Description', 'Price';\nfor my $info (@all_costs) {\n    say {$fh} join ',', $info-&gt;{label}, $info-&gt;{rate}-&gt;{service_name}, $info-&gt;{rate}-&gt;{total_price};\n}\n</code></pre>\n\n<p>change <code>$fh</code> to your filehandle</p>\n"}], "owner": {"reputation": 1, "user_id": 6619093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186029e276ea12d20a3d3e346b79b2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Porridge", "link": "https://stackoverflow.com/users/6619093/porridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1513190324, "creation_date": 1513161001, "last_edit_date": 1513162991, "question_id": 47790791, "link": "https://stackoverflow.com/questions/47790791/delete-duplicate-entries-printing-to-a-csv", "title": "Delete duplicate entries printing to a csv", "body": "<p>I have a file that prints to a csv.</p>\n\n<p>I have managed to delete duplicates for <code>label</code>.</p>\n\n<p>I cannot recreate this process for <code>service_name</code>, or <code>total_price</code>.</p>\n\n<p>The output goes into a csv.</p>\n\n<p>This is a learning task so I am choosing not to use extra modules.</p>\n\n<pre><code>my @all_costs = all_shipping_costs();\n\nforeach my $info(@all_costs) {\n  foreach my $rate(@ {\n    $info - &gt; {\n      'rates'\n    }\n  }) {}\n}\n\nmy $filename = \"beans.csv\";\nmy @headings = (\"Country\", \"Shipping Description\", \"Price\");\n\n#\nWrite out to the csv file\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\n\nprint $fh join(\",\", @headings).\n\"\\n\";\n\nmy $current_label = \"\";\nmy $current_name = \"\";\nmy $current_price = \"\";\n\nforeach my $info(@all_costs) {\n  foreach my $rate(@ {\n    $info - &gt; {\n      'rates'\n    }\n  }) {\n\n    print $fh($info - &gt; {\n        'label'\n      }\n      ne $current_label ? \"\\n\" : \"\");\n    print $fh($rate - &gt; {\n        'service_name'\n      }\n      ne $current_name ? \"\" : \"\");\n    print $fh($rate - &gt; {\n        'total_price'\n      }\n      ne $current_price ? \"\" : \"\");\n\n    print $fh($info - &gt; {\n        'label'\n      }\n      ne $current_label ? $info - &gt; {\n        'label'\n      } : \"\").\n    \",\".$rate - &gt; {\n      'service_name'\n    }.\n    \",\".$rate - &gt; {\n      'total_price'\n    }.\n    \"\\n\";\n\n    #\n    print Dumper $info;\n    $current_label = $info - &gt; {\n      'label'\n    };\n\n  }\n}\n</code></pre>\n"}, {"tags": ["perl", "cmd", "cpan"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1513163277, "post_id": 47790631, "comment_id": 82544027, "body": "Your log shows <code>This module requires a POSIX compliant system to work</code>. You can&#39;t install it on standard windows. Consider <code>Net::SSH:;Perl</code> instead."}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513246380, "post_id": 47790631, "comment_id": 82582670, "body": "@Borodin thank you , yes, i will try installing it .."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "edited": false, "score": 1, "creation_date": 1513247329, "post_id": 47792099, "comment_id": 82583340, "body": "that works , title suggestion: great, &amp; thank you for the info regarding Expect module  , that saved a lot of time, i was stuck in trial and error .. i tried another way , i used Net::SSH2 instead of NET::SSH:Expect and it works perfect.."}], "tags": [], "owner": {"reputation": 53, "user_id": 5480289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0561ef45a337421c902ca04e8a3ddad?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/5480289/ben"}, "is_accepted": false, "score": 1, "last_activity_date": 1513165134, "creation_date": 1513165134, "answer_id": 47792099, "question_id": 47790631, "link": "https://stackoverflow.com/questions/47790631/netsshexpect-configurations-to-work-over-windows/47792099#47792099", "title": "NET::SSH::Expect configurations to work over windows", "body": "<p>Sadly the Perl Expect module requires a UNIX based OS to function. I have implemented this a few times on a windows platform and basically you need to install an older ActiveState distribution of TCL, then you can have the Perl script call an external EXPECT script, like this:</p>\n\n<pre><code>$expectOutput = `[path_to_expect_script.expect]`;\n</code></pre>\n\n<p>Your variable will then contain the output of the Expect script.</p>\n\n<p>Hope this helps!</p>\n\n<p>Edit: You may like to reword your title to attract more answers relating to using expect on windows.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "is_accepted": true, "score": 1, "last_activity_date": 1513939750, "creation_date": 1513939750, "answer_id": 47940226, "question_id": 47790631, "link": "https://stackoverflow.com/questions/47790631/netsshexpect-configurations-to-work-over-windows/47940226#47940226", "title": "NET::SSH::Expect configurations to work over windows", "body": "<p>Solved! </p>\n\n<ul>\n<li><p>the new version of Expect is made compatible with the windows, but it need to be installed with cygwin ..</p></li>\n<li><p>In eclipse , make interpreter as cygwin (windows -> preference -> EPIC Perl -> interpreter). </p></li>\n</ul>\n\n<p>and execute the script:)</p>\n"}], "owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 47940226, "answer_count": 2, "score": 2, "last_activity_date": 1513939750, "creation_date": 1513160598, "last_edit_date": 1513247116, "question_id": 47790631, "link": "https://stackoverflow.com/questions/47790631/netsshexpect-configurations-to-work-over-windows", "title": "NET::SSH::Expect configurations to work over windows", "body": "<p>Machine details : Windows7 , 64-bits.\nI integrated perl in eclipse and used Net::SSH::Except module for scripting, but am getting an error as <code>Can't locate Net/SSH/Expect.pm in @INC (you may need to install the Net::SSH::Expect\n module) (@INC contains: C:/Perl64/site/lib/MSWin32-x64-multi-thread C:/Perl64/site/lib\n C:/Perl64/lib .)</code> </p>\n\n<p>Therefore, Am trying to install IO::Tty for Expect dependency, using command <code>cpan&gt;notest install IO::Tty</code>.\ni am getting the following error message :\nand the module is not being installed, even the <code>NET::SSH::Expect</code> not getting installed.</p>\n\n<pre><code>cpan&gt; notest install IO::Tty\nReading 'C:\\Perl64\\cpan\\Metadata'\nDatabase was generated on Mon, 11 Dec 2017 04:41:02 GMT\nFetching with LWP:\nhttp://ppm.activestate.com/CPAN/authors/01mailrc.txt.gz\nReading 'C:\\Perl64\\cpan\\sources\\authors\\01mailrc.txt.gz'\n\n.............................................................DONE\n\nFetching with LWP:\nhttp://ppm.activestate.com/CPAN/modules/02packages.details.txt.gz\nReading 'C:\\Perl64\\cpan\\sources\\modules\\02packages.details.txt.gz'\nDatabase was generated on Tue, 12 Dec 2017 04:29:02 GMT\n.............\n**New CPAN.pm version (v2.16) available.\n[Currently running version is v2.1101]\nYou might want to try\ninstall CPAN\nreload cpan\nto both upgrade CPAN.pm and run the new version without leaving\nthe current session.**\n\n\n..............................................................DONE\nFetching with LWP:\nhttp://ppm.activestate.com/CPAN/modules/03modlist.data.gz\nReading 'C:\\Perl64\\cpan\\sources\\modules\\03modlist.data.gz'\nDONE\nWriting C:\\Perl64\\cpan\\Metadata\nRunning install for module 'IO::Tty'\nChecksum for C:\\Perl64\\cpan\\sources\\authors\\id\\T\\TO\\TODDR\\IO-Tty-1.12.tar.gz \nok\nScanning cache C:\\Perl64/cpan/build for sizes\n...............................................................DONE\n\nIO-Tty-1.12/\nIO-Tty-1.12/ChangeLog\nIO-Tty-1.12/Makefile.PL\nIO-Tty-1.12/MANIFEST\nIO-Tty-1.12/META.json\nIO-Tty-1.12/META.yml\nIO-Tty-1.12/Pty.pm\nIO-Tty-1.12/README\nIO-Tty-1.12/t/\nIO-Tty-1.12/try\nIO-Tty-1.12/Tty.pm\nIO-Tty-1.12/Tty.xs\nIO-Tty-1.12/t/test.t\nConfiguring T/TO/TODDR/IO-Tty-1.12.tar.gz with Makefile.PL\nThis module requires a POSIX compliant system to work. Try cygwin if you \nneed this module on windows OS unsupported at Makefile.PL line 6.\nWarning: No success on command[C:\\Perl64\\bin\\perl.exe Makefile.PL \nINSTALLDIRS=site]\nTODDR/IO-Tty-1.12.tar.gz\nC:\\Perl64\\bin\\perl.exe Makefile.PL INSTALLDIRS=site -- NOT OK\nFailed during this command:\nTODDR/IO-Tty-1.12.tar.gz                     : writemakefile NO \n'C:\\Perl64\\bin\\\nperl.exe Makefile.PL INSTALLDIRS=site' returned status 65280\n</code></pre>\n\n<p>i have tried installed IO::Tty with following command \n<code>cpanm --install IO::Tty</code>\n<code>cpanm --verbose IO::Tty</code>\n<code>cpanm --force IO::Tty</code>\nall failing , this may be due to the lower version of the perl.\nwhat is the command to upgrade cpan from cmd and also perl through cmd?</p>\n"}, {"tags": ["perl", "pdf", "fonts", "chinese-locale"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1513171893, "post_id": 47789795, "comment_id": 82549423, "body": "Can you include example text please?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1513204582, "post_id": 47789795, "comment_id": 82567672, "body": "i am no expert on PDF::API2, but if i inspect <code>&#47;Library&#47;Fonts&#47;Times New Roman.ttf</code>, then there is no chinees in it at all. You probably need to choose from any of the cjkfonts like <code>my $cjk = $pdf-&gt;pdf-&gt;cjkfont(&#39;KozMin-Bold&#39;)</code>and use that one instead"}, {"owner": {"reputation": 4691, "user_id": 302915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/afe39c5876518d84943dbc30652e38d8?s=128&d=identicon&r=PG", "display_name": "Gene Vincent", "link": "https://stackoverflow.com/users/302915/gene-vincent"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1513295759, "post_id": 47789795, "comment_id": 82610448, "body": "@vanHoesel: Thanks, that works, but even in the Chinese CJK fonts some Chinese characters are missing that I have in my data and they also don&#39;t seem to have all European umlauts. I wish there was a way to generate PDFs without having to know which characters there are in the text and it would fall back onto other fonts."}], "owner": {"reputation": 4691, "user_id": 302915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/afe39c5876518d84943dbc30652e38d8?s=128&d=identicon&r=PG", "display_name": "Gene Vincent", "link": "https://stackoverflow.com/users/302915/gene-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513158066, "creation_date": 1513158066, "question_id": 47789795, "link": "https://stackoverflow.com/questions/47789795/using-chinese-characters-in-pdfapi2simple", "title": "Using Chinese characters in PDF::API2::Simple", "body": "<p>I'm writing PDFs from a Perl script using PDF::API2::Simple.</p>\n\n<p>UIuse UTF-8 for my text and it works great until I have Chinese characters in the text, which only show up as boxes.</p>\n\n<pre><code>PDF::API2::addFontDirs('/usr/share/fonts/truetype/msttcorefonts/');\nmy $TimesNewRoman = $pdf-&gt;pdf-&gt;ttfont('Times_New_Roman.ttf', -encode=&gt;'utf-8');\n$pdf-&gt;add_font('Times New Roman', $TimesNewRoman, 14);\n$pdf-&gt;set_font('Times New Roman', 14);\n$pdf-&gt;text($whateverText);\n</code></pre>\n\n<p>Is there a way to have PDF::API2::Simple fall back to another font if the current font can't show all the characters ?</p>\n\n<p>Strangely LibreOffice seems to be able to display the same text string in Times New Roman...</p>\n"}, {"tags": ["bash", "perl", "batch-rename"], "comments": [{"owner": {"reputation": 3997, "user_id": 4279440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFkXD.jpg?s=128&g=1", "display_name": "Travis Clarke", "link": "https://stackoverflow.com/users/4279440/travis-clarke"}, "edited": false, "score": 1, "creation_date": 1513124830, "post_id": 47783117, "comment_id": 82528806, "body": "The trick here is that the <code>rename</code> command uses <code>perl</code> syntax, rather than <code>bash</code> shell syntax. I don&#39;t have a good, comprehensive source on hand to elaborate/express this, but I will attach to my answer when I do."}, {"owner": {"reputation": 3997, "user_id": 4279440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFkXD.jpg?s=128&g=1", "display_name": "Travis Clarke", "link": "https://stackoverflow.com/users/4279440/travis-clarke"}, "edited": false, "score": 0, "creation_date": 1513125175, "post_id": 47783117, "comment_id": 82528895, "body": "I am hesitant to link to an external website; there are plenty of guides out there (a google search away). As a start, you can get a cursory overview using <code>man perlre</code>."}, {"owner": {"reputation": 4230, "user_id": 1091386, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bd5c864fec9209546b3da1cf717193b0?s=128&d=identicon&r=PG", "display_name": "icedwater", "link": "https://stackoverflow.com/users/1091386/icedwater"}, "reply_to_user": {"reputation": 3997, "user_id": 4279440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFkXD.jpg?s=128&g=1", "display_name": "Travis Clarke", "link": "https://stackoverflow.com/users/4279440/travis-clarke"}, "edited": false, "score": 0, "creation_date": 1584431099, "post_id": 47783117, "comment_id": 107427067, "body": "Thanks for pointing this out, @TravisClarke. I&#39;ll keep this and your answer in mind for future reference, I do like the <code>rename</code> command."}], "answers": [{"comments": [{"owner": {"reputation": 3997, "user_id": 4279440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFkXD.jpg?s=128&g=1", "display_name": "Travis Clarke", "link": "https://stackoverflow.com/users/4279440/travis-clarke"}, "edited": false, "score": 0, "creation_date": 1513125517, "post_id": 47783623, "comment_id": 82529003, "body": "For completeness, there is a <i>similar</i> (not duplicate) thread over on <a href=\"https://unix.stackexchange.com/questions/47006/trying-to-do-arithmetic-in-perl-rename-tool-debian\">Unix &amp; Linux</a> which may shed additional light on the matter."}, {"owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "edited": false, "score": 0, "creation_date": 1513128790, "post_id": 47783623, "comment_id": 82529756, "body": "That worked, but if I have a lot of files, I get this error: &quot;a001.png not renamed: a011.png already exists&quot;. I was able to rename everything to &quot;bXXX.png&#39; and then back to &#39;aXXX.png&#39;, but is there a simpler way? I tought that sorting the names in reverse order would work  &quot;ls | sort -r | rename ...&quot; , but it didn&#39;t."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "edited": false, "score": 2, "creation_date": 1513152834, "post_id": 47783623, "comment_id": 82537579, "body": "@klaus - I was wondering whether you&#39;d run into that problem... Your <code>ls | sort -r</code> solution to reverse the order <i>does</i> work, but you also have to remove the <code>*</code> from the end of the <code>rename</code> command because it only reads filenames from STDIN if no names are provided as arguments."}, {"owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1513178610, "post_id": 47783623, "comment_id": 82554010, "body": "@DaveSherohman It works, but I tought that using <code>ls | sort -r</code> would solve the &#39;already exists&#39; error in rename. But the solution was to use &#39;-f&#39; instead."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "edited": false, "score": 2, "creation_date": 1513243492, "post_id": 47783623, "comment_id": 82580757, "body": "@klaus - Umm... If you &quot;solved&quot; it with <code>-f</code>, you might want to double-check your files and their contents. If you start with <code>a001</code>, <code>a011</code>, and <code>a021</code> and use <code>rename -f</code>, you will end up with only one file, <code>a031</code>, which will contain the original content of <code>a001</code>. <code>a011</code> and <code>a021</code> will be destroyed. I assume this is/was not your desired result."}, {"owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1513491757, "post_id": 47783623, "comment_id": 82669785, "body": "@DaveSherohman Indeed, I tested here and <code>-f</code> does not work, and it would make me lose all files. It worked because for some reason I used <code>-f</code> together with <code>ls | sort -r</code>."}], "tags": [], "owner": {"reputation": 3997, "user_id": 4279440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFkXD.jpg?s=128&g=1", "display_name": "Travis Clarke", "link": "https://stackoverflow.com/users/4279440/travis-clarke"}, "is_accepted": true, "score": 7, "last_activity_date": 1513125253, "last_edit_date": 1513125253, "creation_date": 1513123987, "answer_id": 47783623, "question_id": 47783117, "link": "https://stackoverflow.com/questions/47783117/rename-files-using-math-operations/47783623#47783623", "title": "Rename files using math operations", "body": "<p>This should do the trick. If you do not want the leading zero you can remove <code>sprintf</code> as well as the <code>\"%03d\"</code> format string. Furthermore, if the files to be renamed will <strong>always</strong> begin with <code>a</code>, you can also supplant the leading regex <code>[a-zA-Z]*</code> with the literal character <code>a</code>. Lastly, although the <code>*</code> file specifier may be adequate, I would recommend tacking on an extension as an additional safety precaution (e.g. <code>*.png</code>).</p>\n\n<blockquote>\n  <p>As always, try it out first using the <code>-n</code> flag to verify the rename is <em>correct</em>.</p>\n</blockquote>\n\n<pre><code>rename -v 's/([a-zA-Z]*)([0-9]*)/$1.sprintf(\"%03d\",$2+10)/e' *\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4230, "user_id": 1091386, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bd5c864fec9209546b3da1cf717193b0?s=128&d=identicon&r=PG", "display_name": "icedwater", "link": "https://stackoverflow.com/users/1091386/icedwater"}, "is_accepted": false, "score": 0, "last_activity_date": 1584431038, "creation_date": 1584431038, "answer_id": 60718142, "question_id": 47783117, "link": "https://stackoverflow.com/questions/47783117/rename-files-using-math-operations/60718142#60718142", "title": "Rename files using math operations", "body": "<p>If you don't want to use <code>rename</code> to rename, you can still work with bash syntax. I had a bunch of old logs I needed to shift by 5 days, as in:</p>\n\n<pre><code>log.365.gz -&gt; log.370.gz\nlog.364.gz -&gt; log.369.gz\n...\n</code></pre>\n\n<p>I used a for loop counting backwards:</p>\n\n<pre><code>for date in {365..1}; do\n    mv -nv log.$date.gz log.$(date+5).gz\ndone\n</code></pre>\n\n<p>The <code>-n</code> flag moved the files without clobbering old files.</p>\n"}], "owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 1, "accepted_answer_id": 47783623, "answer_count": 2, "score": 8, "last_activity_date": 1584431038, "creation_date": 1513120607, "last_edit_date": 1513127461, "question_id": 47783117, "link": "https://stackoverflow.com/questions/47783117/rename-files-using-math-operations", "title": "Rename files using math operations", "body": "<p>I am trying to rename some files using a bash command, but I don't know how to add an arithmetic expression/math operation into the regex expression.</p>\n\n<p>Input:</p>\n\n<pre><code>a000.png\na001.png\n...\n</code></pre>\n\n<p>Ouput:</p>\n\n<pre><code>a010.png\na011.png\n...\n</code></pre>\n\n<p>I am trying to add 10 to the names.</p>\n\n<p>Some things I tried:</p>\n\n<pre><code>rename -n -e 's/a(\\d+).png/a$1 + 10.png/' *\nrename -n -e 's/a(\\d+).png/a{$1 + 10}.png/' *\nrename -n -e 's/a(\\d+).png/a$($1 + 10).png/' *\n</code></pre>\n\n<p>Is there a simple way to do this?</p>\n"}, {"tags": ["regex", "perl", "powershell"], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1513115536, "post_id": 47781677, "comment_id": 82525601, "body": "This looks great, and I appreciate the clarifications on things I could be doing better. Did you see anything that would\u2019ve been causing my regex not to match?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1513115606, "post_id": 47781677, "comment_id": 82525623, "body": "We&#39;d need more examples of what you want to match (or what you don&#39;t want to match) to be of more help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1513117381, "post_id": 47781677, "comment_id": 82526334, "body": "@zzxyx:  The non-space fields should probably be <code>\\S+</code> as it doesn&#39;t make sense for all of those to match nothing"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1513119333, "post_id": 47781677, "comment_id": 82527155, "body": "The issue that your regex fixed was that I did not want <code>;</code> in my regex as the usage in the test was <code>if(myFunc(etc)){</code>  So... the <i>primary issue</i> was basically a bug rather than a misunderstanding of some fundamental.  I know stackoverflow is big on questions that can help other people.  Should I delete it?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1513150801, "post_id": 47781677, "comment_id": 82536530, "body": "I see no reason to delete it, especially if the answer helped you. I can update the answer to explicitly mention the semicolon if it makes you feel better?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1513193373, "post_id": 47781677, "comment_id": 82562616, "body": "@choroba - nah, I would have to update my question as well :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1513113436, "creation_date": 1513113436, "answer_id": 47781677, "question_id": 47781514, "link": "https://stackoverflow.com/questions/47781514/multiline-mode-search-and-replace-in-perl/47781677#47781677", "title": "Multiline mode search and replace in perl", "body": "<p>You don't need the <code>/m</code> modifier, as it changes the behaviour of <code>^</code> and <code>$</code> none of which you use in the regex.</p>\n\n<p>The same applies to <code>/s</code> - it makes <code>.</code> match a newline, but you don't need it, <code>\\s</code> already matches all whitespace including newlines.</p>\n\n<p>I'd list commas in the regex and omit the <code>.*</code> at the end as it could (with <code>/s</code>) match the rest of the document.</p>\n\n<pre><code>perl -0pe 's/myFunc\\((\\S*),\\s*(\\S*),\\s*(\\S*),\\s*(\\S*),\\s*(\\S*?),\n             \\s*NULL,\\s*NULL,\\s*NULL,\\s*NULL\\s*\\)\n            /myFuncNoCB($1, $2, $3, $4)/xg' -- file\n</code></pre>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 47781677, "answer_count": 1, "score": 1, "last_activity_date": 1513113436, "creation_date": 1513112737, "last_edit_date": 1513113039, "question_id": 47781514, "link": "https://stackoverflow.com/questions/47781514/multiline-mode-search-and-replace-in-perl", "title": "Multiline mode search and replace in perl", "body": "<p>Given the following type of input (contained within numerous files):</p>\n\n<pre><code>ret = myFunc(&amp;pConfig-&gt;hConstraintList, &amp;pConfig-&gt;util,\n                   2, sizeof(rcConstraint_t),\n                   NULL, NULL, NULL, NULL, NULL);\n</code></pre>\n\n<p>I'm trying to get the following regex to match:</p>\n\n<pre><code>myFunc\\((\\S*)\\s*(\\S*)\\s*(\\S*)\\s*(\\S*)\\s*(\\S*?),\\s*NULL,\\s*NULL,\\s*NULL,\\s*NULL\\s*\\).*;\n</code></pre>\n\n<p>The idea is to replace this with the following:</p>\n\n<pre><code>myFuncNoCB($1 $2 $3 $4 $5);\n</code></pre>\n\n<p>This works as a .NET regex, but doing in-file search and replace in powershell is a pain, and the VS UI doesn't fully support multiline expressions.</p>\n\n<p>So...perl.  But I can't even get the match to work:</p>\n\n<p>Here's what I've tried:</p>\n\n<pre><code>perl -0ne '/myFunc\\((\\S*)\\s*(\\S*)\\s*(\\S*)\\s*(\\S*)\\s*(\\S*?),\\s*NULL,\\s*NULL,\\s*NULL,\\s*NULL\\s*\\).*;/gms' myfile.cpp\n</code></pre>\n\n<p>My assumption is that perl doesn't consider a newline whitespace even in multiline mode?  That's going to be a complete nightmare as each parameter could have any number of spaces, tabs, newlines, in any order between them.</p>\n\n<p>I'm interested in any solution that works, to be frank.  There's a lot of variables here.  I did a <code>perl -pi -e 's/\\r//g'</code> on this particular file to eliminate that potential issue but I would love a solution that doesn't choke on <code>\\r</code> as well.</p>\n\n<p>PS--I've google searched this question, and searched on stackoverflow.  The issue is that most people that use \"multiline\" just need to search multiple lines...one at a time.  Those that use it correctly have significantly different patterns they are trying to match that don't help me.  If there's an answer that helps me, I couldn't find it.</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513110630, "post_id": 47780991, "comment_id": 82523400, "body": "I tried, number of row and it is 1. How do I get the length? It&#39;s not horizontal array rather vertical, and out put looks like this: &lt;p&gt; 0  \t\t0 ARRAY(0x32c40f8)  \t\t\t\t0 &quot;CREATE SET TABLE (my contents....) \t\t\t\t&lt;\\p&gt;"}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513110967, "post_id": 47780991, "comment_id": 82523558, "body": "I think it is reference of referenced context. Sorry I am not able to format the result set properly but it is like a stair with 3 steps below: 0 (nothing after) first line, then  ARRAY(0x32c40f8) (on the second line, shifted two space to right) and finally my content on the 3rd line but shifted 3 space to the right."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513110997, "post_id": 47780991, "comment_id": 82523580, "body": "Are you asking how to get the number of elements in an array to which you have a reference? <code>@$ref</code> in scalar context."}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513111104, "post_id": 47780991, "comment_id": 82523634, "body": "@ ikegami I am asking how do I print the contents that is on the 3rd line and shifted to 3 spaces and it consist of multiple lines after. thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513111139, "post_id": 47780991, "comment_id": 82523643, "body": "You already are."}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513111247, "post_id": 47780991, "comment_id": 82523700, "body": "Problem is, it is printing only last line of the array not the beginning of my contents for that reference...."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513111272, "post_id": 47780991, "comment_id": 82523710, "body": "You are mistaken. It&#39;s printing every field of every row of the resultset."}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513111464, "post_id": 47780991, "comment_id": 82523802, "body": "OK, may be I am missing something. When I debug it, and stop right after that fetch loop, I see the variable $h does have my content containing multiple lines, however when I run it, I just see 1 line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513111491, "post_id": 47780991, "comment_id": 82523811, "body": "You keep talking about lines, but there are no lines, just rows and fields."}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513111575, "post_id": 47780991, "comment_id": 82523850, "body": "OK so how do I print all rows and all fields (just contents and not the array)? Thank you"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513114193, "post_id": 47780991, "comment_id": 82525053, "body": "Are you talking about printing <i>debugger</i>&#39;s output? If not, and you want to print <code>$rows</code> then you <i>are doing that</i> -- perhaps replace that unneeded <code>printf</code> with <code>say $x;</code> (you may need to add <code>use feature &#39;say&#39;;</code> at the top of your program)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1513117079, "post_id": 47780991, "comment_id": 82526211, "body": "You probably want to remove <code>show</code> from your SQL"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1513119201, "post_id": 47780991, "comment_id": 82527108, "body": "<a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>use Data::Dumper;</code></a> and <code>print Dumper($x);</code> makes things much clearer in most cases."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1513153930, "post_id": 47780991, "comment_id": 82538133, "body": "I have fixed the indentation in your code. You&#39;re welcome, but please do it yourself in the future. Good indentation is an important tool in understanding a piece of code. If you&#39;re asking a large group of strangers to read and understand your code, it&#39;s only polite to make that as easy as possible for them."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1513194208, "post_id": 47780991, "comment_id": 82563059, "body": "<code>use Data::Dumper</code> and <code>print Dumper $rows</code> to make sure you&#39;re getting what you expect from <code>selectall_arrayref</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513173916, "post_id": 47783935, "comment_id": 82550709, "body": "Thank you, @Mathew, the above code printed lenth=1 and I did get the complete last line on the result along with some other line concatenated. Very odd still did not dump the complete array contents. Any other idea?"}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513174022, "post_id": 47783935, "comment_id": 82550791, "body": "@Borodin the &quot;Show&quot; actually is part of the command that I am running. The SELECT works fine and returns results but the Show actually pulls the DDL related to that select is involved. This is a Teradata specific command.  Thanks!"}, {"owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "edited": false, "score": 0, "creation_date": 1513254264, "post_id": 47783935, "comment_id": 82587838, "body": "Just to follow up on this. When I put a break point and tried to see what&#39;s on the $h, it shows all the contents that is complete array.  However when the above code tried to print it just print the last line also the length shows 1. Not understanding why.... any other thoughts?"}], "tags": [], "owner": {"reputation": 1, "user_id": 8624398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4d54911bbf58b7d5b627406177fe02?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/8624398/matthew"}, "is_accepted": false, "score": -1, "last_activity_date": 1513127035, "last_edit_date": 1513127035, "creation_date": 1513126394, "answer_id": 47783935, "question_id": 47780991, "link": "https://stackoverflow.com/questions/47780991/perl-get-elements-from-array-nested/47783935#47783935", "title": "perl get elements from array, nested", "body": "<p><strong>try</strong></p>\n\n<pre><code>use DDP;\n\nmy $rows = $dbh-&gt;selectall_arrayref(\"show SELECT * FROM table SAMPLE 3\");\nmy $len = @$rows;\np $len;\nforeach $h (@$rows) {\n    p $h;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "is_accepted": true, "score": 0, "last_activity_date": 1513370601, "creation_date": 1513370601, "answer_id": 47839621, "question_id": 47780991, "link": "https://stackoverflow.com/questions/47780991/perl-get-elements-from-array-nested/47839621#47839621", "title": "perl get elements from array, nested", "body": "<p>Ok finally figured out. Since it was array element [0], all I had to do is assign this to a variable and then do the split.  Hope this helps. Thanks!</p>\n\n<pre><code> $st= $h-&gt;[0];\n @lines = split/,/,$st;        \n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4383989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec895a03ac7a1c2163e723b89cc1f120?s=128&d=identicon&r=PG&f=1", "display_name": "Aftab Khan", "link": "https://stackoverflow.com/users/4383989/aftab-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 47839621, "answer_count": 2, "score": 1, "last_activity_date": 1513370601, "creation_date": 1513110419, "last_edit_date": 1513153722, "question_id": 47780991, "link": "https://stackoverflow.com/questions/47780991/perl-get-elements-from-array-nested", "title": "perl get elements from array, nested", "body": "<p>I am using perl DBI module to get data back from database in array format. The code I have so far looks like this:</p>\n\n<pre><code>$rows = $dbh-&gt;selectall_arrayref(\"show SELECT * FROM table SAMPLE 3\");\nforeach $h (@$rows) {\n  foreach $x (@$h) {\n    printf \"%s\\n\", $x;\n  }\n}\n</code></pre>\n\n<p>After I put a break in debug mode I see my data like this: (the $h) </p>\n\n<hr>\n\n<pre><code> 0 ARRAY(0x32c40f8)\n   0 \"CREATE SET TABLE (my contents....)\n</code></pre>\n\n<hr>\n\n<p>My questions are: 1. How do I know how big is the array and\n 2. How do I print all the contents that is I want - \"CREATE SET TABLE (my contents....)\n Please someone shed some idea and Thank you...</p>\n"}, {"tags": ["perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "edited": false, "score": 1, "creation_date": 1513913876, "post_id": 47794596, "comment_id": 82840480, "body": "Thanks for your help toolic!"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "reply_to_user": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "edited": false, "score": 0, "creation_date": 1513954379, "post_id": 47794596, "comment_id": 82856342, "body": "@MichaelSun: You&#39;re welcome.  The module author has fixed this in a new version (0.004)."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1513173929, "last_edit_date": 1513173929, "creation_date": 1513172909, "answer_id": 47794596, "question_id": 47780842, "link": "https://stackoverflow.com/questions/47780842/how-to-fix-verilogvcdwriter-error-cant-locate-object-method-addsignal/47794596#47794596", "title": "How to fix Verilog::VCD::Writer error: Can&#39;t locate object method addSignal?", "body": "<p>This is a documentation bug.</p>\n\n<p>The code in the SYNOPSIS section of the POD has syntax errors.  Here is a fixed version of the code which runs without errors and generates a VCD output file:</p>\n\n<pre><code>use Verilog::VCD::Writer;\n\nmy $writer = Verilog::VCD::Writer-&gt;new(timescale=&gt;'1 ns',vcdfile=&gt;\"test.vcd\");\n$writer-&gt;addComment(\"Author:Vijayvithal\");\n\nmy $top = $writer-&gt;addModule(\"top\"); # Create toplevel module\nmy $TX  = $top-&gt;addSignal(\"TX\",7,0); #Add Signals to top\nmy $RX  = $top-&gt;addSignal(\"RX\",7,0);\n\nmy $dut = $writer-&gt;addModule(\"DUT\");  #Create SubModule\n$dut-&gt;dupSignal($TX,\"TX\",7,0); #Duplicate signals from Top in submodule\n$dut-&gt;dupSignal($RX,\"RX\",7,0);\n\n$writer-&gt;writeHeaders(); # Output the VCD Header.\n$writer-&gt;setTime(0); # Time 0\n$writer-&gt;addValue($TX,0); # Record Transition\n$writer-&gt;addValue($RX,0);\n$writer-&gt;setTime(5); # Time 1ns\n$writer-&gt;addValue($TX,1);\n$writer-&gt;addValue($RX,0);\n</code></pre>\n\n<p>The code used the wrong object handle for <code>addSignal</code>; it needs to use <code>$top</code> instead of <code>$writer</code>.</p>\n\n<p>I uploaded a patch to the bug report you opened:\n<a href=\"https://rt.cpan.org/Ticket/Display.html?id=123724\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Ticket/Display.html?id=123724</a></p>\n"}], "owner": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614982659, "creation_date": 1513109770, "last_edit_date": 1614982659, "question_id": 47780842, "link": "https://stackoverflow.com/questions/47780842/how-to-fix-verilogvcdwriter-error-cant-locate-object-method-addsignal", "title": "How to fix Verilog::VCD::Writer error: Can&#39;t locate object method addSignal?", "body": "<p>I suspect I made an import error in Perl.</p>\n\n<p>There is a Perl module <code>Verilog::VCD::Writer</code> to write a VCD file. However, when I copy its SYNOPSIS code to have a try, it always raises the error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"addSignal\" via package\n  \"Verilog::VCD::Writer\" at tester.pl line 10.</p>\n</blockquote>\n\n<p>The SYNOPSIS calls <code>addComment</code> and <code>addModule</code> before <code>addSignal</code> so there should be no problems in my installation.\n<code>addSignal</code> is a function defined in <code>Verilog/VCD/Writer/Module.pm</code>, and the other two are defined in <code>Verilog/VCD/Writer.pm</code>. Even I add <code>Verilog::VCD::Writer::Module</code>, still the debugger go to package <code>Writer</code> to find the <code>addSignal</code> method.</p>\n\n<p>If I call the <code>addSignal</code> function in this way:</p>\n\n<pre><code>$writer-&gt;Verilog::VCD::Writer::Module::addSignal(\"TX\",7,0);\n</code></pre>\n\n<blockquote>\n  <p>Can't locate object method \"signals_push\" via package\n  \"Verilog::VCD::Writer\" at\n  /home/cqsun/lib/perl5/lib/site_perl/5.18.2/Verilog/VCD/Writer/Module.pm\n  line 41.</p>\n</blockquote>\n\n<p><code>Module.pm</code> defined signals_push in a hash, and clearly the debugger didn't find it.</p>\n\n<p>I suspect there is something wrong, but I don't know where it is.</p>\n\n<p>The webpage for this package is <a href=\"http://search.cpan.org/~jvs/Verilog-VCD-Writer-0.002/lib/Verilog/VCD/Writer.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~jvs/Verilog-VCD-Writer-0.002/lib/Verilog/VCD/Writer.pm</a></p>\n"}, {"tags": ["perl", "parentheses"], "comments": [{"owner": {"reputation": 302, "user_id": 7478708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249a64e62b70766b75477d4caf9796e5?s=128&d=identicon&r=PG&f=1", "display_name": "Boschko", "link": "https://stackoverflow.com/users/7478708/boschko"}, "edited": false, "score": 0, "creation_date": 1513101721, "post_id": 47778760, "comment_id": 82518787, "body": "are you using negative lookahead?"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1513108430, "post_id": 47778921, "comment_id": 82522284, "body": "Admirable! But I reckon this is a reason why people get frightened when they scent Perl... ;-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1513108814, "post_id": 47778921, "comment_id": 82522494, "body": "@PerlDuck, Actually, it&#39;s amazing how simple and structured Perl made this."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1513147788, "post_id": 47778921, "comment_id": 82535221, "body": "As a beginner I couldn&#39;t understand this hence kindly provide a detailed methodology to learn."}, {"owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1513170171, "post_id": 47778921, "comment_id": 82548266, "body": "I second @ssr1012 request."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513178097, "post_id": 47778921, "comment_id": 82553651, "body": "I already explained the methodology in the answer. The rest is documented in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>, but it&#39;s either elementary regex, or obvious (<code>(&amp;NAME)</code> matches the pattern defined by <code>(?&lt;NAME&gt; ... )</code>)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1513178356, "last_edit_date": 1513178356, "creation_date": 1513101920, "answer_id": 47778921, "question_id": 47778760, "link": "https://stackoverflow.com/questions/47778760/matching-text-not-enclosed-by-parenthesis/47778921#47778921", "title": "Matching text not enclosed by parenthesis", "body": "<p>Regex patterns have an implicit leading <code>\\G(?s:.)*?</code> (\"skip characters until a match is found\"). The following expands that definition to consider nested parens to be a character to skip.</p>\n\n<pre><code>while (\n   $string =~ m{\n      \\G (?&amp;MEGA_DOT)*?\n\n      ( foo )\n\n      (?(DEFINE)\n         (?&lt;MEGA_DOT&gt; [^()] | \\( (?&amp;MEGA_DOT)*+ \\) )\n      )\n   }xg\n) {\n   say \"Found a match at pos $-[1].\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1513170103, "post_id": 47780197, "comment_id": 82548202, "body": "I didn&#39;t know about this module. Thanks! Though, I am finding it difficult to find the line number when matching inside <code>$text</code> or <code>$lead</code>. One way could be to count the number of newline characters in <code>$match</code>. But is there a better way?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 1, "creation_date": 1513199341, "post_id": 47780197, "comment_id": 82565564, "body": "@Tohiko  Welcome.  You mean to find what char/line in the source is found? Counting <code>\\n</code> in the <code>$lead</code> (or <code>$text</code>, as it&#39;s being depleted) won&#39;t inform what line it is in the source.  I&#39;ll look into it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1516513710, "post_id": 47780197, "comment_id": 83714912, "body": "@Tohiko Note that I changed <code>$lead</code> to <code>$before</code> and <code>$text</code> to <code>$remainder</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1516513723, "post_id": 47780197, "comment_id": 83714913, "body": "@Tohiko  I didn&#39;t find a better way than counting.  It is not tested well (works on <i>this</i> example) and there are probably all kinds of cases for which it won&#39;t, but here is the idea. I add <code>$line_cnt=1</code> and after <code>print ...</code> add the line <code>$line_cnt += () = ($before =~ &#47;\\n&#47;g)  if $before;</code>. The module may provide a better way but it&#39;s been a while since I read the whole page carefully. Will update if I find it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1516515344, "post_id": 47780197, "comment_id": 83715191, "body": "@Tohiko Another feature is <code>$@-&gt;{pos}</code>, see <a href=\"https://perldoc.perl.org/Text/Balanced.html#DIAGNOSTICS\" rel=\"nofollow noreferrer\">Diagnostics</a>.  But in this case, because of recursive processing, I still have to count lines."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1516513577, "last_edit_date": 1516513577, "creation_date": 1513107099, "answer_id": 47780197, "question_id": 47778760, "link": "https://stackoverflow.com/questions/47778760/matching-text-not-enclosed-by-parenthesis/47780197#47780197", "title": "Matching text not enclosed by parenthesis", "body": "<p>This is very far from \"obvious\"; on the contrary.  There is no direct way to say \"don't match\" for a complex pattern (there is good support at a character level, with <code>[^a]</code>, <code>\\S</code> etc).  Regex is firstly about matching things, not about not-matching them.</p>\n\n<p>One approach is to match those (possibly nested) delimiters and get everything other than that. </p>\n\n<p>A good tool for finding nested delimiters is the core module <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a>. As it matches it can also give us the substring before the match and the rest of the string after the match.  </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Text::Balanced qw(extract_bracketed);\n\nmy $text = &lt;&lt;'END';\n(bar foo bar)\nbar foo (\nbar foo \n   (bar) (foo)\n   )\nEND\n\nmy ($match, $before);\nmy $remainder = $text;\nwhile (1) {\n    ($match, $remainder, $before) = extract_bracketed($remainder, '(', '[^(]*');\n    print $before // $remainder;\n    last if not defined $match; \n}\n</code></pre>\n\n<p>The <code>extract_bracketed</code> returns the match, the remainder substring (<code>$remainder</code>), and the substring before the match (<code>$before</code>); so we keep matching in the remainder.</p>\n\n<p>Taken from <a href=\"https://stackoverflow.com/a/46121634/4653379\">this post</a>, where there are more details and another way, using <a href=\"http://search.cpan.org/~abigail/Regexp-Common-2017060201/lib/Regexp/Common.pm\" rel=\"nofollow noreferrer\">Regexp::Common</a>.</p>\n"}], "owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 1, "accepted_answer_id": 47780197, "answer_count": 2, "score": 3, "last_activity_date": 1516513577, "creation_date": 1513101321, "question_id": 47778760, "link": "https://stackoverflow.com/questions/47778760/matching-text-not-enclosed-by-parenthesis", "title": "Matching text not enclosed by parenthesis", "body": "<p>I am still learning Perl, so apologies if this is an obvious question.\nIs there a way to match text that is NOT enclosed by parenthesis?\nFor example, searching for foo would match the second line only.</p>\n\n<pre><code>(bar foo bar)\nbar foo (\nbar foo \n   (bar) (foo)\n)\n</code></pre>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1513092449, "post_id": 47776003, "comment_id": 82513246, "body": "I&#39;ve fixed the formatting of your code. Did you not see how bad it looked? If you are asking a large group of strangers to read and understand your code, then it is polite to make that as easy as possible for them. Please make more effort in the future."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "edited": false, "score": 1, "creation_date": 1513093571, "post_id": 47776156, "comment_id": 82513984, "body": "@ubuntu-user: Perhaps you could take the time to explain what the problem was and how you fixed it. Stack Overflow exists as a resource of programming problems along with their solutions. Without more explanation, this question is useless to anyone else who comes across it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513097007, "post_id": 47776156, "comment_id": 82516149, "body": "@Dave Cross, Surely their problem is the one identified in the answer to which they replied, and the solution they used is the one in that same answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513097184, "post_id": 47776156, "comment_id": 82516254, "body": "@ikegami: Well, we&#39;re only guessing that&#39;s what fixed his problem. If it was he could, at least, accept the answer :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513097282, "post_id": 47776156, "comment_id": 82516323, "body": "@Dave Cross, Yes, they should accept the answer, but I disagree about having guessed that it&#39;s my answer that fixed their problem seeing as they thanked me."}, {"owner": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513141553, "post_id": 47776156, "comment_id": 82532827, "body": "@DaveCross my problem was solved by adding &#39;chomp&#39; statement. ikegami was right"}, {"owner": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "edited": false, "score": 0, "creation_date": 1513141781, "post_id": 47776156, "comment_id": 82532893, "body": "But there is another problem if you guys can help me in figuring out. This code works fine when $rs_num has atleast one value that matches with the data in file but when $rs_num has all those values none of which gets match to the data in file then it prints other values."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513141949, "post_id": 47776156, "comment_id": 82532949, "body": "You&#39;ve gone from being bad at asking question to being horrible... See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "edited": false, "score": 0, "creation_date": 1513152936, "post_id": 47776156, "comment_id": 82537631, "body": "@ubuntu-user: If this answer solved your problem, then why haven&#39;t you <a href=\"https://stackoverflow.com/help/someone-answers\">accepted it</a>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "edited": false, "score": 0, "creation_date": 1513153211, "post_id": 47776156, "comment_id": 82537769, "body": "@ubuntu-user: It sounds like you have another question. Please post it separately."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1513092614, "creation_date": 1513092614, "answer_id": 47776156, "question_id": 47776003, "link": "https://stackoverflow.com/questions/47776003/grep-method-not-working-in-perl/47776156#47776156", "title": "Grep method not working in perl", "body": "<p>This works if <code>$rs_num</code> contains the string <code>rs548419688</code>. I suspect it actually contains the string <code>rs548419688\u240a</code> (<code>rs548419688</code> plus a line feed). When you read from a file, don't forget to use <code>chomp</code> to remove the line feed.</p>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 0, "last_activity_date": 1513103424, "creation_date": 1513103424, "answer_id": 47779257, "question_id": 47776003, "link": "https://stackoverflow.com/questions/47776003/grep-method-not-working-in-perl/47779257#47779257", "title": "Grep method not working in perl", "body": "<p>Another case for my standard recommendation:</p>\n\n<p>Whenever you are not sure why a comparison or regex fails, check what your data / your regex actually contains.</p>\n\n<pre><code>use Data::Dumper;\nlocal $Data::Dumper::Useqq = 1;\nprint Dumper $rs_num;\nprint Dumper \\@snp;\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">perldoc Data::Dumper</a></p>\n"}], "owner": {"reputation": 3, "user_id": 9089457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b68c04bf5fb2283a85717076aef323f?s=128&d=identicon&r=PG&f=1", "display_name": "ubuntu-user", "link": "https://stackoverflow.com/users/9089457/ubuntu-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 47776156, "answer_count": 2, "score": -4, "last_activity_date": 1513103424, "creation_date": 1513092112, "last_edit_date": 1513092452, "question_id": 47776003, "link": "https://stackoverflow.com/questions/47776003/grep-method-not-working-in-perl", "title": "Grep method not working in perl", "body": "<p>What is wrong with this <code>grep</code> statement? Everything else in the code is working fine, but I'm not getting any output in <code>@result</code>. </p>\n\n<p><code>$rs_id</code> gets the value from another file one by one which are <code>rs548419688</code>, <code>rs553613476</code> and <code>rs573497853</code>. When I use the statement <code>my @result= grep /rs548419688/, @snp;</code>, I get the correct output. But the code below isn't giving me any output. Could you please identify the error?</p>\n\n<pre><code>sub findVariants {\n    my ($rs_num) = @_;\n    open (my $in_file, '&lt;testSNPs')\n        or die \"Could not open the file: $!\\n\";\n\n    my @snp = &lt;$in_file&gt;;\n    my @result = grep /$rs_num/, @snp; \n    print @result;\n    close $in_file; \n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "multiline"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1513067349, "post_id": 47767877, "comment_id": 82497311, "body": "Your regex <i>does</i> return a list with <code>&#47;g</code>; so assign it to an array: <code>my @ary = $content =~ ...</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513070095, "post_id": 47767877, "comment_id": 82498846, "body": "Can you give some example data please, and desired output? At risk of sounding daft, is the file definitely <code>utf8</code> because that&#39;s not all that common? The problem with that pattern is that it&#39;ll return a list, but I&#39;m not sure it&#39;ll be capturing the right thing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513071432, "post_id": 47767877, "comment_id": 82499693, "body": "Please edit your question and add the data there. It&#39;s impossible to tell where the line breaks are if you put it in a comment."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513072390, "post_id": 47767877, "comment_id": 82500304, "body": "If all your files are indeed like this you don&#39;t need <code>slurp_utf8</code>, just as @Sobrique suspected, but rather <code>slurp</code> (and then assign your matches to an array). The regex does require some discussion though"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1513073112, "post_id": 47767877, "comment_id": 82500748, "body": "OK, with your sample input - what&#39;s your desired output?"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1513079203, "post_id": 47770048, "comment_id": 82504494, "body": "That&#39;s a pretty nice idea to assign the results of <code>m&#47;\u2026()\u2026()\u2026&#47;g</code> directly to a <code>%hash</code>. I will remember that."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1513073632, "creation_date": 1513073632, "answer_id": 47770048, "question_id": 47767877, "link": "https://stackoverflow.com/questions/47767877/perl-print-more-lines/47770048#47770048", "title": "Perl print more lines", "body": "<p>OK, your data looks like it's blank-line delimited. </p>\n\n<p>Handily, perl supports that really easily, using <code>$/</code> and setting it to <code>''</code>. </p>\n\n<p>And so you can iterate your file like so:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nlocal $/ = '';\nwhile ( &lt;&gt; ) {\n   my %this_int = m/([\\w\\-]+) ?(.*)/g; \n\n   if ( exists $this_int{'shutdown'} ) { \n       print  $this_int{'interface'}, \" \", $this_int{'description'} // '',\" is shut down\\n\";\n   }\n}\n</code></pre>\n\n<p>Which for your sample data will print:</p>\n\n<pre><code>port-channelxyc provdb002 is shut down\nport-channel200  is shut down\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513073632, "creation_date": 1513066102, "last_edit_date": 1513071936, "question_id": 47767877, "link": "https://stackoverflow.com/questions/47767877/perl-print-more-lines", "title": "Perl print more lines", "body": "<p>I am new in <code>Perl</code> and i want to print more than just the first regex match.\nThe txt file contains 57 times <code>shutdown</code>, with the following code i just get back the first match, than it stops.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\nuse autodie;\n\nmy $dir = path(\"H:/Perl\");\n\nmy $file = $dir-&gt;child(\"test.txt\");\n\nmy $content = $file-&gt;slurp_utf8();\n\nmy $file_handle = $file-&gt;openr_utf8();\n\n(my $test) = $content =~ m/^.+$(?=\\s+shutdown)/mg;{\nprint \"$test\\n\"; \n}\n</code></pre>\n\n<p>I tried an <code>while loop</code> but i didn't worked. Thanks for help.</p>\n\n<p>Edit:\nHere is some example data:</p>\n\n<pre><code>interface port-channelxyc\ndescription provdb002\nshutdown\nswitchport access vlan 123\nspanning-tree port type edge\n\ninterface port-channel456\ndescription provdb002\nswitchport access vlan 32\nspanning-tree port type edge\n\ninterface port-channel200\nshutdown\n</code></pre>\n\n<p>i got back only:\n'description provdb002'\nthen it stops, but i want get also the next one: 'interface port-channel200' and so on ... hope you understand what i mean.</p>\n"}, {"tags": ["javascript", "html", "perl"], "owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519372019, "creation_date": 1513056471, "last_edit_date": 1519372019, "question_id": 47765862, "link": "https://stackoverflow.com/questions/47765862/manage-parameter-into-a-function", "title": "Manage parameter into a function", "body": "<p>I am working now on a drag &amp; drop system of elements + management of areas to display  according to available area, all that in a modal during an onclick event.\nWhen I drag &amp; drop the element \"Image\" in one of the 3 big areas just below, I offer the possibility to the user of upload images thanks to the button \" Import an image \", and if this user already had upload images previously, he can find a list of all the images by clicking on \"Choose since the library \".</p>\n\n<p>The problem is that by imagining that the user already had upload an image before, and that he wishes to add the image in the area, the link must be inserted into the input generated in the area in question.</p>\n\n<p>I do not manage to display the url of the image in the  of the area</p>\n\n<p>It's on the choosePicture() function that I have to manage his entrance parameter target.</p>\n\n<p>Some images of the result which I would like to have :</p>\n\n<p>Here, it's when I drag &amp; drop the \"Image\" button in an area \n<a href=\"https://i.stack.imgur.com/AhZNZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AhZNZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here, it's when I click on \"Choose since the library\" : \n<a href=\"https://i.stack.imgur.com/Bzvhh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bzvhh.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here, after having clicked on the \"Choose\" button, the link appears in the  area.\n<a href=\"https://i.stack.imgur.com/jvBHw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jvBHw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Perl code :</p>\n\n<pre><code>sub listPictures\n{\n    my $self = shift;\n\n    my $query = $self-&gt;query;\n\n    my $session = $self-&gt;param('session');\n    my $profile = $session-&gt;param('profile');\n\n    if(checkUserId($profile-&gt;{'uid'}) ne 'SUCCESS')\n    {\n        return $self-&gt;redirect('?rm=login');\n    }\n\n    my $User = User-&gt;newFromId($profile-&gt;{'uid'});\n    if($User eq 'NOT_FOUND')\n    {\n        return $self-&gt;redirect('?rm=login');\n    }\n\n    my $tableContent = '';\n    my $pictures = $User-&gt;listPictures();\n\n    if(ref($pictures) eq 'STRING')\n    {\n        return '&lt;p&gt;Your library is empty&lt;/p&gt;';\n    }\n    $log-&gt;info($pictures);\n    foreach my $picture (@$pictures)\n    {\n        $tableContent .= '&lt;tr&gt;&lt;td&gt;&lt;label&gt;'.$picture-&gt;{'name'}.'&lt;/label&gt;&lt;/td&gt;';\n        $tableContent .= '&lt;td&gt;&lt;button data-dismiss=\"modal\" class=\"btn choiceBtn\" name=\"'.$picture-&gt;{'url'}.'\"  onclick=\\'insertPicture(\"'.$picture-&gt;{'url'}.'\")\\'&gt;Choisir&lt;/button&gt;';\n        $tableContent .= '&lt;button class=\"btn\" onclick=\"window.open(\"'.$picture-&gt;{'url'}.'\", \"_blank\", \"scrollbars=yes,status=yes\")\"&gt;Voir&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';\n    }\n\n    return $tableContent;\n}\n</code></pre>\n\n<p><code>link to check my code</code> <a href=\"https://codepen.io/anon/pen/QQBdaQ\" rel=\"nofollow noreferrer\">link</a> </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "edited": false, "score": 0, "creation_date": 1513144512, "post_id": 47766441, "comment_id": 82533858, "body": "yes, you right. because of the return carriage. thanks anyway!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1513059638, "creation_date": 1513059638, "answer_id": 47766441, "question_id": 47765629, "link": "https://stackoverflow.com/questions/47765629/perl-not-print-properly-incomplete/47766441#47766441", "title": "perl not print properly/incomplete", "body": "<p>Looks like sometimes your data ends with a carriage return character.  You can remove that with <code>$result =~ y/\\r//d;</code>.</p>\n\n<p>Or don't include it in what you match:</p>\n\n<pre><code>($result)=$check1=~ /:\\s*(.+?)\\r?$/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "edited": false, "score": 0, "creation_date": 1513144620, "post_id": 47776232, "comment_id": 82533901, "body": "i have used chopm, but still not working. but after replace with <code>$check1 =~ s&#47;\\s+\\z&#47;&#47;;</code> it is work now.  can i know what are the different between two?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "edited": false, "score": 0, "creation_date": 1513144740, "post_id": 47776232, "comment_id": 82533948, "body": "The substitution removes trailing whitespace characters."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1513092857, "creation_date": 1513092857, "answer_id": 47776232, "question_id": 47765629, "link": "https://stackoverflow.com/questions/47765629/perl-not-print-properly-incomplete/47776232#47776232", "title": "perl not print properly/incomplete", "body": "<p><code>$check1</code> contains a Carriage Return.</p>\n\n<p>If you have <code>chomp($check1);</code>, replace it with <code>$check1 =~ s/\\s+\\z//;</code>.</p>\n\n<p>If you don't have <code>chomp($check1);</code>, just add <code>$check1 =~ s/\\s+\\z//;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 1, "last_activity_date": 1513102140, "creation_date": 1513102140, "answer_id": 47778971, "question_id": 47765629, "link": "https://stackoverflow.com/questions/47765629/perl-not-print-properly-incomplete/47778971#47778971", "title": "perl not print properly/incomplete", "body": "<p>I will add my standard recommendation here:</p>\n\n<p>Whenever you are not sure why your output doesn't look like you expect, check what your data contains.</p>\n\n<pre><code>use Data::Dumper;\nlocal $Data::Dumper::Useqq = 1;\nprint Dumper $result;\n# print Dumper \\@array, \\%hash;\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">perldoc Data::Dumper</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1513102140, "creation_date": 1513054962, "last_edit_date": 1513059495, "question_id": 47765629, "link": "https://stackoverflow.com/questions/47765629/perl-not-print-properly-incomplete", "title": "perl not print properly/incomplete", "body": "<p>i tried to print something variable. but sometime it will print delay or incomplete. below is my part of my code.</p>\n\n<pre><code>my $ltc1v = $data-&gt;{PartNumber}-&gt;{rev} . \"\\n\";\nchomp $ltc1v;\n\n($result)=$check1=~ /:\\s*(.+)$/; \n\nprint \"{{ $result }}\\n\";\nprint \"{{ $ltc1v }}\\n\";\n\nif ($result eq $ltc1v ) \n{}\n</code></pre>\n\n<p>sometime result show good and able to match if condition.</p>\n\n<pre><code>{{ 0x000b }}\n{{ 0x000b }}\n</code></pre>\n\n<p>but sometime it will show as below and not able to match if condition.</p>\n\n<pre><code> }}0x000b\n{{ 0x000b }}\n</code></pre>\n\n<p>FYI, i used below command to auto flushing as well</p>\n\n<pre><code>$| = 1;\n</code></pre>\n"}, {"tags": ["perl", "encoding", "utf-8", "cp1252"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1513055060, "post_id": 47765612, "comment_id": 82492493, "body": "If you have at least a few bytes in the range 0x80-0xFF, they would quickly produce invalid UTF-8 if they are in CP1252. See the proposed duplicate for how to detect that."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1513058850, "post_id": 47765612, "comment_id": 82493679, "body": "I have filenames that people are creating from Windows or Mac, which means it is either <code>cp1252</code> or <code>utf8</code> and I need a way to automatically determine which it is."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1513059070, "post_id": 47765612, "comment_id": 82493763, "body": "Let me put it this way: UTF-8 is <i>extremely</i> picky about what constititutes a valid sequence. Every random string is valid cp1252 but very few random strings are valid UTF-8. Of course, if the file name doesn&#39;t contain any characters in the range 0x80-0xFF, it is valid UTF-8 <i>and</i> CP1252, and semantically identical in both scenarios."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1513101420, "post_id": 47765612, "comment_id": 82518637, "body": "Of course, the real way is to have the person giving it to you not leave out that essential information."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513107521, "post_id": 47765612, "comment_id": 82521771, "body": "I don&#39;t see that this is really a duplicate (of what was marked); while that is a useful page it&#39;s just one way to go at this. I&#39;ve added a link from ikegami&#39;s answer. Finding more would be helpful."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1513188750, "post_id": 47765612, "comment_id": 82560384, "body": "There are three to five possible results for this analysis (depending if you consider Windows-1252 to have 256 codepoints or fewer (248, 251)): valid and the same text in both; valid in both but different text; valid in UTF-8 but not in Windows-1252; valid in Windows-1252 but not in UTF-8; invalid in both. [That&#39;s the general idea for any two candidate encodings; perhaps valid in UTF-8 but not in Windows-1252 isn&#39;t actually possible.] And, then, after considering validity, you can get into likelihood (informed guessing), if you know something about the text expected."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1513057555, "last_edit_date": 1513057555, "creation_date": 1513056205, "answer_id": 47765817, "question_id": 47765612, "link": "https://stackoverflow.com/questions/47765612/how-to-determine-whether-utf-8-or-cp1252-encoding/47765817#47765817", "title": "How to determine whether utf-8 or cp1252 encoding?", "body": "<p>The core <a href=\"http://perldoc.perl.org/Encode/Guess.html\" rel=\"nofollow noreferrer\">Encode::Guess</a> should be up to task for this<sup>&dagger;</sup></p>\n\n<pre><code>use Encode::Guess;\n\nmy $enc = guess_encoding($data, qw(cp1252));  # utf8 among defaults\n</code></pre>\n\n<p>and then</p>\n\n<blockquote>\n<pre><code>ref($enc) or die \"Can't guess: $enc\"; # trap error this way\n$utf8 = $enc-&gt;decode($data);\n</code></pre>\n</blockquote>\n\n<p>(from docs).</p>\n\n<p>In order to <em>not</em> also use the default \"<em>ascii, utf8 and UTF-16/32 with BOM</em>\" change that first</p>\n\n<pre><code>Encode::Guess-&gt;set_suspects(qw(utf8 cp1252));\n</code></pre>\n\n<p>and then get the encoding</p>\n\n<pre><code>my $enc = guess_encoding($data);\n</code></pre>\n\n<p>Or, copied from docs</p>\n\n<blockquote>\n<pre><code>my $decoder = Encode::Guess-&gt;guess($data);\ndie $decoder unless ref($decoder);\nmy $utf8 = $decoder-&gt;decode($data);\n</code></pre>\n</blockquote>\n\n<p>See documentation for details.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> There are plenty of differences; see comment by <a href=\"https://stackoverflow.com/users/874188/tripleee\">tripleee</a> and for example <a href=\"https://stackoverflow.com/questions/26324622/what-characters-do-not-directly-map-from-cp1252-to-utf-8\">this post</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1513092272, "last_edit_date": 1513092272, "creation_date": 1513091778, "answer_id": 47775907, "question_id": 47765612, "link": "https://stackoverflow.com/questions/47765612/how-to-determine-whether-utf-8-or-cp1252-encoding/47775907#47775907", "title": "How to determine whether utf-8 or cp1252 encoding?", "body": "<pre><code>my $could_be_utf8 = utf8::decode( my $tmp = $string );\n\nmy $could_be_cp1252 = $string !~ /[\\x81\\x8D\\x8F\\x90\\x9D]/;\n</code></pre>\n\n<p>If you need to handle a string that contains a mix of both, see <a href=\"https://stackoverflow.com/q/28681864/589924\">Fixing a file consisting of both UTF-8 and Windows-1252</a>.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1541, "favorite_count": 0, "closed_date": 1513095322, "answer_count": 2, "score": 1, "last_activity_date": 1513100013, "creation_date": 1513054840, "last_edit_date": 1513093299, "question_id": 47765612, "link": "https://stackoverflow.com/questions/47765612/how-to-determine-whether-utf-8-or-cp1252-encoding", "closed_reason": "Duplicate", "title": "How to determine whether utf-8 or cp1252 encoding?", "body": "<p>Is there way in perl to determine which of <code>utf-8</code> or <code>cp1252</code> the encoding of a string is?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1513071125, "post_id": 47763613, "comment_id": 82499504, "body": "This code needs rewriting I think. Can you clarify which of the coordinates from your example need to have the distance computed? I can&#39;t figure out how you&#39;re using a 3-coordinate example, and then only trying to use two of them in the sqrt."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1513048091, "post_id": 47763690, "comment_id": 82490850, "body": "&quot;<i>You cant modify a variable within an if statement like that</i>&quot; -- well, you can assign inside <code>if</code>, even declare, <code>if ((my $v = func(...)) != $num) { .. $v .. }</code>, where parens around assignment are necessary.  But you are right that OP seems to need <code>==</code>, not <code>=</code>."}], "tags": [], "owner": {"reputation": 318, "user_id": 2519491, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd168e3abd991d6c6d83109997eef665?s=128&d=identicon&r=PG", "display_name": "hahahakebab", "link": "https://stackoverflow.com/users/2519491/hahahakebab"}, "is_accepted": false, "score": -1, "last_activity_date": 1513039220, "creation_date": 1513039220, "answer_id": 47763690, "question_id": 47763613, "link": "https://stackoverflow.com/questions/47763613/if-statement-in-a-foreach/47763690#47763690", "title": "if statement in a foreach", "body": "<p>You cant modify a variable within an if statement like that.\nI think you might want to be doing a comparison check.</p>\n\n<pre><code>if ( $residue == substr($record3, 17, 3) &amp;&amp; $chainid == substr($record3, 21, 1) &amp;&amp; $resseq == substr($record3, 22, 4) ) \n</code></pre>\n\n<p>This however brings forth another error with $distance\nTo access a a variable in a array you should use $array[$num]</p>\n\n<pre><code>my $distance = sqrt[($arrayx[1]-$arrayx[0])^2 + ($arrayy[1]-$arrayy[0])^2 + ($arrayz[1]-$arrayz[0])^2];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1513073014, "last_edit_date": 1513073014, "creation_date": 1513071691, "answer_id": 47769416, "question_id": 47763613, "link": "https://stackoverflow.com/questions/47763613/if-statement-in-a-foreach/47769416#47769416", "title": "if statement in a foreach", "body": "<p>Step 1 of troubleshooting perl is turn on <code>use strict;</code> and <code>use warnings;</code> as this will tell you about problems with your code.</p>\n\n<p>Your snippet of code with the <code>sqrt</code> is almost certainly a problem, because you're using the wrong sort of brackets, and have omitted a semicolon. </p>\n\n<p>However in addition:</p>\n\n<ul>\n<li>you define a sub <code>reslength</code> put most of your code in it, and then never actually call it.</li>\n<li>You use <code>=</code> in a comparison, instead of <code>==</code>. <code>=</code> is an <em>assignment</em> where <code>==</code> is a comparison. </li>\n<li><code>substr</code> matching something whitespace delimited is brittle. Try regex or <code>split</code>. </li>\n<li>you should use <code>(</code> when calling <code>sqrt</code>. </li>\n<li>You should use <code>[</code> when looking at array indicies. </li>\n<li>You are opening a file as specified on <code>$ARGV[0]</code> - you should probably consider just using <code>&lt;&gt;</code> which does the same thing (but will also do multiple files). </li>\n<li>You're reading a file into an array, and then iterating that array. Why not just iterate the file? </li>\n<li>You should use 3 argument open with lexical file handles. </li>\n</ul>\n\n<p>So as a starter for 10 - this will read your coordinates into an array. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\n#replace this bit with your 'user input' once you're done testing. \n\nmy $residue = 'PRO';\nmy $chainid = 'A';\nmy $resseq = '715'; \n\nmy @coords; \n\nopen ( my $input, '&lt;', $ARGV[0] ) or die $!; \nwhile ( &lt;$input&gt; ) {\n\n   next unless m/^ATOM/; \n   my @fields = split;\n   my ( $res, $chain, $seq, $x_coord, $y_coord, $z_coord ) = @fields[3..8];\n\n   next unless $residue eq $res;\n   next unless $chainid eq $chain;\n   next unless $resseq eq $seq; \n\n   #insert into array of coordinates. Could flip order, and \n   push ( @{$coords[0]}, $x_coord );\n   push ( @{$coords[1]}, $y_coord );\n   push ( @{$coords[2]}, $z_coord );\n\n}\nclose ( $input );\n\n#print for debugging - what have we read in.     \nprint Dumper \\@coords;\n\n\nmy $distance = sqrt ( ( $coords[0][1] - $coords[0][0]  ) ^ 2\n                    + ( $coords[1][1] - $coords[1][0] ) ^ 2\n                    + ( $coords[2][1] - $coords[2][0] ) ^ 2 );\n\nprint \"$residue with sequence number $resseq in $chainid has length $distance angstroms.\\n\"\n</code></pre>\n\n<p>Problem with this, that it ignores your third row entirely. But your code seems to too, so I'm not really sure what you wanted to do with that. </p>\n\n<p>But this outputs:</p>\n\n<pre><code>PRO with sequence number 715 in A has length 2.44948974278318 angstroms.\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1570710106, "creation_date": 1513038526, "last_edit_date": 1570710106, "question_id": 47763613, "link": "https://stackoverflow.com/questions/47763613/if-statement-in-a-foreach", "title": "if statement in a foreach", "body": "<p>I am trying to write a sub function that allows the user to type in certain things and the function will search a file for lines that contain them. The main problem that I am having is the if statement within the foreach statement. My main goal is see if the three variables that the user typed in matches to certain columns within a file. If they do, then certain columns would be taken out to their specific variable.</p>\n\n<p>My data looks like this: </p>\n\n<pre><code>ATOM   4851  O   PRO A 715      89.164  76.083  75.292  1.00 99.41           O  \nATOM   4852  CB  PRO A 715      88.324  78.267  73.865  1.00 95.88           C  \nATOM   4853  CG  PRO A 715      88.836  78.838  72.540  1.00 95.93           C  \n</code></pre>\n\n<p>For example, if the user types in PRO A 715, then the foreach would go through all lines and the if statement would look to meet those conditions and then the coordinates would be taken out. </p>\n\n<p>x coordinates: 89.164, 88.324, 88.836</p>\n\n<p>y coordinates: 76.083, 78.267, 78.838</p>\n\n<p>z coordinates: 75.292, 73.865, 72.540</p>\n\n<p>My error that I get for this is:</p>\n\n<pre><code>Can't modify logical and (&amp;&amp;) in scalar assignment at ./pdbtool.pl line 75, near \") ) \"\n</code></pre>\n\n<p>My program is:</p>\n\n<pre><code>open (FILE, $ARGV[0])\n    or die \"Could not open file\\n\";\n\nmy @newlines;\nwhile ( my $line = &lt;FILE&gt; ) {\n    if ($line =~ m/^ATOM.*/) {\n    push @newlines, $line;\n    }\n}\n\nsub reslength {\n#User will type in the information\nprint \"Type Residue Name:\\n\";\nmy $residue = &lt;STDIN&gt;;\nchomp($residue);\nprint \"Type Chain ID:\\n\";\nmy $chainid = &lt;STDIN&gt;;\nchomp ($chainid);\nprint \"Type Residue Sequence Number\\n\";\nmy $resseq = &lt;STDIN&gt;;\nchomp ($resseq);\n\n#The function will go through each line and match the info along with pushing it to a new vairable\nmy @arrayx;\nmy @arrayy;\nmy @arrayz;\n\n    foreach my $record3(@newlines) {\n      if ( $residue = substr($record3, 17, 3) &amp;&amp; $chainid = substr($record3, 21, 1) &amp;&amp; $resseq = substr($record3, 22, 4) ) {\n            @arrayx = substr($record3, 30, 8);\n            @arrayy = substr($record3, 38, 8);\n            @arrayz = substr($record3, 46, 8);\n            }\n    }\n#Now I will find the distance between these x,y,z coordinates\nmy $distance = sqrt[(@arrayx(1)-@arrayx(0))^2 + (@arrayy(1)-@arrayy(0))^2 + (@arrayz(1)-@arrayz(0))^2)]\nprint \"$resname with sequence number $resseq in $chainid has length $distance angstroms.\\n\"\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["multithreading", "perl"], "answers": [{"comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 2, "creation_date": 1513024710, "post_id": 47761000, "comment_id": 82483275, "body": "Well, until the process exits. But yes."}, {"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1513025880, "post_id": 47761000, "comment_id": 82483893, "body": "threads-&gt;list(threads::running) was perfect for my usecase, anyway the answer is perfect, thanks a lot!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513036816, "post_id": 47761000, "comment_id": 82488185, "body": "@duskwuff: You really shouldn&#39;t overlook the use of <code>Thread</code> instead of <code>threads</code>. The module is broken while the pragma is a little less so."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513036961, "post_id": 47761000, "comment_id": 82488221, "body": "@Borodin Oh, whoa, I missed the <code>use Thread</code> line -- the code appears to only reference <code>threads</code> though\u2026"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513038206, "post_id": 47761000, "comment_id": 82488555, "body": "It does. But it&#39;s still inappropriate to use <code>Thread</code> at all when it&#39;s supposed to be a bridge module for ten-year-old code! See my (non) answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513038509, "post_id": 47761000, "comment_id": 82488635, "body": "<code>Parallel::ForkManager</code> is a great recommendation, but it uses <code>fork</code> (or emulated <code>fork</code> on non-Linux systems) and not <code>threads</code> (which are emulated everywhere!) There is no great solution for Perl 5, and it&#39;s one of the things that Perl 6 fixes extraordinarily well."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 5, "last_activity_date": 1513024564, "creation_date": 1513024564, "answer_id": 47761000, "question_id": 47760887, "link": "https://stackoverflow.com/questions/47760887/basic-perl-threading-threads-list-does-not-decrease/47761000#47761000", "title": "Basic perl threading: threads-&gt;list() does not decrease", "body": "<p>Threads work a lot like processes -- after a thread exits, it stays around in the thread list as a \"zombie\" thread until another thread (not necessarily its parent) calls <code>$thr-&gt;join</code> to collect its return value.</p>\n\n<p>You aren't calling <code>$thr-&gt;join</code> anywhere, so these threads are piling up. You can use <code>threads-&gt;list(threads::joinable)</code> to check which threads have exited and are now joinable.</p>\n\n<p>(Alternatively, consider using <code>Parallel::ForkManager</code> to manage multiple worker processes. Perl interpreter threads are messy and are best avoided.)</p>\n"}, {"comments": [{"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1513108674, "post_id": 47763235, "comment_id": 82522425, "body": "Oh, i ws not aware of this. I am bound to work with 5.8  (stupid, i know) but it already has threads."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1513035689, "last_edit_date": 1592644375, "creation_date": 1513035689, "answer_id": 47763235, "question_id": 47760887, "link": "https://stackoverflow.com/questions/47760887/basic-perl-threading-threads-list-does-not-decrease/47763235#47763235", "title": "Basic perl threading: threads-&gt;list() does not decrease", "body": "<p>You are relying on a very outdated Perl module that was introduced in 1998 and removed from core in 2007. You don't say what version of Perl you're running, but software doesn't work like automobiles where a pristine example of very old edition is laudable</p>\n<p>You need to update your installation</p>\n<p>The <a href=\"http://search.cpan.org/dist/perl-5.27.1/lib/Thread.pm#DEPRECATED\" rel=\"nofollow noreferrer\">documentation for the <code>Thread</code></a> module says this (markup original)</p>\n<blockquote>\n<p><strong>DEPRECATED</strong></p>\n<p>The <code>Thread</code> module served as the frontend to the old-style thread model, called <em>5005threads</em>, that was introduced in release 5.005. That model was deprecated, and has been removed in version 5.10.</p>\n<p>For old code and interim backwards compatibility, the Thread module has been reworked to function as a frontend for the new interpreter threads (<em>ithreads</em>) model. However, some previous functionality is not available. Further, the data sharing models between the two thread models are completely different, and anything to do with data sharing has to be thought differently. With <em>ithreads</em>, you must explicitly <code>share()</code> variables between the threads.</p>\n<p>You are strongly encouraged to migrate any existing threaded code to the new model (i.e., use the <code>threads</code> and <code>threads::shared</code> modules) as soon as possible.</p>\n</blockquote>\n"}], "owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 47761000, "answer_count": 2, "score": 1, "last_activity_date": 1513035689, "creation_date": 1513024101, "last_edit_date": 1513035156, "question_id": 47760887, "link": "https://stackoverflow.com/questions/47760887/basic-perl-threading-threads-list-does-not-decrease", "title": "Basic perl threading: threads-&gt;list() does not decrease", "body": "<p>It looks like <code>thread_sleep</code> is not ending properly.</p>\n\n<p>I could handle it using thread queues, semaphores and such but I am interested in what the problem may be here.</p>\n\n<p>This code never ends, as the <code>threads-&gt;list()</code> size never decreases.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse Thread;\n\nmy @threads;\n\nmy $count = 0;\n\nwhile ( scalar( @threads ) &lt; 10 ) {\n\n    my $thr = threads-&gt;create( 'thread_sleep' );\n    push @threads, $thr;\n    $count++;\n\n    print \"Spawned Thread nr. $count\\n\";\n\n    while ( threads-&gt;list() &gt; 4 ) {\n        print \"too many threads, sleeping a second...\\n\";\n        sleep( 1 );\n    }\n}\n\nsub thread_sleep {\n    sleep( 5 );\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1513024709, "post_id": 47760782, "comment_id": 82483272, "body": "<code>$some_data = do &quot;test.pl&quot;; #--&gt; {foo =&gt;1}</code>"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1513024876, "post_id": 47760782, "comment_id": 82483376, "body": "thanks, exactly what i was looking for"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1513028036, "post_id": 47760782, "comment_id": 82484963, "body": "Use <code>do</code> (not <code>require</code>) for <code>.pl</code> files. (<code>require</code> is for modules.) And yes, make sure to return a true value to detect problems loading."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1513029117, "post_id": 47760782, "comment_id": 82485471, "body": "@TheAschr: <i>&quot;thanks, exactly what i was looking for&quot;</i> No. It probably isn&#39;t. But without any information on the context and what <code>test.pl</code>, <code>main.pl</code> and <code>%some_data</code> might <i>really</i> be we can&#39;t help you any better. <code>do</code> is a relic from Perl 4 days and you probably want a module. But who can tell?"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513030568, "post_id": 47760782, "comment_id": 82486122, "body": "I don&#39;t want to use a module because I want only a single data structure to be in the file and I want it to have access to the calling files data. Basically main.pl takes a user submitted test.pl and operates on it."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 1, "creation_date": 1513032760, "post_id": 47760782, "comment_id": 82486882, "body": "if you are processing a user input you might want to have the user provide the input in a CSV (or JSON, XML or YAML if the data is complex), as they&#39;re a bit more universal than Perl data structures."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1513032952, "post_id": 47760782, "comment_id": 82486963, "body": "@\u0421\u0443\u0445\u043e\u043927 <code>do</code>, like <code>require</code>, searches <code>@INC</code> for the given path name.  better to qualify it (especially in preparation for newer versions of perl that exclude <code>.</code> from @INC)"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513033491, "post_id": 47760782, "comment_id": 82487187, "body": "My structure is actually to complex for those as it has perl subroutines inside of it."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513033752, "post_id": 47760782, "comment_id": 82487270, "body": "@TheAschr, like @Borodin already said, it is probably not what you want - but who can tell. Please use a data-structure file format like YAML. Besides that &#39;any&#39; code in that <code>test.pl</code> would be executed as part of the perl script ... that can really be anything!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1513036293, "post_id": 47760782, "comment_id": 82488042, "body": "@TheAschr: <i>&quot;I don&#39;t want to use a module because I want only a single data structure to be in the file and I want it to have access to the calling files data&quot;</i> Then your design is wrong. You need to define a <i>module</i> that contains a <i>subroutine</i> to which you can pass the local data. The subroutine can build and return the data structure that you require. But again, who can tell? You have given us only the very tiniest bits of information and it&#39;s really anyone&#39;s guess. Just don&#39;t use <code>do</code> or <code>require</code> unless you have an <i>extraordinary</i> reason to do so. Not understanding <code>use</code> doesn&#39;t count."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1513036515, "post_id": 47760782, "comment_id": 82488094, "body": "@vanHoesel: I&#39;m not sure that serialising the data would help, but it&#39;s hard to tell."}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513043480, "post_id": 47760782, "comment_id": 82489804, "body": "I&#39;m nervous about sharing specific code because it is a work project and I am not sure what the licensing is or even if there is any. I have a module that that takes the data object as a parameter. I just wanted a way to have a bunch of object files that can be easily readable (by other programmers) and only contain logic with no implementation. I would like to use JSON or such but the objects describe instructions rather than definitions and it seems like that would be cumbersome."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513044081, "post_id": 47760782, "comment_id": 82489938, "body": "Perhaps someone can post a simple example of this sub-providing module as an answer?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513053568, "post_id": 47760782, "comment_id": 82492138, "body": "What do you mean by &quot;<i>object files</i>&quot;?  Files that contain code (is that &quot;<i>logic</i>&quot;?) that can make its way to main? And is &quot;<i>data object</i>&quot; data to operate on in some other file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513055117, "post_id": 47760782, "comment_id": 82492510, "body": "I also don&#39;t get &quot;<i>object with no implementation</i>&quot; that would &quot;<i>describe instructions</i>&quot;.  A riddle to me :)"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513061646, "post_id": 47760782, "comment_id": 82494717, "body": "I have updated my question try to clear things up. It probably has mistakes but it illustrates what I am trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513061634, "post_id": 47765585, "comment_id": 82494712, "body": "I have updated my question try to clear things up. It probably has mistakes but it illustrates what I am trying to do."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513066898, "post_id": 47765585, "comment_id": 82497094, "body": "@TheAschr  Thank you.  I still don&#39;t see the point, in particular with the stated absence of &quot;<i>implementation</i>&quot; and which modules are supposed to provide what.  An example. In my answer, the <code>GiveCode</code>  can load yet other modules, say with &quot;stubs&quot; for functions; then <code>$rc</code> can use those stubs as it pleases. So when <code>$rc</code> is returned the <code>main</code> will acquire that functionality.  Is that along the lines of what you have in mind?"}, {"owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513068970, "post_id": 47765585, "comment_id": 82498195, "body": "From what I can tell your code more or less functions similar to mine. The main difference I can see is that your approach uses modules to export the data whereas mine just uses do. Since I&#39;m treating the object file strictly as an object that is an extension of the main program, won&#39;t it cause issues having to import it multiple times using &quot;use&quot;? Since &quot;use&quot; is interpreted at compile time won&#39;t it also lose it&#39;s template like characteristics? For example it will likely be modified during run-time. Also I may need to build multiple copies by importing it multiple times. Thanks for your help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513070608, "post_id": 47765585, "comment_id": 82499182, "body": "@TheAschr I am not sure what are concerns here.  In principle, better use modules than <code>do</code>.  Why would multiple imports be a problem? That&#39;s precisely what <code>use</code> provides (by using <code>require</code>), that it is safe to do so.  If you need to clone them, once you have a coderef (<code>$rc</code>) you can pass it and copy it all you want; it&#39;s just a scalar. Yes, <code>use</code> goes at compile time but I don&#39;t see how (and what) code is supposed to be modified at runtime. Note that <code>$rc</code> is both created and take its input at runtime. Your question should really have more specifics; it&#39;s hard to be guessing like this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513071923, "post_id": 47765585, "comment_id": 82499993, "body": "@TheAschr Added another module whose subs are passed via <code>$rc</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "edited": false, "score": 0, "creation_date": 1513661663, "post_id": 47765585, "comment_id": 82726972, "body": "@TheAschr  How did this go in the end? Should I add/clarify things ...?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1592805695, "last_edit_date": 1592805695, "creation_date": 1513054636, "answer_id": 47765585, "question_id": 47760782, "link": "https://stackoverflow.com/questions/47760782/require-anonymous-data-structure/47765585#47765585", "title": "require anonymous data structure", "body": "<p>I am not sure why it is so difficult to clarify the objective.</p>\n<p>Here is an attempt at something concrete: Return a <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">code reference</a> from a module's sub. What that code returns when run is driven by data from the caller (and other modules), to any complexity.</p>\n<p>The module <code>CodeGen.pm</code></p>\n<pre><code>package CodeGen;\n\nuse warnings;\nuse strict;\nuse Data::Dump qw(pp);\n\nuse FuncStubs qw(f_stub);\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(get_coderef);\n\nsub get_coderef {\n    my @pars = @_; \n    # Any variables declared here and used in sub \n    # will still exist in the caller (&quot;closure&quot;)\n    my $rc = sub {\n        my @rc_pars = @_; \n        my $data = pp \\@rc_pars;  # for demo\n        my $hashref = { \n            key =&gt; $data, func =&gt; \\&amp;f_stub \n        }; \n        return $hashref;\n    };  \n    return $rc;\n}\n\n1;\n</code></pre>\n<p>and utility <code>FuncStubs.pm</code> with user-supplied code</p>\n<pre><code>package FuncStubs;\n\nuse warnings;\nuse strict;\nuse Exporter qw(import);\nour @EXPORT_OK = qw(f_stub);\n\nsub f_stub { print &quot;In &quot;, __PACKAGE__, &quot;, got: @_\\n&quot; }\n\n1;\n</code></pre>\n<p>The caller, your <code>main.pl</code></p>\n<pre><code>use warnings;\nuse strict;\nuse Data::Dump qw(dd);\n\nuse CodeGen qw(get_coderef);\n    \nmy $data = { from_main =&gt; 'some_data' };\n        \nmy $rc = get_coderef($data);\n        \nmy $ret = $rc-&gt;($data);\ndd $ret;\n\n$ret-&gt;{func}-&gt;(&quot;From_&quot; . __PACKAGE__) ;\n</code></pre>\n<p>This prints</p>\n<pre>\n{ func => sub { ... }, key => \"[{ from_main => \\\"some_data\\\" }]\" }\nIn FuncStubs, got: From_main\n</pre>\n<p>The <code>get_coderef</code> uses <code>$data</code> to build the code reference, which it returns. That <code>$rc</code> can then be run at will, with its own arguments. As needs of the code change you can run <code>get_coderef</code> again, with new data, and thus build a new <code>$rc</code>, etc.</p>\n<p>The <code>FuncStubs</code> is also used to build <code>$rc</code>, as my guess for your need for user-supplied code.</p>\n<p>I would think that you can use this to build a system that functions like what you're describing (but what I don't fully understand). Please clarify how it relates, or not, to what you are talking about.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1513062748, "creation_date": 1513062748, "answer_id": 47767104, "question_id": 47760782, "link": "https://stackoverflow.com/questions/47760782/require-anonymous-data-structure/47767104#47767104", "title": "require anonymous data structure", "body": "<blockquote>\n  <p>Does require implicitly return the data structure if 1 is not at the end like subs do?</p>\n</blockquote>\n\n<p>I'm not sure if this is documented, but the answer is: Sort of, but no.</p>\n\n<p>The first time you <code>require</code> a file, it will return the value of the last expression evaluated, like a subroutine (or really, like <code>do</code>). But any subsequent <code>require</code> of the same file will simply return <code>1</code>.</p>\n\n<p>This means using <code>require</code> to get a meaningful value from the file isn't a reliable method. If anyone else (e.g. a module loaded by another module loaded by you) has loaded the file first, you'll only see <code>1</code>.</p>\n"}], "owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1592805695, "creation_date": 1513023664, "last_edit_date": 1513062523, "question_id": 47760782, "link": "https://stackoverflow.com/questions/47760782/require-anonymous-data-structure", "title": "require anonymous data structure", "body": "<p>Is there someway to require an anonymous data structure in perl?</p>\n\n<pre><code>#test.pl\n(\n  \"example_data\" =&gt; 1\n)\n\n#main.pl\nrequire \"test.pl\";\n%some_data = (%some_data, $);\n</code></pre>\n\n<p>Does require implicitly return the data structure if 1 is not at the end like subs do?</p>\n\n<p>Here is a more specific example of what I am doing. Keep in mind the data objects will be much larger than the one provided.</p>\n\n<pre><code>#main.pl\nuse Schedular(\n  \\%CONFIG,\n  do \"default.pl\"\n);\n\n#spawn new process for each schedule\nSchedular::run_schedulue(\"some_schedule\"); \nSchedular::run_schedulue(\"some_other_schedule\");\n\n#Schedular.pm\n\npackage Schedular;\n\nour %schedules = undef;\nour %config = undef;\nsub import{\n   %config= shift @_;\n   %schedules = shift @_;\n}\n\nsub run_schedule{\n  #Run each event in schedule\n}\n\nsub do_something{\n   print(\"Hello World\");\n}\n\n#default.pl\n(\n  \"some_schedule\"=&gt;[\n       sub {\n            #Event\n            Schedular::do_something();\n       },\n       sub {\n           #Event 2\n       }\n   ],\n   \"some_other_schedule\"=&gt;[\n       sub {\n          #Event 3\n        },\n   ]\n)\n1;\n</code></pre>\n\n<p>The main purpose is I want to be able to generate new perl scripts easily using data objects as templates/recipes of the scripts logic and leave the implementation to the Schedular module. This also easily allow me to push new events onto a schedule and add new schedules on the fly.</p>\n"}, {"tags": ["arrays", "perl", "suppress-warnings", "is-empty"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1513020085, "post_id": 47759829, "comment_id": 82481018, "body": "Well, <i>I</i> get <code>Global symbol &quot;$interpro_line&quot; requires explicit package name (did you forget to declare &quot;my $interpro_line&quot;?) at so.pl line 6. so.pl had compilation errors.</code> What&#39;s <code>$interpro_line</code>? Once it is declared, does it contain at least 12 tab-separated values? You access <code>$interpro_vector[11]</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1513020288, "post_id": 47759829, "comment_id": 82481122, "body": "<code>$interpro_signature = $interpro_vector[11] &#47;&#47; &#39;some_default_value&#39;;</code>  The <code>&#47;&#47;</code> is &quot;defined-or&quot; operator. And please post complete code, specially if you show <code>use ...</code> -- it implies that the code should run."}, {"owner": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1513021672, "post_id": 47759829, "comment_id": 82481819, "body": "@PerlDuck the &quot;$interpro_line&quot; was declared and  it is not global. I&#39;m posting now the entire code of the subroutine."}, {"owner": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513021848, "post_id": 47759829, "comment_id": 82481918, "body": "@zdim the $interpro_vector[11] could be empty or a specific value in a tsv, from Interproscan result. <a href=\"https://github.com/ebi-pf-team/interproscan/wiki/OutputFormats\" rel=\"nofollow noreferrer\">github.com/ebi-pf-team/interproscan/wiki/OutputFormats</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513028319, "post_id": 47759829, "comment_id": 82485111, "body": "The filehandle <code>IDP_REGION_FILE</code> still seems not mentioned before writing to it?  (You say &quot;<i>entire code</i>&quot; ... is that an error there?)  Or did I miss it somewhere?"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1513021331, "post_id": 47760061, "comment_id": 82481636, "body": "At first I also stumbled across the missing <code>use warnings;</code> but then saw the <code>-w</code> in the shebang line. That&#39;s not perfect but far better than no warnings at all."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "edited": false, "score": 0, "creation_date": 1513028163, "post_id": 47760061, "comment_id": 82485028, "body": "@euduca  Updated the answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513030633, "post_id": 47760061, "comment_id": 82486138, "body": "@ikegami Thank you for the fix.  I should lose that bad &quot;defined&quot; habit"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1513030698, "post_id": 47760061, "comment_id": 82486163, "body": "@PerlDuck  Thank you for that link; updated text with it (to how I like to do it)"}, {"owner": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1513168912, "post_id": 47760061, "comment_id": 82547413, "body": "Hi @PerlDuck, I used the <b>defined-or</b> operator. The warning disappeared. And I understood about the empty value when I used the split function.  Thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "edited": false, "score": 0, "creation_date": 1513187226, "post_id": 47760061, "comment_id": 82559606, "body": "@euduca  Welcome.  I added a syntax explanation at the end; let me know if yet else needs explaining."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1579154638, "last_edit_date": 1579154638, "creation_date": 1513020739, "answer_id": 47760061, "question_id": 47759829, "link": "https://stackoverflow.com/questions/47759829/perl-how-to-replace-an-empty-value-in-an-array-without-using-a-variable-for-co/47760061#47760061", "title": "perl - How to replace an empty value in an array without using a variable for comparison?", "body": "<p>Your array may not have 12 elements (or the 12-th element may be <code>undef</code>)</p>\n\n<pre><code>my $interpro_signature = $interpro_vector[11] // 'some_default_value'; \n</code></pre>\n\n<p>The <code>//</code> is the <a href=\"https://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or operator</a>.  </p>\n\n<p>The error <code>Use of uninitialized value</code> means that the variable hasn't been initialized, or it's been set to <code>undef</code>.  </p>\n\n<p>See <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a> and use it regularly. Run code with <code>perl -Mdiagnostics ...</code> on errors, regularly.</p>\n\n<p>The <code>use warnings;</code> is actually better than <code>-w</code>.</p>\n\n<hr>\n\n<p><em>Update to a substantial edit of the question</em></p>\n\n<ul>\n<li><p>From shown data it appears that yet other fields may not be given in the file; so proof all variables with defaults, much like for the array element at index <code>11</code> above.  This is what you want to do in general anyway. For example, <em>if there are all fields in the file</em> but some may be empty (two tabs with nothing in between)</p>\n\n<pre><code>my @interpro_defaults = ('id_default', 'db_default', ...);\n\nmy ($interpro_id, $interpro_db, ...) = \n    map { \n        $interpro_vector[$_] // $interpro_defaults[$_] \n    } 0 .. $#interpro_defaults;\n</code></pre>\n\n<p><em>This relies on order (of variables) in the list</em>, what can be error prone with variables; see below.\nIf some fields are simply not there there may be (far) more work to do.</p></li>\n<li><p>There are too many separate variables, all related and named as <code>$interpro_X</code> (and then there are <code>$idr_Y</code> and <code>$entry_Z</code>, but fewer and perhaps manageable).</p></li>\n</ul>\n\n<p>Can you not bundle them in a container-type variable or a data structure?  </p>\n\n<p>A hash <code>%interpro</code> seems suitable, with keys <code>X</code> (so, <code>$interpro{id}</code> etc).  Then you can use them more easily and can perform some actions on the whole lot.  You still have to watch for order when initializing since they are read sequentially, but it should be clearer this way.  For example</p>\n\n<pre><code>my @interpro_vars   = qw(id db db_accesssion ...);\nmy @interpro_vector = qw(id_default db_default ...);\nmy %interpro;\n@interpro{@interpro_vars} = @interpro_vector;\n# or simply\n@interpro{qw(id db ...)} = qw(id_default db_default ...);\n</code></pre>\n\n<p>I've defined arrays with keys and values first and then used them, in case that you may want to later have those lists in arrays.  If that's not the case you can initialize the hash with lists (the last line).</p>\n\n<p>Here</p>\n\n<pre><code>my %h; \n@h{LIST-keys} = LIST-values;\n</code></pre>\n\n<p>is a way to assign the list of <code>LIST-values</code> to the set of keys of the hash <code>%h</code> given in <code>LIST-keys</code>. They are assigned one for one, in the given order of both lists (which had better match in size).  There is the <code>@</code> sigil in front of hash's keys since we <em>are</em> having a list (of keys) there, not a hash. Note that the hash must have been declared somewhere. See <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slices in perldata</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1513024023, "creation_date": 1513024023, "answer_id": 47760875, "question_id": 47759829, "link": "https://stackoverflow.com/questions/47759829/perl-how-to-replace-an-empty-value-in-an-array-without-using-a-variable-for-co/47760875#47760875", "title": "perl - How to replace an empty value in an array without using a variable for comparison?", "body": "<p>The problem is that your 3rd line contains only 9 elements. So</p>\n\n<pre><code>@interpro_vector = split('\\t',$interpro_line);\n</code></pre>\n\n<p>for that line assigns only 9 elements to <code>@interpro_vector</code> but you then access <code>$interpro_vector[11]</code> (i.e. the 12th element) and that doesn't exist. You can now either check that <code>@interpro_vector</code> contains (at least) 12 elements:</p>\n\n<pre><code>if (@interpro_vector &gt;= 12) {\n    ...\n}\n</code></pre>\n\n<p>Or you can use the <a href=\"https://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or operator</a> as <a href=\"https://stackoverflow.com/a/47760061/5830574\">@zdim suggested</a> to use a default value in case <code>$interpro_vector[11]</code> isn't defined:</p>\n\n<pre><code>$interpro_signature = $interpro_vector[11] // '';\n</code></pre>\n\n<p>The above line is equivalent to</p>\n\n<pre><code>if (defined $interpro_vector[11]) {\n    $interpro_signature = $interpro_vector[11];\n} else {\n    $interpro_signature = '';\n}\n</code></pre>\n\n<p>Now</p>\n\n<pre><code>if ($interpro_signature eq \"\") {\n    ...\n}\n</code></pre>\n\n<p>will work.</p>\n"}], "owner": {"reputation": 13, "user_id": 8816400, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x4Iz_Vx3GX4/AAAAAAAAAAI/AAAAAAAAAHk/M-yBGO5JurU/photo.jpg?sz=128", "display_name": "euduca", "link": "https://stackoverflow.com/users/8816400/euduca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 47760061, "answer_count": 2, "score": 1, "last_activity_date": 1579154638, "creation_date": 1513019790, "last_edit_date": 1513022470, "question_id": 47759829, "link": "https://stackoverflow.com/questions/47759829/perl-how-to-replace-an-empty-value-in-an-array-without-using-a-variable-for-co", "title": "perl - How to replace an empty value in an array without using a variable for comparison?", "body": "<p>I have an array where each element comes from a line delimited by tab.</p>\n\n<p>Initial code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n</code></pre>\n\n<p>The code below is a piece of the code.</p>\n\n<pre><code>sub parser_domains {\n\nmy @params = @_;\n\nmy $interpro_line = \"\";\nmy @interpro_vector = ( );\nmy $idr_sub_id = $params[0];\nmy $idr_sub_start = $params[1]+1;\nmy $idr_sub_end = $params[2]+1;\nmy $interpro_id = \"\";\nmy $interpro_start_location = 0;\nmy $interpro_end_location = 0;\nmy $interpro_db = \"\";\nmy $interpro_length = 0;\nmy $interpro_db_accession = \"\";\nmy $interpro_signature = \"\";\nmy $interpro_evalue = \"\";\nmy $interpro_vector_size = 0;\nmy $interpro_sub_file= \"\";\nmy $idr_sub_lenght = ($idr_sub_end-$idr_sub_start)+1;\n\n$interpro_sub_file = \"$result_directory_predictor/\".\"$idr_sub_id/\".\"$idr_sub_id\".\".fsa.tsv\";\n\n#open file; if it fails, print a error and exits.\nunless( open(TSV_FILE_DATA, $interpro_sub_file) ) {\n        print \"Cannot open file \\\"$interpro_sub_file\\\"\\n\\n\";\n        return;\n}\nmy @interpro_file_line = &lt;TSV_FILE_DATA&gt;;\nclose TSV_FILE_DATA;\n\nforeach $interpro_line (@interpro_file_line) {\n    @interpro_vector = split('\\t',$interpro_line);\n    $interpro_id = $interpro_vector[0];\n    $interpro_db = $interpro_vector[3];\n    $interpro_db_accession = $interpro_vector[4];\n    $interpro_start_location = $interpro_vector[6];\n    $interpro_end_location = $interpro_vector[7];\n    $interpro_signature = $interpro_vector[11];\n    $interpro_length = ($interpro_end_location-$interpro_start_location) + 1;\n\n    if ($interpro_signature eq \"\"){\n\n            $interpro_signature = \"NOPIR\";\n            printf IDP_REGION_FILE \"\\nFound a $interpro_db domain with no IPR: starts at $interpro_start_location and ends at $interpro_end_location\\n\";\n            printf IDP_REGION_FILE \"The size of $interpro_db domain in the sequence is $interpro_length\\n\";\n            printf IDP_REGION_FILE \"The IDR starts at $idr_sub_start and and ends at $idr_sub_end\\n\";\n            printf IDP_REGION_FILE \"The size of IDR is $idr_sub_lenght\\n\";\n            domains_regions($idr_sub_start,$idr_sub_end,$interpro_start_location,$interpro_end_location,$interpro_signature,$interpro_length,$interpro_db,$idr_sub_id,$interpro_db_accession,$idr_sub_lenght);\n    }\n    else{\n        for $entry_line (@entry_file_line) {\n            @entry_vector =  split('\\t',$entry_line);\n            $entry_ac = $entry_vector[0];\n            $entry_type = $entry_vector[1];\n            $entry_name = $entry_vector[2];\n            chomp($entry_name);\n\n            if ($interpro_signature eq $entry_ac) {\n                printf IDP_REGION_FILE \"\\nFound a $interpro_db domain with Interpro Signature $entry_ac: starts at $interpro_start_location and ends at $interpro_end_location\\n\";\n                printf IDP_REGION_FILE \"The size of $interpro_db domain in the sequence is $interpro_length\\n\";\n                printf IDP_REGION_FILE \"The Interpro Signature $entry_ac belongs to type $entry_type\\n\";\n                printf IDP_REGION_FILE \"The name of $entry_ac is $entry_name\\n\";\n                printf IDP_REGION_FILE \"The IDR starts at $idr_sub_start and ends at $idr_sub_end\\n\";\n                printf IDP_REGION_FILE \"The size of IDR is $idr_sub_lenght\\n\";  \n\n                domains_regions($idr_sub_start,$idr_sub_end,$interpro_start_location,$interpro_end_location,$interpro_signature,$interpro_length,$interpro_db,$idr_sub_id,$interpro_db_accession,$idr_sub_lenght);\n            }\n        }\n    }\n}\n}\n</code></pre>\n\n<p>A example of tsv file (interproscan):</p>\n\n<pre><code>P51587  14086411a2cdf1c4cba63020e1622579    3418    Pfam    PF09103 BRCA2, oligonucleotide/oligosaccharide-binding, domain 1    2670    2799    7.9E-43 T   15-03-2013\nP51587  14086411a2cdf1c4cba63020e1622579    3418    ProSiteProfiles PS50138 BRCA2 repeat profile.   1002    1036    0.0 T   18-03-2013  IPR002093   BRCA2 repeat    GO:0005515|GO:0006302\nP51587  14086411a2cdf1c4cba63020e1622579    3418    Gene3D  G3DSA:2.40.50.140       2966    3051    3.1E-52 T   15-03-2013\n...\n</code></pre>\n\n<p>The scripts works perfectly, but the comparison <code>$interpro_signature eq \"\"</code>  provides a warning.</p>\n\n<pre><code>Use of uninitialized value $interpro_signature in string eq at /home/duca/eclipse-workspace/idps/idp_parser_interpro.pl line 666.\n</code></pre>\n\n<p>So, I searched and tried manners to replace the empty value into the array before the comparison. I would like the empty value by \"NOIPR\".\nI'm working with 9 completed genomes, and I have more than 324000 proteins to parse.</p>\n\n<p>How can I replace the empty values in my array?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "csv", "cgi"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1513008274, "post_id": 47756626, "comment_id": 82474598, "body": "<i>&quot;i need this inside a perl cgi &quot;</i> -- Sorry that is not the way this site works. StackOverflow is not a &quot;write the code for me&quot; site.  YOU are expected to make the effort and we will help when you encounter a problem.  But we won&#39;t do the work for you. Please visit the <a href=\"https://stackoverflow.com/help\">help center</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1513008300, "post_id": 47756626, "comment_id": 82474621, "body": "please show us what you tried, the error you get, where exactly you are stuck, but don&#39;t ask us to write your code ;)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513010529, "post_id": 47756626, "comment_id": 82475997, "body": "When you say &quot;I need this inside a perl CGI&quot;, do you actually mean that you need this to work as a web app? Because there are far better ways to write a web app in Perl than using CGI."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513010697, "post_id": 47756626, "comment_id": 82476082, "body": "And even it you need this as a web application, the best way to write it is to a) write it as a command line program, and b) put a web front-end on your command line processing."}, {"owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 0, "creation_date": 1513011069, "post_id": 47756626, "comment_id": 82476322, "body": "There are probably better way but this is going to integrate into something else which is already in CGI so not a choice of technology to use here"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1513017755, "post_id": 47756626, "comment_id": 82479872, "body": "@toolic: All of the fields must be split in order to aggregate the latest non-blank value for each of them."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1513017940, "post_id": 47756626, "comment_id": 82479947, "body": "@Cris: <i>&quot;not a choice of technology to use here&quot;</i> Read again what <a href=\"https://stackoverflow.com/questions/47756626/how-to-merge-lines-into-a-csv-file#comment82476082_47756626\"><b>Dave Cross</b> had to say</a>. Get your code working as a command-line program and then integrate it into your CGI code. There is very little boilerplate or waste when writing Perl command-line code (it&#39;s not like Java or C++) and you will mostly be adding to it to get it working within CGI."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1513012588, "last_edit_date": 1513012588, "creation_date": 1513011808, "answer_id": 47757800, "question_id": 47756626, "link": "https://stackoverflow.com/questions/47756626/how-to-merge-lines-into-a-csv-file/47757800#47757800", "title": "How to merge lines into a csv file", "body": "<p>The bit about merging the values from different lines interested me enough to have a go at it. Here's what I've done. Others may well be able to improve my solution.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy %data;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my ($key, @values) = split /,/;\n\n  if ($data{$key}) {\n    # It seems we can be sure that the new value\n    # we're adding will be the last element on the line.\n    $data{$key}[$#values] = $values[$#values];\n  } else {\n    $data{$key} = \\@values;\n  }\n}\n\nfor my $k (sort keys %data) {\n  say join ',', $k, map { $_ // '' } @{$data{$k}};\n}\n\n__DATA__\naaaa,3\naaaa,,5\naaaa,,,1\naaaa,,,,3\nbb,2\nbb,,4\nbb,,,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n\n<p>The output I get is:</p>\n\n<pre><code>aaaa,3,5,1,3\nbb,2,4,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n\n<p>Converting this to use CGI for input and output is left as an exercise for the reader :-)</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513056338, "post_id": 47758893, "comment_id": 82492861, "body": "&quot;The answer from Dave Cross is excellent, but it relies on each line of data being longer than all preceding ones for the same key&quot; - I don&#39;t think that&#39;s true. It just relies on each new piece of data being in a position that isn&#39;t previously occupied. I just tried mixing up the order of the input records and it still worked fine."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1513016388, "last_edit_date": 1513016388, "creation_date": 1513016061, "answer_id": 47758893, "question_id": 47756626, "link": "https://stackoverflow.com/questions/47756626/how-to-merge-lines-into-a-csv-file/47758893#47758893", "title": "How to merge lines into a csv file", "body": "<p>The <a href=\"https://stackoverflow.com/a/47757800/622310\">answer from <strong>Dave Cross</strong></a>\nis excellent, but it relies on each line of data being longer than all preceding ones for the same key, which isn't assured by your question</p>\n\n<p>Here's a very similar program that fixes that, and also keeps track of the order that the keys appear in the source data so that it can be reproduced on output</p>\n\n<p>This program expects the path to the input CSV file as a parameter on the command line and prints the output to STDOUT. You can redirect the output on the command line</p>\n\n<p>Writing this as a CGI application is far too broad a question. You need to do what you can and ask <em>specific</em> questions here if you get stuck</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ( @keys, %data );\n\nwhile ( &lt;&gt; ) {\n    next unless /\\S/;\n    chomp;\n    my @newline = split /,/;\n    my $key = $newline[0];\n\n    if ( my $line = $data{ $key } ) { # Update any previously-blank fields\n\n        for my $i ( 0 .. $#newline ) {\n\n            $line-&gt;[$i] = $newline[$i] unless length $line-&gt;[$i] // '';\n        }\n    }\n    else { # Build the first instance of this key\n\n        $data{ $key } = \\@newline;\n        push @keys, $key;\n    }\n}\n\nprint join( ',', @{ $data{$_} } ), \"\\n\" for @keys;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>aaaa,3,5,1,3\nbb,2,4,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1513068296, "post_id": 47762237, "comment_id": 82497821, "body": "<code>${$hash{$key}}[$i]</code> is more commonly written <code>$hash{$key}-&gt;[$i]</code> or <code>$hash{$key}[$i]</code>."}, {"owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 0, "creation_date": 1513075740, "post_id": 47762237, "comment_id": 82502343, "body": "This is definitely what i was looking for, indeed tried the script stand alone and it work perfectly, I included the code inside the CGI part and the join return a blank value and can&#39;t get why, the hash array is populated correctly but it just return just the new line char, I tried modify the foreach to print   like this        \t\t\t<code>foreach (sort keys %hash) { \t\t\t\t#print &quot;Value is&quot;.@hash($key).&quot;&lt;br&gt;&quot;; \t\t\t\tprint &quot;My hash @{$hash{$key}}&lt;br&gt;&quot;; \t\t\t\tprint $ofh join(&#39;,&#39;,@{$hash{$key}}).&quot;\\n&quot;; \t\t\t} </code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "edited": false, "score": 0, "creation_date": 1513076185, "post_id": 47762237, "comment_id": 82502631, "body": "@Cris: Comments on Stack Overflow are deliberately unformatted to discourage people from using them to share anything but the smallest of code snippets. It sounds like you have a solution to the question you originally asked. If you now need help integrating that into a CGI program, then it probably makes sense to ask that as a separate question."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513184588, "post_id": 47762237, "comment_id": 82558014, "body": "@DaveCross thanks and good point on the arrarref, I changed it."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1513184518, "last_edit_date": 1513184518, "creation_date": 1513029959, "answer_id": 47762237, "question_id": 47756626, "link": "https://stackoverflow.com/questions/47756626/how-to-merge-lines-into-a-csv-file/47762237#47762237", "title": "How to merge lines into a csv file", "body": "<p>I would modify your code like so:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hash;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my @F = split ',';\n    my $key = $F[0];       \n    for my $i (0..$#F) {\n        $hash{$key}-&gt;[$i] //= $F[$i];   \n    }\n}\n\nfor my $key (sort keys %hash) {\n    print join(',',@{$hash{$key}}).\"\\n\";\n}\n\n__DATA__\naaaa,3\naaaa,,5\naaaa,,,1\naaaa,,,,3\nbb,2\nbb,,4\nbb,,,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n\n<p><code>$#F</code> is the array address of the last element, so <code>(0..$#F)</code> is a range of the address in @F. this lets you assign the elements from @F into the same address of another array (in this case, <code>$hash{$key}</code> is an anonymous array, aka an arrayref, and <code>${$hash{$key}}[$i]</code> accesses the $i element of that array).</p>\n\n<p><code>$hash{$key}-&gt;[$i] //= $F[$i]</code> means only assign to the element if it's not already defined.</p>\n"}], "owner": {"reputation": 141, "user_id": 3297371, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8970d935086faf17d72e5df204e96edd?s=128&d=identicon&r=PG&f=1", "display_name": "Cris", "link": "https://stackoverflow.com/users/3297371/cris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 47758893, "answer_count": 3, "score": -3, "last_activity_date": 1513184518, "creation_date": 1513007688, "last_edit_date": 1513008581, "question_id": 47756626, "link": "https://stackoverflow.com/questions/47756626/how-to-merge-lines-into-a-csv-file", "title": "How to merge lines into a csv file", "body": "<p>I have a csv file with several lines where first field is duplicated and from other field only one is actually filled (and always different)\nI need to write a perl CGI that merge those lines into a single one\nThe csv file look like the example below</p>\n\n<pre><code>aaaa,3\naaaa,,5\naaaa,,,1\naaaa,,,,3\nbb,2\nbb,,4\nbb,,,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n\n<p>What I want in output should be something like:</p>\n\n<pre><code>aaaa,3,5,1,3\nbb,2,4,,,,,,,,6\ncc,,,,,,5\ndd,5\n</code></pre>\n\n<p>I'm pretty new on perl language but from a bit of research i did I think using hash seems the way to go but I still didn't fully get how those work, and please remember i need this inside a perl cgi , so a single command line wont' help me</p>\n\n<p>So i grab this piece of code from another post <a href=\"https://stackoverflow.com/questions/19846611/how-to-merge-multiple-lines-in-a-csv-file-using-perl\">here</a></p>\n\n<pre><code>open my $ifh, '&lt;', \"input_file\" or die $!;\nopen my $ofh, '&gt;', \"output_file\" or die $!;\nwhile (&lt;$ifh&gt;) {\n    chomp;\n    my @F = split /,/;\n    my $key = shift @F;\n    push @{$hash{$key}}, @F;\n}\n\nforeach (sort keys %hash) {\n    print $ofh \"$_,\" . join (',', @{$hash{$_}}) . \"\\n\";\n}\n\nclose $ifh;\nclose $ofh;\n</code></pre>\n\n<p>but it's just adding field on the same line from the duplicate, I need to write in the actual undefined field </p>\n"}, {"tags": ["perl", "mojolicious-lite", "hypnotoad", "morbo"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513007892, "post_id": 47756361, "comment_id": 82474352, "body": "The program does exit. It&#39;s <code>morbo</code> that&#39;s still running."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1513014619, "post_id": 47756361, "comment_id": 82478264, "body": "...so you&#39;re asking how to kill the parent process."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3612017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43300da40ec902df0ca39b6025f7bed4?s=128&d=identicon&r=PG", "display_name": "horshack", "link": "https://stackoverflow.com/users/3612017/horshack"}, "is_accepted": false, "score": 1, "last_activity_date": 1570894174, "creation_date": 1570894174, "answer_id": 58355657, "question_id": 47756361, "link": "https://stackoverflow.com/questions/47756361/how-to-exit-a-program-running-under-a-morbo-or-hypnotoad-server/58355657#58355657", "title": "How to exit a program running under a Morbo or Hypnotoad server", "body": "<p>When <em>starting</em> a Mojolicious-app something bad could happen (no database-connection). I decided to change the root-URL of my app.</p>\n\n<p>In Myapp.pm:</p>\n\n<pre><code>sub startup {\n    my $app = shift;\n    $app-&gt;plugin('Config');\n    ...\n    my $r = $app-&gt;routes;\n    $r-&gt;get('/')-&gt;to('root#index')-&gt;name('root');\n\n    eval {\n        $app-&gt;check_important_things_which_can_die;\n    };\n    if ($@) {\n       $r-&gt;find('root')-&gt;remove;\n       $r-&gt;get('/')-&gt;to('Error::Root#index')-&gt;name('error_root');\n    }\n</code></pre>\n\n<p>I don't know wether this works in a running application after routing has been used.</p>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 1547214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea9bd7fcb2ba1bd6246d92369751df8f?s=128&d=identicon&r=PG", "display_name": "Elle Fie", "link": "https://stackoverflow.com/users/1547214/elle-fie"}, "is_accepted": false, "score": 0, "last_activity_date": 1571262735, "creation_date": 1571262735, "answer_id": 58422142, "question_id": 47756361, "link": "https://stackoverflow.com/questions/47756361/how-to-exit-a-program-running-under-a-morbo-or-hypnotoad-server/58422142#58422142", "title": "How to exit a program running under a Morbo or Hypnotoad server", "body": "<p>You can issue a <code>kill</code> to the <a href=\"https://perldoc.perl.org/functions/getppid.html\" rel=\"nofollow noreferrer\">parent process ID</a> from within your Handler:</p>\n\n<pre><code>system \"kill -s INT \" . getppid();\n</code></pre>\n\n<p>This will gracefully exit the server process, killing any workers that have been launched. Also works for Hypnotoad.</p>\n"}], "owner": {"reputation": 191, "user_id": 1966661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/teYFe.jpg?s=128&g=1", "display_name": "Yuriy Zhilovets", "link": "https://stackoverflow.com/users/1966661/yuriy-zhilovets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1571262735, "creation_date": 1513006849, "question_id": 47756361, "link": "https://stackoverflow.com/questions/47756361/how-to-exit-a-program-running-under-a-morbo-or-hypnotoad-server", "title": "How to exit a program running under a Morbo or Hypnotoad server", "body": "<p>In the programs running under the Morbo (and Hypnotoad) server a call of <code>exit()</code> is silently ignored and effectively works as a return from the callback. An END block fires as usually but a program itself never exits.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Modern::Perl;\nuse Mojolicious::Lite;\n\nEND {\n  say \"END block\";\n}\n\n Mojo::IOLoop-&gt;timer(5 =&gt; sub {\n  say \"Sleeping...\";\n  sleep 15;\n  say \"Before...\";\n  exit(1);\n  say \"Never seen\";\n});\n\napp-&gt;start;   \n</code></pre>\n\n<hr>\n\n<pre><code>$ morbo test.pl\nServer available at http://127.0.0.1:3000\nSleeping...\nBefore...\nEND block\n^C \n</code></pre>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1513003792, "post_id": 47755088, "comment_id": 82471591, "body": "Can&#39;t really see how we can help you with this poorly written question. No point showing us the line the error happens on without the context in which it&#39;s found. Where does <code>$gi</code> come from?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1513004070, "post_id": 47755088, "comment_id": 82471774, "body": "It&#39;s a bad idea to use a module <code>BioIO::SeqIO</code>. It is far too similar to the CPAN module <code>Bio::SeqIO</code>, and doesn&#39;t suggest anything sensible about its function."}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 1, "last_activity_date": 1513004056, "creation_date": 1513004056, "answer_id": 47755544, "question_id": 47755088, "link": "https://stackoverflow.com/questions/47755088/read-only-attributes-being-filled-without-writer-method-in-moose/47755544#47755544", "title": "Read only attributes being filled without writer method in Moose", "body": "<p>In the attribute definition, note that the <code>init_arg</code> is set to undef, i.e. deleted:</p>\n\n<pre><code>has '_gi'      =&gt; (isa      =&gt; ArrayRef,\n                   is       =&gt; 'ro',\n                   init_arg =&gt; undef,\n                   writer   =&gt; '_writer_gi');\n</code></pre>\n\n<p>The init arg is the name of the argument in the constructor call. As it is set to undef, you cannot initialize it via the constructor, but only via the writer method (here, an internal method called <code>_writer_gi</code> is created).</p>\n"}], "owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567520497, "creation_date": 1513002552, "last_edit_date": 1567520497, "question_id": 47755088, "link": "https://stackoverflow.com/questions/47755088/read-only-attributes-being-filled-without-writer-method-in-moose", "title": "Read only attributes being filled without writer method in Moose", "body": "<p>I'm using Moose to create an object oriented class in Perl.</p>\n\n<p>I have a number of attributes which I want to be read only which I've declared like this:</p>\n\n<pre><code>package BioIO::SeqIO;\nuse Moose;\nuse namespace::autoclean;\nuse MooseX::StrictConstructor;\nuse MooseX::Types::Moose qw(ArrayRef HashRef Int Str);\nuse FinalTypes::MyTypes qw(FileType);\n\nhas '_gi'      =&gt; (isa      =&gt; ArrayRef,\n                   is       =&gt; 'ro',\n                   init_arg =&gt; undef,\n                   writer   =&gt; '_writer_gi');\n</code></pre>\n\n<p>I also have a BUILDER method which looks like this:</p>\n\n<pre><code>sub BUILD {\n    # Confessing with usage string if incorrect number of arguments used.\n    @_ == 2 or confess getErrorString4WrongNumberArguments();\n    # Initializing local variable with subroutine input.\n    my ($self) = @_;\n    # Creating BioIO::SeqIO object for GenBank or FASTA file.\n    $self-&gt;fileType =~ /genbank/i ? $self-&gt;_getGenbankSeqs() : $self-&gt;_getFastaSeqs();\n}\n</code></pre>\n\n<p>My code works fine, however, I get a warning with the following test:</p>\n\n<pre><code>dies_ok {BioIO::SeqIO-&gt;new(filename =&gt; $fileNameIn, fileType =&gt; 'fasta', =&gt; _gi =&gt; [])}     '... dies when _gi sent to BioIO::SeqIO constructor';\n</code></pre>\n\n<p>Here is the warning:</p>\n\n<pre><code>Use of uninitialized value $gi in hash element at BioIO/SeqIO.pm line 256, &lt;$fh&gt; chunk 1.\n</code></pre>\n\n<p>Lastly, here is line 256 for that error:</p>\n\n<pre><code>$hashDef{$gi} = $def;\n</code></pre>\n\n<p>I think that I'm getting a warning because the program is not dying as soon as the user attempts to write to _gi, however, I don't know how to ensure this happens? </p>\n"}, {"tags": ["algorithm", "perl", "alignment", "bioinformatics"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1513003582, "post_id": 47754639, "comment_id": 82471444, "body": "Rewrite it in C? It is already written very much in the &quot;C-style of Perl&quot;, and it doesn&#39;t use any Perlish idioms that would be difficult to translate to C."}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1513003879, "post_id": 47754639, "comment_id": 82471640, "body": "Thank you for your advice but unfortunately, I am not a C programmer!"}, {"owner": {"reputation": 580, "user_id": 415384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2350087df08ded7827f447f986ed2e?s=128&d=identicon&r=PG", "display_name": "gilleain", "link": "https://stackoverflow.com/users/415384/gilleain"}, "edited": false, "score": 0, "creation_date": 1513004200, "post_id": 47754639, "comment_id": 82471854, "body": "Use an existing implementation of S-W that is written in C? Why do you have to use this specific script?"}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1513004594, "post_id": 47754639, "comment_id": 82472160, "body": "You are right, it is a good idea. In fact, I have another perl script which run this script and parse the results. But I can also call a C script! Thank you for your advice."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1513004877, "post_id": 47755203, "comment_id": 82472351, "body": "Thank you for your advice. ABout your second point, I will try to work on it. But what do you mean about precalculating <code>$j-1</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513005351, "post_id": 47755203, "comment_id": 82472672, "body": "Do <code>my $jm1 = $j - 1;</code>, then use <code>$jm1</code> instead of <code>$j - 1</code>. I think the savings here will be noise. A better idea might be to use <code>for my $i (0..length($seq2)-1)</code> instead of <code>for my $i (1..length($seq2))</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513005844, "post_id": 47755203, "comment_id": 82472992, "body": "@MrSmith42, I hope you don&#39;t mind my additions. Feel free to revert if you do."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1513006165, "post_id": 47755203, "comment_id": 82473192, "body": "Re &quot;<i>The real issue is that you have a quadratic algorithm.</i>&quot;, The algorithm is a variation of the dynamic approach of solving the Longest Common Substring problem. You can&#39;t do better than that. (That said, while it&#39;s O(N * M) processing time, it finds <i>all</i> solutions in that time, not just one.) I think its possible to reduce the <i>memory</i> used by that code, but I don&#39;t see a way of reducing the <i>processing time</i> in a significant way."}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1513065473, "post_id": 47755203, "comment_id": 82496442, "body": "Ok, thank you ikegami for your advice. I am not sure how I can reduce the time of my analysis but I will use all of your comments. Maybe I can try to work on the script which call this one to parse my file. Thank you again!"}], "tags": [], "owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "is_accepted": false, "score": 5, "last_activity_date": 1513011109, "last_edit_date": 1513011109, "creation_date": 1513002952, "answer_id": 47755203, "question_id": 47754639, "link": "https://stackoverflow.com/questions/47754639/how-can-i-modify-a-smith-and-waterman-perl-script-to-go-faster/47755203#47755203", "title": "How can I modify a Smith and Waterman perl script to go faster?", "body": "<p>You can try to avoid to do same things over and over again.  </p>\n\n<ol>\n<li><p>Instead of cutting single characters out of your sequences, you could try to split the sequence in chars once before the loops and than use the most likely faster access via index.  </p>\n\n<p>Example:</p>\n\n<pre><code>my $string = \"Hello, how are you?\";\nmy @chars = split //, $string;  # Or: unpack 'a*', $string\nprint \"Eighth char: $chars[7]\\n\";\n</code></pre></li>\n<li><p><code>my $letter2 = substr($seq2, $i-1, 1);</code> can go to the outer loop because <code>j</code> never changes in the inner loop.</p>\n\n<pre><code>for(my $i = 1; $i &lt;= length($seq2); $i++) {\n    my $letter2 = substr($seq2, $i-1, 1);\n    for(my $j = 1; $j &lt;= length($seq1); $j++) {\n</code></pre></li>\n<li><p>Avoid the slower and complex C-style loop.</p>\n\n<pre><code>for my $i (1..length($seq2)) {\n    my $letter2 = substr($seq2, $i-1, 1);\n    for my $j (1..length($seq1)) {\n</code></pre></li>\n<li><p>Instead of a string, use integers for the values of <code>pointer</code>. You can use constants to keep it readable.</p>\n\n<pre><code>use constant {\n   POINTER_NONE =&gt; 0,\n   POINTER_LEFT =&gt; 1,\n   ...\n};\n</code></pre></li>\n<li><p>Pre-calculating <code>$j-1</code> and <code>$i-1</code> may also bring a small advantage.</p></li>\n</ol>\n\n<p><strong>Be aware</strong> you should profile your code <strong>before and after</strong> each change to see if speed increases.</p>\n\n<p>All of these are minor improvements. The real issue is that you have a quadratic algorithm.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1513656541, "last_edit_date": 1513656541, "creation_date": 1513655731, "answer_id": 47879818, "question_id": 47754639, "link": "https://stackoverflow.com/questions/47754639/how-can-i-modify-a-smith-and-waterman-perl-script-to-go-faster/47879818#47879818", "title": "How can I modify a Smith and Waterman perl script to go faster?", "body": "<p>The real issue is that you have a quadratic algorithm. It's inherently going to be slow. However, the algorithm is a variation of the dynamic approach of solving the Longest Common Substring problem, and you can't do better than that.</p>\n\n<p>That said, here's an implementation that has the following features:</p>\n\n<ul>\n<li>Reduces the amount of memory from O(M*N) to O(M+N).</li>\n<li>Returns all possible solutions (at no extra cost!!!).</li>\n<li>Should be as fast as possible in Perl.</li>\n</ul>\n\n<p>&#x20;</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nsub local_alignment {\n   my ($s, $t, %scheme) = @_;\n\n   my $empty = [];\n\n   my $MATCH    = $scheme{ MATCH    } // +1;  # Must be &gt;= 1   # /\n   my $MISMATCH = $scheme{ MISMATCH } // -1;  # Must be &lt;= 0   # /\n   my $GAP      = $scheme{ GAP      } // -1;  # Must be &lt;= 0   # /\n\n   my $m = my @s = unpack('(a)*', $s);\n   my $n = my @t = unpack('(a)*', $t);\n\n   my @best_score_at_k = ( 0      ) x (1+$m+$n);\n   my @best_paths_at_k = ( $empty ) x (1+$m+$n);\n   my $offset          = 1+$m;\n\n   my $best_score = 0;\n   my @best_paths;\n\n   for my $i (0..$m-1) {\n      --$offset;\n\n      for my $j (0..$n-1) {\n         my $k = $j + $offset;\n\n         my $diag_score = $best_score_at_k[$k] + ( $s[$i] eq $t[$j] ? $MATCH : $MISMATCH );\n         my $up_score   = $best_score_at_k[$k+1] + $GAP;\n         my $left_score = $best_score_at_k[$k-1] + $GAP;\n\n         if ($diag_score &lt;= 0 &amp;&amp; $up_score &lt;= 0 &amp;&amp; $left_score &lt;= 0) {\n            $best_score_at_k[$k] = 0;\n            $best_paths_at_k[$k] = $empty;\n            next;\n         }\n\n         my $new_score = 1;\n         my @new_paths;\n         if ($diag_score &gt;= $new_score) {\n            if ($diag_score &gt; $new_score) {\n               $new_score = $diag_score;\n               @new_paths = ();\n            }\n\n            push @new_paths, map { $_ . \"\\3\" } @{ $best_paths_at_k[$k] } ? @{ $best_paths_at_k[$k] } : pack('JJ', $i, $j);\n         }\n\n         if ($up_score &gt;= $new_score) {\n            if ($up_score &gt; $new_score) {\n               $new_score = $up_score;\n               @new_paths = ();\n            }\n\n            # @{ $best_paths_at_k[$k+1] } will never be empty because a gap will never start a sequence.\n            push @new_paths, map { $_ . \"\\1\" } @{ $best_paths_at_k[$k+1] };\n         }\n\n         if ($left_score &gt;= $new_score) {\n            if ($left_score &gt; $new_score) {\n               $new_score = $left_score;\n               @new_paths = ();\n            }\n\n            # @{ $best_paths_at_k[$k+1] } will never be empty because a gap will never start a sequence.\n            push @new_paths, map { $_ . \"\\2\" } @{ $best_paths_at_k[$k-1] };\n         }\n\n         $best_score_at_k[$k] = $new_score;\n         $best_paths_at_k[$k] = \\@new_paths;\n\n         if ($new_score &gt;= $best_score) {\n            if ($new_score &gt; $best_score) {\n               $best_score = $new_score;\n               @best_paths = ();\n            }\n\n            push @best_paths, @new_paths;\n         }\n      }\n   }\n\n   return\n      map {\n         my ($I, $J, @path) = unpack 'JJC*', $_;\n\n         my ($align1, $align2);\n         my $i = $I-1;\n         my $j = $J-1;\n         for (@path) {\n            $align1 .= ( $_ &amp; 1 ) ? $s[++$i] : '-';\n            $align2 .= ( $_ &amp; 2 ) ? $t[++$j] : '-';\n         }\n\n         [ $I, $align1, $J, $align2 ]\n      }\n         @best_paths;\n}\n\n\ndie \"usage\\n\" if @ARGV != 2;\nsay sprintf '%2$s (at pos %1$s) / %4$s (at pos %3$s)', @$_ for local_alignment(@ARGV);\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ ./local_alignment COELACANTH PELICAN\nELACAN (at pos 2) / ELICAN (at pos 1)\n\n$ ./local_alignment COELACANTH PELICANPELICAN\nELACAN (at pos 2) / ELICAN (at pos 1)\nELACAN (at pos 2) / ELICAN (at pos 8)\n\n$ ./local_alignment ABCE ABCDE\nABC (at pos 0) / ABC (at pos 0)\nABC-E (at pos 0) / ABCDE (at pos 0)\n\n$ ./local_alignment ABCDE ABDCE\nAB (at pos 0) / AB (at pos 0)\nAB-C (at pos 0) / ABDC (at pos 0)\nABCD (at pos 0) / AB-D (at pos 0)\nAB-CDE (at pos 0) / ABDC-E (at pos 0)\nABCD-E (at pos 0) / AB-DCE (at pos 0)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513656541, "creation_date": 1513001038, "question_id": 47754639, "link": "https://stackoverflow.com/questions/47754639/how-can-i-modify-a-smith-and-waterman-perl-script-to-go-faster", "title": "How can I modify a Smith and Waterman perl script to go faster?", "body": "<p>I found this perl script but I have too much sequences to analyze. I want to know if it is possible to optimize it? I launched NYTProf on it and saw the parts \"calculate match score\", \"calculate gap scores\" and \"choose best score\" take lots of time. Do I have to modify the data structure? Thank you for your help.</p>\n\n<p>The perl script with the reference:</p>\n\n<pre><code>    # Smith-Waterman  Algorithm\n# from this website http://etutorials.org/Misc/blast/Part+II+Theory/Chapter+3.+Sequence+Alignment/3.2+Local+Alignment+Smith-Waterman/\n\n# Smith-Waterman  Algorithm\n\n# usage statement\ndie \"usage: $0 &lt;sequence 1&gt; &lt;sequence 2&gt;\\n\" unless @ARGV == 2;\n\n# get sequences from command line\nmy ($seq1, $seq2) = @ARGV;\n\n# scoring scheme\nmy $MATCH    =  1; # +1 for letters that match\nmy $MISMATCH = -1; # -1 for letters that mismatch\nmy $GAP      = -1; # -1 for any gap\n\n# initialization\nmy @matrix;\n$matrix[0][0]{score}   = 0;\n$matrix[0][0]{pointer} = \"none\";\nfor(my $j = 1; $j &lt;= length($seq1); $j++) {\n    $matrix[0][$j]{score}   = 0;\n    $matrix[0][$j]{pointer} = \"none\";\n}\nfor (my $i = 1; $i &lt;= length($seq2); $i++) {\n    $matrix[$i][0]{score}   = 0;\n    $matrix[$i][0]{pointer} = \"none\";\n}\n\n# fill\nmy $max_i     = 0;\nmy $max_j     = 0;\nmy $max_score = 0;\n\nfor(my $i = 1; $i &lt;= length($seq2); $i++) {\n    for(my $j = 1; $j &lt;= length($seq1); $j++) {\n        my ($diagonal_score, $left_score, $up_score);\n\n        # calculate match score\n        my $letter1 = substr($seq1, $j-1, 1);\n        my $letter2 = substr($seq2, $i-1, 1);\n        if ($letter1 eq $letter2) {\n            $diagonal_score = $matrix[$i-1][$j-1]{score} + $MATCH;\n        }\n        else {\n            $diagonal_score = $matrix[$i-1][$j-1]{score} + $MISMATCH;\n        }\n\n        # calculate gap scores\n        $up_score   = $matrix[$i-1][$j]{score} + $GAP;\n        $left_score = $matrix[$i][$j-1]{score} + $GAP;\n\n        if ($diagonal_score &lt;= 0 and $up_score &lt;= 0 and $left_score &lt;= 0) {\n            $matrix[$i][$j]{score}   = 0;\n            $matrix[$i][$j]{pointer} = \"none\";\n            next; # terminate this iteration of the loop\n        }\n\n        # choose best score\n        if ($diagonal_score &gt;= $up_score) {\n            if ($diagonal_score &gt;= $left_score) {\n                $matrix[$i][$j]{score}   = $diagonal_score;\n                $matrix[$i][$j]{pointer} = \"diagonal\";\n            }\n            else {\n                $matrix[$i][$j]{score}   = $left_score;\n                $matrix[$i][$j]{pointer} = \"left\";\n            }\n        } else {\n            if ($up_score &gt;= $left_score) {\n                $matrix[$i][$j]{score}   = $up_score;\n                $matrix[$i][$j]{pointer} = \"up\";\n            }\n            else {\n                $matrix[$i][$j]{score}   = $left_score;\n                $matrix[$i][$j]{pointer} = \"left\";\n            }\n        }\n\n        # set maximum score\n        if ($matrix[$i][$j]{score} &gt; $max_score) {\n            $max_i     = $i;\n            $max_j     = $j;\n            $max_score = $matrix[$i][$j]{score};\n        }\n    }\n}\n\n# trace-back\n\nmy $align1 = \"\";\nmy $align2 = \"\";\n\nmy $j = $max_j;\nmy $i = $max_i;\n\nwhile (1) {\n    last if $matrix[$i][$j]{pointer} eq \"none\";\n\n    if ($matrix[$i][$j]{pointer} eq \"diagonal\") {\n        $align1 .= substr($seq1, $j-1, 1);\n        $align2 .= substr($seq2, $i-1, 1);\n        $i--; $j--;\n    }\n    elsif ($matrix[$i][$j]{pointer} eq \"left\") {\n        $align1 .= substr($seq1, $j-1, 1);\n        $align2 .= \"-\";\n        $j--;\n    }\n    elsif ($matrix[$i][$j]{pointer} eq \"up\") {\n        $align1 .= \"-\";\n        $align2 .= substr($seq2, $i-1, 1);\n        $i--;\n    }\n}\n\n$align1 = reverse $align1;\n$align2 = reverse $align2;\nprint \"$align1\\n\";\nprint \"$align2\\n\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "perl-module"], "comments": [{"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1512996275, "post_id": 47753065, "comment_id": 82466837, "body": "using if condition i found the &#39;second line&#39;, then assigned to a array. finally i used push command to add a line but it was not worked"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512999277, "post_id": 47753065, "comment_id": 82468754, "body": "Could you please go through the answers which you have received since <a href=\"https://stackoverflow.com/a/47753759/4251338\">@dave cross</a> mentioned already <code>Tie::File</code> module in his answer. There is a few samples available in search engine based on the modules."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1512998362, "post_id": 47753759, "comment_id": 82468167, "body": "i dont want to change the existing line. Need to add a new line"}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1512998430, "post_id": 47753759, "comment_id": 82468213, "body": "dont want print the output in display, need to insert a line into a file"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1512998485, "post_id": 47753759, "comment_id": 82468245, "body": "@Beginner Dave showed you here to do exactly that. It seems that you need to perhaps start by <a href=\"http://perl-begin.org/\" rel=\"nofollow noreferrer\">learning some perl</a> and perhaps you would understand more what has been said here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1512998557, "post_id": 47753759, "comment_id": 82468292, "body": "And if you took the time to read my answer and the document that I linked to, then you would realise that I have explained how to do everything you ask. If you have questions about my answer, then feel free to ask them. But don&#39;t just assume I haven&#39;t answered your question."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1513085312, "post_id": 47753759, "comment_id": 82508499, "body": "@DaveCross Please check the comment from the OP in my answer"}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513089403, "post_id": 47753759, "comment_id": 82511217, "body": "we cant do without Tie::File ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513091344, "post_id": 47753759, "comment_id": 82512525, "body": "@Beginner: I never said that. And I&#39;m not sure where you got that idea from. Did you read the FAQ link I gave you?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1512999985, "last_edit_date": 1512999985, "creation_date": 1512997930, "answer_id": 47753759, "question_id": 47753065, "link": "https://stackoverflow.com/questions/47753065/insert-lines-at-specific-location-in-file-using-perl-script/47753759#47753759", "title": "Insert lines at specific location in file using perl script", "body": "<p>You haven't really shown us enough of your code for us to be very much help. But, in particular, you haven't shown any code where you write the changed data back to an output file.</p>\n\n<p>In general, tasks like this boil down to three stages:</p>\n\n<ol>\n<li>Read data from file.</li>\n<li>Update data in some way.</li>\n<li>Write changed data back to file.</li>\n</ol>\n\n<p>One common approach is to have two filehandles open - one to your input file and another to a new output file. That makes it simple to process the file a line at a time.</p>\n\n<pre><code>while (&lt;$input_fh&gt;) {\n  if (this is a line you need to change) {\n    # make changes to line (which is in $_)\n    # Perhaps print an extra line here.\n  }\n  print $output_fh $_;\n}\n</code></pre>\n\n<p>Another approach (which trades speed for ease of use) is to use the <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\">Tie::File</a> module (which is part of all Perl distributions since 5.8).</p>\n\n<p>As always, the <a href=\"https://perldoc.perl.org/perlfaq.html\" rel=\"nofollow noreferrer\">Perl FAQ</a> is a good place for more information. In this case, you probably want to look at <a href=\"https://perldoc.perl.org/perlfaq5.html\" rel=\"nofollow noreferrer\">perlfaq5</a>, which contains the question <a href=\"https://perldoc.perl.org/perlfaq5.html#How-do-I-change%2C-delete%2C-or-insert-a-line-in-a-file%2C-or-append-to-the-beginning-of-a-file%3F\" rel=\"nofollow noreferrer\">How do I change, delete, or insert a line in a file, or append to the beginning of a file?</a></p>\n\n<p><strong>Update:</strong> You already have one (slightly problematic) Tie::File-based solution. So here's mine:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Tie::File;\n\ntie my @lines, 'Tie::File', 'somefile.txt'\n  or die \"Can't tie file: $!\\n\";\n\nfor (@lines) {\n  $_ .= \"\\nTEST line\" if $_ eq 'second line';\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512999503, "post_id": 47754074, "comment_id": 82468893, "body": "1. Using <code>||</code> instead of <code>or</code> here might lead to precedence issues. 2. Using <code>join</code> and <code>split</code> seems a very strange approach. 3. You haven&#39;t added a line, you have overwritten it."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1512999749, "post_id": 47754074, "comment_id": 82469052, "body": "@DaveCross: #1 will update in answer. #2. I don&#39;t know how to change instead of <code>join&#47;split</code> using in code. #3. <i>Tie::File will replace the string in a same input file.</i> I have mentioned this."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513000139, "post_id": 47754074, "comment_id": 82469309, "body": "You could fix your solution by changing the substitution to: <code>s&#47;second line&#47;second line\\nTEST line&#47;</code>. Because currently, your answer doesn&#39;t do what @beginner asked for. I have no idea why he accepted it."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1513061068, "post_id": 47754074, "comment_id": 82494534, "body": "Update your question please <i>for my case</i>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513068068, "post_id": 47754074, "comment_id": 82497697, "body": "@ssr1012: His question already explains why your solution does work. He wants a new line inserted after the lines that match <code>&#47;second line&#47;</code>. Your code replaces the line, it doesn&#39;t add a new line. And my comment above explains how to fix that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513068094, "post_id": 47754074, "comment_id": 82497710, "body": "@Beginner: If this answer doesn&#39;t work for you, why have you accepted it?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513076388, "post_id": 47754074, "comment_id": 82502749, "body": "@Beginner: Please accept the davecross answers below."}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513084981, "post_id": 47754074, "comment_id": 82508259, "body": "suppose i want to search the &#39;second&#39; word in a file if it is not there add &#39;second line&#39; after the &#39;first line&#39;. how we can do that"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513085542, "post_id": 47754074, "comment_id": 82508660, "body": "@Beginner: If you have new requirements to add, then please don&#39;t add them as comments. It&#39;s best to raise a new question."}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513086201, "post_id": 47754074, "comment_id": 82509100, "body": "If raise some people dont like me then they are doing downvote for that"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 1, "creation_date": 1513086371, "post_id": 47754074, "comment_id": 82509210, "body": "@Beginner: People aren&#39;t downvoting your questions because they don&#39;t like you. People are downvoting your questions because your questions are vague and badly-explained. Luckily, it&#39;s pretty easy to fix that."}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "edited": false, "score": 0, "creation_date": 1513086413, "post_id": 47754074, "comment_id": 82509233, "body": "i have altered this questions. can you give some sample code of it"}, {"owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1513086740, "post_id": 47754074, "comment_id": 82509430, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/161028/discussion-between-beginner-and-dave-cross\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1513076275, "last_edit_date": 1513076275, "creation_date": 1512999001, "answer_id": 47754074, "question_id": 47753065, "link": "https://stackoverflow.com/questions/47753065/insert-lines-at-specific-location-in-file-using-perl-script/47754074#47754074", "title": "Insert lines at specific location in file using perl script", "body": "<p>You may use <code>Tie::File</code> can get the output what you have expect</p>\n\n<pre><code>use Tie::File;\n\nmy $inputFile = \"test.txt\";\n\nmy @array;\ntie @array, 'Tie::File', $inputFile or die \"Error: Couldn't tie the \\\"$inputFile\\\" file: $!\";\nmy $len = join \"\\n\", @array;\n\nif($len=~m/second line/i) {  $len=~s/second line/$&amp;\\nTEST Line/ig;  }\n\n@array = split/\\n/, $len;\nuntie @array;\n</code></pre>\n\n<p><code>Tie::File</code> will replace the string in a same input file.</p>\n"}], "owner": {"reputation": 67, "user_id": 4568077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkVCl.jpg?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4568077/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1513090967, "creation_date": 1512995594, "last_edit_date": 1513090967, "question_id": 47753065, "link": "https://stackoverflow.com/questions/47753065/insert-lines-at-specific-location-in-file-using-perl-script", "title": "Insert lines at specific location in file using perl script", "body": "<p>Want to add a new line in a file using perl script. I have tried but no luck</p>\n\n<pre><code> if($correctedContents[$i] ~= /second line/){\n @data = $correctedContents[$i]\n  push (@data, '\\n TEST Line');\n</code></pre>\n\n<p>For example: add a \"TEST Line\" into a file whenever it find 'second line' line. </p>\n\n<p>file1.txt,</p>\n\n<pre><code>first line\nsecond line\nthird line\n\nfirst line \nsecond line \nthird line\n</code></pre>\n\n<p>.....</p>\n\n<p>After added a new line \nexpected output:</p>\n\n<pre><code>first line\nsecond line\nTEST Line\nthird line\n\nfirst line \nsecond line \nTEST Line\nthird line\n</code></pre>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["perl", "package", "constants"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512993955, "post_id": 47750400, "comment_id": 82465491, "body": "<i>&quot;I avoid the hassle of exporting and importing subroutines&quot;</i> It&#39;s not so difficult, and you really should get used to doing this &quot;properly&quot;. Your <code>example.pl</code> should be a <i>module</i>: <code>Example.pm</code> in both your production and test environments with <code>package Example</code> at the top. You need to add <code>use Exporter &#39;import&#39;</code> and you must create lists of exported symbols into <code>our @EXPORT</code> (by default) and <code>our @EXPORT_OK</code> (by request). And that&#39;s all. Apart from being common practice, it also documents your module better as you can differentiate between public and private symbols easily."}, {"owner": {"reputation": 59, "user_id": 9020390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d805bcd65215d1c484570eee66359df0?s=128&d=identicon&r=PG&f=1", "display_name": "mirnis", "link": "https://stackoverflow.com/users/9020390/mirnis"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512995772, "post_id": 47750400, "comment_id": 82466554, "body": "Thank you for your comment. I do use modules extensively. I find the OP scheme convenient during development and testing, because my programs are mostly long calculations, split in small subroutines, and I want to test every little thing (especially those that will never be public). The best orthodox way I have found is by using test tags in <code>Exporter</code>, but in general this scheme seems to work well for me (and file scoping also helps protect many things.) . However, I do appreciate your comment and I especially admired how you laid out a full introduction to modules using just a few sentences."}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1512987413, "post_id": 47750568, "comment_id": 82461480, "body": "I would like to add that the <code>1;</code> in example should be placed at the end of the file"}, {"owner": {"reputation": 59, "user_id": 9020390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d805bcd65215d1c484570eee66359df0?s=128&d=identicon&r=PG&f=1", "display_name": "mirnis", "link": "https://stackoverflow.com/users/9020390/mirnis"}, "edited": false, "score": 1, "creation_date": 1512987844, "post_id": 47750568, "comment_id": 82461718, "body": "Thank you, this actually worked. Any idea why referring to WORLD as method works while as plain old constant / subroutine does not?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1512988238, "post_id": 47750568, "comment_id": 82461942, "body": "The only problem is when you use the sub as a bareword (that doesn&#39;t apply to constants only). The parser needs to know how to interpret the bareword. <code>WORLD()</code> will &quot;work&quot;, too, but it doesn&#39;t constant-fold the constant."}, {"owner": {"reputation": 59, "user_id": 9020390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d805bcd65215d1c484570eee66359df0?s=128&d=identicon&r=PG&f=1", "display_name": "mirnis", "link": "https://stackoverflow.com/users/9020390/mirnis"}, "edited": false, "score": 0, "creation_date": 1512989193, "post_id": 47750568, "comment_id": 82462510, "body": "Thank you for this final clarification, it made it all clear for me, especially when <code>print &quot;Hello, &quot;, &amp;A::World;</code> worked great."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512989847, "post_id": 47750568, "comment_id": 82462867, "body": "Using the <code>&amp;</code> also prevents constant folding, though."}, {"owner": {"reputation": 59, "user_id": 9020390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d805bcd65215d1c484570eee66359df0?s=128&d=identicon&r=PG&f=1", "display_name": "mirnis", "link": "https://stackoverflow.com/users/9020390/mirnis"}, "edited": false, "score": 1, "creation_date": 1512991164, "post_id": 47750568, "comment_id": 82463686, "body": "Yes, exactly the same way as WORLD() would, I understand that, but it helped with my understanding with why A-&gt;WORLD worked when A::WORLD did not. Your original answer had already covered 95% of my question&#39;s scope, but I appreciate your further clarifications that helped me understand even better."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1512987190, "creation_date": 1512987190, "answer_id": 47750568, "question_id": 47750400, "link": "https://stackoverflow.com/questions/47750400/using-constants-across-files-in-the-same-package/47750568#47750568", "title": "Using constants across files in the same package", "body": "<p><a href=\"http://p3rl.org/require\" rel=\"noreferrer\">require</a> happens in runtime, so the constants are not known in compile time. Wrap the require in a BEGIN block:</p>\n\n<pre><code>BEGIN { require 'example.pl' }\n</code></pre>\n\n<p><strong>BUT</strong>: you should use modules and include them with <a href=\"http://p3rl.org/use\" rel=\"noreferrer\">use</a>, not require scripts. Your usage of <code>package A</code> shows you aren't familiar with <a href=\"http://p3rl.org/perlmod\" rel=\"noreferrer\">perlmod</a> and <a href=\"http://p3rl.org/Exporter\" rel=\"noreferrer\">Exporter</a>, so read the documentation and try to understand it and apply it to your work.</p>\n"}], "owner": {"reputation": 59, "user_id": 9020390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d805bcd65215d1c484570eee66359df0?s=128&d=identicon&r=PG&f=1", "display_name": "mirnis", "link": "https://stackoverflow.com/users/9020390/mirnis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512988495, "creation_date": 1512986654, "last_edit_date": 1512988495, "question_id": 47750400, "link": "https://stackoverflow.com/questions/47750400/using-constants-across-files-in-the-same-package", "title": "Using constants across files in the same package", "body": "<p>I keep production code separate from test code in two separate files with the same <code>package</code>. This may be a bit shady, but it's been working well because I avoid the hassle of exporting and importing subroutines.</p>\n\n<p>I've hit a problem using <code>constant</code></p>\n\n<h3>example.pl</h3>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\n\npackage A;\n\n1;\n\nuse constant WORLD =&gt; \"WORLD\\n\";\n\nsub helloWorld {\n   print STDERR \"Hello, World\\n\";\n}\n\nsub helloAll {\n   print STDERR \"Hello, All\\n\";\n}\n</code></pre>\n\n<h3>test.pl</h3>\n\n<pre><code>use strict;\nuse warnings;\n\npackage A;\n\nuse lib '.';\nrequire 'example.pl';\n\nhelloWorld();\nhelloAll();\nprint \"Hello, \", A-&gt;WORLD;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>./test.pl\nHello, World\nHello, All\nHello, WORLD\n</code></pre>\n\n<p>This all looks good, but if I try to refer to the constant as <code>WORLD</code> or  <code>A::WORLD</code> instead of <code>A-&gt;WORLD</code> I get an error.</p>\n\n<blockquote>\n  <p>Bareword \"A::WORLD\" not allowed while \"strict subs\" in use at ./test.pl line 13.</p>\n</blockquote>\n\n<p>I'd like to understand why, since constants are subroutines in essence, and the rest of the subroutines work fine.</p>\n"}, {"tags": ["linux", "bash", "shell", "perl"], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 4, "creation_date": 1512992554, "post_id": 47748129, "comment_id": 82464595, "body": "<code>chomp</code> also works on lists: <code>chomp(@data);</code> will chomp all elements in <code>@data</code>."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": true, "score": 5, "last_activity_date": 1512988781, "last_edit_date": 1512988781, "creation_date": 1512976996, "answer_id": 47748129, "question_id": 47748050, "link": "https://stackoverflow.com/questions/47748050/prevent-perl-program-from-print-newline-after-writing-to-sh-terminal-using-syste/47748129#47748129", "title": "Prevent Perl program from print newline after writing to sh terminal using system", "body": "<p>With</p>\n\n<pre><code>@data = &lt;FILE&gt;;\n</code></pre>\n\n<p><code>@data</code> contains all lines from the input file. Each line ends with a LF. You need to remove it from each <code>$x</code>, using <code>chomp</code> for instance (that removes the trailing character(s) as set in <code>$/</code>)</p>\n\n<pre><code>foreach my $x ( @data ) {\n    chomp $x;\n    system \"/granite_api.pl -type update_backdoor -project tgplp -test_id $x -turninid 4206\";\n}\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code> in <code>perldoc</code></a></p>\n"}], "owner": {"reputation": 23, "user_id": 9082332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179ea4c2296fac1531738c9b963ec3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Luqman Azmer", "link": "https://stackoverflow.com/users/9082332/luqman-azmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 47748129, "answer_count": 1, "score": 2, "last_activity_date": 1512988781, "creation_date": 1512976657, "question_id": 47748050, "link": "https://stackoverflow.com/questions/47748050/prevent-perl-program-from-print-newline-after-writing-to-sh-terminal-using-syste", "title": "Prevent Perl program from print newline after writing to sh terminal using system", "body": "<p>\nI'm trying to extract data from a file to a Perl program and execute it in Linux sh terminal using \"foreach\" loop but every time Perl return value to sh terminal it will print a new line before print the next string which cause my script to fail. How do I prevent that?</p>\n\n\n\n<pre><code>open(FILE, \"input\") or die(\"Unable to open file\");\n\n# read file into an array\n@data = &lt;FILE&gt;;\n\n# close file \nclose(FILE);\n\nforeach my $x(@data) {\n    system \"/granite_api.pl -type update_backdoor -project tgplp -test_id $x -turninid 4206\";\n}\n</code></pre>\n\n<p>\nExpected output:</p>\n\n<pre><code>/granite_api.pl -type update_backdoor -project tgplp -test_id example -turninid 4206\n</code></pre>\n\n<p>\nActual output:</p>\n\n<pre><code>/granite_api.pl -type update_backdoor -project tgplp -test_id example \n -turninid 4206\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1512974456, "post_id": 47747593, "comment_id": 82455334, "body": "<code>for $i(0..$#data){ ($x1,$y1) = split(&quot; &quot; ,$data[$i]); ($x2,$y2) = split(&quot; &quot;,$data[$i+1]); }</code>"}, {"owner": {"reputation": 1, "user_id": 9082244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec5daca7ee75271f87f333970ea4a0fb?s=128&d=identicon&r=PG&f=1", "display_name": "ArraySlicer", "link": "https://stackoverflow.com/users/9082244/arrayslicer"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1512975392, "post_id": 47747593, "comment_id": 82455676, "body": "Thank you for the quick response. I keep running into these errors using this solution. It appears that all coordinates are being stored in $x1 only for some reason. Use of uninitialized value $y1 in concatenation (.) or string at ./slope.pl line 47, &lt;STDIN&gt; line 1. Use of uninitialized value $x2 in concatenation (.) or string at ./slope.pl line 47, &lt;STDIN&gt; line 1. Use of uninitialized value $y2 in concatenation (.) or string at ./slope.pl line 47, &lt;STDIN&gt; line 1."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1512976765, "post_id": 47747593, "comment_id": 82456253, "body": "Actually this is not error this is warnings, try this <code>for $i(0..$#data-1)</code>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1513019591, "post_id": 47747593, "comment_id": 82480757, "body": "You may need to run it through <code>abs()</code> if you consider <code>-7</code> more <i>&quot;slopey&quot;</i> <b>TM</b> than <code>+5</code>."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1572323997, "last_edit_date": 1572323997, "creation_date": 1512977286, "answer_id": 47748182, "question_id": 47747593, "link": "https://stackoverflow.com/questions/47747593/how-can-i-find-the-largest-slope-value-in-a-list-of-coordinates/47748182#47748182", "title": "How can I find the largest slope value in a list of coordinates?", "body": "<p>To use all pairs of points, for each point you need to loop over all others (but without duplication).</p>\n\n<p>I've split the job into building the list of all slope-points first and then finding the top one, for flexibility so that you can more easily further experiment and adjust.  See comments below.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';    \n#use Data::Dump qw(dd);\n\nuse List::Util qw(reduce);\n\nmy @data = ('6.3 -7.2', '-5.6 -2.4', '2.1 7.8', '5.2 1.4');\n\nmy $rslopes = get_slopes(\\@data);    \n#dd $rslopes;\n\nmy $top = reduce { ($a-&gt;[0] &gt; $b-&gt;[0]) ? $a : $b } @$rslopes;\n\nsay \"$top-&gt;[0]  for (@{$top-&gt;[1]}) and (@{$top-&gt;[2]})\";\n\nsub get_slopes {\n    my @data = @{$_[0]};\n    my @slopes;\n\n    while (my $line = shift @data) {\n        my ($x1, $y1) = split ' ', $line;\n        for (@data) {\n            my ($x2, $y2) = split;\n            push @slopes, [ ($y2-$y1)/($x2-$x1), [$x1, $y1], [$x2, $y2] ];  \n        }\n    }   \n    return \\@slopes;\n}\n</code></pre>\n\n<p>This prints the largest slope and its points, found using <a href=\"https://perldoc.perl.org/List/Util.html#reduce\" rel=\"nofollow noreferrer\">List::Util::reduce</a>.  Comments:</p>\n\n<ul>\n<li><p>Results are stored in an array with elements <code>[slope, [pt1], [pt2]]</code> since slopes <em>can</em> be equal within the precision so a hash <code>slope =&gt; [[pt1], [pt2]]</code> can't be used</p></li>\n<li><p>A value is <code>shift</code>ed from the array so that simply all remaining ones are then compared to it. Once the last one is removed there is an extra (unneeded) <code>split</code> and assignment</p></li>\n<li><p>Another way is with nested <code>for</code> loops, where the inner one iterates from <code>i+1</code> of the outer. Be careful with arranging the indices so it doesn't go past the post</p></li>\n<li><p>If you really only need that largest slope move the <code>reduce</code> line into the sub, rename the sub to <code>max_slope</code> (or such), and return the top slope's array <code>slope, [pt1], [pt2]</code> (or its ref). Or compare values as they are computed and you don't need <code>reduce</code> </p></li>\n</ul>\n\n<p>To see them all (sorted), instead of just finding the largest one (with <code>reduce</code>) do</p>\n\n<pre><code>my @sorted_slopes = sort { $b-&gt;[0] &lt;=&gt; $a-&gt;[0] } @$rslopes; \n\nfor (@sorted_slopes) {\n    printf \"%6.3f for (%4.1f %4.1f) and (%4.1f %4.1f)\\n\",  \n        $_-&gt;[0], @{$_-&gt;[1]}, @{$_-&gt;[2]};\n} \n</code></pre>\n\n<p>With this, the program above prints</p>\n\n<pre>\n 1.325 for (-5.6 -2.4) and ( 2.1  7.8)\n 0.352 for (-5.6 -2.4) and ( 5.2  1.4)\n-0.403 for ( 6.3 -7.2) and (-5.6 -2.4)\n-2.065 for ( 2.1  7.8) and ( 5.2  1.4)\n-3.571 for ( 6.3 -7.2) and ( 2.1  7.8)\n-7.818 for ( 6.3 -7.2) and ( 5.2  1.4)\n</pre>\n"}], "owner": {"reputation": 1, "user_id": 9082244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec5daca7ee75271f87f333970ea4a0fb?s=128&d=identicon&r=PG&f=1", "display_name": "ArraySlicer", "link": "https://stackoverflow.com/users/9082244/arrayslicer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572323997, "creation_date": 1512974075, "last_edit_date": 1512978477, "question_id": 47747593, "link": "https://stackoverflow.com/questions/47747593/how-can-i-find-the-largest-slope-value-in-a-list-of-coordinates", "title": "How can I find the largest slope value in a list of coordinates?", "body": "<p>I am trying to figure out how to determine the maximum/highest slope value when I have data in the format below. I have this data stored in an array. The first two columns are X and Y coordinates, respectively. I basically want to plug in every possible pair from this data into the slope formula and determine the highest possible value.</p>\n\n<p>Data Format:</p>\n\n<pre>\n6.3 -7.2\n-5.6 -2.4\n2.1 7.8\n5.2 1.4\n</pre>\n\n<p>So far I have:</p>\n\n<pre><code>sub maxSlope {\nmy @data; #Contains all the values\nforeach $line (@data){\n  @split_data = split(' ', $line);\n  my ($x1, $y1) = ($split_data[0], $[split_data[1]);\n  }\n\n  #$my_slope = ($y2-$y1)/($x2-$x1); \n}\n</code></pre>\n\n<p>So far I am only able to get the first pair in two variables. I am having difficulty figuring out how I can get the next pair in two variables <code>($x2, $y2)</code> and compute via the slope formula <code>(y2-y1/x2-x1)</code> for every possible pair given the data set. Any help is highly appreciated!</p>\n"}, {"tags": ["perl", "sqlite"], "comments": [{"owner": {"reputation": 15, "user_id": 9075245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce580247639558f47bae37171e3c1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Harshavardhan Reddy", "link": "https://stackoverflow.com/users/9075245/harshavardhan-reddy"}, "edited": false, "score": 0, "creation_date": 1512941967, "post_id": 47743639, "comment_id": 82447610, "body": "GOT SOLVED $count = $dbh-&gt;selectrow_array(&quot;     SELECT COUNT(*)       FROM INFORMATION &quot;); print &quot;$count \\n&quot;;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1512942669, "post_id": 47743639, "comment_id": 82447804, "body": "Using _array and populating a scalar seems confusing."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1512942745, "post_id": 47743639, "comment_id": 82447821, "body": "Please create an answer, in order to get this out of the unanswered questions list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512950660, "post_id": 47743639, "comment_id": 82449702, "body": "@choroba, <code>selectrow_array</code> in scalar context is fine when there&#39;s a single column because &quot;the driver will return the value of the first column or the last&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1512942830, "creation_date": 1512942830, "answer_id": 47743858, "question_id": 47743639, "link": "https://stackoverflow.com/questions/47743639/perl-how-to-find-total-number-of-rows-in-a-sqlite-database-without-using-maxro/47743858#47743858", "title": "Perl: How to find total number of rows in a sqlite database without using max(rowid)?", "body": "<p>Perl variables aren't part of the SQL, you get the number from the database and populate the variable in Perl:</p>\n\n<pre><code>my ($count) = $dbh-&gt;selectrow_array('SELECT COUNT(1) FROM information');\nprint \"$count\\n\";\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9075245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce580247639558f47bae37171e3c1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Harshavardhan Reddy", "link": "https://stackoverflow.com/users/9075245/harshavardhan-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "closed_date": 1512973937, "answer_count": 1, "score": -3, "last_activity_date": 1512942830, "creation_date": 1512941165, "question_id": 47743639, "link": "https://stackoverflow.com/questions/47743639/perl-how-to-find-total-number-of-rows-in-a-sqlite-database-without-using-maxro", "closed_reason": "Not suitable for this site", "title": "Perl: How to find total number of rows in a sqlite database without using max(rowid)?", "body": "<p>I wanted to find out Number of Rows in a SQLITE database Table, i know that i can query using <code>SELECT COUNT(*) FROM TABLENAME;</code>\nbut i wanted to get the count using the perl code and store it into a variable? can i use the below code </p>\n\n<pre><code>my $stmt = qq(SELECT COUNT(*) AS $NUMBEROFROWS FROM TABLENAME)\n$rv = $dbh-&gt;do($stmt);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>my $stmt = qq(SELECT COUNT(*) FROM TABLENAME\n              $NUMBEROFROWS = COUNT(*)      );\n$rv = $dbh-&gt;do($stmt);\n</code></pre>\n\n<p>Please suggest me how to count number of rows in SQLITE database table and store the value into a variable?</p>\n\n<p>TIA</p>\n"}, {"tags": ["perl", "asynchronous", "https"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1512924965, "post_id": 47741103, "comment_id": 82442390, "body": "Does the warning omit the file name and line number?"}, {"owner": {"reputation": 23, "user_id": 8868877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bf0d1522e8dad840d328bb0a34abb24?s=128&d=identicon&r=PG&f=1", "display_name": "P. Stefanov", "link": "https://stackoverflow.com/users/8868877/p-stefanov"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1512928969, "post_id": 47741103, "comment_id": 82443661, "body": "@choroba Edited. Warning is at line 974 in IO::Async::Stream"}], "answers": [{"tags": [], "owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "is_accepted": true, "score": 0, "last_activity_date": 1515347587, "creation_date": 1515347587, "answer_id": 48139963, "question_id": 47741103, "link": "https://stackoverflow.com/questions/47741103/why-am-i-getting-this-perl-netasynchttp-warning/48139963#48139963", "title": "Why am I getting this perl Net::Async::HTTP warning?", "body": "<p>It seems this warning is specific to the <code>IO::Async::Loop::EV</code> implementation. If you just</p>\n\n<pre><code>use IO::Async::Loop;\nmy $loop = IO::Async::Loop-&gt;new;\n</code></pre>\n\n<p>then it appears to work just fine. Unless you're picking that for a specific purpose it's best to avoid it and just let the <code>IO::Async::Loop-&gt;new</code> magic constructor find a good one.</p>\n\n<p>Additionally, rather than ending the script with</p>\n\n<pre><code>$loop-&gt;run\n</code></pre>\n\n<p>You could instead use</p>\n\n<pre><code>$f-&gt;get\n</code></pre>\n\n<p>so it performs a blocking wait until that <code>Future</code> is complete but then exits cleanly afterwards, so as not to have to <code>&lt;Ctrl-C&gt;</code> it to abort.</p>\n\n<hr>\n\n<p>I've raised this as a bug against IO::Async::Loop::EV at <a href=\"https://rt.cpan.org/Ticket/Display.html?id=124030\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Ticket/Display.html?id=124030</a></p>\n"}], "owner": {"reputation": 23, "user_id": 8868877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bf0d1522e8dad840d328bb0a34abb24?s=128&d=identicon&r=PG&f=1", "display_name": "P. Stefanov", "link": "https://stackoverflow.com/users/8868877/p-stefanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 48139963, "answer_count": 1, "score": 2, "last_activity_date": 1515347587, "creation_date": 1512924517, "last_edit_date": 1512929618, "question_id": 47741103, "link": "https://stackoverflow.com/questions/47741103/why-am-i-getting-this-perl-netasynchttp-warning", "title": "Why am I getting this perl Net::Async::HTTP warning?", "body": "<p>\nIn this oversimplified script I'm doing a GET request with <a href=\"https://metacpan.org/pod/Net::Async::HTTP\" rel=\"nofollow noreferrer\">Net::Async::HTTP</a> using <a href=\"https://metacpan.org/pod/IO::Async::Loop::EV\" rel=\"nofollow noreferrer\">IO::Async::Loop::EV</a>:\n</p>\n\n<pre><code>use Modern::Perl '2017';\nuse IO::Async::Loop::EV;\nuse Net::Async::HTTP;\nuse Future;\n\nmy $loop = IO::Async::Loop::EV-&gt;new;\nmy $http = Net::Async::HTTP-&gt;new(max_redirects =&gt; 0);\n$loop-&gt;add($http);\n\nmy $f = $http-&gt;GET('https://www.perl.org')\n-&gt;then(sub {\n        my $response = shift;\n        printf STDERR \"got resp code %d\\n\", $response-&gt;code;\n        return Future-&gt;done;\n    });\n$http-&gt;adopt_future($f-&gt;else_done);\n\n$loop-&gt;run;\n</code></pre>\n\n<p>\nI get this warning a couple of times:</p>\n\n<pre><code>EV: error in callback (ignoring): Can't call method \"sysread\" on an undefined value at .../IO/Async/Stream.pm line 974\n</code></pre>\n\n<p>I get this warning when using <a href=\"https://metacpan.org/pod/IO::Async::Loop::Event\" rel=\"nofollow noreferrer\">IO::Async::Loop::Event</a> too (again in <a href=\"https://metacpan.org/pod/release/PEVANS/IO-Async-0.71/lib/IO/Async/Stream.pm\" rel=\"nofollow noreferrer\">IO::Async::Stream</a>, at line 974).</p>\n\n<p>For non-secure (http) links, however, all looks good. So something's probably wrong with <a href=\"https://metacpan.org/pod/IO::Async::SSL\" rel=\"nofollow noreferrer\">IO::Async::SSL</a>. (I tried this on different machines, with different OS - still getting those warnings)\n</p>\n\n<p>Why am I getting this warning multiple times? Does it occur on your machines too?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1512845582, "post_id": 47731905, "comment_id": 82424514, "body": "Are you looking for <a href=\"https://perldoc.perl.org/functions/wantarray.html\" rel=\"nofollow noreferrer\">wantarray</a> function?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512845623, "post_id": 47731905, "comment_id": 82424523, "body": "If you want the output to reflect the contents of the parameters, then you must use the values passed instead of the hard-coded arrays <code>@array1</code> and <code>@array2</code>"}, {"owner": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512845636, "post_id": 47731905, "comment_id": 82424526, "body": "I&#39;m writing a function using hash"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1512845960, "post_id": 47731905, "comment_id": 82424629, "body": "<code>$uString</code> and <code>@uString</code> are different variables. Also, your sub doesn&#39;t read the parameters."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512846595, "post_id": 47731905, "comment_id": 82424814, "body": "The line <code>my @uString = union(\u2026)</code> imposes <i>list context</i> because <code>@uString</code> is an array!"}, {"owner": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512857385, "post_id": 47731905, "comment_id": 82427950, "body": "ingore my @uString, that&#39;s my typo"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1512866097, "post_id": 47731905, "comment_id": 82429870, "body": "@nicken: Can update your question?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512927058, "post_id": 47731905, "comment_id": 82443003, "body": "@nicken Apparently you are looking for <code>wantarray</code>. In this case you <i>must not</i> ignore <code>@uString</code> vs. <code>$uString</code> because that&#39;s exactly what triggers <code>wantarray</code>. Please <a href=\"https://stackoverflow.com/posts/47731905/edit\">edit</a> your question."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512851976, "post_id": 47732077, "comment_id": 82426447, "body": "so what if I call $uString and @uList, it will show different answer,  as I mentioned before, if I call uString it will show 1,2,3,4 if I call uList it will show 1 2 3 4, one with comma, one not"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512852457, "post_id": 47732077, "comment_id": 82426609, "body": "@nicken, I made a change to the answer that shows how you can get <code>1,2,3,4</code> when that&#39;s what you want."}, {"owner": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512853091, "post_id": 47732077, "comment_id": 82426800, "body": "@ikegami I know that way, but what if I call my $uString = union([1,2,3],[2,3,4]); then it will reaturn 1,2,3,4 ,so I think I need if else statement to chck whther it call is string or list."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512854196, "post_id": 47732077, "comment_id": 82427104, "body": "@nicken: When I do <code>$uString = union(...)</code>, I&#39;m getting the number of elements back, not <code>1,2,3,4</code>. That&#39;s what <a href=\"http://p3rl.org/keys\" rel=\"nofollow noreferrer\">keys</a> returns in scalar context."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512855854, "post_id": 47732077, "comment_id": 82427509, "body": "@choroba, The OP asking how to write <code>union</code> so its result is based on context."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "edited": false, "score": 0, "creation_date": 1512855976, "post_id": 47732077, "comment_id": 82427540, "body": "@nicken, The bit you are missing is <code>wantarray</code>, but it&#39;s a bad idea to use it here. Finding the union of sets and formatting numbers for output are two unrelated tasks. Consult the answer to see how you can get <code>1,2,3,4</code> when that&#39;s what you want.1"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1512852427, "last_edit_date": 1512852427, "creation_date": 1512846115, "answer_id": 47732077, "question_id": 47731905, "link": "https://stackoverflow.com/questions/47731905/what-should-if-i-want-to-check-whether-my-union-is-list-or-string-in-perl/47732077#47732077", "title": "What should If I want to check whether my union is list or string in perl", "body": "<p>Use the <code>@_</code> variable to retrieve subroutine parameters.</p>\n\n<p>To create the hash keys, you can let the values undefined.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nsub union {\n    my ($aref1, $aref2) = @_;\n    my %union;\n    @union{ @$aref1, @$aref2 } = ();\n    return keys %union\n}\n\nmy @union = union([1, 2, 3], [2, 3, 4]);\nprint \"@union\\n\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $union = join ',', union([1, 2, 3], [2, 3, 4]);\nprint \"$union\\n\";\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8705792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1882a15803c82d41d571250388bdb65f?s=128&d=identicon&r=PG&f=1", "display_name": "nicken", "link": "https://stackoverflow.com/users/8705792/nicken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1512852427, "creation_date": 1512844973, "last_edit_date": 1512846446, "question_id": 47731905, "link": "https://stackoverflow.com/questions/47731905/what-should-if-i-want-to-check-whether-my-union-is-list-or-string-in-perl", "title": "What should If I want to check whether my union is list or string in perl", "body": "<p>I need to write an union function using Perl, and what I did is here, questions is followed by code.</p>\n\n<pre><code>sub union\n{\n    my @array1  = qw/a b c d/;\n    my @array2  = qw/a f g h/;\n    my %myunion = ();\n    @myunion{ @array1, @array2 } = (1) x ( @array1 + @array2 );\n    @myunion = keys %myunion;\n    return @myunion;\n\n    #if(){\n    #    return @myunion;\n    #}\n    #else{\n    #    return join ',', @myunion;\n    #}\n}\nmy @uString = union( [ 1, 2, 3 ], [ 2, 3, 4 ] );\nmy @uList   = union( [ 1, 2, 3 ], [ 2, 3, 4 ] );\nprint \"$uString\\n\" \nprint \"@uList\\n\";\n</code></pre>\n\n<p>So without my command part, my out put is a b c d f g h in random order, but I want to make them as 1 2 3 4 in random order as what I write as input in my @uList. Also I need to check whether the caller requires a list, if it is it will return 1 2 3 4in random order, otherwise, it will return a comman-seperate string of the union which should be 1,2,3,4 in random order. So I want to know what should I do in the condition part of the if else statement.</p>\n"}, {"tags": ["perl", "pdb-files"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512837495, "post_id": 47730698, "comment_id": 82421907, "body": "Do you have some input lines (10 or so) for us? If possible with different <code>C</code>, <code>O</code> and <code>N</code> columns?"}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512837692, "post_id": 47730698, "comment_id": 82421951, "body": "ATOM   4851  O   PRO A 715      89.164  76.083  75.292  1.00 99.41           O    ATOM   4852  CB  PRO A 715      88.324  78.267  73.865  1.00 95.88           C    ATOM   4853  CG  PRO A 715      88.836  78.838  72.540  1.00 95.93           C    ATOM   4854  CD  PRO A 715      90.288  78.546  72.593  1.00 94.99           C    ATOM   4855  N   PHE A 716      90.009  77.320  76.994  1.00100.00           N"}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512837737, "post_id": 47730698, "comment_id": 82421969, "body": "I&#39;m sorry it came out bad. But before each ATOM you can see the element"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512837787, "post_id": 47730698, "comment_id": 82421985, "body": "Yes. Please <a href=\"https://stackoverflow.com/posts/47730698/edit\">edit</a> your post and append them there."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512838176, "post_id": 47730698, "comment_id": 82422122, "body": "Always start your Perl code with <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512838412, "post_id": 47730698, "comment_id": 82422206, "body": "Oh i have. I just put the main part of the program."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512838419, "post_id": 47730698, "comment_id": 82422211, "body": "So you want to count the different values in the last column of your data?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512838518, "post_id": 47730698, "comment_id": 82422240, "body": "<code>m&#47;^ATOM.*&#47;</code> is better written as <code>m&#47;^ATOM&#47;</code>. The trailing <code>.*</code> is redundant."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512838536, "post_id": 47730698, "comment_id": 82422250, "body": "@borodin Yes. See <a href=\"https://stackoverflow.com/q/47723084/5830574\">here</a> and <a href=\"https://stackoverflow.com/q/47723945/5830574\">here</a> for the history of this question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512838544, "post_id": 47730698, "comment_id": 82422254, "body": "Use lexical variables (<code>open my $fh, ...</code>), not bareword filehandles (<code>FILE</code>)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512838550, "post_id": 47730698, "comment_id": 82422257, "body": "What is &quot;new&quot; about the contents of <code>@newlines</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512838578, "post_id": 47730698, "comment_id": 82422264, "body": "Use three-argument open (<code>open my $fh, &#39;&lt;&#39;, $ARGV[0]</code>), not two-argument open."}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512838617, "post_id": 47730698, "comment_id": 82422271, "body": "Yes. meaning if there were 7 C, 4 P, 5 N, 7 O, and so on...... then the code will out put C: 7, N: 5, O: 7, P: 5."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512838620, "post_id": 47730698, "comment_id": 82422272, "body": "Include the name of the file and the reason for the failure in your error message: <code>die &quot;$0: could not open $ARGV[0]: $!\\n&quot;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512838727, "post_id": 47730698, "comment_id": 82422304, "body": "<code>substr</code> returns a single string, so <code>@element</code> will only ever have one element. Sorting it is pointless."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 2, "last_activity_date": 1512838832, "creation_date": 1512838832, "answer_id": 47730923, "question_id": 47730698, "link": "https://stackoverflow.com/questions/47730698/how-to-count-each-element-from-a-pdb-file/47730923#47730923", "title": "How to count each element from a pdb file", "body": "<p>For counting the occurences of the elements <code>C</code>, <code>O</code> and <code>N</code> (and others) a <em>hash</em> is the proper data structure.\nUse the <em>elements</em> as keys and increment the corresponding value. <em>After</em> the loop you can then print the hash sorted by its keys:</p>\n\n<pre><code>sub atomfreq {\n    my %count;\n    foreach my $record1(@newlines) {\n        my $element = substr($record1, 76, 2);\n        $count{$element} += 1;\n    }\n    foreach my $element ( sort keys %count ) {\n        print \"element=$element, count=$count{$element}\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512839300, "post_id": 47731003, "comment_id": 82422490, "body": "<code>&lt;&gt;</code> uses 2-arg open internally, which is potentially unsafe: <a href=\"http://www.perlmonks.org/?node_id=258980\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=258980</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512839376, "post_id": 47731003, "comment_id": 82422522, "body": "<code>grep &#47;...&#47;, &lt;&gt;</code> slurps the whole file into memory first, then creates a filtered copy. The <code>while</code> loop only accumulates matching lines."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512839436, "post_id": 47731003, "comment_id": 82422548, "body": "@melpomene You&#39;re quite picky today ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1512839535, "post_id": 47731003, "comment_id": 82422584, "body": "@melpomene: I don&#39;t think those are useful considerations. I&#39;ll file them along with <code>\\d</code> not matching just decimal digits."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512839949, "post_id": 47731003, "comment_id": 82422745, "body": "That&#39;s my secret, @PerlDuck. I&#39;m always picky."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1512930424, "post_id": 47731003, "comment_id": 82444125, "body": "@Borodin we can&#39;t split in a Pdb files. Because some times spaces are not present in between two values. The better solution is we have to go with substr for a Pdb files"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1512930580, "post_id": 47731003, "comment_id": 82444179, "body": "@mkHun: Then you need <code>unpack</code> instead. I&#39;ve altered my answer."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512930809, "last_edit_date": 1512930809, "creation_date": 1512839221, "answer_id": 47731003, "question_id": 47730698, "link": "https://stackoverflow.com/questions/47730698/how-to-count-each-element-from-a-pdb-file/47731003#47731003", "title": "How to count each element from a pdb file", "body": "\n\n<p>There's no need to <code>open</code> a file passed as a parameter on the command line: you can just read from it using <code>&lt;&gt;</code>. It is also much more concise to use <code>grep</code> rather a read loop, a test, and a <code>push</code></p>\n\n<p>I also don't see why you need a subroutine here</p>\n\n<p>This code will do what you ask</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy @lines = grep /^ATOM/, &lt;&gt;;\n\nmy %counts;\n++$counts{ unpack '@77 A2' } for @lines;\nprintf \"%-4s%4d\\n\", $_, $counts{$_} for sort keys %counts;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>C     12\nN      1\nO      2\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 47730923, "answer_count": 2, "score": 0, "last_activity_date": 1512930809, "creation_date": 1512837331, "last_edit_date": 1512838199, "question_id": 47730698, "link": "https://stackoverflow.com/questions/47730698/how-to-count-each-element-from-a-pdb-file", "title": "How to count each element from a pdb file", "body": "<p>I am having trouble trying to count the amount of each element provided in a pdb file. So far, the code has achieved to take the lines from the file that starts with ATOM. I have also gotten to the point where I can print each element. But  now I want to count each element such as C,O,N, and so on and list them in alphabetical order. \nThe data looks like this:</p>\n\n<pre><code> ATOM   4851  O   PRO A 715      89.164  76.083  75.292  1.00 99.41           O  \n ATOM   4852  CB  PRO A 715      88.324  78.267  73.865  1.00 95.88           C  \n ATOM   4853  CG  PRO A 715      88.836  78.838  72.540  1.00 95.93           C  \n ATOM   4854  CD  PRO A 715      90.288  78.546  72.593  1.00 94.99           C  \n ATOM   4855  N   PHE A 716      90.009  77.320  76.994  1.00100.00           N  \n ATOM   4856  CA  PHE A 716      90.100  76.203  77.966  1.00 99.66           C  \n ATOM   4857  C   PHE A 716      89.942  76.667  79.419  1.00 99.17           C  \n ATOM   4858  O   PHE A 716      88.895  76.334  80.027  1.00100.00           O  \n ATOM   4859  CB  PHE A 716      91.409  75.402  77.819  1.00 97.04           C  \n ATOM   4860  CG  PHE A 716      91.290  74.219  76.899  1.00 96.00           C  \n ATOM   4861  CD1 PHE A 716      90.323  73.236  77.133  1.00 94.17           C  \n ATOM   4862  CD2 PHE A 716      92.112  74.107  75.774  1.00 94.87           C  \n ATOM   4863  CE1 PHE A 716      90.170  72.157  76.260  1.00 93.04           C  \n ATOM   4864  CE2 PHE A 716      91.971  73.037  74.894  1.00 93.41           C  \n ATOM   4865  CZ  PHE A 716      90.996  72.057  75.137  1.00 95.29           C  \n</code></pre>\n\n<p>My code is :</p>\n\n<pre><code>open (FILE, $ARGV[0])\n    or die \"Could not open file\\n\";\n\nmy @newlines;\nwhile ( my $line = &lt;FILE&gt; ) {\n    if ($line =~ m/^ATOM.*/) {\n    push @newlines, $line;\n    }\n}\n\n##############################################################\n#This function will take out the element from each line\n#The element is from column 77 and contains one or two letters\n#The function will also sort each element alphabetically and count them\nsub atomfreq {\n    foreach my $record1(@newlines) {\n      my @element = substr($record1, 76, 2);\n      my @sortelement = sort(@element);\n      print \"@sortelement\\n\";\n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1512815291, "post_id": 47727409, "comment_id": 82415667, "body": "You have a typo in your first code block that makes it impossible to compile. Please don&#39;t retype code here, but rather copy/paste your real code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1512816110, "post_id": 47727409, "comment_id": 82415857, "body": "I don&#39;t understand the question. You are passing the first element of the array. That&#39;s your has reference. You put that into <code>$args</code> in your <code>new</code> method. Then you dereference it into a list when you create your IO::Socket object. That all looks fine. The way you put the IP and port into that hashref is fine, though cumbersome. You could just do <code>{ reuse =&gt; 1, eol =&gt; q{}, port =&gt; $port, ip =&gt; $ip }</code>. But it doesn&#39;t make a difference really."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1512817110, "post_id": 47727409, "comment_id": 82416139, "body": "&quot;I can&#39;t get it to work&quot; and &quot;it won&#39;t work&quot; aren&#39;t problem descriptions. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1512833711, "post_id": 47727409, "comment_id": 82420838, "body": "Why are you using <code>refaddr $obj</code> in your code?  And why have you not defined <code>$obj</code> before using it?  All future <code>-&gt;new()</code> calls will just map to <code>refaddr $obj</code> which will return <code>undef</code>."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1512903020, "post_id": 47727409, "comment_id": 82436299, "body": "Sorry, I fixed those bugs. I typed it in, instead of copy/paste at the time of posting."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512903244, "post_id": 47727409, "comment_id": 82436360, "body": "OK, but xxfelixxx&#39;s comment still applies: <code>refaddr $obj</code> will be <code>undef</code> every time. And this is still not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1513029745, "post_id": 47727409, "comment_id": 82485751, "body": "ok. sorry, I missed creating the <code>$obj</code>. I checked the source this morning and added the missing parts."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1513124957, "post_id": 47727409, "comment_id": 82528839, "body": "hi @xxfelixxx , i have updated my question with the changes, can you kindly check now?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1513224745, "post_id": 47727409, "comment_id": 82572933, "body": "<code>!sel</code> should be <code>!$sel</code> to satisfy the compilation requirement...<code>class</code> should be <code>$class</code> in your <code>bless</code> line..."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1513225389, "post_id": 47727409, "comment_id": 82573093, "body": "Please, if you are going to post some code on SO, try copying it and saving it and seeing if it compiles...because no on wants to deal with non-compiling code, it just slows everything down and makes people less eager to help."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1513227366, "last_edit_date": 1513227366, "creation_date": 1513226883, "answer_id": 47806088, "question_id": 47727409, "link": "https://stackoverflow.com/questions/47727409/checking-whether-its-indeed-a-key-value-pair-that-i-inserted/47806088#47806088", "title": "Checking whether it&#39;s indeed a key -&gt; value pair that I inserted", "body": "<p>After fixing the compilation issues...what your code needs are some accessors, since the object you return from <code>-&gt;new()</code> is just an bare object reference.</p>\n\n<p>For example, you could add the following accessor inside <strong>mysock::my_sock.pm</strong></p>\n\n<pre><code>sub socket {\n    my ($obj) = @_;\n    return $socket{ refaddr $obj }-&gt;{_SOCKET_};\n}\n</code></pre>\n\n<p>And then from a script, you could see the different objects:</p>\n\n<pre><code>my $box1 = new('10.150.180.245','2011');   # pass ip/port as args.\nmy $box2 = new('10.150.180.246','2012');   # pass ip/port as args.\nprint \"Box1 Socket: \" . $box1-&gt;socket() . \"\\n\";\nprint \"Box2 Socket: \" . $box2-&gt;socket() . \"\\n\";\n</code></pre>\n\n<p>Which outputs (on my machine, your memory addresses will vary):</p>\n\n<pre><code>Box1 Socket: IO::Socket::INET=GLOB(0x5567efa4eb68)\nBox2 Socket: IO::Socket::INET=GLOB(0x5567efa64f98)\n</code></pre>\n\n<p>Another thing is that it is not necessary to use <code>refaddr</code>, as you can just store/retrieve hash references directly inside other hashes, i.e.</p>\n\n<pre><code># instead of \n$socket{ refaddr $obj }-&gt;{ some_field } = 2;\nmy $some_field = $socket{ refaddr $obj }-&gt;{ some_field };\n\n# you can just\n$socket{ $obj }-&gt;{ some_field } = 2;\nmy $some_field = $socket{ $obj }-&gt;{ some_field };\n</code></pre>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513244771, "creation_date": 1512813661, "last_edit_date": 1513244771, "question_id": 47727409, "link": "https://stackoverflow.com/questions/47727409/checking-whether-its-indeed-a-key-value-pair-that-i-inserted", "title": "Checking whether it&#39;s indeed a key -&gt; value pair that I inserted", "body": "<p>I am trying to debug an issue <em>(not my source entirely)</em>.</p>\n\n<p>I have a package I made which is a wrapper for <code>IO::Socket</code> to create socket.</p>\n\n<pre><code>package mysock::my_sock;\nuse strict;\nuse warnings;\nuse Scalar::Util 'refaddr';\nuse IO::Socket;\nuse IO::Select;\n\nmy %socket;\nmy $dbg_flag = 0;\nour ($obj,$sel,$eol);\n\nsub new {\n   my $class = shift;\n   my $args = shift;\n   my $sock = new IO::Socket::INET(%{$args});\n   my $obj = bless \\do {my $anon_scalar}, class;   # &lt;-- Added.\n   if (!$sock) { warn \"Cannot create socket: $!/$@\\n\" if ($dbg_flag); \n      return undef; \n   }\n   my $sel = new IO::Select($sock);\n   if(!sel){ warn \"Could not create select obj: $!/$@\\n\" if ($dbg_flag); \n      return undef; \n   }\n\n   # Initialize some vars for class\n   $socket{ refaddr $obj }-&gt;{_SOCKET_} = $sock;\n   $socket{ refaddr $obj }-&gt;{_SELECT_} = $sel;\n   $socket{ refaddr $obj }-&gt;{_EOL_}    = $eol;\n   $socket{ refaddr $obj }-&gt;{_BUFFER_} = {};\n\n   return $obj;\n  }\n\n 1;\n</code></pre>\n\n<p>Now when I call/use my package in my script this way everything <strong>works fine</strong> :</p>\n\n<pre><code>use warnings;\nuse mysock::my_sock;\nsub new {\n          my $var = mysock::my_sock-&gt;new({\n                                    ip    =&gt; '10.109.157.249',  # Hard coded IP\n                                    port  =&gt; '2002',            # Hard coded port\n                                    reuse =&gt; 1,\n                                    eol   =&gt;''\n                                   }) or die \"unable to connect $!\\n\";\n           return var;\n        }  # This sub will go to another package, putting it here for brevity.\n\nmy $box = new();\n</code></pre>\n\n<p>The above code is straight forward. I have created a socket handle successfully. <strong>No</strong> problems so far.</p>\n\n<p>But when I modify my new function this way in my script so that i could pass the ip and port, i can't get it to work no matter what i do:</p>\n\n<pre><code>sub new {\n    my ($ip_, $port_) = @_;\n    my @AoH = (\n                 {\n                    reuse =&gt; 1,\n                    eol =&gt;''\n                  }\n              );\n    $AoH[0]{ip} = $ip_ ;               #insert key =&gt; value to my AoH\n    $AoH[0]{port} = $port_ ;           #insert key =&gt; value to my AoH\n    my $var = mysock::my_sock-&gt;new($AoH[0]) or die \"unable to connect- $!\\n\";\n    return $var;\n  }\n\n my $box = new('10.150.180.245','2011');   # pass ip/port as args.\n</code></pre>\n\n<p>I tried passing <code>my $var = mysock::my_sock-&gt;new($AoH)</code> or <code>my $var = mysock::my_sock-&gt;new($AoH)</code> and even <code>my $var = mysock::my_sock-&gt;new(\\@AoH)</code>. None of these works. </p>\n\n<p>When I dump the <code>$args</code> that I get inside my package, for both cases it prints a hash: </p>\n\n<pre><code>$VAR1 = {\n           \"reuse\" =&gt; 1,\n           \"ip\" =&gt; \"10.63.122.49\",\n           \"port\" =&gt; 6002,\n           \"eol\" =&gt; \"\"\n         };\n</code></pre>\n\n<p>I am using perl debugger, and it shows the same hash above when i run my script either way, which is what confuses me. If they are the same, then why won't the second method work?</p>\n\n<p>Could the hash somehow gotten over written? I dunno what's gone wrong. <code>$sock</code> in my package doesn't get the socket, and I couldn't get <code>IO::Socket</code> to bless me w/ a socket call when i use my modified function where i pass the params so i return <code>undef</code>.</p>\n\n<p>Can you help?</p>\n"}, {"tags": ["bash", "perl", "sorting", "awk", "sed"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3026339"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1512804891, "post_id": 47726310, "comment_id": 82413290, "body": "$date was in error - I have supplied more sample data and changed the date definition syntax (see above)"}, {"owner": {"reputation": 38472, "user_id": 1815797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be290f9af1ba6048c7022ef1109efc6?s=128&d=identicon&r=PG", "display_name": "gniourf_gniourf", "link": "https://stackoverflow.com/users/1815797/gniourf-gniourf"}, "edited": false, "score": 1, "creation_date": 1512805480, "post_id": 47726310, "comment_id": 82413387, "body": "Not optimal, but should be better than what you have: <code>awk -v a=&quot;$lower_bound&quot; -v b=&quot;$upper_bound&quot;  &#39;$1&gt;=a &amp;&amp; $1&lt;=b&#39;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3026339"}, "reply_to_user": {"reputation": 38472, "user_id": 1815797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be290f9af1ba6048c7022ef1109efc6?s=128&d=identicon&r=PG", "display_name": "gniourf_gniourf", "link": "https://stackoverflow.com/users/1815797/gniourf-gniourf"}, "edited": false, "score": 1, "creation_date": 1512806086, "post_id": 47726310, "comment_id": 82413517, "body": "@gniourf_gniourf - Thank you, this works. For future reference, why do you make the comparison with $1?"}, {"owner": {"reputation": 38472, "user_id": 1815797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be290f9af1ba6048c7022ef1109efc6?s=128&d=identicon&r=PG", "display_name": "gniourf_gniourf", "link": "https://stackoverflow.com/users/1815797/gniourf-gniourf"}, "edited": false, "score": 1, "creation_date": 1512806676, "post_id": 47726310, "comment_id": 82413645, "body": "I think you need to learn a little bit about <code>awk</code>. There are some resources linked in the <a href=\"https://stackoverflow.com/tags/awk/info\">tag info page</a>."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1512806804, "post_id": 47726310, "comment_id": 82413672, "body": "<code>&#47;a&#47;</code> matches <code>a</code> literally as a regex not <code>a</code> as a variable."}], "answers": [{"tags": [], "owner": {"reputation": 5595, "user_id": 7589636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56ef5874ad2fe0d21f9d28ba4badc76b?s=128&d=identicon&r=PG&f=1", "display_name": "thanasisp", "link": "https://stackoverflow.com/users/7589636/thanasisp"}, "is_accepted": false, "score": 1, "last_activity_date": 1512806934, "creation_date": 1512806934, "answer_id": 47726629, "question_id": 47726310, "link": "https://stackoverflow.com/questions/47726310/bash-string-used-to-select-range/47726629#47726629", "title": "Bash String Used to Select Range", "body": "<p>This: <code>/a/</code> will match the literal <code>\"a\"</code>. This: <code>$0 ~ a</code> will match the string you have stored in variable <code>a</code>, so your command should be:</p>\n\n<pre><code>awk -v a=\"$lower_bound\" -v b=\"$upper_bound\"\n    '$0 ~ a {flag=1;next} $0 ~ b {flag=0} flag' data.csv\n</code></pre>\n\n<hr>\n\n<p>But these awk/sed commands will not give you what you want because only accidentally they could match lines, in case the exact datetime bounds exist in your logs. More probably, the exact lower bound will not exist, so flag will never be set.</p>\n\n<p>If you want to print for that date range then you should make an alphabetical\n comparison of these dates, that means <code>$0 &gt; a</code> and <code>$0 &lt; b</code></p>\n\n<pre><code>awk -v a=\"$lower_bound\" -v b=\"$upper_bound\" '$0 &gt; a &amp;&amp; $0 &lt; b' data.csv\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3026339"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1512810730, "answer_count": 1, "score": 2, "last_activity_date": 1512806934, "creation_date": 1512803892, "last_edit_date": 1512804855, "question_id": 47726310, "link": "https://stackoverflow.com/questions/47726310/bash-string-used-to-select-range", "closed_reason": "Duplicate", "title": "Bash String Used to Select Range", "body": "<p>I have the following data located in a .csv file that changes as new data is downloaded. \nThe syntax of the data is always YYYY-MM-DDTHHMMSS, examples below:</p>\n\n<pre><code>2017-12-08T194949\n2017-12-08T194952\n2017-12-08T195000\n2017-12-08T195007\n2017-12-08T195007\n2017-12-08T195014\n2017-12-08T195016\n2017-12-08T195016\n2017-12-08T195016\n2017-12-08T195016\n2017-12-08T195021\n2017-12-08T195026\n2017-12-08T195029\n2017-12-08T195030\n2017-12-08T195030\n2017-12-08T195034\n2017-12-08T195051\n2017-12-08T195101\n2017-12-08T195105\n2017-12-08T195135\n2017-12-08T195138\n2017-12-08T195140\n2017-12-08T195144\n2017-12-08T195148\n2017-12-08T195154\n2017-12-08T195204\n2017-12-08T195205\n2017-12-08T195219\n2017-12-08T195223\n2017-12-08T195224\n2017-12-08T195225\n</code></pre>\n\n<p>Currently, I define my datestrings using:</p>\n\n<pre><code>lower_bound=`date -d '1 day ago' \"+%Y-%m-%dT%H%M%S\"`\nupper_bound=`date -d '12 hours ago' \"+%Y-%m-%dT%H%M%S\"`\n</code></pre>\n\n<p>Where the amount of minutes I lookback into the file is dependent on the system time. I can set the amount I lookback to be arbitrary.</p>\n\n<p>I think I have gotten close with sed/awk as follows:</p>\n\n<pre><code>sed -n \"/$lower_bound/,/$upper_bound/p\" data.csv\nawk -v a=\"$lower_bound\" -v b=\"$upper_bound\" '/a/{flag=1;next}/b/{flag=0}flag' data.csv\n</code></pre>\n\n<p>Given those lookback strings, the commands above should print out the range of dates in between the two variables, $lower_bound and $upper_bound. Obviously, I have experimented with different lookback times in the aforementioned variables.</p>\n\n<p>Any ideas to why the range of dates aren't printing? Any help would be greatly appreciated; thank you in advance.</p>\n"}, {"tags": ["perl", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9075245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce580247639558f47bae37171e3c1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Harshavardhan Reddy", "link": "https://stackoverflow.com/users/9075245/harshavardhan-reddy"}, "edited": false, "score": 0, "creation_date": 1512819286, "post_id": 47726106, "comment_id": 82416714, "body": "Hi, thanks for the reply, here in your solution the code is just checking if the DeviceName is same and if it is same it just doesnot create a row, but in my case i wanted to Update the table with newly coming information, everytime only the DeviceName is same but the other columns get changed as the other column is time, the time gets changed every time, so when ever a need information comes into database need to check the DeviceName if same update else INSERT,"}, {"owner": {"reputation": 15, "user_id": 9075245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce580247639558f47bae37171e3c1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Harshavardhan Reddy", "link": "https://stackoverflow.com/users/9075245/harshavardhan-reddy"}, "edited": false, "score": 0, "creation_date": 1512819333, "post_id": 47726106, "comment_id": 82416727, "body": "In the description i have mentioned a note: the variable values are taken just for easy understanding. which means except the name the other colums changes, sometimes DeviceName also changes then we need to insert else update. Thanks In Advance"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1512802480, "last_edit_date": 1512802480, "creation_date": 1512802176, "answer_id": 47726106, "question_id": 47725437, "link": "https://stackoverflow.com/questions/47725437/how-to-create-unique-index-in-sqlite3-and-perl/47726106#47726106", "title": "How to create unique index in sqlite3 and perl?", "body": "<p>You never actually create the index.</p>\n\n<p>Replace</p>\n\n<pre><code>$stmt = qq(CREATE UNIQUE INDEX ree ON INFO(DeviceName));\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$dbh-&gt;do(qq(CREATE UNIQUE INDEX ree ON INFO(DeviceName)));\n</code></pre>\n\n<hr>\n\n<p>Cleaned up version:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings qw( all );\n\nuse DBI qw( );\n\nmy $database = \"test.db\";\nmy $dsn = \"dbi:sqlite:dbname=$database\";\n\nmy $dbh = DBI-&gt;connect($dsn, undef, undef,\n   {\n      RaiseError =&gt; 1,\n      PrintError =&gt; 0,\n      PrintWarn  =&gt; 1,\n      AutoCommit =&gt; 1,\n   },\n);\n\n$dbh-&gt;do(q{\n   CREATE TABLE IF NOT EXISTS INFO (\n             DeviceName     TEXT  NOT NULL,\n             CurrentStatus  INT   NOT NULL,\n             ReportTime     TEXT,\n             OldStatus      INT   NOT NULL,\n             OldReportTime  TEXT\n          )\n});\n\n$dbh-&gt;do(q{ CREATE UNIQUE INDEX ree ON INFO ( DeviceName ) });\n\nmy $FQDN          = \"bubbly.bth.se\";\nmy $currenttime   = \"Sat Dec  9 02:07:31 2017\";\nmy $oldtime       = \"Sat Dec  9 02:06:31 2017\";\nmy $currentstatus = \"1\";\nmy $oldstatus     = \"2\";\n\n$dbh-&gt;do(\n   q{\n      INSERT OR REPLACE INTO INFO (\n                DeviceName,\n                CurrentStatus,\n                ReportTime,\n                OldStatus,\n                OldReportTime\n             ) VALUES (\n                ?, ?, ?, ?, ?\n             )\n   },\n   undef,\n   $FQDN, $currentstatus, $currenttime, $oldstatus, $oldtime\n);\n\n$dbh-&gt;disconnect();\n</code></pre>\n\n<ul>\n<li>Always use <code>use warnings qw( all );</code>.</li>\n<li>You incorrectly build your <code>INSERT</code> statement (injection bug).</li>\n<li>You have poor indenting and spacing.</li>\n<li>You have <code>RaiseError =&gt; 1</code>, so it makes no sense to check if the DBI methods return an error.</li>\n<li>You have <code>RaiseError =&gt; 1</code>, so it makes much sense to also use <code>PrintError =&gt; 1</code>.</li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 9075245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce580247639558f47bae37171e3c1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Harshavardhan Reddy", "link": "https://stackoverflow.com/users/9075245/harshavardhan-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512802480, "creation_date": 1512795155, "last_edit_date": 1512795686, "question_id": 47725437, "link": "https://stackoverflow.com/questions/47725437/how-to-create-unique-index-in-sqlite3-and-perl", "title": "How to create unique index in sqlite3 and perl?", "body": "<p><em>I am trying to insert values into the database, My database table is as shown</em></p>\n\n<pre><code>$stmt = qq(CREATE TABLE IF NOT EXISTS INFO \n   (\n\n  DeviceName               TEXT    NOT NULL,\n  CurrentStatus            INT     NOT NULL,\n  ReportTime        TEXT,\n  OldStatus         INT            NOT NULL,\n  OldReportTime     TEXT           ););\n</code></pre>\n\n<p>Here before inserting to the db I am creating a unique index for DeviceName column, so that whenever a new entry comes into the db with same name it is not inserted rather gets replaced,</p>\n\n<pre><code>$stmt = qq(CREATE UNIQUE INDEX ree ON INFO(DeviceName));\n$stmt = qq(INSERT OR REPLACE INTO INFO(DeviceName, CurrentStatus,ReportTime,OldStatus,OldReportTime)\n           VALUES ('$FQDN', $currentstatus, '$currenttime', $oldstatus, '$oldtime' ););\nmy $rv = $dbh-&gt;do($stmt) or die $DBI::errstr;\n</code></pre>\n\n<p>these are the few lines which i added to create a unique index and replace if the next entity enters with the same DeviceName. But though i followed this, the databases is still getting stored with the same DeviceName multiple times.</p>\n\n<pre><code> #!/usr/bin/perl\n use DBI;\n use strict;\n my $FQDN= \"bubbly.bth.se\";\n my $currenttime = \"Sat Dec  9 02:07:31 2017\";\n my $oldtime = \"Sat Dec  9 02:06:31 2017\";\n my $currentstatus = \"1\";\n my $oldstatus = \"2\";\n my $driver   = \"SQLite\";\n my $database = \"test.db\";\n my $dsn = \"DBI:$driver:dbname=$database\";\n my $userid = \"\";\n my $password = \"\";\n\n my $dbh = DBI-&gt;connect($dsn, $userid, $password, { RaiseError =&gt; 1 })\n     or die $DBI::errstr;\n print \"Opened database successfully\\n\";\n\n $stmt = qq(CREATE TABLE IF NOT EXISTS INFO \n (\n\n  DeviceName               TEXT    NOT NULL,\n  CurrentStatus            INT     NOT NULL,\n  ReportTime        TEXT,\n  OldStatus         INT            NOT NULL,\n  OldReportTime     TEXT           ););\n\nmy $rv = $dbh-&gt;do($stmt);\nif(my $rv &lt; 0) {\nprint $DBI::errstr;\n} else {\nprint \"Table created successfully\\n\";\n    }\n$stmt = qq(CREATE UNIQUE INDEX ree ON INFO(DeviceName));\n$stmt = qq(INSERT OR REPLACE INTO INFO(DeviceName, \nCurrentStatus,ReportTime,OldStatus,OldReportTime)\n           VALUES ('$FQDN', $currentstatus, '$currenttime', $oldstatus, \n'$oldtime' ););\nmy $rv = $dbh-&gt;do($stmt) or die $DBI::errstr;\n$dbh-&gt;disconnect();\n\nNetSNMP::TrapReceiver::register(\"all\", \\&amp;my_receiver) || \nwarn \"failed to register our perl trap handler\\n\";\nprint STDERR \"Loaded the example perl snmptrapd handler\\n\";\n</code></pre>\n\n<p><strong>this is the code i am using,\n my output</strong></p>\n\n<pre><code>bubbly.bth.se|1|Sat Dec  9 02:07:31 2017|2|Sat Dec  9 02:06:31 2017\nbubbly.bth.se|1|Sat Dec  9 02:07:31 2017|2|Sat Dec  9 02:06:31 2017\nbubbly.bth.se|1|Sat Dec  9 02:07:31 2017|2|Sat Dec  9 02:06:31 2017\nbubbly.bth.se|1|Sat Dec  9 02:07:31 2017|2|Sat Dec  9 02:06:31 2017\nbubbly.bth.se|1|Sat Dec  9 02:07:31 2017|2|Sat Dec  9 02:06:31 2017\n</code></pre>\n\n<p>But i wanted to have only one row in the database which updates or replaces every time if it finds the same DeviceName.</p>\n\n<p><strong>NOTE:</strong> Variable values are taken just for easy understanding. </p>\n\n<p>` </p>\n"}, {"tags": ["bash", "shell", "perl", "pdb-files"], "answers": [{"tags": [], "owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "is_accepted": false, "score": 1, "last_activity_date": 1512788198, "creation_date": 1512788198, "answer_id": 47724869, "question_id": 47723945, "link": "https://stackoverflow.com/questions/47723945/how-to-take-out-certain-elements-from-a-pdb-file/47724869#47724869", "title": "How to take out certain elements from a pdb file", "body": "<p>You can just call them right under your other code like this:</p>\n\n<pre><code>atomfreq();\nresfreq();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512832358, "post_id": 47729489, "comment_id": 82420455, "body": "Oh I see. Thank you for the help. Also is it possible to count how much of each element there is and in alphabetical order within the same function??"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512832513, "post_id": 47729489, "comment_id": 82420490, "body": "Because you iterate over the complete <code>@newlines</code> there are exactly as many <code>$residue</code>s as there are elements in <code>@newlines</code>. No need to count them."}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512833668, "post_id": 47729489, "comment_id": 82420821, "body": "I&#39;m sorry. I didn&#39;t make myself clear. The output of the atomfreq function contains letters such as C, O,N, and so on. How do i sort this to be in alphabetical order and count how C,O,N or other elements that are presented? Thanks again."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1512834476, "post_id": 47729489, "comment_id": 82421053, "body": "Well, that would be a new question but I can give you a hint: Store the <code>$residue</code> as the keys in a hash and increment the value by one in each iteration (as in <code>my %count; for ... { $residue=...; $count{$residue} += 1; }</code>)."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1512829063, "creation_date": 1512829063, "answer_id": 47729489, "question_id": 47723945, "link": "https://stackoverflow.com/questions/47723945/how-to-take-out-certain-elements-from-a-pdb-file/47729489#47729489", "title": "How to take out certain elements from a pdb file", "body": "<p>As @Ossip already said in <a href=\"https://stackoverflow.com/a/47724869/5830574\">this answer</a> you simply need to call your functions:</p>\n\n<pre><code>sub atomfreq {\n    ...\n}\n\nsub resfreq {\n    ...\n}\n\natomfreq();\nresfreq();\n</code></pre>\n\n<p><strong>But</strong> I'm not sure whether these functions do what you intended because the comments imply that they should print <em>every</em> <code>$residue</code> and <code>$element</code> from the <code>@newlines</code> array. You've put a <code>return</code> statement inside the <code>for</code> loop which will immediately return from the whole function (and its <code>for</code> loop) so it will print only the first <code>$residue</code> or <code>$element</code>. Because the functions aren't supposed to return anything you can just drop that statement:</p>\n\n<pre><code>sub atomfreq {\n    foreach my $record1(@newlines) {\n        my $element = substr($record1, 76, 2);\n        print \"$element\\n\";\n    }\n}\n\nsub resfreq {\n    foreach my $record2(@newlines) {\n        my $residue = substr($record2, 17, 3);\n        print \"$residue\\n\";\n    }\n}\n\natomfreq();\nresfreq();\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47729489, "answer_count": 2, "score": 0, "last_activity_date": 1512829063, "creation_date": 1512778434, "question_id": 47723945, "link": "https://stackoverflow.com/questions/47723945/how-to-take-out-certain-elements-from-a-pdb-file", "title": "How to take out certain elements from a pdb file", "body": "<p>I am trying to take out certain columns from a pdb file. I already have taken out all lines that start out with ATOM in my code. For some reason my sub functions are not working and I do not know where or how to call them. \nMy code is:</p>\n\n<pre><code>open (FILE, $ARGV[0])\n    or die \"Could not open file\\n\";\n\nmy @newlines;\n while ( my $line = &lt;FILE&gt; ) {\n    if ($line =~ m/^ATOM.*/) {\n    push @newlines, $line;\n    }\n}\n\nmy $atomcount = @newlines;\n#print \"@newlines\\n\";\n#print \"$atomcount\\n\";\n\n##############################################################\n#This function will take out the element from each line\n#The element is from column 77 and contains one or two letters\n\nsub atomfreq {\n    foreach my $record1(@newlines) {\n      my $element = substr($record1, 76, 2);\n      print \"$element\\n\";\n      return;\n    }\n}\n\n################################################################\n#This function will take out the residue name from each line\n#The element is from column 18 and contains 3 letters\n\nsub resfreq {\n    foreach my $record2(@newlines) {\n      my $residue = substr($record2, 17, 3);\n      print \"$residue\\n\";\n      return;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1512780864, "post_id": 47723650, "comment_id": 82409135, "body": "crosspost: (<a href=\"https://perlmonks.org/?node_id=1205210\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1205210</a>) please mention crossposts to save people work"}], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "edited": false, "score": 0, "creation_date": 1512781728, "post_id": 47724226, "comment_id": 82409312, "body": "What other approaches would you consider? This is my first time programming with file compression."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "edited": false, "score": 1, "creation_date": 1512784286, "post_id": 47724226, "comment_id": 82409808, "body": "@JonathanDewein  Updated with a better way if the archive doesn&#39;t already exist (while you can also even just copy files with new names first).  Thank you for the attribution."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1513197031, "last_edit_date": 1513197031, "creation_date": 1512780948, "answer_id": 47724226, "question_id": 47723650, "link": "https://stackoverflow.com/questions/47723650/no-files-found-in-archive-when-renaming-files/47724226#47724226", "title": "No files found in archive when renaming files", "body": "<p>The archive is created with the <em>Class method</em> <code>create_archive</code>, while the <a href=\"https://perldoc.perl.org/Archive/Tar.html#%24tar-%3erename(-%24file%2c-%24new_name-)\" rel=\"nofollow noreferrer\">rename</a> method is called on the object to (my emphasis)</p>\n\n<blockquote>\n  <p>Rename the file of the <strong>in-memory</strong> archive to $new_name.</p>\n</blockquote>\n\n<p>Alas, since the object was never used to write/read the archive there is no in-memory archive. </p>\n\n<p>In general, you can read an archive from disk into memory, where you get <a href=\"https://perldoc.perl.org/Archive/Tar/File.html\" rel=\"nofollow noreferrer\">Archive::Tar::File</a> objects. Then rename the files and write out a new archive.</p>\n\n<pre><code>my @file_objs = $tar-&gt;read($archive);\n\nfor my $i (0..$#file_objs) {\n    $file_objs[$i]-&gt;rename($checksumfiles[$i]);\n}\n$tar-&gt;write('RENAMED_' . $archive, COMPRESS_GZIP);\n</code></pre>\n\n<p>This worked in my tests.</p>\n\n<p>But this is terribly wasteful if you are indeed first creating the archive, with an extra write-and-read. A suitable way to build the archive in-memory is with <a href=\"https://perldoc.perl.org/Archive/Tar.html#$tar-%3Eadd_files%28-@filenamelist-%29\" rel=\"nofollow noreferrer\">add_files</a></p>\n\n<pre><code># In a sub to make sure that renaming stays in order in which files are added\nsub archive_renamed {\n    my ($archive_name, $orig, $new) = @_;\n    if (@$orig != @$new) {\n        warn \"Unequal length of filename lists\";\n        return;\n    }\n    my $tar = Archive::Tar-&gt;new;\n\n    for my $file (@$orig) {\n        if (not $tar-&gt;add_files($file)) {\n            warn \"Error adding $file: \", $tar-&gt;error;             \n            return;\n        }\n    }\n    my @file_objs = $tar-&gt;get_files;\n\n    for my $i (0..$#file_objs) {\n        $file_objs[$i]-&gt;rename($new-&gt;[$i]);\n    }\n\n    $tar-&gt;write($archive_name, COMPRESS_GZIP);\n    if (my $error = $tar-&gt;error) {\n        warn \"Error writing $archive_name: $error\";\n        return;\n    }\n    return 1;\n}\n\narchive_renamed('RENAMED_'.$archive, \\@array, \\@checksumfiles);\n</code></pre>\n\n<p>Files are renamed in the same order as they were added so all files must have been indeed added or we can end up with <em>wrong</em> names. Thus we abort on any error in adding files. That is why this needs to  be in a sub, too, so that changes can't slip in so to end up renaming files out of order.</p>\n\n<p>If this ends up in a module use <a href=\"http://perldoc.perl.org/Carp.html\" rel=\"nofollow noreferrer\">Carp</a>::<code>carp</code> instead of <code>warn</code>. If the main code shouldn't proceed on errors use <code>die</code> (or <code>Carp::croak</code> in a module) instead.</p>\n\n<p>If particular properties mentioned in the docs for this method pose a problem (they shouldn't), you can even first copy the files with the new names and form the archive with those (then delete them).  That is also extra work but incomparably more efficient than extra reading and writing of archives.</p>\n"}], "owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 47724226, "answer_count": 1, "score": 1, "last_activity_date": 1513197031, "creation_date": 1512776053, "last_edit_date": 1512799446, "question_id": 47723650, "link": "https://stackoverflow.com/questions/47723650/no-files-found-in-archive-when-renaming-files", "title": "No files found in archive when renaming files", "body": "<p>This program reads a list of files from the directory specified on the command line, creates an array of hashes, where each file has key path, size, and sha256sum.</p>\n\n<p>I am trying to create a gzipped tarball of the files, where each files is name the checksum appended with the file's original extension.</p>\n\n<p>I create a gzipped tarball of the files successfully. However, when I try to use Archive::Tar's rename method, I am met with this error:</p>\n\n<p>No such file in archive: '/path/to/file1.txt' at ./program.pl line 62. This error repeats for each file in the archive.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\nuse File::Spec qw(catfile rel2abs);\nuse Digest::SHA qw(sha256_hex);\nuse Archive::Tar;\nuse Archive::Tar::File;\n\nmy $dir = $ARGV[0];\nmy $url = $ARGV[1];\nmy @AoH;\nmy @checksumfiles;\nmy $tar = Archive::Tar-&gt;new;\nmy $archive = \"archive.tar.gz\";\n\nopendir DIR, $dir or die \"cannot open dir $dir: $!\\n\";\nchdir $dir or die \"cannot navigate to dir $dir: $!\\n\";\n\nwhile(my $file = readdir DIR) {\n    next unless(-f File::Spec-&gt;catfile($dir, $file));\n    next if($file =~ m/^\\./);\n\n    my $fullpath = File::Spec-&gt;rel2abs($file);\n    my $fullsize = -s File::Spec-&gt;catfile($dir, $file);\n    my $fullid   = sha256_hex($fullpath);\n\n    my %hash = (\n        path    =&gt;  $fullpath,\n        size    =&gt;  $fullsize,\n        id      =&gt;  $fullid,\n    );\n\n    push(@AoH, \\%hash);\n}\nmy @array;\nfor my $i(0..$#AoH) {\n    no warnings 'uninitialized';\n    my ($ext) = $AoH[$i]{path} =~ (/(\\.[^.]+)$/);\n    my $idext = $AoH[$i]{id} . $ext;\n    push(@checksumfiles, $idext);\n    push(@array, $AoH[$i]{path});\n}\n\nArchive::Tar-&gt;create_archive($archive, COMPRESS_GZIP, @array);\n#print Archive::Tar-&gt;list_archive($archive, COMPRESS_GZIP), \"\\n\";\n\nfor my $i(0..$#array) {\n    $tar-&gt;rename($array[$i], $checksumfiles[$i]);\n}\n\nprint Dumper sort \\@array;\nprint Dumper sort \\@checksumfiles;\n#print Dumper sort \\@AoH;\n</code></pre>\n"}, {"tags": ["regex", "bash", "shell", "perl", "pdb-files"], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 0, "last_activity_date": 1512773751, "creation_date": 1512773751, "answer_id": 47723331, "question_id": 47723084, "link": "https://stackoverflow.com/questions/47723084/trying-to-take-out-all-atom-from-pdb-file/47723331#47723331", "title": "Trying to take out all ATOM from pdb file", "body": "<p>The line </p>\n\n<pre><code> @newlines = $lines;\n</code></pre>\n\n<p>re-assigns <code>$lines</code> to the array <code>@newlines</code> and thus overwrites it with every iteration of the <code>while</code> loop.\nYou rather want to <em>append</em> every <code>$lines</code> to <code>@newlines</code>, so</p>\n\n<pre><code>push @newlines, $lines;\n</code></pre>\n\n<p>will work.</p>\n\n<p>Sidenote: The variable name <code>$lines</code> should be <code>$line</code> (just for readability) because it's just <em>one line</em>, not <em>multiple lines</em>.</p>\n\n<p>Instead of explicitly counting the items appended to <code>@newlines</code> (with <code>$atomcount++;</code>) you can just use the number of items in <code>@newlines</code> after the loop:</p>\n\n<pre><code>my @newlines;\nwhile ( my $line = &lt;FILE&gt; ) {\n    if ($line =~ m/^ATOM.*/) {\n        push @newlines, $line;\n    }\n}\n\nmy $atomcount = @newlines; # in scalar context this is the number of items in @newlines\nprint \"@newlines\\n\";\nprint \"$atomcount\\n\";\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 47723331, "answer_count": 1, "score": 0, "last_activity_date": 1512773751, "creation_date": 1512772197, "question_id": 47723084, "link": "https://stackoverflow.com/questions/47723084/trying-to-take-out-all-atom-from-pdb-file", "title": "Trying to take out all ATOM from pdb file", "body": "<p>Hello I am trying to take out all the lines that start with ATOM from a pdb file. For some reason, I am having trouble. My code is:</p>\n\n<pre><code>open (FILE, $ARGV[0])\n    or die \"Could not open file\\n\";\n\nmy @newlines;\nmy $atomcount = 0;\nwhile ( my $lines = &lt;FILE&gt; ) {\n    if ($lines =~ m/^ATOM.*/) {\n    @newlines = $lines;\n    $atomcount++;\n}\n}\n\nprint \"@newlines\\n\";\nprint \"$atomcount\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1512774036, "last_edit_date": 1512774036, "creation_date": 1512773020, "answer_id": 47723226, "question_id": 47723031, "link": "https://stackoverflow.com/questions/47723031/pass-multiple-variables-to-module/47723226#47723226", "title": "pass multiple variables to module", "body": "<p>Lowercase module names are reserved by Perl, and the convention is to use them for pragmas. That's two misses, so let's rename the module to <code>Helper</code>. (Don't forget to change the file name to match!)</p>\n\n<hr>\n\n<p>The arguments are</p>\n\n<ul>\n<li><code>\"Helper\"</code></li>\n<li><code>\\%SOME_CONFIG</code></li>\n<li><code>\"first_helper\"</code></li>\n<li><code>sub { 1 }</code></li>\n<li><code>sub { 2 }</code></li>\n<li><code>\"second_helper\"</code></li>\n<li><code>sub { 3 }</code></li>\n</ul>\n\n<p>You probably meant to pass the sub refs in arrays, but you used parens. Parens just change precedence. Instead, you should have used the following:</p>\n\n<pre><code>use Helper (\n    \\%SOME_CONFIG,\n    \"first_helper\" =&gt; [\n        sub {\n            return do_something();\n        },\n        sub {\n            return do_something_else();\n        }\n    ],\n    \"second_helper\" =&gt; [\n        sub {\n            return something_else();\n        }\n    ],\n);\n</code></pre>\n\n<p>Now, the arguments are</p>\n\n<ul>\n<li><code>\"Helper\"</code></li>\n<li><code>\\%SOME_CONFIG</code></li>\n<li><code>\"first_helper\"</code></li>\n<li><code>[ sub { 1 }, sub { 2 } ]</code></li>\n<li><code>\"second_helper\"</code></li>\n<li><code>[ sub { 3 } ]</code></li>\n</ul>\n\n<p>There's no hash in there other than <code>\\%SOME_CONFIG</code>, but you have a hash dereference. That's no good. We could build a hash in the caller, but there's no need to make that any longer since we can handle the data as-is. Solutions:</p>\n\n<pre><code>sub import {\n    my $class = shift;\n    my $config = shift;\n    my %new_helpers = @_;\n    for my $id (keys(%new_helpers)) {\n        $helpers{$id} = $new_helpers{$id};\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub import {\n    my $class = shift;\n    my $config = shift;\n    %helpers = ( %helpers, @_ );\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub import {\n    my $class = shift;\n    my $config = shift;\n    while (@_) {\n       my $id = shift;\n       $helpers{$id} = shift;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512773798, "post_id": 47723298, "comment_id": 82407377, "body": "<code>{ first_helpers =&gt; ..., }, { second_helpers =&gt; ... }</code> should be <code>{ first_helpers =&gt; ..., second_helpers =&gt; ... }</code> (with the appropriate change to <code>import</code>)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1512780507, "last_edit_date": 1512780507, "creation_date": 1512773534, "answer_id": 47723298, "question_id": 47723031, "link": "https://stackoverflow.com/questions/47723031/pass-multiple-variables-to-module/47723298#47723298", "title": "pass multiple variables to module", "body": "<p>If your module is not a pragma, i.e. it doesn't change how the code is parsed, use a capitalized name.</p>\n\n<p>Values of hashes mush be scalars, so if you want to assign several subroutines to a key, you must use an array reference.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\n{\n    package Helper;\n    my %helpers;\n\n    sub import {\n        my $class = shift;\n        my %SOME_CONFIG = %{ shift; };\n        for my $hashref (@_){\n            @helpers{keys %$hashref} = values %$hashref;\n        }\n        use Data::Dumper;\n        $Data::Dumper::Deparse = 1;  # To show the code, as well.\n        warn Dumper \\%SOME_CONFIG, \\%helpers;\n    }\n}\n\n\nmy %SOME_CONFIG = ( field =&gt; 'and its value' );\n\nsub do_something {\n    warn \"Doing something\";\n}\n\nsub do_something_else {\n    warn \"Doing something else\";\n}\n\nHelper-&gt;import(\n    \\%SOME_CONFIG,\n    { first_helpers =&gt; [\n        \\&amp;do_something,\n        \\&amp;do_something_else,\n    ] },\n    { second_helpers =&gt; [\n        sub {\n            warn \"Inside the 2nd helper\";\n        },\n    ] },\n);\n</code></pre>\n\n<p>If you put Helper into a file of its own, Helper.pm, you can then just</p>\n\n<pre><code>use Helper (\n    \\%SOME_CONFIG,\n    ....\n</code></pre>\n\n<p>BUT, <code>use</code> clauses are processed at compile time, when %SOME_CONFIG still hasn't been populated, so you need to define it in a BEGIN block. You still need to declare it outside the block, though, to make it accessible in the use clause:</p>\n\n<pre><code>my %SOME_CONFIG;\nBEGIN {\n    %SOME_CONFIG = ( field =&gt; 'and its value' );\n}\n</code></pre>\n\n<p>Simplified as ikegami suggested:</p>\n\n<p>In Helper.pm, just do</p>\n\n<pre><code>%helpers = @_;\n</code></pre>\n\n<p>instead of the <code>for my $hashref</code>. In the main program, use</p>\n\n<pre><code>use Helper(\n    \\%SOME_CONFIG,\n    first_helpers =&gt; [\n        \\&amp;do_something,\n        \\&amp;do_something_else,\n    ],\n    second_helpers =&gt; [\n        sub {\n            warn \"Inside the 2nd helper\";\n        },\n    ],\n);\n</code></pre>\n"}], "owner": {"reputation": 565, "user_id": 5026330, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-7PNIbZa6ycw/AAAAAAAAAAI/AAAAAAAAADA/tOhkqIJQUrQ/photo.jpg?sz=128", "display_name": "TheAschr", "link": "https://stackoverflow.com/users/5026330/theaschr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 47723298, "answer_count": 2, "score": 1, "last_activity_date": 1512780507, "creation_date": 1512771783, "last_edit_date": 1512772170, "question_id": 47723031, "link": "https://stackoverflow.com/questions/47723031/pass-multiple-variables-to-module", "title": "pass multiple variables to module", "body": "<p>I can't seem to get to figure out how to pass hashrefs to a module correctly.</p>\n\n<pre><code>#module helper.pm    \n\nmy %helpers;\n\nsub import {\n    shift @_; #returns \"helper\"\n    %SOME_CONFIG = %{shift @_};\n    foreach my $hashref (%{@_}){\n        $helpers{$hashref-&gt;{key}} = $hashref-&gt;{value};\n    }\n}\n\n#main\n\nuse helper(\n    \\%SOME_CONFIG,\n    \"first_helper\" =&gt; (\n        sub {\n            return do_something();\n        },\n        sub {\n            return do_something_else();\n        }\n    ),\n    \"second_helper\" =&gt; (\n        sub {\n            return something_else();\n        }\n    )\n);\n</code></pre>\n\n<p>I'm not sure how to convert the array to a hash correctly. I thought it work because the anonymous function are passed as references. However it still indexes over @_ as if it is an array and the keys become the indexes of @_.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1512768701, "post_id": 47722404, "comment_id": 82405464, "body": "<code>my</code> is used to <i>define</i> a variable. Do this only once. When you <i>use</i> it you don&#39;t need the <code>my</code>. Simply write <code>$count[$x]++;</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512768733, "post_id": 47722404, "comment_id": 82405480, "body": "@PerlDuck: I&#39;d say &quot;declare&quot; rather than &quot;define&quot;, but yes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512772193, "post_id": 47722404, "comment_id": 82406868, "body": "&quot;<code>my</code> creates a new variable&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "edited": false, "score": 0, "creation_date": 1512777780, "post_id": 47722487, "comment_id": 82408418, "body": "Thanks, I was messing around trying something different, those links helped a lot."}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 7, "last_activity_date": 1512768829, "creation_date": 1512768829, "answer_id": 47722487, "question_id": 47722404, "link": "https://stackoverflow.com/questions/47722404/perl-my-variable-x-masks-earlier-declaration-in-same-statement/47722487#47722487", "title": "perl my variable $x masks earlier declaration in same statement", "body": "<p>You are using <code>my</code> a little bit too often.</p>\n\n<p><code>my</code> is used to declare a variable, for the current scope (usually a block <code>{...}</code>).</p>\n\n<p>To <em>use</em> the variable, you don't need the <code>my</code>.</p>\n\n<p>So, in your first loop, do:</p>\n\n<pre><code>$count[ $x ]++;\n</code></pre>\n\n<p>In the second loop:</p>\n\n<pre><code>print \"$x: $count[ $x ]\\n\";\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/my.html\" rel=\"noreferrer\">perldoc -f my</a> and <a href=\"https://perldoc.perl.org/perlsub.html#Private-Variables-via-my()\" rel=\"noreferrer\">Private-Variables-via-my</a></p>\n"}], "owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 47722487, "answer_count": 1, "score": 1, "last_activity_date": 1512768829, "creation_date": 1512768469, "question_id": 47722404, "link": "https://stackoverflow.com/questions/47722404/perl-my-variable-x-masks-earlier-declaration-in-same-statement", "title": "perl my variable $x masks earlier declaration in same statement", "body": "<p>I am confused on this error, this program takes user input 1 2 3 2 and displays the input in a <em>specific order</em>.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nprint \"Enter a number :\";\n\nmy $num = &lt;STDIN&gt;;\nchomp($num);\n\nmy @final = split(' ',$num);\nmy @count;\nforeach my $x (@final){\n\n $count[my $x]++;\n\n}\nforeach my $x (@count){\n\nprint my $x .$count[my $x];\n}\n</code></pre>\n\n<p>my output : I get this error \n<strong>\"my\" variable $x masks earlier declaration in same statement at line 19</strong></p>\n\n<p>Expected output:</p>\n\n<ul>\n<li>1 1</li>\n<li>2 2</li>\n<li>3 1</li>\n</ul>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1512768818, "post_id": 47722347, "comment_id": 82405515, "body": "Ahhhh.. So, blindly copy the docs, and calling the <code>strptime</code> as an class method is the source of the problem. :( I wasn&#39;t realised, that I should (and could) call it as obj.method on the <code>localtime</code> and <code>gmtime</code> - and thinking about <i>what is the <code>now</code></i> (as you commented). It is so simple, when someone clearly explains it.. :) :) Thank you very much!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 2, "creation_date": 1512769096, "post_id": 47722347, "comment_id": 82405623, "body": "Time::Piece-&gt;strptime (or gmtime-&gt;Time::Piece) causes the resulting object is marked as UTC dt. localtime-&gt;strptime marks it as a local dt. The ability to do <code>localtime-&gt;strptime</code> is rather new, and this behaviour is undocumented, but it&#39;s the only way without messing with internals."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1512852324, "post_id": 47722347, "comment_id": 82426561, "body": "The hack is been around for a while:  <a href=\"https://stackoverflow.com/a/22678705/1733163\">stackoverflow.com/a/22678705/1733163</a>   Wish they&#39;d just document this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1512852671, "post_id": 47722347, "comment_id": 82426674, "body": "@Miller, Most people use 5.14 and the Time::Piece that comes with it, which is older than that post."}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1512865451, "post_id": 47722347, "comment_id": 82429749, "body": "@ikegami <i>nod</i>.  That post was using Perl 5.10.1.  I never bothered doing a comprehensive inventory of version support though."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1512774174, "last_edit_date": 1512774174, "creation_date": 1512768209, "answer_id": 47722347, "question_id": 47721732, "link": "https://stackoverflow.com/questions/47721732/timepiece-localtime-gmtime-calculation-vs-bash-date/47722347#47722347", "title": "Time::Piece (localtime/gmtime) calculation vs bash date", "body": "<p>Both <code>localtime()</code> and <code>gmtime()</code> return an object that represents <em>now</em>.</p>\n\n<hr>\n\n<p>You are doing:   </p>\n\n<pre><code>2017-12-08T22:00:00+00:00 - 2017-12-08T21:25:25+01:00   # $tf-localtime()\n2017-12-08T22:00:00+00:00 - 2017-12-08T20:25:25+00:00   # $tf-gmtime()\n</code></pre>\n\n<p>It looks like you want to do</p>\n\n<pre><code>2017-12-08T22:00:00+01:00 - 2017-12-08T21:25:25+01:00\n</code></pre>\n\n<hr>\n\n<p>Using Time::Piece:</p>\n\n<pre><code>use Time::Piece qw( localtime );\n\nmy $future_str = 'Dec 08 2017 23:00:00';\n\nmy $format = '%b %d %Y %H:%M:%S';\n\nmy $future_dt = localtime-&gt;strptime($future_str, $format);\nsay $future_dt - localtime();  # 2241 (instead of 5841)\n</code></pre>\n\n<hr>\n\n<p>Using DateTime:</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $future_str = 'Dec 08 2017 23:00:00';\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n   pattern   =&gt; '%b %d %Y %H:%M:%S',\n   locale    =&gt; 'en',\n   time_zone =&gt; 'local',\n   on_error  =&gt; 'croak',\n);\n\nmy $future_dt = $format-&gt;parse_datetime($future_str);\nsay $future_dt-&gt;epoch - time();  # 2241 (instead of 5841)\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 1, "accepted_answer_id": 47722347, "answer_count": 1, "score": 4, "last_activity_date": 1512774174, "creation_date": 1512765108, "last_edit_date": 1512766827, "question_id": 47721732, "link": "https://stackoverflow.com/questions/47721732/timepiece-localtime-gmtime-calculation-vs-bash-date", "title": "Time::Piece (localtime/gmtime) calculation vs bash date", "body": "<p>Have this <code>bash</code> script:</p>\n\n<pre><code>future=\"${1:-Dec 08 2017 22:00:00}\"\nt1=$(date -j -f \"%b %d %Y %H:%M:%S\" \"$future\" +%s)  #using OS X\nt0=$(date +%s)\n\necho \"Current: $(date)\"\necho \"Future : $future\"\necho \"Diff   : $(( $t1 - $t0 )) secs\"\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>Current: pi   8. december 2017 21:25:25 CET\nFuture : Dec 08 2017 22:00:00\nDiff   : 2075 secs\n</code></pre>\n\n<p>The result (diff) is correct.</p>\n\n<p>Now trying to do the same using perl:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $format = '%b %d %Y %H:%M:%S';\n\nmy $future = shift // 'Dec 08 2017 22:00:00';\nsay \"Future: $future\";\n\nsay \"localtime: \", scalar localtime();\nsay \"gmtime   : \", scalar gmtime();\n\nmy $tf = Time::Piece-&gt;strptime($future, $format);\nsay 'localtime-diff : ', $tf-localtime();\nsay 'gmtime-diff    : ', $tf-gmtime();\n</code></pre>\n\n<p>it prints</p>\n\n<pre><code>Future: Dec 08 2017 22:00:00\nlocaltime: Fri Dec  8 21:27:45 2017  #correct\ngmtime   : Fri Dec  8 20:27:45 2017  #correct\nlocaltime-diff : 5535 #incorrect (expecting 3600 secs less)\ngmtime-diff    : 5535 #ok\n</code></pre>\n\n<p>What is wrong? Mean, why it prints the same diff for the <code>localtime</code> and <code>gmtime</code> but the <code>scalar localtime</code> and <code>scalar gmtime</code> prints different (and correct) strings?</p>\n\n<p>EDIT: So, the main question is: how to get the same result as in bash using perl?</p>\n"}, {"tags": ["perl", "programming-languages"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512755475, "post_id": 47719174, "comment_id": 82399753, "body": "<i>&quot;you should probably include an explicit <code>return</code>&quot;</i> <code>return</code> is for non-Perl languages! I think it is clearer (and briefer) just to evaluate the list that is to be returned in the final statement of the subroutine. In older perls it slowed things down to add <code>return</code>, and we&#39;re happy to put just <code>1;</code> at the end of a module instead of <code>return 1;</code>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1512755892, "post_id": 47719174, "comment_id": 82399961, "body": "From the book <code>Learning perl (6th) p.74</code>: <i>Some programmers like to use return every time there\u2019s a return value, as a means of documenting that it is a return value.  You don\u2019t really need it, but it doesn\u2019t hurt anything either. However, many Perl programmers believe it\u2019s just an extra seven characters of typing.</i> :) I love perl books. :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1512753287, "creation_date": 1512753287, "answer_id": 47719174, "question_id": 47718928, "link": "https://stackoverflow.com/questions/47718928/in-perl-when-assigning-a-subroutines-return-value-to-a-variable-is-the-data-d/47719174#47719174", "title": "In perl, when assigning a subroutine&#39;s return value to a variable, is the data duplicated in memory?", "body": "<p>The subroutine returns the result of the last operation if you don't specify an explicit return. </p>\n\n<p><code>@return_value</code> is created separately from <code>@receiver</code> and the values are copied and the memory used by <code>@return_value</code> is released when it goes out of scope at subroutine exit. </p>\n\n<p>So yes - the memory used is duplicated.</p>\n\n<p>If you desperately want to avoid this, you can create an anonymous array once, and 'pass' a reference to it around:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nsub foo {\n    my $anon_array_ref = [ 1, 2 ];\n    return $anon_array_ref; \n}\n\nmy $results_from_foo = foo(); \n\nprint Dumper $results_from_foo;\n</code></pre>\n\n<p>This will usually be premature optimisation though, unless you know you're dealing with really big data structures. </p>\n\n<p>Note - you should probably include an explicit <code>return;</code> in your sub after the assignment, as it's good practice to make clear what you're doing. </p>\n"}, {"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 3, "creation_date": 1512759255, "post_id": 47720178, "comment_id": 82401518, "body": "So, this is an answer that assures me that I do <b>not</b> know perl at all (yet). :) Hovever, I like that here are such answers because they could help me understand deep-things (few years later) :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 1, "creation_date": 1512770241, "post_id": 47720178, "comment_id": 82406067, "body": "@amon, The stack can contain an AV (e.g. <code>push</code> expects the first item on the stack to be an AV), but subs can&#39;t return them. <code>@receiver</code> and <code>@return_value</code> aren&#39;t the same array, at least not without extra work: <code>perl -e&#39;use feature qw( declared_refs refaliasing say ); my \\@a = sub { my @a; say \\@a; \\@a }-&gt;(); say \\@a;&#39;</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1512763189, "last_edit_date": 1512763189, "creation_date": 1512757510, "answer_id": 47720178, "question_id": 47718928, "link": "https://stackoverflow.com/questions/47718928/in-perl-when-assigning-a-subroutines-return-value-to-a-variable-is-the-data-d/47720178#47720178", "title": "In perl, when assigning a subroutine&#39;s return value to a variable, is the data duplicated in memory?", "body": "<p>The scalars returned by <code>:lvalue</code> subs aren't copied.</p>\n\n<p>The scalars returned by XS subs aren't copied.</p>\n\n<p>The scalars returned by function (named operators) aren't copied.</p>\n\n<p>The scalars returned by other subs are copied.</p>\n\n<p>But that's before any assignment comes into play. If you assign the returned values to a variable, you will be copying them (again, in the case of a normal Perl sub).</p>\n\n<p>This means <code>my $y = sub { $x }-&gt;();</code> copies <code>$x</code> twice!</p>\n\n<p>But that doesn't really matter because of optimizations.</p>\n\n<hr>\n\n<p>Let's start with an example of when they aren't copied.</p>\n\n<pre><code>$ perl -le'\n    sub f :lvalue { my $x = 123; print \\$x; $x }\n    my $r = \\f();\n    print $r;\n'\nSCALAR(0x465eb48)  # $x\nSCALAR(0x465eb48)  # The scalar on the stack\n</code></pre>\n\n<p>But if you remove <code>:lvalue</code>...</p>\n\n<pre><code>$ perl -le'\n    sub f { my $x = 123; print \\$x; $x }\n    my $r = \\f();\n    print $r;\n'\nSCALAR(0x17d0918)  # $x\nSCALAR(0x17b1ec0)  # The scalar on the stack\n</code></pre>\n\n<p>Worse, one usually follows up by assigning the scalar to a variable, so a second copy occurs.</p>\n\n<pre><code>$ perl -le'\n    sub f { my $x = 123; print \\$x; $x }\n    my $r = \\f();   # \\\n    print $r;       #  &gt; my $y = f();\n    my $y = $$r;    # /\n    print \\$y;\n'\nSCALAR(0x1802958)  # $x\nSCALAR(0x17e3eb0)  # The scalar on the stack\nSCALAR(0x18028f8)  # $y\n</code></pre>\n\n<p>On the plus side, assignment in optimized to minimize the cost of copying strings.</p>\n\n<p>XS subs and functions (named operators) typically return mortal (\"TEMP\") scalars. These are scalars \"on death row\". They will be automatically destroyed if nothing steps in to claim a reference to them.</p>\n\n<p>In older versions of Perl (&lt;5.20), assigning a mortal string to another scalar will cause ownership of the string buffer to be transferred to avoid having to copy the string buffer. For example, <code>my $y = lc($x);</code> doesn't copy the string created by <code>lc</code>; simply the string pointer is copied.</p>\n\n<pre><code>$ perl -MDevel::Peek -e'my $s = \"abc\"; Dump($s); $s = lc($s); Dump($s);'\nSV = PV(0x1705840) at 0x1723768\n  REFCNT = 1\n  FLAGS = (PADMY,POK,IsCOW,pPOK)\n  PV = 0x172d4c0 \"abc\"\\0\n  CUR = 3\n  LEN = 10\n  COW_REFCNT = 1\nSV = PV(0x1705840) at 0x1723768\n  REFCNT = 1\n  FLAGS = (PADMY,POK,pPOK)\n  PV = 0x1730070 \"abc\"\\0     &lt;-- Note the change of address from stealing\n  CUR = 3                        the buffer from the scalar returned by lc.\n  LEN = 10\n</code></pre>\n\n<p>In newer versions of Perl (&ge;5.20), the assignment operator never<sup>[1]</sup> copies the string buffer. Instead, newer versions of Perl uses a copy-on-write (\"COW\") mechanism.</p>\n\n<pre><code>$ perl -MDevel::Peek -e'my $x = \"abc\"; my $y = $x; Dump($x); Dump($y);'\nSV = PV(0x26b0530) at 0x26ce230\n  REFCNT = 1\n  FLAGS = (POK,IsCOW,pPOK)\n  PV = 0x26d68a0 \"abc\"\\0            &lt;----+\n  CUR = 3                                |\n  LEN = 10                               |\n  COW_REFCNT = 2                         +-- Same buffer (0x26d68a0)\nSV = PV(0x26b05c0) at 0x26ce248          |\n  REFCNT = 1                             |\n  FLAGS = (POK,IsCOW,pPOK)               |\n  PV = 0x26d68a0 \"abc\"\\0            &lt;----+\n  CUR = 3\n  LEN = 10\n  COW_REFCNT = 2\n</code></pre>\n\n<hr>\n\n<p>Ok, so far, I've only talked about scalars. Well, that's because subs and functions can only return scalars<sup>[2]</sup>.</p>\n\n<p>In your example, the scalar assigned to <code>@return_value</code> would be returned<sup>[3]</sup>, copied, then copied a second time into <code>@receiver</code> by the assignment.</p>\n\n<p>You could avoid all of this by returning a reference to the array.</p>\n\n<pre><code>sub f { my @fizbobs = ...; \\@fizbobs }\nmy $fizbobs = f();\n</code></pre>\n\n<p>The only thing copied there is a reference, the simplest non-undefined scalar.</p>\n\n<hr>\n\n<ol>\n<li><p>Ok, maybe not never. I think there needs to be a free byte in the string buffer to hold the COW count.</p></li>\n<li><p>In list context, they can return 0, 1 or many of them, but they can only return scalars.</p></li>\n<li><p>The last operator of your sub is a list assignment operator. In list context, the list assignment operator returns the scalars to which its left-hand side (LHS) evaluates. See <a href=\"http://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">Scalar vs List Assignment Operator</a> for more info.</p></li>\n</ol>\n"}], "owner": {"reputation": 329, "user_id": 6220622, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k660LyvhapM/AAAAAAAAAAI/AAAAAAAAA3o/rQZRmBHQlA0/photo.jpg?sz=128", "display_name": "nichijou", "link": "https://stackoverflow.com/users/6220622/nichijou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 1, "accepted_answer_id": 47720178, "answer_count": 2, "score": 5, "last_activity_date": 1548947665, "creation_date": 1512752416, "last_edit_date": 1548947665, "question_id": 47718928, "link": "https://stackoverflow.com/questions/47718928/in-perl-when-assigning-a-subroutines-return-value-to-a-variable-is-the-data-d", "title": "In perl, when assigning a subroutine&#39;s return value to a variable, is the data duplicated in memory?", "body": "<pre><code>sub foo {\n    my @return_value = (1, 2);\n}\nmy @receiver = foo();\n</code></pre>\n\n<p>Is this assigning like any other assigning in perl? the array is duplicated in memory? I doubt this cause of that since the array held by the subroutine is disposable, a duplication is totally redundant. it makes sense to just 'link' the array to @receiver for optimization reason.</p>\n\n<p>by the way, I noticed a similar question <a href=\"https://stackoverflow.com/questions/12862326/perl-function-returns-reference-or-copy\">Perl: function returns reference or copy?</a> but didn't get what I want.</p>\n\n<p>and I'm talking about Perl5</p>\n\n<p>ps. any books or materials on such sort of topics about perl?</p>\n"}, {"tags": ["macos", "perl", "directory", "macos-sierra"], "answers": [{"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1512744216, "post_id": 47716443, "comment_id": 82393367, "body": "no need to use xargs unless <code>-exec</code> doesn&#39;t provide a feature you want, for ex: parallel... see <a href=\"https://unix.stackexchange.com/questions/24954/when-is-xargs-needed\" title=\"when is xargs needed\">unix.stackexchange.com/questions/24954/when-is-xargs-needed</a> and also <a href=\"https://unix.stackexchange.com/questions/321697/why-is-looping-over-finds-output-bad-practice\" title=\"why is looping over finds output bad practice\">unix.stackexchange.com/questions/321697/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "is_accepted": false, "score": 0, "last_activity_date": 1512744016, "last_edit_date": 1512744016, "creation_date": 1512743699, "answer_id": 47716443, "question_id": 47716366, "link": "https://stackoverflow.com/questions/47716366/search-and-replace-a-word-in-directory-and-its-subdirectories/47716443#47716443", "title": "Search and replace a word in directory and its subdirectories", "body": "<p>Try that: </p>\n\n<pre><code>find -type f | xargs -r -I {} perl -pi -w -e 's/foo/bar/g;' {}\n</code></pre>\n\n<p>That should run recursively</p>\n\n<p>In case your file name contains space: </p>\n\n<pre><code>find -type f -print0 | xargs -r0 -I {} perl -pi -w -e 's/foo/bar/g;' {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1235, "user_id": 7162477, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7906d04337af3d14d369a76a552829f3?s=128&d=identicon&r=PG&f=1", "display_name": "Aristeidis Karavas", "link": "https://stackoverflow.com/users/7162477/aristeidis-karavas"}, "edited": false, "score": 0, "creation_date": 1512743939, "post_id": 47716481, "comment_id": 82393193, "body": "This my friend did the trick. Thank you very much! I am waiting now to mark this as the right answer. Thank you"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1512743802, "creation_date": 1512743802, "answer_id": 47716481, "question_id": 47716366, "link": "https://stackoverflow.com/questions/47716366/search-and-replace-a-word-in-directory-and-its-subdirectories/47716481#47716481", "title": "Search and replace a word in directory and its subdirectories", "body": "<p>You could do a pure Perl solution that recursively traverses your directory structure, but that'd require a lot more code to write.</p>\n\n<p>The easier solution is to use the <code>find</code> command which can be told to find all files and run a command against them.</p>\n\n<pre><code>find . -type f -exec perl -pi -w -e 's/foo/bar/g;' \\{\\} \\;\n</code></pre>\n\n<p>(I've escaped the {} and ; just in case but you might not need this)</p>\n"}], "owner": {"reputation": 1235, "user_id": 7162477, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7906d04337af3d14d369a76a552829f3?s=128&d=identicon&r=PG&f=1", "display_name": "Aristeidis Karavas", "link": "https://stackoverflow.com/users/7162477/aristeidis-karavas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1512745917, "accepted_answer_id": 47716481, "answer_count": 2, "score": 0, "last_activity_date": 1512745828, "creation_date": 1512743381, "last_edit_date": 1512745828, "question_id": 47716366, "link": "https://stackoverflow.com/questions/47716366/search-and-replace-a-word-in-directory-and-its-subdirectories", "closed_reason": "Duplicate", "title": "Search and replace a word in directory and its subdirectories", "body": "<p>I need to find and replace a word in all the files across a directory and its subdirectories.</p>\n\n<p>I used this line of code:</p>\n\n<pre><code>perl -pi -w -e 's/foo/bar/g;' *.*\n</code></pre>\n\n<p>But it changes the words only in files in the current directory and doesn't affect the subdirectories.</p>\n\n<p>How can I change the word on every directory and subdirectory?</p>\n"}, {"tags": ["python", "windows", "perl", "csv"], "comments": [{"owner": {"reputation": 1694, "user_id": 1024474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ga4mi.png?s=128&g=1", "display_name": "PhillipD", "link": "https://stackoverflow.com/users/1024474/phillipd"}, "edited": false, "score": 3, "creation_date": 1512737612, "post_id": 47714790, "comment_id": 82389576, "body": "I don&#39;t understand the algorithm/logic to map <code>08-jun-2017 00:00 to UP (ENG)</code> to <code>17W23D4 to UP (ENG)</code>."}, {"owner": {"reputation": 1638, "user_id": 8224694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cL5ki.jpg?s=128&g=1", "display_name": "Rob Anthony", "link": "https://stackoverflow.com/users/8224694/rob-anthony"}, "edited": false, "score": 2, "creation_date": 1512737696, "post_id": 47714790, "comment_id": 82389617, "body": "What have you tried? This is not a code-writing service."}, {"owner": {"reputation": 17, "user_id": 9072497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213f937db94ab0319050178633674d96?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/9072497/jay"}, "edited": false, "score": 0, "creation_date": 1512737760, "post_id": 47714790, "comment_id": 82389657, "body": "basically 08-jun-2017 00:00 should be changed to 23rd week and day 4 (Monday is 1st day of week) of year 2017"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1512740055, "last_edit_date": 1512740055, "creation_date": 1512737975, "answer_id": 47714932, "question_id": 47714790, "link": "https://stackoverflow.com/questions/47714790/change-format-of-date-column-in-csv/47714932#47714932", "title": "Change format of date column in CSV", "body": "<p>In Perl, you can use <a href=\"http://p3rl.org/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a>:</p>\n\n<pre><code>$ perl -MTime::Piece -wE '\n    $tp = Time::Piece-&gt;strptime(\"08-jun-2017 00:00\", \"%d-%b-%Y %H:%M\");\n    say $tp-&gt;yy, \"W\", $tp-&gt;week, \"D\", $tp-&gt;day_of_week'\n17W23D4\n</code></pre>\n\n<p>You first need to extract the date and time from the string, though.</p>\n\n<p>You can use <code>-F,</code> to split each line on commas into the @F array, then use a regex to extract the timestamp:</p>\n\n<pre><code>perl -MTime::Piece -F, -anE '\n    print, next if $. == 1;\n    ($timestring, $rest)\n        = pop(@F) =~ /([0-9]{2}-[a-z]{3}-[0-9]{4} [0-9]{2}:[0-9]{2})(.*)/;\n    $tp = Time::Piece-&gt;strptime($timestring, \"%d-%b-%Y %H:%M\");\n    say join \",\", @F, $tp-&gt;yy . \"W\" . $tp-&gt;week . \"D\" . $tp-&gt;day_of_week . $rest;\n' -- input.csv\n</code></pre>\n\n<p>IIRC, on MSWin you need to switch single and double quotes.</p>\n\n<p>See <a href=\"http://p3rl.org/pop\" rel=\"nofollow noreferrer\">pop</a>, <a href=\"http://p3rl.org/perlre\" rel=\"nofollow noreferrer\">perlre</a>, <a href=\"http://p3rl.org/join\" rel=\"nofollow noreferrer\">join</a> for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "is_accepted": false, "score": -1, "last_activity_date": 1512746029, "creation_date": 1512746029, "answer_id": 47717112, "question_id": 47714790, "link": "https://stackoverflow.com/questions/47714790/change-format-of-date-column-in-csv/47717112#47717112", "title": "Change format of date column in CSV", "body": "<p><strong>I want to convert the data with name <code>Column_date</code></strong></p>\n\n<p>The following <strong>Python</strong> solution is based on <a href=\"https://docs.python.org/3/library/datetime.html\" rel=\"nofollow noreferrer\"><code>datetime</code> \u2014 Basic date and time types</a> documentation. Please scroll down to <a href=\"https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\"><code>strftime()</code>\u00a0and\u00a0<code>strptime()</code>\u00a0Behavior</a> section for meaning of <code>%y</code>, <code>%V</code>, <code>%u</code>, \u2026 directives:</p>\n\n<pre><code>^^&gt; python\nPython 3.5.1 (v3.5.1:37a07cee5969, Dec  6 2015, 01:54:25) [MSC v.1900 64 bit (AMD64)]\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt;\n&gt;&gt;&gt; ColDateOld = '08-jun-2017 00:00'   ### extract from `CSV`\n&gt;&gt;&gt; ColDateNew = datetime.strptime(ColDateOld, '%d-%b-%Y %H:%M').strftime(\"%yW%VD%u\")\n&gt;&gt;&gt; print( ColDateNew)                 ### populate the result\n17W23D4\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Read and follow <a href=\"https://docs.python.org/3.5/library/csv.html?highlight=csv\" rel=\"nofollow noreferrer\">CSV File Reading and Writing</a> as well.</p>\n"}], "owner": {"reputation": 17, "user_id": 9072497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213f937db94ab0319050178633674d96?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/9072497/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512746029, "creation_date": 1512737385, "last_edit_date": 1512743025, "question_id": 47714790, "link": "https://stackoverflow.com/questions/47714790/change-format-of-date-column-in-csv", "title": "Change format of date column in CSV", "body": "\n\n<p>I have CSV file with the following format </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Column_a,Column_b,Column_c,Column_date\na,b,c,08-jun-2017 00:00 to UP (ENG)\n</code></pre>\n\n<p>I want to convert the data with name <code>Column_date</code></p>\n\n<p>Example: <code>08-jun-2017 00:00 to UP (ENG)</code> should be converted to <code>17W23D4 to UP (ENG)</code></p>\n\n<p>The format is year within century <code>17</code>; week of year <code>W23</code>; day of week <code>D4</code>. The days go from Monday (1) to Sunday (7).</p>\n\n<p>So the final CSV should look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Column_a,Column_b,Column_c,Column_date\na,b,c,17W23D4 to UP (ENG)\n</code></pre>\n\n<p>It would be great if can do in a <code>.bat</code> file, but another scripting language is also okay.</p>\n"}, {"tags": ["perl", "variables", "for-loop", "scripting"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9072251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565ccf812b8b6c0268c97b030ef15b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jsjw97", "link": "https://stackoverflow.com/users/9072251/jsjw97"}, "edited": false, "score": 0, "creation_date": 1512734067, "post_id": 47713778, "comment_id": 82387557, "body": "Thanks for this. Apologies for being a novice with this - but could you explain the use of hashes here? &amp; How is the variable being stored?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512734081, "post_id": 47713778, "comment_id": 82387569, "body": "Obligatory &quot;symbolic references are a <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">bad idea</a> link"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512734179, "post_id": 47713778, "comment_id": 82387623, "body": ".... actually the syntax on that <code>ssh</code> command looks a bit weird. SHould that be <code>$hostnames</code> rather than <code>%hostnames</code>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1512734215, "post_id": 47713778, "comment_id": 82387636, "body": "<a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a> tells you about hashes and what they do."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512734969, "post_id": 47713778, "comment_id": 82388075, "body": "@Sobrique \u2014 Yes, typo. Fixed."}, {"owner": {"reputation": 65, "user_id": 9072251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565ccf812b8b6c0268c97b030ef15b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jsjw97", "link": "https://stackoverflow.com/users/9072251/jsjw97"}, "edited": false, "score": 0, "creation_date": 1512736051, "post_id": 47713778, "comment_id": 82388678, "body": "I still don&#39;t think this answers my question - I need to ssh using a value from the array. I then want to save the output of the command that I run over the ssh connection in a variable that is named with the convention you&#39;ve shown in the hash. I&#39;m just not seeing how the hash key host01_backup (for example) is being assigned the value of the output of the ssh command?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 65, "user_id": 9072251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565ccf812b8b6c0268c97b030ef15b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jsjw97", "link": "https://stackoverflow.com/users/9072251/jsjw97"}, "edited": false, "score": 0, "creation_date": 1512736508, "post_id": 47713778, "comment_id": 82388923, "body": "@jsjw97 \u2014 You didn&#39;t mention that before, and there was no sign of anything being assigned in the question. I&#39;ll edit."}, {"owner": {"reputation": 65, "user_id": 9072251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565ccf812b8b6c0268c97b030ef15b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jsjw97", "link": "https://stackoverflow.com/users/9072251/jsjw97"}, "edited": false, "score": 0, "creation_date": 1512740710, "post_id": 47713778, "comment_id": 82391301, "body": "Cheers for that - I put a small comment next to my snippets, but might have been hidden as you have to scroll to it.. I&#39;ll mark as solved."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1512736599, "last_edit_date": 1512736599, "creation_date": 1512733522, "answer_id": 47713778, "question_id": 47713711, "link": "https://stackoverflow.com/questions/47713711/creating-variable-names-using-the-contents-of-another-variable/47713778#47713778", "title": "Creating variable names using the contents of another variable", "body": "<p>Do not create dynamically named variables. They are far more trouble then they are worth. We have arrays and hashes which are designed for this.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nmy @hosts = get_hosts();\nmy %hostnames = (\n    host01_backup =&gt; \"some value\",\n    host02_backup =&gt; \"some value\",\n)\nforeach my $hostname (@hosts) {\n    say \"hostname is: $hostname\";\n    ssh($hostnames{\"host\" . $hostname . \"_backup\"}, $cmd);\n}\n</code></pre>\n\n<blockquote>\n  <p>I then want to save the output of the command that I run over the ssh connection in a variable that is named with the convention you've shown in the hash</p>\n</blockquote>\n\n<p>This is the synopsis of <a href=\"https://metacpan.org/pod/Net::SSH::Perl\" rel=\"nofollow noreferrer\">Net::SSH::Perl</a>:</p>\n\n<pre><code>use Net::SSH::Perl;\nmy $ssh = Net::SSH::Perl-&gt;new($host);\n$ssh-&gt;login($user, $pass);\nmy($stdout, $stderr, $exit) = $ssh-&gt;cmd($cmd);\n</code></pre>\n\n<p>So you have the output from that in some variables.</p>\n\n<p>You can store them in the hash (previously created with <code>my %ssh_output</code>) with:</p>\n\n<pre><code>$ssh_output{$hostname} = $stdout;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9072251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565ccf812b8b6c0268c97b030ef15b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jsjw97", "link": "https://stackoverflow.com/users/9072251/jsjw97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1512735765, "accepted_answer_id": 47713778, "answer_count": 1, "score": -2, "last_activity_date": 1512736599, "creation_date": 1512733277, "question_id": 47713711, "link": "https://stackoverflow.com/questions/47713711/creating-variable-names-using-the-contents-of-another-variable", "closed_reason": "Duplicate", "title": "Creating variable names using the contents of another variable", "body": "<p>I have a simple foreach loop in Perl that logs into a few different remote hosts and runs a command which returns a numeric value. I want to save this value to a variable. The variable will be named after the individual hostnames (which are being looped through), \nlike below:</p>\n\n<p><strong>host01_backup</strong></p>\n\n<p><strong>host02_backup</strong></p>\n\n<p>etc...</p>\n\n<p>Therefore my question - is it possible to do this within the loop.</p>\n\n<pre><code>foreach $i (@hosts) {\n  print \"hostname is: $i \\n\";\n  ssh(\"ins\\@$i\", \"$cmd\"); # this is where I want to assign a variable which is part named using the contents of $i (hostname).\n</code></pre>\n\n<p>Cheers in advance!</p>\n"}, {"tags": ["perl", "module", "file-handling"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512731258, "post_id": 47712994, "comment_id": 82386050, "body": "How big is <code>bed_in.txt</code> in reality?"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 3, "creation_date": 1512731297, "post_id": 47712994, "comment_id": 82386077, "body": "A module should usually not open a file with a static path, that&#39;s why it&#39;s called module. It&#39;s supposed to be usable in different contexts.Additionally it should not open a file in the body (at compile time), but only when a method/subroutine is called. Otherwise it&#39;s not quite testable."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512731376, "post_id": 47712994, "comment_id": 82386124, "body": "@Borodin 21154 lines"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512731828, "post_id": 47712994, "comment_id": 82386342, "body": "The reason you are seeing only one value checked is because the first call to <code>filter_lines</code> reads the file to the end. Subsequent calls find the file handle at eof so there is nothing to read and the <code>while</code> is never executed again. You could open the file in <code>filter_lines</code> to fix that, but if there are always multiple values to be tested then that&#39;s very inefficient. I&#39;d be inclined to make this an object-oriented module anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512731980, "post_id": 47712994, "comment_id": 82386420, "body": "What is your required output for this code? Is the <code>Filter as equal</code> output just debugging code?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732042, "post_id": 47712994, "comment_id": 82386442, "body": "@Borodin Aha! OK, that&#39;s obviously the reason then. I&#39;m a little confused as to why the while statement&#39;s not executed for each line"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732305, "post_id": 47712994, "comment_id": 82386590, "body": "@Borodin The expected output for element 1 of <code>@lines</code> is an array with <code>[&#39;reason 1&#39;, &#39;Filter as equal: 16204, 16204 [2L   16204   16284]&#39;]</code>. All other lines should return an array with <code>[&#39;reason 1&#39;]</code> except the second line I highlight as matching, which should return: <code>[&#39;reason 1&#39;, &#39;Filter as equal: 19445, 19445 [2L      19445   19635]&#39;]</code>"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732385, "post_id": 47712994, "comment_id": 82386631, "body": "@Borodin - I then filter all <code>@lines</code> where  <code>scalar @{$filter_reasons} != 0</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732437, "post_id": 47712994, "comment_id": 82386663, "body": "Is there a reason for <code>@filter_reasons</code> being an array? Can you filter for multiple reasons at once? What should the result be in that case?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732617, "post_id": 47712994, "comment_id": 82386760, "body": "@Borodin - not strictly speaking, no. It allows me to inspect why a particular element is being filtered. I use this approach throughout my module, which except for this function, works as intended (although almost certainly not optimised for efficiency/memory)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732626, "post_id": 47712994, "comment_id": 82386765, "body": "Presumably you mean <code>@$lines2filter &gt; 1</code>? They will always contain at least the reason code."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732689, "post_id": 47712994, "comment_id": 82386802, "body": "@Borodin yes sorry - in this example that&#39;s the case"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512732720, "post_id": 47712994, "comment_id": 82386811, "body": "I don&#39;t see why using a simple scalar value prevents you from inspecting why an element is being filtered."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512749783, "post_id": 47712994, "comment_id": 82396639, "body": "@fugu: <i>&quot;in this example that&#39;s the case&quot;</i> This worries me. Your use of <code>\\@filter_reasons</code> and <code>return(\\@filter)</code> when both arrays have only a single element is significant, and it&#39;s hard to be sure that an answer is useful when you&#39;re clearly withholding details. Your answer that a match <i>&quot;should return: <code>[&#39;reason 1&#39;, &#39;Filter as equal: 19445, 19445 [2L 19445 19635]&#39;]</code>&quot;</i> doesn&#39;t come close to what your code actually does."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1512734533, "creation_date": 1512734533, "answer_id": 47714019, "question_id": 47712994, "link": "https://stackoverflow.com/questions/47712994/where-to-open-file-in-a-perl-module/47714019#47714019", "title": "Where to open file in a Perl module", "body": "<p></p>\n\n<p>Here's how I would write this. As I said, I prefer an object-oriented solution</p>\n\n<p>The <code>new</code> constructor requires a file name as its parameter. It opens the file, reads the information into a hash, and blesses to make the object</p>\n\n<p>The only method is <code>check_lines</code>, which expects a value and a reason string. It simply interrogates the hash for the given value and returns a one- or two-element array according to whether the value was found</p>\n\n<p>It is best to limit the scope of this object as otherwise the hash will be kept in memory after it is required. So I've enclosed all the operations that require the object in a block. The object will be automatically destroyed when it goes out of scope at the end of the block</p>\n\n<h3>BedInFilter.pm</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package BedInFilter;\n\nuse strict;\nuse warnings 'all';\n\nuse Carp 'croak';\n\nsub new {\n    my $class = shift;\n    my ( $bed_file ) = @_;\n\n    my %self;\n\n    open my $fh, '&lt;', $bed_file\n            or croak qq{Unable to open \"$bed_file\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n\n        next unless /\\S/;\n        chomp;\n\n        my $val = ( split )[1];\n        $self{$val} = $_;\n    }\n\n    bless \\%self, $class;\n}\n\nsub check_lines {\n    my $self = shift;\n    my ( $val, $reason ) = @_;\n\n    my $result = [ $reason ];\n\n    my $line = $self-&gt;{$val};\n\n    push @$result, \"Filter as equal: $val, $val [$line]\" if $line;\n\n    $result;\n}\n\n1;\n</code></pre>\n\n<h3>bed_in.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse BedInFilter;\n\nmy @values = qw/ 16204 40 200 149 19445 178 /;\n\n{\n    my $filter = BedInFilter-&gt;new( 'bed_in.txt' );\n\n    for my $val ( @values ) {\n\n        my $reason = 'reason1';\n\n        my $result = $filter-&gt;check_lines( $val, $reason );\n\n        print \"@$result\\n\";\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>reason1 Filter as equal: 16204, 16204 [2L      16204   16284]\nreason1\nreason1\nreason1\nreason1 Filter as equal: 19445, 19445 [2L      19445   19635]\nreason1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1512739596, "creation_date": 1512739596, "answer_id": 47715334, "question_id": 47712994, "link": "https://stackoverflow.com/questions/47712994/where-to-open-file-in-a-perl-module/47715334#47715334", "title": "Where to open file in a Perl module", "body": "<p>A module should open and close files in the same subroutine unless the name of the sub has \"open\" in it, in which case, it should return a file handle as one of its return values. And there should be a corresponding \"close\" sub to match every \"open\" sub.</p>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1512750385, "creation_date": 1512730813, "last_edit_date": 1512750385, "question_id": 47712994, "link": "https://stackoverflow.com/questions/47712994/where-to-open-file-in-a-perl-module", "title": "Where to open file in a Perl module", "body": "<p></p>\n\n<p>Below is a toy version of a module I'm writing. This example faithfully demonstrates the problem I having. </p>\n\n<p>I have a file <code>bed_in.txt</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2L      0       4953\n2L      16204   16284\n2L      16612   16805\n2L      17086   18561\n2L      18757   18758\n2L      19040   19120\n2L      19445   19635\n2L      19894   21366\n2L      21582   21583\n2L      47501   52365\n2L      4698700 4709369\n</code></pre>\n\n<p>that I want to use to filter values in an array.</p>\n\n<p>I want to check whether the second column of <code>bed_in.txt</code> matches any value in</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my @lines = qw/ 16204 40 200 149 19445 178 /;\n</code></pre>\n\n<p>push <em>this</em> to an array if so.</p>\n\n<p>My final output for this data should be the two elements in <code>@lines</code> that are also in the second column of <code>bed_in.txt</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2L      0       4953\n2L      16204   16284 # 16204 == 16204\n2L      16612   16805\n2L      17086   18561\n2L      18757   18758\n2L      19040   19120\n2L      19445   19635 # 19445 == 19445\n</code></pre>\n\n<p>But where should I open my file?</p>\n\n<p>Should this happen in the script that calls my module <code>run_fileOpen.pl</code>, or in the module itself? </p>\n\n<p>In either case, I am not getting the correct output, and my module appears to be called for only the first element of <code>@lines</code></p>\n\n<h3>parseFile.pm</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\npackage parseFile;\nuse strict;\nuse warnings;\n\nuse FindBin qw/ $Bin /;\nuse lib File::Spec-&gt;catdir($FindBin::Bin, '..', 'bin/');\n\nuse Data::Printer;\n\nopen my $bed, '&lt;', 'bed_in.txt';\n\nsub check_lines {\n  my ($line, $filter_ref) = @_;\n  my @filter_reasons = @{ $filter_ref };\n\n  my $lines_to_filter_ref = filter_lines($line, $bed, \\@filter_reasons);\n\n  return($lines_to_filter_ref);\n}\n\n\nsub filter_lines {\n  my ($line, $bed_file, $lines_to_filter) = @_;\n\n  my @filter = @{ $lines_to_filter };\n\n  while(&lt;$bed_file&gt;){\n    chomp;\n    my $start = (split)[1];\n    # print \"line: $line  start: $start\\n\";\n    if ($line == $start ) {\n\n      push @filter, \"Filter as equal: $start, $line [$_]\";\n    }\n  }\n  # p(@filter);\n  return(\\@filter);\n}\n\n\n1;\n</code></pre>\n\n<h3>run_parseFile.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse parseFile;\n\n\nmy @lines = qw/ 16204 40 200 149 19445 178 /;\n\nforeach(@lines){\n  my @filter_reasons = 'reason 1';\n  my $lines2filter = parseFile::check_lines($_, \\@filter_reasons);\n  @filter_reasons = @{ $lines2filter };\n  print \"$_\\n\" foreach @filter_reasons;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>reason 1\nFilter as equal: 16204, 16204 [2L   16204   16284]\nreason 1\nreason 1\nreason 1\nreason 1\nreason 1\n</code></pre>\n\n<p>When I add a <code>print</code> statement to the <code>while</code> loop in <code>filter_lines</code> I can see that only the first element is being run: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>line: 16204  start: 0\nline: 16204  start: 16204\nline: 16204  start: 16612\nline: 16204  start: 17086\nline: 16204  start: 18757\nline: 16204  start: 19040\nline: 16204  start: 19445\nline: 16204  start: 19894\nline: 16204  start: 21582\nline: 16204  start: 47501\nline: 16204  start: 4698700\n</code></pre>\n\n<p>Is this an appropriate way to deal with opening my <code>bed_in.txt</code> file, or should I open it in the <code>run_parseFile.pl</code> script? Or is there something else entirely wrong with my code? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 2, "creation_date": 1512695681, "post_id": 47706261, "comment_id": 82372757, "body": "I think you&#39;re just looking for <code>push @array, { path =&gt; ... }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "is_accepted": false, "score": 0, "last_activity_date": 1512695996, "creation_date": 1512695996, "answer_id": 47706354, "question_id": 47706261, "link": "https://stackoverflow.com/questions/47706261/create-an-array-of-hashes-describing-files-obtained-from-a-given-directory/47706354#47706354", "title": "Create an array of hashes describing files obtained from a given directory", "body": "<p>You have all the code, you are creating an array with the first element. Your way to dereference that hints at an easy way to add others:</p>\n\n<pre><code>my $i = 0;\nwhile(my $file = readdir DIR) {\n        next unless(-f \"${\\File::Spec-&gt;catfile($dir, $file)}\");\n        next if(\"$file\" =~ m/^\\./);\n        print \"${\\File::Spec-&gt;rel2abs($file)}\\n\";\n        $fileref[$i]{path} = File::Spec-&gt;rel2abs($file);\n        $fileref[$i]{size} = -s $fileref[0]{path};\n        $fileref[$i]{id} = sha256_hex(fileref[0]{path});\n        $i++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1512699887, "post_id": 47706406, "comment_id": 82373680, "body": "Your code is pretty good, so I think you would benefit a lot by submitting it to Stack Overflow&#39;s <a href=\"https://codereview.stackexchange.com\"><i>Code Review</i></a>. In particular, it is best to use <i>lexical</i> file and directory handles, <code>&quot;${\\File::Spec-&gt;catfile($dir, $file)}&quot;</code> is much cleaner as <code>File::Spec-&gt;catfile($dir, $file)</code>, and <code>&quot;$file&quot;</code> should be <code>$file</code>. There is more, but a comment is not the place to identify or explain it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1512724221, "post_id": 47706406, "comment_id": 82381780, "body": "Personally I favour <code>glob</code> over <code>readdir</code> for most applications."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1512739779, "post_id": 47706406, "comment_id": 82390768, "body": "@Sobrique <code>glob</code> is PBP (Perl Best Practice). It should always be the preferred technique."}], "tags": [], "owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "is_accepted": true, "score": 2, "last_activity_date": 1512696550, "creation_date": 1512696550, "answer_id": 47706406, "question_id": 47706261, "link": "https://stackoverflow.com/questions/47706261/create-an-array-of-hashes-describing-files-obtained-from-a-given-directory/47706406#47706406", "title": "Create an array of hashes describing files obtained from a given directory", "body": "<p>Thanks to Wumpus Q. Wumbley's <code>push</code> suggestion, I have solved my problem:</p>\n\n<pre><code>my @array;\nopendir DIR, $dir or die \"cannot open dir $dir: $!\";\nwhile(my $file = readdir DIR) {\n    next unless(-f \"${\\File::Spec-&gt;catfile($dir, $file)}\");\n    next if(\"$file\" =~ m/^\\./);\n    #print \"${\\File::Spec-&gt;rel2abs($file)}\\n\";\n\n    my  %hash = (\n        path    =&gt;  File::Spec-&gt;rel2abs($file),\n        size    =&gt;  -s $file,\n        id      =&gt;  sha256_hex($file),\n    );\n\n    push(@array, \\%hash);\n\n    #print Dumper sort \\@array;\n}\nclosedir DIR;\n\nprint Dumper \\@array;\n</code></pre>\n\n<p>I create the \"frame\" for the hash, and then pass it to the array via reference and the <code>push</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1512702977, "last_edit_date": 1512702977, "creation_date": 1512702090, "answer_id": 47707069, "question_id": 47706261, "link": "https://stackoverflow.com/questions/47706261/create-an-array-of-hashes-describing-files-obtained-from-a-given-directory/47707069#47707069", "title": "Create an array of hashes describing files obtained from a given directory", "body": "<p>Here's my approach to a solution. I've saved a lot of code by using <code>File::Spec::Functions</code> instead of <code>File::Spec</code>, and calling <code>rel2abs</code> only once</p>\n\n<p>I've also removed the labels, like <code>\"Full path: \"</code>, from the values in the hashes. There's no reason to put presentation strings in there: that's for the output code to do</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Spec::Functions qw/ catfile rel2abs /;\nuse Digest::SHA qw/ sha256_hex /;\nuse Data::Dumper qw/ Dumper /;\n\nmy ( $root ) = @ARGV;\n\n$root = rel2abs( $root );    # Allow for relative path input\n\nmy @file_data;\n\n{\n    opendir my $dh, $root or die qq{Cannot open directory \"$root\": $!};\n\n    while ( readdir $dh ) {\n\n        next if /^\\./;\n\n        my $file = catfile( $root, $_ );\n\n        next unless -f $file;\n\n        push @file_data, {\n            path =&gt; $file,\n            size =&gt; -s $file,\n            id   =&gt; sha256_hex( $file ),\n        };\n    }\n}\n\nprint Dumper \\@file_data;\n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 1136236, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c4f2b250d57a1ebf233426012487539?s=128&d=identicon&r=PG", "display_name": "Jonathan Dewein", "link": "https://stackoverflow.com/users/1136236/jonathan-dewein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47706406, "answer_count": 3, "score": 1, "last_activity_date": 1512702977, "creation_date": 1512695198, "last_edit_date": 1512700787, "question_id": 47706261, "link": "https://stackoverflow.com/questions/47706261/create-an-array-of-hashes-describing-files-obtained-from-a-given-directory", "title": "Create an array of hashes describing files obtained from a given directory", "body": "<p>I need to</p>\n\n<ol>\n<li><p>Read a list of the files from in a specified directory</p></li>\n<li><p>Create an array of hashes describing those files</p></li>\n</ol>\n\n<p>My program fetches the path to a directory from the command line, opens it and reads its contents. Directories and \"dot\" files are skipped, and the absolute path to every other entry is printed.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper qw(Dumper);\nuse File::Spec;\nuse Digest::SHA qw(sha256_hex);\n\nmy $dir = $ARGV[0];\n\nopendir DIR, $dir or die \"cannot open dir $dir: $!\";\n\nwhile ( my $file = readdir DIR ) {\n    next unless ( -f \"${ \\File::Spec-&gt;catfile($dir, $file) }\" );\n    next if ( \"$file\" =~ m/^\\./) ;\n    print \"${ \\File::Spec-&gt;rel2abs($file) }\\n\";\n}\n\nclosedir DIR;\n</code></pre>\n\n<p>Here I take a single file and create a hash with the path, size, and sha256sum.</p>\n\n<pre><code>my $file = \"file1.txt\";\n\nmy @fileref = (\n    {\n        path    =&gt;  \"Full path: \" . File::Spec-&gt;rel2abs($file),\n        size    =&gt;  \"Size (bytes): \" . -s $file,\n        id      =&gt;  \"SHA256SUM: \" . sha256_hex($file),\n    },\n);\n\nprint \"\\n\";\nprint \"$fileref[0]{path}\\n\";\nprint \"$fileref[0]{size}\\n\";\nprint \"$fileref[0]{id}\\n\";\n</code></pre>\n\n<p>All of this works, but I cannot figure out how to iterate over each file and add it to the array.</p>\n\n<p>This is what I planned</p>\n\n<pre><code>for each file\n    push file into array\n    add the path, size, and id key:value pairs to file\nrepeat\n</code></pre>\n\n<p>How can I generate the necessary array?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1512683833, "post_id": 47704072, "comment_id": 82369125, "body": "Have you looked at something like <a href=\"https://metacpan.org/pod/Scope::OnExit\" rel=\"nofollow noreferrer\"><code>Scope::OnExit</code></a>? This seems to implement precisely such cleanup functions. The XS code is surprisingly simple."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1512688015, "post_id": 47704072, "comment_id": 82370678, "body": "1. For the cleanup part, use <code>SAVEDESTRUCTOR_X</code>. See Scope::OnExit for an example. /// 2. If you still need something like the keyword plugin, you should use Devel::CallParser instead. The keyword plugin is rather broken. See Syntax::Feature::QwComments and/or Syntax::Feature::Loop for an example. (They also use Lexical::Sub, which is currently broken for threaded builds of perl, but that&#39;s not a requirement for Devel::CallParser. You could simply export a symbol like a normal instead of creating one that lexically scoped.)"}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "edited": false, "score": 0, "creation_date": 1513005566, "post_id": 47704072, "comment_id": 82472806, "body": "<code>Scope::OnExit</code> looks useful, and if nothing else, I can learn from studying the source.  Thanks."}, {"owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513006001, "post_id": 47704072, "comment_id": 82473089, "body": "@ikegami : <code>Devel::CallParser</code> might be just a bit over my head at this point.  I&#39;d like to study and learn it, though.  Thanks.  It is frustrating that a feature that was added some seven years ago is still marked experimental, and is apparently at least somewhat broken.  :-/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1513006567, "post_id": 47704072, "comment_id": 82473453, "body": "I don&#39;t know anything about Devel::CallParser being broken, and Devel::CallParser is actually easy to use. For example, just look at <a href=\"http://cpansearch.perl.org/src/IKEGAMI/Syntax-Feature-Loop-v1.8.0/lib/Syntax/Feature/Loop.xs\" rel=\"nofollow noreferrer\"><code>parse_loop</code></a>. It creates <code>loop BLOCK</code> (equivalent to <code>while (1) BLOCK</code>). The only complicated part is the opcode-tree building, which you&#39;d need to do no matter what method you use. <code>PL_keyword_plugin</code>, on the other hand, is nigh-impossible if not impossible to do right."}], "owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1512682015, "creation_date": 1512682015, "question_id": 47704072, "link": "https://stackoverflow.com/questions/47704072/making-non-local-changes-with-perl-keyword-api", "title": "Making non-local changes with Perl keyword API", "body": "<p>I am experimenting with writing a new keyword, via the <code>PL_keyword_plugin</code> mechanism.  The action of the keyword, however, won't be a simple code substitution at the point where the keyword is encountered in the source code.  I also need it to perform some cleanup action at the <em>end of the enclosing block in which the keyword occurs</em>.  In effect, I want to transform something like</p>\n\n<pre><code>{\n    ...\n    my_keyword;\n    ...\n}\n</code></pre>\n\n<p>into </p>\n\n<pre><code>{\n    ...\n    do_something();\n    ...\n    cleanup_something();\n}\n</code></pre>\n\n<p>My two questions are:</p>\n\n<p>a) Is this possible?</p>\n\n<p>b) Is this possible without opening up a humongous can of worms, like having to traverse the opcode tree to seek out the boundaries of the enclosing block as it is being parsed?</p>\n"}, {"tags": ["arrays", "perl", "perl-html-template"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1512680207, "creation_date": 1512680207, "answer_id": 47703645, "question_id": 47703545, "link": "https://stackoverflow.com/questions/47703545/perl-parentheses-vs-brackets-for-array-definition-why-is-one-considered-a-scal/47703645#47703645", "title": "Perl: Parentheses vs Brackets for array definition, why is one considered a scalar?", "body": "<pre><code>language =&gt; @rows \n</code></pre>\n\n<p>means </p>\n\n<pre><code>'language', $rows[0], $rows[1], $rows[2], ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>language =&gt; $rows[0],\n$rows[1] =&gt; $rows[2],\n...\n</code></pre>\n\n<p>You want</p>\n\n<pre><code>language =&gt; \\@rows\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "is_accepted": true, "score": 7, "last_activity_date": 1512681025, "creation_date": 1512681025, "answer_id": 47703836, "question_id": 47703545, "link": "https://stackoverflow.com/questions/47703545/perl-parentheses-vs-brackets-for-array-definition-why-is-one-considered-a-scal/47703836#47703836", "title": "Perl: Parentheses vs Brackets for array definition, why is one considered a scalar?", "body": "<p>The tutorial you're following contains an error.  The line</p>\n\n<pre><code>$template-&gt;param( language =&gt; @languages );\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>$template-&gt;param( language =&gt; \\@languages );\n</code></pre>\n\n<p>Why?  Short answer: the right-hand side of the loop name you pass to <code>param</code> must be a <em>reference</em> to an array, not an array.</p>\n\n<p>Long answer: When you pass arguments to a function or method, all of the arguments get expanded into one long list.  This is a common source of mistakes for beginners.  So in your code (and in the tutorial's code), you're not passing two parameters to the <code>param</code> method, you're passing <em>four</em> (one for the string 'language', and three for the elements of @languages.</p>\n\n<p>Here's an example of this argument-list unraveling.  If you have three variables as follows:</p>\n\n<pre><code>my $scalar = 'bear';\nmy @array  = ('rat', 'moose', 'owl');\nmy %hash   = (mass =&gt; 500, units =&gt; 'kg');\n</code></pre>\n\n<p>and you pass them to a function like so:</p>\n\n<pre><code>some_function($scalar, @array, %hash);\n</code></pre>\n\n<p>then the function will see <em>eight</em> arguments: <code>'bear'</code>, <code>'rat'</code>, <code>'moose'</code>, <code>'owl'</code>, <code>'mass'</code>, <code>500</code>, <code>'units'</code>, and <code>'kg'</code>!  Perhaps even more surprising, the two sets of values from the hash might be passed in a different order, because hashes are not stored or retrieved in a determinate order.</p>\n\n<p>Your solution of changing the parentheses to square brackets works, but not for a very good reason.  Parentheses delimit lists (which can be stored in arrays or hashes); square brackets delimit references to arrays.  So your square-bracket code creates a reference to an anonymous array, which is then stored as the first (and only) element of your named array <code>@rows</code>.  Instead, you should either store the array reference (delimited with square brackets) in a scalar variable (say, <code>$rows</code>), or you should use parentheses, store the list in the array <code>@rows</code>, and pass a reference to that array to the <code>param</code> method (by using a backslash, as I did above with <code>\\@languages</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 968, "user_id": 344162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/4bh9z.png?s=128&g=1", "display_name": "Gustavo Puma", "link": "https://stackoverflow.com/users/344162/gustavo-puma"}, "edited": false, "score": 0, "creation_date": 1513017338, "post_id": 47710688, "comment_id": 82479668, "body": "HTML::Template was the first result I stumbled upon. I did not know about TT, thanks for the heads-up."}, {"owner": {"reputation": 983, "user_id": 3419535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fc0329501359ea67262fd819afaf03?s=128&d=identicon&r=PG&f=1", "display_name": "FantomX1", "link": "https://stackoverflow.com/users/3419535/fantomx1"}, "edited": false, "score": 0, "creation_date": 1607350728, "post_id": 47710688, "comment_id": 115237002, "body": "Good response, but quite too long, me personally was interested mainly in &#39;This creates @rows an array with a single element which is a reference to your real array. This means that:&#39; part"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 983, "user_id": 3419535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fc0329501359ea67262fd819afaf03?s=128&d=identicon&r=PG&f=1", "display_name": "FantomX1", "link": "https://stackoverflow.com/users/3419535/fantomx1"}, "edited": false, "score": 1, "creation_date": 1607437424, "post_id": 47710688, "comment_id": 115267892, "body": "@FantomX1: &quot;I would have written a shorter letter, but I did not have the time.&quot; - Blaise Pascal :-)"}, {"owner": {"reputation": 983, "user_id": 3419535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fc0329501359ea67262fd819afaf03?s=128&d=identicon&r=PG&f=1", "display_name": "FantomX1", "link": "https://stackoverflow.com/users/3419535/fantomx1"}, "edited": false, "score": 0, "creation_date": 1607512136, "post_id": 47710688, "comment_id": 115293760, "body": "@DaveCross yeah your answer answers multiple, many things :) so initially it might not be obvious that it contains what a person is looking for specifically"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1512723175, "creation_date": 1512723175, "answer_id": 47710688, "question_id": 47703545, "link": "https://stackoverflow.com/questions/47703545/perl-parentheses-vs-brackets-for-array-definition-why-is-one-considered-a-scal/47710688#47710688", "title": "Perl: Parentheses vs Brackets for array definition, why is one considered a scalar?", "body": "<p>The <code>param()</code> method in HTML::Template takes pairs of arguments. The first value in the pair is the name of a template variable that you want to set and the second is the value that you want to set that variable to.</p>\n\n<p>So you can make a call that sets a single variable:</p>\n\n<pre><code>$template-&gt;param(foo =&gt; 1);\n</code></pre>\n\n<p>Or you can set multiple variables in one call:</p>\n\n<pre><code>$template-&gt;param(foo =&gt; 1, bar =&gt; 2, baz =&gt; 3);\n</code></pre>\n\n<p>For reasons that should be obvious, the variable names given in your call to <code>param()</code> should all be variables that are defined in your template (either as standard <code>tmpl_var</code> variables or as looping <code>tmpl_loop</code> variables).</p>\n\n<p>If you're setting a <code>tmpl_loop</code>  variable (as you are in this case) then the associated value needs to be a reference to an array containing your values. There is some attempt to explain this in <a href=\"https://metacpan.org/pod/HTML::Template#param\" rel=\"nofollow noreferrer\">the documentation for <code>param()</code></a>, but I can see how it might be unclear as it just does it by showing examples in square (array reference constructor) brackets rather than actually explaining the requirement.</p>\n\n<p>The reason for this is that the list of parameters passed to a subroutine in Perl is \"flattened\" - so an array is broken up into its individual elements. This means that when you pass:</p>\n\n<pre><code>$template-&gt;param(languages =&gt; @rows);\n</code></pre>\n\n<p>Perl sees it as:</p>\n\n<pre><code>$template-&gt;param(languages =&gt; $row[0], $row[1] =&gt; $row[2]);\n</code></pre>\n\n<p>The elements of your array are hash references. This means that <code>$row[1]</code> will be interpreted as a stringified hash reference (something like \"HASH(0x12345678)\") which definitely isn't the name of one of the variables in your template.</p>\n\n<p>So how do we fix this? Well, there are a few alternatives. You have stumbled over a bad one. You have used code like this:</p>\n\n<pre><code>@rows = [ ... ];\n</code></pre>\n\n<p>This creates <code>@rows</code> an array with a single element which is a reference to your real array. This means that:</p>\n\n<pre><code>$template-&gt;param(language =&gt; @rows);\n</code></pre>\n\n<p>is interpreted as:</p>\n\n<pre><code>$template-&gt;param(language =&gt; $rows[0]);\n</code></pre>\n\n<p>And as <code>$rows[0]</code> is a reference to your array, it all works.</p>\n\n<p>Far better would be to explicitly pass a reference to <code>@rows</code>.</p>\n\n<pre><code>@rows = ( ... ); # your original version\n\n$template-&gt;param(language =&gt; \\@rows);\n</code></pre>\n\n<p>Or to create an array reference, stored in a scalar.</p>\n\n<pre><code>$rows = [ ... ];\n\n$template-&gt;param(language =&gt; $rows);\n</code></pre>\n\n<p>There's really nothing to choose between these two options.</p>\n\n<p>However, I would ask you to consider why you are spending time teaching yourself HTML::Template. It has been many years since I have seen it being used. The <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow noreferrer\">Template Toolkit</a> seems to have become the de-facto standard Perl templating engine.</p>\n"}], "owner": {"reputation": 968, "user_id": 344162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/4bh9z.png?s=128&g=1", "display_name": "Gustavo Puma", "link": "https://stackoverflow.com/users/344162/gustavo-puma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2821, "favorite_count": 1, "accepted_answer_id": 47703836, "answer_count": 3, "score": 3, "last_activity_date": 1512723175, "creation_date": 1512679805, "question_id": 47703545, "link": "https://stackoverflow.com/questions/47703545/perl-parentheses-vs-brackets-for-array-definition-why-is-one-considered-a-scal", "title": "Perl: Parentheses vs Brackets for array definition, why is one considered a scalar?", "body": "<p>I was following <a href=\"https://www.sitepoint.com/introducing-html-template/\" rel=\"nofollow noreferrer\">this</a> tutorial on the HTML::Template module for Perl. Here's the template:</p>\n\n<pre><code>&lt;!--template2.tmpl--&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Language&lt;/th&gt;\n    &lt;th&gt;Description&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;tmpl_loop name=\"language\"&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;tmpl_var name=\"language_name\"&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;tmpl_var name=\"description\"&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;/tmpl_loop&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And here's the CGI test program:</p>\n\n<pre><code>#!\"C:\\Strawberry\\perl\\bin\\perl.exe\" -wT\nuse CGI qw(:all);\nuse CGI::Carp qw(fatalsToBrowser);\nuse HTML::Template;\n\nmy @rows = (\n  {\n    language_name =&gt; 'C#',\n    description   =&gt; 'Created by Microsoft'\n  },\n  {\n    language_name =&gt; 'PHP',\n    description   =&gt; 'Hypertext Preprocessor'\n  },\n  {\n    language_name =&gt; 'Haskell',\n    description   =&gt; 'Functional language'\n  },\n);\n\nprint header;\nmy $template=HTML::Template-&gt;new(filename=&gt;'template2.tmpl');\n$template-&gt;param(language =&gt; @rows);\nprint $template-&gt;output();\n</code></pre>\n\n<p>This fails with the following error: <code>HTML::Template::param() : attempt to set parameter 'language' with a scalar - parameter is not a TMPL_VAR!</code></p>\n\n<p>However, when I change the definition of @rows from using parenthesis to using square brackets(from <code>my @rows=(...)</code> to <code>my @rows = [...]</code>) the code works fine; it displays a table with the data.</p>\n\n<p>As I understood from reading <a href=\"http://friedo.com/blog/2013/07/arrays-vs-lists-in-perl\" rel=\"nofollow noreferrer\">this</a> article, the first form is an array defined from a list and the second one is a reference to an anonymous array. It's still not clear to me why the first form doesn't work. I'd appreciate you clarifying this for me.</p>\n"}, {"tags": ["regex", "perl", "grep", "homebrew"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1512668906, "post_id": 47700843, "comment_id": 82361698, "body": "Isn&#39;t <code>-E</code> good enough for this regex?"}, {"owner": {"reputation": 11, "user_id": 9068767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b5e361709a6cd89b3e39417ea985e4?s=128&d=identicon&r=PG&f=1", "display_name": "CPuleo", "link": "https://stackoverflow.com/users/9068767/cpuleo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512668974, "post_id": 47700843, "comment_id": 82361733, "body": "as oppose to using -Px altogether?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512678034, "post_id": 47700843, "comment_id": 82366380, "body": "Please bear in mind that reading a file and at the same time redirecting to it (as in <code>grep ... FILE &gt; FILE</code>) gives unpredictable results. It may or may not work. It often depends on the size of the file whether it is completely read before it gets (over)written. To be safe, redirect to another (temporary) file and move it afterwards (<code>grep ... FILE &gt; FILE.new</code> and -- if the results are OK -- <code>mv FILE.new FILE</code>)."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512678671, "post_id": 47700843, "comment_id": 82366693, "body": "@ConnorPuleo No, just <code>-E</code> instead of <code>-P</code>, i.e. <code>grep -E -x -e &#39;\u2026&#39;</code>. But I didn&#39;t try it."}], "owner": {"reputation": 11, "user_id": 9068767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b5e361709a6cd89b3e39417ea985e4?s=128&d=identicon&r=PG&f=1", "display_name": "CPuleo", "link": "https://stackoverflow.com/users/9068767/cpuleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1512668967, "answer_count": 0, "score": 1, "last_activity_date": 1512668911, "creation_date": 1512668593, "last_edit_date": 1512668911, "question_id": 47700843, "link": "https://stackoverflow.com/questions/47700843/perl-regex-in-bsd-grep-as-oppose-to-gnu-grep", "closed_reason": "Duplicate", "title": "perl-regex in BSD grep as oppose to GNU grep", "body": "<pre><code>grep -Px -e '\"[^|,\"\\v]*\"(,\"[^|,\"\\v]*\")+\\v' FILENAME.csv &gt; FILENAME.csv\n</code></pre>\n\n<p>previously worked in <code>GNU Grep</code>, now because <code>-P</code> isn't in BSD Grep it no longer works.</p>\n\n<p>which command could I use to get the same result?</p>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512665668, "post_id": 47699699, "comment_id": 82359882, "body": "The usage is <code>$xpc-&gt;registerNs(&#39;abc&#39;,  &#39;http:&#47;&#47;www.example.com&#47;schemas&#47;abc&#39;);</code>. Then use <code>abc:id</code> instead of <code>id</code> in the XPaths."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512683254, "post_id": 47699699, "comment_id": 82368836, "body": "<code>ns:&#47;@id</code> should be <code>@abc:id</code> and <code>*[local-name()=&quot;id&quot;]</code> is looking for an <i>element</i> with a local name of <code>id</code> and will not match attributes. Within both the XML and the Perl code, a namespace is identified by its URI. In your XML the prefix <code>abc</code> stands in for that URI, but you may use another name altogether in your Perl (although it would be wise not to)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512665858, "post_id": 47699996, "comment_id": 82360007, "body": "Re &quot;<i>XML::LibXML::XPathContext doesn&#39;t have to be used, it&#39;s loaded with XML::LibXML.</i>&quot;, That wasn&#39;t always the case. Loading it explicitly gives backwards compatibility."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512666046, "post_id": 47699996, "comment_id": 82360126, "body": "@ikegami: Thanks, updated. I vaguely remember noticing I can omit the use clause, but I can&#39;t find a mention of it in the Changes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512666274, "post_id": 47699996, "comment_id": 82360286, "body": "It changed in 1.70"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512671647, "post_id": 47699996, "comment_id": 82363061, "body": "Ah, ok, 6 years ago or more :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1512673110, "post_id": 47699996, "comment_id": 82363805, "body": "8, but still newer than still-used Perl 5.10."}, {"owner": {"reputation": 562, "user_id": 439350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8358ab2f769dafcbf1e4db37115a694?s=128&d=identicon&r=PG", "display_name": "personalt", "link": "https://stackoverflow.com/users/439350/personalt"}, "edited": false, "score": 0, "creation_date": 1512871819, "post_id": 47699996, "comment_id": 82430846, "body": "This change was what I needed.. Thanks. -  <code>$xpc-&gt;registerNs(abc =&gt; &#39;http:&#47;&#47;www.example.com&#47;schemas&#47;abc&#39;);</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1512665866, "last_edit_date": 1512665866, "creation_date": 1512665689, "answer_id": 47699996, "question_id": 47699699, "link": "https://stackoverflow.com/questions/47699699/xmllibxml-findvalue-for-an-attribute-with-a-namespace-prefix/47699996#47699996", "title": "XML::LibXML findvalue for an attribute with a namespace prefix", "body": "<p><a href=\"http://p3rl.org/XML::LibXML::XPathContext\" rel=\"nofollow noreferrer\">XML::LibXML::XPathContext</a> doesn't have to be used (in the recent years), it's loaded with <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>.</p>\n\n<p>The correct usage of the <code>registerNs</code> function is to give it a prefix and URI.</p>\n\n<p>Using the same variable for a nested loop makes no sense, especially if you don't use the outer variable anywhere.</p>\n\n<p>You can use <a href=\"http://p3rl.org/join\" rel=\"nofollow noreferrer\">join</a> to avoid repeating the call to <code>findvalue</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw{ say };\n\nuse XML::LibXML;\n\nmy $filename = shift;\nmy $dom = 'XML::LibXML'-&gt;load_xml(location =&gt; $filename);\n\nmy $xpc = 'XML::LibXML::XPathContext'-&gt;new($dom);\n$xpc-&gt;registerNs(abc =&gt; 'http://www.example.com/schemas/abc');\n\nfor my $title ($xpc-&gt;findnodes('//TheType[@name=\"MyName\"]/sequence/element')) {\n    say join '|', map $title-&gt;findvalue($_), '@name', '@abc:id', '@type';\n}\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 439350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8358ab2f769dafcbf1e4db37115a694?s=128&d=identicon&r=PG", "display_name": "personalt", "link": "https://stackoverflow.com/users/439350/personalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "accepted_answer_id": 47699996, "answer_count": 1, "score": 0, "last_activity_date": 1512683072, "creation_date": 1512664708, "last_edit_date": 1512683072, "question_id": 47699699, "link": "https://stackoverflow.com/questions/47699699/xmllibxml-findvalue-for-an-attribute-with-a-namespace-prefix", "title": "XML::LibXML findvalue for an attribute with a namespace prefix", "body": "\n\n<p>I am having some issues using\n<a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a>\nwith namespaces. I have parsed files with namespaces before but this one is a bit different because it is defined with <code>xlmns:abc</code> rather then just <code>xlmns</code>.</p>\n\n<p>I can't extract the <code>893</code> value of <code>abc:id</code> from this element</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;element name='THEFIELD' type='string' abc:id='893' minOccurs='0' maxOccurs='1'&gt;\n</code></pre>\n\n<p>Sample data</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;schema\n    xmlns:abc=\"http://www.example.com/schemas/abc\"\n    targetNamespace=\"http://example.com/schemas/product\"\n    elementFormDefault=\"qualified\"&gt;\n\n  &lt;TheType name='MyName'&gt;\n    &lt;sequence&gt;\n      &lt;element name='THEFIELD' type='string' abc:id='893' minOccurs='0' maxOccurs='1'&gt;\n        &lt;annotation&gt;&lt;documentation&gt;Identifier - Realtime&lt;/documentation&gt;&lt;/annotation&gt;\n      &lt;/element&gt;\n</code></pre>\n\n<p>My code returns all values correctly (the <code>name</code> and <code>type</code> attributes) but not <code>abc:id</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\nuse XML::LibXML::XPathContext;\n\nmy $filename = '/schema.xml';\nmy $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\n\nmy $xpc = XML::LibXML::XPathContext-&gt;new( $dom );\n$xpc-&gt;registerNs( 'ns', 'abc:http://www.example.com/schemas/abc' );\n\nforeach my $title ( $xpc-&gt;findnodes( '//schema' ) ) {\n\n    foreach my $title ( $xpc-&gt;findnodes( '//TheType[@name=\"MyName\"]/sequence/element' ) ) {\n\n        say $title-&gt;findvalue( './@name' ), '|', $title-&gt;findvalue( '??????' ), '|', $title-&gt;findvalue( './@type' );\n    }\n}\n</code></pre>\n\n<p>My thoughts are </p>\n\n<ul>\n<li><p><code>$xpc-&gt;registerNs( 'ns',  'abc:http://www.example.com/schemas/abc' );</code> is wrong   </p></li>\n<li><p>Every possibility I tried for the <code>findvalue</code> for <code>abc:id</code>\u2014where the <code>????</code> is in the code\u2014was wrong.</p></li>\n</ul>\n\n<p>I tried many things here including things like <code>ns:/@id</code> to  <code>*[local-name()=\"id\"]</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1512658576, "post_id": 47697593, "comment_id": 82355342, "body": "Your <code>&#39;$x&#39;</code> is a literal <code>$x</code>, not the value of the <code>$x</code> variable. The single quotes <code>&#39;&#39;</code> do not interpolate. Get rid of the <code>&#39;&#39;</code>. And your code is overly complicated. To count them, it&#39;s enough to iterate once and count. You don&#39;t need to go through them one by one and compare. <code>my %counts; ++$count{$_} for @num;</code> will do. No need for  <code>$x</code> and <code>$y</code> at all. And don&#39;t forget to turn on <code>use strict</code> and <code>use warnings</code>! :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512659287, "post_id": 47697593, "comment_id": 82355853, "body": "How do you want to define then the user has finished entering values? The usual ways are to put them all on one line and split the input string, or to have a special value to enter which means the end of the input."}], "answers": [{"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1512659483, "creation_date": 1512659483, "answer_id": 47698102, "question_id": 47697593, "link": "https://stackoverflow.com/questions/47697593/perl-user-input-into-a-data-structure/47698102#47698102", "title": "perl user input into a data structure", "body": "<p>Probably it is possible to do more nicely, but i would do this as:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $numbers;\n\nprint \"Enter numbers and finish with CTRL-D\\n\";\nwhile(my $line = &lt;STDIN&gt;) {\n        $numbers-&gt;{$_}++ for ( $line =~ m/(\\b\\d+\\b)/g );\n}\n\nprint Dumper $numbers;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "edited": false, "score": 0, "creation_date": 1512683459, "post_id": 47698226, "comment_id": 82368942, "body": "Thanks, I actually found an easier way, just using arrays."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "edited": false, "score": 0, "creation_date": 1512683563, "post_id": 47698226, "comment_id": 82368990, "body": "@Nameishi: Easier? My answer has only four lines of code! If you have an answer then you really should post it here. You may then accept your own answer."}, {"owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "edited": false, "score": 0, "creation_date": 1512742203, "post_id": 47698226, "comment_id": 82392178, "body": "not easier than yours but easier than what I was trying to do.  Thanks Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "edited": false, "score": 0, "creation_date": 1512743209, "post_id": 47698226, "comment_id": 82392758, "body": "@Nameishi: <i>Please</i> post your solution here. It is important that you get used to writing answers as well as solutions. At worst you will get some ideas about how to improve your code."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1512665904, "last_edit_date": 1512665904, "creation_date": 1512659848, "answer_id": 47698226, "question_id": 47697593, "link": "https://stackoverflow.com/questions/47697593/perl-user-input-into-a-data-structure/47698226#47698226", "title": "perl user input into a data structure", "body": "\n\n<p>There are a great many problems with your code and I don't have time to explore them all</p>\n\n<p>I hope it helps to offer you a working solution</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy %counts;\n\nprint \"Enter numbers into counts table: \";\n\n++$counts{$_} for split ' ', &lt;STDIN&gt;;\n\nprint \"$_\\t$counts{$_}\\n\" for keys %counts;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>E:\\Perl\\source&gt;count.pl\nEnter numbers into counts table: 4 2 1 4\n1       1\n2       1\n4       2\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 5376537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c872b3609f7acfa0f38007862229f7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nameishi", "link": "https://stackoverflow.com/users/5376537/nameishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 47698226, "answer_count": 2, "score": 2, "last_activity_date": 1512665904, "creation_date": 1512657943, "question_id": 47697593, "link": "https://stackoverflow.com/questions/47697593/perl-user-input-into-a-data-structure", "title": "perl user input into a data structure", "body": "<p>\nI am trying to take user input such as 4 2 1 4 and store that into an array. Then loop through the array looking for duplicates to store into a hash table.</p>\n\n\n\n<pre><code>#!/usr/bin/perl -w\nprint \"Enter numbers into hash table :\";\n\nmy @num = &lt;STDIN&gt;;\nmy %hash;\n\nforeach $x (@num){\n    my $count =1;\n    foreach $y(@num){\n\n        if($x == $y){  \n        my $count++;\n        $hash{'$x'} = $count;\n        }\n    }\n\n}\n\nmap{print \"$_\\t$hash{$_}\\n\"}keys %hash;\n</code></pre>\n\n<p>\nI expect the result to be:\n1 1\n2 1\n4 2\n\nThe actual result, I just continue to enter digits, after I hit enter the program continues to ask for more input. I hit CTRL D and nothing happens.  </p>\n"}, {"tags": ["perl", "bugzilla"], "comments": [{"owner": {"reputation": 126, "user_id": 9066900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbdaf344b70bce8a26d62b2e9129442?s=128&d=identicon&r=PG&f=1", "display_name": "Alexred", "link": "https://stackoverflow.com/users/9066900/alexred"}, "edited": false, "score": 0, "creation_date": 1512659063, "post_id": 47693545, "comment_id": 82355681, "body": "I found in DB mysql that table &#39;bugs&#39; contains a text that I&#39;ve written in custom field.  This table contains qa_contact and bug_status. Cannot understand why it&#39;s not return value through $args-&gt;{&#39;object&#39;} for custom field ?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1512662731, "post_id": 47693545, "comment_id": 82358136, "body": "what class is <code>$object</code>?  what version of Bugzilla?"}, {"owner": {"reputation": 126, "user_id": 9066900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbdaf344b70bce8a26d62b2e9129442?s=128&d=identicon&r=PG&f=1", "display_name": "Alexred", "link": "https://stackoverflow.com/users/9066900/alexred"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1512674776, "post_id": 47693545, "comment_id": 82364682, "body": "If I&#39;m not wrong the &#39;object is taking from Hook:  Bugzilla::Hook::process(&#39;object_end_of_set_all&#39;,                               { object =&gt; $self, params =&gt; \\%field_values }); This Hook is placed within set_all subroutine of package Bugzilla::Object. The class is Object, right?"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 9066900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbdaf344b70bce8a26d62b2e9129442?s=128&d=identicon&r=PG&f=1", "display_name": "Alexred", "link": "https://stackoverflow.com/users/9066900/alexred"}, "is_accepted": true, "score": 0, "last_activity_date": 1512688503, "creation_date": 1512688503, "answer_id": 47705395, "question_id": 47693545, "link": "https://stackoverflow.com/questions/47693545/bugzilla-extension-how-to-check-if-custom-field-empty/47705395#47705395", "title": "Bugzilla extension. How to check if custom field empty?", "body": "<p>Found out two problems:\n1. After executing ThrowUserError(\"...\") any object (cf_test or even bugzilla fields) is always NULL.\n2. If to use Hook \"object_end_of_set_all\" for custom field then only a cached values are showed for a custom field.</p>\n\n<p>The answer is to use different Hook:</p>\n\n<pre><code>sub bug_end_of_update {\n    my ($self, $args) = @_;\n    my ($bug, $old_bug, $timestamp, $changes) = @$args{qw(bug old_bug timestamp changes)};\n    if ($bug-&gt;bug_status eq 'RESOLVED') {\n        if ($bug-&gt;cf_test eq \"\") {\n            ThrowUserError(\"test_is_empty\");\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 126, "user_id": 9066900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbdaf344b70bce8a26d62b2e9129442?s=128&d=identicon&r=PG&f=1", "display_name": "Alexred", "link": "https://stackoverflow.com/users/9066900/alexred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 47705395, "answer_count": 1, "score": 1, "last_activity_date": 1512688503, "creation_date": 1512644435, "last_edit_date": 1512688178, "question_id": 47693545, "link": "https://stackoverflow.com/questions/47693545/bugzilla-extension-how-to-check-if-custom-field-empty", "title": "Bugzilla extension. How to check if custom field empty?", "body": "<p>\nHow to check condition if some custom field empty?</p>\n\n<p>\nFor example, it's possible to check that qa_contact is not set.</p>\n\n<pre><code>sub object_end_of_set_all {\n    my ($self, $args) = @_;\n    my $object = $args-&gt;{'object'};\n    if ($object-&gt;{'bug_status'} eq 'RESOLVED') {        \n        if ($object-&gt;{'qa_contact'} eq \"\") {             \n            ThrowUserError(\"empty_qa_contact\");\n        }\n    }\n} \n</code></pre>\n\n<p>Is there is same way for custom field e.g. cf_test ?</p>\n\n<p>I know that to save custom field in variable, need to: </p>\n\n<pre><code>my $test = new Bugzilla::Field({ name =&gt; 'cf_test' });\n</code></pre>\n\n<p>Which method can be used to get its value or check if it's not empty ?</p>\n\n\n\n\n"}, {"tags": ["perl", "pass-by-reference"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1512641701, "post_id": 47692470, "comment_id": 82344254, "body": "Add <code>use strict; use warnings;</code> and fix the errors they show. In 1) you iterate over a non-existimg <code>@temp</code> thus the <code>for</code> loop isn&#39;t executed."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1512641995, "post_id": 47692470, "comment_id": 82344475, "body": "what is <code>@temp?</code> tried to remplace <code>@temp</code> by <code>@foo</code> and got the output 51015202530 in 1) So it seems your error comes from <code>@temp</code> undeclared"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1512642345, "post_id": 47692470, "comment_id": 82344714, "body": "You are editing your question and adding what people say is missing. In general this is not the best idea because it invalidates both the answers given so far and also your first item because it now works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512643652, "post_id": 47692470, "comment_id": 82345597, "body": "I have rolled back your changes to the original version. There is no point in posting fixed code, and it made the output that you said you were getting incorrect (I spent along time poring over your question trying to spot a non-existent error).  It also invalidated comments and solutions from others. All in all, not a good look!"}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512650180, "post_id": 47692470, "comment_id": 82349903, "body": "@Borodin I wasn&#39;t fixing code according to the answer, they were the original code that I had. I just copying them from a larger code, so I missed a couple of line of code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512650450, "post_id": 47692470, "comment_id": 82350100, "body": "@onur: Then it&#39;s strange that some of the code in your latest version displayed no errors, certainly not the ones you describe."}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512651416, "post_id": 47692470, "comment_id": 82350652, "body": "@Borodin there might be version difference out setups. I mean while editing the question that was not my intent for the edit, sorry for that. Next time I will keep in mind to check the question twice for any missing line of code."}], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512641959, "post_id": 47692669, "comment_id": 82344449, "body": "What about the 3rd method ?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512641961, "post_id": 47692669, "comment_id": 82344451, "body": "LOL. But in the 3rd case <code>$l_vectorRef</code> <i>is</i> defined. Or do I miss something?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512641984, "post_id": 47692669, "comment_id": 82344465, "body": "@PerlDuck \u2014 It wasn&#39;t when I wrote the answer. <a href=\"https://stackoverflow.com/revisions/47692470/3\">The OP moved the goalposts.</a>"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1512642007, "post_id": 47692669, "comment_id": 82344480, "body": "@PerlDuck not until like 30 seconds ago :)"}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642027, "post_id": 47692669, "comment_id": 82344492, "body": "@Quentin Yeah, I forgot some lines while writing the question, sorry about that, but it was&#39;t working with the full version of it."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642087, "post_id": 47692669, "comment_id": 82344527, "body": "@onurcanbektas \u2014 What about it? There are three items in the numbered list in this answer."}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642247, "post_id": 47692669, "comment_id": 82344644, "body": "No, I mean my 3rd method. What is the problem with that ?"}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642282, "post_id": 47692669, "comment_id": 82344668, "body": "it give &quot;Use of uninitialized value within @temp in multiplication (*) at test.pl line 33.&quot; error after adding the strict and warning."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642287, "post_id": 47692669, "comment_id": 82344670, "body": "@onurcanbektas \u2014 The third item in the list in my answer discusses that: &quot;the map would overwrite the reference and not replace the original array&quot;"}, {"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642371, "post_id": 47692669, "comment_id": 82344734, "body": "@Quentin So, if I understood correctly, map would create a new array which is going to be hold by  $l_vectorRef, right ?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1512642440, "post_id": 47692669, "comment_id": 82344783, "body": "OK, so that error is because you are getting the values of <code>@temp</code> (1, 2, etc) and then using them as indexes: <code>$temp[1]</code>, up to <code>$temp[6]</code> instead of <b>just using the values</b>."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642449, "post_id": 47692669, "comment_id": 82344791, "body": "@onurcanbektas \u2014 And yes. It creates a new array."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1512642635, "post_id": 47692669, "comment_id": 82344915, "body": "So what I&#39;m getting from this is that <code>use strict; use warnings;</code> might be a good idea?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1512663204, "post_id": 47692669, "comment_id": 82358463, "body": "also show correct code to do what they want, please?"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 7, "last_activity_date": 1512641831, "creation_date": 1512641831, "answer_id": 47692669, "question_id": 47692470, "link": "https://stackoverflow.com/questions/47692470/why-are-the-referenced-arrays-values-not-changed/47692669#47692669", "title": "Why are the referenced array&#39;s values not changed?", "body": "<ol>\n<li>Because you forgot <code>use strict; use warnings;</code> so didn't notice that <code>@temp</code> is undefined so your loop length is <code>0</code>.</li>\n<li>Because you forgot <code>use strict; use warnings;</code> so didn't notice that <code>map { $l_vectorRef-&gt;[$_] * 5 } { $l_vectorRef-&gt;[$_] };</code> expects the <code>{ $l_vectorRef-&gt;[$_] }</code> to be a list. You also didn't assign the result of the <code>map</code> anywhere.</li>\n<li>Because you forgot <code>use strict; use warnings;</code> so didn't notice that you never defined <code>$l_vectorRef</code> (but if you did, then the map would <em>overwrite the reference</em> and not replace the original array)</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "edited": false, "score": 0, "creation_date": 1512642181, "post_id": 47692714, "comment_id": 82344593, "body": "As far as I see, $l_vectorRef holds a reference to @foo, so I should be able to modify the values of foo."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 7, "last_activity_date": 1512641965, "creation_date": 1512641965, "answer_id": 47692714, "question_id": 47692470, "link": "https://stackoverflow.com/questions/47692470/why-are-the-referenced-arrays-values-not-changed/47692714#47692714", "title": "Why are the referenced array&#39;s values not changed?", "body": "<p>The first one doesn't work because your loop condition is <code>$var &lt; scalar(@temp)</code>, but there is no <code>@temp</code>, so the loop never executes.</p>\n\n<p>The second one doesn't work because <code>map</code> doesn't modify anything, and you're not assigning the result of the <code>map</code> to anything.</p>\n\n<p>The third one doesn't work because you're modifying the variable <code>$l_vectorRef</code> inside the sub, and <em>not</em> modifying the array that that variable holds a reference to.</p>\n\n<p>Here is a more idiomatic working version:</p>\n\n<pre><code>sub vectorScalarMultiply {\n    my ($aref) = @_;\n    $_ *= 5 for @$aref;\n}\n</code></pre>\n"}], "owner": {"reputation": 639, "user_id": 6708910, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/B5pvi.jpg?s=128&g=1", "display_name": "Our", "link": "https://stackoverflow.com/users/6708910/our"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47692669, "answer_count": 2, "score": 3, "last_activity_date": 1512643419, "creation_date": 1512641212, "last_edit_date": 1512643419, "question_id": 47692470, "link": "https://stackoverflow.com/questions/47692470/why-are-the-referenced-arrays-values-not-changed", "title": "Why are the referenced array&#39;s values not changed?", "body": "<p>I'm trying to multiply the each component of an array with a scalar, and to do this, have tried the followings;</p>\n\n<p>1-)</p>\n\n<pre><code>@foo = (1, 2, 3, 5, 6);\nvectorScalarMultiply(\\@foo);\nprint @foo, \"\\n\";\n\nsub vectorScalarMultiply\n{\n    my $l_vectorRef = $_[0];\n    for (my $var = 0; $var &lt; scalar(@temp); $var++) {\n        $l_vectorRef-&gt;[$var] = $l_vectorRef-&gt;[$var] * 5;\n    }\n}\n</code></pre>\n\n<p>1's Output;</p>\n\n<blockquote>\n  <p>12356</p>\n</blockquote>\n\n<p>2-)</p>\n\n<pre><code>@foo = (1, 2, 3, 5, 6);\nvectorScalarMultiply(\\@foo);\nprint @foo, \"\\n\";\nsub vectorScalarMultiply\n{\n\n    my $l_vectorRef = $_[0];\n    map { $l_vectorRef-&gt;[$_] * 5 } { $l_vectorRef-&gt;[$_] };\n}\n</code></pre>\n\n<p>2's Output;</p>\n\n<blockquote>\n  <p>123456</p>\n</blockquote>\n\n<p>3-)</p>\n\n<pre><code>@foo = (1, 2, 3, 5, 6);\n@temp = @{$l_vectorRef};\nvectorScalarMultiply(\\@foo);\nprint @foo, \"\\n\";\n$l_vectorRef = map { $temp[$_] * 5; } @temp;\n</code></pre>\n\n<p>3's Output;</p>\n\n<blockquote>\n  <p>12356</p>\n</blockquote>\n\n<p>And I haven't been able to figure out what is the problem, and why are they not working, so my <strong>main</strong> question is that what is the problem with these code ?Secondly, how can we solve it ?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 8, "creation_date": 1512641195, "post_id": 47692415, "comment_id": 82343895, "body": "One could wonder why they are called one-liners ..."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 4, "creation_date": 1512641267, "post_id": 47692415, "comment_id": 82343944, "body": "Maybe you should write a real Perl script and save it in an executable file if it is complicated enough that you don&#39;t want to have it on one line\u2026"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512642120, "post_id": 47692415, "comment_id": 82344547, "body": "Fair point guys. Just thought it could look a bit nicer"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1512642588, "post_id": 47692415, "comment_id": 82344888, "body": "It can. Perl can write in script files, and then you can use things like <code>perltidy</code> to make it consistently formatted, and you can use longhand variable names and line wrapping and everything."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1512648620, "post_id": 47692415, "comment_id": 82348935, "body": "I my opinion one-liners are loathsome beasts that should never be part of production code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512648668, "post_id": 47692415, "comment_id": 82348974, "body": "<i>&quot;If I do something like <code>Ma</code>&quot;</i>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1512753914, "post_id": 47692415, "comment_id": 82398923, "body": "Absolutely. One liners should really be for one shot use. E.g. throw away code. If you need to keep it, it should be a script."}, {"owner": {"reputation": 160, "user_id": 1118719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47edd1ee4d973c50bbe7991bb063d09d?s=128&d=identicon&r=PG", "display_name": "Dan Jacobson \u7a4d\u4e39\u5c3c", "link": "https://stackoverflow.com/users/1118719/dan-jacobson-%e7%a9%8d%e4%b8%b9%e5%b0%bc"}, "edited": false, "score": 0, "creation_date": 1617329118, "post_id": 47692415, "comment_id": 118280527, "body": "See also <a href=\"https://github.com/perltidy/perltidy/issues/58\" rel=\"nofollow noreferrer\">github.com/perltidy/perltidy/issues/58</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512753828, "post_id": 47692508, "comment_id": 82398873, "body": "But if at the command line I press enter after <code>-e &#39;</code> it breaks"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512753952, "post_id": 47692508, "comment_id": 82398941, "body": "What platform are you using? Works fine on mine?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1512647991, "last_edit_date": 1512647991, "creation_date": 1512641328, "answer_id": 47692508, "question_id": 47692415, "link": "https://stackoverflow.com/questions/47692415/how-to-format-a-perl-oneliner/47692508#47692508", "title": "How to format a perl oneliner?", "body": "<p>Write an actual perl script? </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nuse JSON qw ( decode_json );\n\nmy $json = decode_json ( do{ local $/; &lt;&gt; } ); #read from stdin/file specified on command line\n\nforeach my $element ( @$json ) { #iterate\n   # do things\n}\n</code></pre>\n\n<p>Otherwise - you can add linefeeds in between your quotes - they've no semantic significance, unlike some other languages.</p>\n\n<p>So:</p>\n\n<pre><code>perl -MData::Dumper -MJSON=decode_json -e '\n    my @array = @{decode_json($data)}; \n    foreach my $i (@array) { etc }\n'\n</code></pre>\n\n<p>But seriously - if you're looking at making a <em>one liner</em> more readable, then the answer is 'write it as a script, that's what they're for'. </p>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512753779, "post_id": 47695099, "comment_id": 82398846, "body": "that sounds interesting. What if I had other options e.g. <code>-n</code>?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1512808979, "post_id": 47695099, "comment_id": 82414093, "body": "I don&#39;t see why this should be a problem, i.e. <code>perl -nlp input_data.txt &lt;&lt;ENDOFPERL</code>. Of course using a HERE-Doc always means that your stdin is taken; the solution doesn&#39;t work if you want to feed your data via a pipe."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1512649396, "creation_date": 1512649396, "answer_id": 47695099, "question_id": 47692415, "link": "https://stackoverflow.com/questions/47692415/how-to-format-a-perl-oneliner/47695099#47695099", "title": "How to format a perl oneliner?", "body": "<p>This is funny: You want to have a <strong>one-liner</strong>, which, for readability, should span <strong>several</strong> lines. This sounds like a contradicition.</p>\n\n<p>What you <strong>can</strong> do is to drop the <code>-e</code> switch and make a HERE document:</p>\n\n<pre><code>perl -MData::Dumper -MJSON=decode_json &lt;&lt;ENDOFPERL\n  # Your multi-line one-liner goes here\nENDOFPERL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 5, "last_activity_date": 1512741107, "last_edit_date": 1512741107, "creation_date": 1512649562, "answer_id": 47695137, "question_id": 47692415, "link": "https://stackoverflow.com/questions/47692415/how-to-format-a-perl-oneliner/47695137#47695137", "title": "How to format a perl oneliner?", "body": "<p>As others already said, if your <em>oneliner</em> is too complex to fit into one line, you should use a script.</p>\n\n<p>In some rare cases (and when the script is debugged and working), you can inline the perl script into your <code>bash</code> script as:</p>\n\n<pre><code>#!/bin/bash\n\n# bash function which prints the perl script\nperlcode() {\ncat - &lt;&lt;'PERLCODE'\nuse scrict;\nuse warnings;\n# ... rest of your script\nPERLCODE\n}\n\n#and use the inlined script as    \nperl &lt;(perlcode)\n</code></pre>\n\n<p>The above works because it uses the <code>bash</code>'s <a href=\"http://wiki.bash-hackers.org/syntax/expansion/proc_subst\" rel=\"nofollow noreferrer\">process substitution</a> mechanism, where first is executed the commands enclosed in the <code>&lt;(...commands...)</code> and the stdout of result is acts as an temporary file.</p>\n\n<p>So, the <code>perl &lt;(perlcode)</code> first execute the <code>perlcode</code> bash function, (which just prints the perl source code), and in the next step the bash uses the result as</p>\n\n<pre><code>perl /dev/fd/63 #some temporary file descriptor\n</code></pre>\n\n<p>e.g. exactly as <code>perl /path/to/script</code>. Such inlined perl script is works as ordinary perl script and for example could contain the <code>__DATA__</code> section too.</p>\n\n<p>You must use the quoted <code>&lt;&lt; 'HEREDOC'</code> form to avoid variable expansion.</p>\n\n<p>But really, only becasuse you <em>can</em> do something like the above, <strong>doesn't mean that you should</strong>. It is always much better to have a perl script in some file alone.</p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1512741107, "creation_date": 1512641039, "question_id": 47692415, "link": "https://stackoverflow.com/questions/47692415/how-to-format-a-perl-oneliner", "title": "How to format a perl oneliner?", "body": "<p>If I have a perl one liner running it from the command line: e.g  </p>\n\n<pre><code>perl -MData::Dumper -MJSON=decode_json -e 'my @array = @{decode_json($data)}; foreach my $i (@array) { etc }'\n</code></pre>\n\n<p>How could I format it so that it is more readable i.e. add new lines? If I do something like:  </p>\n\n<p>Ma</p>\n\n<p>The command breaks when I add the new lines like that to format the code</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1512666102, "post_id": 47692145, "comment_id": 82360162, "body": "@serenesat: It seems pointless to edit an answer just to remove &quot;Thank you&quot;. By all means remove stuff like that if the post needs editing anyway (although this question is really good) but otherwise it does no harm."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1512665981, "last_edit_date": 1512665981, "creation_date": 1512656594, "answer_id": 47697171, "question_id": 47692145, "link": "https://stackoverflow.com/questions/47692145/perl-xmlcompile-error-too-few-any-elements-got-0-for-minimum-1-at-person/47697171#47697171", "title": "Perl XML::Compile &quot;error: too few &#39;any&#39; elements, got 0 for minimum 1 at person#any&quot;", "body": "\n\n<p>You can't put <code>&lt;xs:any /&gt;</code> into a schema and expect the writer to randomly come up with some sort of XML element just to make it valid</p>\n\n<p>Every item in the schema must have a name so that data for it can be provided</p>\n\n<p>If you remove the <code>&lt;xs:any /&gt;</code> you will get this semi-successful result</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>mistake: tag `email' not used at person\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;person&gt;\n  &lt;firstname&gt;Alex&lt;/firstname&gt;\n  &lt;lastname&gt;Muster&lt;/lastname&gt;\n&lt;/person&gt;\n</code></pre>\n\n<p>which is saying that it has nowhere to put the <code>email</code> information. The other elements, however, are created correctly</p>\n\n<p>If you have in mind something specific you want to be generated for the <code>&lt;xs:any /&gt;</code> then it looks like you can \nspecify the behaviour you want for the <code>any_type</code> option. The documentation says this about it</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>any_type =&gt; CODE  \n       [1.07] how to handle \"anyType\" type elements. Supported values  \n       depends on the backend, specializations of  \n       XML::Compile::Translate.  \n</code></pre>\n\n<p><strong><em>I'm sorry, the documentation for <code>XML::Compile::Translate</code> says</em></strong> <strong>\"Currently only supported for the reader. \"</strong> <strong><em>so you can't specify what is generated for the <code>&lt;xs:any /&gt;</code> element when</em></strong> <strong>writing</strong> <strong><em>XML</em></strong></p>\n"}], "owner": {"reputation": 3, "user_id": 2539323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e043f829bb94f02b087139adad227438?s=128&d=identicon&r=PG", "display_name": "Mikhail Entaltsev", "link": "https://stackoverflow.com/users/2539323/mikhail-entaltsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 47697171, "answer_count": 1, "score": 0, "last_activity_date": 1512665981, "creation_date": 1512640257, "last_edit_date": 1512655613, "question_id": 47692145, "link": "https://stackoverflow.com/questions/47692145/perl-xmlcompile-error-too-few-any-elements-got-0-for-minimum-1-at-person", "title": "Perl XML::Compile &quot;error: too few &#39;any&#39; elements, got 0 for minimum 1 at person#any&quot;", "body": "<p>somehow could not get XML::Compile working with very simple XSD file that contains</p>\n\n<pre><code>&lt;xs:any /&gt;\n</code></pre>\n\n<p>without it it works perfect. Looks like I am missing something very simple.</p>\n\n<p>Here is test1.xsd file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xs:schema  xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n&lt;xs:element name=\"person\"&gt;\n  &lt;xs:complexType&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element name=\"firstname\" type=\"xs:string\"/&gt;\n      &lt;xs:element name=\"lastname\" type=\"xs:string\"/&gt;\n      &lt;xs:any /&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;&lt;/xs:schema&gt;\n</code></pre>\n\n<p>Here is test1.pl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse XML::Compile::Schema;\nuse XML::LibXML::Reader;\n\nmy @specs  = ('test1.xsd');\nmy $schema = XML::Compile::Schema-&gt;new(\\@specs); \n\nmy $data = \n{ \n     firstname =&gt; 'Alex',\n     lastname =&gt; 'Muster',\n     email =&gt; 'amuster@abc.com',\n};\n\nmy $doc    = XML::LibXML::Document-&gt;new('1.0', 'UTF-8');\nmy $write  = $schema-&gt;compile(WRITER =&gt; 'person');\nmy $xml    = $write-&gt;($doc, $data);\n\n$doc-&gt;setDocumentElement($xml);\nprint $doc-&gt;toString(1); \n</code></pre>\n\n<p>Error message is: </p>\n\n<pre><code>error: too few 'any' elements, got 0 for minimum 1 at person#any\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1512639782, "post_id": 47691957, "comment_id": 82342900, "body": "Where is your code?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1512639972, "post_id": 47691957, "comment_id": 82343024, "body": "Come with your code, it would be easy for people to help you."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512643364, "post_id": 47692869, "comment_id": 82345408, "body": "Awesome champ its working fine. Just need to ask a query is, how to retain the indentation which as it is in the input file?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512643764, "post_id": 47692869, "comment_id": 82345677, "body": "How I print in a sample input file"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512647948, "post_id": 47692869, "comment_id": 82348507, "body": "You can&#39;t maintain the original indentation, because you&#39;re modifying the content. And indentation is semantically irrelevant. You can just change the output options to not format, which might preserve it, at least partially."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512651434, "post_id": 47692869, "comment_id": 82350664, "body": "Something going wrong hence I have updated the question could you please revisit the question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512656870, "post_id": 47692869, "comment_id": 82354122, "body": "So use the code I&#39;ve given you as a starting point, and have a go at it? If you&#39;ve tried, then post what you&#39;ve got so far and where/what problems you&#39;re hitting. But maybe explain quite what you&#39;re trying to accomplish with your <code>&lt;split&#47;&gt;</code> because this looks a lot like an XY problem."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1512642429, "creation_date": 1512642429, "answer_id": 47692869, "question_id": 47691957, "link": "https://stackoverflow.com/questions/47691957/split-the-parent-element-if-the-keyword-found-in-xml-file-using-perl/47692869#47692869", "title": "split the parent element if the keyword found in xml file using perl", "body": "<p>Here's an example of how you could do this using <code>XML::Twig</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $first_doc = XML::Twig -&gt; parse ( \\*DATA ); \n\nmy $second_doc = XML::Twig -&gt; new; \n$second_doc -&gt; set_root ( $first_doc -&gt; root -&gt; copy ); #create a copy. \n\nwhile ( my $after_split = $first_doc -&gt; get_xpath('//split',0)-&gt;next_sibling ) {\n   $after_split -&gt; delete;\n}\n\n$first_doc -&gt; get_xpath('//split',0) -&gt; delete; # delete split tag.\n\nwhile ( my $before_split = $second_doc -&gt; get_xpath('//split',0)-&gt;prev_sibling ) {\n   $before_split -&gt; delete;\n}\n\n$second_doc -&gt; get_xpath('//split',0) -&gt; delete; # delete split tag. \n\n$first_doc -&gt; set_pretty_print ('indented_a');\n$first_doc -&gt; print;\n\nprint \"\\n--- second doc ---\\n\"; \n$second_doc -&gt; set_pretty_print ('indented_a');\n$second_doc -&gt; print;\n\n\n__DATA__\n&lt;section&gt;\n   &lt;para&gt;\n      &lt;list&gt;\n      &lt;list-item&gt;&lt;para&gt; sample content for first doc &lt;split/&gt; second doc sample content &lt;/para&gt;&lt;/list-item&gt;\n\n      &lt;/list&gt;\n   &lt;/para&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>This gives you as output:</p>\n\n<pre><code>&lt;section&gt;\n  &lt;para&gt;\n    &lt;list&gt;\n      &lt;list-item&gt;\n        &lt;para&gt; sample content for first doc &lt;/para&gt;\n      &lt;/list-item&gt;\n    &lt;/list&gt;\n  &lt;/para&gt;\n&lt;/section&gt;\n\n--- second doc ---\n&lt;section&gt;\n  &lt;para&gt;\n    &lt;list&gt;\n      &lt;list-item&gt;\n        &lt;para&gt; second doc sample content &lt;/para&gt;\n      &lt;/list-item&gt;\n    &lt;/list&gt;\n  &lt;/para&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>You will probably want to look at <code>parsefile</code> and <code>sprint</code> from <code>XML::Twig</code> to handle reading your own file, and generating output. </p>\n\n<p>Note - this does a 'full split' of the document into essentially two separate documents - but this technique should work withing a subtree, because the core of it is locating your <code>split</code> element, and deleting everything before or after it as necessary. </p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 47692869, "answer_count": 1, "score": 1, "last_activity_date": 1512655071, "creation_date": 1512639705, "last_edit_date": 1512655071, "question_id": 47691957, "link": "https://stackoverflow.com/questions/47691957/split-the-parent-element-if-the-keyword-found-in-xml-file-using-perl", "title": "split the parent element if the keyword found in xml file using perl", "body": "<blockquote>\n  <p><strong>Question Updated</strong></p>\n</blockquote>\n\n<p>I have a keyword tag <code>&lt;split/&gt;</code> in the xml file. Base on this I need to split the elements to be closed which has been opened and Also I need to open <em>DUMMY OPENING TAGS</em> which we are adding the closing tags on the keyword elements.</p>\n\n<p>For eg. Input:</p>\n\n<pre><code>&lt;section&gt;\n   &lt;para&gt; The para sample lines...\n      &lt;list&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... .... &lt;/para&gt;&lt;/list-item&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... .... &lt;/para&gt;&lt;/list-item&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... &lt;split/&gt; .... &lt;/para&gt;&lt;/list-item&gt;\n      &lt;/list&gt;\n     The para sample lines.. &lt;/para&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>&lt;section&gt;\n   &lt;para&gt; The para sample lines...\n      &lt;list&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... .... &lt;/para&gt;&lt;/list-item&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... .... &lt;/para&gt;&lt;/list-item&gt;\n     &lt;list-item&gt;&lt;para&gt; ..... &lt;/para&gt;&lt;/list-item&gt;\n      &lt;/list&gt;\n   &lt;/para&gt;\n&lt;/section&gt;\n*&lt;split/&gt;*\n&lt;section&gt; &lt;!--dummy tag--&gt;\n   &lt;para&gt;&lt;!--dummy tag--&gt;\n      &lt;list&gt;&lt;!--dummy tag--&gt;\n     &lt;list-item&gt;&lt;para&gt;&lt;!--dummy tag--&gt; &lt;split/&gt; .... &lt;/para&gt;&lt;/list-item&gt;\n      &lt;/list&gt;\n      The para sample lines.. &lt;/para&gt;\n&lt;/section&gt;\n</code></pre>\n\n<blockquote>\n  <p>Note: Asterisks for just identification purpose only (need to delete the tag)</p>\n</blockquote>\n\n<p>I am very new in using Module based on the Markup Languages. Could someone help me to get the idea. (I am also trying...)</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 2, "creation_date": 1512638341, "post_id": 47691495, "comment_id": 82341974, "body": "see regex character classes"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 2, "creation_date": 1512638682, "post_id": 47691495, "comment_id": 82342191, "body": "Because the regular expressions used to split are different?"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1512638686, "post_id": 47691495, "comment_id": 82342194, "body": "<a href=\"https://perldoc.perl.org/perlretut.html#Using-character-classes\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlretut.html#Using-character-classes</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1512649176, "post_id": 47691495, "comment_id": 82349331, "body": "Why do you expect square brackets to work in the same way as parentheses?"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1512639707, "post_id": 47691667, "comment_id": 82342855, "body": "Maybe spell out explicitly that the character class matches one character which can be <code>\\ </code> or <code>:</code> or <code>1</code> or <code>|</code> or <code>D</code> or <code>S</code> or <code>-</code> or <code>2</code> (with the duplicates removed)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1512639918, "post_id": 47691667, "comment_id": 82342980, "body": "@tripleee: I thought that&#39;s what &quot;match any one of the characters between the two brackets&quot; meant :-)"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1512639972, "post_id": 47691667, "comment_id": 82343023, "body": "It is indeed, but this is a common error and it often seems to require spelling out and rubbing in before the light bulb goes on with  few blinks."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1512638785, "creation_date": 1512638785, "answer_id": 47691667, "question_id": 47691495, "link": "https://stackoverflow.com/questions/47691495/what-is-the-difference-between-using-and-while-matching-pattern-to-s/47691667#47691667", "title": "What is the difference between using /[,]/ and /(|)/ while matching pattern to split in Perl?", "body": "<p>If you want the match operator to return the \"captured\" sections of your regex, then you need to include capturing brackets in your regex.</p>\n\n<p>Capturing brackets are parentheses like <code>( ... )</code>.</p>\n\n<p>Square brackets (<code>[ ... ]</code>) are used to define character classes. That is, they mean \"match any one of the characters between the two brackets\". They do not capture text.</p>\n\n<p>Your first example includes capturing brackets - therefore the captured matches are returned and stored in <code>@name1</code>.</p>\n\n<p>Your second example includes a character class and no capturing brackets - therefore no matches are returned and stored in <code>@name2</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 2281691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e60e89bbf1246a18dae49ac36fb2df74?s=128&d=identicon&r=PG", "display_name": "Evgeni Bolotin", "link": "https://stackoverflow.com/users/2281691/evgeni-bolotin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512638785, "creation_date": 1512638215, "last_edit_date": 1512638314, "question_id": 47691495, "link": "https://stackoverflow.com/questions/47691495/what-is-the-difference-between-using-and-while-matching-pattern-to-s", "title": "What is the difference between using /[,]/ and /(|)/ while matching pattern to split in Perl?", "body": "<p>I'm trying to split variable below to get only the part before \":2|\". Why pattern matching to do so works in the variable <code>@name1</code>, but not <code>@name2</code>?</p>\n\n<pre><code>$a = \"NB501373:45:HFH3CBGXY:4:11401:17564:1786:2|DS-R2Dec3|Dor|23-12-2013|0m|GFF\";\n\n@name1 = split (/(\\:1\\|DS\\-|\\:2\\|DS\\-)/, $a);\n@name2 = split (/[\\:1\\|DS\\-,\\:2\\|DS\\-]/, $a);\n</code></pre>\n"}]