[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557959549, "post_id": 56158100, "comment_id": 98945722, "body": "Better not to use bareword global handles: <code>open(my $file, &#39;&lt;&#39;, $filename) or die...</code>, <code>&lt;$file&gt;</code>, <code>open(my $call, &#39;&gt;&#39;, $output) or die ...</code>, <code>print $call $line</code>"}], "answers": [{"tags": [], "owner": {"reputation": 571, "user_id": 220898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6126fbb9a23c27fa42654e409a788163?s=128&d=identicon&r=PG", "display_name": "Bob Lied", "link": "https://stackoverflow.com/users/220898/bob-lied"}, "is_accepted": false, "score": 0, "last_activity_date": 1557957637, "creation_date": 1557957637, "answer_id": 56158208, "question_id": 56158100, "link": "https://stackoverflow.com/questions/56158100/advice-on-perl-regular-expression-script/56158208#56158208", "title": "Advice on Perl regular expression script", "body": "<p>You're opening the file with truncation (\">\") every time you find a match.  Move the open(CALL, ...) before the for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1557968735, "last_edit_date": 1557968735, "creation_date": 1557960229, "answer_id": 56158568, "question_id": 56158100, "link": "https://stackoverflow.com/questions/56158100/advice-on-perl-regular-expression-script/56158568#56158568", "title": "Advice on Perl regular expression script", "body": "<p>Problems:</p>\n\n<ul>\n<li>You should ALWAYS use <code>use strict; use warnings qw( all );</code>. (Since it should always used, we don't bother showing it in our snippets.) This detects numerous problems at no cost.</li>\n<li>You needlessly use global variables. (<code>use strict;</code> will help you with that, except for the file handles.)</li>\n<li>By creating the file repeatedly in the loop, you are clobbering all but your last line of output. (This is the problem you were asking about.)</li>\n<li>Your pattern incorrectly counts sequences of more than three characters as if they are sequences of three characters.</li>\n<li>By using <code>&lt;&gt;</code> in list context, you are loading the entire file into memory when it would have been just as easy to read from the file line by line.</li>\n<li>Your error messages aren't very useful.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings qw( all );\n\nmy $in_qfn  = 'call.txt';\nmy $out_qfn = 'result.txt';\n\nopen(my $fh_in, '&lt;', $in_qfn)\n   or die(\"Can't open \\\"$in_qfn\\\": $!\\n\");\nopen(my $fh_out, '&gt;', $out_qfn)\n   or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n\nwhile (&lt;$fh_in&gt;) {\n   print $out_fh $_ if !/^\\S+\\s+\\S{3}\\s/;\n}\n</code></pre>\n\n<p>The program is far more useful if you don't harcode the file names.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings qw( all );\n\nwhile (&lt;&gt;) {\n   print if !/^\\S+\\s+\\S{3}\\s/;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>script call.txt &gt;result.txt\n</code></pre>\n\n<p>or</p>\n\n<pre><code>script &lt;call.txt &gt;result.txt\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 56158568, "answer_count": 2, "score": 1, "last_activity_date": 1557983814, "creation_date": 1557957028, "last_edit_date": 1557983814, "question_id": 56158100, "link": "https://stackoverflow.com/questions/56158100/advice-on-perl-regular-expression-script", "title": "Advice on Perl regular expression script", "body": "<p>I am trying to write a script that will read from a text file, and output to another file the lines that do not match a regular expression. </p>\n\n<p>I have a file with two columns - in the first column are library Dewey numbers and in the second column are barcodes. A Dewey number should be something like 150 ADD, or 150.40 ADD. I am looking for lines where the 3 character author initials are missing. My example file looks like this :</p>\n\n<pre><code>100.20 SAD 350694345\n250 ADD 369803434\n300 360349320\n300.1534234 ZOO 353000303\n210 3633400340\n</code></pre>\n\n<p>I have written a script to output all lines where there are no author initials after the Dewey number. The regex is looking for 3 digits before an optional dot, then zero or more optional digits, then a space, and then the 3 letters of the author initials.</p>\n\n<pre><code>$filename = 'call.txt';\n$output = 'result.txt';\nopen(FILE, $filename) or die 'Could not open $filename';\nforeach $line (&lt;FILE&gt;) {\nif ($line !~ /^\\d{3}\\.*\\d* [a-zA-Z]{3}/) {\n\nopen (CALL, '&gt;', $output) or die $!;\nprint CALL $line;\n}\n}\n</code></pre>\n\n<p>When I run the script it only outputs the 5th line</p>\n\n<pre><code>210 3633400340\n</code></pre>\n\n<p>I'm not sure why it isn't also picking up line 3 as that doesn't match the regex? The output should be all Dewey numbers without the author initials. So the desired output is :</p>\n\n<pre><code>300 360349320\n210 3633400340\n</code></pre>\n\n<p>I would be really grateful for some help with this</p>\n\n<p>thanks\nJ</p>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1557949281, "post_id": 56156505, "comment_id": 98942197, "body": "this question is too broad as it is, see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1557949587, "post_id": 56156505, "comment_id": 98942312, "body": "Whenever you&#39;re running a <code>while read</code> loop (or, really, any other loop) in shell, if you care about efficiency and are iterating over lots of items or lines, you <b>never</b> want to either fork or use any external tool inside that loop. That means no <code>$(...)</code>, no <code>awk</code>, no pipelines, no <code>sed</code>. (Running a single copy of <code>awk</code> that loops over all your content, as in Ed&#39;s answer, is great; running a separate copy of <code>awk</code> <i>per line of content</i> is horrible; a separate copy per column in that line is even worse)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1557949783, "post_id": 56156505, "comment_id": 98942411, "body": "BTW, <code>while IFS=, read -r x y z _; do</code> would avoid the need for those three <code>awk</code> invocations, though it would still leave you with a <code>sed -i</code> per line, which is still a serious inefficiency."}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1557950420, "post_id": 56156505, "comment_id": 98942666, "body": "Thanks @CharlesDuffy. I am learning a lot reading and trying to digest your recommendations and Ed&#39;s solution. I need to work on my rudimentary scripting skills."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1557950644, "post_id": 56156505, "comment_id": 98942744, "body": "As another aside, <code>echo &quot;File: $DATA_FILE x: $x | y: $y | z: $z&quot;</code> -- passing everything to <code>echo</code> as a single string -- is actually less buggy than the current code; see <a href=\"http://mywiki.wooledge.org/BashPitfalls#echo_.24foo\" rel=\"nofollow noreferrer\">BashPitfalls #14</a> or the <a href=\"http://shellcheck.net/\" rel=\"nofollow noreferrer\">shellcheck.net</a> wiki page <a href=\"https://github.com/koalaman/shellcheck/wiki/SC2086\" rel=\"nofollow noreferrer\">SC2086</a> (btw, running your code through shellcheck before asking SO questions is always a good idea)."}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "edited": false, "score": 0, "creation_date": 1557951228, "post_id": 56156505, "comment_id": 98942988, "body": "Thank you Charles for the comment and shellcheck.net site suggestion. Looks nice. I have bookmarked."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1557958328, "post_id": 56156505, "comment_id": 98945422, "body": "The desired output contains <code>#most</code> on the second line (in <code>the plant species #most commonly referred to</code>), is that at typo? The rules don&#39;t seem to insert any <code>#</code> anywhere."}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1558705653, "post_id": 56156505, "comment_id": 99200360, "body": "@BenjaminW., yes, # was a typo. I have updated the post. Thanks for noting!"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1558706174, "post_id": 56156505, "comment_id": 99200675, "body": "I recommend you post your solution as an answer instead of adding it to the question."}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 0, "creation_date": 1558706245, "post_id": 56156505, "comment_id": 99200718, "body": "@oguzismail, I respectfully disagree. As you can see from the comments of  EdMorton,  CharlesDuffy, and  BenjaminW., many useful information emerged for SO users like me"}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1558706697, "post_id": 56156505, "comment_id": 99200991, "body": "@BenjaminW. I have added as answer. Still learning the SO style and etiquette :)"}], "answers": [{"comments": [{"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "edited": false, "score": 1, "creation_date": 1557950656, "post_id": 56156551, "comment_id": 98942752, "body": "Thank you Ed Morton for your expert guidance. I am trying to understand the code and run it on my data. As I said to Charles above, I need to work on my rudimentary scripting skills."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "edited": false, "score": 0, "creation_date": 1557950695, "post_id": 56156551, "comment_id": 98942777, "body": "You&#39;re welcome, feel free to ask questions (after a glance at the awk man page of course :-) ). The gsub()s at the start are explained where I set escOld and escNew in my answer at <a href=\"https://stackoverflow.com/a/29626460/1745001\">stackoverflow.com/a/29626460/1745001</a> (there it&#39;s sed but it&#39;s the same concept of turning RE metachars into literal chars)."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 4, "last_activity_date": 1557951506, "last_edit_date": 1557951506, "creation_date": 1557949319, "answer_id": 56156551, "question_id": 56156505, "link": "https://stackoverflow.com/questions/56156505/how-to-do-minimal-disk-i-o-on-search-and-replace-of-20k-terms-on-100-text-file/56156551#56156551", "title": "How to do minimal disk I/O on &#39;search and replace&#39; of 20k terms on 100 text files (each with 50k lines)", "body": "<p>Here's the complete approach (i.e. no surrounding shell loop or anything else required), using GNU awk for \"inplace\" editing:</p>\n\n<pre><code>awk -i inplace -F, '\nNR==FNR { if (NR&gt;1) { map[$1]=$3; map[$2]=$3 } print; next }\n{\n    for (term in map) {\n        gsub(term,map[term])\n    }\n    print\n}\n' terms_list.csv text_data_file_*.csv\n</code></pre>\n\n<p>Massage to suit. If looks like your terms_list file might contain RE metachars, for example, so you should think about whether or not you want to use them in a regexp, as you were doing in sed and so we are doing above with gsub(), or use a string operation like with index() and substr() instead of gsub() and also how you want to handle partial matches and/or cases where the first replacement creates a term that didn't previously exist which is then matched by the second replacement and so on.</p>\n\n<p>I suspect something like this (untested) would be both flexible and robust enough for your needs (it'll certainly be far more robust than the sed script you were running and literally orders of magnitude faster than your shell loop + sed approach):</p>\n\n<pre><code>awk -i inplace -F, '\nNR==FNR {\n    orig = $0\n\n    if (NR &gt; 1) {\n        gsub(/[^^]/,\"[&amp;]\",$1)\n        gsub(/\\^/,\"\\\\^\",$1)\n\n        gsub(/[^^]/,\"[&amp;]\",$2)\n        gsub(/\\^/,\"\\\\^\",$2)\n\n        gsub(/&amp;/,\"\\\\&amp;\",$3)\n\n        map[\"\\\\&lt;\"$1\"\\\\&gt;\"] = $3\n        map[\"\\\\&lt;\"$2\"\\\\&gt;\"] = $3\n    }\n\n    print orig\n    next\n}\n{\n    for (term in map) {\n        gsub(term,map[term])\n    }\n    print\n}\n' terms_list.csv text_data_file_*.csv\n</code></pre>\n\n<p>The gsubs are escaping any metachars so every char in the original and replacement text gets treated literally but then we're adding word boundaries around the whole of every original term to avoid partial matches.</p>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1557962221, "post_id": 56158453, "comment_id": 98946229, "body": "Make sure to escape any regexp metachars and backreferences too, see <a href=\"https://stackoverflow.com/q/29613304/1745001\">stackoverflow.com/q/29613304/1745001</a>."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558013282, "post_id": 56158453, "comment_id": 98966033, "body": "@EdMorton You just want me to admit that sed is in over its head with such a problem ;) I admit it! Maybe a disclaimer what would break this is in order..."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558013680, "post_id": 56158453, "comment_id": 98966310, "body": "I actually just want the OP to be comparing apples when she looks at the scripts and have something that works somewhat robustly in both cases. She definitely has RE metachars in here terms_list.csv as we can see <code>.</code>s in there and I&#39;m sure she&#39;d want them treated literally and I&#39;m also fairly sure she&#39;d have no idea they weren&#39;t being treated literally by a script if it wasn&#39;t pointed out :-)!"}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558707198, "post_id": 56158453, "comment_id": 99201272, "body": "@EdMorton your point was on spot. However, I am curious, how did you arrive at the conclusion that I am a female or male? ;)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558710165, "post_id": 56158453, "comment_id": 99202841, "body": "I haven&#39;t arrived at any conclusion about your gender, I just had to use <b>some</b> gender pronoun as <code>it</code> seems a tad impersonal :-)!"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558710375, "post_id": 56158453, "comment_id": 99202979, "body": "@EdMorton I like &quot;they&quot; if I don&#39;t know or want to assume."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558710476, "post_id": 56158453, "comment_id": 99203041, "body": "I prefer defaulting to <code>she</code> because too often we assume male for many roles and IMHO it&#39;s good to shake that assumption whenever possible. I guarantee if I had said <code>he</code> in my post I&#39;d never have heard about it if the OP were a woman, but frequently when I use <code>she</code> and the OP is a man I get &quot;why did you think I&#39;m a woman?&quot;. Gotta break those stereotypes :-)."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558711081, "post_id": 56158453, "comment_id": 99203324, "body": "@EdMorton See also books by Michael W. Lucas, or the Filfre blog :)"}, {"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558720021, "post_id": 56158453, "comment_id": 99207026, "body": "@EdMorton I use &#39;OP&#39; all the time. I would be curious in either cases; whether you use &#39;he&#39; or &#39;she&#39;. But you have got a good point."}], "tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1558017722, "last_edit_date": 1558017722, "creation_date": 1557959296, "answer_id": 56158453, "question_id": 56156505, "link": "https://stackoverflow.com/questions/56156505/how-to-do-minimal-disk-i-o-on-search-and-replace-of-20k-terms-on-100-text-file/56158453#56158453", "title": "How to do minimal disk I/O on &#39;search and replace&#39; of 20k terms on 100 text files (each with 50k lines)", "body": "<p>You could use sed to build a sed script from <code>terms_list.csv</code>:</p>\n\n<pre><code>sed '1d;s/,/|/;s|,|/|;s|.*|s/&amp;/g|' terms_list.csv\n</code></pre>\n\n<p>Which works as follows:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>1d           # Skip the first line\ns/,/|/       # Replace the first comma with a pipe\ns|,|/|       # Replace the second comma with a slash\ns|.*|s/&amp;/g|  # Wrap each line in s/ and /g\n</code></pre>\n\n<p>and has this output:</p>\n\n<pre><code>$ sed '1d;s/,/|/;s|,|/|;s|.*|s/&amp;/g|' terms_list.csv\ns/Mangifera indica|M. indica/Mangiferaindica/g\ns/Oryza sativa|O. sativa/Oryzasativa/g\n</code></pre>\n\n<p>Now, we use this output to run <code>sed -i</code> (requires GNU sed for in-place editing) on all the files we want to change:</p>\n\n<pre><code>sed '1d;s/,/|/;s|,|/|;s|.*|s/&amp;/g|' terms_list.csv | sed -i -Ef- text_data_file_*.csv\n</code></pre>\n\n<ul>\n<li><code>-E</code> enables extended regular expressions so we can use <code>|</code> for alternation</li>\n<li><code>-f-</code> reads the sed commands from standard input</li>\n</ul>\n\n<hr>\n\n<p>The first command could be made a bit more robust in terms of explicit word boundaries to avoid substring matches:</p>\n\n<pre><code>$ sed '1d;s/,/|/;s|,|)\\\\b/|;s|.*|s/\\\\b(&amp;/g|' terms_list.csv\ns/\\b(Mangifera indica|M. indica)\\b/Mangiferaindica/g\ns/\\b(Oryza sativa|O. sativa)\\b/Oryzasativa/g\n</code></pre>\n\n<p>where <code>\\b</code> denotes a word boundary (also a GNU sed extension).</p>\n\n<hr>\n\n<p>If the input contains any regex metacharacters, we have to escape them all, so the first command would become something like this:</p>\n\n<pre><code>sed '1d;s/[][*+{}()/\\|&amp;^$.?]/\\\\&amp;/g;s/,/|/;s|,|)\\\\b/|;s|.*|s/\\\\b(&amp;/g|' terms_list.csv\n</code></pre>\n\n<p>The important addition here is the first substition that takes care of metacharacters by escaping them with a backslash:</p>\n\n<pre><code>s/[][*+{}()/\\|&amp;^$.?]/\\\\&amp;/g\n</code></pre>\n\n<p>So for a worst case scenario where <code>terms_list.csv</code> contains something like</p>\n\n<pre><code>a[abc]*x+\\1{2}|-(o).^$?/\\a,other,abc&amp;\\1def\n</code></pre>\n\n<p>the generated command would look like</p>\n\n<pre><code>s/\\b(a\\[abc\\]\\*x\\+\\\\1\\{2\\}\\|-\\(o\\)\\.\\^\\$\\?\\/\\\\a|other)\\b/abc\\&amp;\\\\1def/g\n</code></pre>\n\n<p>There is a case that still isn't covered by this: if the input CSV file contains commas within one of the fields, you have to resort to a CSV parser for pre-processing. Commas are ignored when escaping regex metacharacters in the third solution.</p>\n"}, {"comments": [{"owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1558720348, "post_id": 56294243, "comment_id": 99207157, "body": "@EdMorton I accepted Benjamins answer first but I think I misunderstood his comment to add as new answer. Anyway, I have accepted his post as accepted answer. BTW, this is my first question and I am not familiar with the etiquette. I should probably pay more attention to read some SO guidelines (if available)."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1558720841, "post_id": 56294243, "comment_id": 99207348, "body": "No no, I meant that if you have your own, separate solution (like the Perl one), it&#39;s better to add it as an answer instead of making it part of the question. The question shouldn&#39;t contain solutions."}], "tags": [], "owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "is_accepted": false, "score": 0, "last_activity_date": 1558711367, "last_edit_date": 1558711367, "creation_date": 1558706506, "answer_id": 56294243, "question_id": 56156505, "link": "https://stackoverflow.com/questions/56156505/how-to-do-minimal-disk-i-o-on-search-and-replace-of-20k-terms-on-100-text-file/56294243#56294243", "title": "How to do minimal disk I/O on &#39;search and replace&#39; of 20k terms on 100 text files (each with 50k lines)", "body": "<p>UPDATE on 2019-05-24: </p>\n\n<p>After a bit of trial and error, I liked the approach by BenjaminW. However, I also adapted the approach for perl and found that perl (v5.22.1) outperformed sed (GNU sed 4.2.2) in this case. (With a very similar code--; needed at the end of pattern--, perl was roughly three times faster than sed. Please see the time command output. The fie outputs had similar word count results) I have posted the sed and perl codes below which worked for my current need.</p>\n\n<pre><code>#!/bin/bash\n##################################################\n##terms_list.csv content: About 20k lines\n#TermFull,TermAbbreviated,TermJoined\n#Mangifera indica,M. indica,Mangiferaindica\n#Oryza sativa,O. sativa,Oryzasativa\n\n## SCRIPT 1: sed\nsubstitution_with_sed(){\n    #First generate the substitution pattern script\n    sed '1d;s/[][*+{}()/\\|&amp;^$.?]/\\\\&amp;/g;s/,/|/;s|,|)\\\\b/|;s|.*|s/\\\\b(&amp;/g|' terms_list.csv &gt; terms_list.sed\n    #1d           # Skip the first line; which is the CSV header terms\n    #s/,/|/       # Replace the first comma with a pipe\n    #s|,|/|       # Replace the second comma with a slash\n    #s|.*|s/&amp;/g|  # Wrap each line in s/ and /g\n    #s/[][*+{}()/\\|&amp;^$.?]/\\\\&amp;/g #Escape any regex metacharacters with a backslash\n    ##'terms_list.sed' file content\n    #s/\\b(Mangifera indica|M. indica)\\b/Mangiferaindica/g\n    #s/\\b(Oryza sativa|O. sativa)\\b/Oryzasativa/g\n\n    for DATA_FILE in ./DIR/DATA_CSV_FILE*.csv; # About 100k DATA_CSV_FILE*.csv files\n    do\n        FILE=\"$(basename $DATA_FILE)\"\n        echo \"Running SED on $DATA_FILE and $FILE\"\n        echo \"sed -E -f terms_list.sed &lt; $DATA_FILE &gt; sed-out-$FILE\"\n        time sed -E -f terms_list.sed &lt; $DATA_FILE &gt; sed-out-$FILE\n        #-E enables extended regular expressions so we can use | for alternation\n        #-f- reads the sed commands from standard input\n        # # real    25m55.369s\n        # # user    25m54.976s\n        # # sys     0m0.336s\n    done\n}\n\n## SCRIPT 2: perl\nsubstitution_with_perl(){\n\n#First generate the substitution script\nsed '1d;s/[][*+{}()/\\|&amp;^$.?]/\\\\&amp;/g;s/,/|/;s|,|)\\\\b/|;s|.*|s/\\\\b(&amp;/g;|' terms_list.csv &gt; terms_list.perl\n    ##'terms_list.perl' file content\n    #s/\\b(Mangifera indica|M. indica)\\b/Mangiferaindica/g;\n    #s/\\b(Oryza sativa|O. sativa)\\b/Oryzasativa/g;\n\n    for DATA_FILE in ./DIR/DATA_CSV_FILE*.csv;\n    do\n        FILE=\"$(basename $DATA_FILE)\"\n        echo \"Running PERL on $DATA_FILE and $FILE\"\n        echo \"perl -p terms_list.perl &lt; $DATA_FILE &gt; perl-out-$FILE\"\n        time perl -p terms_list.perl &lt; $DATA_FILE &gt; perl-out-$FILE\n        ## Read substitution pattern command from file with -p flag\n        # # real    0m8.120s\n        # # user    0m8.072s\n        # # sys     0m0.044s\n    done\n}\n#####################################################\n\n##Call functions\nsubstitution_with_sed\nsubstitution_with_perl\n\n#Raw data\n#ID000001,Mangifera indica, commonly known as mango, is a species of flowering plant in the sumac and poison ivy family Anacardiaceae. M. indica is a popular fruit in India. \n#ID000002,Oryza sativa, commonly known as Asian rice, is the plant species most commonly referred to in English as rice. O. sativa contains two major subspecies: the sticky, short-grained #japonica or sinica variety, and the nonsticky, long-grained indica rice variety.\n\n#Desired processed output data in 'sed-out-$FILE'/'perl-out-$FILE' file content\n#ID000001,Mangiferaindica, commonly known as mango, is a species of flowering plant in the sumac and poison ivy family Anacardiaceae. Mangiferaindica is a popular fruit in India. \n#ID000002,Oryzasativa, commonly known as Asian rice, is the plant species most commonly referred to in English as rice. Oryzasativa contains two major subspecies: the sticky, short-grained japonica or sinica variety, and the nonsticky, long-grained indica rice variety.\n</code></pre>\n\n<p>@EdMorton, @CharlesDuffy, @BenjaminW, thanks again for your comments and solutions. The info you have provided was immensely useful for me and I have learned a lot in the past week. I have taken your suggestions and summarize/document below for naive coders like me.</p>\n\n<ol>\n<li><p>Thanks @EdMorton. Be careful about the meta charterers in substitution pattern! I have . in my data and it means 'everything' in RegExp. That needs to be escaped with backslash.</p></li>\n<li><p>Thanks to @CharlesDuffy; When iterating over lots of items or lines with any loop in shell, use of any external tool inside that loop will considerably decrease efficiency. The new code below is highly efficient compared to the code above.</p></li>\n<li><p>Thanks to @CharlesDuffy; while IFS=, read -r x y z _; do will read CSV and assign variables.</p></li>\n<li><p>Thanks to @CharlesDuffy; echo \"File: $DATA_FILE x: $x | y: $y | z: $z\" ;passing everything to echo as a single string is better than what I have in my initial code above.</p></li>\n</ol>\n\n<p>I am also curious regarding a python solution and I will update when I have a working code and some benchmarks.</p>\n"}], "owner": {"reputation": 700, "user_id": 848989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad26ad2aa6938689f905cbd51ff72744?s=128&d=identicon&r=PG", "display_name": "Insilico", "link": "https://stackoverflow.com/users/848989/insilico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 56158453, "answer_count": 3, "score": 2, "last_activity_date": 1558722744, "creation_date": 1557949053, "last_edit_date": 1558722744, "question_id": 56156505, "link": "https://stackoverflow.com/questions/56156505/how-to-do-minimal-disk-i-o-on-search-and-replace-of-20k-terms-on-100-text-file", "title": "How to do minimal disk I/O on &#39;search and replace&#39; of 20k terms on 100 text files (each with 50k lines)", "body": "<p>I would like to do a \u2018search and replace\u2019 on about 100 data files with unstructured text. Each of the files are about 50 MB in size and 50k lines. There are about 20k terms to do search and replace, which are stored in another file; 'terms_list.csv', a CSV format file with three columns COL1, COL2, and COL3. I need to search for words in COL1 and COL2 of 'terms_list.csv' in each of the 100 data files and replace with the corresponding word in COL3, if either of the words are found. </p>\n\n<p>With my basic knowledge of shell scripting, I wrote the following shell script using AWK/SED to loop. It reads lines one by one from 20k lines  \u2018terms_list.csv\u2019 and search for COL1 and COL2 in each of the 100 files, and if found, will replace with COL3. </p>\n\n<pre><code>for DATA_FILE in $(ls text_data_file_*.csv) #Data files (100 files) with 50k lines; contain terms in COL1 and COL2 of terms_list.csv\ndo\n   while read -r line;  \n       do\n           x=$(echo $line | awk -F',' '{print $1}'); \\\n           y=$(echo $line | awk -F',' '{print $2}'); \\\n           z=$(echo $line | awk -F',' '{print $3}'); \\\n           echo \"File: \" $DATA_FILE \" x: \"$x \"|\" \"y: \"$y \"|\" \"z: \"$z ; \\\n           sed -i \"s/$x/$z/;s/$y/$z/g\" $DATA_FILE\n       done &lt; terms_list.csv #20k lines in CSV format; each with search terms COL1,COL2, and replace term COL3\ndone\n</code></pre>\n\n<p>I am positive that there is a better/efficient code than above to accomplish the task as this require a lot of disk read/write. Any suggestions to improve? If there are better tools (perl/python) for this task, could you please give me some suggestions/directions to look at? </p>\n\n<p>Below are a sample data for both of the files:</p>\n\n<ol>\n<li><p>\u2018text_data_file_0001.csv\u2019:  One of the 100 data files, \u2018text_data_file_0001.csv\u2019 contain unstructured data as below which contain   \u2018TermFull\u2019 and \u2018TermAbbreviated\u2019 among the text. [size of each file is about 50 MB and 50k lines]</p>\n\n<pre><code>ID000001,Mangifera indica, commonly known as mango, is a species of flowering plant in the sumac and poison ivy family Anacardiaceae. M. indica is a popular fruit in India. \nID000002,Oryza sativa, commonly known as Asian rice, is the plant species most commonly referred to in English as rice. O. sativa contains two major subspecies: the sticky, short-grained japonica or sinica variety, and the nonsticky, long-grained indica rice variety.\n</code></pre></li>\n<li><p>'terms_list.csv' file: The search terms 'TermFull' and 'TermAbbreviated', and replace term 'TermJoined' are stored in \u2018terms_list.csv\u2019 contains 20k lines as below</p>\n\n<pre><code>TermFull,TermAbbreviated,TermJoined\nMangifera indica,M. indica,Mangiferaindica\nOryza sativa,O. sativa,Oryzasativa\n</code></pre></li>\n<li><p>Required output file \u2018text_data_file0001.csv\u2019 is as below with \u2018TermFull\u2019 and \u2018TermAbbreviated\u2019 replaced with \u2018TermJoined\u2019</p>\n\n<pre><code>ID000001,Mangiferaindica, commonly known as mango, is a species of flowering plant in the sumac and poison ivy family Anacardiaceae. Mangiferaindica is a popular fruit in India. \nID000002,Oryzasativa, commonly known as Asian rice, is the plant species #most commonly referred to in English as rice. Oryzasativa contains two major subspecies: the sticky, short-grained japonica or sinica variety, and the nonsticky, long-grained indica rice variety.\n</code></pre></li>\n</ol>\n"}, {"tags": ["perl", "while-loop", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557941801, "post_id": 56154724, "comment_id": 98938926, "body": "Can you state what the code wants to accomplish?  (Increment all 0 values, and print when it&#39;s 1 ... ?)"}, {"owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557942347, "post_id": 56154724, "comment_id": 98939177, "body": "It is short version of my code presented only to reproduce my problem. I would like to get the same result as first one but display when value 1 exist.  I&#39;m surprised that iteration in second code does not work as I expected (similarly as 1 code)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557942650, "post_id": 56154724, "comment_id": 98939333, "body": "These overlaying <code>while</code>s where you poke at the hash&#39;s iterator just ask for trouble; your first sample works just barely. See @schwern&#39;s answer.  If you want to do more inside the inner loop I&#39;d strongly recommend to rewrite that.  But I don&#39;t see what you want, since the output of the first code is mysterious to me. So: can you state in words the purpose of the code?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557944677, "post_id": 56154724, "comment_id": 98940183, "body": "Tip: That <code>next</code> is useless."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1557942129, "creation_date": 1557942129, "answer_id": 56154969, "question_id": 56154724, "link": "https://stackoverflow.com/questions/56154724/perl-iterating-over-hash-does-not-work-with-nested-grep-in-while-condition/56154969#56154969", "title": "Perl: Iterating over hash does not work with nested grep in while condition", "body": "<p><a href=\"https://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\"><code>each</code></a> is fraught with peril. Every hash has its own iterator. It uses this for things like <code>each</code>, <code>keys</code>, and <code>values</code>.</p>\n\n<p><code>each(%ConnectionsIP)</code> iterates its way through each pair in <code>%ConnectionsIP</code> returning one key/value pair at a time. It uses <code>%ConnectionsIP</code>'s iterator to remember where it is.</p>\n\n<p><code>keys %ConnectionsIP</code> iterates through all the keys of <code>%ConnectionsIP</code> returning them all as an array. In doing so <strong><em>it resets the iterator</em></strong>.</p>\n\n<blockquote>\n  <p>Each hash or array has its own internal iterator, accessed by each, keys, and values. The iterator is implicitly reset when each has reached the end as just described; it can be explicitly reset by calling keys or values on the hash or array. If you add or delete a hash's elements while iterating over it, the effect on the iterator is unspecified;</p>\n</blockquote>\n\n<pre><code>my $i = 0;\nwhile (grep { $ConnectionsIP{$_} eq '0' } keys %ConnectionsIP){\n    while ((my $key, my $value) = each (%ConnectionsIP)){\n         print \"KEY: $key, VAL: $value\\n\";\n         $ConnectionsIP{$key} = $i++;\n         next;\n    }\n}\n</code></pre>\n\n<p>This is safe because you call <code>keys</code>, resetting the iterator. And then do a complete iteration with <code>each</code>. The call to <code>keys</code> does not interfere with the call to <code>each</code>.</p>\n\n<pre><code>my $i = 0;\nwhile (grep { $ConnectionsIP{$_} eq '0' } keys %ConnectionsIP){\n    while ((my $key, my $value) = each (%ConnectionsIP)){\n         print \"KEY: $key, VAL: $value\\n\";\n         $ConnectionsIP{$key} = $i++;\n\n         if (grep { $ConnectionsIP{$_} eq '1' } keys %ConnectionsIP){\n             print \"I have 1!\\n\";\n             sleep 10;\n         }\n         next;\n    }\n}\n</code></pre>\n\n<p>This is not safe. While <code>each</code> is iterating through <code>%ConnectionsIP</code> you're calling <code>keys %ConnectionsIP</code> resetting <code>each</code>'s iterator.</p>\n\n<p>Rule of thumb: don't mix <code>keys</code> and <code>values</code> with <code>each</code>.</p>\n\n<hr>\n\n<p>There's a couple ways to fix this. You could use <a href=\"https://metacpan.org/pod/Hash::StoredIterator\" rel=\"nofollow noreferrer\">Hash::StoredIterator</a> which lets you independently iterate over a hash.</p>\n\n<pre><code>use Hash::StoredIterator qw{\n    iterator\n};\n\nmy $i = 0;\nwhile (grep { $ConnectionsIP{$_} eq '0' } keys %ConnectionsIP) {\n    # Create an iterator independent of the shared one in %ConnectionsIP\n    my $connections_iter = iterator %ConnectionsIP;\n    while (my($key, $value) = $connections_iter-&gt;()){\n         print \"KEY: $key, VAL: $value\\n\";\n         $ConnectionsIP{$key} = $i++;\n\n         if (grep { $ConnectionsIP{$_} eq '1' } keys %ConnectionsIP){\n             print \"I have 1!\\n\";\n         }\n         next;\n    }\n}\n</code></pre>\n\n<p>Or, and this is better, you can rework your code to not do so many loops within loops within loops. Your code will take <code>n^3</code> to run, meaning as the number of keys in <code>%ConnectionsIP</code> increases the time will be cubed. 3 takes 27. 4 takes 64. 5 takes 125.</p>\n\n<p>Fortunately your code looks like it's just some code to test out this behavior.</p>\n"}], "owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56154969, "answer_count": 1, "score": 0, "last_activity_date": 1557942129, "creation_date": 1557941224, "question_id": 56154724, "link": "https://stackoverflow.com/questions/56154724/perl-iterating-over-hash-does-not-work-with-nested-grep-in-while-condition", "title": "Perl: Iterating over hash does not work with nested grep in while condition", "body": "<p>I'm facing an issue related to while condition.\nMy simple hash:</p>\n\n<pre><code>my %ConnectionsIP = (\n                '10.130.20.21' =&gt; 0,\n                '10.130.20.22' =&gt; 0,\n                '10.130.20.23' =&gt; 0,\n                '10.130.20.24' =&gt; 0\n            );\n</code></pre>\n\n<p>The code below works for me as I expected. </p>\n\n<pre><code>my $i = 0;\nwhile (grep { $ConnectionsIP{$_} eq '0' } keys %ConnectionsIP){\n    while ((my $key, my $value) = each (%ConnectionsIP)){\n         print \"KEY: $key, VAL: $value\\n\";\n         $ConnectionsIP{$key} = $i++;\n         next;\n    }\n}\n</code></pre>\n\n<p>Each pair (key, value) is displaying properly during executing. The problem is the next grep inside second while condition:</p>\n\n<pre><code>my $i = 0;\nwhile (grep { $ConnectionsIP{$_} eq '0' } keys %ConnectionsIP){\n    while ((my $key, my $value) = each (%ConnectionsIP)){\n         print \"KEY: $key, VAL: $value\\n\";\n         $ConnectionsIP{$key} = $i++;\n\n         if (grep { $ConnectionsIP{$_} eq '1' } keys %ConnectionsIP){\n             print \"I have 1!\\n\";\n             sleep 10;\n         }\n         next;\n    }\n}\n</code></pre>\n\n<p>During executing the second code still is printing the same key with increasing value. What is the reason of this? Thanks for each feedback and solutions :)</p>\n"}, {"tags": ["regex", "perl", "latex", "comments", "tex"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1560135234, "last_edit_date": 1560135234, "creation_date": 1557939975, "answer_id": 56154415, "question_id": 56154192, "link": "https://stackoverflow.com/questions/56154192/regex-for-substituting-only-to-the-left-of-latex-comments/56154415#56154415", "title": "RegEx for substituting only to the left of LaTeX comments", "body": "<p>One way: Extract all text up to (unescaped) <code>%</code> then run replacement in that</p>\n\n<pre><code>s/ (.*?) ([^\\\\]%.*) /$r=$2; $1=~s{dog}{CAT}gr . $r/egx;\n</code></pre>\n\n<p>The <code>/e</code> modifier makes the replacement side be evaluated as code, and we run a regex in it.</p>\n\n<p>There we need to first save away the \"rest\" of the line (after <code>%</code>), captured in <code>$2</code>, since <code>$2</code> will get cleared in the coming regex. </p>\n\n<p>The modifier <code>/r</code> in that regex makes it return the transformed string, convenient for forming the value to be used as the replacement (by concatenating it with the rest of the line).  Also, having the original unchanged under <code>/r</code> allows us to use substitution on <code>$1</code> (which is read-only).</p>\n\n<hr>\n\n<p>The <code>[^\\\\]</code> above requires a character other than <code>\\</code> to precede <code>%</code>, for the comment to start. However, as it requries a character it makes the whole regex match if the line starts with <code>%</code> <em>and</em> has further unescaped <code>%</code>, which is wrong.  This is quite possible: a line has some commented text (<code>%...</code>), and at some point also gets commented out altogether.</p>\n\n<p>If this is indeed a concern use a negative lookahead instead</p>\n\n<pre><code>s{ (.*?) ((?&lt;!\\\\)%.*)? $ }{ $r=($2//''); $1=~s{dog}{CAT}gr . $r}egx;\n</code></pre>\n\n<p>Note that the (necessary) backtracking in this hurts efficiency.  That should not be a problem for an occasional Latex file, but if it is done <em>a lot</em> it may be. In this case parse each line properly, whereby lookarounds won't be needed.</p>\n\n<p>Test, with input file <code>data.txt</code></p>\n\n<pre>\nOne dog 5\\% of dogs % dog\n%dog more than 10\\% of % dogs\ndogs \\% and dogs\n</pre>\n\n<p>The one-liner </p>\n\n<pre><code>perl -nwe'\n    s{ (.*?) ((?&lt;!\\\\)%.*)? $}{$r=($2//\"\"); $1=~s{dog}{CAT}gr . $r}egx; print\n' data.txt\n</code></pre>\n\n<p>prints</p>\n\n<pre>\nOne CAT 5\\% of CATs % dog\n%dog more than 10\\% of % dogs\nCATs \\% and CATs\n</pre>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1557962189, "post_id": 56154463, "comment_id": 98946224, "body": "Could you give an example of the better way, parsing the string into tokens? And could it be written as a perl script that operates on a file? With the default input record separator, it would work on one line at a time, and of course there would be no hard-coded definition of <code>$str</code> inside the code."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1557965631, "post_id": 56154463, "comment_id": 98946862, "body": "@JacobWegelin I added an example. This concept probably won&#39;t map well to a one liner but it could certainly be used in a perl script as you describe."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1557970071, "last_edit_date": 1557970071, "creation_date": 1557940213, "answer_id": 56154463, "question_id": 56154192, "link": "https://stackoverflow.com/questions/56154192/regex-for-substituting-only-to-the-left-of-latex-comments/56154463#56154463", "title": "RegEx for substituting only to the left of LaTeX comments", "body": "<p>It may be simpler to break it into two tasks: find the part of the string that isn't a comment, and then do your substitution on that part. Here's one approach for that:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $str = 'One dog ate a rat but 5\\% of dogs ate the apple % dog??';\nif (my ($first, $second) = $str =~ m/\\A(.*?)((?&lt;!\\\\)%.*)?\\z/s) {\n  $first =~ s/dog/CAT/g;\n  $str = defined $second ? \"$first$second\" : $first;\n}\n</code></pre>\n\n<p>This uses a <a href=\"https://perldoc.pl/perlretut#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">negative lookbehind</a> to find the first unescaped percent sign, even if it's the first character of the string, and makes the comment half optional so it will still substitute if there's no comment. However it will still involve a lot of <a href=\"https://perldoc.pl/perlre#Backtracking\" rel=\"nofollow noreferrer\">backtracking</a> so if performance is a concern a more extensive implementation may be preferable.</p>\n\n<p>EDIT: The reason that this seems so complex is that you're trying to do something regex isn't really great at. You want to find things in a string based on contextual state. The \"better\" way to do this is to parse the string into tokens, which is generally done with a loop that keeps state and a regex (which is good at this part); even if it's just tokens of \"non-comment string\", \"comment start\", \"comment string\". Then you can easily operate on only the non-comment strings.</p>\n\n<p>Here's how an expanded algorithm might look, I tried to simplify it to the amount of parsing needed for this case and it could certainly be golfed further. The key is to use <code>m/\\G.../g</code> to incrementally parse the string (<code>\\G</code> anchors the match to the end of the last match with the <code>/g</code> modifier in scalar context), and rely on the regex engine picking the first alternation option that matches that point in the string. This way you go through the string sequentially with no backtracking, and keep the state outside the loop.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $str = 'One dog ate a rat but 5\\% of dogs ate the apple % dog??';\nmy $in_comment;\nmy ($text, $comment) = ('','');\nwhile ($str =~ m/\\G(((?&lt;!\\\\)%)|%|[^%]+)/g) {\n  my ($token, $start_comment) = ($1, $2);\n  $in_comment = 1 if defined $start_comment;\n  if ($in_comment) {\n    $comment .= $token;\n  } else {\n    $text .= $token;\n  }\n}\n$text =~ s/dog/CAT/g;\n$str = \"$text$comment\";\n</code></pre>\n\n<p>Here's a different tokenizing approach that allows you to handle escaped backslashes, if this is allowed, by keeping track of whether the next token is being escaped:</p>\n\n<pre><code>my $escaping;\nwhile ($str =~ m/\\G((\\\\+)|(%)|[^\\\\%]+)/g) {\n  my ($token, $backslashes, $percent) = ($1, $2, $3);\n  $in_comment = 1 if defined $percent and !$escaping;\n  $escaping = (defined $backslashes and length($backslashes) % 2) ? 1 : 0;\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Parser::MGC\" rel=\"nofollow noreferrer\">Parser::MGC</a> is an abstraction of this concept to an object interface.</p>\n\n<p>(Also: this method will not always be faster than a single backtracking regex, especially with simpler parsing and shorter lines.)</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557945479, "post_id": 56154599, "comment_id": 98940567, "body": "(1) &quot;<i>it does not require a space to precede the <code>%</code></i>&quot; -- if that refers to the quoted answer (mine) then note that in my answer no space is required. The space that was there was not a part of the pattern but for readability, by <code>&#47;x</code> (also removed now). (2) This doesn&#39;t work -- no replacements on the second line?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557947558, "post_id": 56154599, "comment_id": 98941457, "body": "(the lookarounds can be tricky. see my updated answer as well)"}], "tags": [], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "is_accepted": false, "score": 0, "last_activity_date": 1557940693, "creation_date": 1557940693, "answer_id": 56154599, "question_id": 56154192, "link": "https://stackoverflow.com/questions/56154192/regex-for-substituting-only-to-the-left-of-latex-comments/56154599#56154599", "title": "RegEx for substituting only to the left of LaTeX comments", "body": "<p>A more prolix and detailed solution, building on zdim's:</p>\n\n<pre><code>bash: cat aaa\ndog and dogs and many many dogs% dog\ndog and dogs and many many dogs\\% dog\nbash: cat aaa | perl -n -e 'use strict; use warnings; my $r; s/ (.*?) ((?&lt;!\\x5c)%.*) /$r=$2; $1=~s{dog}{CAT}gr . $r/egx; print;'\nCAT and CATs and many many CATs% dog\ndog and dogs and many many dogs\\% dog \n</code></pre>\n\n<p>Note this allows a comment marker immediately after non-comment text; it does not require a space to precede the %.</p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "is_accepted": false, "score": 0, "last_activity_date": 1558111484, "creation_date": 1558111484, "answer_id": 56190481, "question_id": 56154192, "link": "https://stackoverflow.com/questions/56154192/regex-for-substituting-only-to-the-left-of-latex-comments/56190481#56190481", "title": "RegEx for substituting only to the left of LaTeX comments", "body": "<pre><code>#!/usr/bin/perl\n# Default input record separator: one line at a time.\n# Read through a LaTeX file line by line. Distinguish comment from text.\n# Parse each line into exactly 2 tokens. \n# Boundary between tokens is the first non-escaped %.\n# $text: everything up to, but excluding, boundary if exists; else entire line.\n# $comment: possibly null, from the first non-escaped % to end of line. \n# Last (pathological) line might not end in LF, hence LF is excluded from tokens and appended at the end.\n# Consequently, output will end in LF whether input did or not.\nuse strict;\nuse warnings;\nuse 5.18.2;\nmy $text;\nmy $comment;\nwhile (&lt;&gt;) {\n    # Non-greedy: match until first non-escaped %\n    # Without final ([\\n]?), pathological last line would not match and an entire last line of comment would be mistaken for text.\n    if (m/(^.*?)((?&lt;!\\x5c)%.*)([\\n]?)/) {\n        $text=$1;\n        $comment=\"$2\";\n    }\n    else {\n        s/\\n//g; # There can be at most one LF, at the end; remove it if it exists.\n        $text=$_;\n        $comment=\"\";\n    }\n    # Here, \n    # (1) examine $text for LaTeX-illegal characters; if found, exit with informative error\n    # (2) identify LaTeX environments such as \\verbatim and \\verb, which are to be left alone\n    # (3) perform any desired global changes on remaining text\n    $text=~s/dog/CAT/g;\n    # Add LF back in which we explicitly removed above \n    print \"$text$comment\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1560135234, "creation_date": 1557939086, "last_edit_date": 1557940444, "question_id": 56154192, "link": "https://stackoverflow.com/questions/56154192/regex-for-substituting-only-to-the-left-of-latex-comments", "title": "RegEx for substituting only to the left of LaTeX comments", "body": "<p>The file that I am transforming (LaTeX) contains comments, which lie to the right of a %. Any non-escaped percent sign marks a comment.</p>\n\n<p>Using perl, I want to perform regex substitutions, say </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>s/dog/CAT/g\n</code></pre>\n\n<p>but only in non-commented text. Thus the lines </p>\n\n<blockquote>\n  <p>One dog ate a rat but 5\\% of dogs ate the apple % dog??</p>\n  \n  <p>My dog is smarter than your honor student</p>\n</blockquote>\n\n<p>would be transformed to</p>\n\n<blockquote>\n  <p>One CAT ate a rat but 5\\% of CATs ate the apple % dog??</p>\n  \n  <p>My CAT is smarter than your honor student</p>\n</blockquote>\n\n<p>Here, of course, is how to match a non-escaped percent sign:</p>\n\n<pre><code>bash: cat aaa\ndog % cat\ndog \\% cat\nbash: cat aaa | perl -n -e 'use strict; use warnings; print if (m/(?&lt;!\\x5c)%/)'\ndog % cat\nbash: \n</code></pre>\n\n<p>This must be a well-known question but I did not find the right search terms to find the answer. Can one not do this in perl with a single regex? Obviously, my substitution regex would substitute <strong>every</strong> <code>dog</code> with <code>CAT</code>, even in comments.</p>\n"}, {"tags": ["perl", "csh"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 6, "last_activity_date": 1557929814, "creation_date": 1557929814, "answer_id": 56151524, "question_id": 56151445, "link": "https://stackoverflow.com/questions/56151445/perl-m-will-not-find-a-hardcoded-path-to-a-module/56151524#56151524", "title": "Perl -M will not find a hardcoded path to a module", "body": "<p>You cannot, as the <code>-M</code> option is translated to a <a href=\"https://perldoc.pl/functions/use\" rel=\"noreferrer\">use</a> statement which takes only module names, not paths. However, you can add the path to be the first module search path using the <code>-I</code> option. Modules are searched relative to each <a href=\"https://perldoc.pl/variables/@INC\" rel=\"noreferrer\">search path</a> by translating them like <code>Foo::Bar</code> -> <code>Foo/Bar.pm</code>.</p>\n\n<pre><code>perl -I/home/hard/coded/path -Mlib=theFunction\n</code></pre>\n\n<p>As a note, you should definitely not call your module or package <code>lib</code>, because this is an important core module (in fact, it's what <code>-I</code> is using here).</p>\n"}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 56151524, "answer_count": 1, "score": 1, "last_activity_date": 1557929814, "creation_date": 1557929543, "question_id": 56151445, "link": "https://stackoverflow.com/questions/56151445/perl-m-will-not-find-a-hardcoded-path-to-a-module", "title": "Perl -M will not find a hardcoded path to a module", "body": "<h1>Background</h1>\n\n<p>Inside a chsell script, I am invoking a subroutine from a perl module and saving its result to a variable in the <a href=\"https://stackoverflow.com/a/4377417/8981474\">following manner</a>:</p>\n\n<pre><code>set result =`perl -M/some/hard/coded/path/lib.pm=theFunction -e 'theFunction( $A_VARIABLE_ARGUMENT )'`\n</code></pre>\n\n<p>Despite the fact that I explicitly specify the module, my script throws this error:</p>\n\n<blockquote>\n  <p>Module name required with -M option</p>\n</blockquote>\n\n<h1>Question</h1>\n\n<p>How do I invoke a hardcoded module with perl's -M option?</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557921174, "post_id": 56148694, "comment_id": 98926668, "body": "What OS are you using?"}, {"owner": {"reputation": 345, "user_id": 3775097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765520816f6152e384057e77b0038f8?s=128&d=identicon&r=PG&f=1", "display_name": "Esakki Thangam", "link": "https://stackoverflow.com/users/3775097/esakki-thangam"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557921722, "post_id": 56148694, "comment_id": 98927030, "body": "Debian (Stretch) 9.9"}, {"owner": {"reputation": 345, "user_id": 3775097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765520816f6152e384057e77b0038f8?s=128&d=identicon&r=PG&f=1", "display_name": "Esakki Thangam", "link": "https://stackoverflow.com/users/3775097/esakki-thangam"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557921905, "post_id": 56148694, "comment_id": 98927164, "body": "Required packages are already installed and located in  the below path /usr/share/perl5 .  @INC array also have this path. But, still i&#39;m getting this error.  I don&#39;t know what is missing?."}, {"owner": {"reputation": 176, "user_id": 3783949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93603cf04d8f41130318b4072cafdd2?s=128&d=identicon&r=PG", "display_name": "Roberto Paz", "link": "https://stackoverflow.com/users/3783949/roberto-paz"}, "edited": false, "score": 0, "creation_date": 1557925068, "post_id": 56148694, "comment_id": 98929189, "body": "What is the absolute path for &quot;stat.pm&quot; file? Should be something like this: <i>/usr/share/perl/5.24/File/stat.pm</i>"}, {"owner": {"reputation": 345, "user_id": 3775097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765520816f6152e384057e77b0038f8?s=128&d=identicon&r=PG&f=1", "display_name": "Esakki Thangam", "link": "https://stackoverflow.com/users/3775097/esakki-thangam"}, "edited": false, "score": 0, "creation_date": 1557925212, "post_id": 56148694, "comment_id": 98929285, "body": "Find.pm has located into the path  /usr/share/perl/5.24.1/File/Find.pm , Stat.pm has located into  the below path /apps/sl-gehirn/gehirn/local/lib/perl5/Path/Class/File/Stat. pm"}, {"owner": {"reputation": 176, "user_id": 3783949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93603cf04d8f41130318b4072cafdd2?s=128&d=identicon&r=PG", "display_name": "Roberto Paz", "link": "https://stackoverflow.com/users/3783949/roberto-paz"}, "edited": false, "score": 0, "creation_date": 1557926297, "post_id": 56148694, "comment_id": 98930014, "body": "Well, both errors messages are right then. If you check the path for every file, is not included in any of the directories listed in the @INC array. Try to reinstall &quot;perl-modules&quot; package."}, {"owner": {"reputation": 176, "user_id": 3783949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93603cf04d8f41130318b4072cafdd2?s=128&d=identicon&r=PG", "display_name": "Roberto Paz", "link": "https://stackoverflow.com/users/3783949/roberto-paz"}, "edited": false, "score": 0, "creation_date": 1557926385, "post_id": 56148694, "comment_id": 98930075, "body": "Reinstall package: <i>sudo apt-get --reinstall install perl-modules-5.24</i>"}, {"owner": {"reputation": 345, "user_id": 3775097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765520816f6152e384057e77b0038f8?s=128&d=identicon&r=PG&f=1", "display_name": "Esakki Thangam", "link": "https://stackoverflow.com/users/3775097/esakki-thangam"}, "reply_to_user": {"reputation": 176, "user_id": 3783949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93603cf04d8f41130318b4072cafdd2?s=128&d=identicon&r=PG", "display_name": "Roberto Paz", "link": "https://stackoverflow.com/users/3783949/roberto-paz"}, "edited": false, "score": 0, "creation_date": 1557927293, "post_id": 56148694, "comment_id": 98930680, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/193400/discussion-between-esakki-thangam-and-roberto-paz\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1557932802, "creation_date": 1557932802, "answer_id": 56152499, "question_id": 56148694, "link": "https://stackoverflow.com/questions/56148694/how-to-resolve-inc-related-issue-in-perl/56152499#56152499", "title": "How to resolve @INC related issue in Perl", "body": "<p>File::stat has been a part of the standard Perl distribution since Perl 5.004 in 1997. There should never be a reason to install it separately. If you find yourself in that situation, then something has gone badly wrong in your Perl installation and I would strongly suggest reinstalling from scratch using the pre-built packages supplied by your Linux distribution.</p>\n"}], "owner": {"reputation": 345, "user_id": 3775097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765520816f6152e384057e77b0038f8?s=128&d=identicon&r=PG&f=1", "display_name": "Esakki Thangam", "link": "https://stackoverflow.com/users/3775097/esakki-thangam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557932802, "creation_date": 1557921029, "question_id": 56148694, "link": "https://stackoverflow.com/questions/56148694/how-to-resolve-inc-related-issue-in-perl", "title": "How to resolve @INC related issue in Perl", "body": "<p>I am getting the following error, while run the perl script.</p>\n\n<p>Can't locate <strong>File/stat.pm in @INC</strong> (you may need to install the File::stat module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/local/share/perl/5.24.1/Path/Class/Entity.pm line 9.</p>\n\n<p>I have <strong>tried to install the missing package thorugh CPAN install</strong>.\nWhen i tried CPAN ,I am getting the  following error </p>\n\n<p>Can't locate <strong>File/Find.pm in @INC</strong> (you may need to install the File::Find module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl/5.24/CPAN/CacheMgr.pm line 8.</p>\n\n<p>Can u please any one help me to resolve the issue.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": true, "score": 1, "last_activity_date": 1557922002, "creation_date": 1557922002, "answer_id": 56148991, "question_id": 56148404, "link": "https://stackoverflow.com/questions/56148404/remove-msisdn-element-based-on-regex/56148991#56148991", "title": "remove msisdn element based on regex", "body": "<p>Try with:</p>\n\n<pre><code>...\nif ($key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} =~ /^(?!962)/)\n{\n    delete $key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'};\n}\n</code></pre>\n\n<p><strong>The changes:</strong></p>\n\n<p>For deleting a key, use <strong><a href=\"https://perldoc.perl.org/functions/delete.html\" rel=\"nofollow noreferrer\">delete</a></strong></p>\n\n<p>For a \"not starting with\" regex, use: <code>^(?!WHATEVER)</code>, for example <code>^(?!962)</code></p>\n"}], "owner": {"reputation": 877, "user_id": 10323800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNzS6.png?s=128&g=1", "display_name": "Mahmoud Odeh", "link": "https://stackoverflow.com/users/10323800/mahmoud-odeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56148991, "answer_count": 1, "score": 1, "last_activity_date": 1557941216, "creation_date": 1557920068, "last_edit_date": 1557941216, "question_id": 56148404, "link": "https://stackoverflow.com/questions/56148404/remove-msisdn-element-based-on-regex", "title": "remove msisdn element based on regex", "body": "<p>I'm trying to remove <code>msisdn</code> field from MO calls on TAP3.11, but it doesn't handle the needed.</p>\n\n<p>I want to set a condition, if the Msisdn doesn't start with 962 then remove the element.</p>\n\n<p>My background is only with python, this's the first time with perl. I use it because after searching I believe that only perl can handle TAP files.</p>\n\n<pre><code># Will scan all the calls for MTC's.\nforeach $key ( @{$struct-&gt;{'transferBatch'}-&gt;{'callEventDetails'} } ) {\n\n    foreach ( keys %{$key} ) {\n\n        if ( $_ eq \"mobileOriginatedCall\" )\n        {\n            if ( defined $key-&gt;{$_}-&gt;{'basicCallInformation'} )\n            {\n                if ( defined $key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'} )\n                {\n                    if ( defined $key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'})\n                    {\n                        if ( defined $key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'})\n                        {\n                            if ($key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'} =~ /^[962]/)\n                            {\n                                $key-&gt;{$_}-&gt;{'basicCallInformation'}-&gt;{'chargeableSubscriber'}-&gt;{'simChargeableSubscriber'}-&gt;{'msisdn'}=();\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "progress-bar", "cp"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557916383, "post_id": 56147003, "comment_id": 98923968, "body": "You can copy the file by writing it line by line from within perl (not using <code>cp</code>) then you could use for example <a href=\"https://metacpan.org/pod/Term::ProgressBar\" rel=\"nofollow noreferrer\">Term::ProgressBar</a>. But I guess you will need to know (calculate) the number of lines in the file first, so it might not be possible without reading the file twice"}], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1557921465, "post_id": 56148209, "comment_id": 98926853, "body": "Thanks @hakon. But this is something like I am doing a operation inside a file right? I dont want to go inside file, all I want is show the progress bar till the script reaches at the end."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 1, "creation_date": 1557921589, "post_id": 56148209, "comment_id": 98926939, "body": "In order to copy the file you need to go inside it. I am not sure what you mean?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1557919450, "creation_date": 1557919450, "answer_id": 56148209, "question_id": 56147003, "link": "https://stackoverflow.com/questions/56147003/need-to-show-the-progress-bar-while-copying-the-file-in-perl/56148209#56148209", "title": "Need to show the progress bar while copying the file in Perl", "body": "<p>Here is an example of how you can implement a progress bar using <a href=\"https://metacpan.org/pod/Term::ProgressBar\" rel=\"nofollow noreferrer\">Term::ProgressBar</a>. It uses <a href=\"https://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\">sysread</a> and <a href=\"https://perldoc.perl.org/functions/syswrite.html\" rel=\"nofollow noreferrer\">syswrite</a> to write a fixed block size at a time:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Term::ProgressBar;\nuse constant BUFSIZE =&gt; 8196;\n\nmy $fn = 'file.txt';\nmy $save_fn = 'file2.txt';\nmy $size = -s $fn;\nmy $progress = Term::ProgressBar-&gt;new ({count =&gt; $size, remove =&gt; 1});\n\n\nopen ( my $read_fh, '&lt;:raw', $fn ) or die \"Could not open file '$fn': $!\";\nopen ( my $write_fh, '&gt;:raw', $save_fn ) or die \"Could not open file '$save_fn': $!\";\n\nmy $buf = \"\";\n\nmy $total_written = 0;\nmy $next_update = 0;\nwhile (1) {\n    my $bytes_read = sysread $read_fh, $buf, BUFSIZE;\n    die \"Read error: $!\" if !defined $bytes_read;\n    last if $bytes_read == 0;\n    my $offset = 0;\n    my $num_bytes = $bytes_read;\n    while (1) {\n        my $bytes_written = syswrite $write_fh, $buf, $num_bytes, $offset;\n        die \"Write error: $!\" if !defined $bytes_written;\n        die \"Unexpected\" if $bytes_written &gt; $num_bytes;\n        last if $bytes_written == $num_bytes;\n        $num_bytes -= $bytes_written;\n        $offset += $bytes_written;\n    }\n    $total_written += $bytes_read;\n    if ( $total_written &gt; $next_update ) {\n        $next_update = $progress-&gt;update($total_written);\n    }\n}\n$progress-&gt;update($size);\nclose $read_fh;\nclose $write_fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 1, "last_activity_date": 1557942169, "creation_date": 1557942169, "answer_id": 56154978, "question_id": 56147003, "link": "https://stackoverflow.com/questions/56147003/need-to-show-the-progress-bar-while-copying-the-file-in-perl/56154978#56154978", "title": "Need to show the progress bar while copying the file in Perl", "body": "<p>You've asked a surprisingly complex question.  You want to run an external command (<code>cp</code>) while at the same time having the Perl program continue executing (producing progress information). In other words, they are both executing at the same time.</p>\n\n<p>The classic way to do this is to execute the external command in a separate process and output updates while waiting for that process to complete.</p>\n\n<p>The first part is typically done by <code>fork</code>ing the process.  It's easy to get this wrong, so I suggest using <a href=\"https://metacpan.org/pod/Proc::Fork\" rel=\"nofollow noreferrer\">Proc::Fork</a>.</p>\n\n<p>The second part needs a bit of finesse, as you need to sit around and wait for the process to end, but need to output something every now and then, but don't want to busy-wait and burn CPU cyles.  The safest way to do this is to sleep in-between outputs.  For that I recommend <a href=\"https://metacpan.org/pod/Time::HiRes\" rel=\"nofollow noreferrer\">Time::HiRes</a> (which is part of the standard Perl distribution).</p>\n\n<p>And, here's some code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse English; # for more mnemonic special variable names\n\nuse POSIX \":sys_wait_h\";\nuse Proc::Fork;\nuse Time::HiRes qw( usleep );\n\nrun_fork {\n    child {\n        exec q[sleep 3];\n    }\n    parent {\n        my $child_pid = shift;\n\n        my $pid;\n        my $loop;\n        STDOUT-&gt;autoflush;\n        while ( 0 == ($pid = waitpid $child_pid, WNOHANG ) ){\n            print '.';\n            ++$loop;\n            usleep(5000);\n        }\n        print \"\\n\" if $loop;\n\n        # for more complete handlng of $CHILD_ERROR, see the\n        # documentation for the perl system function\n\n        die( \"error in child process\\n\" ) if $CHILD_ERROR;\n\n    }\n};\n</code></pre>\n\n<p>If you want fancy progress bars, take a look at <a href=\"https://metacpan.org/pod/Term::ProgressBar\" rel=\"nofollow noreferrer\">Term::ProgressBar</a></p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557942169, "creation_date": 1557915689, "question_id": 56147003, "link": "https://stackoverflow.com/questions/56147003/need-to-show-the-progress-bar-while-copying-the-file-in-perl", "title": "Need to show the progress bar while copying the file in Perl", "body": "<p>I am copying the file from source location to destination location and file size is too big. I want to see the progress bar in terminal window when file is getting copied. Here is the sample snippet of the Perl code:</p>\n\n<pre><code>$src_dir = \"/home/user/source/\";\n$dest = \"/home/user/destination/\";\n\n$file = $src_dir.\"test_file.csv\";\n\n`cp $file $dest`;\n\nprint \"Copy Done\\n\";\n</code></pre>\n\n<p>File is getting copied here after certain seconds. But need to display the progress bar in terminal window. How we can achieve this?</p>\n"}, {"tags": ["perl", "winapi", "visual-c++", "registry", "redistributable"], "comments": [{"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1557975109, "post_id": 56145780, "comment_id": 98948377, "body": "You can try to use <code>int</code> instead of <code>INSTALLSTATE</code>."}, {"owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "reply_to_user": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1557983927, "post_id": 56145780, "comment_id": 98950300, "body": "@RitaHan-MSFT it returns -2 for all the product ids whether it is installed or not."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 1, "creation_date": 1557985816, "post_id": 56145780, "comment_id": 98950871, "body": "<code>INSTALLSTATE_INVALIDARG   = -2,  &#47;&#47; invalid function argument</code> So make sure you include brace enclose the product code like this <code>&quot;{196BB40D-1578-3D01-B289-BEFC77A11A1E}&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "edited": false, "score": 0, "creation_date": 1557991541, "post_id": 56162226, "comment_id": 98953366, "body": "Thanks Rita Han, this should anyway work in C++. My original issue was solved with the comment mentioned above."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "reply_to_user": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "edited": false, "score": 0, "creation_date": 1557999725, "post_id": 56162226, "comment_id": 98958039, "body": "@DeepakSelvakumar Glad to help. You can accept my answer or write one for perl in order to help others are searching on this topic. Thanks."}], "tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": false, "score": 0, "last_activity_date": 1557988555, "creation_date": 1557988555, "answer_id": 56162226, "question_id": 56145780, "link": "https://stackoverflow.com/questions/56145780/check-if-vc-redistributable-10-is-installed-through-perl-script/56162226#56162226", "title": "Check if VC++ Redistributable 10 is installed through perl script", "body": "<p>Show how to implement in C++ (not in perl) you can refer to.</p>\n\n<p>I installed <a href=\"https://support.microsoft.com/en-sg/help/2977003/the-latest-supported-visual-c-downloads\" rel=\"nofollow noreferrer\">Microsoft Visual C++ Redistributable for Visual Studio 2015, 2017 and 2019</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zxTqj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zxTqj.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dx1AA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dx1AA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Return value 5 indicate \"<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/msi/nf-msi-msiqueryproductstatea#return-value\" rel=\"nofollow noreferrer\">The product is installed for the current user.</a>\"</p>\n\n<p>Find the product code in registry like this:</p>\n\n<p>HKEY_CLASSES_ROOT\\Installer\\Dependencies\\Microsoft.VS.VC_RuntimeAdditionalVSU_x86,v14</p>\n"}], "owner": {"reputation": 497, "user_id": 2218666, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc24be21f448cefbfda82e5b8f39cd02?s=128&d=identicon&r=PG", "display_name": "Deepak Selvakumar", "link": "https://stackoverflow.com/users/2218666/deepak-selvakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557988555, "creation_date": 1557912037, "last_edit_date": 1557912880, "question_id": 56145780, "link": "https://stackoverflow.com/questions/56145780/check-if-vc-redistributable-10-is-installed-through-perl-script", "title": "Check if VC++ Redistributable 10 is installed through perl script", "body": "<p>I am writing a perl script to check if the Visual C++ Redistributable 2010 x64 is installed in the system already.</p>\n\n<p>I came across two ways according to <a href=\"https://blogs.msdn.microsoft.com/astebner/2010/05/05/mailbag-how-to-detect-the-presence-of-the-visual-c-2010-redistributable-package/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/astebner/2010/05/05/mailbag-how-to-detect-the-presence-of-the-visual-c-2010-redistributable-package/</a></p>\n\n<p>To read the registry for the corresponding entry.\nor to use <code>MsiQueryProductStateA</code> </p>\n\n<p>Using <code>Win32::TieRegistry</code> is not a possible option with out per setup.</p>\n\n<p>but using <code>use Win32::API</code> is an option</p>\n\n<p>Trying to use <code>MsiQueryProductStateA</code> with <code>Win32::API</code></p>\n\n<pre><code>use Win32::API;\n$function = Win32::API::More-&gt;Import(\n    'msi', 'INSTALLSTATE  MsiQueryProductStateA(LPCSTR szProduct)'\n);\n</code></pre>\n\n<p>Supposed to get some valid return value but getting error</p>\n\n<pre><code>Win32::API::parse_prototype: WARNING unknown output parameter type 'INSTALLSTATE' at C:\\Program Files\\HP\\HP BTO Software\\nonOV\\Perl\\a\\lib/5.26.2/MSWin32-x64-multi-thread/Win32/API.pm line 600. 4294967294\n</code></pre>\n\n<p>Could someone please shed some light on how to use/ import the return type as well and how to use this ?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["regex", "perl", "pattern-matching", "file-handling", "regex-negation"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 1, "creation_date": 1557901443, "post_id": 56142739, "comment_id": 98915724, "body": "Being a new SO user, I&#39;ll suggest you to please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> and specifically <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> so it helps others and in turn they can help you back, else your post may be downvoted (although I didn&#39;t downvote your post) and closed."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557904510, "post_id": 56142739, "comment_id": 98917182, "body": "So if a words starts with <code>XX[0..9]&#47;</code> you want to delete that part from the word?"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557906130, "post_id": 56143610, "comment_id": 98918049, "body": "That should be <code>$2</code> and <code>$1</code> in the replacement part (see also <code>perl -w</code>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557906437, "post_id": 56143610, "comment_id": 98918203, "body": "Note that (by default) <code>\\d</code> matches more than just <code>[0-9]</code>. It matches any Unicode character with the &quot;digit&quot; property."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557906670, "post_id": 56143610, "comment_id": 98918328, "body": "@melpomene: thanks I have edited my answer accordingly. And indeed <code>[0-9]</code> might be safer in this contest."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1557907311, "post_id": 56143610, "comment_id": 98918674, "body": "@melpomene, Re &quot;<i>Note that (by default) <code>\\d</code> matches more than just <code>[0-9]</code>.</i>&quot;, Unless you use <code>-CI</code> (or equivalent) or <code>use feature qw( unicode_strings );</code> (or equivalent) or <code>&#47;u</code> (or equivalent), it won&#39;t. And it can easily be forced to match only 0-9 using <code>&#47;a</code>."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557907452, "post_id": 56143610, "comment_id": 98918750, "body": "@ikegami: thank you for picking this up! I have edited my answer by adding a positive lookbehind, thank you also for editing! The rest is a matter how we interpret the question"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557907556, "post_id": 56143610, "comment_id": 98918803, "body": "@ikegami: yeah just simply go for <code>\\b</code> :-)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557954650, "post_id": 56143610, "comment_id": 98944310, "body": "@ikegami That depends entirely on where the strings you&#39;re matching against are coming from. If those strings contain Unicode digits (codepoints beyond 255), they are necessarily encoded using UTF-8 internally, which in turn forces <code>&#47;u</code> behavior. Of course that doesn&#39;t apply if you&#39;re dealing with a pure ASCII string, but in that case you don&#39;t have to worry about Unicode character classes anyway."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557954748, "post_id": 56143610, "comment_id": 98944352, "body": "@ikegami As for <code>&#47;a</code>, that&#39;s only available from 5.14 on. <code>unicode_strings</code> was introduced in 5.12. And as mentioned above, in older Perl versions <code>\\d</code> will always match Unicode digits."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557959426, "post_id": 56143610, "comment_id": 98945690, "body": "Re &quot;<i>That depends entirely on where the strings you&#39;re matching against are coming from</i>&quot;, We know where they&#39;re coming from (<code>ARGV</code>). That&#39;s why I said &quot;<i>Unless you use <code>-CI</code> (or equivalent)</i>&quot; (though that should have been <code>-CIi</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557960704, "post_id": 56143610, "comment_id": 98945950, "body": "Re &quot;<i><code>unicode_strings</code> was introduced in 5.12.</i>&quot;, Then it&#39;s easy to not use it :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557960731, "post_id": 56143610, "comment_id": 98945953, "body": "Re &quot;<i>As for <code>&#47;a</code>, that&#39;s only available from 5.14 on.</i>&quot;, Very few people use older versions at this point."}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": 0, "last_activity_date": 1557907491, "last_edit_date": 1557907491, "creation_date": 1557904650, "answer_id": 56143610, "question_id": 56142739, "link": "https://stackoverflow.com/questions/56142739/how-to-change-a-pattern-like-xx1-xxsomething-xx1-something-to-xxsomething-xx1-so/56143610#56143610", "title": "How to change a pattern like XX1/XXSomething/XX1/Something to XXSomething/XX1/Something in perl", "body": "<p>Based on what you have explained in the description of your problem <code>XX[0..9]</code>, the following <code>perl</code> command should do the trick:</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>$ cat input\nM1/XX2/XX1 XX2/XX1/XX2/WCLKB XX2/XX1/XX2/P001  \nM1/XX4/XX5 XX4/XX5/XX4/WCLKB XX4/XX5/XX4/P001\n</code></pre>\n\n<p><strong>Command:</strong></p>\n\n<pre><code>perl -pe 's@\\bXX(\\d)/XX(\\d)/XX\\1@XX$2/XX$1@g' input\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>M1/XX2/XX1 XX1/XX2/WCLKB XX1/XX2/P001  \nM1/XX4/XX5 XX5/XX4/WCLKB XX5/XX4/P001\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1557906846, "post_id": 56144069, "comment_id": 98918420, "body": "We might also consider using <code>\\b</code> word boundaries in our regexes! Anyway +1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557906967, "post_id": 56144069, "comment_id": 98918491, "body": "Note that this changes <code>ZXX1&#47;XX2&#47;XX1&#47;b</code> into <code>ZXX2&#47;XX1&#47;b</code>"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1557906387, "creation_date": 1557906387, "answer_id": 56144069, "question_id": 56142739, "link": "https://stackoverflow.com/questions/56142739/how-to-change-a-pattern-like-xx1-xxsomething-xx1-something-to-xxsomething-xx1-so/56144069#56144069", "title": "How to change a pattern like XX1/XXSomething/XX1/Something to XXSomething/XX1/Something in perl", "body": "<p>If you're looking specifically for <code>XXn/XXm/XXn/</code> (where <code>n</code> is the same number both times), you can use backreferences:</p>\n\n<pre><code>s{(XX[0-9]+/)(XX[0-9]+/\\1)}{$2}g\n</code></pre>\n\n<p>Here <code>\\1</code> refers back to and matches the same string as the first capturing group, <code>(XX[0-9]+/)</code>.</p>\n\n<p><a href=\"https://ideone.com/imqtB0\" rel=\"nofollow noreferrer\">Live demo</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (my $line = readline DATA) {\n    $line =~ s{(XX[0-9]+/)(XX[0-9]+/\\1)}{$2}g;\n    print $line;\n}\n\n__DATA__\nM1/XX2/XX1 XX2/XX1/XX2/WCLKB XX2/XX1/XX2/P001\nM1/XX4/XX5 XX4/XX5/XX4/WCLKB XX4/XX5/XX4/P001\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>M1/XX2/XX1 XX1/XX2/WCLKB XX1/XX2/P001\nM1/XX4/XX5 XX5/XX4/WCLKB XX5/XX4/P001\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557906809, "post_id": 56144124, "comment_id": 98918400, "body": "The first one matches every word that contains a slash (but does not start with a slash), and removes the part before (and including) the first slash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557907511, "post_id": 56144124, "comment_id": 98918776, "body": "@melpomene, Yes. That&#39;s what&#39;s meant by &quot;blindly removing the first part&quot;."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1557939947, "last_edit_date": 1557939947, "creation_date": 1557906586, "answer_id": 56144124, "question_id": 56142739, "link": "https://stackoverflow.com/questions/56142739/how-to-change-a-pattern-like-xx1-xxsomething-xx1-something-to-xxsomething-xx1-so/56144124#56144124", "title": "How to change a pattern like XX1/XXSomething/XX1/Something to XXSomething/XX1/Something in perl", "body": "<p>If it's ok to blindly remove the first part:</p>\n\n<pre><code>while (&lt;&gt;) {\n   s{ \\K[^\\s/]+/}{}g;\n   print;\n}\n</code></pre>\n\n<p>As a one-liner:</p>\n\n<pre><code>perl -pe's{ \\K[^\\s/]+/}{}g'\n</code></pre>\n\n<hr>\n\n<p>If you want to make sure it matches the pattern you specified:</p>\n\n<pre><code>while (&lt;&gt;) {\n   s{(?&lt;!\\S)(XX\\d)/(?=XX[^\\s/]+/\\1/\\S)}{}ag;\n   print;\n}\n</code></pre>\n\n<p>As a one-liner:</p>\n\n<pre><code>perl -pe's{(?&lt;!\\S)(XX\\d)/(?=XX[^\\s/]+/\\1/\\S)}{}ag'\n</code></pre>\n\n<p>The key is <code>\\1</code>, means which means \"match what the first capture captured\".</p>\n"}], "owner": {"reputation": 33, "user_id": 9198418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad44f3a89a2fe34cc9fce961a2e55b42?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul.Mohan", "link": "https://stackoverflow.com/users/9198418/gokul-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56144069, "answer_count": 3, "score": 1, "last_activity_date": 1557939947, "creation_date": 1557900782, "last_edit_date": 1557903907, "question_id": 56142739, "link": "https://stackoverflow.com/questions/56142739/how-to-change-a-pattern-like-xx1-xxsomething-xx1-something-to-xxsomething-xx1-so", "title": "How to change a pattern like XX1/XXSomething/XX1/Something to XXSomething/XX1/Something in perl", "body": "<p>I'm having a file in which some lines have some patterns like </p>\n\n<pre><code>M1/XX2/XX1 XX2/XX1/XX2/WCLKB XX2/XX1/XX2/P001  \nM1/XX4/XX5 XX4/XX5/XX4/WCLKB XX4/XX5/XX4/P001\n</code></pre>\n\n<p>Here in some patterns XX2 is repeating. I need to change the above line to </p>\n\n<pre><code>M1/XX2/XX1 XX1/XX2/WCLKB XX1/XX2/P001\nM1/XX4/XX5 XX5/XX4/WCLKB XX5/XX4/P001\n</code></pre>\n\n<p>These XX can vary  XX[0..9] \nThe code is in Perl.</p>\n\n<p>I tried using some regex but was confused.</p>\n\n<pre><code> open(FILE,$FilePath);\n @linesInFile = &lt;FILE&gt;;\n close(FILE);\n foreach $item(@linesInFile){\n    if(grep(/^XX?\\/XX.\\/XX)\n  #I dont know how to complete this \n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 0, "creation_date": 1557866698, "post_id": 56137880, "comment_id": 98907548, "body": "Is there any information given with the error?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1557867656, "creation_date": 1557867656, "answer_id": 56138539, "question_id": 56137880, "link": "https://stackoverflow.com/questions/56137880/how-to-fix-no-such-file-or-directory-error-in-perl/56138539#56138539", "title": "How to fix &quot;No such file or directory&quot; error in perl?", "body": "<p>That message is given by the operating system when you provide a file name to an operation that requires the named file to exist, but it doesn't. For example, when code tries to open a file that doesn't exist for reading.</p>\n\n<p>Based on the minimal information you provided, one would assume the error is from the attempt to open <code>sequence.gb</code>. If so, that means the path <code>sequence.gb</code> doesn't reference an existing file.</p>\n\n<p>Keep in mind that the path <code>sequence.gb</code> means the named <code>sequence.gb</code> in the current work directory, so either you have the name wrong, and you made incorrect assumptions about the current work directory.</p>\n\n<p>If you want to access a file that is found in the same directory as the script, you should use the following:</p>\n\n<pre><code>use FindBin qw( $RealBin );\n\n\"$RealBin/sequence.gb\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10646880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea76e10d275bffb7d38facbc2242d40c?s=128&d=identicon&r=PG&f=1", "display_name": "arganka", "link": "https://stackoverflow.com/users/10646880/arganka"}, "is_accepted": false, "score": 0, "last_activity_date": 1557875333, "creation_date": 1557875333, "answer_id": 56139758, "question_id": 56137880, "link": "https://stackoverflow.com/questions/56137880/how-to-fix-no-such-file-or-directory-error-in-perl/56139758#56139758", "title": "How to fix &quot;No such file or directory&quot; error in perl?", "body": "<p>I think you need to write the full path or positional path to the file</p>\n\n<pre><code>    -file =&gt; \"/home/user/sequence.gb\"\n    -file =&gt; \"./sequence.gb\"\n</code></pre>\n\n<p>I hope this will solves your problem.\nGood luck!</p>\n"}], "owner": {"reputation": 11, "user_id": 11500416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b1d57c91429377da7dd27a87d1232c?s=128&d=identicon&r=PG&f=1", "display_name": "Sara tahir", "link": "https://stackoverflow.com/users/11500416/sara-tahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557875333, "creation_date": 1557864437, "last_edit_date": 1557872382, "question_id": 56137880, "link": "https://stackoverflow.com/questions/56137880/how-to-fix-no-such-file-or-directory-error-in-perl", "title": "How to fix &quot;No such file or directory&quot; error in perl?", "body": "<p>I want to use Bioperl module SeqFeature but the code is not working.</p>\n\n<p>I have tried writing the code using Padre.</p>\n\n<pre><code>use Bio::SeqIO;\nmy $seqio_object = Bio::SeqIO-&gt;new(-file =&gt; \"sequence.gb\" );\nmy $seq_object = $seqio_object-&gt;next_seq;\nprint ref($seq_object);\n\nfor my $feat_object ($seq_object-&gt;get_SeqFeatures) {\nprint \"primary tag: \", $feat_object-&gt;primary_tag, \"\\n\";\n\nfor my $tag ($feat_object-&gt;get_all_tags) {\n    print \"  tag: \", $tag, \"\\n\";\n    for my $value ($feat_object-&gt;get_tag_values($tag)) {\n        print \"    value: \", $value, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I want the file to be opened and the information in it to be displayed on the output window but its giving an exception. </p>\n\n<p>How do I solve this problem?</p>\n"}, {"tags": ["string", "file", "perl", "replace"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557843161, "post_id": 56131964, "comment_id": 98895891, "body": "You may have to seek back to the beginning of the input file for each iteration in the <code>for</code> loop, see <a href=\"https://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\">perldoc seek</a>. But there might be more efficient approaches that lets you replace all numbers at once"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8604987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f7dda0d26ef85643392b03c0477b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Azmo", "link": "https://stackoverflow.com/users/8604987/azmo"}, "edited": false, "score": 0, "creation_date": 1557853526, "post_id": 56132912, "comment_id": 98901690, "body": "My xml file is quite big, I wonder if it would cause an issue if converted to a string."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1557844426, "creation_date": 1557844426, "answer_id": 56132912, "question_id": 56131964, "link": "https://stackoverflow.com/questions/56131964/need-to-open-a-file-and-replace-multiple-strings/56132912#56132912", "title": "Need to open a file and replace multiple strings", "body": "<p>Here is an alternative way which reads the input file into a string and does all the substitutions at once:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n{\nmy $old = 40960;\nmy $new = 41984;\n\nmy ($regexp) = map { qr/$_/ } join '|', map { $old + $_ } 0..41;\n\nmy $file = 'file.txt';\nrename($file, $file.'.bak');\nopen(IN, '&lt;'.$file.'.bak') or die $!;\nmy $str = do {local $/; &lt;IN&gt;};\nclose IN;\n$str =~ s/($regexp)/do_subst($1, $old, $new)/ge;\n\nopen(OUT, '&gt;'.$file) or die $!;\nprint OUT $str;\nclose OUT;\n\n}\n\nsub do_subst {\n    my ( $old, $old_base, $new_base ) = @_;\n    my $i = $old - $old_base;\n    my $new = $new_base + $i;\n    return $new;\n}\n</code></pre>\n\n<p>Note: Can probably be made more efficient by using <a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\"><code>Regexp::Assemble</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8604987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f7dda0d26ef85643392b03c0477b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Azmo", "link": "https://stackoverflow.com/users/8604987/azmo"}, "edited": false, "score": 0, "creation_date": 1557853665, "post_id": 56133158, "comment_id": 98901738, "body": "That looks interesting, but also quite complex for a total beginner like me. Could you add a few comments as to what does what?"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "reply_to_user": {"reputation": 3, "user_id": 8604987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f7dda0d26ef85643392b03c0477b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Azmo", "link": "https://stackoverflow.com/users/8604987/azmo"}, "edited": false, "score": 0, "creation_date": 1557907217, "post_id": 56133158, "comment_id": 98918631, "body": "repl() is a simple function which, given x, returns x+DIFF if x &gt;= MIN and x &lt;= MAX, or just returns x otherwise. The main while() loop iterates over lines of the incoming file, locates any numeric sequence surrounded by &quot;boundary&quot; conditions (that&#39;s the \\b part of the regex), replaces those strings with whatever the repl() function returns, and prints the modified line. If a number falls outside the MIN-MAX range, the number is simply substituted with itself, so there is no change.  If the number falls within the MIN-MAX range, however, the substitution replaces the old number with a new one."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 1, "last_activity_date": 1557845107, "creation_date": 1557845107, "answer_id": 56133158, "question_id": 56131964, "link": "https://stackoverflow.com/questions/56131964/need-to-open-a-file-and-replace-multiple-strings/56133158#56133158", "title": "Need to open a file and replace multiple strings", "body": "<p>Here's an example that works line by line, so the size of file is immaterial. The example assumes you want to replace things like \"45678\", but not \"fred45678\".  The example also assumes that there is a range of numbers, and you want them replaced with a new range offset by a constant.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse constant MIN =&gt; 40000;\nuse constant MAX =&gt; 90000;\nuse constant DIFF =&gt; +1024;\n\nsub repl { $_[0] &gt;= MIN &amp;&amp; $_[0] &lt;= MAX ? $_[0] + DIFF : $_[0] }\n\nwhile (&lt;&gt;) {\n    s/\\b(\\d+)\\b/repl($1)/eg;\n    print;\n}\nexit(0);\n</code></pre>\n\n<p>Invoked with the file you want to transform as an argument, it produces altered output on stdout. With the following input ...</p>\n\n<pre><code>foo bar 123\n40000 50000 60000 99999\nfred60000\nfred 60000 fred\n</code></pre>\n\n<p>... it produces this output.</p>\n\n<pre><code>foo bar 123\n41024 51024 61024 99999\nfred60000\nfred 61024 fred\n</code></pre>\n\n<p>There are a couple of classic Perlisms here, but the example shouldn't be hard to follow if you RTFM appropriately.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8604987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f7dda0d26ef85643392b03c0477b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Azmo", "link": "https://stackoverflow.com/users/8604987/azmo"}, "edited": false, "score": 0, "creation_date": 1557853429, "post_id": 56133605, "comment_id": 98901645, "body": "Thank you, I realized myself how i failed with the looping placement, but completely missed the file handle issue."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1557847544, "last_edit_date": 1557847544, "creation_date": 1557846609, "answer_id": 56133605, "question_id": 56131964, "link": "https://stackoverflow.com/questions/56131964/need-to-open-a-file-and-replace-multiple-strings/56133605#56133605", "title": "Need to open a file and replace multiple strings", "body": "<p>Other answers give you better solutions to your problem. Mine concentrates on explaining why your code didn't work.</p>\n\n<p>The core of your code is here:</p>\n\n<pre><code>$old++;\n$new++;\n\nfor (my $i = 0; $i &lt; 42; $i++) {\n    while(&lt;IN&gt;) {\n        $_ =~ s/$old/$new/g;\n        print OUT $_;\n    }\n}\n</code></pre>\n\n<p>You increment the values of <code>$old</code> and <code>$new</code> outside of your loops. And you never change those values again. So you're only making the same substitution (changing 40961 to 41985) 42 times. You never try to change any other numbers.</p>\n\n<p>Also, look at the <code>while</code> loop that reads from <code>IN</code>. On your first iteration (when <code>$i</code> is 0) you read all of the data from <code>IN</code> and the file pointer is left at the end of the file. So when you go into the <code>while</code> loop again on your second iteration (and all subsequent iterations) you read no data at all from the file. You need to reset the file pointer to the start of your file at the end of each iteration.</p>\n\n<p>Oh, and the basic logic is wrong. If you think about it, you'll end up writing each line to the output file 42 times. You need to do all possible substitutions before writing the line. So your inner loop needs to be the outer loop (and vice versa).</p>\n\n<p>Putting those suggestions together, you need something like this:</p>\n\n<pre><code>my $old    = 40960;\nmy $change = 1024;\n\nwhile (&lt;IN&gt;) {\n    # Easier way to write your loop\n    for my $i ( 1 .. 42 ) {\n        my $new = $old + $change;\n        # Use \\b to mark word boundaries\n        s/\\b$old\\b/$new/g;\n        $old++;\n    }\n    # Print each output line only once\n    print OUT $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8604987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f7dda0d26ef85643392b03c0477b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Azmo", "link": "https://stackoverflow.com/users/8604987/azmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56133605, "answer_count": 3, "score": 0, "last_activity_date": 1557847544, "creation_date": 1557841434, "last_edit_date": 1557845585, "question_id": 56131964, "link": "https://stackoverflow.com/questions/56131964/need-to-open-a-file-and-replace-multiple-strings", "title": "Need to open a file and replace multiple strings", "body": "<p>I have a really big xml file. It has certain incrementing numbers inside, which i would like to replace with a different incrementing number. I've looked and here is what someone suggested here before. Unfortunately i cant get it to work :(</p>\n\n<p>In the code below all instances of 40960 should be replaced with 41984, all instances of 40961 with 41985 etc. Nothing happens. What am i doing wrong?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $old = 40960;\nmy $new = 41984;\nmy $string;\n\nmy $file = 'file.txt';\n\nrename($file, $file.'.bak');\nopen(IN, '&lt;'.$file.'.bak') or die $!;\nopen(OUT, '&gt;'.$file) or die $!;\n\n$old++;\n$new++;\n\nfor (my $i = 0; $i &lt; 42; $i++) {\n    while(&lt;IN&gt;) {\n        $_ =~ s/$old/$new/g;\n        print OUT $_;\n    }\n}\n\nclose(IN);\nclose(OUT);\n</code></pre>\n"}, {"tags": ["perl", "triggers", "cron", "auto"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557833448, "post_id": 56127580, "comment_id": 98889973, "body": "Please show the content of <code>Demfile.pl</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1557841132, "post_id": 56127580, "comment_id": 98894643, "body": "It is impossible to help you with an error if we do not know what caused the error, whatever caused it is inside of your script. Therefore we require the script content."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557903965, "post_id": 56127580, "comment_id": 98916933, "body": "Not related to the error message, but you have <code>@files = glob(&quot;test&quot;)</code>, and <code>@files</code> is never used. Also <code>my $now = date &quot;+%Y-%m-%d&#47;&#47;%H-%M-%S&quot; | tr -d &quot;\\n&quot;</code> is not valid Perl. You need to put Shell commands in backticks"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557992941, "post_id": 56147501, "comment_id": 98954197, "body": "thanks Dave,  I tried show tables on sqlite and I still have HISTORY1 in test.db. :)), I don&#39;t understand why crontab is not running anymore!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1558025290, "post_id": 56147501, "comment_id": 98972899, "body": "@noname: It seems likely to me that you have multiple copies of <code>test.db</code> on your system and your program is inadvertently reading the wrong one."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1557917183, "creation_date": 1557917183, "answer_id": 56147501, "question_id": 56127580, "link": "https://stackoverflow.com/questions/56127580/i-want-to-automatically-run-1-file-demfile-pl-with-crontab-centos-7-however/56147501#56147501", "title": "I want to automatically run 1 file Demfile.pl with crontab (Centos 7). However / var / spool / mail / root send mail to log as follows", "body": "<blockquote>\n  <p>I do not know why :((</p>\n</blockquote>\n\n<p>But the error message is pretty clear.</p>\n\n<blockquote>\n  <p>no such table: HISTORY1</p>\n</blockquote>\n\n<p>So it seems to me that your database file (<code>test.db</code>) doesn't contain the database schema that you think it does. You can test this theory using the SQLite command line tool, <code>sqlite3</code>. Try running the following commands:</p>\n\n<pre><code>$ sqlite3 test.db\nsqlite&gt; .tables\n</code></pre>\n\n<p>That will give you a list of the tables in your <code>test.db</code> file. You will hopefully see \"HISTORY1\" listed there.</p>\n\n<p>One other thing to check. Are you running this from the correct directory? Your code seems to assume that it is being run from the directory that contains the <code>test.db</code> file. If you run your code from any other directory, then I think it will create a new, empty, database file which, obviously, won't contain your tables.</p>\n"}], "owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1557917183, "creation_date": 1557827517, "last_edit_date": 1557902617, "question_id": 56127580, "link": "https://stackoverflow.com/questions/56127580/i-want-to-automatically-run-1-file-demfile-pl-with-crontab-centos-7-however", "title": "I want to automatically run 1 file Demfile.pl with crontab (Centos 7). However / var / spool / mail / root send mail to log as follows", "body": "<p>I want to automatically run 1 file <code>Demfile2.pl</code> with <code>crontab</code> (Centos 7). However <code>/var/spool/mail/root</code> send mail to log as follows:</p>\n\n<pre><code>DBD::SQLite::db do failed: no such table: HISTORY1 at /root/perl/test/Demfile2.pl line 31.\nDBD::SQLite::db do failed: no such table: HISTORY1 at /root/perl/test/Demfile2.pl line 31.\n</code></pre>\n\n<p>I do not know why :((\nThis is my code: </p>\n\n<pre><code>use DBI; \nmy $driver = \"SQLite\"; \nmy $database = \"test.db\"; \nmy $dsn = \"DBI:$driver:dbname=$database\"; \nmy $userid = \"\"; \nmy $password = \"\"; \nmy $dbh = DBI-&gt;connect($dsn, $userid, $password, { RaiseError =&gt; 1 }) or die $DBI::errstr; \nprint \"Opened database successfully\\n\"; \n$dir = \"/root/perl/test*\"; \nmy @file = glob($dir);\n@files = glob(\"test\"); \n$temp = 0; \n$size = @file; \n$tempsize = 0; \nfor (my $i = 0; $i &lt; $size; $i++){ \n    print @file[$i]; \n    $temp++; \n    my $filesize = -s \"@file[$i]\"; \n    print \"$filesize\\n\"; \n    $tempsize += $filesize; \n    my $now = date \"+%Y-%m-%d//%H-%M-%S\" | tr -d \"\\n\"; \n    my $stmt = qq(INSERT INTO HISTORY1 (ID, TIME_NOW, TEN_FILE, SO_FILE, SIZE, HETHONG)VALUES ($i, '$now', '$file', '$tempsize', '$tempsize', 'A')); \n    my $rv = $dbh-&gt;do($stmt) or die $DBI::errstr; \n    print \"Records created successfully\\n\";\n} \n$dbh-&gt;disconnect();\nprint\"\\n\";\nprint \"so file $temp\\n\";\nprint \"total size $tempsize\\n\";\n</code></pre>\n"}, {"tags": ["perl", "data-structures", "hash", "set-difference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557829141, "post_id": 56127281, "comment_id": 98887595, "body": "please edit the question and show the expected output from <code>print Dumper $result</code>"}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557829795, "post_id": 56127281, "comment_id": 98887931, "body": "@H&#229;konH&#230;gland: After I edited my code, it&#39;s giving error, I have not yet fixed. So, I can&#39;t give output of <code>$result</code>, but I have written what I need. You can call it as smart diff that will show actual diff in two files. Files are no more than 100 lines, so we are free to play with auxiliary arrays or hashes."}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1557830632, "post_id": 56127281, "comment_id": 98888408, "body": "Perhaps something like <a href=\"https://metacpan.org/pod/Test2::Tools::Compare\" rel=\"nofollow noreferrer\">metacpan.org/pod/Test2::Tools::Compare</a> might help?"}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1557831229, "post_id": 56127281, "comment_id": 98888734, "body": "@Recct: That module seems to give just boolean value, whether they are equal or not, which is provided by <code>Data::Compare</code> as well. But I need actual value. I was exploring <code>Data::Diff</code> module, which seems to solve my problem, but would love to go by own code."}], "answers": [{"comments": [{"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 1, "creation_date": 1557830450, "post_id": 56128395, "comment_id": 98888291, "body": "Thanks, this is what I was trying to achieve. I started to pass parent key, but was getting stuck somewhere. I&#39;ll test it with various scenario and update my code if there is any need. :-)"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1557829931, "creation_date": 1557829931, "answer_id": 56128395, "question_id": 56127281, "link": "https://stackoverflow.com/questions/56127281/find-difference-between-two-perl-nested-hashes/56128395#56128395", "title": "Find difference between two perl nested hashes", "body": "<p>Here is an example of how you can do it based on your description. Please clarify if this is what you wanted.</p>\n\n<pre><code>sub compareHashes {\n    my ($hash1, $hash2, $result, $parent) = @_;\n\n    my %all_keys = map {$_ =&gt; 1} keys %$hash1, keys %$hash2;\n\n    for my $key (keys %all_keys) {\n        if (not exists $hash2-&gt;{$key}) {\n            if ( defined $parent ) {\n                push @{$result-&gt;{deleted}-&gt;{$parent}}, $key;\n            }\n            else {\n                push @{$result-&gt;{deleted}-&gt;{$key}}, keys %{$hash1-&gt;{$key}};\n            }\n        } elsif (not exists $hash1-&gt;{$key}) {\n            if ( defined $parent ) {\n                push @{$result-&gt;{added}-&gt;{$parent}}, $key;\n            }\n            else {\n                push @{$result-&gt;{added}-&gt;{$key}}, keys %{$hash2-&gt;{$key}};\n            }\n        }\n        else {\n            if ((ref $hash1-&gt;{$key} eq 'HASH') and (ref $hash2-&gt;{$key} eq 'HASH') ) {\n                compareHashes($hash1-&gt;{$key}, $hash2-&gt;{$key}, $result, $key);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>$VAR1 = {\n          'added' =&gt; {\n                       'key3' =&gt; [\n                                   'kamal4.google.com'\n                                 ],\n                       'key1' =&gt; [\n                                   'kamal6.google.com'\n                                 ]\n                     },\n          'deleted' =&gt; {\n                         'key2' =&gt; [\n                                     'kamal4.google.com'\n                                   ],\n                         'key1' =&gt; [\n                                     'kamal2.google.com'\n                                   ]\n                       }\n        };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1557894515, "post_id": 56137916, "comment_id": 98913490, "body": "I tried 2nd and 3rd one, <code>Data::Diff</code> solved my purpose, but I didn&#39;t wanted to use any module."}], "tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 1, "last_activity_date": 1557864555, "creation_date": 1557864555, "answer_id": 56137916, "question_id": 56127281, "link": "https://stackoverflow.com/questions/56127281/find-difference-between-two-perl-nested-hashes/56137916#56137916", "title": "Find difference between two perl nested hashes", "body": "<p>There are several modules on <a href=\"https://metacpan.org\" rel=\"nofollow noreferrer\">CPAN</a> which compare deeply nested data structures.  They differ mostly in how they encode the differences.  Here's a curated list:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Data::Difference\" rel=\"nofollow noreferrer\">Data::Difference</a></li>\n<li><a href=\"https://metacpan.org/pod/Struct::Diff\" rel=\"nofollow noreferrer\">Struct::Diff</a></li>\n<li><a href=\"https://metacpan.org/pod/Data::Diff\" rel=\"nofollow noreferrer\">Data::Diff</a></li>\n</ul>\n"}], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 56128395, "answer_count": 2, "score": 2, "last_activity_date": 1557864555, "creation_date": 1557826660, "last_edit_date": 1557828452, "question_id": 56127281, "link": "https://stackoverflow.com/questions/56127281/find-difference-between-two-perl-nested-hashes", "title": "Find difference between two perl nested hashes", "body": "<p>I'm trying to find difference in two files, that contains key/values entries, and return what all key/values are added or deleted. Currently, I'm using linux <code>diff</code> for finding the difference, but its natural that if values orders are changed, then it will be a valid diff, but I don't want to list them, because for me its invalid one.<br><br>\n<strong>file1:</strong></p>\n\n<pre><code>key1    kamal1.google.com kamal2.google.com kamal3.google.com \nkey2    kamal4.google.com \n</code></pre>\n\n<p><strong>file2:</strong></p>\n\n<pre><code>key1    kamal1.google.com kamal6.google.com kamal3.google.com \nkey3    kamal4.google.com\n</code></pre>\n\n<p><strong>What I need:</strong></p>\n\n<ul>\n<li>Show <code>deleted key2 with values kamal4.google.com</code>, <code>added key3 with kamal4.google.com</code>, <code>deleted kamal2.google.com from key1</code>, <code>added kamal6.google.com to key1</code></li>\n<li>Message is representational, we can modify it to more meaningful one</li>\n</ul>\n\n<p><strong>What is my approach:</strong></p>\n\n<ul>\n<li>read the files and put in different hashes <code>key1 =&gt; {kamal1.google.com =&gt; 1, ...}, key2 =&gt; {kamal4.google.com =&gt; 1}</code>. I have taken array also as hash so as we to do diff efficiently.</li>\n<li>Loop over keys of both hash and find if it exists in which hash.</li>\n<li>Make a recursive call to find the diff in values (because its again a hash)</li>\n</ul>\n\n<p><strong>Problem with my code:</strong><br>\n - Not working for nesting<br>\n - Lost track of parent.<br></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>my $file1 = 'file1';\nmy $file2 = 'file2';\n\nmy $old = hashifyFile($file1);\nmy $new = hashifyFile($file2);\nmy $result = {};\ncompareHashes($old , $new, $result);\nprint Dumper $result;\n\n    sub compareHashes {\n        my ($hash1, $hash2, $result) = @_;\n\n            for my $key (keys %$hash1, keys %$hash2) {\n                if (not exists $hash2-&gt;{$key}) {\n                        push @{$result-&gt;{deleted}-&gt;{$key}}, keys %{$hash1-&gt;{$key}};\n                } elsif (not exists $hash1-&gt;{$key}) {\n                        push @{$result-&gt;{added}-&gt;{$key}}, keys %{$hash2-&gt;{$key}};\n                } elsif (ref $hash1-&gt;{$key} eq 'HASH' or ref $hash2-&gt;{$key} eq 'HASH' ) {\n                    compareHashes($hash1-&gt;{$key}, $hash2-&gt;{$key}, $result);\n                }\n            }\n    }\n\n# helper functions\nsub trim {\n   my $val = shift;\n   $val =~ s/^\\s*|\\s*$//g;\n   return $val;\n}\n\n\nsub hashifyFile {\n    my $file = shift;\n    my $contents = {};\n    open my $file_fh, '&lt;', $file or die \"couldn't open $file $!\";\n\n    my ($key, @val);\n    while (my $line = &lt;$file_fh&gt;) {\n        # skip blank lines and comments\n        next if $line =~ /^\\s*$/;\n        next if $line =~ /^#/;\n        # print \"$. $line\";\n\n        # if line starts with a word, means its \"key values\"\n        # if it starts with multiple spaces assuming minimum 4, seems values for the previous key\n        if ($line =~ /^\\w/) {\n            ($key, @val) = split /\\s+|=/, $line;\n        } elsif ($line =~ /^\\s{4,}\\w/) {\n            push @val, split /\\s+/, $line;\n        }\n        my %temp_hash;\n        for (@val) {\n                # next unless $_;\n                $temp_hash{trim($_)} = 1 if trim($_);\n        }\n        $key = trim($key);\n        $contents-&gt;{$key} = \\%temp_hash if defined $key;\n\n    }\n\n    close $file_fh;\n    return $contents;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1557825602, "creation_date": 1557825602, "answer_id": 56126917, "question_id": 56126506, "link": "https://stackoverflow.com/questions/56126506/hashref-arrayref-dont-understand-the-following-behavior/56126917#56126917", "title": "Hashref/Arrayref, don&#39;t understand the following behavior", "body": "<p>The thing you need to know is there's no such thing as multi-dimensional data structures in perl. And this is largely true of <em>all</em> languages, they just abstract the problem in different ways. </p>\n\n<p>You get an array (or hash) of references, to sub arrays (or hashes). </p>\n\n<p>So if you try to push a hash into an array, it's first evaluated in a list context - the pairs of key/values are spat out in a random order, and then inserted as array elements into the array. </p>\n\n<p>If you want to have a hash as a subelement of an array, you <em>must</em> do it by reference - although there's a few mechanisms by which you can do this subtly. </p>\n\n<p>e.g.:</p>\n\n<pre><code>push ( @$array, {%hash} ); \n</code></pre>\n\n<p>The hash evaluation will be a list of key-value pairs in a list, but then the <code>{}</code> act as a constructor for an anonymous hash - that's then inserted into the array. </p>\n\n<p>It's still doing the same thing as in your example the array contains a hash-ref element, it's just an anonymous one that copies your <code>%hash</code> instead of referring to the original. </p>\n\n<pre><code>use Data::Dumper;\nmy $array = []; \n\nmy %hash = (id =&gt; 3, name =&gt; \"name3\");\npush @$array, \\%hash; \n\n\n#note how these are the same ref number\nprint $array-&gt;[0],\"\\n\";\nprint \\%hash;\nprint Dumper $array;\nprint \"\\n\";\n\n#empty array;\n$array = []; \n\npush(@$array, {%hash});\n\n#note different number. \nprint \\%hash,\"\\n\";\nprint $array-&gt;[0],\"\\n\";\n\n\nprint Dumper $array;\n</code></pre>\n"}], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56126917, "answer_count": 1, "score": 0, "last_activity_date": 1557825602, "creation_date": 1557824358, "question_id": 56126506, "link": "https://stackoverflow.com/questions/56126506/hashref-arrayref-dont-understand-the-following-behavior", "title": "Hashref/Arrayref, don&#39;t understand the following behavior", "body": "<p>I have an arrayref with hashrefs, the structure looks like the following:</p>\n\n<pre><code>[\n{\n\"id\"   =&gt; 1,\n\"name\" =&gt; \"name1\"\n},\n{\n\"id\"   =&gt; 2,\n\"name\" =&gt; \"name2\"\n}\n]\n</code></pre>\n\n<p>when i want to push a hash (no hashref) into this array, the structure looks odd.</p>\n\n<pre><code>my %hash = (id =&gt; 3, name =&gt; \"name3\");\npush(@$array, %hash);\n</code></pre>\n\n<p>the structure would look like:</p>\n\n<pre><code>[\n{\n\"id\"   =&gt; 1,\n\"name\" =&gt; \"name1\"\n},\n{\n\"id\"   =&gt; 2,\n\"name\" =&gt; \"name2\"\n}\n\"id\"   =&gt; 3,\n\"name\" =&gt; \"name3\"\n]\n</code></pre>\n\n<p>so the key value pairs are pushed in the array as single values, not as a hash?\nwhen i push with <code>\\%hash</code>, it works.</p>\n\n<pre><code>push(@$array, \\%hash);\n</code></pre>\n\n<p>but i really don't understand why i get a different object structure, as <code>ref</code> just means it's a pointer to a storage location?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["perl", "bit-manipulation"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557822588, "post_id": 56124598, "comment_id": 98883978, "body": "I am not sure I understand exactly.. What is your expected result for <code>$B</code> when <code>$A</code> is <code>0x3</code>?"}, {"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557824432, "post_id": 56124598, "comment_id": 98884889, "body": "expected result is 1 as 3 in binary is 11."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557824672, "post_id": 56124598, "comment_id": 98885041, "body": "so you first convert <code>0x3</code> to binary <code>11</code>, then you do logical AND of all bits: <code>1 &amp; 1</code> which gives the result 1? But if <code>0x3</code> is a byte then it is actually equal to <code>00000011</code> and you would get <code>0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1</code> which would give result 0. Do you chop off all leading zeros first?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557820393, "post_id": 56125306, "comment_id": 98882890, "body": "I will try explaining in a more clear way. So i have $A = 0x03-&gt; 8bit signal and i want all its bits to be and with each other and give the value in $B."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557854950, "post_id": 56125306, "comment_id": 98902344, "body": "@AnupamDas OK ... but with 8 bits it&#39;s <code>00000011</code> so AND-ing all bits (for reduction) is <code>0&amp;...</code>, as  H&#229;kon explains in a comment under the question -- so it&#39;s always a <code>0</code>, if even just one bit is <code>0</code>.  Is that what you mean?  (Or AND all bits up to the highest non-zero bit?)  If you meant to AND each bit with 1 (so <code>0x03 &amp; 0b11111111</code>) then it&#39;s just the number itself.  Can you explain?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1560396982, "last_edit_date": 1560396982, "creation_date": 1557819794, "answer_id": 56125306, "question_id": 56124598, "link": "https://stackoverflow.com/questions/56124598/how-to-do-unary-and-reduction-of-bus-to-a-bit-in-perl/56125306#56125306", "title": "How to do unary and/reduction of bus to a bit in Perl?", "body": "<p>Not sure what is \"<em>not working</em>\" (or what you are asking?) </p>\n\n<p>How does this example</p>\n\n<pre><code>perl -wE'\n    $v=0x3; $u = 0b010;\n    printf \"%6s = %#6b ($v)\\n\", \"v\", $v;\n    printf \"%6s = %#6b ($u)\\n\", \"u\", $u; \n    $r = $v &amp; $u; \n    printf \"%6s = %#6b ($r)\\n\", \"v &amp; u\", $r'\n</code></pre>\n\n<p>relate to what you are doing?</p>\n\n<p>It prints</p>\n\n<pre>\n     v =   0b11 (3)\n     u =   0b10 (2)\n v & u =   0b10 (2)\n</pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557820863, "post_id": 56125563, "comment_id": 98883114, "body": "And how do I do &#39;or&#39; of all the bits of $A"}, {"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557821369, "post_id": 56125563, "comment_id": 98883347, "body": "Could you please tell me how to <code>or</code> all the bits of $A also please .Thanks in advance"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557822062, "post_id": 56125563, "comment_id": 98883697, "body": "In that situation, you will always get <code>1</code> unless all bits of <code>$A</code> are zero, so <code>$A == 0 ? 0 : 1</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1557822410, "last_edit_date": 1557822410, "creation_date": 1557820713, "answer_id": 56125563, "question_id": 56124598, "link": "https://stackoverflow.com/questions/56124598/how-to-do-unary-and-reduction-of-bus-to-a-bit-in-perl/56125563#56125563", "title": "How to do unary and/reduction of bus to a bit in Perl?", "body": "<p>If <code>$A</code> is an 8-bit value, and if you want to AND all 8 bits with one another, you will always get <code>0</code> unless all 8 bits are <code>1</code></p>\n\n<pre><code>+----+----+----+----+----+----+----+----+---------------------------------------+\n| A7 | A6 | A5 | A4 | A3 | A2 | A1 | A0 | A7 &amp; A6 &amp; A5 &amp; A4 &amp; A3 &amp; A2 &amp; A1 &amp; A0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  0 |  0 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  0 |  1 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  1 |  0 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  1 |  1 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  1 |  0 |  0 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n...\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  1 |  1 |  1 |  1 |  1 |  1 |  1 |  0 |                                     0 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n|  1 |  1 |  1 |  1 |  1 |  1 |  1 |  1 |                                     1 |\n+----+----+----+----+----+----+----+----+---------------------------------------+\n</code></pre>\n\n<p>This means you will get <code>0</code> unless <code>$A</code> is equal to <code>0b11111111</code> aka <code>0xFF</code> aka <code>255</code>. That means you can simply use the following:</p>\n\n<pre><code>my $B = $A == 255 ? 1 : 0;\n</code></pre>\n\n<hr>\n\n<p>The above solution is much simpler and quicker than using bitwise operations, but it is possible to use these.</p>\n\n<p>To isolate a bit, one uses the following:</p>\n\n<pre><code>( $A &gt;&gt; $bitnum ) &amp; 1\n</code></pre>\n\n<p>So the following would AND the 8 bits together:</p>\n\n<pre><code>my $B =\n     ( ( $A &gt;&gt; 7 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 6 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 5 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 4 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 3 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 2 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 1 ) &amp; 1 )\n   &amp; ( ( $A &gt;&gt; 0 ) &amp; 1 );\n</code></pre>\n\n<p>Removing the redundant <code>&amp; 1</code> give us the following simplified solution:</p>\n\n<pre><code>my $B = 1\n   &amp; ( $A &gt;&gt; 7 )\n   &amp; ( $A &gt;&gt; 6 )\n   &amp; ( $A &gt;&gt; 5 )\n   &amp; ( $A &gt;&gt; 4 )\n   &amp; ( $A &gt;&gt; 3 )\n   &amp; ( $A &gt;&gt; 2 )\n   &amp; ( $A &gt;&gt; 1 )\n   &amp; ( $A &gt;&gt; 0 );\n</code></pre>\n\n<p>In fact, because we're starting with an 8-bit value, the following is sufficient:</p>\n\n<pre><code>my $B =\n     ( $A &gt;&gt; 7 )\n   &amp; ( $A &gt;&gt; 6 )\n   &amp; ( $A &gt;&gt; 5 )\n   &amp; ( $A &gt;&gt; 4 )\n   &amp; ( $A &gt;&gt; 3 )\n   &amp; ( $A &gt;&gt; 2 )\n   &amp; ( $A &gt;&gt; 1 )\n   &amp; ( $A &gt;&gt; 0 );\n</code></pre>\n\n<p>We can improve this by ANDing multiple bits at once!</p>\n\n<pre><code> my $B = $A;\n $B &amp;= $B &gt;&gt; 4;\n $B &amp;= $B &gt;&gt; 2;\n $B &amp;= $B &gt;&gt; 1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1557839950, "creation_date": 1557839950, "answer_id": 56131467, "question_id": 56124598, "link": "https://stackoverflow.com/questions/56124598/how-to-do-unary-and-reduction-of-bus-to-a-bit-in-perl/56131467#56131467", "title": "How to do unary and/reduction of bus to a bit in Perl?", "body": "<pre><code>$B = 0+!($A &amp; ($A+1));\n</code></pre>\n\n<p>If <code>$A</code> = 2<sup><em>n</em></sup>-1 for some <em>n</em>, then <code>$A &amp; ($A+1)</code> will be 0.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1557886149, "creation_date": 1557886149, "answer_id": 56140888, "question_id": 56124598, "link": "https://stackoverflow.com/questions/56124598/how-to-do-unary-and-reduction-of-bus-to-a-bit-in-perl/56140888#56140888", "title": "How to do unary and/reduction of bus to a bit in Perl?", "body": "<p>If you want to AND together the bits up to the most-significant 1 bit,</p>\n\n<pre><code>+----+----+----+----+----+----+----+----+-------------------------------------------+\n| A7 | A6 | A5 | A4 | A3 | A2 | A1 | A0 |                                           |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  0 |  0 |                                         0 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  0 |  1 |                                    A0 = 1 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  1 |  0 |                               A1 &amp; A0 = 0 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  0 |  1 |  1 |                               A1 &amp; A0 = 1 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  0 |  0 |  0 |  0 |  0 |  1 |  0 |  0 |                          A2 &amp; A1 &amp; A0 = 0 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n...\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  1 |  1 |  1 |  1 |  1 |  1 |  1 |  0 | A7 &amp; A6 &amp; A5 &amp; A4 &amp; A3 &amp; A2 &amp; A1 &amp; A0 = 0 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n|  1 |  1 |  1 |  1 |  1 |  1 |  1 |  1 | A7 &amp; A6 &amp; A5 &amp; A4 &amp; A3 &amp; A2 &amp; A1 &amp; A0 = 1 |\n+----+----+----+----+----+----+----+----+-------------------------------------------+\n</code></pre>\n\n<p>I'd use a lookup table if you did this repeatedly.</p>\n\n<pre><code>my @B = (0) x 256;  $B[$_] = 1 for 0x01, 0x03, 0x07, 0x0F, 0x1F, 0x3F, 0x7F, 0xFF;\n\nmy $B = $B[$A];\n</code></pre>\n\n<p>You could also use <a href=\"https://stackoverflow.com/a/56131467/589924\">mob's solution</a>.</p>\n\n<pre><code>my $B = ( $A &amp; ($A+1) ) ? 0 : 1;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 56125306, "answer_count": 4, "score": -1, "last_activity_date": 1560396982, "creation_date": 1557816965, "last_edit_date": 1560396041, "question_id": 56124598, "link": "https://stackoverflow.com/questions/56124598/how-to-do-unary-and-reduction-of-bus-to-a-bit-in-perl", "title": "How to do unary and/reduction of bus to a bit in Perl?", "body": "<p>I have a variable <code>$A = 0x3</code>;</p>\n\n<p>I want <code>$B</code> to be one i.e., AND-ing all the bits of variable <code>A</code></p>\n\n<p>Also how do I do the same with <code>OR</code>?</p>\n\n<p>Have already tried <code>$B &amp;= $A</code>, not working.</p>\n"}, {"tags": ["perl", "date"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557808406, "post_id": 56122365, "comment_id": 98878159, "body": "This asks about &quot;yesterday&quot; but the example uses HMS ... do you indeed need time as well, or just date?"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557808587, "post_id": 56122365, "comment_id": 98878196, "body": "actually @Heyddo answer worked for me. however i use above to create directories using timestamps. But i get it with \\n. ed :-  2019-05-14\\n but i do not pass any enter.. any idea what causes for this ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557809553, "post_id": 56122365, "comment_id": 98878439, "body": "&quot;<i>But i get it with \\n.</i>&quot; -- the backticks return that; you need to <code>chomp</code>"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1557809567, "post_id": 56122365, "comment_id": 98878443, "body": "actually i want today and yesterday both. so i take the today using above and now i can take yesterday using today  as @Heyddo &#39;s answer"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557809605, "post_id": 56122365, "comment_id": 98878454, "body": "What output do you want for times that don&#39;t exist (For example, 1 day before 2019-03-10T02:30:00 in New York)?"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557809810, "post_id": 56122365, "comment_id": 98878492, "body": "@zdim ahh yes chomp i&#39;ve missed thanks"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557809876, "post_id": 56122365, "comment_id": 98878504, "body": "&quot;<i>now i can take yesterday using today</i>&quot;  -- well, no, you can&#39;t do any date-time arithmetic using the system <code>date</code> command and its return.  You have to run the whole thing for every other day you want.  This is one of reasons why I recommend to use a module, in which case you <i>can</i> manipulate dates as you wish."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1557803050, "post_id": 56122410, "comment_id": 98877120, "body": "thanks for the help, so if i need day before yesterday i can add -2d ?"}, {"owner": {"reputation": 102, "user_id": 9844211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mqkE.jpg?s=128&g=1", "display_name": "Heyddo", "link": "https://stackoverflow.com/users/9844211/heyddo"}, "reply_to_user": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1557803305, "post_id": 56122410, "comment_id": 98877156, "body": "date -d -2days +%Y%m%d"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557809889, "post_id": 56122410, "comment_id": 98878507, "body": "This does not always work. It will sometimes give a time that&#39;s off by one hour. (e.g. It gives <code>20190309-110000</code> for <code>20190310-120000</code> in New York.)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1557819308, "post_id": 56122410, "comment_id": 98882346, "body": "Using an external program for something this simple isn&#39;t a good idea. It reduces the portability of your code and makes it slower unnecessarily."}], "tags": [], "owner": {"reputation": 102, "user_id": 9844211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mqkE.jpg?s=128&g=1", "display_name": "Heyddo", "link": "https://stackoverflow.com/users/9844211/heyddo"}, "is_accepted": false, "score": 1, "last_activity_date": 1557802779, "creation_date": 1557802779, "answer_id": 56122410, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56122410#56122410", "title": "How do I get yesterday&#39;s date in perl?", "body": "<pre><code>my $yesterday = `date -d yesterday +%Y%m%d-%H%M%S`;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557809556, "post_id": 56122617, "comment_id": 98878440, "body": "Note: This (rightfully) fails for times that don&#39;t exist (1 day before 2019-03-10T02:30 in New York). If you just want the date (not the time), then you could use <code>-&gt;set_time_zone(&#39;floating&#39;)</code> to stop it from failing."}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1558090295, "post_id": 56122617, "comment_id": 98995013, "body": "@zdim  just I&#39;m curious. Is it possible to run one time and get days using that ? Eg:- using datetime i take today (YYYY-MM-DD-HH-MM-SS) using today can i take yesterday or X days before day  without running each time ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 1, "creation_date": 1558108094, "post_id": 56122617, "comment_id": 99004515, "body": "@Debugger That would be the second way in the answer (&quot;<i>or directly</i>&quot;), if I get what you want?  Like, <code>my $d_N_back = DateTime-&gt;today(time_zone=&gt;&quot;local&quot;)-&gt;add(days=&gt;-$N);</code>  (where <code>$N</code> has the number).  Now this is an object you can work with. If you&#39;d rather get a ready string back, continue that chain: <code>my $str = DateTime-&gt;[as above]-&gt;ymd;</code>.  Or, for more specific formats, <code>-&gt;strftime(...)</code>.  Is this what you mean?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 1, "creation_date": 1558116374, "post_id": 56122617, "comment_id": 99007821, "body": "@Debugger  As I read again i don&#39;t understand &quot;<i>without running each time</i>&quot; ...?  Once you have one of them you can get any other day from it in one statement -- is that what you want with &quot;<i>using today can i take yesterday or X days before</i>&quot;? Like <code>$N_back = $today-&gt;clone-&gt;add(days=&gt;-$N);</code>. Here <code>clone</code> makes another object from <code>$today</code> so you keep <code>$today</code> and get a new object, for <code>$N</code> days before today.  Or, to get a string, <code>$N_back_str = $today-&gt;clone-&gt;add(days=&gt;-$N)-&gt;ymd;</code>"}, {"owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1558582503, "post_id": 56122617, "comment_id": 99151146, "body": "@zdim here is the thing.I&#39;m creating perl script and i need to create directories using timestamps.before i went with Y-M-D but now i plan to go with Y-M-D-H-M-S in case if the script runs few times in a day. your above one gives 2019-05-23T00:00:00 this out put.thanks for your help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "edited": false, "score": 0, "creation_date": 1558590463, "post_id": 56122617, "comment_id": 99152717, "body": "@Debugger Alright, thank you -- added time to the answer, for completeness."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1559540214, "last_edit_date": 1559540214, "creation_date": 1557804566, "answer_id": 56122617, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56122617#56122617", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>Using <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> module</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse DateTime;\n\nmy $today = DateTime-&gt;today(time_zone =&gt; 'local');\n\nmy $yesterday = $today-&gt;clone-&gt;add(days =&gt; -1);\n\nsay $yesterday-&gt;ymd;  #--&gt; 2019-05-13\n</code></pre>\n\n<p>or directly</p>\n\n<pre><code>my $yesterday = DateTime-&gt;today(time_zone =&gt; 'local')-&gt;add(days =&gt; -1);\n</code></pre>\n\n<p>Now these are objects with which you can do practically anything date-time related. </p>\n\n<p>To extract a string in the question's format use <code>$yesterday-&gt;ymd</code> since <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Eymd(-$optional_separator-),-$dt-%3Emdy(...),-$dt-%3Edmy(...)\" rel=\"nofollow noreferrer\">ymd</a>'s default format is <code>%Y-%m-%d</code>. Practically arbitrary formats can be obtained using <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Estrftime(-$format,-...-)\" rel=\"nofollow noreferrer\">strftime</a> method.</p>\n\n<hr>\n\n<p>There is no reason to reach for system facilities for a job like this. More to the point, the module is incomparably more sophisticated and rounded, for all kinds of curious cases and needs.</p>\n\n<p>An example: At some date-times, as Daylight Saving Time kicks in, certain time periods just <em>don't exist</em>. The docs <a href=\"https://metacpan.org/pod/DateTime#Invalid-Local-Times\" rel=\"nofollow noreferrer\">offer an example</a> of 2003-04-06, when 01:59:59 \"jumps\" to 03:00:00 and that hour is gone.  The  module handles attempts to use such (non-existing times) correctly, by throwing errors.</p>\n\n<p>And if you need to do any work with dates then using system's <code>date</code> isn't even an option since you get back merely a string, which you'd have to parse by hand for any further use.</p>\n\n<hr>\n\n<p>It has been added that in fact the time is wanted as well, not only the date.  Then, for example</p>\n\n<pre><code>my $today = DateTime-&gt;now(time_zone =&gt; 'local');\n\nsay $today-&gt;strftime(\"%Y%m%d_%H.%M.%S\");         #--&gt; 20190522_22.44.23\n\nmy $yesterday = $today-&gt;clone-&gt;add(days =&gt; -1);\n\nsay $yesterday-&gt;strftime(\"%Y%m%d_%H.%M.%S\");     #--&gt; 20190521_22.44.23\n</code></pre>\n\n<p>where method <a href=\"https://metacpan.org/pod/DateTime#DateTime-%3Enow(-...-)\" rel=\"nofollow noreferrer\">now</a> \"keeps\" the (local) time, along with the date (<code>today</code> is <code>truncate</code>-ed <code>now</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557810194, "post_id": 56122687, "comment_id": 98878584, "body": "This does not always work. It will sometimes give today&#39;s date, and it will sometimes give the date two days ago. Time::Piece is a bad module because it makes these kinds of error incredibly easy to make."}, {"owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557828692, "post_id": 56122687, "comment_id": 98887329, "body": "@ikegami I&#39;d argue that the math is wrong with my example code rather Time::Piece. :-) IMHO Time::Piece is as good as how it is documented. I probably shouldn&#39;t be using Time-math to do Date calculation..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557867983, "post_id": 56122687, "comment_id": 98907990, "body": "Re &quot;<i>I&#39;d argue that the math is wrong with my example code</i>&quot;, Me too. It&#39;s definitely a misuse of the module. (You want <code>localtime(time()) - 86400</code> or just <code>localtime() - 86400</code> instead of <code>localtime(time() - 86400)</code>) But the fact that the module encourages this type of mistake is a problem with the module."}], "tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 1, "last_activity_date": 1557805200, "creation_date": 1557805200, "answer_id": 56122687, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56122687#56122687", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>Using the backtick string has some quirks.... I generally disklike that operator.</p>\n\n<p>Let me recommand the use of <code>localtime()</code> function provided by <code>Time::Piece</code> module (there is a bulitin <code>localtime()</code> function, but the one from <code>Time::Piece</code> is awesomer :)</p>\n\n<pre><code>\nuse Time::Piece;\n\nmy ($t, $today, $yesterday);\n\n$t = localtime();\n$today = sprintf('%04d/%02d/%02d', $t->year, $t->mon, $t->mday);\n\n$t = localtime(time() - 86400);\n$yesterday = sprintf('%04d/%02d/%02d', $t->year, $t->mon, $t->mday);\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "edited": false, "score": 0, "creation_date": 1597929926, "post_id": 56123374, "comment_id": 112297301, "body": "I have to use <code>day</code> instead of <code>days</code> in truncate to  prevent the following exception: <code>Validation failed for type named TruncationLevel declared in package DateTime::Types (C:&#47;Strawberry&#47;perl&#47;vendor&#47;lib&#47;DateTime&#47;Types.pm) at line 135 in sub named (eval) with value &quot;days&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "edited": false, "score": 0, "creation_date": 1597943660, "post_id": 56123374, "comment_id": 112304702, "body": "@nck Indeed. Fixed"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 14, "last_activity_date": 1607650032, "last_edit_date": 1607650032, "creation_date": 1557810603, "answer_id": 56123374, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56123374#56123374", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>If you want yesterday's date:</p>\n<pre><code>use DateTime qw( );\n\nmy $yday_date =\n   DateTime\n      -&gt;now( time_zone =&gt; 'local' )\n      -&gt;set_time_zone('floating')\n      -&gt;truncate( to =&gt; 'day' )\n      -&gt;subtract( days =&gt; 1 )\n      -&gt;strftime('%Y-%m-%d');\n</code></pre>\n<p>For example, in New York on 2019-05-14 at 01:00:00, it would have returned 2019-05-13.</p>\n<p>For example, in New York on 2019-11-04 at 00:00:00, it would have returned 2019-11-03.</p>\n<p>Note that <code>-&gt;now( time_zone =&gt; 'local' )-&gt;set_time_zone('floating')-&gt;truncate( to =&gt; 'day' )</code> is used instead of <code>-&gt;today( time_zone =&gt; 'local' )</code> to avoid <a href=\"https://stackoverflow.com/q/18489927/589924\">this problem</a>.</p>\n<hr />\n<p>If you want the time a day earlier:</p>\n<pre><code>use DateTime qw( );\n\nmy $yday_datetime =\n   DateTime\n      -&gt;now( time_zone =&gt; 'local' )\n      -&gt;subtract( days =&gt; 1 )\n      -&gt;strftime('%Y-%m-%d %H:%M:%S');\n</code></pre>\n<p>For example, in New York on 2019-05-14 at 01:00:00, it would have returned 2019-05-13 01:00:00.</p>\n<p>For example, in New York on 2019-03-10 at 12:00:00, it would have returned 2019-03-09 12:00:00.</p>\n<p>For example, in New York on 2019-03-11 at 02:30:00, it would have resulted in an error. 2019-03-10 02:30:00 didn't exist because of the switch to Daylight Saving Time.</p>\n<hr />\n<p>If you want the time 24 hours earlier:</p>\n<pre><code>use DateTime qw( );\n\nmy $yday_datetime =\n   DateTime\n      -&gt;now( time_zone =&gt; 'local' )\n      -&gt;subtract( hours =&gt; 24 )\n      -&gt;strftime('%Y-%m-%d %H:%M:%S');\n</code></pre>\n<p>For example, in New York on 2019-05-14 at 01:00:00, it would have returned 2019-05-13 01:00:00.</p>\n<p>For example, in New York on 2019-03-10 at 12:00:00, it would have returned 2019-03-09 11:00:00.</p>\n<p>For example, in New York on 2019-03-11 at 02:30:00, it would have returned 2019-03-10 01:30:00.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1557819910, "creation_date": 1557819910, "answer_id": 56125332, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56125332#56125332", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>I recommend using DateTime (as described in ikegami's answer). But if you don't want to install a CPAN module, this method uses only features available in the standard Perl installation.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Local;\nuse POSIX 'strftime';\n\n# Get the current date/time\nmy ($sec, $min, $hr, $day, $mon, $yr) = localtime;\n\n# Get the epoch seconds for midday today\n# (we use midday to eliminate potential problems\n# when entering or leaving daylight savings time)\nmy $midday = timelocal(0, 0, 12, $day, $mon, $yr);\n\n# Subtract a day's worth of seconds from the epoch\nmy $midday_yesterday = $midday - (24 * 60 * 60);\n\n# Convert that epoch value to a string date using\n# localtime() and POSIX::strftime().\nmy $yesterday = strftime('%Y%m%d', localtime($midday_yesterday));\n\nsay $yesterday;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1557869545, "last_edit_date": 1557869545, "creation_date": 1557847426, "answer_id": 56133870, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl/56133870#56133870", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>With <a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow noreferrer\">Time::Moment</a>, for just yesterday's date:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Moment;\nmy $yesterday = Time::Moment-&gt;now-&gt;minus_days(1)-&gt;strftime('%Y-%m-%d');\n</code></pre>\n\n<p>Time::Moment works in instants and offsets, not time zones, so if you want the exact date and time of \"one day ago\" in your local time zone as in the DateTime examples, you can use <a href=\"https://metacpan.org/pod/Time::Moment::Role::TimeZone\" rel=\"nofollow noreferrer\">Time::Moment::Role::TimeZone</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Moment;\nuse Role::Tiny ();\nmy $class = Role::Tiny-&gt;create_class_with_roles('Time::Moment', 'Time::Moment::Role::TimeZone');\nmy $yesterday = $class-&gt;now-&gt;minus_days(1)-&gt;with_system_offset_same_local; # 1 day ago\nmy $yesterday = $class-&gt;now-&gt;minus_days(1)-&gt;with_system_offset_same_instant; # 24 hours ago\n</code></pre>\n\n<p>And the same caveats apply if the current time does not exist in the previous day in the local time zone.</p>\n"}], "owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3122, "favorite_count": 4, "accepted_answer_id": 56123374, "answer_count": 6, "score": 9, "last_activity_date": 1607650032, "creation_date": 1557802340, "last_edit_date": 1557902275, "question_id": 56122365, "link": "https://stackoverflow.com/questions/56122365/how-do-i-get-yesterdays-date-in-perl", "title": "How do I get yesterday&#39;s date in perl?", "body": "<p>Currently i take today date using below.I need to get yesterday date using this.. how can i get that ?</p>\n\n<pre><code>my $today = `date \"+%Y-%m-%d\"`;\n</code></pre>\n"}, {"tags": ["regex", "perl", "regex-negation"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1557791445, "post_id": 56121065, "comment_id": 98875100, "body": "Look into <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> to do a lot of the heavy lifting of extracting the quoted strings."}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1557794491, "post_id": 56121238, "comment_id": 98875622, "body": "We generate the translation base file with another Perl script. The format of the files was specified in advance, partly because we were able to leverage some code from a related project that has existed for many years."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1557808126, "post_id": 56121238, "comment_id": 98878109, "body": "@DaveAiello I second the suggestion to change to a well supported format (JSON or YAML for example), if at all possible.  Otherwise, note that for that nice <code>eval</code> to work the translations need be valid Perl (in your given sample all are). Then, if you need to clean out those newlines and any extra spaces, you&#39;ll need to do that as well (replace each stretch of consecutive &quot;whitespace&quot; with a single space)."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557899683, "post_id": 56121238, "comment_id": 98915049, "body": "@zdim Thanks for your feedback. Unfortunately, I can&#39;t work with formats that are as machine readable as JSON and YAML in this application. I needed to generate the translatable phrases in a format that was extremely human-readable.  The issues with the way the translatable phrases came out of the CMS initially were 1) someone who originally entered the page text inserted carriage returns into the text, thinking these carriage returns changed the appearance of the text when it was rendered by the CMS, and 2) the CMS page editor accepted these carriage returns."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1557906161, "post_id": 56121238, "comment_id": 98918072, "body": "@DaveAiello Sure, you know your project; I only meant to say that custom formats can keep bringing little issues.  But then the code here answers your query, no?  The linebreaks are really easy to clean out once you have those text segments extracted (like <code>s&#47;\\s+&#47; &#47;g</code> for example)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1557906191, "post_id": 56121238, "comment_id": 98918092, "body": "@DaveAiello  [ Btw, have you ever dealt with <a href=\"https://yaml.org/\" rel=\"nofollow noreferrer\">YAML</a>? It is <i>very</i> nice to look at.  For example, the web page at the link is a valid YAML document (well, save for a few glitches). ]"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1557791574, "creation_date": 1557791574, "answer_id": 56121238, "question_id": 56121065, "link": "https://stackoverflow.com/questions/56121065/parsing-multiline-quoted-strings-in-a-large-file/56121238#56121238", "title": "Parsing multiline quoted strings in a large file", "body": "<p>Your input has Perl-style #comments, Perl-style fat commas to associate English and foreign text, and even the Perl <code>q{}</code> construction. It seems like you really want to use Perl to analyze this file. If that's the case (and if you can always trust your input hasn't been maliciously tampered with), you can try something like:</p>\n\n<pre><code>@sections = split /^(\\s*#[^\\n]*)/m, $INPUT; # $INPUT is the whole file\nforeach $section (@sections) {\n    next unless $section =~ /\\S/;\n    if ($section =~ /^\\s*##\\s(\\d+)\\s.+/) {\n        $page_number = $1;\n    } elsif ($section =~ /^\\s*###\\s(.+)/) {\n        $page_section = $1;\n    } elsif ($section =~ /=&gt;/) {\n        %phrases = eval( \"($section)\" );\n        # manipulate keys and values of phrases\n    }\n}\n</code></pre>\n\n<p>If this is not the direction you wanted to go in, I think you'd be happier rewriting the input in a standard format with mature, battle-tested parsers, like JSON.</p>\n\n<pre><code>{\"source\":\"en-US\", \"dest\":\"es-ES\",\n[{\"pageTitle\":\"Example Page\", \"pageNumber\":3602,\n \"sections\":[{\"sectionName\":\"Title\", \"phrases\":{\n \"Example Page\":\"P\u00e1gina de ejemplo\"}},\n {\"sectionName\":\"Body\",\"phrases\":{\n \"This is an example of a string that came from an example page.\":\n \"Este es un ejemplo de una cadena que proviene de una p\u00e1gina de ejemplo.\",\n ... }}]]}\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557808762, "creation_date": 1557789932, "last_edit_date": 1557808762, "question_id": 56121065, "link": "https://stackoverflow.com/questions/56121065/parsing-multiline-quoted-strings-in-a-large-file", "title": "Parsing multiline quoted strings in a large file", "body": "<p>I'm working on a web publishing localization project, where I am beginning with an established website written in English that is published by a CMS. The file contains headers that identify pages, subheads that identify the sections of each page, and pairs of strings that illustrate the original phrase on the English website and the translated phrase in a different language.</p>\n\n<p>Each translation file contains only one language. So for the Spanish translation, an excerpt of representative file looks like this:</p>\n\n<pre><code>## 3602 Example Page\n\n    ### Title\n\n        'Example Page' =&gt; 'P\u00e1gina de ejemplo',\n\n    ### Body\n\n        'This is an example of a string that came from an example page.' =&gt; 'Este es un ejemplo de una cadena que proviene de una p\u00e1gina de ejemplo.',\n        'Parsing this would be relatively simple, except that\noccasionally, \nthere are carriage returns thrown into the text without warning.' =&gt; 'Parsear esto ser\u00eda relativamente simple, excepto que\nocasionalmente, \nhay retornos de carro lanzados en el texto sin previo aviso.',\n\n    ### Extended\n\n\n## 3704 About Us\n\n    ### Title\n\n        'About Us' =&gt; 'Sobre nosotros',\n\n    ### Body\n\n        'This text takes the place of text which would identify the client.' =&gt; 'Este texto toma el lugar del texto que identificar\u00eda al cliente.',\n        q{I passed the English text though Google Translate. Don't think for a moment that these passages are professionally translated!} =&gt; q{Pas\u00e9 el texto en ingl\u00e9s a trav\u00e9s de Google Translate. \u00a1No piense por un momento que estos pasajes son traducidos profesionalmente!},\n\n    ### Extended\n\n\n</code></pre>\n\n<p>What I'm trying to do is write a Perl script that parses this file, locates the page in the CMS, then replaces the original English string with the translated string, and saves the page in the CMS for subsequent publishing.</p>\n\n<p>The CMS I'm using has a Perl API, so the entire script is written in Perl.</p>\n\n<p>My approach up to now has been to read the file a line at a time, and use regular expressions to identify the important contents of the file using regular expressions.</p>\n\n<p>The critical part of this code is shown below:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    while (defined($current_line = &lt;FILE&gt;))\n    {\n        chomp $current_line;\n        $total_lines++;\n\n        ##########\n        #\n        # We need to parse the file, line-by-line, to determine what each line represents.\n        #\n        # If the $current_phrase is populated at the beginning of the case statement,\n        # we know that the \n        #\n        # When we start parsing, $current_page_id is zero (0). If we hit a page selector and\n        # the page ID is something other than zero, we need to save the previous page.\n        #\n        ##########  \n\n        if (length($current_phrase) &gt; 0) {\n            if ($current_line =~ /(.*\\')\\s=&gt;\\'(.*)/) {\n                $current_phrase .= '\\n' . $1;\n            }\n        }\n\n        elsif ($current_line =~ qr/##\\s(\\d+)\\s.+/mp) {\n\n            ##########\n            #\n            # $1 is the page ID number.\n            #\n            ##########\n\n            if ($current_page_id != int($1)) {\n                print \"\\nPage $1 selector\\n\";\n                $current_page_id = int($1);\n                $current_page_change_count = 0;\n                $current_page_section_name = '';\n                $current_page_section_content = '';\n                $current_phrase = '';\n\n            }\n\n\n\n        } elsif ($current_line =~ qr/###\\s(.+)/mp) {\n\n            ##########\n            #\n            # $1 is the name of the page section.\n            #\n            # We have to figure out if the page section is the same as the one that we\n            # have been processing.\n            #\n            ##########\n\n            print \"\\nPage Section Delimiter: \" . $1 . \"\\n\";\n\n            if ($1 ne $current_page_section_name) {\n\n                ##########\n                #\n                # Since $1 is not $current_page_section_name, we need to put\n                # $current_page_section_content into the page section where it belongs.\n                # \n                # $current_page_section_name refers to the section of the page with changes.\n                #\n                ##########\n\n                $current_page_section_name = $1;\n\n            }\n\n        } elsif (($current_line =~ qr/'((?:(?&gt;[^'\\\\]*)|\\\\.)*)' =&gt; '((?:(?&gt;[^'\\\\]*)|\\\\.)*)',/mp) || ($current_line =~ qr/q\\{((?:(?&gt;[^}\\\\]*)|\\\\.*))} =&gt; q\\{((?:(?&gt;[^}\\\\]*)|\\\\.*))},/mp)){\n\n                ##########\n                #\n                # The complex regular expression above is intended to capture multi-line\n                # variants of either the 'phrase' or q{phrase} pattern.\n                # \n                # See https://stackoverflow.com/questions/23086883/perl-multiline-string-regex\n                # for some idea how the single quote pattern was found. We had to work up the\n                # q{phrase} pattern ourselves.\n                #\n                #\n                ##########          \n\n            $current_page_change_count++;\n            $total_change_count++;\n            print \"Phrase \" . $current_page_change_count . \", original: \" . $1 . \", change to: \" . $2 . \"\\n\\n\";\n\n        } elsif (($current_line =~ qr/^\\s+?\\'(.+)[^\\'],?\\s?/mp) || ($current_line =~ qr/^\\s+?q\\{(.+)[^}],?\\s?/mp)) {\n\n                ##########\n                #\n                # The biggest unresolved issue with the while loop is how\n                # to identify the unterminated strings that begin with\n                # a single quote or the q{ construct.\n                #\n                # The regular expression above is an attempt to match both cases.\n                #\n                # Eventually, I will have to search for the end of the\n                # string, the =&gt; construct, and the translated phrase.\n                #\n                ##########  \n\n            print \"Unterminated string: \" . $current_line . \"\\n\";\n        } elsif (($current_line =~ qr/^\\s+/mp) || (length($current_line) == 0)) {\n            print \"Blank line.\\n\";\n            $total_blank_lines++;\n        } else {\n            #\n            # Want to ignore, not print this.\n            print \"Something else:  \\'\" . $current_line . \"\\'\\n\";\n            #\n            $total_blank_lines++;\n        }\n\n\n    }\n\n    print \"\\nTotal lines: \" . $total_lines . \"\\n\";\n    print \"\\nTotal blank lines: \" . $total_blank_lines . \"\\n\";\n    print \"Total change count: \" . $total_change_count . \"\\n\";\n\n</code></pre>\n\n<p>As I say in the code comments, the biggest issue I'm running into is crafting a regular expression that identifies unterminated strings, which are what I call phrases from the English version of the website that begin with a single quote or the <code>q{</code> construct and, at some point in the line of text, have a carriage return terminator.</p>\n\n<p>The current regular expression is not selective enough on its own, but that may be OK because the previous regular expressions select other parts of the file correctly.</p>\n\n<p>Where I'm looking for help is:</p>\n\n<ol>\n<li>Ensuring that this regular expression is sufficiently selective.</li>\n<li>Figuring out how to accumulate all of the text that should be part of the <code>$current_phrase</code>, so the phrase spans multiple lines.</li>\n<li>Figuring out a way forward, so I can develop other regular expressions to identify the other multi-line translation pair fragments that would be necessary to handle a file of this nature.</li>\n</ol>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["perl", "bcrypt"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1557771791, "post_id": 56117861, "comment_id": 98869037, "body": "Did you try without the salting?"}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1557772043, "post_id": 56117861, "comment_id": 98869128, "body": "Thanks, looks like I was using the wrong function. Who knew."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557777043, "post_id": 56117861, "comment_id": 98871161, "body": "Take note of <a href=\"https://metacpan.org/pod/Digest::Bcrypt#NOTICE\" rel=\"nofollow noreferrer\">metacpan.org/pod/Digest::Bcrypt#NOTICE</a>."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1557779179, "post_id": 56117861, "comment_id": 98871960, "body": "Yes, thanks Grinnz. Did read that and may migrate to that module in the future."}], "answers": [{"tags": [], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "is_accepted": true, "score": 2, "last_activity_date": 1557772624, "last_edit_date": 1557772624, "creation_date": 1557772006, "answer_id": 56117947, "question_id": 56117861, "link": "https://stackoverflow.com/questions/56117861/perl-digest-bcrypt-generating-a-proper-hash/56117947#56117947", "title": "Perl Digest Bcrypt, generating a proper hash", "body": "<p>Figured out the problem. I have to use <code>bcrypt_b64digest</code> instead of <code>b64digest</code>. I wish the perl documentation was clearer in which one needs to be used so that other bcrypt implementations can \"get it\". </p>\n\n<pre><code>my $pass_hash = $bcrypt-&gt;add('bob')-&gt;bcrypt_b64digest;\n</code></pre>\n\n<p>From <a href=\"https://metacpan.org/pod/Digest::Bcrypt#bcrypt_b64digest\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Digest::Bcrypt#bcrypt_b64digest</a></p>\n\n<blockquote>\n  <p>Same as \"digest\", but will return the digest base64 encoded using the\n  alphabet that is commonly used with bcrypt. The length of the returned\n  string will be 31 and will only contain characters from the ranges\n  '0'..'9', 'A'..'Z', 'a'..'z', '+', and '.'</p>\n  \n  <p>The base64 encoded string returned is not padded to be a multiple of 4\n  bytes long. Note: This is bcrypt's own non-standard base64 alphabet,\n  It is not compatible with the standard MIME base64 encoding.</p>\n</blockquote>\n"}], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 56117947, "answer_count": 1, "score": 0, "last_activity_date": 1557772624, "creation_date": 1557771588, "question_id": 56117861, "link": "https://stackoverflow.com/questions/56117861/perl-digest-bcrypt-generating-a-proper-hash", "title": "Perl Digest Bcrypt, generating a proper hash", "body": "<p>I have written a test program that generates a Bcrypt hash. This hash later needs to be verified by a PHP backend.</p>\n\n<p>This is my perl code:</p>\n\n<pre><code>use Digest;\n#use Data::Entropy::Algorithms qw(rand_bits);\n\n\n#my $bcrypt = Digest-&gt;new('Bcrypt', cost=&gt;10, salt=&gt;rand_bits(16*8));\nmy $bcrypt = Digest-&gt;new('Bcrypt', cost=&gt;10, salt=&gt;'1111111111111111');\nmy $settings = $bcrypt-&gt;settings(); # save for later checks.\nmy $pass_hash = $bcrypt-&gt;add('bob')-&gt;b64digest;\nprint $settings.$pass_hash.\"\\n\";\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>$2a$10$KRCvKRCvKRCvKRCvKRCvKOoFxCE1d/OZTKQqhet3bKOq6ZVIACXBU\n</code></pre>\n\n<p>This does not validate as a proper hash if I use an online bcrypt tool such as <a href=\"https://bcrypt-generator.com\" rel=\"nofollow noreferrer\">https://bcrypt-generator.com</a></p>\n\n<p>Can someone point out the error? Thanks.</p>\n"}, {"tags": ["perl", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1557780340, "post_id": 56117461, "comment_id": 98872403, "body": "In this case, &quot;must not&quot; means &quot;did not&quot; - the file won&#39;t be read and executed unless the permissions are correct."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1557769631, "creation_date": 1557769631, "answer_id": 56117461, "question_id": 56116553, "link": "https://stackoverflow.com/questions/56116553/another-way-to-set-dbdeep/56117461#56117461", "title": "Another way to set DB::deep?", "body": "<p>Create a <code>~/.perldb</code> file with</p>\n\n<pre><code>$DB::deep=500\n</code></pre>\n\n<p>Set permissions on this file to something secure (0444 or 0644) so you don't get this admonishment:</p>\n\n<blockquote>\n  <p>perldb: Must not source insecure rcfile /Users/mob/.perldb.\n          You or the superuser must be the owner, and it must not \n          be writable by anyone but its owner.</p>\n</blockquote>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 56117461, "answer_count": 1, "score": 1, "last_activity_date": 1557769631, "creation_date": 1557765499, "question_id": 56116553, "link": "https://stackoverflow.com/questions/56116553/another-way-to-set-dbdeep", "title": "Another way to set DB::deep?", "body": "<p>When debugging complex code using standart Perl debugger in NonStop mode <a href=\"https://stackoverflow.com/questions/3562552/how-do-i-get-the-perl-debugger-to-not-stop-at-100-levels-deep-in-subroutine-cal\">sometimes we get</a> <code>100 levels deep in subroutine calls</code> error.</p>\n\n<p>Is there another way to set <code>$DB::deep</code> variable, without touching code ?</p>\n\n<p>I tried to use <a href=\"https://perldoc.perl.org/perldebug.html#dumpDepth\" rel=\"nofollow noreferrer\">dumpDepth</a> option, but seems like it's not available in NonStop mode.</p>\n\n<p>I know about <code>perl -MPerlIO='via;$DB::deep=500'</code> hack, but it's not working with perl version >= 5.20</p>\n"}, {"tags": ["perl", "button", "catalyst"], "owner": {"reputation": 306, "user_id": 4520979, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/461450d2d32187c0e0fc9fb1d1a5a668?s=128&d=identicon&r=PG&f=1", "display_name": "schu777", "link": "https://stackoverflow.com/users/4520979/schu777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557757728, "creation_date": 1557757728, "question_id": 56114471, "link": "https://stackoverflow.com/questions/56114471/resetting-text-on-a-button-using-a-catalyst-value-set-on-the-stash", "title": "Resetting text on a button using a Catalyst value set on the stash", "body": "<p>I'm new to Catalyst and Perl - but my issue is I have a button on the Catalyst \"tt\" file that I'd like to display the value stored in the stash. Upon a click, the Perl controller file would change the value via an ajax call. However, this just isn't working for some reason. I'm wondering if Catalyst isn't resetting the value in the stash without doing a \"refresh\" of the page?</p>\n\n<p>I can use the getElementsById and have the text change - but like to let the controller hand that.</p>\n\n<p>Here is the button from the file.tt</p>\n\n<pre><code>&lt;input type=\"button\" class=\"btn btn-primary btn-block\" id=\"code_button\" href=\"#\" onClick=\"get_codes();\" value=\"[% Catalyst.stash.button_description %]\"&gt;&lt;/input&gt;\n</code></pre>\n\n<p>This is the Javascript function to do the ajax call:</p>\n\n<pre><code>    function get_codes() {\n       jQuery.ajax({\n          async: false,\n          type: 'POST',\n          url: '/grl/get_codes',\n          dataType: 'json',\n          success: function( data ) {\n             console.log(data);\n             document.getElementById(\"grl_button\").value=\"New Value\"; &lt;--- Works of course\n             document.getElementById(\"grl_button\").value=\"[% Catalyst.stash.button_description %]\"; &lt;--- this doesn't update to new value set in the controller\n             console.log(document.getElementById(\"code_button\").value);\n          }\n       });\n    };\n</code></pre>\n\n<p>This is the code from the Perl controller:</p>\n\n<pre><code> sub get_codes : PathPart('get_codes') Chained('grl') Args(0) {\n    my ( $self, $c ) = @_;\n    $DB::single=1;\n\n    my $button_description = \"Another Value\";\n    $c-&gt;stash-&gt;{button_description} = $button_description;\n    my $ret = {error=&gt;0,message=&gt;\"Success?\"};\n    $c-&gt;res-&gt;body(encode_json($ret));\n    $c-&gt;detach;\n }\n</code></pre>\n\n<p>I expect that the click on the button would actually have the text of the button change to \"Another Value\" but instead it remains the same.</p>\n"}, {"tags": ["c++", "qt", "perl"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1557756679, "post_id": 56114086, "comment_id": 98861838, "body": "<code>QHash</code> is a hash map, which uses a hash function internally to organize data. It is not meant for computing hashes. Look into <code>QCryptographicHash</code> for hash functions. I have no clue what the Perl code does, so I have no idea if that is what you wanted."}, {"owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 0, "creation_date": 1557774278, "post_id": 56114086, "comment_id": 98870046, "body": "You could use a <code>QVariantMap</code> (or a <code>QJsonObject</code>) for that. It will allow you to have variable levels in your structure."}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 1521297, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/75b3bf6a7896c108b25c751444f49505?s=128&d=identicon&r=PG", "display_name": "Greg B", "link": "https://stackoverflow.com/users/1521297/greg-b"}, "edited": false, "score": 0, "creation_date": 1557846049, "post_id": 56114393, "comment_id": 98897847, "body": "This was what I was looking for, and I ended up using a QMap because the keys are automatically sorted. The keys do not need to be same datatype for all levels, but do need to be the same for all items of each level. So all of level 1 needs to be QString, and all of level 2 integer, etc. The value at the end needs to be the same as well, so I kept it as a QString. I had to figure out how to iterate over the QMaps. I&#39;ve added to my code above with what I&#39;m using now."}], "tags": [], "owner": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "is_accepted": true, "score": 3, "last_activity_date": 1557757444, "creation_date": 1557757444, "answer_id": 56114393, "question_id": 56114086, "link": "https://stackoverflow.com/questions/56114086/qt-c-hash-of-hashes/56114393#56114393", "title": "Qt/C++ hash of hashes", "body": "<p>You can use QHash like that:</p>\n\n<pre><code>QHash&lt;QString, QHash&lt;QString, QString&gt;&gt; two_level_hash;\ntwo_level_hash[\"first_level\"][\"second_level\"] = \"your data\";\n</code></pre>\n\n<p>this works for hashes with level count you want.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1557757540, "creation_date": 1557757540, "answer_id": 56114417, "question_id": 56114086, "link": "https://stackoverflow.com/questions/56114086/qt-c-hash-of-hashes/56114417#56114417", "title": "Qt/C++ hash of hashes", "body": "<p>I'm not familiar with <code>perl</code>, but by looks of it I suspect you need something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct PropertyPath {\n    QString uid;\n    QString studynum; // or other type of your preference \n    QString seriesnum;// or other type of your preference \n    QString name;\n}\n\nuint qHash(const PropertyPath&amp; p, uint seed = 0)\n{\n    auto h = qHash(p.uid, seed);\n    h = qHash(p.studynum, h);\n    h = qHash(p.seriesnum, h);\n    h = qHash(p.name, h);\n    return h;\n}\n\nQHash&lt;PropertyPath, QString&gt; cfg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1557858309, "last_edit_date": 1557858309, "creation_date": 1557768569, "answer_id": 56117220, "question_id": 56114086, "link": "https://stackoverflow.com/questions/56114086/qt-c-hash-of-hashes/56117220#56117220", "title": "Qt/C++ hash of hashes", "body": "<p>A direct equivalent of a hash/dictionary is the <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">unordered_map</a>.  Then you can nest them, much like in your Perl example.  This results in a hierarchy that may be hard to maintain, just like it does in scripting languages when it's pushed  too far. The basic idea</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;unordered_map&gt;\n\nusing std::string;\nusing std::cout;\nusing std::endl;\n\nint main() \n{\n    typedef std::unordered_map&lt;string, int&gt;    bottom;\n    typedef std::unordered_map&lt;string, bottom&gt; nextlev;\n    std::unordered_map&lt;string, nextlev&gt;        h3d;\n\n    h3d[\"toplev\"][\"nextlev\"][\"seriesid\"]  = 3;\n    h3d[\"toplev\"][\"nextlev\"][\"subjectid\"] = 11;\n\n    for (auto k: h3d) {\n        cout &lt;&lt; k.first &lt;&lt; \" =&gt; \" &lt;&lt; endl;\n        for (auto k2: k.second) {\n            cout &lt;&lt; \"\\t\" &lt;&lt; k2.first &lt;&lt; \" =&gt; \" &lt;&lt; endl;\n            for (auto k3: k2.second)\n                cout &lt;&lt; \"\\t\\t\" &lt;&lt; k3.first &lt;&lt; \" =&gt; \" &lt;&lt; k3.second &lt;&lt; endl;\n        }\n    }   \n\n    return 0;\n}\n</code></pre>\n\n<p>This may (or may not) perform poorly, in some use cases.  You probably want a <code>struct</code> to group values. For a far more involved and careful structure see, for example, <a href=\"https://stackoverflow.com/a/8799066/4653379\">this post</a>.</p>\n\n<p>Finally, I'd really recommend to implement that multi-level hash as a class. This is a good idea in a scripting language as well, when chained data gets unwieldy: re-write as a class.</p>\n"}], "owner": {"reputation": 575, "user_id": 1521297, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/75b3bf6a7896c108b25c751444f49505?s=128&d=identicon&r=PG", "display_name": "Greg B", "link": "https://stackoverflow.com/users/1521297/greg-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 56114393, "answer_count": 3, "score": 1, "last_activity_date": 1557858309, "creation_date": 1557756361, "last_edit_date": 1557846386, "question_id": 56114086, "link": "https://stackoverflow.com/questions/56114086/qt-c-hash-of-hashes", "title": "Qt/C++ hash of hashes", "body": "<p>I'm converting a Perl program into Qt/C++. Most code has a straightforward conversion into either C++ or Qt function. However, I'm not sure how to migrate the Perl hash of hashes.</p>\n\n<p>Here's an example of the multilevel hashes that I use to organize some data</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$series{$uid}{$studynum}{$seriesnum}{'exportseriesid'} = $exportseriesid;\n$series{$uid}{$studynum}{$seriesnum}{'seriesid'} = $seriesid;\n$series{$uid}{$studynum}{$seriesnum}{'subjectid'} = $subjectid;\n$series{$uid}{$studynum}{$seriesnum}{'studyid'} = $studyid;\n$series{$uid}{$studynum}{$seriesnum}{'modality'} = $modality;\n</code></pre>\n\n<p>I've used the QHash to create single level hashes, such as</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QHash&lt;QString, QString&gt; cfg;\nint n = cfg[\"threads\"].toInt();\n</code></pre>\n\n<p>Is there a method similar in C++ or using QHash?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I ended up using nested QMaps. QMap is automatically sorted by key when iterating over it, while QHash is not. Here is the code I ultimately used</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>/* create a multilevel hash s[uid][study][series]['attribute'] */\nQMap&lt;QString, QMap&lt;int, QMap&lt;int, QMap&lt;QString, QString&gt;&gt;&gt;&gt; s;\n\n/* iterate through the UIDs */\nfor(QMap&lt;QString, QMap&lt;int, QMap&lt;int, QMap&lt;QString, QString&gt;&gt;&gt;&gt;::iterator a = s.begin(); a != s.end(); ++a) {\n    QString uid = a.key();\n\n    /* iterate through the studynums */\n    for(QMap&lt;int, QMap&lt;int, QMap&lt;QString, QString&gt;&gt;&gt;::iterator b = s[uid].begin(); b != s[uid].end(); ++b) {\n        int studynum = b.key();\n\n        /* iterate through the seriesnums */\n        for(QMap&lt;int, QMap&lt;QString, QString&gt;&gt;::iterator c = s[uid][studynum].begin(); c != s[uid][studynum].end(); ++c) {\n            int seriesnum = c.key();\n\n            int exportseriesid = s[uid][studynum][seriesnum][\"exportseriesid\"].toInt();\n\n            /* etc... */\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557750373, "post_id": 56111956, "comment_id": 98858098, "body": "You can address the hash in the array (element 0) like this: <code>$data{profiles}{Tags}[0]{&quot;###PLACEHOLDER###&quot;} = &quot;data&quot;</code>"}, {"owner": {"reputation": 327, "user_id": 9240529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0198168843da98e81bb7bfab30bc6983?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Lamp", "link": "https://stackoverflow.com/users/9240529/mister-lamp"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557750644, "post_id": 56111956, "comment_id": 98858247, "body": "But this is an array and the values are not sorted so I cant be sure to get the correct one."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557750803, "post_id": 56111956, "comment_id": 98858333, "body": "can you save the correct index (into the array) in a variable?"}, {"owner": {"reputation": 327, "user_id": 9240529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0198168843da98e81bb7bfab30bc6983?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Lamp", "link": "https://stackoverflow.com/users/9240529/mister-lamp"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557750876, "post_id": 56111956, "comment_id": 98858379, "body": "Yeah i think so, how can I do that?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557750933, "post_id": 56111956, "comment_id": 98858411, "body": "So if the index is saved in <code>$i</code>, then you do <code>$data{profiles}{Tags}[$i]{&quot;###PLACEHOLDER###&quot;} = &quot;data&quot;</code>"}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 2, "creation_date": 1557750947, "post_id": 56111956, "comment_id": 98858418, "body": "I would advise you to create an object oriented class for such a complex nested data structure, then provide methods which allow you to add data in a manner that suits the semantics of your object."}, {"owner": {"reputation": 327, "user_id": 9240529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0198168843da98e81bb7bfab30bc6983?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Lamp", "link": "https://stackoverflow.com/users/9240529/mister-lamp"}, "edited": false, "score": 0, "creation_date": 1557751174, "post_id": 56111956, "comment_id": 98858532, "body": "Thanks to all i will give that a try"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1557751886, "post_id": 56111956, "comment_id": 98858934, "body": "<i>&quot;But this is an array and the values are not sorted so I cant be sure to get the correct one.&quot;</i> Are you sure you want an array in the first place and not another layer of hashes, such as a hash of tags, with the tag names as its keys?"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1557754531, "post_id": 56111956, "comment_id": 98860558, "body": "Your example structure is not valid Perl, so your example code will not work for a hash.  Are you using the hash <i>key</i> or the hash <i>value</i> as the placeholder?"}], "answers": [{"comments": [{"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557863352, "post_id": 56114098, "comment_id": 98906265, "body": "It does on my machine. What does it do on your machine?"}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557942756, "post_id": 56114098, "comment_id": 98939386, "body": "Right.  Good catch.  Nested references to the structures. I&#39;ll fix that.  If the OP wants to directly change the <code>###PLACEHOLDER###</code> string they&#39;ll still need a reference to the value.  [Now I see what I did.  I switched <code>dpathr</code> with <code>dpath</code> for the two cases when I was creating the post.  Ooops]"}], "tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": true, "score": 1, "last_activity_date": 1557942880, "last_edit_date": 1557942880, "creation_date": 1557756407, "answer_id": 56114098, "question_id": 56111956, "link": "https://stackoverflow.com/questions/56111956/how-to-address-specific-array-element-in-complex-data-structure-in-perl/56114098#56114098", "title": "How to address specific array element in complex data structure in perl", "body": "<p><strong>[UPDATE: used <code>dpathr</code> instead of <code>dpath</code> for the references to structures]</strong></p>\n\n<p><strong>[UPDATE: used <code>dpath</code> instead of <code>dpathr</code> for the references to elements]</strong></p>\n\n<p><a href=\"https://metacpan.org/pod/Data::DPath\" rel=\"nofollow noreferrer\">Data::DPath</a> can do what you require.  Here's code which returns a reference to any structure (hash or array) which contains an element whose value is <code>###PLACEHOLDER###</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\nuse Data::DPath qw[ dpath dpathr ];\n\nmy $struct = {\n    'dummy'    =&gt; 'foo',\n    'profiles' =&gt; {\n        'ARRAY' =&gt; [ '###PLACEHOLDER###' ],\n        'HASH' =&gt; { key =&gt; '###PLACEHOLDER###' },\n    },\n};\n\nmy $path = dpath( '//[value eq \"###PLACEHOLDER###\"]/..' );\n\nmy @matches = $path-&gt;match( $struct );\n\nprint Dumper \\@matches;\n</code></pre>\n\n<p>It results in:</p>\n\n<pre><code>$VAR1 = [\n          [\n            '###PLACEHOLDER###'\n          ],\n          {\n            'key' =&gt; '###PLACEHOLDER###'\n          }\n        ];\n</code></pre>\n\n<p>If you want direct access to the element, change the path to</p>\n\n<pre><code>my $path = dpathr( '//*[value eq \"###PLACEHOLDER###\"]' );\n</code></pre>\n\n<p>with the result:</p>\n\n<pre><code>$VAR1 = [\n          \\'###PLACEHOLDER###',\n          \\'###PLACEHOLDER###'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1557789759, "last_edit_date": 1557789759, "creation_date": 1557776064, "answer_id": 56118829, "question_id": 56111956, "link": "https://stackoverflow.com/questions/56111956/how-to-address-specific-array-element-in-complex-data-structure-in-perl/56118829#56118829", "title": "How to address specific array element in complex data structure in perl", "body": "<p>It's not clear to me what you what \"adding an element at <code>###PLACEHOLDER###</code>\" means. Elements can be added <em>to</em> arrays and hashes, and it's not clear to which array or hash you are referring.</p>\n\n<hr>\n\n<p>To append an element to the array referenced by <code>$var-&gt;{profiles}{Tags}</code>, use</p>\n\n<pre><code>push @{ $var-&gt;{profiles}{Tags} }, $val;\n</code></pre>\n\n<p>This results in</p>\n\n<pre><code>$VAR1 = {\n  'dummy' =&gt; 'foo',\n  'profiles' =&gt; {\n    'Tags' =&gt; [\n                {\n                  '###PLACEHOLDER###' =&gt; undef,\n                },\n                $val\n              ],\n}\n</code></pre>\n\n<hr>\n\n<p>To add an element to the hash referenced by the last element of the array referenced by <code>$var-&gt;{profiles}{Tags}</code>, use</p>\n\n<pre><code>$var-&gt;{profiles}{Tags}[-1]{$key} = $val;\n</code></pre>\n\n<p>This results in</p>\n\n<pre><code>$VAR1 = {\n  'dummy' =&gt; 'foo',\n  'profiles' =&gt; {\n    'Tags' =&gt; [\n                {\n                  '###PLACEHOLDER###' =&gt; undef,\n                  $key =&gt; $val,\n                },\n              ],\n}\n</code></pre>\n\n<p>Of course, if <code>$key</code> is <code>###PLACEHOLDER###</code>, this results in</p>\n\n<pre><code>$VAR1 = {\n  'dummy' =&gt; 'foo',\n  'profiles' =&gt; {\n    'Tags' =&gt; [\n                {\n                  '###PLACEHOLDER###' =&gt; $val,\n                },\n              ],\n}\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 9240529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0198168843da98e81bb7bfab30bc6983?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Lamp", "link": "https://stackoverflow.com/users/9240529/mister-lamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 56114098, "answer_count": 2, "score": 0, "last_activity_date": 1557942880, "creation_date": 1557749029, "question_id": 56111956, "link": "https://stackoverflow.com/questions/56111956/how-to-address-specific-array-element-in-complex-data-structure-in-perl", "title": "How to address specific array element in complex data structure in perl", "body": "<p>I have a complex json data structure in perl like in the following example. I want to address an array element and store data.</p>\n\n<p>Variable</p>\n\n<pre><code>$VAR1 = {\n  'dummy' =&gt; 'foo',\n  'profiles' =&gt; {\n    'Tags' =&gt; [\n                {\n                  '###PLACEHOLDER###',\n                }\n              ],\n}\n</code></pre>\n\n<p>I can for example add an element at \"###PLACEHOLDER###\" but want later in the perl script to add beneath that Placeholder additional information.\nNormally i would address these elements with $var->{profiles}->{Tags}->{PLACEHOLDER} but this is not working with an array.</p>\n\n<p>I dont want to create everytime a foreach loop when i know the name exactly.</p>\n\n<p>Any advice?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 81, "user_id": 3406765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg2Et.jpg?s=128&g=1", "display_name": "buchi", "link": "https://stackoverflow.com/users/3406765/buchi"}, "edited": false, "score": 1, "creation_date": 1557752280, "post_id": 56111366, "comment_id": 98859169, "body": "The constructor LogFile-&gt;new() returns LogFile object $log"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11492491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nXDoCPuclF0/AAAAAAAAAAI/AAAAAAAAJto/mi65M9DL9TU/photo.jpg?sz=128", "display_name": "amith cm", "link": "https://stackoverflow.com/users/11492491/amith-cm"}, "edited": false, "score": 0, "creation_date": 1557912277, "post_id": 56114373, "comment_id": 98921407, "body": "Hi Thanks for your answer , but can you let me know how this statement works, $tpchc-&gt;{args}-&gt;{debug} , i mean why is it referencing twice ? please help"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "reply_to_user": {"reputation": 1, "user_id": 11492491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nXDoCPuclF0/AAAAAAAAAAI/AAAAAAAAJto/mi65M9DL9TU/photo.jpg?sz=128", "display_name": "amith cm", "link": "https://stackoverflow.com/users/11492491/amith-cm"}, "edited": false, "score": 0, "creation_date": 1557929775, "post_id": 56114373, "comment_id": 98932356, "body": "@amith cm, It&#39;s a complex hash. <code>$tpchc</code> is a hashref and the value assigned to <code>args</code> is also a hashref. <code>debug</code> is one of the keys inside of the <code>args</code> hashref. The full <code>$tpchc-&gt;{args}-&gt;{debug}</code> returns the value of the <code>debug</code> key. The <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> perldocs  can give you more information about how hashrefs work."}], "tags": [], "owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "is_accepted": false, "score": 1, "last_activity_date": 1557757377, "creation_date": 1557757377, "answer_id": 56114373, "question_id": 56111366, "link": "https://stackoverflow.com/questions/56111366/log-logfile-newcfglogdir-tpchc-log-tpchc-args-debug-1/56114373#56114373", "title": "$log = LogFile-&gt;new($cfg{logdir} . &#39;/tpchc.log&#39;, ($tpchc-&gt;{args}-&gt;{debug}) ? 1 : 0) what does this mean please explain", "body": "<p>The code is creating a new <code>LogFile</code> object, which takes two arguments: the path to the log file and a debug boolean flag. </p>\n\n<p>In this case the first argument is using concatenation (with the period) and the second argument is being set using a <a href=\"https://perlmaven.com/the-ternary-operator-in-perl\" rel=\"nofollow noreferrer\">ternary if-else</a>. </p>\n\n<p>Perl is a compile-at-run-time language so it allows you to write arguments directly in a constructor this way (though there are limits to this). It's the same as doing:</p>\n\n<pre><code>my $file  = $cfg{logdir} . '/tpchc.log';\nmy $debug = $tpchc-&gt;{args}-&gt;{debug} ? 1 : 0;\nmy $log   = LogFile-&gt;new($file, $debug);\n</code></pre>\n\n<p>Incidentally, simple hashes and hashrefs (but not objects) can be interpolated in a string, so you don't actually need to concatenate the <code>$file</code> line:</p>\n\n<pre><code>my $file = \"$cfg{logdir}/tpchc.log\";\n</code></pre>\n\n<p>Some people find that easier to read and some don't so to each their own.</p>\n"}], "owner": {"reputation": 1, "user_id": 11492491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nXDoCPuclF0/AAAAAAAAAAI/AAAAAAAAJto/mi65M9DL9TU/photo.jpg?sz=128", "display_name": "amith cm", "link": "https://stackoverflow.com/users/11492491/amith-cm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1557757377, "creation_date": 1557746801, "question_id": 56111366, "link": "https://stackoverflow.com/questions/56111366/log-logfile-newcfglogdir-tpchc-log-tpchc-args-debug-1", "title": "$log = LogFile-&gt;new($cfg{logdir} . &#39;/tpchc.log&#39;, ($tpchc-&gt;{args}-&gt;{debug}) ? 1 : 0) what does this mean please explain", "body": "<p>$log = LogFile->new($cfg{logdir} . '/tpchc.log', ($tpchc->{args}->{debug}) ? 1 : 0)</p>\n\n<p>Can someone please tell me what this means</p>\n"}, {"tags": ["perl", "docker", "travis-ci", "travis-ci-cli"], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1557756142, "post_id": 56110346, "comment_id": 98861523, "body": "I agree and I&#39;m following the suggestion. What it could help is to know what system uses TravisCI when I specify &quot;Perl 5.14&quot; as base system, as I&#39;m finding the problem related to installation of modules that is non giving consistent results across systems, any idea?"}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "reply_to_user": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 1, "creation_date": 1557766394, "post_id": 56110346, "comment_id": 98866834, "body": "After the build fails, Travis has a &quot;Debug Build&quot; which gives you SSH access to it, so you can examine the system. Another way is to put whatever command you want to check in the <code>.travis.yml</code> <code>script</code> section (for example commands that list perl modules or show OS version or whatever)."}], "tags": [], "owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "is_accepted": true, "score": 3, "last_activity_date": 1557742793, "creation_date": 1557742793, "answer_id": 56110346, "question_id": 56109647, "link": "https://stackoverflow.com/questions/56109647/local-testing-of-perl-repository-using-travis-ci-with-docker/56110346#56110346", "title": "Local testing of Perl repository using Travis CI (with docker)", "body": "<p>For what its worth, I think you are going at it from the wrong angle. </p>\n\n<p>Travis is just running your stuff remotely. Instead of bringing Travis to your machine, you need to make your tests pass locally first - cryptic or not - there is no way around it, especially if you are going to own this repo. </p>\n\n<p>Another reason I am recommending this, is that - as you have already witnessed - the develop-debug-fix cycle is <em>much</em> lengthier when you rely on something to test your code remotely.</p>\n\n<p>It has been my experience that your <code>.travis.yml</code> should be super simple, since it just runs one or two scripts or commands that can comfortably run locally.</p>\n\n<p>If you are comfortable with Docker, I would consider building a local <code>Dockerfile</code> with all the dependencies, and bring your tests to work in your docker environment. Once you succeeded with this step, asking Travis to do the same (run tests in a docker) is trivial.</p>\n\n<p>Not sure if it is the answer you were looking for, but it was too long for a comment.</p>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 56110346, "answer_count": 1, "score": 2, "last_activity_date": 1557756193, "creation_date": 1557740405, "last_edit_date": 1557756193, "question_id": 56109647, "link": "https://stackoverflow.com/questions/56109647/local-testing-of-perl-repository-using-travis-ci-with-docker", "title": "Local testing of Perl repository using Travis CI (with docker)", "body": "<p>I'd like to fix a bug in a Perl repository (now owned by me, I just submitted some pull requests), but at the moment it's failing its Travis CI tests (before my pull requests).</p>\n\n<p>My goal is to be able to run Travis CI tests locally starting from the repository's <code>.travis.yml</code>. </p>\n\n<p>Note that I'm totally new to Travis CI.</p>\n\n<p>Following other's solutions that pointed to this FAQ (<a href=\"http://web.archive.org/web/20180929150027/https://docs.travis-ci.com/user/common-build-problems/#troubleshooting-locally-in-a-docker-image\" rel=\"nofollow noreferrer\">http://web.archive.org/web/20180929150027/https://docs.travis-ci.com/user/common-build-problems/#troubleshooting-locally-in-a-docker-image</a>), that as you can see is no longer officially available in travis-ci.com, I tried:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo  docker pull travisci/ci-amethyst:packer-1512508255-986baf0\nsudo docker run --name travis-debug -dit travisci/ci-amethyst:packer-1512508255-986baf0 /sbin/init\nsudo docker exec -it travis-debug bash -l\n</code></pre>\n\n<p>From the container:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>su - travis\ngit clone https://github.com/{user}/{repo}.git\n</code></pre>\n\n<p>Now I don't know how to build the bash script to run the tests, as the last two steps (manually install dependencies /  run your Travis CI build) looks cryptic (I don't know how to run the build, and possibly lead to lack of reproducibily (if I install dependencies manually, how do I know I'll get the same results as the cloud test?)</p>\n\n<p>I tried starting from the procedure described here (<a href=\"https://github.com/travis-ci/travis-build\" rel=\"nofollow noreferrer\">https://github.com/travis-ci/travis-build</a> \n), one error is \u00b4Could not locate Gemfile or .bundle/ directory\u00b4, but I probably need some missing steps.</p>\n"}, {"tags": ["regex", "file", "perl"], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 11189140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EpmYCr3Lg5Y/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMaxaOmwFJEeFJYsV-ut6Nemx2jA/mo/photo.jpg?sz=128", "display_name": "Anirudh Simha", "link": "https://stackoverflow.com/users/11189140/anirudh-simha"}, "is_accepted": true, "score": 2, "last_activity_date": 1557734148, "creation_date": 1557734148, "answer_id": 56107943, "question_id": 56107547, "link": "https://stackoverflow.com/questions/56107547/how-to-replace-some-patterns-in-a-file-line-with-white-spaces-in-perl/56107943#56107943", "title": "How to replace some patterns in a file line with white spaces in perl?", "body": "<p>This is what I've tried and is working for me</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $str = \"press y ='Accept' press y ='hey there'\";\n$str =~s/y ='.*?'/ /g;\nprint $str;\n</code></pre>\n\n<p>What this does is matches from \"y='\" to first matching single quote after that i.e Its a non greedy matching regex.</p>\n"}], "owner": {"reputation": 33, "user_id": 9198418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad44f3a89a2fe34cc9fce961a2e55b42?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul.Mohan", "link": "https://stackoverflow.com/users/9198418/gokul-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56107943, "answer_count": 1, "score": 1, "last_activity_date": 1557734148, "creation_date": 1557732423, "last_edit_date": 1557732484, "question_id": 56107547, "link": "https://stackoverflow.com/questions/56107547/how-to-replace-some-patterns-in-a-file-line-with-white-spaces-in-perl", "title": "How to replace some patterns in a file line with white spaces in perl?", "body": "<p>I'm having a file, with some content, let's say,\npress y ='Accept'\npress y ='hey there'</p>\n\n<p>i need to clear all those patterns with y ='something' ?\nHow to do this using perl ?</p>\n\n<p>In the past, I've tried like </p>\n\n<pre><code>foreach(@lines) {\n     $_ =~ s/y='*/ /g;\n    }\n</code></pre>\n\n<p>but this is only replacing a single character after the pattern </p>\n\n<p>I'm not sure about the following pattern or length of the following pattern, but need to replace every thing after the 'y= pattern ?\nprovided y= is not at the starting of the line</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1557730421, "post_id": 56106244, "comment_id": 98847910, "body": "The current issue has nothing to do with longest or shortest match. We can speak about longest or shortest alternative in a group (then NFA, regex driven engines,like Perl or PCRE, always prefer the first, be it shortest or longest). Regex itself never matches shortest or longest string from the input, it can only be done after extracting all matches and then checking which one is shortest/longest."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "edited": false, "score": 0, "creation_date": 1557730594, "post_id": 56106509, "comment_id": 98847971, "body": "The regular expression you provided doesn&#39;t match all kinds of &quot;real number&quot; example, negative floating point or exponential notation. They have been covered in <code>Regexp::Common</code>. Thanks for your help though. I appreciate it."}], "tags": [], "owner": {"reputation": 28228, "user_id": 7132550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1063981417044495/picture?type=large", "display_name": "Micha\u0142 Turczyn", "link": "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1557727284, "creation_date": 1557727284, "answer_id": 56106509, "question_id": 56106244, "link": "https://stackoverflow.com/questions/56106244/perl-regexpcommon-package-not-matching-certain-real-numbers-when-used-with-wor/56106509#56106509", "title": "Perl Regexp::Common package not matching certain real numbers when used with word boundary", "body": "<p>Try this patern: <code>(?:^| )(\\d*\\.?\\d+)</code></p>\n\n<p>Explanation:</p>\n\n<p><code>(?:...)</code> - non-capturing group</p>\n\n<p><code>^|</code> - match either <code>^</code> - beginning oof a string or <code></code> - space</p>\n\n<p><code>\\d*</code> - match zero or more digits</p>\n\n<p><code>\\.?</code> - match dot literally - zero or one</p>\n\n<p><code>\\d+</code> - match one or more digits</p>\n\n<p>Matched number will be stored in first capturing group.</p>\n\n<p><a href=\"https://regex101.com/r/KIIKkP/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557729143, "post_id": 56106715, "comment_id": 98847401, "body": "The first regex will match <code>34</code> ( and not <code>.34</code>) in <code>is.34 meters</code>. It is possible that OP did not want to match anything in this case, as I interpret it"}, {"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557729408, "post_id": 56106715, "comment_id": 98847501, "body": "@H&#229;kon H&#230;gland I would like match <code>.34</code> (The whole &quot;real number&quot;)"}, {"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "edited": false, "score": 0, "creation_date": 1557729563, "post_id": 56106715, "comment_id": 98847563, "body": "@ Wiktor Stribi\u017cew The regex you provided would also match the string <code>x.34 meters of cable</code>, which IHMO it shouldn&#39;t as x.34 is not a number at all."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "edited": false, "score": 0, "creation_date": 1557729681, "post_id": 56106715, "comment_id": 98847606, "body": "@DemeterP.Chen Then what is the word boundary for you? A whitespace boundary? <code>(?&lt;!\\S)(\\d*\\.?\\d+)</code>?"}, {"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "edited": false, "score": 0, "creation_date": 1557730068, "post_id": 56106715, "comment_id": 98847769, "body": "@Wiktor Stribi\u017cew -  You are probably right. I would give more thought to it. <code>x.34</code> example, it is more logical to treat the . as period as opposed to a decimal point thus making 34 match the pattern. I retract the previous statement I made to you :)"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "edited": false, "score": 0, "creation_date": 1557731521, "post_id": 56106715, "comment_id": 98848315, "body": "@DemeterP.Chen Ok, if you ever need to precise the word boundary for your concrete case, please drop a comment,  I will try to help."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1557730596, "last_edit_date": 1557730596, "creation_date": 1557728475, "answer_id": 56106715, "question_id": 56106244, "link": "https://stackoverflow.com/questions/56106244/perl-regexpcommon-package-not-matching-certain-real-numbers-when-used-with-wor/56106715#56106715", "title": "Perl Regexp::Common package not matching certain real numbers when used with word boundary", "body": "<p>The word boundary is a context-dependent regex construct. When it is followed with a word char (letter, digit or <code>_</code>) this location should be preceded either with the start of a string or a non-word char. In this concrete case, the word boundary is followed with a non-word char and thus requires a word char to appear right before this character.</p>\n\n<p>You may use a non-ambiguous word boundary expressed with a negative lookbehind:</p>\n\n<pre><code>my $regex = qr/(?&lt;!\\w)($RE{num}{real})/;\n               ^^^^^^^\n</code></pre>\n\n<p>The <code>(?&lt;!\\w)</code> negative lookbehind always denotes one thing: fail the match if there \n is no word character immediately to the left of the current location.</p>\n\n<p>Or, use a whitespace boundary if you want your matches to only occur after whitespace or start of string:</p>\n\n<pre><code>my $regex = qr/(?&lt;!\\S)($RE{num}{real})/;\n               ^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56106715, "answer_count": 2, "score": 3, "last_activity_date": 1557730596, "creation_date": 1557725633, "last_edit_date": 1557727300, "question_id": 56106244, "link": "https://stackoverflow.com/questions/56106244/perl-regexpcommon-package-not-matching-certain-real-numbers-when-used-with-wor", "title": "Perl Regexp::Common package not matching certain real numbers when used with word boundary", "body": "<p>The following code below print \"34\" instead of the expected \".34\"</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Regexp::Common;\n\nmy $regex = qr/\\b($RE{num}{real})\\s*/;\nmy $str = \"This is .34 meters of cable\";\n\nif ($str =~ /$regex/) {\n    print $1;\n}\n</code></pre>\n\n<p>Do I need to fix my regex? (The word boundary is need as not including it will cause it match something string like <code>xx34</code> which I don't want to) </p>\n\n<p>Or is it is a bug in Regexp::Common? I always thought that a longest match should win.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1557700843, "post_id": 56103985, "comment_id": 98842460, "body": "in Pythin use <code>glob.glob()</code> or <code>os.listdir()</code> to get all files in directory and run perl script in <code>for</code> loop with every file separatelly. Or you have to create loop in perl script which will get next filename(s) from <code>ARGV[1]</code>, <code>ARGV[2]</code>, etc. As I remeber <code>perl</code> can use <code>shift</code> to get next element from <code>ARGV</code>."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1557701522, "post_id": 56103985, "comment_id": 98842567, "body": "When on Unix or Linux try to change <code>if (defined $ARGV[0]){ my $filename = $ARGV[0];</code> to <code>foreach my $filename (@ARGV) {</code>."}, {"owner": {"reputation": 61, "user_id": 11444473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9a4f6ed4bc15235e7470da048c6a7?s=128&d=identicon&r=PG&f=1", "display_name": "grabbhalf", "link": "https://stackoverflow.com/users/11444473/grabbhalf"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1557704667, "post_id": 56103985, "comment_id": 98842947, "body": "@furas Thank you! It worked with glob!"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1594801665, "last_edit_date": 1594801665, "creation_date": 1557718308, "answer_id": 56105439, "question_id": 56103985, "link": "https://stackoverflow.com/questions/56103985/run-a-perl-script-with-python-on-multiple-files-at-once-in-a-folder/56105439#56105439", "title": "Run a perl script with Python on multiple files at once in a folder", "body": "<p>That Perl script processes one file. Also, that string passed to shell via <code>os.system</code> doesn't get expanded into a valid command with a file list as intended with the <code>*</code> shell glob.</p>\n<p>Instead, build the file list in Python, using <code>os.listdir</code> or <code>glob.glob</code> or <code>os.walk</code>. Then iterate over the list and call that Perl script on each file, if it must process only one file at a time. Or, modify the Perl script to process multiple files and run it once with the whole list.</p>\n<p>To keep the current Perl script and run it on each file</p>\n<pre><code>import os\n\ndata_path   = &quot;/home/user/Desktop/data/&quot;\noutput_path = &quot;/home/user/Desktop/result/&quot;\n\nfor file in os.listdir(data_path):\n    if not file.endswith(&quot;.txt&quot;):\n        continue\n\n    print(&quot;Processing &quot; + file)                      # better use subprocess\n    run_perlscript = &quot;perl &quot; + &quot; perlscript.pl &quot; + \\\n        data_path + file  + &quot; &gt;&gt; &quot; + output_path + &quot;output.txt&quot;\n    os.system(run_perlscript)\n</code></pre>\n<p>The Perl script need be rewritten to lose that unneeded code duplication.</p>\n<p>However, it is better to use <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess</a> module to run and manage external commands. This is advised even in the <a href=\"https://docs.python.org/3/library/os.html?highlight=os%20system#os.system\" rel=\"nofollow noreferrer\">os.system</a> documentation itself.\nFor instance</p>\n<pre><code>import subprocess\n\nwith open(output_path + &quot;output.txt&quot;, &quot;a&quot;) as fout:\n    for file in os.listdir(path):\n        if not file.endswith(&quot;.txt&quot;):\n            continue \n        subprocess.run([&quot;perl&quot;, &quot;script.pl&quot;, data_path + file], stdout=fout)\n</code></pre>\n<p>where the file is opened in the append mode (<code>&quot;a&quot;</code>) following the question's <code>&gt;&gt;</code> redirection.</p>\n<p>The recommended <a href=\"https://docs.python.org/3/library/subprocess.html#subprocess.run\" rel=\"nofollow noreferrer\">subprocess.run</a> is available since python 3.5; otherwise use <a href=\"https://docs.python.org/2/library/subprocess.html#popen-constructor\" rel=\"nofollow noreferrer\">Popen</a>.</p>\n<p>Another, and arguably &quot;right,&quot; option is to adjust the Perl script so that it can process multiple files. Then you only need run it once, with the whole file list.</p>\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';    \nuse open ':std', ':encoding(UTF-8)';\n\nforeach my $filename (@ARGV) {\n    say &quot;Processing $filename&quot;;\n\n    my %count;\n\n    open my $fh, '&lt;', $filename  or do {\n       warn &quot;Can't open '$filename': $!&quot;;\n       next;\n    };\n    while (&lt;$fh&gt;) {   \n        $count{ lc $1 }++ while /(\\w+)/g;\n    }   \n    close $fh;\n\n    my $prn_cnt = 0;\n    foreach my $word ( sort { $count{$b} &lt;=&gt; $count{$a} } keys %count) {   \n        print &quot;$count{$word} $word\\n&quot; if $prn_cnt++ &lt; 10; \n    }   \n}\n</code></pre>\n<p>This prints a warning on a file that it can't open and skips to the next one. If you'd rather have the script exit on any unexpected file replace <code>or do { ... };</code> with the original <code>die</code>.</p>\n<p>Then, and using <a href=\"https://docs.python.org/3/library/glob.html?highlight=glob%20glob#glob.glob\" rel=\"nofollow noreferrer\">glob.glob</a> as an example now</p>\n<pre><code>import subprocess\n\ndata_path   = &quot;/home/user/Desktop/data/&quot;\noutput_path = &quot;/home/user/Desktop/result/&quot;\n\nfiles = glob.glob(data_path + &quot;*.txt&quot;)\n\nwith open(output_path + &quot;output.txt&quot;, &quot;a&quot;) as fout:\n    subprocess.run([&quot;perl&quot;, &quot;script.pl&quot;, files], stdout=fout)\n</code></pre>\n<p>Since this passes the whole list as command arguments it assumes that there aren't (high) thousands of files, to exceed some length limits on pipes or command-line.</p>\n"}], "owner": {"reputation": 61, "user_id": 11444473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9a4f6ed4bc15235e7470da048c6a7?s=128&d=identicon&r=PG&f=1", "display_name": "grabbhalf", "link": "https://stackoverflow.com/users/11444473/grabbhalf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1594801665, "creation_date": 1557700218, "question_id": 56103985, "link": "https://stackoverflow.com/questions/56103985/run-a-perl-script-with-python-on-multiple-files-at-once-in-a-folder", "title": "Run a perl script with Python on multiple files at once in a folder", "body": "<p>This is my perl script at the moment:</p>\n\n<pre><code>#!/usr/bin/perl\nuse open qw/:std :utf8/;\nuse strict;\nuse warnings;\n\nif (defined $ARGV[0]){\nmy $filename = $ARGV[0];\nmy %count;\n\nopen (my $fh, $filename) or die \"Can't open '$filename' $!\";\nwhile (&lt;$fh&gt;)\n{\n        $count{ lc $1 }++ while /(\\w+)/g;\n}\nclose $fh;\n\nmy $array = 0;\n\nforeach my $word ( sort { $count{$b} &lt;=&gt; $count{$a} } keys %count)\n{\n    print \"$count{$word} $word\\n\" if $array++ &lt; 10;\n}\n\n}else{\nprint \"Please enter the name of the file: \";\nmy $filename = ($_ = &lt;STDIN&gt;);\n\nmy %count;\n\nopen (my $fh, $filename) or die \"Can't open '$filename' $!\";\nwhile (&lt;$fh&gt;)\n{\n        $count{ lc $1 }++ while /(\\w+)/g;\n}\nclose $fh;\n\nmy $array = 0;\n\nforeach my $word ( sort { $count{$b} &lt;=&gt; $count{$a} } keys %count)\n{\n    print \"$count{$word} $word\\n\" if $array++ &lt; 10;\n}\n}\n</code></pre>\n\n<p>And this is my Python script at the moment:</p>\n\n<pre><code>#!/usr/bin/env python3\nimport os\n\nperlscript = \"perl \" + \" perlscript.pl \" + \" /home/user/Desktop/data/*.txt \" + \" &gt;&gt; \" + \"/home/user/Desktop/results/output.txt\"\nos.system(perlscript)\n</code></pre>\n\n<p><strong>Problem</strong>: When there are multiple txt-files in the data folder the script only runs on one file and ignores all the other txt-files. Is there a way to run the perlscript on all the txt-files at once?  </p>\n\n<p><strong>Another problem:</strong> I'm also trying to delete the txt-files with the os.remove after they have been executed but they get deleted before the perlscript has a chance to execute.</p>\n\n<p>Any ideas? :) </p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 2, "creation_date": 1557682279, "post_id": 56101514, "comment_id": 98838130, "body": "Always <code>use strict; use warnings;</code>. I don&#39;t see where you define <code>$label</code> or <code>$type</code>. Please <a href=\"https://stackoverflow.com/posts/56101514/edit\">edit</a> your question, format your code as code, and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You may want to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557683583, "post_id": 56101514, "comment_id": 98838441, "body": "Please show the code where <code>$type</code> is defined"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1557690107, "post_id": 56101514, "comment_id": 98840155, "body": "Contrary to what you claim, it is getting substituted. Perhaps not with the value you intend, but you provided no information to help you with that.  See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1557693833, "post_id": 56101514, "comment_id": 98841064, "body": "This might be independent of your issue, but note that you have a dot (string concatenation), rather than a comma, in your args list to catfile. So that function call isn&#39;t doing anything useful."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1557758416, "creation_date": 1557758416, "answer_id": 56114659, "question_id": 56101514, "link": "https://stackoverflow.com/questions/56101514/variable-not-getting-expanded/56114659#56114659", "title": "Variable not getting expanded", "body": "<p>This is pretty basic debugging.</p>\n\n<p>Add this to your code as the first lines in the subroutine:</p>\n\n<pre><code>if (defined $type) {\n  print \"\\$type is undefined\\n\";\n} else {\n  print \"\\$type is '$type'\\n\";\n}\n</code></pre>\n\n<p>That way, you'll see exactly what value <code>$type</code> has just before you try to use it. I expect you'll see either \"$type is undefined\" or \"$type is ''\".</p>\n\n<p>Your problem then becomes finding where <code>$type</code> is supposed to be set and working out why that isn't happening.</p>\n\n<p>Two other pieces of advice:</p>\n\n<ul>\n<li>When writing a Perl program, it's always a good idea to have <code>use strict</code> and <code>use warnings</code> in your code (near the top of the file) as they will find a large number of basic programming errors.</li>\n<li>When programming in any language, you should ensure that any subroutine only uses variables that are passed in at parameters or variables that are declared within the subroutine. Using global variables (as you seem to be doing here) makes your code less portable and harder to debug.</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 11428360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4da0b2280e8c3d7221a94ae5ec2300?s=128&d=identicon&r=PG&f=1", "display_name": "muku", "link": "https://stackoverflow.com/users/11428360/muku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557819097, "creation_date": 1557680655, "last_edit_date": 1557819097, "question_id": 56101514, "link": "https://stackoverflow.com/questions/56101514/variable-not-getting-expanded", "title": "Variable not getting expanded", "body": "<p>Variable not getting substituted </p>\n\n<p>Even after defining the 2 variable explicitly it's not getting substituted </p>\n\n<pre><code>sub updatekey{\n    my $key_url = File::Spec-&gt;catfile($dir. \"/keys/cert.key.$label.$type\")        \n    $eol = '';\n    open(FILE, $key_url) or die \"$!\";\n    my $key_file;\n    while (read(FILE, $buf, 60*57)) {\n        $keyfile = $key_file . encode_base64($buf,$eol);\n    }\n}\n</code></pre>\n\n<p>Open FILE getting failed because $type is not getting substituted. if I modify the line as below</p>\n\n<pre><code>my $key_url = File::Spec-&gt;catfile($dir. \"/keys/cert.key.$label.pem\")\n</code></pre>\n\n<p>it's working fine.</p>\n"}, {"tags": ["perl", "parsing", "soap", "hash"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "edited": false, "score": 0, "creation_date": 1557671897, "post_id": 56100215, "comment_id": 98835367, "body": "perfect. but how do i access the key ? what if i dont know what all the keys that comes from the response ? i want to print all the keys and its values dynamically. Please help"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557679316, "post_id": 56100215, "comment_id": 98837323, "body": "<a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\"><code>keys</code></a>, <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>"}, {"owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557681519, "post_id": 56100215, "comment_id": 98837928, "body": "@ikegami Could you please help me with the code ? i hope you have understood my problem, In the response from above... i may get 10 more keys along with <code>ConnectionID</code> and its values...  and along with <code>outargs</code> we may get multiple hash as well.  so i want to be able to access each of them also print them.. please help with loop."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1557671502, "creation_date": 1557671502, "answer_id": 56100215, "question_id": 56099644, "link": "https://stackoverflow.com/questions/56099644/how-to-parse-the-output-of-soap-response-which-is-in-hash-format-of-data-see-be/56100215#56100215", "title": "how to parse the output of SOAP response which is in HASH format of data? see below code for details", "body": "<p><code>$answer</code> appears to be a hash reference, so you'd access the data using normal dereferencing techniques:</p>\n\n<pre><code>my $conn_id = $answer-&gt;{outargs}{connectionId};\nprint \"$conn_id\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1557666855346\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557762101, "post_id": 56103315, "comment_id": 98864887, "body": "This should have been submitted as a new question. <code>%${$answer}{$key}</code> is not correct syntax."}], "tags": [], "owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "is_accepted": false, "score": 0, "last_activity_date": 1557693807, "creation_date": 1557693807, "answer_id": 56103315, "question_id": 56099644, "link": "https://stackoverflow.com/questions/56099644/how-to-parse-the-output-of-soap-response-which-is-in-hash-format-of-data-see-be/56103315#56103315", "title": "how to parse the output of SOAP response which is in HASH format of data? see below code for details", "body": "<pre><code>my %fhash = %{$answer};\nmy $key = \"\";\nforeach $key (keys %fhash)\n{\nprint \"keys are\\n \\\"$key\\\" its value is (${$answer}{$key}) \\n\";\n\n    foreach my $key2 (keys %${$answer}{$key})\n    {\n    print \"keys of(${$answer}{$key})\\n \\\"$key2\\\"\\n\";\n    }\n}\n</code></pre>\n\n<p>is not working and is throwing error as follows: \nExperimental keys on scalar is now forbidden at CreateEvent.pl line 64.\nType of arg 1 to keys must be hash or array (not key/value hash slice) at Create\nEvent.pl line 64, near \"}</p>\n\n<p>can someone correct this please.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10646880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea76e10d275bffb7d38facbc2242d40c?s=128&d=identicon&r=PG&f=1", "display_name": "arganka", "link": "https://stackoverflow.com/users/10646880/arganka"}, "is_accepted": false, "score": 0, "last_activity_date": 1557900545, "creation_date": 1557900545, "answer_id": 56142694, "question_id": 56099644, "link": "https://stackoverflow.com/questions/56099644/how-to-parse-the-output-of-soap-response-which-is-in-hash-format-of-data-see-be/56142694#56142694", "title": "how to parse the output of SOAP response which is in HASH format of data? see below code for details", "body": "<h1>loop through all the keys in answear = { outargs => { key1, key2 }}</h1>\n\n<pre><code># This should remove the error of \"Experimental keys on scalar is now forbidden\" by wrapping the hashRef in %{}\nfor ( keys %{$answear-&gt;{outargs}}) {\n    # $_ here will be the key and if you want to access the value use $answear-&gt;{outargs}-&gt;{$_}\n    print \"key: $_, value: $answear-&gt;{outargs}-&gt;{$_}\\n\";\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>key: connectionId, value: 1557666855346\n</code></pre>\n\n<p>I hope this will help you!</p>\n"}], "owner": {"reputation": 51, "user_id": 9243414, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oWNf7OUNlXQ/AAAAAAAAAAI/AAAAAAAAA2Q/kEUZBmttwTE/photo.jpg?sz=128", "display_name": "kaushik km", "link": "https://stackoverflow.com/users/9243414/kaushik-km"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1557900545, "creation_date": 1557667149, "question_id": 56099644, "link": "https://stackoverflow.com/questions/56099644/how-to-parse-the-output-of-soap-response-which-is-in-hash-format-of-data-see-be", "title": "how to parse the output of SOAP response which is in HASH format of data? see below code for details", "body": "<pre><code>#perl!\nuse warnings;\nuse strict;\nuse XML::Compile::SOAP;\nuse XML::Compile::SOAP11;\nuse XML::Compile::WSDL11;\nuse XML::Compile::Transport::SOAPHTTP;\nuse Data::Dumper;\n##my other variables pointing to wsdl and xsd files.\nmy $url=\"http://myhost.com:9080/imws/services/ImpactManager/\";\nmy %inargs_connect = (\n    \"userName\"  =&gt; \"xxxx\",\n    \"password\" =&gt; \"xxxxxxxxxx\",\n    \"imname\"  =&gt; \"yyyyyyyyyyy\",\n    \"bufferType\"  =&gt; \"abcd\"\n);\n\nmy $wsdl = XML::Compile::WSDL11-&gt;new;\n$wsdl-&gt;addWSDL($wsdl_file);\n$wsdl-&gt;compileCalls(address =&gt;$url);\nmy ($answer, $trace) = $wsdl-&gt;call( 'Connect', %inargs_connect);\nprint ($answer);\n</code></pre>\n\n<p>the above code is printing :\nHASH(0x47f8b28)</p>\n\n<p>in the last print statement if i use dumper, i get the below response.\n<code>print Dumper($answer);</code></p>\n\n<pre><code>$VAR1 = {\n          'outargs' =&gt; {\n                         'connectionId' =&gt; '1557666855346'\n                       }\n        };\n</code></pre>\n\n<p>how to parse the required values like,\ni need to be able to easily access 'connectionId' and '1557666855346' ?</p>\n\n<p>Any ideas are welcome. Thanks in advance.\nThanks,\nKaushik KM.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 4, "last_activity_date": 1557658194, "creation_date": 1557658194, "answer_id": 56098475, "question_id": 56097825, "link": "https://stackoverflow.com/questions/56097825/why-does-calling-system-with-indirect-object-give-syntax-error-only-with-autod/56098475#56098475", "title": "Why does calling `system` with indirect object give syntax error only with autodie", "body": "<p>From the <a href=\"https://perldoc.perl.org/autodie.html#system%2fexec\" rel=\"nofollow noreferrer\">autodie documentation</a>:</p>\n\n<blockquote>\n  <p>Applying <code>autodie</code> to <code>system</code> or <code>exec</code> causes the exotic forms <code>system { $cmd } @args</code> or <code>exec { $cmd } @args</code> to be considered a syntax error until the end of the lexical scope. If you really need to use the exotic form, you can call <code>CORE::system</code> or <code>CORE::exec</code> instead, or use <code>no autodie qw(system exec)</code> before calling the exotic form.</p>\n</blockquote>\n\n<p>What you're seeing is exactly what's documented as what will happen.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1557772743, "last_edit_date": 1557772743, "creation_date": 1557679927, "answer_id": 56101435, "question_id": 56097825, "link": "https://stackoverflow.com/questions/56097825/why-does-calling-system-with-indirect-object-give-syntax-error-only-with-autod/56101435#56101435", "title": "Why does calling `system` with indirect object give syntax error only with autodie", "body": "<p>The <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> operator has three syntax.</p>\n\n<pre><code>system LIST\nsystem $SCALAR LIST\nsystem BLOCK LIST\n</code></pre>\n\n<p>(None has anything to do with indirect method calls, or objects at all.)</p>\n\n<p><code>autodie</code> replaces the uses of the <code>system</code> operator with calls to a sub with the same name. Subs can provide the <code>system LIST</code> syntax and the <code>system BLOCK LIST</code> syntax (by using a prototpye), but not both.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   CORE::say defined(prototype(\"CORE::system\"))\n       ? \"Syntax can be emulated by subs.\"\n       : \"Syntax can\\x27t be emulated by subs.\"\n'\nSyntax can't be emulated by subs.\n</code></pre>\n\n<p>As such, the less commonly-used syntax of <code>system $SCALAR LIST</code> and <code>system BLOCK LIST</code> aren't available when autodie replaces <code>system</code>. This is <a href=\"https://perldoc.perl.org/autodie.html#system%2fexec\" rel=\"nofollow noreferrer\">documented</a>.</p>\n\n<blockquote>\n  <p>Applying <code>autodie</code> to <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> or <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\"><code>exec</code></a> causes the exotic forms <code><a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> { $cmd } @args</code> or <code><a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\"><code>exec</code></a> { $cmd } @args</code> to be considered a syntax error until the end of the lexical scope. If you really need to use the exotic form, you can call <code>CORE::system</code> or <code>CORE::exec</code> instead, or use <code><a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">no</a> autodie qw(system exec)</code> before calling the exotic form.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 11487954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e328df1bc236b28bea1020ceec77c87?s=128&d=identicon&r=PG&f=1", "display_name": "kbrgrty3", "link": "https://stackoverflow.com/users/11487954/kbrgrty3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56101435, "answer_count": 2, "score": 2, "last_activity_date": 1557772743, "creation_date": 1557653033, "last_edit_date": 1557654567, "question_id": 56097825, "link": "https://stackoverflow.com/questions/56097825/why-does-calling-system-with-indirect-object-give-syntax-error-only-with-autod", "title": "Why does calling `system` with indirect object give syntax error only with autodie", "body": "<p>Perl's <code>system</code> function allows an indirect object.  In that case, the\nindirect object is the program to run, allowing <code>argv[0]</code> to be\ndifferent from the name of the executable.</p>\n\n<p>So I can do</p>\n\n<pre><code>system {\"echo\"} qw(echo foo);\n</code></pre>\n\n<p>However, when I use <code>autodie</code>:</p>\n\n<pre><code>use autodie qw(:all);\nsystem {\"echo\"} qw(echo foo);\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>syntax error at - line 2, near \"} qw(echo foo)\"\n</code></pre>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["perl", "pdf", "sign", "radio-group", "pdflib"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557582731, "post_id": 56090436, "comment_id": 98818339, "body": "What module do you use? I cannot see any method <code>create_field()</code> in <a href=\"https://metacpan.org/pod/PDFLib\" rel=\"nofollow noreferrer\"><code>PDFLib</code></a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557582777, "post_id": 56090436, "comment_id": 98818350, "body": "@H&#229;konH&#230;gland <a href=\"https://www.pdflib.com/fileadmin/pdflib/pdf/manuals/PDFlib-9.2.0-API-reference.pdf\" rel=\"nofollow noreferrer\">pdflib.com/fileadmin/pdflib/pdf/manuals/&hellip;</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557582917, "post_id": 56090436, "comment_id": 98818389, "body": "I don&#39;t understand what you&#39;re asking. I cannot parse &quot;make it as required by Adobe sign it&quot;."}, {"owner": {"reputation": 155, "user_id": 3308713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e112776ee95ccfff5eabeb03dd6e99ed?s=128&d=identicon&r=PG&f=1", "display_name": "user3308713", "link": "https://stackoverflow.com/users/3308713/user3308713"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557586679, "post_id": 56090436, "comment_id": 98819261, "body": "@melpomene  Adobe sign is a service by Adobe that lets you have people sign documents electronically. The require the radio boxes to be labeled like thisColor_es_:signer1:radio(Green)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557586886, "post_id": 56090436, "comment_id": 98819311, "body": "@user3308713 I tried to download PDFlib-9.2.0-Linux-x86-perl from <a href=\"https://www.pdflib.com/binaries/PDFlib/920/PDFlib-9.2.0-Linux-x86-perl.tar.gz\" rel=\"nofollow noreferrer\">pdflib.com/binaries/PDFlib/920/&hellip;</a> but when I run the sample script <code>hello.pl</code> I get <code>.&#47;perl528&#47;pdflib_pl.so: wrong ELF class: ELFCLASS32</code>.. I am not sure what is going on. Do I have to run an installation script first?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557592288, "post_id": 56090436, "comment_id": 98820650, "body": "@H&#229;konH&#230;gland That&#39;s the 32-bit library. Are you on a 32-bit system?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1557592458, "post_id": 56090436, "comment_id": 98820698, "body": "@user3308713 Where is that documented?"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 3308713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e112776ee95ccfff5eabeb03dd6e99ed?s=128&d=identicon&r=PG&f=1", "display_name": "user3308713", "link": "https://stackoverflow.com/users/3308713/user3308713"}, "is_accepted": false, "score": 1, "last_activity_date": 1557982521, "creation_date": 1557982521, "answer_id": 56161078, "question_id": 56090436, "link": "https://stackoverflow.com/questions/56090436/create-a-radio-group-in-pdflib-with-perl/56161078#56161078", "title": "Create a radio group in pdflib with perl", "body": "<p>The problem was not with pdflib but with Adobe Sign documentation. </p>\n\n<p>to them \n{{Color_es_:signer1:radio(Red)}} </p>\n\n<p>means to put the group names as Color_es_:signer1:radio and the value as Red.</p>\n\n<p>Once we figured that out pdflib worked fine. Hopes this helps someone else. </p>\n"}], "owner": {"reputation": 155, "user_id": 3308713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e112776ee95ccfff5eabeb03dd6e99ed?s=128&d=identicon&r=PG&f=1", "display_name": "user3308713", "link": "https://stackoverflow.com/users/3308713/user3308713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557982521, "creation_date": 1557578309, "last_edit_date": 1557592334, "question_id": 56090436, "link": "https://stackoverflow.com/questions/56090436/create-a-radio-group-in-pdflib-with-perl", "title": "Create a radio group in pdflib with perl", "body": "<p>I am trying to create a radio group with pdflib.\nThis code works:</p>\n\n<pre><code>my $optlist = \"required buttonstyle=circle bordercolor={gray 0.8} backgroundcolor={white}\";\n        $p-&gt;create_field($llx, $lly, $llx + $width, $lly + $height,\"colors.standard\", \"radiobutton\", $optlist);\n\n        $p-&gt;create_field($llx + 115, $lly, $llx + $width + 115, $lly + $height,\"colors.yellow\", \"radiobutton\", $optlist);\n\n        $p-&gt;create_field($llx + 230, $lly, $llx + $width + 230, $lly + $height,\"colors.blue\", \"radiobutton\", $optlist);\n</code></pre>\n\n<p>When I try to make it as required by <a href=\"https://acrobat.adobe.com/us/en/sign.html\" rel=\"nofollow noreferrer\">Adobe Sign</a>, it gives me errors with either path error or the name does not show up right. </p>\n\n<p>{{Color_es_:signer1:radio(Red)}}</p>\n\n<p>{{Color_es_:signer1:radio(Blue)}}</p>\n\n<p>{{Color_es_:signer1:radio(Green)}}</p>\n\n<p>If we have to use a different perl module we could.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 65, "user_id": 4460279, "user_type": "registered", "profile_image": "https://graph.facebook.com/626182855/picture?type=large", "display_name": "Kaushik", "link": "https://stackoverflow.com/users/4460279/kaushik"}, "edited": false, "score": 0, "creation_date": 1557518902, "post_id": 56084017, "comment_id": 98806618, "body": "@CodeTag, I have no idea what that comment means"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1557519126, "last_edit_date": 1557519126, "creation_date": 1557517844, "answer_id": 56084017, "question_id": 56083731, "link": "https://stackoverflow.com/questions/56083731/unknown-hostname-in-perl-socket/56084017#56084017", "title": "Unknown Hostname in Perl Socket", "body": "<pre><code>gethostbyaddr($client_addr, AF_INET)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>gethostbyaddr($iaddr, AF_INET)\n</code></pre>\n\n<p>The garbage you are passing to <code>gethostbyaddr</code> is being treated as <code>2.0.189.114</code>, and a reverse DNS lookup for that address gives <code>anantes-158-1-218-114.w2-0.abo.wanadoo.fr</code>.</p>\n\n<hr>\n\n<pre><code>$ perl -MSocket -e'\n   my $client_addr = sockaddr_in(48498, inet_aton(\"127.0.0.1\"));\n   my ($port, $iaddr) = sockaddr_in($client_addr);\n   CORE::say \"\".gethostbyaddr($client_addr, AF_INET);  # XXX Garbage\n   CORE::say \"\".gethostbyaddr($iaddr, AF_INET);\n'\nanantes-158-1-218-114.w2-0.abo.wanadoo.fr\nlocalhost\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4460279, "user_type": "registered", "profile_image": "https://graph.facebook.com/626182855/picture?type=large", "display_name": "Kaushik", "link": "https://stackoverflow.com/users/4460279/kaushik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 56084017, "answer_count": 1, "score": 0, "last_activity_date": 1557519758, "creation_date": 1557516316, "last_edit_date": 1557519758, "question_id": 56083731, "link": "https://stackoverflow.com/questions/56083731/unknown-hostname-in-perl-socket", "title": "Unknown Hostname in Perl Socket", "body": "<p>I have written an example perl socket code. Client &amp; server both are running in the same machine. In server code on accepting client connection it is displaying the client hostname as \"anates\". I dont understand from where it is picking this name. As i have not set this name anywhere. </p>\n\n<p>Server.pl</p>\n\n<pre><code>my $client_addr;\nwhile ($client_addr = accept(NEW_SOCKET, SOCKET)) {\n   # send them a message, close connection\n   print(\"CCCCLLLII : $client_addr\\n\");\n   my($port2, $iaddr) = sockaddr_in($client_addr);\n   print(\"$port2\\n\");\n   print(\"$iaddr\\n\");\n   $iaddr = inet_ntoa($iaddr);\n   print(\"$iaddr\\n\");\n\n   my $name = gethostbyaddr($client_addr, AF_INET );\n   print NEW_SOCKET \"Smile from the server\";\n   print \"Connection recieved from $name\\n\";\n   close NEW_SOCKET;\n}\n</code></pre>\n\n<p>Client.pl</p>\n\n<pre><code>connect( SOCKET, pack_sockaddr_in($port, inet_aton($server)))\n   or die \"Can't connect to port $port! \\n\";\n\nmy $line;\nwhile ($line = &lt;SOCKET&gt;) {\n   print \"$line\\n\";\n}\nclose SOCKET or die \"close: $!\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl server.pl \nSERVER started on port 7890\nCCCCLLLII : &amp;#x2;\ufffdr&amp;#x1;\n48498\n&amp;#x1;\n127.0.0.1\nConnection recieved from anantes-158-1-218-114.w2-0.abo.wanadoo.fr\n\n$ cat /etc/hosts\n127.0.0.1   localhost\n127.0.1.1   kaushik-Inspiron-5547\n\n$ hostname\nkaushik-Inspiron-5547\n</code></pre>\n\n<p>From where the code getting the name anates i am not getting.</p>\n\n<p>I was expecting it will print the hostname as kaushik-Inspiron-5547</p>\n"}, {"tags": ["loops", "perl", "match", "string-matching"], "comments": [{"owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1557514161, "post_id": 56083198, "comment_id": 98804866, "body": "Hello,  I added chomp to my script and I get the same result..seems to read the first set fine so I am not sure what is the issue.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1557514506, "post_id": 56083198, "comment_id": 98805010, "body": "See <a href=\"https://stackoverflow.com/a/55734041/4653379\">this post</a> for another approach to a similar problem."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1557514839, "post_id": 56083383, "comment_id": 98805111, "body": "But are we sure it&#39;s words? What if they need to exclude <code>synthetic-species</code> for <code>synthetic</code>? I think regex is safer than a lookup.  If it is all words then this is very cool :)"}, {"owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "edited": false, "score": 0, "creation_date": 1557514992, "post_id": 56083383, "comment_id": 98805192, "body": "Hei zdim,  For my case, I wanted it exactly like that so that any time it finds synthetic, it will remove the whole row, regardless of what the rest of the string says. So the script works like a charm :) ."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "edited": false, "score": 0, "creation_date": 1557641973, "post_id": 56083383, "comment_id": 98828838, "body": "@Aletia Great then :)   That should be mentioned in the question or at least in the asnwer, that all text can only contain key-words as words"}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 2, "last_activity_date": 1557514497, "creation_date": 1557514497, "answer_id": 56083383, "question_id": 56083198, "link": "https://stackoverflow.com/questions/56083198/removing-rows-in-a-dataset-matching-a-value-from-a-separate-dataset/56083383#56083383", "title": "Removing rows in a dataset matching a value from a separate dataset", "body": "<p><code>chomp</code> your input and use a hash for your first table:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy ( $br_str, $dataset ) = @ARGV;\nopen(my $fh, \"&lt;\", $br_str ) || die \"Could not open file $br_str/n $!\";\n\nmy %strings;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    $strings{$_}++;\n}\n\nopen(my $fh2, \"&lt;\", $dataset ) || die \"Could not open file $dataset $!/n\";\nwhile (&lt;$fh2&gt;) {\n    chomp;\n    my @tmp = split /\\s+/, $_;\n    my $groups = $tmp[1];\n    print \"$_\\n\" unless exists $strings{$groups};\n}\n</code></pre>\n\n<p>Note that I used <code>\\s+</code> instead of <code>\\t</code>, just to make my copy/paste easier.</p>\n"}], "owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56083383, "answer_count": 1, "score": 0, "last_activity_date": 1585249625, "creation_date": 1557513633, "last_edit_date": 1585249625, "question_id": 56083198, "link": "https://stackoverflow.com/questions/56083198/removing-rows-in-a-dataset-matching-a-value-from-a-separate-dataset", "title": "Removing rows in a dataset matching a value from a separate dataset", "body": "<p>I am having some complications with matching strings to each other.</p>\n\n<p>Say I have the following table:</p>\n\n<pre><code>broken\nvector\nunidentified\nsynthetic\nartificial\n</code></pre>\n\n<p>And I have a second dataset that looks like this:</p>\n\n<pre><code>org1    Fish\norg2    Amphibian\norg3    vector\norg4    synthetic species\norg5    Mammal\n</code></pre>\n\n<p>I want to remove all the rows from the second table that match the string from the first table so that the output looks like this: </p>\n\n<pre><code>org1    Fish\norg2    Amphibian\norg5    Mammal \n</code></pre>\n\n<p>I was thinking of using <code>grep -v</code> in bash, but I am not quite sure how to make it loop through all the strings in table 1.</p>\n\n<p>I am trying to work it out in Perl, but for some reason it returns all my values instead of just the ones that match. Any idea why?</p>\n\n<p>My script looks like this: </p>\n\n<pre><code>#!/bin/perl -w\n\n($br_str, $dataset) = @ARGV;\nopen($fh, \"&lt;\", $br_str) || die \"Could not open file $br_str/n $!\";\n\nwhile (&lt;$fh&gt;) {\n        $str = $_;\n        push @strings, $str;\n        next;\n    }\n\nopen($fh2, \"&lt;\", $dataset) || die \"Could not open file $dataset $!/n\";\n\nwhile (&lt;$fh2&gt;) {\n    chomp;\n    @tmp = split /\\t/, $_;\n    $groups = $tmp[1];\n    foreach $str(@strings){\n        if ($str ne $groups){\n            @working_lines = @tmp;\n            next;\n        }\n    }\n        print \"@working_lines\\n\";\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "login", "su"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1557502126, "post_id": 56080172, "comment_id": 98799446, "body": "If you have the relative path <code>lib</code> in your PERL5LIB or PERLLIB, this may be attempting to load a file relative to your current directory. Relative paths in <code>@INC</code> are bad and this is why <code>.</code> is no longer in the default <code>@INC</code> since Perl 5.26."}], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 491894, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05abfb520b1fafe57e2e5594ad9f82f1?s=128&d=identicon&r=PG", "display_name": "harleypig", "link": "https://stackoverflow.com/users/491894/harleypig"}, "edited": false, "score": 2, "creation_date": 1557610321, "post_id": 56085737, "comment_id": 98824860, "body": "Point 4 is the answer as to why I was getting that error. When running <code>PERL5LIB=lib su testloginfiles</code> as root, in roots home directory, I get the same error. Thank you."}], "tags": [], "owner": {"reputation": 911, "user_id": 211029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/660d3cca0f3de0bf1ee1e8be322a8c27?s=128&d=identicon&r=PG", "display_name": "pcronin", "link": "https://stackoverflow.com/users/211029/pcronin"}, "is_accepted": true, "score": 2, "last_activity_date": 1557575594, "last_edit_date": 1592644375, "creation_date": 1557528938, "answer_id": 56085737, "question_id": 56080172, "link": "https://stackoverflow.com/questions/56080172/why-am-i-getting-a-permission-denied-when-suing-to-a-user/56085737#56085737", "title": "Why am I getting a permission denied when su&#39;ing to a user?", "body": "<ol>\n<li><p>In Perl, <code>use strict</code> tells perl to go find, load and import symbols from a file named <code>strict.pm</code>. It does this by searching the ordered list of directories in the <code>@INC</code> list. See <a href=\"https://stackoverflow.com/a/2526521/211029\">this answer</a> for more information on how that gets built. The error you are seeing indicates that before successfully finding a <code>strict.pm</code>, perl searched in a path that the executing user (likely testloginfiles) did not have access to.</p>\n</li>\n<li><p>The contents of <code>@INC</code> can be affected by both the directory from which the script is run, as well as environment variables. In your case, since the problem manifests itself when the program is run from one directory but not another, it's likely that one (or more) of the entries in <code>@INC</code> is a relative path, such as <code>lib</code> (instead of something like <code>/usr/share/perl5</code>), or, that an environment variable that can affect perl's <code>@INC</code> list is different in the target user's environment.</p>\n</li>\n<li><p>Running <code>perl -E 'print join(&quot;\\n&quot;, @INC)';</code> will produce a list of locations that it will search. Run that in your regular user's shell, and compare the results to what happens if you add it to testloginfiles' <code>.bashrc</code> file. The difference in output should explain the difference in behavior.</p>\n</li>\n</ol>\n<h2>UPDATE</h2>\n<ol start=\"4\">\n<li>With the new information you provided, we see there are no differences in <code>@INC</code>, which leaves us to understand how the two cases interpreted <code>@INC</code> differently. As you found in the <code>su</code> man page, <code>su</code> isn't changing the current directory, which means that relative paths won't affect the intepretation of <code>@INC</code> at all. But, <code>su</code> is changing the user, so it means that the su'd user is testing if <code>/home/harleypig/lib/strict.pm</code> exists. I'd bet that the su'd user does not have permissions to read into harleypig's home directory to see if that file exists, thus causing the error.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1557564782, "post_id": 56086903, "comment_id": 98814416, "body": "Yes, there is a definite security risk, but it&#39;s in your environment, not in <code>su</code>. Specifically, <code>PERL5LIB</code> should only include absolute paths. By putting a relative path there, you create the possibility for an attacker to compromise your account by getting you to execute Perl code when in a directory which has a malicious <code>lib&#47;</code> subdirectory."}, {"owner": {"reputation": 911, "user_id": 211029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/660d3cca0f3de0bf1ee1e8be322a8c27?s=128&d=identicon&r=PG", "display_name": "pcronin", "link": "https://stackoverflow.com/users/211029/pcronin"}, "edited": false, "score": 0, "creation_date": 1557585826, "post_id": 56086903, "comment_id": 98819069, "body": "I&#39;ve updated my answer with what I think is causing the error message."}], "tags": [], "owner": {"reputation": 1094, "user_id": 491894, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05abfb520b1fafe57e2e5594ad9f82f1?s=128&d=identicon&r=PG", "display_name": "harleypig", "link": "https://stackoverflow.com/users/491894/harleypig"}, "is_accepted": false, "score": 2, "last_activity_date": 1557544846, "creation_date": 1557544846, "answer_id": 56086903, "question_id": 56080172, "link": "https://stackoverflow.com/questions/56080172/why-am-i-getting-a-permission-denied-when-suing-to-a-user/56086903#56086903", "title": "Why am I getting a permission denied when su&#39;ing to a user?", "body": "<p>I was not reading the <code>su</code> man page closely enough. The answer is in the first section:</p>\n\n<blockquote>\n  <p>For backward compatibility, su defaults to not change the current\n  directory and to only set the environment variables HOME and SHELL\n  (plus USER and LOGNAME if the target user is not root).</p>\n</blockquote>\n\n<p>So, my existing environment, which included <code>PERL5LIB=lib</code>. was left in place. <code>/etc/bash.bashrc</code> is being executed with whatever environment I have in place. This seems a possible security risk.</p>\n\n<p>In any case, the following resolved the issue, though it still doesn't explain why it was only giving an error from my home directory:</p>\n\n<pre><code>$ pwd ; PERL5LIB= su testloginfiles\n/home/harleypig\nPassword: \n/etc/bash.bashrc (-: himBH) (login_shell        off)\n@INC: /usr/lib/perl5/5.28/site_perl:/usr/share/perl5/site_perl:/usr/lib/perl5/5.28/vendor_perl:/usr/share/perl5/vendor_perl:/usr/lib/perl5/5.28/core_perl:/usr/share/perl5/core_perl\n/home/testloginfiles/.bashrc (-: himBH) (login_shell            off)\n[testloginfiles@sweetums harleypig]$\n</code></pre>\n"}], "owner": {"reputation": 1094, "user_id": 491894, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/05abfb520b1fafe57e2e5594ad9f82f1?s=128&d=identicon&r=PG", "display_name": "harleypig", "link": "https://stackoverflow.com/users/491894/harleypig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 56085737, "answer_count": 2, "score": 3, "last_activity_date": 1557575594, "creation_date": 1557500299, "last_edit_date": 1557542999, "question_id": 56080172, "link": "https://stackoverflow.com/questions/56080172/why-am-i-getting-a-permission-denied-when-suing-to-a-user", "title": "Why am I getting a permission denied when su&#39;ing to a user?", "body": "<p>If I <code>su user</code> from my home directory I am getting a permission denied for bash-completion, but if I <code>su user</code> from another directory there is no error.</p>\n\n<pre><code>Can't locate strict.pm:   lib/strict.pm: Permission denied at \n/usr/bin/vendor_perl/bash-complete line 7.\nBEGIN failed--compilation aborted at /usr/bin/vendor_perl/bash-complete line 7.\n</code></pre>\n\n<p>Line 7 of the referenced file is <code>use strict;</code> ... included with every version of perl since at least the late 90s.</p>\n\n<p><code>su user</code> sources <code>/etc/bash.bashrc</code> and the user being su'd to <code>.bashrc</code>. Why would the calling user's location in the filesystem change this?</p>\n\n<p>See <a href=\"https://github.com/harleypig/loginfiles\" rel=\"nofollow noreferrer\">my repo</a> for more details, but I think I've gotten the necessary basics here.</p>\n\n<p>Edit: More description of the setup.</p>\n\n<p>I've added the following lines to /etc/bash.bashrc (which is where the error is happening):</p>\n\n<pre><code>if [[ $USER == 'testloginfiles' ]]; then\n    echo \"/etc/bash.bashrc (-: $-) ($(shopt login_shell))\"\n    printf '@INC: %s\\n' $(perl -e 'print join \":\", @INC')\nfi\n</code></pre>\n\n<p>And this is the output if I am in my home directory:</p>\n\n<pre><code>$ pwd;su testloginfiles\n/home/harleypig\nPassword: \n/etc/bash.bashrc (-: himBH) (login_shell        off)\n@INC: lib:/usr/lib/perl5/5.28/site_perl:/usr/share/perl5/site_perl:/usr/lib/perl5/5.28/vendor_perl:/usr/share/perl5/vendor_perl:/usr/lib/perl5/5.28/core_perl:/usr/share/perl5/core_perl\nCan't locate strict.pm:   lib/strict.pm: Permission denied at /usr/bin/vendor_perl/bash-complete line 7.\nBEGIN failed--compilation aborted at /usr/bin/vendor_perl/bash-complete line 7.\n/home/testloginfiles/.bashrc (-: himBH) (login_shell        off)\n[testloginfiles@sweetums harleypig]$\n</code></pre>\n\n<p>If I am in another directory (e.g., <code>/tmp</code>) I get the following:</p>\n\n<pre><code>$ pwd ; su testloginfiles\n/tmp\nPassword: \n/etc/bash.bashrc (-: himBH) (login_shell        off)\n@INC: lib:/usr/lib/perl5/5.28/site_perl:/usr/share/perl5/site_perl:/usr/lib/perl5/5.28/vendor_perl:/usr/share/perl5/vendor_perl:/usr/lib/perl5/5.28/core_perl:/usr/share/perl5/core_perl\n/home/testloginfiles/.bashrc (-: himBH) (login_shell            off)\n[testloginfiles@sweetums tmp]$\n</code></pre>\n\n<p>There is a relative path as @pcronin suggests, but neither my home directory nor <code>/tmp</code> have a lib directory. Why is one causing an error and the other is not?</p>\n"}, {"tags": ["file", "perl", "count", "directory"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1557482544, "post_id": 56074931, "comment_id": 98788852, "body": "What is the purpose of <code>grep $_, @file</code>? It seems like and identity operator on <code>@file</code>. For example <code>grep { $_ } @lst</code> gives back the same <code>@lst</code>"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557487359, "post_id": 56074931, "comment_id": 98791278, "body": "@H&#229;konH&#230;gland <code>grep $_, @file</code> is not an identity operator. For instance, <code>perl -E &#39;say join &quot;-&quot;, grep $_, 1, 0, 2, &quot;a&quot;, &quot;&quot;, &quot;c&quot;&#39;</code>. However, I&#39;m not sure what purpose it serves in that question."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1557487590, "post_id": 56074931, "comment_id": 98791438, "body": "@Dada Good point!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1557496471, "post_id": 56074931, "comment_id": 98796190, "body": "You were probably thinking of <code>map $_, LIST</code>. But even that isn&#39;t quite equivalent to <code>LIST</code>. It creates a copy of the elements. This means that <code>$_=uc($_) for @a;</code> and <code>$_=uc($_) for map $_, @a;</code> are different. If you wanted a list operation that didn&#39;t create copies, you&#39;d have to go with <code>grep 1, LIST</code> or <code>sub :lvalue { @_ }-&gt;(LIST)</code>."}, {"owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557580946, "post_id": 56074931, "comment_id": 98817931, "body": "Thank you very much! This is my new code : use Time::localtime;  $date = localtime(); print $date; print &quot;\\n&quot;; $dir = &quot;/root/perl/*&quot;; my @file = glob($dir); $size = @file; foreach (my $i=0; $i &lt;= $size; $i++) {         print @file[$i];         print $size;         print&quot;\\n&quot;; }   I will print the file names and paths, then the total number of files!  But For example, I want to sum the files created yesterday, how to do it?"}, {"owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557582292, "post_id": 56074931, "comment_id": 98818237, "body": "Thank you very much! This is my new code : use Time::localtime; $date = localtime(); print $date; print &quot;\\n&quot;; $dir = &quot;/root/perl/*&quot;; my @file = glob($dir); $size = @file; foreach (my $i=0; $i &lt;= $size; $i++) { print @file[$i]; print $size; print&quot;\\n&quot;; }"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557580934, "post_id": 56075273, "comment_id": 98817927, "body": "Thank you very much! This is my new code : use Time::localtime;  $date = localtime(); print $date; print &quot;\\n&quot;; $dir = &quot;/root/perl/*&quot;; my @file = glob($dir); $size = @file; foreach (my $i=0; $i &lt;= $size; $i++) {         print @file[$i];         print $size;         print&quot;\\n&quot;; }   I will print the file names and paths, then the total number of files!  But For example, I want to sum the files created yesterday, how to do it?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557672382, "post_id": 56075273, "comment_id": 98835478, "body": "<code>find &#47;dire&#47;ctory&#47;some&#47;where -type f -daystart -mtime -2 -mtime +0 | wc -l</code>"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1557511895, "last_edit_date": 1557511895, "creation_date": 1557482543, "answer_id": 56075273, "question_id": 56074931, "link": "https://stackoverflow.com/questions/56074931/count-the-number-of-files-in-a-folder-by-date/56075273#56075273", "title": "Count the number of files in a folder by date", "body": "<pre><code>#!/usr/bin/perl\nuse warnings; use strict;\nmy($n,%n)=(0);\nwhile(&lt;&gt;){\n    chomp;\n    next if !-f$_; #just count files, ignore dirs, symlinks etc\n    my $mtime=(stat($_))[9];\n    my @lt=localtime($mtime); $lt[5]+=1900; $lt[4]+=1;\n    my $date=sprintf\"%04d-%02d-%02d\", @lt[5,4,3];\n    $n{$date}++;\n    $n++;\n}\nmy @d=sort keys %n;\nprintf \"Date $_ has %3d files\\n\",$n{$_} for @d;\nprint \"A total of $n files between $d[0] and $d[-1]\\n\";\n</code></pre>\n\n<p>Save as <code>num_files_by_date.pl</code> and <code>chmod +x num_files_by_date.pl</code>. The program takes a list of files on STDIN and counts the number on each date. Run forexample like this:</p>\n\n<pre><code>\\ls -1 | ./num_files_by_date.pl\n\\ls -d1 /root/perl/* | perl num_files_by_date.pl\nfind dir1/ dir2/ | ./num_files_by_date.pl\n</code></pre>\n\n<p>Output could be:</p>\n\n<pre><code>Date 2019-04-28 has   2 files\nDate 2019-04-30 has   3 files\nDate 2019-05-03 has   1 files\nDate 2019-05-06 has   4 files\nA total of 10 files between 2019-04-28 and 2019-05-06\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "edited": false, "score": 0, "creation_date": 1557580922, "post_id": 56078982, "comment_id": 98817925, "body": "Thank you very much! This is my new code : use Time::localtime;  $date = localtime(); print $date; print &quot;\\n&quot;; $dir = &quot;/root/perl/*&quot;; my @file = glob($dir); $size = @file; foreach (my $i=0; $i &lt;= $size; $i++) {         print @file[$i];         print $size;         print&quot;\\n&quot;; }   I will print the file names and paths, then the total number of files!  But For example, I want to sum the files created yesterday, how to do it?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1557515554, "last_edit_date": 1557515554, "creation_date": 1557495985, "answer_id": 56078982, "question_id": 56074931, "link": "https://stackoverflow.com/questions/56074931/count-the-number-of-files-in-a-folder-by-date/56078982#56078982", "title": "Count the number of files in a folder by date", "body": "<p>As with Kjetil S.'s solution, this one accepts file names rather than directory names to provide a much more flexible solution that the one you requested.</p>\n\n<p>This version addresses a number of issues with Kjetil S.'s.</p>\n\n<ul>\n<li>It provides a minimalistic output consistent with the philosophy of using tool chains.</li>\n<li>It doesn't perform two stats per file.</li>\n<li>It doesn't skip non-directory, non-plain files.</li>\n<li>It handles errors.</li>\n<li>It's easier to read.</li>\n</ul>\n\n<p>Example usage:</p>\n\n<pre><code>\\ls                    | num_files_by_date\n\\ls /some/dir          | num_files_by_date\n\\ls -d /some/dir/*.txt | num_files_by_date\nfind dir1 dir2         | num_files_by_date\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse File::stat qw( stat );\nuse POSIX qw( strftime );\n\nmy %counts_by_date;\nwhile (&lt;&gt;) {\n    chomp;\n    my $stat = stat($_)\n       or do {\n          warn(\"Can't stat \\\"$_\\\": $!\\n\");\n          next;\n       };\n\n    ++$counts_by_date{ strftime(\"%F\", localtime($stat-&gt;mtime)) }\n       if !-d $stat;  # Don't count dirs.\n}\n\nprintf(\"%s %s\\n\", $_, $counts_by_date{$_})\n   for sort keys %counts_by_date;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10179904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae140956f921dbb9f636c4fde5b26798?s=128&d=identicon&r=PG&f=1", "display_name": "noname", "link": "https://stackoverflow.com/users/10179904/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557515554, "creation_date": 1557481471, "last_edit_date": 1557493899, "question_id": 56074931, "link": "https://stackoverflow.com/questions/56074931/count-the-number-of-files-in-a-folder-by-date", "title": "Count the number of files in a folder by date", "body": "<p>I need to count the number of files in a folder by date using Perl. Here is my code:</p>\n\n<pre><code>my $datestring = localtime(time); \nprint \"$datestring\\n\"; \nsub demFile { \n    $dir = \"/root/perl/*\"; \n    my @file = glob($dir); \n    foreach(@file) { \n        $a = scalar(grep $_, @file) . \"\\n\"; \n        return $a; \n    } \n}\n\n$b = demFile(); \nprint $b;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1557479068, "post_id": 56074143, "comment_id": 98786917, "body": "Do not use <code>g</code> flag, remove it, see <a href=\"https://ideone.com/UIyN5M\" rel=\"nofollow noreferrer\">ideone.com/UIyN5M</a>"}, {"owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "edited": false, "score": 0, "creation_date": 1557480441, "post_id": 56074143, "comment_id": 98787676, "body": "Why does the g flag have this effect?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1557481228, "post_id": 56074143, "comment_id": 98788139, "body": "It has been discussed in some SO questions. The point is that perl regex supports matching zero width strings (locations) before each char and end of string, and then it can re-test the chars after these empty strings (it is important as it makes it possible to split strings using lookarounds). Also, <code>$</code> matches a location before the final newline, and at the very end of the string. Well, the logic must be: regex must match end of line only once, else, there may be unexpected behavior."}], "answers": [{"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1557481736, "post_id": 56074283, "comment_id": 98788416, "body": "What about empty lines, should they not end in X? And you still don&#39;t need the <code>&#47;g</code> modifier."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1557482144, "post_id": 56074283, "comment_id": 98788647, "body": "Depends on what the user wants, he can modify the regex to cover empty lines as well. My answer solved the problem as specified, but I agree that covering empty lines makes sense."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1557490963, "post_id": 56074283, "comment_id": 98793123, "body": "They were needed when the substitution was with g, but without g, the expression can be simplified. Will add a note."}], "tags": [], "owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "is_accepted": false, "score": 1, "last_activity_date": 1557491094, "last_edit_date": 1557491094, "creation_date": 1557479345, "answer_id": 56074283, "question_id": 56074143, "link": "https://stackoverflow.com/questions/56074143/perl-search-and-replace-replacing-end-of-line-replaces-beginning-to-line-too/56074283#56074283", "title": "Perl search and replace: replacing end of line replaces beginning to line too", "body": "<p>Here is one way:</p>\n\n<pre><code>perl -pi -e 's/(.+)$/$1X/' data.txt\n</code></pre>\n\n<p>EDIT: Removed g as suggested. Also, with g removed, the solution can be simplified to</p>\n\n<pre><code>perl -pi -e 's/$/X/' data.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1557481645, "creation_date": 1557481645, "answer_id": 56074973, "question_id": 56074143, "link": "https://stackoverflow.com/questions/56074143/perl-search-and-replace-replacing-end-of-line-replaces-beginning-to-line-too/56074973#56074973", "title": "Perl search and replace: replacing end of line replaces beginning to line too", "body": "<p>You could also rewrite it to:</p>\n\n<pre><code>perl -i -ple '$_ .= \" X\"' data.txt\n</code></pre>\n\n<p>which is easier to read in this case. I think. The <code>-l</code> option removes <code>\\n</code> from each line first and then adds it after (right before it <code>-p</code>rints) so you basically dont have to think about <code>\\n</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1557503236, "last_edit_date": 1557503236, "creation_date": 1557490027, "answer_id": 56077418, "question_id": 56074143, "link": "https://stackoverflow.com/questions/56074143/perl-search-and-replace-replacing-end-of-line-replaces-beginning-to-line-too/56077418#56077418", "title": "Perl search and replace: replacing end of line replaces beginning to line too", "body": "<p>When <code>/m</code> isn't used, <code>$</code> is equivalent to <code>(?=\\n\\z)|\\z</code>.</p>\n\n<p>As you can see, it can match at two different locations. For example, in the following, it can match at position 9 (<code>(?=\\n\\z)</code>) and at position 10 (<code>\\z</code>).</p>\n\n<pre><code>01234567890   &lt;- positions\na,b,c,d,e\u240a\n</code></pre>\n\n<p>Solution: Remove the <code>/g</code> to only match the first of the two.</p>\n\n<pre><code>perl -pe's/$/ X/'\n</code></pre>\n\n<p>Solution: Remove the line feeds and match at the end of the string.</p>\n\n<pre><code>perl -ple's/\\z/ X/'    # \u00ab$\u00bb would work as well as \u00ab\\z\u00bb, but I like to say what I mean.\n</code></pre>\n\n<p>Solution: Remove the line feeds and just use concatenation.</p>\n\n<pre><code>perl -ple'$_.=\" X\"'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11480149, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2U5ts-oILsg/AAAAAAAAAAI/AAAAAAAAAFU/J4kQQxKIRCM/photo.jpg?sz=128", "display_name": "Saurabh Mishra", "link": "https://stackoverflow.com/users/11480149/saurabh-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1557503236, "creation_date": 1557478895, "last_edit_date": 1557480685, "question_id": 56074143, "link": "https://stackoverflow.com/questions/56074143/perl-search-and-replace-replacing-end-of-line-replaces-beginning-to-line-too", "title": "Perl search and replace: replacing end of line replaces beginning to line too", "body": "<p>I have a file [data.txt] with the following data</p>\n\n<pre><code>a,b,c,d,e\ne,f,g,h,i\nj,k,l,m,n\n</code></pre>\n\n<p>I use the following perl command to replace the end of line with some text.</p>\n\n<pre><code>perl -pi -e 's/$/ X/g' data.txt\n</code></pre>\n\n<p>However, my file reflects the following (it replace the start of line too)</p>\n\n<pre><code>a,b,c,d,e X\n Xe,f,g,h,i X\n Xj,k,l,m,n X\n</code></pre>\n\n<p>This is unexpected, can anyone point out if I am missing anything obvious?</p>\n\n<p>Cheers\nSaurabh</p>\n"}, {"tags": ["unit-testing", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1557463789, "post_id": 56069081, "comment_id": 98780710, "body": "I don&#39;t know what troubles you are having, but one non-obvious feature of <code>@INC</code> is that runtime changes to <code>@INC</code> with <code>push</code> and <code>unshift</code> are not available to (compile-time) <code>use Module ...</code> statements."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1557502328, "post_id": 56069081, "comment_id": 98799569, "body": "Also note that additions to <code>@INC</code> without using lib.pm, PERL5LIB, or the <code>-I</code> option will not include associated arch- or version-specific directories, so you should always use one of those methods to add lib directories containing modules installed from CPAN."}], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1558057942, "post_id": 56069784, "comment_id": 98983435, "body": "in a <code>test.t</code>, <code>use local lib &#47;git&#47;repo</code> does help, Thanks!"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1557454014, "creation_date": 1557454014, "answer_id": 56069784, "question_id": 56069081, "link": "https://stackoverflow.com/questions/56069081/perl5lib-inc-and-library-priority-for-testing/56069784#56069784", "title": "PERL5LIB, @INC and library priority for testing", "body": "<p>I might be misunderstanding your problem but <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\"><code>local::lib</code></a> allows you to \"manually\" tune your module path. You should be able to use it to control what paths are used for your test environment.</p>\n"}, {"comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1558057869, "post_id": 56080188, "comment_id": 98983422, "body": "you are right, the module would be test friendly if not use any fixed path at all. let us the ENV or each perl code take care of the lib path. Thanks!"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1558111596, "last_edit_date": 1558111596, "creation_date": 1557500337, "answer_id": 56080188, "question_id": 56069081, "link": "https://stackoverflow.com/questions/56069081/perl5lib-inc-and-library-priority-for-testing/56080188#56080188", "title": "PERL5LIB, @INC and library priority for testing", "body": "<p>I don't hard-code paths unless I have no other options.</p>\n\n<p>In general, you don't want to hardcode things that you can provide to your program in some other fashion so it can respond to whatever environment it's in rather than only the environment where you developed it. One of those environments could be your testing environment.</p>\n\n<p>You can set the library search path from outside the program, and that makes it more flexible. </p>\n\n<p>And, since you hard-code them and add them at runtime, they are going to come after anything you've set previously. Here's what happens in your setting:</p>\n\n<ul>\n<li>You start with the default <code>@INC</code>.</li>\n<li>You start to \"run\" your program, you start the compilation phase. It compiles the entire program before it executes run-time statements.</li>\n<li>As it compiles, it encounters the <code>use lib</code> and executes that pragma immediately. Now <code>/top/priority/use/lib/second_priority</code> is at the beginning of <code>@INC</code>.</li>\n<li>For the rest of the compilation phase, <code>/top/priority/use/lib/second_priority</code> is the first thing in <code>@INC</code>. That's where subsequent <code>use</code> calls will look for things.</li>\n<li>The compilation phase finishes and the program transitions into the run phase.</li>\n<li>It encounters the <code>push</code> and executes that. Now <code>/push/inc/lowest_priority</code> is the last element of <code>@INC</code>.</li>\n<li>It skips over the <code>use lib</code> because the compilation phase handled the pragma.</li>\n<li>It encounters the <code>unshift</code> and executes that. Now <code>/unshift/inc/lib/first_priority</code> is the first item in <code>@INC</code>.</li>\n<li>Subsequent <code>require</code> calls (a runtime feature) will look in <code>/unshift/inc/lib/first_priority</code> first.</li>\n</ul>\n\n<p>I don't know where you expect to find the library you expected to load, but you have to supply the full path to it. There may be extra directories under the <em>lib/</em> that matter and you haven't accounted for.</p>\n"}], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 56080188, "answer_count": 2, "score": 1, "last_activity_date": 1558111596, "creation_date": 1557446854, "last_edit_date": 1557453020, "question_id": 56069081, "link": "https://stackoverflow.com/questions/56069081/perl5lib-inc-and-library-priority-for-testing", "title": "PERL5LIB, @INC and library priority for testing", "body": "<p>I had some difficulties in overriding perl lib when testing perl codes when  the <code>.pl</code> or <code>.pm</code> has <code>use lib</code> or <code>unshift @INC</code>, my question is:</p>\n\n<blockquote>\n  <p>Is it a bad idea to use <code>use lib</code> or <code>unshift @INC</code> in the production code since they are hard to test?  The <code>prove -lvr</code> cannot override these too.</p>\n</blockquote>\n\n<p>Code <code>test.pl</code></p>\n\n<pre><code>push @INC, '/push/inc/lowest_priority';\nuse lib \"/top/priority/use/lib/second_priority\";\nunshift @INC, \"/unshift/inc/lib/first_priority\";\nforeach my $inc (@INC){\n    print \"INC=&gt;$inc\\n\";\n}\n</code></pre>\n\n<p>set perl env</p>\n\n<pre><code>export PERL5LIB=/export/PERL5LIB/env/lib:$PERL5LIB\n</code></pre>\n\n<p>Output of <code>perl -I/cmd/Iinclude/lib/ test.pl</code></p>\n\n<pre><code>INC=&gt;/unshift/inc/lib/first_priority\nINC=&gt;/top/priority/use/lib/second_priority\nINC=&gt;/cmd/Iinclude/lib/\nINC=&gt;/export/PERL5LIB/env/lib\nINC=&gt;/usr/local/lib64/perl5\nINC=&gt;/usr/local/share/perl5\nINC=&gt;/usr/lib64/perl5/vendor_perl\nINC=&gt;/usr/share/perl5/vendor_perl\nINC=&gt;/usr/lib64/perl5\nINC=&gt;/usr/share/perl5\nINC=&gt;/push/inc/lowest_priority\n</code></pre>\n"}, {"tags": ["perl", "xmpp"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1557416038, "post_id": 56062269, "comment_id": 98765914, "body": "See the examples in the <a href=\"https://metacpan.org/source/DAPATRICK/Net-XMPP-1.05/examples\" rel=\"nofollow noreferrer\"><code>examples</code></a> folder. Seems like you have to use <code>$con-&gt;SetCallBacks()</code>"}, {"owner": {"reputation": 137, "user_id": 7866968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a05d28d5bbdcb5ae6c14c033b9275555?s=128&d=identicon&r=PG&f=1", "display_name": "gauss76", "link": "https://stackoverflow.com/users/7866968/gauss76"}, "edited": false, "score": 0, "creation_date": 1557429778, "post_id": 56062269, "comment_id": 98772385, "body": "Many thanks H&#229;kon, I&#39;ll take a look and see if I can come up with something"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 0, "creation_date": 1557473669, "post_id": 56062269, "comment_id": 98784437, "body": "OK, ALMOST there...I have now used the code client.pl in the examples folder. Everythig works fine until right at the end where I try and check for a Process (line containing while(defined($Connection-&gt;Process())) { }   ) However the code gives the following error that I have no idea how to resolve &quot;There was an error in the last call to Process that you did not check for and handle.  You should always check the output of the Process call.  If it was undef then there was a fatal error that you need to check.  There is an error in your program at client.pl line x.&quot;"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557413865, "creation_date": 1557413865, "question_id": 56062269, "link": "https://stackoverflow.com/questions/56062269/netxmpp-perl-module-can-this-be-used-to-check-for-chat-messages-on-server", "title": "Net::XMPP Perl module: Can this be used to check for chat messages on server?", "body": "<p>I can now connect to my jabber server using the perl module Net::XMPP. Now I would like to know: Is it possible to monitor the server for incoming chat messages (NOT email messages) and act accordingly if one is recieved?</p>\n\n<p>The basic code I currently have is:</p>\n\n<pre><code>#!/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse Net::XMPP;\n\nmy $con = new Net::XMPP::Client(); \n\nmy $status = $con-&gt;Connect(  \nhostname =&gt; 'hostnamepart',  \nconnectiontype =&gt; 'tcpip',  \ntls =&gt; 1,\nssl_ca_path =&gt;'path for cert');\ndie('ERROR: XMPP connection failed') if ! defined($status);\n</code></pre>\n\n<p>The $status variable returns 1 when I run the code above which I assume means that I connected ok. However, now I am stuck! I have looked through the online documentation on the metacpan.org website for Net::XMPP but cannot figure out if it's even possible to do what I want. Any help appreciated.</p>\n"}, {"tags": ["json", "perl", "serialization", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1557401108, "post_id": 56058073, "comment_id": 98757097, "body": "You can look at <code>%INC</code> to see what&#39;s loaded. That should give a hint as to which JSON module it uses."}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1557404668, "post_id": 56058545, "comment_id": 98759131, "body": "Damn they both use the same <code>Cpanel::JSON::XS</code> which is good in the sense that I know something must be touching the DB result. I wonder if it&#39;s to do with the mysql driver"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1557408507, "post_id": 56058545, "comment_id": 98761352, "body": "That&#39;s possible. Or the database version. Or the JSON module version."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1557401797, "creation_date": 1557401797, "answer_id": 56058545, "question_id": 56058073, "link": "https://stackoverflow.com/questions/56058073/dancer2-stringifies-everything-on-the-server-but-not-locally/56058545#56058545", "title": "Dancer2 stringifies everything on the server but not locally", "body": "<p><a href=\"https://metacpan.org/source/CROMEDOME/Dancer2-0.207000/lib/Dancer2/Serializer/JSON.pm#L26\" rel=\"nofollow noreferrer\">Dancer2 uses</a> <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON::MaybeXS</a> to decide which module to load. You can use the <a href=\"http://perl%20-MJSON::MaybeXS%20-E%20&#39;say%20JSON::MaybeXS-%3EJSON&#39;\" rel=\"nofollow noreferrer\"><code>-&gt;JSON</code> class method</a> on that to ask it which one it loaded.</p>\n\n<pre><code>$ perl -MJSON::MaybeXS -E 'say JSON::MaybeXS-&gt;JSON'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1557408550, "post_id": 56060060, "comment_id": 98761379, "body": "You can run your own Perl pretty easily if you want to, or ship your own dependencies. Dancer2 is fully fatpackable if you don&#39;t use XS stuff."}], "tags": [], "owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "is_accepted": true, "score": 1, "last_activity_date": 1557406909, "creation_date": 1557406909, "answer_id": 56060060, "question_id": 56058073, "link": "https://stackoverflow.com/questions/56058073/dancer2-stringifies-everything-on-the-server-but-not-locally/56060060#56060060", "title": "Dancer2 stringifies everything on the server but not locally", "body": "<p>Yes it seems it was the <code>DBD::mysql</code> that was installed. I had 4.033 (and I had no <code>mysql_config</code>  so probably that kept it back) and there seems there are a few changes since that might be the cause but not sure: </p>\n\n<p>Perhaps one of:</p>\n\n<p><a href=\"https://metacpan.org/changes/distribution/DBD-mysql#L196\" rel=\"nofollow noreferrer\">Numeric conversions in perl which led to overflow/underflow was ignored\n    even when mysql strict mode was enabled</a></p>\n\n<p><a href=\"https://metacpan.org/changes/distribution/DBD-mysql#L215\" rel=\"nofollow noreferrer\">Use correct format in printf instead of casting variable types</a></p>\n\n<p>Or any of the changes around having <code>mysql_config</code> available. \nEither way big ups to the maintainers!\nAlso this server was upgraded from 14.04 LTS which of course changed system perl things. (But I don't recall noticing the stringification on 14.04)</p>\n"}], "owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 1, "accepted_answer_id": 56060060, "answer_count": 2, "score": 1, "last_activity_date": 1557406909, "creation_date": 1557400169, "question_id": 56058073, "link": "https://stackoverflow.com/questions/56058073/dancer2-stringifies-everything-on-the-server-but-not-locally", "title": "Dancer2 stringifies everything on the server but not locally", "body": "<p>I run identical code (my Dancer2 app) locally on my mac's plenv's v5.26.2 but when I run the app (whether with plackup or starman or proxied behind Apache, with our without SSL, or requesting locally on each location with Curl) the server-running instance is stringifying everything in the responding payloads. </p>\n\n<p><code>\"custid\": \"5000\",</code> on the ubuntu 16 server (system perl v5.22.1 - libraries are same versions as my local instance) </p>\n\n<p><code>\"custid\": 5000,</code> on my local machine.</p>\n\n<p>In my <code>config.yml</code> I got (among other things, but this is the only <code>engines</code> block)</p>\n\n<pre><code>content_type: \"application/json\"\nserializer: \"JSON\"\n\nengines:\n  serializer:\n    JSON:\n      pretty: 1\n</code></pre>\n\n<p>The data itself does come from a DB but my local machine and the server's <code>DBIx::Class</code> respectively connect to the same remote (not local to the ubuntu) mysql server with the same ResultSources..</p>\n\n<p>One thing I can think of is the server to be using <code>Cpanel::JSON::XS</code> and something is \"touching\" the results as strings before they get to the serializer, but I'm not sure how to check which JSON library is actually used on each running app instance.</p>\n\n<p>So - \nHow come I get different stringification with the same code?\nHow to check what JSON library is used on each instance?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1557401895, "post_id": 56058214, "comment_id": 98757608, "body": "That&#39;s what it <i>tries</i> to do. It actually does something different. Try it with password <code>foo|bar</code> or <code>foo^bar</code>. (Also, there&#39;s no need to use <code>export</code>.)"}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1557402095, "post_id": 56058214, "comment_id": 98757711, "body": "@ikegami not everybody uses Perl code as their password. :-) Vulnerable -- maybe, but the question was about the purpose of this code in some build script of some open-source project --  apparently it works there as expected by whoever wrote it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1557402207, "post_id": 56058214, "comment_id": 98757781, "body": "Or maybe they&#39;re looking for vulnerabilities. Or maybe they&#39;re trying to find the cause of a problem. No matter the case, it only does what you say <i>sometimes</i>, and that&#39;s worth saying."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1557402292, "post_id": 56058214, "comment_id": 98757827, "body": "I agree it&#39;s too many maybe. Each one is an assumption made by you, and there are just too many of them. /// And we have a severe case of <i>under</i>-engineering"}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 1, "last_activity_date": 1557400647, "creation_date": 1557400647, "answer_id": 56058214, "question_id": 56057998, "link": "https://stackoverflow.com/questions/56057998/what-does-perl-pe-spasswordpasswordg/56058214#56058214", "title": "What does perl -pe &quot;s|$PASSWORD|&lt;PASSWORD&gt;|g&quot;?", "body": "<p>It processes all lines on STDIN and replaces the value of <code>PASSWORD</code> environment variable with <code>&lt;PASSWORD&gt;</code> placeholder.</p>\n\n<p>You can try it out with this minimal example:</p>\n\n<pre><code>export PASSWORD=secret_password\necho \"My password is: secret_password\" | perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>My password is: &lt;PASSWORD&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 1, "creation_date": 1557401176, "post_id": 56058266, "comment_id": 98757139, "body": "It&#39;s not buggy. :-) The substitution of <code>$PASSWORD</code> in double quotes is done by <code>bash</code> (so <code>perl</code> receives an argument with a substituted string)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 3, "creation_date": 1557402817, "post_id": 56058266, "comment_id": 98758097, "body": "It suffers from code injection bugs, as now demonstrated in my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1557403248, "last_edit_date": 1557403248, "creation_date": 1557400855, "answer_id": 56058266, "question_id": 56057998, "link": "https://stackoverflow.com/questions/56057998/what-does-perl-pe-spasswordpasswordg/56058266#56058266", "title": "What does perl -pe &quot;s|$PASSWORD|&lt;PASSWORD&gt;|g&quot;?", "body": "<p>It's a buggy version of</p>\n\n<pre><code>PASSWORD=\"$PASSWORD\" perl -pe's/\\Q$ENV{PASSWORD}/&lt;PASSWORD&gt;/g'\n</code></pre>\n\n<p>In this corrected version, the shell launches <code>perl</code>, passing the shell variable <code>$PASSWORD</code> to <code>perl</code> as the environment variable <code>PASSWORD</code>.</p>\n\n<p><code>perl</code> will iterate over each line of the specified file(s) (or STDIN if no paths are provided as arguments). In each, it will replace each instance of the value of the environment variable <code>PASSWORD</code> with <code>&lt;PASSWORD&gt;</code>. These possibly modified lines are them output to STDOUT.</p>\n\n<pre><code>$ PASSWORD=bar\n\n$ cat file\nfoo\nbar\nfoobarfoobarfoo\nfoo\n\n$ PASSWORD=\"$PASSWORD\" perl -pe's|\\Q$ENV{PASSWORD}|&lt;PASSWORD&gt;|g' file\nfoo\n&lt;PASSWORD&gt;\nfoo&lt;PASSWORD&gt;foo&lt;PASSWORD&gt;foo\nfoo\n</code></pre>\n\n<hr>\n\n<p>The version you presented is similar.</p>\n\n<pre><code>$ PASSWORD='foobar'\n\n$ printf \"fobar %s\\n\" \"$PASSWORD\" | perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\nfobar &lt;PASSWORD&gt;\n</code></pre>\n\n<p>However, the <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"noreferrer\">code injection</a> bugs in the version you presented causes it to fail in various ways if the original password contains <code>|</code>, <code>\\</code>, <code>$</code>, <code>@</code>, <code>+</code>, <code>*</code>, <code>?</code>, <code>^</code>, <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code> and possibly other characters.</p>\n\n<pre><code>$ PASSWORD='foo|bar'\n\n$ printf \"fobar %s\\n\" \"$PASSWORD\" | perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\nsyntax error at -e line 1, near \"PASSWORD&gt;\"\nExecution of -e aborted due to compilation errors.\n\n\n$ PASSWORD='foo*bar'\n\n$ printf \"fobar %s\\n\" \"$PASSWORD\" | perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\n&lt;PASSWORD&gt; foo*bar\n\n\n$ PASSWORD='$x[exec(\"echo hacked\")]'\n\n$ printf \"fobar %s\\n\" \"$PASSWORD\" | perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\nhacked\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 3, "last_activity_date": 1557457733, "creation_date": 1557457733, "answer_id": 56070162, "question_id": 56057998, "link": "https://stackoverflow.com/questions/56057998/what-does-perl-pe-spasswordpasswordg/56070162#56070162", "title": "What does perl -pe &quot;s|$PASSWORD|&lt;PASSWORD&gt;|g&quot;?", "body": "<p>The <code>-p</code> option creates a while loop that contans the content of <code>-e</code>. For this particular question, assuming <code>PASSWORD=xxx</code>, here's the generated code:</p>\n\n<pre><code>LINE:\n  while (&lt;&gt;) {\n      s|xxx|&lt;PASSWORD&gt;|g\n  } continue {\n      print or die \"-p destination: $!\\n\";\n  }\n</code></pre>\n\n<p>As other people has pointed out, that <code>$PASSWORD</code> is perhaps replace by shell  with the value of env var \"PASSWORD\", rather than a variable in perl code. I put \"xxx\" up there just to demonstrate this.</p>\n\n<p>Read more about this at: <a href=\"https://perldoc.pl/perlrun#-p\" rel=\"nofollow noreferrer\">https://perldoc.pl/perlrun#-p</a> (Or <code>man perlrun</code>)</p>\n\n<p>The \"perlrun\" documentation also explain each individual options of \"perl\" command. </p>\n"}], "owner": {"reputation": 211, "user_id": 7961067, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6dd43dc48c51258a507eee761c7bc039?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam", "link": "https://stackoverflow.com/users/7961067/shivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1557475615, "creation_date": 1557399897, "last_edit_date": 1557475615, "question_id": 56057998, "link": "https://stackoverflow.com/questions/56057998/what-does-perl-pe-spasswordpasswordg", "title": "What does perl -pe &quot;s|$PASSWORD|&lt;PASSWORD&gt;|g&quot;?", "body": "<p>I find this piece of code in an open source project. Here in argument passing some non zero password. I was wondering what the following code actually do for me</p>\n\n<pre><code>perl -pe \"s|$PASSWORD|&lt;PASSWORD&gt;|g\"\n</code></pre>\n"}, {"tags": ["regex", "file", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1557396974, "post_id": 56055828, "comment_id": 98754926, "body": "Please be more specific. Include examples of the files, and the code you tried"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1557403406, "post_id": 56055828, "comment_id": 98758422, "body": "Ok, so the problem is that the patterns from <code>tet.xml</code> are spanning multiple lines, and they are not necessarily in the same order as the keys in <code>pss_ret_regs.txt</code>? So you try to pass through <code>tet.xml</code> multiple times? That seems like quite an inefficient approach to me."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1557755381, "creation_date": 1557755381, "answer_id": 56113800, "question_id": 56055828, "link": "https://stackoverflow.com/questions/56055828/using-perl-to-process-list-of-name-and-details/56113800#56113800", "title": "Using perl to process list of name and details", "body": "<p>One of your input files is an XML document. You shouldn't parse XML documents with regular expressions. It is a far better idea to use a proper XML parser (I'd recommend <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>).</p>\n\n<p>If you insist in parsing XML using regexes, then you cannot process your input file a line at a time, as XML elements will often (usually?) span multiple lines.</p>\n\n<p>Also, please update your file-handling code to use the three-arg version of <code>open()</code> and lexical filehandles.</p>\n\n<pre><code>open ( my $in_fh, '&lt;', \"...\") or die(\"Could not open xml file.\");\n</code></pre>\n\n<p>And</p>\n\n<pre><code>open( my $out_fh, '&gt;', $outffile) || die \"ERROR: Can't open the output file $outffile: $!\";\n</code></pre>\n\n<p>Oh, and it's a good idea to standardise on using <code>or</code> or <code>||</code> in those commands.</p>\n"}], "owner": {"reputation": 9, "user_id": 11474629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKkPlJaNSJ0/AAAAAAAAAAI/AAAAAAAAAHI/LTeEkHrPgAI/photo.jpg?sz=128", "display_name": "chandrashekhar goudar", "link": "https://stackoverflow.com/users/11474629/chandrashekhar-goudar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1557755381, "creation_date": 1557392445, "last_edit_date": 1557398887, "question_id": 56055828, "link": "https://stackoverflow.com/questions/56055828/using-perl-to-process-list-of-name-and-details", "title": "Using perl to process list of name and details", "body": "<p>There are two files. one file is list of names. another file is list of names and details. I want to create 3rd file which contains names from 1st file and details(of that name) from 2nd file. Can you please suggest.</p>\n\n<p>Details from 2nd file are delimited by pattern \"list[i]\"(which are names from 1st file) and \"&lt;/reg>\"</p>\n\n<pre><code>#!/usr/intel/bin/perl\n\n\nuse warnings;\nuse strict;\nuse Data::Dumper;\n\n\n\nmy $handle;\nunless (open $handle, \"&lt;:encoding(utf8)\", \"/nfs/fm/disks/fm_nvm_7138/WLRD_LOGIC_users/cgoudarx/willard_b02/chiplevel/verif/testsuites/upf/pss_ret_regs.txt\") {\n   print STDERR \"Could not open file '/nfs/fm/disks/fm_nvm_7138/WLRD_LOGIC_users/cgoudarx/willard_b02/chiplevel/verif/testsuites/upf/pss_ret_regs.txt': $!\\n\";\n   # we return 'undefined', we could also 'die' or 'croak'\n   return undef\n}\nchomp(my @list = &lt;$handle&gt;);\nunless (close $handle) {\n   # what does it mean if close yields an error and you are just reading?\n   print STDERR \"Don't care error while closing '/nfs/fm/disks/fm_nvm_7138/WLRD_LOGIC_users/cgoudarx/willard_b02/chiplevel/verif/testsuites/upf/pss_ret_regs.txt': $!\\n\";\n} \n\nopen ( INPUT, \"/nfs/fm/disks/fm_nvm_7138/WLRD_LOGIC_users/cgoudarx/willard_b02/chiplevel/verif/testsuites/upf/tet.xml\" ) or die(\"Could not open xml file.\");\n\nmy $outffile =\"newlist.xml\";\nopen(FILEOUT2, \"&gt;$outffile\") || die \"ERROR: Can't open the output file $outffile: $!\";\n\nmy $size = @list;\n\nfor (my $i=0; $i &lt; $size; $i++) {\n    while( my $line = &lt;INPUT&gt; )\n    {\n\n        if ( $line =~ m/$list[$i]/) {\n            print FILEOUT2 $line;\n            while( $line = &lt;INPUT&gt;) # print till empty line\n            {\n                last if ( $line =~ m/&lt;\\/reg&gt;/);\n                print FILEOUT2 $line;\n            }\n            print FILEOUT2 $line;\n        };\n    };\n};\n\nclose(INPUT);\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl", "split", "push"], "comments": [{"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1557386697, "post_id": 56053333, "comment_id": 98749159, "body": "actually you dont use your $counter variable. you increment it, but never access it. i guess you wanted to use it as index for your arrays."}, {"owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "edited": false, "score": 1, "creation_date": 1557387026, "post_id": 56053333, "comment_id": 98749311, "body": "This line:  <code>my @values = &quot;aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD&quot;</code>  ... is assigning one scalar value to an array. It&#39;s effectivly putting that scalar value into the first slot of <code>@value</code> array. You may do a <code>split</code> here directly:  <code>my @values = split &#47; &#47;,  &quot;aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD&quot;;</code> Once this is in place, the rest is to take 3 values at a time etc etc."}], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1557387445, "post_id": 56054206, "comment_id": 98749518, "body": "The first solution will put undefined values in the results if the number of items in the original <code>$values</code> is not divisable by 3."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1557387495, "post_id": 56054206, "comment_id": 98749547, "body": "@Silvar, That&#39;s intentional, so it&#39;s would be better to point out that the AoA solution doesn&#39;t do that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1557387186, "last_edit_date": 1557387186, "creation_date": 1557386685, "answer_id": 56054206, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56054206#56054206", "title": "How to split array values into to new separate arrays in Perl?", "body": "<pre><code>my ( @foos, @bars, @quxs );\nmy @values = split(' ', $input);\nwhile (@values) {\n   push @foos, shift(@values);\n   push @bars, shift(@values);\n   push @quxs, shift(@values);\n}\n</code></pre>\n\n<p>The above can also be written as follows:</p>\n\n<pre><code>my ( @foos, @bars, @quxs );\nfor ( my @values = split(' ', $input); @values; ) {\n   push @foos, shift(@values);\n   push @bars, shift(@values);\n   push @quxs, shift(@values);\n}\n</code></pre>\n\n<hr>\n\n<p>Are you sure you want parallel arrays, though? While they can save memory, it's usually hard to work with them, and more error-prone. In an object-dominated landscape, they are virtually never seen.</p>\n\n<p>You could use an AoA:</p>\n\n<pre><code>my @moos;\nmy @values = split(' ', $input);\nwhile (@values) {\n   push @moos, [ splice(@values, 0, 3) ];\n}\n</code></pre>\n\n<p>You could use an AoH:</p>\n\n<pre><code>my @moos;\nmy @values = split(' ', $input);\nwhile (@values) {\n   my %moo; @moo{qw( foo bar qux )} = splice(@values, 0, 3);\n   push @moos, \\%moo;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1561087684, "last_edit_date": 1561087684, "creation_date": 1557387184, "answer_id": 56054338, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56054338#56054338", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p>A rare ocassion where the C-style for loop is suitable, to iterate over every 3rd element</p>\n\n<pre><code>my $string = 'aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD';\n\nmy (@sep1, @sep2, @sep3);\n\nmy @values = split ' ', $string;\n\nfor (my $i=0; $i &lt;= $#values; $i += 3) {\n    push @sep1, $values[$i];\n    push @sep2, $values[$i+1];\n    push @sep3, $values[$i+2];\n}\n</code></pre>\n\n<p>This assumes that the array indeed has all triplets, or better check each element.</p>\n\n<p>But it's normally far nicer to work with a single structure than with a set of parallel arrays. For example, use an array with elements that are array references</p>\n\n<pre><code>use Data::Dump qw(dd);\n\nmy @sep;\n\nfor (my $i=0; $i &lt;= $#values; $i += 3) { \n    for my $j (0..2) { \n        push @{$sep[$j]}, $values[$i+$j]; \n    }\n}\n\ndd \\@sep;\n</code></pre>\n\n<p>where the double iteration can be avoided with a much cleaner</p>\n\n<pre><code>for my $i (0..$#values) { \n    push @{$sep[$i%3]}, $values[$i] \n}\n</code></pre>\n\n<p>which replaces the two loops.</p>\n\n<p>This prints</p>\n\n<pre>\n[\n  [\"aaa\", \"bbb\", \"ccc\", \"ddd\"],\n  [111, 222, 333, 444],\n  [\"AAA\", \"BBB\", \"CCC\", \"DDD\"],\n]\n</pre>\n\n<p>I use <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> to see complex data. An alternative in the core is <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>.</p>\n\n<hr>\n\n<p>And then there are many modules with all kinds of utility routines for work with lists. </p>\n\n<p>For example, using <a href=\"https://metacpan.org/pod/List::MoreUtils#part-BLOCK-LIST\" rel=\"nofollow noreferrer\">part</a> from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> to partition the <code>@values</code> array</p>\n\n<pre><code>my @sep = map { [ @values[@$_] ] } part { $_%3 } 0..$#values;\n</code></pre>\n\n<p>This produces the same <code>@sep</code> with arrayrefs as above.</p>\n\n<p>The <code>part</code> returns a list of arrayrefs, each containing indices since it partitioned the list of indices of <code>@values</code>. Then in <a href=\"https://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> each arrayref is evaluated into its list of indices (<code>@$_</code>), which is used to take the corresponding slice of <code>@values</code>; that list is used to make an arrayref with <code>[]</code>. So <code>map</code> returns a list of arrayrefs, with values partitioned as needed.</p>\n\n<p>For working with references please see tutorial <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and reference <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a></p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1557390041, "creation_date": 1557390041, "answer_id": 56055100, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56055100#56055100", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p>Another version using <code>part</code> from the non-core but very useful <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> module, that partitions up the elements directly:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say state/;\nuse List::MoreUtils qw/part/;\n\nmy $str = \"aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD\";\n\nmy ($sep1, $sep2, $sep3) = part { state $i = 0; $i++ % 3 } split(' ', $str);\n\nsay \"sep1: @$sep1\";\nsay \"sep2: @$sep2\";\nsay \"sep3: @$sep3\";\n</code></pre>\n\n<p>prints out</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sep1: aaa bbb ccc ddd\nsep2: 111 222 333 444\nsep3: AAA BBB CCC DDD\n</code></pre>\n\n<p>The magic here is with <a href=\"https://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\">state</a>, which ends up creating a variable local to the block it's in that retains its value across multiple evaluations of the block.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1557416083, "last_edit_date": 1557416083, "creation_date": 1557415524, "answer_id": 56062780, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56062780#56062780", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p>Another job for <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::UtilsBy 'bundle_by', 'unzip_by';\n\nmy $string = 'aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD';\nmy @vals = split ' ', $string;\nmy ($sep1, $sep2, $sep3) = unzip_by { @$_ } bundle_by { [@_] } 3, @vals;\n\nprint \"sep1: @$sep1\\nsep2: @$sep2\\nsep3: @$sep3\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 2, "last_activity_date": 1557443705, "creation_date": 1557443705, "answer_id": 56068728, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56068728#56068728", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p><a href=\"https://regex101.com/r/nU68Ck/1\" rel=\"nofollow noreferrer\">This expression</a> might help you to get your desired results: </p>\n\n<pre><code>([a-z]+\\s)([0-9]+\\s)([A-Z]+)\n</code></pre>\n\n<p>It has three capturing groups for each of your desired results. You can add or reduce boundaries to it, as you wish, and it might be faster than other methods. </p>\n\n<p><a href=\"https://i.stack.imgur.com/f7dDZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f7dDZ.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Graph</h3>\n\n<p>This graph shows how the expression would work and you can visualize other expressions in this <a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">link</a>: </p>\n\n<p><a href=\"https://i.stack.imgur.com/EdK16.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EdK16.png\" alt=\"enter image description here\"></a></p>\n\n<h3>JavaScript Test</h3>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const regex = /([a-z]+\\s)([0-9]+\\s)([A-Z]+)/gm;\r\nconst str = `aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD`;\r\nconst subst = `\\n$1 &amp; $2 &amp; $3\\n`;\r\n\r\n// The substituted value will be contained in the result variable\r\nconst result = str.replace(regex, subst);\r\n\r\nconsole.log('Substitution result: ', result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<h3>Perl Test</h3>\n\n<p>You can simply use <code>$1</code>, <code>$2</code> and <code>$3</code> and separate your data: </p>\n\n<pre><code>use strict;\n\nmy $str = 'aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD';\nmy $regex = qr/([a-z]+\\s)([0-9]+\\s)([A-Z]+)/mp;\nmy $subst = '';\n\nmy $result = $str =~ s/$regex/$subst/rg;\n\nprint \"The result of the substitution is' $result\\n\";\n</code></pre>\n\n<h3>Performance Test</h3>\n\n<p>This JavaScript snippet shows the performance of that expression using a simple 1-million times <code>for</code> loop.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const repeat = 1000000;\r\nconst start = Date.now();\r\n\r\nfor (var i = repeat; i &gt;= 0; i--) {\r\n\tconst string = 'aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD';\r\n\tconst regex = /([a-z]+\\s)([0-9]+\\s)([A-Z]+)/gm;\r\n\tvar match = string.replace(regex, \"$1\");\r\n}\r\n\r\nconst end = Date.now() - start;\r\nconsole.log(\"YAAAY! \\\"\" + match + \"\\\" is a match \ud83d\udc9a\ud83d\udc9a\ud83d\udc9a \");\r\nconsole.log(end / 1000 + \" is the runtime of \" + repeat + \" times benchmark test. \ud83d\ude33 \");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 2, "last_activity_date": 1557458823, "creation_date": 1557458823, "answer_id": 56070294, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl/56070294#56070294", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p>I like the solutions from @ikegami and @zdim. @zdim's use of <code>part()</code> from <a href=\"https://metaczapn.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a> reminded me of <code>natatime</code>:</p>\n\n<pre><code>my @values = split(' ', \"aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD\"); \nuse List::MoreUtils 'natatime';              \nmy $nata_iter = natatime 3, @values ;\nmy @aoa ;           \nwhile (my @tmp = $nata_iter-&gt;()) { push @aoa, \\@tmp; };\n</code></pre>\n\n<p>Not really a consideration but possibly of interest: by using a temporary array (<code>@tmp</code>) to store the output of the iterator, the original <code>@values</code> remains intact whereas the more straightforward <code>splice()</code> is destructive. </p>\n"}], "owner": {"reputation": 55, "user_id": 11445139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t4dKU.jpg?s=128&g=1", "display_name": "verycuriouscat", "link": "https://stackoverflow.com/users/11445139/verycuriouscat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 1, "accepted_answer_id": 56054338, "answer_count": 6, "score": 3, "last_activity_date": 1561087684, "creation_date": 1557383024, "last_edit_date": 1557443731, "question_id": 56053333, "link": "https://stackoverflow.com/questions/56053333/how-to-split-array-values-into-to-new-separate-arrays-in-perl", "title": "How to split array values into to new separate arrays in Perl?", "body": "<p>I'am a beginner in learning perl.\nWhat I'm trying to do here is to split the array <code>@value</code> and insert it into a new array. my problem is, I do not know exactly how to make my coding to run in loop and get my desired result.</p>\n\n<p>Is it possible to get the desired result using this method or is there any other alternative/way to get the same result?</p>\n\n<p>My code is as below;</p>\n\n<pre><code>my @separated = ();\nmy @separated1 = ();\nmy @separated2 = ();\nmy @separated3 = ();\nmy $counter = 0;\nmy @values = \"aaa 111 AAA bbb 222 BBB ccc 333 CCC ddd 444 DDD\";\n\nforeach (@values) {\nmy @separated = split(' ', $_);\npush @separated1, $separated[0];\npush @separated2, $separated[1];\npush @separated3, $separated[2];\n}\n$counter++\n\nprint \"separated1 = @separated1\\n\";\nprint \"separated2 = @separated2\\n\";\nprint \"separated3 = @separated3\\n\";\n</code></pre>\n\n<p>Result that I got;</p>\n\n<blockquote>\n  <p>separated1 = aaa</p>\n  \n  <p>separated2 = 111</p>\n  \n  <p>separated3 = AAA</p>\n</blockquote>\n\n<p>Desired Result;</p>\n\n<blockquote>\n  <p>separated1 = aaa bbb ccc ddd</p>\n  \n  <p>separated2 = 111 222 333 444</p>\n  \n  <p>separated3 = AAA BB CCC DD</p>\n</blockquote>\n"}]