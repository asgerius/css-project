[{"tags": ["multithreading", "perl", "erlang", "stress-testing", "tsung"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541042094, "post_id": 53093326, "comment_id": 93086001, "body": "Errors like this are usually the result of installing a module using one build of Perl (<code>&#47;usr&#47;bin&#47;perl</code>?), and trying to load it in another (<code>&#47;usr&#47;local&#47;Cellar&#47;perl&#47;5.28.0&#47;bin&#47;perl</code>). Make sure all the modules in the directory pointed by <code>PERL5LIB</code> were installed by the correct <code>perl</code> (e.g. by starting fresh, and making sure to use the right copy of <code>cpan</code>.)."}, {"owner": {"reputation": 67, "user_id": 3177046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051a6d0c06eadcca1c00177c44089270?s=128&d=identicon&r=PG&f=1", "display_name": "griz", "link": "https://stackoverflow.com/users/3177046/griz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541061776, "post_id": 53093326, "comment_id": 93091444, "body": "When I try to uninstall <code>perl</code> I am getting this error: <code>Error: Directory not empty @ dir_s_rmdir - &#47;usr&#47;local&#47;Cellar&#47;perl&#47;5.28.0</code>. I am trying to uninstall it using the command: <code>brew uninstall --ignore-dependencies perl</code>."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3177046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051a6d0c06eadcca1c00177c44089270?s=128&d=identicon&r=PG&f=1", "display_name": "griz", "link": "https://stackoverflow.com/users/3177046/griz"}, "edited": false, "score": 0, "creation_date": 1541681385, "post_id": 53127075, "comment_id": 93304116, "body": "Worked like a charm. Thanks!"}], "tags": [], "owner": {"reputation": 87, "user_id": 3660723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/izQoQ.jpg?s=128&g=1", "display_name": "z5ottu", "link": "https://stackoverflow.com/users/3660723/z5ottu"}, "is_accepted": true, "score": 1, "last_activity_date": 1541202304, "creation_date": 1541202304, "answer_id": 53127075, "question_id": 53093326, "link": "https://stackoverflow.com/questions/53093326/running-tsung-stats-from-tsung-and-getting-symbol-not-found-perl-xs-handshake/53127075#53127075", "title": "Running tsung_stats from tsung and getting Symbol not found: _Perl_xs_handshake error", "body": "<p>I had a similar problem. Instead of <code>sudo cpan Template</code>,</p>\n\n<p>execute the following</p>\n\n<p><code>sudo perl -MCPAN -e'shell'</code></p>\n\n<p>then</p>\n\n<p><code>install Template</code></p>\n\n<p>and</p>\n\n<p><code>quit</code></p>\n\n<p>It works for me</p>\n"}], "owner": {"reputation": 67, "user_id": 3177046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051a6d0c06eadcca1c00177c44089270?s=128&d=identicon&r=PG&f=1", "display_name": "griz", "link": "https://stackoverflow.com/users/3177046/griz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 53127075, "answer_count": 1, "score": 1, "last_activity_date": 1541202304, "creation_date": 1541028906, "question_id": 53093326, "link": "https://stackoverflow.com/questions/53093326/running-tsung-stats-from-tsung-and-getting-symbol-not-found-perl-xs-handshake", "title": "Running tsung_stats from tsung and getting Symbol not found: _Perl_xs_handshake error", "body": "<p>I am trying to produce an output using <code>tsung_stats</code>, however whenever I run the command:</p>\n\n<p><code>/usr/local/Cellar/tsung/1.7.0/lib/tsung/bin/tsung_stats.pl --stats /Users/Chris/.tsung/log/20181031-2312/tsung.log</code></p>\n\n<p>The following happens:</p>\n\n<blockquote>\n  <p>warn, last interval (7) not equal to the first, use the first one (10)</p>\n  \n  <p>No data for Bosh</p>\n  \n  <p>No data for Match</p>\n  \n  <p>No data for Event</p>\n  \n  <p>No data for Async</p>\n  \n  <p>No data for Errors</p>\n  \n  <p>dyld: lazy symbol binding failed: Symbol not found: _Perl_xs_handshake\n  Referenced from:\n  /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/auto/Template/Stash/XS/XS.bundle\n  Expected in: flat namespace</p>\n  \n  <p>dyld: Symbol not found: _Perl_xs_handshake   Referenced from:</p>\n  \n  <p>/usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/auto/Template/Stash/XS/XS.bundle\n  Expected in: flat namespace</p>\n  \n  <p>Abort trap: 6</p>\n</blockquote>\n\n<p>At first it was giving me this error:</p>\n\n<blockquote>\n  <p>warn, last interval (7) not equal to the first, use the first one (10)</p>\n  \n  <p>No data for Bosh</p>\n  \n  <p>No data for Match</p>\n  \n  <p>No data for Event</p>\n  \n  <p>No data for Async</p>\n  \n  <p>No data for Errors</p>\n  \n  <p>Can't locate Template.pm in @INC (you may need to install the Template\n  module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2level\n  /Library/Perl/5.18\n  /Network/Library/Perl/5.18/darwin-thread-multi-2level\n  /Network/Library/Perl/5.18\n  /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level\n  /Library/Perl/Updates/5.18.2\n  /System/Library/Perl/5.18/darwin-thread-multi-2level\n  /System/Library/Perl/5.18\n  /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n  /System/Library/Perl/Extras/5.18 .) at\n  /usr/local/Cellar/tsung/1.7.0/lib/tsung/bin/tsung_stats.pl line 571.</p>\n</blockquote>\n\n<p>After searching the internet, I first ran <code>sudo cpan Template</code> and then set the environment variable <code>PERL5LIB</code> to the path of Perl (i.e. <code>/usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0</code>).</p>\n\n<p>I am stuck and there doesn't seem to be a fix on the internet, what can be done next?</p>\n"}, {"tags": ["perl", "makemaker", "dist-zilla"], "comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1541023392, "post_id": 53092475, "comment_id": 93081867, "body": "My next try tomorrow would be to find all files that were installed by <code>yarn&#47;npm</code> and then add them to the <code>Makefile</code> variable <code>TO_INST_PM</code>. Am I on the right track? Or is there a simpler approach?"}], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1541052235, "post_id": 53094520, "comment_id": 93088019, "body": "I am aware that the installation requires an internet connection but that&#39;s like it is, nothing I can do about it if I need external files."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1541057447, "post_id": 53094520, "comment_id": 93089825, "body": "I have done a quick check, your suggestions will work. You are, of course, right about postamble, I will move the code outside of the method. My example was just meant to reproduce the problem. I already have a <code>META.json</code> and <code>EMM-include.pm</code> is already excluded from the installation. Alien::Build doesn&#39;t seem to fit my use case but that&#39;s another issue. Thanks for an awesome answer!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1541040385, "last_edit_date": 1541040385, "creation_date": 1541039979, "answer_id": 53094520, "question_id": 53092475, "link": "https://stackoverflow.com/questions/53092475/installing-additional-files-at-install-time-with-extutilsmakemaker-distzilla/53094520#53094520", "title": "Installing additional files at install time with ExtUtils::MakeMaker/Dist::Zilla (dzil)", "body": "<p>First, instead of using [Web::FileHeader] to alter your Makefile.PL, replace [MakeMaker] (used by @Basic) with [MakeMaker::Awesome], which allows you to modify Makefile.PL directly, and correctly enables dynamic_config since your distribution needs it. Also, don't give your include-file a .pm extension since it's not a perl module, and exclude it from being gathered into the resulting distribution so it doesn't accidentally get installed.</p>\n\n<pre><code>[@Filter]\n-bundle = @Basic\n-remove = GatherDir\n-remove = MakeMaker\n[Git::GatherDir]\nexclude_filename = EMM-include\n[MakeMaker::Awesome]\nheader_file = EMM-include\n</code></pre>\n\n<p>I strongly suggest using my <a href=\"https://metacpan.org/pod/Dist::Zilla::PluginBundle::Starter\" rel=\"nofollow noreferrer\">@Starter bundle</a> instead of the outdated @Basic, but if not at least add [MetaJSON] so you have modern metadata.</p>\n\n<pre><code>[@Starter::Git]\nrevision = 3\ninstaller = MakeMaker::Awesome\nGit::GatherDir.exclude_filename[] = EMM-include\nMakeMaker::Awesome.header_file = EMM-include\n</code></pre>\n\n<hr>\n\n<p>Regarding what needs to be done at install time. First I will caution that requiring an internet connection to install is not something you can always rely on, nor is having yarn available of course. But the <a href=\"https://metacpan.org/pod/Alien\" rel=\"nofollow noreferrer\">Alien</a> series of modules for installing external libraries does this sort of thing often. Since you don't need to compile this code you probably don't need the whole Alien::Build/Alien::Base setup, but it may turn out to be an easier way to solve your problem than Makefile hacking described below. Basically you would first release an Alien distribution which installs your javascript library if necessary, and then this distribution could depend on that to load the library. If you decide to pursue this direction, check out <a href=\"https://metacpan.org/pod/Alien::Build\" rel=\"nofollow noreferrer\">Alien::Build</a>, and the IRC channel <a href=\"https://kiwiirc.com/nextclient/#irc://irc.perl.org/#native?nick=mc-guest-?\" rel=\"nofollow noreferrer\">#native on irc.perl.org</a>.</p>\n\n<hr>\n\n<p>The postamble section for ExtUtils::MakeMaker is not for running arbitrary code; it's for adding custom rules to the Makefile it generates; this is the way you need to influence the make process. I know very little about Makefiles so I can't help you further here, all I can suggest is to read all of the <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker\" rel=\"nofollow noreferrer\">EUMM docs</a> and note that the postamble is a function from <a href=\"https://metacpan.org/pod/ExtUtils::MM_Any\" rel=\"nofollow noreferrer\">MM_Any</a> which you override to add your text, among other options from MM_Any and MM_Unix. You may be able to find people to help you in this direction on the IRC channel <a href=\"https://kiwiirc.com/nextclient/#irc://irc.perl.org/#toolchain?nick=mc-guest-?\" rel=\"nofollow noreferrer\">#toolchain on irc.perl.org</a>.</p>\n"}], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 53094520, "answer_count": 1, "score": 1, "last_activity_date": 1541040385, "creation_date": 1541022758, "last_edit_date": 1541023184, "question_id": 53092475, "link": "https://stackoverflow.com/questions/53092475/installing-additional-files-at-install-time-with-extutilsmakemaker-distzilla", "title": "Installing additional files at install time with ExtUtils::MakeMaker/Dist::Zilla (dzil)", "body": "<p><strong>tl;dr</strong> I want to ship a <code>package.json</code> with my Perl library, run <code>yarn install</code> (or <code>npm install</code> during the installation) and install the downloaded JavaScript dependencies with the Perl modules.</p>\n\n<p>I have the following <code>dist.ini</code>:</p>\n\n<pre><code>name = Foobar\nversion = 1.2.3\nlicense = Perl_5\ncopyright_holder = Yours Truly\ncopyright_year   = 2018\n\n[@Filter]\n-bundle = @Basic\n-remove = GatherDir\n[Git::GatherDir]\n\n[Web::FileHeader]\nheader_filename = EMM-include.pm\nfile_match = ^Makefile\\.PL$\n</code></pre>\n\n<p>The file <code>EMM-include.pm</code> contains a <code>MY::postamble</code> method:</p>\n\n<pre><code>package MY;\n\nuse strict;\n\nuse Cwd qw(abs_path);\nuse File::Spec;\n\nsub postamble {\n    my ($self) = @_;\n\n    my $here = Cwd::abs_path();\n    my $libdir = File::Spec-&gt;catdir($here, 'lib', 'Foobar');\n    chdir $libdir or die;\n    0 == system 'yarn', 'install' or die;\n    chdir $here or die;\n\n    return '';\n}\n</code></pre>\n\n<p>The plug-in <code>[Web::FileHeader]</code> takes the file and patches it to the beginning of <code>Makefile.PL</code>.</p>\n\n<p>Then there is a <code>lib/Foobar/package.json</code>:</p>\n\n<pre><code>{\n  \"name\": \"foobar\",\n  \"version\": \"1.2.3\",\n  \"main\": \"index.js\",\n  \"dependencies\": {\n    \"ajv\": \"^6.5.4\"\n  }\n}\n</code></pre>\n\n<p>The <code>MY::postamble</code> section from <code>EMM-include.pm</code> invokes <code>yarn install</code> (replace it with <code>npm install</code> if you don't have <code>yarn</code>) and populate the directory <code>lib/Foobar/node_modules</code> with <code>ajv</code> and its dependencies.</p>\n\n<p>Finally, there must be a module <code>lib/Foobar.pm</code>:</p>\n\n<pre><code>package Foobar;\n# ABSTRACT: Just a test.\n1;\n</code></pre>\n\n<p>That <em>almost</em> works as intended: The distribution can be created with <code>dzil build</code>. In the distribution directory, <code>perl Makefile.PL</code> invokes <code>yarn install</code>, the directory <code>lib/Foobar/node_modules</code> gets populated but the files in there are not installed with <code>make install</code>.</p>\n\n<p>If I run <code>perl Makefile.PL</code> a second time, everything works, the JavaScript dependencies make it into <code>blib/</code> and <code>make install</code> would install the JavaScript modules alongside the Perl modules.</p>\n\n<p>Shipping the JavaScript dependencies with the distribution is not an option. They are already too many and they may have conflicting licenses (I am using GPLv3 here). Downloading the deps at runtime, after the installation will mostly fail because of missing privileges.</p>\n\n<p>True, this has not that much to do with <code>Dist::Zilla</code>, it's rather a problem with <code>ExtUtils::MakeMaker</code>. But I am actually using <code>Dist::Zilla</code> here.</p>\n\n<p>In case it matters, the real distribution is <a href=\"https://github.com/gflohr/qgoda\" rel=\"nofollow noreferrer\">https://github.com/gflohr/qgoda</a> and the last commit at the time of this writing is <a href=\"https://github.com/gflohr/qgoda/commit/3f34a3dfec8da665061432c3a8f7bd8eef28b95e\" rel=\"nofollow noreferrer\">https://github.com/gflohr/qgoda/commit/3f34a3dfec8da665061432c3a8f7bd8eef28b95e</a>.</p>\n"}, {"tags": ["perl", "yaml"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1541022352, "post_id": 53092210, "comment_id": 93081531, "body": "What library do you use?"}, {"owner": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541022412, "post_id": 53092210, "comment_id": 93081560, "body": "I am using Tiny"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541022492, "post_id": 53092210, "comment_id": 93081588, "body": "I can&#39;t reproduce your output, I&#39;m getting <code>map\\n[abcd.txt]\\n[efgh.txt]\\n[ijkl.txt]</code> back."}, {"owner": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541022791, "post_id": 53092210, "comment_id": 93081677, "body": "The beginning of the yaml file is as below. Looks like yamlFile: was missed at the top"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1541022987, "post_id": 53092210, "comment_id": 93081743, "body": "Please, update the question instead of describing the fixes in comments."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "edited": false, "score": 0, "creation_date": 1541086439, "post_id": 53102896, "comment_id": 93104162, "body": "Can&#39;t use string (&quot;ijkl.txt&quot;) as a HASH ref while &quot;strict refs&quot; in use"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "edited": false, "score": 0, "creation_date": 1541088065, "post_id": 53102896, "comment_id": 93105136, "body": "My guess is that it is this statement: <code>my $elems = $map_hash-&gt;{$conf}</code> that gives the error. Can you check if that is correct?"}, {"owner": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "edited": false, "score": 0, "creation_date": 1541088763, "post_id": 53102896, "comment_id": 93105515, "body": "The error is occurring at:  for my $data ( keys %$map1 )"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "edited": false, "score": 0, "creation_date": 1541089156, "post_id": 53102896, "comment_id": 93105727, "body": "Then <code>$map1</code> is most likely not a hash reference. We have to find out why. So then we check the contents of <code>$elems</code> two lines above. It should be an array ref of two elements, each a hash reference. But according to what you say, it seems like it has become an array ref of strings instead. Please check if that is the case."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1541081017, "creation_date": 1541081017, "answer_id": 53102896, "question_id": 53092210, "link": "https://stackoverflow.com/questions/53092210/parsing-yaml-file-using-perl/53102896#53102896", "title": "Parsing YAML file using Perl", "body": "<p>Here is an example of how to access the items in the YAML config file:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse YAML qw(LoadFile);\n\nmy $config = LoadFile('config.yml');   \nmy $map_hash = $config-&gt;{yamlFile}{map};    \nfor my $conf ( keys %$map_hash ) {    \n    say $conf;   \n    my $elems = $map_hash-&gt;{$conf};\n    for my $map1 ( @$elems ) {    \n        for my $data ( keys %$map1 ) {\n            say \"$data:\", $map1-&gt;{$data};\n        }\n    }    \n}    \n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>[ijkl.txt]\nname:Annie\ncity:Chicago\n[abcd.txt]\nname:John\ncity:Omaha\n[efgh.txt]\nname:Sandra\ncity:Columbus\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10588106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50e1dcc9322197e7a1281d03f225a5?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10588106/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541081017, "creation_date": 1541021371, "last_edit_date": 1541077870, "question_id": 53092210, "link": "https://stackoverflow.com/questions/53092210/parsing-yaml-file-using-perl", "title": "Parsing YAML file using Perl", "body": "<p>I need some help in parsing the following config.yml file:</p>\n\n<pre><code>yamlFile:    \n    map:    \n        \"[abcd.txt]\":    \n            - name: John    \n            - city: Omaha    \n        \"[efgh.txt]\":    \n            - name: Sandra    \n            - city: Columbus    \n        \"[ijkl.txt]\":    \n            - name: Annie   \n            - city: Chicago    \n</code></pre>\n\n<p>I am using the following script to parse.    </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $config = LoadFile('config.yml');   \nuse Data::Dumper;    \n\nfor my $conf ( keys %$config ) {    \n    print \"$conf\\n\";   \n    my $map = $config-&gt;{$conf};    \n    for my $map1 ( keys %$map ) {    \n        print \"$map1\\n\";    \n    }    \n}    \n</code></pre>\n\n<p>This prints the following:    </p>\n\n<pre><code>yamlFile    \nmap    \n</code></pre>\n\n<p>Since the keys of $map1 are different, how do I proceed further to get the name and city of each element?</p>\n"}, {"tags": ["perl", "deprecated", "deprecation-warning"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541014989, "post_id": 53090688, "comment_id": 93078691, "body": "Is there a reason that you cannot try and see what happens? Change the module as you say, and replace calls that you can tell need replacing. Then if problems come up you can show that in the question -- along with the code that need be adapted."}, {"owner": {"reputation": 49, "user_id": 947860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9007c998e3b924deebbe9ebb98d4db6?s=128&d=identicon&r=PG", "display_name": "Mutagon", "link": "https://stackoverflow.com/users/947860/mutagon"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541015557, "post_id": 53090688, "comment_id": 93078976, "body": "@zdim, I could possibly do that.  I am wishing that I had a simple easy verification test to validate the results."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541015753, "post_id": 53090688, "comment_id": 93079059, "body": "Well, sure, I&#39;ve no idea how to validate your code and its uses, of course.  But then I cannot have much of an idea of how to do what you ask either, without seeing the code.  There is no blanket &quot;solution&quot; to replacing modules (except for those which are drop-in replacements)."}, {"owner": {"reputation": 49, "user_id": 947860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9007c998e3b924deebbe9ebb98d4db6?s=128&d=identicon&r=PG", "display_name": "Mutagon", "link": "https://stackoverflow.com/users/947860/mutagon"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541015956, "post_id": 53090688, "comment_id": 93079155, "body": "Right.  I am not asking for help with the test.  Just for suggestions for replacing find.pl.  Since this module has disappeared, it seemed to me that someone else likely has had to make a change from find.pl to something else.  I am hoping to tap into that experience of others if it exists here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541016478, "post_id": 53090688, "comment_id": 93079392, "body": "Got that; i still recommend that you just do it. I looked and found a couple of links, <a href=\"https://patchwork.openembedded.org/patch/29989/\" rel=\"nofollow noreferrer\">like this one</a>, which seem to show how that <code>find.pl</code> relates to <code>File::Find</code>.  However, I have no idea whether this is really &quot;your&quot; <code>find.pl</code> and whether it will work.  Since you obviously have the file on your system, look it over and see what subs it offers then go through your code to find which of those it uses.  Then replace them.  Or wait for someone to possibly come along and says, &#39;oh this is what you need...&#39;"}, {"owner": {"reputation": 49, "user_id": 947860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9007c998e3b924deebbe9ebb98d4db6?s=128&d=identicon&r=PG", "display_name": "Mutagon", "link": "https://stackoverflow.com/users/947860/mutagon"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541016800, "post_id": 53090688, "comment_id": 93079540, "body": "@zdim, thanks for that example.  Looks like a fairly simple replacement of <code>find(x)</code> with <code>File::Find::find(\\&amp;wanted, x)</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541016890, "post_id": 53090688, "comment_id": 93079571, "body": "Well, great if that helps ... but I&#39;d be weary of bluntly applying a recipe like that to my code.  Use it, sure (if that&#39;s that), but please also review in detail <i>your</i> actual code, both that <code>find.pl</code> on your system and the code that uses it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541017895, "post_id": 53090688, "comment_id": 93079903, "body": "From what I can tell, that link provides a fix for a situation where an old <code>find.pl</code> disappeared while some tools need it; so they restored its operation using <code>File::Find</code>, supposedly knowing how their <code>find.pl</code> worked. But will that work for <i>your</i> situation?  What is the <code>find.pl</code> that they are dealing with?  I&#39;m afraid that it&#39;d be best that you go through all relevant code and check, and perhaps write a separate test for your replacement code against your <code>find.pl</code> operation.  So to ensure you don&#39;t end up with <i>nasty</i> bugs. A price to pay for deferred maintenance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541042315, "post_id": 53090688, "comment_id": 93086045, "body": "Re &quot;<i>The find.pl module is no longer available in newer versions of Perl.</i>&quot;, Not true. You can find it as part of the <a href=\"https://metacpan.org/pod/Perl4::CoreLibs\" rel=\"nofollow noreferrer\">Perl4-CoreLibs</a> distribution. That said, it would be wise to move away from it in favour of <a href=\"http://search.cpan.org/perldoc/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>."}], "owner": {"reputation": 49, "user_id": 947860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9007c998e3b924deebbe9ebb98d4db6?s=128&d=identicon&r=PG", "display_name": "Mutagon", "link": "https://stackoverflow.com/users/947860/mutagon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541014161, "creation_date": 1541014161, "question_id": 53090688, "link": "https://stackoverflow.com/questions/53090688/how-to-replace-perls-deprecated-find-pl", "title": "How to replace Perl&#39;s deprecated find.pl", "body": "<p>I am attempting to update legacy Perl code that is using find.pl via \"require\". The find.pl module is no longer available in newer versions of Perl. </p>\n\n<p>I have this notion that I can replace a \"require\" of find.pl with a \"use\" of File::Find, but I am not sure how to make the transition. </p>\n\n<p>Also, I am not sure what functions other than \"find()\" might be affected.</p>\n\n<p>I did web and SO searches for find.pl and all I got was acknowledgement of the deprecation/removal of the module and various side effects of that.  I did not find help for converting code that uses find.pl.</p>\n\n<p>I appreciate any tips and suggestions for making this transition.</p>\n"}, {"tags": ["c++", "regex", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541012386, "post_id": 53090240, "comment_id": 93077504, "body": "Most C++ standard library regex implementations are not known for their speed. Stick with Perl, or use a more optimized/better performing C++ regex library."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1541012579, "post_id": 53090240, "comment_id": 93077556, "body": "Are you compiling C++ with optimizations enabled? If you&#39;re matching the entire log line, try using <code>regex_match</code> instead of <code>regex_search</code>."}, {"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541014477, "post_id": 53090240, "comment_id": 93078424, "body": "Do you know any optimized regex library? @Shawn No, I am just compiling <code>g++ log.cpp</code> @Praetorian Okay, let me try. But still, if I had to use regex_search only, is there any way to perform at par with perl?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1541018655, "post_id": 53090240, "comment_id": 93080168, "body": "@Praetorian If the bottleneck is the regexp matching, optimizing his code is not likely to make too much difference."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1541021044, "post_id": 53090240, "comment_id": 93081076, "body": "Your C++ code isn&#39;t valid."}, {"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1541053189, "post_id": 53090240, "comment_id": 93088324, "body": "@NetMage with due respect sir, this is just a part of the code to make things crisp and clear, and the code is running fine. :D"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1541106408, "post_id": 53090240, "comment_id": 93113973, "body": "Can you explain where the close brace for the <code>if</code> is in your sample code? What about the &quot;statement&quot; <code>count++</code> that doesn&#39;t end in a semicolon? Did you copy and paste it into a C++ compiler?"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1541110346, "post_id": 53090240, "comment_id": 93115381, "body": "Are you able to change the regex engine you&#39;re using? Something like <a href=\"https://www.pcre.org/original/doc/html/pcrecpp.html\" rel=\"nofollow noreferrer\">pcrecpp</a> which implements PCRE for C++ might make a difference. Keep in mind this type of data crunching is what Perl was built for, so matching Perl&#39;s speed vs making your C++ regex faster may be two different goals. Edit: this <a href=\"https://stackoverflow.com/questions/41481811/why-pcre-regex-is-much-faster-than-c11-regex\">stackoverflow question</a> may add some perspective."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "edited": false, "score": 0, "creation_date": 1541053617, "post_id": 53093811, "comment_id": 93088466, "body": "Okay, I need to look up on re2c or ragel tool. Kindly look in my edit, I have shared the time taken to read file and time taken to read and use regex. But the point is, I don&#39;t think reading the log file is a bottleneck here. Thanks !"}], "tags": [], "owner": {"reputation": 571, "user_id": 7560598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13db5a7a1175e286303bd4d79ca3d4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Sherlock", "link": "https://stackoverflow.com/users/7560598/kelvin-sherlock"}, "is_accepted": true, "score": 2, "last_activity_date": 1541033308, "creation_date": 1541033308, "answer_id": 53093811, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl/53093811#53093811", "title": "C++ regex_search vs regex matching in perl", "body": "<p>Use a code generator tool like <a href=\"http://re2c.org\" rel=\"nofollow noreferrer\">re2c</a> or <a href=\"http://www.colm.net/open-source/ragel/\" rel=\"nofollow noreferrer\">ragel</a> to compile your regular expression into C/C++ code (which can be optimized by the compiler).</p>\n\n<p>Alternatively, <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/regex/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost.Regex</a> -- which was the basis for std::regex -- may be faster than your std::regex implementation.</p>\n\n<p>Also, the bottleneck might be I/O rather than regular expressions.  <a href=\"https://stackoverflow.com/questions/9371238/why-is-reading-lines-from-stdin-much-slower-in-c-than-python?rq=1\">Why is reading lines from stdin much slower in C++ than Python?</a></p>\n"}, {"comments": [{"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 2, "creation_date": 1562237141, "post_id": 56885873, "comment_id": 100319569, "body": "This does not provide an answer to the question. Once you have sufficient reputation you will be able to comment on any post; instead, provide answers that don&#39;t require clarification from the asker."}], "tags": [], "owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "is_accepted": false, "score": 0, "last_activity_date": 1562235853, "creation_date": 1562235853, "answer_id": 56885873, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl/56885873#56885873", "title": "C++ regex_search vs regex matching in perl", "body": "<p>On using boost::regex c++ code flies like a jet. \nThe std::regex is not optimised and made for performance. </p>\n"}], "owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 1, "accepted_answer_id": 53093811, "answer_count": 2, "score": 1, "last_activity_date": 1562235853, "creation_date": 1541012150, "last_edit_date": 1541053522, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl", "title": "C++ regex_search vs regex matching in perl", "body": "<p>I have a log file, which consists of 400k log lines.\nI found out, that my c++ code is very slow in comparison to perl code. \nSo I made a simple iteration over my log file and used regex of c++ and of perl. Perl scripts executes very fast while on the other hand c++ is taking time. </p>\n\n<p>In c++ i have in use <code>#include&lt;regex&gt;</code> library. Whereas in perl, regex can be used directly. \nHow can I make c++ code as efficient as perl? Since perl's implementation is by C only.  </p>\n\n<pre><code>regex log_line(\"(\\\\d{1,2}\\\\/[A-Za-z]{3}\\\\/\\\\d{1,4}):(\\\\d{1,2}:\\\\d{1,2}:\\\\d{1,2}).*?\\\".*?[\\\\s]+(.*?)[\\\\s\\?].*?\\\"[\\\\s]+([\\\\d]{3})[\\\\s]+(\\\\d+)[\\\\s]+\\\"(.*?)\\\"[\\\\s]+\\\"(.*?)\\\"[\\\\s]+(\\\\d+)\");\nstring line;\nint count =0;\nsmatch match;\nwhile(getline(logFileHandle, line){\n    if(regex_search(line , match , log_line)==true){\n    count++\n}\n\n\nopen(N==LOG_FILE,\"&lt;$log_file_location\");\n        my $count=0;\n        while($thisLine = &lt;=LOG_FILE&gt;){\n            if((($datePart, $time, $requestUrl, $status, $bytesDelivered, $httpReferer, $httpUserAgent, $requestReceived) = $thisLine =~ /(\\d{1,2}\\/[A-Za-z]{3}\\/\\d{1,4}):(\\d{1,2}:\\d{1,2}:\\d{1,2}).*?\\\".*?[\\s]+(.*?)[\\s\\?].*?\\\"[\\s]+([\\d]{3})[\\s]+(\\d+)[\\s]+\\\"(.*?)\\\"[\\s]+\\\"(.*?)\\\"[\\s]+(\\d+)/o) == 8){\n                $count++;\n            }\n        }\n</code></pre>\n\n<p>I'm afraid, if my question is not in the right format or something is missing let me know. Thanks. </p>\n\n<p><strong>EDIT 1</strong>\nSo I used <em>chrono</em> library in c++ to find out the time taken. Below is the output result. I took a sample of log file to make things easy. \nSimply reading the log file and counting no. of lines takes 57 ms. When regex_search is used it takes a whopping 2462 ms for the same sample log file.</p>\n\n<pre><code>No of Lines27399\nWith regex + logfileRead\nTime taken by function: 2462 milliseconds\nNo of Lines27399\nWith just simple logfileRead\nTime taken by function: 57 milliseconds\n</code></pre>\n"}, {"tags": ["regex", "linux", "perl", "grep"], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 1379714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0219a54efee1023b43eaf2657ac898f5?s=128&d=identicon&r=PG", "display_name": "stena", "link": "https://stackoverflow.com/users/1379714/stena"}, "is_accepted": false, "score": 1, "last_activity_date": 1540999420, "creation_date": 1540999420, "answer_id": 53086849, "question_id": 53086715, "link": "https://stackoverflow.com/questions/53086715/get-capture-group-and-line-before-match-using-grep/53086849#53086849", "title": "Get Capture Group and Line before Match using Grep", "body": "<p>I am afraid this is impossible only using grep.\nThe reason is, that -o disables -B.</p>\n\n<blockquote>\n  <p>Print NUM lines of leading context before matching lines. Places a line containing a group separator (--) between contiguous groups of matches. With the -o or --only-matching option, this has no effect and a warning is given.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "edited": false, "score": 0, "creation_date": 1541001341, "post_id": 53087142, "comment_id": 93071869, "body": "The <code>awk</code> command you showed me works for the example but my file is actually more complicated. I added a follow up question in the EDIT. Can you take a look?"}, {"owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "edited": false, "score": 0, "creation_date": 1541001606, "post_id": 53087142, "comment_id": 93072035, "body": "added. I tried to give an simple example close to my actual file"}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "reply_to_user": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "edited": false, "score": 2, "creation_date": 1541002568, "post_id": 53087142, "comment_id": 93072642, "body": "@cooldood3490 - you&#39;d just have to change capitalisation and remove the anchors <code>^</code> and <code>$</code> from the regex. (replace them w/ <code>.*</code>)"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "edited": false, "score": 1, "creation_date": 1541003079, "post_id": 53087142, "comment_id": 93072956, "body": "@cooldood3490: Sorry I had to step away for some work. Answer updated."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1541003062, "last_edit_date": 1541003062, "creation_date": 1541000266, "answer_id": 53087142, "question_id": 53086715, "link": "https://stackoverflow.com/questions/53086715/get-capture-group-and-line-before-match-using-grep/53087142#53087142", "title": "Get Capture Group and Line before Match using Grep", "body": "<p>You may use this <code>awk</code>:</p>\n\n<pre><code>awk '/FOO.+BAR/{gsub(/.*FOO|BAR.*/, \"\"); print p ORS $0} {p=$0}' file\n</code></pre>\n\n<p></p>\n\n<pre><code>&gt;reference1\nHAPPY\n&gt;reference2\nBIRTHDAY\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 5, "last_activity_date": 1541001746, "creation_date": 1541001746, "answer_id": 53087601, "question_id": 53086715, "link": "https://stackoverflow.com/questions/53086715/get-capture-group-and-line-before-match-using-grep/53087601#53087601", "title": "Get Capture Group and Line before Match using Grep", "body": "<p>Grep solution</p>\n\n<pre><code>grep -zPo '(foo)\\K(\\w+(?=bar))|.*(?=\\n(?1)(?2))' | tr '\\0' '\\n'\n</code></pre>\n\n<p>Perl solution</p>\n\n<pre><code>perl -nE '/^foo(.*)bar$/&amp;&amp;say$p.$1;$p=$_'\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 53087142, "answer_count": 3, "score": -1, "last_activity_date": 1541023943, "creation_date": 1540998999, "last_edit_date": 1541023943, "question_id": 53086715, "link": "https://stackoverflow.com/questions/53086715/get-capture-group-and-line-before-match-using-grep", "title": "Get Capture Group and Line before Match using Grep", "body": "<p>Suppose I have a file called <code>'test.txt'</code>:</p>\n\n<pre><code>&gt;reference1\nfooHappybar\n&gt;reference2\nfooBirthdaybar\n</code></pre>\n\n<p>I need a grep command that will capture the string between <code>foo</code> and <code>bar</code>, and the line directly above the match. The command should result in the following output:</p>\n\n<pre><code>&gt;reference1\nHappy\n&gt;reference2\nBirthday\n</code></pre>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>grep -oP 'foo\\K\\w+(?=bar)' test.txt\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>Happy\nBirthday\n</code></pre>\n\n<p>I know that <code>grep -B 1</code> outputs the match and line before the match. I tried: </p>\n\n<pre><code>grep -oP -B 1 'foo\\K\\w+(?=bar)' test.txt\n</code></pre>\n\n<p>But that doesn't work.</p>\n\n<p>Any guidance is appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>How would the <code>awk</code> command change if I had this file instead?</p>\n\n<pre><code>&gt;reference1\nAGTCTGCAFOOHAPPYBARGTACAC\n&gt;reference2\nGTACAFOOBIRTHDAYBARGACCAT\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>&gt;reference1\nHAPPY\n&gt;reference2\nBIRTHDAY\n</code></pre>\n"}, {"tags": ["perl", "email", "email-headers"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1540980488, "post_id": 53080403, "comment_id": 93058814, "body": "Have you looked at Encode&#39;s source code yet to try to pin down when a change was made that introduced this new behaviour?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540981636, "post_id": 53080403, "comment_id": 93059441, "body": "At least in Encode v2.84, the &quot;old&quot; behaviour of not encoding <code>To:</code> was present. But the documentation and behaviour changed, and it (now) says _However, it cannot be used directly for the whole header with the field name or for the structured header fields like <code>From</code>, <code>To</code>, <code>Cc</code>, <code>Message-Id</code>, etc... _ , so my recommendation is you review your code and adapt to it. Diff from 2.84 to current: <a href=\"https://metacpan.org/diff/file?target=DANKOGAI/Encode-2.98/lib%2FEncode%2FMIME%2FHeader.pm&amp;source=DANKOGAI%2FEncode-2.84%2Flib%2FEncode%2FMIME%2FHeader.pm\" rel=\"nofollow noreferrer\">metacpan.org/diff/file?target=DANKOGAI/Encode-2.98/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1540986786, "creation_date": 1540986786, "answer_id": 53082736, "question_id": 53080403, "link": "https://stackoverflow.com/questions/53080403/mime-encoding-of-mail-header-lines-with-perl-broken-in-5-26/53082736#53082736", "title": "Mime encoding of mail header lines with Perl broken in 5.26", "body": "<p>The output in 5.16.2 doesn't follow the <a href=\"https://www.ietf.org/rfc/rfc2822.txt\" rel=\"nofollow noreferrer\">RFC2822</a> and only Perl can parse it back to the original header.</p>\n\n<p>Use <a href=\"http://p3rl.org/Email::MIME::Header::AddressList\" rel=\"nofollow noreferrer\">Email::MIME::Header::AddressList</a> instead:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse utf8;\n\nuse Email::MIME::Header::AddressList;\n\nmy $unicode_addresses = 'Bl\u00f6dmann &lt;guru@sisis.de&gt;, Gro\u00dfmann &lt;guru@example.com&gt;';\nmy $mime_encoded_addresses = 'Email::MIME::Header::AddressList'\n    -&gt;from_string($unicode_addresses)\n    -&gt;as_mime_string();\n\nprint \"To: $mime_encoded_addresses\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>To: =?UTF-8?B?QmzDtmRtYW5u?= &lt;guru@sisis.de&gt;, =?UTF-8?B?R3Jvw59tYW5u?= &lt;guru@example.com&gt;\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/Encode::MIME::Header\" rel=\"nofollow noreferrer\">Encode::MIME::Header</a> on how to use Encode with MIME-* properly.</p>\n"}], "owner": {"reputation": 109, "user_id": 6117378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b32Vj.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/6117378/guru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540986786, "creation_date": 1540978962, "question_id": 53080403, "link": "https://stackoverflow.com/questions/53080403/mime-encoding-of-mail-header-lines-with-perl-broken-in-5-26", "title": "Mime encoding of mail header lines with Perl broken in 5.26", "body": "<p>We use Perl to encode correct mail header lines. With the new version v5.26.2 we encounter the following problem, here simplified in a few lines:</p>\n\n<pre><code>$ cat mime.pl\n\nuse strict;\nuse utf8;\nuse Encode;\n\nprint \"$^V\", \"\\n\";\nmy $encoded = Encode::encode('MIME-Q', 'To: Bl\u00f6dmann &lt;guru@sisis.de&gt;');\nprint \"$encoded\", \"\\n\";\n</code></pre>\n\n<p>v5.16.2:</p>\n\n<pre><code>$ /usr/local/sisis-pap/perl5.16.2/bin/perl mime.pl\nv5.16.2\nTo:=?UTF-8?Q?=20Bl=C3=B6dmann=20?=&lt;guru@sisis.de&gt;\n</code></pre>\n\n<p>v5.26.2:</p>\n\n<pre><code>$ /usr/local/sisis-pap/bin/perl mime.pl\nv5.26.2\n=?UTF-8?Q?To=3A_Bl=C3=B6dmann_=3Cguru=40sisis=2Ede=3E?=\n</code></pre>\n\n<p>i.e. with v5.26.2 the full line is encoded as quoted printable (and will not be understood by sendmail. In v5.16.2 only the word \"Bl\u00f6dman\" with the UTF-8 German Umlaut was encoded, the mail addr itself was left in peace.</p>\n\n<p>How is this supposed to be fixed?</p>\n"}, {"tags": ["linux", "perl", "nagios", "icinga"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1540981794, "post_id": 53077200, "comment_id": 93059528, "body": "I don&#39;t understand the question. You have the source code so you know how it is calculated."}, {"owner": {"reputation": 2458, "user_id": 2136297, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IcIiZ.jpg?s=128&g=1", "display_name": "satch_boogie", "link": "https://stackoverflow.com/users/2136297/satch-boogie"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1540984684, "post_id": 53077200, "comment_id": 93061085, "body": "@jww  i know nothing about perl language so i posted source code for reference"}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 0, "last_activity_date": 1540991218, "creation_date": 1540991218, "answer_id": 53084091, "question_id": 53077200, "link": "https://stackoverflow.com/questions/53077200/how-is-memory-used-value-derived-in-check-snmp-mem-pl/53084091#53084091", "title": "How is memory used value derived in check_snmp_mem.pl?", "body": "<p>Looking through the source code, it mentions <code>ram_used</code> for example in this line:</p>\n\n<pre><code>  $n_output .= \" | ram_used=\" . ($$resultat{$nets_ram_total}-$$resultat{$nets_ram_free}-$$resultat{$nets_ram_cache}).\";\";\n</code></pre>\n\n<p>This strongly suggests that <code>ram_used</code> is calculated as the difference of the total RAM and the free RAM and the RAM used for cache. These values are retrieved via the following SNMP ids:</p>\n\n<pre><code>my $nets_ram_free   = \"1.3.6.1.4.1.2021.4.6.0\";  # Real memory free\nmy $nets_ram_total  = \"1.3.6.1.4.1.2021.4.5.0\";  # Real memory total\nmy $nets_ram_cache      = \"1.3.6.1.4.1.2021.4.15.0\"; # Real memory cached\n</code></pre>\n\n<p>I don't know how they correlate to the output of <code>free</code>. The difference in free memory reported by <code>free</code> and to Icinga is 48136, so maybe you can find that number somewhere.</p>\n"}], "owner": {"reputation": 2458, "user_id": 2136297, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IcIiZ.jpg?s=128&g=1", "display_name": "satch_boogie", "link": "https://stackoverflow.com/users/2136297/satch-boogie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 53084091, "answer_count": 1, "score": -2, "last_activity_date": 1540991218, "creation_date": 1540965753, "question_id": 53077200, "link": "https://stackoverflow.com/questions/53077200/how-is-memory-used-value-derived-in-check-snmp-mem-pl", "title": "How is memory used value derived in check_snmp_mem.pl?", "body": "<p>I was configuring icinga2 to get memory used information from one linux client using script at <a href=\"http://nagios.manubulon.com/check_snmp_mem.pl\" rel=\"nofollow noreferrer\">check_snmp_mem</a>.pl . Any idea how the memory used is derived in this script ?</p>\n\n<p>Here is free command output</p>\n\n<pre><code># free\n              total        used        free      shared  buff/cache   available\nMem:         500016       59160       89564        3036      351292      408972\nSwap:       1048572        4092     1044480\n</code></pre>\n\n<p>where as the performance data shown in icinga dashboard is</p>\n\n<pre><code>    Label   Value        Max             Warning     Critical\nram_used    137,700.00   500,016.00     470,015.00   490,016.00\nswap_used   4,092.00     1,048,572.00   524,286.00   838,858.00\n</code></pre>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540967277, "post_id": 53077043, "comment_id": 93052588, "body": "Is <code>test.pl</code> a module (which would normally have <code>.pm</code> extension), with a collection of subroutines etc, or really an executable script?"}, {"owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540973736, "post_id": 53077043, "comment_id": 93055222, "body": "@zdim its not a module, just a script which contains only arrays and variables with some predefined values."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540974024, "post_id": 53077043, "comment_id": 93055360, "body": "<code>How to import a perl script using &quot;require&quot; from remote server in perl?</code> What error message do you get when importing the script from the server?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541015533, "post_id": 53077043, "comment_id": 93078964, "body": "@kart1657  If that script doesn&#39;t really <i>do</i> anything, can you not make it into a simple module? It&#39;ll make everything far better.  You will then still need to get the file from that remote host to where you run, but then you&#39;ll be dealing with a normal module that can be <code>use</code>d (or <code>require</code>d if you acquire it at run time from the script that uses it)."}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1541114291, "post_id": 53077043, "comment_id": 93116491, "body": "It sounds like what you really want is a place where you can store configuration data for your scripts. Have you tried looking at JSON objects? The syntax is very similar to Perl arrayrefs and hashrefs, and they&#39;re easy to load into Perl (See <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON on metacpan</a> ). JSON was made to send to/from a server using HTTP requests and you can store the data in a text file or using a dedicated service like <a href=\"http://couchdb.apache.org/\" rel=\"nofollow noreferrer\">CouchDB</a>."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1541113705, "post_id": 53082981, "comment_id": 93116327, "body": "Just wanted to add that one of the reasons you can&#39;t remotely reference a module is because namespaces in Perl are directly tied to the file path. Perl uses a special variable called <code>@INC</code> that stores the directories Perl is allowed to look in for modules. So if you have <code>use Foo::Bar;</code> in the script and one of the paths in @INC is &#39;/usr/share/perl&#39;, Perl will literally look for &quot;/usr/share/perl/Foo/Bar.pm&quot;. If the module/library/script path can&#39;t be extrapolated from @INC then you need to tell Perl where to look, such as <code>use lib</code> or <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a>."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 2, "last_activity_date": 1540992401, "last_edit_date": 1540992401, "creation_date": 1540987650, "answer_id": 53082981, "question_id": 53077043, "link": "https://stackoverflow.com/questions/53077043/importing-a-library-perl-script-using-require-from-remote-server/53082981#53082981", "title": "Importing a library perl script using &quot;require&quot; from remote server", "body": "<p>Generally you can't successfully <code>require</code> anything that does not exist on the local machine, either in memory or as a file. So your question will revolve on how to get read access on the remote machine and how to copy the data in the test.pl file onto your machine.</p>\n\n<p>There are some modules like <a href=\"https://metacpan.org/pod/The::Net\" rel=\"nofollow noreferrer\">The::Net</a> or <a href=\"https://metacpan.org/pod/lazy\" rel=\"nofollow noreferrer\">lazy</a> , which automate the download, installation and then local use of code for you, but as your situation is special to you, you will have to find the way yourself how to copy the data in <code>test.pl</code> to your local machine and then <code>eval</code> it.</p>\n\n<p>Maybe mounting the remote file system is the easiest approach.</p>\n"}], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540992401, "creation_date": 1540964853, "question_id": 53077043, "link": "https://stackoverflow.com/questions/53077043/importing-a-library-perl-script-using-require-from-remote-server", "title": "Importing a library perl script using &quot;require&quot; from remote server", "body": "<p>I have a library perl script called <code>/root/kart/test.pl</code> and this library script is getting imported as part of <code>main.pl</code> script.</p>\n\n<p><strong>sample contents of <code>main.pl</code>:</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nif(-f \"/root/kart/test.pl\" )\n{\n       require \"/root/kart/test.pl\";\n}\nour @array1;\nour @array2;\n</code></pre>\n\n<p><strong>sample contents of <code>test.pl</code>:</strong></p>\n\n<pre><code>#!/usr/bin/perl\nour @array1=qw(one two three);\nour @array2=qw(abc xyz);\n.\n.\n1;\n</code></pre>\n\n<p>Before, the library perl script <code>/root/kart/test.pl</code> was available locally and <code>main.pl</code> was working fine. Now this script will be available only on remote node but not locally. </p>\n\n<p>How to import a perl script using \"require\" from remote server in perl</p>\n"}, {"tags": ["perl", "tkinter", "tcl", "tk"], "comments": [{"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1540992161, "post_id": 53074559, "comment_id": 93065483, "body": "I&#39;ve reformatted your code snippets to not have line breaks in crazy locations."}, {"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1540998332, "post_id": 53074559, "comment_id": 93069753, "body": "A solution to what?  What are the errors?  What are the symptoms?"}], "answers": [{"comments": [{"owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "edited": false, "score": 0, "creation_date": 1541027064, "post_id": 53093054, "comment_id": 93082930, "body": "I might be wrong, never tried, but I would not expect a tclkit to serve the purpose. This is because a tclkit does not expose the dependencies to Tcl.pm (which are stored in a virtual file system within the standalone executable). You&#39;d rather use a <a href=\"https://kitcreator.rkeene.org/fossil/wiki?name=KitDLL\" rel=\"nofollow noreferrer\">KitDLL</a>."}, {"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1541191981, "post_id": 53093054, "comment_id": 93146119, "body": "Thank you. This way I was able to run Makefile.PL without errors with a local installation of Tcl. I was not able however to use a KitDLL as the Makefile complains about tclConfig.sh. I am starting to think that I have a lot to learn about Tcl/Tk as it seems more complicated as initially thought."}, {"owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "reply_to_user": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1541453588, "post_id": 53093054, "comment_id": 93215448, "body": "I would not blame Tcl/ Tk for any of this :) There are different ways of deploying and installing it, indeed, but this is not make it any more complex than comparable environments. As for KitDLL: You will have to use the <a href=\"https://kitcreator.rkeene.org/fossil/wiki?name=KitDLL+SDK\" rel=\"nofollow noreferrer\">SDK archive</a> that comes along with a KitDLL, which contains the tclConfig.sh for your purposes."}], "tags": [], "owner": {"reputation": 2408, "user_id": 3207222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1338b351d1bac0e771a0c90016d3482d?s=128&d=identicon&r=PG&f=1", "display_name": "mrcalvin", "link": "https://stackoverflow.com/users/3207222/mrcalvin"}, "is_accepted": true, "score": 1, "last_activity_date": 1541026579, "creation_date": 1541026579, "answer_id": 53093054, "question_id": 53074559, "link": "https://stackoverflow.com/questions/53074559/perl-tcl-tclkit-link-to-specific-installation/53093054#53093054", "title": "perl tcl Tclkit link to specific installation", "body": "<p>The Tcl module does not require you to set different details (<code>--library</code>, <code>--include</code>, <code>--define</code>) on your own, but you may refer to an installed <code>tclsh</code> or a <code>tclConfig.sh</code> to have them loaded automatically.</p>\n\n<p>See <code>--tclconfig</code> and <code>--tclsh</code> when running:</p>\n\n<pre><code>% perl Makefile.PL --help\n</code></pre>\n\n<p>This just worked for me, both using a Tcl installation obtained via MacPorts (<code>sudo port install tcl</code>; 8.6.8) and an installation starting from a Tcl fossil checkout (<code>core-8-6-branch</code>).</p>\n\n<pre><code>% tar -xzf Tcl-1.27.tar.gz\n% cd Tcl-1.27/\n% perl Makefile.PL --tclconfig /opt/local/lib/tclConfig.sh\n% make\n% make test\n</code></pre>\n\n<p>This gives me:</p>\n\n<pre><code>$ make test\n\"/opt/local/bin/perl5.26\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Tcl.bs blib/arch/auto/Tcl/Tcl.bs 644\nPERL_DL_NONLAZY=1 \"/opt/local/bin/perl5.26\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/call.t ............. ok     \nt/constants.t ........ ok   \nt/createcmd.t ........ ok   \nt/disposal-subs-a.t .. skipped: because: not installed use Devel::Refcount qw( refcount )\nt/disposal-subs-b.t .. ok   \nt/disposal-subs-c.t .. ok   \nt/disposal-subs-d.t .. ok   \nt/disposal-subs-e.t .. ok   \nt/disposal-subs-f.t .. ok   \nt/disposal-subs.t .... 1/2 [[::perl::CODE(0x7fe3e3802a68) ::perl::Eval; ]]\nt/disposal-subs.t .... ok   \nt/eval.t ............. ok   \nt/export_to_tcl.t .... ok   \nt/info.t ............. ok   \nt/memleak-a.t ........ skipped: because: not installed use Devel::Refcount qw( refcount )\nt/result.t ........... ok   \nt/set-callback.t ..... ok   \nt/subclass.t ......... ok   \nt/trace.t ............ ok   \nt/unicode.t .......... ok   \nt/var.t .............. ok   \nAll tests successful.\n\nTest Summary Report\n-------------------\nt/info.t           (Wstat: 0 Tests: 6 Failed: 0)\n  TODO passed:   2\nFiles=20, Tests=101, 15 wallclock secs ( 0.08 usr  0.03 sys +  0.99 cusr  0.32 csys =  1.42 CPU)\nResult: PASS\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 53093054, "answer_count": 1, "score": 1, "last_activity_date": 1541026579, "creation_date": 1540944646, "last_edit_date": 1540992094, "question_id": 53074559, "link": "https://stackoverflow.com/questions/53074559/perl-tcl-tclkit-link-to-specific-installation", "title": "perl tcl Tclkit link to specific installation", "body": "<p>How do I link the tcl.pm module to a Tclkit, like the one available <a href=\"https://www.zolli.fr/tclkit-darwin.php\" rel=\"nofollow noreferrer\">here</a>, on macOS? </p>\n\n<p>As an alternative, I would also be happy to link Tcl.pm to a normal Tcl/Tk installation. As stated in Tcl.pod, this should be done while compiling the module. They write:</p>\n\n<pre><code>perl Makefile.PL --library=-l/path/to/tcl(stub).a         \\\n   --include=-I/path/to/tcl/include                       \\\n   --define=\"-DLIB_RUNTIME_DIR=... -DTCL_LIB_FILE=...\"\n</code></pre>\n\n<p>So, to give it a try, I took the preinstalled Tcl/Tk frameworks available on my macOS, moved it to another directory and then tried to Makefile.pl with the following parameters:</p>\n\n<pre><code>perl Makefile.PL \\\n   --library=\"-L/xxx/Tcl.framework/Versions/8.5 -ltclstub8.5\" \\\n   --include=-I/xxx/Tcl.framework/Versions/8.5/Headers        \\\n   --define=\"-DUSE_TCL_STUBS -DTCLSH_PATH=\\\\\\\"/usr/bin\\\\\\\" -DLIB_RUNTIME_DIR=\\\\\\\"/xxx/Tcl.framework\\\\\\\" -DTCL_LIB_FILE=\\\\\\\"Tcl\\\\\\\"\"\n</code></pre>\n\n<p>Then I proceed with the normal make, make test and make install. I do not get any error that can point to a solution. I compared the make file created by the Makefile.pl without parameters and mine, and found no differences beside: the path (obviously), and that my makefile missed the line:</p>\n\n<pre><code>#     dynamic_lib =&gt; { OTHERLDFLAGS=&gt;q[-framework Carbon] }\n</code></pre>\n\n<p>No matter what I try, my scripts get launched with the standard Tcl/Tk... I have no idea what I can try next</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1540950166, "post_id": 53074776, "comment_id": 93048424, "body": "good answer.  but questioner wants an actual explanation of the error message to; could you add that at the end?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540950733, "post_id": 53074776, "comment_id": 93048526, "body": "Added explanation of error as ysth requested. Feel free to revert."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 6, "last_activity_date": 1540950731, "last_edit_date": 1540950731, "creation_date": 1540946954, "answer_id": 53074776, "question_id": 53074342, "link": "https://stackoverflow.com/questions/53074342/what-does-this-error-mean-import-is-not-exported-by-the-exporter-module/53074776#53074776", "title": "What does this error mean: &quot;import is not exported by the exporter module&quot;?", "body": "<p><code>use Exporter qw( import );</code> <a href=\"https://perldoc.pl/Exporter#Exporting-Without-Inheriting-from-Exporter\" rel=\"noreferrer\">requests</a> that Exporter exports (creates) <code>import</code> in your module's namespace. This is the method that handles requests to export from your module. Versions of Exporter older than 5.57 don't recognize this request, leading to the error message you obtained.</p>\n\n<p>Since Exporter 5.57 or newer has been bundled with Perl since Perl 5.8.3, you must have a pretty ancient version of Perl and the module!</p>\n\n<p>You could upgrade Exporter, or you could inherit <code>import</code> from Exporter, which is a little messier but works with any version of Exporter.</p>\n\n<pre><code>package MyPackage;\nuse strict;\nuse warnings;\nuse Exporter;\nour @ISA = 'Exporter';\nour @EXPORT_OK = ...;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9057586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddaef6f9b4b6c8a4f290586aa0f69325?s=128&d=identicon&r=PG&f=1", "display_name": "user9057586", "link": "https://stackoverflow.com/users/9057586/user9057586"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 53074776, "answer_count": 1, "score": 2, "last_activity_date": 1540950731, "creation_date": 1540942711, "last_edit_date": 1540945171, "question_id": 53074342, "link": "https://stackoverflow.com/questions/53074342/what-does-this-error-mean-import-is-not-exported-by-the-exporter-module", "title": "What does this error mean: &quot;import is not exported by the exporter module&quot;?", "body": "<p>As the title states, I get this error when trying to use my perl module, but I have no idea what it means and I can't seem to find any clear results on the internet. My code consists of 3 files: a script (myApp.pl) which uses a module (MyLib.pm) which in turn uses another module (Secret.pm). Here they are in their entirety:</p>\n\n<p>myApp.pl</p>\n\n<pre><code>#!/path/to/perl\n\nmy $version = \"1.0.0\";\n\nuse warnings;\nuse strict;\nuse Testing::MyLib;\n</code></pre>\n\n<p>MyLib.pm</p>\n\n<pre><code>package Testing::MyLib;\n\nuse strict;\nuse warnings;\n\nuse Testing::Secret;\n</code></pre>\n\n<p>Secret.pm</p>\n\n<pre><code>package Testing::Secret;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw( import );\nour @EXPORT = ();\nour %EXPORT_TAGS = (\n  'all' =&gt; [ qw( MY_CONSTANT )]\n);\nour @EXPORT_OK = (\n  @{ $EXPORT_TAGS{all}}\n);\n\nuse constant MY_CONSTANT =&gt; 'bla bla bla';\n</code></pre>\n\n<p>They exit in this file structure:</p>\n\n<pre><code>/bin/myApp.pl\n/lib/perl/Testing/MyLib.pm\n/lib/perl/Testing/Secret.pm\n</code></pre>\n\n<p>And the detail of the error message is:</p>\n\n<pre><code>[user@pc ~]$ myApp.pl\n\"import\" is not exported by the Exporter module at /###/lib/perl/Testing/Secret.pm line 6\nCan't continue after import errors at /###/lib/perl/Testing/Secret.pm line 6\nBEGIN failed--compilation aborted at /###/lib/perl/Testing/Secret.pm line 6.\nCompilation failed in require at /###/lib/perl/Testing/MyLib.pm line 6.\nBEGIN failed--compilation aborted at /###/lib/perl/Testing/MyLib.pm line 6.\nCompilation failed in require at /###/bin/myApp.pl line 7.\nBEGIN failed--compilation aborted at /###/bin/myApp.pl line 7.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540933480, "post_id": 53072736, "comment_id": 93044186, "body": "Does it work any differently if you do an explicit <code>close(WRITER);</code> immediately before the <code>exit 0;</code> in <code>child_process()</code>?  I don&#39;t think it&#39;ll make a difference, but...  Also, shouldn&#39;t the parent close the WRITER handle after forking, rather than as it exits?  You have a &#39;now it is safe to do this&#39; comment after it in the parent, but it should be perfectly safe to do it immediately after the <code>if</code> containing the conditional call to <code>child_process()</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540938548, "post_id": 53072736, "comment_id": 93045832, "body": "@JonathanLeffler Tried playing with when to <code>close</code>, it doesn&#39;t help (but it does reveal weird behavior when there be shouldn&#39;t any) -- I think because of buffer-vs-non-buffered operation as mob explains.  Also, the original parent code was creating other child processes here or there (got simplified for this question) and couldn&#39;t close <code>WRITER</code> early."}], "answers": [{"comments": [{"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1540944540, "post_id": 53073125, "comment_id": 93047384, "body": "Thank you. Actually this was the same code you posted in my first Q :-D. You are right, sys read is the solution (for the current problem). I&#39;ve posted another answer.  Reading in list context did not work, unfortunately"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1540993330, "last_edit_date": 1540993330, "creation_date": 1540934647, "answer_id": 53073125, "question_id": 53072736, "link": "https://stackoverflow.com/questions/53072736/perl-non-blocking-pipe-only-getting-one-message/53073125#53073125", "title": "Perl: non blocking pipe - only getting one message", "body": "<p>Looks like you are mixing buffered and unbuffered I/O. \n<code>&lt;READER&gt;</code> (and <code>readline(READER)</code>) are buffered input operations. The first time you call <code>readline</code> on a file handle, Perl will try to read up to 8K of data from the handle, saving most of it in a memory buffer. The next time you call <code>readline</code> on the same file handle, Perl will try to return data in the buffer before it tries to read more data from the file again. This is for efficiency.</p>\n\n<p><code>select</code> is an operation for unbuffered I/O. It tells you whether input is waiting on the file handle itself, but it can not see whether data is waiting in the buffer.</p>\n\n<p>A clunky alternative would be to use <code>sysread</code> or <code>getc</code> to extract data from the pipe. That is inconvenient because you would have to break the input into separate lines yourself.</p>\n\n<pre><code>... if ($read_avail &gt; 0) {\n    my $n = sysread READER, my $lines, 16384;\n    chomp($lines);\n    my @lines = split /\\n/, $lines;\n    print \"Parent Got $$: '$_'\\n\" for @lines;\n} ...\n</code></pre>\n\n<p>What might work is to read from the file handle in list context.</p>\n\n<pre><code>chomp(my @lines = &lt;READER&gt;);\nseek READER, 0, 1;\n</code></pre>\n\n<p>should read all available data from both the buffer and the filehandle, and in theory it will leave your buffer empty so the next <code>&lt;READER&gt;</code> call will be like an unbuffered read. (The <code>seek</code> statement clears the EOF condition on the filehandle so you can read from the filehandle later when more input arrives).</p>\n\n<p>(ETA: nah, that won't work. That will just block on <code>READER</code> until the child closes its end of the pipe)</p>\n\n<hr>\n\n<p>The docs for <code>select</code> have this warning</p>\n\n<blockquote>\n  <p><strong>WARNING:</strong> One should not attempt to mix buffered I/O (like\n    \"<code>read</code>\" or <code>&lt;FH&gt;</code>) with \"<code>select</code>\", except as permitted by POSIX,\n    and even then only on POSIX systems.  You have to use \"<code>sysread</code>\"\n    instead.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1540944571, "post_id": 53073741, "comment_id": 93047394, "body": "Thanks - I&#39;m also going to try this framework out. I get the feeling I&#39;m going to keep landing up with new issues as my needs expand."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 1, "creation_date": 1540946228, "post_id": 53073741, "comment_id": 93047743, "body": "@user1361529 The documentation is definitely lacking in a few places so if you need help the fastest way is straight from the author and experienced users on #io-async on irc.perl.org if you have IRC (or there&#39;s <a href=\"https://kiwiirc.com/nextclient/#irc://irc.perl.org/#io-async?nick=mc-guest-?\" rel=\"nofollow noreferrer\">webchat</a>). There&#39;s also the rarely-used io-async tag here..."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1540938330, "creation_date": 1540938330, "answer_id": 53073741, "question_id": 53072736, "link": "https://stackoverflow.com/questions/53072736/perl-non-blocking-pipe-only-getting-one-message/53073741#53073741", "title": "Perl: non blocking pipe - only getting one message", "body": "<p>You are only reading up to one line per iteration, rather than reading all of the available data on the pipe. Perhaps select() is not indicating it's readable anymore after that. Note that since you're forking you also need to reap the subprocess with <a href=\"https://perldoc.pl/functions/waitpid\" rel=\"nofollow noreferrer\">waitpid</a> after it exits (in blocking mode waitpid will wait for it to exit), this will return the exit code of the child process.</p>\n\n<p>I recommend using an event loop to manage pipes between processes as it and its helper modules will manage all of the weird details of both forking a process and exchanging data. Here's what something using <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a> might look like.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Async::Loop;\nuse IO::Async::Channel;\nuse IO::Async::Routine;\n\nmy $channel = IO::Async::Channel-&gt;new;\n\nsub child_process {\n    my $id = 0;\n    sleep 1 + 5*rand();\n    $id++;\n    print \"Child Pid $$ sending message $id now...\\n\";\n    $channel-&gt;send(\\\"$id:Child Pid $$ is sending this - Message 1\\n\");\n    $channel-&gt;send(\\\"$id:Child Pid $$ is sending this - Message 2\\n\");\n}\n\nmy $loop = IO::Async::Loop-&gt;new;\nmy $f = $loop-&gt;new_future;\nmy $routine = IO::Async::Routine-&gt;new(\n  channels_out =&gt; [$channel],\n  code =&gt; \\&amp;child_process,\n  on_return =&gt; sub { my $routine = shift; $f-&gt;done(@_) },\n  on_die =&gt; sub { my $routine = shift; $f-&gt;fail(@_) },\n);\n$loop-&gt;add($routine);\n\n$channel-&gt;configure(on_recv =&gt; sub {\n  my ($channel, $ref) = @_;\n  print \"Parent Got: '$$ref'\\n\";\n});\n\n# wait for Future to complete (process finishes) or fail (process fails to start or dies)\nmy $exitcode = $f-&gt;get;\nprint \"Child exited with exit code $exitcode\\n\";\n</code></pre>\n\n<p>Note that <a href=\"https://metacpan.org/pod/IO::Async::Channel\" rel=\"nofollow noreferrer\">IO::Async::Channel</a> is just an abstraction around <a href=\"https://metacpan.org/pod/IO::Async::Stream\" rel=\"nofollow noreferrer\">IO::Async::Stream</a> for sending data structures between processes, and <a href=\"https://metacpan.org/pod/IO::Async::Routine\" rel=\"nofollow noreferrer\">IO::Async::Routine</a> is an abstraction around <a href=\"https://metacpan.org/pod/IO::Async::Process\" rel=\"nofollow noreferrer\">IO::Async::Process</a> (or a thread, on Windows systems) for setting up Channels to the forked code. <a href=\"https://metacpan.org/pod/IO::Async::Function\" rel=\"nofollow noreferrer\">IO::Async::Function</a> additionally is a higher-level wrapper of IO::Async::Routine that can manage a fork/thread pool to run a subroutine many times with different input and receive the return values in the parent. So there are many levels you can make use of depending how deep you want to dive.</p>\n"}, {"tags": [], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "is_accepted": true, "score": 1, "last_activity_date": 1540949001, "last_edit_date": 1540949001, "creation_date": 1540944381, "answer_id": 53074532, "question_id": 53072736, "link": "https://stackoverflow.com/questions/53072736/perl-non-blocking-pipe-only-getting-one-message/53074532#53074532", "title": "Perl: non blocking pipe - only getting one message", "body": "<p>Ok, I seem to see the benefit of @Grinnz's first recommendation to use a well defined framework. I thought I needed a tricycle but it looks like I'm slowly constructing a BMW from nuts and bolts.</p>\n\n<p>@mob and @grinnz's suggestions were right. It was a case of buffer/vs/non buffer.</p>\n\n<pre><code>chomp(my @lines = &lt;READER&gt;);\nseek READER, 0, 1;\n</code></pre>\n\n<p>does not work. It locks.</p>\n\n<p>This cookbook recipe works, but I'll tweak it/test it further tomorrow (<a href=\"https://docstore.mik.ua/orelly/perl4/cook/ch07_24.htm\" rel=\"nofollow noreferrer\">source</a>). So far so good:</p>\n\n<pre><code>use IO::Handle;\nuse POSIX ':sys_wait_h';\nuse Symbol qw(qualify_to_ref);\nuse IO::Select;\npipe(READER,WRITER);\nWRITER-&gt;autoflush(1);\n\nsub sysreadline(*;$) {\n    my($handle, $timeout) = @_;\n    $handle = qualify_to_ref($handle, caller( ));\n    my $infinitely_patient = (@_ == 1 || $timeout &lt; 0);\n    my $start_time = time( );\n    my $selector = IO::Select-&gt;new( );\n    $selector-&gt;add($handle);\n    my $line = \"\";\nSLEEP:\n    until (at_eol($line)) {\n        unless ($infinitely_patient) {\n            return $line if time( ) &gt; ($start_time + $timeout);\n        }\n        # sleep only 1 second before checking again\n        next SLEEP unless $selector-&gt;can_read(1.0);\nINPUT_READY:\n        while ($selector-&gt;can_read(0.0)) {\n            my $was_blocking = $handle-&gt;blocking(0);\nCHAR:       while (sysread($handle, my $nextbyte, 1)) {\n                $line .= $nextbyte;\n                last CHAR if $nextbyte eq \"\\n\";\n            }\n            $handle-&gt;blocking($was_blocking);\n            # if incomplete line, keep trying\n            next SLEEP unless at_eol($line);\n            last INPUT_READY;\n        }\n    }\n    return $line;\n}\nsub at_eol($) { $_[0] =~ /\\n\\z/ }\n\nsub child_process {\n    close READER;  # also a best but optional practice\n    srand($$);\n    my $id = 0;\n        sleep 1 + 5*rand();\n        $id++;\n        print \"Child Pid $$ sending message $id now...\\n\";\n        print WRITER \"$id:Child Pid $$ is sending this - Message 1\\n\";\n        print WRITER \"$id:Child Pid $$ is sending this - Message 2\\n\";\n        exit 0;\n}\n\nif (fork() == 0) {\n    child_process();\n}\n\n# parent\nmy ($rin,$rout) = ('');\nvec($rin,fileno(READER),1) = 1;\nwhile (1) {\n     # non-blocking read on pipe\n     while ((my $read_avail = select($rout=$rin, undef, undef, 0.0)) !=0) \n     {\n        if ($read_avail &lt; 0) {\n                 if (!$!{EINTR}) {\n                 warn \"READ ERROR: $read_avail $!\\n\";\n                last;\n                }\n        }\n        elsif ($read_avail &gt; 0) {\n         chomp(my $line = sysreadline(READER));\n         print \"Parent Got $$: '$line'\\n\";\n         print \"END MESSAGE\\n\";\n       }\n     }\n     print STDERR \"input queue empty...\\n\";\n     print \"Sleeping main for 5...\\n\";\n     sleep 5;\n}\nclose WRITER;  # now it is safe to do this ...\n</code></pre>\n"}], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 1, "accepted_answer_id": 53074532, "answer_count": 3, "score": 3, "last_activity_date": 1540993330, "creation_date": 1540932700, "last_edit_date": 1540933021, "question_id": 53072736, "link": "https://stackoverflow.com/questions/53072736/perl-non-blocking-pipe-only-getting-one-message", "title": "Perl: non blocking pipe - only getting one message", "body": "<p>I had asked a question a few weeks ago about implementation of a non-blocking one parent-many child pipe, which was ably answered by @mob <a href=\"https://stackoverflow.com/questions/52723489/perl-one-parent-many-children-single-pipe-reader-in-parent\">here</a></p>\n\n<p>However, I've noticed that if a child posts more than one message before exiting, the parent only gets the first one if it reads a little later.</p>\n\n<p>Example code:</p>\n\n<pre><code>use IO::Handle;\nuse POSIX ':sys_wait_h';\npipe(READER,WRITER);\nWRITER-&gt;autoflush(1);\n\nsub child_process {\n    close READER;  # also a best but optional practice\n    srand($$);\n    my $id = 0;\n        sleep 1 + 5*rand();\n        $id++;\n        print \"Child Pid $$ sending message $id now...\\n\";\n        print WRITER \"$id:Child Pid $$ is sending this - Message 1\\n\";\n        print WRITER \"$id:Child Pid $$ is sending this - Message 2\\n\";\n        exit 0;\n}\n\nif (fork() == 0) {\n    child_process();\n}\n\n# parent\nmy ($rin,$rout) = ('');\nvec($rin,fileno(READER),1) = 1;\nwhile (1) {\n     # non-blocking read on pipe\n     my $read_avail = select($rout=$rin, undef, undef, 0.0);\n     if ($read_avail &lt; 0) {\n         if (!$!{EINTR}) {\n             warn \"READ ERROR: $read_avail $!\\n\";\n             last;\n         }\n     } elsif ($read_avail &gt; 0) {\n         chomp(my $line = &lt;READER&gt;);\n         print \"Parent Got $$: '$line'\\n\";\n     } else {\n            print STDERR \"No input ... do other stuff\\n\";\n     }\n     sleep 5;\n}\nclose WRITER;  # now it is safe to do this ...\n</code></pre>\n\n<p>Expected output:</p>\n\n<p>I should get both messages.</p>\n\n<p>What I get: Only the first message</p>\n\n<pre><code>No input ... do other stuff\nNo input ... do other stuff\nChild Pid 8594 sending message 1 now...\nParent Got 8593: '1:Child Pid 8594 is sending this - Message 1'\nNo input ... do other stuff\n</code></pre>\n\n<p>This is supposed to be a non-blocking read, so home come it can't pick up the data on the next iteration? Is it because the child exited? I tried doing a <code>while (chomp(my $line = &lt;READER&gt;))</code> in the parent, but that blocks, which I can't have.</p>\n"}, {"tags": ["javascript", "jquery", "ajax", "perl"], "comments": [{"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1540924507, "post_id": 53070762, "comment_id": 93039971, "body": "The code was with some minor changes copied from <a href=\"https://stackoverflow.com/a/25487973/856090\">stackoverflow.com/a/25487973/856090</a>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1540925999, "post_id": 53070762, "comment_id": 93040670, "body": "Put the <code>&lt;script&gt;</code> at the bottom of the <code>&lt;body&gt;</code> or use <code>$(document).ready()</code>. You&#39;re trying to read the form field before the form has been loaded into the DOM."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540926135, "post_id": 53070762, "comment_id": 93040737, "body": "@Barmar Done, does not help"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540926466, "post_id": 53070762, "comment_id": 93040905, "body": "Use the Network tab of Developer Tools to see the parameters you&#39;re sending."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540926614, "post_id": 53070762, "comment_id": 93040978, "body": "Form Data is <code>------WebKitFormBoundaryhpJVMdndG2j3wtaV--</code>. I do not know why it works this way (this is my question)"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540926650, "post_id": 53070762, "comment_id": 93040991, "body": "Do you see the <code>ajax=1</code> parameter in the Form Data?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1540926694, "post_id": 53070762, "comment_id": 93041013, "body": "<code>id=&quot;#form&quot;</code> should be <code>id=&quot;form&quot;</code>. The <code>#</code> is just part of the selector, not the ID itself."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540926765, "post_id": 53070762, "comment_id": 93041046, "body": "@Barmar Thanks for typo spotted. Now it works"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540926389, "creation_date": 1540924391, "question_id": 53070762, "link": "https://stackoverflow.com/questions/53070762/ah01215-malformed-multipart-post-data-truncated", "title": "AH01215: Malformed multipart POST: data truncated", "body": "<p>When loading the below script I get <code>AH01215: Malformed multipart POST: data truncated</code> error in Apache error log.</p>\n\n<p>I need to pass files through AJAX, so I use <code>FormData</code> (in the below script for simplicity there are no file fields).</p>\n\n<p>What is the error?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse CGI qw/:standard/;\n\nif(param('ajax')) {\n  print header('text/plain');\n  print \"YY\";\n  exit;\n}\n\nprint header('text/html');\nprint q~\n&lt;html&gt;\n&lt;head&gt;\n  &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js\"&gt;&lt;/script&gt;\n  &lt;script&gt;\n  $.ajax({\n    url: '', \n    type: 'POST',\n    data: new FormData($('#form')[0]),\n    processData: false,\n    contentType: false // Using FormData, no need to process data.\n  }).done(function(data){\n    alert(data);\n  });\n  &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;form id=\"#form\" enctype=\"multipart/form-data\"&gt;\n&lt;input type=\"hidden\" name=\"ajax\" value=\"1\"/&gt;\n&lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n~;\n</code></pre>\n\n<p>Note that upgrading jQuery to a newer version seems NOT to solve the problem.</p>\n"}, {"tags": ["windows", "perl", "utf-16le"], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1540847532, "answer_count": 0, "score": 1, "last_activity_date": 1540846833, "creation_date": 1540846833, "question_id": 53053741, "link": "https://stackoverflow.com/questions/53053741/return-a-wide-string-from-win32api-call", "closed_reason": "Duplicate", "title": "return a wide string from Win32::API call", "body": "<p>I'm trying to figure out how to read the result of <code>GetCommandLineW</code> in Perl.</p>\n\n<p>I know that is should return a string beginning with <code>\"</code> when invoked under PowerShell, but I can't seem to extract more than one character.</p>\n\n<p>The following snippet loads the <code>GetCommandLineW</code> function and attempts to invoke it.\u2731</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Win32;\nuse Data::Dumper;\nuse Win32::API;\n\nmy $GetCommandLineW = Win32::API::More-&gt;new(\n  \"kernel32\", \"LPWSTR GetCommandLineW()\"\n);\ndie unless $GetCommandLineW;\n\nprint Dumper($GetCommandLineW-&gt;Call());\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>$VAR1 = '\"';\n</code></pre>\n\n<p>I get the same thing if I replace <code>LPWSTR</code> in the command line with <code>char *</code> or anything else that's stringlike. I get back a pointer as a decimal number if I use <code>int</code> or a garbage value as the return type.</p>\n\n<p>Is there a way that I can indicate to the <code>Win32::API</code> module that I am intending to read back a UTF-16 LE string or a way to \"convince\" it to put all the contents of said string into a Perl scalar.</p>\n\n<p>I'm okay if there some encoding issues in the resulting scalar that need cleaning up immediately after calling <code>$GetCommandLineW-&gt;Call()</code> as long as all the data is there.</p>\n\n<hr>\n\n<p>\u2731 The shebang is there so the same script can be invoked with or without Cygwin.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1540837449, "post_id": 53051471, "comment_id": 93002848, "body": "What have you tried? How did it fail?"}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1540838361, "post_id": 53051471, "comment_id": 93003272, "body": "I m very new to perl. I can extract the string using sed/awk. But could not process the strings in Perl."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1540838398, "post_id": 53051471, "comment_id": 93003284, "body": "Also, why have you removed the space from &quot;Hello World...\\r\\n&quot;?"}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1540839411, "post_id": 53051471, "comment_id": 93003708, "body": "sorry. it was a mistak. I have corrected it."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540839805, "post_id": 53051954, "comment_id": 93003872, "body": "it is giving me error (BEGIN failed--compilation aborted ) at the line String::Interpolate;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 1, "creation_date": 1540840974, "post_id": 53051954, "comment_id": 93004374, "body": "@Sajjad: Have you installed String::Interpolate?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540845803, "post_id": 53051954, "comment_id": 93006585, "body": "Fixed a bug in the input used by choroba, and fixed a bug in the answer."}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540848173, "post_id": 53051954, "comment_id": 93007636, "body": "Is it included in CPAN?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1540849137, "post_id": 53051954, "comment_id": 93007987, "body": "Yes, that&#39;s where I installed it from 2 hours ago."}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540850883, "post_id": 53051954, "comment_id": 93008618, "body": "@choroba. I have installed the module. if i have a file test.s containing .string type, how can i use your perl script of that file. is it like: script.pl test.s   ???"}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540851653, "post_id": 53051954, "comment_id": 93008885, "body": "I ran this successfully, but it does not replace the first .string &quot;Testing...\\r\\n&quot; but all the later .string &quot;xxxxxxxx&quot; are replaced successfully. is there something wrong @choroba"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1540853598, "post_id": 53051954, "comment_id": 93009510, "body": "It works for the sample you showed. How are your real data different to the sample?"}, {"owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540859670, "post_id": 53051954, "comment_id": 93010870, "body": "I found that the code looks for a space before &quot;. So if there is a tab before &quot;, the above code does not work. How to equally treat a space or a tab before &quot;   ????"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "edited": false, "score": 0, "creation_date": 1540865754, "post_id": 53051954, "comment_id": 93012054, "body": "@Sajjad, Use <code>\\s+</code> instead of a space"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1540865741, "last_edit_date": 1540865741, "creation_date": 1540838815, "answer_id": 53051954, "question_id": 53051471, "link": "https://stackoverflow.com/questions/53051471/converting-a-strings-to-32-bit-binary-words-using-perl/53051954#53051954", "title": "converting a strings to 32-bit binary words using perl", "body": "<p><a href=\"http://p3rl.org/pack\" rel=\"nofollow noreferrer\">pack</a>/<a href=\"http://p3rl.org/unpack\" rel=\"nofollow noreferrer\">unpack</a> are best for this type of conversions. Use <a href=\"http://p3rl.org/String::Interpolate\" rel=\"nofollow noreferrer\">String::Interpolate</a> to safely interpolate backslashed characters (it might not support the same syntax your as your compiler, so test properly).</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse String::Interpolate;\n\nmy $interpolate = 'String::Interpolate'-&gt;new;\n\nwhile (&lt;&gt;) {\n    if (my ($string) = /^\\s+\\.string\\s+\"(.*)\"/) {\n        $string = $interpolate-&gt;($string);\n        print map \"    .data.32 $_\\n\", unpack 'N*', \"$string\\0\\0\\0\";\n    } else {\n        print;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>LC0:\n    .data.32 1415934836\n    .data.32 1768843054\n    .data.32 774769930\n\nLC1:\n    .data.32 1214606444\n    .data.32 1868001138\n    .data.32 1818504750\n    .data.32 772606464\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8581177, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eda842459e34f7dedcb17c6c99592fde?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad", "link": "https://stackoverflow.com/users/8581177/sajjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53051954, "answer_count": 1, "score": -1, "last_activity_date": 1540865741, "creation_date": 1540836762, "last_edit_date": 1540839390, "question_id": 53051471, "link": "https://stackoverflow.com/questions/53051471/converting-a-strings-to-32-bit-binary-words-using-perl", "title": "converting a strings to 32-bit binary words using perl", "body": "<p>I have a assembly file generated from a compiler. It declares all the strings as following:</p>\n\n<pre><code>LC0:\n   .string \"Testing...\\r\\n\"\n\nLC1:\n   .string \"HelloWorld...\\r\\n\"\n</code></pre>\n\n<p>I want to replace these variable-length strings with their corresponding ascii values but in 32-bit wide words like first string should be replaced with 3 consecutive 32-bit wide words i.e. 0x54657374, 0x696e672e, &amp; 0x2e2e0d0a. And then converted in decimal as:</p>\n\n<pre><code>LC0:\n    .data.32 1415934836\n    .data.32 1768843054\n    .data.32 774769930\n</code></pre>\n\n<p>and similarly the LC1 to 0x48656c6c, 0x6f576f72, 0x6c642e2e &amp; 0x2e0d0a00 as:</p>\n\n<pre><code>LC1:\n    .data.32 1214606444\n    .data.32 1868001138\n    .data.32 1818504750\n    .data.32 772606464\n</code></pre>\n\n<p>can anybody help me in doing this.\nRegards</p>\n"}, {"tags": ["perl", "parallel-processing"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540820057, "post_id": 53046403, "comment_id": 92992715, "body": "The usual approach is to give each forked child more work to do, by sending each child a batch of items to work on instead of launching a child for every work item"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 2, "creation_date": 1540820062, "post_id": 53046403, "comment_id": 92992719, "body": "Please add full source code. Probably <code>run_on_finish</code> does not get executed before all 10 processes are spawned."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540820156, "post_id": 53046403, "comment_id": 92992787, "body": "Cross-posted to <a href=\"https://perlmonks.org/?node_id=1224835\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1224835</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540835344, "post_id": 53046403, "comment_id": 93001812, "body": "That&#39;s much too quick, and you apparently have all these classes involved there.  What do you mean by &quot;nanoseconds&quot; -- do you expect methods to be called on objects, fork processes, and complete in nanoseconds? Then, what does the method lookup have to do in your class?  That may take a little time. Are objects being destroyed on <code>finish</code>? That may well take time.  (Probably unrelated, but why do you construct the timer object in the loop? Specially if you are counting milliseconds.)  Now, a whole second is indeed a lot but we need to see all relevant code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540836687, "post_id": 53046403, "comment_id": 93002462, "body": "From what I see your timer shows how long it took to complete the callback, not up to calling <code>finish</code>.  Now, <code>run_on_finish</code> uses files to transfer data and that&#39;s yet another wild card here, and <i>that</i> can take time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540950302, "post_id": 53046403, "comment_id": 93048449, "body": "@Corion, Search engines link to www.perlmonks.org, so it&#39;s a better target than perlmonks.org (which requires a separate login)."}, {"owner": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "edited": false, "score": 0, "creation_date": 1540982834, "post_id": 53046403, "comment_id": 93060117, "body": "Thank you all!!!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "edited": false, "score": 0, "creation_date": 1540974044, "post_id": 53056245, "comment_id": 93055371, "body": "Thanks! can you please explain this command: $SIG{CHLD} = sub { $pm-&gt;reap_finished_children }; what is the goal for it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "edited": false, "score": 0, "creation_date": 1541008940, "post_id": 53056245, "comment_id": 93075976, "body": "It causes the sub to be called when the process receives the <code>CHLD</code> signal, which the OS sends when a child exits."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1540950351, "last_edit_date": 1540950351, "creation_date": 1540863945, "answer_id": 53056245, "question_id": 53046403, "link": "https://stackoverflow.com/questions/53046403/parallelforkmanager-takes-too-much-time-to-start-finish-function/53056245#53056245", "title": "Parallel::ForkManager takes too much time to start &#39;finish&#39; function", "body": "<p>The <code>on_finish</code> callback is only called when P::FM reaps a child, and P::FM only reaps a child under three conditions:</p>\n\n<ul>\n<li>When <code>$pm-&gt;start</code> is called and the number of children that have been started but not reaped is equal to the maximum.</li>\n<li>When <code>$pm-&gt;reap_finished_children</code> is called.</li>\n<li>When <code>$pm-&gt;wait_all_children</code> is called.</li>\n</ul>\n\n<p>There could be an arbitrarily long delay between a child exiting and one the above events. Adding the following to your program should eliminate that delay:</p>\n\n<pre><code>$SIG{CHLD} = sub { $pm-&gt;reap_finished_children };\n</code></pre>\n\n<hr>\n\n<p>By the way, if the work performed by your child only takes \"a few milliseconds or nanoseconds\", you are actually slowing things down by using P::FM. Data passed to <code>finish</code> gets serialized and written to disk, then read from the disk and deserialized for the <code>on_finish</code> callback!</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541024014, "post_id": 53081609, "comment_id": 93082036, "body": "But please be careful with setting it to <i>zero</i> as that changes how <code>P::FM</code> waits for children; review carefully <a href=\"https://metacpan.org/pod/Parallel::ForkManager#BLOCKING-CALLS\" rel=\"nofollow noreferrer\">&quot;Blocking Calls&quot; in docs</a>. Note that you can use fractional sleeps via <code>Time::HiRes</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541041857, "post_id": 53081609, "comment_id": 93085957, "body": "I believe what I provided is much safer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541198635, "post_id": 53081609, "comment_id": 93148014, "body": "Note that @ikegami &#39;s child handler by-passes the issue of waiting altogether (as far as I can tell), since  children get reaped as soon as they&#39;re done; and it is better not to muck about with those constants. It is also a general optimization I think, as <i>each</i> child gets reaped once it&#39;s done (not the case with <code>wait_all_children</code>)."}], "tags": [], "owner": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "is_accepted": false, "score": 2, "last_activity_date": 1540983012, "creation_date": 1540983012, "answer_id": 53081609, "question_id": 53046403, "link": "https://stackoverflow.com/questions/53046403/parallelforkmanager-takes-too-much-time-to-start-finish-function/53081609#53081609", "title": "Parallel::ForkManager takes too much time to start &#39;finish&#39; function", "body": "<p>Thanks you all, i found the problem. ForManager module has 'waitpid_blocking_sleep' parameter, which defined as 1 second by default. There is a function called 'set_waitpid_blocking_sleep' which we can defined this parameter (sleep time). We can set zero or fraction of seconds. I set this paramter to zero and it fixed my issue.</p>\n"}], "owner": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540983012, "creation_date": 1540819270, "last_edit_date": 1540824706, "question_id": 53046403, "link": "https://stackoverflow.com/questions/53046403/parallelforkmanager-takes-too-much-time-to-start-finish-function", "title": "Parallel::ForkManager takes too much time to start &#39;finish&#39; function", "body": "<p>I use the regular Parallel::ForkManager module in Perl. I execute around 10 children processes. 'passes_thresholds' function takes few milliseconds or nanoseconds (checked it). In case I run all processes one by one (without Parallel::ForkManager) the whole process took 80-250 milliseconds. In case I run them as parallel, the whole process takes at least 1 second. I found that the Fork spends 1 second to start the 'finish' function. I put a timer when the child process finished his job and should go to 'finish'- function. One second is too much for my development.</p>\n\n<pre><code>sub parallel_execute {\n    my $this = shift;\n    foreach my $a (@a_array) {\n        my $pid = $this-&gt;{fork_manager}-&gt;start and next;\n        my $res = $a-&gt;passes_thresholds();\n        $a-&gt;{timer} = Benchmark::Timer-&gt;new();\n        $svc-&gt;{timer}-&gt;start;\n        $this-&gt;{fork_manager}-&gt;finish(0,{a =&gt; $a, plugin_result =&gt; $res});\n    }\n}\n\n$this-&gt;{fork_manager}-&gt;run_on_finish( sub {\n    my ($pid, $exit_code, $ident, $exit_signal, $core_dump, $data_structure_reference) = @_;\n    my $a = $data_structure_reference-&gt;{a};\n    if (exists $a-&gt;{timer}) {\n        $a-&gt;{timer}-&gt;stop;\n        debug \"took: \" . $a-&gt;{timer}-&gt;report;\n    }\n});\n</code></pre>\n\n<p>Do you have any idea why it took at least 1 second to start the 'finish' command?</p>\n\n<p>(I am using Unix server, and perl 5.10)</p>\n"}, {"tags": ["json", "perl", "catalyst", "dbix-class"], "comments": [{"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 1, "creation_date": 1540817597, "post_id": 53045844, "comment_id": 92991229, "body": "I think you are double-encoding your data. It seems that the other methods (either &quot;stash&quot; or &quot;forward&quot;, I don&#39;t know your specific framework) are encoding the whole object for you, yet you have already encoded the data within it yourself. So what it does is take your encoded string of the &quot;blessed&quot; objects, and wrap it in another JSON object which has the single property &quot;json&quot; within it, containing your string. To fix is I would expect you can simply write <code>$c-&gt;stash(json =&gt; $c-&gt;stash-&gt;{books});</code> without the manual encoding."}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1540817642, "post_id": 53045844, "comment_id": 92991263, "body": "(I&#39;m not writing as answer as I don&#39;t know your framework, so I&#39;m not totally certain, I just came to this question through the json tag. But it seems logical. So if it works please confirm and I&#39;ll write as a full answer. Thanks)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540818418, "post_id": 53045844, "comment_id": 92991706, "body": "Is this the default View::JSON? Shouldn&#39;t that sort of eat the <code>json</code> stash key and produce only the data structure behind that key as the output?"}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1540828619, "post_id": 53045844, "comment_id": 92998348, "body": "Yes, it is the default Catalyst::View::JSON, but there is no sub at all."}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1540829130, "post_id": 53045844, "comment_id": 92998684, "body": "And the configuration of View::JSON is &#39;View::JSON&#39; =&gt; { allow_callback  =&gt; 1, callback_param  =&gt; &#39;cb&#39;, expose_stash    =&gt; [ qw(json) ], json_encoder_args =&gt; +{utf8=&gt;0}, }"}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "reply_to_user": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1540832647, "post_id": 53045844, "comment_id": 93000536, "body": "@ADyson - the indicated assignment of the result set of books to the stash doesn&#39;t work."}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1540833038, "post_id": 53045844, "comment_id": 93000749, "body": "@K&#233;rdez&#246;sk&#246;d\u0151Indi&#225;n &quot;doesn&#39;t work&quot; means what exactly? What does your output look like now? What problem are you experiencing now?"}], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 1, "last_activity_date": 1540819157, "creation_date": 1540819157, "answer_id": 53046374, "question_id": 53045844, "link": "https://stackoverflow.com/questions/53045844/dbix-to-json-wrong-format/53046374#53046374", "title": "DBIx to JSON - Wrong format", "body": "<p><code>$json-&gt;convert_blessed-&gt;encode($c-&gt;stash-&gt;{books})</code> returns a string. It looks like <code>View::JSON</code> also encodes json.</p>\n\n<p>Try to pass your data as is: <code>$c-&gt;stash(json =&gt; $c-&gt;stash-&gt;{books});</code>. You may also need to configure <code>expose_stash</code> and <code>json_encoder_args</code> to handle the right keys from your stash and correctly convert your objects.</p>\n\n<p>See\n<a href=\"https://metacpan.org/pod/Catalyst::View::JSON#CONFIG-VARIABLES\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Catalyst::View::JSON#CONFIG-VARIABLES</a></p>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540819157, "creation_date": 1540817211, "question_id": 53045844, "link": "https://stackoverflow.com/questions/53045844/dbix-to-json-wrong-format", "title": "DBIx to JSON - Wrong format", "body": "<p>In a <strong>Catalyst</strong> application, I need to generate <strong>JSON</strong> from <strong>DBIx::Class:Core</strong> objects. </p>\n\n<p>Such a class definition looks like this:</p>\n\n<pre><code>use utf8;\npackage My::Schema::Book;\n\nuse strict;\nuse warnings;\n\nuse Moose;\nuse MooseX::NonMoose;\nuse MooseX::MarkAsMethods autoclean =&gt; 1;\nextends 'DBIx::Class::Core';\n\n__PACKAGE__-&gt;load_components(\"InflateColumn::DateTime\");\n__PACKAGE__-&gt;table(\"books\");\n__PACKAGE__-&gt;add_columns(\n  \"id\",\n  {\n    data_type =&gt; \"uuid\",\n    default_value =&gt; \\\"uuid_generate_v4()\",\n    is_nullable =&gt; 0,\n    size =&gt; 16,\n  },\n  \"title\"\n);\n__PACKAGE__-&gt;set_primary_key(\"id\");\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\nsub TO_JSON {\n    my $self = shift;\n    {book =&gt; {\n        id =&gt; $self-&gt;id,\n        title =&gt; $self-&gt;title,\n    }}\n}\n\n1;\n</code></pre>\n\n<p>After queriyng the books from database I do the encoding of the blessed objects:</p>\n\n<pre><code>$c-&gt;stash(books_rs =&gt; $c-&gt;model('My::Schema::Book'));\n$c-&gt;stash(books =&gt; [$c-&gt;stash-&gt;{books_rs}-&gt;search(\n    {},\n    {order_by =&gt; 'title ASC'})]\n);\n$c-&gt;stash(json =&gt; $json-&gt;convert_blessed-&gt;encode($c-&gt;stash-&gt;{books}));\n$c-&gt;forward('View::JSON');\n</code></pre>\n\n<p>The JSON output of the query is this:</p>\n\n<pre><code>{\"json\":\"[{\\\"book\\\":{\\\"id\\\":\\\"ae355346-8e19-46ee-88ee-773ac30938a9\\\",\\\"title\\\":\\\"TITLE1\\\"}},{\\\"book\\\":{\\\"id\\\":\\\"9a20f526-d4cd-4e7d-a726-55e78bc3c0ac\\\",\\\"title\\\":\\\"TITLE2\\\"}},{\\\"book\\\":{\\\"title\\\":\\\"TITLE3\\\",\\\"id\\\":\\\"1ddb2d27-3ec6-46c1-a1a7-0b151fe44597\\\"}}]\"}\n</code></pre>\n\n<p>The value of the <strong>json</strong> key and each particular book key got double quotes what can not be parsed by jQuery. It complains about format exception.</p>\n"}, {"tags": ["c", "linux", "perl", "sensors", "texas-instruments"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 7380958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba25b64fa668bc2ec0b186b433b751d0?s=128&d=identicon&r=PG&f=1", "display_name": "Erdem \u015e\u0130M\u015eEK", "link": "https://stackoverflow.com/users/7380958/erdem-%c5%9e%c4%b0m%c5%9eek"}, "is_accepted": false, "score": 1, "last_activity_date": 1543578614, "creation_date": 1543578614, "answer_id": 53556996, "question_id": 53044099, "link": "https://stackoverflow.com/questions/53044099/how-to-read-data-from-sensortag-cc3200stk/53556996#53556996", "title": "How to read data from SensorTag CC3200STK", "body": "<p>As described in <a href=\"http://www.ti.com/lit/ug/swru513a/swru513a.pdf\" rel=\"nofollow noreferrer\">here</a>, you need to connect your SensorTag to your access point. After successful connection, The SensorTag will start sending sensor data to predefined cloud url by using MQTT protocol. You can view the sensor data in your browser by visiting cloud url address. </p>\n"}], "owner": {"reputation": 95, "user_id": 7490697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30123797b95fe720e65e8badf744587a?s=128&d=identicon&r=PG", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/7490697/usman-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1543578614, "creation_date": 1540810927, "question_id": 53044099, "link": "https://stackoverflow.com/questions/53044099/how-to-read-data-from-sensortag-cc3200stk", "title": "How to read data from SensorTag CC3200STK", "body": "<p>I just bought SensorTag CC3200STK. I want to read it's data on raspberry pi using wifi. I searched a lot on the web and forums but I could not find anything. Basically I want to read it's sensors data and display it on a webpage. I have all necessary things required to build a webpage and everything. I am only facing a huge problem on how to get data from SensorTag and store it.</p>\n"}, {"tags": ["linux", "perl", "error-handling", "daemon", "texas-instruments"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540807036, "post_id": 53042444, "comment_id": 92985155, "body": "You will need to install the Proc::Daemon module ( <a href=\"https://metacpan.org/pod/Proc::Daemon\" rel=\"nofollow noreferrer\">metacpan.org/pod/Proc::Daemon</a> ). If you are using a Debian-like Linux distribution, the likely easiest approach is <code>apt-get install libproc-daemon-perl</code> . The installation of Proc::Daemon is not different from installing any other Perl module."}, {"owner": {"reputation": 95, "user_id": 7490697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30123797b95fe720e65e8badf744587a?s=128&d=identicon&r=PG", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/7490697/usman-khan"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540807727, "post_id": 53042444, "comment_id": 92985565, "body": "I installed it. Now I am getting error of installing Config :simple module"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540807820, "post_id": 53042444, "comment_id": 92985618, "body": "... then repeat the same process, this time for the <code>Config::Simple</code> module, which can be likely found as package <code>libconfig-simple-perl</code> on Debian-like systems. You will have to do this for likely every <code>use ...</code> line in the script you&#39;re trying to use. You should investigate of that script is already packaged somewhere with all prerequisites."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540807935, "post_id": 53042444, "comment_id": 92985671, "body": "... the original source seems to be <a href=\"https://github.com/wtremmel/wifi-sensortag\" rel=\"nofollow noreferrer\">github.com/wtremmel/wifi-sensortag</a> , and that author does not list their prerequisites unfortunately."}, {"owner": {"reputation": 95, "user_id": 7490697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30123797b95fe720e65e8badf744587a?s=128&d=identicon&r=PG", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/7490697/usman-khan"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540809340, "post_id": 53042444, "comment_id": 92986467, "body": "Yes that is correct. Thank You for your help. Although his code did not work :("}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 7490697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30123797b95fe720e65e8badf744587a?s=128&d=identicon&r=PG", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/7490697/usman-khan"}, "is_accepted": false, "score": 2, "last_activity_date": 1540809458, "creation_date": 1540809458, "answer_id": 53043675, "question_id": 53042444, "link": "https://stackoverflow.com/questions/53042444/how-to-install-procdaemon-module/53043675#53043675", "title": "How to install Proc::Daemon module", "body": "<p>@Corion comments were really helpful. I resolved the error by installing these two modules.</p>\n\n<pre><code>sudo apt-get install libproc-daemon-perl\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sudo apt-get install libconfig-simple-perl\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7490697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30123797b95fe720e65e8badf744587a?s=128&d=identicon&r=PG", "display_name": "Usman Khan", "link": "https://stackoverflow.com/users/7490697/usman-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540809458, "creation_date": 1540805462, "question_id": 53042444, "link": "https://stackoverflow.com/questions/53042444/how-to-install-procdaemon-module", "title": "How to install Proc::Daemon module", "body": "<p>I have just bought SensorTag CC3200STK. I want to read it's data through Raspberry Pi. I searched a lot but could not find any way to read it's data. Finally I found a code and the author told me to just run the code. I think this guy is trying to run a Perl code as a daemon. When I run the code I get the following Error.</p>\n\n<pre><code>Can't locate Proc/Daemon.pm in @INC (you may need to install the Proc::Daemon module) \n(@INC contains: /etc/perl /usr/local/lib/arm-linux-gnueabihf/perl/5.20.2 /usr/local/share/perl/5.20.2 /usr/lib/arm-linux-gnueabihf/perl5/5.20 /usr/share/perl5 /usr/lib/arm-linux-gnueabihf/perl/5.20 /usr/share/perl/5.20 /usr/local/lib/site_perl .) at ./wifisensortagd line 8.\nBEGIN failed--compilation aborted at ./wifisensortagd line 8.\n</code></pre>\n\n<p>I have attached the code as a jsfiddle (I know it is not a js code).\n<a href=\"https://jsfiddle.net/9eLkn6of/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/9eLkn6of/</a></p>\n\n<p>How should I resolve this Error? \nP.S : The .cfg file included in the code contains</p>\n\n<pre><code>Sensors: \"192.168.1.1\",\"192.168.1.1\"\nLocations: \"Work Room\",\"Living Room\"\nSite: Hassan Home\nMqttserver: pi3.garf.de\n</code></pre>\n"}, {"tags": ["perl", "pipe"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1540803691, "post_id": 53041873, "comment_id": 92983073, "body": "No, you are only printing the result to that handle. /// Exceptions are caught using <code>eval</code>. Capturing what would get sent to STDERR is far tricker, but I think Capture::Tiny can help. /// Alternatively, you could assign the pipe to fd 2, making it STDERR"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540845779, "post_id": 53043211, "comment_id": 93006571, "body": "Note that <code>$SIG{__WARN__}</code> and <code>$SIG{__DIE__}</code> only catch calls to those perl functions, not anything that writes to STDERR directly. Capture::Tiny can be used to capture everything written to STDERR, and <a href=\"http://mvp.kablamo.org/cpan/exceptions/\" rel=\"nofollow noreferrer\">eval or try</a> can be used to capture exceptions, in a much safer way than overriding <code>$SIG{__DIE__}</code>."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 0, "last_activity_date": 1540807923, "creation_date": 1540807923, "answer_id": 53043211, "question_id": 53041873, "link": "https://stackoverflow.com/questions/53041873/pipe-stderr-using-iopipe-perl/53043211#53043211", "title": "Pipe STDERR using IO::Pipe Perl", "body": "<p>You need to catch <code>$SIG{__WARN__}</code> and/or <code>$SIG{__DIE__}</code></p>\n\n<pre><code>{\n    my $writer = IO::Pipe-&gt;new();\n    $writer-&gt;writer();\n    local $SIG{__WARN__} = sub { print $writer $_[0] };\n    local $SIG{__DIE__} = sub { print $writer $_[0] };\n    print $writer $some_function();\n    $writer-&gt;flush();\n    $writer-&gt;close;\n}\n</code></pre>\n\n<p><code>$SIG{__DIE__}</code> handler needs a modification depending on how you want to handle critical errors.</p>\n\n<p><a href=\"https://perldoc.perl.org/perlvar.html#%25SIG\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlvar.html#%25SIG</a></p>\n"}], "owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53043211, "answer_count": 1, "score": 0, "last_activity_date": 1540807923, "creation_date": 1540803400, "question_id": 53041873, "link": "https://stackoverflow.com/questions/53041873/pipe-stderr-using-iopipe-perl", "title": "Pipe STDERR using IO::Pipe Perl", "body": "<pre><code>my $writer = IO::Pipe-&gt;new();\n$writer-&gt;writer();\nprint $writer $some_function();\n$writer-&gt;flush();\n$writer-&gt;close;\n</code></pre>\n\n<p>What happens if the <code>some_function</code> produces some exception or STDERR? Is it written to the <code>$writer</code>? If No, How can one achieve that?</p>\n"}, {"tags": ["perl", "nagios", "docker-datacenter"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10351577, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQgNIUvzq8I/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMAGTfzoHhuNteMX6NduuFkVYDaFQ/mo/photo.jpg?sz=128", "display_name": "secret log", "link": "https://stackoverflow.com/users/10351577/secret-log"}, "edited": false, "score": 0, "creation_date": 1540814220, "post_id": 53042236, "comment_id": 92989263, "body": "Got it . Thanks Corion."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1540804714, "creation_date": 1540804714, "answer_id": 53042236, "question_id": 53041797, "link": "https://stackoverflow.com/questions/53041797/check-megaraid-sas-nagios-plugin-explanation/53042236#53042236", "title": "check_megaraid_sas nagios plugin explanation", "body": "<p>It makes sense to look at the complete section:</p>\n\n<pre><code>PDISKS: while (&lt;PDLIST&gt;) {\n        if ( m/Slot Number\\s*:\\s*(\\d+)/ ) {\n            $slotnumber = $1;\n            $pdcount++;\n        } elsif ( m/(\\w+) Error Count\\s*:\\s*(\\d+)/ ) {\n            if ( $1 eq 'Media') {\n                $mediaerrors += $2;\n            } else {\n                $othererrors += $2;\n            }\n        } elsif ( m/Predictive Failure Count\\s*:\\s*(\\d+)/ ) {\n            $prederrors += $1;\n        } elsif ( m/Firmware state\\s*:\\s*(\\w+)/ ) {\n            $fwstate = $1;\n            if ( $fwstate eq 'Hotspare' ) {\n                $hotsparecount++;\n            } elsif ( $fwstate eq 'Online' ) {\n                # Do nothing\n            } elsif ( $fwstate eq 'Unconfigured' ) {\n                # A drive not in anything, or a non drive device\n                $pdcount--;\n            } elsif ( $slotnumber != 255 ) {\n                $pdbad++;\n                $status = 'CRITICAL';\n            }\n        }\n} #PDISKS\n</code></pre>\n\n<p>That section loops over a list of PDs (Primary Disks?), and I assume that this file / program output contains a human readable status for every attached device. The code looks at every line and performs some actions depending on the content of that line:</p>\n\n<p><code>$slotnumber</code> is assigned whenever there is <code>Slot Number : ...</code> in the contents of <code>PDLIST</code>. From looking at the logic, if there is a <code>Firmware state</code> line that is not <code>Hotspare</code>, <code>Online</code> or <code>Unconfigured</code>, and the <code>$slotnumber</code> is not 255, then something went horribly wrong and the status is considered <code>CRITICAL</code>. The number of bad PDs (<code>$pdbad</code>) is then increased by one.</p>\n"}], "owner": {"reputation": 1, "user_id": 10351577, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQgNIUvzq8I/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMAGTfzoHhuNteMX6NduuFkVYDaFQ/mo/photo.jpg?sz=128", "display_name": "secret log", "link": "https://stackoverflow.com/users/10351577/secret-log"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540804714, "creation_date": 1540803123, "last_edit_date": 1540803516, "question_id": 53041797, "link": "https://stackoverflow.com/questions/53041797/check-megaraid-sas-nagios-plugin-explanation", "title": "check_megaraid_sas nagios plugin explanation", "body": "<p>Can anyone explain following piece of code in <a href=\"https://github.com/simondeziel/custom-nagios-plugins/blob/master/plugins/check_megaraid_sas\" rel=\"nofollow noreferrer\">https://github.com/simondeziel/custom-nagios-plugins/blob/master/plugins/check_megaraid_sas</a> . (line num 220-223)\nWhy this code is there</p>\n\n<pre><code>} elsif ( $slotnumber != 255 ) {\n            $pdbad++;\n            $status = 'CRITICAL';\n        }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 7, "creation_date": 1540725423, "post_id": 53030873, "comment_id": 92962454, "body": "It&#39;s almost never a bug in Perl. ;)"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 3, "creation_date": 1540725427, "post_id": 53030873, "comment_id": 92962456, "body": "In many languages, a prefix 0 makes the number octal; meaning in base 8. I wouldn&#39;t be surprised if that&#39;s the case here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1540725644, "post_id": 53030873, "comment_id": 92962497, "body": "@Carcigenicate yep."}, {"owner": {"reputation": 36, "user_id": 9412495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f20151a57db55dc73dc09659fef5af?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/9412495/gokul"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1540726566, "post_id": 53030873, "comment_id": 92962725, "body": "@carcigenicate adding more to your question perl 5.22.1   $val=0000001; for(0..10) { $val++; print $val+1; print &quot;\\n&quot;; }     i get desired output"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540726579, "post_id": 53030873, "comment_id": 92962728, "body": "See also <a href=\"https://perldoc.perl.org/perlnumber.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlnumber.html</a> , which explains the various number formats in Perl."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540726851, "post_id": 53030873, "comment_id": 92962796, "body": "@Corion Because any octal number less than 8 is the same in base 10 as it is in base 8. <code>07</code> is the same as <code>7</code>, but <code>09</code> isn&#39;t the same as <code>9</code>. Same how <code>1</code> is the same in both binary and base 10."}, {"owner": {"reputation": 36, "user_id": 9412495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f20151a57db55dc73dc09659fef5af?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/9412495/gokul"}, "edited": false, "score": 0, "creation_date": 1540727057, "post_id": 53030873, "comment_id": 92962857, "body": "more questions Why there is output difference in these.                            $val=sprintf(&quot;%05d&quot;,1434); print $val; print &quot;\\n&quot;; print $val+21315; print &quot;\\n&quot;; print 01434+21315;"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540735394, "post_id": 53030873, "comment_id": 92964985, "body": "@Gokul Perl only interprets leading zeroes when reading Perl source code. Addition of scalars is not influenced by that."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 13, "last_activity_date": 1540733031, "creation_date": 1540733031, "answer_id": 53032000, "question_id": 53030873, "link": "https://stackoverflow.com/questions/53030873/bug-in-perl-with-prefixed-0-numbers/53032000#53032000", "title": "bug in perl with prefixed 0 numbers", "body": "<p>A leading 0 in a literal number makes Perl interpret the value I'm base 8:</p>\n\n<pre><code> 123   # 123, in decimal\n0123   # 123 in octal, but 83 in decimal\n</code></pre>\n\n<p>This isn't the same for strings converted to numbers. In those Perl ignores the leading 0s. The string-to-number conversion only deals in base-10:</p>\n\n<pre><code> \"123\" + 0   # 123\n\"0123\" + 0   # still 123\n</code></pre>\n\n<p>In your example in the comment, you convert a literal number to a string with a leading zero. When you convert that string back to its numeric form you get the same value you started with: </p>\n\n<pre><code>$val=sprintf(\"%05d\",1434);   # converting 1434 to the string \"01434\"\nprint $val; print \"\\n\";      # still a string\nprint $val+21315;            # \"01434\" + 21315 =&gt; 1434 + 21315\nprint \"\\n\"; \nprint 01434+21315;           # oct(1434) + 21315 =&gt; 796 + 21315\n</code></pre>\n\n<p>The leading zero notation helps with certain builtins that typically use octal numbers, such as those that deal with unix permissions:</p>\n\n<pre><code>chmod 0644, @files\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 9412495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f20151a57db55dc73dc09659fef5af?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/9412495/gokul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1540733031, "creation_date": 1540725225, "last_edit_date": 1540731478, "question_id": 53030873, "link": "https://stackoverflow.com/questions/53030873/bug-in-perl-with-prefixed-0-numbers", "title": "bug in perl with prefixed 0 numbers", "body": "<p>when I try to execute the following<code>(01434.210 instead of 1434.210)</code></p>\n\n<pre><code>$val=22749.220-(21315.010+01434.210)\nprint $val\n</code></pre>\n\n<p>I get these output</p>\n\n<pre><code>output 638.207900000001\n</code></pre>\n\n<p>But according to me output must be <code>0</code>.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["multithreading", "perl", "bioinformatics", "dna-sequence"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1540716616, "post_id": 53027629, "comment_id": 92960446, "body": "Try <code>AnyEvent::Fork</code> <a href=\"https://metacpan.org/pod/AnyEvent::Fork\" rel=\"nofollow noreferrer\">metacpan.org/pod/AnyEvent::Fork</a>."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1540721215, "post_id": 53027629, "comment_id": 92961483, "body": "Step one for any optimization is to measure. Then, use a profiler to identify how much time is spent where exactly. Then, and only then, think about different approcahes to optimize."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540734767, "post_id": 53027629, "comment_id": 92964826, "body": "Please show more of your code, not everyone on the perl tag is familiar with bioinformatics, but may still help you with parallelization if given more details.."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540755203, "post_id": 53027629, "comment_id": 92970808, "body": "One error may be because <code>$c-value</code> is not a valid Perl identifier. If you&#39;re using strict and warnings (you should) this will cause an error due to the value bareword. Only word characters (letters, digits, underscore) are valid in Perl identifiers."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540756382, "post_id": 53027629, "comment_id": 92971177, "body": "Also <code>foreach my $gene($sequence){</code> doesn&#39;t make sense, it will only run once because you provided one scalar value for it to iterate over."}, {"owner": {"reputation": 23, "user_id": 5518239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf9db7fb06f161831e49d08704a526c?s=128&d=identicon&r=PG&f=1", "display_name": "Soham Sengupta", "link": "https://stackoverflow.com/users/5518239/soham-sengupta"}, "edited": false, "score": 0, "creation_date": 1540776025, "post_id": 53027629, "comment_id": 92975213, "body": "Thank you for suggestions and comments. I have modified the code. Kindly see, I have edited the main post."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540798684, "post_id": 53027629, "comment_id": 92980789, "body": "No, you can&#39;t write from a child to parent directly.  For complete examples of how to pass data back with <code>Parallel::ForkManager</code> see <a href=\"https://stackoverflow.com/a/41891334/4653379\">this post</a> (and a link in it, and linked documentation)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540840569, "post_id": 53027629, "comment_id": 93004227, "body": "Your code still has all of the same problems I pointed out. Parallel::ForkManager and IO::Async::Function both provide mechanisms for returning the result of the child process to the parent for you."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1540771219, "last_edit_date": 1540771219, "creation_date": 1540756015, "answer_id": 53035460, "question_id": 53027629, "link": "https://stackoverflow.com/questions/53027629/using-threads-on-dna-sequence-analysis-with-perl/53035460#53035460", "title": "Using threads on DNA sequence analysis with Perl", "body": "<p>One option is <a href=\"https://metacpan.org/pod/IO::Async::Function\" rel=\"nofollow noreferrer\">IO::Async::Function</a>, which will use forks or threads depending what OS you're on (forking is much more efficient on Unixy systems), and maintain a set of worker processes/threads to run the code in parallel. It returns <a href=\"https://metacpan.org/pod/Future\" rel=\"nofollow noreferrer\">Future</a> instances which can be used to synchronize the async code as you need. There are lots of ways to use Future, a couple are presented below.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Async::Loop;\nuse IO::Async::Function;\nuse Future;\n\nmy $loop = IO::Async::Loop-&gt;new;\n# additional options can be passed to the IO::Async::Function constructor to control how the workers are managed\nmy $function = IO::Async::Function-&gt;new(code =&gt; \\&amp;calculate);\n$loop-&gt;add($function);\n\nmy @futures;\nforeach my $gene($sequence){\n     my @coordinates = split(\"\\t\",$gene);\n     my $model1 = substr($sequence, $coordinates[1], 50);\n     my $model2 = substr($sequence, $coordinates[1], 60);\n     push @futures, $function-&gt;call(args =&gt; [$model1, $model2])-&gt;on_done(sub {\n         my $c_value = shift;\n         # further code using $c_value must be here, to be run once the calculation is done\n     })-&gt;on_fail(sub {\n         warn \"Error in calculation for $gene: $_[0]\\n\";\n     });\n}\n\n# wait for all calculations and on_done handlers before continuing\nFuture-&gt;wait_all(@futures)-&gt;await;\n</code></pre>\n\n<p>If you want the program to stop immediately if there's an exception in one of the calculations, you can use needs_all and remove the individual on_fail handlers, and use <code>get</code> which is a wrapper of <code>await</code> that will then return all of the c-values in order if they succeed, or throw an exception if one fails.</p>\n\n<pre><code>my @c_values = Future-&gt;needs_all(@futures)-&gt;get;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5518239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf9db7fb06f161831e49d08704a526c?s=128&d=identicon&r=PG&f=1", "display_name": "Soham Sengupta", "link": "https://stackoverflow.com/users/5518239/soham-sengupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1540797550, "creation_date": 1540689881, "last_edit_date": 1540797550, "question_id": 53027629, "link": "https://stackoverflow.com/questions/53027629/using-threads-on-dna-sequence-analysis-with-perl", "title": "Using threads on DNA sequence analysis with Perl", "body": "<p>I have an example DNA sequence like:\n<code>S = ATGCGGGCGTGCTGCTGGGCTGCT....</code> of length 5MB size.\nAlso, I have the gene coordinates for each gene like:</p>\n\n<pre><code>Gene no. Start End\n1          1    50\n2         60    100\n3         110   250\n.....\n4000      4640942 4641628 \n</code></pre>\n\n<p>My goal is to perform a certain calculation for every gene start position. My code is working perfectly. However, it is quite slow. I have gone through many help pages for making it faster using threads but unfortunately couldn't figure out.</p>\n\n<p>Here's the summary of my code:</p>\n\n<pre><code>foreach my $gene($sequence){\n     my @coordinates = split(\"\\t\",$gene);\n     $model1 = substr($sequence, $coordinates[1], 50);\n     $model2 = substr($sequence, $coordinates[1], 60);\n     $c-value = calculate($model1, $model2);\n     ....\n}\n\nsub calculate {\n     ......\n}\n</code></pre>\n\n<p>I would really appreciate if anyone can suggest me how to parallelize this kind of programs. What I want to parallelize is the calculation of c-value between model1 and model2 for each gene, which ultimately will fasten the process.\nI have tried using Threads::queue but ended with a bunch of errors. I'm fairly new to Perl programming so any help is highly appreciated.</p>\n\n<p><strong>Thank you, everyone, for your comments and suggestions. I have modified the code and it seems to be working using the Perl module Parallel::ForkManager. The code is successfully using all of the 4 cores of my computer.</strong></p>\n\n<p>Here's the modified code:</p>\n\n<pre><code>    use strict;\n    use warnings;\n    use Data::Dumper;\n    use Parallel::ForkManager;\n    my $threads = 4;\n    my $pm = new Parallel::ForkManager($threads);\n    my $i = 1; #gene number counter\n    $pm -&gt; run_on_finish( sub { $i++; print STDERR \"Checked $i genes\" if ($i % $number_of_genes == 0); } ); \n    my @store_c_value = ();\n    foreach my $gene($sequence){\n                 my $pid = $pm-&gt;start and next;\n                 my @coordinates = split(\"\\t\",$gene);\n                 my $model1 = substr($sequence, $coordinates[1], 50);\n                 my $model2 = substr($sequence, $coordinates[1], 60);\n                 my $c-value = calculate($model1, $model2);\n                 push(@store_c_value, $c-value);\n                 $i++;\n                 $pm-&gt;finish;\n            }\n    $pm-&gt;wait_all_children;\n            sub calculate {\n                 ......\n                 return ($c-value);\n            }\n    print Dumper \\@store_c_value;\n</code></pre>\n\n<p>The current issue is I'm not getting any output for <code>@store_c_value</code>(i.e. empty array). I found that you can't store the data from a child process to an array, which was declared in the main program.\nI know I can print it to an external file, but I want this data to be in the <code>@store_c_value</code> array as I'm using it again later on in the program. </p>\n\n<p>Thank you again for helping me out.</p>\n"}, {"tags": ["php", "bash", "apache", "shell", "perl"], "answers": [{"comments": [{"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540688075, "post_id": 53027483, "comment_id": 92956591, "body": "The one you say it works, it is the next one which doesn&#39;t, I will try though! .... it does not work!"}, {"owner": {"reputation": 552, "user_id": 4336358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJ0axwXJaAg/AAAAAAAAAAI/AAAAAAAAACo/pE8621M3p2w/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041b\u0443\u0431\u044b\u0448\u0435\u0432", "link": "https://stackoverflow.com/users/4336358/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9b%d1%83%d0%b1%d1%8b%d1%88%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540688225, "post_id": 53027483, "comment_id": 92956606, "body": "$cmd = &quot;cut -f 1 tagtmp/&#39;$fileid.vrt&#39; | /[full_path]/tagfl2/treetagger/bin/tree-tagger -no-unknown -token -lemma /[full_path]/tagfl2/treetagger/lib/english.par  &gt; &#39;tagtmp/$fileid.tagged&#39;&quot;;"}, {"owner": {"reputation": 552, "user_id": 4336358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJ0axwXJaAg/AAAAAAAAAAI/AAAAAAAAACo/pE8621M3p2w/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041b\u0443\u0431\u044b\u0448\u0435\u0432", "link": "https://stackoverflow.com/users/4336358/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9b%d1%83%d0%b1%d1%8b%d1%88%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540688293, "post_id": 53027483, "comment_id": 92956612, "body": "And there set full path?"}, {"owner": {"reputation": 552, "user_id": 4336358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJ0axwXJaAg/AAAAAAAAAAI/AAAAAAAAACo/pE8621M3p2w/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041b\u0443\u0431\u044b\u0448\u0435\u0432", "link": "https://stackoverflow.com/users/4336358/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9b%d1%83%d0%b1%d1%8b%d1%88%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540688546, "post_id": 53027483, "comment_id": 92956655, "body": "Which line has an error? Set <code>die &#39;here&#39;;</code> after every line while this message are disapear"}, {"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540688784, "post_id": 53027483, "comment_id": 92956679, "body": "The line with errors is the one with the 3 lines of comments before it"}], "tags": [], "owner": {"reputation": 552, "user_id": 4336358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJ0axwXJaAg/AAAAAAAAAAI/AAAAAAAAACo/pE8621M3p2w/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u041b\u0443\u0431\u044b\u0448\u0435\u0432", "link": "https://stackoverflow.com/users/4336358/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%9b%d1%83%d0%b1%d1%8b%d1%88%d0%b5%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1540687956, "creation_date": 1540687956, "answer_id": 53027483, "question_id": 53027438, "link": "https://stackoverflow.com/questions/53027438/binary-file-not-executed-for-web-user/53027483#53027483", "title": "Binary file not executed for web user", "body": "<p>Try to define a full path to the script</p>\n\n<pre><code>$cmd = \"perl /[full_path]/makevrt.pl 'xmlfiles/$fileid.xml' &gt; 'tagtmp/$fileid.vrt'\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540726758, "post_id": 53030825, "comment_id": 92962772, "body": "I&#39;ve done as you advice but on <code>su -c &#39;ls -R tagfl2&#47;&#39; www-data</code>  I get <b>This account is currently not available</b> and the command does not run anyway"}, {"owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540730508, "post_id": 53030825, "comment_id": 92963756, "body": "Ok. Try with additional option -m to preserve the parent environment. <b>su -m -c &#39;ls -R tagfl2/&#39; www-data</b>"}, {"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540731034, "post_id": 53030825, "comment_id": 92963882, "body": "Well now I see this result tagfl2/: en.cfg\tmakevrt.pl  mrg  mrg.pl  tagfile.pl  tagged  tagxml.pl\ttreetagger  vrtfiles  xmlfiles ...... etc. (all the files and directories inside tagfl2) included <b>tagfl2/treetagger/bin: separate-punctuation  train-tree-tagger  tree-tagger</b>"}, {"owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540744452, "post_id": 53030825, "comment_id": 92967554, "body": "Ok, so it should no more be a permission issue. Could you use bash +x when executing your script? Or copy/paste the whole script? I guess the issue is somewhere else in your script."}, {"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540747389, "post_id": 53030825, "comment_id": 92968317, "body": "The shell script that lunches the perl script now starts like this: <code>#! &#47;bin&#47;bash +x</code> but still does not work"}, {"owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1540752028, "post_id": 53030825, "comment_id": 92969844, "body": "No, I meant you must launch the command, prefixing it by bash -x, and sending the output here, to see exactly which instruction is failing."}, {"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "reply_to_user": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "edited": false, "score": 0, "creation_date": 1540814759, "post_id": 53030825, "comment_id": 92989576, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182722/discussion-between-andres-chandia-and-bsquare\">continue this discussion in chat</a>."}, {"owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "reply_to_user": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1541510739, "post_id": 53030825, "comment_id": 93235358, "body": "If our chat was successful: On Stackoverflow you could give <a href=\"https://stackoverflow.com/help/privileges/vote-up\">up-vote</a> to people&#39;s helpful answers to thank them and select any one of the answer as <a href=\"https://stackoverflow.com/help/someone-answers\">correct answer</a> too out of all."}, {"owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "edited": false, "score": 0, "creation_date": 1541535917, "post_id": 53030825, "comment_id": 93249002, "body": "No it wasn&#39;t it seems there is a problem with the mounted unity at the virtual server"}], "tags": [], "owner": {"reputation": 4231, "user_id": 10524205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81adbc979c58baca9d3e85db4a7ea421?s=128&d=identicon&r=PG", "display_name": "Bsquare \u212c\u212c", "link": "https://stackoverflow.com/users/10524205/bsquare-%e2%84%ac%e2%84%ac"}, "is_accepted": false, "score": 0, "last_activity_date": 1540730515, "last_edit_date": 1540730515, "creation_date": 1540724922, "answer_id": 53030825, "question_id": 53027438, "link": "https://stackoverflow.com/questions/53027438/binary-file-not-executed-for-web-user/53030825#53030825", "title": "Binary file not executed for web user", "body": "<p>Why did you update <strong>user ownership</strong>?\nChanging the <strong>group ownership</strong> should have been enough:</p>\n\n<pre><code>chgrp -R www-data tagfl2/\nchmod -R g+rwX tagfl2/\n</code></pre>\n\n<p>And change the lowercase x by a greater one, to give access/execution permission, only if it is already the case for the user owner (no need to give otherwise).</p>\n\n<p>You may then check the permission like this:</p>\n\n<pre><code>su -m -c 'ls -R tagfl2/' www-data\n</code></pre>\n\n<p>And see if you reproduce access issue; and then update permission accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "is_accepted": true, "score": 0, "last_activity_date": 1541586195, "creation_date": 1541586195, "answer_id": 53187532, "question_id": 53027438, "link": "https://stackoverflow.com/questions/53027438/binary-file-not-executed-for-web-user/53187532#53187532", "title": "Binary file not executed for web user", "body": "<p>Ok, all solved, one thing was giving the file system, actually the mounted unit, the exec attribution.</p>\n\n<p>The second thing was moving <strong>treetagger</strong> directory to <code>/usr/local/</code></p>\n\n<p>Then, at <code>/usr/local/bin/</code> I have created a soft link this way:</p>\n\n<pre><code>ln -s ../treetagger/bin/tree-tagger\n</code></pre>\n\n<p>Making the binary file globally executable. Actually, this last step was the ultimate solution.</p>\n\n<p>Then at the <strong>tagfile.pl</strong> perl script, the line containing the <strong>tree-tagger</strong> command, I have changed it this way:</p>\n\n<pre><code>cut -f 1 'tagtmp/$fileid.vrt' | /usr/local/bin/tree-tagger -no-unknown -token -lemma tagfl2/treetagger/lib/english.par  &gt; 'tagtmp/$fileid.tagged'\n</code></pre>\n"}], "owner": {"reputation": 807, "user_id": 443381, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f3832f913395119259ee11d04c87dcf4?s=128&d=identicon&r=PG", "display_name": "Andr&#233;s Chand&#237;a", "link": "https://stackoverflow.com/users/443381/andr%c3%a9s-chand%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53187532, "answer_count": 3, "score": 0, "last_activity_date": 1541586195, "creation_date": 1540687065, "last_edit_date": 1540687440, "question_id": 53027438, "link": "https://stackoverflow.com/questions/53027438/binary-file-not-executed-for-web-user", "title": "Binary file not executed for web user", "body": "<p>I have a php script that creates a shell script file that finally executes as the www-data user, all of the commands are executed except for the last one which implies a binary file. If I run the command as root, it runs ok...</p>\n\n<p>This is the last part of the script:</p>\n\n<pre><code>&amp;&amp; echo \"Tokenizing the file........\" &gt;&gt; Logs/table_of_contents.php \\\n&amp;&amp; perl ../common/Scripts/xmltokenize.pl --filename=xmlfiles/table_of_contents.xml &gt;&gt; Logs/table_of_contents.php \\\n&amp;&amp; perl ../common/Scripts/xmlrenumber.pl --filename=xmlfiles/table_of_contents.xml &gt;&gt; Logs/table_of_contents.php \\\n&amp;&amp; echo \"Tagging the file........\" &gt;&gt; Logs/table_of_contents.php \\\n\n# I have added this line to check if it helps but id doesn't\n&amp;&amp; export HOME=\"/tmp/\" \\\n\n# And this is the command that calls the binary file\n&amp;&amp; perl tagfile.pl xmlfiles/table_of_contents.xml \\\n</code></pre>\n\n<p>Here you have the content of the <strong>tagfile.pl</strong></p>\n\n<pre><code>use File::Find;\n$\\ = \"\\n\";\n\n$fn = shift;\n\nif ( $fn =~ /([^\\/\\.]+)\\.xml/ ) { $fileid = $1; } else { exit;};\nprint $fileid;\n\n$cmd = \"perl tagfl2/makevrt.pl 'xmlfiles/$fileid.xml' &gt; 'tagtmp/$fileid.vrt'\";\nprint $cmd;\nprint `$cmd`;\n\n#ALL OF THE PREVIOUS WORKS\n#THIS IS THE ONE THAT GIVES PERMISSION ERRORS \n# OF COURSE: \"www-data:www-data tagtmp/\" and \"www-data:www-data $fileid.vrt = table_of_contents.vrt\"\n$cmd = \"cut -f 1 tagtmp/'$fileid.vrt' | tagfl2/treetagger/bin/tree-tagger -no-unknown -token -lemma tagfl2/treetagger/lib/english.par  &gt; 'tagtmp/$fileid.tagged'\";\nprint $cmd;\n`$cmd`;\n$cmd = \"perl tagfl2/mrg.pl 'tagtmp/$fileid.vrt' 'tagtmp/$fileid.tagged' &gt; 'tagtmp/$fileid.mrg'\";\nprint $cmd;\n`$cmd`;\n$cmd = \"perl tagfl2/tagxml.pl 'tagtmp/$fileid.mrg' 'xmlfiles/$fileid.xml'\";\nprint $cmd;\n`$cmd`;\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>sh: 1: tagfl2/treetagger/bin/tree-tagger: Permission denied\n</code></pre>\n\n<p>Also, just in case: </p>\n\n<pre><code>chown -R www-data:www-data tagfl2/\nchmod -R g+rwx tagfl2/\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540725773, "post_id": 53026044, "comment_id": 92962532, "body": "To be fair: Just like karakfa makes assumptions, you also do. This solution works only if all the paragraph strings start with the subject word (which is consistent with the example, but not with the question text - and so is karakfa&#39;s answer). If that&#39;s not the case, your awk will not remove <i>all</i> the words, not even once, it will remove something else instead. This is handled better by karakfa."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540728145, "post_id": 53026044, "comment_id": 92963128, "body": "There are reasonable assumptions and then there are unreasonable assumptions. When sample input always includes a generic string like &quot;sample&quot; in a specific position it&#39;s reasonable to assume a string &quot;sample&quot; does always appear in that position. It&#39;s also reasonable to assume that the poster wants it treated as a string rather than a regular expression and so if &quot;sample&quot; contains RE metachars they should be treated literally unless otherwise stated. It&#39;s NOT reasonable to assume that &quot;sample&quot; will always literally be the word &quot;sample&quot; or even that it will always contain non-RE meta-characters"}, {"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540728787, "post_id": 53026044, "comment_id": 92963273, "body": "I agree that it should be treated as string, but I disagree on the position and on the number of matches. Why? Because of two indications: (1) The question text itself states it clearly and (2) His <code>sed</code> expression contains a <code>g</code>. In the past you&#39;ve been eagerly encouraging users to add hints about possible drawbacks. (In fact that&#39;s the reason for the second sentence in my <code>sed</code> solution.) So I guess you should add a note about that here."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540730153, "post_id": 53026044, "comment_id": 92963668, "body": "His sed expression is simply wrong. Please clarify &quot;The question text itself states it clearly&quot; - states what and where?"}, {"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540731122, "post_id": 53026044, "comment_id": 92963913, "body": "(1) &quot;remove the string from all of the section&#39;s contents&quot;. (2) The sed is simply wrong, yes, but i find it quite clever: Apparently he was trying to apply <code>s&#47;\\1&#47;&#47;g</code> for each line of a section. A section starts with <code>[[:alpha:]]+</code> and ends with <code>^$</code>. Finally he was adding parens in order to be able to reference the section start in the <code>s</code> command. Just a few problems: First, the group isn&#39;t available in the <code>s</code> command any more, second, unlike in vim e. g. he can&#39;t <code>&#47;...&#47;+1,&#47;...&#47;</code> and third, he had to handle the last line. But you can get some information out of that attempt."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540731249, "post_id": 53026044, "comment_id": 92963944, "body": "IMHO it&#39;s extremely clear that he&#39;s simply talking about removing the header string from the start of each line of the section as evidenced by the sample input he provided. The sed script is just him trying to some up with something that&#39;ll do what he wants  - all we can determine from it is that it doesn&#39;t do what he wants."}, {"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 1, "creation_date": 1540731432, "post_id": 53026044, "comment_id": 92963996, "body": "OK, I agree, you should not mention it."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 5, "last_activity_date": 1540672375, "creation_date": 1540672375, "answer_id": 53026044, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53026044#53026044", "title": "Using sed/awk to remove string from subsections", "body": "<pre><code>$ awk '{$0=substr($0,idx)} !idx{idx=length($0)+1} !NF{idx=0} 1' file\nbar\nfo\nfoo\nfooo\nfoooo\n\nsample\nText1\nText2\nText3\n\nprefix\nFooBar\nBarFoo\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1540672785, "post_id": 53026085, "comment_id": 92953936, "body": "That will fail if the first string in a block contains RE metachars or is numerically equal to zero."}, {"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "edited": false, "score": 0, "creation_date": 1540725865, "post_id": 53026085, "comment_id": 92962556, "body": "This will also not work if the first string contains whitespace."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 3, "last_activity_date": 1540672691, "creation_date": 1540672691, "answer_id": 53026085, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53026085#53026085", "title": "Using sed/awk to remove string from subsections", "body": "<p>another <code>awk</code></p>\n\n<pre><code>$ awk '{sub(pre,\"\")}1; !NF{pre=\"\"} !pre{pre=$1}' file\n\nbar\nfo\nfoo\nfooo\nfoooo\n\nsample\nText1\nText2\nText3\n\nprefix\nFooBar\nBarFoo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1540676015, "creation_date": 1540676015, "answer_id": 53026469, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53026469#53026469", "title": "Using sed/awk to remove string from subsections", "body": "<p>A sed solution, mostly to illustrate that sed is probably not the best choice to do this:</p>\n\n<pre><code>$sed -E '1{h;b};/^$/{n;h;b};G;s/^(.*)(.*)\\n\\1$/\\2/' infile\nbar\nfo\nfoo\nfooo\nfoooo\n\nsample\nText1\nText2\nText3\n\nprefix\nFooBar\nBarFoo\n</code></pre>\n\n<p>Here is how it works:</p>\n\n<pre><code>1 {                   # on the first line\n  h                   # copy pattern buffer to hold buffer\n  b                   # skip to end of cycle\n}\n/^$/ {                # if line is empty\n  n                   # get next line into pattern buffer\n  h                   # copy pattern buffer to hold buffer\n  b                   # skip to end of cycle\n}\nG                     # append hold buffer to pattern buffer\ns/^(.*)(.*)\\n\\1$/\\2/  # substitute\n</code></pre>\n\n<p>The complex part is in the substitution. Before the substitution, the pattern buffer holds something like this:</p>\n\n<pre><code>prefixFooBar\\nprefix\n</code></pre>\n\n<p>The substitution now matches two capture groups, the first of which is referenced by what's between <code>\\n</code> and the end of the string &ndash; the prefix we fetched from the hold buffer.</p>\n\n<p>The replacement is then the rest of the original line, with the prefix removed.</p>\n\n<p>Remarks: </p>\n\n<ul>\n<li>This works with GNU sed; older GNU sed version might need <code>-r</code> instead of <code>-E</code></li>\n<li><p><code>-E</code> is just for convenience; without it, the substitution would look like</p>\n\n<pre><code>s/^\\(.*\\)\\(.*\\)\\n\\1$/\\2/\n</code></pre>\n\n<p>but still work.</p></li>\n<li><p>For macOS sed, it works with literal linebreaks between commands:</p>\n\n<pre><code>sed -E '1{\nh\nb\n}\n/^$/{\nn\nh\nb\n}\nG\ns/^(.*)(.*)\\n\\2$/\\2/' infile\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "is_accepted": false, "score": 1, "last_activity_date": 1540680193, "last_edit_date": 1540680193, "creation_date": 1540679851, "answer_id": 53026877, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53026877#53026877", "title": "Using sed/awk to remove string from subsections", "body": "<p>Here's another <code>sed</code> solution. It works only if all strings in a paragraph <em>start</em> with the subject line.</p>\n\n<pre><code>sed -e '1{h;b};/^$/{n;h;b};H;g;s/\\(.*\\)\\n\\1//;p;g;s/\\n.*//;h;d' file\n</code></pre>\n\n<ul>\n<li><code>1</code> first line: <code>h</code> copy to hold space, <code>b</code> print and continue with next line</li>\n<li><code>/^$/</code> empty lines: <code>n</code> print it and read next line, <code>h</code> copy to hold space, <code>b</code> print and continue</li>\n<li>all (the other) lines:\n\n<ul>\n<li><code>H</code> append to hold space with newline</li>\n<li><code>g</code> copy hold space to pattern space</li>\n<li><code>s/\\(.*\\)\\n\\1//</code> remove first line and it's contents in the second line from pattern space</li>\n<li><code>p</code> print pattern space</li>\n<li><code>g</code> copy hold space to pattern space in order to remove the new contents from <code>H</code></li>\n<li><code>/\\n.*//</code> remove the new contents</li>\n<li><code>h</code> copy back to hold space</li>\n<li><code>d</code> delete pattern space</li>\n</ul></li>\n</ul>\n\n<p><code>sed</code> is not useful for these things.</p>\n\n<p>You get 'Invalid back reference' because there's no group in the search pattern of <code>s</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1540692741, "last_edit_date": 1540692741, "creation_date": 1540682128, "answer_id": 53027090, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53027090#53027090", "title": "Using sed/awk to remove string from subsections", "body": "<pre><code>perl -ple'\n   if (!length($_)) { $re = \"\" }\n   elsif (!length($re)) { $re = $_ }\n   else { s/^\\Q$re// }\n'\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Use <code>s/\\Q$re//g</code> to remove anywhere in the line instead of just removing the prefix.</li>\n<li>This works even with the header line includes special characters such as <code>\\</code>, <code>.</code> and <code>*</code>.</li>\n<li>This works even if there are multiple blank lines in a row.</li>\n<li>See <a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a> for complete usage.</li>\n<li>The line breaks in the code are optional (i.e. can be removed).</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1540722627, "creation_date": 1540722627, "answer_id": 53030504, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53030504#53030504", "title": "Using sed/awk to remove string from subsections", "body": "<p>Another in awk:</p>\n\n<pre><code>$ awk '{if(p&amp;&amp;match($0,\"^\" p))$0=substr($0,RLENGTH+1);else p=$0}1' file\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>bar\nfo\nfoo\nfooo\nfoooo\n\nsample\nText1\nText2\nText3\n\nprefix\nFooBar\nBarFoo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "is_accepted": false, "score": 1, "last_activity_date": 1540728989, "last_edit_date": 1540728989, "creation_date": 1540726302, "answer_id": 53031025, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53031025#53031025", "title": "Using sed/awk to remove string from subsections", "body": "<p>Here's another awk solution:</p>\n\n<pre><code>awk '{gsub(s,\"\")}1; s==\"\"||!NF{s=$0}' file\n</code></pre>\n\n<p>Pros:</p>\n\n<ul>\n<li>Matches are replaced, wherever they are</li>\n<li><em>All</em> matches are replaced</li>\n<li>Head line may evaluate to <code>0</code>/ <code>false</code>.</li>\n<li>Head line may contain whitespace</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Head line must not contain regular expression meta chars</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1540736988, "creation_date": 1540736988, "answer_id": 53032580, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections/53032580#53032580", "title": "Using sed/awk to remove string from subsections", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed 'G;s/^\\(.\\+\\)\\(.*\\)\\n\\1$/\\2/;t;s/\\n.*//;h' file\n</code></pre>\n\n<p>Append the previous key (or nothing if it is the first line) to the current line. Remove the key and the previous key if they match, print the current line and repeat. Otherwise the key did not match, remove the old appended key, store the new key in the hold space and print the new key.</p>\n"}], "owner": {"reputation": 71, "user_id": 6095661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vc1xv.jpg?s=128&g=1", "display_name": "Clyybber", "link": "https://stackoverflow.com/users/6095661/clyybber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "accepted_answer_id": 53027090, "answer_count": 8, "score": 4, "last_activity_date": 1540736988, "creation_date": 1540672065, "question_id": 53026000, "link": "https://stackoverflow.com/questions/53026000/using-sed-awk-to-remove-string-from-subsections", "title": "Using sed/awk to remove string from subsections", "body": "<p>I have a file that looks like this:</p>\n\n<pre><code>bar\nbarfo\nbarfoo\nbarfooo\nbarfoooo\n\nsample\nsampleText1\nsampleText2\nsampleText3\n\nprefix\nprefixFooBar\nprefixBarFoo\n</code></pre>\n\n<p>What I want sed (or awk) to do is to remove the string which introduces a section, from all of its contents, so that I end up with:</p>\n\n<pre><code>bar\nfo\nfoo\nfooo\nfoooo\n\nsample\nText1\nText2\nText3\n\nprefix\nFooBar\nBarFoo\n</code></pre>\n\n<p>I tried using</p>\n\n<pre><code>sed -e -i '/([[:alpha:]]+)/,/^$/ s/\\1//g' file\n</code></pre>\n\n<p>But that fails with \"Invalid Backreference\".</p>\n"}, {"tags": ["regex", "perl", "warnings", "substitution"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1540661241, "post_id": 53024491, "comment_id": 92950875, "body": "What if you replace <code>$1$2</code> with <code>$&amp;</code>? BTW, your current pattern is invalid."}, {"owner": {"reputation": 113, "user_id": 1041414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b977de83aa7e74be30fc7282873ed512?s=128&d=identicon&r=PG", "display_name": "okolnost", "link": "https://stackoverflow.com/users/1041414/okolnost"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1540661720, "post_id": 53024491, "comment_id": 92951018, "body": "@WiktorStribi\u017cew Yep, I just fixed the typo in regex, thanks for noticing. <code>$&amp;</code> seems promising (I mean, definitely better than what I have now). Will using it produce warning if neither alternative is matched? If it does, any idea how to avoid that?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1540661820, "post_id": 53024491, "comment_id": 92951049, "body": "<code>$&amp;</code> is the whole match placeholder, and if you use it, remove all capturing groups as they become redundant (<code>s&#47;(?&lt;![&quot;\\w])\\w+(?=:)|(?&lt;=:)[\\w\\\\.+=\\&#47;]+&#47;&quot;$&amp;&quot;&#47;g</code>). If you need to use <code>$1</code>, use <code>s&#47;(?|(?&lt;![&quot;\\w])(\\w+)(?=:)|(?&lt;=:)([\\w\\\\.+=\\&#47;]+))&#47;&quot;$1&quot;&#47;g</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540674734, "post_id": 53024491, "comment_id": 92954392, "body": "Since it&#39;s not actually a problem that $1 or $2 is undefined (the warning is unfortunately misworded) and results in the empty string, you can also disable that warning in the lexical scope where you run that regex. <code>{ no warnings &#39;uninitialized&#39;; $string =~ ...; }</code>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 2, "last_activity_date": 1540671608, "last_edit_date": 1540671608, "creation_date": 1540667404, "answer_id": 53025386, "question_id": 53024491, "link": "https://stackoverflow.com/questions/53024491/how-to-avoid-warnings-in-perl-regex-substitution-with-alternatives/53025386#53025386", "title": "How to avoid warnings in Perl regex substitution with alternatives?", "body": "<p>There are a couple of approaches to get around this.  </p>\n\n<p>If you intend to use capture groups:  </p>\n\n<ul>\n<li><p>When capturing the entirety of each clause of the alternation.<br>\nCombine the capture groups into 1 and move the group out.  </p>\n\n<pre><code> (                             # (1 start)\n      (?&lt;! [\"\\w] )\n      \\w+ \n      (?= : )\n   |  \n      (?&lt;= : )\n      [\\w\\d\\\\.+=/]+ \n )                             # (1 end)\n</code></pre>\n\n<p><code>s/((?&lt;![\"\\w])\\w+(?=:)|(?&lt;=:)[\\w\\d\\\\.+=\\/]+)/\"$1\"/g</code></p></li>\n<li><p>Use a <em>Branch Reset</em> construct <code>(?| aaa )</code>.<br>\nThis will cause capture groups in each alternation to start numbering it's groups<br>\nfrom the same point.  </p>\n\n<pre><code> (?|\n      (?&lt;! [\"\\w] )\n      ( \\w+ )                       # (1)\n      (?= : )\n   |  \n      (?&lt;= : )\n      ( [\\w\\d\\\\.+=/]+ )             # (1)\n )\n</code></pre>\n\n<p><code>s/(?|(?&lt;![\"\\w])(\\w+)(?=:)|(?&lt;=:)([\\w\\d\\\\.+=\\/]+))/\"$1\"/g</code>  </p></li>\n<li><p>Use <em>Named</em> capture groups that are re-useable (Similar to a branch reset).<br>\nIn each alternation, reuse the same names. Make the group that isn't relevant, the empty group.<br>\nThis works by using the <em>name</em> in the substitution instead of the number.  </p>\n\n<pre><code>    (?&lt;! [\"\\w] )\n    (?&lt;V1&gt; \\w+ )                  # (1)\n    (?&lt;V2&gt; )                      # (2)\n    (?= : )\n |  \n    (?&lt;= : )\n    (?&lt;V1&gt; )                      # (3)\n    (?&lt;V2&gt; [\\w\\d\\\\.+=/]+ )        # (4)\n</code></pre>\n\n<p><code>s/(?&lt;![\"\\w])(?&lt;V1&gt;\\w+)(?&lt;V2&gt;)(?=:)|(?&lt;=:)(?&lt;V1&gt;)(?&lt;V2&gt;[\\w\\d\\\\.+=\\/]+)/\"$+{V1}$+{V2}\"/g</code></p></li>\n</ul>\n\n<hr>\n\n<p>The two concepts of the named substitution and a branch reset can be combined<br>\nif an alternation contains more than 1 capture group.<br>\nThe example below uses the capture group numbers.   </p>\n\n<p>The theory is that you put <em>dummy</em> capture groups in each alternation to<br>\n\"pad\" the branch  to equal the largest number of groups in a single alternation.  </p>\n\n<p>Indeed, this <em>must</em> be done to avoid the bug in Perl regex that could cause a crash.  </p>\n\n<pre><code> (?|                    # Branch Reset\n                             # ------ Br 1 --------\n      ( )                    # (1)\n      ( \\d{4} )              # (2)\n      ABC294\n      ( [a-f]+ )             # (3)\n   |  \n                             # ------ Br 2 --------          \n      ( :: )                 # (1)\n      ( \\d+ )                # (2)\n      ABC555\n      ( )                    # (3)\n   |  \n                             # ------ Br 3 --------\n      ( == )                 # (1)\n      ( )                    # (2)\n      ABC18888\n      ( )                    # (3)\n )\n</code></pre>\n\n<p><code>s/(?|()(\\d{4})ABC294([a-f]+)|(::)(\\d+)ABC555()|(==)()ABC18888())/\"$1$2$3\"/g</code>  </p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1540674467, "creation_date": 1540674467, "answer_id": 53026285, "question_id": 53024491, "link": "https://stackoverflow.com/questions/53024491/how-to-avoid-warnings-in-perl-regex-substitution-with-alternatives/53026285#53026285", "title": "How to avoid warnings in Perl regex substitution with alternatives?", "body": "<p>You can try using <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a>'s <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS#$json-=-$json-%3Erelaxed-([$enable])\" rel=\"nofollow noreferrer\">relaxed mode</a>, or <a href=\"https://metacpan.org/pod/JSONY\" rel=\"nofollow noreferrer\">JSONY</a>, to parse the almost-JSON and then write out regular JSON using Cpanel::JSON::XS. Depending what exactly is wrong with your input data one or the other might understand it better.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Cpanel::JSON::XS 'encode_json';\n\n# JSON is normally UTF-8 encoded; if you're reading it from a file, you will likely need to decode it from UTF-8\nmy $string = q&lt;{foo: 1,bar:'baz',}&gt;;\n\nmy $data = Cpanel::JSON::XS-&gt;new-&gt;relaxed-&gt;decode($string);\nmy $json = encode_json $data;\nprint \"$json\\n\";\n\nuse JSONY;\nmy $data = JSONY-&gt;new-&gt;load($string);\nmy $json = encode_json $data;\nprint \"$json\\n\";\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 1041414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b977de83aa7e74be30fc7282873ed512?s=128&d=identicon&r=PG", "display_name": "okolnost", "link": "https://stackoverflow.com/users/1041414/okolnost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53025386, "answer_count": 2, "score": 1, "last_activity_date": 1540674467, "creation_date": 1540661078, "last_edit_date": 1540661307, "question_id": 53024491, "link": "https://stackoverflow.com/questions/53024491/how-to-avoid-warnings-in-perl-regex-substitution-with-alternatives", "title": "How to avoid warnings in Perl regex substitution with alternatives?", "body": "<p>I have this regex.</p>\n\n<pre><code>$string =~ s/(?&lt;![\"\\w])(\\w+)(?=:)|(?&lt;=:)([\\w\\d\\\\.+=\\/]+)/\"$1$2\"/g;\n</code></pre>\n\n<p>The regex itself works fine.</p>\n\n<p>But since I am am substituting alternatives (and globally), I always get warning that $1 or $2 is uninitialized. These warnings clutter my logfile.</p>\n\n<p>What can I do better to avoid such warning?\nOr is my best option to just turn the warning off? I doubt this.</p>\n\n<p><em>Side question: Is there possibly some better way of doing this, e.g. not using regex at all?\nWhat I am doing is fixing JSON where some key:value pairs do not have double quotes and JSON module does not like it when trying to decode.</em></p>\n"}, {"tags": ["perl", "dancer"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1540658774, "post_id": 53024072, "comment_id": 92950222, "body": "Looks like it&#39;s meant to support 5.8, but <a href=\"http://www.cpantesters.org/cpan/report/6939e71a-81cc-11e8-b18d-822462266ff8\" rel=\"nofollow noreferrer\">one test currently requires 5.10</a> for no reason. You might want to report it as a bug against Dancer2."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1540669165, "post_id": 53024072, "comment_id": 92953021, "body": "They are seriously supplying a version  which was released 12 years ago (5.8.8 according to <a href=\"https://www.godaddy.com/help/perl-details-on-linux-shared-hosting-2503?\" rel=\"nofollow noreferrer\">this</a>) and is long out of life? If the rest of their infrastructure and security is similar outdated you might better use a different provider."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540671335, "post_id": 53024072, "comment_id": 92953606, "body": "I&#39;ve opened <a href=\"https://github.com/PerlDancer/Dancer2/pull/1479\" rel=\"nofollow noreferrer\">github.com/PerlDancer/Dancer2/pull/1479</a> to fix the test issue. In the meantime you can install it using <code>cpan -Ti Dancer2</code> or <code>cpanm -n Dancer2</code>. But note that either way it will not be installable on Perls older than 5.8.8 due to the Template Toolkit requirement."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540673693, "post_id": 53024072, "comment_id": 92954142, "body": "Also the prerequisite HTTP::XSCookies requires Perl 5.8.9, but it is not actually a requirement, I opened <a href=\"https://github.com/PerlDancer/Dancer2/pull/1480\" rel=\"nofollow noreferrer\">github.com/PerlDancer/Dancer2/pull/1480</a> to fix that issue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1540717782, "post_id": 53024072, "comment_id": 92960690, "body": "It&#39;s super easy to install a newer version Perl in your home directory using <code>perlbrew</code>. And this would also make it easier to install modules"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 6111178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e8b8243bab2257a558e35e4d2054e97d?s=128&d=identicon&r=PG&f=1", "display_name": "user116032", "link": "https://stackoverflow.com/users/6111178/user116032"}, "edited": false, "score": 0, "creation_date": 1541026260, "post_id": 53089166, "comment_id": 93082722, "body": "For various reasons I have decided to find a new provider.  Thank you all for your input."}], "tags": [], "owner": {"reputation": 11, "user_id": 4282214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c3e1ade41739dce0b2ae8d604ef8f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff W.", "link": "https://stackoverflow.com/users/4282214/geoff-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1541007479, "creation_date": 1541007479, "answer_id": 53089166, "question_id": 53024072, "link": "https://stackoverflow.com/questions/53024072/what-perl-version-is-required-for-dancer2/53089166#53089166", "title": "What perl version is required for dancer2?", "body": "<p>A GoDaddy-wise comment: if you are trying to do this on a GoDaddy-hosted server and aren't running a dedicated server, it is doubtful they will upgrade the version of perl installed there on demand.</p>\n"}], "owner": {"reputation": 301, "user_id": 6111178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e8b8243bab2257a558e35e4d2054e97d?s=128&d=identicon&r=PG&f=1", "display_name": "user116032", "link": "https://stackoverflow.com/users/6111178/user116032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541007479, "creation_date": 1540658085, "question_id": 53024072, "link": "https://stackoverflow.com/questions/53024072/what-perl-version-is-required-for-dancer2", "title": "What perl version is required for dancer2?", "body": "<p>Godaddy supplies perl 5.8 on the \"standard\" unix share.  Before attempting to use Dancer2 I would like to know if 5.8 will suffice.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["mysql", "json", "perl", "dbi", "hashref"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1540659457, "post_id": 53024064, "comment_id": 92950425, "body": "Read the section on <b>PERL -&gt; JSON</b> in the <code>JSON</code> documentation. Using <code>Cpanel::JSON::XS</code> might give better results, too."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 2, "creation_date": 1540659597, "post_id": 53024064, "comment_id": 92950454, "body": "Also check <a href=\"https://stackoverflow.com/questions/40800205/why-does-dbi-implicitly-change-integers-to-strings\" title=\"why does dbi implicitly change integers to strings\">stackoverflow.com/questions/40800205/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "edited": false, "score": 0, "creation_date": 1540725307, "post_id": 53026114, "comment_id": 92962435, "body": "Excellent thanks. It&#39;s looking debatable whether constructing the entire JSON output &#39;manually&#39; might actually be more efficient. ie <code>$name =~ s&#47;&quot;&#47;\\&quot;&#47;g; my $json = qq~{&quot;id&quot;:$id, &quot;name&quot;:&quot;$name&quot;, &quot;age&quot;: $age}~;</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "edited": false, "score": 2, "creation_date": 1540753009, "post_id": 53026114, "comment_id": 92970161, "body": "That&#39;s not a good idea. JSON encoding is not as simple as you may think especially if one of your names ends up having a non-ASCII character. Cpanel::JSON::XS is one of the fastest and most correct JSON encoders available, anyway."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1540672922, "creation_date": 1540672922, "answer_id": 53026114, "question_id": 53024064, "link": "https://stackoverflow.com/questions/53024064/perl-dbi-query-doesnt-preserve-integer-values-for-json-output/53026114#53026114", "title": "Perl / DBI query doesn&#39;t preserve integer values for JSON output", "body": "<p>DBD::mysql returns all results as strings (see <a href=\"https://github.com/perl5-dbi/DBD-mysql/issues/253\" rel=\"nofollow noreferrer\">https://github.com/perl5-dbi/DBD-mysql/issues/253</a>). Normally Perl doesn't care, encoding to JSON is one of the few times when it matters. You can either use <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS::Type\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS::Type</a> to provide type declarations for your JSON structure:</p>\n\n<pre><code>use Cpanel::JSON::XS;\nuse Cpanel::JSON::XS::Type;\n\nmy $response = encode_json($data, {id =&gt; JSON_TYPE_INT, name =&gt; JSON_TYPE_STRING, age =&gt; JSON_TYPE_INT});\n</code></pre>\n\n<p>or you can go through and numify the appropriate elements before JSON encoding.</p>\n\n<pre><code>$data-&gt;{$_} += 0 for qw(id age);\n</code></pre>\n\n<p>It is possible to check the type (as indicated by MySQL) of each returned column, if you construct and execute your query using a statement handle then the type will be available as an array in <code>$sth-&gt;{TYPE}</code>, but this is pretty complex and may not be reliable.</p>\n"}], "owner": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 53026114, "answer_count": 1, "score": 0, "last_activity_date": 1540672922, "creation_date": 1540658049, "question_id": 53024064, "link": "https://stackoverflow.com/questions/53024064/perl-dbi-query-doesnt-preserve-integer-values-for-json-output", "title": "Perl / DBI query doesn&#39;t preserve integer values for JSON output", "body": "<p>I can't get this Perl code to return true integer values for integers in the table. The MySQL table columns are correctly specified as integers, yet the JSON output here wraps all query values in quotes. How can I correctly preserve data-types (esp. integers and boolean values) as specified?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DBI;\nuse JSON;\n\nmy $sth = \"SELECT id, name, age FROM table\";\n\nmy $data = $dbh-&gt;selectall_arrayref($sth, {Slice =&gt; {}});\n\nmy $response = encode_json($data);\nprint $response;\n\n## outputs: {\"id\":\"1\",\"name\":\"Joe Blodge\",\"age\":\"42\"}\n</code></pre>\n\n<p>What am I doing wrong here? How can I get this to output the correctly formatted JSON:</p>\n\n<pre><code>{\"id\":1,\"name\":\"Joe Blodge\",\"age\":42}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540632769, "post_id": 53020295, "comment_id": 92943397, "body": "Yes, one can build a parser using P::RD that parses expressions like the one you posted. There&#39;s nothing special about it."}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540670533, "post_id": 53020295, "comment_id": 92953398, "body": "Thanks ikegami , can you show how i parse the logic of adding &#39;(&#39; and trailing &#39;)&#39; when there are multiple OR operators ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540671158, "post_id": 53020295, "comment_id": 92953553, "body": "Parsing means giving meaning to the tokens of a string, i.e. identifying the different operators, terms and whatnot with the help of a grammar. It&#39;s the first thing you need to do, before you even think of output. Are you asking help determining the grammar? If so, where&#39;s your attempt? Even if you ignore the code parts for now, it would be something"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540671404, "post_id": 53020295, "comment_id": 92953631, "body": "Parens are usually done like this: <code>term: ident | &#39;(&#39; expr &#39;)&#39;</code>. You should look at other grammars for guidance. Parsing expressions has been done before"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1540702705, "last_edit_date": 1540702705, "creation_date": 1540702376, "answer_id": 53028460, "question_id": 53020295, "link": "https://stackoverflow.com/questions/53020295/parsing-text-with-parserecdescent/53028460#53028460", "title": "parsing text with Parse::RecDescent", "body": "<p>The grammar would look something like the following:</p>\n\n<pre><code>parse       : expr EOF\n\nexpr        : logic_or\n\n# vvv Lowest precedence vvv\n\nlogic_or    : &lt;leftop: logic_and LOGIC_OR logic_and&gt;\n\nlogic_and   : &lt;leftop: comparison LOGIC_AND comparison&gt;\n\ncomparison  : term comparison_[ $item[1] ]\ncomparison_ : '=' term\n            | HAS ident_list\n            |\n\n# ^^^ Highest precedence ^^^\n\nident_list  : &lt;leftop: IDENT ',' IDENT&gt;\n\nterm        : '(' expr ')'\n            | IDENT\n\n\n# Tokens\n\nIDENT      : /\\w+/\n\nLOGIC_OR   : /or\\b/ \nLOGIC_AND  : /and\\b/\nHAS        : /has\\b/\n\nEOF        : /\\Z/\n</code></pre>\n\n<p>Now you just need to add the code block to emit the desired output.</p>\n\n<p>In <code>comparison_</code>, the LHS term is available as <code>$arg[0]</code>.</p>\n\n<p>I had to make some assumptions, so there could be errors.</p>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540702705, "creation_date": 1540630798, "question_id": 53020295, "link": "https://stackoverflow.com/questions/53020295/parsing-text-with-parserecdescent", "title": "parsing text with Parse::RecDescent", "body": "<p>I am trying to parse some text with Parse::RecDescent</p>\n\n<pre><code>from :\n\nx=2 and y=2 and f=3 and (x has 3,4 or r=5 or r=6 ) and z=2\n\nto something like :\n\n\n\nx equal 2 and y equal 2 and f equal 3 and (( x contains 3 or x contains 4 or r equal 5 or requal 6 )) and z equal 2\n</code></pre>\n\n<p>other example :</p>\n\n<pre><code>input :\n\nx= 3 and y has 5 and (z has 6 or z=3 ) and f=2\n\n\n\noutput :\n\n\nx equals 3 and (( y contains 5)) and ((z has 6 or z equals 3)) and f equals 2\n</code></pre>\n\n<p>my question if i find a list of those operators :</p>\n\n<p>has ,or</p>\n\n<p>i should put \"((\" before the code and \"))\" after the code as mentioned on the example aboves</p>\n\n<p>is it possible to do something like this with Parse::RecDescent ?</p>\n"}, {"tags": ["perl", "pipe", "stdin"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1540615326, "post_id": 53018258, "comment_id": 92940299, "body": "Note that ReadLine() is documented not to work on Windows (but you can just do <code>&lt;STDIN&gt;</code> instead). Is there a specific non-Unixy architecture you&#39;re looking to run this on?"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540617693, "post_id": 53018258, "comment_id": 92940608, "body": "you can try to combine device names returned by <code>Term::ReadLine</code> <code>findConsole</code> <a href=\"https://metacpan.org/pod/Term::ReadLine#findConsole\" rel=\"nofollow noreferrer\">metacpan.org/pod/Term::ReadLine#findConsole</a> with the solution for Unix&#39;y systems"}, {"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "reply_to_user": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540619109, "post_id": 53018258, "comment_id": 92940808, "body": "@Ujin Thanks, it worked."}, {"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "reply_to_user": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540619881, "post_id": 53018258, "comment_id": 92940930, "body": "@Ujin But then again it is <b>visible</b>..."}, {"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 0, "creation_date": 1540620097, "post_id": 53018258, "comment_id": 92940956, "body": "Ah found it, just use the <code>ReadMode(&#39;noecho&#39;, TTY)</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "is_accepted": true, "score": 3, "last_activity_date": 1540621681, "last_edit_date": 1540621681, "creation_date": 1540620886, "answer_id": 53019250, "question_id": 53018258, "link": "https://stackoverflow.com/questions/53018258/how-to-read-password-line-after-pipe-input-to-perl-script/53019250#53019250", "title": "How to read password line after pipe input to Perl script", "body": "<p>So I've found solution, which was quite simple: </p>\n\n<p>Using the <code>Term::ReadKey</code>'s ReadMode with <code>Term::ReadLine</code>'s term's <code>IN</code>, example:</p>\n\n<pre><code>use Term::ReadLine;\nuse Term::ReadKey;\n\nmy $_stdin = &lt;STDIN&gt;;\nmy $_term = Term::ReadLine-&gt;new('term');\nReadMode('noecho', $_term-&gt;IN);\nmy $_pass = $_term-&gt;readline(\"Enter your password:\\n\");\nReadMode(0, $_term-&gt;IN);\nprint \"STDIN:\\n$_stdin\\nPassword:\\n$_pass\\n\";\n</code></pre>\n\n<p>or(thanks to <a href=\"https://stackoverflow.com/users/9602863/ujin\">Ujin</a>)</p>\n\n<pre><code>use Term::ReadLine;\nuse Term::ReadKey;\n\nmy $_stdin = &lt;STDIN&gt;;\nmy $term = Term::ReadLine-&gt;new('term');\nmy @_IO = $term-&gt;findConsole();\nmy $_IN = $_IO[0];\nprint \"INPUT is: $_IN\\n\";\nopen TTY, '&lt;', $_IN;\nprint \"Enter your password:\\n\";\nReadMode('noecho', TTY);\nmy $_pass = &lt;TTY&gt;;\nReadMode(0, TTY);\nclose TTY;\nprint \"STDIN:\\n$_stdin\\nPassword:\\n$_pass\\n\";\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>Enter your password:\n     # here enter hiddenly\nSTDIN:\nstdin input\n\nPassword:\npaws\n</code></pre>\n"}], "owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 53019250, "answer_count": 1, "score": 1, "last_activity_date": 1540621681, "creation_date": 1540607638, "last_edit_date": 1540619901, "question_id": 53018258, "link": "https://stackoverflow.com/questions/53018258/how-to-read-password-line-after-pipe-input-to-perl-script", "title": "How to read password line after pipe input to Perl script", "body": "<p>I'm trying to read <code>STDIN</code> and then get user input line without displaying it in terminal.</p>\n\n<p>The <code>Term::ReadKey</code>'s solution with <code>ReadMode('noecho')</code> will not work because it uses <code>&lt;STDIN&gt;</code> and if it is not empty it immediately takes(that what is supposed to be file, e.g. piped data) as <em>input</em> and not actually works:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Term::ReadKey;\n\nmy $_stdin = &lt;STDIN&gt;;\nprint \"Enter your password:\\n\";\nReadMode('noecho');\nmy $_pass = ReadLine(0); # This one uses &lt;STDIN&gt;!\nReadMode(0);\nprint \"STDIN:\\n$_stdin\\nPassword:\\n$_pass\\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>$ echo \"some data\" | perl term-readkey.pl\nEnter your password:\nUse of uninitialized value $_pass in concatenation (.) or string at term-readkey.pl line 10, &lt;STDIN&gt; line 1. \nSTDIN:\nsome data\n\nPassword:\n</code></pre>\n\n<p>The only solution that I come with is to use <code>Term::ReadLine</code> which seems not using <code>&lt;STDIN&gt;</code> as <code>Term::ReadKey</code>, but the problem is that output of the <code>$_term-&gt;readline()</code> is visible:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Term::ReadLine;\n\nmy $_stdin = &lt;STDIN&gt;;\nmy $_term = Term::ReadLine-&gt;new('term');\nmy $_pass = $_term-&gt;readline(\"Enter your password:\\n\");\nprint \"STDIN:\\n$_stdin\\nPassword:\\n$_pass\\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>$ echo \"some data\" | perl term-readkey.pl\nEnter your password:\n25 # actually entered it, and its visible...\nSTDIN:\nsome data\n\nPassword:\n25\n</code></pre>\n\n<p>There was a <a href=\"https://stackoverflow.com/questions/9484431/can-i-prompt-for-user-input-after-reading-piped-input-on-stdin-in-perl\">similar question</a>, but the answer is working only on Unix'y systems and input is visible...</p>\n"}, {"tags": ["perl", "xml-simple"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540576729, "post_id": 53013849, "comment_id": 92931538, "body": "Please show us the output when using <code>Data::Dumper</code>. Make that output short but relevant please. You are already using <code>ForceArray</code>, which means that all your structures should be arrays, but it seems that something is wrong somewhere in the data."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1540577127, "post_id": 53013849, "comment_id": 92931735, "body": "What Perl version are you using?  Wondering if you are accidentally using pseudohashes (an old removed misfeature) and missing a needed <code>-&gt;[0]</code> before one of your hash dereferences"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540578944, "post_id": 53013849, "comment_id": 92932562, "body": "<code>$purchase-&gt;{LineItems}-&gt;{LineItem}</code> might be undefined for some items"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540578960, "post_id": 53013849, "comment_id": 92932567, "body": "See <a href=\"https://stackoverflow.com/q/33267765/589924\">Why XML::Simple is Discouraged?</a>"}, {"owner": {"reputation": 55, "user_id": 9835217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/9835217/fabio"}, "edited": false, "score": 0, "creation_date": 1540582663, "post_id": 53013849, "comment_id": 92934165, "body": "added a snipet of my print dumper, sorry should of posted this orignally"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9835217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/9835217/fabio"}, "edited": false, "score": 1, "creation_date": 1540592135, "post_id": 53014491, "comment_id": 92937273, "body": "Hi  Thank you  Sadly i have so much code written with the XML SIMPLE and this is the only last problem i have to solve and really want to avoid a re-write"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540594885, "post_id": 53014491, "comment_id": 92937814, "body": "@ikegami I&#39;m not sure the purpose of the last edit, XML::LibXML takes XPath queries rather than CSS queries, DOM traversal works the same way in both libraries."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540595557, "post_id": 53014491, "comment_id": 92937960, "body": "Mojo::DOM, despite its name, doesn&#39;t follow the DOM spec. XML::LibXML, on the other hand, does implement (part of) the DOM API. Someone wishing to use that instead of CSS selectors or XPath selectors could use XML::LibXML"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540596061, "post_id": 53014491, "comment_id": 92938042, "body": "@ikegami if I understand what you&#39;re referring to correctly, Mojo::DOM provides a traversal API with the same capabilities, just not following the spec that XML::LibXML does in regards to object types. Thus it&#39;s a bit misleading to refer to it as a unique feature, that&#39;s all."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540596185, "post_id": 53014491, "comment_id": 92938065, "body": "Providing a known, standard interface (e.g. CSS, XPath or DOM) is a feature. That&#39;s why you bothered to mention it. I just added the one that was missing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540608045, "post_id": 53014491, "comment_id": 92939568, "body": "Forgot to mention, but you are free to revert, especially since it was a substantive change. (Btw, I only removed strict/warnings to limit the height of the answer. Including them in both snippets would have added 6 lines with two snippets. It was a comment on the inclusion of strict/warnings pragmas in general.)"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1540595101, "last_edit_date": 1540595101, "creation_date": 1540578831, "answer_id": 53014491, "question_id": 53013849, "link": "https://stackoverflow.com/questions/53013849/xml-simple-perl-looping-through-child-nodes-problem/53014491#53014491", "title": "XML SIMPLE PERL - Looping through child nodes problem", "body": "<p>You can avoid issues with ForceArray and confusing data structures by using an XML parser that returns an object that understands the XML tree. <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> is a nice one if you know CSS.</p>\n\n<pre><code>use Mojo::DOM;\n\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($res-&gt;decoded_content);\nfor my $purchase ($dom-&gt;find('PurchaseOrders &gt; PurchaseOrder')-&gt;each) {\n  # $purchase is a Mojo::DOM object representing a PurchaseOrder element\n  for my $item ($purchase-&gt;find('LineItems &gt; LineItem')-&gt;each) {\n    # It's unclear if ItemCode is an an attribute or a sub-element; assuming sub-element\n    my $itemCode = $item-&gt;at('ItemCode')-&gt;text;\n    ...\n  }\n}\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> is another option that can be used similarly but using XPath or DOM instead of CSS to locate elements.</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $doc = XML::LibXML-&gt;load_xml(string =&gt; $res-&gt;decoded_content);\nfor my $purchase ($doc-&gt;findodes('/PurchaseOrders/PurchaseOrder')) {\n  # $purchase is a XML::LibXML::Element object representing a PurchaseOrder element\n  for my $item ($purchase-&gt;findnodes('LineItems/LineItem')) {\n    # It's unclear if ItemCode is an an attribute or a sub-element; assuming sub-element\n    my $itemCode = $item-&gt;findvalue('ItemCode');\n    ...\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9835217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fabio", "link": "https://stackoverflow.com/users/9835217/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1540595101, "creation_date": 1540575828, "last_edit_date": 1540582648, "question_id": 53013849, "link": "https://stackoverflow.com/questions/53013849/xml-simple-perl-looping-through-child-nodes-problem", "title": "XML SIMPLE PERL - Looping through child nodes problem", "body": "<p>I have some perl code</p>\n\n<pre><code>my $res = $ua-&gt;get( $access-&gt;to_url );\nif ($res-&gt;is_success) {\nmy $ref = XMLin( $res-&gt;content );\n\n\n    my $xml = new XML::Simple;\n    $data = $xml-&gt;XMLin($res-&gt;content,ForceArray =&gt; 1);\n    #print $res-&gt;content;\n    for my $purchase ( @{ $data-&gt;{PurchaseOrders}-&gt;{PurchaseOrder}} )\n</code></pre>\n\n<p>This bit is fine....</p>\n\n<p>How ever when i try loop through child elements, if there is only <strong>one</strong> child element</p>\n\n<p>i get the \"not an array reference\" error</p>\n\n<pre><code>for my $item ( @{$purchase-&gt;{LineItems}-&gt;{LineItem}} ) \n    {\n    $itemCode = $item-&gt;{ItemCode}; \n    }\n</code></pre>\n\n<p>The XML structure is something like this</p>\n\n<pre><code>PurchaseOrders\n\n    PurchaseOrder\n\n        LineItems\n\n            LineItem\n</code></pre>\n\n<p>i am aware of an issue with xml simple where i have to forceArray, but i am not sure how to forceArray on the child Nodes</p>\n\n<p>I found this article on stackoverflow that seems very close to my exact problem, but i am struggling on how to execute it with in my code</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15084154/perl-parsing-xml-using-xmlsimple\">perl, parsing XML using XML::Simple</a></p>\n\n<pre><code>   $VAR1 = {\n      'PurchaseOrderID' =&gt; '82fa50d6-fd45-4fd2-b42d-035aaaa39a2c',\n      'LineAmountTypes' =&gt; 'Exclusive',\n      'SentToContact' =&gt; 'true',\n      'AttentionTo' =&gt; 'sxxxx',\n      'Status' =&gt; 'AUTHORISED',\n      'LineItems' =&gt; {\n                       'LineItem' =&gt; {\n                                       'LineAmount' =&gt; '57.61',\n                                       'Quantity' =&gt; '1.0000',\n                                       'UnitAmount' =&gt; '57.6100',\n                                       'LineItemID' =&gt; 'e295d55d-68bd',\n                                       'Description' =&gt; 'xxx',\n                                       'ItemCode' =&gt; 'xxx',\n                                       'TaxAmount' =&gt; '11.52',\n                                       'AccountCode' =&gt; '310',\n                                       'TaxType' =&gt; 'INPUT2'\n                                     }\n                     },\n      'UpdatedDateUTC' =&gt; '2018-10-26T14:19:19.053',\n      'CurrencyCode' =&gt; 'GBP',\n      'Contact' =&gt; {\n</code></pre>\n\n<p>Included a snipet from my print dumper - please note,its just a snipet of the important part, everything is fine until it hits line items</p>\n\n<p>Also here is the XML file</p>\n\n<pre><code>&lt;PurchaseOrder&gt;\n  &lt;PurchaseOrderID&gt;82fa50&lt;/PurchaseOrderID&gt;\n  &lt;PurchaseOrderNumber&gt;PO-0029&lt;/PurchaseOrderNumber&gt;\n  &lt;Date&gt;2018-10-26T00:00:00&lt;/Date&gt;\n  &lt;DeliveryDate&gt;2018-10-28T00:00:00&lt;/DeliveryDate&gt;\n  &lt;DeliveryAddress&gt;Address/DeliveryAddress&gt;\n  &lt;AttentionTo&gt;XXX&lt;/AttentionTo&gt;\n  &lt;SentToContact&gt;true&lt;/SentToContact&gt;\n  &lt;Reference&gt;000000078&lt;/Reference&gt;\n  &lt;CurrencyRate&gt;1.000000&lt;/CurrencyRate&gt;\n  &lt;CurrencyCode&gt;GBP&lt;/CurrencyCode&gt;\n  &lt;Contact&gt;\n    &lt;ContactID&gt;f203ed00-8cd1-4e4d-9b76-f5e7d90a3c19&lt;/ContactID&gt;\n    &lt;ContactStatus&gt;ACTIVE&lt;/ContactStatus&gt;\n    &lt;Name&gt;XXX&lt;/Name&gt;\n    &lt;FirstName&gt;XXXy&lt;/FirstName&gt;\n    &lt;LastName&gt;XXX&lt;/LastName&gt;\n    &lt;Addresses&gt;\n      &lt;Address&gt;\n        &lt;AddressType&gt;XXX&lt;/AddressType&gt;\n        &lt;AddressLine1&gt;XXX&lt;/AddressLine1&gt;\n        &lt;AddressLine2&gt;XXX&lt;/AddressLine2&gt;\n        &lt;City&gt;XXX&lt;/City&gt;\n        &lt;Region&gt;XXX&lt;/Region&gt;\n        &lt;PostalCode&gt;XXX&lt;/PostalCode&gt;\n        &lt;Country&gt;GBR&lt;/Country&gt;\n      &lt;/Address&gt;\n      &lt;Address&gt;\n        &lt;AddressType&gt;XXX&lt;/AddressType&gt;\n        &lt;AddressLine1&gt;Unit 1-3&lt;/AddressLine1&gt;\n        &lt;AddressLine2&gt;XXX&lt;/AddressLine2&gt;\n        &lt;City&gt;XXX&lt;/City&gt;\n        &lt;Region&gt;West Yorkshire&lt;/Region&gt;\n        &lt;PostalCode&gt;POSTCODE&lt;/PostalCode&gt;\n        &lt;Country&gt;GBR&lt;/Country&gt;\n      &lt;/Address&gt;\n    &lt;/Addresses&gt;\n    &lt;UpdatedDateUTC&gt;2018-10-08T17:19:55.083&lt;/UpdatedDateUTC&gt;\n    &lt;DefaultCurrency&gt;GBP&lt;/DefaultCurrency&gt;\n  &lt;/Contact&gt;\n  &lt;BrandingThemeID&gt;2ffe566f-7a88-486a-938c-639d27966197&lt;/BrandingThemeID&gt;\n  &lt;Status&gt;AUTHORISED&lt;/Status&gt;\n  &lt;LineAmountTypes&gt;Exclusive&lt;/LineAmountTypes&gt;\n  &lt;LineItems&gt;\n    &lt;LineItem&gt;\n      &lt;ItemCode&gt;xxx&lt;/ItemCode&gt;\n      &lt;Description&gt;des&lt;/Description&gt;\n      &lt;UnitAmount&gt;57.6100&lt;/UnitAmount&gt;\n      &lt;TaxType&gt;INPUT2&lt;/TaxType&gt;\n      &lt;TaxAmount&gt;11.52&lt;/TaxAmount&gt;\n      &lt;LineAmount&gt;57.61&lt;/LineAmount&gt;\n      &lt;AccountCode&gt;310&lt;/AccountCode&gt;\n      &lt;Quantity&gt;1.0000&lt;/Quantity&gt;\n      &lt;LineItemID&gt;e295d55d-68bd-41b0-a0b1-cf1f2d5b7a4f&lt;/LineItemID&gt;\n    &lt;/LineItem&gt;\n  &lt;/LineItems&gt;\n  &lt;SubTotal&gt;57.61&lt;/SubTotal&gt;\n  &lt;TotalTax&gt;11.52&lt;/TotalTax&gt;\n  &lt;Total&gt;69.13&lt;/Total&gt;\n  &lt;UpdatedDateUTC&gt;2018-10-26T14:19:19.053&lt;/UpdatedDateUTC&gt;\n  &lt;HasAttachments&gt;false&lt;/HasAttachments&gt;\n&lt;/PurchaseOrder&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540575921, "post_id": 53013803, "comment_id": 92931103, "body": "How are you running this code?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540575932, "post_id": 53013803, "comment_id": 92931113, "body": "That code cannot raise the error <code>Global symbol &quot;$original_filename&quot; requires explicit package name</code> because no such variable exists in it. Most likely, whatever script (<code>stride</code> ?) you&#39;re calling raises that error. Check whether that <code>system()</code> command works stand-alone."}, {"owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540576667, "post_id": 53013803, "comment_id": 92931500, "body": "I am running it from a terminal using perl run_stride.pl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540576730, "post_id": 53013803, "comment_id": 92931539, "body": "Print out that <code>$command</code> to see exactly what you are running by <code>system</code>. Then copy-paste it (from the output of this program) into the terminal and run it by hand."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540576785, "post_id": 53013803, "comment_id": 92931563, "body": "What input are you giving it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540576786, "post_id": 53013803, "comment_id": 92931564, "body": "Is this .. a complete program? Why are <code>strict</code> and <code>warnings</code> commented out?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540576894, "post_id": 53013803, "comment_id": 92931613, "body": "If the directory has files with <code>.pdb</code>, as you seem to say, then your <code>$input</code> ends up being <code>name.pdg_file.pdb</code> (once you replace <code>while (&lt;&gt;)</code> with <code>for (@ARGV)</code>). Is that intended?"}, {"owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540577462, "post_id": 53013803, "comment_id": 92931881, "body": "No, I&#39;ll try to explain a bit more. In the working directory I have several files that start with a 4 letter PDB codes, then have _file.pdb after them, for example 1ALY_file.pdb. The perl script should one-at-a-time, grab the file name and call the program stride to run it. I can get stride to run in the terminal on an individual file simply by typing stride 1ALY_file.pdb (using the above example). The default output for stride is just to print it to the terminal window, so that&#39;s what I see. The script should generate a new file with the name 1ALY_file.pdboutput."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540577857, "post_id": 53013803, "comment_id": 92932075, "body": "@curd  Thank you for more information. Please add <code>print &quot;$command\\n&quot;;</code> before <code>system</code> and see what it prints (that is what then gets run -- or attempted).  I assume for this that you implemented the change from my answer."}, {"owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540578151, "post_id": 53013803, "comment_id": 92932213, "body": "It&#39;s not printing anything. I added it like this:         my $command = &quot;stride &quot;.&quot;$input -f&quot;.&quot;$output&quot;.&quot; -cA&quot;;         print &quot;$command\\n&quot;;         system($command); }"}, {"owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540579679, "post_id": 53013803, "comment_id": 92932908, "body": "If I type perl run_stride.pl 1ALY_file.pdb in the terminal I get the following:          stride 1ALY_file.pdb_file.pdb -f1ALY_file.pdb.stride -cAError reading PDB file 1ALY_file.pdb_file.pdb"}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540575996, "post_id": 53013873, "comment_id": 92931148, "body": "Maybe  it&#39;s a carriage return at the end of <code>$_</code> that is not removed by <code>chomp</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540576390, "post_id": 53013873, "comment_id": 92931356, "body": "@Corion Right, that could be one thing. I&#39;d first guess that the code author misunderstood what <code>while (&lt;&gt;)</code> does?"}, {"owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540576392, "post_id": 53013873, "comment_id": 92931359, "body": "Thanks for your response. This seems somewhat better, because the error is gone, however, it still isn&#39;t generating output files called output_file.pdb."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "edited": false, "score": 0, "creation_date": 1540576627, "post_id": 53013873, "comment_id": 92931476, "body": "@curd We have <i>no information</i> to figure out what that is about. For the first step, I recommend: add print statements to see what you actually have there -- for instance, print <code>$command</code> before <code>system</code> and review it. If it looks fine then copy-paste it so to run it manually in the terminal."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1540625432, "last_edit_date": 1540625432, "creation_date": 1540575932, "answer_id": 53013873, "question_id": 53013803, "link": "https://stackoverflow.com/questions/53013803/error-reading-pdb-file-using-while-loop-and/53013873#53013873", "title": "Error reading PDB file using while loop and $_", "body": "<p>The phrase <code>while (&lt;&gt;)</code> reads every <em>line</em> from all files given on the command line.</p>\n\n<p>The code appears to work with file names, which are in <code>@ARGV</code>, so the simplest change is</p>\n\n<pre><code>foreach (@ARGV) { ... }\n</code></pre>\n\n<p>and now <code>$_</code> in the loop body has one filename at a time (or whatever is supplied to the program on the command line).</p>\n\n<p>See about the \"null filehandle\" <code>&lt;&gt;</code> in <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">I/O operators in perlop</a></p>\n"}, {"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 0, "last_activity_date": 1540577636, "last_edit_date": 1540577636, "creation_date": 1540577249, "answer_id": 53014145, "question_id": 53013803, "link": "https://stackoverflow.com/questions/53013803/error-reading-pdb-file-using-while-loop-and/53014145#53014145", "title": "Error reading PDB file using while loop and $_", "body": "<p>Do you really need perl for your task?\nTry this shell command:</p>\n\n<pre><code>for name in file1 file2 file3; do stride ${name}_file.pdb -f ${name}.stride -cA; done\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>for name in ./*_file.pdb; do stride \"${name}\" -f \"${name:0:-9}.stride\" -cA; done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "is_accepted": false, "score": 0, "last_activity_date": 1540580415, "creation_date": 1540580415, "answer_id": 53014843, "question_id": 53013803, "link": "https://stackoverflow.com/questions/53013803/error-reading-pdb-file-using-while-loop-and/53014843#53014843", "title": "Error reading PDB file using while loop and $_", "body": "<p>Thanks for all your help! This appears to work now if I run it from command line with perl run_stride.pl *_file.pdb:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nforeach(@ARGV){\n    chomp;\n        my $input = \"$_\";\n        my $output = \"$_\".\".stride\";\n        my $command = \"stride \".\"$input -f\".\"$output\".\" -cA\";\n        system($command);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10564332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49b104ebe0354c81ddb38e06fc5a642?s=128&d=identicon&r=PG&f=1", "display_name": "curd", "link": "https://stackoverflow.com/users/10564332/curd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1540625432, "creation_date": 1540575594, "question_id": 53013803, "link": "https://stackoverflow.com/questions/53013803/error-reading-pdb-file-using-while-loop-and", "title": "Error reading PDB file using while loop and $_", "body": "<p>I am not very familiar with Perl, but am trying to get some old code written by someone else to work. The objective of the code is to run a program called stride on input files that end in file.pdb. It should grab all .pdb files in the directory, run stride, and create output files. I know that the stride program works standalone, but I get the following error when I try to run the code: \"Error reading PDB file _file.pdb\". In other similar code, I get the more specific error \"Global symbol \"$original_filename\" requires explicit package name\". I think I have narrowed the issue down to the code's use of $_. I would appreciate any help on why this code no longer works and what an updated version would look like. Thanks. (Note, the use strict and warnings is hashed out because it was not part of the original code).</p>\n\n<pre><code>#!/usr/bin/perl\n#use strict;\n#use warnings;\n\n\nwhile(&lt;&gt;){\n    chomp;\n        my $input = \"$_\".\"_file.pdb\";\n        my $output = \"$_\".\".stride\";\n        my $command = \"stride \".\"$input -f\".\"$output\".\" -cA\";\n        system($command);\n}\n</code></pre>\n"}, {"tags": ["perl", "sorting", "module", "include", "global-variables"], "comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1540568372, "post_id": 53011793, "comment_id": 92927683, "body": "Try replacing &quot;mysort&quot; with &quot;\\&amp;mysort&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1540569403, "post_id": 53011793, "comment_id": 92928206, "body": "You probably want to remove <code>use diagnostics</code> before you ship your code. It adds about a second of startup time."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1540576614, "post_id": 53011793, "comment_id": 92931464, "body": "Since <code>mysort</code> is exported into the main package, it wants to use <code>$a</code> and <code>$b</code> in the main package, but the variables <code>$a</code> and <code>$b</code> in <code>mysort</code> refers to <code>$my::module::a</code> and <code>$my::module::b</code>, which has not been declared in that package and are not used as special variables by <code>sort</code>.  Note that you could have referred to <code>$a</code> and <code>$b</code> in the main package using <code>$::a</code> and <code>$::b</code> but this would not work if you  imported <code>mysort</code> into another package than the <code>main</code> package. A better approach is given in the answer by @Ujin, which will work in general."}, {"owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1540577791, "post_id": 53011793, "comment_id": 92932048, "body": "@GuidoFlohr Where do I put the \\&amp;mysort?"}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1540588667, "post_id": 53011793, "comment_id": 92936384, "body": "@Rob: sorry, wrong hint. I always use that syntax to make clear that it&#39;s a code reference but using the name as an argument to <code>sort</code> is actually okay."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1540575539, "post_id": 53012119, "comment_id": 92930944, "body": "Slower it not, this is the best way to do it"}, {"owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "edited": false, "score": 0, "creation_date": 1540577736, "post_id": 53012119, "comment_id": 92932024, "body": "Yes, this worked well: I am only sorting a few thousand items, so speed is not even a factor."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540597142, "post_id": 53012119, "comment_id": 92938227, "body": "You can avoid some of the speed penalty by not copying the input and using <code>@_</code> elements directly. <code>return $_[0] cmp $_[1];</code> But benchmarks would be required to know how significant this is for your particular sort algorithm."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 8, "last_activity_date": 1540568363, "creation_date": 1540568363, "answer_id": 53012119, "question_id": 53011793, "link": "https://stackoverflow.com/questions/53011793/how-do-i-include-a-sort-function-in-a-module/53012119#53012119", "title": "How do I include a sort function in a module?", "body": "<p><code>$a</code> and <code>$b</code> are package global variables. There are several options to access them in <code>mysort</code> but all of them are kind of bad.</p>\n\n<p>You can also use prototyped variant:</p>\n\n<pre><code>sub mysort($$) {\n    my ($a, $b) = @_;\n    return $a cmp $b;\n}\n</code></pre>\n\n<p>But according to the documentation this variant is slower.\n<a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/sort.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1540580605, "post_id": 53014758, "comment_id": 92933321, "body": "A sort function with <code>($$)</code> is slower to call than one without it, but you&#39;re adding a call to <code>caller</code> which might absorb the benefit. Benchmarking is in order."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 4, "last_activity_date": 1540580009, "creation_date": 1540580009, "answer_id": 53014758, "question_id": 53011793, "link": "https://stackoverflow.com/questions/53011793/how-do-i-include-a-sort-function-in-a-module/53014758#53014758", "title": "How do I include a sort function in a module?", "body": "<p>If you for some reason do not want to add the <code>($$)</code> prototype on <code>mysort</code> (although I cannot find a good example for wanting that) as in the answer of @Ujin, you could also use <a href=\"http://perldoc.perl.org/functions/caller.html\" rel=\"nofollow noreferrer\"><code>caller</code></a> to get the package name of the caller (assuming the caller is always <code>sort</code>):</p>\n\n<pre><code>sub mysort {\n    my $pkg = caller;\n    {\n        no strict 'refs';\n        return ${\"${pkg}::a\"} cmp ${\"${pkg}::b\"};\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 5296516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1076a72417cf6bea1a43cff823cd9b12?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5296516/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 53012119, "answer_count": 2, "score": 3, "last_activity_date": 1540580009, "creation_date": 1540567193, "question_id": 53011793, "link": "https://stackoverflow.com/questions/53011793/how-do-i-include-a-sort-function-in-a-module", "title": "How do I include a sort function in a module?", "body": "<p>How do I include a custom sort function in a module?</p>\n\n<p>For example, if I create the following script (test.pl):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.022;\nuse warnings;\nuse diagnostics;\nuse utf8;\nuse open qw(:std :utf8);\nbinmode STDOUT, \":utf8\";\nbinmode STDERR, \":utf8\";\n\nsub mysort {\n    return $a cmp $b;\n}\n\nmy @list = ('a', 'd', 'b', 'c');\nsay join \"\\n\", sort mysort @list;\n</code></pre>\n\n<p>It works fine. However when I split them up into test.pl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.022;\nuse warnings;\nuse diagnostics;\nuse utf8;\nuse open qw(:std :utf8);\nbinmode STDOUT, \":utf8\";\nbinmode STDERR, \":utf8\";\n\nuse my::module;\n\nmy @list = ('a', 'd', 'b', 'c');\nsay join \"\\n\", sort mysort @list;\n</code></pre>\n\n<p>and my/module.pm:</p>\n\n<pre><code>package my::module;\nuse 5.022;\nuse warnings;\nuse diagnostics;\nuse utf8;\nuse open qw(:std :utf8);\nbinmode STDOUT, ':utf8';\nbinmode STDERR, ':utf8';\n\nBEGIN {\n    my @exp = 'mysort';\n    require Exporter;\n    our $VERSION   = 1.00;\n    our @ISA       = 'Exporter';\n    our @EXPORT = @exp;\n    our @EXPORT_OK = @exp;\n}\n\nsub mysort {\n    return $a cmp $b;\n}\n\n1;\n</code></pre>\n\n<p>I get the following error message:\nUse of uninitialized value $my::module::a in string comparison (cmp) at\n        my/module.pm line 20 (#1)\n    (W uninitialized) An undefined value was used as if it were already\n    defined.  It was interpreted as a \"\" or a 0, but maybe it was a mistake.\n    To suppress this warning assign a defined value to your variables.</p>\n\n<pre><code>To help you figure out what was undefined, perl will try to tell you\nthe name of the variable (if any) that was undefined.  In some cases\nit cannot do this, so it also tells you what operation you used the\nundefined value in.  Note, however, that perl optimizes your program\nand the operation displayed in the warning may not necessarily appear\nliterally in your program.  For example, \"that $foo\" is usually\noptimized into \"that \" . $foo, and the warning will refer to the\nconcatenation (.) operator, even though there is no . in\nyour program.\n</code></pre>\n\n<p>Use of uninitialized value $my::module::b in string comparison (cmp) at\n        my/module.pm line 20 (#1)</p>\n\n<p>Is there a way to export the $a and $b variables into the module?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1540560948, "post_id": 53009353, "comment_id": 92923309, "body": "You say <i>&quot;I would like the log file to be sorted by the XML text, i.e., the key of the hash&quot;.</i> . The key of the hash is the UUID; the XML text is the value associated with the key.  You can sort the data by the values and retrieve the keys in the appropriate order, but that&#39;s different from what you said about the XML being the key."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1540578295, "post_id": 53009588, "comment_id": 92932281, "body": "You also should not use each because it has surprising interactions as documented in the <a href=\"https://perldoc.pl/functions/each\" rel=\"nofollow noreferrer\">latest docs</a>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1540560532, "last_edit_date": 1540560532, "creation_date": 1540559677, "answer_id": 53009588, "question_id": 53009353, "link": "https://stackoverflow.com/questions/53009353/processing-a-perl-hash-in-sorted-order-by-key/53009588#53009588", "title": "Processing a perl hash in sorted order by key", "body": "<p>Don't use <code>each</code> for that. It only works on hashes (and arrays in newer Perls). Use a regular <code>foreach</code> and sort by value.</p>\n\n<pre><code>foreach my $key ( sort { $xml{$a} cmp $xml{$b} } keys %xml ) {\n  say \"$key: $xml{$key}\";\n}\n</code></pre>\n\n<p>You need to grab the keys and then sort on the values because that's where the XML thingy is. </p>\n\n<p>If you wanted to sort by the text node first, and individual text nodes by the <code>ws</code> attribute, it becomes more complex.</p>\n\n<pre><code>foreach my $key ( map { $_-&gt;[0] }\n                  sort { $a-&gt;[2] cmp $b-&gt;[2] || $a-&gt;[1] cmp $b-&gt;[1] }\n                  map { [ $_, $xml{$_} =~ m/\"(..)\"&gt;([^&lt;]+)&lt;/ ] } keys %xml\n) {\n  say \"$key: $xml{$key}\";\n}\n</code></pre>\n\n<p>This makes use of the so-called <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>, which performs an expensive operation once, memoizes the result to sort on that, and then put the original data back in place. Since your XML snippet is always of the same format, it is save to use a regular expressions to extract the data to sort on.</p>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53009588, "answer_count": 1, "score": 0, "last_activity_date": 1540560532, "creation_date": 1540558905, "last_edit_date": 1540559304, "question_id": 53009353, "link": "https://stackoverflow.com/questions/53009353/processing-a-perl-hash-in-sorted-order-by-key", "title": "Processing a perl hash in sorted order by key", "body": "<p>I have a Perl script that uses a hash where the contents are UUIDs and the keys are XML text elements. The XML text elements sort reasonably with an ordinary sort.</p>\n\n<p>As I process each element, I write to a log file. The relevant code looks something like:</p>\n\n<pre><code>use 5.016;\nopen(my $loghandle, '&gt;', 'process.log') or die \"Couldn't open logfile\";\n\n%XMLhash = (\n      'e01af02f-e8e5-476e-a250-e70c3925463a' =&gt; '&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;retirer&lt;/AUni&gt;&lt;/Form&gt;',\n      '8187b534-a8c8-4e14-bf0b-1bd9cfada31e' =&gt; '&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;pencher&lt;/AUni&gt;&lt;/Form&gt;',\n      '1848c7a2-c2f8-4884-8327-c0f1a9da7a4b' =&gt; '&lt;Form&gt;&lt;AUni ws=\"en\"&gt;repair&lt;/AUni&gt;&lt;/Form&gt;',\n      'b36c127c-91b2-41db-96ec-18c172ad9917' =&gt; '&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;fou&lt;/AUni&gt;&lt;/Form&gt;',\n      'abb4e9dc-dc66-43b5-951e-e720e21da286' =&gt; '&lt;Form&gt;&lt;AUni ws=\"en\"&gt;four&lt;/AUni&gt;&lt;/Form&gt;',\n      '8cf707e6-e0a1-4611-bb28-ff18d2de38db' =&gt; '&lt;Form&gt;&lt;AUni ws=\"en\"&gt;robust&lt;/AUni&gt;&lt;/Form&gt;',\n    );\n\nwhile( my( $guid, $XMLtext ) = each %XMLhash ) {\n    my $somestuff = 'What I did', # some process that tells what I did \n    say $loghandle \"Text:$XMLtext Guid:$guid I did $somestuff\";\n    }\n</code></pre>\n\n<p>And the log file it produces (possibly different order each run):</p>\n\n<pre><code>Text:&lt;Form&gt;&lt;AUni ws=\"en\"&gt;robust&lt;/AUni&gt;&lt;/Form&gt; Guid:8cf707e6-e0a1-4611-bb28-ff18d2de38db I did:What I did\nText:&lt;Form&gt;&lt;AUni ws=\"en\"&gt;four&lt;/AUni&gt;&lt;/Form&gt; Guid:abb4e9dc-dc66-43b5-951e-e720e21da286 I did:What I did\nText:&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;retirer&lt;/AUni&gt;&lt;/Form&gt; Guid:e01af02f-e8e5-476e-a250-e70c3925463a I did:What I did\nText:&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;fou&lt;/AUni&gt;&lt;/Form&gt; Guid:b36c127c-91b2-41db-96ec-18c172ad9917 I did:What I did\nText:&lt;Form&gt;&lt;AUni ws=\"en\"&gt;repair&lt;/AUni&gt;&lt;/Form&gt; Guid:1848c7a2-c2f8-4884-8327-c0f1a9da7a4b I did:What I did\nText:&lt;Form&gt;&lt;AUni ws=\"fr\"&gt;pencher&lt;/AUni&gt;&lt;/Form&gt; Guid:8187b534-a8c8-4e14-bf0b-1bd9cfada31e I did:What I did\n</code></pre>\n\n<p>I would like the log file to be sorted by the XML text, i.e., the key of the hash.</p>\n\n<p>I tried changing the while statement to:</p>\n\n<pre><code>while( my( $guid, $XMLtext ) = each sort keys %XMLhash ) {\n</code></pre>\n\n<p>That gave me an error: \"Type of argument to each on reference must be unblessed hashref or arrayref at ...\"</p>\n\n<p>To have a sorted log file, can I process the hash in order by key?</p>\n\n<p>In my current work-around, I write the logs to an array, sort that array and write the array to the log file. That seems to me to be sub-optimal.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551290, "post_id": 53006821, "comment_id": 92917872, "body": "Please <a href=\"https://stackoverflow.com/posts/53006821/edit\">edit</a> your question and include the output you are currently getting."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540561053, "post_id": 53006821, "comment_id": 92923374, "body": "Why are you inserting an array ref with a single element <code>[$i++]</code>? Why not just insert the scalar <code>$i++</code>? No need to use array for a single element."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1540604552, "post_id": 53006821, "comment_id": 92939183, "body": "@H&#229;konH&#230;gland, I&#39;m sorry, I forget to update. Now it have been updated."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540605011, "post_id": 53009935, "comment_id": 92939245, "body": "this is my output by using your script, [0] = 10 6 8 1 [1] = 11 5 7 1 [2] = 12 8 10 1, It was not in order and it started from 1?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540635247, "post_id": 53009935, "comment_id": 92944001, "body": "@DanialHaris Could you paste your entire source code somewhere?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540695477, "post_id": 53009935, "comment_id": 92957397, "body": "That&#39;s because you&#39;ve changed <code>%community_family_name</code> data structure."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540699458, "post_id": 53009935, "comment_id": 92957833, "body": "yes because, I don&#39;t need to make array ref, because the value is always 1 value. So what should I do?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1540700802, "post_id": 53009935, "comment_id": 92957962, "body": "If you want to know what the error msg means, see perldiag.  If you want to know Perl data structure, see perldst. If you just want the answer that you don\u2019t aware of, I\u2019m sorry, you came to the wrong place."}], "tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": 0, "last_activity_date": 1540560757, "creation_date": 1540560757, "answer_id": 53009935, "question_id": 53006821, "link": "https://stackoverflow.com/questions/53006821/how-to-print-first-element-of-subhash-in-reverse-manner-perl/53009935#53009935", "title": "How to print first element of subhash in reverse manner Perl", "body": "<p>You are almost there.</p>\n\n<p>The first point is your expected result is per <code>community</code>, so your <code>print</code> functions must stay in the first loop.</p>\n\n<p>The second is you must use <code>scalar</code> and <code>reverse</code> to arrays, not to scalar value such as double-quoted strings.</p>\n\n<pre><code># Let me shorten your variable name, that's way too long...\nmy %cfn = %community_family_name;\n\nforeach my $com (sort keys %cfn) {\n    # Count up keys in the community\n    my $count = map { keys %{$cfn{$com}-&gt;{$_}} } keys %{$cfn{$com}};\n\n    my @vals;\n    foreach my $family (reverse sort keys %{$cfn{$com}}) {\n        my ($first) = sort keys %{$cfn{$com}-&gt;{$family}};\n        push @vals, @{$cfn{$com}-&gt;{$family}-&gt;{$first}};\n    }\n\n    printf \"[%d] = %s\", $com, join q{ }, $count, @vals;\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540702789, "creation_date": 1540550090, "last_edit_date": 1540702789, "question_id": 53006821, "link": "https://stackoverflow.com/questions/53006821/how-to-print-first-element-of-subhash-in-reverse-manner-perl", "title": "How to print first element of subhash in reverse manner Perl", "body": "<p>I want to print the values of every first <code>$family</code> reversely, and the first value it prints is the total scalar value in each <code>$community</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper; \nuse Tie::Autotie 'Tie::IxHash';\n\nmy @NAMES       = qw(AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AD CD CE CF BD BE);\nmy @FAMILIES    = qw(A  A  A  B  B  B  C  C  C  A  A  A  B  B  B  C  C  C  A  A  A  B  B  B  C  C  C  A  C  C  C  B  B);\nmy @COMMUNITIES = qw(0  0  0  0  0  0  0  0  0  1  1  1  1  1  1  1  1  1  2  2  2  2  2  2  2  2  2  0  2  2  2  1  1);\n\ntie my %community_family_name, 'Tie::IxHash' ;\n\nundef $community_family_name{ $COMMUNITIES[$_] }{ $FAMILIES[$_]}{$NAMES[$_]}\n    for 0 .. $#NAMES;\n\nfor my $community (keys %community_family_name) {\n    my $i = 0;\n    for my $family (keys %{ $community_family_name{$community} }) {\n        for my $name (keys %{ $community_family_name{$community}{$family} }) {\n            $community_family_name{$community}{$family}{$name} = $i++;\n        }\n    }\n}\n\nforeach my $community (sort keys %community_family_name)\n{\n        foreach my $family (keys %{ $community_family_name{$community} }) \n    {\n        foreach my $name (keys %{ $community_family_name{$community}{$family}}) \n        {\n            print \"[$community] = \";\n            print scalar \"%{ $community_family_name{$community}\";\n            print reverse \"$community_family_name{$community}{$family}{$name}\";\n            print \" \";\n        }\n    }\n}\nprint Dumper(\\%community_family_name);\n</code></pre>\n\n<p>Current output:</p>\n\n<pre><code>[0] = HASH(0x1038c80)0 [0] = HASH(0x1038c80)1 [0] = HASH(0x1038c80)2 [0] = HASH(0x1038c80)3 [0] = HASH(0x1038c80)4 [0] = HASH(0x1038c80)5 [0] = HASH(0x1038c80)6 ...\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>[0] = 10 7 4 0\n[1] = 11 8 3 0\n[2] = 12 6 3 0 \n</code></pre>\n\n<p>What is in the <code>%community_family_name</code></p>\n\n<pre><code>$VAR1 = {\n              '0' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ],\n                                'AD' =&gt; [\n                                          3\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          4\n                                        ],\n                                'BB' =&gt; [\n                                          5\n                                        ],\n                                'BC' =&gt; [\n                                          6\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          7\n                                        ],\n                                'CB' =&gt; [\n                                          8\n                                        ],\n                                'CC' =&gt; [\n                                          9\n                                        ]\n                              }\n                     },\n               '1' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          3\n                                        ],\n                                'BB' =&gt; [\n                                          4\n                                        ],\n                                'BC' =&gt; [\n                                          5\n                                        ],\n                                'BD' =&gt; [\n                                          6\n                                        ],\n                                'BE' =&gt; [\n                                          7\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          8\n                                        ],\n                                'CB' =&gt; [\n                                          9\n                                        ],\n                                'CC' =&gt; [\n                                          10\n                                        ]\n                              }\n                     },\n               '2' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          3\n                                        ],\n                                'BB' =&gt; [\n                                          4\n                                        ],\n                                'BC' =&gt; [\n                                          5\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          6\n                                        ],\n                                'CB' =&gt; [\n                                          7\n                                        ],\n                                'CC' =&gt; [\n                                          8\n                                        ],\n                                'CD' =&gt; [\n                                          9\n                                        ],\n                                'CE' =&gt; [\n                                          10\n                                        ],\n                                'CF' =&gt; [\n                                          11\n                                        ]\n                              }\n                     }\n            };\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1540550385, "post_id": 53006793, "comment_id": 92917403, "body": "There are a few things you could improve in your code, such as using three-argument <code>open</code> and a lexical filehandle. Both make your code more secure. <code>open my $fh, &#39;&lt;&#39;, $file or die $!; my $line = &lt;$fh&gt;; ...</code>. You should also try to make your code more consistent. The convention is to use lower case snake case variable names, such as <code>$my_line</code> (though the <i>my</i> in the name adds no value)."}, {"owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540550457, "post_id": 53006793, "comment_id": 92917436, "body": "Thanks for the tips @simbabque"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1540553558, "post_id": 53006793, "comment_id": 92919109, "body": "my ($match) = $str=~m/\\|([^\\|]*)\\|/g;"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1540550511, "last_edit_date": 1540550511, "creation_date": 1540550260, "answer_id": 53006867, "question_id": 53006793, "link": "https://stackoverflow.com/questions/53006793/unable-to-match-string-between-in-perl/53006867#53006867", "title": "Unable to match string between | in Perl", "body": "<p>The pipe <code>|</code> holds a special meaning in regular expressions. You need to escape it. The easiest way to do that is by using <code>\\Q</code> and <code>\\E</code>.</p>\n\n<pre><code>$myLine =~ /\\Q$pat\\E(.*?)\\Q$pat\\E/;\n</code></pre>\n\n<p>Or you could use the <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code> built-in</a>.</p>\n\n<pre><code>my $pat = quotemeta \"|\";\nmy @Num = $myLine =~ /$pat(.*?)$pat/; # or use [^$pat]+ \n</code></pre>\n\n<hr>\n\n<p>You can also just not use a regular expression search and simply <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> the line. If you always want the second column, this will do just as well.</p>\n\n<pre><code>my (undef, $num) = split /\\|/, $line;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1540550487, "creation_date": 1540550487, "answer_id": 53006931, "question_id": 53006793, "link": "https://stackoverflow.com/questions/53006793/unable-to-match-string-between-in-perl/53006931#53006931", "title": "Unable to match string between | in Perl", "body": "<p>Looks like you are trying to split the line on the <code>|</code> character, so use the split function.</p>\n\n<pre><code>my @Num = split /\\|/, $myLine;\n</code></pre>\n\n<p>This splits $myLine on <code>|</code>. Note that you may have to change the index on <code>@Num</code> to get the correct item out of it.</p>\n"}], "owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 53006867, "answer_count": 2, "score": 1, "last_activity_date": 1540551831, "creation_date": 1540549986, "last_edit_date": 1540551831, "question_id": 53006793, "link": "https://stackoverflow.com/questions/53006793/unable-to-match-string-between-in-perl", "title": "Unable to match string between | in Perl", "body": "<p>I have a text read from a fasta file and I am trying to read the accession number in Perl. But I am not getting an output. Here's the code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub main {\n\n    my $file = \"PXXXXX.fasta\";\n\n    if(!open(FASTA, $file)) {\n        die \"Could not find $file\\n\";\n    }\n    my $myLine = &lt;FASTA&gt;;\n    my $pat = \"|\";\n    my @Num = $myLine =~ /$pat(.*?)$pat/;\n    print($Num[0]);\n    close(FASTA);\n\n}\n\nmain();\n</code></pre>\n\n<p>The content of the FASTA filehandle is:</p>\n\n<blockquote>\n  <p>sp|P27455|MOMP_CHLPN Major outer membrane porin OS=Chlamydia pneumoniae OX=83558 GN=ompA PE=2 SV=1\n  MKKLLKSALLSAAFAGSVGSLQALPVGNPSDPSLLIDGTIWEGAAGDPCDPCATWCDAIS\n  LRAGFYGDYVFDRILKVDAPKTFSMGAKPTGSAAANYTTAVDRPNPAYNKHLHDAEWFTN\n  AGFIALNIWDRFDVFCTLGASNGYIRGNSTAFNLVGLFGVKGTTVNANELPNVSLSNGVV\n  ELYTDTSFSWSVGARGALWECGCATLGAEFQYAQSKPKVEELNVICNVSQFSVNKPKGYK\n  GVAFPLPTDAGVATATGTKSATINYHEWQVGASLSYRLNSLVPYIGVQWSRATFDADNIR\n  IAQPKLPTAVLNLTAWNPSLLGNATALSTTDSFSDFMQIVSCQINKFKSRKACGVTVGAT\n  LVDADKWSLTAEARLINERAAHVSGQFRF</p>\n</blockquote>\n\n<p>Any clue how to fix the code to return: <em>P27455</em> ?</p>\n"}, {"tags": ["perl", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540549240, "post_id": 53006485, "comment_id": 92916836, "body": "I think you are using either the Dancer or Dancer2 framework, or the Mojolicious framework, but I cannot be sure without seeing your code."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1540550374, "post_id": 53006485, "comment_id": 92917398, "body": "Thanks for welcome, I have edited my question, hopefully it makes sense now. If you are not getting it, please let me know, I may modify it and make it clearer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540550934, "post_id": 53006485, "comment_id": 92917692, "body": "Which version of Dancer2? Please run <code>perl -MDancer2\\ 99</code> on the terminal, including the space after the backslash."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551177, "post_id": 53006485, "comment_id": 92917814, "body": "I cannot reproduce on Dancer2 0.206000 and Dancer2::Plugin::Deferred 0.007017. Are you using something else as well? Please <a href=\"https://stackoverflow.com/posts/53006485/edit\">edit</a> again and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551205, "post_id": 53006485, "comment_id": 92917828, "body": "Its 0.206000 on running this <code>perl -MDancer2\\ 99 </code> I am getting following error:"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551231, "post_id": 53006485, "comment_id": 92917842, "body": "<code>Dancer2 version 99 required--this is only version 0.206000 at &#47;usr&#47;local&#47;share&#47;perl5&#47;Dancer2.pm line 17. BEGIN failed--compilation aborted.</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551407, "post_id": 53006485, "comment_id": 92917944, "body": "That error message was expected. This is the fastest way to get the version number."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540551456, "post_id": 53006485, "comment_id": 92917976, "body": "So we have the same D2 version, but I don&#39;t get the error. Please make a full program I can run. Anyway, the obvious solution is to do what it says in the warning and use <code>$self-&gt;app-&gt;request</code> instead. ;)"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540552237, "post_id": 53006485, "comment_id": 92918388, "body": "Actually we are calling functions as  ` get &#39;/testModule/testSubModule/:test_id/update&#39; =&gt; \\&amp;test_controller::testMethod; `  now in testMethod if we try to get  <code>resuest-&gt;params; </code> we are getting values but warnings too -;p,,"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540552368, "post_id": 53006485, "comment_id": 92918452, "body": "Please make a stand-alone program to demonstrate the warning. One route, as simple as possible."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540552393, "post_id": 53006485, "comment_id": 92918468, "body": "and we cant use $self there.. as if we call functions by using <code>::</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540552471, "post_id": 53006485, "comment_id": 92918523, "body": "The colons have nothing to do with method calls. Dancer2 will always call route handlers as methods and pass along <code>$self</code>. That&#39;s just how it works. It doesn&#39;t matter if you provide a fresh anonymous sub or a reference to an existing sub by name to the <code>get</code> DSL helper."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540791291, "post_id": 53006485, "comment_id": 92977987, "body": "I am getting this error:  <code>error @2018-10-29 01:33:10&gt; Route exception: Can&#39;t call method &quot;app&quot; on an undefined value at &#47;foo&#47;foo_controller.pm line 227. in &#47;usr&#47;local&#47;share&#47;perl5&#47;Dancer2&#47;Core&#47;App.pm l. 1473 </code>"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540791329, "post_id": 53006485, "comment_id": 92977998, "body": "we are unable to get this <code>$self</code> object there."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540791439, "post_id": 53006485, "comment_id": 92978029, "body": "its undef there:"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540791455, "post_id": 53006485, "comment_id": 92978033, "body": "` $VAR1 = undef;`"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1540796737, "post_id": 53006485, "comment_id": 92979921, "body": "You need to show the code you&#39;ve used. Run my example. Does it work for you? Then apply the technique to your program. If mine works and yours doesn&#39;t you are doing something wrong. I can&#39;t help you if I can&#39;t see it."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814156, "post_id": 53007601, "comment_id": 92989221, "body": "Thanks @simbabque It is working fine for <b>get</b> calls but we are getting error in ajax calls, we are calling this function as: <code>ajax &#39;&#47;_updateTest&#39; =&gt;  \\&amp;main::foo;</code>  Error is : <code>error @2018-10-29 06:48:42&gt; Route exception: Can&#39;t call method &quot;app&quot; on an undefined value at</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 1, "creation_date": 1540814376, "post_id": 53007601, "comment_id": 92989362, "body": "@I_G again, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I can&#39;t help without knowing all the facts. Right now you are just wasting both our time if you don&#39;t tell me everything. Nothing is worse than guessing in IT."}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814407, "post_id": 53007601, "comment_id": 92989388, "body": "similar is the case for <code>ajax [&#39;post&#39;] =&gt; &#39;&#47;test&#47;testCall&#39; =&gt;  \\&amp;main::foo;</code>"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814577, "post_id": 53007601, "comment_id": 92989499, "body": "<code>use Dancer2;  get &#39;&#47;&#39; =&gt; \\&amp;main::foo; #working fine  # $self object is undef for following type of calls  ajax &#39;&#47;_updateTest&#39; =&gt; \\&amp;main::foo;   ajax [&#39;post&#39;] =&gt; &#39;&#47;test&#47;testCall&#39; =&gt; \\&amp;main::foo;  sub foo {   my $self = shift;   return $self-&gt;app-&gt;request-&gt;params; }</code>"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814657, "post_id": 53007601, "comment_id": 92989539, "body": "we have tested with your provided code, just changes the way of call, I mean ajax and post.  @simbabque, you may please test the above code provided by you by updating the calling way  at my end there is a routing file in which I change the calling methodology."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814671, "post_id": 53007601, "comment_id": 92989543, "body": "@I_G ok, NOW I can reproduce it. You should have said that you have the AJAX plugin from the start. The plugins you showed in the question are completely unrelated."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540814870, "post_id": 53007601, "comment_id": 92989654, "body": "@I_G indeed, the ::Ajax plugin doesn&#39;t allow this. I think that&#39;s a bug.  <a href=\"https://metacpan.org/source/CROMEDOME/Dancer2-Plugin-Ajax-0.300000/lib/Dancer2/Plugin/Ajax.pm#L46\" rel=\"nofollow noreferrer\">metacpan.org/source/CROMEDOME/Dancer2-Plugin-Ajax-0.300000/l&zwnj;&#8203;ib/&hellip;</a>. There is no evidence that this has been possible, and the last release of ::Ajax is over two years ago. I will file a bug report."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540815690, "post_id": 53007601, "comment_id": 92990139, "body": "@I_G I am currently filing a ticket on github. Feel free to grab it and supply a patch. The D2 maintainers are usually quick with accepting those, especially as we&#39;ve still got a few days of Hacktoberfest left."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1540816865, "post_id": 53007601, "comment_id": 92990819, "body": "I proposed a fix."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1542103775, "post_id": 53007601, "comment_id": 93439075, "body": "@I_G my fix has been released, see <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Ajax\" rel=\"nofollow noreferrer\">metacpan.org/pod/Dancer2::Plugin::Ajax</a> for version 0.400000."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1542194846, "post_id": 53007601, "comment_id": 93478959, "body": "@I_G you&#39;re welcome. Please note I am not affiliated with the Dancer team, although I am friends with some of them. In the future, feel free to suggest such changes yourself. They always welcome the help! :)"}, {"owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "edited": false, "score": 0, "creation_date": 1542283572, "post_id": 53007601, "comment_id": 93518148, "body": "That&#39;s great! We are happy to find such response from Dancer 2."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1540552771, "creation_date": 1540552771, "answer_id": 53007601, "question_id": 53006485, "link": "https://stackoverflow.com/questions/53006485/plugin-dsl-method-request-is-deprecated-use-self-app-request-instead/53007601#53007601", "title": "Plugin DSL method &#39;request&#39; is deprecated. Use &#39;$self-&gt;app-&gt;request&#39; instead&#39;", "body": "<p>Dancer2 is mostly object-oriented. It always passes a <code>$self</code> to your route handlers. The warning is pretty clear. You should not use that DSL keyword, but instead access the request via <code>$self-&gt;app</code>.</p>\n\n<p>You need to grab <code>$self</code> from the argument list of your route handlers. It doesn't matter whether you use an anonymous sub or a reference to a named sub, in the same package or any other package.</p>\n\n<pre><code>use Dancer2;\n\nget '/' =&gt; \\&amp;main::foo;\n\nsub foo {\n  my $self = shift;\n  return $self-&gt;app-&gt;request-&gt;params;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10562558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad89ac395b4b16a516f2d744f598ee?s=128&d=identicon&r=PG&f=1", "display_name": "I_G", "link": "https://stackoverflow.com/users/10562558/i-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53007601, "answer_count": 1, "score": -1, "last_activity_date": 1540552771, "creation_date": 1540548960, "last_edit_date": 1540552002, "question_id": 53006485, "link": "https://stackoverflow.com/questions/53006485/plugin-dsl-method-request-is-deprecated-use-self-app-request-instead", "title": "Plugin DSL method &#39;request&#39; is deprecated. Use &#39;$self-&gt;app-&gt;request&#39; instead&#39;", "body": "<p>In perl, I am using Dancer 2 frame work, and using this plugin</p>\n\n<pre><code>use Dancer2::Plugin::Deferred;\nuse Dancer2::Plugin::Locale::Wolowitz;\n</code></pre>\n\n<p>For statements like below:</p>\n\n<pre><code>my $method = request-&gt;method();\n\nmy $params = request-&gt;params;\n</code></pre>\n\n<p>I am getting following warnings on console:</p>\n\n<pre><code>Plugin DSL method 'request' is deprecated. Use '$self-&gt;app-&gt;request' instead'.\n</code></pre>\n\n<p>Please give your recommendations to solve it out, I am not sure which of these two modules are causing this. </p>\n\n<p>thanks</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1540546623, "post_id": 53005502, "comment_id": 92915334, "body": ".cpan/build is a temp directory for building and testing modules. Either test phase or install phase failed. You may need root privileges or use local::lib <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">metacpan.org/pod/local::lib</a> to install modules."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1540546782, "post_id": 53005502, "comment_id": 92915422, "body": "Those aren&#39;t installation directories. Where did the modules actually get installed?"}, {"owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "edited": false, "score": 0, "creation_date": 1540547578, "post_id": 53005502, "comment_id": 92915882, "body": "I use cpan -fi switches for some"}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "is_accepted": false, "score": 0, "last_activity_date": 1540552589, "creation_date": 1540552589, "answer_id": 53007555, "question_id": 53005502, "link": "https://stackoverflow.com/questions/53005502/perl-cpan-installed-modules-are-installed-with-an-individual-lib-path/53007555#53007555", "title": "Perl cpan installed modules are installed with an individual lib path", "body": "<p>All the module installation failed because the 'make' utility was not installed.\nNow the cpan modules get installed and can be used within my scripts.</p>\n"}], "owner": {"reputation": 680, "user_id": 2050516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aad258694d14cabdf20fadf443f8a55c?s=128&d=identicon&r=PG", "display_name": "user2050516", "link": "https://stackoverflow.com/users/2050516/user2050516"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540552589, "creation_date": 1540545660, "question_id": 53005502, "link": "https://stackoverflow.com/questions/53005502/perl-cpan-installed-modules-are-installed-with-an-individual-lib-path", "title": "Perl cpan installed modules are installed with an individual lib path", "body": "<p>Installing with the cpan cli tool modules - they are not found at script execution time basically as part of the @INC directories. I am using cygwin.</p>\n\n<p>/home/myuser/.local/share/.cpan/build/Email-Sender-1.300031-0/lib/<strong>Email/Sender/Simple.pm</strong>\n/home/myuser/.local/share/.cpan/build/Email-Simple-2.216-0/lib/<strong>Email/Simple.pm</strong></p>\n\n<p>I could now reference each single lib directory (they differ with each module installation) using the PERL5LIB Variable which is dull and boring. Am I doing something wrong? I want to install Perl Modules with cpan and use them afterwards without care where they are located...</p>\n"}, {"tags": ["perl", "soap", "exchange-server", "exchangewebservices", "ntlm"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540544977, "post_id": 53004270, "comment_id": 92914359, "body": "There are not a lot of resources on non-Microsoft language implementations for the Exchange web services. Especially not on Perl. I&#39;ve gotten everything I needed working using and extending <a href=\"https://metacpan.org/pod/EWS::Client\" rel=\"nofollow noreferrer\">metacpan.org/pod/EWS::Client</a> locally. But it doesn&#39;t have built in what you need, I believe."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540545055, "post_id": 53004270, "comment_id": 92914410, "body": "To make your debugging easier, take a look at <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger\" rel=\"nofollow noreferrer\">metacpan.org/pod/LWP::ConsoleLogger</a>, especially LWP::ConsoleLogger::Everywhere, which I submitted to LWP::ConsoleLogger  when I was debugging the EWS API."}, {"owner": {"reputation": 21, "user_id": 2083971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a977150212cc5008a65e37cf0b438494?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Marczy\u0144ski", "link": "https://stackoverflow.com/users/2083971/micha%c5%82-marczy%c5%84ski"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540545220, "post_id": 53004270, "comment_id": 92914502, "body": "@simbabque How is it different to <code>SOAP::Lite +trace =&gt; &quot;all&quot;</code> which already gives me full envelope and request headers?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1540546211, "post_id": 53004270, "comment_id": 92915082, "body": "There&#39;s probably not a big difference. It handles requests and responses. However, the implementation for the webservice I used was based on XML::Compile::SOAP, not SOAP::Lite, so didn&#39;t provide easy extra debugging options."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540547261, "post_id": 53004270, "comment_id": 92915705, "body": "Do you get the same auth error with incorrect password? Is it the same for all 3 requests? Maybe there are additional requirements to add an attachment. Are you sure that you try to add an attachment to the right draft?"}, {"owner": {"reputation": 828, "user_id": 10252988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047bac7a125b9725dc9a257f8f0e0266?s=128&d=identicon&r=PG&f=1", "display_name": "Alina Li", "link": "https://stackoverflow.com/users/10252988/alina-li"}, "edited": false, "score": 0, "creation_date": 1540803464, "post_id": 53004270, "comment_id": 92982954, "body": "Did you try to add \u201c &lt;t:IsInline&gt;false&lt;/t:IsInline&gt; &lt;t:IsContactPhoto&gt;false&lt;/t:IsContactPhoto&gt; \u201d, like this: \u201d &lt;t:Attachments&gt;             &lt;t:FileAttachment&gt;               &lt;t:Name&gt;FileAttachment.txt&lt;/t:Name&gt;               &lt;t:IsInline&gt;false&lt;/t:IsInline&gt;               &lt;t:IsContactPhoto&gt;false&lt;/t:IsContactPhoto&gt;               &lt;t:Content&gt;VGhpcyBpcyBhIGZpbGUgYXR0YWNobWVudC4=&lt;/t:Content&gt; &lt;/t:FileAttachment&gt;&lt;/t:Attachments&gt; \u201d.  Please refer to this link: <a href=\"https://docs.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-add-attachments-by-using-ews-in-exchange\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/exchange/client-developer/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 2083971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a977150212cc5008a65e37cf0b438494?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Marczy\u0144ski", "link": "https://stackoverflow.com/users/2083971/micha%c5%82-marczy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1540884554, "post_id": 53004270, "comment_id": 93017336, "body": "I finally came to conclusion that problem was that attachment was too big (although it was around 40KB, which is strange). When I sent smaller file, it worked just fined. Question however remains why it worked with SOAP UI, but not in code?"}], "owner": {"reputation": 21, "user_id": 2083971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a977150212cc5008a65e37cf0b438494?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Marczy\u0144ski", "link": "https://stackoverflow.com/users/2083971/micha%c5%82-marczy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540544800, "creation_date": 1540541437, "last_edit_date": 1540544800, "question_id": 53004270, "link": "https://stackoverflow.com/questions/53004270/sending-attachments-via-exchange-web-services-api", "title": "Sending attachments via Exchange Web Services API", "body": "<p>I'm currently working on integrating our system with MS Exchange (I'm using Microsoft Exchange Server 2013 15.00.1395.000) and I'm having a weird issue. Namely, I can create email draft and I can send it (as well as call other services), but for some reason I cannot add an attachment to email, because server won't authorize me (I keep getting <code>401 Anonymous Request Disallowed</code>).\nAll calls are made by user with <code>ApplicationImpersonation</code> role and here is my Perl function that prepares my calls:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub do_authorized_call($$$) {\n    my ($callparam1, $callparam2, $callparam3) = @_;\n    my $username = 'USERNAME';\n    my $password = 'PASSWORD';\n    my $proxy = 'exchange.asmx PATH';\n\n    my @ua_args = (keep_alive =&gt; 1);\n    my @credentials = (\"SERVER ADDRESS WITH 443 PORT\", \"\", $username, $password);\n    my $ua = LWP::UserAgent-&gt;new(@ua_args);\n    $ua-&gt;credentials(@credentials);\n\n    my $soap = SOAP::Lite\n        -&gt;uri(MESSAGES_URI)\n        -&gt;ns(MESSAGES_URI, 'm')\n        -&gt;endpoint($proxy)\n        -&gt;encodingStyle('') # .NET requirement\n        -&gt;on_action( sub { join '/', MESSAGES_URI } )\n        -&gt;proxy($proxy, @ua_args, credentials =&gt; \\@credentials)\n        -&gt;on_fault(\\&amp;soapGetBad);\n    $soap-&gt;serializer()-&gt;register_ns(TYPES_URI, 't');\n    $soap-&gt;schema-&gt;useragent($ua);\n    $soap-&gt;transport()-&gt;proxy-&gt;conn_cache($ua-&gt;conn_cache);\n    return $soap-&gt;call($callparam1, $callparam2, $callparam3);\n</code></pre>\n\n<p>CreateAttachment request generated by this function look as follows:</p>\n\n<pre><code>POST &lt;EWS ADDRESS&gt; HTTP/1.1\nAccept: text/xml\nAccept: multipart/*\nAccept: application/soap\nAuthorization: NTLM TlRMTVNTUAABAAAAB7IAAAoACgAgAAAAAgACACoAAABBcHBJbXBfU1ZDQ1c=\nUser-Agent: SOAP::Lite/Perl/1.27\nContent-Length: 52759\nContent-Type: text/xml; charset=utf-8\nSOAPAction: http://schemas.microsoft.com/exchange/services/2006/messages\n</code></pre>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;soap:Envelope xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;soap:Header&gt;\n        &lt;t:ExchangeImpersonation&gt;\n            &lt;t:ConnectingSID&gt;\n                &lt;t:SmtpAddress&gt;USER_EMAIL&lt;/t:SmtpAddress&gt;\n            &lt;/t:ConnectingSID&gt;\n        &lt;/t:ExchangeImpersonation&gt;\n        &lt;t:RequestServerVersion Version=\"Exchange2013\" /&gt;\n    &lt;/soap:Header&gt;\n    &lt;soap:Body&gt;\n        &lt;CreateAttachment xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;\n            &lt;ParentItemId ChangeKey=\"CQAAABYAAABp6uewA08qSL/Bt1DTe9bxAAAS2C7L\" Id=\"AAMkAGM5N2Q4MGU2LTNlYTMtNDIzZi1iZTg4LTFlZmRmZTQ1NTQ4MQBGAAAAAADa5apTmZVLS4pW4o+BzNotBwBp6uewA08qSL/Bt1DTe9bxAAAAAAEPAABp6uewA08qSL/Bt1DTe9bxAAAS2C56AAA=\" /&gt;\n            &lt;Attachments&gt;\n                &lt;t:FileAttachment&gt;\n                    &lt;t:Name&gt;Attachment555.docx&lt;/t:Name&gt;\n                    &lt;t:Content&gt;ATTACHMENT CONTENT REMOVED FOR BREVITY&lt;/t:Content&gt;\n                &lt;/t:FileAttachment&gt;\n            &lt;/Attachments&gt;\n        &lt;/CreateAttachment&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>If I send exactly same envelope in SoapUI and provide username and password as NTLM authorization, it all works properly.</p>\n\n<p>And again, as I said in the beginning, I have 3 requests in sequence: create draft, add attachments (if needed) and send draft (all using the same <code>do_authorized_call</code> that has uses the same credentials. If I comment the attachments out, draft creation and sending works perfectly fine, no issue with authorization. But as soon as attachments are involved, it all fails. I checked logs and couldn't figure anything out. All I read is several failed authorization attempts.</p>\n\n<p>I'm feeling helpless right now, because I browsed the internet far and wide, I've checked everything, debugged it hundred times, verifying every single line of code and can't figure out what's going on.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540542145, "post_id": 53004313, "comment_id": 92912796, "body": "yes, for every $name subhash key just contain only 1 value, because I need to call those keys later on, or is it doable not to be in an array ref? Thank you for the tips. Thank you, really."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1540542211, "post_id": 53004313, "comment_id": 92912838, "body": "So you can assign just <code>$i++</code> without the square brackets."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1540542336, "post_id": 53004313, "comment_id": 92912900, "body": "what is the use of undef hash?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1540547560, "post_id": 53004313, "comment_id": 92915872, "body": "It creates the structure so you can later iterate over it in the expected order."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1598206603, "last_edit_date": 1598206603, "creation_date": 1540541611, "answer_id": 53004313, "question_id": 53003949, "link": "https://stackoverflow.com/questions/53003949/how-to-increment-the-value-of-hash-for-every-subshash-perl/53004313#53004313", "title": "How to increment the value of hash for every subshash Perl", "body": "<p>You need to iterate the elements by communities, resetting the counter for each. So, I first created the structure with no counters, and then iterated over it in the correct order while setting the values.</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Tie::Autotie 'Tie::IxHash';\n\nmy @NAMES       = qw(AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AD CD CE CF BD BE);\nmy @FAMILIES    = qw(A  A  A  B  B  B  C  C  C  A  A  A  B  B  B  C  C  C  A  A  A  B  B  B  C  C  C  A  C  C  C  B  B);\nmy @COMMUNITIES = qw(0  0  0  0  0  0  0  0  0  1  1  1  1  1  1  1  1  1  2  2  2  2  2  2  2  2  2  0  2  2  2  1  1);\n\ntie my %community_family_name, 'Tie::IxHash' ;\n\nundef $community_family_name{ $COMMUNITIES[$_] }{ $FAMILIES[$_]}{$NAMES[$_]}\n    for 0 .. $#NAMES;\n\nfor my $community (keys %community_family_name) {\n    my $i = 0;\n    for my $family (keys %{ $community_family_name{$community} }) {\n        for my $name (keys %{ $community_family_name{$community}{$family} }) {\n            $community_family_name{$community}{$family}{$name} = [$i++];\n        }\n    }\n}\nuse Data::Dumper; print Dumper(\\%community_family_name);\n</code></pre>\n<p>Note: Are you sure the values need to be in an array ref? There's never more than one value.</p>\n<p>By convention, lowercase names are used for mutable variables in Perl.</p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53004313, "answer_count": 1, "score": 0, "last_activity_date": 1598206603, "creation_date": 1540540260, "last_edit_date": 1540540760, "question_id": 53003949, "link": "https://stackoverflow.com/questions/53003949/how-to-increment-the-value-of-hash-for-every-subshash-perl", "title": "How to increment the value of hash for every subshash Perl", "body": "<p>I want to increment the value of hash starting from 0 for each $COMMUNITY, I define an array @indicator from 0 until the same index of the array @NAME and push it to become the value, but it is not I want exactly, and I don't know how to this. I know very well that the value is not in the order because the place in array in not organized first, but how to do this exactly, and then,\nhow to print every first value of subhash $FAMILY.\nfor example,</p>\n\n<pre><code>community 0 = name 0 4 7\ncommunity 1 = name 0 3 8\ncommunity 2 = name 0 3 6\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse warnings;\nuse strict;\nuse Tie::Autotie 'Tie::IxHash';\n\n\nmy @NAME= qw(AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AA AB AC BA BB BC CA CB CC AD CD CE CF BD BE);\nmy @FAMILY= qw(A A A B B B C C C A A A B B B C C C A A A B B B C C C A C C C B B);\nmy @COMMUNITY= qw(0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 0 2 2 2 1 1);\n\ntie my %COMMUNITY_FAMILY_NAME,'Tie::IxHash' ;\nmy @indicator;\n\nforeach (my $x=0;$x&lt;=scalar @NAME;$x++)\n{\npush @indicator,$x;\n}\n\n\npush @{ $COMMUNITY_FAMILY_NAME{ $COMMUNITY[$_] }{ $FAMILY[$_]}{$NAME[$_]} }, $indicator[$_]  for 0 .. $#NAME;\nprint Dumper(\\%COMMUNITY_FAMILY_NAME);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          '0' =&gt; {\n                   'A' =&gt; {\n                            'AA' =&gt; [\n                                      0\n                                    ],\n                            'AB' =&gt; [\n                                      1\n                                    ],\n                            'AC' =&gt; [\n                                      2\n                                    ],\n                            'AD' =&gt; [\n                                      27\n                                    ]\n                          },\n                   'B' =&gt; {\n                            'BA' =&gt; [\n                                      3\n                                    ],\n                            'BB' =&gt; [\n                                      4\n                                    ],\n                            'BC' =&gt; [\n                                      5\n                                    ]\n                          },\n                   'C' =&gt; {\n                            'CA' =&gt; [\n                                      6\n                                    ],\n                            'CB' =&gt; [\n                                      7\n                                    ],\n                            'CC' =&gt; [\n                                      8\n                                    ]\n                          }\n                 },\n           '1' =&gt; {\n                   'A' =&gt; {\n                            'AA' =&gt; [\n                                      9\n                                    ],\n                            'AB' =&gt; [\n                                      10\n                                    ],\n                            'AC' =&gt; [\n                                      11\n                                    ]\n                          },\n                   'B' =&gt; {\n                            'BA' =&gt; [\n                                      12\n                                    ],\n                            'BB' =&gt; [\n                                      13\n                                    ],\n                            'BC' =&gt; [\n                                      14\n                                    ],\n                            'BD' =&gt; [\n                                      31\n                                    ],\n                            'BE' =&gt; [\n                                      32\n                                    ]\n                          },\n                   'C' =&gt; {\n                            'CA' =&gt; [\n                                      15\n                                    ],\n                            'CB' =&gt; [\n                                      16\n                                    ],\n                            'CC' =&gt; [\n                                      17\n                                    ]\n                          }\n                 },\n           '2' =&gt; {\n                   'A' =&gt; {\n                            'AA' =&gt; [\n                                      18\n                                    ],\n                            'AB' =&gt; [\n                                      19\n                                    ],\n                            'AC' =&gt; [\n                                      20\n                                    ]\n                          },\n                   'B' =&gt; {\n                            'BA' =&gt; [\n                                      21\n                                    ],\n                            'BB' =&gt; [\n                                      22\n                                    ],\n                            'BC' =&gt; [\n                                      23\n                                    ]\n                          },\n                   'C' =&gt; {\n                            'CA' =&gt; [\n                                      24\n                                    ],\n                            'CB' =&gt; [\n                                      25\n                                    ],\n                            'CC' =&gt; [\n                                      26\n                                    ],\n                            'CD' =&gt; [\n                                      28\n                                    ],\n                            'CE' =&gt; [\n                                      29\n                                    ],\n                            'CF' =&gt; [\n                                      30\n                                    ]\n                          }\n                 }\n        };\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code> $VAR1 = {\n              '0' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ],\n                                'AD' =&gt; [\n                                          3\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          4\n                                        ],\n                                'BB' =&gt; [\n                                          5\n                                        ],\n                                'BC' =&gt; [\n                                          6\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          7\n                                        ],\n                                'CB' =&gt; [\n                                          8\n                                        ],\n                                'CC' =&gt; [\n                                          9\n                                        ]\n                              }\n                     },\n               '1' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          3\n                                        ],\n                                'BB' =&gt; [\n                                          4\n                                        ],\n                                'BC' =&gt; [\n                                          5\n                                        ],\n                                'BD' =&gt; [\n                                          6\n                                        ],\n                                'BE' =&gt; [\n                                          7\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          8\n                                        ],\n                                'CB' =&gt; [\n                                          9\n                                        ],\n                                'CC' =&gt; [\n                                          10\n                                        ]\n                              }\n                     },\n               '2' =&gt; {\n                       'A' =&gt; {\n                                'AA' =&gt; [\n                                          0\n                                        ],\n                                'AB' =&gt; [\n                                          1\n                                        ],\n                                'AC' =&gt; [\n                                          2\n                                        ]\n                              },\n                       'B' =&gt; {\n                                'BA' =&gt; [\n                                          3\n                                        ],\n                                'BB' =&gt; [\n                                          4\n                                        ],\n                                'BC' =&gt; [\n                                          5\n                                        ]\n                              },\n                       'C' =&gt; {\n                                'CA' =&gt; [\n                                          6\n                                        ],\n                                'CB' =&gt; [\n                                          7\n                                        ],\n                                'CC' =&gt; [\n                                          8\n                                        ],\n                                'CD' =&gt; [\n                                          9\n                                        ],\n                                'CE' =&gt; [\n                                          10\n                                        ],\n                                'CF' =&gt; [\n                                          11\n                                        ]\n                              }\n                     }\n            };\n</code></pre>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540535209, "post_id": 53001944, "comment_id": 92909274, "body": "@zdim It&#39;s fixed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1540535974, "post_id": 53001944, "comment_id": 92909584, "body": "Posted, but there may be question about the exact data format (on which the answer relies, and some of which I assumed). Let me know how it goes."}], "answers": [{"comments": [{"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540536111, "post_id": 53002818, "comment_id": 92909648, "body": "Thank you, but why am I getting this error: <code>perl grab_text_from_cleaveland_output.pl IGR-output.txt             Modification of non-creatable array value attempted, subscript -1 at grab_text_from_cleaveland_output.pl line 22, &lt;$fh&gt; line 13</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540536264, "post_id": 53002818, "comment_id": 92909715, "body": "@MAPK  I just copy-pasted my code from this post, and your sample data and am getting the correct output?  I am adding the output to the answer..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 1, "creation_date": 1540536340, "post_id": 53002818, "comment_id": 92909754, "body": "@MAPK I realize I left out the <code>Category</code>, adding ... but it works fine for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540537101, "post_id": 53002818, "comment_id": 92910164, "body": "@MAPK Got it: There is a <code>Query:</code> in the beginning of the file, before any <code>Degardome Category</code>.  Then the code matches it and tries to add it to the array ... which doesn&#39;t exist yet.  What do you want with that line, before any <code>Degardome Category</code> was seen in the file?"}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540537198, "post_id": 53002818, "comment_id": 92910217, "body": "Actually it should grab the this type of values first: <code>3&#39; UGACGUUUCAGUUCCCAGUAU 5&#39; Query: Seq_3694_200</code> , and then <code>Degradome Category</code> comes after that."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540537358, "post_id": 53002818, "comment_id": 92910317, "body": "For my example data, there will be only one output."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 1, "creation_date": 1540537381, "post_id": 53002818, "comment_id": 92910328, "body": "@MAPK Ah. Different than the posted sample data (please be careful with that).  OK, will fix it. To confirm: is there <i>always</i> first <code>Query</code>, then <code>Category</code> and <code>p-value</code>?  And do you still want the output as shown?"}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540537422, "post_id": 53002818, "comment_id": 92910345, "body": "Yes, exactly. Sorry for the confusion."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 1, "creation_date": 1540537507, "post_id": 53002818, "comment_id": 92910385, "body": "@MAPK Also: is there any other way or place where there could be the phrase <code>Query:</code> ?  I looked down the file but it&#39;s too big to scan whole :).  Plus, other files may be a little different..."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540537658, "post_id": 53002818, "comment_id": 92910472, "body": "<code>Query:</code>, <code>Degradome Category</code> and <code>Degradome p-value:</code> are unique to make one row in the result."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 1, "creation_date": 1540539160, "post_id": 53002818, "comment_id": 92911248, "body": "@MAPK Done, updated answer.  With the file you showed there are 284 lines of output. Categories alternate between 0 to 4. p-values less than zero except for two that are over 7 and one over 3."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540539224, "post_id": 53002818, "comment_id": 92911285, "body": "Thank you so much. I mostly work in R and this was completely new to me. Helped a lot!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540539301, "post_id": 53002818, "comment_id": 92911326, "body": "@MAPK Alright :)  Apart from the regex, it&#39;s purely procedural and would go very similarly in any language, so it may be useful in that sense too."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 1, "creation_date": 1540539356, "post_id": 53002818, "comment_id": 92911355, "body": "@MAPK I&#39;d suggest to update the data sample, so to start from <code>Query:</code> etc. -- for those who may come later.  I can do it, too, if that&#39;s not a problem (to extract a handful of lines from the full file you linked)."}, {"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540540021, "post_id": 53002818, "comment_id": 92911710, "body": "Updated! Thanks again!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1554610079, "last_edit_date": 1554610079, "creation_date": 1540535809, "answer_id": 53002818, "question_id": 53001944, "link": "https://stackoverflow.com/questions/53001944/how-do-i-retrieve-values-from-successive-lines-in-perl/53002818#53002818", "title": "How do I retrieve values from successive lines in perl?", "body": "<p>Since you need straight pieces of data from each section, and both sections and data come clearly demarcated, the only question is of what data structure to use.  Given that you want mere lines with values collected from each section a simple array should be fine.</p>\n\n<p>It is known that the phrases of interest, <code>Query:</code> then <code>Degardome Category: N</code> then <code>p-value</code>, are unique to the context and places shown in the sample. </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift || die \"Usage $0 file\\n\";\n\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nmy (@res, @query, $category, $pvalue);\n\nwhile (&lt;$fh&gt;) {\n    next if not /\\S/;\n\n    if (/(.*?)\\s+Query:\\s+(.*)/) {\n        @query = ($1, $2);\n        next;\n    }   \n\n    if (/^\\s*(Degardome Category:\\s+[0-9]+)/) {\n        $category = $1; \n    }   \n    elsif (/^\\s*(Degradome p-value:\\s+[0-9.]+)/) {\n        $pvalue = $1; \n        push @res, [$category, $pvalue, @query];\n    }   \n}\n\nsay \"@$_\" for @res;\n</code></pre>\n\n<p>The end of a section is detected with the <code>p-value:</code> line, at which point we add to the <code>@res</code> an arrayref with all needed values captured up to that point.  </p>\n\n<p>The regex throughout depends on properties of data seen in the sample.  Please review and adjust if some of my assumptions aren't right.</p>\n\n<p>Details can also be pried from data more precisely, even by simply adding capture groups to the regexes above (and saving those captures into additional data structures).</p>\n"}], "owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53002818, "answer_count": 1, "score": 2, "last_activity_date": 1566837124, "creation_date": 1540531341, "last_edit_date": 1566837124, "question_id": 53001944, "link": "https://stackoverflow.com/questions/53001944/how-do-i-retrieve-values-from-successive-lines-in-perl", "title": "How do I retrieve values from successive lines in perl?", "body": "<p>I have this data below,called <code>data.txt</code>, I want to retrieve four columns from this data. First, I want to retrieve degradome category, then p-value, then the text before and after <code>Query:</code>. So the result should look like this(showing the first row only):</p>\n\n<pre><code>Degardome Category: 3  Degradome p-value: 0.0195958324320822   3' UGACGUUUCAGUUCCCAGUAU 5' Seq_3694_200\n</code></pre>\n\n<p>data.txt:</p>\n\n<pre><code>5' CCGGUAAGGUUAUGGGUCAUG 3' Transcript: Supercontig_2.8_1446328:1451-1471 Slice Site:1462\n      |o||o||o| |||||||o\n3' UGACGUUUCAGUUCCCAGUAU 5' Query: Seq_3694_200\n\nSiteID: Supercontig_2.8_1446328:1462\nMFE of perfect match: -36.10\nMFE of this site: -23.60\nMFEratio: 0.653739612188366\nAllen et al. score: 7.5\nPaired Regions (query5'-query3',transcript3'-transcript5')\n    1-8,1471-1464\n    10-18,1462-1454\nUnpaired Regions (query5'-query3',transcript3'-transcript5')\n    9-9,1463-1463   SIL: Symmetric internal loop\n    19-21,1453-1451 UP3: Unpaired region at 3' of query\n\nDegradome data file: /media/owner/newdrive/phasing/degradome/_degradome.20171210/bbduk_trimmed/merged_HV2.fasta_dd.txt\nDegardome Category: 3\nDegradome p-value: 0.0195958324320822\nT-Plot file: T-plots-IGR/Seq_3694_200_Supercontig_2.8_1446328_1462_TPlot.pdf\n\nPosition    Reads   Category\n1462    4   3   &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n2949    7   3\n4179    517 0\n---------------------------------------------------\n---------------------------------------------------\n\n5' GGUGAGGAGGGGGGUUUG-GUC 3' Transcript: Supercontig_2.8_1511075:1311-1331 Slice Site:1323\n    | |||||oo||| |||o |||\n3' AC-CUCCUUUCCCGAAAUACAG 5' Query: Seq_2299_664\n\nSiteID: Supercontig_2.8_1511075:1323\nMFE of perfect match: -37.90\nMFE of this site: -25.30\nMFEratio: 0.66754617414248\nAllen et al. score: 8\nPaired Regions (query5'-query3',transcript3'-transcript5')\n    1-3,1331-1329\n    5-8,1328-1325\n    10-19,1323-1314\n    20-20,1312-1312\nUnpaired Regions (query5'-query3',transcript3'-transcript5')\n    4-4,x-x BULq: Bulge on query side\n    9-9,1324-1324   SIL: Symmetric internal loop\n    x-x,1313-1313   BULt: Bulge on transcript side\n    21-21,1311-1311 UP3: Unpaired region at 3' of query\n\nDegradome data file: /media/owner/newdrive/phasing/degradome/_degradome.20171210/bbduk_trimmed/merged_HV2.fasta_dd.txt\nDegardome Category: 4\nDegradome p-value: 0.013385336399181\n</code></pre>\n\n<p>I tried to do this for before and after values, then I keep getting errors. Sorry I am new to perl and would really appreciate your help. Here are some of the codes I tried:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse LWP::Simple;\nuse Modern::Perl;\n\nmy word = \"Query:\";\n\nmy $filename = $ARGV[0];\nopen(INPUT_FILE, $filename);\nwhile (&lt;&lt;&gt;&gt;) {\nchomp;\nmy ($before, $after) = m/(.+)(?:\\t\\Q$word\\E:\\t)(.+)/i;\nsay \"word: $word\\tbefore: $before\\tafter: $after\";\n}\n</code></pre>\n"}, {"tags": ["perl", "cron"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 3, "creation_date": 1540530774, "post_id": 53001776, "comment_id": 92907739, "body": "What is in /u01/app/ecm2fs/deep/FS/salescut.log ? Cron might have different env vars and working directory so your script gets an error. Also add 2&gt;&amp;1 at the end to output errors to the log."}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540530818, "post_id": 53001776, "comment_id": 92907758, "body": "This is where i am appending any error in the script"}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1540530882, "post_id": 53001776, "comment_id": 92907783, "body": "i am just printing a hello world through crontab but it is working...... 51 00 * * 1-5 /u01/app/ecm2fs/deep/FS/hello.ksh &gt;&gt; /u01/app/ecm2fs/deep/FS/hello.log"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1540530893, "post_id": 53001776, "comment_id": 92907788, "body": "Maybe crond is dead?"}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "edited": false, "score": 0, "creation_date": 1540530954, "post_id": 53001776, "comment_id": 92907805, "body": "But i tested with some other script like printing hello world, that script is working fine"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1540531021, "post_id": 53001776, "comment_id": 92907833, "body": "how are you manually running the perl script? Did you try what Ujin suggested?"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1540531318, "post_id": 53001776, "comment_id": 92907921, "body": "Add <code>2&gt;&amp;1</code> at the end of cron line to output errors to the log. You can also add <code>BEGIN {print &quot;hello\\n&quot;}</code> at the beginning of the script to output something before script runs into an error."}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1540535283, "post_id": 53001776, "comment_id": 92909302, "body": "How long is the kadecut.pl script? can you post it?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1540539186, "post_id": 53001776, "comment_id": 92911263, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22743548/cronjob-not-running\">CronJob not running</a>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1540539961, "post_id": 53001776, "comment_id": 92911676, "body": "Not enough detail in the question to provide an actual answer, but the answer to &quot;it runs on the command line, but not under cron&quot; is <i>generally</i> that there&#39;s a difference in the environment (working directory, the user/group running it, environment variables, etc.) which causes the problem."}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "edited": false, "score": 0, "creation_date": 1540541333, "post_id": 53001776, "comment_id": 92912373, "body": "Thank you guys the issue is now resolved"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3921579, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gvK3s5dfbuY/AAAAAAAAAAI/AAAAAAAABZ0/oViQ2DzYBgs/photo.jpg?sz=128", "display_name": "Surrogard", "link": "https://stackoverflow.com/users/3921579/surrogard"}, "is_accepted": false, "score": 0, "last_activity_date": 1540540471, "creation_date": 1540540471, "answer_id": 53004006, "question_id": 53001776, "link": "https://stackoverflow.com/questions/53001776/perl-script-in-crontab-is-not-running-from-monday-to-friday/53004006#53004006", "title": "Perl script in crontab is not running from monday to friday", "body": "<p>Try to run the script (via crontab) with</p>\n\n<pre><code>/usr/bin/perl /u01/app/ecm2fs/deep/FS/kadecut.pl ...\n</code></pre>\n\n<p>It might be the shebang line isn't processed properly. Did you run your HelloWorld script as a Perl script or is it the .ksh one?\nTry to avoid any relative paths in the script, it will most probably break because the environment might be different for another user.</p>\n"}], "owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540540471, "creation_date": 1540530434, "question_id": 53001776, "link": "https://stackoverflow.com/questions/53001776/perl-script-in-crontab-is-not-running-from-monday-to-friday", "title": "Perl script in crontab is not running from monday to friday", "body": "<p>I have a script which will run through crontab everyday from monday to friday at 12:50 am. Below is the code for crontab</p>\n\n<pre><code>50 00 * * 1-5 /u01/app/ecm2fs/deep/FS/kadecut.pl &gt;&gt; /u01/app/ecm2fs/deep/FS/salescut.log\n</code></pre>\n\n<p>But it is not running. But when i execute it manually it is running. Can anyone tell me what might be the problem?</p>\n"}, {"tags": ["perl", "parse-recdescent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540517925, "post_id": 52999206, "comment_id": 92905034, "body": "<code>startrule: expr(s?)</code> should be <code>startrule: expr(s?) &#47;\\Z&#47; { $item[1] }</code>  As this reveals, <code>x=2 and y=2 and z=3</code> doesn&#39;t match your grammar. Your grammar expects something like <code>x=2 and and and</code>. Read up on <code>&lt;leftop&gt;</code>."}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540512428, "creation_date": 1540508112, "last_edit_date": 1540512428, "question_id": 52999206, "link": "https://stackoverflow.com/questions/52999206/parsing-syntax-with-perl", "title": "parsing syntax with Perl", "body": "<p>I am using Parse::RecDescent(the below code) to parse something like this</p>\n\n<p>this x=2 and y=2 and z=3</p>\n\n<p>why the below code only print x!=2 and not all the above line (i.e x!=2 and y!=2 and z!=3) even the above line is parsed by the below code any idea what wrong with the below code ?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Parse::RecDescent;\n\nmy $input = 'x=2 and y=3 and z=3';\n\nmy $grammar = q{\n\nstartrule: expr(s?)\n\n\n\nexpr: statement operator(s?)\n\n{ return  $item{statement}. $item{operator}; }\n\n\nstatement : operand equal value\n\n{ return $item{operand}.' ' .'!='.' '.$item{value}  }\n\n\n\nequal : /\\=/\n\noperator : /and/i\n\noperand: /\\w+/\n\nvalue : /\\w+/\n\n};\n\nmy $parser = Parse::RecDescent-&gt;new($grammar);\nmy $result = $parser-&gt;startrule($input) or die \"Couldn't parse!\\n\";\n\n\n\nuse Data::Dumper;\n$Data::Dumper::Indent = 1;\n$Data::Dumper::Sortkeys = 1;\nprint Dumper $result;\n</code></pre>\n"}, {"tags": ["string", "perl"], "answers": [{"comments": [{"owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540530455, "post_id": 52999462, "comment_id": 92907646, "body": "Your solution gives me error:word: Query:\t<code>before: after: Use of uninitialized value $before in concatenation (.) or string at my_perl_script.pl line 17, &lt;INPUT_FILE&gt; line 19559. Use of uninitialized value $after in concatenation (.) or string at my_perl_script.pl line 17, &lt;INPUT_FILE&gt; line 19559.</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "edited": false, "score": 0, "creation_date": 1540577843, "post_id": 52999462, "comment_id": 92932068, "body": "It sounds like you&#39;ve put that line of code in a string by accident."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1540510349, "creation_date": 1540510349, "answer_id": 52999462, "question_id": 52999177, "link": "https://stackoverflow.com/questions/52999177/how-to-grab-a-string-of-text-from-text-file-before-and-after-the-matching-patter/52999462#52999462", "title": "How to grab a string of text from text file before and after the matching pattern?", "body": "<p>The <code>\\S</code> <a href=\"https://perldoc.pl/perlrebackslash#Character-classes\" rel=\"nofollow noreferrer\">character class</a> matches anything other than whitespace characters. You want everything other than newline characters, which is just <code>.</code>. Your word has a <code>:</code> after it which your regex needs to account for. And finally the <code>\\t</code> will match only a tab character, are there actual tab characters before and after the word you're looking for?</p>\n\n<pre><code>my ($before, $after) = m/(.+)(?:\\t\\Q$word\\E:\\t)(.+)/i;\n</code></pre>\n\n<p>As a side note, the <code>readline</code> operator (<code>&lt;&gt;</code>/<code>&lt;&lt;&gt;&gt;</code>) uses the special <a href=\"https://perldoc.pl/variables/ARGV\" rel=\"nofollow noreferrer\">ARGV</a> filehandle by default which will open and read from each file specified as arguments, so you don't have to get the filename from <code>@ARGV</code> and open it yourself, you can just do:</p>\n\n<pre><code>while (&lt;&lt;&gt;&gt;) { ... }\n</code></pre>\n\n<p>(If your Perl is older than 5.22 you have to use <code>while (&lt;&gt;)</code> which is less safe because it allows executing commands passed as arguments; for similar reasons you should <a href=\"https://metacpan.org/pod/Perl::Critic::Policy::Freenode::OpenArgs\" rel=\"nofollow noreferrer\">always use three-arg open</a> when opening files yourself.)</p>\n"}], "owner": {"reputation": 4905, "user_id": 4701887, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2f933a5923f4decadfb0775c23c4912?s=128&d=identicon&r=PG", "display_name": "MAPK", "link": "https://stackoverflow.com/users/4701887/mapk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540510349, "creation_date": 1540507922, "question_id": 52999177, "link": "https://stackoverflow.com/questions/52999177/how-to-grab-a-string-of-text-from-text-file-before-and-after-the-matching-patter", "title": "How to grab a string of text from text file before and after the matching pattern?", "body": "<p>I have a text file called <code>mytext.txt</code>. I want to grab the sting of text from in this file before and after the string <code>Query:</code> of the same line. </p>\n\n<p>mytext.txt:</p>\n\n<pre><code>   # P-value cutoff: 1\n    # Category cutoff: 4\n    # Output Format: Pretty\n    ---------------------------------------------------\n\n    5' UGGGAGGAUGGGAUGGGAAAG 3' Transcript: Supercontig_2.10_1111019:1499-1519 Slice Site:1510\n       ||oo||o| o|o|| o|||||\n    3' ACUUUCUUUUCUUAAUCUUUC 5' Query: Seq_2171_593\n\n    SiteID: Supercontig_2.10_1111019:1510\n    MFE of perfect match: -26.00\n    MFE of this site: -18.70\n    MFEratio: 0.719230769230769\n---------------------------------------------------\n\n5' GUUUGGAAAGGCGGUUACGGGG 3' Transcript: Supercontig_2.10_1257006:252-273 Slice Site:264\n   |oo||||||o||||||  o|oo\n3' CGGACCUUUUCGCCAAGAUCUU 5' Query: Seq_5744_249\n\nSiteID: Supercontig_2.10_1257006:264\n</code></pre>\n\n<p>here is my code that I tried:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse LWP::Simple;\nuse Modern::Perl;\n\n\nmy $word = \"Query\";\n\nmy $filename = $ARGV[0];\nopen(INPUT_FILE, $filename);\nwhile (&lt;INPUT_FILE&gt;) {\nchomp;\n#for my $word (@words) {\n        my ($before, $after) = $_ =~ /(\\S+)(?:\\t\\Q$word\\E\\t)(\\S+)/i;\n        say \"word: $word\\tbefore: $before\\tafter: $after\";\n#    }\n}\n</code></pre>\n\n<p>Result I want:</p>\n\n<pre><code>3' ACUUUCUUUUCUUAAUCUUUC 5'   Seq_2171_593\n3' CGGACCUUUUCGCCAAGAUCUU 5'  Seq_5744_249\n</code></pre>\n\n<p>PS. I can do this using various other methods such as unix one liners, but I am learning perl and want to get this done in perl. Thanks for your help.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1540504660, "post_id": 52998560, "comment_id": 92901937, "body": "I think you&#39;ve got a couple of stray <code>+</code> signs in your question, but I can&#39;t be certain. (There&#39;s one in <code>for\u00a0+eign</code>, for instance, as well as several in the code which follows that.) Please edit your question to remove the ones that don&#39;t belong."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541085147, "post_id": 52998560, "comment_id": 93103427, "body": "Cross-posted at <a href=\"https://perlmonks.org/?node_id=1224662\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1224662</a>"}], "answers": [{"tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 6, "last_activity_date": 1540505044, "creation_date": 1540505044, "answer_id": 52998748, "question_id": 52998560, "link": "https://stackoverflow.com/questions/52998560/perl-mysql-dbdmysqlst-execute-failed/52998748#52998748", "title": "Perl Mysql DBD::mysql::st execute failed", "body": "<p>You shouldn't put <code>NULL</code> in quotes. That's trying to set <code>ITEMS_TO</code> to the literal string <code>'NULL'</code>, not a null value. MySQL will then try to convert this to a <code>BIGINT</code>; since it doesn't look like a number it will be converted to <code>0</code>. Since there's no <code>user_id = 0</code> in the <code>users</code> table, the foreign key check fails.</p>\n\n<p>You should use the Perl value <code>undef</code> to represent the SQL null value:</p>\n\n<pre><code>$NULL = undef;\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/12708633/which-one-represents-null-undef-or-empty-string\">Which one represents null? undef or empty string</a></p>\n"}], "owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540505488, "creation_date": 1540504032, "last_edit_date": 1540505488, "question_id": 52998560, "link": "https://stackoverflow.com/questions/52998560/perl-mysql-dbdmysqlst-execute-failed", "title": "Perl Mysql DBD::mysql::st execute failed", "body": "<pre><code>CREATE TABLE users(\n\n  USERID BIGINT AUTO_INCREMENT,\n  FNAME  CHAR(50),                        \n  LNAME  CHAR(50), \n  EMAIL  CHAR (100),               \n  PHONE  CHAR (50),        \n  PRIMARY KEY (USER_ID),\n  UNIQUE KEY EMAIL (EMAIL),\n  UNIQUE KEY PHONE (PHONE)\n) ENGINE=InnoDB CHARSET=utf8mb4;\n\n\nCREATE TABLE items(\n  ITEMS_ID       BIGINT AUTO_INCREMENT,                       \n  USERID         BIGINT,    \n  ITEMS_TO       BIGINT,\n  ITEMS_FROM     BIGINT,                     \n  ACCEPTED_ITEMS BIGINT,                     \n  PRIMARY KEY (ITEMS_ID),\n  FOREIGN KEY (USERID) REFERENCES users(USERID),\n  FOREIGN KEY (ITEMS_TO) REFERENCES users(USERID),\n  FOREIGN KEY (ITEMS_FROM) REFERENCES users(USERID),\n  FOREIGN KEY (ACCEPTED_ITEMS) REFERENCES users(USERID)\n) ENGINE=InnoDB CHARSET=utf8mb4;\n</code></pre>\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>DBD::mysql::st execute failed: Cannot add or update a child row: a\n  foreign key constraint fails (`db701`.`items`, CONSTRAINT\n  `items_ibfk_2` FOREIGN KEY (`ITEMS_TO`) REFERENCES `users` (`USERID`))</p>\n</blockquote>\n\n<p>when I run this:</p>\n\n<pre><code>$ID = '1';\n$NULL = 'NULL';\n$ID2 = '2';\n$ID3 = '1';\n\nmy $update = $DBH-&gt;prepare(\"UPDATE items SET ITEMS_TO =?, ITEMS_FROM =? WHERE USERID =? AND ITEMS_ID = ?\");\n$update-&gt;execute($ID, $NULL, $ID2, $ID3);\n$update-&gt;finish();\n</code></pre>\n\n<p>It works without ITEMS_FROM and I want to set ITEMS_FROM to null.</p>\n\n<p>This works:</p>\n\n<pre><code>my $update = $DBH-&gt;prepare(\"UPDATE items SET ITEMS_TO =? WHERE USERID =? AND ITEMS_ID = ?\");\n$update-&gt;execute($ID, $ID2, $ID3);\n$update-&gt;finish();  \n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1540501780, "last_edit_date": 1540501780, "creation_date": 1540501092, "answer_id": 52998006, "question_id": 52997820, "link": "https://stackoverflow.com/questions/52997820/perl-split-and-regular-expressions-case-in-sensitve/52998006#52998006", "title": "perl split and regular expressions case in-sensitve", "body": "<p>The first argument in <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"noreferrer\">split</a>, for the separator, is a normal regex so</p>\n\n<pre><code>my $sep = 'sep';\n\nmy @fields = split /$sep/i, $string;\n</code></pre>\n\n<p>will split the string by <code>sep</code> case-insensitively (on any of <code>sep</code>, <code>sEP</code>, etc).</p>\n\n<hr>\n\n<p>Easy try:</p>\n\n<pre><code>perl -wE'$str = q(heysephosEpho); say for split /seP/i, $str'\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 52998006, "answer_count": 1, "score": 3, "last_activity_date": 1540572505, "creation_date": 1540500214, "last_edit_date": 1540572505, "question_id": 52997820, "link": "https://stackoverflow.com/questions/52997820/perl-split-and-regular-expressions-case-in-sensitve", "title": "perl split and regular expressions case in-sensitve", "body": "<p>I have a have a string where the seprator is word and is case insenstive something like this</p>\n\n<p>Data1 sep Data2 Sep date 3 SEP Data4 SeP Data 5</p>\n\n<p>i am writing something like this :</p>\n\n<pre><code>split /(sep|SEP|Sep|seP)/, $string\n</code></pre>\n\n<p>is there an option to list split to split data incase sensitve ?</p>\n"}, {"tags": ["arrays", "perl", "rank"], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 888430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0261fd0dad563c5270821b2a363ea726?s=128&d=identicon&r=PG", "display_name": "Plarsen", "link": "https://stackoverflow.com/users/888430/plarsen"}, "edited": false, "score": 0, "creation_date": 1540494482, "post_id": 52996401, "comment_id": 92897782, "body": "Perfect! Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540496398, "post_id": 52996401, "comment_id": 92898712, "body": "Duplicate values are assigned different ranks!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 1, "last_activity_date": 1540496500, "last_edit_date": 1540496500, "creation_date": 1540494230, "answer_id": 52996401, "question_id": 52996208, "link": "https://stackoverflow.com/questions/52996208/perl-rank-but-dont-sort-1d-array/52996401#52996401", "title": "Perl: Rank but don&#39;t sort 1D array", "body": "<p>You can do this in two steps, first sorting the indexes to the array, then sorting indexes to those indexes to get the (0-based) rank, adding one to get a 1-based rank.</p>\n\n<pre><code>my @array = (10, 4, 2, 9, 32);\n\nmy @index_by_rank_minus_1 = sort { $array[$a] &lt;=&gt; $array[$b] } 0..$#array;\nmy @ranks =\n    map $_+1,\n    sort { $index_by_rank_minus_1[$a] &lt;=&gt; $index_by_rank_minus_1[$b] } 0..$#array;\n</code></pre>\n\n<p>Alternatively, the following might be a tad faster (though it probably only matters for really long lists).</p>\n\n<pre><code>my @array = (10, 4, 2, 9, 32);\n\nmy %rank_by_index;\n@rank_by_index{ sort { $array[$a] &lt;=&gt; $array[$b] } 0..$#array } = 1..@array;\nmy @ranks = map { $rank_by_index{$_} } 0..$#array;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1540494291, "post_id": 52996406, "comment_id": 92897693, "body": "maybe doesn&#39;t work as desired if there are duplicates"}, {"owner": {"reputation": 486, "user_id": 888430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0261fd0dad563c5270821b2a363ea726?s=128&d=identicon&r=PG", "display_name": "Plarsen", "link": "https://stackoverflow.com/users/888430/plarsen"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1540494623, "post_id": 52996406, "comment_id": 92897862, "body": "Interesting solution. I will save it since I might need some variations later, but I think I go with @ysth s solution for this particular question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1540496898, "post_id": 52996406, "comment_id": 92898923, "body": "@ysth, With this solution, identical values get identical ranks. That seems more appropriate than the opposite."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1540494407, "last_edit_date": 1540494407, "creation_date": 1540494246, "answer_id": 52996406, "question_id": 52996208, "link": "https://stackoverflow.com/questions/52996208/perl-rank-but-dont-sort-1d-array/52996406#52996406", "title": "Perl: Rank but don&#39;t sort 1D array", "body": "<p>Here's my solution:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @numbers = (10, 4, 2, 9, 32);\n\nmy %rank_of;\n@rank_of{sort { $a &lt;=&gt; $b } @numbers} = 1 .. @numbers;\n\nprint join(\" \", map $rank_of{$_}, @numbers), \"\\n\";\n</code></pre>\n\n<p>We construct a hash that maps each number to its corresponding rank, then print the rank of each number in the order of the original array.</p>\n\n<p>We compute the rank by pairing up each number (in sorted order) with the list 1, 2, 3, ..., that is:</p>\n\n<pre><code>2 4 9 10 32   # sort { $a &lt;=&gt; $b } @numbers\n| | |  |  |\n1 2 3  4  5   # 1 .. @numbers\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 888430, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0261fd0dad563c5270821b2a363ea726?s=128&d=identicon&r=PG", "display_name": "Plarsen", "link": "https://stackoverflow.com/users/888430/plarsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52996401, "answer_count": 2, "score": 0, "last_activity_date": 1540496500, "creation_date": 1540493403, "last_edit_date": 1540494250, "question_id": 52996208, "link": "https://stackoverflow.com/questions/52996208/perl-rank-but-dont-sort-1d-array", "title": "Perl: Rank but don&#39;t sort 1D array", "body": "<p>I need Perl code to rank numbers in an array into another array without sorting it. So, input: (10, 4, 2, 9, 32) => output: (4, 2, 1, 3, 5)</p>\n\n<p>I have this code that is close but I find it useless because input and output is not exactly what I want:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %data = \n(\n  1 =&gt; 10,\n  2 =&gt; 4,\n  3 =&gt; 2,\n  4 =&gt; 9,\n  5 =&gt; 32,\n);\n\nmy ($n, @rank) = 1;\nforeach( keys %data){\n    $rank[ $data{$_} ] .= \"$_ \";\n}\n\ndefined and $n += print for @rank;\n</code></pre>\n\n<p>The above code outputs:</p>\n\n<pre><code>3 2 4 1 5\n</code></pre>\n\n<p>The output is wrong and output at all is by the way not neccessary, I just want my result array @rank as a 1D array as described. Preferably if it's possible without assigning the keys to the input array data.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540472552, "post_id": 52989803, "comment_id": 92885064, "body": "GetOptions can pass through unknown additional options in <code>@ARGV</code>, reread <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">metacpan.org/pod/Getopt::Long</a> for the <code>pass_through</code> option."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540474537, "post_id": 52989803, "comment_id": 92886457, "body": "If a user uses a similar option to one of your options, how will you know the difference?! Look at the <code>--</code> parameter to end option parsing from Getopt::Long"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1540494496, "post_id": 52989803, "comment_id": 92897791, "body": "Re &quot;<i>But it feels to me as a workaround and not the proper way to solve this issue.</i>&quot;, No, that&#39;s specifically what <code>--</code> is for. For example, <code>perl -e&#39;CORE::say for @ARGV&#39; &quot;$FILE&quot;</code> would fail for a file named <code>--foo</code>, so you use <code>perl -e&#39;CORE::say for @ARGV&#39; -- &quot;$FILE&quot;</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 6, "last_activity_date": 1540472632, "creation_date": 1540472632, "answer_id": 52989992, "question_id": 52989803, "link": "https://stackoverflow.com/questions/52989803/insert-and-use-unknown-options-in-getoptions/52989992#52989992", "title": "Insert and use unknown options in GetOptions", "body": "<p>You can use <code>--</code> to separate additional arguments: <code>./script --option1 --option2 -- --userOption1 --userOption2</code></p>\n\n<p><a href=\"https://metacpan.org/pod/Getopt::Long#Mixing-command-line-option-with-other-arguments\" rel=\"noreferrer\">https://metacpan.org/pod/Getopt::Long#Mixing-command-line-option-with-other-arguments</a></p>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1540474369, "creation_date": 1540474369, "answer_id": 52990580, "question_id": 52989803, "link": "https://stackoverflow.com/questions/52989803/insert-and-use-unknown-options-in-getoptions/52990580#52990580", "title": "Insert and use unknown options in GetOptions", "body": "<p>As @Ujin says <code>--</code> will stop processing arguments at that point in the argument list. Another option that you almost got right is the use of --additional. This will work if you wrap the following text in quotes, <code>'</code> for unix/linux and <code>\"</code> for Windows. This will cause the shell to think that all the text after --additional, in the quotes, is one element to be passed into @ARGV. GetOptLong will then correctly see <code>more and more --info 551_5 from --the user</code> as the parameter for the --additional option. This makes your command line look like</p>\n\n<pre><code>./script report --color black --version 19.4 --additional 'more and more --info 551_5 from --the user'\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1540477137, "creation_date": 1540472086, "last_edit_date": 1540477137, "question_id": 52989803, "link": "https://stackoverflow.com/questions/52989803/insert-and-use-unknown-options-in-getoptions", "title": "Insert and use unknown options in GetOptions", "body": "<p>I'm trying to create a script (written in Perl) which gets arguments. The call should look as following:</p>\n\n<pre><code>./script [action] --option1 --option2 ... --optionK \n</code></pre>\n\n<p>I use the <code>GetOptions:Long</code> module for that. Also I use the <code>$ARG[0]</code> in order to get the action. Example:</p>\n\n<pre><code>./script report --color black --version 19.4\n</code></pre>\n\n<p>Now I would like to give to the user the power to insert any command he wants (for example it can insert another script with arguments).\nI though of doing it like this: user can insert anything he wants at the end (only) of the command-line arguments, for example:</p>\n\n<pre><code>./script report --color black --version 19.4 more and more --info 551_5 from --the user\n</code></pre>\n\n<p>I would like to parse this array <code>@ARGV</code> and insert the additional information into a variable:</p>\n\n<pre><code>$additional = \"more and more --info 551_5 from --the user\"\n</code></pre>\n\n<p>I found out that after using the <code>GetOptions</code>, it will remove those options (not including <code>$ARGV[0]</code>) from the <code>@ARGV</code> array.\nProblem is, I really don't know how to get the additional information from the array. Maybe I should add an additional option, something like this:</p>\n\n<pre><code>./script report --color black --version 19.4 --additional more and more --info 551_5 from --the user\n</code></pre>\n\n<p>And get everything in <code>additional</code>. But in this way, I have another problem - it will treat <code>--info</code> and <code>--the</code> as arguments.</p>\n\n<p>How can I solve this issue?</p>\n\n<p><strong>EDIT</strong>: I saw that <code>pass_through</code> is possible to use. But what if user has an option that similar to one of my available options? It could do some problems. Is it possible to handle it just like a string? Also in that way, I'll have to parse <code>@ARGV</code> and remove <code>$ARGV[0]</code> (the action).</p>\n\n<p><strong>EDIT-2</strong>: The <code>--</code> method will work. But it feels to me as a workaround and not the proper way to solve this issue. There must be a cleaner way to do it. Maybe change to a different module?</p>\n"}, {"tags": ["perl", "config", "perl-io"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540494902, "post_id": 52989395, "comment_id": 92897998, "body": "If you&#39;re using the Ubuntu distribution of Linux, you&#39;re not using Windows.  Unix systems such as Linux expect text files to be terminated with LF, not CRLF. That you are also running Windows on the same box, even if simultaneously, is irrelevant."}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540501292, "post_id": 52989395, "comment_id": 92900808, "body": "@Ikegami, Irrelevant, except that the config file is likely to have CRLF line endings, having been created on a Windows system. Functioning within a Windows environment means that you have to keep the line endings in mind. I find it very useful to be able to switch between Strawberry Perl and Ubuntu Perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1540501347, "post_id": 52989395, "comment_id": 92900831, "body": "The fact that it does have CRLF is relevant, but the fact that it&#39;s likely to have CRLF is not (i.e. it has no effect on the question or the answers). It would be relevant if you were discussing adding a feature to Config::Tiny, but you didn&#39;t post in a issue tracker."}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 6, "last_activity_date": 1540471676, "creation_date": 1540471676, "answer_id": 52989657, "question_id": 52989395, "link": "https://stackoverflow.com/questions/52989395/perl-configtiny-read-doesnt-handle-crlf/52989657#52989657", "title": "Perl Config::Tiny-&gt;read() doesn&#39;t handle CRLF", "body": "<p>Just pass the <code>crlf</code> as the \"encoding\". This will then be used as the open mode:</p>\n\n<pre><code>$Config = Config::Tiny-&gt;read( 'file.conf', 'crlf' ); # Neither ':' nor '&lt;:' prefix!\n</code></pre>\n\n<h3>See Also</h3>\n\n<p><a href=\"https://metacpan.org/pod/Config::Tiny\" rel=\"noreferrer\">https://metacpan.org/pod/Config::Tiny</a></p>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 52989657, "answer_count": 1, "score": 0, "last_activity_date": 1540471676, "creation_date": 1540470843, "last_edit_date": 1540471639, "question_id": 52989395, "link": "https://stackoverflow.com/questions/52989395/perl-configtiny-read-doesnt-handle-crlf", "title": "Perl Config::Tiny-&gt;read() doesn&#39;t handle CRLF", "body": "<p>I am using Perl with Ubuntu under Windows 10. I want to use the Perl Config::Tiny module to read filenames and other configuration data. When I read a config file created under Windows within Linux, it leaves the Carriage Returns at the end of the values. I currently get around this by making a temporary copy of the config file under Linux.</p>\n\n<p>Is there a way to tell Config::Tiny->read() to open the config file with end of line processing that does what I want?</p>\n\n<p>Here is a fragment of my current code:</p>\n\n<pre><code>use Config::Tiny;\nmy $configfile = 'MyScript.ini';\n# ; MyScript.ini file looks like:\n# [MyScript]\n# infilename=Dii.fwdata\n# outfilename=Dii.1.fwdata\n# logfilename=Dii.ReverseMerge.log\n# someotherconfig=xyzzy\n\nsay STDERR \"read config from:$configfile\";\n# Windows CRLF nonsense\nif ( $^O =~ /linux/)  {\n    `perl -pe 's/\\r\\n/\\n/' &lt; $configfile  &gt;/tmp/$configfile `;\n    }\nmy $config = Config::Tiny-&gt;read($configfile);\nmy $infilename = $config-&gt;{MyScript}-&gt;{infilename};\nmy $outfilename = $config-&gt;{MyScript}-&gt;{outfilename};\n# ... etc,\n</code></pre>\n"}, {"tags": ["perl", "sha"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1540465099, "post_id": 52987479, "comment_id": 92880419, "body": "What version of Digest::SHA do you use? You can find it by running <code>perl -MDigest::SHA=9999 -e1</code> Maybe the function is only available in more recent versions of the module."}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540467943, "post_id": 52987479, "comment_id": 92882053, "body": "Thanks for the quick reply...I have version 5.47 installed"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1540468396, "post_id": 52987479, "comment_id": 92882322, "body": "The documentation you&#39;re referencing is for Perl 5.26.1, which shipped with  6.02. You seem to be using Perl 5.010, and Digest::SHA 5.47 did not ship with that function: <a href=\"https://metacpan.org/pod/release/MSHELOR/Digest-SHA-5.47/lib/Digest/SHA.pm\" rel=\"nofollow noreferrer\">metacpan.org/pod/release/MSHELOR/Digest-SHA-5.47/lib/Digest/&zwnj;&#8203;&hellip;</a> Maybe upgrade?"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1540468864, "post_id": 52987479, "comment_id": 92882601, "body": "OK, that makes sense, many thanks."}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540465739, "creation_date": 1540464596, "last_edit_date": 1540465739, "question_id": 52987479, "link": "https://stackoverflow.com/questions/52987479/digestsha-cannot-use-sha512256-hex", "title": "Digest::SHA Cannot use sha512256_hex", "body": "<p>I am testing out the Perl module Digest::SHA:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Digest::SHA qw(sha256_hex sha512_hex sha512256_hex);\n</code></pre>\n\n<p>I would like to use the function <code>sha512256_hex</code>. However the code above is not working! I get the error message:</p>\n\n<pre><code>sha512256_hex\" is not exported by the Digest::SHA module\nCan't continue after import errors...\n</code></pre>\n\n<p>When I look at the webpage <a href=\"https://perldoc.perl.org/Digest/SHA.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/Digest/SHA.html</a> in the EXPORTABLE FUNCTIONS section one of the usages listed is:</p>\n\n<pre><code>sha512256_hex($data, ...)\n</code></pre>\n\n<p>I can use the <code>sha256_hex</code> and <code>sha512_hex</code> options with no problem so why not the other one that I want to test?</p>\n"}, {"tags": ["perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1540458906, "post_id": 52985460, "comment_id": 92876706, "body": "Why not use <code>p =&gt; \\@p</code> or <code>p =&gt; [ @p ]</code> ?"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1540459285, "post_id": 52985460, "comment_id": 92876928, "body": "See <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlref.html#Making-References</a> for details"}, {"owner": {"reputation": 315, "user_id": 9104399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daabc05469bdc596944f1c1d07d636ef?s=128&d=identicon&r=PG&f=1", "display_name": "Alam ", "link": "https://stackoverflow.com/users/9104399/alam"}, "edited": false, "score": 0, "creation_date": 1540459693, "post_id": 52985460, "comment_id": 92877185, "body": "Thank you Carion :)"}], "owner": {"reputation": 315, "user_id": 9104399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daabc05469bdc596944f1c1d07d636ef?s=128&d=identicon&r=PG&f=1", "display_name": "Alam ", "link": "https://stackoverflow.com/users/9104399/alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540459231, "creation_date": 1540458330, "question_id": 52985460, "link": "https://stackoverflow.com/questions/52985460/perl-multi-dimensional-array-by-combining-several-1d-array", "title": "perl: Multi-dimensional array by combining several 1D array", "body": "<p>I have multiple 1D arrays as-</p>\n\n<pre><code>@p=(0,1,1,2);\n@q=(0,1,3,4);\n@r=(0,2,1,5);\n</code></pre>\n\n<p>Now I have to create a multi-dimensional array that contains multiple arrays including those written above. </p>\n\n<pre><code>my @array =   (\n    'a' =&gt; [ 800  ],     #Written manually\n    'b' =&gt; [ 'A', 'B' ], #Written manually\n    'c' =&gt; 101,          #Written manually\n\n\n    'p' =&gt; [0,1,1,2],  #Need to bring from the @p  \n    'q' =&gt; [0,1,3,4],  #Need to bring from the @q\n    'r' =&gt; [0,2,1,5],  #Need to bring from the @r\n);\n</code></pre>\n\n<p>Inside the <code>@array</code>, the <code>'a'</code>,<code>'b'</code>,<code>'c'</code> is written manually (or already available). Now, how can I take these <code>@p</code>, <code>@q</code> and <code>@r</code> and put them inside <code>@array</code> to form the required multi-dimensional array?</p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1540470098, "post_id": 52984349, "comment_id": 92883377, "body": "Hi.  <code>get_collection</code> looks like a method on a database object to get a collection.  From a collection object, you&#39;ll actually need to run a query, which returns a cursor and from that you can iterate it to get results.  (Are you using the official MongoDB driver or a third-party driver?)  My point is that it&#39;s not clear if you&#39;ve already done that and <code>$people</code> contains the <i>result</i> of a query as shown, but <i>as written</i>, <code>$people</code> isn&#39;t something you can just dereference for data in the database."}], "answers": [{"comments": [{"owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1540470288, "post_id": 52984410, "comment_id": 92883498, "body": "This is true is <code>$people</code> contains the array reference of hash references as shown.  But the OP&#39;s line of code implies that <code>$people</code> is a collection object, in which case this wouldn&#39;t work as the collection needs to be queried first."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "edited": false, "score": 0, "creation_date": 1540472465, "post_id": 52984410, "comment_id": 92885009, "body": "@xdg: You&#39;re right, I totally overlooked the fact the presented JSON is the input to mongo, not the output of the query."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1540455122, "creation_date": 1540455122, "answer_id": 52984410, "question_id": 52984349, "link": "https://stackoverflow.com/questions/52984349/how-do-i-get-all-the-values-by-key-in-set-of-anonymous-hashes/52984410#52984410", "title": "How do I get all the values by key in set of anonymous hashes?", "body": "<p>To get exactly the output you want, you can use <a href=\"http://p3rl.org/map\" rel=\"noreferrer\">map</a>:</p>\n\n<pre><code>my @result = [ map $_-&gt;{name}, @$people ];\n</code></pre>\n\n<p>But why do you want to have an anonymous array in an array?</p>\n\n<pre><code>my @result = map $_-&gt;{name}, @$people;\n</code></pre>\n\n<p>would create <code>@result = qw( Hanna John )</code>.</p>\n"}], "owner": {"reputation": 105, "user_id": 7326996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b302bba5dcbb506d735e747ceaa90143?s=128&d=identicon&r=PG&f=1", "display_name": "Daniella", "link": "https://stackoverflow.com/users/7326996/daniella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540561486, "creation_date": 1540454886, "last_edit_date": 1540561486, "question_id": 52984349, "link": "https://stackoverflow.com/questions/52984349/how-do-i-get-all-the-values-by-key-in-set-of-anonymous-hashes", "title": "How do I get all the values by key in set of anonymous hashes?", "body": "<p>So I have </p>\n\n<pre><code>[{\n   \"name\":\"Hanna\",\n   \"surname\":\"Miles\"\n},\n{\n   \"name\":\"John\",\n   \"surname\":\"Kenston\"\n}]\n</code></pre>\n\n<p>in my mongo dbase. I'm getting the info with:</p>\n\n<p><code>my $people = $self-&gt;mongo-&gt;get_collection('persons')</code></p>\n\n<p>How do I get a list of the names? So I need to get @result = [\"Hanna\", \"John\"] in this case.\nWill appreciate any help!</p>\n"}, {"tags": ["java", "perl", "spring-boot", "unix"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1540446257, "post_id": 52981901, "comment_id": 92870137, "body": "What&#39;s the error message that you&#39;re getting?"}, {"owner": {"reputation": 1433, "user_id": 3007732, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7fe4eb0db95acb646e19b99fa5848685?s=128&d=identicon&r=PG&f=1", "display_name": "Ayelet", "link": "https://stackoverflow.com/users/3007732/ayelet"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1540447278, "post_id": 52981901, "comment_id": 92870505, "body": "@MattJacob see my edit"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1540452989, "post_id": 52982766, "comment_id": 92873278, "body": "This is Perl. <a href=\"https://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe\">So there are even more than 3 options</a>"}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 1, "last_activity_date": 1540449230, "creation_date": 1540449230, "answer_id": 52982766, "question_id": 52981901, "link": "https://stackoverflow.com/questions/52981901/spring-boot-setting-perl5lib/52982766#52982766", "title": "Spring boot - setting PERL5LIB", "body": "<p>I do not know spring-boot but it seems that application.properties is not suited to modify env varibles.</p>\n\n<p>There are 3 options:</p>\n\n<ol>\n<li>set PERL5LIB globally before application starts (shell and WM can have different env vars)</li>\n<li>set PERL5LIB when calling scirpt</li>\n<li>use shell script to set PERL5LIB and call perl script, call that shell script from spring</li>\n</ol>\n\n<p>The first two options depend on the way you run your spring app and the code you use to call external scripts. The third one should just work.</p>\n\n<p>If it doesn't help please add the code from your app which calls external script.</p>\n"}], "owner": {"reputation": 1433, "user_id": 3007732, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7fe4eb0db95acb646e19b99fa5848685?s=128&d=identicon&r=PG&f=1", "display_name": "Ayelet", "link": "https://stackoverflow.com/users/3007732/ayelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540449230, "creation_date": 1540445373, "last_edit_date": 1540447230, "question_id": 52981901, "link": "https://stackoverflow.com/questions/52981901/spring-boot-setting-perl5lib", "title": "Spring boot - setting PERL5LIB", "body": "<p>We have a spring boot application, which calls a perl script. It seems that the system variable PERL5LIB is not set in the context of the application, because the perl script compilation fails:</p>\n\n<pre><code>Can't locate JSON.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at ...\n</code></pre>\n\n<p>(When I run the script in directly in the shell it works - because PERL5LIB is set properly.)\nI tried adding it to application.properties:</p>\n\n<pre><code>PERL5LIB=....\n</code></pre>\n\n<p>but this didn't work either. What am I doing wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 96, "user_id": 9390437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RdSSdGZWUQk/AAAAAAAAAAI/AAAAAAAAAAU/BXhZPNWbxUk/photo.jpg?sz=128", "display_name": "Nilesh Jain", "link": "https://stackoverflow.com/users/9390437/nilesh-jain"}, "edited": false, "score": 0, "creation_date": 1540446269, "post_id": 52981097, "comment_id": 92870142, "body": "keys of the hashes are always same or can be different, because here i see keys in both the cases keys are same and you are just trying to compare the values of x1,y1 etc. and also i don&#39;t think u need 2 seperated foreach loops for matching and non matching, u can just use flags and do it in same loop but better to use Data:Compare as suggested by @MattJacob"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1540446347, "post_id": 52981097, "comment_id": 92870179, "body": "Why can&#39;t you use the <a href=\"https://metacpan.org/pod/Data::Compare\" rel=\"nofollow noreferrer\">Data::Compare</a> module?"}, {"owner": {"reputation": 96, "user_id": 9390437, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RdSSdGZWUQk/AAAAAAAAAAI/AAAAAAAAAAU/BXhZPNWbxUk/photo.jpg?sz=128", "display_name": "Nilesh Jain", "link": "https://stackoverflow.com/users/9390437/nilesh-jain"}, "edited": false, "score": 0, "creation_date": 1540446477, "post_id": 52981097, "comment_id": 92870224, "body": "you can visit this link for similar answers <a href=\"https://stackoverflow.com/questions/1273616/how-do-i-compare-two-hashes-in-perl-without-using-datacompare\" title=\"how do i compare two hashes in perl without using datacompare\">stackoverflow.com/questions/1273616/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 8968793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460f7ab4664ea2383d8608cd480221fb?s=128&d=identicon&r=PG&f=1", "display_name": "thx94", "link": "https://stackoverflow.com/users/8968793/thx94"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1540457753, "post_id": 52981097, "comment_id": 92875985, "body": "I haven&#39;t learn about the Data::Compare . As  i thought this only can be done by using foreach loop to compare x1 to x1, y1 to y1 independently . @MattJacob"}, {"owner": {"reputation": 43, "user_id": 8968793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460f7ab4664ea2383d8608cd480221fb?s=128&d=identicon&r=PG&f=1", "display_name": "thx94", "link": "https://stackoverflow.com/users/8968793/thx94"}, "edited": false, "score": 0, "creation_date": 1540458155, "post_id": 52981097, "comment_id": 92876229, "body": "Yeah, actually my idea was using 1 foreach loop to do the matching and non matching. i wrote 2 foreach loops on above just want to let ppl  know that i only make  a small changes from ($newx1 == $oldx1) to ($newx1 != $oldx1). i&#39;ll make correction on it .@NileshJain"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1540462972, "last_edit_date": 1540462972, "creation_date": 1540458111, "answer_id": 52985384, "question_id": 52981097, "link": "https://stackoverflow.com/questions/52981097/how-to-use-foreach-loop-to-do-comparison-between-two-arrays-of-hashes/52985384#52985384", "title": "how to use foreach loop to do comparison between two arrays of hashes", "body": "<p>x1, y1 etc... are just keys in a hash so you can get them the same way you get the keys any hash like this</p>\n\n<pre><code>keys %{$hash1{$newq}}\n</code></pre>\n\n<p>You don't need to make your code as complicated as you have though with all those many layers of loops. Take this part for example...</p>\n\n<pre><code>foreach my $newq (keys %hash1)\n{\n     foreach my $oldq(keys %hash2)\n     {\n         if ( $newq eq $oldq)\n         {\n             # ....\n         }\n     }\n }\n</code></pre>\n\n<p>You don't need to loop through both hashes because you can test to see if a key exists in the other hash. Imagine if your hashes had 100 keys each. Your code currently checks all 100 keys in <code>%hash2</code> with each key in <code>%hash1</code> and then does it again, so 20000 tests. If you write the code like this...</p>\n\n<pre><code>foreach my $newq (keys %hash1)\n{\n    if(defined($hash2{$newq}))\n    {\n        # both hashes have this key\n    }\n    else\n    {\n        # %hash2 doesn't have the key\n    }\n}\n\nforeach my $newq (keys %hash2)\n{\n    if(!defined($hash1{$newq}))\n    {\n        # %hash1 doesn't have the key\n    }\n    else\n    {\n        # They both do, but we already know that from the first loop\n    }\n}\n</code></pre>\n\n<p>...it only has to check each key in the two hashes once so just 200 checks.</p>\n\n<p>So ultimately the finished code could be:</p>\n\n<pre><code>my %nonmatching;\nprint \"Matching\\n\";\nforeach my $outerkey (keys %hash1)\n{\n    if(defined($hash2{$outerkey}))\n    {\n        foreach my $innerkey (keys %{$hash1{$outerkey}})\n        {\n            if(join(\" \",sort @{$hash1{$outerkey}{$innerkey}}) eq join(\" \",sort @{$hash2{$outerkey}{$innerkey}}))\n            {\n                 printf \"%-20s %30s %30s\\n\",$outerkey, join(\" \",@{$hash1{$outerkey}{$innerkey}}), join(\" \",@{$hash2{$outerkey}{$innerkey}});\n            } \n            else\n            {\n                 $nonmatching{$outerkey}{$innerkey}=1;\n            }\n        }\n    }\n    else\n    {\n        foreach my $innerkey (keys %{$hash1{$outerkey}})\n        {\n            $nonmatching{$outerkey}{$innerkey}=1;\n        }\n    }\n}\n\nforeach my $outerkey (keys %hash2)\n{\n    if(!defined($hash1{$outerkey}))\n    {\n        foreach my $innerkey (keys %{$hash2{$outerkey}})\n        {\n            $nonmatching{$outerkey}{$innerkey}=1;\n        }\n    }\n}\n\nprint \"Nonmatching\\n\";\nforeach my $outerkey (keys %nonmatching)\n{\n    foreach my $innerkey (keys %{$nonmatching{$outerkey}})\n    {\n         printf \"%-20s %30s %30s\\n\",$outerkey, join(\" \",@{$hash1{$outerkey}{$innerkey}}), join(\" \",@{$hash2{$outerkey}{$innerkey}});\n    }\n}\n</code></pre>\n\n<p>Although the hashes as you've declared them don't match up with your source data, so the output doesn't look how you'd expect. I'd have expected your hashes would look more like the below snippet, so maybe your file reading code isn't working as you want it too?</p>\n\n<pre><code>'Adidas' =&gt; {\n   'x1' =&gt; [\n       '99999','88888','55555','77777'\n    ]\n  };\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8968793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460f7ab4664ea2383d8608cd480221fb?s=128&d=identicon&r=PG&f=1", "display_name": "thx94", "link": "https://stackoverflow.com/users/8968793/thx94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 52985384, "answer_count": 1, "score": 0, "last_activity_date": 1540462972, "creation_date": 1540439466, "last_edit_date": 1540458236, "question_id": 52981097, "link": "https://stackoverflow.com/questions/52981097/how-to-use-foreach-loop-to-do-comparison-between-two-arrays-of-hashes", "title": "how to use foreach loop to do comparison between two arrays of hashes", "body": "<p>i need to use  foreach loop to do comparison between two array of hashes. but I am not really know how to do this . </p>\n\n<p>my original data:</p>\n\n<pre><code>NewData(file 1)\nPuma\n77777 33333 44444 55555 \nAdidas\n99999 88888 55555 77777 \n22222 11111 33333 44444\nBrooks\n11111 22222 33333 44444 \n33333 44444 55555 66666 \n\nOldData(file 2)\n\nPuma\n77777 33333 44444 55555 \nAdidas\n11111 11111 33333 44444 \n99999 88888 55555 77777 \nBrooks\n11111 22222 33333 44444 \n33333 44444 55555 66666 \n</code></pre>\n\n<p>my hash1:</p>\n\n<pre><code>'Adidas' =&gt; {\n                        'y1' =&gt; [\n                                  '88888',\n                                  '11111'\n                                ],\n                        'x2' =&gt; [\n                                  '55555',\n                                  '33333'\n                                ],\n                        'y2' =&gt; [\n                                  '77777',\n                                  '44444'\n                                ],\n                        'x1' =&gt; [\n                                  '99999',\n                                  '22222'\n                                ]\n                      },\n          'Puma' =&gt; {\n                      'y1' =&gt; [\n                                '33333'\n                              ],\n                      'x2' =&gt; [\n                                '44444'\n                              ],\n                      'y2' =&gt; [\n                                '55555'\n                              ],\n                      'x1' =&gt; [\n                                '77777'\n                              ]\n                    },\n 'Brooks' =&gt; {\n                        'y1' =&gt; [\n                                  '22222',\n                                  '44444'\n                                ],\n                        'x2' =&gt; [\n                                  '33333',\n                                  '55555'\n                                ],\n                        'y2' =&gt; [\n                                  '44444',\n                                  '66666'\n                                ],\n                        'x1' =&gt; [\n                                  '11111',\n                                  '33333'\n                                ]\n                      }\n\n\n };\n</code></pre>\n\n<p>my hash2:</p>\n\n<pre><code>$VAR1 = {\n          'Adidas' =&gt; {\n                        'y1' =&gt; [\n                                  '11111',\n                                  '88888'\n                                ],\n                        'x2' =&gt; [\n                                  '33333',\n                                  '55555'\n                                ],\n                        'y2' =&gt; [\n                                  '44444',\n                                  '77777'\n                                ],\n                        'x1' =&gt; [\n                                  '11111',\n                                  '99999'\n                                ]\n                      },\n          'Puma' =&gt; {\n                      'y1' =&gt; [\n                                '33333'\n                              ],\n                      'x2' =&gt; [\n                                '44444'\n                              ],\n                      'y2' =&gt; [\n                                '55555'\n                              ],\n                      'x1' =&gt; [\n                                '77777'\n                              ]\n                    },\n 'Brooks' =&gt; {\n                        'y1' =&gt; [\n                                  '22222',\n                                  '44444'\n                                ],\n                        'x2' =&gt; [\n                                  '33333',\n                                  '55555'\n                                ],\n                        'y2' =&gt; [\n                                  '44444',\n                                  '66666'\n                                ],\n                        'x1' =&gt; [\n                                  '11111',\n                                  '33333'\n                                ]\n                      }\n        };\n</code></pre>\n\n<p>my attempt code for matching &amp; non matching:</p>\n\n<pre><code> foreach my $newq (keys %hash1)\n    {\n         foreach my $oldq(keys %hash2)\n         {\n         if ( $newq eq $oldq)\n         {\n         foreach my $newx1(@{$hash1{$newq}{x1}})\n         {\n         foreach my $oldx1(@{$hash2{$oldq}{x1}})\n         {\n         if ($newx1 == $oldx1)\n         {\n         print \"$newq\\t$newx1\\t$oldx1\\n\";\n         }\n         if ($newx1 != $oldx1)\n         {\n         print \"$newq\\t$newx1\\t$oldx1\\n\";\n         }\n             }\n</code></pre>\n\n<p>my output for matching</p>\n\n<pre><code>         New     Old\nAdidas  99999   99999\nPuma    77777   77777\nBrooks  11111   11111\nBrooks  33333   33333\n</code></pre>\n\n<p>My output for non matching :</p>\n\n<pre><code>        New     Old\nAdidas  99999   11111\nAdidas  22222   11111\nAdidas  22222   99999\nBrooks  11111   33333\nBrooks  33333   11111\n</code></pre>\n\n<p>Desired output for matching:</p>\n\n<pre><code>                      New                           Old\nPuma                77777 33333 44444 55555     77777 33333 44444 55555\nAdidas              99999 88888 55555 77777     99999 88888 55555 77777\nBrooks              11111 22222 33333 44444     11111 22222 33333 44444\nBrooks              33333 44444 55555 66666     33333 44444 55555 66666\n\n\nNot matching\n\nAdidas              22222 11111 33333 44444     11111 11111 33333 44444\n</code></pre>\n\n<p>Now i can get the correct matching for x1. But i get the wrong output for 'non matching' . my expected output for 'non matching' is <code>Adidas              22222 11111</code> only  because <code>'x1=&gt; 99999'</code> is presented in both new data and old data. And i am not sure how to continue with the 'y1, x2, and y2' ...</p>\n"}, {"tags": ["linux", "perl", "terminal", "position", "window"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1540446886, "post_id": 52980265, "comment_id": 92870371, "body": "It depends on window manager and/or installed window manipulation tools. For example <a href=\"https://stackoverflow.com/questions/1029027/x11-move-an-existing-window-via-command-line\" title=\"x11 move an existing window via command line\">stackoverflow.com/questions/1029027/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10029144, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-E_PDXhTf_8M/AAAAAAAAAAI/AAAAAAAABM0/B6BQcoTTJow/photo.jpg?sz=128", "display_name": "Mason Sipe", "link": "https://stackoverflow.com/users/10029144/mason-sipe"}, "is_accepted": false, "score": 0, "last_activity_date": 1540438500, "creation_date": 1540438500, "answer_id": 52980963, "question_id": 52980265, "link": "https://stackoverflow.com/questions/52980265/can-i-change-the-my-terminal-position-by-using-either-the-command-line-or-perl/52980963#52980963", "title": "Can I change the my terminal position by using either the command line or perl?", "body": "<p>This may not answer your question completely but some processes like background processes can be skipped with no tty by using the nohup command. But of course this can depend on what that process is and it can be resumed with fg. </p>\n"}, {"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 2, "last_activity_date": 1571530044, "last_edit_date": 1571530044, "creation_date": 1540457138, "answer_id": 52985060, "question_id": 52980265, "link": "https://stackoverflow.com/questions/52980265/can-i-change-the-my-terminal-position-by-using-either-the-command-line-or-perl/52985060#52985060", "title": "Can I change the my terminal position by using either the command line or perl?", "body": "<p>If</p>\n\n<pre><code>resize -s row col\n</code></pre>\n\n<p>works, then likely other parts of the escape sequence repertoire of xterm (in this case adapted from dtterm) are implemented.  In this section</p>\n\n<pre><code>CSI Ps ; Ps ; Ps t\n          Window manipulation (from dtterm, as well as extensions by\n          xterm).  These controls may be disabled using the allowWin-\n          dowOps resource.\n</code></pre>\n\n<p><a href=\"https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h4-Functions-using-CSI-_-ordered-by-the-final-character-lparen-s-rparen:CSI-Ps;Ps;Ps-t:Ps-=-3;x;y.216C\" rel=\"nofollow noreferrer\">XTerm Control Sequences</a> lists this one:</p>\n\n<pre><code>        Ps = 3 ;  x ;  y -&gt; Move window to [x, y].\n</code></pre>\n\n<p>which you could use by</p>\n\n<pre><code>printf '\\033[3;%d;%dt' $x $y\n</code></pre>\n\n<p>in a shell script, with <em><code>$x</code></em> and <em><code>$y</code></em> being the x/y coordinates.</p>\n"}], "owner": {"reputation": 1, "user_id": 10555188, "user_type": "registered", "profile_image": "https://graph.facebook.com/1895446203844367/picture?type=large", "display_name": "Bailey Bourque", "link": "https://stackoverflow.com/users/10555188/bailey-bourque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1571530044, "creation_date": 1540432834, "question_id": 52980265, "link": "https://stackoverflow.com/questions/52980265/can-i-change-the-my-terminal-position-by-using-either-the-command-line-or-perl", "title": "Can I change the my terminal position by using either the command line or perl?", "body": "<p>I'm running several background processes while I monitor another screen. I usually resize a terminal window for the background processes and place it on the far right of my screen and then run a perl script. I've added a system call to <code>resize -s ## ##</code> to resize the window automaticcaly but is there a way to also adjust the window location? Thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540429066, "post_id": 52979776, "comment_id": 92866104, "body": "Is the id column the only one that changes?"}, {"owner": {"reputation": 1, "user_id": 10554972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7535a0bf3c88c2aaf3ac6a27cc2e29b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sandesh", "link": "https://stackoverflow.com/users/10554972/sandesh"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1540429998, "post_id": 52979776, "comment_id": 92866298, "body": "yes, only ID column changes ."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1540450941, "creation_date": 1540450941, "answer_id": 52983234, "question_id": 52979776, "link": "https://stackoverflow.com/questions/52979776/compare-two-files-and-write-matching-data-from-first-file-using-perl/52983234#52983234", "title": "Compare two files and write matching data from first file using perl", "body": "<p>Just try this way:</p>\n\n<pre><code>use strict; # Use strict Pragma\nuse warnings;\n\nmy ($file1, $filecnt1, $file2, $filecnt2) = \"\"; #Declaring variables \n\n$file1 = \"a1.txt\"; $file2 = \"b1.txt\";  #Sample files\n\nreadFileinString($file1, \\$filecnt1); # Reading first file\nreadFileinString($file2, \\$filecnt2); # Reading second file\n\n$filecnt2=~s/\\:Old\\_ID/\\:ID/g;  # Replacing that difference content\n\nmy @firstfle = split \"\\n\", $filecnt1;  # Move content to array variable to compare\nmy @secndfle = split \"\\n\", $filecnt2;\n\nmy %firstfle = map { $_ =&gt; 1 } @firstfle; #Mapping the array into hash variable\nmy @scdcmp = grep { $firstfle{$_} } @secndfle;\n\nprint join \"\\n\", @scdcmp;\n\n\n#---------------&gt; File reading\nsub readFileinString\n#---------------&gt;\n{\n    my $File = shift;\n    my $string = shift;\n    open(FILE1, \"&lt;$File\") or die \"\\nFailed Reading File: [$File]\\n\\tReason: $!\";\n    read(FILE1, $$string, -s $File, 0);\n    close(FILE1);\n}\n\n#---------------&gt; File Writing\nsub writeFileinString\n#---------------&gt;\n{\n    my $File = shift;\n    my $string = shift;\n    my @cDir = split(/\\\\/, $File);\n    my $tmp = \"\";\n    for(my $i = 0; $i &lt; $#cDir; $i++)\n    {\n        $tmp = $tmp . \"$cDir[$i]\\\\\";\n        mkdir \"$tmp\";\n    }\n    if(-f $File){\n        unlink($File);\n    }\n    open(FILE, \"&gt;$File\") or die \"\\n\\nFailed File Open for Writing: [$File]\\n\\nReason: $!\\n\";\n    print FILE $$string;\n    close(FILE);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10554972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7535a0bf3c88c2aaf3ac6a27cc2e29b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sandesh", "link": "https://stackoverflow.com/users/10554972/sandesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540450941, "creation_date": 1540428193, "last_edit_date": 1540428519, "question_id": 52979776, "link": "https://stackoverflow.com/questions/52979776/compare-two-files-and-write-matching-data-from-first-file-using-perl", "title": "Compare two files and write matching data from first file using perl", "body": "<p>First file</p>\n\n<p>FirstName:LastName:Location:Country:ID</p>\n\n<p>FirstName1:LastName1:Location1:Country1:ID1</p>\n\n<p>FirstName2:LastName2:Location2:Country2:ID2</p>\n\n<p>FirstName3:LastName3:Location3:Country3:ID3</p>\n\n<p>FirstName4:LastName4:Location4:Country4:ID4</p>\n\n<p>Second file</p>\n\n<p>FirstName:LastName:Location:Country:Old_ID</p>\n\n<p>FirstName2:LastName2:Location2:Country2:Old_ID2</p>\n\n<p>FirstName4:LastName4:Location4:Country4:Old_ID4</p>\n\n<p>Have to compare first and second file and print matching rows with data from first file which is have new ID's.</p>\n\n<p>Below script fetches me Old_ID's from second file and not the new ones from first file</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $details  = 'file2.txt';\nmy $old_details = 'file1.txt';\n\nmy %names;\n\nopen my $data, '&lt;', $details or die $!;\nwhile (&lt;$data&gt;)\n {\n   my ($name, @ids) = split;\n   push @{ $names{$_} }, $name for @ids;\n }\n\nopen my $old_data, '&lt;', $old_details or die $!;\nwhile (&lt;$old_data&gt;) \n {\n  chomp;\n print @{ $names{$_} // [$_] }, \"\\n\";\n }\n</code></pre>\n\n<p>Output:</p>\n\n<p>FirstName:LastName:Location:Country:Old_ID</p>\n\n<p>FirstName2:LastName2:Location2:Country2:Old_ID2</p>\n\n<p>FirstName4:LastName4:Location4:Country4:Old_ID4</p>\n\n<p>Expected output:</p>\n\n<p>FirstName:LastName:Location:Country:ID</p>\n\n<p>FirstName2:LastName2:Location2:Country2:ID2</p>\n\n<p>FirstName4:LastName4:Location4:Country4:ID4</p>\n"}]