[{"tags": ["regex", "linux", "perl", "cdata"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1480549735, "post_id": 40900295, "comment_id": 69014413, "body": "The best way to approach it would be to use an HTML/XML parser."}, {"owner": {"reputation": 1, "user_id": 4975501, "user_type": "registered", "profile_image": "https://graph.facebook.com/888661274508841/picture?type=large", "display_name": "Muhammad Chairul Anwar", "link": "https://stackoverflow.com/users/4975501/muhammad-chairul-anwar"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480550079, "post_id": 40900295, "comment_id": 69014514, "body": "my code error please correct my code"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480550198, "post_id": 40900295, "comment_id": 69014554, "body": "Here, read this: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1480592126, "post_id": 40903146, "comment_id": 69031452, "body": "This is the answer. There is an extra \\ before the <code>CDATA</code>. The error message shows the precise spot of the error."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1480569665, "creation_date": 1480569665, "answer_id": 40903146, "question_id": 40900295, "link": "https://stackoverflow.com/questions/40900295/regex-cdata-in-perl-file/40903146#40903146", "title": "regex cdata in perl file", "body": "<p><code>\\C</code> should be <code>C</code>.</p>\n\n<p>&#x20;&#x20;&#x20;&#x20;&#x20;</p>\n"}], "owner": {"reputation": 1, "user_id": 4975501, "user_type": "registered", "profile_image": "https://graph.facebook.com/888661274508841/picture?type=large", "display_name": "Muhammad Chairul Anwar", "link": "https://stackoverflow.com/users/4975501/muhammad-chairul-anwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1480603588, "creation_date": 1480549530, "last_edit_date": 1480603588, "question_id": 40900295, "link": "https://stackoverflow.com/questions/40900295/regex-cdata-in-perl-file", "title": "regex cdata in perl file", "body": "<p>help me please </p>\n\n<p>in terminal :</p>\n\n<p><code>C no longer supported in regex; marked by &lt;-- HERE in m/&lt;host&gt;&lt;!\\[\\ &lt;-- HERE CDATA\\[(.*)\\]\\]\\&gt;&lt;/host&gt;/</code></p>\n\n<p>code in my file perl</p>\n\n<p><code>if ($html =~ /&lt;host&gt;&lt;!\\[\\CDATA\\[(.*)\\]\\]\\&gt;&lt;\\/host&gt;/)</code></p>\n\n<p>What would be the best way of approaching this?</p>\n\n<p>thanks you</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1480552608, "post_id": 40900355, "comment_id": 69015243, "body": "yeah, seems to be the only way to get to early (complile-time) ones using <code>%SIG</code>."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 5, "last_activity_date": 1480550272, "last_edit_date": 1480550272, "creation_date": 1480549938, "answer_id": 40900355, "question_id": 40900103, "link": "https://stackoverflow.com/questions/40900103/using-perl-how-can-you-figure-out-how-to-turn-off-a-specific-warning/40900355#40900355", "title": "using perl how can you figure out how to turn off a specific warning", "body": "<p>I'd make a global signal handler, set it in a <code>BEGIN</code> block so it's compiled in early, and skip <em>only</em> the warning you don't want, so you still get any potential unexpected and unrelated warnings (even within the same category, due to not having to disable the whole thing):</p>\n\n<pre><code>use warnings;\nuse strict;\n\nBEGIN {\n    $SIG{__WARN__} = sub {\n        my $warn = shift;\n        return if $warn =~ /\\\\\\d better written as/;\n        warn $warn;\n    };\n}\n\nmy $x = 'abc';\n$x =~ s/(abc)/\\1/;\n\nwarn \"a different warning\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a different warning\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1480550179, "creation_date": 1480550179, "answer_id": 40900388, "question_id": 40900103, "link": "https://stackoverflow.com/questions/40900103/using-perl-how-can-you-figure-out-how-to-turn-off-a-specific-warning/40900388#40900388", "title": "using perl how can you figure out how to turn off a specific warning", "body": "<p>You can look the message up in <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\"><code>perldoc perldiag</code></a>. This will tell you the warning category it's in.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1480552266, "last_edit_date": 1480552266, "creation_date": 1480551565, "answer_id": 40900580, "question_id": 40900103, "link": "https://stackoverflow.com/questions/40900103/using-perl-how-can-you-figure-out-how-to-turn-off-a-specific-warning/40900580#40900580", "title": "using perl how can you figure out how to turn off a specific warning", "body": "<p>Execute your script as</p>\n\n<pre><code>perl -Mdiagnostics ./a.pl\n</code></pre>\n\n<p>or temporarily add <code>use diagnostics;</code> to your script. This will produce something like</p>\n\n<pre><code>\\1 better written as $1 at ./a.pl line 4 (#1)\n    (W syntax) Outside of patterns, backreferences live on as variables.\n    The use of backslashes is grandfathered on the right-hand side of a\n    substitution, but stylistically it's better to use the variable form\n    because other Perl programmers will expect it, and it works better if\n    there are more than 9 backreferences.\n</code></pre>\n\n<p>Notice the <code>(W syntax)</code>? The letter is one of the following, and the word is the warning class for which you are looking.</p>\n\n<ul>\n<li>(W) A warning (optional).</li>\n<li>(D) A deprecation (enabled by default).</li>\n<li>(S) A severe warning (enabled by default).</li>\n<li>(F) A fatal error (trappable).</li>\n<li>(P) An internal error you should never see (trappable).</li>\n<li>(X) A very fatal error (nontrappable).</li>\n<li>(A) An alien error message (not generated by Perl).</li>\n</ul>\n\n<p><a href=\"http://search.cpan.org/perldoc?diagnostics\" rel=\"nofollow noreferrer\">diagnostics</a> gets its information from <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a>, which you could search manually instead of using <code>use diagnostics;</code>.</p>\n\n<hr>\n\n<p>Other examples:</p>\n\n<pre><code>$ perl -Mdiagnostics -we'print undef'\nUse of uninitialized value in print at -e line 1 (#1)\n    (W uninitialized) An undefined value was used as if it were already\n    [...]\n\n$ perl -Mdiagnostics -we'no warnings qw( uninitialized ); print undef'\n\n$ perl -Mdiagnostics -we'sub foo { } sub foo { }'\nSubroutine foo redefined at -e line 1 (#1)\n    (W redefine) You redefined a subroutine.  To suppress this warning, say\n    [...]\n\n$ perl -Mdiagnostics -we'no warnings qw( redefine ); sub foo { } sub foo { }'\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1303, "user_id": 1765397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/27097058d247934f6ca0ece3867cac4f?s=128&d=identicon&r=PG", "display_name": "kdubs", "link": "https://stackoverflow.com/users/1765397/kdubs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 40900580, "answer_count": 3, "score": 3, "last_activity_date": 1503820662, "creation_date": 1480548370, "question_id": 40900103, "link": "https://stackoverflow.com/questions/40900103/using-perl-how-can-you-figure-out-how-to-turn-off-a-specific-warning", "title": "using perl how can you figure out how to turn off a specific warning", "body": "<p>I've got some legacy code that I'm dealing with. It's too much to clean up in one shot. It's using \\1 inside of the s operator. I looked into perllexwarn and found I can shut it off with 'no warnings qw(syntax)', but I did this with trial and error. Is there an easier way to get right from the warning to the way to shut it off?</p>\n\n<p>It's doing stuff like this:</p>\n\n<pre><code>use strict;\n$_ = \"abc\";\ns/abc/\\1/;\nno warnings qw(syntax);\ns/abc/\\1/;\n</code></pre>\n\n<p>the message it generates is :</p>\n\n<pre><code>\\1 better written as $1\n</code></pre>\n"}, {"tags": ["perl", "diskspace", "linux-df"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1480548151, "post_id": 40899333, "comment_id": 69013869, "body": "it&#39;s possible that the system isn&#39;t releasing the diskspace until the application terminates. Much like a long running application that generates large log files, deleting the file removes it, but the space isn&#39;t freed until the application is reloaded. Try an <code>lsof | grep deleted</code>... you may see your files still listed, and if so and they&#39;re gone after the app terminates, this is the issue."}, {"owner": {"reputation": 376, "user_id": 957495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/920d3947ffb671ad94e070825a050e0c?s=128&d=identicon&r=PG", "display_name": "Lex", "link": "https://stackoverflow.com/users/957495/lex"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1480625064, "post_id": 40899333, "comment_id": 69052299, "body": "This was my issue. Thanks."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1480626101, "post_id": 40899333, "comment_id": 69052808, "body": "I made it an answer so that it can be viewed by future readers with this problem."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1480626082, "creation_date": 1480626082, "answer_id": 40920310, "question_id": 40899333, "link": "https://stackoverflow.com/questions/40899333/getting-updated-values-for-filesysdiskfree/40920310#40920310", "title": "Getting updated values for Filesys::DiskFree", "body": "<p>It's possible that the system isn't releasing the disk space until the application terminates. Much like a long running application that generates large log files, deleting the file removes it, but the space isn't freed until the application is reloaded. Try an <code>lsof | grep deleted</code>... you may see your files still listed, and if so and they're gone after the app terminates, this is the issue.</p>\n"}], "owner": {"reputation": 376, "user_id": 957495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/920d3947ffb671ad94e070825a050e0c?s=128&d=identicon&r=PG", "display_name": "Lex", "link": "https://stackoverflow.com/users/957495/lex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 40920310, "answer_count": 1, "score": 0, "last_activity_date": 1480626082, "creation_date": 1480544496, "question_id": 40899333, "link": "https://stackoverflow.com/questions/40899333/getting-updated-values-for-filesysdiskfree", "title": "Getting updated values for Filesys::DiskFree", "body": "<p>So i'm working on a script to remove some old backups when the disk space available goes bellow a certain percentage.</p>\n\n<pre><code>    # get disk info\n    $handle = Filesys::DiskFree-&gt;new();\n    $handle-&gt;df();\n    $available = $handle-&gt;avail(\"$dir\");\n    $used = $handle-&gt;used(\"$dir\");\n    $total = $handle-&gt;total(\"$dir\");\n    $used_p = ($used / $total) * 100.0;\n    print \"$used_p\\n\";\n    print \"$used\\n\";\n\n    # find files to delete\n    # --- special sauce code to find @files\n\n    # delete files\n    unlink @files;\n\n    # get new disk info\n    $handle = Filesys::DiskFree-&gt;new();\n    $handle-&gt;df();\n    $available = $handle-&gt;avail(\"$dir\");\n    $used = $handle-&gt;used(\"$dir\");\n    $used_p = ($used / $total) * 100.0;\n    print \"$used_p\\n\";\n    print \"$used\\n\";\n</code></pre>\n\n<p>My thinking was that the second time i used Filesys::DiskFree I would get the new df values which should reflect the files deleted. However, is not giving me the values i expect. Is not exactly the same, but the difference is not nearly as much as I expect. However the second time i run it I can see that the initial print reflects the files being deleted on the previous run. It is as if there was some sort of delay. As shown above, I tried calling new() again to see if that would clear stale data.</p>\n"}, {"tags": ["regex", "perl", "equivalence", "word-boundary"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1480535697, "post_id": 40896919, "comment_id": 69007811, "body": "<code>(?&lt;!\\w)</code> only matches at the beginning of a word where <code>\\b</code> will assert at either end of a word."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1480570132, "post_id": 40896919, "comment_id": 69019633, "body": "@dawg yes, but <code>a</code> is a word character, which means that in <code>\\ba</code>, <code>\\b</code> can only be satisfied by the case where the nonword is on the left."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480537492, "post_id": 40897089, "comment_id": 69008720, "body": "Another example: <code>say for &#39;!!a!!&#39; =~ &#47;(!|\\ba)&#47;g;</code>"}, {"owner": {"reputation": 3, "user_id": 6351954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1006104242759168/picture?type=large", "display_name": "Zal&#225;n Vajda", "link": "https://stackoverflow.com/users/6351954/zal%c3%a1n-vajda"}, "edited": false, "score": 0, "creation_date": 1480607278, "post_id": 40897089, "comment_id": 69041937, "body": "If I dont deal with submatches, but only with the whole string match, is my &quot;solution&quot; okay? What do you think? I&#39;m writing a NFA  that only recognizes the L(regex) set."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 6351954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1006104242759168/picture?type=large", "display_name": "Zal&#225;n Vajda", "link": "https://stackoverflow.com/users/6351954/zal%c3%a1n-vajda"}, "edited": false, "score": 0, "creation_date": 1480607596, "post_id": 40897089, "comment_id": 69042167, "body": "No. <code>say &quot;!a&quot; =~ &#47;^[x!](?:\\ba|b)\\z&#47; ? &quot;matched&quot; : &quot;didn&#39;t match&quot;;</code>. (This doesn&#39;t mean it&#39;s impossible to rewrite the pattern without <code>\\b</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 6351954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1006104242759168/picture?type=large", "display_name": "Zal&#225;n Vajda", "link": "https://stackoverflow.com/users/6351954/zal%c3%a1n-vajda"}, "edited": false, "score": 0, "creation_date": 1480767895, "post_id": 40897089, "comment_id": 69105475, "body": "Just run it, then replace <code>\\ba</code> with <code>(?:^a|\\Wa)</code> and run it again. You&#39;ll get different results."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1480570000, "last_edit_date": 1480570000, "creation_date": 1480535950, "answer_id": 40897089, "question_id": 40896919, "link": "https://stackoverflow.com/questions/40896919/perl-regex-word-boundary-equivalence/40897089#40897089", "title": "Perl-regex word boundary equivalence", "body": "<p><code>\\b</code> is equivalent to <code>(?:(?&lt;!\\w)(?=\\w)|(?&lt;=\\w)(?!\\w))</code>, so</p>\n\n<p><code>\\ba</code> is equivalent to <code>(?:(?&lt;!\\w)(?=\\w)|(?&lt;=\\w)(?!\\w))a</code>, so</p>\n\n<p><code>\\ba</code> is equivalent to <code>(?&lt;!\\w)a</code> because <code>a</code> matches <code>\\w</code>.</p>\n\n<hr>\n\n<p>Both <code>\\ba</code> and <code>(?&lt;!\\w)a</code> are similar to both <code>^a|\\Wa</code> and <code>(?:^|\\W)a</code> to the point of being occasionally interchangeable, but they are different because the former two match a single character and the latter two can match two. Compare:</p>\n\n<pre><code>say '!@a#$' =~ s/\\ba//r;         # !@#$\n\nsay '!@a#$' =~ s/(?&lt;!\\w)a//r;    # !@#$\n\nsay '!@a#$' =~ s/^a|\\Wa//r;      # !#$\n\nsay '!@a#$' =~ s/(?:^|\\W)a//r;   # !#$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6351954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1006104242759168/picture?type=large", "display_name": "Zal&#225;n Vajda", "link": "https://stackoverflow.com/users/6351954/zal%c3%a1n-vajda"}, "edited": false, "score": 0, "creation_date": 1480587815, "post_id": 40898880, "comment_id": 69028560, "body": "<code>!</code> is a non-word  character, so I think you are wrong, regex <code>\\Wa</code> matches  string <code>!a</code>"}], "tags": [], "owner": {"reputation": 63, "user_id": 6905319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4cfb08eaf9675c688f8184e24fdd160?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Jones", "link": "https://stackoverflow.com/users/6905319/nicholas-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1480601080, "last_edit_date": 1480601080, "creation_date": 1480542760, "answer_id": 40898880, "question_id": 40896919, "link": "https://stackoverflow.com/questions/40896919/perl-regex-word-boundary-equivalence/40898880#40898880", "title": "Perl-regex word boundary equivalence", "body": "<p><code>\\ba</code> will match <code>a</code> for the string <code>!a</code> \nwhile <code>^a|\\Wa</code> will match <code>!a</code></p>\n\n<p>This is the shortest example I can provide why they are NOT equivalent.</p>\n"}], "owner": {"reputation": 3, "user_id": 6351954, "user_type": "registered", "profile_image": "https://graph.facebook.com/1006104242759168/picture?type=large", "display_name": "Zal&#225;n Vajda", "link": "https://stackoverflow.com/users/6351954/zal%c3%a1n-vajda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 40897089, "answer_count": 2, "score": 0, "last_activity_date": 1480601080, "creation_date": 1480535325, "question_id": 40896919, "link": "https://stackoverflow.com/questions/40896919/perl-regex-word-boundary-equivalence", "title": "Perl-regex word boundary equivalence", "body": "<p>I read that the regex</p>\n\n<pre><code>\\ba\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>(?&lt;!\\w)a\n</code></pre>\n\n<p>but before that I had figured out that maybe</p>\n\n<pre><code>^a|\\Wa\n</code></pre>\n\n<p>is equivalent too</p>\n\n<p>My question is: What is the difference between those two? Could somebody write an example if they are not equivalent?</p>\n"}, {"tags": ["arrays", "string", "perl", "random", "range"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480539197, "post_id": 40895262, "comment_id": 69009688, "body": "<i>&quot;it did not work out&quot;</i> doesn&#39;t provide any information. What is wrong with what you have written, and what output did you expect?"}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480594379, "post_id": 40895262, "comment_id": 69032961, "body": "It did not create a file, not even with single number within it. My expectation was to have a file which has 30 different/same numbers ranging between 20 to 60 in $RandString and to have this in $fh as my output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480595951, "post_id": 40895262, "comment_id": 69033929, "body": "Okay, so what is <code>$x</code>? And did Schwern&#39;s answer fix things for you? Take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480596112, "post_id": 40895262, "comment_id": 69034050, "body": "Well, no. I still do not have an output but thank you for sharing what I should do later on in here. Good to learn."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480596150, "post_id": 40895262, "comment_id": 69034069, "body": "And what is <code>$x</code>?"}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480596539, "post_id": 40895262, "comment_id": 69034321, "body": "<code>$x</code> is the random number that I want to create within min and max range. Then I intended to keep it as creating 1 random number, combining with <code>map</code> to create as many as I need for each string. It is like, to say to create 1 random number with <code>$x</code>, and then asking it to repeat it n times. (n= length of the string)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480539234, "post_id": 40895513, "comment_id": 69009720, "body": "<i>&quot;You&#39;re close&quot;</i>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480539657, "post_id": 40895513, "comment_id": 69009948, "body": "The code to pick a random number from <code>$min</code> to <code>$max</code> <i>actually</i> looks like this: <code>my $pick = int rand ($max - $min + 1) + $min</code>. <code>int($min + rand($max-$min))</code> will never result in a value of <code>$max</code>."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480540248, "post_id": 40895513, "comment_id": 69010261, "body": "@Borodin Right, off-by-one error. <code>rand</code> starts at 0. Thanks!"}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480596013, "post_id": 40895513, "comment_id": 69033971, "body": "Thank you for the answer Schwern. For the last part of the code, when I write as <code>print $fh join &#39; &#39;, @rands</code>; it says that I am having a syntax error. When I put parenthesis after print as :  <code>print ($fh join &#39; &#39;, @rands); </code> it takes print as a function and still does not create anything. Can you maybe show me where the typo is? I also used <code>push @rands, $fh;</code> , but it says I am still having the syntax error."}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480598866, "post_id": 40895513, "comment_id": 69035842, "body": "At the moment, my code is below and saying that there is a syntax error that I cannot see around <code>print</code> --&gt;  <code>open ($fh, &#39;&gt;&#39;, $fileToLocate) or die; my $rand = $minimum + int rand($maximum - $minimum + 1);    my @rands = map { $minimum + int rand($maximum - $minimum + 1) } 1..5 # $string; 1..5       print $fh join (&#39;&#39;, @rands);   close $fh;}</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480618395, "post_id": 40895513, "comment_id": 69048677, "body": "@podedo What&#39;s that extra <code>1..5</code> doing? That&#39;s a syntax error."}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480627977, "post_id": 40895513, "comment_id": 69053715, "body": "@Schwern, i just wanted to try it 5 times, since I dont know how to extract the lenghts of the strings at the moment."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480628195, "post_id": 40895513, "comment_id": 69053832, "body": "@podedo <code>length $string</code>. You seem to be struggling with basic Perl syntax (not that I blame you). You might need to take a moment and read a Perl book. <a href=\"http://modernperlbooks.com/books/modern_perl_2016/\" rel=\"nofollow noreferrer\">Modern Perl</a> if you already know how to program, <a href=\"https://www.perl.org/books/beginning-perl/\" rel=\"nofollow noreferrer\">Beginning Perl</a> if you don&#39;t."}, {"owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "edited": false, "score": 0, "creation_date": 1480628418, "post_id": 40895513, "comment_id": 69053922, "body": "@Schwern Thank you for sharing. I think I do too. I will give it a try."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1480542346, "last_edit_date": 1480542346, "creation_date": 1480530097, "answer_id": 40895513, "question_id": 40895262, "link": "https://stackoverflow.com/questions/40895262/generating-limited-amount-of-random-numbers-in-perl-for-a-known-range/40895513#40895513", "title": "Generating limited amount of random numbers in Perl for a known range", "body": "<p>You're close.</p>\n\n<p>The code to pick a random number from <code>$min</code> to <code>$max</code> looks like this.</p>\n\n<pre><code>my $rand = $min + int rand($max - $min + 1));\n</code></pre>\n\n<p>So you had that part right, but with an off-by-one error (I made the same mistake earlier). Because <code>rand</code> starts at 0, <code>int rand $x</code> will go from 0 to <code>$x - 1</code>.</p>\n\n<p>Then you need to generate a bunch of them. You're close with the map, but <code>$x</code> only stores a single random number, so <code>map { $x } ( 1 .. 30 )</code> will just give you one number repeated 30 times. Instead you need to get a new random number inside the map block.</p>\n\n<pre><code>my @rands = map { $min + int rand($max - $min + 1)) } 1..length $string;\n</code></pre>\n\n<p>That will run <code>int($x + rand($y-$x))</code> for a number of times equal to the number of characters in <code>$string</code> and put them all into the list <code>@rands</code>. Then you can join <code>@rands</code> like you have already.</p>\n\n<pre><code>print $fh join '', @rands;\n</code></pre>\n\n<p>That should get you the rest of the way.</p>\n"}], "owner": {"reputation": 806, "user_id": 3932463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9770a533e1ea10e8dd5693dc562402c0?s=128&d=identicon&r=PG&f=1", "display_name": "bapors", "link": "https://stackoverflow.com/users/3932463/bapors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 40895513, "answer_count": 1, "score": 1, "last_activity_date": 1480542346, "creation_date": 1480529231, "last_edit_date": 1592644375, "question_id": 40895262, "link": "https://stackoverflow.com/questions/40895262/generating-limited-amount-of-random-numbers-in-perl-for-a-known-range", "title": "Generating limited amount of random numbers in Perl for a known range", "body": "<p>I have a file <code>letters.txt</code> which has couple letters</p>\n<pre><code>@string1 10 letters\n\nA H K Y M H O L H L\n\n@string2 9 letters\n\nH N U P W X L Y H \n</code></pre>\n<p>I am trying to create a file which will have random numbers from 20 to 60 for each letter, for each string.</p>\n<p>My expected output should look like :</p>\n<h3>output.txt:</h3>\n<pre><code>@string1\n\n29 27 56 43 39 40 36 48 59 38\n\n@sting2\n\n26 36 39 39 26 51 38 42 42 \n</code></pre>\n<p>I have tried the code below with <code>$minimum</code> as 20 and <code>$maximum</code> as 60:</p>\n<pre><code>open ($fh, '&gt;', $fileToLocate) or die;\n\nmy $x = $minimum + int(rand($maximum - $minimum);\n\nprint $fh &quot;$x\\n&quot;;\n\nclose $fh;\n</code></pre>\n<p>It creates only one random number in <code>$fileToLocate</code> file.</p>\n<p>I want to extract the number of letters in each string \u2014 written just before <code>letters</code> in the input file: 10 for <code>@string1</code> and 9 for <code>@string2</code></p>\n<p>I have tried to this code to create 30 random numbers ranging between 20 and 60, however it did not work out</p>\n<pre><code>my @Chars = ( 20 .. 60);\n\n$RandString = join(&quot;&quot;, @Chars[ map { $x } ( 1 .. 30 ) ]);\n\nprint $fh &quot;$RandString\\n&quot;;\n\nclose $fh;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480535736, "post_id": 40895147, "comment_id": 69007832, "body": "Okay. So what is wrong with what you have written?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480536382, "post_id": 40895147, "comment_id": 69008163, "body": "A file like that is impossible to parse unless <i>either</i> you insist that no one may use a colon when transcribing comments, or you provide a list of contributors whose tags may appear before a comment in the transcript."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480536522, "post_id": 40895147, "comment_id": 69008232, "body": "I&#39;m voting to close this question as off-topic because it doesn&#39;t have a solution unless the data is much more restricted."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480537044, "post_id": 40895147, "comment_id": 69008511, "body": "I agree with objections by @Borodin.  I would suggest that the OP adds more specific conditions.  For example, that there can be no text, other than the qualifying names, that is <i>two words in block capitals followed by the colon</i>.  Or some such."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480537449, "post_id": 40895147, "comment_id": 69008696, "body": "@zdim: I don&#39;t think that&#39;s useful. The input is likely to be manually-entered and so there may well be mistakes as well as non-capital letters before each colon. This question is a lot more than the usual <i>pls write me a regex</i> trash."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480539303, "post_id": 40895147, "comment_id": 69009746, "body": "@Borodin  Well, I agree -- but as such it is a good problem.  Also, it is a real problem which needs solving.  Perhaps the asker can specify it further.  Your idea of providing the list of participants is very reasonable and seems feasible.  It&#39;s not hunders of people."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480539380, "post_id": 40895147, "comment_id": 69009797, "body": "@ykjang I have removed my answer for now, since at this point I believe that your question needs more specific conditions. The question is fine, it is just that the problem itself is hard. See the comments for suggestions."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480540037, "post_id": 40895147, "comment_id": 69010144, "body": "@zdim: I&#39;m not sure what you mean by <i>&quot;a good problem&quot;</i>. The OP&#39;s first approach must be to put in procedural restrictions so that the transcription may be parsed. It is not something that can be solved by software."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480540229, "post_id": 40895147, "comment_id": 69010252, "body": "@Borodin I mean a realistic and rounded problem.  Once such restrcitions are put in place and stated as requirements the software for it can be written.  I think that it would then make for a very useful page on SO. It would also inform that a problem like this <i>needs</i> those specifics."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480540886, "post_id": 40895147, "comment_id": 69010630, "body": "@zdim: Maybe, but the real solution has to be in the data entry code, which is currently probably Notepad or Word."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480529842, "post_id": 40895302, "comment_id": 69004694, "body": "The <code>[A-Z ]+</code> is going to match <code>A nice day</code>.  Then it&#39;s all resting on the colon alone."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480529965, "post_id": 40895302, "comment_id": 69004757, "body": "@zdim And <code>\\d</code> matches a single digit, but I don&#39;t see how that&#39;s relevant to this answer."}, {"owner": {"reputation": 11, "user_id": 6388086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724e3aee30651e28dc841a62fb92029c?s=128&d=identicon&r=PG&f=1", "display_name": "ykjang322", "link": "https://stackoverflow.com/users/6388086/ykjang322"}, "edited": false, "score": 0, "creation_date": 1480535398, "post_id": 40895302, "comment_id": 69007641, "body": "Thanks a lot. I got exactly the same output. But still I don&#39;t understand how this code extracts multiple lines. How is the flag turned on in the line without NAME: ??"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480535625, "post_id": 40895302, "comment_id": 69007758, "body": "It&#39;s not. The value of <code>$spew</code> only changes when something that looks like a name is found, so it just stays on (or off) and continues printing (or not) until another name is found."}, {"owner": {"reputation": 11, "user_id": 6388086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724e3aee30651e28dc841a62fb92029c?s=128&d=identicon&r=PG&f=1", "display_name": "ykjang322", "link": "https://stackoverflow.com/users/6388086/ykjang322"}, "edited": false, "score": 0, "creation_date": 1480535857, "post_id": 40895302, "comment_id": 69007896, "body": "I see. Thank you!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480536152, "post_id": 40895302, "comment_id": 69008047, "body": "@MattJacob: There is no solution, and you shouldn&#39;t pretend that there is. Suppose <code>FOO BAR</code> says <code>&quot;I have to disagree: there is no solution&quot;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480536753, "post_id": 40895302, "comment_id": 69008352, "body": "I only meant to say (with my first comment) that it doesn&#39;t specify the condition as much as it could.  This compounds the problem @Borodin is raising, that the quesiton doesn&#39;t provide a specific enough condition to correctly parse all that may come in a transcript."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480536962, "post_id": 40895302, "comment_id": 69008465, "body": "@Borodin OK, let&#39;s say that Mr. BAR says something with a colon in it. So what? The regex is anchored to the start of the line, and the subset of characters that can appear before a colon is pretty limited. Given the example input, one could reasonably assume that valid names contain only uppercase letters and spaces."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480537170, "post_id": 40895302, "comment_id": 69008553, "body": "@MattJacob: If <code>FOO BAR</code> says <code>&quot;I HAVE TO\\nDISAGREE: there is no solution&quot;</code>, what will your code make of it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480537240, "post_id": 40895302, "comment_id": 69008591, "body": "@MattJacob Consider this statement by Mr. Bar -- <code>FOO BAR: ... talks ...\\nA GANT: we have ...</code> (The <code>GANT</code> happens to be an acronym used in the particular community where the conversation is taking place.  The transcriber knows nothing about our program.)  The second line, <code>A GANT: ...</code> is going to be matched as a name. This is just something I made up. An actual discussion can spring up all kinds of text."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480537629, "post_id": 40895302, "comment_id": 69008790, "body": "@Borodin Oy. So let&#39;s go and downvote every single answer on SO then, because none of them accounted for the extra hypothetical conditions that weren&#39;t part of the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480537697, "post_id": 40895302, "comment_id": 69008824, "body": "@MattJacob: It is rarely a good criterion that a piece of code satisfies the question. Far too often we see <i>&quot;But it works!&quot;</i> on Stack Overflow. But good code must work well in all likely circumstances, and seven lines of test data is not a useful measure. Please delete your answer, because it is misleading and destructive."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480537888, "post_id": 40895302, "comment_id": 69008960, "body": "@MattJacob: Surely you realise that questions usually provide a tiny subset of the possible conditions? It is your job to write something better than <code>print &quot;4\\n&quot;</code> when someone asks <i>&quot;How do I print the sum of two numbers, say 1 and 3?&quot;</i>"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1484001388, "last_edit_date": 1484001388, "creation_date": 1480529399, "answer_id": 40895302, "question_id": 40895147, "link": "https://stackoverflow.com/questions/40895147/how-to-match-multiple-lines-before-certain-words/40895302#40895302", "title": "How to match multiple lines before certain words", "body": "<p>Set a flag. Turn it on when you find the name you're looking for. Turn it off when you find a different name. Only print when the flag is on.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $word = 'FOO BAR';\nmy $spew;\n\nwhile (&lt;DATA&gt;) {\n    if (/^([A-Z ]+):/) {\n        $spew = $1 eq $word;\n    }\n\n    print if $spew;\n}\n\n__DATA__\nFOO BAR: Good morning.\nI want to meet you later.\nJONE DOE: Good morning\nFOO BAR: Thank you.\nSee you later.\nJANE DOE: Thank you.\nSee you later.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>FOO BAR: Good morning.\nI want to meet you later.\nFOO BAR: Thank you.\nSee you later.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6388086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724e3aee30651e28dc841a62fb92029c?s=128&d=identicon&r=PG&f=1", "display_name": "ykjang322", "link": "https://stackoverflow.com/users/6388086/ykjang322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1484001388, "creation_date": 1480528769, "last_edit_date": 1480535703, "question_id": 40895147, "link": "https://stackoverflow.com/questions/40895147/how-to-match-multiple-lines-before-certain-words", "title": "How to match multiple lines before certain words", "body": "<p>I want to extract the dialogues made only by \"FOO BAR\" in some meeting transcripts.</p>\n\n<p>The dialogue sometimes spreads to multiple lines, and I don't know how to extract multiple lines of text.</p>\n\n<p>I thought it could be related to the use of range operator with upper case letters and colon for people's name, but I could not figure out this by myself. </p>\n\n<pre><code>my $word = 'FOO BAR';\n\nwhile (&lt;DATA&gt;) {\n    print if /\\b$word\\b/i .. /[A-Z]:/\n}\n\n\n__DATA__\nFOO BAR: Good morning. \nI want to meet you later.\nJONE DOE: Good morning\nFOO BAR: Thank you.\nSee you later.\nJANE DOE: Thank you.\nSee you later.\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>FOO BAR: Good morning. \nFOO BAR: Thank you.\n</code></pre>\n"}, {"tags": ["perl", "stripe-payments"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1480530180, "creation_date": 1480530180, "answer_id": 40895538, "question_id": 40894978, "link": "https://stackoverflow.com/questions/40894978/perl-netstripe-internal-server-error-with-bad-credit-card-number/40895538#40895538", "title": "Perl Net::Stripe Internal Server Error with Bad Credit Card Number", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> to trap this exception, then carry on working.</p>\n\n<pre><code>my $card_token;\n\nmy $ok = eval {\n    $card_token = $stripe-&gt;post_token(\n        card =&gt; {\n            number    =&gt; $FORM{'Credit Card #'},\n            exp_month =&gt; $FORM{'Expiration Month'},\n            exp_year  =&gt; $FORM{'Expiration Year'},\n            currency  =&gt; 'usd',\n            cvc       =&gt; $FORM{'Credit Card Security Code'},\n            name      =&gt; $FORM{'Name on Card'},\n            address_line1  =&gt; $FORM{'Address'},\n            address_city  =&gt; $FORM{'City'},\n            address_state  =&gt; $FORM{'State'},\n            address_zip  =&gt; $FORM{'Zip'}\n        }\n    );\n\n    1;\n}\n\nif (! $ok) {\n    # error object is in $@. You'll need to investigate its structure\n    # before using it\n\n    my $error = $@;\n\n    ...;\n}\nelse {\n    # do stuff with $card_token\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40895538, "answer_count": 1, "score": 0, "last_activity_date": 1480530180, "creation_date": 1480528142, "question_id": 40894978, "link": "https://stackoverflow.com/questions/40894978/perl-netstripe-internal-server-error-with-bad-credit-card-number", "title": "Perl Net::Stripe Internal Server Error with Bad Credit Card Number", "body": "<p>I am using Net::Stripe to process credit cards. It is working correctly if the credit card number is valid. But when I test a bad credit card number, I get to line 676 of Stripe.pm:</p>\n\n<pre><code>676:        die $e;\n</code></pre>\n\n<p>and that produces this error:</p>\n\n<blockquote>\n  <p>1 at /usr/share/perl/5.14/perl5db.pl line 7799.</p>\n</blockquote>\n\n<p>which causes an Internal Server Error in the browser.</p>\n\n<p>The block of code in Stripe.pm that ends with the die statement is this:</p>\n\n<pre><code>if ($resp-&gt;code == 200) {\n    return _hash_to_object(decode_json($resp-&gt;content));\n} elsif ($resp-&gt;code == 500) {\n    die Net::Stripe::Error-&gt;new(\n        type =&gt; \"HTTP request error\",\n        code =&gt; $resp-&gt;code,\n        message =&gt; $resp-&gt;status_line . \" - \" . $resp-&gt;content,\n    );\n}\n\nmy $e = eval {\n    my $hash = decode_json($resp-&gt;content);\n    Net::Stripe::Error-&gt;new($hash-&gt;{error})\n};\nif ($@) {\n    Net::Stripe::Error-&gt;new(\n        type =&gt; \"Could not decode HTTP response: $@\",\n        message =&gt; $resp-&gt;status_line . \" - \" . $resp-&gt;content,\n    );\n};\n\nwarn \"$e\\n\" if $self-&gt;debug;\ndie $e;\n</code></pre>\n\n<p>The response code that is being returned from Stripe is 402.</p>\n\n<p>I am trying to handle error messages from Stripe with the following code:</p>\n\n<pre><code>my $card_token = $stripe-&gt;post_token(\n    card =&gt; {\n        number    =&gt; $FORM{'Credit Card #'},\n        exp_month =&gt; $FORM{'Expiration Month'},\n        exp_year  =&gt; $FORM{'Expiration Year'},\n        currency  =&gt; 'usd',\n        cvc       =&gt; $FORM{'Credit Card Security Code'},\n        name      =&gt; $FORM{'Name on Card'},\n        address_line1  =&gt; $FORM{'Address'},\n        address_city  =&gt; $FORM{'City'},\n        address_state  =&gt; $FORM{'State'},\n        address_zip  =&gt; $FORM{'Zip'}\n    }\n);\n\nif ($card_token-&gt;{failure_message}) {\n\n    $error = $card_token-&gt;{failure_message};\n\n    print \"Content-type: text/html\\n\\n\";\n    print \"There was an error processing your credit card:&lt;br&gt;&lt;br&gt;$error\";\n\n}\n</code></pre>\n\n<p>But the code is dying before it exits the block of code that is trying to retrieve the token.</p>\n\n<p>Is there a way to suppress that \"die\" statement?</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1480517764, "post_id": 40891229, "comment_id": 68996634, "body": "What do you mean by &quot;environment file&quot;? Please include a demonstration of the problem in your question!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480521821, "post_id": 40891229, "comment_id": 68999606, "body": "Please explain carefully what you mean by <i>&quot;taking all values for my $variable (Import) from environment file&quot;</i>. Do you mean &quot;my&quot; as in the Perl language word <code>my</code>? What do you mean by <code>(Import)</code>? What is an &quot;environment file&quot;?"}, {"owner": {"reputation": 19, "user_id": 4845231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-0Ocuezcdv7A/AAAAAAAAAAI/AAAAAAAAAYM/aCQMZwXFzpg/photo.jpg?sz=128", "display_name": "Shadab Hussain", "link": "https://stackoverflow.com/users/4845231/shadab-hussain"}, "edited": false, "score": 0, "creation_date": 1480575283, "post_id": 40891229, "comment_id": 69021630, "body": "how to source a shell script [environment variables] in perl script without forking a subshell? I hope it will help.                                                                   I want to call &quot;env.sh &quot; from &quot;my_perl.pl&quot; without forking a subshell. I tried with backtics and system like this --&gt; system (. env.sh) [dot space env.sh] , however wont work. Please help me out."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1480588930, "post_id": 40891229, "comment_id": 69029392, "body": "When you use backticks or <code>system</code> you <b>do</b> fork a subshell. It will set the env. vars in that shell and then exit so the vars vanish together with the subshell. <a href=\"https://stackoverflow.com/posts/40891229/edit\">Edit</a> your question and show the env. file and the Perl code that ought to benefit from these env. variables."}], "answers": [{"comments": [{"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1539254015, "post_id": 40891697, "comment_id": 92438966, "body": "I had to change it onto: my $env_serialized=qx(source myscript.sh &amp;&amp; env);"}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1480588269, "last_edit_date": 1480588269, "creation_date": 1480518401, "answer_id": 40891697, "question_id": 40891229, "link": "https://stackoverflow.com/questions/40891229/how-to-call-environment-file-from-perl-mmodule/40891697#40891697", "title": "How to call environment file from Perl mmodule", "body": "<p>you can use the Perl Function do</p>\n\n<pre><code>do 'filename.env'\n</code></pre>\n\n<p>might do depending on your needs. (sourcing perl Code)</p>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/do.html</a> for further information.</p>\n\n<p>if you want to get the changes to the env by your shell script, you have to copy them</p>\n\n<pre><code>my $env_serialized=qx(myscript.sh | env);\nmy %new_env= (map {/^(.*?)=(.*)/} split(\"\\n\",$env_serialized)});\nforeach my $key (keys %new_env) {\n     $ENV{$key} = $new_env{$key};\n}\n</code></pre>\n\n<p>HTH\nGeorg</p>\n"}], "owner": {"reputation": 19, "user_id": 4845231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-0Ocuezcdv7A/AAAAAAAAAAI/AAAAAAAAAYM/aCQMZwXFzpg/photo.jpg?sz=128", "display_name": "Shadab Hussain", "link": "https://stackoverflow.com/users/4845231/shadab-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1480588269, "creation_date": 1480517040, "question_id": 40891229, "link": "https://stackoverflow.com/questions/40891229/how-to-call-environment-file-from-perl-mmodule", "title": "How to call environment file from Perl mmodule", "body": "<p>I have a Perl script test.Perl which is taking all values for my $variable (Import) from environment file. Perl script will take values only if your environment file is .pm (environment.pm). </p>\n\n<p>Now when I trying to import $variables value from environment.env (not .pm) file then perl script is not loading variable values.</p>\n\n<p>Is there any way we can use environment file with some other extension apart from .pm and refer in perl script.</p>\n"}, {"tags": ["perl", "dancer"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480511913, "post_id": 40889311, "comment_id": 68992402, "body": "A link to Dancer::Deployment (or the one in D2) be helpful here."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1480512790, "post_id": 40889311, "comment_id": 68993022, "body": "<a href=\"https://metacpan.org/pod/distribution/Dancer/lib/Dancer/Deployment.pod#Running-stand-alone-behind-a-proxy-load-balancer\" rel=\"nofollow noreferrer\">Running stand-alone behind a proxy / load balancer</a> has many advantages."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 4, "last_activity_date": 1480511988, "last_edit_date": 1480511988, "creation_date": 1480511570, "answer_id": 40889311, "question_id": 40889235, "link": "https://stackoverflow.com/questions/40889235/difference-between-perl-dancer-framework-and-apache2-http-server/40889311#40889311", "title": "difference between perl dancer framework and apache2 http server", "body": "<p>Dancer has a <a href=\"http://plackperl.org/\" rel=\"nofollow noreferrer\">PSGI</a> interface. </p>\n\n<p>PSGI is similar to CGI in that it allows a web server to communicate with the Perl application, but it is more efficient (it keeps the application running all the time so it doesn't need to load everything from scratch for each request) and has more features (e.g. the ability to use Plack middleware). </p>\n\n<p>Dancer comes with a script to run a simple web server (which is not Apache) for development purposes. </p>\n\n<p>It is expected that you'll use a more powerful web server (such as Apache HTTPD) in <a href=\"https://metacpan.org/pod/distribution/Dancer/lib/Dancer/Deployment.pod\" rel=\"nofollow noreferrer\">production</a>.</p>\n"}], "owner": {"reputation": 322, "user_id": 4781778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/10ead168c42930062bbe7ec7f44a4120?s=128&d=identicon&r=PG&f=1", "display_name": "vikas kv", "link": "https://stackoverflow.com/users/4781778/vikas-kv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480511988, "creation_date": 1480511340, "question_id": 40889235, "link": "https://stackoverflow.com/questions/40889235/difference-between-perl-dancer-framework-and-apache2-http-server", "title": "difference between perl dancer framework and apache2 http server", "body": "<p>I am new to the programming world and started with Perl couple of days back. I tried developing a web application using Perl. <br> Initially followed some tutorial and learned how to write simple CGI scripts using Perl and deployed it using Apache2 httpd server. After getting to know about the Perl Dancer it was much easier to develop a web application using the framework.<br>As both serve the same purpose I want to know weather Dancer is a replacement to the Apache httpd server or dancer internally uses apache to start a server. As dancer is just a web application framework how internally it is managing to handle the server request and responses.<br>\nCan anybody post a link where I can read and get to know about how the webserver works? </p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480509713, "post_id": 40887636, "comment_id": 68990909, "body": "Neither can we without knowing what&#39;s going on in <code>processFile</code>. Could be the thread abnormally terminating and thus not releasing the semaphore. ."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480509780, "post_id": 40887636, "comment_id": 68990948, "body": "Also: why <code>dequeue_nb</code>? why not just <code>dequeue</code> and <code>end</code> the queue when you&#39;re done with processing. Also - <code>new ( sub { start() } )</code> - why do you need an anonymous sub to call another sub. Is <code>thread -&gt; create ( \\&amp;start)</code> not actually sufficient  for some reason?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480509867, "post_id": 40887636, "comment_id": 68991000, "body": "Can&#39;t really tell why you&#39;re using semaphores here at all. I mean, what&#39;s wrong with waiting for a <code>join</code> operation?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1480518674, "creation_date": 1480518674, "answer_id": 40891799, "question_id": 40887636, "link": "https://stackoverflow.com/questions/40887636/perl-threads-stop-working-suddenly-after-long-runs/40891799#40891799", "title": "Perl threads stop working suddenly after long runs", "body": "<p>If an uncaught exception is thrown in your thread, the semaphore will never be \"upped\". It looks like you are using the semaphore to wait for the thread to exit, which can be done more safely using <code>$thread-&gt;join</code>.</p>\n\n<p>That's assuming you are correct about the thread having exited. It could also be that the thread has stalled (e.g. deadlocked) or entered an infinite loop.</p>\n"}], "owner": {"reputation": 37, "user_id": 7230475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154561575736014/picture?type=large", "display_name": "Shadi Iskander", "link": "https://stackoverflow.com/users/7230475/shadi-iskander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480518674, "creation_date": 1480506545, "question_id": 40887636, "link": "https://stackoverflow.com/questions/40887636/perl-threads-stop-working-suddenly-after-long-runs", "title": "Perl threads stop working suddenly after long runs", "body": "<p>I have a perl script, that goes through a queue of files and process files in different threads:</p>\n\n<p>Below is a snippet after filling the files queue.\nThe problem is, sometimes when I leave it running for too long (12-24 hours), I come back to see the script hanging.</p>\n\n<p>I have log files for each thread, I see that the last time stamp of activity is always the same for all of them. But the script does not exit, meaning that the threads do not give back the semaphore.\nAlso I am sure that the threads did not end properly, because I can still see the queue is full of files to be handled.</p>\n\n<p>I have a log before and after calling the EXE, and the last trace is always the one after calling the EXE. Cannot find a rational explanation.</p>\n\n<pre><code>#initiate all threads\nfor( my $i = 0; $i &lt; $max_thread; $i++ )\n{\n   my $my_thread = threads-&gt;new( sub { start() } );\n   push( @Threads, $my_thread );\n}\n\n$semaphore-&gt;down($max_thread);\n\nterminate();    \nsub start\n{\n   $SIG{INT} = sub { thread_exit() };\n\n   while( (my $file = $file_queue-&gt;dequeue_nb) )\n   {\n      #This function calls an external EXE\n      processFile( $file );\n   }\n\n    #Thread ended\n    $semaphore-&gt;up();\n\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480497408, "post_id": 40884221, "comment_id": 68982752, "body": "That matches literal <code>[]</code> (bracket pair), at the end of the string. So it matches for the string <code>&quot;hello []&quot;</code>, but not for <code>&quot;hello&quot;</code>. Without escaping the brackets are the <i>character class</i>.  Also, a basic fact  may be needed: regex works on a string -- which may be in a variable, but you tried it on a <i>complex data structure</i>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480497796, "post_id": 40884221, "comment_id": 68983023, "body": "timed out ... to continue --  Your <code>$addr2</code> prints as <code>HASH(...)</code> -- and that string does not have <code>[]</code> at its end."}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480502656, "post_id": 40884221, "comment_id": 68986483, "body": "@zdim Thanks! That explained a lot"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480519322, "post_id": 40884221, "comment_id": 68997803, "body": "Add <code>print(&quot;$addr2\\n&quot;);</code> and you&#39;ll understand."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1480497958, "post_id": 40884421, "comment_id": 68983144, "body": "Note that we can match a reference -- <code>perl -wE &#39;$ra = [1,2]; say $ra if $ra =~ &#47;AR&#47;&#39;</code>.  It&#39;s just that a hashref doesn&#39;t have the <code>[]</code> at the end :)"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480498100, "post_id": 40884421, "comment_id": 68983257, "body": "@zdim gotta say I never thought of that option! You can never know when something so weird might come in handy"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480502632, "post_id": 40884421, "comment_id": 68986467, "body": "Maybe data dumper output of <code>$addr2</code> would clarify what&#39;s going on?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480510791, "post_id": 40884421, "comment_id": 68991629, "body": "@yonyon100: I can&#39;t imagine that being useful. You can already compare two references for equality with <code>==</code>, and the better way top detect an <i>array</i> reference would be <code>say $ra if ref $ra eq &#39;ARRAY&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480519391, "post_id": 40884421, "comment_id": 68997856, "body": "@Sobrique, Not at all. The OP is matching against the stringification of <code>$addr2</code>, so <code>print(&quot;$addr2\\n&quot;);</code> is what would clarify what&#39;s going on."}], "tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": true, "score": 7, "last_activity_date": 1480497588, "creation_date": 1480497588, "answer_id": 40884421, "question_id": 40884221, "link": "https://stackoverflow.com/questions/40884221/what-is-the-function-of-this-code-expression/40884421#40884421", "title": "What is the function of this code expression?", "body": "<p>A regular expression checks matching of strings. In your case, you tried matching a hash reference. That's why your code went to the <code>else</code> block.</p>\n\n<p>Now, the <code>/\\[\\]$/</code>. It matches any <em>string</em> that has a literal <code>[]</code> at the end of it. For example, the string <code>my $str = \"just an example []\"</code> would match this regex.</p>\n"}], "owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40884421, "answer_count": 1, "score": 0, "last_activity_date": 1480497588, "creation_date": 1480497008, "question_id": 40884221, "link": "https://stackoverflow.com/questions/40884221/what-is-the-function-of-this-code-expression", "title": "What is the function of this code expression?", "body": "<p>I'm confused with the function of the regular expression:</p>\n\n<p><code>/\\[\\]$/</code></p>\n\n<p>I tried out a short perl code to understand it but I'm still confused. The code output is <code>Else</code></p>\n\n<pre><code>my $addr2 = {[{'firstname' =&gt; 'Nikhil', 'lastname' =&gt; 'Hegde'}, {'firstname' =&gt; 'Nikhil2', 'lastname' =&gt; 'Hegde2'}]};\nif($addr2 =~ /\\[\\]$/) {\n    print \"If\\n\";\n} \nelse {\n    print \"Else\\n\";\n}\n</code></pre>\n\n<p>I thought that <code>/\\[\\]$/</code> would point to whether the value is an array or not but that doesn't seem to be the case. I then thought that maybe the value has to end with an array considering that there is a <code>$</code> in the regular expression. So, I tried substituting:</p>\n\n<p><code>my $addr2 = {[{'firstname' =&gt; 'Nikhil', 'lastname' =&gt; 'Hegde'}, {'firstname' =&gt; 'Nikhil2', 'lastname' =&gt; 'Hegde2'}],[]};</code> </p>\n\n<p>but that doesn't work either. The code output remains <code>Else</code>.</p>\n\n<p>Can anyone help me in understanding the expression <code>/\\[\\]$/</code>? What regular matching does it do? Thanks!</p>\n"}, {"tags": ["perl", "search", "perl-module"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1480505871, "post_id": 40884037, "comment_id": 68988550, "body": "How does the (non-perl) command <code>find start_dir -name &quot;*.[pP][dD][fF]&quot;</code>compare? Is that waaaay faster than your Perl script?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1480503352, "creation_date": 1480503352, "answer_id": 40886518, "question_id": 40884037, "link": "https://stackoverflow.com/questions/40884037/perl-search-a-pdf-file-recursivley-in-a-large-directory-structure/40886518#40886518", "title": "Perl: Search a pdf file recursivley in a large directory structure", "body": "<p>You could try using <a href=\"https://github.com/ggreer/the_silver_searcher\" rel=\"nofollow noreferrer\"><code>ag</code></a> instead:</p>\n\n<pre><code>my $cmd = 'ag -g \"\\.[pP][dD][fF]$\" ' . $folderPath; \nchomp(my @files = qx/$cmd/);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 6800695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b195e3798160130a2db7f800cca4887?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Testori", "link": "https://stackoverflow.com/users/6800695/alessandro-testori"}, "is_accepted": false, "score": 0, "last_activity_date": 1480504020, "creation_date": 1480504020, "answer_id": 40886763, "question_id": 40884037, "link": "https://stackoverflow.com/questions/40884037/perl-search-a-pdf-file-recursivley-in-a-large-directory-structure/40886763#40886763", "title": "Perl: Search a pdf file recursivley in a large directory structure", "body": "<p>Try a subroutine which recursively searches subdirectories. In my example below you must pass your starting directory and an array (by reference, i.e.: \\@name_of_array) which will be filled with the subdirectories. I hope it improves performance, but I am not sure about that</p>\n\n<pre><code>sub list_dirs\n{\n    my ($dir, $dirs) = @_;\n    opendir(D, $dir) || die \"cannot open directory $dir\\n\\n\";\n    my @tmp_dirs = readdir(D);\n    closedir(D);\n    foreach my $tmp_dir (@tmp_dirs)\n    {\n        if (-d \"$dir/$tmp_dir\")\n        {\n            next if ($tmp_dir eq \"..\");\n            next if ($tmp_dir eq \".\");\n            push @$dirs, \"$dir/$tmp_dir\";\n            list_dirs(\"$dir/$tmp_dir\", $dirs);\n        }\n    }\n    return $dirs;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1480520043, "last_edit_date": 1480520043, "creation_date": 1480519258, "answer_id": 40891987, "question_id": 40884037, "link": "https://stackoverflow.com/questions/40884037/perl-search-a-pdf-file-recursivley-in-a-large-directory-structure/40891987#40891987", "title": "Perl: Search a pdf file recursivley in a large directory structure", "body": "<p>Your problem is simple: Instead of looking at each candidate file as it is encountered, you are waiting for <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> to build a list and return it to you. That means you will always wait until it has looked at all the files under that tree. And, from a cold start and with a sufficient number of files, that is going to take a long time before any results are shown.</p>\n\n<p>Instead, you can use the underlying <a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow noreferrer\">File::Find</a> to check each file as it is encountered. You might also find <a href=\"https://metacpan.org/pod/Path::Tiny#iterator\" rel=\"nofollow noreferrer\">Path::Tiny's <code>iterator</code></a> useful.</p>\n\n<p>You are not going to change the time required to visit every file under a tree. However, by processing each file as it is encountered, you are going to 1) reduce the memory footprint of your program as a huge list does not have to be constructed; and 2) you are going to see results faster.</p>\n\n<p>Something like this will get you started:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse File::HomeDir qw(my_documents);\nuse Path::Tiny;\n\nmy $it = path(my_documents)-&gt;iterator({ recurse =&gt; 1 });\n\nwhile (my $path = $it-&gt;()) {\n    return $path-&gt;is_file and $path =~ / [.] pdf \\z/ix;\n    do_something_with_pdf( $path );\n}\n\nsub do_something_with_pdf {\n    print $_[0]-&gt;canonpath, \"\\n\";\n}\n</code></pre>\n\n<p>If you do like the <em>rule</em> part of <code>File::Find::Rule</code>, you may prefer <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>. The important rule is to avoiding waiting for a potentially very large list to be constructed before starting processing.</p>\n\n<p>However, if all you need is a quick way to get a list of all PDF files, you should consider using <a href=\"https://github.com/ggreer/the_silver_searcher\" rel=\"nofollow noreferrer\">The Silver Searcher</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 5113597, "user_type": "registered", "profile_image": "https://graph.facebook.com/625666790909839/picture?type=large", "display_name": "Bhavna Sharma", "link": "https://stackoverflow.com/users/5113597/bhavna-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1480520043, "creation_date": 1480496413, "last_edit_date": 1480502178, "question_id": 40884037, "link": "https://stackoverflow.com/questions/40884037/perl-search-a-pdf-file-recursivley-in-a-large-directory-structure", "title": "Perl: Search a pdf file recursivley in a large directory structure", "body": "<p>I am new to Perl.\nI want to recursively search a <code>pdf</code> file in a large directory tree containing multiple sub-folders,sub-sub folders and a huge amount of files.\nI am using <code>File::Find::Rule</code> to achieve this. But, the performance impact is huge. \nThe script is taking a huge amount of time to search.</p>\n\n<p>Snippet from my Perl script:</p>\n\n<pre><code>@folders = File::Find::Rule -&gt; file -&gt; name('*.[pP][dD][fF]') -&gt; in($folderPath);\n</code></pre>\n\n<p>Is there any other way to achieve this without impacting performance?</p>\n\n<p>Any help will be highly appreciated.</p>\n"}, {"tags": ["regex", "perl", "grouping"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480521626, "post_id": 40880882, "comment_id": 68999475, "body": "What should happen if there are multiple lines containing <code>Important</code>?"}, {"owner": {"reputation": 13, "user_id": 7228897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a19d36771132f2c0a0ffc05758f5e0?s=128&d=identicon&r=PG&f=1", "display_name": "KVon", "link": "https://stackoverflow.com/users/7228897/kvon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480615037, "post_id": 40880882, "comment_id": 69046828, "body": "@Borodin Hmm, I guess in my use case there will only ever be a single line"}, {"owner": {"reputation": 13, "user_id": 7228897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a19d36771132f2c0a0ffc05758f5e0?s=128&d=identicon&r=PG&f=1", "display_name": "KVon", "link": "https://stackoverflow.com/users/7228897/kvon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480626546, "post_id": 40880882, "comment_id": 69053024, "body": "@Borodin Actually I&#39;m curious now, how would you only get the FIRST line that contains Important"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480640422, "post_id": 40880882, "comment_id": 69058136, "body": "@KVon You have that in my answer.  Just exit the loop once you got the match, that will be the first one. So add <code>last;</code> after the print.  (This assumes that the line with <code>^Important</code> <i>does</i> have the patterns. Otherwise, add a check.)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480521603, "post_id": 40880986, "comment_id": 68999464, "body": "This provides only to <code>print</code> the <i>special</i> strings. The OP&#39;s code generates a <code>@both</code> array with the result, and while it does <code>print</code> the contents I imagine that those strings are in fact required for further processing."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480540037, "post_id": 40880986, "comment_id": 69010145, "body": "@Borodin  Somehow missed to see the comment earlier, sorry.  I know that this provides a limited answer, to (more or less) precisely what was asked, if that is what you mean.  I actually contemplated adding more, with an eye on possible further processing, but just can&#39;t see what would be generic enough, given the lack of related specifics."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480540687, "post_id": 40880986, "comment_id": 69010500, "body": "No worries; I don&#39;t expect you to monitor the site 24/7! I just think that, as the OP&#39;s code generates and prints an array <code>@both</code>, it is probably best to replicate that behaviour. It&#39;s not trivial to refactor your own code to do that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480540961, "post_id": 40880986, "comment_id": 69010678, "body": "@Borodin  Right, what I meant to say is that I&#39;ve been &quot;the problem between my chair and my keyboard&quot; for good 5 hours already but I only saw the comment now.  It sometimes happens, I just don&#39;t spot a comment (and it&#39;s annoying)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480541123, "post_id": 40880986, "comment_id": 69010748, "body": "@Borodin  But I think I may not see what you are pointing at.  The OP&#39;s code for <code>@both</code> works on the right line (except that it&#39;s misnamed), but can&#39;t distinguish that line. I took the question to be that, of picking the items on only the right line.  Am I not seeing something here?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1480643264, "last_edit_date": 1480643264, "creation_date": 1480483909, "answer_id": 40880986, "question_id": 40880882, "link": "https://stackoverflow.com/questions/40880882/how-to-match-multiple-groups-on-a-specific-line-in-perl-but-not-other-lines/40880986#40880986", "title": "How to match multiple groups on a specific line in Perl, but not other lines?", "body": "<p>There are a number of ways to do this.  I think the most solid and flexible approach is to break your string into lines and iterate over that array.  Then you can choose how to select what you need and what you want to do with it, at every iteration.  For example</p>\n\n<pre><code>my @lines = split '\\n', $test;\n\nforeach my $line (@lines)\n{\n    next if $line !~ /^Important/;\n\n    my @all_on_line = $line =~ /!(.+?)!/g;\n\n    if (@all_on_line) \n    {\n        print join(', ', @all_on_line), \"\\n\";\n    }\n}\n</code></pre>\n\n<p>I assumed that <code>Important</code> is at the beginning of the wanted line. Adjust as needed. Since it is likely that more is done with data (than just print it) the <code>if</code> condition checks whether that line actually had the pattern.</p>\n\n<p>Packing this into a single regex is quite a bit more involved.</p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1480488062, "creation_date": 1480488062, "answer_id": 40881880, "question_id": 40880882, "link": "https://stackoverflow.com/questions/40880882/how-to-match-multiple-groups-on-a-specific-line-in-perl-but-not-other-lines/40881880#40881880", "title": "How to match multiple groups on a specific line in Perl, but not other lines?", "body": "<p>This is also helpful with mapping function:</p>\n\n<pre><code>my @nwlines = map{ $_=~m/^Important(.+?(?=\\!special).+?)$/mi } @lines;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1480632557, "last_edit_date": 1480632557, "creation_date": 1480511610, "answer_id": 40889327, "question_id": 40880882, "link": "https://stackoverflow.com/questions/40880882/how-to-match-multiple-groups-on-a-specific-line-in-perl-but-not-other-lines/40889327#40889327", "title": "How to match multiple groups on a specific line in Perl, but not other lines?", "body": "<p>You can do this in two steps. First isolate the <em>Important</em> line from the string, and then search for the <em>special</em> substrings</p>\n\n<p>Here's an example. It uses <code>for</code> as a <em>topicaliser</em>, and is essentially doing <code>($_) = $test =~ /^(.*Important.*)$/m</code>  for every occurrence of <code>Important</code></p>\n\n<p><em>Note that this code will report the data from the</em> <strong>last</strong> <em>line containing</em> <code>Important</code> <em>if there is more than one</em></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $test = &lt;&lt;END;\nUnimportant line.\nImportant line with !special1! word and !special2! word. \nExtra line with !special3! word and !special4! word.\nEND\n\nmy @both;\n@both = /!([^!]+)!/g for $test =~ /^(.*Important.*)$/m;\n\nprint join(', ', @both), \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>special1, special2\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7228897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a19d36771132f2c0a0ffc05758f5e0?s=128&d=identicon&r=PG&f=1", "display_name": "KVon", "link": "https://stackoverflow.com/users/7228897/kvon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 40889327, "answer_count": 3, "score": 1, "last_activity_date": 1480643264, "creation_date": 1480483318, "question_id": 40880882, "link": "https://stackoverflow.com/questions/40880882/how-to-match-multiple-groups-on-a-specific-line-in-perl-but-not-other-lines", "title": "How to match multiple groups on a specific line in Perl, but not other lines?", "body": "<p>I understand the /g flag and I'm able to match a pattern multiple times, but I'm having a difficult time researching this particular question.</p>\n\n<p>Say my string has multiple lines and I want to match a grouped pattern on a line that contains a specific word, but not on a different line that doesn't. </p>\n\n<p>For an example string <code>$test</code> with multiple lines</p>\n\n<pre><code>Unimportant line.\nImportant line with !special1! word and !special2! word. \nExtra line with !special3! word and !special4! word.\n</code></pre>\n\n<p>I want to print the two specials on the important line but not the extra line, so the result would be:</p>\n\n<pre><code>special1, special2  \n</code></pre>\n\n<p>I can match <em>every</em> special using /g</p>\n\n<pre><code>my @both = $test =~ /!(.+?)!/g;\nprint join(', ', @both);\n</code></pre>\n\n<p>But the output is:</p>\n\n<pre><code>special1, special2, special3, special4\n</code></pre>\n\n<p>If I try to include the word 'Important'</p>\n\n<pre><code>my @both = $test =~ /Important.+?!(.+?)!/g;\nprint join(', ', @both);\n</code></pre>\n\n<p>I just get</p>\n\n<pre><code>special1\n</code></pre>\n\n<p>I understand it only matches once because 'Important' only occurs once, but I can't figure out  how to get the output</p>\n\n<pre><code>special1, special2\n</code></pre>\n"}, {"tags": ["perl", "pointers", "hash", "reference", "hashtable"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1480460109, "post_id": 40877199, "comment_id": 68969674, "body": "if this code is within a loop (<code>while()</code>, <code>for()</code> etc), then yes, it&#39;s a different value on each iteration. To be more specific, you declare it as a scalar value lexicalized inside of <code>else</code> as a simple scalar, then immediately turn it into a hash reference, to which you set three keys, each with a value. So after the loop, if you iterate over the <code>$die_loc{$pattern}</code> array reference, each element will have a hash reference with its own <code>site</code>, <code>x</code> and <code>y</code> keys, with their own values"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480460161, "post_id": 40877199, "comment_id": 68969699, "body": "What iteration? All I see in the code you&#39;ve posted is an <code>else</code> branch by itself."}, {"owner": {"reputation": 57, "user_id": 4736434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c6b8c2e36b5c0839272b6431cafd5?s=128&d=identicon&r=PG&f=1", "display_name": "sikquiver", "link": "https://stackoverflow.com/users/4736434/sikquiver"}, "edited": false, "score": 0, "creation_date": 1480708111, "post_id": 40877199, "comment_id": 69091149, "body": "yes this is inside of a while loop to read a file. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1572595873, "last_edit_date": 1572595873, "creation_date": 1480460129, "answer_id": 40877297, "question_id": 40877199, "link": "https://stackoverflow.com/questions/40877199/understanding-perl-pointers-to-hashes-in-my-script/40877297#40877297", "title": "Understanding Perl pointers to hashes in my script", "body": "<p>I take it that this is all in a loop where <code>$_</code> is assigned every time through.</p>\n\n<p>You <em>declare</em> <code>my $p</code> every time so each gets its own memory location once it is assigned to. At that point it is <em>autovivified</em> into a hash reference, since that's how it is assigned. That reference is copied onto the array, so you will have them all.  You can get the memory address of a reference using <code>refaddr</code> from the core module <a href=\"http://perldoc.perl.org/Scalar/Util.html\" rel=\"nofollow noreferrer\">Scalar::Util</a>. Or, for that matter, just print <code>$p</code>.</p>\n\n<p>What you have can be written as</p>\n\n<pre><code>my $p = { site =&gt; $site, x =&gt; $x, y =&gt; $y };\n\npush @{$die_loc{$pattern}}}, $p;\n</code></pre>\n\n<p>So after all is said and done, the hash <code>%die_loc</code> will under key <code>$pattern</code> have an array reference, which has for elements the hash references with keys <code>site</code>, <code>x</code>, and <code>y</code>.</p>\n\n<pre><code>use feature 'say';\n\nforeach my $hr (@{$die_loc{$pattern}}) {\n    say \"site: $hr-&gt;{site}, x: $hr-&gt;{x}, y: $hr-&gt;{y}\"\n}\n</code></pre>\n\n<p>This prints a line for each (presumed) iteration that you processed. But generally you don't want to type key names but rather use <code>keys</code> to print a hash, for example</p>\n\n<pre><code>foreach my $hr (@{$die_loc{$pattern}}) {\n    say join ', ', map { \"$_: $hr-&gt;{$_}\" } sort keys %$hr;\n}\n</code></pre>\n\n<p>where keys are also sorted for consistent prints. Or use a module, like <code>Data::Dump</code>.</p>\n\n<p>Note that references are a little different from pointers.  </p>\n\n<p>There is only a code fragment posted so let me also say that you want  to <em>always</em> start with</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1480512117, "creation_date": 1480512117, "answer_id": 40889534, "question_id": 40877199, "link": "https://stackoverflow.com/questions/40877199/understanding-perl-pointers-to-hashes-in-my-script/40889534#40889534", "title": "Understanding Perl pointers to hashes in my script", "body": "<p>That code is much better written like this</p>\n\n<pre><code>else {\n    my ( $site, $x, $y ) = split /,/;\n\n    my %p = (\n        site =&gt; $site,\n        x    =&gt; $x,\n        y    =&gt; $y,\n    );\n\n    push @{ $die_loc{$pattern} }, \\%p;\n}\n</code></pre>\n\n<p>or, perhaps better still</p>\n\n<pre><code>else {\n    my %p;\n\n    @p{qw/ site x y /} = split /,/;\n\n    push @{ $die_loc{$pattern} }, \\%p;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4736434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c6b8c2e36b5c0839272b6431cafd5?s=128&d=identicon&r=PG&f=1", "display_name": "sikquiver", "link": "https://stackoverflow.com/users/4736434/sikquiver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 40877297, "answer_count": 2, "score": 2, "last_activity_date": 1572595998, "creation_date": 1480459597, "last_edit_date": 1572595998, "question_id": 40877199, "link": "https://stackoverflow.com/questions/40877199/understanding-perl-pointers-to-hashes-in-my-script", "title": "Understanding Perl pointers to hashes in my script", "body": "<p>So I know how the split is working, my question is how the pointer $p is working here. Does it have a different value for each iteration, and the value gets pushed on to the hash as an array? Is that how it will keep those values together when I need to extract them? I have over 100 lines of values I need to reference back to and I'm not sure how it will do that if $p is not changing with each iteration. Thanks!</p>\n\n<pre><code>else{\n  my($site,$x,$y) = split /,/, $_; \n  my $p;\n  $p-&gt;{site} = $site; \n  $p-&gt;{x} = $x; \n  $p-&gt;{y} = $y; \n  push @{$die_loc{$pattern}}, $p;\n}\n</code></pre>\n"}, {"tags": ["perl", "stripe-payments"], "comments": [{"owner": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "edited": false, "score": 0, "creation_date": 1480458822, "post_id": 40876471, "comment_id": 68969107, "body": "Is the token an object or does it contain an id?  Ultimately, to make a charge, you only care about the id (eg. <code>tok_xxx</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1480459498, "creation_date": 1480459498, "answer_id": 40877171, "question_id": 40876471, "link": "https://stackoverflow.com/questions/40876471/invalid-string-using-netstripe/40877171#40877171", "title": "&quot;Invalid String&quot; Using Net::Stripe", "body": "<p>The documentation for the Stripe API call <a href=\"https://stripe.com/docs/api#create_card_token\" rel=\"nofollow noreferrer\">Create a card token</a> (which is wrapped by <code>post_token</code>) says that the following fields are <em>required</em></p>\n\n<pre><code>exp_month\nexp_year\nnumber\ncurrency\ncvc\n</code></pre>\n\n<p>But you are supplying only four of those</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "is_accepted": false, "score": 0, "last_activity_date": 1480526771, "last_edit_date": 1480526771, "creation_date": 1480526454, "answer_id": 40894440, "question_id": 40876471, "link": "https://stackoverflow.com/questions/40876471/invalid-string-using-netstripe/40894440#40894440", "title": "&quot;Invalid String&quot; Using Net::Stripe", "body": "<p>Thanks to korben I successfully modified my code to work by using just the returned token id:</p>\n\n<pre><code>    $API_KEY = 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXX';\n\nmy $stripe = Net::Stripe-&gt;new(\n    api_key       =&gt; $API_KEY,\n    debug         =&gt; '1',\n    debug_network =&gt; '1'\n);\n\nmy $card_token = $stripe-&gt;post_token(\n    card =&gt; {\n        number    =&gt; $FORM{'Credit Card #'},\n        exp_month =&gt; $FORM{'Expiration Month'},\n        exp_year  =&gt; $FORM{'Expiration Year'},\n        cvc       =&gt; $FORM{'Credit Card Security Code'},\n        name      =&gt; $FORM{'Name on Card'},\n    }\n);\nprint Dumper($card_token);\n\n$token_id =  $card_token-&gt;{id};\n\ntry {\n    my $charge = $stripe-&gt;post_charge(\n         amount      =&gt; $amount_of_charge_in_cents,\n         currency    =&gt; 'usd',\n         card    =&gt; $token_id,\n         description =&gt; 'ABC Charge'\n    );\n} catch {\n    warn \"caught error: $_\"; # not $@\n}\n</code></pre>\n\n<p>I also removed the \"customer\" value, as that is the ID of an existing customer, and added \"name\" to the card token code.</p>\n"}], "owner": {"reputation": 29, "user_id": 6227090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3abda3ee0a742f866ddabee6161773?s=128&d=identicon&r=PG&f=1", "display_name": "Diane", "link": "https://stackoverflow.com/users/6227090/diane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480526771, "creation_date": 1480456494, "last_edit_date": 1480458923, "question_id": 40876471, "link": "https://stackoverflow.com/questions/40876471/invalid-string-using-netstripe", "title": "&quot;Invalid String&quot; Using Net::Stripe", "body": "<p>I am trying to set up a Perl script that will process credit card charges through <em>Stripe</em> using <a href=\"https://metacpan.org/pod/Net::Stripe\" rel=\"nofollow noreferrer\"><code>Net::Stripe</code></a>.</p>\n\n<p>I am able to successfully request a token, but when I use that token to post the charge, I get this error: </p>\n\n<blockquote>\n  <p>Error: invalid_request_error - Invalid string: {\"exp_month\"=>\"12\", \"exp_year\"=>\"2021\", \"object\"=>\"card\"} at Stripe.pm line 637</p>\n</blockquote>\n\n<p>Here is my code</p>\n\n<pre><code>$API_KEY = 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXX';\n\nmy $stripe = Net::Stripe-&gt;new(\n    api_key       =&gt; $API_KEY,\n    debug         =&gt; '1',\n    debug_network =&gt; '1'\n);\n\nmy $card_token = $stripe-&gt;post_token(\n    card =&gt; {\n        number    =&gt; $FORM{'Credit Card #'},\n        exp_month =&gt; $FORM{'Expiration Month'},\n        exp_year  =&gt; $FORM{'Expiration Year'},\n        cvc       =&gt; $FORM{'Credit Card Security Code'}\n    }\n);\n\nprint Dumper( $card_token );\n\ntry {\n    my $charge = $stripe-&gt;post_charge(\n        amount      =&gt; $amount_of_charge_in_cents,\n        currency    =&gt; 'usd',\n        card        =&gt; $card_token,\n        description =&gt; 'ABC Charge',\n        customer    =&gt; $FORM{'Name'}\n    );\n}\ncatch {\n    warn \"caught error: $_\";    # not $@\n}\n</code></pre>\n\n<p>Should I be using something other than <code>$card_token</code> as the card value?</p>\n"}, {"tags": ["jquery", "json", "ajax", "perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6847108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98dcfff92fae31f67d697b34d216515?s=128&d=identicon&r=PG&f=1", "display_name": "pvarney", "link": "https://stackoverflow.com/users/6847108/pvarney"}, "edited": false, "score": 0, "creation_date": 1480533907, "post_id": 40894621, "comment_id": 69006937, "body": "Nice! I had been searching for a way to traverse the data structure and search for a tag. I didn&#39;t realize the JSON module had this filter functionality. It works great. Thank you."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1480527031, "creation_date": 1480527031, "answer_id": 40894621, "question_id": 40873225, "link": "https://stackoverflow.com/questions/40873225/perl-how-to-include-scalar-reference-for-dbixclass-query-information-passed-w/40894621#40894621", "title": "Perl: How to include scalar reference for DBIx::Class query information passed with ajax/json", "body": "<p>The problem is that JSON doesn't have anything that maps cleanly to a reference type because it's just data. However, I think you're on the right track with pre-processing the incoming data and converting literal SQL to the references that DBIC expects. On the sending side, you could add a <code>literal_sql</code> flag to the objects that need special handling, and then you could use <a href=\"https://metacpan.org/pod/JSON#filter_json_object\" rel=\"nofollow noreferrer\"><code>filter_json_object</code></a> to find those keys, delete them, and create scalar string references. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\nuse JSON;\n\nmy $json = &lt;&lt;'EOF';\n{\n    \"table\": \"Processes\",\n    \"search\": {\n        \"query_server\": \"SERVER1\",\n        \"query_time\": {\n            \"&gt;=\": \"now() - INTERVAL 1 DAY\",\n            \"literal_sql\": true\n        }\n    },\n    \"attrib\": {\n        \"select\": [\n            \"query_time\", {\n                \"avg\": \"bytes_processed\"\n            }\n        ],\n        \"order_by\": \"query_time\",\n        \"group_by\": \"query_time\"\n    }\n}\nEOF\n\nmy $query = JSON\n    -&gt;new\n    -&gt;filter_json_object (sub {\n        my $obj = shift;\n        return unless $obj-&gt;{literal_sql};\n        delete($obj-&gt;{literal_sql});\n\n        my ($key, $val) = each(%$obj);\n        $obj-&gt;{$key} = \\\"$val\";\n        return $obj;\n    })\n    -&gt;decode($json);\n\ndd($query);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  attrib =&gt; {\n              group_by =&gt; \"query_time\",\n              order_by =&gt; \"query_time\",\n              select   =&gt; [\"query_time\", { avg =&gt; \"bytes_processed\" }],\n            },\n  search =&gt; {\n              query_server =&gt; \"SERVER1\",\n              query_time   =&gt; { \"&gt;=\" =&gt; \\\"now() - INTERVAL 1 DAY\" },\n            },\n  table  =&gt; \"Processes\",\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6847108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98dcfff92fae31f67d697b34d216515?s=128&d=identicon&r=PG&f=1", "display_name": "pvarney", "link": "https://stackoverflow.com/users/6847108/pvarney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 40894621, "answer_count": 1, "score": 3, "last_activity_date": 1480527031, "creation_date": 1480444393, "last_edit_date": 1480455971, "question_id": 40873225, "link": "https://stackoverflow.com/questions/40873225/perl-how-to-include-scalar-reference-for-dbixclass-query-information-passed-w", "title": "Perl: How to include scalar reference for DBIx::Class query information passed with ajax/json", "body": "<p>I have a query I'm trying to pass from jquery/ajax/json to a perl script that will execute using DBIx::Class and return the results. I can get a basic query to work just fine, but am running into trouble when I have to include a scalar reference. My grasp on all the concepts around what I'm doing here is a little loose, so please forgive any inaccuracies.</p>\n\n<p>Here is where I define the query parameters to pass to the perl script:</p>\n\n<pre><code>var jsonData = $.ajax({\n  url: 'cgi-bin/getdata.cgi',\n  data: JSON.stringify({\n    table: 'Processes',\n    search: {\n      query_server:'SERVER1',\n      query_time: {\n        '&gt;=':'now() - INTERVAL 1 DAY'\n      }\n    },\n    attrib: {\n      select: [\n        'query_time',\n        {avg:'bytes_processed'}\n      ],\n      order_by: 'query_time',\n      group_by: 'query_time'\n    }\n  }),\n  contentType: \"application/json\",\n  dataType: 'json',\n  method: 'POST',\n  async: false\n}).responseText;\n</code></pre>\n\n<p>Here is the part of the perl script that reads standard in, converts from json and runs the query:</p>\n\n<pre><code>while ( &lt;STDIN&gt; )\n{\n  $json .= $_;\n}\n\nmy $query = from_json($json);\n\nmy $table = $query-&gt;{'table'};\nmy $search = $query-&gt;{'search'};\nmy $attrib= $query-&gt;{'attrib'};\n\nprint \"Table:\\n\" . Dumper($table) . \"\\n\";\nprint \"Search:\\n\" . Dumper($search) . \"\\n\";\nprint \"Attrib:\\n\" . Dumper($attrib) . \"\\n\";\n\nmy $retSet = $schema-&gt;resultset($table)-&gt;search( $search, $attrib );\nmy $retRow = $retSet-&gt;next;\n</code></pre>\n\n<p>And here is the output I get (with DBIC_TRACE enabled):</p>\n\n<pre><code>Table:\n$VAR1 = 'Processes';\n\nSearch:\n$VAR1 = {\n          'query_time' =&gt; {\n                            '&gt;=' =&gt; 'now() - INTERVAL 1 DAY'\n                          },\n          'query_server' =&gt; 'SERVER1'\n        };\n\nAttrib:\n$VAR1 = {\n          'order_by' =&gt; 'query_time',\n          'group_by' =&gt; 'query_time',\n          'select' =&gt; [\n                        'query_time',\n                        {\n                          'avg' =&gt; 'bytes_processed'\n                        }\n                      ]\n        };\n\nSELECT me.query_time, AVG( bytes_processed ) FROM processes me WHERE ( ( query_server = ? AND query_time &gt;= ? ) ) GROUP BY query_time ORDER BY query_time: 'TSMCORP6', 'now() - INTERVAL 1 DAY'\n</code></pre>\n\n<p>The problem is that the <code>'now() - INTERVAL 1 DAY'</code> value needs to be a scalar reference in order to execute the query properly. If I build the query within the perl script (instead of passing from from the html file) like so:</p>\n\n<pre><code>my $search = {\n  query_server =&gt; 'SERVER1',\n  query_time   =&gt; {\n    '&gt;=' =&gt; \\'now() - INTERVAL 1 DAY'\n  }\n};\n</code></pre>\n\n<p>then search data looks like this and executes the way I want it to:</p>\n\n<pre><code>Search:\n$VAR1 = {\n          'query_time' =&gt; {\n                            '&gt;=' =&gt; \\'now() - INTERVAL 1 DAY'\n                          },\n          'query_server' =&gt; 'SERVER1'\n        };\n...\nSELECT me.query_time, AVG( bytes_processed ) FROM processes me WHERE ( ( query_server = ? AND query_time &gt;= now() - INTERVAL 1 DAY ) ) GROUP BY query_time ORDER BY query_time: 'TSMCORP6'\n</code></pre>\n\n<p>Based on my understanding, I don't think passing the value as a reference makes any sense, so I'm trying to understand how to \"convert\" it once it's in the perl script. I've tried throwing in the backslash before it gets processed by <code>from_json</code>, but that did not work. Much thanks for any help!</p>\n\n<p>Update: I was able to turn the value into a reference with the following code. However, this worked because I knew what value needed to be converted to a reference. Under normal circumstances, the value could be anywhere in the data structure. Could I flag the value with something like <code>!ref!</code> then search the entire data structure and convert each one I find? How would that look?</p>\n\n<pre><code>my $cond = $query-&gt;{'search'}-&gt;{'query_time'}-&gt;{'&gt;='};\n$query-&gt;{'search'}-&gt;{'query_time'}-&gt;{'&gt;='}=\\$cond;\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480443219, "post_id": 40872645, "comment_id": 68960898, "body": "The min of one value (<code>min $entity{&#39;wizard&#39;}{$wizard_id}{snaffle}{$snaffle_id}{distance&zwnj;&#8203;}</code>) is that value (<code>$entity{&#39;wizard&#39;}{$wizard_id}{snaffle}{$snaffle_id}{distanc&zwnj;&#8203;e}</code>)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480443342, "post_id": 40872645, "comment_id": 68960968, "body": "These are your distances <code>my @dist = map { $_-&gt;{distance} } (values %{$entity-&gt;{0}{snaffle}});</code>  However, <code>List::Util::min</code> won&#39;t say what key the minimum belongs to."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1480443348, "post_id": 40872645, "comment_id": 68960972, "body": "Re &quot;<i>the smallest distance to a &quot;snaffle&quot;</i>&quot;, What does this mean?? i&#39;m trying to figure it out from your code, but your code appears to expect a completely different data structure than the one you posted!"}, {"owner": {"reputation": 37, "user_id": 6145532, "user_type": "registered", "profile_image": "https://graph.facebook.com/518518511668646/picture?type=large", "display_name": "m1ndgames", "link": "https://stackoverflow.com/users/6145532/m1ndgames"}, "edited": false, "score": 0, "creation_date": 1480443719, "post_id": 40872645, "comment_id": 68961186, "body": "Thanks for your input, i added more code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1480444236, "post_id": 40872645, "comment_id": 68961474, "body": "Pilling on code that doesn&#39;t relate to the data structure you posted is not useful."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1480458410, "last_edit_date": 1480458410, "creation_date": 1480443880, "answer_id": 40873077, "question_id": 40872645, "link": "https://stackoverflow.com/questions/40872645/perl-get-minimum-distance-value-from-multi-hash-using-listutil/40873077#40873077", "title": "Perl: Get minimum distance value from multi hash using List::Util", "body": "<p>Given the shown data, this is the list of all values for key <code>distance</code></p>\n\n<pre><code>my @dist = map { $_-&gt;{distance} } values %{$entity-&gt;{0}{snaffle}};\n</code></pre>\n\n<p>However, getting the minimum value doesn't reveal its key. </p>\n\n<p>One way of finding the key for which the value of <code>distance</code> is smallest</p>\n\n<pre><code>use List::Util 'reduce';\n\nmy $snaff = $entity-&gt;{0}{snaffle};\n\nmy $min_dist = reduce { \n    $snaff-&gt;{$a}{distance} &lt; $snaff-&gt;{$b}{distance} ? $a : $b \n} keys %$snaff;\n\nprint \"Minimal distance: $snaff-&gt;{$min_dist}{distance} for key $min_dist\\n\";\n</code></pre>\n\n<p>To have more control you can instead iterate over <code>%$snaff</code> using <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\">each</a>.</p>\n\n<p>You can also <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> the extracted <code>$snaff</code> by <code>distance</code> value, if you'd like to have them all.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1480507718, "last_edit_date": 1480507718, "creation_date": 1480447974, "answer_id": 40874306, "question_id": 40872645, "link": "https://stackoverflow.com/questions/40872645/perl-get-minimum-distance-value-from-multi-hash-using-listutil/40874306#40874306", "title": "Perl: Get minimum distance value from multi hash using List::Util", "body": "<p>You should first extract the reference to the <code>snaffle</code> hash to make things tidier. Then you can just use <code>map</code> to extract the <code>distance</code> field of each hash element and <code>min</code> to find the smallest of them.</p>\n\n<p>If you want to know the <em>snaffle with the smallest distance</em> then\nI suggest that you install <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow\"><code>List::UtilsBy</code></a> and use its <code>min_by</code> operator</p>\n\n<p>This code shows both operations</p>\n\n<p><em>The hash is identical to your own, but expressed more compactly using <code>Data::Dump</code> instead</em></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse List::Util 'min';\nuse List::UtilsBy 'min_by';\n\nmy %data = (\n    \"0\" =&gt; {\n        distance2enemybase =&gt; 6755,\n        distance2mybase    =&gt; 10598,\n        id                 =&gt; 0,\n        snaffle            =&gt; {\n            4 =&gt; { distance =&gt; 2125, id =&gt; 4, target =&gt; \"true\", x =&gt; 11331, y =&gt; 5291 },\n            5 =&gt; { distance =&gt; 9734, id =&gt; 5, x      =&gt; 875,    y =&gt; 3856 },\n            6 =&gt; { distance =&gt; 510,  id =&gt; 6, x      =&gt; 10517,  y =&gt; 6741 },\n            7 =&gt; { distance =&gt; 8485, id =&gt; 7, x      =&gt; 4591,   y =&gt; 544 },\n            8 =&gt; { distance =&gt; 2236, id =&gt; 8, x      =&gt; 11709,  y =&gt; 5475 },\n        },\n        state =&gt; 0,\n        type  =&gt; \"WIZARD\",\n        x     =&gt; 10084,\n        y     =&gt; 7012,\n    },\n);\n\nmy $snaffles = $data{0}{snaffle};\n\nmy $min_distance = min map { $snaffles-&gt;{$_}{distance} } keys %$snaffles;\n# OR\nmy $min_distance = min map { $_-&gt;{distance} } values %$snaffles;\n\n\nmy $closest_snaffle = min_by { $snaffles-&gt;{$_}{distance} } keys %$snaffles;\n\nsay \"\\$min_distance = $min_distance\";\nsay \"\\$closest_snaffle = $closest_snaffle\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$min_distance = 510\n$closest_snaffle = 6\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6145532, "user_type": "registered", "profile_image": "https://graph.facebook.com/518518511668646/picture?type=large", "display_name": "m1ndgames", "link": "https://stackoverflow.com/users/6145532/m1ndgames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 40874306, "answer_count": 2, "score": 1, "last_activity_date": 1480507718, "creation_date": 1480442399, "last_edit_date": 1480443688, "question_id": 40872645, "link": "https://stackoverflow.com/questions/40872645/perl-get-minimum-distance-value-from-multi-hash-using-listutil", "title": "Perl: Get minimum distance value from multi hash using List::Util", "body": "<p>i would like to get the smallest distance to a \"snaffle\" from the following hash:</p>\n\n<pre><code>$VAR1 = {\n        '0' =&gt; {\n                 'y' =&gt; '7012',\n                 'snaffle' =&gt; {\n                                '5' =&gt; {\n                                         'y' =&gt; '3856',\n                                         'x' =&gt; '875',\n                                         'id' =&gt; '5',\n                                         'distance' =&gt; 9734\n                                       },\n                                '6' =&gt; {\n                                         'x' =&gt; '10517',\n                                         'id' =&gt; '6',\n                                         'distance' =&gt; 510,\n                                         'y' =&gt; '6741'\n                                       },\n                                '4' =&gt; {\n                                         'y' =&gt; '5291',\n                                         'id' =&gt; '4',\n                                         'x' =&gt; '11331',\n                                         'target' =&gt; 'true',\n                                         'distance' =&gt; 2125\n                                       },\n                                '8' =&gt; {\n                                         'x' =&gt; '11709',\n                                         'id' =&gt; '8',\n                                         'distance' =&gt; 2236,\n                                         'y' =&gt; '5475'\n                                       },\n                                '7' =&gt; {\n                                         'distance' =&gt; 8485,\n                                         'x' =&gt; '4591',\n                                         'id' =&gt; '7',\n                                         'y' =&gt; '544'\n                                       }\n                              },\n                 'x' =&gt; '10084',\n                 'distance2mybase' =&gt; 10598,\n                 'distance2enemybase' =&gt; 6755,\n                 'type' =&gt; 'WIZARD',\n                 'id' =&gt; '0',\n                 'state' =&gt; 0\n               },\n</code></pre>\n\n<p>It is filled early:</p>\n\n<pre><code># game loop\nwhile (1) {\nchomp(my $entities = &lt;STDIN&gt;); # number of entities still in game\nfor my $i (0..$entities-1) {\n    chomp($tokens=&lt;STDIN&gt;);\n    my ($entity_id, $entity_type, $x, $y, $vx, $vy, $state) = split(/ /,$tokens);\n    my $type;\n\n    if ($entity_type eq \"WIZARD\") {\n        $type = \"wizard\";\n    }\n    if ($entity_type eq \"OPPONENT_WIZARD\") {\n        $type = \"enemy\";\n    }\n    if ($entity_type eq \"SNAFFLE\") {\n        $type = \"snaffle\";            \n    }\n    if ($entity_type eq \"BLUDGER\") {\n        $type = \"bludger\";            \n    }\n\n    $entity{$type}{$entity_id}{x} = $x;\n    $entity{$type}{$entity_id}{y} = $y;\n    $entity{$type}{$entity_id}{state} = $state;\n    $entity{$type}{$entity_id}{id} = $entity_id;\n    $entity{$type}{$entity_id}{type} = $entity_type;\n    $entity{$type}{$entity_id}{distance2mybase} = &amp;getdistance($entity{$type}{$entity_id}{x},$entity{$type}{$entity_id}{y},$mybase_x,$mybase_y);\n    $entity{$type}{$entity_id}{distance2enemybase} = &amp;getdistance($entity{$type}{$entity_id}{x},$entity{$type}{$entity_id}{y},$enemybase_x,$enemybase_y);\n}\n\nforeach my $wizard_id (sort keys %{ $entity{'wizard'} }) {\n    foreach my $snaffle_id (sort keys %{ $entity{'snaffle'} }) {\n        $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{id} = $snaffle_id;\n        $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{x} = $entity{'snaffle'}{$snaffle_id}{x};\n        $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{y} = $entity{'snaffle'}{$snaffle_id}{y};\n        $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{distance} = &amp;getdistance($entity{'wizard'}{$wizard_id}{x},$entity{'wizard'}{$wizard_id}{y},$entity{'snaffle'}{$snaffle_id}{x},$entity{'snaffle'}{$snaffle_id}{y});\n    }\n&amp;action($wizard_id,\"sweep\",\"up\");\n}\n</code></pre>\n\n<p>I tried List::Util::min, but i think im searching too deep, because as you can see in the output, it targets the wrong snaffle. (6 distance is lower then 4, which is the current target)</p>\n\n<p>How can i find the overall minimum distance from all snaffles? (in case you wonder, its a codingame(.com))</p>\n\n<pre><code>sub snafflecheck {\nmy $wizard_id = shift;\nmy $wizard_x = shift;\nmy $wizard_y = shift;\nif ($entity{'snaffle'}) {\n    foreach my $snaffle_id (sort keys %{ $entity{'snaffle'} }) {\n        my $snaffle_x = $entity{'snaffle'}{$snaffle_id}{x};\n        my $snaffle_y = $entity{'snaffle'}{$snaffle_id}{y};\n\n        my $distance2snaffle = &amp;getdistance($wizard_x,$wizard_y,$snaffle_x,$snaffle_y);\n        my $nearest = min $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{distance};\n\n\n        if ($distance2snaffle) {\n            if ($distance2snaffle == $nearest) {\n                $entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{target} = \"true\";\n                return(\"true\",$entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{id},$entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{x},$entity{'wizard'}{$wizard_id}{snaffle}{$snaffle_id}{y},$distance2snaffle);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480503840, "post_id": 40871582, "comment_id": 68987283, "body": "Note that the next Perl release (5.26) will likely include <i>indented HERE docs</i>. Here&#39;s <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2016/07/msg237489.html\" rel=\"nofollow noreferrer\">the thread about it on p5p</a> and <a href=\"https://youtu.be/LlhhyeXQgMo?t=44m41s\" rel=\"nofollow noreferrer\">this is the new Pumpkin SawyerX talking about it in a talk at YAPC::EU 2015</a>. (I recommend the full talk, it has newish features as well as planned changes and is well worth the time)."}], "answers": [{"comments": [{"owner": {"reputation": 40194, "user_id": 3829407, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DQPor.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3829407/matt"}, "edited": false, "score": 0, "creation_date": 1480439442, "post_id": 40871721, "comment_id": 68958983, "body": "So it is dependent on the order of binding.... Ok. Thanks. Is there a reference for that order? It makes more sense as well when I just look at it as static text (which is what qq was doing.)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 40194, "user_id": 3829407, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DQPor.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3829407/matt"}, "edited": false, "score": 0, "creation_date": 1480439502, "post_id": 40871721, "comment_id": 68959017, "body": "Yes: <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">Perl operator precedence</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1480439474, "last_edit_date": 1480439474, "creation_date": 1480439336, "answer_id": 40871721, "question_id": 40871582, "link": "https://stackoverflow.com/questions/40871582/when-using-match-operator-on-a-variable-declaration-using-qq-why-do-the-parenth/40871721#40871721", "title": "When using match operator on a variable declaration using qq, why do the parentheses work around the declaration itself?", "body": "<p>Because it's about what you're trying to change.</p>\n\n<p><code>=~</code> is the binding operator, and tells you what to apply the pattern match to. </p>\n\n<pre><code>my $message = \"fish\";\n   $message =~ s/i/a/; \nprint $message\n</code></pre>\n\n<p>Will work, because you're trying to transform <code>$message</code>. This is what's happening in the first example - message is being set <em>first</em>, and then the modification is applied, because of the brackets.</p>\n\n<p>However, <code>=~</code> is tighter binding that <code>=</code>. It happens first. </p>\n\n<p>This precedence is documented in <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"noreferrer\"><code>perldoc perlop</code></a></p>\n\n<p>So in the first example - the assignment happens first because of the brackets, and then transform. Without the brackets, it tries the transform first:</p>\n\n<pre><code>\"fish\" =~ s/i/a/;\n</code></pre>\n\n<p>Which is invalid, because it's not changing a variable at that point, but a static piece of text. </p>\n\n<pre><code>my $result = \"fish\" =~ s/i/a/; #gives same error.\n( my $result = \"fish\" ) =~ s/i/a/; #works.\n</code></pre>\n\n<p>You could do this another way (if your version of perl is new enough) by using the <code>r</code> regex modifier, to return a value:</p>\n\n<pre><code>my $result = \"fish\" =~ s/i/a/r;\n</code></pre>\n\n<p>The <code>r</code> flag stops trying to modify the value, and just 'returns' the result of the operation, which then can be assigned to <code>$result</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40194, "user_id": 3829407, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DQPor.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3829407/matt"}, "edited": false, "score": 0, "creation_date": 1480440614, "post_id": 40871881, "comment_id": 68959635, "body": "For the time being the <code>{8}</code> was updated based on the indentation at the time. Using a &quot;delimiter&#39; moves around easier. Thanks for that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 40194, "user_id": 3829407, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DQPor.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3829407/matt"}, "edited": false, "score": 0, "creation_date": 1480441401, "post_id": 40871881, "comment_id": 68960025, "body": "@Matt, Sorry, it got removed by accident. It has been re-added."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1480442183, "last_edit_date": 1480442183, "creation_date": 1480439884, "answer_id": 40871881, "question_id": 40871582, "link": "https://stackoverflow.com/questions/40871582/when-using-match-operator-on-a-variable-declaration-using-qq-why-do-the-parenth/40871881#40871881", "title": "When using match operator on a variable declaration using qq, why do the parentheses work around the declaration itself?", "body": "<p><code>=~</code> has higher precedence than <code>=</code>, so </p>\n\n<pre><code>my $message = (qq{...}) =~ s/^ {8}//mg;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>my $message = ( (qq{...}) =~ s/^ {8}//mg );\n</code></pre>\n\n<p>This tries to modify the constant returned by <code>qq</code>, which is not allowed.</p>\n\n<hr>\n\n<p>A scalar assignment operator in scalar context returns its left-hand side (as an lvalue)<sup>[1]</sup>. That means </p>\n\n<pre><code>( $message = qq{...} ) =~ s/^ {8}//mg;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>$message = qq{...};\n$message =~ s/^ {8}//mg;\n</code></pre>\n\n<p>Furthermore, <code>my $message</code> returns <code>$message</code> (as an lvalue), so </p>\n\n<pre><code>( my $message = qq{...} ) =~ s/^ {8}//mg;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>my $message;\n$message = qq{...};\n$message =~ s/^ {8}//mg;\n</code></pre>\n\n<p>This is why the original solution worked.</p>\n\n<hr>\n\n<p>Note that indenting changes will break your code, so your technique is fragile. Consider using the following instead:</p>\n\n<pre><code>if ($send) {\n    (my $message = qq{\n        !Dear $name,\n        !\n        !this is a message I plan to send to you.\n        !\n        !regards\n        !  the Perl Maven\n    }) =~ s/^[^\\S\\n]+[!\\n]?//mg;\n    print $message;\n}\n</code></pre>\n\n<p>The above also remove the undesired blank leading line.</p>\n\n<hr>\n\n<p>Finally, note that <code>r</code> modifier introduced in 5.14.</p>\n\n<pre><code>if ($send) {\n    my $message = qq{\n        !Dear $name,\n        !\n        !this is a message I plan to send to you.\n        !\n        !regards\n        !  the Perl Maven\n    } =~ s/^[^\\S\\n]+[!\\n]?//mgr;\n    print $message;\n}\n</code></pre>\n\n<hr>\n\n<ol>\n<li>See <a href=\"http://www.perlmonks.org/?node_id=790129\" rel=\"nofollow noreferrer\">Mini-Tutorial: Scalar vs List Assignment Operator</a> for more on what the assignment operator returns.</li>\n</ol>\n"}], "owner": {"reputation": 40194, "user_id": 3829407, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DQPor.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/3829407/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 40871721, "answer_count": 2, "score": 1, "last_activity_date": 1480442183, "creation_date": 1480438956, "question_id": 40871582, "link": "https://stackoverflow.com/questions/40871582/when-using-match-operator-on-a-variable-declaration-using-qq-why-do-the-parenth", "title": "When using match operator on a variable declaration using qq, why do the parentheses work around the declaration itself?", "body": "<p>I know the title is a mouthful but I wasn't sure how to make it more succinct.</p>\n\n<p>Reading up on multiline strings in Perl I came across this post at <a href=\"https://perlmaven.com/here-documents\" rel=\"nofollow noreferrer\">PerlMaven about here-documents</a>. It talks about here-documents, <code>qq</code> and <code>q</code>. In all cases leading whitespace, like that used for code indentation, is retained. I understand that. The way this is mitigated in the example show is using a regex replacement to remove the leading spaces.</p>\n\n<blockquote>\n<pre><code>if ($send) {\n    (my $message = qq{\n        Dear $name,\n\n        this is a message I plan to send to you.\n\n        regards\n          the Perl Maven\n        }) =~ s/^ {8}//mg;\n    print $message;\n}\n</code></pre>\n</blockquote>\n\n<p>When I was trying to adopt this style I wrote it like this (accidentally) instead:</p>\n\n<pre><code>if ($send) {\n    my $message = (qq{\n        Dear $name,\n          words and stuff\n        }) =~ s/^ {8}//mg;\n    print $message;\n}\n</code></pre>\n\n<p>Perl is not a strong language for me. The <em>incorrect</em> syntax I tried above seemed natural to me though. Since I am using the match operator incorrectly I obviously get the error:</p>\n\n<blockquote>\n  <p>Can't modify string in substitution (s///) at nagios_send_html_service_mail.pl line 91, near \"s/^ {8}//mg;\"</p>\n</blockquote>\n\n<p>In the working example <em>why</em> does the <code>$message</code> actual contain the changes? I seems like something you are allowed to do when you declare variables but I just wanted to know what it was called.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480435089, "post_id": 40870158, "comment_id": 68956024, "body": "<code>glob ( &quot;&#47;data&#47;test_all_runs&#47;*&#47;*bcmatrix.xls&quot;)</code>?"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1480436522, "post_id": 40870158, "comment_id": 68957049, "body": "Do you really need a script for this when <code>grep</code> will do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480440947, "post_id": 40870158, "comment_id": 68959805, "body": "What are you actually trying to do? Your code defines glob patterns <code>$matrix_excel</code> and <code>$summary_excel</code>, and then checks for files matching <code>$summary_excel</code> (unless a file with a name <i>equal to</i> the pattern exists, for some reason). But then you ask about <code>*bcmatrix.xls</code> in your text. Which one are you looking for? Are you looking for a <i>pair</i> that matches both glob patterns with the same prefix? How do you expect to find files matching <code>$matrix_excel</code> if you never use that pattern? Don&#39;t you want a <i>list</i> of all matching files, rather than just a yes/no to say that they exist?"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1480442250, "post_id": 40870158, "comment_id": 68960426, "body": "I&#39;m looking for both $matrix_excel and $summary_excel but only included one of them in the code example. <code>*bcmtrix.xls</code> is looking for the $matrix_excel. I only want to find out if $matrix_excel and $summary_excel exist in each folder. If not the user needs to upload the files. and rerun the program. Thx"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480520817, "post_id": 40870158, "comment_id": 68998893, "body": "Please explain more precisely. It sounds like you&#39;re looking for exactly one <code>*bcmatrix.xls</code> and one <code>*bc_summary.xls</code> in every subdirectory of <code>&#47;data&#47;test_all_runs</code>, and those two files must have identical prefixes. Anything else is an error, right?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1480445689, "post_id": 40870676, "comment_id": 68962363, "body": "I don&#39;t see it as an overkill -- it also gives them full control over the process (along with the solution)."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1480436329, "creation_date": 1480436329, "answer_id": 40870676, "question_id": 40870158, "link": "https://stackoverflow.com/questions/40870158/perl-check-if-filename-matching-a-pattern-exists-recursively/40870676#40870676", "title": "Perl check if filename matching a pattern exists recursively", "body": "<p>This may be a bit overkill, but it seems to do what you need. I use <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> to fetch all of the directories in the directory structure, then use <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a> to get the list of file names that match the pattern:</p>\n\n<p>Given this directory structure:</p>\n\n<pre><code>orig\n  |-a\n    |-a.txt\n  |-b\n    |-ba.txt\n  |-c\n</code></pre>\n\n<p>With this code:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse File::Basename;\nuse File::Find::Rule;\n\nmy $dir = 'orig';\nmy $file = 'a.txt';\n\nmy @dirs = File::Find::Rule-&gt;directory\n                           -&gt;in($dir);\n\nfor (@dirs){\n    next if /(?:\\.|\\.\\.)/;\n\n    if (my @files = glob \"$_/*$file\"){\n        for my $path (@files){\n            my $name = basename $path;\n            print \"file $name exists in $_\\n\";\n        }\n    }\n    else {\n        print \"file not found in directory $_\\n\";\n    }\n}\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>file not found in directory orig\nfile ba.txt exists in orig/b\nfile not found in directory orig/c\nfile a.txt exists in orig/a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1480518394, "post_id": 40875808, "comment_id": 68997135, "body": "because the hash contains an array of values for each key it is more difficult to check if each file type exists once I fill the hash."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1480453841, "creation_date": 1480453841, "answer_id": 40875808, "question_id": 40870158, "link": "https://stackoverflow.com/questions/40870158/perl-check-if-filename-matching-a-pattern-exists-recursively/40875808#40875808", "title": "Perl check if filename matching a pattern exists recursively", "body": "<p>I suggest that you use something like this. It will build a hash of arrays that lists all the files in each subdirectory of <code>/data/test_all_runs</code> that look like either <code>*bcmatrix.xls</code> or <code>*bc_summary.xls</code></p>\n\n<p>You should be able to do what you want with the result</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Spec::Functions 'splitdir';\n\nmy %files;\n\nfor my $path ( glob '/data/test_all_runs/*/*{bcmatrix,bc_summary}.xls' ) {\n\n    my ($subdir, $file) = (splitdir $path)[-2, -1];\n\n    push @{ $files{$subdir} }, $file;\n}\n\nuse Data::Dumper;\nprint Dumper \\%files;\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "accepted_answer_id": 40875808, "answer_count": 2, "score": -1, "last_activity_date": 1542858705, "creation_date": 1480434871, "last_edit_date": 1542858705, "question_id": 40870158, "link": "https://stackoverflow.com/questions/40870158/perl-check-if-filename-matching-a-pattern-exists-recursively", "title": "Perl check if filename matching a pattern exists recursively", "body": "<p>I'm looping through folders in a directory and need to check if a file that matches a pattern exists in each directory. I've used glob but it seems to work for the the first folder only. I get file not found for the second folder even I know that it's there.<br>\nHere is my code:</p>\n\n<pre><code>my @dirs = grep { -d } glob '/data/test_all_runs/*';\n\nfor my $dir ( @dirs ) {\n\n    print \"the directory is $dir\\n\";\n    my $run_folder = (split '/', $dir)[3];\n    print \"the folder is $run_folder\\n\";\n\n    my $matrix_excel =  $dir.\"/*bcmatrix.xls\";\n    my $summary_excel = $dir.\"/*bc_summary.xls\";\n\n    unless (-e $summary_excel) {\n   if (glob($summary_excel)) {\n             At least one file matches \"*.file\"\n            }\n            else\n            {\n        print \"File Doesn't Exist!\";\n        print STDERR \"|=============================================|\\n\";\n        print STDERR \"|                                             |\\n\";\n        print STDERR \"|       Can't find Summary .xls File!!!       |\\n\";\n        print STDERR \"|                                             |\\n\";\n        print STDERR \"|   Upload the file and rerun the program.    |\\n\";\n        print STDERR \"|                                             |\\n\";\n        print STDERR \"|=============================================|\\n\";\n\n                die;\n    }\n  }  \n</code></pre>\n\n<p>Is there another method to check if <code>*bcmatrix.xls</code> file exists in each folder of <code>/data/test_all_runs/*</code>?</p>\n"}, {"tags": ["perl", "libssh2", "perlnetssh"], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480517725, "creation_date": 1480432278, "last_edit_date": 1480517725, "question_id": 40869275, "link": "https://stackoverflow.com/questions/40869275/how-could-be-deprecated-netssh-poll-avoided", "title": "How could be deprecated Net::SSH-&gt;poll avoided", "body": "<p><a href=\"https://metacpan.org/pod/Net::SSH2#poll-timeout-arrayref-of-hashes\" rel=\"nofollow noreferrer\">Net::SSH2->poll</a> doc:</p>\n\n<blockquote>\n  <p>Deprecated: the poll functionality in libssh2 is deprecated and its usage disregarded. Session methods \"sock\" and \"block_directions\" can be used instead to integrate Net::SSH2 inside an external event loop.</p>\n</blockquote>\n\n<p>Can someone provide an example how \"sock\" and \"block_directions\" could be used instead of deprecated poll function?</p>\n"}, {"tags": ["perl", "makefile", "module", "installation", "cpan"], "comments": [{"owner": {"reputation": 607, "user_id": 6712483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/014a02423bc67af28dfa8ef3d33d6029?s=128&d=identicon&r=PG", "display_name": "Sunny Pun", "link": "https://stackoverflow.com/users/6712483/sunny-pun"}, "edited": false, "score": 0, "creation_date": 1480433539, "post_id": 40868859, "comment_id": 68954875, "body": "Do you have a file named <code>cpanfile</code>? Try adding the dependency there and run <code>carton install</code>"}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "reply_to_user": {"reputation": 607, "user_id": 6712483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/014a02423bc67af28dfa8ef3d33d6029?s=128&d=identicon&r=PG", "display_name": "Sunny Pun", "link": "https://stackoverflow.com/users/6712483/sunny-pun"}, "edited": false, "score": 0, "creation_date": 1480442024, "post_id": 40868859, "comment_id": 68960320, "body": "Where is file clanfile located? I tried run &quot;cpan carton&quot; but it doesnt help. Sorry im newbie"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480445179, "post_id": 40868859, "comment_id": 68962070, "body": "Note: <i><code>Skip ..&#47;blib&#47;lib&#47;Coro&#47;Channel.pm (unchanged)</code></i> seems to imply you are working from a &quot;dirty&quot; directory. This can hide information. Set <code>build_dir_reuse</code> back to default (<code>printf &#39;o conf build_dir_reuse 0\\no conf commit\\n&#39; | cpan</code>)."}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1480446854, "post_id": 40868859, "comment_id": 68963014, "body": "another log: <a href=\"http://pastebin.com/zREv1zZH\" rel=\"nofollow noreferrer\">pastebin.com/zREv1zZH</a>"}], "answers": [{"comments": [{"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1480445576, "post_id": 40873398, "comment_id": 68962294, "body": "So have to I downgrade perl version?"}, {"owner": {"reputation": 441, "user_id": 3718294, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40bec26b5a8c26fb7d14b76272977459?s=128&d=identicon&r=PG&f=1", "display_name": "postoronnim", "link": "https://stackoverflow.com/users/3718294/postoronnim"}, "edited": false, "score": 0, "creation_date": 1480446734, "post_id": 40873398, "comment_id": 68962947, "body": "Your other code perl code might break if you downgrade perl. If you are a newbie, I would not recommend it. Find an equivalent of Coro for perl or another language."}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1480446843, "post_id": 40873398, "comment_id": 68963004, "body": "user3718294 no i cant, i have to use Coro. sorry this is no way. I want/need FIX problem :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1480444986, "creation_date": 1480444986, "answer_id": 40873398, "question_id": 40868859, "link": "https://stackoverflow.com/questions/40868859/installing-cpan-module-getting-could-not-make-error/40873398#40873398", "title": "Installing cpan module getting Could not make error", "body": "<p>This is relevant:</p>\n\n<pre><code>*** It seems you are running perl version 5.022001, likely the \"official\" or\n*** \"standard\" version. While there is nothing wrong with doing that,\n*** standard perl versions 5.022 and up are not supported by Coro.\n</code></pre>\n\n<p>The error you are getting:</p>\n\n<pre><code>State.xs: In function \u2018coro_derive_padlist\u2019:\nState.xs:581:29: error: lvalue required as left operand of assignment\n   PadlistNAMES (newpadlist) = padnames;\n</code></pre>\n\n<p>Coro relies on Perl internals that changed.</p>\n"}], "owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480444986, "creation_date": 1480431082, "question_id": 40868859, "link": "https://stackoverflow.com/questions/40868859/installing-cpan-module-getting-could-not-make-error", "title": "Installing cpan module getting Could not make error", "body": "<p>I want to install cpan module called Coro for Perl, after typing </p>\n\n<pre><code>cpan Coro\n</code></pre>\n\n<p>I get error something like <strong>Could not make: Unknown error</strong></p>\n\n<p>Here is full log from console: <a href=\"http://pastebin.com/NpXbG2eN\" rel=\"nofollow noreferrer\">http://pastebin.com/NpXbG2eN</a></p>\n\n<p>I do not know what is wrong with this.</p>\n\n<p>I found some errors during install:</p>\n\n<ul>\n<li>error: lvalue required as left operand of assignment fatal error:</li>\n<li>db.h: No such file or directory</li>\n</ul>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1480428788, "post_id": 40867900, "comment_id": 68951416, "body": "Maybe <code>if( $_ =~ m&#47;aaa\\b([^z*]*)&#47;)</code>? Could you please clarify the rules?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1480430766, "post_id": 40867900, "comment_id": 68952919, "body": "Define &quot;special character&quot;. Is it just <code>*</code> or are there others?"}, {"owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480432260, "post_id": 40867900, "comment_id": 68953980, "body": "For the purpose of this question, it is just <code>*</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480429830, "post_id": 40868056, "comment_id": 68952193, "body": "It doesn&#39;t work for something like      <code>1. aaa bbb zccc ddd eee;      2. yyaaa bbb zccc dzdd eee;     3. yyaaa bbb *ccc * zddd eee;     4. yyaaa bbb * ccc zddd eee;     5. aaa bbb* ccc zddd eee;     6. aaa bbb ccc ddd eee;</code>"}, {"owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "reply_to_user": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480432981, "post_id": 40868056, "comment_id": 68954451, "body": "@ontherocks If the <code>*</code> can happen between <code>a</code> and <code>z</code>, we will have to substitute it with null to remove them. I have edited my answer hope it helps"}, {"owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "reply_to_user": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480434520, "post_id": 40868056, "comment_id": 68955591, "body": "@ontherocks Glad to hear it worked. Don&#39;t know why two poeple choose to downvote."}], "tags": [], "owner": {"reputation": 24713, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "is_accepted": true, "score": 0, "last_activity_date": 1480432942, "last_edit_date": 1480432942, "creation_date": 1480428871, "answer_id": 40868056, "question_id": 40867900, "link": "https://stackoverflow.com/questions/40867900/perl-extract-substring-to-a-character-with-count-zero-or-more/40868056#40868056", "title": "perl - extract substring to a character with count zero or more", "body": "<p>You can use a negated character class as</p>\n\n<pre><code>if( $_ =~ m/aaa\\b([^z;]*)/)\n{\n    $string = $1;\n    $string =~ s/\\*//g;\n    print \"$string\\n\";\n}\n# Outputs\n# bbb\n# bbb\n# bbb ccc\n# bbb ccc\n# bbb ccc\n# bbb ccc ddd eee\n</code></pre>\n\n<ul>\n<li><code>[^z;]*</code> Matches anything other than <code>z</code> or <code>;</code></li>\n<li><code>$string =~ s/\\*//g;</code> substitute <code>*</code> in the group with nothing.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480432760, "post_id": 40868881, "comment_id": 68954296, "body": "Can we get rid of the semicolon in the last line in the output?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 1, "creation_date": 1480432930, "post_id": 40868881, "comment_id": 68954398, "body": "@ontherocks: Done. You really need to learn to specify your requirement accurately. It&#39;s not fair to make people who are helping you for free run around adding &quot;just one more thing&quot; over and over again."}, {"owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1480433754, "post_id": 40868881, "comment_id": 68955019, "body": "Awesome! Thanks. Can you please explain the nested grouping for extraction?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 1, "creation_date": 1480434243, "post_id": 40868881, "comment_id": 68955375, "body": "@ontherocks: That&#39;s highly ironic given my last comment about &quot;just one more thing&quot;"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1480432903, "last_edit_date": 1480432903, "creation_date": 1480431127, "answer_id": 40868881, "question_id": 40867900, "link": "https://stackoverflow.com/questions/40867900/perl-extract-substring-to-a-character-with-count-zero-or-more/40868881#40868881", "title": "perl - extract substring to a character with count zero or more", "body": "\n\n<p>I think this is what you want</p>\n\n<p>Note that there's no way to excluded the \"special\" characters in a single capture, so this must be done in two stages</p>\n\n<p>Your \"required output\" has fewer spaces than the corresponding input line, but you don't mention anything about that in the text, so there's no way of knowing what it is that you really want</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;DATA&gt; ) {\n\n    next unless /a+\\s+((?:(?!\\s*z).)+)/;\n\n    (my $val = $1) =~ tr/*;//d;\n\n    print $val, \"\\n\";\n}\n\n\n\n__DATA__\n1. aaa bbb zccc ddd eee; \n2. yyaaa bbb zccc dzdd eee;\n3. yyaaa bbb *ccc * zddd eee;\n4. yyaaa bbb * ccc zddd eee;\n5. aaa bbb* ccc zddd eee;\n6. aaa bbb ccc ddd eee;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>bbb\nbbb\nbbb ccc \nbbb  ccc\nbbb ccc\nbbb ccc ddd eee\n</code></pre>\n"}], "owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 40868056, "answer_count": 2, "score": -1, "last_activity_date": 1480432942, "creation_date": 1480428424, "last_edit_date": 1480429987, "question_id": 40867900, "link": "https://stackoverflow.com/questions/40867900/perl-extract-substring-to-a-character-with-count-zero-or-more", "title": "perl - extract substring to a character with count zero or more", "body": "<p>I have the following strings in a file</p>\n\n<pre><code>1. aaa bbb zccc ddd eee; \n2. yyaaa bbb zccc dzdd eee;  ('z' is present multiple times)\n3. yyaaa bbb ccc *zddd eee;  (special character '*' present)\n4. yyaaa bbb ccc * zddd eee; (special character '*' present)\n5. aaa bbb ccc* zddd eee;    (special character '*' present)\n6. aaa bbb ccc ddd eee;      ('z' is absent)\n</code></pre>\n\n<p>Another example file </p>\n\n<pre><code>1. aaa bbb zccc ddd eee; \n2. yyaaa bbb zccc dzdd eee;\n3. yyaaa bbb *ccc * zddd eee;\n4. yyaaa bbb * ccc zddd eee;\n5. aaa bbb* ccc zddd eee;\n6. aaa bbb ccc ddd eee;\n</code></pre>\n\n<p>In each line, I want to extract the substring from the end of <code>aaa</code> to the first presence of <code>z</code> (minus the <code>z</code>). If <code>z</code> is absent, it should print the whole string. If there are special characters it should omit them.</p>\n\n<p>REQUIRED OUTPUT</p>\n\n<pre><code>bbb\nbbb\nbbb ccc\nbbb ccc\nbbb ccc\naaa bbb ccc ddd eee\n</code></pre>\n\n<p>I have tried the following but it doesn't give the output I am seeking</p>\n\n<pre><code>my $file = qq(test.txt);\nopen (my $IN, '&lt;', $file) || die \"Cannot open $file for read: $!\";     \nmy @lines=&lt;$IN&gt;;  \nclose($IN);\n\nforeach (@lines)\n{\n    if( $_ =~ m/aaa\\b(.*?)z/)\n    {\n        print \"$1\\n\";\n    } \n}\n</code></pre>\n\n<p>MY OUTPUT</p>\n\n<pre><code>bbb\nbbb\nbbb ccc *\nbbb ccc *\nbbb ccc*\n</code></pre>\n\n<p>I am not sure how to exclude the special character (tried character classes) and it doesn't output anything for line#6 where there is no 'z' character present.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480418629, "post_id": 40864369, "comment_id": 68944542, "body": "What are you parsing to get this data structure?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480418800, "post_id": 40864369, "comment_id": 68944646, "body": "@Sobrique I like how when I research stuff I recognize the names that come up with the answers. :)"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480418909, "post_id": 40864369, "comment_id": 68944728, "body": "@Sobrique XML. I am unable to change the xml I receive though."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480418940, "post_id": 40864369, "comment_id": 68944755, "body": "No, but you can probably use a better parser. Because this looks like you&#39;ve used <code>XML::Simple</code>, and that&#39;s just a road to pain. If you post some sample <code>XML</code> I can probably give you a better solution."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480418979, "post_id": 40864369, "comment_id": 68944781, "body": "Can you have <i>ID</i> and <i>id</i> and <i>iD</i> in the same element?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480419046, "post_id": 40864369, "comment_id": 68944839, "body": "@Sobrique Yep, what would you suggest instead?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480419072, "post_id": 40864369, "comment_id": 68944858, "body": "@simbabque Luckily no, that would be a nightmare."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1480419182, "post_id": 40864369, "comment_id": 68944946, "body": "<code>XML::Twig</code> has <code>lc_attnames</code> which might do exactly what you want."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480419317, "post_id": 40864369, "comment_id": 68945051, "body": "@Sobrique Thanks, I&#39;ll take a look."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480419649, "post_id": 40864369, "comment_id": 68945304, "body": "Edited my answer with an example - I&#39;ve made a bit of a guess at your XML structure though."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1480418751, "last_edit_date": 1495540379, "creation_date": 1480418751, "answer_id": 40864726, "question_id": 40864369, "link": "https://stackoverflow.com/questions/40864369/case-insensitive-hash-keys-perl/40864726#40864726", "title": "Case insensitive hash keys perl", "body": "<p>There is no built-in way to do that. What you could do is use <a href=\"https://metacpan.org/pod/List::Util#first\" rel=\"nofollow noreferrer\">List::Util's <code>first</code></a> to at least get less checks, and then still try until one fits for each of the keys. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse List::Util 'first';\n\nmy $Hash = {\n    Server =&gt; [\n        {\n            Id =&gt; 123\n        },\n        {\n            iD =&gt; 456\n        },\n        {\n            ID =&gt; 789\n        }\n    ]\n};\n\nforeach my $thing ( @{ $Hash-&gt;{Server} } ) {\n\n    #                     this returns the first match in the list, like grep   \n    #   so we need to use it here to return the actual value\n    say $thing-&gt;{ first { $thing-&gt;{$_} } qw/id ID iD Id/ };\n}\n</code></pre>\n\n<p>If there are a lot of other keys in the data structure, this is cheaper than looking at all the keys, because you at max look up all possible <em>id</em> keys plus one, and at best two.</p>\n\n<p>If you want the list of possible keys to auto-generate and the uppercase and lowercase letters can be arbitrarily mixed, take a look at <a href=\"https://stackoverflow.com/a/31474707/1331451\">this answer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1480419610, "post_id": 40864745, "comment_id": 68945274, "body": "I wonder which solution is cheaper. Your grepping all keys or my looking at all possible ones."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480419839, "post_id": 40864745, "comment_id": 68945441, "body": "Hard to say really. I suspect it depends a lot on the number of keys in the first place - inspecting just one for a match is trivial, but if there&#39;s a bunch of redundant (non &#39;id&#39;) ones then grep has to check them all."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480421321, "post_id": 40864745, "comment_id": 68946386, "body": "In terms of time complexity, I believe <code>XML::Twig</code> solution is cheaper because it doesn&#39;t involve any nested loop. Other solutions require nested loops that makes the complexity <code>O(n*n)</code>."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1480426020, "post_id": 40864745, "comment_id": 68949452, "body": "Was only really looking for the first part of the answer to handle the hash keys but the XML::Twig example is a welcome addition :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480427388, "post_id": 40864745, "comment_id": 68950424, "body": "Honestly - if you&#39;ve not gone too far down the implementation road, switching away from <code>XML::Simple</code> will help you massively in the long run. <code>XML::Twig</code> can even do a drop in replacement with the <code>simplify</code> method if you really must."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1480427815, "last_edit_date": 1495540906, "creation_date": 1480418791, "answer_id": 40864745, "question_id": 40864369, "link": "https://stackoverflow.com/questions/40864369/case-insensitive-hash-keys-perl/40864745#40864745", "title": "Case insensitive hash keys perl", "body": "<p>Well, it depends a little bit on your source of information. This looks like you've parsed something, so there may be a better solution. </p>\n\n<p>However, with what we've got here, I'd do it like this:</p>\n\n<pre><code>for my $entry (@{$Hash-&gt;{Server}}){\n   #grep, find first match. Dupes discarded. \n   my ( $key ) = grep { /^id$/i } keys %$entry; \n   print \"$key =&gt; \",$entry -&gt; {$key},\"\\n\";\n}\n</code></pre>\n\n<p>This works by using <code>grep</code> with an <code>i</code> regex for case insensitive on <code>keys</code>, and grabbing whatever comes out first. So if you have multiple matches for <code>/id/i</code> then it'll be random which one you get. (<code>sort</code> could help with that though)</p>\n\n<p>Given you're working with <code>XML</code> though, I'd probably backtrack a bit, throw out <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\"><code>XML::Simple</code></a> and do it like this instead:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ( twig_handlers =&gt; { '_all_' =&gt; sub { $_ -&gt; lc_attnames }} );\n   $twig -&gt; parse ( \\*DATA );\n\nprint \"XML looks like:\\n\";\n$twig -&gt; set_pretty_print ( 'indented_a'); \n$twig -&gt; print;\n\nprint \"Output:\\n\";\n\nforeach my $server ( $twig -&gt; get_xpath('//Server') ) { \n    print $server -&gt; att('id'),\"\\n\";\n}\n\n__DATA__\n&lt;XML&gt;\n   &lt;Server ID=\"123\" /&gt;\n   &lt;Server Id=\"456\" /&gt;\n   &lt;Server id=\"789\" /&gt;\n&lt;/XML&gt;\n</code></pre>\n\n<p>Or you can just:</p>\n\n<pre><code>foreach my $server ( $twig -&gt; get_xpath('//Server') ) {\n    $server -&gt; lc_attnames;\n    print $server -&gt; att('id'),\"\\n\";\n}\n</code></pre>\n\n<p>in lieu of doing it in the twig handlers. The first answer will 'fix' all of your XML to having lower case attributes, which might not be what you want. But then, it might be useful for other scenarios, which is why I've given two examples. </p>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": -1, "last_activity_date": 1480418822, "creation_date": 1480418822, "answer_id": 40864760, "question_id": 40864369, "link": "https://stackoverflow.com/questions/40864369/case-insensitive-hash-keys-perl/40864760#40864760", "title": "Case insensitive hash keys perl", "body": "<p>I would suggest you to use regex to ignore case of keys using <code>i</code> flag.</p>\n\n<pre><code>for my $item ( @ { $Hash-&gt;{Server} }) {\n    for(keys %{$item}) {\n        print $item -&gt; {$_},\"\\n\" if /^ID$/i;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 40864745, "answer_count": 3, "score": 1, "last_activity_date": 1480427815, "creation_date": 1480417675, "last_edit_date": 1592644375, "question_id": 40864369, "link": "https://stackoverflow.com/questions/40864369/case-insensitive-hash-keys-perl", "title": "Case insensitive hash keys perl", "body": "<h3>Problem</h3>\n<p>I have a hash/array structure, some of the hash keys are not in the same case though.</p>\n<p>I would like to know if there is a way to handle this case without manually checking the keys of every hash.</p>\n<p>In the example below i would like all ID/iD/id/Id fields to be printed.</p>\n<hr />\n<h3>Example code</h3>\n<pre><code>use warnings;\nuse strict;\n\n\nmy $Hash = {\n   Server  =&gt;   [\n                        {\n                                Id=&gt;123\n                        },\n                        {\n                                iD=&gt;456\n                        },\n                        {\n                                ID=&gt;789\n                        }\n                ]\n\n};\n\nfor (@{$Hash-&gt;{Server}}){\n        print &quot;$_-&gt;{ID}\\n&quot;\n        #This is the problematic part\n}\n</code></pre>\n<hr />\n<h3>Other</h3>\n<p><strong>perl version</strong>: v5.10.0</p>\n<p>This data is recieved from elsewhere and must remain the same case, the example above is minimal and i cannot just simply change them all to the same case.</p>\n<p>Any more info needed let me know.</p>\n"}, {"tags": ["json", "perl", "solr"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 1, "creation_date": 1480417004, "post_id": 40863952, "comment_id": 68943522, "body": "Could you please share us the output, when you manually access the <i>url</i> in browser?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480419366, "post_id": 40863952, "comment_id": 68945095, "body": "Your output shows <code>500 internal server error</code>.  It is also showing the undefined <code>content-type</code> in header. Please solve those problem and re-attempt again."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480422782, "post_id": 40863952, "comment_id": 68947349, "body": "Update the code <code>use utf;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1480424341, "post_id": 40863952, "comment_id": 68948289, "body": "What do you mean by &quot;special characters&quot;?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1480424448, "post_id": 40863952, "comment_id": 68948373, "body": "@ssr1012: I don&#39;t know of a &quot;utf&quot; pragma, so that&#39;s probably going to give a syntax error. It&#39;s possible that you meant <code>use utf8;</code> but I can&#39;t see how that will help as there don&#39;t appear to be any non-ASCII characters in the source code."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1480426523, "post_id": 40863952, "comment_id": 68949786, "body": "the <a href=\"https://metacpan.org/pod/REST::Client\" rel=\"nofollow noreferrer\">documentation</a> seems to show that <code>setHost()</code> parameter should be just the actual host: <code>http:&#47;&#47;localhost:8081</code>, then in the <code>GET</code> call, the first parameter should be the rest of the URL (<code>DashboardDAVE&#47;cont&#47;solr</code>), followed by your other arguments. I have no clue if this is causing your problem, but it&#39;s likely worth trying an example as per the docs."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480427492, "post_id": 40863952, "comment_id": 68950486, "body": "<code>What do you mean by &quot;special characters&quot;?</code> Since I said to use <code>utf8</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1480430510, "post_id": 40863952, "comment_id": 68952754, "body": "My point is that &quot;special characters&quot; is a pretty meaningless phrase. I guess that to most people it means &quot;non-ASCII characters&quot;. But in that case, you need to know what character encoding you are using in order to give any kind of meaningful answer. And <code>use utf8</code> is only of use if your <b>source code</b> contains UTF8-encoded characters - which it clearly doesn&#39;t here."}, {"owner": {"reputation": 31, "user_id": 2361211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd6ebf4950978a989f2619f41180dd5?s=128&d=identicon&r=PG", "display_name": "Crons", "link": "https://stackoverflow.com/users/2361211/crons"}, "edited": false, "score": 0, "creation_date": 1480484528, "post_id": 40863952, "comment_id": 68976605, "body": "special characters like &quot;.&quot;, &quot;#&quot;, &quot;@&quot; etc.or it might be foreign languages"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1480496325, "post_id": 40863952, "comment_id": 68982161, "body": "Why are those characters special? They look like pretty standard ASCII characters to me."}, {"owner": {"reputation": 31, "user_id": 2361211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd6ebf4950978a989f2619f41180dd5?s=128&d=identicon&r=PG", "display_name": "Crons", "link": "https://stackoverflow.com/users/2361211/crons"}, "edited": false, "score": 0, "creation_date": 1480504117, "post_id": 40863952, "comment_id": 68987452, "body": "But because of which the complete (JSON) data is not received at the  SOLR side. It breaks at the character (&#39;#&#39;/&#39;.&#39;). If i remove these characters and make a call it works correctly."}, {"owner": {"reputation": 112, "user_id": 2434293, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99f1770a2f262925dcde03db100a3c9d?s=128&d=identicon&r=PG", "display_name": "Kizzim", "link": "https://stackoverflow.com/users/2434293/kizzim"}, "edited": false, "score": 0, "creation_date": 1480530731, "post_id": 40863952, "comment_id": 69005171, "body": "I think he is stating that JSON encoding isnt working, or it is improperly encoding and on the SOLR side it cant be decoded? Can you provide a dump of your JSON string at least that is created on your end?"}, {"owner": {"reputation": 31, "user_id": 2361211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd6ebf4950978a989f2619f41180dd5?s=128&d=identicon&r=PG", "display_name": "Crons", "link": "https://stackoverflow.com/users/2361211/crons"}, "edited": false, "score": 0, "creation_date": 1480572634, "post_id": 40863952, "comment_id": 69020565, "body": "<code>{&quot;searchConditionWrapper&quot;:[{&quot;parameters&quot;:{&quot;SortBy&quot;:&quot;Age&quot;,&quot;Pa&zwnj;&#8203;rameter&quot;:&quot;Some.545&quot;,&zwnj;&#8203;&quot;Orde rBy&quot;:&quot;Up&quot;},&quot;searchType&quot;:&quot;Fulltext&quot;},{&quot;parameters&quot;:{&quot;SortBy&quot;:&zwnj;&#8203;&quot;Age&quot;,&quot;Parameter&quot;:&quot;1 ,4,10&quot;,&quot;OrderBy&quot;:&quot;Up&quot;},&quot;searchType&quot;:&quot;State&quot;}],&quot;archiveFlag&quot;:&zwnj;&#8203;&quot;0&quot;}</code>"}], "owner": {"reputation": 31, "user_id": 2361211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd6ebf4950978a989f2619f41180dd5?s=128&d=identicon&r=PG", "display_name": "Crons", "link": "https://stackoverflow.com/users/2361211/crons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480417741, "creation_date": 1480416588, "last_edit_date": 1480417741, "question_id": 40863952, "link": "https://stackoverflow.com/questions/40863952/perl-rest-call-contains-special-characters", "title": "Perl REST call contains special characters", "body": "<p>Hi I am calling REST call from Perl to SoLr. Below is the code which contains special characters in search criteria. When i check in the SoLr, the call doesn't receive the complete json string.</p>\n\n<pre><code>#!perl -w\nuse REST::Client;\nuse JSON;\nuse MIME::Base64; \nuse Redis;\n\nmy %Hash;\nmy %Data; my %Param; my @DataArray;\n$Hash{archiveFlag} = '0';\n$Param{Parameter} = \"some.545\";\n$Param{SortBy} = \"Age\";\n$Param{OrderBy} = \"Up\";\n$Data{searchType} = \"Fulltext\";\n$Data{parameters} = \\%Param;\n$DataArray[0] = \\%Data;\n$Hash{searchConditionWrapper} = \\@DataArray;\n\nmy $Data = encode_json \\%Hash;\nprint $Data;    \n$url=\"http://localhost:8181/DashboardDAVE/cont/solr\"; \nmy $headers = {'Accept' =&gt; 'application/json', 'Content-Type' =&gt; 'application/json'};\nmy $client = REST::Client-&gt;new();\n$client-&gt;setHost($url);\n$client-&gt;GET($Data, $headers);\nprint $client-&gt;responseContent();\n</code></pre>\n\n<p>Below is the error.\nException while parsing json 1:null</p>\n\n<p>Any help on this much appreciated.</p>\n"}, {"tags": ["perl", "salesforce"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1480415247, "post_id": 40863425, "comment_id": 68942365, "body": "Welcome to Stack Overflow. Your syntax highlighting in your post is a bit broken. Please <a href=\"https://stackoverflow.com/posts/40863425/edit\">edit</a> the question and take a look."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1480415287, "post_id": 40863425, "comment_id": 68942386, "body": "It looks like you need to log in. That page seems to redirect to <i>login.salesforce.com</i>. Maybe that <code>eval</code> in the beginning of your code doesn&#39;t do what you think. Have you looked at the content of <code>sforce </code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7127931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157632407350507/picture?type=large", "display_name": "Jeya Annanathan", "link": "https://stackoverflow.com/users/7127931/jeya-annanathan"}, "edited": false, "score": 0, "creation_date": 1493930875, "post_id": 43792500, "comment_id": 74625787, "body": "https://&lt;server name&gt;.salesforce.com/services/data/v35.0/analytics/reports/&lt;&zwnj;&#8203;report id&gt;"}], "tags": [], "owner": {"reputation": 1, "user_id": 7127931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157632407350507/picture?type=large", "display_name": "Jeya Annanathan", "link": "https://stackoverflow.com/users/7127931/jeya-annanathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496930127, "last_edit_date": 1496930127, "creation_date": 1493930833, "answer_id": 43792500, "question_id": 40863425, "link": "https://stackoverflow.com/questions/40863425/perl-rest-integration-with-salesforce-report/43792500#43792500", "title": "Perl REST integration with Salesforce Report", "body": "<p>In order to get the json of your report try the following: </p>\n\n<pre><code>$client-&gt;GET('https://&lt;server name&gt;.salesforce.com/services/data/v35.0/analytics/reports/&lt;report id&gt;',\n              {'Authorization' =&gt; \"OAuth $sid\",\n               'Accept' =&gt; 'application/json'});\n</code></pre>\n\n<p>This worked for me. </p>\n"}], "owner": {"reputation": 1, "user_id": 7224690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d337451cfa842ae36fbb3ce66b630bb?s=128&d=identicon&r=PG&f=1", "display_name": "Prasoon", "link": "https://stackoverflow.com/users/7224690/prasoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496930127, "creation_date": 1480415124, "last_edit_date": 1492104685, "question_id": 40863425, "link": "https://stackoverflow.com/questions/40863425/perl-rest-integration-with-salesforce-report", "title": "Perl REST integration with Salesforce Report", "body": "<p>I am integrating Perl with Salesforce Reports. I am trying to connect Perl script through standard REST API (/00O93000009NpOy?export=1&amp;enc=UTF-8&amp;xf=csv) of Salesforce Report and getting response code 200. In high level I need to download the Salesforce report in Excel format using a Perl script.</p>\n\n<p>Please look into my code: </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse WWW::Mechanize;\nuse WWW::Salesforce;\nuse REST::Client;\n\n# Authenticate first via SOAP interface to get a session ID:\nmy $sforce = eval { WWW::Salesforce-&gt;login(\n                    'username' =&gt; \"USER_NAME\",\n                    'password' =&gt; \"PASSWORD\" ); };\ndie \"Could not login to SFDC: $@\" if $@;\n\n# Get the session ID:\nmy $hdr = $sforce-&gt;get_session_header();\nmy $sid = ${$hdr-&gt;{_value}-&gt;[0]}-&gt;{_value}-&gt;[0];\n\n\nmy $host = 'https://ap1.salesforce.com';\nmy $client = REST::Client-&gt;new(host =&gt; $host);\n\n # Get ALL incidents\n $client-&gt;GET('/00O93000009NpOy?export=1&amp;enc=UTF-8&amp;xf=csv',\n              {'Authorization' =&gt; \"OAuth $sid\",\n               'Accept' =&gt; 'application/json'});\n\n print 'Response: ' . $client-&gt;responseContent() . \"\\n\";\n print 'Response status: ' . $client-&gt;responseCode() . \"\\n\";\n foreach ( $client-&gt;responseHeaders() ) {\n   print 'Header: ' . $_ . '=' . $client-&gt;responseHeader($_) . \"\\n\";\n }\n</code></pre>\n\n<p>And when I ran this Perl code through command prompt then I got response like this: </p>\n\n<pre><code>C:\\Users\\Documents&gt;perl TEST.pl`enter code here`\nResponse:\n&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.or\ng/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta HTTP-EQUIV=\"PRAGMA\" CONTENT=\"NO-CACHE\"&gt;\n\n\n\n\n\n&lt;script&gt;\nif (this.SfdcApp &amp;&amp; this.SfdcApp.projectOneNavigator) { SfdcApp.projectOneNaviga\ntor.handleRedirect('https://login.salesforce.com/?ec=302&amp;startURL=%2F00O90000009\nNhOy%3Fenc%3DUTF-8%26export%3D1%26xf%3Dcsv'); }  else\nif (window.location.replace){\nwindow.location.replace('https://login.salesforce.com/?ec=302&amp;startURL=%2F00O900\n00009NhOy%3Fenc%3DUTF-8%26export%3D1%26xf%3Dcsv');\n} else {;\nwindow.location.href ='https://login.salesforce.com/?ec=302&amp;startURL=%2F00O90000\n009NhOy%3Fenc%3DUTF-8%26export%3D1%26xf%3Dcsv';\n}\n&lt;/script&gt;\n\n&lt;/head&gt;\n\n\n&lt;/html&gt;\n\n\n\n\n\n&lt;!-- Body events --&gt;\n&lt;script type=\"text/javascript\"&gt;function bodyOnLoad(){if(window.PreferenceBits){w\nindow.PreferenceBits.prototype.csrfToken=\"null\";};}function bodyOnBeforeUnload()\n{}function bodyOnFocus(){}function bodyOnUnload(){}&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n\n&lt;!--\n................................................................................\n...................\n................................................................................\n...................\n................................................................................\n...................\n................................................................................\n...................\n--&gt;\n\nResponse status: 200\nHeader: Connection=close\nHeader: Date=Tue, 29 Nov 2016 10:05:43 GMT\nHeader: Pragma=NO-CACHE\nHeader: Content-Type=text/html;charset=UTF-8\nHeader: Client-Date=Tue, 29 Nov 2016 10:05:43 GMT\nHeader: Client-Peer=182.50.78.41:443\nHeader: Client-Response-Num=1\nHeader: Client-SSL-Cert-Issuer=/C=US/O=Symantec Corporation/OU=Symantec Trust Ne\ntwork/CN=Symantec Class 3 Secure Server CA - G4\nHeader: Client-SSL-Cert-Subject=/C=US/ST=California/L=San Francisco/O=Salesforce\n.com, Inc/OU=Applications/CN=*.salesforce.com\nHeader: Client-SSL-Cipher=ECDHE-RSA-AES256-GCM-SHA384\nHeader: Client-SSL-Socket-Class=IO::Socket::SSL\nHeader: Set-Cookie=BrowserId=UGPsAKnYTgWN3JcU4kcKxg;Path=/;Domain=.salesforce.co\nm;Expires=Sat, 28-Jan-2017 10:05:43 GMT\n</code></pre>\n\n<p>Although response should be in JSON format and not absurd. I tried with workbench and getting the response in JSON format that is good. The response is not proper.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1480411814, "post_id": 40862080, "comment_id": 68939896, "body": "Just FYI: when line breaks come into play, consider using <code>\\R</code> instead of <code>\\n</code>. However, here you&#39;d better change the whole approach and read line by line checking each subsequent one."}, {"owner": {"reputation": 710, "user_id": 3835136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28253147223c3218a0ac8f68070e8c31?s=128&d=identicon&r=PG&f=1", "display_name": "Will Bolden", "link": "https://stackoverflow.com/users/3835136/will-bolden"}, "edited": false, "score": 0, "creation_date": 1480411923, "post_id": 40862080, "comment_id": 68939967, "body": "Thanks for the suggestion. I just tried \\R but I get the same result as with \\n."}, {"owner": {"reputation": 710, "user_id": 3835136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28253147223c3218a0ac8f68070e8c31?s=128&d=identicon&r=PG&f=1", "display_name": "Will Bolden", "link": "https://stackoverflow.com/users/3835136/will-bolden"}, "edited": false, "score": 0, "creation_date": 1480412126, "post_id": 40862080, "comment_id": 68940100, "body": "Do you know of a good way to check line by line the way you suggested? It seems like I would essentially be manually splitting apart the regex. First checking if a line matched ^[0-9]+\\. , then checking if a line matched .+\\n for the rest of the first line and all subsequent lines (until I got a line with only a single newline on it, at which point I would have to restart)."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 3, "creation_date": 1480412519, "post_id": 40862080, "comment_id": 68940374, "body": "could you post the sample lines for matching the regex"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1480412920, "post_id": 40862080, "comment_id": 68940658, "body": "I can only suggest a regex fix like <code>&#47;^[0-9]+\\..*?(?:\\R{2}|\\z)&#47;gsm</code>"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480413024, "post_id": 40862080, "comment_id": 68940724, "body": "I would suggest you to try this regex <code>&#47;(^[0-9]+\\. (?:.+\\n)*)&#47;gm</code>. That means keep the whole match into single result-set."}, {"owner": {"reputation": 710, "user_id": 3835136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28253147223c3218a0ac8f68070e8c31?s=128&d=identicon&r=PG&f=1", "display_name": "Will Bolden", "link": "https://stackoverflow.com/users/3835136/will-bolden"}, "edited": false, "score": 0, "creation_date": 1480413033, "post_id": 40862080, "comment_id": 68940730, "body": "I added an example."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480413427, "post_id": 40862080, "comment_id": 68941042, "body": "@AruneshSingh you should make that an answer, not a comment.  That looks right to me, that the regex in the question is matching correctly but not capturing what he wants."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1480413626, "post_id": 40862080, "comment_id": 68941198, "body": "@WillBolden you do a good job showing what you&#39;ve tried, sample input, and desired results, but next time please also show the results you actually get with your sample input"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1480413951, "post_id": 40862080, "comment_id": 68941432, "body": "@ysth Added. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480415109, "post_id": 40862080, "comment_id": 68942258, "body": "In list context (provided by the assignment to array <code>@matches</code>) a global regular expression returns all the <i>captured</i> substrings of every match. If you want the whole matched string to be stored then you need to change your parentheses to non-capturing ones <code>(?: ... )</code>. Or if you are using a recent version of Perl then you may use the <code>&#47;n</code> modifier which makes ordinary parentheses non-capturing, so <code>&#47;^[0-9]+\\. (.+\\n)*&#47;mng</code> will work fine."}], "answers": [{"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1480413747, "creation_date": 1480413747, "answer_id": 40862923, "question_id": 40862080, "link": "https://stackoverflow.com/questions/40862080/why-doesnt-this-perl-regex-work/40862923#40862923", "title": "Why doesn&#39;t this perl regex work", "body": "<p>In this situation, instead of reading the file by line, you should read it by paragraph. To do that you need to set <code>$/</code> to the empty string. example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @result;\n\n{\n    local $/ = \"\";\n    while (&lt;DATA&gt;) {\n        chomp;\n        push @result, $_ ;\n        # or to filter paragraphs that don't start with a digit, use instead:\n        # push @result, $_ if /^[0-9]+\\./; \n    }\n}\n\n\n__DATA__\n1. This should\nmatch\n\n2. This should too\n\n3. This\none\nalso\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1480414375, "last_edit_date": 1480414375, "creation_date": 1480413769, "answer_id": 40862930, "question_id": 40862080, "link": "https://stackoverflow.com/questions/40862080/why-doesnt-this-perl-regex-work/40862930#40862930", "title": "Why doesn&#39;t this perl regex work", "body": "<p>Your regex is right. But, you are capturing the result partially. I would suggest you to capture the whole match into a single result-set and that's how it is going to be stored into <code>@matches</code>. </p>\n\n<p>So, the correct regex would become <code>/(^[0-9]+\\. (?:.+\\n)*)/gm</code>. In this way you are capturing the matched result into <code>$1</code>. Wrapping it up into a program yields.</p>\n\n<p>Although, it is going to work without keeping those parenthesis<code>(...)</code> also because by default it takes <code>$&amp;</code>(i.e whole match) unless you capture anything. So, remember in these cases you should use <a href=\"http://perldoc.perl.org/perlretut.html#Non-capturing-groupings\" rel=\"nofollow noreferrer\"><code>non-capturing group(?: ... )</code></a> instead of capturing group<code>()</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $str = '\n1. This should\nmatch\n\n2. This should too\n\n3. This\none\nalso\n';\n\nmy @matches = $str =~ /^([0-9]+\\. (?:.+\\n)*)/gm;\n\nprint Dumper(\\@matches);\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[\n          '1. This should\nmatch\n',\n          '2. This should too\n',\n          '3. This\none\nalso\n'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 3835136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28253147223c3218a0ac8f68070e8c31?s=128&d=identicon&r=PG&f=1", "display_name": "Will Bolden", "link": "https://stackoverflow.com/users/3835136/will-bolden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 40862930, "answer_count": 2, "score": 1, "last_activity_date": 1480414375, "creation_date": 1480411477, "last_edit_date": 1480413001, "question_id": 40862080, "link": "https://stackoverflow.com/questions/40862080/why-doesnt-this-perl-regex-work", "title": "Why doesn&#39;t this perl regex work", "body": "<pre><code>@matches = ( $filestr =~ /^[0-9]+\\. (.+\\n)*/mg );\n</code></pre>\n\n<p>I have a file that's been read into filestr, yet for some reason the above regex, which should match the beginning of a line, followed by a number, a dot, a space, and then any number of lines followed by a newline (thus ending when there is a line with only a newline on it), seems to just produce some single lines from the file.</p>\n\n<p>When I do something like</p>\n\n<pre><code>@matches = ( $filestr =~ /^[0-9]+\\. .+\\n/mg );\n</code></pre>\n\n<p>I correctly match a single line.</p>\n\n<p>When I do this</p>\n\n<pre><code>@matches = ( $filestr =~ /^[0-9]+\\. .+\\n.+\\n/mg );\n</code></pre>\n\n<p>I match the same single lines, followed by some seemingly unrelated line. What's wrong with my regex?</p>\n\n<p>Note: The regex works fine in this regex tester:<a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a>, it just won't work in perl.</p>\n\n<p>Example, in this text:</p>\n\n<pre><code>1. This should\nmatch\n\n2. This should too\n\n3. This\none\nalso\n</code></pre>\n\n<p>the regex should match</p>\n\n<pre><code>1. This should\nmatch\n</code></pre>\n\n<p>and</p>\n\n<pre><code>2. This should too\n</code></pre>\n\n<p>and   </p>\n\n<pre><code>3. This\none\nalso\n</code></pre>\n"}, {"tags": ["perl", "catalyst", "mod-perl", "devel-cover"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480415164, "post_id": 40861216, "comment_id": 68942300, "body": "How do you do the coverage for the unit tests? Are those using Catalyst::Test?"}, {"owner": {"reputation": 4304, "user_id": 176623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rGK4D.jpg?s=128&g=1", "display_name": "Mauritz Hansen", "link": "https://stackoverflow.com/users/176623/mauritz-hansen"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480415455, "post_id": 40861216, "comment_id": 68942500, "body": "For unit test coverage I do the following: PERL5OPT=&quot;$PERL5OPT -MDevel::Cover&quot; prove t/Unit"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480419870, "post_id": 40861216, "comment_id": 68945462, "body": "I don&#39;t know how mod_perl works, but you probably can set environment variables somewhere. Set that same one where you spin up the server. That might work."}, {"owner": {"reputation": 4304, "user_id": 176623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rGK4D.jpg?s=128&g=1", "display_name": "Mauritz Hansen", "link": "https://stackoverflow.com/users/176623/mauritz-hansen"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480441072, "post_id": 40861216, "comment_id": 68959869, "body": "@simbabque, as far as a general answer goes it is probably great. ;-) Unfortunately I have tried doing this in the apache conf file and the psgi startup file and this does not generate coverage data."}], "answers": [{"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 1, "last_activity_date": 1480530307, "creation_date": 1480530307, "answer_id": 40895568, "question_id": 40861216, "link": "https://stackoverflow.com/questions/40861216/catalyst-mod-perl-selenium-how-to-develcover/40895568#40895568", "title": "Catalyst + mod_perl + selenium: how to Devel::Cover?", "body": "<p>Have you tried using <a href=\"https://metacpan.org/pod/Plack::Middleware::Profiler::NYTProf\" rel=\"nofollow noreferrer\">Plack::Middleware::Profiler::NYTProf</a></p>\n\n<p>From the synopsis</p>\n\n<pre><code>use Plack::Builder;\n\nbuilder {\n    enable 'Profiler::NYTProf';\n    [ '200', [], [ 'Hello Profiler' ] ];\n};\n</code></pre>\n"}], "owner": {"reputation": 4304, "user_id": 176623, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rGK4D.jpg?s=128&g=1", "display_name": "Mauritz Hansen", "link": "https://stackoverflow.com/users/176623/mauritz-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480530307, "creation_date": 1480408801, "question_id": 40861216, "link": "https://stackoverflow.com/questions/40861216/catalyst-mod-perl-selenium-how-to-develcover", "title": "Catalyst + mod_perl + selenium: how to Devel::Cover?", "body": "<p>I have a web application with lots of tests. I am currently only using Devel::Cover for coverage reports of my unit tests, but would also like coverage reports of my front-end Selenium tests.</p>\n\n<p>I have tried 'use Devel::Cover' in my app psgi startup file. This creates the cover_db directory, but it remains empty while running my Selenium tests.</p>\n\n<p>I would appreciate any pointers.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 518, "user_id": 3743899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FNdnZ.jpg?s=128&g=1", "display_name": "Yaerox", "link": "https://stackoverflow.com/users/3743899/yaerox"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1480407505, "post_id": 40860729, "comment_id": 68937245, "body": "I don&#39;t want to get only the last part of the string checked. I have to verify that there is max 1 subdir after root before my sourcen dir exists. Imo this makes it different then just looking for the last match like they do on filenames."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 3743899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FNdnZ.jpg?s=128&g=1", "display_name": "Yaerox", "link": "https://stackoverflow.com/users/3743899/yaerox"}, "edited": false, "score": 0, "creation_date": 1480407952, "post_id": 40860927, "comment_id": 68937489, "body": "This seems to work. Can you explain this for me to understand? I don&#39;t get the part of <code>(?:[^&#47;]+&#47;)</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 3743899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FNdnZ.jpg?s=128&g=1", "display_name": "Yaerox", "link": "https://stackoverflow.com/users/3743899/yaerox"}, "edited": false, "score": 1, "creation_date": 1480408420, "post_id": 40860927, "comment_id": 68937767, "body": "@Yaerox  Added an explanation.  I&#39;ll check and possibly edit more, but let me know if it&#39;s not clear."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 3743899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FNdnZ.jpg?s=128&g=1", "display_name": "Yaerox", "link": "https://stackoverflow.com/users/3743899/yaerox"}, "edited": false, "score": 2, "creation_date": 1480409752, "post_id": 40860927, "comment_id": 68938538, "body": "@Yaerox I edited quite a bit, and added references.  I&#39;ll leave it for now, please let me know if more/better would be useful."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1599259217, "last_edit_date": 1599259217, "creation_date": 1480407793, "answer_id": 40860927, "question_id": 40860729, "link": "https://stackoverflow.com/questions/40860729/regexp-match-from-root-or-root-1-subdir/40860927#40860927", "title": "RegExp - match from root or root + 1 subdir", "body": "<p>To check for <code>/sourcen</code> or <code>/other/sourcen</code></p>\n<pre><code>$dir =~ m{^/ (?: [^/]+ / )? sourcen}x;\n</code></pre>\n<p>The <code>/x</code> allows spaces inside, for readability. The <code>{}</code> delimiters are used instead of the customary <code>//</code> so that we can use <code>/</code> in the pattern without escaping it. (Then we must have the <code>m</code> in front, which may be omitted with <code>//</code> delimiters.)</p>\n<p>To be able to tell which is the case capture the whole thing (or its parts), by adding <code>()</code>.</p>\n<hr />\n<p>We start (<code>^</code>) with <code>/</code> since this starts at root.</p>\n<p>The <code>[^/]+</code> checks for any character which is not <code>/</code>, once or more times (<code>+</code>). So it matches a string of characters up to the first <code>/</code>. The construct <code>[^...]</code> is called <em>negated character class</em>. See it <a href=\"http://perldoc.perl.org/perlretut.html#Using-character-classes\" rel=\"nofollow noreferrer\">in perlretut</a> and <a href=\"http://perldoc.perl.org/perlrecharclass.html#Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">in perlrecharclass</a>.\nThis is followed by literal <code>/</code>, needed with another directory.</p>\n<p>All this is inside <code>(?: )</code> for grouping so that it can be made optional by the following <code>?</code> (zero times or once). The <code>?:</code> is there so that the whole pattern inside is not <em>captured</em> by <code>()</code>, since that is not needed here, but only grouped.</p>\n<p>Thus the pattern <code>(?:[^/]+/)?</code> is the optional first directory.</p>\n"}], "owner": {"reputation": 518, "user_id": 3743899, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FNdnZ.jpg?s=128&g=1", "display_name": "Yaerox", "link": "https://stackoverflow.com/users/3743899/yaerox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 40860927, "answer_count": 1, "score": 1, "last_activity_date": 1599259217, "creation_date": 1480406979, "last_edit_date": 1480407385, "question_id": 40860729, "link": "https://stackoverflow.com/questions/40860729/regexp-match-from-root-or-root-1-subdir", "title": "RegExp - match from root or root + 1 subdir", "body": "<p>I'm checking an ZIP-Archive in perl if the containing folder/structure is fine or not. Till now, the root directory contained a sourcen directory <code>/sourcen</code>. RegExp <code>^sourcen</code> did this for me.  </p>\n\n<p>Now I have a new case. The root directory might contain one subdir before sourcen-dir so it can look like this:</p>\n\n<pre><code>/sourcen\n/SUBDIR/sourcen\n</code></pre>\n\n<p>but <strong>it may not have more then one subdir</strong> like this:</p>\n\n<pre><code>/SUBDIR/SUBDIR/sourcen\n/SUBDIR/SUBDIR/SUBDIR/sourcen\n/SUBDIR/SUBDIR/SUBDIR/SUBDIR/sourcen\n...\n</code></pre>\n\n<p>Is it possible to use RegExp to validate sourcen dir is in root or only one subdir 'lower'?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1480406919, "post_id": 40860469, "comment_id": 68936968, "body": "<a href=\"http://www.perlmonks.org/?node_id=266845\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=266845</a>"}, {"owner": {"reputation": 424, "user_id": 6376481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3xFd2.jpg?s=128&g=1", "display_name": "Nivetha Jaishankar", "link": "https://stackoverflow.com/users/6376481/nivetha-jaishankar"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1480407441, "post_id": 40860469, "comment_id": 68937203, "body": "When the perl code is finished and exit, that time only all variable&#39;s memory is deallocated. My understanding is correct or not? I just need to clarify."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1480407610, "post_id": 40860469, "comment_id": 68937307, "body": "Yes, OS reclaims memory when perl exits (and lexical variable is immediately reclaimed to perl memory manager when lexical goes out of scope)."}, {"owner": {"reputation": 424, "user_id": 6376481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3xFd2.jpg?s=128&g=1", "display_name": "Nivetha Jaishankar", "link": "https://stackoverflow.com/users/6376481/nivetha-jaishankar"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1480407854, "post_id": 40860469, "comment_id": 68937429, "body": "Thank you. Now I understand."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480411101, "post_id": 40860469, "comment_id": 68939428, "body": "See also <a href=\"http://perldoc.perl.org/Scalar/Util.html#weaken\" rel=\"nofollow noreferrer\">weaken</a> for circular references."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1480411064, "post_id": 40860886, "comment_id": 68939401, "body": "It&#39;s probably worth pointing out <code>Scalar::Util</code> and <a href=\"http://perldoc.perl.org/Scalar/Util.html#weaken\" rel=\"nofollow noreferrer\"><code>weaken</code></a> at this point."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1480407601, "creation_date": 1480407601, "answer_id": 40860886, "question_id": 40860469, "link": "https://stackoverflow.com/questions/40860469/when-does-perl-free-its-lexical-variable-from-memory/40860886#40860886", "title": "When does perl free its lexical variable from memory?", "body": "<p>A lexical variable will be \"freed\" when it gets out of scope. If it points to a data structure with circular referances though, this structure wont be \"freed\" even if no one else points to it. </p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 6, "last_activity_date": 1480415259, "creation_date": 1480415259, "answer_id": 40863472, "question_id": 40860469, "link": "https://stackoverflow.com/questions/40860469/when-does-perl-free-its-lexical-variable-from-memory/40863472#40863472", "title": "When does perl free its lexical variable from memory?", "body": "<p>Perl lexical variables like to hold on to their memory so it can just be reused the next time the lexical is in scope.  Normally, for numbers, references, small strings, or hashes or arrays with few elements, this is not significant.</p>\n\n<p>For lexicals that hold large strings or arrays or hashes with a large number of elements, you can explicitly use <code>undef yourvarname</code> to free their memory.  (Though this just frees the memory to be used for other things by the Perl process, not frees it to other processes.)</p>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1480429364, "creation_date": 1480429364, "answer_id": 40868226, "question_id": 40860469, "link": "https://stackoverflow.com/questions/40860469/when-does-perl-free-its-lexical-variable-from-memory/40868226#40868226", "title": "When does perl free its lexical variable from memory?", "body": "<p>There is some confusion here. In Perl, there is memory for the variable in the symbol table and memory for the data stored in the variable. But in all cases, Perl pools \"freed\" memory so it can reuse it later.</p>\n\n<p>The memory for the variable is not pooled until the subroutine returns. This is in case of loops, where the same memory will be reused for the variable.</p>\n\n<p>The memory for the data is not pooled until its reference count goes to zero. This is useful when you want to return the data to the calling subroutine. If the memory was freed when the subroutine returned, the data would be lost.</p>\n\n<p>The rule of thumb is: Unless you create a circular reference, Perl will take care of garbage collection for you.</p>\n\n<p>The second rule of thumb: Don't create circular references.</p>\n"}, {"tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 4, "last_activity_date": 1480432530, "creation_date": 1480432530, "answer_id": 40869335, "question_id": 40860469, "link": "https://stackoverflow.com/questions/40860469/when-does-perl-free-its-lexical-variable-from-memory/40869335#40869335", "title": "When does perl free its lexical variable from memory?", "body": "<p>Strictly speaking, you don't really know. The official documentation is somewhat circumspect when discussing memory usage. If and when memory is freed is up to the perl internals. Any answers to your question are based on knowledge of (or speculation about) the internals, which are subject to change. That said, there are a couple of things we can know:</p>\n\n<ul>\n<li>Memory used by perl will be reclaimed by the operating system when execution ends.</li>\n<li>Memory allocated to a variable can't be freed if there are any references to it.</li>\n</ul>\n\n<p>Beyond that there are no guarantees, though <a href=\"http://perldoc.perl.org/perlguts.html#Reference-Counts-and-Mortality\" rel=\"nofollow noreferrer\">perlguts</a> provides some insight into the behavior of the internals:</p>\n\n<blockquote>\n  <p>Perl uses a reference count-driven garbage collection mechanism. SVs,\n  AVs, or HVs (xV for short in the following) start their life with a\n  reference count of 1. If the reference count of an xV ever drops to 0,\n  then it will be destroyed and its memory made available for reuse.</p>\n  \n  <p>This normally doesn't happen at the Perl level unless a variable is\n  undef'ed or the last variable holding a reference to it is changed or\n  overwritten.</p>\n</blockquote>\n\n<p>Memory being \"made available for reuse\" isn't quite the same as being freed. It allows perl to use the memory for something else but does not return it to the operating system. You shouldn't expect perl to return memory to the OS prior to exiting.</p>\n\n<p>From a developer's perspective, my advice on managing memory usage is:</p>\n\n<ul>\n<li>Don't load more data into memory at once than is needed. (e.g. read files line-by-line instead of slurping if possible)</li>\n<li>Limit variable declarations to the smallest reasonable scope.</li>\n<li>Don't keep references to data when it is no longer needed. (Either let it go out of scope or explicitly clear the reference.)</li>\n<li>Undefine large variables when they are no longer needed. (e.g. via <code>undef %hash</code>)</li>\n</ul>\n\n<p>Doing these things won't necessarily result in memory being freed/re-used, but it maximizes the chances that it will be.</p>\n"}], "owner": {"reputation": 424, "user_id": 6376481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3xFd2.jpg?s=128&g=1", "display_name": "Nivetha Jaishankar", "link": "https://stackoverflow.com/users/6376481/nivetha-jaishankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1480494934, "creation_date": 1480405998, "question_id": 40860469, "link": "https://stackoverflow.com/questions/40860469/when-does-perl-free-its-lexical-variable-from-memory", "title": "When does perl free its lexical variable from memory?", "body": "<p>I read about lexical variable from one website, in that they explain, \nA variable declared using the \"my\" keyword is a lexical variable. \nIt lives from the place where it was declared using the my keyword till the end of the current block. This is the scope of the lexical variable.</p>\n\n<p>My doubt is, if the scope is finished, the lexical variable is free from the memory or not? \nIf the lexical variable is not free from the memory after finished the scope mean, when it will free from the memory? Can anyone explain to me clearly?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1480409810, "post_id": 40857371, "comment_id": 68938583, "body": "Please check the answers and vote if you accept the same...!"}], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1480392423, "creation_date": 1480392423, "answer_id": 40857625, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl/40857625#40857625", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>Try the following trivial sort function.<br>\n<strong>WARNING: It conducts no data format check whatsoever</strong> </p>\n\n<pre><code>sub sortByDate{ \n  my @a = split(/\\//,$a);\n  my @b = split(/\\//,$b);\n  return $a[2]&lt;=&gt;$b[2] || $a[0]&lt;=&gt;$b[0] || $a[1]&lt;=&gt;$b[1];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1516, "user_id": 969196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f25ebb33442f38eda1107174f769da?s=128&d=identicon&r=PG", "display_name": "Thomas Guyot-Sionnest", "link": "https://stackoverflow.com/users/969196/thomas-guyot-sionnest"}, "is_accepted": false, "score": 0, "last_activity_date": 1480392795, "creation_date": 1480392795, "answer_id": 40857691, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl/40857691#40857691", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>Have you looked at the date manipulation modules available? I'm sure there's some that will do most of the work for you...</p>\n\n<p>Anyway the answer to your code above: your sort sub has many issues; the code doesn't even run on Perl 5.20:</p>\n\n<ol>\n<li><strike>The slashes aren't escaped, but they're the pattern delimiter.</strike> I used <code>m##</code> -- Escapes fixed in OP too.</li>\n<li>You're not re-ordering the date components. The whole point is to short the year first; where do you think you're doing it? I <code>sprintf()</code>'ed the date into a fixed <code>YYYYMMDD</code> number.</li>\n<li>You're only assigning the first element from the matches in <code>$adate</code> and <code>$bdate</code>, i.e. sorting only the month -- fixed using <code>sprintf()</code></li>\n<li>You match fixed strings in date components, but day/month in your example has either one or two characters. I used <code>\\d{1,2}</code> for those instead.</li>\n</ol>\n\n<p>Here's a fixed sub:</p>\n\n<pre><code>sub sortByDate {\n    $a =~ m#(\\d{1,2})/(\\d{1,2})/(\\d{4})#;\n    my $adate = sprintf('%i%02i%02i', $3, $1, $2);\n    $b =~ m#(\\d{1,2})/(\\d{1,2})/(\\d{4})#;\n    my $bdate = sprintf('%i%02i%02i', $3, $1, $2);\n    return $adate &lt;=&gt; $bdate;\n}\n</code></pre>\n\n<p>There is still no error checking, so running with strict/warning will return a lot of errors if you pass invalid data. You don't need the extra code if you validate the format first, but to prevent errors from badly formed dates you can also add some checking and use string cmp fallback:</p>\n\n<pre><code>sub sortByDate {\n    my $adate = sprintf('%i%02i%02i', $3, $1, $2)\n        if ($a =~ m#(\\d{1,2})/(\\d{1,2})/(\\d{4})#);\n    my $bdate = sprintf('%i%02i%02i', $3, $1, $2)\n        if ($b =~ m#(\\d{1,2})/(\\d{1,2})/(\\d{4})#);\n    return $adate &lt;=&gt; $bdate if ($adate &amp;&amp; $bdate);\n    return $a cmp $b;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1480402303, "post_id": 40858037, "comment_id": 68934690, "body": "Awesome answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1480395767, "last_edit_date": 1480395767, "creation_date": 1480395009, "answer_id": 40858037, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl/40858037#40858037", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>You were going for:</p>\n\n<pre><code>sub sortByDate{\n    my ($am, $ad, $ay) = $a =~ /(\\d{2})\\/(\\d{2})\\/(\\d{4})/;    \n    my ($bm, $bd, $by) = $b =~ /(\\d{2})\\/(\\d{2})\\/(\\d{4})/;   \n    $ay &lt;=&gt; $ay || $am &lt;=&gt; $bm || $ad &lt;=&gt; $bd\n}\n</code></pre>\n\n<hr>\n\n<p>If you were to rearrange the date into the form <code>yyyymmdd</code>, you could simply use a lexicographical sort.</p>\n\n<p>I believe this is the fastest solution:</p>\n\n<pre><code>my @sorted_events =\n    map { substr($_, 8) }\n    sort\n    map { sprintf('%3$04d%1$02d%2$02d%4$s', split(qr{/}, $_), $_) }\n    @events;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": -1, "last_activity_date": 1480399156, "last_edit_date": 1480399156, "creation_date": 1480398841, "answer_id": 40858708, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl/40858708#40858708", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>There could be multiple approaches to <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a> dates using Perl. I have summarized two approaches in the script.</p>\n\n<hr>\n\n<p>Both the approach uses <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a> to sort it.</p>\n\n<ol>\n<li>Simply using split and then sort it based on year, month and day. Use it, if you are sure about the input format.</li>\n<li>Using <a href=\"http://search.cpan.org/~esaym/Time-Piece-1.31/Piece.pm\" rel=\"nofollow noreferrer\"><code>Time::Piece</code></a> to parse into <code>Time::Piece</code> object and then sort it. Use it, if you are not sure about input format and need validation before processing.</li>\n</ol>\n\n<p>You can use anyone between them based on your preferences.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Time::Piece;\n\nmy @events = ( '11/17/1999',  '12/6/1999', '12/23/1999',\n               '1/23/2000',  '1/13/2000',  '2/25/2000',\n               '1/5/2000',  '3/18/2000',  '4/10/2000',\n               '3/12/2000', '12/31/1999');\n\n\nmy @sorted_events = map { $_ -&gt; [0] }\n                    sort {\n                          # year\n                          $a -&gt; [1] -&gt; [2] &lt;=&gt; $b -&gt; [1] -&gt; [2] ||\n                          # month\n                          $a -&gt; [1] -&gt; [0] &lt;=&gt; $b -&gt; [1] -&gt; [0] ||\n                          # day\n                          $a -&gt; [1] -&gt; [1] &lt;=&gt; $b -&gt; [1] -&gt; [1]\n                          }\n                    map { [ $_, [ split /\\// ] ] }\n                    @events;\n\n# you can also use Time::Piece\nmy @sorted_events_again = map { $_ -&gt; [1] }\n                          sort { $a -&gt; [0] &lt;=&gt; $b -&gt; [0] } \n                          map { [ Time::Piece -&gt; strptime($_, \"%m/%d/%Y\"), $_ ] } \n                          @events;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1480427474, "last_edit_date": 1480427474, "creation_date": 1480421792, "answer_id": 40865714, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl/40865714#40865714", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>Convert to <code>Time::Piece</code> first, then <code>sort</code> works exactly like you'd expect. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Time::Piece;\n\nmy @events=('11/17/1999',  '12/6/1999', '12/23/1999',  \n         '1/23/2000',  '1/13/2000',  '2/25/2000', \n           '1/5/2000',  '3/18/2000',  '4/10/2000', \n          '3/12/2000', '12/31/1999');\n\nforeach my $event ( @events ) {\n   $event = eval { Time::Piece-&gt;strptime($event, \"%m/%d/%Y\" )} || $event;\n}\n\nprint join \"\\n\", sort { $a &lt;=&gt; $b }  @events;\nprint \"\\n\";\nprint join \"\\n\", map { $_ -&gt; strftime(\"%Y-%m-%d\") } sort { $a &lt;=&gt; $b } @events;\n</code></pre>\n\n<p>Note - in the above, if <code>strptime</code> fails, it stays the original string. This will cause a warning in <code>sort</code> because you're not sorting numerically any more.  </p>\n"}], "owner": {"reputation": 11, "user_id": 7223313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bebb91c08d544c3021b8f73eff7f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Julius Fernandez Camata", "link": "https://stackoverflow.com/users/7223313/julius-fernandez-camata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1480427474, "creation_date": 1480390805, "last_edit_date": 1480414709, "question_id": 40857371, "link": "https://stackoverflow.com/questions/40857371/how-do-i-sort-the-date-in-ascending-order-using-perl", "title": "How do I sort the date in ascending order using Perl?", "body": "<p>The following is my code:</p>\n\n<pre><code>@events=('11/17/1999',  '12/6/1999', '12/23/1999',  \n         ' 1/23/2000',  '1/13/2000',  '2/25/2000', \n           '1/5/2000',  '3/18/2000',  '4/10/2000', \n          '3/12/2000', '12/31/1999');\n\nsub sortByDate{\n   $adate=$a=~ /(\\d{2})\\/(\\d{2})\\/(\\d{4})/;    \n   $bdate=$b=~ /(\\d{2})\\/(\\d{2})\\/(\\d{4})/;\n   $adate &lt;=&gt; $bdate;\n}\n\n@ascending = sort sortByDate  @events;    \nprint  \"@ascending\\n\";\n</code></pre>\n\n<p>The expected output should be the date in ascending order.</p>\n"}, {"tags": ["perl", "hash", "exists", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "edited": false, "score": 0, "creation_date": 1480439842, "post_id": 40856025, "comment_id": 68959226, "body": "Thank You for editing my question and valuable feedback. While using your code I got an error message about END_SQL statement. Does it mean that I cannot use END_SQL statement in perlDBI for MySQL tables?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "edited": false, "score": 0, "creation_date": 1480439966, "post_id": 40856025, "comment_id": 68959294, "body": "@OlhaKholod: You&#39;re welcome. I hope you understand and approve of my refactoring."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "edited": false, "score": 0, "creation_date": 1480449280, "post_id": 40856025, "comment_id": 68964357, "body": "@OlhaKholod The <code>END_SQL</code> is part of a <i>here-document</i>. Look <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">here</a> and search for the <code>&lt;&lt;EOF</code> section."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "edited": false, "score": 0, "creation_date": 1480449688, "post_id": 40856025, "comment_id": 68964569, "body": "@OlhaKholod: I&#39;m sorry, I missed the end of your comment. It depends on what the error message said, but did you read my note that the <i>terminating</i> <code>END_SQL</code> must have no spaces before it or after it on the same line? It&#39;s not a special part of the language: I specified in <code>my $sth = $dbh-&gt;prepare( &lt;&lt;END_SQL )</code> that the end of the string would be marked by a line containing just <code>END_SQL</code>, and could have put anything in there. Let me know the error message if that doesn&#39;t help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1480452352, "post_id": 40856025, "comment_id": 68965988, "body": "@PerlDuck: No, the one I&#39;m thinking of was about using a hash to avoid writing records with duplicate keys: an identical premise to this one. I think it has been deleted."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1480382986, "last_edit_date": 1592644375, "creation_date": 1480380418, "answer_id": 40856025, "question_id": 40855515, "link": "https://stackoverflow.com/questions/40855515/avoid-dbi-duplicate-primary-key-with-exists-operator/40856025#40856025", "title": "Avoid DBI duplicate primary key with exists operator", "body": "<p>I thought I saw a question very similar to this, but I can't find it</p>\n<p>The solution is to forget about hashes and use the <code>IGNORE</code> keyword to avoid raising an error. The <a href=\"https://dev.mysql.com/doc/refman/5.5/en/insert.html\" rel=\"nofollow noreferrer\">MySQL documentation</a> says this:</p>\n<blockquote>\n<p>If you use the IGNORE keyword, errors that occur while executing the INSERT statement are ignored. For example, without IGNORE, a row that duplicates an existing UNIQUE index or PRIMARY KEY value in the table causes a duplicate-key error and the statement is aborted. With IGNORE, the row is discarded and no error occurs. Ignored errors may generate warnings instead, although duplicate-key errors do not.</p>\n</blockquote>\n<p>You should also use placeholders in your SQL statement, so it should look like this</p>\n<p><em>Note that <code>END_SQL</code> must appear without and spaces before or after it. You may want to define the SQL statement at the top of your program to avoid spoiling the indenting</em></p>\n<pre><code>my $sth = $dbh-&gt;prepare(&lt;&lt;END_SQL);\nINSERT IGNORE INTO $mouse_genes (\n    Ensembl_id,\n    gene_biotype,\n    gene_symbol,\n    gene_description,\n    MGI_accession\n)\nVALUES ( ?, ?, ?, ?, ? )\nEND_SQL\n\n$sth-&gt;execute($Ensembl_id, $gene_biotype, $gene_symbol, $gene_description, $MGI_accession);\n</code></pre>\n<br/>\n<hr />\n<h3>Update</h3>\n<p>Your program can be tidied up a lot to make it easier to read. Here's how I would write it</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\n# usage script.pl &lt;username&gt; &lt;password&gt; &lt;database_name&gt; &lt;mouse_genes&gt; &lt;mouse_transcripts&gt;\n\nuse DBI;\n\nmy $user              = shift @ARGV or die $!;\nmy $password          = shift @ARGV or die $!;\nmy $database          = shift @ARGV or die $!;\nmy $mouse_genes       = shift @ARGV or die $!;\nmy $mouse_transcripts = shift @ARGV or die $!; # Not used at present\n\nmy $dbh = DBI-&gt;connect( &quot;dbi:mysql:$database:localhost&quot;, $user, $password,\n        { RaiseError =&gt; 1, PrintError =&gt; 0 } );\n\nmy $sth = $dbh-&gt;prepare( &lt;&lt;END_SQL );\nINSERT IGNORE INTO $mouse_genes (\n    Ensembl_id,\n    gene_biotype,\n    gene_symbol,\n    gene_description,\n    MGI_accession\n)\nVALUES ( ?, ?, ?, ?, ? )\nEND_SQL\n\nmy $cmd = 'gzip -d -c /data.dash/class2016/student/Mus_musculus.GRCm38.cdna.all.fa.gz';\n\nopen my $cmd_fh, '-|', $cmd or die $!;\n\n$/ = &quot;\\n&gt;&quot;;\n\nwhile ( &lt;$cmd_fh&gt; ) {\n\n    next unless my ( $ensembl_id )       = /gene:(\\w+\\d+\\.\\w+)/;\n    next unless my ( $gene_biotype )     = /gene_biotype:(\\w+)/;\n    next unless my ( $gene_symbol )      = /gene_symbol:(\\w+\\D\\d+)/;\n    next unless my ( $gene_description ) = /description:(\\w+\\s+\\w+\\s+\\w+)\\s/;\n    next unless my ( $mgi_accession )    = /MGI:(\\d+)/;\n\n    $sth-&gt;execute( $ensembl_id, $gene_biotype, $gene_symbol, $gene_description, $mgi_accession );\n}\n\n$dbh-&gt;disconnect;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "is_accepted": false, "score": 0, "last_activity_date": 1480903654, "creation_date": 1480903654, "answer_id": 40966114, "question_id": 40855515, "link": "https://stackoverflow.com/questions/40855515/avoid-dbi-duplicate-primary-key-with-exists-operator/40966114#40966114", "title": "Avoid DBI duplicate primary key with exists operator", "body": "<p>I figure out how to overcome duplicated keys using a hash:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n#this script inserts sequences from Mus_musculus.GRCm38.cdna.all.fa.gz into mouse_genes table\n#usage lab5_2.pl &lt;username&gt; &lt;password&gt; &lt;database_name&gt; &lt;mouse_genes&gt; &lt;mouse_transcripts&gt;\n\nuse DBI;\n\nuse Data::Dumper;\n\nmy $user = shift @ARGV or die $!;\nmy $password = shift @ARGV or die $!;\nmy $database = shift @ARGV or die $!;\nmy $mouse_genes = shift @ARGV or die $!;\n\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:$database:localhost\",\n                       \"$user\",\n                       \"$password\",\n                       {RaiseError =&gt; 1}\n                       );\nmy %gene;\n\n$/ = \"\\n&gt;\";\n\nopen (FILE, \"gzip -d -c /data.dash/class2016/student/Mus_musculus.GRCm38.cdna.all.fa.gz |\") or die $!;\n\n LOOP: while (&lt;FILE&gt;) {\n     if (m/gene:(\\w+\\d+\\.\\d+)/) {\n         my $Ensembl_id = $1;\n         if ( !exists $gene{$Ensembl_id} ) {\n             $gene{$Ensembl_id} = 1;\n             if (m/gene_biotype:(\\w+)/) {\n                 my $gene_biotype = $1;\n                 my $gene_symbol;\n                 if (m/gene_symbol:(\\w+\\D\\d+)/) {\n                     $gene_symbol = $1;\n                 }\n                 if (! defined $gene_symbol) {\n                     $gene_symbol = \"NULL\";\n                 }\n                 if (m/description:([^\\[]*)/) {\n                     my $gene_description = $1;\n                     if (m/MGI:(\\d+)/) {\n                         my $MGI_accession = $1;\n                         $sth = $dbh-&gt;prepare (qq{insert into mouse_genes (Ensembl_id, gene_biotype, gene_symbol, gene_description, MGI_accession) values (\"$Ensembl_id\",\"$gene_biotype\",\"$gene_symbol\",\"$gene_description\",\"$MGI_accession\")});\n                         $sth-&gt;execute();\n                         $sth-&gt;finish();\n                         next LOOP;\n                     }\n                 }\n             }\nclose FILE;\n$dbh-&gt;disconnect ();\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 7186557, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-HMBzTj5oRnU/AAAAAAAAAAI/AAAAAAAAACU/P5eH3TEWk6Y/photo.jpg?sz=128", "display_name": "Olha Kholod", "link": "https://stackoverflow.com/users/7186557/olha-kholod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 40856025, "answer_count": 2, "score": 0, "last_activity_date": 1480903654, "creation_date": 1480377025, "last_edit_date": 1480379879, "question_id": 40855515, "link": "https://stackoverflow.com/questions/40855515/avoid-dbi-duplicate-primary-key-with-exists-operator", "title": "Avoid DBI duplicate primary key with exists operator", "body": "<p>I want to insert information from a FASTA file into a table in a MySQL database. I used the <code>Ensembl_id</code> column as the primary key.</p>\n\n<p>Some of my <code>Ensembl_id</code> are not unique, so I tried to use the <code>exists</code> operator to overcome this issue. But only 5 rows had been inserted into the table, and among them only one with duplicate <code>Ensembl_id</code> values.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n#usage script.pl &lt;username&gt; &lt;password&gt; &lt;database_name&gt; &lt;mouse_genes&gt; &lt;mouse_transcripts&gt;\n\nuse DBI;\nuse Data::Dumper;\n\nmy $user              = shift @ARGV or die $!;\nmy $password          = shift @ARGV or die $!;\nmy $database          = shift @ARGV or die $!;\nmy $mouse_genes       = shift @ARGV or die $!;\nmy $mouse_transcripts = shift @ARGV or die $!;\n\nmy $dbh = DBI-&gt;connect( \"dbi:mysql:$database:localhost\", \"$user\", \"$password\",\n    { RaiseError =&gt; 1 } );\nmy %gene;\n\n$/ = \"\\n&gt;\";\n\nopen( FILE, \"gzip -d -c /data.dash/class2016/student/Mus_musculus.GRCm38.cdna.all.fa.gz |\" )\n        or die $!;\n\nLOOP:\nwhile ( &lt;FILE&gt; ) {\n\n    my $line = $_;\n    chomp $line;\n\n    if ( $line =~ /[a-z]/ ) {\n\n        my @array = split( \"\\t\", $line );\n\n        if ( m/gene:(\\w+\\d+\\.\\w+)/ ) {\n\n            my $Ensembl_id = $1;\n\n            if ( !exists $gene{$Ensembl_id} ) {\n                $gene{$Ensembl_id} = 1;\n            }\n            else {\n                next;\n            }\n\n            if ( m/gene_biotype:(\\w+)/ ) {\n\n                my $gene_biotype = $1;\n\n                if ( m/gene_symbol:(\\w+\\D\\d+)/ ) {\n\n                    my $gene_symbol = $1;\n\n                    if ( m/description:(\\w+\\s+\\w+\\s+\\w+\\s+)/ ) {\n\n                        my $gene_description = $1;\n\n                        if ( m/MGI:(\\d+)/ ) {\n\n                            my $MGI_accession = $1;\n                            my $sth           = $dbh-&gt;prepare(\n                                qq{insert into $mouse_genes (Ensembl_id,gene_biotype,gene_symbol,gene_description,MGI_accession) values (\"$Ensembl_id\",\"$gene_biotype\",\"$gene_symbol\",\"$gene_description\",\"$MGI_accession\")}\n                            );\n                            $sth-&gt;execute();\n                            $sth-&gt;finish();\n\n                            next LOOP;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nclose FILE;\n\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>How I can use the <code>exists</code> operator to move to the next line of the file if the primary key <code>$Ensembl_id</code> is duplicated?</p>\n"}, {"tags": ["perl", "cgi", "mod-perl"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480363850, "post_id": 40852487, "comment_id": 68921984, "body": "Amazing, thank you! Is there a reason why it&#39;s not &quot;standard&quot;? Any big drawbacks about this approach?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480366237, "post_id": 40852487, "comment_id": 68923186, "body": "HTML <code>&lt;form&gt;</code> elements will pass arguments in a query string, so that&#39;s the de facto &quot;standard&quot; way of passing arguments to a script. You also have to use absolute paths when loading subresources from a script configured to use this, as any relative paths will be relative to the last part of the query string."}, {"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480369233, "post_id": 40852487, "comment_id": 68924578, "body": "Can you expand on the last sentence? Does the script then &quot;think&quot; it runs in /script.cgi/foo/bar? I want to use this method to determine which content to display as it seems more clear in the URL than ?lang=foo;page=bar"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480373370, "post_id": 40852487, "comment_id": 68926366, "body": "Example: If you reference an image as <code>&lt;img src=&quot;image.jpeg&quot;&gt;</code> from <code>http:&#47;&#47;example.com&#47;script.cgi&#47;path&#47;info</code>, the browser will try to load it from <code>http:&#47;&#47;example.com&#47;script.cgi&#47;path&#47;image.jpeg</code>, which probably isn&#39;t correct."}, {"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480373779, "post_id": 40852487, "comment_id": 68926529, "body": "Is it possible to work around this by using chdir or altering the PATH_INFO after parsing? or should that be avoided?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480374457, "post_id": 40852487, "comment_id": 68926791, "body": "No. Path resolution is handled by the browser, which has no idea what&#39;s going on behind the scenes. You can use a <code>&lt;base&gt;</code> element in the HTML document, though."}, {"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480376426, "post_id": 40852487, "comment_id": 68927419, "body": "One last (and a bit subjective) question, would that be considered bad style?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480377922, "post_id": 40852487, "comment_id": 68927825, "body": "Would what be considered bad style? If you mean using PATH_INFO\u2026 depends on what you&#39;re using it for"}, {"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480378329, "post_id": 40852487, "comment_id": 68927946, "body": "I mean using PATH_INFO just to have a clearer URL and fixing the directory with a &lt;base&gt; tag. by clearer I mean <code>www.domain.org&#47;script&#47;EN&#47;foo&#47;bar</code> instead of <code>www.domain.org&#47;script?lang=en;1=foo;2=bar</code>"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480378441, "post_id": 40852487, "comment_id": 68927984, "body": "Using PATH_INFO: Good. Using <code>&lt;base&gt;</code>: Best avoided; use absolute URLs instead."}, {"owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "edited": false, "score": 0, "creation_date": 1480378533, "post_id": 40852487, "comment_id": 68928010, "body": "Thanks for the extended help"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 4, "last_activity_date": 1480363222, "creation_date": 1480363222, "answer_id": 40852487, "question_id": 40852195, "link": "https://stackoverflow.com/questions/40852195/perl-parsing-cgi-parameters/40852487#40852487", "title": "perl parsing cgi parameters", "body": "<p>Yes. If a CGI script is called from a URL of the form:</p>\n\n<pre><code>http://example.com/path/to/script.cgi/foo/bar\n</code></pre>\n\n<p>then the path <code>/foo/bar</code> will be available in the environment variable <code>PATH_INFO</code>.</p>\n\n<p>If you're using CGI.pm, this is also available in <code>$q-&gt;path_info</code>. If you're using mod_perl, <code>Apache2::RequestRec</code> has the same method.</p>\n"}], "owner": {"reputation": 25, "user_id": 7183174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b24e10255bb5c2e46909aa5f60c4c44?s=128&d=identicon&r=PG&f=1", "display_name": "user7183174", "link": "https://stackoverflow.com/users/7183174/user7183174"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 40852487, "answer_count": 1, "score": 1, "last_activity_date": 1480363222, "creation_date": 1480362041, "question_id": 40852195, "link": "https://stackoverflow.com/questions/40852195/perl-parsing-cgi-parameters", "title": "perl parsing cgi parameters", "body": "<p>I remember reading somewhere that it's possible to pass arguments to a perl cgi script as such: \n<code>www.example.org/cgiscript/arg1/arg2/arg3</code></p>\n\n<p>I don't remember where I read it and searching didn't help me, so can anybody tell me if this actually works and if yes, how? Is this a mod_perl thing?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480390150, "post_id": 40851718, "comment_id": 68930983, "body": "If &quot;<i>none of the suggestions work</i>&quot; I&#39;d guess that you haven&#39;t explained the data well enough.  What you show works in my answer, with the script and with the one-liner.  For example -- do you have that one segment of data (one line or mulitple lines, but one log) in one file? Or do you have more logs in a single file?  Please check the data you show, is it indeed what you have? I copy-pasted your example into a file and wrote my answer with it."}], "answers": [{"comments": [{"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480369238, "post_id": 40851870, "comment_id": 68924583, "body": "hi there, if I use the above in <code>perl -ne &#39;s&#47;\\).*?&lt;&lt;(.*?);&#47;$1&#47;gs; print;&#39; &lt;filename&gt;</code> it does not work. Am I somehow not usng it right?"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480370746, "post_id": 40851870, "comment_id": 68925258, "body": "@nass the replacement string you are using is <code>$1</code>, the one I gave you is <code>, $1);</code>"}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480371646, "post_id": 40851870, "comment_id": 68925633, "body": "hi there, but this only affects the replacement. For the moment the pattern matching fails - even though it works in the live demo. This is puzzling. So even with <code>, $1);</code> I still do not get the correct result"}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480372841, "post_id": 40851870, "comment_id": 68926126, "body": "my perl version is : <code>perl 5, version 18, subversion 2 (v5.18.2)</code> hopefully there is no newer functionality used in you suggestion:). right?"}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480374993, "post_id": 40851870, "comment_id": 68926931, "body": "Could you please try your working demo exactly in a linux cli and tell me if it runs fine for you with the command <code>perl -ne &#39;\\).*?&lt;&lt;(.*?);&#47;, \\1);&#47;gs; print; &lt;text as in working demo&gt;</code>  ? thank you"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480375777, "post_id": 40851870, "comment_id": 68927201, "body": "@nass if you are using the command line, then you have to escape the special characters. For instace you have to escape parentheses"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480375858, "post_id": 40851870, "comment_id": 68927231, "body": "@nass theck at the regex101 generated code in this link <a href=\"https://regex101.com/r/d9XEAN/2/codegen?language=perl\" rel=\"nofollow noreferrer\">regex101.com/r/d9XEAN/2/codegen?language=perl</a>"}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "reply_to_user": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1480376139, "post_id": 40851870, "comment_id": 68927316, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/129293/discussion-between-nass-and-federico-piazza\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 1, "last_activity_date": 1480361195, "last_edit_date": 1480361195, "creation_date": 1480360838, "answer_id": 40851870, "question_id": 40851718, "link": "https://stackoverflow.com/questions/40851718/matching-multiple-line-string-with-perl-regex-and-doing-a-replace/40851870#40851870", "title": "matching multiple line string with perl regex and doing a replace", "body": "<p>You can use a regex like this with <code>s</code> (single line flag):</p>\n\n<pre><code>\\).*?&lt;&lt;(.*?);\n</code></pre>\n\n<p>And the replacement string:</p>\n\n<pre><code>, \\1);\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/d9XEAN/2\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1480362666, "last_edit_date": 1480362666, "creation_date": 1480362330, "answer_id": 40852272, "question_id": 40851718, "link": "https://stackoverflow.com/questions/40851718/matching-multiple-line-string-with-perl-regex-and-doing-a-replace/40852272#40852272", "title": "matching multiple line string with perl regex and doing a replace", "body": "<p>Here is a way to do it:</p>\n\n<pre><code>use Modern::Perl;\n\nmy @lines = (\n'STDOUT_LOG(logDEBUG4) &lt;&lt; \"a single line log text\" &lt;&lt; aVariable;',\n'        STDOUT_LOG(logDEBUG4)\n            &lt;&lt; bsd-&gt;sensorName\n            &lt;&lt; \" trainMinValueInWin = \" &lt;&lt; value.trough\n            &lt;&lt; \" trainMaxValueInWin = \" &lt;&lt; value.peak\n            &lt;&lt; \" |\";'\n);\nfor (@lines) {\n    s/(STDOUT_LOG\\(.*?)\\)(\\s*)&lt;&lt;(.*?);/$1, $2$3);/gs;\n    say;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>STDOUT_LOG(logDEBUG4, \"a single line log text\" &lt;&lt; aVariable);\n        STDOUT_LOG(logDEBUG4, \n            bsd-&gt;sensorName\n            &lt;&lt; \" trainMinValueInWin = \" &lt;&lt; value.trough\n            &lt;&lt; \" trainMaxValueInWin = \" &lt;&lt; value.peak\n            &lt;&lt; \" |\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480372723, "post_id": 40852382, "comment_id": 68926073, "body": "hi there, I am abit fuzzy about the <code>(my $newlog = $log) =~ </code> part. could you elaborate, please? Also, should I assume that a full single liner perl command would look like : <code>perl -ne &#39;(my $newlog = $log) =~ s&#47;STDOUT_LOG\\K \\( ([^)]+) \\) ([^;]+);&#47;($1,$2);&#47;xs;&#39; &lt;filename&gt;</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480377909, "post_id": 40852382, "comment_id": 68927820, "body": "@nass  I added some explanations, please look over it again. What you ask is an idiom of sorts -- the <code>$log</code> is copied into <code>$newlog</code> so that the substitution is done on that, leaving <code>$log</code> unchanged. It is not essential and I removed it, so now <code>$log</code> is changed in place.  I added a one-liner version. Let me know how it goes now."}, {"owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480435735, "post_id": 40852382, "comment_id": 68956474, "body": "hi there and thank you for the help. nope unfortunately neither the one liner works. I wonder what needs escaping in bash..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480445468, "post_id": 40852382, "comment_id": 68962223, "body": "@nass Why &quot;<i>escaping in bash</i>&quot; ... ?  There is no relation of one-liner to that. What is inside <code>&#39;&#39;</code> is directly passed to the <code>perl</code> command, the shell doesn&#39;t touch it.  If these are no good the question is about the data. Here is what I did. The script and one-liner work for a file <code>log.txt</code> containing literal text from your example. I copy-pasted <code>STDOUT_LOG(logDEBUG4)</code> and all following lines, concluding with <code>&lt;&lt; &quot; |&quot;;</code>.  So the file <code>log.txt</code> has those five lines. Is this understanding of your data wrong?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "edited": false, "score": 0, "creation_date": 1480446021, "post_id": 40852382, "comment_id": 68962550, "body": "@nass Just in case -- these aren&#39;t meant to be <code>cout</code> statements, right? For example, <code>&lt;&lt; &quot; trainMinValueInWin = &quot; &lt;&lt; value.trough</code> is just a literal line of text, a string of  characters to process, right? This is how I understood it.  So you have <code>LOG(label) ...text...;</code> which needs to become <code>LOG(label, ...text...);</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1562022325, "last_edit_date": 1562022325, "creation_date": 1480362801, "answer_id": 40852382, "question_id": 40851718, "link": "https://stackoverflow.com/questions/40851718/matching-multiple-line-string-with-perl-regex-and-doing-a-replace/40852382#40852382", "title": "matching multiple line string with perl regex and doing a replace", "body": "<p>With <code>$log</code> string containing the whole log, with newlines and all,</p>\n\n<pre><code>$log =~ s/STDOUT_LOG\\K \\( ( [^)]+ ) \\) ( [^;]+ );/($1,$2);/xs;\n</code></pre>\n\n<p>The <code>[^)]+</code> matches up to the first closing parentheses, and likewise <code>[^;]+</code> goes to the first <code>;</code>. You do not need nor want the <code>/g</code> modifier.  The <code>/x</code> allows spaces for readability.</p>\n\n<p>The <code>\\K</code> is a particular form of the <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">positive lookbehind</a>, which also discards all previous matches. So the pattern before it, used as an assertion, is not affected by the substitution. See it <a href=\"http://perldoc.perl.org/5.8.9/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">in perlretut</a>.  It is not essential here, but if you leave it out then <code>STDOUT_LOG</code> is consumed by the match and so it need be typed in as well in the replacement part. It's just cleaner this way.</p>\n\n<p>Since there could be a problem with how the log is input here is a complete program</p>\n\n<pre><code>use warnings 'all';\nuse strict;\n\nmy $logfile = 'log.txt';\nmy $log = do {\n    local $/; \n    open my $fh, '&lt;', $logfile or die \"Can't open $logfile: $!\";\n    &lt;$fh&gt;;\n};\n# print $log;\n\n$log =~ s/STDOUT_LOG\\K \\( ([^)]+) \\) ([^;]+);/($1,$2);/xs;\n\nprint $log;\n</code></pre>\n\n<p>The <code>do</code> block allows us to <em>slurp</em> the whole file <code>$logfile</code> into the <code>$log</code> variable, by unsetting <code>$INPUT_RECORD_SEPARATOR</code> (or <code>$/</code>), within the block by <a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a>. See discussions in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>.</p>\n\n<hr>\n\n<p>If this is meant to be done with a one-liner</p>\n\n<pre><code>perl -0777 -pe 's/STDOUT_LOG\\K \\( ([^)]+) \\) ([^;]+);/($1,$2);/xs;' log.txt\n</code></pre>\n\n<p>The <code>-0777</code> makes it slurp the whole file into <code>$_</code>, and the substitution is by default done on it. The <code>-p</code> also prints <code>$_</code> after each line is processed (and here we only have one \"line\" -- the whole file). See <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a> for command line switches and <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar</a> for <code>$_</code>.</p>\n\n<hr>\n\n<p>Both these assume that the shown example of a log (one-liner or the multi-line one) stands on its own, that there is a single log-string to process. For simplicity I took that to be in a file <code>log.txt</code> and read it from that file, into the <code>$log</code> variable in the script and into <code>$_</code> in the one-liner.</p>\n"}, {"tags": [], "owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "is_accepted": true, "score": 0, "last_activity_date": 1480536039, "creation_date": 1480536039, "answer_id": 40897114, "question_id": 40851718, "link": "https://stackoverflow.com/questions/40851718/matching-multiple-line-string-with-perl-regex-and-doing-a-replace/40897114#40897114", "title": "matching multiple line string with perl regex and doing a replace", "body": "<p>In the end the command that successfully did what I wanted was the following:</p>\n\n<pre><code>perl -0777pne 's/STDOUT_LOG\\((.*?)\\)(.*?)&lt;&lt;(.*?);/STDOUT_LOG\\(\\1\\,\\2\\3\\);/gs' sensor.cpp\n</code></pre>\n\n<p>This is alot a superposition for the answers of \"Federico Piazza\" and \"zdim\". You'll notice I prepended the \"STDOUT_LOG\" bit in the front to really much exactly what I wanted in a large number of source files. I noticed that for correct matching one MUST include the <code>/s</code> operator at the end of the regex , but also add the <code>-0777</code> flag in the perl executable.</p>\n\n<p>see <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a> for an explanation of the runtime perl executable flags</p>\n"}], "owner": {"reputation": 1271, "user_id": 959179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/695402d9a3f42056c84787ef2c944496?s=128&d=identicon&r=PG", "display_name": "nass", "link": "https://stackoverflow.com/users/959179/nass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 0, "accepted_answer_id": 40897114, "answer_count": 4, "score": 1, "last_activity_date": 1562022325, "creation_date": 1480360298, "last_edit_date": 1480373140, "question_id": 40851718, "link": "https://stackoverflow.com/questions/40851718/matching-multiple-line-string-with-perl-regex-and-doing-a-replace", "title": "matching multiple line string with perl regex and doing a replace", "body": "<p>I have a source file where I use a macro to do logging. Typical logging lines look like:</p>\n\n<pre><code>STDOUT_LOG(logDEBUG4) &lt;&lt; \"a single line log text\" &lt;&lt; aVariable;\n</code></pre>\n\n<p>the exist some multiline log commands as well:</p>\n\n<pre><code>        STDOUT_LOG(logDEBUG4)\n            &lt;&lt; bsd-&gt;sensorName\n            &lt;&lt; \" trainMinValueInWin = \" &lt;&lt; value.trough\n            &lt;&lt; \" trainMaxValueInWin = \" &lt;&lt; value.peak\n            &lt;&lt; \" |\";\n</code></pre>\n\n<p>The idea is to grab the log string (whether it is in single line or multiple lines) and place them in the parenthesis of the macro.</p>\n\n<p>Typically the end result would be something like:</p>\n\n<pre><code> STDOUT_LOG(logDEBUG4,\"a single line log text\" &lt;&lt; aVariable);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>        STDOUT_LOG(logDEBUG4,\n            bsd-&gt;sensorName\n            &lt;&lt; \" trainMinValueInWin = \" &lt;&lt; value.trough\n            &lt;&lt; \" trainMaxValueInWin = \" &lt;&lt; value.peak\n            &lt;&lt; \" |\");\n</code></pre>\n\n<p>I am trying to read up on anything related to multiline matching, including while loops in perl, the <code>/s</code> amd <code>/m</code> operators and potential ways to search and replace, but I am very far from correctly matching the multiline macro. I assume I need the /s operator in order for the \".\" to match newline characters too, but I have not been able to successfully use it.</p>\n\n<p>The beginning of the pattern is of course \"STDOUT_LOG\" and the end is the first occurrence of \";\" however many lines later it shows up.</p>\n\n<p>this attempt</p>\n\n<pre><code> perl -ne 's/STDOUT_LOG\\((.*?)\\)(.*?)\\;/STDOUT_LOG($1,$2)\\;/gs; print;'\n</code></pre>\n\n<p>manages to pick up the log level (\"logDEBUG4\" in this case) is \"sort\" of OK for single line log commands, but matching of the rest of the lines fails even though I used the /s in the end.</p>\n\n<p>How do I approach this problem? what other operators should I use? any good tutorials out there? ultimately is there a perl command that can save the day?</p>\n\n<p>EDIT:\nsince none of the suggestions work out of the box for me (the pattern matching fails and as a result nothing is changed), I wonder if there is some newer functionality involved here. In any case my perl version is 5.18.2. I am trying to run the commands in a linux cli as follows:</p>\n\n<pre><code>perl -ne 's/pattern/replace/gs; print;' &lt;filename&gt;\n</code></pre>\n\n<p>I hope I am not doing something wrong here</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 399, "user_id": 1502001, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/23e7523331d7ac755da4ebefacc05830?s=128&d=identicon&r=PG", "display_name": "ro ra", "link": "https://stackoverflow.com/users/1502001/ro-ra"}, "edited": false, "score": 0, "creation_date": 1480353781, "post_id": 40849833, "comment_id": 68916595, "body": "Why it is marked as duplicate? did i post it twice?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1480355232, "post_id": 40849833, "comment_id": 68917420, "body": "I don&#39;t think this is a duplicate of the specified answered question. The OP is wanting to know how to redirect messages from <code>die()</code> to a file, not how to write to a file..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480397679, "post_id": 40849833, "comment_id": 68932967, "body": "The simplest way is to redirect the program&#39;s STDERR, which would also catch warnings. e.g. <code>script.pl 2&gt;log</code> Other options include running your entire program in an <code>eval { }</code> or you could hook into <code>$SIG{__DIE__}</code>. Neither of these will catch warnings, which matches your request, but are unlikely what you actually want."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 4, "last_activity_date": 1480400060, "creation_date": 1480400060, "answer_id": 40858941, "question_id": 40849833, "link": "https://stackoverflow.com/questions/40849833/redirect-die-messages-to-a-file/40858941#40858941", "title": "Redirect die messages to a file", "body": "<p>From <a href=\"http://perldoc.perl.org/perlvar.html#%24SIG%7Bexpr%7D\" rel=\"nofollow noreferrer\">perlvar</a></p>\n\n<blockquote>\n  <p>The routine indicated by <code>$SIG{__DIE__}</code> is called when a fatal\n  exception is about to be thrown. The error message is passed as the\n  first argument.</p>\n</blockquote>\n\n<p>You can use it like below:</p>\n\n<pre><code>local $SIG{__DIE__} = sub {\n    my ($die_message) = @_;\n    open (my $log, \"&gt;&gt;\", '/tmp/die.log');\n    print $log $die_message;\n};\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 1502001, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/23e7523331d7ac755da4ebefacc05830?s=128&d=identicon&r=PG", "display_name": "ro ra", "link": "https://stackoverflow.com/users/1502001/ro-ra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483040631, "creation_date": 1480353070, "last_edit_date": 1483040631, "question_id": 40849833, "link": "https://stackoverflow.com/questions/40849833/redirect-die-messages-to-a-file", "title": "Redirect die messages to a file", "body": "<p>I'm opening a file like below:</p>\n\n<pre><code>open (my $fh, '&lt;', $query_file) or die \"Query for specified metric does not exist : $!\";\nmy $query = &lt;$fh&gt;;\nclose $fh;\n</code></pre>\n\n<p>When the file does not exist it writes the error message on console but I would like to save this message in a file.</p>\n\n<p>How it can be done?</p>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 5566, "user_id": 1771479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5m0gd.jpg?s=128&g=1", "display_name": "agold", "link": "https://stackoverflow.com/users/1771479/agold"}, "edited": false, "score": 0, "creation_date": 1480350379, "post_id": 40848811, "comment_id": 68914494, "body": "Can you show (in the question) what you have tried so far?"}, {"owner": {"reputation": 13, "user_id": 7220882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bBIH.png?s=128&g=1", "display_name": "BrunoGG", "link": "https://stackoverflow.com/users/7220882/brunogg"}, "reply_to_user": {"reputation": 5566, "user_id": 1771479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5m0gd.jpg?s=128&g=1", "display_name": "agold", "link": "https://stackoverflow.com/users/1771479/agold"}, "edited": false, "score": 0, "creation_date": 1480350646, "post_id": 40848811, "comment_id": 68914668, "body": "Basically join, tried some grep, and lots of searching for something similar, but nothing that I could implement or modify, maybe due to my lack of coding knowledge. Join does exactly what I want but work for only two files."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1480351053, "post_id": 40848811, "comment_id": 68914918, "body": "You can use the <code>program.awk</code> in the following link. Modify the <code>OFS</code> to your needs (<code>OFS=&quot;\\t&quot;</code> I&#39;d assume). Also, output record order is random. <a href=\"http://stackoverflow.com/questions/40373180/bash-combining-files-into-csvs/40408764#40408764\" title=\"bash combining files into csvs\">stackoverflow.com/questions/40373180/&hellip;</a>"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1480353587, "post_id": 40848811, "comment_id": 68916486, "body": "join with 3 files <code>join -a 1 -a 2 -e &quot;&quot; -o 0,1.2,2.2 S01.tsv S02.tsv | join -a 1 -a 2 -e &quot;&quot; -o 0,1.2,1.3,2.2 - S03.tsv</code> ..... <a href=\"http://stackoverflow.com/questions/10726471/join-multiple-files\">view join-multiple-files</a>"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1480358120, "post_id": 40848811, "comment_id": 68918942, "body": "It doesn&#39;t output in order, you need to use <code>sort</code> for the output or control the scanning of <code>for</code>, see <a href=\"https://www.gnu.org/software/gawk/manual/html_node/Controlling-Scanning.html\" rel=\"nofollow noreferrer\">here</a>. <code>awk -f compile.awk S*.tsv | sort</code>. Also, if your first field is so lengthy, tabs are not going to do it, you need <code>printf</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7220882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bBIH.png?s=128&g=1", "display_name": "BrunoGG", "link": "https://stackoverflow.com/users/7220882/brunogg"}, "edited": false, "score": 0, "creation_date": 1480441629, "post_id": 40850542, "comment_id": 68960131, "body": "This perl script work like a charm! I just comment (#) the debugging print lines for the final version, thanks."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1480355532, "creation_date": 1480355532, "answer_id": 40850542, "question_id": 40848811, "link": "https://stackoverflow.com/questions/40848811/merge-many-tsv-files-by-first-column/40850542#40850542", "title": "Merge many TSV files by first column", "body": "<p>I would probably tackle it something like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @header; \nmy %all_rows;\nmy %seen_cols;\n\n\n#read STDIN or files specified as args. \nwhile ( &lt;&gt; ) {\n   #detect a header row by keyword. \n   #can probably do this after 'open' but this way\n   #means we can use &lt;&gt; and an arbitrary file list. \n   if ( m/^Accesion/ ) { \n      @header = split;       \n      shift @header; #drop \"accession\" off the list so it's just S01,02,03 etc. \n      $seen_cols{$_}++ for @header; #keep track of uniques. \n   }\n   else {\n      #not a header row - split the row on whitespace.\n      #can do /\\t/ if that's not good enough, but it looks like it should be. \n      my ( $ID, @fields ) = split; \n      #use has slice to populate row.\n\n      my %this_row;\n      @this_row{@header} = @fields;\n\n      #debugging\n      print Dumper \\%this_row; \n\n      #push each field onto the all rows hash. \n      foreach my $column ( @header ) {\n         #append current to field, in case there's duplicates (no overwriting)\n         $all_rows{$ID}{$column} .= $this_row{$column}; \n      }\n   }\n}\n\n#print for debugging\nprint Dumper \\%all_rows;\nprint Dumper \\%seen_cols;\n\n#grab list of column headings we've seen, and order them. \nmy @cols_to_print = sort keys %seen_cols;\n\n#print header row. \nprint join \"\\t\", \"Accesion\", @cols_to_print,\"\\n\";\n#iteate keys, and splice. \nforeach my $key ( sort keys %all_rows ) { \n    #print one row at a time.\n    #map iterates all the columns, and gives the value or an empty string\n    #if it's undefined. (prevents errors)\n    print join \"\\t\", $key, (map { $all_rows{$key}{$_} // '' } @cols_to_print),\"\\n\"\n}\n</code></pre>\n\n<p>Given your input - with debugging excluded - prints:</p>\n\n<pre><code>Accesion    S01 S02 S03 \nAJ863320    1   2   5   \nAM930424    1   1       \nAY664038    2           \nEU236327        1   2   \nEU434346        2   2   \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7220882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bBIH.png?s=128&g=1", "display_name": "BrunoGG", "link": "https://stackoverflow.com/users/7220882/brunogg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 40850542, "answer_count": 1, "score": 1, "last_activity_date": 1480355532, "creation_date": 1480349579, "last_edit_date": 1480353870, "question_id": 40848811, "link": "https://stackoverflow.com/questions/40848811/merge-many-tsv-files-by-first-column", "title": "Merge many TSV files by first column", "body": "<p>I have many (dozens) TSV files in a directory that have only two columns, I want to merge all of them based on the first column value (both columns have headers that I need to maintain); if this value is present then it must add the value of the corresponding second column, and so on (see example). Files might have different number of lines and not ordered by first column, although this can be easily done with sort.</p>\n\n<p>I have tried <strong>join</strong> but that works nicely for only two files. Can join be expanded for all files in a directory? I think <strong>awk</strong> might be a better solution, but my knowledge in awk is very very limited. Any ideas?</p>\n\n<p>Here are the example of just three files:</p>\n\n<pre><code>S01.tsv\n\nAccesion    S01  \nAJ863320    1  \nAM930424    1  \nAY664038    2\n\nS02.tsv\n\nAccesion    S02  \nAJ863320    2  \nAM930424    1  \nEU236327    1  \nEU434346    2 \n\nS03.tsv\n\nAccesion    S03  \nAJ863320    5  \nEU236327    2  \nEU434346    2\n</code></pre>\n\n<p>Outfile should be:</p>\n\n<pre><code>    Accesion    S01   S02   S03  \n    AJ863320    1     2     5  \n    AM930424    1     1\n    AY664038    2  \n    EU236327          1     2  \n    EU434346          2     2\n</code></pre>\n\n<p>OK, thanks to James Brown I got this code working (I named it compile.awk) with a few glitches:</p>\n\n<pre><code>BEGIN { OFS=\"\\t\" }                            # tab separated columns\nFNR==1 { f++ }                                # counter of files\n{\n    a[0][$1]=$1                               # reset the key for every record \n    for(i=2;i&lt;=NF;i++)                        # for each non-key element\n        a[f][$1]=a[f][$1] $i ( i==NF?\"\":OFS ) # combine them to array element\n}\nEND {                                         # in the end\n    for(i in a[0])                            # go thru every key\n        for(j=0;j&lt;=f;j++)                     # and all related array elements\n            printf \"%s%s\", a[j][i], (j==f?ORS:OFS)\n}                                             # output them, nonexistent will output empty\n</code></pre>\n\n<p>When I ran it with the actual files as</p>\n\n<pre><code>awk -f compile.awk 01.tsv 02.tsv 03.tsv\n</code></pre>\n\n<p>I get the output as:</p>\n\n<pre><code>LN854586.1.1236         1\nJF128382.1.1303     1   \nAccesion    S01 S02 S03\nJN233077.1.1420 1       \nHQ836180.1.1388     1   \nKP718814.1.1338         1\nJQ781640.1.1200         2\n</code></pre>\n\n<p>The first two lines do not belong there as the file should start with the headers (line three) of all files.\nAny ideas how to fix this?</p>\n"}, {"tags": ["perl", "timeout", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "edited": false, "score": 0, "creation_date": 1480796545, "post_id": 40848511, "comment_id": 69113916, "body": "Thanks, but this does not work. I am using $w-&gt;use_plugin(&#39;JavaScript&#39;);  \t also...there is no timeout at all :( Any other ideas?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1480348748, "creation_date": 1480348748, "answer_id": 40848511, "question_id": 40848411, "link": "https://stackoverflow.com/questions/40848411/how-to-do-a-timeout-in-wwwscripter/40848511#40848511", "title": "How to do a timeout in WWW::Scripter", "body": "<p><a href=\"https://metacpan.org/pod/WWW::Scripter\" rel=\"nofollow noreferrer\">WWW::Scripter</a> is a subclass of <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\">WWW::Mechanize</a>. And WWW::Mechanize is, in turn, a subclass of <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>. So you can call all of LWP::UserAgent's methods on your WWW::Scripter object. And that includes <code>timeout()</code>.</p>\n\n<pre><code>my $scripter = WWW::Scripter-&gt;new;\n$scripter-&gt;timeout(10);\n$scripter-&gt;get($some_url);\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 5195778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/76625f2105397904d15891d665a9a2fc?s=128&d=identicon&r=PG&f=1", "display_name": "JOhnlw009a", "link": "https://stackoverflow.com/users/5195778/johnlw009a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480362382, "creation_date": 1480348407, "last_edit_date": 1480362382, "question_id": 40848411, "link": "https://stackoverflow.com/questions/40848411/how-to-do-a-timeout-in-wwwscripter", "title": "How to do a timeout in WWW::Scripter", "body": "<p>I'm parsing a web site using <code>WWW::Scripter</code> for Perl.</p>\n\n<p>Is there a way to include a timeout, e.g. 10 seconds. <code>eval</code> generally works for timeouts quite well, but in this case, it does not.</p>\n\n<p><a href=\"http://search.cpan.org/~sprout/WWW-Scripter-Plugin-JavaScript-0.009/lib/WWW/Scripter/Plugin/JavaScript.pm\" rel=\"nofollow\"><code>WWW::Scripter::Plugin::JavaScript</code></a></p>\n"}, {"tags": ["macos", "perl", "tk", "cpan"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1480350883, "post_id": 40847122, "comment_id": 68914809, "body": "Can you provide some more lines from the error message?"}, {"owner": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1480367886, "post_id": 40847122, "comment_id": 68923964, "body": "Thank you for your response.  I am updating my initial post with the full log of the make test command."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1480372736, "post_id": 40847122, "comment_id": 68926079, "body": "Hi Gauthier. Thanks for the update. Unfortunately, I am not so familiar with mac os, I am using mostly Linux. But I have an old mac which I now tried for fun installing Tk on.  However, I ran into <a href=\"https://discussions.apple.com/thread/7022116?start=0&amp;tstart=0\" rel=\"nofollow noreferrer\">this issue</a>.. Hope you can get help from someone more familiar with mac os."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1480374362, "post_id": 40847122, "comment_id": 68926759, "body": "May be related to <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=106958\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=106958</a>  I have had to disable tests to get Tk to install on various platforms."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "edited": false, "score": 0, "creation_date": 1480347361, "post_id": 40847804, "comment_id": 68912680, "body": "Thank you for your help :-) Unfortunately I run into the exact same error with this process too..."}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "reply_to_user": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "edited": false, "score": 0, "creation_date": 1480347858, "post_id": 40847804, "comment_id": 68913001, "body": "Nothing was built?"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "reply_to_user": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "edited": false, "score": 0, "creation_date": 1480347866, "post_id": 40847804, "comment_id": 68913008, "body": "find . -iname &#39;*.so&#39; -exec ls -l {} \\;"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "reply_to_user": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "edited": false, "score": 0, "creation_date": 1480347904, "post_id": 40847804, "comment_id": 68913035, "body": "perl -Mblib basic_demo"}, {"owner": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "edited": false, "score": 0, "creation_date": 1480367733, "post_id": 40847804, "comment_id": 68923904, "body": "Well, I ran make test and the same error shown. Regarding your suggestion, I didn&#39;t understand what you told me to do, when in the module&#39;s directory there is no basic demo file. Files were created, but for some reason unlike other modules I have installed, it doesn&#39;t go through the install process."}], "tags": [], "owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "is_accepted": false, "score": 0, "last_activity_date": 1480346589, "creation_date": 1480346589, "answer_id": 40847804, "question_id": 40847122, "link": "https://stackoverflow.com/questions/40847122/issues-installing-tk-module-via-cpan/40847804#40847804", "title": "Issues installing Tk module via Cpan", "body": "<p>Try it manually, as stated into file INSTALL:<br>\n- download Tkxxxxxx.tar.gz from CPAN<br>\n- zcat Tkxxxxx.tar.gz | tar xf -<br>\n- cd to the directory distribution unpacks to.<br>\n- perl Makefile.PL<br>\n- make<br>\n- make test<br>\nif all is OK then sudo make install </p>\n"}], "owner": {"reputation": 11, "user_id": 7206993, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154489680845783/picture?type=large", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/7206993/gauthier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480367963, "creation_date": 1480344604, "last_edit_date": 1480367963, "question_id": 40847122, "link": "https://stackoverflow.com/questions/40847122/issues-installing-tk-module-via-cpan", "title": "Issues installing Tk module via Cpan", "body": "<p>I am trying to set up a text analysis software that requires a working version of the perl module Tk on mac os.\nHowever I can't install it through CPAN for some reason.\nI proceed by typing</p>\n\n<pre><code>sudo perl -MCPAN -e \"shell\"\n</code></pre>\n\n<p>then</p>\n\n<pre><code>install Tk\n</code></pre>\n\n<p>It runs the make install process and ends with this error</p>\n\n<pre><code>make[3]: Nothing to be done for `all-am'.\nmake[2]: Nothing to be done for `all'.\nmake[2]: *** No rule to make target `test_dynamic'.  Stop.\nmake[1]: *** [subdirs-test_dynamic] Error 2\nmake: *** [subdirs-test_dynamic] Error 2\n  SREZIC/Tk-804.033.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports SREZIC/Tk-804.033.tar.gz\nRunning make install\n  make test had returned bad status, won't install without force\n</code></pre>\n\n<p>Any clue on how I could workaround this issue?\nI am not quite familiar with perl so I'm really fumbling around here...\nAny help would be very much appreciated.\nThanks !</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>When trying to install the module manually, the make test command gives me this outcome:</p>\n\n<pre><code>\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Tk.bs blib/arch/auto/Tk/Tk.bs 644\ncd pTk &amp;&amp; make DEFINE=\"\" LIBPERL_A=\"libperl.a\" LINKTYPE=\"dynamic\" OPTIMIZE=\"-Os\" PREFIX=\"/usr/local\" PASTHRU_DEFINE=' ' PASTHRU_INC='-I/usr/X11R6/include -I/usr/local/include/freetype2 '\nManifying 102 pod documents\nManifying 1 pod document\nManifying 2 pod documents\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- X.bs ../../blib/arch/auto/Tk/X/X.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Xlib.bs ../blib/arch/auto/Tk/Xlib/Xlib.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- WinPhoto.bs ../blib/arch/auto/Tk/WinPhoto/WinPhoto.bs 644\nManifying 1 pod document\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Pixmap.bs ../blib/arch/auto/Tk/Pixmap/Pixmap.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- TixGrid.bs ../blib/arch/auto/Tk/TixGrid/TixGrid.bs 644\nManifying 1 pod document\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Text.bs ../blib/arch/auto/Tk/Text/Text.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- TList.bs ../blib/arch/auto/Tk/TList/TList.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Scrollbar.bs ../blib/arch/auto/Tk/Scrollbar/Scrollbar.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Scale.bs ../blib/arch/auto/Tk/Scale/Scale.bs 644\ncd zlib &amp;&amp; make libz.a \"CC=cc  \" RANLIB=\"/usr/bin/ar s\"\nmake[2]: `libz.a' is up to date.\n/Applications/Xcode.app/Contents/Developer/usr/bin/make  all-am\nmake[3]: Nothing to be done for `all-am'.\nmake[2]: Nothing to be done for `all'.\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- PNG.bs ../blib/arch/auto/Tk/PNG/PNG.bs 644\nManifying 1 pod document\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- NBFrame.bs ../blib/arch/auto/Tk/NBFrame/NBFrame.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Mwm.bs ../blib/arch/auto/Tk/Mwm/Mwm.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Menubutton.bs ../blib/arch/auto/Tk/Menubutton/Menubutton.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Listbox.bs ../blib/arch/auto/Tk/Listbox/Listbox.bs 644\ncd jpeg &amp;&amp; make libjpeg.a\nmake[2]: `libjpeg.a' is up to date.\nmake[2]: Nothing to be done for `all'.\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- JPEG.bs ../blib/arch/auto/Tk/JPEG/JPEG.bs 644\nManifying 1 pod document\nManifying 1 pod document\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- InputO.bs ../blib/arch/auto/Tk/InputO/InputO.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- IO.bs ../blib/arch/auto/Tk/IO/IO.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- HList.bs ../blib/arch/auto/Tk/HList/HList.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Event.bs ../blib/arch/auto/Tk/Event/Event.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Entry.bs ../blib/arch/auto/Tk/Entry/Entry.bs 644\nManifying 3 pod documents\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Compound.bs ../blib/arch/auto/Tk/Compound/Compound.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Canvas.bs ../blib/arch/auto/Tk/Canvas/Canvas.bs 644\n\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- PNG.bs ../blib/arch/auto/Tk/PNG/PNG.bs 644\ncd zlib &amp;&amp; make libz.a \"CC=cc  \" RANLIB=\"/usr/bin/ar s\"\nmake[2]: `libz.a' is up to date.\n/Applications/Xcode.app/Contents/Developer/usr/bin/make  all-am\nmake[3]: Nothing to be done for `all-am'.\nmake[2]: Nothing to be done for `all'.\nmake[2]: *** No rule to make target `test_dynamic'.  Stop.\nmake[1]: *** [subdirs-test_dynamic] Error 2\nmake: *** [subdirs-test_dynamic] Error 2\n</code></pre>\n"}, {"tags": ["windows", "perl", "permissions", "perl-module"], "comments": [{"owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "edited": false, "score": 0, "creation_date": 1480431814, "post_id": 40845250, "comment_id": 68953677, "body": "I&#39;m going to try this solution and I&#39;ll update: <a href=\"http://stackoverflow.com/a/302694/5965588\">stackoverflow.com/a/302694/5965588</a>  <code>my %permissions; Win32::FileSecurity::Get($dir, \\%permissions); $permissions{&#39;Power Users&#39;}   = MakeMask( qw( READ GENERIC_READ GENERIC_EXECUTE ) ) }); Win32::FileSecurity::Set($dir, \\%permissions);</code>"}, {"owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "edited": false, "score": 0, "creation_date": 1481553409, "post_id": 40845250, "comment_id": 69410509, "body": "The work with the FileSecurity almost worked but only for &quot;Get&quot; not for &quot;Set&quot;. more info in the question &quot;edit&quot; section."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "is_accepted": true, "score": 0, "last_activity_date": 1482401321, "creation_date": 1482401321, "answer_id": 41280574, "question_id": 40845250, "link": "https://stackoverflow.com/questions/40845250/what-is-the-best-practice-for-perl-getting-parent-folder-permissions-while-runni/41280574#41280574", "title": "what is the best practice for Perl getting parent folder permissions while running on windows", "body": "<p>Specifically for my case where the issue was the mixed mode on the network drive I found the next solution to be good enough for me.</p>\n\n<p>I call the \"icacls\" system command and set permissions manually for the domain users from the folder above.</p>\n\n<pre><code>my $error = system(\"icacls $CreatedDir /grant domain\\\\user:(OI)(CI)F /T\");\n</code></pre>\n\n<p>The code above gives full recursive permissions for the user to the folder that was created by the service with the admin user(which caused the folder to be locked only for the rood or admin user in our configuration).</p>\n\n<p>Note that the command above <strong>doesn't override</strong> existing permissions but it was good enough for me.</p>\n\n<p>So eventually I end up with a folder and files that are accessible to the user that called the specific service which runs with admin user.</p>\n"}], "owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 41280574, "answer_count": 1, "score": 0, "last_activity_date": 1482401321, "creation_date": 1480338906, "last_edit_date": 1481553811, "question_id": 40845250, "link": "https://stackoverflow.com/questions/40845250/what-is-the-best-practice-for-perl-getting-parent-folder-permissions-while-runni", "title": "what is the best practice for Perl getting parent folder permissions while running on windows", "body": "<p>I'm not much of a Perl developer but I need it to make triggers for perforce.  </p>\n\n<p>So this is the background:<br>\nI have a windows service that runs as admin that calls the Perl script on windows.</p>\n\n<p>The script needs to create a file on a network storage which is both configured to work with windows and UNIX permissions\\security types.  </p>\n\n<p>Since the user that is running the script is an admin user all folders and files that it creates under all directories are no inheriting the directories permissions but makes it editable only to root.</p>\n\n<p>What  I try to do is create the file and than chmod it to the parent folder's \"stat\" results.</p>\n\n<pre><code>my ($perms, $uid, $gid) = (stat $ParentDirFullPath)[2, 4, 5];  \n$perms = sprintf(\"%04o\", $perms &amp; 0777);\nchmod($perms, $NewFileFullPath);\n</code></pre>\n\n<p>The problem is that <code>stat</code> command on windows dosen't get the unix\\gid and unix\\uid + the <code>chmod</code> command is not really supported.</p>\n\n<p>I looked into the <code>file::stat</code> module to find a way for displaying windows permissions(since they are present there too) to take them and apply them with a command that I didn't test yet that should be probably under the module <code>Win32::FileSecurity</code>.\nI didn't find a way to get the permissions from there(I get <code>stat=ARRAY(0x46d0f8)</code>).</p>\n\n<p>Any ideas or suggestions?</p>\n\n<p>TL;DR:(\"How to?\" question) Running Perl script on windows that takes parent folder permissions and applies them on a file that the scripts creates in the network storage that supports both Windows and Unix security/permissions types(the permissions that I want to apply are windows like permissions for groups and users).</p>\n\n<p>Edit:<br>\nI tried the next code:</p>\n\n<pre><code>use Win32::FileSecurity qw(Get EnumerateRights);\nuse Win32;\n\nmy $dir1 = \"\\\\\\\\NetworkStorage\\\\home\\\\user1\";\nmy $dir2 = \"\\\\\\\\NetworkStorage\\\\home\\\\user1\\\\PerlFileSecTest\";\n\nmy %permissions;\nWin32::FileSecurity::Get($dir1, \\%permissions);\nWin32::FileSecurity::Set($dir2, \\%permissions);\n</code></pre>\n\n<p>And I get the next error:</p>\n\n<pre><code>S-1-5-11-2038111172-1292333386-11111-20315(this is not an original number and it changes this is unix FS user identifier that the AD knows how to parse)\nError handling error: 1332, LookupAccountName.\n</code></pre>\n\n<p>So it looks like the FileSecurity can't handle that user identifier that is coming from the unix based storage that supports both unixfs and NTFS.</p>\n\n<p>This is strange because when I choose a folder for example and do \"right click -> properties -> security tab\" I see the numbers and then they are parsed to unixUid\\user1 etc...</p>\n\n<p>Any idea how to solve it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1480334035, "post_id": 40843546, "comment_id": 68904234, "body": "You have a wrong bracket. You have <code>if { ... ) {</code> with an open curly <code>{</code> where you need an open parenthesis <code>(</code>, and you&#39;re missing the closing curly <code>}</code> for the <code>if</code> block. And <code>close $output</code> tries to close the filename. Your handle is called <code>$OUTPUT</code>. All-caps variable names are a bad choice. Name the filehandles <code>$fh</code>, <code>$fh_in</code>, <code>$fh_out</code> or just <code>$in</code> and <code>$out</code>, but not like something that sounds like a constant. Same for the other <code>close</code>."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480334151, "post_id": 40843546, "comment_id": 68904294, "body": "<code>print &quot;$tabfile[0]\\n&quot; &gt; $output;</code> I guess you mean <code>print $OUTPUT &quot;$tabfile[0]\\n&quot;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7219946"}, "edited": false, "score": 0, "creation_date": 1480334171, "post_id": 40843546, "comment_id": 68904306, "body": "Thanks for the reponse, I&#39;ve corrected the mistake and that error disappears. I now have another error &quot;Use of uninitialised value in numeric le (&lt;=) at line 22 (the if statement line). So it doesn&#39;t like my less than/equal to statement, do you know why?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480334567, "post_id": 40843546, "comment_id": 68904506, "body": "@zen_27 I don&#39;t think your file is <i>tab separated</i> properly. Try using <code>\\s+</code> instead of <code>\\t+</code> or only <code>split</code> to ignore <i>leading</i> and <i>trailing</i> spaces."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1480337524, "post_id": 40843546, "comment_id": 68906341, "body": "@zen_27: If you have a new problem, then it&#39;s best to write a new question for it."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1480340921, "post_id": 40843546, "comment_id": 68908403, "body": "The <code>for</code> loop is of no use except for repeating the <code>if</code> condition N times where N=<code>scalar(@tabfile)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480334763, "post_id": 40843645, "comment_id": 68904638, "body": "@simbabque: Thank you. I didn&#39;t expect there to be quite so many issues!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7219946"}, "edited": false, "score": 0, "creation_date": 1480335352, "post_id": 40843645, "comment_id": 68905000, "body": "Thankyou for your reply! Apolagies for the silly errors. I am using your open statement for the output file, but it doesn&#39;t like it. I get an error saying that: String found where operator expected at line10... near $fh_out &#39;&gt;&#39;&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480335456, "post_id": 40843645, "comment_id": 68905073, "body": "@zen_27: It looks like you&#39;re missing a comma"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 7, "last_activity_date": 1480340690, "last_edit_date": 1480340690, "creation_date": 1480333936, "answer_id": 40843645, "question_id": 40843546, "link": "https://stackoverflow.com/questions/40843546/why-is-perl-telling-me-that-my-array-is-undeclared-when-i-have-already-declared/40843645#40843645", "title": "Why is Perl telling me that my array is undeclared when I have already declared it?", "body": "<p>The errors that you describe aren't generated by that code. Here's a list of the problems that I can see</p>\n\n<ul>\n<li><p>You have declared <code>@tabfile</code> but are using <code>@tab_file</code></p></li>\n<li><p>Your statement <code>if {$tabfile[3] &lt; $tabfile [4]) {</code> has an opening brace instead of an opening parenthesis</p></li>\n<li><p>Your statement <code>print \"$tabfile[0]\\n\" &gt; $output</code> should be</p>\n\n<pre><code>print $OUTPUT \"$tabfile[0]\\n\";\n</code></pre></li>\n<li><p>The same statement is missing a closing brace</p></li>\n<li><p><code>close</code> requires a <em>file handle</em> parameter, not a file name, so your statements <code>close $output</code> and <code>close $tab_input</code> should be <code>close $OUTPUT</code> and <code>close $INPUT</code> respectively.</p></li>\n</ul>\n\n<p>I think it should look more like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nopen my $out_fh, '&gt;', 'output.txt' or die $!;\n\nwhile ( &lt;&gt; ) {\n\n    my @fields = split;\n\n    print $out_fh \"$fields[0]\\n\" if $fields[3] &lt; $fields [4];\n}\n\nprint \"Tab file parsing complete.\\n\";\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7219946"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 40843645, "answer_count": 1, "score": 1, "last_activity_date": 1480340690, "creation_date": 1480333617, "question_id": 40843546, "link": "https://stackoverflow.com/questions/40843546/why-is-perl-telling-me-that-my-array-is-undeclared-when-i-have-already-declared", "title": "Why is Perl telling me that my array is undeclared when I have already declared it?", "body": "<p>I have an input file that looks like this:</p>\n\n<pre><code>AC_000044.1_a_bothflanks_2kb_polyA.4    AAGTATAATAAAAAAAAAAAAGAAA   25  25  69646\n    AC_000044.1_aa_bothflanks_2kb_polyA.5   AAGTATAATAAAAAAAAATAATTAAAAAAAAAAAAAATAAAAAATAAAATAAAATAAAAATAAAAA  66  91  69644\n    AC_000044.1_ab_bothflanks_2kb_polyA.5   TATAATAAAAAAAAAAACATTAAAAATAAAAAATAAAAAATAAAAA  46  137 69647\n    AC_000044.1_ac_bothflanks_2kb_polyA.3   TATAATTAAAAAAAAAAAAAAAAAAAA 27  164 69642\n</code></pre>\n\n<p>5 pieces of information seperated by tabs. I want to take each number in the 5th tab and compare it to every number in the 4th tab, if it is less than or equal to that number that I would like it to return the data in the first tab. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#! /usr/bin/perl -w\nuse strict;\nuse Cwd;\n\nmy $tab_input = $ARGV[0];\nmy $output = 'output.txt';\nmy (@trans_id, @seq, @length, @cum_length, @coord);\n\nopen (my $INPUT, \"&lt;$tab_input\") or die  \"unable to open $tab_input\\n\";\nopen (my $OUTPUT, \"&gt;$output\") or die  \"unable to open $output\\n\";\n\nwhile (&lt;$INPUT&gt;) {\n\n    my @tabfile =split (\"\\t+\",$_);\n    push @trans_id, $tabfile[0];\n    push @seq, $tab_file[1];\n    push @length, $tab_file[2];\n    push @cum_length, $tab_file[3];\n    push @coord, $tab_file[4];\n\n    for (@tabfile)  {\n        if {$tabfile[3] &lt; $tabfile [4]) {\n            print \"$tabfile[0]\\n\" &gt; $output;\n\n    }\n\n}\n\nclose $output;\nclose $tab_input;\nprint \"Tab file parsing complete.\\n\";\n</code></pre>\n\n<p>However, I get errors at line 22 (the if statement) saying that $coord and %cum_length requires explicit package name. I have already delcared the arrays at the top of the code. And why is it returning a % 'hash' symbol in the error code when I am only using arrays. Any ideas?</p>\n"}, {"tags": ["perl", "window", "tar", "gzip"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1480329644, "post_id": 40841485, "comment_id": 68901574, "body": "You could fetch the current folder &amp; file name <code>jtax-issue11-16\\title.xml</code> from <code>D:\\test\\jtax-issue11-16\\title.xml</code>using <code>regex</code>."}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "edited": false, "score": 0, "creation_date": 1480330192, "post_id": 40842032, "comment_id": 68901951, "body": "Sorry to say, But it create two folder insde the .tar file one is &quot;.&quot; and another is &quot;jtax-issue11-16&quot;."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1480330285, "last_edit_date": 1480330285, "creation_date": 1480328982, "answer_id": 40842032, "question_id": 40841485, "link": "https://stackoverflow.com/questions/40841485/make-tar-or-gz-file-in-window-using-perl/40842032#40842032", "title": "Make .tar or .gz file in window using perl", "body": "<p>Given that you are in <code>$current_path</code> when you call <code>find()</code>, you should just pass <code>.</code> to <code>find()</code>. That way all of the paths you get in <code>$File::Find::name</code> will be relative to the current directory;</p>\n\n<pre><code>my $current_path = getcwd;\nmy @inventory = ();\nfind (sub { push @inventory, $File::Find::name }, '.');\n</code></pre>\n\n<p>That will give you paths like:</p>\n\n<pre><code>.\\jtax-issue11-16\\title.xml\n.\\jtax-issue11-16\\artwork\n.\\jtax-issue11-16\\artwork\\cover.png\n</code></pre>\n\n<p>But you could use <code>s/^\\.\\\\//</code> to remove the <code>.\\</code> from the beginning of that path if it's important to you. The easiest place to do that might be after you have built <code>@inventory</code>.</p>\n\n<pre><code>@inventory = map { s/^\\.\\\\//; $_ } @inventory;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1480397451, "last_edit_date": 1480397451, "creation_date": 1480397150, "answer_id": 40858389, "question_id": 40841485, "link": "https://stackoverflow.com/questions/40841485/make-tar-or-gz-file-in-window-using-perl/40858389#40858389", "title": "Make .tar or .gz file in window using perl", "body": "<pre><code>use File::Find::Rule qw( );\n\nmy $base_dir = '.';\n\nmy @files =\n   map { s{^\\Q$base_dir/}{}r }\n   File::Find::Rule\n   -&gt;mindepth(1)\n   -&gt;in($base_dir);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use File::Find qw( find );\n\nmy $base_dir = '.';\n\nmy @files;\nfind(\n   {\n      wanted =&gt; sub { push @files, s{^\\Q$base_dir/}{}r },\n      no_chdir =&gt; 1,\n   },\n   $base_dir\n);\nshift(@files);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1480487414, "creation_date": 1480487414, "answer_id": 40881720, "question_id": 40841485, "link": "https://stackoverflow.com/questions/40841485/make-tar-or-gz-file-in-window-using-perl/40881720#40881720", "title": "Make .tar or .gz file in window using perl", "body": "<p>I will add <b>Dave Cross</b> code in my file and get my o/p.\nCode is below:-</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Archive::Tar;\nuse File::Find;\nuse File::Basename 'basename';\nuse 5.010;\nuse Cwd;\n\nmy $current_dir = getcwd;\nmy @tar_files;\nmy @inventory = ();\nfind (sub { push @inventory, $File::Find::name }, $current_dir);\nmy $tar = Archive::Tar-&gt;new();\n@inventory = map { s/^$current_dir\\///; $_ } @inventory;\nforeach my $temp (@inventory)\n    {\n        # skip my file name which is conv.pl \n        #  and skip blank entry in tar, which is created by $current_dir\n        if ($temp =~ m/conv\\.pl/ || $temp =~ m/conv\\.exe/ ||$temp =~/$current_dir/)\n        {\n        }\n        else\n        {\n            push (@tar_files , $temp );\n        }\n    }\n$tar-&gt;add_files(@tar_files);\n$tar-&gt;write($file_name.\".tar\");\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 5055195, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c972d44652eeadefd86ac423c3d6e629?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Ranjan", "link": "https://stackoverflow.com/users/5055195/nikhil-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1480487414, "creation_date": 1480327220, "last_edit_date": 1480327570, "question_id": 40841485, "link": "https://stackoverflow.com/questions/40841485/make-tar-or-gz-file-in-window-using-perl", "title": "Make .tar or .gz file in window using perl", "body": "<p>I will try to make .tar or .gz file. But I have some issues like:</p>\n\n<ol>\n<li><p>It takes the complete path</p>\n\n<pre><code>D:\\test\\jtax-issue11-16\\title.xml\nD:\\test\\jtax-issue11-16\\artwork\nD:\\test\\jtax-issue11-16\\artwork\\cover.png\n</code></pre></li>\n</ol>\n\n<p>Note: the above is also my folder structure.</p>\n\n<p>But my requirement is:</p>\n\n<pre><code>jtax-issue11-16\\title.xml\njtax-issue11-16\\artwork\njtax-issue11-16\\artwork\\cover.png\n</code></pre>\n\n<p>Which means create .tar or .gz file with the current folder name only</p>\n\n<p>My code is :</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Archive::Tar;\nuse File::Find;\nuse File::Basename 'basename';\nuse Cwd;\n\nmy $current_path = getcwd;\nmy @inventory = ();\nfind (sub { push @inventory, $File::Find::name }, $current_path);\nmy $tar = Archive::Tar-&gt;new();  \n$tar-&gt;add_files(@inventory);\n$tar-&gt;write('a.tar');\n</code></pre>\n\n<p>If I use basename, then it produces an error. I don't understand how to use basename or how to create .tar or .gz file with the current folder name.</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480321542, "post_id": 40839664, "comment_id": 68896765, "body": "It&#39;s a hashref.  You can discover that by <code>ref</code> builtin. Or print the whole thing by one of the number of modules for working with complex data structure, <code>Data::Dumper</code> for example."}, {"owner": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "edited": false, "score": 0, "creation_date": 1480321763, "post_id": 40839664, "comment_id": 68896883, "body": "I don&#39;t know what it will return, since there is more than one values and attributes, so I will expect it in array form, so I might print in form of array[0].Year, array[1].Quarter...something like that, or if not, how can I use the value in hash?"}, {"owner": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480321843, "post_id": 40839664, "comment_id": 68896921, "body": "@zdim how could I use that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1480322592, "post_id": 40839664, "comment_id": 68897332, "body": "The <code>ref</code>tells you whether it is <code>HASH</code> or <code>ARRAY</code> (or other) or not a reference -- see docs for <code>ref</code>.  The top-level is probably going to be hashref (this is not strictly required), and in your case that&#39;s just what you have. Then you iterate over <code>keys %$hashref</code> (what you call <code>$arrayref</code>). Or, <code>use Data::Dumper; print  Dumper $reference;</code> to see the whole thing that is in <code>$reference</code>."}], "answers": [{"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 4, "last_activity_date": 1480322394, "creation_date": 1480322394, "answer_id": 40840083, "question_id": 40839664, "link": "https://stackoverflow.com/questions/40839664/perl-from-json-to-object-hash/40840083#40840083", "title": "Perl - from JSON to object/ hash", "body": "<p>It is not array reference, it is hash reference:</p>\n\n<pre><code>#!/usr/intel/bin/perl\n\nuse strict;\nuse warnings;\n\nuse JSON::XS;\nuse Data::Dumper;\n\nmy $json = '{\"Object1\":{\"Year\":\"2012\",\"Quarter\":\"Q3\",\"DataType\":\"Other 3\",\"Environment\":\"STEVE\",\"Amount\":125},\"Object2\":{\"Year\":\"2012\",\"Quarter\":\"Q4\",\"DataType\":\"Other 2\",\"Environment\":\"MIKE\",\"Amount\":500}}';\n\nmy $arrayref = decode_json $json;\n\nprint Data::Dumper-&gt;Dump([$arrayref], [qw(arrayref)]);\n</code></pre>\n\n<p>And output:</p>\n\n<pre><code>$arrayref = {\n              'Object2' =&gt; {\n                             'Quarter' =&gt; 'Q4',\n                             'Year' =&gt; '2012',\n                             'Amount' =&gt; 500,\n                             'DataType' =&gt; 'Other 2',\n                             'Environment' =&gt; 'MIKE'\n                           },\n              'Object1' =&gt; {\n                             'Amount' =&gt; 125,\n                             'DataType' =&gt; 'Other 3',\n                             'Year' =&gt; '2012',\n                             'Environment' =&gt; 'STEVE',\n                             'Quarter' =&gt; 'Q3'\n                           }\n            };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1480382477, "last_edit_date": 1480382477, "creation_date": 1480329471, "answer_id": 40842207, "question_id": 40839664, "link": "https://stackoverflow.com/questions/40839664/perl-from-json-to-object-hash/40842207#40842207", "title": "Perl - from JSON to object/ hash", "body": "<p>There are no arrays there; it is a hash of hashes.</p>\n\n<pre><code>my $hashref = decode_json $json;\n\nfor my $object_name (sort keys %$hashref){\n        print \"In $object_name:\\n\";\n        for my $key (sort keys %{ $hashref-&gt;{$object_name} }){\n                my $val = $hashref-&gt;{$object_name}{$key};\n                print \"$key: $val\\n\";\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2110, "favorite_count": 0, "accepted_answer_id": 40842207, "answer_count": 2, "score": 0, "last_activity_date": 1480382477, "creation_date": 1480320623, "question_id": 40839664, "link": "https://stackoverflow.com/questions/40839664/perl-from-json-to-object-hash", "title": "Perl - from JSON to object/ hash", "body": "<p>I have to code below:</p>\n\n<pre><code>#!/usr/intel/bin/perl\n\nuse strict;\nuse warnings;\n\nuse JSON::XS;\n\nmy $json = '{\"Object1\":{\"Year\":\"2012\",\"Quarter\":\"Q3\",\"DataType\":\"Other 3\",\"Environment\":\"STEVE\",\"Amount\":125},\"Object2\":{\"Year\":\"2012\",\"Quarter\":\"Q4\",\"DataType\":\"Other 2\",\"Environment\":\"MIKE\",\"Amount\":500}}';\n\nmy $arrayref = decode_json $json;\n\nfor my $array(@$arrayref){\n        for my $key (keys(%$array)){\n                my $val = $array-&gt;{$key};\n                print \"$key: $val\\n\";\n        }\n\n}\n</code></pre>\n\n<p>When I compile it, it print me the error \"Not an ARRAY reference at generator.pl line 12.\".</p>\n\n<p>I want to parse the JSON to an object and get data according to the object with the attributes. How can I do it?</p>\n\n<p>I expect after I parse it, I can use to compare string, print, loop it and so on.</p>\n"}, {"tags": ["macos", "perl", "xslt", "exslt"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480316560, "post_id": 40838313, "comment_id": 68894526, "body": "You forgot to provide the code and data that produces that output..."}, {"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1480324128, "post_id": 40838313, "comment_id": 68898238, "body": "Not sure if it makes a difference, but <code>extension-element-prefixes=&quot;exsl&quot;</code> should be <code>extension-element-prefixes=&quot;exsl date&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1480330016, "post_id": 40840534, "comment_id": 68901833, "body": "No result is displayed when the script is run. :("}, {"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "reply_to_user": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1480336973, "post_id": 40840534, "comment_id": 68905992, "body": "That is very strange - please try again with the updated stylesheet."}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1480342959, "post_id": 40840534, "comment_id": 68909855, "body": "I got the output after I changed my Perl script to use <code>output_as_bytes</code> API. The output is <code>libxslt</code> and <code>false</code>."}], "tags": [], "owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "is_accepted": false, "score": 0, "last_activity_date": 1480338412, "last_edit_date": 1480338412, "creation_date": 1480324016, "answer_id": 40840534, "question_id": 40838313, "link": "https://stackoverflow.com/questions/40838313/perl-5-20-2-with-libxslt-1-94-error/40840534#40840534", "title": "Perl 5.20.2 with libXSLT 1.94 error", "body": "<p>Please run the following stylesheet (on any input) and report the result:</p>\n\n<pre><code>&lt;xsl:stylesheet version=\"1.0\" \nxmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\nxmlns:date=\"http://exslt.org/dates-and-times\"\nextension-element-prefixes=\"date\"&gt;\n&lt;xsl:output method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\"/&gt;\n\n&lt;xsl:template match=\"/\"&gt;\n    &lt;test&gt;\n        &lt;proc&gt;\n            &lt;xsl:value-of select=\"system-property('xsl:vendor')\"/&gt;\n        &lt;/proc&gt;\n        &lt;year&gt;\n            &lt;xsl:value-of select=\"function-available('date:year')\"/&gt;\n        &lt;/year&gt;\n    &lt;/test&gt;\n&lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<hr>\n\n<p><em>Not an answer, but needed the space.</em></p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480338412, "creation_date": 1480314542, "last_edit_date": 1495540906, "question_id": 40838313, "link": "https://stackoverflow.com/questions/40838313/perl-5-20-2-with-libxslt-1-94-error", "title": "Perl 5.20.2 with libXSLT 1.94 error", "body": "<p>I have pretty recent Perl version installed on my </p>\n\n<p>OS X machine </p>\n\n<pre><code>% uname -a \nDarwin X-maci 15.6.0 Darwin Kernel Version 15.6.0: Thu Jun 23 18:25:34 PDT 2016; root:xnu-3248.60.10~1/RELEASE_X86_64 x86_64\n</code></pre>\n\n<p>as follows</p>\n\n<pre><code>% /$path/perl -v\nThis is perl 5, version 20, subversion 2 (v5.20.2) built for darwin-thread-multi-2level\n\nCopyright ....\n</code></pre>\n\n<p>I also have recent version of libXSLT installed as follows</p>\n\n<pre><code>% /$path/perl -MXML::LibXSLT -le 'print $XML::LibXSLT::VERSION'\n1.94\n</code></pre>\n\n<p>and I also get</p>\n\n<pre><code>% /$path/perl -MXML::LibXSLT -le 'print XML::LibXSLT::HAVE_EXSLT()'\n1\n</code></pre>\n\n<p>I already asked <a href=\"https://stackoverflow.com/questions/39341672/exsldate-year-in-os-x\">this question</a> to explain my use case. \nEssentially, I am trying to access the EXSL extensions (<code>exsl:date-year(),exsl:document</code>) in my XSL file. Since I had a pretty old version of Perl and libXSLT at that time, there was no resolution to the problem.</p>\n\n<p>Now I have updated my Perl and libXSLT versions and still I get this error message whenever I try to use the extension(s)</p>\n\n<pre><code>xmlXPathCompOpEval: function year not found\nUnregistered function\nxmlXPathCompiledEval: evaluation failed\nruntime error: file trans.xsl line 14 element value-of\nXPath evaluation returned no result.\n at Transform.pl line 43.\n</code></pre>\n\n<p>Is this a known problem  with above OSX + Perl + libXSLT version combination ? </p>\n\n<p>PS:\nInterestingly, <a href=\"http://www.cpantesters.org/distro/X/XML-LibXSLT.html\" rel=\"nofollow noreferrer\">this page</a> does not mention the results for <code>darwin-thread-multi-2level</code> for <code>version 5.20.2</code>.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>1) Perl file</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Path;\nuse File::Spec;\nuse File::Basename;\nuse XML::LibXSLT;\nuse XML::LibXML;\nuse Getopt::Std;\n\nmy $isfile;\n\nmy ($xmlfile,$xsltfile,$samplefile) = qw/ Example.xml trans.xsl sample.xml/;\nmy %opts = ();\ngetopts('o:',\\%opts);\n\nmy $outPath = $opts{'o'};\ndie \"File not specified\" if !defined($outPath);\n\nif(-f $samplefile)\n{\n    $isfile = \"true\";\n    print \"File is present\\n\";\n}\nelse\n{\n    $isfile = \"false\";\n    print \"File is absent\\n\";\n}\n\nmy %args = ( \"isfile\" =&gt; $isfile,\"outpath\" =&gt; $outPath, );\nmy $xslt = XML::LibXSLT-&gt;new;\nmy $stylesheet = $xslt-&gt;parse_stylesheet_file($xsltfile);\n\nmy $security = XML::LibXSLT::Security-&gt;new();\n$security-&gt;register_callback( read_file  =&gt; sub { return 1;} );\n$security-&gt;register_callback( write_file =&gt; sub { return 1;} );\n$security-&gt;register_callback( create_dir =&gt; sub { return 1;} );\n\n$stylesheet-&gt;security_callbacks( $security );\n\nXML::LibXSLT-&gt;register_function(\"urn:foo\", \"bar\",\\&amp;invalue);\n\nmy $results  = $stylesheet-&gt;transform_file($xmlfile,XML::LibXSLT::xpath_to_string(%{args}));\n\nsub invalue\n{\n    my $var = shift;\n    return $var + 2;\n}    \n0;\n</code></pre>\n\n<p>2) XSL file</p>\n\n<pre><code>&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxmlns:xalan=\"http://xml.apache.org/xslt\"\nxmlns:exsl=\"http://exslt.org/common\" \nxmlns:date=\"http://exslt.org/dates-and-times\"\nxmlns:foo=\"urn:foo\"\nextension-element-prefixes=\"exsl\"&gt;\n&lt;xsl:output method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\" media-type=\"text/xml\"/&gt;\n\n&lt;xsl:param name=\"isfile\"/&gt;\n&lt;xsl:param name=\"outpath\"/&gt;\n\n&lt;xsl:variable name=\"current-year\"&gt;\n    &lt;xsl:value-of select=\"date:year()\"/&gt;\n&lt;/xsl:variable&gt;\n\n&lt;xsl:template match=\"/\"&gt;\n    &lt;xsl:if test=\"$isfile = 'true'\"&gt;\n        &lt;exsl:document href = \"{$outpath}\" method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\"&gt;\n            Article:- &lt;xsl:value-of select=\"exsl:node-set(/Article/Title)|exsl:node-set(/Article/Title)/@context\"/&gt;\n            Authors:- &lt;xsl:apply-templates select=\"/Article/Authors/Author\"/&gt;\n            Perl function Output :- &lt;xsl:value-of select=\"foo:bar(234)\"/&gt;\n        &lt;/exsl:document&gt;\n    &lt;/xsl:if&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "split", "mesh"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480282805, "post_id": 40834056, "comment_id": 68885970, "body": "What is the question?"}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480283094, "post_id": 40834056, "comment_id": 68886077, "body": "Hi Matt, I just edited my question to include a description of what I need help with. Basically, I am looking to print my two arrays as a single array so that it looks like my &quot;desired output from combining both arrays&quot;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480285133, "post_id": 40834056, "comment_id": 68886708, "body": "What about some sample input? The problem is not easy to reproduce as written; see: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480285353, "post_id": 40834056, "comment_id": 68886777, "body": "Your code certainly doesn&#39;t produce the output that you say it does. The values in <code>@eachsymbol_again</code> are never output at all. If you really want us to help you then you need to tell the truth."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480285544, "post_id": 40834056, "comment_id": 68886838, "body": "Questions seeking debugging help (<b>&quot;why isn&#39;t this code working?&quot;</b>) must include the desired behavior, a <i>specific problem or error and the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without a <b>clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example.</a>"}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1480286903, "post_id": 40834056, "comment_id": 68887181, "body": "Borodin- not sure about what caused you to think of me as a liar, but I have tried to improve my question with your suggestions, as well as the others. Please let me know if there is anything else I can do to improve my question."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480288425, "post_id": 40834056, "comment_id": 68887481, "body": "@MattJacob, I have improved my question to include the input data. It should be reproducible now. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480288880, "post_id": 40834056, "comment_id": 68887578, "body": "Simply your words <i>&quot;Results from current strategy of using mesh&quot;</i>, which is clearly not true, unless you meant something other than the code you have posted, which would be rather strange."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1480289237, "post_id": 40834056, "comment_id": 68887642, "body": "Yes- after looking at the code I posted I had left out some lines of code- which I have now included. I didn&#39;t intend to not tell the truth, and appreciate you pointing out the deficiency in my question. Any other help would be appreciated."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480330362, "post_id": 40834056, "comment_id": 68902067, "body": "It is important to post an exact copy of your code, or of a program that displays the same problems. Please read <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>,"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1480289164, "post_id": 40834591, "comment_id": 68887632, "body": "I believe I have now addressed your criticism. Please let me know if there is anything else I can do to help get to an answer. Thank you."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1480341047, "last_edit_date": 1480341047, "creation_date": 1480285162, "answer_id": 40834591, "question_id": 40834056, "link": "https://stackoverflow.com/questions/40834056/perl-combining-two-arrays-removing-identical-headers-keeping-format/40834591#40834591", "title": "Perl: Combining two arrays, removing identical headers, keeping format", "body": "<p></p>\n\n<p>One of the main problems is that you never print out any of the contents of <code>@eachsymbol_again</code>. You split each four-character string into four characters and put it into that array, but then ignore it. It certainly doesn't produce the output that you say it does.</p>\n\n<p>Also, <code>mesh</code> is a strange choice to combine your arrays like that</p>\n\n<p>For reference, your arrays look like this</p>\n\n<h3>@finalphred</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\n  \"\\n\",\n  \"Sequence_1\\n\",\n  1,\n  \"\\t\",\n  2,\n  \"\\t\",\n  3,\n  \"\\t\",\n  4,\n  \"\\t\",\n  \"\\n\",\n  \"Sequence_2\\n\",\n  5,\n  \"\\t\",\n  6,\n  \"\\t\",\n  7,\n  \"\\t\",\n  8,\n  \"\\t\",\n)\n</code></pre>\n\n<h3>@finalbases</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>(\n  \"\\n\",\n  \"Sequence_1\\n\",\n  \"\\n\",\n  \"Sequence_2\\n\"\n)\n</code></pre>\n\n<p>You don't even have the same number of elements in those two arrays, so calling <code>mesh</code> on them doesn't make much sense</p>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Here's a working program</p>\n\n<p>I used the following data</p>\n\n<h3>phred.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"#$%\n&amp;'()\n</code></pre>\n\n<h3>bases.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ABCD\nEFGH\n</code></pre>\n\n<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy %xlate = map { chr($_ + 33) =&gt; $_ } 1 .. 8;\n\nopen my $phred_fh, '&lt;', 'phred.txt';\nopen my $bases_fh, '&lt;', 'bases.txt';\n\nmy $n;\n\nuntil ( eof $phred_fh or eof $bases_fh ) {\n\n    my @syms = map [ split //, substr &lt;$_&gt;, 0, 4 ], $phred_fh, $bases_fh;\n\n    printf \"Sequence_%d\\n\", ++$n;\n    print join(\"\\t\", map $xlate{$_}, @{$syms[0]}), \"\\n\";\n    print join(\"\\t\", @{$syms[1]}), \"\\n\";\n    print \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Sequence_1\n1   2   3   4\nA   B   C   D\n\nSequence_2\n5   6   7   8\nE   F   G   H\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480327856, "creation_date": 1480327856, "answer_id": 40841677, "question_id": 40834056, "link": "https://stackoverflow.com/questions/40834056/perl-combining-two-arrays-removing-identical-headers-keeping-format/40841677#40841677", "title": "Perl: Combining two arrays, removing identical headers, keeping format", "body": "<p>I don't think you need to use <code>mesh</code> at all for this work. It is more trivial to read the files into an array process them and then write them into file with formatting. Meanwhile, if file size is large to fit into main memory then it can also modified for line by line processing.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nopen( PHRED, '&lt;', 'phred.txt' ) or die $!;\nopen( BASES, '&lt;', 'bases.txt' ) or die $!;\nopen( OUT,   '&gt;', 'out.txt' )   or die $!;\n\nmy @finalphred;\nmy @finalbases;\n\nmy %hash = (\n    '\"'  =&gt; \"1\",\n    '#'  =&gt; \"2\",\n    '$'  =&gt; \"3\",\n    '%'  =&gt; \"4\",\n    '&amp;'  =&gt; \"5\",\n    q(') =&gt; \"6\",\n    '('  =&gt; \"7\",\n    ')'  =&gt; \"8\"\n);\n\nwhile ( my $fastq = &lt;PHRED&gt; ) {\n    chomp $fastq;\n    my @items = split //, $fastq;\n    my @phreds = map {$hash{$_}} grep {exists $hash{$_}} @items;\n    push (@finalphred, \\@phreds);\n}\n\nwhile ( my $fastq_again = &lt;BASES&gt; ) {\n    chomp $fastq_again;\n    my @items = split //, $fastq_again;\n    push(@finalbases, \\@items);\n}\n\nfor my $i (0 .. $#finalbases) {\n    if(@{$finalbases[$i]} &amp;&amp; @{$finalphred[$i]}) {\n        print OUT \"Sequence_\" . ($i + 1),\"\\n\";\n        printf OUT \"%-6s\" x scalar @{$finalphred[$i]},@{$finalphred[$i]};\n        print OUT \"\\n\";\n        printf OUT \"%-6s\" x scalar @{$finalbases[$i]},@{$finalbases[$i]};\n        print OUT \"\\n\";\n    }\n    else {\n        print \"Both arrays doesn't contain equal no of elements\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 3385582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63dfcf148e5df4d83f126107d97d27b1?s=128&d=identicon&r=PG", "display_name": "Ken Youens-Clark", "link": "https://stackoverflow.com/users/3385582/ken-youens-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1480475475, "creation_date": 1480475475, "answer_id": 40879595, "question_id": 40834056, "link": "https://stackoverflow.com/questions/40834056/perl-combining-two-arrays-removing-identical-headers-keeping-format/40879595#40879595", "title": "Perl: Combining two arrays, removing identical headers, keeping format", "body": "<p>Here's a solution in Perl 6:</p>\n\n<pre><code>#!/usr/bin/env perl6\n\nsubset File of Str where *.IO.f;\n\nsub MAIN (File :$phred='phred.txt', File :$bases='bases.txt') {\n    my $phred-fh = open $phred;\n    my $bases-fh = open $bases;\n    my %xlate    = map { chr($_ + 33) =&gt; $_ }, 1..8;\n\n    for 1..* Z $phred-fh.IO.lines Z $bases-fh.IO.lines -&gt; ($i, $score, $seq) {\n        put join \"\\n\",\u00b7\n            \"Sequence_$i\",\u00b7\n            (map { %xlate{$_} }, $score.comb).join(\"\\t\"),\u00b7\n            $seq.comb.join(\"\\t\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 40834591, "answer_count": 3, "score": -1, "last_activity_date": 1480475475, "creation_date": 1480281750, "last_edit_date": 1480288341, "question_id": 40834056, "link": "https://stackoverflow.com/questions/40834056/perl-combining-two-arrays-removing-identical-headers-keeping-format", "title": "Perl: Combining two arrays, removing identical headers, keeping format", "body": "<p>Below you will see the contents of two arrays I have generated. How can I combine the two arrays, remove the repeated identical headers, but keep the same format- almost like building a matrix? I am currently using mesh to combine the arrays into one, but it doesn't quite work. I haven't come across anything else that might be able to help either, like split, push, etc. I have shown my code below.</p>\n\n<p><strong>Input file \"phred.txt\"</strong></p>\n\n<pre><code> \"#$%&amp;'()\n</code></pre>\n\n<p><strong>Input file \"bases.txt\"</strong></p>\n\n<pre><code>ABCDEFGH\n</code></pre>\n\n<p><strong>Output from printing array 1</strong>  </p>\n\n<pre><code>Sequence_1 \n1     2     3     4    5\n</code></pre>\n\n<p><strong>Output from printing array 2</strong> </p>\n\n<pre><code>Sequence_1 \nA     B     C     D    E\n</code></pre>\n\n<p><strong>Desired output from combining both arrays</strong></p>\n\n<pre><code>Sequence_1\n1     2     3     4     5\nA     B     C     D     E\n</code></pre>\n\n<p><strong>Results from current strategy of using mesh</strong> </p>\n\n<pre><code>Sequence_1\nSequence_1\n1A     2B     3C     4D     5E\n</code></pre>\n\n<p><strong>Current Code</strong></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse List::MoreUtils qw(mesh);\n\nopen( PHRED, '&lt;', '/path/to/phred.txt' ) or die $!;\nopen( BASES, '&lt;', '/path/to/bases.txt' ) or die $!;\nopen( OUT,   '&gt;', '/path/to/out.txt' )   or die $!;\n\nmy @symbols;\nmy @bases;\nmy $count = 0;\nmy @finalphred;\nmy @finalbases;\n\nmy %hash = (\n    '\"'  =&gt; \"1\",\n    '#'  =&gt; \"2\",\n    '$'  =&gt; \"3\",\n    '%'  =&gt; \"4\",\n    '&amp;'  =&gt; \"5\",\n    q(') =&gt; \"6\",\n    '('  =&gt; \"7\",\n    ')'  =&gt; \"8\"\n);\n\nwhile ( my $fastq = &lt;PHRED&gt; ) {\n    my $substring = substr( $fastq, 0, 5 );\n    push( @symbols, $substring );\n}\n\nforeach ( @symbols ) {\n\n    my @eachsymbol = split //, $_;\n    $count++;\n    push( @finalphred, \"\\n\", \"Sequence_$count\\n\" );\n\n    foreach my $symbol ( @eachsymbol ) {\n        if ( exists( $hash{$symbol} ) ) {\n            push( @finalphred, $hash{$symbol}, \"\\t\" );\n        }\n    }\n}\n\nmy $count_again = 0;\n\nwhile ( my $fastq_again = &lt;BASES&gt; ) {\n    my $substring_again = substr( $fastq_again, 0, 5 );\n    push( @bases, $substring_again );\n}\n\nforeach ( @bases ) {\n    my @eachsymbol_again = split //, $_;\n    $count_again++;\n    push( @finalbases, \"\\n\", \"Sequence_$count_again\\n\" );\n    foreach my $symbol_again (@eachsymbol_again){ \n         push (@finalbases, $symbol_again, \"\\t\");\n    }\n}\nforeach (@finalphred){ #diagnostic to test array contents\n     print \"$_\"; \n} \nforeach (@finalbases){ #diagnostic to test array contents\n     print \"$_\"; \n} \nmy @last = mesh @finalphred, @finalbases;\n\nprint OUT @last;\n</code></pre>\n\n<p>Thank you for helping me finish this code and for getting the right output! </p>\n"}, {"tags": ["perl", "emacs", "indentation", "multilinestring", "cperl-mode"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480283436, "post_id": 40833820, "comment_id": 68886203, "body": "I don&#39;t understand your <code>s&#47;^[\\S\\n]*|&#47;&#47;mgr</code>. That will delete all non-space characters and newlines from the beginning of each line in the string, and the <code>|</code> will make no difference because it is a regex metacharacter. I would have thought you wanted <code>s&#47;^\\s*\\|&#47;&#47;mgr</code>, but you say <i>&quot;this works fine, and I have been doing it for years, possibly decades&quot;</i> so you should know."}, {"owner": {"reputation": 6410, "user_id": 1051115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b37fdf7928b7aecd15a973b250979333?s=128&d=identicon&r=PG", "display_name": "Krazy Glew", "link": "https://stackoverflow.com/users/1051115/krazy-glew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480287599, "post_id": 40833820, "comment_id": 68887349, "body": "Sorry. S/^[^\\S\\n]*\\|//Mgr.  That is what I get for making an edit instead of pasting code in use. And this what I get for using an iPhone. Will fix when I get back to a real keyboard."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480288710, "post_id": 40833820, "comment_id": 68887539, "body": "That makes more sense!"}, {"owner": {"reputation": 6410, "user_id": 1051115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b37fdf7928b7aecd15a973b250979333?s=128&d=identicon&r=PG", "display_name": "Krazy Glew", "link": "https://stackoverflow.com/users/1051115/krazy-glew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480291221, "post_id": 40833820, "comment_id": 68888032, "body": "Fixed bug pointed out by @Borodin, <code>s&#47;^[\\S\\n]*|&#47;&#47;mgr1 --should-be--&gt; </code>s/^[^\\S\\n]*\\|//mgr<code>.   Also a similar bug with </code>s/\\s*/ /gr` --should-be--&gt; <code>s&#47;\\s+&#47; &#47;gr</code>."}, {"owner": {"reputation": 6410, "user_id": 1051115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b37fdf7928b7aecd15a973b250979333?s=128&d=identicon&r=PG", "display_name": "Krazy Glew", "link": "https://stackoverflow.com/users/1051115/krazy-glew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480291680, "post_id": 40833820, "comment_id": 68888123, "body": "BTW, I tend to do <code>[^\\S\\n]*</code> rather than <code>\\s*</code>, to minimize changes needed if I switch from <code>s&#47;&#47;&#47;mgr</code> to <code>s&#47;&#47;&#47;gr</code>.    I have been doing this long enough that I seem to remember when <code>[^\\S\\n]</code> was not allowed inside <code>[ ]</code>, but had to enter <code>[ \\t]</code> - I think long enough that you weren&#39;t even allowed <code>\\t</code> inside <code>[ ]</code>, and had to actually provide a not-very-visible tab character."}, {"owner": {"reputation": 4546, "user_id": 1546473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c8bc03863b8d1b0cc086d2319cda57c?s=128&d=identicon&r=PG", "display_name": "Andreas R&#246;hler", "link": "https://stackoverflow.com/users/1546473/andreas-r%c3%b6hler"}, "edited": false, "score": 0, "creation_date": 1480325101, "post_id": 40833820, "comment_id": 68898818, "body": "Interesting cases, but sometimes less is more... Maybe re-start with a single question?"}], "owner": {"reputation": 6410, "user_id": 1051115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b37fdf7928b7aecd15a973b250979333?s=128&d=identicon&r=PG", "display_name": "Krazy Glew", "link": "https://stackoverflow.com/users/1051115/krazy-glew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480292101, "creation_date": 1480280321, "last_edit_date": 1495535578, "question_id": 40833820, "link": "https://stackoverflow.com/questions/40833820/distinguishing-multiline-strings-that-need-indentation-from-those-that-do-not", "title": "Distinguishing multiline strings that need indentation from those that do not", "body": "<p><strong>---+ BRIEF</strong></p>\n\n<p>This question is about indenting multiline strings, e.g. for Perl, in emacs' cperl-mode, so that they do not break up the flow of the code.</p>\n\n<p>I know how to get the indentation I want, using transformations like <code>=~ s/^[^\\S\\n]*\\|//mhr</code> on the string, and providing emacs :about advice to <code>cperl-calculate-indent</code>, using <code>syntax-ppss</code> to recognize when I am in a string.</p>\n\n<p>Trouble is, sometimes I want to do such indentation, and sometimes not.</p>\n\n<p>What I seek advice about conventions, BKMs, for hinting what the desired indentation is.</p>\n\n<pre><code>    my $legacy = qw{\nThis string\n   should\nnot be indented};\n\nmy $needs_trimming = (q{\n                          |BEGIN\n                          |    SUB\n                          |END\n                      } =~ s/^[^\\S\\n]*\\|//mgr); \n\nmy $needs_different_triming  = (q{   + - \n                                     , ? : \n                                     | &amp; ^\n                                     || &amp;&amp; \n                                | =~ s/\\s+/ /gr);\n</code></pre>\n\n<p>I expect others have solved this problem before me.</p>\n\n<p><strong>---+ DETAIL:</strong></p>\n\n<p>I ask this as an emacs/cperl-mode question, but the problem is generic to languages that allow multiline strings.  Not just Perl, but also Javascript, C/C++,  Javascript (<a href=\"https://stackoverflow.com/questions/25924057/multiline-strings-that-dont-break-indentation\">Multiline strings that don&#39;t break indentation</a>), LISP and elisp, etc.</p>\n\n<p>I often write Perl code that uses multiline strings.</p>\n\n<p>I dislike how multiline strings break indentation:</p>\n\n<pre><code>  if(cond) {\n      my $var = q{\nSTART Line crossing string needs\n    to be indented\n    differently than rest of code\nFINISH\n};\n      my $var2 = ...\n  }\n</code></pre>\n\n<p>I prefer to keep the same indentation, so I often do things like</p>\n\n<pre><code>   if(cond) {\n      my $var = (q{\n                  |START Line crossing string needs\n                  |     to be indented\n                  |     differently than rest of code\n                  |FINISH\n               } =~ s/^[^\\S\\n]*\\|//mgr);\n      my $var2 = ...\n   }\n\n   if(cond) {\n      my $var = fix_string( {unindent=&gt;'|',trim=&gt;1,}, \n                  q{\n                    |START Line crossing string needs\n                    |     to be indented\n                    |     differently than rest of code\n                    |FINISH\n                  } =~ s/^[^\\S\\n]*\\|//mgr);\n      my $var2 = ...\n   }\n</code></pre>\n\n<p>OK, so this works fine, and I have been doing it for years, possibly decades.</p>\n\n<p>What did not work so well in the past was indentation, using packages like <code>perl-mode' and</code>cperl-mode'.</p>\n\n<p>OK, so I fixed that, using </p>\n\n<pre><code>(defun cperl-calculate-indent--hack--/ag (orig-fun &amp;rest args)\n  \"hack / experimenting with cperl-calculate-indent\"\n  (interactive)\n  (let ((state (syntax-ppss)))\n    (cond\n      ((and (nth 3 state)                  ;in string\n     (nth 8 state)                     ; beginning of string\n     (&lt; (nth 8 state) (point-at-bol))  ; on different line\n     )\n    (save-excursion\n      (goto-start-of-string--ag)\n      (+ 4 (current-column)))\n    )\n      (t (apply orig-fun args))\n      )\n    )\n  )\n\n(advice-add 'cperl-calculate-indent :around #'cperl-calculate-indent--hack--/ag)\n;;(advice-remove 'cperl-calculate-indent #'cperl-calculate-indent--hack--/ag)\n</code></pre>\n\n<p>So now I can indent multiline strings.  If that is what I want to do.</p>\n\n<p>Unfortunately, sometimes I do want to indent the multiline string.  And sometimes I don't.</p>\n\n<ul>\n<li>E.g. I may inherit legacy code that I do not want to accidentally\nbreak if I edit it in cperl-mode.</li>\n<li><p>Furthermore, there are different types of indentation / transformations that I may do to such multiline strings:</p>\n\n<ol>\n<li>None - standard cperl-mode indentation for multiline strings</li>\n<li>Trim prefix at beginning of line, e.g s/^[\\S\\n]*</li>\n<li>Sometimes I want the same sort of indentation that cperl-mode gives\nto qw{} - basically, I create my own qw that allows things like\ncommas without warnings, s/\\s+/ /g</li>\n<li>Sometimes I may actually want the string to be indented like HTML,\nor C, or ...</li>\n</ol></li>\n</ul>\n\n<p>I know how to do each of these.  I can cons up a recognizer for any convention.</p>\n\n<p>But... I am looking for suggestions, ideally standard practices or BKMs, as to how to make this distinction. Something that others will find readable.</p>\n\n<p>E.g. I considered creating my own operators using <code>PerlX::QuoteOperator my_q</code>.   But that is non-standard, may confuse others, and may break in future. Besides, what I really want to do is just provide an indentation hint, not change the language.</p>\n\n<p>E.g. as explained above, I already use fixup functions\n<code>fixup_string( q{ ... } )</code>. I could pattern match on these. But this breaks when the user adds new fixup functions, etc.</p>\n\n<p>E.g. I have considered looking at the first line of the string, e.g.</p>\n\n<pre><code>fixup_string( q{:\n                 :not indented \n                 :     indented\n              } )\n</code></pre>\n\n<p>This works for my prefix s/^[^\\S\\n]*://mgr, but not in other cases.</p>\n\n<p>(I am currently doing <code>(looking-at \".[~!@#$%^&amp;*_+=|:;'?/]$\"))</code>, which is easy enough, but which has obvious problems (like, what if I want to a string to start <code>\"|\\n...\"</code>.  I.e. it fails the test \"don't break reasonably likely existing code\".)</p>\n\n<p>If Perl had a comment that was NOT to end of line, like C's `/<em>...</em>/'I might dp</p>\n\n<pre><code>fixup_string( q/*indent-here*/{|\n                 | \n                 |\n              } )\n</code></pre>\n\n<p>but Perl does have such non-end-of-line comments.  (Does it?  Is there any syntactic trick that is the equivalent?)</p>\n\n<p>Therefore my question.</p>\n\n<p>I am sure that others have solved this problem before.  I would love to know what they did.</p>\n\n<hr>\n\n<p>In many ways this is just a special case of multiple modes inside the same buffer, <a href=\"https://emacswiki.org/emacs/MultipleModes\" rel=\"nofollow noreferrer\">https://emacswiki.org/emacs/MultipleModes</a>.  I would like to avoid the\nproblems mentioned in <a href=\"https://www.emacswiki.org/emacs/HtmlModeDeluxe\" rel=\"nofollow noreferrer\">https://www.emacswiki.org/emacs/HtmlModeDeluxe</a>.</p>\n"}, {"tags": ["perl", "filehandle"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480318019, "post_id": 40833311, "comment_id": 68895172, "body": "How can you have separate input/output handles in the same IO object?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480319012, "post_id": 40833311, "comment_id": 68895604, "body": "One for input (reading) and one for output (writing). I don&#39;t know if they can be different except in the case of one being null."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480319143, "post_id": 40833311, "comment_id": 68895667, "body": "How do you make one of them null?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1480319203, "post_id": 40833311, "comment_id": 68895692, "body": "<code>open my $fh, &quot;&lt;&quot;, ...</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480376824, "post_id": 40833311, "comment_id": 68927551, "body": "Or rather, that makes one of them not null :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1605553116, "last_edit_date": 1605553116, "creation_date": 1480276958, "answer_id": 40833311, "question_id": 40833205, "link": "https://stackoverflow.com/questions/40833205/what-is-a-built-in-name-for-a-filehandle-in-perl/40833311#40833311", "title": "What is a built-in name for a filehandle in Perl?", "body": "<blockquote>\n<p><em>Does a filehandle have its own type name?</em></p>\n</blockquote>\n<p><a href=\"https://perl5.git.perl.org/perl.git/blob/be2c0c650b028f54e427f2469a59942edfdff8a9:/perl.h#l2637\" rel=\"nofollow noreferrer\"><code>IO</code></a>.</p>\n<pre><code>$ perl -MDevel::Peek -e'Dump(*STDOUT{IO});'\nSV = IV(0x3ba7118) at 0x3ba7128\n  REFCNT = 1\n  FLAGS = (TEMP,ROK)\n  RV = 0x3bc4390\n  SV = PVIO(0x3bc8668) at 0x3bc4390\n    REFCNT = 3\n    FLAGS = (OBJECT)\n    STASH = 0x3bc3fa0   &quot;IO::File&quot;\n    IFP = 0x3bbe180\n    OFP = 0x3bbe180\n    DIRP = 0x0\n    LINES = 0\n    PAGE = 0\n    PAGE_LEN = 60\n    LINES_LEFT = 0\n    TOP_GV = 0x0\n    FMT_GV = 0x0\n    BOTTOM_GV = 0x0\n    TYPE = '&gt;'\n    FLAGS = 0x0\n</code></pre>\n<p>Technically, an <code>IO</code> object can have three handles associated with it: An input file handle (<code>IFP</code>), an output file handle (<code>OFP</code>), and a directory handle (e.g. created using <code>opendir</code>, <code>DIRP</code>). Usually, only one of the input and output handles are set, or they are both set to the same handle. Doing <code>open(FOO, ...); opendir(FOO, ...); &lt;FOO&gt;; readdir(FOO);</code> would work fine because of the separate file and directory handles.</p>\n<blockquote>\n<p><em>it seems filehandle is internally mapped to or managed as a typeglob. Is that correct?</em></p>\n</blockquote>\n<p>Both file and directory IO objects are normally encapsulated in a glob, yes.\nBut it's not required.</p>\n<pre><code>$ perl -E'\n   my $fh = &quot;STDOUT&quot;;     say($fh &quot;$fh&quot;);\n   my $fh = *STDOUT;      say($fh &quot;$fh&quot;);\n   my $fh = \\*STDOUT;     say($fh &quot;$fh&quot;);\n   my $fh = *STDOUT{IO};  say($fh &quot;$fh&quot;);\n'\nSTDOUT                    # Name\n*main::STDOUT             # Glob\nGLOB(0x1175a48)           # Reference to a glob. (This is returned by open $fh)\nIO::File=IO(0x1175a60)    # Reference to a (blessed) IO.\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 40833311, "answer_count": 1, "score": 1, "last_activity_date": 1605553116, "creation_date": 1480276232, "last_edit_date": 1480318044, "question_id": 40833205, "link": "https://stackoverflow.com/questions/40833205/what-is-a-built-in-name-for-a-filehandle-in-perl", "title": "What is a built-in name for a filehandle in Perl?", "body": "<p>None of the names listed by <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\">perl -f ref</a> seems to be for a filehandle. The following code returns GLOB, so it seems that filehandle is internally mapped to or managed as a typeglob. Is that correct?</p>\n\n<pre><code>open FH, '&gt;', \"out.txt\";\nmy $ref = \\*FH;\nprint \"ref \\$ref:\", ref $ref, \"\\n\";\n</code></pre>\n\n<p>Does a filehandle have its own type name?</p>\n"}, {"tags": ["perl", "cgi", "lampp"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480274045, "post_id": 40832737, "comment_id": 68883212, "body": "There are basically 100 different things that could be wrong. Did you check the server log? Have you tried running the script from the command line? Are you sending any HTTP headers?"}, {"owner": {"reputation": 11, "user_id": 7213459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b43568b23b4d3ce824318636753f4f?s=128&d=identicon&r=PG&f=1", "display_name": "runasas", "link": "https://stackoverflow.com/users/7213459/runasas"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480275290, "post_id": 40832737, "comment_id": 68883645, "body": "@MattJacob I ran it in the command line now, it worked. Thanks!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480275696, "post_id": 40832737, "comment_id": 68883785, "body": "Yeah, but... that just confirms that there&#39;s nothing wrong with the script itself."}, {"owner": {"reputation": 11, "user_id": 7213459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b43568b23b4d3ce824318636753f4f?s=128&d=identicon&r=PG&f=1", "display_name": "runasas", "link": "https://stackoverflow.com/users/7213459/runasas"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480276759, "post_id": 40832737, "comment_id": 68884125, "body": "When it&#39;s not the script, then it&#39;s the server?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1480276919, "post_id": 40832737, "comment_id": 68884181, "body": "<a href=\"http://stackoverflow.com/questions/2165022/how-can-i-troubleshoot-my-perl-cgi-script\" title=\"how can i troubleshoot my perl cgi script\">stackoverflow.com/questions/2165022/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1480323772, "creation_date": 1480323772, "answer_id": 40840473, "question_id": 40832737, "link": "https://stackoverflow.com/questions/40832737/lampp-cgi-script-not-working/40840473#40840473", "title": "LAMPP - CGI-Script not working", "body": "<p>Firstly, you should never write a Perl program without including the lines <code>use strict;</code> and <code>use warnings;</code>.</p>\n\n<p>Secondly, if you have problems with a CGI program, you should check the web server error log for more details of the problem.</p>\n\n<p>Thirdly, the output from a CGI program needs to include a content type header. So you'll want to add the following:</p>\n\n<pre><code>print \"Content-Type: text/plain\\015\\012\\015\\012\";\n</code></pre>\n\n<p>This becomes easier if you use the <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">CGI module</a>:</p>\n\n<pre><code>use CGI;\nprint header('text/plain');\n</code></pre>\n\n<p>But really, in 2016, you shouldn't be writing CGI programs - there are <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">plenty of good alternatives</a> available.</p>\n"}], "owner": {"reputation": 11, "user_id": 7213459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b43568b23b4d3ce824318636753f4f?s=128&d=identicon&r=PG&f=1", "display_name": "runasas", "link": "https://stackoverflow.com/users/7213459/runasas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480323772, "creation_date": 1480273317, "question_id": 40832737, "link": "https://stackoverflow.com/questions/40832737/lampp-cgi-script-not-working", "title": "LAMPP - CGI-Script not working", "body": "<h1>Hello</h1>\n\n<p>I have got a LAMPP Webserver. I tried to open a CGI Script called \"Hello.cgi\".</p>\n\n<p>It contains:</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"Hello World.\\n\";\n</code></pre>\n\n<p>The path is: /opt/lampp/htdocs/dashboard/cgi-bin/hello.cgi</p>\n\n<p>When I open: \"127.0.0.1/dashboard/cgi-bin/hello.cgi\", I get following:</p>\n\n<blockquote>\n  <p>Server error!</p>\n  \n  <p>The server encountered an internal error and was unable to complete your request.</p>\n  \n  <p>Error message:\n  End of script output before headers: hello.cgi</p>\n  \n  <p>If you think this is a server error, please contact the webmaster.</p>\n</blockquote>\n\n<p>The CGI Script is written in Perl.</p>\n\n<p>If you need more informations about my problem, say it, please.</p>\n\n<p>~~runasas </p>\n"}, {"tags": ["perl", "variables", "filehandle"], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "edited": false, "score": 0, "creation_date": 1480270908, "post_id": 40831848, "comment_id": 68882212, "body": "ysth: How is &quot;a reference to a glob wrapped around a filehandle object&quot; different from &quot;a reference to a filehandle object&quot;? Would you please give examples of the two cases?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "edited": false, "score": 0, "creation_date": 1480271730, "post_id": 40831848, "comment_id": 68882448, "body": "@Ltf4an you have to go out of your way to get the latter (e.g. <code>*SOMEGLOB{IO}</code> or <code>Symbol::geniosym()</code>); I mentioned it only for completeness.  There usually isn&#39;t any reason to, unless you are playing around with the symbol table."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1480268192, "creation_date": 1480268192, "answer_id": 40831848, "question_id": 40831471, "link": "https://stackoverflow.com/questions/40831471/why-doesnt-a-filehandle-need-a-sigil-in-perl/40831848#40831848", "title": "Why doesn&#39;t a filehandle need a sigil in Perl?", "body": "<p>The second form is allowed because it is the original one.  You used to only be able to refer to filehandles by the name of the glob that contained them.  Now filehandles can be the name of a glob or a reference to a glob wrapped around a filehandle object or a reference to a filehandle object.  The latter two can be stored in a scalar (and so can be lexically scoped).</p>\n\n<p>You should avoid using globs as filehandles in new code.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1480278363, "last_edit_date": 1480278363, "creation_date": 1480277848, "answer_id": 40833426, "question_id": 40831471, "link": "https://stackoverflow.com/questions/40831471/why-doesnt-a-filehandle-need-a-sigil-in-perl/40833426#40833426", "title": "Why doesn&#39;t a filehandle need a sigil in Perl?", "body": "<p>Generally speaking, you do need a sigil when referencing a glob.</p>\n\n<pre><code>my $fh = STDOUT;    # XXX Short for: my $fh = \"STDOUT\";\nmy $fh = *STDOUT;   # ok\n</code></pre>\n\n<p>However, functions that expect a glob (e.g. <code>open</code>, <code>print</code>, <code>readline</code> aka <code>&lt;&gt;</code>, etc) make it optional.</p>\n\n<pre><code>print STDOUT \"foo\\n\";   # Short for: print *STDOUT \"foo\\n\";\n</code></pre>\n\n<p>You can approximate this with the <code>*</code> prototype.</p>\n\n<pre><code>sub foo { }\nsub bar(*) { }\n\nfoo(STDOUT);   # XXX Fails when using \"use strict;\"\nbar(STDOUT);   # ok\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><em>What is the reason for allowing the 2nd form?</em></p>\n</blockquote>\n\n<p>The second form (which uses a global symbol) predates the support for <code>open(my $fh, ...)</code> introduced in 5.6. In fact, it predates the existence of lexical (<code>my</code>) variables. Since one should avoid global variables whenever possible, the <code>open(FH, ...)</code> is discouraged.</p>\n"}], "owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 40831848, "answer_count": 2, "score": 4, "last_activity_date": 1480278363, "creation_date": 1480266024, "last_edit_date": 1480266910, "question_id": 40831471, "link": "https://stackoverflow.com/questions/40831471/why-doesnt-a-filehandle-need-a-sigil-in-perl", "title": "Why doesn&#39;t a filehandle need a sigil in Perl?", "body": "<p>In Perl, filehandle is a data type, and I'd expect a variable  of such type has some kind of sigil prefix. However, the following code (2nd open) shows that it's not the case</p>\n\n<pre><code>open my $fileHandle, '&gt;', \"out.txt\";\nopen FH, '&gt;', \"out2.txt\";\n</code></pre>\n\n<p>I found the 2nd form confusing/inconsistent. What is the reason for allowing the 2nd form?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1480266634, "post_id": 40831408, "comment_id": 68880814, "body": "Instead of <code>my $value = eval &#39;$ENV{&quot;$var&quot;}&#39;</code>, Why don&#39;t you just write <code>my $value = $ENV{$var}</code>?"}, {"owner": {"reputation": 1, "user_id": 7216787, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209087207951588/picture?type=large", "display_name": "george kushner", "link": "https://stackoverflow.com/users/7216787/george-kushner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480355686, "post_id": 40831408, "comment_id": 68917628, "body": "it doesn&#39;t expand $var"}, {"owner": {"reputation": 1, "user_id": 7216787, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209087207951588/picture?type=large", "display_name": "george kushner", "link": "https://stackoverflow.com/users/7216787/george-kushner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480356174, "post_id": 40831408, "comment_id": 68917902, "body": "hmm.. you&#39;re right, it seemed like at some point code refused to expand $var.. so i used eval"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480377041, "post_id": 40831408, "comment_id": 68927608, "body": "<code>my $value = $ENV{$var} &#47;&#47; 0;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480267259, "post_id": 40831550, "comment_id": 68881030, "body": "<i>&quot;true for &quot;export VAR=;&quot; and &quot;export VAR=VAL;&quot;&quot;</i> Are you sure about that? So there&#39;s no way of telling whether an environment variable is empty or contains <code>1</code>, (or whatever <i>true</i> value you think it returns)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480268898, "post_id": 40831550, "comment_id": 68881542, "body": "@Borodin Yes, I am sure. Did you notice the <code>defined</code> in my <code>if</code>? If so, then please show me an example where the code is wrong."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480269280, "post_id": 40831550, "comment_id": 68881684, "body": "Ah okay. Regardless of the <code>defined</code>, I thought your comment referred to the value of <code>$ENV{...}</code>. <code>export VAR=</code> sets the variable to an empty string and exports it. To get an <code>undef</code> value you have to <code>unset VAR</code>, so strictly your <i>wasn&#39;t set</i> should be <i>isn&#39;t set</i>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480270023, "post_id": 40831550, "comment_id": 68881945, "body": "@Borodin I just noticed the OP wasn&#39;t asking for a replacement of &quot;undef&quot; with &quot;0&quot; but merely whether <code>$ENV{$var}</code> is or is not defined. So your answer is the better one anyway. And right now the <code>exists</code> operator pops into my mind..."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1480269660, "last_edit_date": 1480269660, "creation_date": 1480266467, "answer_id": 40831550, "question_id": 40831408, "link": "https://stackoverflow.com/questions/40831408/how-to-make-eval-to-return-zero-instead-of-nothing/40831550#40831550", "title": "How to make eval to return zero instead of nothing?", "body": "<p>Indeed, there's a simpler way:</p>\n\n<pre><code>if (defined $ENV{\"VAR\"}) {\n    # true for \"export VAR=;\" and \"export VAR=VAL;\"\n} else {\n    # VAR is not set (not even to an empty value)\n}\n</code></pre>\n\n<p>As of Perl 5.10 there is the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or</a> operator <code>//</code>, which is quite handy in your case:</p>\n\n<pre><code>$value = $ENV{\"VAR\"} // \"VAR is not defined\";\n$value = $ENV{\"VAR\"} || \"VAR is not defined or set to an empty string or 0\";\n</code></pre>\n\n<p>In your case:</p>\n\n<pre><code>my $value = $ENV{$var} // 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1480360978, "last_edit_date": 1480360978, "creation_date": 1480267016, "answer_id": 40831631, "question_id": 40831408, "link": "https://stackoverflow.com/questions/40831408/how-to-make-eval-to-return-zero-instead-of-nothing/40831631#40831631", "title": "How to make eval to return zero instead of nothing?", "body": "<p>Your code won't compile. It needs additional parentheses around <code>qw( ... )</code></p>\n\n<p>There is no need for <code>eval</code> here. You can just fetch the environment variable with <code>$ENV{$var}</code>, which will be <code>undef</code> if there is no such variable</p>\n\n<p>It is very simple to test to an undefined value and behave accordingly, perhaps like this?</p>\n\n<pre><code>for my $var ( qw/ ENV_VAR1 ENV_VAR2 ENV_VAR3 / ) {\n\n    my $value = $ENV{$var};\n\n    die \"\\$value not defined, exiting ..\" unless defined $value;\n\n    print \"\\$var = $value\\n\";\n}\n</code></pre>\n\n<p>If you use <code>export ENV_VAR1=</code> then you are setting the variable to the <em>empty string</em>, and <code>$ENV{ENV_VAR1}</code> will be defined, but have a length of zero. To remove the environment variable, you need to <code>unset ENV_VAR1</code>, when <code>$ENV{ENV_VAR1}</code> will become <em>undefined</em></p>\n"}], "owner": {"reputation": 1, "user_id": 7216787, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209087207951588/picture?type=large", "display_name": "george kushner", "link": "https://stackoverflow.com/users/7216787/george-kushner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 40831631, "answer_count": 2, "score": -1, "last_activity_date": 1480360978, "creation_date": 1480265661, "last_edit_date": 1480269269, "question_id": 40831408, "link": "https://stackoverflow.com/questions/40831408/how-to-make-eval-to-return-zero-instead-of-nothing", "title": "How to make eval to return zero instead of nothing?", "body": "<p>I am trying to evaluate a set of environment variables before proceeding with the code any further\nHere is the piece:</p>\n\n<pre><code>for my $var qw(ENV_VAR1 ENV_VAR2 ENV_VAR3) {\n    my $value = eval '$ENV{\"$var\"}';\n    print \"$var = $value\\n\";\n    die \"$var not defined, exiting ..\" unless $value;\n}\n</code></pre>\n\n<p>It throws an error for the print line:</p>\n\n<blockquote>\n  <p>Use of uninitialized value in concatenation (.) or string at\n  ./mycode.pl line 205.</p>\n</blockquote>\n\n<p>Does it mean that <code>eval</code> actually returns nothing? How to make it return zero or maybe the whole piece can be done in a better way?</p>\n\n<p>Strangely enough, if I define and then undefine the variable in the underlying ksh (e.g.<code>export ENV_VAR1=anything;export ENV_VAR1=;</code>) then it duly dies with the correct message but then it gives me another <code>uninitialized value</code> for the next variable.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1480252510, "post_id": 40829192, "comment_id": 68876544, "body": "Take a look at <a href=\"https://metacpan.org/pod/distribution/Parallel-ForkManager/lib/Parallel/ForkManager.pm\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1480257180, "post_id": 40829192, "comment_id": 68877866, "body": "Or use threads."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480262508, "post_id": 40829192, "comment_id": 68879427, "body": "@Borodin With P::FM it&#39;s a bit awkward to get the results back to the main program."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1480262891, "post_id": 40829192, "comment_id": 68879580, "body": "@PerlDuck: Just <code>use use forks::shared</code> and <code>share %pingResult</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480263216, "post_id": 40829192, "comment_id": 68879674, "body": "@Borodin I&#39;ve heard about <code>use forks</code> but never tried it out. If it&#39;s really that simple then you are right."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1480342244, "last_edit_date": 1480342244, "creation_date": 1480258660, "answer_id": 40830305, "question_id": 40829192, "link": "https://stackoverflow.com/questions/40829192/how-to-execute-a-specific-subroutine-code-in-background-and-get-the-result-from/40830305#40830305", "title": "How to execute a specific subroutine code in background and get the result from it?", "body": "<p>Some people consider <a href=\"http://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">threads</a> dangerous and ugly. But especially in conjunction with <a href=\"http://perldoc.perl.org/Thread/Queue.html\" rel=\"nofollow noreferrer\">Thread::Queue</a> I like their elegance:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nuse threads;\nuse threads::shared;\nuse Thread::Queue;\n\nuse constant NUM_THREADS =&gt; 2;\n\nmy $workitems = Thread::Queue-&gt;new();\nmy %pingResult : shared;\n\nsub main\n{\n    # create 2 worker threads\n    threads-&gt;create( \\&amp;ping ) foreach ( 1 .. NUM_THREADS );\n\n    # put the IPs into our working queue:\n    my @ips = qw(127.0.0.1 stackoverflow.com localhost);\n    $workitems-&gt;enqueue(@ips);\n    $workitems-&gt;end();\n\n    # wait for the threads to finish:\n    $_-&gt;join() foreach ( threads-&gt;list() );\n\n    print Data::Dumper::Dumper( \\%pingResult );\n}\n\nsub ping\n{\n    while ( my $ip = $workitems-&gt;dequeue() ) {\n        my $result = `/bin/ping -t 1 -c 1 $ip | grep packet`;\n        chomp($result);\n\n        lock(%pingResult);\n        $pingResult{$ip} = $result;\n    }\n}\n\nmain();\n</code></pre>\n\n<p>With <code>T::Q::enqueue()</code> you place \"items\" in the queue, in this case IP addresses. In this example you do this from the main thread. After you're done with filling up the queue you call <code>T::Q::end()</code>.</p>\n\n<p>The <code>T::Q::dequeue()</code> (called from the thread <code>ping</code>) blocks until an item can be read and removed from the queue. The <code>ping</code> function then calls <code>/[s]bin/ping</code> and puts the result into the global hash <code>%pingResult</code>. The variable is marked as <code>shared</code> which means it is shared between all threads. Because of that you need to protect it against concurrent access by means of the <code>lock</code> function. It blocks until no one else holds the lock. The lock automatically unlocks when it goes out of scope, that is: after every single iteration of the <code>while</code> loop. (There is no <code>unlock</code> function.)</p>\n\n<p>The second ping-thread does exactly the same and it's kind of random which thread processes which IP address. They both pick IPs from the queue until <code>T::Q::dequeue()</code> returns some falsy value and they then exit.</p>\n\n<p>The call <code>T::Q::end()</code> unblocks all calls to <code>T::Q::dequeue()</code> (no matter whether the queue is empty or not) and thus eventually ends the <code>while</code> loops in the threads. </p>\n\n<p>Btw: although the <code>T::Q</code> is shared between all threads (including main), there's no need to mark it as shared or lock it because it has built-in thread-safety and does all that under the hood.</p>\n\n<p>Instead of using a global shared variable for the results you could also create a second result queue and let the ping-threads put their results in there and let the main thread dequeue them one by one.</p>\n\n<p><strong>Note:</strong> When using threads it's far better to <strong>not</strong> create a new thread for every single workitem (IP address) but to create N threads in advance and then feed them with work through a queue. Thread creation is expensive. The T::Q module is just perfect for this worker-thread model.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1480266350, "creation_date": 1480266350, "answer_id": 40831533, "question_id": 40829192, "link": "https://stackoverflow.com/questions/40829192/how-to-execute-a-specific-subroutine-code-in-background-and-get-the-result-from/40831533#40831533", "title": "How to execute a specific subroutine code in background and get the result from it?", "body": "<p></p>\n\n<p>The <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> module provides for data to be returned to the parent process from the children. It works by serialising and writing it to a temporary file</p>\n\n<p>The second parameter of the <code>Parallel::ForkManager-&gt;new</code> call must be the path to a directory where these temporary files may be stored, and the second parameter to a child's <code>finish</code> call must be a <em>reference</em> to the scalar value that should be returned. That scalar value may be a simple string or number, or it can be a reference to a hash or data if a complex structure must be provided</p>\n\n<p>To collect the return data, you must define a <code>run_on_finish</code> callback which collects information about the terminating child process</p>\n\n<p>In this case my <code>ips.txt</code> file just contains the eight letters <code>A</code> through to <code>H</code>, and I have used this code</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sleep rand 5 + 2;\nmy $ping = rand 10;\n</code></pre>\n\n<p>as a representation of the <code>ping</code> action. The returned value is the random number <code>$ping</code>. The <em>ident</em> of each child is an index into the <code>@ip_addresses</code> array, and both the child and the parent can use this value to identify which address the child has processed</p>\n\n<p>You may well want to return non-zero exit status values (the first parameter of the <code>finish</code> call) so that the parent can tell whether the ping failed completely. It's available from the <code>$exit_code</code> parameter of the <code>run_on_finish</code> callback</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Parallel::ForkManager;\nuse Cwd 'cwd';\n\nuse constant IP_FILE =&gt; 'ips.txt';\n\nmy @ip_addresses;\n{\n    open my $fh, '&lt;', IP_FILE or die $!;\n    @ip_addresses = &lt;$fh&gt;;\n    chomp @ip_addresses;\n}\n\nmy %ping_results;\n\nmy $pfm = Parallel::ForkManager-&gt;new(10, cwd);\n\n$pfm-&gt;run_on_finish( sub {\n    my ($pid, $exit_code, $ident, $exit_signal, $dump, $data) = @_;\n\n    $ping_results{$ip_addresses[$ident]} = $$data;\n});\n\nfor my $ident ( 0 .. $#ip_addresses ) {\n    my $pid = $pfm-&gt;start($ident);\n    next if $pid;\n\n    sleep rand 5 + 2;\n    my $ping = rand 10;\n\n    $pfm-&gt;finish(0, \\$ping);\n}\n\n$pfm-&gt;wait_all_children;\n\nuse Data::Dump;\ndd \\%ping_results;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n  A =&gt; 4.40219991930888,\n  B =&gt; 2.82913053498731,\n  C =&gt; 3.34837183912413,\n  D =&gt; 3.39050637182908,\n  E =&gt; 6.6558553334059,\n  F =&gt; 6.72843905721919,\n  G =&gt; 4.73434782211797,\n  H =&gt; 3.30697605942504,\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1480352935, "post_id": 40849731, "comment_id": 68916105, "body": "Disclosure:  I wrote IO::Pipe::Producer.  So I guess this is somewhat of a shameless plug.  But I use it for all sorts of stuff like this.  The other answers are good too.  This is just another way to do it."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1480353147, "post_id": 40849731, "comment_id": 68916218, "body": "In fact, it would probably be better to use the getSystemProducer method in the same class since you&#39;re only executing a system call in the subroutine you&#39;re passing anyway.  Just take out the ping sub and call the method like this: <code>my $handle = $obj-&gt;getSystemProducer(&quot;&#47;sbin&#47;ping -t 1 -c 1 $ip | grep packet&quot;);</code> instead of calling getSubroutineProducer."}], "tags": [], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "is_accepted": false, "score": 0, "last_activity_date": 1480352702, "creation_date": 1480352702, "answer_id": 40849731, "question_id": 40829192, "link": "https://stackoverflow.com/questions/40829192/how-to-execute-a-specific-subroutine-code-in-background-and-get-the-result-from/40849731#40849731", "title": "How to execute a specific subroutine code in background and get the result from it?", "body": "<p>What you need is <a href=\"http://search.cpan.org/~robleach/IO-Pipe-Producer-2.01/lib/IO/Pipe/Producer.pm\" rel=\"nofollow noreferrer\">IO::Pipe::Producer</a>.  It's designed precisely for this problem.  You would have to make an adjustment to your sub to print the result and the parent script can read it in through the returned handle.  You just call its getSubroutineProducer method in a loop and grab the handles for processing once the jobs all start:</p>\n\n<pre><code>use IO::Select;\nuse IO::Pipe::Producer;\n\nmy $obj = new IO::Pipe::Producer();\nmy $sel = new IO::Select;\n\nmy $pingHandle = {};\nmy $pingResult = {};\n\nforeach my $ip (@ips) {\n    my $handle = $obj-&gt;getSubroutineProducer(\\&amp;ping,$ip);\n    $sel-&gt;add($handle);\n    $pingHandle-&gt;{$handle} = $ip;\n}\n</code></pre>\n\n<p>The above starts the ping jobs and then you use your IO::Select object to read from them in a non-blocking way, until there's no longer any output from any of the handles.  You might improve the following with a timeout, but I believe the ping command already has one...</p>\n\n<pre><code>while(my @fhs = $sel-&gt;can_read())\n  {\n    foreach my $fh (@fhs)\n      {\n        my $line = &lt;$fh&gt;;\n        unless(defined($line))\n          {\n            $sel-&gt;remove($fh);\n            close($fh);\n            next;\n          }\n        $pingResult-&gt;{$pingHandle-&gt;{$fh}} .= $line;\n      }\n  }\n</code></pre>\n\n<p>Note, I used a handle to IP lookup to be able to put the output from the handle in the correct position in the pingResult hash.  Then all you have to do is print the results below.  Note, I removed the \"\\n\" because I edited your ping sub to print the result and the \"\\n\" there prevents potential buffering issues.  You might with to set $| to a non-zero value at the top of the script to force the buffer to flush every time.</p>\n\n<pre><code>foreach my $ip (keys %$pingResult) {\n    print \"ping result for $ip: $pingResult-&gt;{$ip}\";\n}\n\n\nsub ping {\n    my $ip = $_[0];\n    $mypingresult = `/sbin/ping -t 1 -c 1 $ip | grep packet`;\n    print($mypingresult);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7212338, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203639927957406/picture?type=large", "display_name": "Fernando Lima", "link": "https://stackoverflow.com/users/7212338/fernando-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1480352702, "creation_date": 1480251408, "last_edit_date": 1480252633, "question_id": 40829192, "link": "https://stackoverflow.com/questions/40829192/how-to-execute-a-specific-subroutine-code-in-background-and-get-the-result-from", "title": "How to execute a specific subroutine code in background and get the result from it?", "body": "<p>How to execute a specific subroutine code in background? </p>\n\n<p>I'd like to fire several instances of the ping subroutine below in parallel. I know it has been asked before but I couldn't find my way in resolving this. The examples I found led me to using fork, however I want to execute in background the subroutine code only and I need someway to the get the subroutine result later on in the main code.</p>\n\n<p>Thank you very much.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $ipfile = \"ips.txt\";\nopen (my $fh, '&lt;', $ipfile) or die \"I couldn't open file  $ipfile\\n\";\nchomp (my @ips = &lt;$fh&gt;);\nclose $fh;\nmy %pingResult;\nforeach my $ip (@ips) {\n    ping ($ip);\n}\n\nforeach my $ip (keys %pingResult) {\n    print \"ping result for $ip: $pingResult{$ip}\\n\";\n}\n\nsub ping {\n    my $ip = $_[0];\n    $pingResult{$ip} = `/sbin/ping -t 1 -c 1 $ip | grep packet`;\n    chomp ($pingResult{$ip});\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480364684, "post_id": 40828613, "comment_id": 68922407, "body": "When \u0131 try to use like this, all the data which \u0131 want to read from separately are parsed only in $id variable and the other variables like $date1... contains no data, so it doesnt work."}, {"owner": {"reputation": 3119, "user_id": 105085, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J8irh.png?s=128&g=1", "display_name": "palako", "link": "https://stackoverflow.com/users/105085/palako"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480373429, "post_id": 40828613, "comment_id": 68926387, "body": "That&#39;s because I simplified the case to space separated fields, but in your file above you might have more than one space or tabs between fields. I&#39;ve edited the answer to account for that, hope that helps."}], "tags": [], "owner": {"reputation": 3119, "user_id": 105085, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J8irh.png?s=128&g=1", "display_name": "palako", "link": "https://stackoverflow.com/users/105085/palako"}, "is_accepted": false, "score": 0, "last_activity_date": 1480373377, "last_edit_date": 1480373377, "creation_date": 1480247471, "answer_id": 40828613, "question_id": 40828361, "link": "https://stackoverflow.com/questions/40828361/how-can-i-read-a-lot-of-colums-as-a-data-in-a-file-and-store-them-in-a-array-cor/40828613#40828613", "title": "How Can I Read a lot of Colums as a Data in a File and Store Them in a Array Correctly in Perl", "body": "<p>You are trying to use all of the values as one single integer, which will never work. You need to get those values one by one. Also the way you are parsing the lines is calling for trouble. You are better of with something like this:</p>\n\n<pre><code>my ($id, $date1, $time1, $date2, $time2, $ne, $cc0, $cc1, $cc2, $cc3, $cc4) = split /\\s+/, $sonuc;\n</code></pre>\n\n<p>Now you can use <code>$cc0, $cc1, ...</code> individually as integers.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480591805, "post_id": 40857262, "comment_id": 69031263, "body": "thanks for the kind answer, \u0131 removed substr commands and added split command to obtain all data \u0131 need. Right now, \u0131 can retrieve all data correctly but still if else commands dont work correctly \u0131 didnt understand why?"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480612566, "post_id": 40857262, "comment_id": 69045376, "body": "@evenstar Your code looks like its doing many unnecessary steps - especially assigning to <code>my @cc116=split(&#39;,&#39;,$satir[122]); my @cc117=split(&#39;,&#39;,$satir[123]); </code>, <code>etc</code>. But to answer your question about <code>if .. else</code>, the line <code>if( @hour == @time1)</code> should work with <code>if( $hour[0] == $time1[0])</code>"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480647411, "post_id": 40857262, "comment_id": 69059785, "body": "Now it works correctly, Can you please explain why we are using like that, why array element [0]?. By the way I couldnt edit all the input files but in the first file, \u0131 have 2 rows and 136 columns, it is not only one line. In the second file \u0131 have 4 columns and a lot of rows. I couldnt figure out how can \u0131 obtain 127 columns data separetely in a simple way, thats why \u0131 manuelly assigned split commands."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480652682, "post_id": 40857262, "comment_id": 69061068, "body": "So there are 2 rows in the first file. Are both rows data or is the first row a header and the second row data?"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480686689, "post_id": 40857262, "comment_id": 69078523, "body": "Both of them contains data, but first row data is for ne S1, and the second row data is for S2.. I am trying to take baby steps so \u0131 didnt add any code related to S2 data and its threshold file. When \u0131 fully understand the first part, \u0131 will add for s2 too and will write related result in another file.. Thanks for your help :)"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480695641, "post_id": 40857262, "comment_id": 69084671, "body": "@evenstar I made 1 change to my answer, (see <b>Update</b>). To get <code>$i</code>, instead of using a loop as you&#39;ve done, (` for ( $i=0;$i&lt;128;$i++)<code>), get </code>$i` as I did in my code, (` my $i = 0 + substr $cc, 2; `)."}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480805494, "post_id": 40857262, "comment_id": 69116487, "body": "Thank you so much Chris, \u0131 can able to finish my code and store it as a txt file backup. Regards."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480811117, "post_id": 40857262, "comment_id": 69117835, "body": "@evenstar Glad I was a help in completing your code. (I did work out a program that reads both lines from file 1 if you want to see it)."}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1480812137, "post_id": 40857262, "comment_id": 69118025, "body": "right now my code constitute of three different files. Once I understood the method, \u0131 was able to write the remaining ones thanks to your help :). As an output, \u0131 write all necessary informations in a single output backup file. For further, \u0131 wanna learn how to email this without using any module."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 0, "last_activity_date": 1480707823, "last_edit_date": 1480707823, "creation_date": 1480389911, "answer_id": 40857262, "question_id": 40828361, "link": "https://stackoverflow.com/questions/40828361/how-can-i-read-a-lot-of-colums-as-a-data-in-a-file-and-store-them-in-a-array-cor/40857262#40857262", "title": "How Can I Read a lot of Colums as a Data in a File and Store Them in a Array Correctly in Perl", "body": "<p><strong>UPDATE</strong> Changed the compare line to <code>if ( $hour1 == $hour2 &amp;&amp; $ne1 eq $ne2 )</code> and moved <code>my $i = ...</code> inside the <code>if</code> statement.</p>\n\n<p>If I understand the 'type' variable correctly, (<code>CC000</code> => <code>000</code>), then the changed code here might do what you need.</p>\n\n<p>Instead of using <code>substr</code> to get the data, I<code>split</code> the fields into the variables.</p>\n\n<p>In the first file, the last receiver, <code>@cc</code>, gets all the remaining columns in the input line, (you stated there is only one line of data in the first file).</p>\n\n<p>If there is only 1 line, there is no need for a <code>while</code> loop to read the data. Simply, note how I read the 1 line into the variables, (<code>split ' ', &lt;$fh&gt;</code>).</p>\n\n<p>Since you don't seem to need <code>date1</code> and <code>time1</code>, I assigned them to <code>undef</code>. (<code>undef</code> here is just a placeholder for values you don't want to capture. I could have also used <code>undef</code> for the first field, but I assigned it to <code>$id</code> which you aren't using anyway).</p>\n\n<p>Also, I used lexical filehandles, (<code>$fh</code>, <code>$fh2</code>), instead of <code>INPUT</code> and <code>THR</code>, because it is the preferred practice. I can't say exactly why it is preferred, but I think it was adopted in perl v 5.6.</p>\n\n<p>I also used the <a href=\"http://perldoc.perl.org/perl56delta.html#open()-with-more-than-two-arguments\" rel=\"nofollow noreferrer\">3 argument</a>, (filehandle, mode, file) mode of opening a file. (You used the 2 argument, the 3 arg. was introduced in perl ver. 5.6. It is a safer form of <code>open</code>).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input_file = 'file1';\nmy $s1_threshold=\"file2\";\n\nopen my $fh, '&lt;', $input_file\n    or die \"$0: open of $input_file failed, error: $! \\n\";\n\nmy ($id, $date, $time1, undef, undef, $ne1, @cc) = split ' ', &lt;$fh&gt;;\n\nclose $fh or die \"$0: close of $input_file failed, error: $! \\n\";\n\n# get hour from time1\nmy $hour1 = substr $time1, 0, 2;\n\nopen my $fh2, '&lt;', $s1_threshold\n    or die \"$0: open pf $s1_threshold failed, error: $! \\n\";\n\nwhile (&lt;$fh2&gt;) {\n    my ($ne2, $cc, $hour2, $threshold) = split;\n\n    if ( $hour1 == $hour2 &amp;&amp; $ne1 eq $ne2 ) {\n        my $i = 0 + substr $cc, 2;\n\n        if ( $cc[$i] &gt; $threshold )\n        {\n            print(\"$cc[$i]\\n\");\n            print (\"match\\n\");\n         }\n         else\n         {\n            print(\"not match\\n\");\n         }\n    }\n}\nclose $fh2 or die \"$0: close pf $s1_threshold failed, error: $! \\n\";\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40857262, "answer_count": 2, "score": 0, "last_activity_date": 1480707823, "creation_date": 1480245769, "last_edit_date": 1480686345, "question_id": 40828361, "link": "https://stackoverflow.com/questions/40828361/how-can-i-read-a-lot-of-colums-as-a-data-in-a-file-and-store-them-in-a-array-cor", "title": "How Can I Read a lot of Colums as a Data in a File and Store Them in a Array Correctly in Perl", "body": "<p>Right now I am trying to do some comparison with using some datas that are belongs to two different input files.</p>\n\n<p>The first input file looks like this: I have two rows and a lot of columns. </p>\n\n<pre><code>id    date1       time1       date2       time2      ne  CC0 CC1   CC2  CC3  CC4... due to CC127 \n\n1    2016-09-26  14:13:56   2016-09-26  14:08:56    S1   7   1226   0   86    0 \n2    2016-09-26  14:13:56   2016-09-26  14:08:56    S2   8   1346   2   97   12  \n</code></pre>\n\n<p>Second input file looks like this:</p>\n\n<pre><code>ne  type  time threshold\n\nS1  CC000  09   50\n\nS1  CC000  10   50\n\nS1  CC000  11   50\n\nS1  CC000  12   50\n\nS1  CC000  13   50\n\nS1  CC000  14   50\n</code></pre>\n\n<p>My main aim is to read those two files, storing necessary informations and datas in the arrays. If the time(as an hour) and ne condition matches then \u0131 want to compare its data and its threshold value. If data is bigger than the threshold, \u0131 want to keep this data and write them another file as a result. For example, for ne S1, and hour 14, CC0 data is equal to 7 and threshold is equal to 50.</p>\n\n<p>So far \u0131 wrote this codes; ( the last edited one, with help of Chris)</p>\n\n<pre><code>    #! /usr/bin/perl -w\n\n#compiler profilleri\nuse strict;\nuse warnings;\n\n#dosya locationlar\u0131\n\nmy $input_file=\"C:/Perl64/output/innput.txt\";\nmy $s1_threshold=\"C:/Perl64/output/s1_threshold.txt\";\n\n#komutlar######\n\n\nmy $date; my $time; my $ne; my @hour; my @cc;\nmy $i=0; my $j=0;\n\n    open INPUT, \"&lt; $input_file\" or die \"$0: open of $input_file failed, error: $! \\n\";\n\n    while ( defined ($_=&lt;INPUT&gt;) )\n    {   \n\n        my $line1 = $_;\n        my ( undef, $date, $time, undef, undef, $ne, @cc) = split (' ',$line1);\n        #print(\"$cc[16]\\n\");\n\n        my @time1= split(':',$time);\n        @hour=split(',',$time1[0]);\n\n        #print(\"@hour\\n\");\n\n    open THR, \"&lt; $s1_threshold\" or die \"$0: open pf $s1_threshold failed, error: $! \\n\";\n    while (defined($_=&lt;THR&gt;) )\n    {\n        my $line2=$_;\n        my ($ne1, $cc_type, $time1, $threshold ) =split(' ',$line2);\n\n        if( $hour[0] == $time1 &amp;&amp; $ne eq $ne1 )\n        {\n            for ( $i=0;$i&lt;128;$i++)\n            {\n               if ( $cc[$i] &gt; $threshold )\n               {\n                  # print(\"$cc[$i]\\n\");\n               }\n             }\n        }\n    }\n  }\n</code></pre>\n\n<p>Now \u0131 can obtain all data correctly in a simple way, but when it comes to final if command I mean this,</p>\n\n<pre><code>if ( $      cc[$i] &gt; $threshold )\n</code></pre>\n\n<p>cc array values are being compared with all of the threshold values, not just the value for related cc_type and hour.\nSecond input file contains threshold values with respond to cc_types. For each cc_type there are 23 different value with respect to hour so \u0131 want to compare only for that specific hour and cc_type. How can \u0131 fix that?</p>\n\n<p>(When \u0131 figure out the first part for that, \u0131 will add the same procedure by adding another threshold file for S2. )    </p>\n\n<p>\u0131 am a newbie in perl language, so any kind answer related to this appreciated.\nThanks in advance.\nRegards.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1480203366, "post_id": 40824019, "comment_id": 68867278, "body": "The code looks valid.. Please provide some realistic data for the arrays, so we can try to reproduce."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1480203936, "post_id": 40824019, "comment_id": 68867392, "body": "if I print the AB[1] array before the loop: ([3,15],[10,22],[81,99],[85,98][90,110])  if I print the AB[1] array after the loop: ([3,22],[10,22],[81,110],[85,98][90,110])"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1480204183, "post_id": 40824019, "comment_id": 68867426, "body": "Are portions of <code>$ABU</code>&#39;s datastructure shared by <code>$AB</code>&#39;s datastructure?  If you copy a reference the copy refers to the same thing that its source did."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480204300, "post_id": 40824019, "comment_id": 68867443, "body": "if I print the ABU[1] array after the loop: ([3,22],[81,110])"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1480204417, "post_id": 40824019, "comment_id": 68867464, "body": "After the loop, add <code>use Data::Dumper; print Dumper {ABU =&gt; $ABU, AB =&gt; $AB};</code> I&#39;m guessing you&#39;ll see duplicate references."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1480204853, "post_id": 40824019, "comment_id": 68867545, "body": "I&#39;ll put it this way: There is nothing in the code you posted that would cause <code>$AB</code> to be modified.  However, assigning to some part of <code>$ABU</code> could overwrite a part of <code>$AB</code> if the data-structures overlap, sharing the same references somewhere along the way. You haven&#39;t shown how the datastructures are created, but I suspect elsewhere in your code you have managed to construct two datastructures that share some of the same references."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1480204896, "post_id": 40824019, "comment_id": 68867553, "body": "But you are incorrect in thinking that this is the code that is the cause of your problem. This code is only exposing the problem."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480205731, "post_id": 40824019, "comment_id": 68867688, "body": "Thanks a lot! I think I guess what you mean, but I still do not know where this overlapping happens... I posted the output of print dumper... Maybe you can explain me the output final part... Sorry for my inexperience"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1480206422, "post_id": 40824019, "comment_id": 68867793, "body": "Those <code>$VAR1-&gt;...</code> lines embedded in the Dumper output indicate that those elements share a reference with an earlier portion of Dumper&#39;s output.  Somewhere along the way you have assigned a reference to another structure, rather than a deep clone of the reference&#39;s structure."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480207128, "post_id": 40824019, "comment_id": 68867899, "body": "so, what do you mean with  rather than a deep clone of the reference&#39;s structure? I cannot find where I could assign a reference to another structure"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1480224477, "post_id": 40824019, "comment_id": 68870467, "body": "in case you didn&#39;t follow what other people are saying:  the code you show is not where the problem is; the problem is in the code that is building $AB and $ABU earlier.  somewhere in that code you have an error that is making <code>$AB[0][1][0]</code> the same array reference as <code>$ABU[1][0]</code> and <code>$AB[0][1][2]</code> the same array reference as <code>$ABU[1][1]</code>.  show that code and we can suggest how to fix it.  without showing that code, we can&#39;t help much."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480236820, "post_id": 40824019, "comment_id": 68872551, "body": "Thanks a lot everybody. I think the problem happens when I assign the first value of the ABU[1] array before the loop:   push (@{$ABU-&gt;[1]}, $AB-&gt;[1][0]);  I&#39;ve tried to do this:  push (@{$ABU-&gt;[1]}, @{$AB-&gt;[1][0}]);  And then I stop seeingn the references $VAR1-&gt;... in the Dumper printing.  The problem now is that it complains inside the loop in the first if line:  Can&#39;t use string (&quot;15&quot;) as an ARRAY ref while &quot;strict refs&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 1, "creation_date": 1480203303, "post_id": 40824108, "comment_id": 68867264, "body": "No, they aren&#39;t. The references are the subroutine arguments. The script is very long and I&#39;m sure that the code I&#39;ve posted has the responsible part for my problem. But I don&#39;t know why that assignation produces a change on the AB array."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 1, "creation_date": 1480208128, "post_id": 40824108, "comment_id": 68868065, "body": "@PauRS &quot;<i>I&#39;m sure that the code I&#39;ve posted has the responsible part for my problem</i>&quot; - it doesn&#39;t (and if you&#39;re so sure that&#39;s where the problem is, why do you need us?)."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480236309, "post_id": 40824108, "comment_id": 68872456, "body": "Sorry for my english, maybe it was to strong to say that I&#39;m sure. What I mean is that if that assignation occurs, the AB changes, if I remove it of my script, AB stays as originally."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1480237012, "post_id": 40824108, "comment_id": 68872589, "body": "Why not print both without Using <code>Dumper</code> and check the <code>memory address</code> if both are pointing to the same <code>address</code>?"}], "tags": [], "owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "is_accepted": false, "score": 1, "last_activity_date": 1480201892, "creation_date": 1480201892, "answer_id": 40824108, "question_id": 40824019, "link": "https://stackoverflow.com/questions/40824019/why-does-the-second-array-gets-modified/40824108#40824108", "title": "Why does the second array gets modified?", "body": "<p>You are non showing so much code. Maybe both $ABU and $AB are references to same array.</p>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480245503, "post_id": 40827842, "comment_id": 68874497, "body": "Thanks a lot! It worked! I wouldn&#39;t like to take up your time, but if you don&#39;t mind, could you explain me why this subtil change on the syntax of the push function, solved my problem? I mean, what is the difference between : push @{$ABU-&gt;[1]}, [@{$AB-&gt;[1][0]}]; , push (@{$ABU-&gt;[1]}, $AB-&gt;[1][0]); and  push (@{$ABU-&gt;[1]}, @{$AB-&gt;[1][0}]);"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480255750, "post_id": 40827842, "comment_id": 68877453, "body": "@PauRS: See <b>Edit</b>."}, {"owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "edited": false, "score": 0, "creation_date": 1480264217, "post_id": 40827842, "comment_id": 68880041, "body": "Thank you very much.I greatly appreciate your extended answer. It helped me a lot to really understand deeply the references usage."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 3, "last_activity_date": 1480269766, "last_edit_date": 1480269766, "creation_date": 1480242056, "answer_id": 40827842, "question_id": 40824019, "link": "https://stackoverflow.com/questions/40824019/why-does-the-second-array-gets-modified/40827842#40827842", "title": "Why does the second array gets modified?", "body": "<p>The problem is this line</p>\n\n<pre><code>push (@{$ABU-&gt;[1]}, $AB-&gt;[1][$i]);\n</code></pre>\n\n<p>Here you clearly insert a reference to the array. It will be seen at result of <code>print Dumper {ABU =&gt; $ABU, AB =&gt; $AB};</code> which is missing in your question. But it can be seen in the next image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BpLY9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BpLY9.png\" alt=\"image\"></a></p>\n\n<p>See this <code>$VAR-&gt;{ABU}[1][0]</code>. After few cycles, you will end up with multiple references to the same array.</p>\n\n<p>For your data format, you can do</p>\n\n<pre><code>push @{$ABU-&gt;[1]}, [@{$AB-&gt;[1][$i]}];\n</code></pre>\n\n<p>But using some cloning routine would be more robust (immune to the feature code changes which inevitably come with time).</p>\n\n<pre><code>use Storable qw(dclone);\npush @{$ABU-&gt;[1]}, dclone($AB-&gt;[1][$i]);\n</code></pre>\n\n<p>BTW your code could be written</p>\n\n<pre><code>use Storable qw(dclone);\nfor my $ab_row (@{$AB-&gt;[1]}) {\n    my $last_abu_row = $ABU-&gt;[1][-1];\n    if ($last_abu_row-&gt;[1] &lt; $ab_row-&gt;[0]) {\n        push @{$ABU-&gt;[1]}, dclone($ab_row);\n    } elsif ($last_abu_row-&gt;[1] &lt; $ab_row-&gt;[1]) {\n        $last_abu_row-&gt;[1] = $ab_row-&gt;[1];\n    }\n}\n</code></pre>\n\n<p><strong>Edit</strong>:</p>\n\n<p>The expression <code>push @{$ABU-&gt;[1]}, [@{$AB-&gt;[1][$i]}];</code>:</p>\n\n<p><code>$AB-&gt;[1][$i]</code> is array reference</p>\n\n<p><code>@{$AB-&gt;[1][$i]}</code> is content of array refrenced by <code>$AB-&gt;[1][$i]</code></p>\n\n<p><code>[@{$AB-&gt;[1][$i]}]</code> is array reference to fresh new array with content of array referenced by <code>$AB-&gt;[1][$i]</code>. It is shorthand of:</p>\n\n<pre><code>do {\n    my @array;                # fresh new array\n    @array = @{$AB-&gt;[1][$i]}; # Here you copy content of array\n    \\@array;                  # return reference to the new array\n}\n</code></pre>\n\n<p>Then you push it to the array referenced by <code>$ABU-&gt;[1]</code>. After this statement <code>$ABU-&gt;[1][-1]</code> contains array reference to the new array with content copied from array referenced by <code>$AB-&gt;[1][$i]</code>.</p>\n\n<p>In contrast <code>push @{$ABU-&gt;[1]}, $AB-&gt;[1][$i];</code></p>\n\n<p><code>$AB-&gt;[1][$i]</code> is array reference</p>\n\n<p>which you push into the array referenced by <code>$ABU-&gt;[1]</code>. So you push array reference referencing the original array. In other words, after the statement <code>$ABU-&gt;[1][-1] = $AB-&gt;[1][$i]</code>, the same array reference.</p>\n\n<p>The third statement <code>push @{$ABU-&gt;[1]}, @{$AB-&gt;[1][$i]};</code> will push content of array referenced by <code>$AB-&gt;[1][$i]</code>. It means you don't add one new element to the array referenced by <code>$ABU-&gt;[1]</code> but same amount of elements as <code>@{$AB-&gt;[1][$i]}</code> contains. It breaks reference but doesn't do what you want. You could fix it this way:</p>\n\n<pre><code>push @{$ABU-&gt;[1]}, [];\npush @{$ABU-&gt;[1][-1]}, @{$AB-&gt;[1][$i]};\n</code></pre>\n\n<p>but it is less elegant way of writing <code>push @{$ABU-&gt;[1]}, [@{$AB-&gt;[1][$i]}];</code>.</p>\n"}], "owner": {"reputation": 66, "user_id": 7214589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153918858921861/picture?type=large", "display_name": "Pau RS", "link": "https://stackoverflow.com/users/7214589/pau-rs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 40827842, "answer_count": 2, "score": 1, "last_activity_date": 1480269766, "creation_date": 1480201218, "last_edit_date": 1480243942, "question_id": 40824019, "link": "https://stackoverflow.com/questions/40824019/why-does-the-second-array-gets-modified", "title": "Why does the second array gets modified?", "body": "<p>I just want to assign the value of the AB array to the last position of the ABU array.</p>\n\n<pre><code>$ABU-&gt;[1][-1][1] = $AB-&gt;[1][$i][1];\n</code></pre>\n\n<p>And every time this assignation occurs, the AB array gets modified.</p>\n\n<pre><code>for ($i = 1; $i &lt; $lenghtf; $i++) {\n        if ($ABU-&gt;[1][-1][1] &lt; $AB-&gt;[1][$i][0]) {\n            push (@{$ABU-&gt;[1]}, $AB-&gt;[1][$i]);\n        } elsif ($ABU-&gt;[1][-1][1] &lt; $AB-&gt;[1][$i][1]){\n            $ABU-&gt;[1][-1][1] = $AB-&gt;[1][$i][1];\n        }\n    }\n</code></pre>\n\n<p>If I do </p>\n\n<pre><code>print Dumper ($AB[1]);\n</code></pre>\n\n<p>before the loop and</p>\n\n<pre><code>print Dumper {ABU =&gt; $ABU, AB =&gt; $AB};\n</code></pre>\n\n<p>after the loop, I get this output:</p>\n\n<p>![enter image description here][1]</p>\n\n<p>After people's answers, I have realised that the problem may be when I assign the first value to ABU[1] before the loop:</p>\n\n<pre><code>push (@{$ABU-&gt;[1]}, $AB-&gt;[1][0]);\n</code></pre>\n\n<p>If I do print with dumper before the loop:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BpLY9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BpLY9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried to change that firs asignation syntax:</p>\n\n<pre><code>push (@{$ABU-&gt;[1]}, @{$AB-&gt;[1][0]});\n</code></pre>\n\n<p>And then the Dumper looks better:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uv2u1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uv2u1.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem now is that I don't know why when I run the for loop it complains in the first if line:</p>\n\n<pre><code>if ($ABU-&gt;[1][-1][1] &lt; $AB-&gt;[1][$i][0]) {\n</code></pre>\n\n<p>with this STDERR:</p>\n\n<p>Can't use string (\"15\") as an ARRAY ref while \"strict refs\"</p>\n"}, {"tags": ["perl", "http-status-code-403", "www-mechanize", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480165665, "post_id": 40818552, "comment_id": 68856624, "body": "It would be nice to say that the correct parameter for <code>new</code> is called <code>agent</code>, and you should say what the default user agent strings are"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480166737, "post_id": 40818552, "comment_id": 68856880, "body": "@Borodin: you are right. I&#39;ve added this information  to my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480167325, "post_id": 40818552, "comment_id": 68857029, "body": "Thanks. It seems odd that a site would return <i>Forbidden</i> for <code>libwww-perl</code> and not for <code>WWW-Mechanize</code>. It must be a hard-coded exclusion, and not a very effective one!"}, {"owner": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "edited": false, "score": 0, "creation_date": 1480167975, "post_id": 40818552, "comment_id": 68857209, "body": "Looking through my older scripts I seem to have used &quot;agent&quot; in the past but at some point and for unknown reasons I switched to agent_alias. A very shoddy mistake. Apologies for this blunder."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1480166699, "last_edit_date": 1592644375, "creation_date": 1480165146, "answer_id": 40818552, "question_id": 40818246, "link": "https://stackoverflow.com/questions/40818246/403-error-when-using-lwpuseragent-but-not-with-wwwmechanize/40818552#40818552", "title": "403 error when using LWP::UserAgent but not with WWW::Mechanize", "body": "<p>There is no <code>agent_alias</code> argument documented, neither for LWP::UserAgent nor for WWW::Mechanize. And there is also no <code>agent_alias</code> argument implement. Instead the <em>argument gets ignored in both cases</em> and it <em>uses the builtin default</em>. But the <em>default is different</em>. There is a <code>agent_alias</code> <em>method</em> though for WWW::Mechanize. From <a href=\"https://metacpan.org/pod/WWW::Mechanize#mech-agent_alias-alias\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n<blockquote>\n<p>...For instance,</p>\n<pre><code>$mech-&gt;agent_alias( 'Windows IE 6' );\n</code></pre>\n<p>sets your User-Agent to</p>\n<pre><code>Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)\n</code></pre>\n</blockquote>\n<p>According to the <a href=\"https://metacpan.org/pod/LWP::UserAgent#CONSTRUCTOR-METHODS\" rel=\"nofollow noreferrer\">documentation of LWP::UserAgent</a> the argument you actually want to use is properly called <code>agent</code> and defaults to <code>libwww-perl/#.###</code> (the <code>#.###</code> being the version number). With WWW::Mechanize the same argument can be used but the documented different default is <code>WWW-Mechanize/#.##</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 0, "accepted_answer_id": 40818552, "answer_count": 1, "score": 1, "last_activity_date": 1480166699, "creation_date": 1480162757, "question_id": 40818246, "link": "https://stackoverflow.com/questions/40818246/403-error-when-using-lwpuseragent-but-not-with-wwwmechanize", "title": "403 error when using LWP::UserAgent but not with WWW::Mechanize", "body": "<p>I am trying to access a site using Perl5 and LWP::UserAgent. However upon connecting, the script dies with a \"403 access denied\" message. The weird part is that it works flawlessly using WWW::Mechanize but the fetch code is the exact same.\nNormally I'd suspect the user agent being the cause but as mentioned before the code is the same in both cases.</p>\n\n<p>Is there a difference in how WWW::Mechanize and LWP::UserAgent handle requests that could cause this issue?</p>\n\n<p>Here is some sample code that demonstrates two different approaches.</p>\n\n<pre><code># Mechanize\nuse strict;\nuse warnings \"all\";\nuse WWW::Mechanize;\n\nmy $mech = WWW::Mechanize-&gt;new(\n    agent_alias =&gt; 'Mozilla/5.0',\n    show_progress =&gt; 1);\n\nmy $mech-&gt;get(\"www.foo.com\");\n\n# LWP\nuse strict;\nuse warnings \"all\";\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new(\n    agent_alias =&gt; 'Mozilla/5.0',\n    show_progress =&gt; 1);\n\nmy $r = $ua-&gt;get(\"www.foo.com\");\n</code></pre>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480157422, "post_id": 40816564, "comment_id": 68854570, "body": "Please include the code of the model. In particular the top of the file with the package definition and that sub you&#39;re calling."}, {"owner": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480194294, "post_id": 40816564, "comment_id": 68865146, "body": "I have added the code to main post"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480196949, "post_id": 40816564, "comment_id": 68865744, "body": "It looks correct. Try to get rid of the <code>use base</code> and do <code>use Moose; extends &#39;Catalyst...&#39;</code> instead."}, {"owner": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480202232, "post_id": 40816564, "comment_id": 68867032, "body": "Maybe I did not get it correctly, I have deleted in Model DB <code>use base &#39;Catalyst::Model::DBIC::Schema&#39;;</code> and added <code>use Moose; extends &#39;Catalyst&#39;;</code>, but I still the same error &quot;Can&#39;t locate object method &quot;test&quot; via package &quot;WebApp::Model::DB&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480202583, "post_id": 40816564, "comment_id": 68867105, "body": "I meant <code>extends &#39;Catalyst::Model::DBIC::Schema&#39;;</code>. That&#39;s more or less the same, but you want Moose to do the subclassing. Catalyst is using Moose internally too. But it really shouldn&#39;t make a difference. Something else must be wrong."}, {"owner": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480204325, "post_id": 40816564, "comment_id": 68867449, "body": "@simbabque, is a code from Catalyst Advent Calendar <a href=\"http://www.catalystframework.org/calendar/2012/15\" rel=\"nofollow noreferrer\">link</a> - WebApp-0.09.tar.gz running in your environment? This code I have used for my example. Just please add a method &quot;create_order&quot; to lib/StandaloneApp3.pm and call it from Catalyst Controller? Thanks for your help"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480251178, "post_id": 40816564, "comment_id": 68876136, "body": "I&#39;m going to try now. Not sure if I can get it to work in my Windows machine though."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480259969, "post_id": 40816564, "comment_id": 68878705, "body": "After installing a load of dependencies into my out of date ActivePerl I managed to reproduce your error."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480261692, "post_id": 40816564, "comment_id": 68879172, "body": "I&#39;ve updated my answer. My initial assumption was incorrect. I did miss something which you did wrong. But it&#39;s working now, and it only took about an hour of installing stuff and 20 minutes of playing around. :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1480262514, "post_id": 40816564, "comment_id": 68879431, "body": "BTW, don&#39;t call subs with <code>&amp;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "edited": false, "score": 0, "creation_date": 1480279508, "post_id": 40817677, "comment_id": 68884977, "body": "that was a great analyse on your side, thank you for your efford and time. Model trait <code>Catalyst::TraitFor::Model::DBIC::Schema::SchemaProxy</code> I did not know, it helped in this case. I have correct it also in my code and works as expected."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "edited": false, "score": 0, "creation_date": 1480285138, "post_id": 40817677, "comment_id": 68886710, "body": "@Tony glad it helped. I just don&#39;t use Catalyst in my free time usually, so it took some time to set it up. ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1480261646, "last_edit_date": 1480261646, "creation_date": 1480158282, "answer_id": 40817677, "question_id": 40816564, "link": "https://stackoverflow.com/questions/40816564/using-of-standalone-model-in-catalyst-calling-of-general-methods/40817677#40817677", "title": "Using of standalone model in Catalyst - calling of general methods", "body": "<p>You are using <code>StandaloneApp3</code> as your <em>schema class</em> inside of the catalyst model <code>WebApp::Model::DB</code>. That means it's the DBIx::Class schema that is automatically loaded for you. The schema is something like a database object.</p>\n\n<p>To access the schema, you use the <code>schema</code> accessor method on the model.</p>\n\n<pre><code>$c-&gt;model('DB')-&gt;schema;\n</code></pre>\n\n<p>So to reiterate, the schema is <strong>not</strong> part of the model. The model does not inherit from the schema. It just <a href=\"https://metacpan.org/source/GBJK/Catalyst-Model-DBIC-Schema-0.65/lib/Catalyst/Model/DBIC/Schema.pm#L460\" rel=\"nofollow noreferrer\"><em>has</em> the schema as an attribute</a>.</p>\n\n<p>Therefore the method <code>create_order</code> in the schema class <code>StandaloneApp3</code> is not a method on the model <code>WebApp::Model::DB</code>. It's a method on its <code>schema</code> attribute.</p>\n\n<pre><code>$c-&gt;model('DB')-&gt;schema-&gt;create_order;\n</code></pre>\n\n<p>The easiest way to patch that through would be to make a method <code>create_order</code> in <code>WebApp::Model::DB</code> that calls the method with the same name on the <code>schema</code>.</p>\n\n<pre><code>package WebApp::Model::DB;\n# ...\n\nsub create_order {\n    my $self = shift;\n\n    return $self-&gt;schema-&gt;create_order(@_);\n}\n</code></pre>\n\n<p>I <code>shift</code>ed out the <code>$self</code> so I can pass on the rest of the argument list <code>@_</code> to <code>$self-&gt;schema-&gt;create_order</code>.</p>\n\n<p>To prove this works, I wrote <code>create_order</code> in <code>StandaloneApp3</code> like this:</p>\n\n<pre><code>package StandaloneApp3;\n# ...\n\n# You can replace this text with custom code or comments, and it will be preserved on regeneration\n\nsub create_order {\n    # in development\n\n    warn \"creating order...\";\n    return \"order_created\"; \n}\n</code></pre>\n\n<p>I put the <code>warn</code> in so we can find it in the log that you have in your console later. Note how it's placed underneath DBIC's comment, because we don't want it to be overwritten if we need to regenerate the schema class later in case someone made changes to the database schema.</p>\n\n<p>Finally I'm calling the model method from <code>sub index</code> in the <code>Root</code> controller.</p>\n\n<pre><code>sub index :Path :Args(0) {\n    my ( $self, $c ) = @_;\n\n    $c-&gt;model('DB')-&gt;create_order;\n\n    # Hello World\n    $c-&gt;response-&gt;body( $c-&gt;welcome_message );\n}\n</code></pre>\n\n<p>If you now request <code>/</code> in your browser (for me that's <a href=\"http://localhost:5000/\" rel=\"nofollow noreferrer\">http://localhost:5000/</a>) now it works, and shows up in the log. Mine is on Windows so it looks a bit odd.</p>\n\n<pre><code>[info] *** Request 1 (0.143/s) [8012] [Sun Nov 27 16:25:59 2016] ***\n[debug] Path is \"/\"\n[debug] \"GET\" request for \"/\" from \"127.0.0.1\"\ncreating order... at lib/StandaloneApp3.pm line 23.\n127.0.0.1 - - [27/Nov/2016:16:25:59 +0100] \"GET / HTTP/1.1\" 200 5477 \"-\" \"Mozill\na/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0\n.2840.99 Safari/537.36\"\n[debug] Response Code: 200; Content-Type: text/html; charset=utf-8; Content-Leng\nth: unknown\n[info] Request took 0.012028s (83.139/s)\n.------------------------------------------------------------+-----------.\n| Action                                                     | Time      |\n+------------------------------------------------------------+-----------+\n| /index                                                     | 0.000545s |\n| /end                                                       | 0.000340s |\n'------------------------------------------------------------+-----------'\n</code></pre>\n\n<hr>\n\n<p>But of course if you have a couple of those methods you want to patch through, it gets a bit tedious to write all of them yourself. You could use AUTOLOAD to create methods on the fly, but that seems wrong in this situation, so I'm not going to explain that.</p>\n\n<p>Instead, let's use <a href=\"https://metacpan.org/pod/Catalyst::TraitFor::Model::DBIC::Schema::SchemaProxy\" rel=\"nofollow noreferrer\">Catalyst::TraitFor::Model::DBIC::Schema::SchemaProxy</a>, which is a model trait that's <a href=\"https://metacpan.org/pod/Catalyst::Model::DBIC::Schema#traits\" rel=\"nofollow noreferrer\">included with Catalyst::Model::DBIC::Schema</a> for exactly this situation. </p>\n\n<p>You load it from the configuration file or inside the <code>__PACKAGE__-&gt;config(...)</code> in your code. I prefer it there, because it's easier to see what's going on when reading the code, and you can still overwrite it later in the configuration files.</p>\n\n<p>Here is the full <code>WebApp::Model::DB</code> file. I removed the method <code>create_order</code> we put there in the example above, and included the trait configuration instead.</p>\n\n<pre><code>package WebApp::Model::DB;\nuse strict;\nuse base 'Catalyst::Model::DBIC::Schema';\n\n__PACKAGE__-&gt;config(\n    traits =&gt; 'SchemaProxy',\n);\n\n1;\n</code></pre>\n\n<p>That's all you need to change. If you restart the app and request the root <code>/</code> again, it will still work.</p>\n\n<pre><code>[info] *** Request 1 (0.111/s) [6160] [Sun Nov 27 16:43:45 2016] ***\n[debug] Path is \"/\"\n[debug] \"GET\" request for \"/\" from \"127.0.0.1\"\ncreating order... at lib/StandaloneApp3.pm line 23.\n127.0.0.1 - - [27/Nov/2016:16:43:45 +0100] \"GET / HTTP/1.1\" 200 5477 \"-\" \"Mozill\na/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0\n.2840.99 Safari/537.36\"\n[debug] Response Code: 200; Content-Type: text/html; charset=utf-8; Content-Leng\nth: unknown\n[info] Request took 0.011867s (84.267/s)\n.------------------------------------------------------------+-----------.\n| Action                                                     | Time      |\n+------------------------------------------------------------+-----------+\n| /index                                                     | 0.000712s |\n| /end                                                       | 0.000370s |\n'------------------------------------------------------------+-----------'\n</code></pre>\n\n<p>I suggest you take a few minutes and read the CPAN pages of the modules I linked in this answer. I just did the same. Catalyst can become very complex underneath and it's hard to remember all of it even if you use it a lot, so freshening up on the docs once in a while is a good idea.</p>\n"}], "owner": {"reputation": 13, "user_id": 3387307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1ab893267ca1a496646afd21c400f?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3387307/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "accepted_answer_id": 40817677, "answer_count": 1, "score": 1, "last_activity_date": 1480261646, "creation_date": 1480149906, "last_edit_date": 1480194218, "question_id": 40816564, "link": "https://stackoverflow.com/questions/40816564/using-of-standalone-model-in-catalyst-calling-of-general-methods", "title": "Using of standalone model in Catalyst - calling of general methods", "body": "<p>I am following receipt of using standalone models in Catalyst in the advent calendar from 2012 here:</p>\n\n<p><a href=\"http://www.catalystframework.org/calendar/2012/15\" rel=\"nofollow noreferrer\">http://www.catalystframework.org/calendar/2012/15</a>\nand previous days ....</p>\n\n<p>Following this receipt I am transferring existing code from current fat model. I want to have some methods in Model on general level - I expect to put them in this example into <code>lib/StandaloneApp3.pm</code> file (eg. create order means to create record in table order_header, table order_item and table log) and call them from Controller with code:</p>\n\n<pre><code>$c-&gt;model('DB')-&gt;create_order($params);\n</code></pre>\n\n<p>I am getting error:</p>\n\n<blockquote>\n  <p>\"Can't locate object method \"create_order\" via package\n  \"WebApp::Model::DB\"</p>\n</blockquote>\n\n<p>When calling function from StandaloneApp3 namespace, this work:</p>\n\n<pre><code>&amp;StandaloneApp3::create_order($params);\n</code></pre>\n\n<p>I do not think this is good approach as my Controller should connect only to Catalyst Model and not directly to standalone library.</p>\n\n<p>Is there an error in my code to access methods in StandaloneApp3.pm or when using DBIC::Schema I am not expect to call this method? In case I am not supposed to call methods in StandaloneApp3.pm, what is the correct place were to store methods that can write to more tables in one transaction? Any example also for exact calling those methods from outside Catalyst - eg. from command line?</p>\n\n<p>Thank you for your explanation and example.</p>\n\n<p>----------- ADDED CODE -------------</p>\n\n<p>Catalyst model: \nfile: lib\\WebApp\\Model\\DB.pm:</p>\n\n<pre><code>package WebApp::Model::DB;\nuse strict;\nuse base 'Catalyst::Model::DBIC::Schema';\n1;\n</code></pre>\n\n<p>Standalone Model:\nfile: lib/StandaloneApp3.pm</p>\n\n<pre><code>use utf8; \npackage StandaloneApp3;\nuse Moose; \nuse MooseX::MarkAsMethods autoclean =&gt; 1; \nextends 'DBIx::Class::Schema';\nPACKAGE-&gt;load_namespaces;\nsub create_order {\n    # in development \n    return \"order_created\"; \n}\nPACKAGE-&gt;meta-&gt;make_immutable(inline_constructor =&gt; 0); \n1; \n</code></pre>\n\n<p>Config:\nfile: webapp.conf</p>\n\n<pre><code>&lt;Model::DB&gt;\n    schema_class StandaloneApp3\n    &lt;connect_info&gt;\n        dsn dbi:SQLite:__path_to(data,database_file2.db)__\n    &lt;/connect_info&gt;\n&lt;/Model::DB&gt;\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 39408, "user_id": 55857, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9cc59902c5433de334920d378626b9d8?s=128&d=identicon&r=PG", "display_name": "FMc", "link": "https://stackoverflow.com/users/55857/fmc"}, "edited": false, "score": 0, "creation_date": 1480121366, "post_id": 40813263, "comment_id": 68847956, "body": "Your example is puzzling: the 5th line is deleted --  why? I would have expected the 5th line to become <code>##[mode2;]</code>."}, {"owner": {"reputation": 7, "user_id": 6211556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3078ea11154f2c079550e0ea1df455cb?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Doel", "link": "https://stackoverflow.com/users/6211556/bob-doel"}, "reply_to_user": {"reputation": 39408, "user_id": 55857, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9cc59902c5433de334920d378626b9d8?s=128&d=identicon&r=PG", "display_name": "FMc", "link": "https://stackoverflow.com/users/55857/fmc"}, "edited": false, "score": 0, "creation_date": 1480122036, "post_id": 40813263, "comment_id": 68848076, "body": "It would remove the line, if its only one there."}, {"owner": {"reputation": 39408, "user_id": 55857, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9cc59902c5433de334920d378626b9d8?s=128&d=identicon&r=PG", "display_name": "FMc", "link": "https://stackoverflow.com/users/55857/fmc"}, "edited": false, "score": 0, "creation_date": 1480123013, "post_id": 40813263, "comment_id": 68848252, "body": "The handling of line 5 seems different than the handling of line 3. The <code>##[mode;]</code> was deleted in one case but retained in the other. What&#39;s the rule here? And does the rule apple specifically to markers that begin with <code>##</code> or does it apply to any text that is part of a cell where we are deleting an item from the cell?"}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1480143047, "creation_date": 1480143047, "answer_id": 40815790, "question_id": 40813263, "link": "https://stackoverflow.com/questions/40813263/pruning-text-files-with-delimiters/40815790#40815790", "title": "pruning text files with delimiters", "body": "<p>Please try this:</p>\n\n<pre><code>while(&lt;DATA&gt;)\n{\n    ($line .= $_)=~s/([\\|\\,\\s]*)(?:test\\.com|[a-z]+\\-\\[a-z]+)\\b([\\|\\,\\s]*)/$1$2/g;\n}\nprint $line;\n\n__DATA__\ntest.com|test3.org|filename.co.uk|files.qwe|loop.zya|....\ntest3.org,filename-co.uk,test.com,files.qwe,loop.zya,...\ntest3.org,filename.co.uk,test.com##[mode;]\nfilename.co.uk,files.qwe,loop-zya##[\"test.com\"]\ntest.com##[mode2;]\n</code></pre>\n\n<p>Use <code>use strict</code> and <code>use warnings</code> definitely.</p>\n"}], "owner": {"reputation": 7, "user_id": 6211556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3078ea11154f2c079550e0ea1df455cb?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Doel", "link": "https://stackoverflow.com/users/6211556/bob-doel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1480143047, "creation_date": 1480115320, "last_edit_date": 1480120912, "question_id": 40813263, "link": "https://stackoverflow.com/questions/40813263/pruning-text-files-with-delimiters", "title": "pruning text files with delimiters", "body": "<p>Manually editing files is rather tedious in vim, I'd like to streamline it if I can :)</p>\n\n<p>The question is, I'd like to have a script to remove the the selected item and if its got a delimiter to remove it also. </p>\n\n<p>Its either separated with a \"|\" or a \",\" or not.</p>\n\n<p>./remove-text test.com</p>\n\n<pre><code> test.com|test3.org|filename.co.uk|files.qwe|loop.zya|....\n test3.org,filename.co.uk,test.com,files.qwe,loop.zya,...\n test3.org,filename.co.uk,test.com##[mode;]\n filename.co.uk,files.qwe,loop.zya##[\"test.com\"]\n test.com##[mode2;]\n</code></pre>\n\n<p>Would become:</p>\n\n<pre><code> test3.org|filename.co.uk|files.qwe|loop.zya|....\n test3.org,filename.co.uk,files.qwe,loop.zya,...\n test3.org,filename.co.uk##[mode;]\n filename.co.uk,files.qwe,loop.zya##[\"test.com\"]\n</code></pre>\n\n<p>Note; Trying to avoid the need to make backup/temp file and edit the file directly. </p>\n"}, {"tags": ["mysql", "perl", "perl-module"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1480102095, "post_id": 40811269, "comment_id": 68843002, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40792085/installing-koha-integrated-library-system-in-ubuntu-14-04-lts\">Installing Koha Integrated Library System in ubuntu 14.04 LTS</a>"}, {"owner": {"reputation": 107, "user_id": 6759553, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cb5d119c6a0201bc2780b0ec1c6a1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Thomas", "link": "https://stackoverflow.com/users/6759553/samuel-thomas"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1480134764, "post_id": 40811269, "comment_id": 68849864, "body": "The original is not solved either @Chankey"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1480135174, "post_id": 40811269, "comment_id": 68849938, "body": "If you do not receive answer for this question also then will you keep on asking same question again and again?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 6759553, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cb5d119c6a0201bc2780b0ec1c6a1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Thomas", "link": "https://stackoverflow.com/users/6759553/samuel-thomas"}, "edited": false, "score": 0, "creation_date": 1481089688, "post_id": 40973776, "comment_id": 69228288, "body": "I had to start again all over. And now I get stack here:    ERROR: Module mpm_itk does not exist! How to overcome @Sohail"}], "tags": [], "owner": {"reputation": 215, "user_id": 3260473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4qkO.jpg?s=128&g=1", "display_name": "Sohail", "link": "https://stackoverflow.com/users/3260473/sohail"}, "is_accepted": false, "score": 1, "last_activity_date": 1480939092, "creation_date": 1480939092, "answer_id": 40973776, "question_id": 40811269, "link": "https://stackoverflow.com/questions/40811269/error-while-installing-koha/40973776#40973776", "title": "Error while installing Koha", "body": "<p>I was presented with the same error. It appears that the error is given in an enum column in the database. For MySQL you can solve it as follows (inside the MySQL database administrator):</p>\n\n<pre><code>SET GLOBAL sql_mode = '';\n</code></pre>\n\n<p>When setting the mode with an empty string <code>''</code> you are telling MySQL not to take into account some errors that arise when inserting data.</p>\n\n<p>MySQL can operate in different modes, some modes are more restrictive than others, for example, some modes do not allow certain operations, such as division by zero or restrict the way in which the dates are represented in the database.</p>\n\n<p>To see how the server is, you must log into MySQL from the command line:</p>\n\n<pre><code>mysql -u root -p\n</code></pre>\n\n<p>If the MySQL server does not have a password (which is not recommended), omit the -p parameter. You can then check the mode with the following command</p>\n\n<pre><code>SELECT @@GLOBAL.sql_mode;\n</code></pre>\n\n<p>It will return more or less similar to this:</p>\n\n<pre><code>STRICT_TRANS_TABLES, NO_ENGINE_SUBSTITUTION\n</code></pre>\n\n<p>You can find more information on this at <a href=\"http://dev.mysql.com/doc/refman/5.7/en/sql-mode.html\" rel=\"nofollow noreferrer\">http://dev.mysql.com/doc/refman/5.7/en/sql-mode.html</a></p>\n\n<p><a href=\"https://es.stackoverflow.com/questions/30862/error-al-importar-las-plantillas-marc-21-en-koha-dbixclassstoragedbi-d\">Source</a></p>\n"}, {"comments": [{"owner": {"reputation": 989, "user_id": 4970442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed9f7f093bc4915bfe51e794e846ea2?s=128&d=identicon&r=PG", "display_name": "Pablo Bianchi", "link": "https://stackoverflow.com/users/4970442/pablo-bianchi"}, "edited": false, "score": 0, "creation_date": 1506817691, "post_id": 42404426, "comment_id": 79970722, "body": "Or <a href=\"http://schema.koha-community.org/17_05/tables/search_field.html\" rel=\"nofollow noreferrer\">just use</a> <code>ALTER TABLE search_field MODIFY type varchar(255);</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 7006654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa876ef03cec0ab6f85ae1d9d73afbc7?s=128&d=identicon&r=PG&f=1", "display_name": "Asmaa Samir", "link": "https://stackoverflow.com/users/7006654/asmaa-samir"}, "is_accepted": false, "score": 0, "last_activity_date": 1506827006, "last_edit_date": 1506827006, "creation_date": 1487806984, "answer_id": 42404426, "question_id": 40811269, "link": "https://stackoverflow.com/questions/40811269/error-while-installing-koha/42404426#42404426", "title": "Error while installing Koha", "body": "<ol>\n<li>install phpmyadmin on different port (say 81)</li>\n<li>select koha_library database (where <em>library</em> is the instance)</li>\n<li>select \u2018search_filed\u2019 table</li>\n<li>press \u2018structure\u2019 tap</li>\n<li>select 'type' column and then press 'change'</li>\n<li>change the type to varchar and length to 255  (<strong>or you can change the type of column 'type'in table \u2018search_filed\u2019 from enum to varchar(255) using the terminal</strong>)</li>\n<li><p>execute the following command in server terminal (login using <code>mysql-u root -p</code> ):</p>\n\n<pre><code>SET GLOBAL sql_mode='';\nquit;\n</code></pre></li>\n<li><p><code>sudo service mysql restart &amp;&amp; sudo service apache2 restart</code></p></li>\n</ol>\n"}], "owner": {"reputation": 107, "user_id": 6759553, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cb5d119c6a0201bc2780b0ec1c6a1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Thomas", "link": "https://stackoverflow.com/users/6759553/samuel-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1506827006, "creation_date": 1480101943, "question_id": 40811269, "link": "https://stackoverflow.com/questions/40811269/error-while-installing-koha", "title": "Error while installing Koha", "body": "<p>I get this error when installing via the web installer, the error says:</p>\n\n<pre><code>DBIx::Class::Storage::DBI::_dbh_execute(): Data truncated for column 'type' at row 1 at /usr/share/koha/lib/Koha/Objects.pm line 101\n</code></pre>\n\n<p>Installed version is: 16.05.05.000</p>\n\n<p>I installed using packages by following the instructions on this link: <a href=\"https://wiki.koha-community.org/wiki/Koha_on_Debian\" rel=\"nofollow noreferrer\">https://wiki.koha-community.org/wiki/Koha_on_Debian</a></p>\n\n<p>The database I'm using is: MySQL database; and it is on the same machine as Koha.</p>\n\n<p>Any idea please!</p>\n"}, {"tags": ["perl", "moo"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480104590, "post_id": 40811097, "comment_id": 68843772, "body": "Does the <code>weaken</code> there actually do anything? If it worked, I would&#39;ve expected <code>$y</code> to become <code>undef</code> right after <code>weaken $y</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480109956, "post_id": 40811097, "comment_id": 68845315, "body": "@melpomene, There is a second reference to the CV (as seen using Devel::Peek&#39;s <code>Dump</code>), though I don&#39;t know what it is. /// That said, that means that <code>$y = undef;</code> doesn&#39;t actually free the sub as the OP expects. The call to <code>weaken</code> could be removed without affecting the demo."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480111917, "post_id": 40811097, "comment_id": 68845882, "body": "@ikegami I&#39;d assume the second reference is in the optree itself, because the sub is not a closure, so it&#39;s probably created during compilation and just kept around forever."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480112745, "post_id": 40811097, "comment_id": 68846070, "body": "@melpomene, Oh, <i>because it&#39;s not a closure</i>, it just returns a reference to the single permanent instance every time you execute <code>sub { say &#39;foo&#39; }</code>. Putting that to the test"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1480113215, "post_id": 40811097, "comment_id": 68846185, "body": "@melpomene, Bingo. Updated the question and the answer."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480118151, "post_id": 40811097, "comment_id": 68847368, "body": "I apologize, the code I posted not only did not compile (due to an embarassing cut&#39;n&#39;paste error) but also illustrated confusion on my part about weaken.  Thanks to @ikegami for the corrections."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1480118996, "last_edit_date": 1480118996, "creation_date": 1480103339, "answer_id": 40811526, "question_id": 40811097, "link": "https://stackoverflow.com/questions/40811097/weakening-captures-using-subquote/40811526#40811526", "title": "Weakening captures using Sub::Quote", "body": "<pre><code>my $bar = quote_sub( '&amp;$y', { '$y' =&gt; \\$y } );\n</code></pre>\n\n<p>is roughly the same as</p>\n\n<pre><code>my $bar = eval(q{ my $y = $y; sub { &amp;$y } });\n</code></pre>\n\n<p>(It does more, but those bits are irrelevant to this question). As you can see, that creates a new strong reference to the sub<sup>[1]</sup>.</p>\n\n<p>As a workaround, you could add a layer of indirection:</p>\n\n<pre><code>my $bar = eval(q{ my $y_ref = \\$y; sub { &amp;{ $$y_ref } } });\n</code></pre>\n\n<p>This can be achieved by using:</p>\n\n<pre><code>my $bar = quote_sub( '&amp;{$$y_ref}', { '$y_ref' =&gt; \\\\$y } );\n</code></pre>\n\n<hr>\n\n<p>There wouldn't be any problems if the <code>$y</code> created by Sub::Quote was an alias for your <code>$y</code>. This can be achieved using Data::Alias or an experimental feature introduced in 5.22.</p>\n\n<p>This can be demonstrated using the following:</p>\n\n<pre><code>{\n  package Sub::Quote;\n\n  my $sub = sub {\n    my ($from, $captures, $indent) = @_;\n    join(\n      '',\n      \"use feature qw( refaliasing );\\n\",\n      \"no warnings qw( experimental::refaliasing );\\n\",\n      map {\n        /^([\\@\\%\\$])/\n          or croak \"capture key should start with \\@, \\% or \\$: $_\";\n        (' ' x $indent).qq{\\\\my ${_} = \\\\${1}{${from}-&gt;{${\\quotify $_}}};\\n};\n      } keys %$captures\n    )\n  };\n\n  no warnings qw( redefine );\n  *capture_unroll = $sub;\n}\n\n\nmy $bar = quote_sub( '&amp;$y', { '$y' =&gt; \\$y } );\n</code></pre>\n\n<p>You could talk to the module's maintainer about adding an option that would cause the use of aliasing.</p>\n\n<hr>\n\n<ol>\n<li>When you create a copy of a (strong or weak) reference, it's a strong reference.</li>\n</ol>\n"}], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40811526, "answer_count": 1, "score": 6, "last_activity_date": 1480118996, "creation_date": 1480100910, "last_edit_date": 1480113402, "question_id": 40811097, "link": "https://stackoverflow.com/questions/40811097/weakening-captures-using-subquote", "title": "Weakening captures using Sub::Quote", "body": "<p>I'd like to weaken captured variables in the code generated by <a href=\"https://metacpan.org/pod/Sub::Quote\" rel=\"nofollow noreferrer\">Sub::Quote</a>.  For example, here's the non-quoted alternative:</p>\n\n<pre><code>use 5.10.0;\nuse Scalar::Util qw[ weaken ];\n{\n  my $s = 'foo';\n  my $x = sub { say $s };\n  weaken( my $y = $x );\n\n  my $bar = sub { &amp;$y };\n  &amp;$bar;\n  $x = undef;\n  &amp;$bar\n}\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>foo\nCan't use an undefined value as a subroutine reference [...]\n</code></pre>\n\n<p>And here's my Sub::Quote attempt:</p>\n\n<pre><code>use 5.10.0;\nuse Sub::Quote;\nuse Scalar::Util qw[ weaken ];\n{\n  my $s = 'foo';\n  my $x = sub { say $s };\n  weaken( my $y = $x );\n\n  my $bar = quote_sub( '&amp;$y', { '$y' =&gt; \\$y } );\n  &amp;$bar;\n  $x = undef;\n  &amp;$bar;\n}\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>foo\nfoo\n</code></pre>\n\n<p>Obviously the captured <code>$y</code> isn't weakened. Is there a way of altering the generated code to weaken captured variables?</p>\n\n<p>The documentation is sparse, and the <code>Sub::Quote</code> implementation is complex;  I'm fairly convinced this isn't possible with the current code, but I'd love to be shown to be wrong.</p>\n"}, {"tags": ["regex", "perl", "backtracking"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1480102348, "post_id": 40810991, "comment_id": 68843064, "body": "You should show your example string (useful to make tests). In my opinion the main problem comes from the <code>.*</code> that is very permissive. Other things: Why using the m modifier? Did you look for an assembler parser module before?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480114249, "post_id": 40810991, "comment_id": 68846444, "body": "<code>.*_?</code> can be simplified to <code>.*</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 0, "creation_date": 1480101141, "post_id": 40811104, "comment_id": 68842676, "body": "Can this be combined with (say) <code>(?:...)</code> to inhibit capturing?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 1, "creation_date": 1480101618, "post_id": 40811104, "comment_id": 68842839, "body": "@Demi: <code>(?&gt;...)</code> (atomic group) like <code>(?:...)</code> (non-capturing group) doesn&#39;t capture. But don&#39;t imagine that one of these groups will remove something from the whole match result. Note that if you want to make atomic a single token with a quantifier, you can also add <code>+</code> after the quantifier to make it possessive: <code>\\s++</code> (if this feature is available in your regex flavour)."}], "tags": [], "owner": {"reputation": 1727, "user_id": 2102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f97295ca416aca61bd8d6e8fac8ef5?s=128&d=identicon&r=PG", "display_name": "Waxrat", "link": "https://stackoverflow.com/users/2102698/waxrat"}, "is_accepted": true, "score": 1, "last_activity_date": 1480100970, "creation_date": 1480100970, "answer_id": 40811104, "question_id": 40810991, "link": "https://stackoverflow.com/questions/40810991/how-can-i-match-regexps-like-sa-sb-without-excessive-backtracking/40811104#40811104", "title": "How can I match regexps like /\\s*a\\s*b/ without excessive backtracking?", "body": "<p>The general approach is for any sub-expression that might do backtracking that you want to inhibit, surround the sub-expression with <code>(?&gt;...)</code>.\nSo <code>\\s+</code> would be <code>(?&gt;\\s+)</code>, for example.</p>\n"}, {"comments": [{"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 0, "creation_date": 1480134626, "post_id": 40812546, "comment_id": 68849847, "body": "The code is output from either the GHC NCG (native code generator), LLVM, or GCC.  So I don&#39;t have control over the source (okay, the tool I am working on is part of GHC, so I do if it is the GHC NCG, but not otherwise)."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1480109866, "creation_date": 1480109866, "answer_id": 40812546, "question_id": 40810991, "link": "https://stackoverflow.com/questions/40810991/how-can-i-match-regexps-like-sa-sb-without-excessive-backtracking/40812546#40812546", "title": "How can I match regexps like /\\s*a\\s*b/ without excessive backtracking?", "body": "<p>In my experience, a lot of people try to use regexes where they're <a href=\"https://xkcd.com/1171/\" rel=\"nofollow noreferrer\">not required</a>, and many people try to avoid them <a href=\"https://xkcd.com/208/\" rel=\"nofollow noreferrer\">where they're the best solution</a>.  So I have to always start by asking - what are you trying to do?</p>\n\n<p>What it looks like to me is that you're trying to pull apart some code.  Perhaps it would be easier to reverse that, and to always have it pulled apart and then combine it as part of the make process?  For this type of thing, I often will use templates to let me build code exactly the right way, and interpolate in the specific code for this build unit.  And then I avoid the regex issue altogether, which means I also can avoid developers doing something I didn't expect 6 months from now.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1480194312, "last_edit_date": 1480194312, "creation_date": 1480114499, "answer_id": 40813163, "question_id": 40810991, "link": "https://stackoverflow.com/questions/40810991/how-can-i-match-regexps-like-sa-sb-without-excessive-backtracking/40813163#40813163", "title": "How can I match regexps like /\\s*a\\s*b/ without excessive backtracking?", "body": "<p>Honestly, there should be very little backtracking with that code. The whole thing is anchored by <code>.text</code>, and the other places where backtracking can occur will quickly abort. Still, there are optimisations you could try.</p>\n\n<ul>\n<li>Removed the need to capture (which slows things down) by using <code>\\K</code>. Given what I said above, <strong>this will likely be the optimization that provides the most benefit.</strong></li>\n<li>Replace <code>\\s*</code> with <code>\\s*+</code> aka <code>(?&gt;\\s*)</code> (prevents backtracking, which is safe because the next char can't be a space).</li>\n<li>Replace the final <code>.*</code> with <code>.*+</code> aka <code>(?&gt;.*)</code> (prevents backtracking, which is safe because the next char can't be a non-newline).</li>\n<li>Replace <code>(?:,0x90)?</code> with <code>(?:,0x90)?+</code> (prevents backtracking, which is safe because the next char can't be a comma).</li>\n<li>Replace <code>\\s+.*_?</code> with the simpler but equivalent <code>\\s.*</code>.</li>\n</ul>\n\n<p>&#x20;</p>\n\n<pre><code>s/\n    \\.text \\n\n    \\s*+\n    \\.align [ ] .(?:,0x90)?+ \\n\n    \\K\n    \\.globl \\s .* __stg_split_marker .*+ \\n\n//xm\n</code></pre>\n"}], "owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 40811104, "answer_count": 3, "score": 0, "last_activity_date": 1480194312, "creation_date": 1480100276, "last_edit_date": 1480100835, "question_id": 40810991, "link": "https://stackoverflow.com/questions/40810991/how-can-i-match-regexps-like-sa-sb-without-excessive-backtracking", "title": "How can I match regexps like /\\s*a\\s*b/ without excessive backtracking?", "body": "<p>I am working in Perl, which uses a backtracking regex engine.</p>\n\n<p>I need to match strings of whitespace-delimited tokens (I am parsing assembler in case anyone is wondering).  I am currently using regexps like </p>\n\n<pre><code>s/(\\.text\\n\\s*\\.align .(?:,0x90)?\\n)\\.globl\\s+.*_?__stg_split_marker.*\\n/$1/m\n</code></pre>\n\n<p>to do this, but am worried about excessive backtracking.</p>\n\n<p>How can I prevent this?</p>\n"}, {"tags": ["perl", "cpanm"], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 3084596, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001726131687/picture?type=large", "display_name": "Petru", "link": "https://stackoverflow.com/users/3084596/petru"}, "edited": false, "score": 0, "creation_date": 1538475643, "post_id": 41158824, "comment_id": 92146754, "body": "that solution is not ideal. If you have lots of installed modules, it will take forever to reinstall them"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 332, "user_id": 3084596, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001726131687/picture?type=large", "display_name": "Petru", "link": "https://stackoverflow.com/users/3084596/petru"}, "edited": false, "score": 1, "creation_date": 1538486105, "post_id": 41158824, "comment_id": 92152337, "body": "@Petru: This is the only way for now. Alternative was not proposed for two years. So it is not worth downvoting"}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1538487094, "last_edit_date": 1538487094, "creation_date": 1481787645, "answer_id": 41158824, "question_id": 40810708, "link": "https://stackoverflow.com/questions/40810708/how-to-uninstall-from-carton/41158824#41158824", "title": "How to uninstall from `Carton`", "body": "<p>I workaround I just delete <code>local</code> folder and install modules from scratch:</p>\n\n<pre><code>rm -r local\ncarton\n</code></pre>\n\n<p><strong>UPD</strong>  </p>\n\n<blockquote>\n  <p>Note: This can take a while to install from scratch.  </p>\n</blockquote>\n\n<p>Thus to save time you can pass <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm#-n,-notest\" rel=\"nofollow noreferrer\"><code>--notest</code></a> option to <code>cpanm</code> via <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm#PERL_CPANM_OPT\" rel=\"nofollow noreferrer\">PERL_CPANM_OPT</a>:</p>\n\n<pre><code>PERL_CPANM_OPT=--notest carton\n</code></pre>\n\n<p>Or if you you want to prevent querying for new versions:</p>\n\n<pre><code>carton install --deployment\n</code></pre>\n\n<p>This will install modules without testing them. This is safe in compare to previous command because you know that module was installed before (tests were PASS)</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 41158824, "answer_count": 1, "score": 4, "last_activity_date": 1538487094, "creation_date": 1480098693, "question_id": 40810708, "link": "https://stackoverflow.com/questions/40810708/how-to-uninstall-from-carton", "title": "How to uninstall from `Carton`", "body": "<p>I have <code>Carton</code> environment and install modules into <code>./local/</code> from <code>cpanfile</code>. But now I do not require some modules and want to remove some.</p>\n\n<p>I can remove <code>./local</code> folder and install modules from scratch but this take a time. I have found <a href=\"https://webcache.googleusercontent.com/search?q=cache:ckyH5a9kDMAJ:https://metacpan.org/pod/release/MIYAGAWA/carton-v0.9.10/docs/carton-uninstall.pod+&amp;cd=1&amp;hl=ru&amp;ct=clnk&amp;gl=ua\" rel=\"nofollow noreferrer\">this</a></p>\n\n<pre><code>carton uninstall Module\n</code></pre>\n\n<p>But it does not exists anymore.</p>\n\n<p>Is there something like <code>carton uninstall</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 11, "creation_date": 1480090412, "post_id": 40808789, "comment_id": 68838475, "body": "This is a great example of an error that <code>use strict</code> and <code>use warnings</code> would have caught. Why didn&#39;t you use them?"}, {"owner": {"reputation": 1, "user_id": 7210500, "user_type": "registered", "profile_image": "https://graph.facebook.com/916419365159255/picture?type=large", "display_name": "Deendayal Ahirwar", "link": "https://stackoverflow.com/users/7210500/deendayal-ahirwar"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1480094182, "post_id": 40808789, "comment_id": 68840228, "body": "Hey Thanks for answering!! actually i am new to Perl so can you please tell me why its not printing all the elements."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1480096085, "post_id": 40808789, "comment_id": 68840946, "body": "Indeed, always use <code>use strict; use warnings qw( all );</code>. This will identify five or more problems in your program!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1480143990, "post_id": 40808789, "comment_id": 68851579, "body": "@DeendayalAhirwar: I didn&#39;t explain what the problem was, as you already had a really good answer from Sobrique."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7210500, "user_type": "registered", "profile_image": "https://graph.facebook.com/916419365159255/picture?type=large", "display_name": "Deendayal Ahirwar", "link": "https://stackoverflow.com/users/7210500/deendayal-ahirwar"}, "edited": false, "score": 0, "creation_date": 1480093571, "post_id": 40808918, "comment_id": 68839976, "body": "But if i will use $i it will print value of i that is 0 to 4....correct me if i am wrong"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1480258273, "last_edit_date": 1480258273, "creation_date": 1480090260, "answer_id": 40808918, "question_id": 40808789, "link": "https://stackoverflow.com/questions/40808789/why-does-this-code-print-only-the-first-element/40808918#40808918", "title": "Why does this code print only the first element?", "body": "<p>Because you've typo'ed here: <code>$array1[i]</code>.</p>\n\n<p>That should be <code>$i</code>, as in <code>$array1[$i]</code> - and this is something that <code>use strict;</code> <code>use warnings</code> would have warned you about. <code>Bareword \"i\" not allowed while \"strict subs\" in use</code></p>\n\n<p>But as it stands - because you use <code>i</code> there, and it's not a variable - it's evaluated as zero, so you just print the first element of the array. </p>\n\n<p>A better idiom would be:</p>\n\n<pre><code>foreach my $value ( @array1 ) { \n    print \"Array elements are=\", $value,\"\\n\"; \n}\n</code></pre>\n\n<p>It is rarely necessary (or desirable) to manipulate arrays by index in perl. </p>\n"}], "owner": {"reputation": 1, "user_id": 7210500, "user_type": "registered", "profile_image": "https://graph.facebook.com/916419365159255/picture?type=large", "display_name": "Deendayal Ahirwar", "link": "https://stackoverflow.com/users/7210500/deendayal-ahirwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480258273, "creation_date": 1480089823, "last_edit_date": 1480091602, "question_id": 40808789, "link": "https://stackoverflow.com/questions/40808789/why-does-this-code-print-only-the-first-element", "title": "Why does this code print only the first element?", "body": "<p>Can anyone explain to me why only the first item of this array is being printed?</p>\n\n<pre><code>    print \"Hello World!\\n\";\n\n    @array1 = (\"john\",\"haider\",\"elley\",\"uul\");\n\n    @array2 = qw/This is an array/;\n\n    $array_size=scalar @array1;\n\n    print \"Size: \",$array_size,\"\\n\";\n\n    $i;\n\n    for($i=0; $i&lt;=$array_size; $i=$i+1)\n    {\n             print\"Array elements are=\",$array1[i],\"\\n\";\n    }\n</code></pre>\n"}, {"tags": ["perl", "curly-braces"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1480096414, "post_id": 40807215, "comment_id": 68841061, "body": "<a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "edited": false, "score": 0, "creation_date": 1480085672, "post_id": 40807347, "comment_id": 68835950, "body": "I feel like using curly brace to achieve the above is patchy; I think it&#39;d be more &quot;natural&quot; to use parenthesis instead, as in some other languages; but that is not possible because $( is already a built-in var. In your example above of &quot;print +(...&quot;, would replacing it with &quot;print +{...&quot; still work? I find my head unnecessarily spinning to have to think thru which form of &quot;grouping&quot; (to give precedence) (parenthesis or curly brace) is valid."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "edited": false, "score": 3, "creation_date": 1480085869, "post_id": 40807347, "comment_id": 68836050, "body": "It has to be braces as it is literally a block of code. You can&#39;t replace <code>+(</code> with <code>+{</code> as that&#39;s a list slice and lists are constructed with <code>( ... )</code>."}, {"owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "edited": false, "score": 0, "creation_date": 1480086150, "post_id": 40807347, "comment_id": 68836252, "body": "Your reference of the term &quot;block of code&quot; helps remove my confusion. I&#39;d been thinking of the curly braces in terms of &quot;grouping&quot;, while it should be viewed as a &quot;block&quot; construct."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1480086983, "last_edit_date": 1480086983, "creation_date": 1480084735, "answer_id": 40807347, "question_id": 40807215, "link": "https://stackoverflow.com/questions/40807215/what-is-the-role-of-the-curly-brace-in-this-case-in-perl/40807347#40807347", "title": "What is the role of the curly brace in this case in Perl?", "body": "<p>The reason is that the expression inside the braces can be arbitrarily complex. Imagine, for example, that you had an object with a method that returned a list of array references - and that you wanted to use the second reference in that list. Then you could use the following code:</p>\n\n<pre><code>print ${ ($obj-&gt;array_generator)[1] }[0];\n</code></pre>\n\n<p>Inside the braces you can use any expression that returns an array reference. It is only in the simple case (where the expression is a simple scalar variable) that you can omit the braces.</p>\n\n<p>Of course, using this syntax to look up elements in the referenced array is rarely a good idea - I'd always recommend the arrow syntax instead.</p>\n\n<pre><code>print +($obj-&gt;array_generator)[1]-&gt;[0];\n</code></pre>\n\n<p><strong>Update:</strong> Something I forgot to mention originally - the expression has to be enclosed in braces as it is a block of code that returns an array reference. It doesn't have to be a single expression. You could (but probably shouldn't!) write code like this:</p>\n\n<pre><code>print ${\n  my @arefs = $object-&gt;array_generator;\n  my $aref = $arefs[1];\n  $aref;\n}[0];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1480195059, "last_edit_date": 1480195059, "creation_date": 1480090414, "answer_id": 40808961, "question_id": 40807215, "link": "https://stackoverflow.com/questions/40807215/what-is-the-role-of-the-curly-brace-in-this-case-in-perl/40808961#40808961", "title": "What is the role of the curly brace in this case in Perl?", "body": "<p><code>$BLOCK[EXPR]</code> allowed <code>${ get_ref() }[0]</code> before you could do <code>get_ref()-&gt;[0]</code>.</p>\n\n<hr>\n\n<p>I think the (preferred) arrow notation syntax (<code>$EXPR-&gt;[EXPR]</code>) is newer than the inline syntax. The inline syntax for array element dereference is the following:</p>\n\n<pre><code>$BLOCK[EXPR]\n</code></pre>\n\n<p>This allows</p>\n\n<pre><code>${ get_ref() }[0]   # And even more complex blocks, including one with multiple statements.\n</code></pre>\n\n<p>However, for convenience,</p>\n\n<pre><code>${ $ref }[EXPR]     # BLOCK contains a simple scalar\n</code></pre>\n\n<p>can be shortened to</p>\n\n<pre><code>$$ref[EXPR]\n</code></pre>\n\n<p>See <a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"nofollow noreferrer\">Dereferencing Syntax</a>.</p>\n"}], "owner": {"reputation": 667, "user_id": 1710115, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1b06348c5ff4f0e2edaefb35ebafd8a3?s=128&d=identicon&r=PG", "display_name": "Ltf4an", "link": "https://stackoverflow.com/users/1710115/ltf4an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 1, "accepted_answer_id": 40807347, "answer_count": 2, "score": 1, "last_activity_date": 1480195059, "creation_date": 1480084262, "question_id": 40807215, "link": "https://stackoverflow.com/questions/40807215/what-is-the-role-of-the-curly-brace-in-this-case-in-perl", "title": "What is the role of the curly brace in this case in Perl?", "body": "<p>The following <em>print</em> statements are valid in accessing the 1st element of the array reference</p>\n\n<pre><code>my $aref = [6, 7, 8];\nprint $aref-&gt;[0];\nprint $$aref[0];\nprint ${$aref}[0];\n</code></pre>\n\n<p>What is the reason for allowing/using the curly brace in the 3rd print? Does it work by design or by chance?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1480079752, "post_id": 40805742, "comment_id": 68832543, "body": "So to get this straight, you just want to run both the receive and Send in a single script? Not needing to run 2 programs but only one?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480079900, "post_id": 40805742, "comment_id": 68832638, "body": "@Gerry: Yes. Absolutely this is chat."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1480079938, "post_id": 40805742, "comment_id": 68832667, "body": "ok, let me post an answer quick. One more question, do you want to use any values from the Received message to send via the send function?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480080196, "post_id": 40805742, "comment_id": 68832818, "body": "yes. Its IP address for the particular users. That is reply."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480081402, "post_id": 40806262, "comment_id": 68833560, "body": "My question is if someone chat with me how can i enter the IP addresses?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480081485, "post_id": 40806262, "comment_id": 68833607, "body": "where is the IP address coming from? in the <code>$text</code> of the receive? I am unclear on that."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480081513, "post_id": 40806262, "comment_id": 68833622, "body": "<code>$Destination</code>...?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480081643, "post_id": 40806262, "comment_id": 68833693, "body": "Your original script prompts for the destination IP. If you want to carry over the IP from the Received message then you should just post it to Destination. I will edit the script and show you"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480082550, "post_id": 40806262, "comment_id": 68834204, "body": "Thanks a lot. Now time to break. I will let you know once tested."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480335501, "post_id": 40806262, "comment_id": 68905110, "body": "No and its getting hanged while running on server. Need to test more and WIP."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 1, "last_activity_date": 1480081907, "last_edit_date": 1480081907, "creation_date": 1480080813, "answer_id": 40806262, "question_id": 40805742, "link": "https://stackoverflow.com/questions/40805742/using-iosocketinet-receiving-and-sending-message-in-single-prompt/40806262#40806262", "title": "using IO::Socket::INET receiving and sending message in single prompt", "body": "<p>See the Comment next to Line 23 and line 26</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Socket::INET;\nmy @Destination;\nmy $text;\nmy $Receive_Socket=new IO::Socket::INET-&gt;new (LocalPort=&gt;1234,Proto=&gt;'udp');\nwhile(1)\n{\n$Receive_Socket-&gt;recv($text,128);\nmy $hostip=$Receive_Socket-&gt;peerhost();\nif($text ne '')\n{\n    print \"\\nReceived message from $hostip: $text \\n\";\n    print \"Command Output:\\n\";\n    #system(\"$text\");\n    print \"\\n\";\n\n}\nelse\n{\n    print \"Client has exited!\"; exit 1;\n}\npush @Destination, $hostip;    # Push the IP Received to where you will send it\n}\nmy $DestinationIP = $Destination[0]; # Here we assign the original $hostip to $DestinationIP\nchomp $DestinationIP;\n\nprint \"Please Enter your message: \\n\";\nmy $Send_Socket=new IO::Socket::INET-&gt; new(PeerPort=&gt;1234,Proto=&gt;1234,Proto=&gt;'udp',PeerAddr=&gt;$DestinationIP);\nwhile(my $msg=&lt;STDIN&gt;)\n{\nchomp $msg;\nif($msg ne '')\n{\n    print \"\\n Sending $msg\";\n    if($Send_Socket-&gt;send($msg))\n    {\n        print \"done \\n\";\n        print \"\\nPlease Enter another message:\";\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1480081907, "creation_date": 1480079018, "question_id": 40805742, "link": "https://stackoverflow.com/questions/40805742/using-iosocketinet-receiving-and-sending-message-in-single-prompt", "title": "using IO::Socket::INET receiving and sending message in single prompt", "body": "<p>I have found two types of programs on Website that is based on the IO::Socket::INET module which is receiving and sending the messages via IP address.</p>\n\n<p>Receiving Message Program:</p>\n\n<pre><code>use IO::Socket::INET;\nmy $text;\n$MySocket=new IO::Socket::INET-&gt;new (LocalPort=&gt;1234,Proto=&gt;'udp');\nwhile(1)\n{\n    $MySocket-&gt;recv($text,128);\n    $hostip=$MySocket-&gt;peerhost();\n    if($text ne '')\n    {\n        print \"\\nReceived message from $hostip: $text \\n\";\n        print \"Command Output:\\n\";\n        #system(\"$text\");\n        print \"\\n\";\n    }\n    else\n    {\n        print \"Client has exited!\"; exit 1;\n    }\n}\n</code></pre>\n\n<p>Sending Message:</p>\n\n<pre><code>use IO::Socket::INET;\n#Enter Destination IP Message\nprint \"Please Enter the destination IP: \\n\";\n$DestinationIP = &lt;STDIN&gt;;\nchomp $DestinationIP;\n\n#Enter message to sent to Server\nprint \"Please Enter your message: \\n\";\n$MySocket=new IO::Socket::INET-&gt; new(PeerPort=&gt;1234,Proto=&gt;1234,Proto=&gt;'udp',PeerAddr=&gt;$DestinationIP);\n#$MySocket-&gt;send($msg);\n\nwhile($msg=&lt;STDIN&gt;)\n{\n    chomp $msg;\n    if($msg ne '')\n    {\n        print \"\\n Sending $msg\";\n        if($MySocket-&gt;send($msg))\n        {\n            print \"done \\n\";\n            print \"\\nPlease Enter another message:\";\n        }\n    }\n}\n</code></pre>\n\n<p>And my question is how to handle/merge these programs in a single MS-Dos prompt.</p>\n\n<p>For eg:</p>\n\n<pre><code>   `Receiving and sending message in Single Prompt.`\n</code></pre>\n\n<p>My sincere apologies, if I have questioned any hypothetical without sense. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1325, "user_id": 6139818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zV0XZ.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6139818/tom"}, "edited": false, "score": 0, "creation_date": 1480074606, "post_id": 40804028, "comment_id": 68829480, "body": "Please, insert the part of your script related to the place it&#39;s asking you the password, so people can help you based on it."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1480076781, "post_id": 40804028, "comment_id": 68830781, "body": "look into this <a href=\"http://security.stackexchange.com/questions/20461/how-can-i-avoid-putting-the-database-password-in-a-perl-script\" title=\"how can i avoid putting the database password in a perl script\">security.stackexchange.com/questions/20461/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4198565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/15ae0d4ac0f40700e0184fedb3f11a93?s=128&d=identicon&r=PG&f=1", "display_name": "Johnney", "link": "https://stackoverflow.com/users/4198565/johnney"}, "edited": false, "score": 0, "creation_date": 1484925262, "post_id": 40804982, "comment_id": 70724955, "body": "It is really helpful.Thanks!!"}], "tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1480076541, "creation_date": 1480076541, "answer_id": 40804982, "question_id": 40804028, "link": "https://stackoverflow.com/questions/40804028/perl-script-handling-with-database/40804982#40804982", "title": "Perl script handling with database", "body": "<p>If the password becomes a parameter of the script (passed as environment variable for example to avoid being visible in ps), it becomes visible only to people logged with the same account. It may be possible to create a secured dedicated account to launch this script.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1480079328, "creation_date": 1480079328, "answer_id": 40805833, "question_id": 40804028, "link": "https://stackoverflow.com/questions/40804028/perl-script-handling-with-database/40805833#40805833", "title": "Perl script handling with database", "body": "<p>I would suggest using <code>Crypt::SaltedHash</code> see here. <a href=\"http://search.cpan.org/~gshank/Crypt-SaltedHash-0.09/lib/Crypt/SaltedHash.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~gshank/Crypt-SaltedHash-0.09/lib/Crypt/SaltedHash.pm</a></p>\n"}], "owner": {"reputation": 89, "user_id": 4198565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/15ae0d4ac0f40700e0184fedb3f11a93?s=128&d=identicon&r=PG&f=1", "display_name": "Johnney", "link": "https://stackoverflow.com/users/4198565/johnney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480079328, "creation_date": 1480073397, "question_id": 40804028, "link": "https://stackoverflow.com/questions/40804028/perl-script-handling-with-database", "title": "Perl script handling with database", "body": "<p>Currently we are having perl script which will interact with database and will prompt user password for connecting to database.\nCurrently we are running that script manually and giving password to proceed.\nBut here we are planning to run that script at late night where it should not ask user password and interact with database and proceed with execution.\nIs there any way we can do that like encryption/decryption something like that.\nPlease help</p>\n"}, {"tags": ["multithreading", "perl", "variables", "stack"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1480069905, "post_id": 40802766, "comment_id": 68826582, "body": "Could you please share what warning you are getting??"}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1480070914, "post_id": 40802766, "comment_id": 68827220, "body": "I have post the codes and the warning."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1480071075, "post_id": 40802766, "comment_id": 68827327, "body": "Perl arrays start at <code>0</code>, so maybe you want to do <code>0..4</code> instead of <code>1..5</code> and see if your warning goes away."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1480071318, "post_id": 40802766, "comment_id": 68827470, "body": "Yes, @xxfelixxx is right, In first code block <code>@threads</code> index 0 element is undefined but in second code block you are just pushing into the array so index 0 element is not undefined there. At line 42 <b><i><code>$_-&gt;is_running()</code></i></b> <code>$_</code> is <b>undefined</b>, that is why you are getting these warnings."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480073556, "post_id": 40802766, "comment_id": 68828886, "body": "Yes, this is the problem. Thanks a lot"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480090698, "post_id": 40802766, "comment_id": 68838633, "body": "Actually, I&#39;d suggest that you shouldn&#39;t bother with an array of threads in this case, and just stick with <code>threads -&gt; list</code>, or <code>threads-&gt;list(threads::joinable);</code>"}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480126453, "post_id": 40802766, "comment_id": 68848781, "body": "You mean this part <code>while($thr_num){}</code>?@Sobrique"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480072860, "post_id": 40803680, "comment_id": 68828481, "body": "Yes, this is the problem."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1480072312, "creation_date": 1480072312, "answer_id": 40803680, "question_id": 40802766, "link": "https://stackoverflow.com/questions/40802766/are-these-two-code-different/40803680#40803680", "title": "Are these two code different", "body": "<p>No. You will end up with different data structures. As you can see from this simplified version of your code.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Data::Dumper;\n\nmy @threads;\n\nforeach my $thr (1 .. 5) {\n  $threads[$thr] = 'A Thread';\n}\n\nsay Dumper \\@threads;\n\n@threads = ();\n\nforeach (1 .. 5) {\n  push @threads, 'A Thread';\n}\n\nsay Dumper \\@threads;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>$VAR1 = [\n          undef,\n          'A Thread',\n          'A Thread',\n          'A Thread',\n          'A Thread',\n          'A Thread'\n        ];\n\n$VAR1 = [\n          'A Thread',\n          'A Thread',\n          'A Thread',\n          'A Thread',\n          'A Thread'\n        ];\n</code></pre>\n\n<p>In your first example, you begin populating the array at element 1, so the first element (which has an index of 0) contains <code>undef</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 40803680, "answer_count": 1, "score": -1, "last_activity_date": 1480072312, "creation_date": 1480069694, "last_edit_date": 1480070885, "question_id": 40802766, "link": "https://stackoverflow.com/questions/40802766/are-these-two-code-different", "title": "Are these two code different", "body": "<pre><code>foreach $thr (1..5)  \n  {                               \n     $threads[$thr]=threads-&gt;create(\"worker\");        \n  }    \n</code></pre>\n\n<p>and </p>\n\n<pre><code>foreach (1..5)  \n  {                               \n     push @threads,threads-&gt;create(\"worker\");        \n  }  \n</code></pre>\n\n<p>the latter works well, well the former gives warning.</p>\n\n<pre><code>#!/usr/bin/perl                                     \nuse strict;                                         \nuse threads;                                        \nuse threads::shared;                                \nuse Thread::Queue;                                  \n\nmy $queue = Thread::Queue-&gt;new();                   \nmy @threads;   \nmy $thr;\n#----------------------------------------create                                \n#send work first,and then creat threads, the first thread work earlier.\n$queue-&gt;enqueue(1..10000);  \nforeach (1..5)  \n  {                               \n     push @threads,threads-&gt;create(\"worker\");        \n  }                                                   \n\n$queue-&gt;end();                      \n\nsub worker \n  {                                        \n    while (my @DataElement = $queue-&gt;dequeue(100)) \n      {\n        my $tid = threads-&gt;tid();       \n        #open (my $out,\"&gt;&gt;$tid.txt\") or die $!; \n        print  \"Threads ID:$tid\\t@DataElement\\n\";           \n        #print $out \"Threads ID:$tid\\t@DataElement\\n\";\n        #close $out;    \n      }                                               \n  }         \n\n#----------------------------------------cut     \nmy $thr_num=1;                                     \nmy $i;\nwhile ($thr_num) \n  {  \n    $i++;                                        \n    foreach (@threads) #store threads, TRUE even if joined.\n      {                            \n        $thr_num = threads-&gt;list();                  \n        print \"threads total: $thr_num\\n\";              \n        if ($_-&gt;is_running())\n          {                     \n            sleep 1; #wait                               \n            next;                                   \n          }                                                                                              \n        if ($_-&gt;is_joinable()) \n          {                    \n            $_-&gt;join();                             \n          }                                                                                                \n        sleep 1;# wait                       \n      } \n    print $i,\"\\n\";                                               \n  }   \n</code></pre>\n\n<p>this is the whole code.  and the warning is <strong>can't call method \"is_running\" on an undefined value at threadqueue2(1).plx.line42. Perl exited with active threads.</strong></p>\n"}, {"tags": ["python", "perl", "sms", "amazon-sns", "boto3"], "comments": [{"owner": {"reputation": 1455, "user_id": 4045964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a25f38a3d057b1e5f44ec2143aefc1?s=128&d=identicon&r=PG&f=1", "display_name": "polku", "link": "https://stackoverflow.com/users/4045964/polku"}, "edited": false, "score": 0, "creation_date": 1480068718, "post_id": 40802200, "comment_id": 68825856, "body": "You don&#39;t need lambda or SNS topics, and there is an example in the doc, it&#39;s in Java but quite easy to translate."}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 4029477, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rIPsF.jpg?s=128&g=1", "display_name": "Yaseen Shareef", "link": "https://stackoverflow.com/users/4029477/yaseen-shareef"}, "edited": false, "score": 0, "creation_date": 1494225187, "post_id": 40812661, "comment_id": 74718195, "body": "Hi Dennis,  I tried your code but ended up with the following error:       raise error_class(parsed_response, operation_name) botocore.exceptions.ClientError: An error occurred (OptInRequired) when calling the Publish operation: The AWS Access Key Id needs a subscription for the service"}, {"owner": {"reputation": 727, "user_id": 4029477, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rIPsF.jpg?s=128&g=1", "display_name": "Yaseen Shareef", "link": "https://stackoverflow.com/users/4029477/yaseen-shareef"}, "edited": false, "score": 0, "creation_date": 1494225230, "post_id": 40812661, "comment_id": 74718230, "body": "I know I am missing out on some permission, but I have already added SNSFull access permission for this user. Is there anything in addition to this that has to be done?"}, {"owner": {"reputation": 537, "user_id": 4804716, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4b294c8d7931e8d4530efc70b3ee90a8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/4804716/naveen"}, "edited": false, "score": 0, "creation_date": 1495857558, "post_id": 40812661, "comment_id": 75437630, "body": "@dennis-aws I tried this method. I got HttpStatus as 200 but didn&#39;t got any text message on the mobile. Any suggestions ?"}], "tags": [], "owner": {"reputation": 1311, "user_id": 1108457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62a46f0e099b7d856ca5cd0bb111a92?s=128&d=identicon&r=PG", "display_name": "Dennis H", "link": "https://stackoverflow.com/users/1108457/dennis-h"}, "is_accepted": false, "score": 11, "last_activity_date": 1480110803, "creation_date": 1480110803, "answer_id": 40812661, "question_id": 40802200, "link": "https://stackoverflow.com/questions/40802200/example-script-to-send-sms-via-aws-sns-using-boto/40812661#40812661", "title": "Example script to Send SMS via AWS SNS using boto", "body": "<p>Here's the code to publish directly to a phone number via SNS using boto3. If you get an error regarding the PhoneNumber parameter, you'll need to upgrade your version boto. It's important to remember that SNS currently supports direct publish to a phone number (PhoneNumber) or push notifications endpoint (targetArn). Also note that TopicArn, PhoneNumber, and TargetArn are all mutually exclusive and therefore you can only specify one of these per publish.</p>\n\n<pre><code>import boto3\n\nsns_client = boto3.client('sns')\n\nresponse = sns_client.publish(\n    PhoneNumber='+12065551212', \n    Message='This is a test SMS message',\n    #TopicArn='string', (Optional - can't be used with PhoneNumer)\n    #TargetArn='string', (Optional - can't be used with PhoneNumer)\n    #Subject='string', (Optional - not used with PhoneNumer)\n    #MessageStructure='string' (Optional)\n)\n\nprint(response)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 6052496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-a_pOtzr9DVc/AAAAAAAAAAI/AAAAAAAAAUo/2RBjf5ZEe7k/photo.jpg?sz=128", "display_name": "Traiano Welcome", "link": "https://stackoverflow.com/users/6052496/traiano-welcome"}, "is_accepted": false, "score": 0, "last_activity_date": 1480847067, "creation_date": 1480847067, "answer_id": 40957616, "question_id": 40802200, "link": "https://stackoverflow.com/questions/40802200/example-script-to-send-sms-via-aws-sns-using-boto/40957616#40957616", "title": "Example script to Send SMS via AWS SNS using boto", "body": "<pre><code>#!/usr/bin/python\n#sns to sms notification script.\nimport datetime\nimport boto3\nimport sys\nbody=[]\nlog_file=\"/var/log/sns2sms.log\"\nlogf=open(log_file,\"a\")\nmobile_number=str(sys.argv[1])\nsubject=str(sys.argv[2])\nbody.append(subject)\nfor line in sys.stdin:\n body.append(line)\n message_body=\"\\n\".join(body)\n now = str(datetime.datetime.now())\n log_string=now+\" \"+mobile_number+\" \"+message_body+\" \"\nclient = boto3.client('sns')\nclient.publish(\n PhoneNumber = mobile_number,\n Message = message_body\n)\nlogf.write(log_string)\nlogf.write(\"\\n\")\nlogf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 295, "user_id": 7859828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d15f9b71b8fc1eb7963fea16fff0e5?s=128&d=identicon&r=PG&f=1", "display_name": "lucifer", "link": "https://stackoverflow.com/users/7859828/lucifer"}, "is_accepted": false, "score": 1, "last_activity_date": 1519205898, "creation_date": 1519205898, "answer_id": 48902514, "question_id": 40802200, "link": "https://stackoverflow.com/questions/40802200/example-script-to-send-sms-via-aws-sns-using-boto/48902514#48902514", "title": "Example script to Send SMS via AWS SNS using boto", "body": "<p>Just replace in required fields, you will get this working.</p>\n\n<pre><code>import boto3\n# Create an SNS client\nclient = boto3.client(\n    \"sns\",\n    aws_access_key_id=\"your_access_key_id\",\n    aws_secret_access_key=\"you_secret_access_key\",\n    region_name=\"us-east-1\"\n)\n\n# Send your sms message.\nclient.publish(\n    PhoneNumber=\"your_phone_number\",\n    Message=\"Hello World!\"\n)\n</code></pre>\n\n<p>For sending to multiple contacts, refer <a href=\"https://docs.aws.amazon.com/sns/latest/dg/sms_publish-to-topic.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 8150, "user_id": 5230702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HiZKg.jpg?s=128&g=1", "display_name": "Anand Tripathi", "link": "https://stackoverflow.com/users/5230702/anand-tripathi"}, "is_accepted": false, "score": 2, "last_activity_date": 1574261579, "creation_date": 1574261579, "answer_id": 58957194, "question_id": 40802200, "link": "https://stackoverflow.com/questions/40802200/example-script-to-send-sms-via-aws-sns-using-boto/58957194#58957194", "title": "Example script to Send SMS via AWS SNS using boto", "body": "<p>The below script is working for me just replace the required parameters that are defined as constants in the script. The below script also handles <strong>bulk SMS</strong> to multiple recipients</p>\n\n<pre><code>import json\nimport boto3\nimport os\n\n\nACCESS_KEY = &lt;your key&gt;\nACCESS_SECRET = &lt;your secret&gt;\nAWS_REGION = &lt;your region&gt;\n\nRECIPIENT_NUMBERS = [&lt;recipient number list&gt;]\nSENDER_ID = &lt;sender_id&gt;\nMESSAGE = &lt;your message&gt;\n\nsns = boto3.client('sns', aws_access_key_id=ACCESS_KEY,\n               aws_secret_access_key=ACCESS_SECRET,\n               region_name=AWS_REGION)\nfor number in RECIPIENT_NUMBERS:\n    response = sns.publish(\n        PhoneNumber=number,\n        Message=MESSAGE,\n        MessageAttributes={\n            'AWS.SNS.SMS.SenderID': {'DataType': 'String',\n                                 'StringValue': SENDER_ID},\n            'AWS.SNS.SMS.SMSType': {'DataType': 'String',\n                                'StringValue': 'Promotional'}\n        }\n    )\n    print(response)\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 6052496, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-a_pOtzr9DVc/AAAAAAAAAAI/AAAAAAAAAUo/2RBjf5ZEe7k/photo.jpg?sz=128", "display_name": "Traiano Welcome", "link": "https://stackoverflow.com/users/6052496/traiano-welcome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10676, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1574261579, "creation_date": 1480067981, "question_id": 40802200, "link": "https://stackoverflow.com/questions/40802200/example-script-to-send-sms-via-aws-sns-using-boto", "title": "Example script to Send SMS via AWS SNS using boto", "body": "<p>How does one send sms directly to the mobile number via AWS SNS using boto (or other python|perl library) ?</p>\n\n<p>Constraints:</p>\n\n<ul>\n<li>without using AWS Lambda functions</li>\n<li>without using SNS topics to subscribe mobile numbers directly</li>\n</ul>\n\n<p>My use case: sending SMS alerts from Nagios using AWS SNS using AWS SMS as the endpoint protocol.</p>\n"}, {"tags": ["regex", "perl", "non-greedy"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1480065714, "post_id": 40801407, "comment_id": 68824058, "body": "Regex engine matches the string from left to right, the <code>&quot;</code> matched the first <code>&quot;</code>, and <code>.+?</code> did its job correctly, matched up to the first <code>,3&quot;</code>. What is the expected output, BTW?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1480065850, "post_id": 40801407, "comment_id": 68824133, "body": "Could you please clarify what the expected output is? <code>&quot;Hello,1&quot; &quot;Hello,2&quot; 1</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480067749, "post_id": 40801492, "comment_id": 68825259, "body": "Some narrative would help a lot here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480085038, "post_id": 40801492, "comment_id": 68835566, "body": "Well it&#39;s better, but still a bit cheap"}], "tags": [], "owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "is_accepted": false, "score": 1, "last_activity_date": 1480068163, "last_edit_date": 1480068163, "creation_date": 1480065868, "answer_id": 40801492, "question_id": 40801407, "link": "https://stackoverflow.com/questions/40801407/regexp-with-perl-ungreedy-not-working-as-expected/40801492#40801492", "title": "regexp with perl, ungreedy not working as expected", "body": "<p>Try this   </p>\n\n<pre><code>/\"[^\"]+,3\"/\n</code></pre>\n\n<p>instead. <a href=\"https://regex101.com/r/4rXN4z/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/4rXN4z/1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/q0c2v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q0c2v.png\" alt=\"Narrative\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1480066221, "creation_date": 1480066221, "answer_id": 40801597, "question_id": 40801407, "link": "https://stackoverflow.com/questions/40801407/regexp-with-perl-ungreedy-not-working-as-expected/40801597#40801597", "title": "regexp with perl, ungreedy not working as expected", "body": "<p>I think you're misunderstanding regular expressions, but actually I'd probably suggest tackling this one a bit differently. If you've a sequence of words to manipulate, I'd suggest using <code>split</code>/<code>join</code>/<code>map</code> to do the manipulation.</p>\n\n<p>I think it scales better, and doesn't trip over on clarity problems with where the pattern matching boundaries lie. </p>\n\n<p>Something like this:</p>\n\n<pre><code>my $str = '\"Hello,1\" \"Hello,2\" \"Hello,3\"';\n\n$str = join ( \" \", map { s/Hello,[23]/1/r } split ( \" \", $str ) );\nprint $str;\n</code></pre>\n\n<p>Or as a one liner:</p>\n\n<pre><code>perl -ape \"/Hello/ and $_ = join ' ', map { s/Hello,[23]/1/r } @F\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2861979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96344fb7be564d0676fdb5214e10271a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2861979/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1480068163, "creation_date": 1480065608, "question_id": 40801407, "link": "https://stackoverflow.com/questions/40801407/regexp-with-perl-ungreedy-not-working-as-expected", "title": "regexp with perl, ungreedy not working as expected", "body": "<p>Could somebody explain to me, why this is not working:</p>\n\n<pre><code># echo '\"Hello,1\" \"Hello,2\" \"Hello,3\"' | perl -pe 's/\".+?,3\"/1/'\n1\n</code></pre>\n\n<p>or</p>\n\n<pre><code># echo '\"Hello,1\" \"Hello,2\" \"Hello,3\"' | perl -pe 's/\".+?,2\"/1/'\n1 \"Hello,3\"\n</code></pre>\n\n<p>My intention was to replace/find only \"Hello,3\"/\"Hello,2\", but It seems that the non-greedy modifier (or my brain) is not working as expected.</p>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480065473, "post_id": 40800205, "comment_id": 68823916, "body": "Do you realise that it doesn&#39;t make any difference in Perl?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480066539, "post_id": 40800205, "comment_id": 68824519, "body": "Yes, not in Perl but if I want to insert this data into other table with same structure then it is a problem. I need to do the conversion back explicitly?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480067537, "post_id": 40800205, "comment_id": 68825112, "body": "What do you mean by &quot;not in Perl&quot;? You can use the data as it is to create a new record using Perl. If you hadn&#39;t used <code>Data::Dumper</code> to view the data then you would have found it very difficult to discover whether you had strings or integers. Why don&#39;t you just try it?"}, {"owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1480069862, "post_id": 40800205, "comment_id": 68826557, "body": "@Borodin, while it&#39;s true that generally the string vs number issue doesn&#39;t matter in Perl, it&#39;s also true that there are times when it does. Serializing to JSON is a common example."}, {"owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "edited": false, "score": 0, "creation_date": 1480071006, "post_id": 40800205, "comment_id": 68827285, "body": "What version of DBD::mysql are you using?"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480071807, "post_id": 40800205, "comment_id": 68827794, "body": "@Borodin I meant yes, indeed it doesn&#39;t matter in Perl. But, I thought it would matter in <code>MySQL</code>. Anyway, as you told I tried to insert using <code>bind variables</code> and It is working as expected. Strange, means <code>DBI</code> again implictly converted it into expected data-types for <code>MySQL</code>."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "edited": false, "score": 0, "creation_date": 1480073344, "post_id": 40800205, "comment_id": 68828759, "body": "@TimBunce I am using DBI version <code>1.631</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "edited": false, "score": 0, "creation_date": 1480088329, "post_id": 40800205, "comment_id": 68837437, "body": "@TimBunce: I&#39;m unsure what point you&#39;re making there. It takes some arcane code to differentiate between the possible types of value that may be stored in a Perl scalar variable. All the JSON modules that I have used encode all scalar values as strings unless they are references to an array or to a hash, but I am no oracle so please correct me. Did you have something more profound in mind? The only core Perl operator whose result depends on the IOK and POK flags are the bitwise logical operators, and in this context I didn&#39;t see any reason to discuss them."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480087364, "post_id": 40800594, "comment_id": 68836894, "body": "Some words would help a lot. You seem to be demonstrating that SQLite is <i>different</i>, but that doesn&#39;t relate to the question."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1480089564, "post_id": 40800594, "comment_id": 68838044, "body": "@Borodin: Added some words."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1480089551, "last_edit_date": 1480089551, "creation_date": 1480062582, "answer_id": 40800594, "question_id": 40800205, "link": "https://stackoverflow.com/questions/40800205/why-does-dbi-implicitly-change-integers-to-strings/40800594#40800594", "title": "Why does DBI implicitly change integers to strings?", "body": "<p>That's how the DBD driver for MySQL works. Other databases might behave differently. For example, in SQLite, numbers remain numeric:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse DBI;\nuse Data::Dumper; \n\nmy $dbh = 'DBI'-&gt;connect('dbi:SQLite:dbname=:memory:', q(), q());\n$dbh-&gt;do('CREATE TABLE t (id INT, val VARCHAR(10))');\n\nmy $insert = $dbh-&gt;prepare('INSERT INTO t VALUES (?, ?)');\n$insert-&gt;execute(@$_) for [ 1, 'foo' ], [ 2, 'bar' ];\n\nmy $query = $dbh-&gt;prepare('SELECT id, val FROM t');\n$query-&gt;execute;\nwhile (my $row = $query-&gt;fetchrow_arrayref) {\n    print Dumper($row);\n}\n\n__END__\n$VAR1 = [\n          1,\n          'foo'\n        ];\n$VAR1 = [\n          2,\n          'bar'\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1480073847, "post_id": 40803420, "comment_id": 68829054, "body": "Yes, I will try with different version. It is also noticeable that during <i>insertion</i> to <code>MySQL</code> the data is again converted into expected data type from strings through DBI."}], "tags": [], "owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "is_accepted": true, "score": 7, "last_activity_date": 1480087199, "last_edit_date": 1480087199, "creation_date": 1480071523, "answer_id": 40803420, "question_id": 40800205, "link": "https://stackoverflow.com/questions/40800205/why-does-dbi-implicitly-change-integers-to-strings/40803420#40803420", "title": "Why does DBI implicitly change integers to strings?", "body": "<p>As @choroba notes in his answer, it's not the DBI that's doing anything with the data. It's just passing through what the driver module (DBD::mysql in your case) returned.</p>\n\n<p>In the <a href=\"https://metacpan.org/pod/DBI#General-Interface-Rules-Caveats\" rel=\"nofollow noreferrer\">General Interface Rules &amp; Caveats</a> section of the DBI docs it says:</p>\n\n<blockquote>\n  <p>Most data is returned to the Perl script as strings. (Null values are returned as undef.) This allows arbitrary precision numeric data to be handled without loss of accuracy. Beware that Perl may not preserve the same accuracy when the string is used as a number.</p>\n</blockquote>\n\n<p>I wrote that back in the days before it was common to configure perl to support 64-bit integers, and long-double floating point types were unusual. These days I recommend that drivers return values in the most 'natural' Perl type that doesn't risk data loss.</p>\n\n<p>For some drivers that can be tricky to implement, especially those that support returning multiple result sets, with different numbers of columns, from a single handle, as DBD::mysql does.</p>\n\n<p>I skimmed the <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\">DBD::mysql docs</a> but didn't see any mention of this topic, so I looked at <a href=\"https://metacpan.org/source/MICHIELB/DBD-mysql-4.040/dbdimp.c#L4082-4099\" rel=\"nofollow noreferrer\">the relevant code</a> where I can see that the current DBD::mysql <em>is</em> returning numbers as numbers. There's also lots of <a href=\"https://metacpan.org/changes/distribution/DBD-mysql#L2-48\" rel=\"nofollow noreferrer\">references to recent changes in this area in the Change log</a>.</p>\n\n<p>Perhaps you're using an old version of DBD::mysql and should upgrade.</p>\n"}, {"tags": [], "owner": {"reputation": 1218, "user_id": 2621408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14qCV.png?s=128&g=1", "display_name": "marderh", "link": "https://stackoverflow.com/users/2621408/marderh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480072912, "creation_date": 1480072912, "answer_id": 40803864, "question_id": 40800205, "link": "https://stackoverflow.com/questions/40800205/why-does-dbi-implicitly-change-integers-to-strings/40803864#40803864", "title": "Why does DBI implicitly change integers to strings?", "body": "<p>This is nothing DBI does in general. As it already was pointed out many database-drivers (DBD::xy) of the DBI system convert numbers to strings. AFAIK its not possible to avoid that.</p>\n\n<p>What you can do is ask the statement handle for corresponding native type or (easier in your case) wether the column of your resultset is numeric in the mysql-DB or not.  Here is an example</p>\n\n<p>Given this basic database:</p>\n\n<pre><code>mysql&gt; create table test (id INT,text VARCHAR(20));\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; INSERT INTO test VALUES (1,'lalala');\nQuery OK, 1 row affected (0.00 sec)\n</code></pre>\n\n<p>you can lookup wether the column is numeric or not by using the driver-specific field 'mysql_is_num':</p>\n\n<blockquote>\n  <p>Reference to an array of boolean values; TRUE indicates, that the respective column contains numeric values.\n  (from <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\">DBD::mysql</a>)</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/env perl \n\nuse strict;\nuse warnings;\nuse utf8;\n\nuse DBI;\nuse DBD::mysql;\nuse Data::Dumper;\n\nmy $dsn = \"DBI:mysql:database=test;host=localhost\";\nmy $dbh = DBI-&gt;connect($dsn,'user','pass') or die \"$!\";\nmy $sql = \"SELECT * FROM test WHERE id = ?\";\nmy $sth = $dbh-&gt;prepare($sql);\n\n$sth-&gt;execute(1);\n\nmy $num_fields = $sth-&gt;{'NUM_OF_FIELDS'};\nmy $num_mask = $sth-&gt;{'mysql_is_num'};\n\nmy $result;\nmy $cnt = 0;\nwhile (my $line = $sth-&gt;fetchrow_arrayref){\n    for (my $i = 0; $i &lt; $num_fields; $i++){\n        if ($num_mask-&gt;[$i]){\n            $line-&gt;[$i] + 0;\n        }\n        $result-&gt;[$cnt] = $line;\n    }\n    $cnt++;    \n}\n\nprint Dumper($result);\n</code></pre>\n\n<p>I hope this helps. As it was written in a hurry, please excuse the style. Of course i'm open to any suggestions.</p>\n"}], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1420, "favorite_count": 0, "accepted_answer_id": 40803420, "answer_count": 3, "score": 3, "last_activity_date": 1480089551, "creation_date": 1480060908, "last_edit_date": 1480087732, "question_id": 40800205, "link": "https://stackoverflow.com/questions/40800205/why-does-dbi-implicitly-change-integers-to-strings", "title": "Why does DBI implicitly change integers to strings?", "body": "<p></p>\n\n<p>I have a MySQL table with following structure.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>alid       bigint(20),\nndip       varchar(20),\nndregion   varchar(20),\nocc_num    int(3),\nDelta_Flag int(1)\n</code></pre>\n\n<p>After selecting data from the table, I am getting all the data quoted and as a string value.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse FindBin;\nuse lib $FindBin::Bin;\nuse Database;\n\nmy $pwd = $FindBin::Bin;\n\nmy $db  = Database-&gt;new( 'mysql', \"$pwd/config.ini\" );\nmy $db1 = Database-&gt;new( 'mysql', \"$pwd/config2.ini\" );\n\nmy @tables = qw( AutoTT_AlarmStatus_Major1 );\n\nfor my $table ( @tables ) {\n\n    my $query_select = \"SELECT alid, ndip, ndregion, occ_num, Delta_Flag FROM $table LIMIT 1\";\n    my $result = $db-&gt;db_get_results( $query_select );\n\n    print Dumper( $result );\n\n    for my $item ( @{$result} ) {\n\n        # Here I want to prepare, bind and insert this data\n        # into other table with same structure\n    }\n}\n</code></pre>\n\n<h3>Database.pm</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub db_get_results {\n    my $self = shift;\n    my $qry  = shift;\n\n    my $sth  = $self-&gt;{dbh}-&gt;prepare( $qry );\n    $sth-&gt;execute();\n\n    my @return = ();\n    while ( my @line = $sth-&gt;fetchrow_array ) {\n        push @return, \\@line;\n    }\n\n    return \\@return;\n}\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = [\n          [\n            '1788353',\n            '10.34.38.12',\n            'North Central',\n            '1',\n            '1'\n          ]\n        ];\n</code></pre>\n\n<p>Why is <code>DBI</code> implicitly converting all integers to strings?</p>\n"}, {"tags": ["perl", "hash", "curses"], "comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1480023277, "post_id": 40794440, "comment_id": 68811652, "body": "I&#39;d start with the script <a href=\"https://metacpan.org/source/MDXI/Curses-UI-0.9609/examples/demo-buttonbox\" rel=\"nofollow noreferrer\">demo-buttonbox</a>."}, {"owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "reply_to_user": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1480023518, "post_id": 40794440, "comment_id": 68811734, "body": "Right, no, the problem isn&#39;t actually adding in the buttons by hardcoding them like that.  That works fine.  The problem is I don&#39;t have a way to populate it with buttons that I don&#39;t know the content or count of ahead of time."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1480023643, "post_id": 40794440, "comment_id": 68811784, "body": "The script shows an array of hashes.  If you used a reference to an array of hashes, that would get closer than your examples."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "is_accepted": true, "score": 0, "last_activity_date": 1480023829, "creation_date": 1480023829, "answer_id": 40794865, "question_id": 40794440, "link": "https://stackoverflow.com/questions/40794440/perl-cursesui-populate-buttonbox-programmatically/40794865#40794865", "title": "Perl Curses::UI - Populate Buttonbox programmatically", "body": "<pre><code>@btnArray = ({-label =&gt; 'Button 1', -value =&gt; 1},{-label =&gt; 'Button 2', -value =&gt; 2});\n$buttons = $win-&gt;add(\n    'videoButtons', 'Buttonbox',\n    -vertical   =&gt;  1,\n    -buttons    =&gt;  \\@btnArray\n);\n</code></pre>\n\n<p>Works perfectly.  Just had to get rid of the square brackets.\nD'oh.</p>\n"}], "owner": {"reputation": 165, "user_id": 4825206, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-W4QVgGUUPgY/AAAAAAAAAAI/AAAAAAAAApg/fXCxdZNiI9k/photo.jpg?sz=128", "display_name": "Koala Bear", "link": "https://stackoverflow.com/users/4825206/koala-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 40794865, "answer_count": 1, "score": 1, "last_activity_date": 1480023829, "creation_date": 1480021332, "last_edit_date": 1480023619, "question_id": 40794440, "link": "https://stackoverflow.com/questions/40794440/perl-cursesui-populate-buttonbox-programmatically", "title": "Perl Curses::UI - Populate Buttonbox programmatically", "body": "<p>I've been fiddling with this for awhile now and can't seem to come up with a solution on my own.  I'm using Curses::UI to build a simple interface that will print out a list of strings belonging to a hash (keys), and when one is selected it will send the respective value off to another method.</p>\n\n<p>EDIT: For clarities sake, I can hardcode a Buttonbox and it works without issue.  But I don't know the labels of the buttons or the number I'll have ahead of time, so I need to be able to populate it programmatically. </p>\n\n<p>The problem I'm currently facing is I don't know how to populate a Buttonbox widget programmatically. The <a href=\"https://metacpan.org/pod/Curses::UI::Buttonbox\" rel=\"nofollow noreferrer\">documentation</a> says the -buttons flag takes in an arrayref, but passing it an array results in a fatal error of </p>\n\n<pre><code>Invalid button definition.\nIt should be a HASH reference,\nbut is a ARRAY reference.\n</code></pre>\n\n<p>Passing it a hash reference works, but only populates the very last button definition.  e.g.</p>\n\n<pre><code>%btnHash = (-label =&gt; 'Button 1', -value =&gt; 1, -label =&gt; 'Button 2', -value =&gt; 2);\n$buttons = $win-&gt;add(\n    'videoButtons', 'Buttonbox',\n    -vertical   =&gt;  1,\n    -buttons    =&gt;  [\\%btnHash]\n);\n</code></pre>\n\n<p>Results in only Button 2 being populated to the screen. I also tried sending in a hash with two buttons surrounded by the appropriate curly brackets for each, but that resulted in nothing being populated at all.</p>\n\n<p>This is the relevant code snippet that I've been toying with</p>\n\n<pre><code>%btnHash = (-label =&gt; 'Button 1', -value =&gt; 1);\npush(@btnArray,%btnHash);\n%btnHash = (-label =&gt; 'Button 2', -value =&gt; 2);\npush(@btnArray,%btnHash);\n\n#Tried an Array of the literal button definitions, same fatal error as before.\n#@btnArray = ({-label =&gt; 'Button 1', -value =&gt; 1},{-label =&gt; 'Button 2', -value =&gt; 2});\n\n$buttons = $win-&gt;add(\n    'videoButtons', 'Buttonbox',\n    -vertical   =&gt;  1,\n    -buttons    =&gt;  [\\@btnArray]\n);\n</code></pre>\n\n<p>It's not pretty but I've started throwing things against the wall to see what works.  Even if I have to use a loop to constantly create a new hash and store that in an array that'd be fine, then again I might be massively overcomplicating this.  </p>\n"}, {"tags": ["php", "perl", "com", "text-to-speech", "sapi"], "comments": [{"owner": {"reputation": 4259, "user_id": 1031454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/5Om4z.jpg?s=128&g=1", "display_name": "supersan", "link": "https://stackoverflow.com/users/1031454/supersan"}, "edited": false, "score": 0, "creation_date": 1480019749, "post_id": 40794074, "comment_id": 68810493, "body": "I guess I figured this out by myself. It looks like if I use the 32-bit version of PHP then I get the correct results (5 voices). But since I had installed the 64-bit version by default I only get 1 voice. It&#39;s solved now.. thanks!"}, {"owner": {"reputation": 4259, "user_id": 1031454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/5Om4z.jpg?s=128&g=1", "display_name": "supersan", "link": "https://stackoverflow.com/users/1031454/supersan"}, "edited": false, "score": 0, "creation_date": 1480019839, "post_id": 40794074, "comment_id": 68810519, "body": "P.S. Can any mod please tell me what I&#39;m supposed to do with this question. Should I post this comment as solution or should I leave it as is? Thanks."}, {"owner": {"reputation": 12656, "user_id": 3400962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4a8QZ.png?s=128&g=1", "display_name": "Hidden Hobbes", "link": "https://stackoverflow.com/users/3400962/hidden-hobbes"}, "edited": false, "score": 2, "creation_date": 1480020226, "post_id": 40794074, "comment_id": 68810672, "body": "It is perfectly acceptable to post and accept your own answer if you have found a solution to your problem. <a href=\"http://stackoverflow.com/help/self-answer\">stackoverflow.com/help/self-answer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4259, "user_id": 1031454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/5Om4z.jpg?s=128&g=1", "display_name": "supersan", "link": "https://stackoverflow.com/users/1031454/supersan"}, "is_accepted": false, "score": 1, "last_activity_date": 1480027893, "creation_date": 1480027893, "answer_id": 40795476, "question_id": 40794074, "link": "https://stackoverflow.com/questions/40794074/why-php-com-objects-are-not-returning-correct-results/40795476#40795476", "title": "Why PHP COM objects are not returning correct results?", "body": "<p>I figured this after some trial error. It looks like if I use the 32-bit version of PHP then I get the correct results (5 voices). But since I had installed the 64-bit version by default I only get 1 voice. </p>\n\n<p>I think the TTS voices are mostly 32 bit (like those installed on my system) and so when running with a 64-bit php.exe it only returns 64-bit voices. With 32 php.exe it returns all voices.</p>\n\n<p>Posting this as answer in case someone faces a similar issue in future.</p>\n"}], "owner": {"reputation": 4259, "user_id": 1031454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/5Om4z.jpg?s=128&g=1", "display_name": "supersan", "link": "https://stackoverflow.com/users/1031454/supersan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480027893, "creation_date": 1480019205, "question_id": 40794074, "link": "https://stackoverflow.com/questions/40794074/why-php-com-objects-are-not-returning-correct-results", "title": "Why PHP COM objects are not returning correct results?", "body": "<p>I'm trying to access Windows SAPI5 or Text to speech (TTS) using PHP. The standard approach is to create a COM object for \"SAPI.SpVoice\", then get the installed voices. </p>\n\n<p>Sample PHP code:</p>\n\n<pre><code>&lt;?php\n\n$obj = new COM('SAPI.SpVoice');\n$voices = $obj-&gt;GetVoices;\n$count = $voices-&gt;Count;\n\nprint $count; #prints \"1\"\n</code></pre>\n\n<p>Unfortunately the output returned from PHP's COM object is incorrect because I have 5 voices installed on my system, but PHP only returns 1.</p>\n\n<p>So, just to check if this a PHP specific issue, I wrote the same code in Perl 5.8 (strawberry).</p>\n\n<p>Sample Perl code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Win32::OLE;\n\nmy $obj = Win32::OLE-&gt;new('SAPI.SpVoice');\nmy $voices = $obj-&gt;GetVoices;\nmy $count = $voices-&gt;Count;\n\nprint $count; #print \"5\" which is correct.\n</code></pre>\n\n<p>So the perl code correctly returns that I have 5 TTS voices on my system, but PHP returns only 1? </p>\n\n<p>Is this a bug or am I doing something wrong? What could be the possible cause of this?</p>\n\n<p>P.S. I've tried this on two different computers and results are the same.</p>\n"}, {"tags": ["perl", "oop", "inheritance"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1480013009, "post_id": 40792850, "comment_id": 68808050, "body": "Why would you want to do that?"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480015589, "post_id": 40793090, "comment_id": 68809037, "body": "Just am trying to find a way using which I can  access the disp method in first package using the object of third package."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 1, "creation_date": 1480018960, "post_id": 40793090, "comment_id": 68810217, "body": "@s.patra: I realise that, but can you explain <i>why</i>. Are these packages something that you&#39;ve written, or have you got them from other places? It would help if I could see the real code."}, {"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480039628, "post_id": 40793090, "comment_id": 68815365, "body": "I want to implement this concept in my framework which won&#39;t be possible to post here. So I just wrote a sample piece of code to verify how it works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480041639, "post_id": 40793090, "comment_id": 68815740, "body": "@s.patra: Okay, so why do you want to implement this in your framework? Your code is saying that <code>third</code> is a subclass of <code>second</code>, but it&#39;s not. You&#39;re pulling bits out of <code>second</code> and bits out of <code>first</code>. It will work fine if you just make <code>third</code> a subclass of <code>first</code>."}, {"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480042483, "post_id": 40793090, "comment_id": 68815915, "body": "Yes in that way it will work fine. But I am curious to know if there is any way in which I can access the attribute from grand parent class in grand child class with the object of grand child, first and third in this case.It will be great if you give a sample code  also."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480042800, "post_id": 40793090, "comment_id": 68815985, "body": "s.patra: Just set <code>our @ISA = (&#39;first&#39;)</code> inside <code>package third</code> instead of setting it to <code>(&#39;second&#39;)</code>"}, {"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480043350, "post_id": 40793090, "comment_id": 68816111, "body": "that way I am aware . But can it be accessed without doing, in some other way. Or this is the only way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 1, "creation_date": 1480044507, "post_id": 40793090, "comment_id": 68816384, "body": "@s.patra, Why do you keep asking that when it&#39;s been <a href=\"http://stackoverflow.com/a/40793111/589924\">answered</a>?"}, {"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480060350, "post_id": 40793090, "comment_id": 68821456, "body": "Am just asking if there is some other way of doing this. Thanks for the answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480065312, "post_id": 40793090, "comment_id": 68823827, "body": "@s.patra: You&#39;ve been given two ways to do this and you still want more. You must explain the situation thoroughly and why you think this approach necessary as we&#39;re just going in circles here. Otherwise, the answer is just that you can&#39;t do that, and we leave it there."}, {"owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "edited": false, "score": 0, "creation_date": 1480091978, "post_id": 40793090, "comment_id": 68839308, "body": "Thanks for your support @borodin."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1480103300, "last_edit_date": 1480103300, "creation_date": 1480014056, "answer_id": 40793090, "question_id": 40792850, "link": "https://stackoverflow.com/questions/40792850/multi-level-inheritance-in-perl/40793090#40793090", "title": "multi-level inheritance in Perl", "body": "<p>If you need to do that, then you have defined your classes wrongly.</p>\n\n<p>The <code>third</code> class inherits from the <code>second</code> class. <code>second</code> has it's own definition of <code>disp</code>, so it never tries to inherit that method from its superclass <code>first</code>. That means <code>third</code> gets the implementation defined in <code>second</code></p>\n\n<p>The simple answer would be to call <code>first::disp</code> something else. That way <code>second</code> won't have a definition of the method and inheritance will be invoked again</p>\n\n<p>If you explain the underlying problem, and why you want to ignore an inherited method, then perhaps we can help you find a better way</p>\n\n<p>Please also note that packages and module files should start with a capital letter, and each class is ordinarily in a file of its own, so you would usually use <code>package First</code> in <code>First.pm</code> etc.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1480044668, "last_edit_date": 1480044668, "creation_date": 1480014141, "answer_id": 40793111, "question_id": 40792850, "link": "https://stackoverflow.com/questions/40792850/multi-level-inheritance-in-perl/40793111#40793111", "title": "multi-level inheritance in Perl", "body": "<p><code>$obj-&gt;first::disp()</code>, but what you are asking to do is something you absolutely shouldn't do. Fix your design.</p>\n"}], "owner": {"reputation": 139, "user_id": 5738019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bf0416a1e9cbb5090c064b17a7b67977?s=128&d=identicon&r=PG&f=1", "display_name": "s.patra", "link": "https://stackoverflow.com/users/5738019/s-patra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 40793090, "answer_count": 2, "score": 3, "last_activity_date": 1508599384, "creation_date": 1480012709, "last_edit_date": 1508599384, "question_id": 40792850, "link": "https://stackoverflow.com/questions/40792850/multi-level-inheritance-in-perl", "title": "multi-level inheritance in Perl", "body": "<p>I have a question related to multi-level inheritance in Perl.</p>\n\n<p>Here is my code</p>\n\n<p><strong>mod.pm</strong></p>\n\n<pre><code>package first;\n\nsub disp {\n    print \"INSIDE  FIRST\\n\";\n}\n\npackage second;\n@ISA = qw(first);\n\nsub disp {\n    print \"INSIDE SECOND\\n\";\n}\n\npackage third;\n@ISA = qw(second);\n\nsub new {\n    $class = shift;\n    $ref   = {};\n    bless $ref, $class;\n    return $ref;\n}\n\nsub show {\n    $self = shift;\n    print \"INSIDE THIRD\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>prog.pl</strong></p>\n\n<pre><code>use mod;\n\n$obj = third-&gt;new();\n$obj-&gt;show();\n$obj-&gt;disp();\n</code></pre>\n\n<p>I have a .pm file which contains three classes. I want to access the <code>disp</code> method in the first class using an object of third class. I'm not sure how that could work.</p>\n\n<p>I tried to access using two ways:</p>\n\n<ol>\n<li>using class name => first::disp()</li>\n<li>using SUPER inside second package disp method => $self->SUPER::disp();</li>\n</ol>\n\n<p>But am not sure how it will be accessed directly using the object of third class.</p>\n"}, {"tags": ["perl", "arguments"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1480011638, "post_id": 40791920, "comment_id": 68807483, "body": "One of the first lessons you should learn is to add plenty of white space, especially indenting that follows the program&#39;s block structure. I&#39;ve done it for you in this case. You must also <i>always</i> add <code>use strict</code> and <code>use warnings &#39;all&#39;</code> to the top of every Perl program you write, without exception. You will then need to <i>declare</i> each of your variables using <code>my</code> as close as possible to their first point of use. You have written far too much code before testing. It&#39;s best to write only a few lines of code at a time before you test to ensure that you have a solid base to proceed"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1480010410, "last_edit_date": 1480010410, "creation_date": 1480008221, "answer_id": 40791949, "question_id": 40791920, "link": "https://stackoverflow.com/questions/40791920/caesar-cipher-isnt-numeric-in-addition/40791949#40791949", "title": "Caesar Cipher -- &quot;Isn&#39;t numeric in addition (+)&quot;", "body": "<p>In Perl, <code>+</code> is numeric addition only.  String concatenation is <code>.</code> / <code>.=</code>.</p>\n\n<p>Also:</p>\n\n<pre><code>if ($mode = split(//,$e)){\n</code></pre>\n\n<p>is incorrect.  I believe you want something like:</p>\n\n<pre><code>my %valid_mode = ( 'encrypt' =&gt; 1, 'decrypt' =&gt; 1);\n...\n    if ( $valid_mode{$mode} ) {\n        return $mode\n</code></pre>\n\n<p>The code you have is setting $mode into the number of characters in $e (in an inefficient way).</p>\n\n<p>Here:</p>\n\n<pre><code>foreach $symbol ($message){\n</code></pre>\n\n<p>in Perl, strings are first class entities; they aren't automatically interpreted as arrays of characters.  So to loop over the characters, you need to so something else.  The simplest way is:</p>\n\n<pre><code>foreach $symbol ( split //, $message ) {\n</code></pre>\n\n<p>Here:</p>\n\n<pre><code>    elsif ($symbol= /^[a-z]/){\n</code></pre>\n\n<p><code>=</code> should be <code>=~</code>.</p>\n\n<p>There is also a problem with which code is in which blocks that prevents upper case characters from being added to the output.  It looks to me like the closing brace for your fir st <code>if ($symbol =~</code> should be just before the later else, and other braces possibly fixed up to match.</p>\n\n<p>Putting all your <code>}</code>'s on a line of their own, indented the same as the line with the corresponding <code>{</code> is a much better idea.  It will help you see mismatched braces much more easily.</p>\n\n<p>Here is corrected code, with <code>use strict</code> added and all variables declared:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $x = 26;\nsub getMode{\n    my %valid_mode = ( 'encrypt' =&gt; 1, 'decrypt' =&gt; 1 );\n    while ('True'){\n        print\"Do you wish to encrypt or decrypt a message? \\n\";\n        my $mode = &lt;STDIN&gt;;\n        chomp ( $mode);\n        if ($valid_mode{$mode}) {\n            return $mode;\n        }\n        else {\n           print \"Enter either 'encrypt' or 'decrypt'.\\n\";\n        }\n    }\n}\nsub getMessage{\n    print\"Enter your message:\";\n    my $input = &lt;STDIN&gt;;\n    chomp ($input);\n    return $input;\n}\n\nsub getKey{\n    my $key = 0;\n    while ('True'){\n        print\"Enter the key number (1-26): \";\n        $key = int(&lt;&gt;);\n        chomp ($key);\n        if ($key &gt;= 1 and $key &lt;= $x){\n            return $key;\n        }\n    }\n}\nsub getTranslatedMessage{\n    my ($mode, $message, $key) = @_;\n    if ($mode =~ /^d/){\n        $key = -$key;\n    }\n    my $translated = '';\n\n    foreach my $symbol (split //, $message){\n        if ($symbol =~ /[A-Za-z]/){\n            my $num = ord($symbol);\n            $num += $key;\n\n            if ($symbol =~ /^[A-Z]/){\n                if ($num &gt; ord('Z')){\n                   $num -= 26;\n                }\n                elsif ($num &lt; ord('A')){\n                    $num += 26;\n                }\n            }\n            elsif ($symbol=~ /^[a-z]/){\n                if ($num &gt; ord('z')){\n                    $num -= 26;\n                }\n                elsif ($num &lt; ord('a')){\n                    $num += 26;\n                }\n            }\n\n            $translated .= chr($num);\n        }\n        else{\n            $translated .= $symbol;\n        }\n    }\n\n    return $translated;\n}\n\nmy $mode = getMode();\nmy $message = getMessage();\nmy $key = getKey();\n\nprint\"Your translated text is:\\n\";\nprint(getTranslatedMessage($mode, $message, $key));\nprint \"\\n\";\n</code></pre>\n\n<p>Over all, I suggest you write smaller chunks of code and test them to make sure they worked before assembling them all together.</p>\n"}], "owner": {"reputation": 77, "user_id": 7206412, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bb0eb2554860aca2e4272b914bc014c?s=128&d=identicon&r=PG&f=1", "display_name": "Eggiderm", "link": "https://stackoverflow.com/users/7206412/eggiderm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 959, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480011391, "creation_date": 1480008077, "last_edit_date": 1480011391, "question_id": 40791920, "link": "https://stackoverflow.com/questions/40791920/caesar-cipher-isnt-numeric-in-addition", "title": "Caesar Cipher -- &quot;Isn&#39;t numeric in addition (+)&quot;", "body": "<p>I'm creating a Caesar cipher using Perl, but I cant seem to find the error in the code.</p>\n\n<p>I keep getting the error message:</p>\n\n<blockquote>\n  <p>Argument \"hello\" isn't numeric in addition (+) at ./Lab03.pl line 66, &lt;> line 1.</p>\n</blockquote>\n\n<p>which is the line <code>$translated += $symbol</code>.</p>\n\n<pre><code>use warnings;\n$x = 26;\n\nsub getMode {\n\n    $e = \"encrypt decrypt\";\n\n    while ( 'True' ) {\n\n        print \"Do you wish to encrypt or decrypt a message? \\n\";\n        $mode = &lt;STDIN&gt;;\n        chomp( $mode );\n\n        if ( $mode = split( //, $e ) ) {\n            return $mode;\n        }\n        else {\n            print \"Enter either 'encrypt' or 'decrypt'.\\n\";\n        }\n    }\n}\n\nsub getMessage {\n\n    print \"Enter your message:\";\n    $input = &lt;STDIN&gt;;\n    chomp( $input );\n\n    return $input;\n}\n\nsub getKey {\n\n    $key = 0;\n\n    while ( 'True' ) {\n\n        print \"Enter the key number (1-26): \";\n        $key = int( &lt;&gt; );\n        chomp( $key );\n\n        if ( $key &gt;= 1 and $key &lt;= $x ) {\n            return $key;\n        }\n    }\n}\n\nsub getTranslatedMessage {\n    ( $mode, $message, $key ) = @_;\n\n    if ( $mode =~ /^d/ ) {\n        $key        = -$key;\n        $translated = '';\n    }\n\n    foreach $symbol ( $message ) {\n\n        if ( $symbol =~ /[A-Za-z]/ ) {\n            $num = ord( $symbol );\n            $num += $key;\n        }\n\n        if ( $symbol =~ /^[A-Z]/ ) {\n\n            if ( $num &gt; ord( 'Z' ) ) {\n                $num -= 26;\n            }\n            elsif ( $num &lt; ord( 'A' ) ) {\n                $num += 26;\n            }\n            elsif ( $symbol = /^[a-z]/ ) {\n\n                if ( $num &gt; ord( 'z' ) ) {\n                    $num -= 26;\n                }\n                elsif ( $num &lt; ord( 'a' ) ) {\n                    $num += 26;\n                }\n\n                $translated += chr( $num );\n            }\n        }\n        else {\n            $translated += $symbol;\n        }\n    }\n\n    return $translated;\n}\n\n$mode    = getMode();\n$message = getMessage();\n$key     = getKey();\n\nprint \"Your translated text is: '\\n' \";\nprint( getTranslatedMessage( $mode, $message, $key ) );\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 5219, "user_id": 21047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62422e267a0b3bed0e10e398df47a334?s=128&d=identicon&r=PG", "display_name": "rics", "link": "https://stackoverflow.com/users/21047/rics"}, "edited": false, "score": 0, "creation_date": 1480000406, "post_id": 40789640, "comment_id": 68801720, "body": "It is not clear how do you decode the object into perl? Could elaborate on it?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 2, "creation_date": 1480002906, "post_id": 40789640, "comment_id": 68803224, "body": "your problem is that that is not proper JSON. keys have to be unique. you need an array of anonymous hashes instead of duplicating keys"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1480010420, "last_edit_date": 1480010420, "creation_date": 1480000849, "answer_id": 40789895, "question_id": 40789640, "link": "https://stackoverflow.com/questions/40789640/perl-json-how-to-handle-key-overwriting-while-decoding-a-given-json-file/40789895#40789895", "title": "Perl JSON how to handle key overwriting while decoding a given json file", "body": "<p>According to the <a href=\"https://tools.ietf.org/html/rfc7159#section-4\" rel=\"nofollow noreferrer\">JSON spec</a></p>\n\n<blockquote>\n  <p>The names within an object SHOULD be unique.</p>\n</blockquote>\n\n<p>So the 'correct' answer would be - don't do JSON with duplicate keys, use an array. </p>\n\n<pre><code>{\n  \"register\": {\n    \"name\":        \"CTRL\",\n    \"desc\":        \"Control Register 1\",\n    \"mode\":        \"rw\",\n    \"reset_value\": \"0x0000_0000\",\n    \"addr_offset\": \"+0x4\",\n    \"slices\": [\n      {\n        \"name\": \"Reserved\",\n        \"msb\":  3,\n        \"lsb\":  2,\n        \"desc\": \"Reserved. Leave 0.\"\n      },\n      {\n        \"name\": \"en\",\n        \"msb\":  1,\n        \"lsb\":  1,\n        \"desc\": \"Port enable\"\n      },\n      {\n        \"name\": \"Lbm\",\n        \"msb\":  0,\n        \"lsb\":  0,\n        \"desc\": \"Loop back mode\"\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>This will then decode in perl:</p>\n\n<pre><code>my $stuff = decode_json(\n   do { local $/; &lt;$input&gt; }\n);\n\nprint Dumper $stuff;\n</code></pre>\n\n<p>And iterate with:</p>\n\n<pre><code>foreach my $slice ( @{$stuff -&gt; {register} -&gt; {slices}} ) {\n   print Dumper $slice;\n}\n</code></pre>\n\n<p>However if you really must, you might be able to make use of <code>JSON</code> and <a href=\"http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm#INCREMENTAL_PARSING\" rel=\"nofollow noreferrer\">incremental parsing</a></p>\n"}], "owner": {"reputation": 31, "user_id": 5549924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548b42cd7b6ccea4b7923ec770ca3ee4?s=128&d=identicon&r=PG&f=1", "display_name": "rth", "link": "https://stackoverflow.com/users/5549924/rth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480010420, "creation_date": 1480000010, "question_id": 40789640, "link": "https://stackoverflow.com/questions/40789640/perl-json-how-to-handle-key-overwriting-while-decoding-a-given-json-file", "title": "Perl JSON how to handle key overwriting while decoding a given json file", "body": "<p>I would like to decode a give json file which has the structure below. My problem is the following when I decode this into perl I got key conflicts with the slice. Is there a way to get a hash structure from the json decoding which doesn't overwrite the redundant elements ? I could think of arrays, any ideas and proposals are welcome.</p>\n\n<pre><code> \"register\": {\n\n     \"name\"       : \"CTRL\",\n     \"desc\"       : \"Control Register 1\",\n     \"mode\"       : \"rw\",\n     \"reset_value\": \"0x0000_0000\", \n     \"addr_offset\": \"+0x4\",\n\n     \"slice\": {\n       \"name\": \"Reserved\",\n       \"msb\" : 3,\n       \"lsb\" : 2,\n       \"desc\": \"Reserved. Leave 0.\"\n     },\n\n     \"slice\": {\n       \"name\": \"en\",\n       \"msb\" : 1,\n       \"lsb\" : 1,\n       \"desc\": \"Port enable\"\n     },\n\n     \"slice\": {\n       \"name\": \"Lbm\",\n       \"msb\" : 0,\n       \"lsb\" : 0,\n       \"desc\": \"Loop back mode\"\n     }\n\n  },\n</code></pre>\n"}, {"tags": ["perl", "perforce"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1479995139, "post_id": 40787903, "comment_id": 68798485, "body": "for 1) Perl has built-in functions <a href=\"http://perldoc.perl.org/functions/chown.html\" rel=\"nofollow noreferrer\">chown</a> and <a href=\"http://perldoc.perl.org/functions/chmod.html\" rel=\"nofollow noreferrer\">chmod</a>. Call those functions with the proper arguments for your environment after creating the directory with the <code>mkdir</code> function."}, {"owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1479995508, "post_id": 40787903, "comment_id": 68798741, "body": "Hi,  thanks for the quick answer, I thought about editing the permissions too based on what I think that it&#39;s correct since I&#39;m not the real &quot;owner&quot; of those networks directories I&#39;m a little bit afraid of giving permissions by what I think they should be and prefer to give the same permissions as in the parent. I&#39;m currently looking into getting the parents permissions with &quot;stat&quot; function and using them on the mkdir function."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1479997875, "post_id": 40787903, "comment_id": 68800187, "body": "<code>my ($perms, $uid, $gid) = (stat $dir)[2, 4, 5];</code> ...then: <code>$perms = sprintf &quot;%04o&quot;, $perms &amp; 07777;</code>"}, {"owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1480254095, "post_id": 40787903, "comment_id": 68876961, "body": "Ok, here is what happens: When I run the script from my PC(windows) it does everything right.  When I run the script as a trigger from perforce, It DOES get the user but doesn&#39;t get the groups right and shows me &quot;gid=0&quot; and &quot;uid=0&quot; but still my username has permissions when I check on windows.  something is strange here."}, {"owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1480338981, "post_id": 40787903, "comment_id": 68907261, "body": "Ok looks like im stupid and i forgot that the script runs on windows machine. those commands won&#39;t work there since stat isn&#39;t giving the right perms and chmod will not work on windows."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "is_accepted": true, "score": 0, "last_activity_date": 1482404967, "last_edit_date": 1495542827, "creation_date": 1482404967, "answer_id": 41281767, "question_id": 40787903, "link": "https://stackoverflow.com/questions/40787903/perl-perforce-new-workspace-trigger-create-a-directory-with-same-permissions/41281767#41281767", "title": "Perl - Perforce new workspace Trigger: Create a directory with same permissions as parent directory or as Perforce would give", "body": "<p>The solution for it was to call icacls system command to grant permissions to the user who created the work space.</p>\n\n<pre><code>$error = system(\"icacls $ToWriteToDir /grant domain\\\\user:(OI)(CI)F /T\");\n</code></pre>\n\n<p>The code above adds full recursive permissions to the user who triggered the script(created a new workspace) to the directory on the network drive.</p>\n\n<p>I posted a related more general question <a href=\"https://stackoverflow.com/questions/40845250/what-is-the-best-practice-for-perl-getting-parent-folder-permissions-while-runni\">here</a>.\nI decided to separate into two questions in case that someone will find a more relevant solution for the use case of perforce, or general solution for any kind of service.</p>\n"}], "owner": {"reputation": 137, "user_id": 5965588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/n72QL.png?s=128&g=1", "display_name": "MaxBk", "link": "https://stackoverflow.com/users/5965588/maxbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41281767, "answer_count": 1, "score": 0, "last_activity_date": 1482404967, "creation_date": 1479994759, "last_edit_date": 1480339349, "question_id": 40787903, "link": "https://stackoverflow.com/questions/40787903/perl-perforce-new-workspace-trigger-create-a-directory-with-same-permissions", "title": "Perl - Perforce new workspace Trigger: Create a directory with same permissions as parent directory or as Perforce would give", "body": "<p>What we want to achieve is to add a local file to each new workspace that is created.<br>\nWhat I currently do is running a script on the trigger of \"form-commit client\".  </p>\n\n<p>That trigger contains the path on the Client's machine where the workspace should be created but the problem occurs when the user tries to create the workspace on a network drive.</p>\n\n<p>What happens is that the file and the directory are created but only with permissions to \"Root\" since they both didn't exist before so after the trigger's script is completed perforce can't push the source codes to the directory because it doesn't have permissions(and the user can't edit the directory and the file because of the same reason).</p>\n\n<p>There are two directions from my point of view to solve this problem:<br>\n<strike>1) make sure that the perl script \"mkdir\" command creates the directory with the same permissions of the parent directory.(how can i do it?)</strike>\nIrelevant, I asked it in another question on stack overflow.</p>\n\n<p>2) Create the file that the trigger is for only after the \"pull\" command is done by perforce and the workspace directory was created by perforce(What's the trigger for that)</p>\n\n<p>Thanks in advance,<br>\nMax.</p>\n\n<p>Edit: (I was wrong aboth the last bullets, it dosen't work as I thoguht it does)</p>\n\n<p><strike>I did the steps that are suggest in the comment and it doesn't work out.</p>\n\n<p>I suspect that all of this is directly related to perforce service user, so here is the thing:<br>\n1) The network drive is mapped in a way that only I can write to my user's folder(+ network admins).  </p>\n\n<p>2) The perforce trigger pearl script runs on the perforce server(with admin user I suspect.)  </p>\n\n<p>3) When the script creates the folder it gives permissions to me(windows domain user) + UnixPermUid\\root + UnixPermGid\\root which im not part of those groups.  </p>\n\n<p>4) When I do chmod (07777, $dir) or die \"couldn't chmod $!\"; nothing happens(nor error or permissions given)</p>\n\n<p>5) I can't delete the folder from \"Windows explorer\" or with a trigger that deletes it.</p>\n\n<p>6) The next steps + the trigger are working good:</p>\n\n<ul>\n<li>Create folder manually in \"windows explorer\".</li>\n<li>Create a workspace from Perforce client that will be located in the directory from above.</li>\n<li>The trigger creates the required file in the directory with the correct permissions without chmod.</li>\n<li>All works perfect</strike></li>\n</ul>\n\n<p>Edit 2:\n  Any ideas for question number 2?</p>\n\n<blockquote>\n  <p>2) Create the file that the trigger is for only after the \"pull\"\n  command is done by perforce and the workspace directory was created by\n  perforce(What's the trigger for that)</p>\n</blockquote>\n"}, {"tags": ["perl", "unzip"], "comments": [{"owner": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "edited": false, "score": 0, "creation_date": 1479998721, "post_id": 40787868, "comment_id": 68800691, "body": "Thanks stevieb for updating the question."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "edited": false, "score": 0, "creation_date": 1480001278, "post_id": 40789313, "comment_id": 68802241, "body": "Thanks for the answer, but i dont use winzip i use WINRAR"}, {"owner": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "edited": false, "score": 0, "creation_date": 1480001783, "post_id": 40789313, "comment_id": 68802546, "body": "thanks ssr i just change the EXE to WINRAR and the 7zip format worked ,thank you so much."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "edited": false, "score": 0, "creation_date": 1480623452, "post_id": 40789313, "comment_id": 69051485, "body": "@shinoy.m please have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a> In short, accept the answer that worked best for you, and you can also vote on (any and all) answers.  The linked page explains it."}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1479998925, "creation_date": 1479998925, "answer_id": 40789313, "question_id": 40787868, "link": "https://stackoverflow.com/questions/40787868/error-inflate-error-data-error/40789313#40789313", "title": "error: inflate error data error", "body": "<p>There is a solution on another way and might be I guess its helpful:</p>\n\n<p>Untested for using winzip <a href=\"http://code.activestate.com/lists/perl-win32-users/18391/\" rel=\"nofollow noreferrer\">refered from</a>:</p>\n\n<pre><code>my $Prog     = $ENV{\"ProgramFiles\"}.'\\\\WinZip\\\\WINZIP32.exe';\nmy $Password = 'Secret Password';\nmy $ZIP      = 'filename.zip';\nmy $Path     = 'c:\\\\my\\\\folder';\nsystem(\"$Prog -e -s\\\"$Password\\\" \\\"$Zip\\\" \\\"$Path\\\"\");\n</code></pre>\n\n<p>Tested for using 7zip:</p>\n\n<pre><code>my $file = \"test.zip\";\nmy $password = \"secret\";\nmy $Prog     = \"\\\"c:\\\\Program Files\\\\7-Zip\\\\7zG.exe\\\"\";\nsystem(\"$Prog e -p$password -y $file\");\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5951584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZVPFa.jpg?s=128&g=1", "display_name": "shinoy.m", "link": "https://stackoverflow.com/users/5951584/shinoy-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479998925, "creation_date": 1479994670, "last_edit_date": 1479998117, "question_id": 40787868, "link": "https://stackoverflow.com/questions/40787868/error-inflate-error-data-error", "title": "error: inflate error data error", "body": "<p>I tried to unzip a password protected zip file using the Perl Archive module.\nBut endedup with an error</p>\n\n<p>error: </p>\n\n<p><code>inflate error data error at C:/Perl64/site/lib/Archive/Zip/Archive.pm line 367.</code></p>\n\n<p>Can anyone helps me to find asolution, and unzip a password protected zip file(WINRAR used to zip a file with password).</p>\n\n<p>Please find the code i use:</p>\n\n<pre><code>my $file = \"D:\\\\Public\\\\Sample-Programs\\\\tempzip\\\\TESTFILE.zip\";\nmy $password = \"aaa\";\n\nmy $zip = Archive::Zip-&gt;new($file) or die \"can't unzip\";\nforeach my $member_name ($zip-&gt;memberNames) {\n    my $member = $zip-&gt;memberNamed($member_name);\n    next if $member-&gt;isDirectory;\n    $member-&gt;password($password);\n    my $contents = $zip-&gt;contents($member) or die \"error accessing $member_name\";\n    print(\"contents = $contents\");\n }\n</code></pre>\n"}, {"tags": ["oracle", "perl", "nagios"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2421244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8baf0263ca63a6b543a51bf0e8221458?s=128&d=identicon&r=PG", "display_name": "Reign", "link": "https://stackoverflow.com/users/2421244/reign"}, "edited": false, "score": 0, "creation_date": 1480063408, "post_id": 40790129, "comment_id": 68822858, "body": "Environment vars are set: [root@nagios-prod ~]# set | grep ora LD_LIBRARY_PATH=:/usr/lib/oracle/12.1/client64/lib ORACLE_HOME=/usr/lib/oracle/12.1/client64  Oracle.so also seems to see libclntsh.so: [root@nagios-prod ~]# ldd /usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so linux-vdso.so.1 =&gt; (0x00007fff8ebf3000) libocci.so.12.1 =&gt; /usr/lib/oracle/12.1/client64/lib/libocci.so.12.1 (0x00007f1a5debc000) libclntsh.so.12.1 =&gt; /usr/lib/oracle/12.1/client64/lib/libclntsh.so.12.1 (0x00007f1a5aefe000) libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0..."}], "tags": [], "owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "is_accepted": false, "score": 1, "last_activity_date": 1480001615, "creation_date": 1480001615, "answer_id": 40790129, "question_id": 40785217, "link": "https://stackoverflow.com/questions/40785217/nagios-check-nrpe-does-not-work-with-perl-dbdoracle/40790129#40790129", "title": "Nagios check_nrpe does not work with Perl DBD::Oracle", "body": "<p><code>ldd /usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so</code></p>\n\n<p>most probably you do not have set </p>\n\n<pre><code>LD_LIBRARY_PATH=${ORACLE_HOME}/lib\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 2421244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8baf0263ca63a6b543a51bf0e8221458?s=128&d=identicon&r=PG", "display_name": "Reign", "link": "https://stackoverflow.com/users/2421244/reign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1593846728, "creation_date": 1479986778, "last_edit_date": 1593846728, "question_id": 40785217, "link": "https://stackoverflow.com/questions/40785217/nagios-check-nrpe-does-not-work-with-perl-dbdoracle", "title": "Nagios check_nrpe does not work with Perl DBD::Oracle", "body": "<pre><code>[nagios@nagios-prod libexec] ./check_nrpe -H dbprod10 -c check_ohc_tnsping\n</code></pre>\n<blockquote>\n<p>CRITICAL - cannot connect to NREP11. install_driver(Oracle) failed:\nCan't load '/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so' for\nmodule DBD::Oracle: libclntsh.so.12.1: cannot open shared object file:\nNo such file or directory at /usr/lib64/perl5/DynaLoader.pm line 200.\nat (eval 19) line 3 Compilation failed in require at (eval 19) line 3.\nPerhaps a required shared library or dll isn't installed where\nexpected at /usr/local/nagios/libexec/check_oracle_health line 6088</p>\n</blockquote>\n<p>But when I try <code>locate Oracle.so</code> I see this in place:</p>\n<pre><code>[nagios@nagios-prod libexec] locate Oracle.so\n/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so\n</code></pre>\n<p>Permissions also seems to be right:</p>\n<pre><code>[nagios@nagios-prod libexec] ls -al /usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so\n-r-xr-xr-x 1 root root 649370 Nov 24 11:04 /usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so\n</code></pre>\n<p>Anyone got any ideas what's wrong?</p>\n"}, {"tags": ["regex", "perl", "parsing", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 5835400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fcf011e80dfab059877b5901b113f450?s=128&d=identicon&r=PG&f=1", "display_name": "akash12300", "link": "https://stackoverflow.com/users/5835400/akash12300"}, "edited": false, "score": 0, "creation_date": 1479986620, "post_id": 40785035, "comment_id": 68792782, "body": "Thanks a lot. I have verified that this command works for the given file. But I just have one question, right now kw=&#39;Thread-MESSAGE1&#39; is a constant string. Can it have regex as well?"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 372, "user_id": 5835400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fcf011e80dfab059877b5901b113f450?s=128&d=identicon&r=PG&f=1", "display_name": "akash12300", "link": "https://stackoverflow.com/users/5835400/akash12300"}, "edited": false, "score": 1, "creation_date": 1479986686, "post_id": 40785035, "comment_id": 68792838, "body": "If you want to pass in regex then inside the awk command use <code>$2 ~ kw</code> instead of <code>$2 == kw</code>"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1479986294, "creation_date": 1479986294, "answer_id": 40785035, "question_id": 40784871, "link": "https://stackoverflow.com/questions/40784871/extract-content-from-file-between-two-same-pattern/40785035#40785035", "title": "Extract content from file between two same pattern", "body": "<p>You can use this awk command:</p>\n\n<pre><code>awk -v kw='Thread-MESSAGE1' '$2 ~ /^Thread-/ {p = ($2 == kw)} p' file\n\n&lt;date-format&gt; Thread-MESSAGE1 random-message\nline 1\nline 2\nline 3\nline 4\n&lt;date-format&gt; Thread-MESSAGE1 random-message2\nline 5\n&lt;date-format&gt; Thread-MESSAGE1 random-message5\n&lt;date-format&gt; Thread-MESSAGE1 random-message6\nline 10\nline 11\n&lt;date-format&gt; Thread-MESSAGE1 random-message11\n</code></pre>\n\n<p>If this doesn't workout then I suggest you post more realistic sample data.</p>\n"}], "owner": {"reputation": 372, "user_id": 5835400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fcf011e80dfab059877b5901b113f450?s=128&d=identicon&r=PG&f=1", "display_name": "akash12300", "link": "https://stackoverflow.com/users/5835400/akash12300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 40785035, "answer_count": 1, "score": 1, "last_activity_date": 1479986294, "creation_date": 1479985805, "question_id": 40784871, "link": "https://stackoverflow.com/questions/40784871/extract-content-from-file-between-two-same-pattern", "title": "Extract content from file between two same pattern", "body": "<p>I have a log file for which I need portions belonging to a particular type of log. It can be of multiple lines.<br>I cannot post the log file here directly but it is of below format:<br></p>\n\n<pre><code>&lt;date-format&gt; Thread-MESSAGE1 random-message\nline 1\nline 2\nline 3\nline 4\n&lt;date-format&gt; Thread-MESSAGE1 random-message2\nline 5\n&lt;date-format&gt; Thread-MESSAGE2 random-message3\nline 6\nline 7\nline 8\nline 9\n&lt;date-format&gt; Thread-MESSAGE3 random-message4\n&lt;date-format&gt; Thread-MESSAGE1 random-message5\n&lt;date-format&gt; Thread-MESSAGE1 random-message6\nline 10\nline 11\n&lt;date-format&gt; Thread-MESSAGE7 random-message7\n&lt;date-format&gt; Thread-MESSAGE8 random-message9\n&lt;date-format&gt; Thread-MESSAGE9 random-message10\n&lt;date-format&gt; Thread-MESSAGE1 random-message11 \n</code></pre>\n\n<p>I need the output to be:</p>\n\n<pre><code>&lt;date-format&gt; Thread-MESSAGE1 random-message\nline 1\nline 2\nline 3\nline 4\n&lt;date-format&gt; Thread-MESSAGE1 random-message2\nline 5\n&lt;date-format&gt; Thread-MESSAGE1 random-message5\n&lt;date-format&gt; Thread-MESSAGE1 random-message6\nline 10\nline 11\n&lt;date-format&gt; Thread-MESSAGE1 random-message11 \n</code></pre>\n\n<p>I tried using sed but using ' Thread-MESSAGE1' as both the start as well as end pattern did not work if there are two consecutive logs with 'MESSAGE1' key. <br>\nI thought of using negative lookup ahead using Perl(which worked), but unfortunately I cannot use Perl and neither 'sed' nor 'awk' supports negative lookup ahead in pattern. <br>\nRecently I was trying with the following 'sed' pattern: <br></p>\n\n<pre><code>tac source_file.log | sed -n '{/&lt;date-format&gt; Thread-/!H; /&lt;date-format&gt; Thread-/{H;d;x} /&lt;date-format&gt; Thread-MESSAGE1/p; d;}' &gt; test.log\n</code></pre>\n\n<p>The idea was to reverse output of test.log afterwards, but for adding curly braces after 'Thread-/{H;d;x}' I am getting 'extra characters after command' error.\nIs there a better alternative? Or is there a way I can group commands using curly braces in sed? </p>\n"}, {"tags": ["perl", "spreadsheet", "strict", "refs"], "comments": [{"owner": {"reputation": 2603, "user_id": 4742670, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/XLo8a.png?s=128&g=1", "display_name": "Martin Gottweis", "link": "https://stackoverflow.com/users/4742670/martin-gottweis"}, "edited": false, "score": 0, "creation_date": 1479982031, "post_id": 40783195, "comment_id": 68789406, "body": "Could you try to <a href=\"http://meta.stackexchange.com/questions/22186/how-do-i-format-my-code-blocks\">format the code</a>?"}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1479990844, "post_id": 40783195, "comment_id": 68795558, "body": "Personal suggestion, perhaps have a look at <code>Excel::Writer::XLSX</code> if that would fit your requirements, it has really nice documentation as well. Im not implying that would be a solution, I just saw it as a simpler excel writer :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7187779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0fd3051b9c6ea4d0c2045fddd1339f?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/7187779/bharath"}, "edited": false, "score": 0, "creation_date": 1479984488, "post_id": 40784060, "comment_id": 68791299, "body": "Okay. Then how to initialize a scalar that has &quot;_&quot; in it. If say print  $path_1, will it not look for $path variable instead of $path_1 ?"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 11, "user_id": 7187779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0fd3051b9c6ea4d0c2045fddd1339f?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/7187779/bharath"}, "edited": false, "score": 0, "creation_date": 1479985178, "post_id": 40784060, "comment_id": 68791794, "body": "In Perl, <code>_</code> can be part of variable. So if you create <code>$path_1</code> variable, your variable will be named <code>$path_1</code> and <code>print $path_1</code> will print <code>$path_1</code> content. <code>_</code> itself has no special meaning in Perl."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1479992225, "post_id": 40784060, "comment_id": 68796482, "body": "<i>You can&#39;t use curly braces when declaring variables</i> - That&#39;s not true. It&#39;s a pretty pointless thing to do, but nothing stops you doing it."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1479996513, "post_id": 40784060, "comment_id": 68799357, "body": "@DaveCross, you&#39;re right, I&#39;ll try to rephrase my answer."}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 0, "last_activity_date": 1479996525, "last_edit_date": 1479996525, "creation_date": 1479983573, "answer_id": 40784060, "question_id": 40783195, "link": "https://stackoverflow.com/questions/40783195/perl-hash-strict-ref-error-in-spreadsheet/40784060#40784060", "title": "Perl hash strict ref error in spreadsheet", "body": "<p>You don't use curly braces when declaring variables. Use:</p>\n\n<pre><code>my $path_1 = $workbook-&gt;add_worksheet('Max Input');\n</code></pre>\n\n<p><code>${something}</code> syntax means dereference, so perl treats <code>something</code> as a reference. Besides, it's wrong to use it with <code>my</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1479986344, "creation_date": 1479986344, "answer_id": 40785056, "question_id": 40783195, "link": "https://stackoverflow.com/questions/40783195/perl-hash-strict-ref-error-in-spreadsheet/40785056#40785056", "title": "Perl hash strict ref error in spreadsheet", "body": "<p>The syntax <code>my ${path_1}</code> is unusual, but not actually a problem. With <code>use warnings</code> turned on, you'll get a warning message:</p>\n\n<blockquote>\n  <p>Ambiguous use of ${path_1} resolved to $path_1</p>\n</blockquote>\n\n<p>Best to just replace it with <code>my $path_1</code>.</p>\n\n<p>Your actual problem is this line:</p>\n\n<pre><code>${$_}-&gt;write(0,$column,\"$max_hash{$_}\");\n</code></pre>\n\n<p>You're trying to use something called \"symbolic references\" (also know as \"using a variable as the name of a variable\"). And they are a very bad idea for <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">all</a> <a href=\"http://perl.plover.com/varvarname2.html\" rel=\"nofollow noreferrer\">sorts</a> of <a href=\"http://perl.plover.com/varvarname3.html\" rel=\"nofollow noreferrer\">reasons</a> - which is why <code>use strict</code> prevents you from doing it.</p>\n\n<p>Far better to store your worksheets in a hash.</p>\n\n<pre><code>use Spreadsheet::WriteExcel;\n\n# \"Class-&gt;new()\" is far better than \"new Class\"\nmy $workbook = Spreadsheet::WriteExcel-&gt;( 'one_worksheet.csv' );\nmy %worksheets;\n$worksheets{path_1} = $workbook-&gt;add_worksheet('Max Input');\n$worksheets{path_2} = $workbook-&gt;add_worksheet('Min Input');\nforeach(keys %max_hash) {\n    $worksheets{$_}-&gt;write(0, $column, $max_hash{$_});\n    $column = $column + 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7187779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0fd3051b9c6ea4d0c2045fddd1339f?s=128&d=identicon&r=PG&f=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/7187779/bharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479996525, "creation_date": 1479981595, "last_edit_date": 1479990676, "question_id": 40783195, "link": "https://stackoverflow.com/questions/40783195/perl-hash-strict-ref-error-in-spreadsheet", "title": "Perl hash strict ref error in spreadsheet", "body": "<p>Below is the perl code</p>\n\n<pre><code>use Spreadsheet::WriteExcel;\n\nmy $workbook = new Spreadsheet::WriteExcel( 'one_worksheet.csv' );\n\nmy ${path_1} = $workbook-&gt;add_worksheet('Max Input');\nmy ${path_2} = $workbook-&gt;add_worksheet('Min Input');\n\nforeach (keys %max_hash ) {\n    ${$_}-&gt;write(0, $column, \"$max_hash{$_}\" );\n    $column = $column + 1;\n}\n</code></pre>\n\n<p>I get this error </p>\n\n<pre><code>\"Can't use string (\"path_1\") as a SCALAR ref while \"strict refs\" in use\".\n</code></pre>\n\n<p><code>%max_hash</code> has the keys <code>path_1</code> and <code>path_2</code>.</p>\n\n<p>What is the solution?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1479981791, "post_id": 40781943, "comment_id": 68789246, "body": "<code>my $cwd = getcwd();  $cwd = &quot;\\&quot;$cwd\\&quot;&quot;;</code> or <code>$inputPath = &quot;\\&quot;$inputPath\\&quot;&quot;;</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1479985036, "post_id": 40781943, "comment_id": 68791682, "body": "What <i>similar problem</i> and what <i>solutions provided above</i> and <i>what error</i> did you get?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1480010700, "post_id": 40781943, "comment_id": 68807086, "body": "@Sudharshan DS, You are mistaken. That code works fine."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480055020, "post_id": 40781943, "comment_id": 68819318, "body": "@sudharshan: please update what error you have noticed."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1479985486, "post_id": 40784443, "comment_id": 68792036, "body": "If you are going to <code>print</code> its ok. While fetching or opening from the file from the path it should not. And if you doing conversion is not success. Please check once again."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1479988299, "post_id": 40784443, "comment_id": 68793879, "body": "@ssr1012 What do you mean? <code>$filename=&#39;file with blanks.txt&#39;; open(my $fh, &#39;&lt;&#39;, $filename)</code> works like a charm. I think the OP has a totally different problem, perhaps he&#39;s in the wrong directory or mistyped the filename."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1480051310, "post_id": 40784443, "comment_id": 68818058, "body": "@ssr1012, Both of your comments are completely wrong. /// c0mm4, I suspect the OP actually did something like <code>system(&quot;foo $inputPath&quot;)</code> instead of using the multi-arg version of <code>system</code> or Win32::ShellQuote."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480054556, "post_id": 40784443, "comment_id": 68819152, "body": "@ikegami: The issues is spaces in file path or file name that&#39;s it I should think."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1480054687, "post_id": 40784443, "comment_id": 68819199, "body": "@ssr1012, Again, you are mistaken. -e and open expect file paths. Any path. Path with spaces are no problem because they are paths. Adding quotes as you suggest would form an illegal path, and would cause -e and open to fail."}], "tags": [], "owner": {"reputation": 21, "user_id": 7104529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd51999dc83f589da0537d3cfed453e?s=128&d=identicon&r=PG&f=1", "display_name": "c0mm4", "link": "https://stackoverflow.com/users/7104529/c0mm4"}, "is_accepted": false, "score": 1, "last_activity_date": 1479984531, "creation_date": 1479984531, "answer_id": 40784443, "question_id": 40781943, "link": "https://stackoverflow.com/questions/40781943/unable-to-access-file-path-which-has-spaces-in-perl/40784443#40784443", "title": "Unable to access `File Path` which has spaces in perl", "body": "<p>I created the similar folder -structure and file into my system (running Win10) and ran the code:</p>\n\n<pre><code>use Cwd;\n\nlocal @ARGV = ( \"ISG_Programs.txt\" );\nmy $cwd = getcwd();\nmy $inputPath = \"$cwd/Sources/Tools/ISGTool/ISG_REGRESSION_TESTS/$ARGV[0]\";\nprint $inputPath;\ndie \"Missing file: $ARGV[0]\\n\" unless -e $inputPath;\n</code></pre>\n\n<p>It seems to work ok, I get the following output:</p>\n\n<pre><code>C:/Program Files (x86)/Jenkins/jobs/ISG_Regression_Testing/workspace/Sources/Tools/ISGTool/ISG_REGRESSION_TESTS/ISG_Programs.txt\n</code></pre>\n\n<p>Could you please check whether the path to the file is ok? Do you get the correct output in \"print $inputPath;\" -phase?</p>\n\n<p>Perl should automatically escape whitespaces, thus they should not be an issue, i.e. your code looks ok. Are you running it from: C:/Program Files (x86)/Jenkins/jobs/ISG_Regression_Testing/workspace?</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 1, "user_id": 4715803, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3gGyFjYW_2M/AAAAAAAAAAI/AAAAAAAAAFk/WAM-0ggkiwg/photo.jpg?sz=128", "display_name": "Sudharshan DS", "link": "https://stackoverflow.com/users/4715803/sudharshan-ds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479992099, "creation_date": 1479978276, "last_edit_date": 1479992099, "question_id": 40781943, "link": "https://stackoverflow.com/questions/40781943/unable-to-access-file-path-which-has-spaces-in-perl", "title": "Unable to access `File Path` which has spaces in perl", "body": "<p>I have similar problem where I am trying to access the current working directory as spaces like</p>\n\n<p><code>\"C:/Program Files (x86)/Jenkins/jobs/ISG_Regression_Testing/workspace\"</code></p>\n\n<p>And I tried with all the solutions provided above and but did not work. My code snippet as below:</p>\n\n<pre><code>local @ARGV = ( \"ISG_Programs.txt\" );\n my $cwd = getcwd();\n my $inputPath = \"$cwd/Sources/Tools/ISGTool/ISG_REGRESSION_TESTS/$ARGV[0]\";\n print $inputPath;\n die \"Missing file: $ARGV[0]\\n\" unless -e $inputPath;\n</code></pre>\n\n<p>Please someone can provide solution on this one.</p>\n"}, {"tags": ["json", "perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1479994887, "post_id": 40783997, "comment_id": 68798296, "body": "++. one could also install <a href=\"http://perlbrew.pl\" rel=\"nofollow noreferrer\">perlbrew</a> if upgrading the OS isn&#39;t permitted/feasible."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1480017627, "post_id": 40783997, "comment_id": 68809742, "body": "I was actually able to install JSON::Parse v0.18 and that seems to work flawless on Debian Etch. :)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1479983441, "creation_date": 1479983441, "answer_id": 40783997, "question_id": 40781940, "link": "https://stackoverflow.com/questions/40781940/unable-to-install-jsonparse-with-cpan/40783997#40783997", "title": "Unable to install JSON::Parse with cpan", "body": "<p>Your errors include this:</p>\n\n<blockquote>\n  <p>Warning: Perl version 5.008009 or higher required. We run 5.008008.</p>\n</blockquote>\n\n<p>The current version of JSON::Parse (0.48) requires a more recent version of Perl than the one you have.</p>\n\n<p>This minimum version requirement was added in version 0.25. But looking at the CPAN testers results, it seems that this was just documenting a problem that had been around for some time. You <a href=\"http://matrix.cpantesters.org/?dist=JSON-Parse%200.18\" rel=\"nofollow noreferrer\">might be able to install version 0.18</a>, but you would be far better advised to upgrade to a version of Debian with a newer version of Perl installed.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 5535981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EL9hq.png?s=128&g=1", "display_name": "redneckProgrammer", "link": "https://stackoverflow.com/users/5535981/redneckprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1560886905, "creation_date": 1560886905, "answer_id": 56656001, "question_id": 40781940, "link": "https://stackoverflow.com/questions/40781940/unable-to-install-jsonparse-with-cpan/56656001#56656001", "title": "Unable to install JSON::Parse with cpan", "body": "<p>If JSON::Parse isn't a dependency for anything you want. You can just use JSON to do the same thing.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse JSON;\n\nmy $jsonString = \"{\\\"foo\\\":\\\"bar\\\"}\";\nmy $hash = decode_json($jsonString);\nprint ${$hash}{\"foo\"} . \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2925, "favorite_count": 0, "accepted_answer_id": 40783997, "answer_count": 2, "score": 1, "last_activity_date": 1560886905, "creation_date": 1479978267, "question_id": 40781940, "link": "https://stackoverflow.com/questions/40781940/unable-to-install-jsonparse-with-cpan", "title": "Unable to install JSON::Parse with cpan", "body": "<p>I'm trying to install JSON::Parse through cpan on an old Debian Etch server. When I do, it fails:</p>\n\n<pre><code>cpan[2]&gt; install JSON::Parse\nCPAN: Storable loaded ok (v2.15)\nGoing to read /root/.cpan/Metadata\n  Database was generated on Wed, 23 Nov 2016 14:41:02 GMT\nRunning install for module 'JSON::Parse'\nRunning make for B/BK/BKB/JSON-Parse-0.48.tar.gz\nCPAN: Digest::SHA loaded ok (v5.86)\nCPAN: Compress::Zlib loaded ok (v2.068)\nChecksum for /root/.cpan/sources/authors/id/B/BK/BKB/JSON-Parse-0.48.tar.gz ok\nScanning cache /root/.cpan/build for sizes\n............................................................................DONE\nJSON-Parse-0.48/\nJSON-Parse-0.48/unicode.c\nJSON-Parse-0.48/examples/\nJSON-Parse-0.48/t/\nJSON-Parse-0.48/errors.c\nJSON-Parse-0.48/lib/\nJSON-Parse-0.48/utf8-byte-one.c\nJSON-Parse-0.48/json-entry-points.c\nJSON-Parse-0.48/json-common.c\nJSON-Parse-0.48/json-perl.c\nJSON-Parse-0.48/MANIFEST\nJSON-Parse-0.48/MANIFEST.SKIP\nJSON-Parse-0.48/typemap\nJSON-Parse-0.48/utf8-next-byte.c\nJSON-Parse-0.48/script/\nJSON-Parse-0.48/unicode.h\nJSON-Parse-0.48/json-whitespace.c\nJSON-Parse-0.48/Json3.xs\nJSON-Parse-0.48/Makefile.PL\nJSON-Parse-0.48/README\nJSON-Parse-0.48/Changes\nJSON-Parse-0.48/META.yml\nJSON-Parse-0.48/META.json\nJSON-Parse-0.48/script/validjson\nJSON-Parse-0.48/lib/JSON/\nJSON-Parse-0.48/lib/JSON/Tokenize.pod\nJSON-Parse-0.48/lib/JSON/Parse.pm\nJSON-Parse-0.48/lib/JSON/Tokenize.pm\nJSON-Parse-0.48/lib/JSON/Parse.pod\nJSON-Parse-0.48/t/collision.t\nJSON-Parse-0.48/t/whitespace.t\nJSON-Parse-0.48/t/test.json\nJSON-Parse-0.48/t/syntax.t\nJSON-Parse-0.48/t/valid-json.t\nJSON-Parse-0.48/t/numbers.t\nJSON-Parse-0.48/t/unicode.t\nJSON-Parse-0.48/t/perl-monks-1165399.t\nJSON-Parse-0.48/t/array.t\nJSON-Parse-0.48/t/syntax-error-1.json\nJSON-Parse-0.48/t/kolmorogov42-1.t\nJSON-Parse-0.48/t/object.t\nJSON-Parse-0.48/t/utf8.t\nJSON-Parse-0.48/t/Json3.t\nJSON-Parse-0.48/t/test-empty-string.t\nJSON-Parse-0.48/t/read-file.t\nJSON-Parse-0.48/t/rfc7159.t\nJSON-Parse-0.48/t/JSON-Parse.t\nJSON-Parse-0.48/examples/assert.pl\nJSON-Parse-0.48/examples/sasori.pl\nJSON-Parse-0.48/examples/tokenize-synopsis.pl\nJSON-Parse-0.48/examples/bad-utf8.pl\nJSON-Parse-0.48/examples/kani.pl\nJSON-Parse-0.48/examples/true-subs.pl\nJSON-Parse-0.48/examples/long-number.pl\nJSON-Parse-0.48/examples/synopsis.pl\nJSON-Parse-0.48/examples/collide.pl\nJSON-Parse-0.48/examples/array.pl\nJSON-Parse-0.48/examples/key-collision.pl\nJSON-Parse-0.48/examples/first-bit.pl\nJSON-Parse-0.48/examples/json-tiny-round-trip-demo.pl\nJSON-Parse-0.48/examples/chr.pl\nJSON-Parse-0.48/examples/bad-utf8.txt\nJSON-Parse-0.48/examples/ebi.pl\nJSON-Parse-0.48/examples/hash.pl\nCPAN: File::Temp loaded ok (v0.2304)\nCPAN: YAML loaded ok (v0.88)\n\n  CPAN.pm: Going to build B/BK/BKB/JSON-Parse-0.48.tar.gz\n\nChecking if your kit is complete...\nLooks good\nWarning: Perl version 5.008009 or higher required. We run 5.008008.\nJSON::PP 2.27103 is not available\n at /usr/local/share/perl/5.8.8/CPAN/Meta/Converter.pm line 57.\n at /usr/local/share/perl/5.8.8/ExtUtils/MM_Any.pm line 831.\nGenerating a Unix-style Makefile\nWriting Makefile for JSON::Parse\nWriting MYMETA.yml and MYMETA.json\ncp lib/JSON/Parse.pod blib/lib/JSON/Parse.pod\ncp lib/JSON/Tokenize.pm blib/lib/JSON/Tokenize.pm\ncp lib/JSON/Tokenize.pod blib/lib/JSON/Tokenize.pod\ncp lib/JSON/Parse.pm blib/lib/JSON/Parse.pm\nRunning Mkbootstrap for JSON::Parse ()\nchmod 644 Parse.bs\n/usr/bin/perl /usr/local/share/perl/5.8.8/ExtUtils/xsubpp  -typemap /usr/share/perl/5.8/ExtUtils/typemap -typemap typemap  Json3.xs\n&gt; Json3.xsc &amp;&amp; mv Json3.xsc Json3.c\ncc -c   -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBIAN -fno-strict-aliasing -pipe -I/usr/local/include -D_LARGEFILE_SOURCE\n-D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"0.48\\\" -DXS_VERSION=\\\"0.48\\\" -fPIC \"-I/usr/lib/perl/5.8/CORE\"   Json3.c\nrm -f blib/arch/auto/JSON/Parse/Parse.so\ncc  -shared -L/usr/local/lib Json3.o  -o blib/arch/auto/JSON/Parse/Parse.so     \\\n                \\\n\nchmod 755 blib/arch/auto/JSON/Parse/Parse.so\n/usr/bin/perl -MExtUtils::Command::MM -e 'cp_nonempty' -- Parse.bs blib/arch/auto/JSON/Parse/Parse.bs 644\ncp script/validjson blib/script/validjson\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/validjson\nManifying blib/man3/JSON::Parse.3pm\nManifying blib/man3/JSON::Tokenize.3pm\n  BKB/JSON-Parse-0.48.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nRunning Mkbootstrap for JSON::Parse ()\nchmod 644 Parse.bs\nPERL_DL_NONLAZY=1 /usr/bin/perl \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'b\nlib/lib', 'blib/arch')\" t/*.t\nt/array.t ............... ok\nt/collision.t ........... ok\nt/JSON-Parse.t .......... ok\nt/Json3.t ............... ok\nt/kolmorogov42-1.t ...... ok\nt/numbers.t ............. 1/? Attempt to free unreferenced scalar: SV 0x814ebe0, Perl interpreter: 0x814e008 during global destructi\non.\nt/numbers.t ............. ok\nt/object.t .............. ok\nt/perl-monks-1165399.t .. 1/? Use of uninitialized value in undef operator at t/perl-monks-1165399.t line 38.\nt/perl-monks-1165399.t .. ok\nt/read-file.t ........... ok\nt/rfc7159.t ............. ok\nt/syntax.t .............. ok\nt/test-empty-string.t ... ok\nt/unicode.t ............. ok\nt/utf8.t ................ ok\nt/valid-json.t .......... All 5 subtests passed\nt/whitespace.t .......... ok\n\nTest Summary Report\n-------------------\nt/valid-json.t        (Wstat: 11 Tests: 5 Failed: 0)\n  Non-zero wait status: 11\n  Parse errors: No plan found in TAP output\nFiles=16, Tests=277,  0 wallclock secs ( 0.05 usr  0.01 sys +  0.25 cusr  0.04 csys =  0.35 CPU)\nResult: FAIL\nFailed 1/16 test programs. 0/277 subtests failed.\nmake: *** [test_dynamic] Error 255\n  BKB/JSON-Parse-0.48.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports BKB/JSON-Parse-0.48.tar.gz\nRunning make install\n  make test had returned bad status, won't install without force\nFailed during this command:\n BKB/JSON-Parse-0.48.tar.gz                   : make_test NO\n</code></pre>\n\n<p>Like I said, it's an old Debian Etch server which is running an old version of cpan as well:</p>\n\n<pre><code># cpan -v\n/usr/bin/cpan script version 1.9, CPAN.pm version 1.9205\n</code></pre>\n\n<p>Can anyone offer any tips?</p>\n"}, {"tags": ["multithreading", "perl", "memory-leaks", "release", "detach"], "comments": [{"owner": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1479986466, "post_id": 40781659, "comment_id": 68792671, "body": "Is this your whole code? Your <code>$num1</code> is never defined, which makes the subroutine of <code>sg_ana</code> almost a no-op. (This is something <code>use warnings</code> would have warned you about)"}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "reply_to_user": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1480039088, "post_id": 40781659, "comment_id": 68815265, "body": "This is just part of the code. Before this part, it reads from files.And I am sure there is no problem for that part."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1480068568, "post_id": 40781659, "comment_id": 68825768, "body": "Your edited code still has a syntax error. An <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful here."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480070294, "post_id": 40781659, "comment_id": 68826802, "body": "Thank you for your suggestion, I have checked it. There is no syntax erro now."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1480072834, "post_id": 40781659, "comment_id": 68828465, "body": "<code>use subs</code>? What is this, 1998?"}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480073259, "post_id": 40781659, "comment_id": 68828716, "body": "It seems that it has no meaning. It&#39;s a mistake.@melpomene"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480034615, "post_id": 40788319, "comment_id": 68814369, "body": "Thanks a lot. It really helps."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480036109, "post_id": 40788319, "comment_id": 68814649, "body": "1. Strict and warnings are used before this part, because I am sure that part is Ok, so I just didn&#39;t post them."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480036184, "post_id": 40788319, "comment_id": 68814665, "body": "2 I have noticed that OUT is used among threads, but I don&#39;t know how to deal with it.  I will try to change it."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480036198, "post_id": 40788319, "comment_id": 68814671, "body": "3. In <code>sub sg_ana</code>, the <code>$num</code> is a mistake, actually i modified this part before posting."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480036223, "post_id": 40788319, "comment_id": 68814682, "body": "4. I don&#39;t know how to limit the threads number running, and I find Semophores works, so I just use it. I have no idea about which is better. I just want to detach the threads, and arrange the number that runs at the same time."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480036394, "post_id": 40788319, "comment_id": 68814731, "body": "I don&#39;t know why it uses up memory. I have detached the threads, but it didn&#39;t work ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 1, "creation_date": 1480065536, "post_id": 40788319, "comment_id": 68823954, "body": "If your example code doesn&#39;t have the problem, then it&#39;s next to impossible for me to figure out what it was."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480068779, "post_id": 40788319, "comment_id": 68825885, "body": "I have posted all the code. It worked normally but consumed memory gradually. Maybe I can try <code>join</code> rather than <code>detach</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480073254, "post_id": 40788319, "comment_id": 68828713, "body": "Given you are explicitly waiting for your threads to exit before spawning new ones, then <code>join</code> is exactly the mechanism you want to be using. <code>detatch</code> is for &#39;if you just don&#39;t care&#39; and if you&#39;re in that scenario... you probably don&#39;t want to be using threads in the first place."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480073496, "post_id": 40788319, "comment_id": 68828853, "body": "Yes, you are right, <code>join</code> is the exact one I need. It&#39;s just that it has been said <code>detatch</code> is easier to use, so it tried it first."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480141476, "post_id": 40788319, "comment_id": 68851068, "body": "<b>But a classic reason for perl memory exhaustion when threading is because each thread clones the parent process - and so 100 threads is 100x the memory.</b> , so does this mean even if I use <code>join</code>,the memory exhaustion also happens?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 0, "creation_date": 1480415315, "post_id": 40788319, "comment_id": 68942406, "body": "<code>join</code>ing a thread should reclaim the memory. But if you&#39;re spawning one-per-instance as you are, then <code>fork</code> is the optimal tool. <code>threads</code> are better suited to a worker thread model operation where you spawn a fixed number of threads to do N way parallelism."}, {"owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "edited": false, "score": 1, "creation_date": 1480417658, "post_id": 40788319, "comment_id": 68943939, "body": "I have taken your advice, and followed <a href=\"http://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons/26297240#26297240\">this</a>. It ran for one day now, and the memory   consumption didn&#39;t increase a lot. A worker thread model is really an excellent idea."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1479995997, "last_edit_date": 1495541626, "creation_date": 1479995997, "answer_id": 40788319, "question_id": 40781659, "link": "https://stackoverflow.com/questions/40781659/why-this-perl-script-run-out-of-memory-gradually/40788319#40788319", "title": "Why this Perl script run out of memory gradually", "body": "<ol>\n<li>Rule one of debugging perl is enable <code>use strict;</code> and <code>use\nwarnings;</code> and then sort out the errors. Actually, you should\nprobably do that first of all, before you even start writing code.</li>\n<li>You're creating and limiting threads via a Semaphore - but actually\nthis is really inefficient because of how <code>perl</code> does threads - they\naren't lightweight, so spawning loads is a bad idea. A better way of doing this is via <code>Thread::Queue</code> <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons/26297240#26297240\">a bit like this.</a> </li>\n<li>Please use 3 arg open and lexical file handles. e.g. <code>open ( my\n$out, '&gt;', \"$num.$c2.txt\" ) or die $!;</code>. You're probably getting\naway with it here, but you have got <code>OUT</code> as a  global namespace\nvariable being used by multiple threads. That way lies dragons.</li>\n<li><p>Don't use single letter variables. And given how you you use <code>$c</code>\nthen you'd be <em>far</em> better off:</p>\n\n<pre><code>foreach my $value ( 1..$cycl ) { \n    ##  do stuff\n}\n</code></pre></li>\n</ol>\n\n<p>The same is true of all your <em>other</em> single letter variables though - they're not meaningful. </p>\n\n<ol start=\"5\">\n<li><p>You pass <code>$num</code> before it's initialised, so it's <em>always</em> going to\nbe <code>undef</code> within your sub. So your actual subroutine is just:</p>\n\n<pre><code>sub sg_ana\n  {\n    my $c1=shift;\n    my $c2=shift;\n    $num1=shift;\n    open OUT,\"&gt;$num1.$c2.txt\" or die \"$!\";   \n\n    close OUT;\n    $semaphore-&gt;up();\n }\n</code></pre></li>\n</ol>\n\n<p>Looking at it - I think you <em>may</em> be trying to do something with a shared variable there, but you're not actually sharing it. I can't decode the logic of your program though (thanks to having a load of single letter variables most likely) so I can't say for sure. </p>\n\n<ol start=\"6\">\n<li>You're calling a subroutine <code>&amp;waitquit;</code>. That's not good style -\nprefixing with an ampersand and supplying no arguments does\nsomething subtly different to just invoking the sub 'normally' - so\nyou should avoid it.</li>\n<li><p>Don't instantiate your semaphore like this:</p>\n\n<pre><code>my $semaphore=new Thread::Semaphore(3);\n</code></pre></li>\n</ol>\n\n<p>That's an indirect procedure call, and bad style. It would be better written as:</p>\n\n<pre><code>my $thread_limit = Thread::Semaphore -&gt; new ( 3 ); \n</code></pre>\n\n<ol start=\"8\">\n<li><p>I would suggest rather than using Semaphores like that, you'd be far better off <em>not</em> <code>detatch</code>ing your threads, and just using <code>join</code>. You also don't need an array of threads - <code>threads -&gt; list</code> does that for you. </p></li>\n<li><p>I can't reproduce your problem, because your sub isn't doing\nanything. Have you by any chance modified it for posting? But a classic reason for perl memory exhaustion when threading is because each thread clones the parent process - and so 100 threads is 100x the memory. </p></li>\n</ol>\n"}], "owner": {"reputation": 35, "user_id": 7203879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4faa6f85c11c110a196024a86fe5719e?s=128&d=identicon&r=PG&f=1", "display_name": "c11cc", "link": "https://stackoverflow.com/users/7203879/c11cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 40788319, "answer_count": 1, "score": 0, "last_activity_date": 1480069853, "creation_date": 1479977433, "last_edit_date": 1480069853, "question_id": 40781659, "link": "https://stackoverflow.com/questions/40781659/why-this-perl-script-run-out-of-memory-gradually", "title": "Why this Perl script run out of memory gradually", "body": "<p>I have a trouble in running a Perl script in muti-threads. It continued consume memory and finally the system ran out of memory and killed it. It seems that the sub-threads were detached but the system resource were not released when they finished. I am pretty new to Perl and couldn't find which part went wrong. This is part of the script that may cause this problem. Could anyone help me with this?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"different number:\\t\";\nmy $num1=&lt;&gt;;\nchomp $num1;\nif($num1!~/[1 2 3 4 5]/)\n {\n    print \"invalid input number\\n\";\n    END;\n }\n\nmy $i=0;\nmy $no;\nmy @spacer1;\nmy $nn;\nmy @spacer2;\n\nopen IN,\"file1.txt\"or die\"$!\";\n  while(&lt;IN&gt;)\n   {\n     chomp;\n     if($_=~ /^&gt;((\\d)+)\\|((\\d)+)/)\n       {         \n         $no=$1;\n         $spacer1[$no][0]=$3;        \n       }\n     else\n       {\n         $spacer1[$no][1]=$_;       \n       }\n   }\nclose IN;\n\nopen IN, \"file2.txt\" or die \"$!\";\n  while(&lt;IN&gt;)\n   {\n     chomp;\n     if($_=~ /^&gt;((\\d)+)\\|((\\d)+)/)\n       {         \n         $nn=$1;\n         $spacer2[$nn][0]=$3;       \n       }\n     else\n       {\n         $spacer2[$nn][1]=$_;       \n       }\n   }\nclose IN;\n\n#-----------------------------------------------------------------#create threads\nuse subs qw(sg_ana);\nuse threads;\nuse Thread::Semaphore;\n\n\nmy $cycl=(int($no/10000))+1;\nmy $c;\nmy @thd;\nmy $thread_limit= Thread::Semaphore -&gt; new (3);\n\nforeach $c(1..$cycl)\n  {\n    $thread_limit-&gt;down();\n    $thd[$c]=threads-&gt;create(\"sg_ana\",$c-1,$c,$num1);\n    $thd[$c]-&gt;detach();\n  }\n&amp;waitquit;\n\n#-------------------------------------------------------------#limite threads num\nsub waitquit \n  {\n    print \"waiting\\n\";\n    my $num=0;\n    while($num&lt;3)\n      {\n        $thread_limit-&gt;down();\n        $num++;\n      }         \n  }\n\n#---------------------------------------------------------------#alignment\nmy $n;\nmy $n1;\nmy $j;\nmy $k;\nmy $l;\nmy $m;\nmy $num;#number of match\nmy $num2=0;;#arrange num\n\n\n\nsub sg_ana\n  {\n    my $c1=shift;\n    my $c2=shift;\n    $num1=shift;\n    open OUT,\"&gt;$num1.$c2.txt\" or die \"$!\";   \n    if($num1==1)\n      {\n        foreach $n($c1*10000..$c2*10000-1)\n          {\n            if($spacer2[$n][1])\n              {\n                my $presult1;\n                my $presult2;\n                $num2=-1;\n                foreach $i(0..19)\n                  {\n                    $num=0;\n                    $num2++;\n                    my $tmp1=(substr $spacer2[$n][1],0,$i).\"\\\\\".\"w\".(substr $spacer2[$n][1],$i+1,19-$i);\n                    foreach $n1(0..@spacer1-1)\n                      {\n                        if($spacer1[$n1][1])\n                          {\n                            my $tmp2=substr $spacer1[$n1][1],0,20;\n                            if($tmp2=~/$tmp1/)\n                              {\n                                $num++; \n                                $presult1.=$n1.\",\";                \n                              } \n                          }\n                      }        \n                    $presult2=$i+1; \n                    if($num&gt;=4)\n                      { \n                        print OUT \"\\n\";\n                      }\n                  }\n              }\n          }\n      }\n    close OUT;\n    $thread_limit-&gt;up();\n  }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1479973428, "post_id": 40780554, "comment_id": 68784258, "body": "Use a negative lookahead: <code>m&#47;$char(?!.*$char)&#47;</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1479973576, "post_id": 40780554, "comment_id": 68784349, "body": "Could you please update little more input and output&#39;s"}, {"owner": {"reputation": 1349, "user_id": 3623150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3T4cu.jpg?s=128&g=1", "display_name": "bob_saginowski", "link": "https://stackoverflow.com/users/3623150/bob-saginowski"}, "edited": false, "score": 0, "creation_date": 1479973818, "post_id": 40780554, "comment_id": 68784459, "body": "maybe <code>$input =~ m&#47;$ch$&#47;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1479988907, "post_id": 40780554, "comment_id": 68794250, "body": "It&#39;s far from clear what you mean. If <code>$char</code> is found anywhere in the string, it doesn&#39;t matter that there may be another match further on; the result us still <i>success</i>."}, {"owner": {"reputation": 29, "user_id": 1390825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56db1337040ca19b9ce7f09e00b9e7b2?s=128&d=identicon&r=PG", "display_name": "adielas", "link": "https://stackoverflow.com/users/1390825/adielas"}, "edited": false, "score": 0, "creation_date": 1488284843, "post_id": 40780554, "comment_id": 72154796, "body": "For example:     removeCharFromEnd( &quot;abca&quot;, &quot;a&quot;) should return &quot;abc&quot; and not &quot;bca&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1479975841, "creation_date": 1479975841, "answer_id": 40781211, "question_id": 40780554, "link": "https://stackoverflow.com/questions/40780554/matching-a-variable-in-a-string-in-perl-from-the-end/40781211#40781211", "title": "Matching a variable in a string in Perl from the end", "body": "<p>There is no <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">regex modifier</a> that would force Perl regex engine to parse the string from right to left. Thus, the most convenient way to achieve that is via a negative lookahead:</p>\n\n<pre><code>m/$char(?!.*$char)/\n</code></pre>\n\n<p>The <code>(?!.*$char)</code> negative lookahead will require the absence (=will fail the match if found) of a <code>$char</code> after any 0+ chars other than linebreak chars (use <code>s</code> modifier if you are running the regex against a multiline string input).</p>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1479977161, "last_edit_date": 1479977161, "creation_date": 1479976852, "answer_id": 40781491, "question_id": 40780554, "link": "https://stackoverflow.com/questions/40780554/matching-a-variable-in-a-string-in-perl-from-the-end/40781491#40781491", "title": "Matching a variable in a string in Perl from the end", "body": "<p>The regex engine works from left to right.</p>\n\n<p>You can use the natural greediness of quantifiers to reach the end of the string and find the last char with the backtracking mechanism:</p>\n\n<pre><code>if($string =~ m/.*\\K$char/s) { ...\n</code></pre>\n\n<p><code>\\K</code> marks the position of the match result beginning.</p>\n\n<p>Other ways:</p>\n\n<ul>\n<li><p>you can also reverse the string and use your previous pattern.</p></li>\n<li><p>you can search all occurrences and take the last item in the list</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479989724, "creation_date": 1479989724, "answer_id": 40786186, "question_id": 40780554, "link": "https://stackoverflow.com/questions/40780554/matching-a-variable-in-a-string-in-perl-from-the-end/40786186#40786186", "title": "Matching a variable in a string in Perl from the end", "body": "<p>I'm having trouble understanding what you want. Your subroutine is called <code>removeCharFromEnd</code>, so perhaps you want to remove <code>$char</code> from <code>$string</code> if it appears at the end of the string</p>\n\n<p>You can do that like this</p>\n\n<pre><code>sub removeCharFromEnd {\n    my ( $string, $char ) = @_;\n\n    if ( $string =~ s/$char\\z// ) {\n        print \"success\";\n    }\n\n    $string;\n}\n</code></pre>\n\n<p>Or perhaps you want to remove the <em>last</em> occurrence of <code>$char</code> wherever it is. You can do that with</p>\n\n<pre><code>s/.*\\K$char//\n</code></pre>\n\n<p>The subroutine I have written <em>returns</em> the modified string, so you would have to assign the result to a variable to save it. You can write</p>\n\n<pre><code>my $s = 'abc';\n$s = removeCharFromEnd($s, 'c');\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>ab\n</code></pre>\n\n<p>If you just want to modify the string in place then you should write</p>\n\n<pre><code>$ARGV[0] =~ s/$char\\z//\n</code></pre>\n\n<p>using whichever substitution you choose. Then you can do this</p>\n\n<pre><code>my $s = 'abc';\nremoveCharFromEnd($s, 'c');\nsay $s;\n</code></pre>\n\n<p>This produces the same output</p>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1479993900, "creation_date": 1479993900, "answer_id": 40787604, "question_id": 40780554, "link": "https://stackoverflow.com/questions/40780554/matching-a-variable-in-a-string-in-perl-from-the-end/40787604#40787604", "title": "Matching a variable in a string in Perl from the end", "body": "<p>To get Perl to search from the end of a string, reverse the string.</p>\n\n<pre><code>sub removeCharFromEnd {\n    my $string =           reverse shift @_;\n    my $char   = quotemeta reverse shift @_;\n\n    $string =~ s/$char//;\n    $string = reverse $string;\n\n    return $string;\n}\n\nprint removeCharFromEnd(qw( abcabc b )), \"\\n\";\nprint removeCharFromEnd(qw( abcdefabcdef c )), \"\\n\";\nprint removeCharFromEnd(qw( !\"/$%?&amp;*!\"/$%?&amp;* $ )), \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 1390825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56db1337040ca19b9ce7f09e00b9e7b2?s=128&d=identicon&r=PG", "display_name": "adielas", "link": "https://stackoverflow.com/users/1390825/adielas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1479993900, "creation_date": 1479973355, "question_id": 40780554, "link": "https://stackoverflow.com/questions/40780554/matching-a-variable-in-a-string-in-perl-from-the-end", "title": "Matching a variable in a string in Perl from the end", "body": "<p>I want to match a variable character in a given string, but from the end.\nIdeas on how to do this action?</p>\n\n<p>for example:</p>\n\n<pre><code>sub removeCharFromEnd {\n    my $string = shift;\n    my $char = shift;\n    if($string =~ m/$char/){ // I want to match the char, searching from the end, $doesn't work\n        print \"success\";\n    }\n\n}\n</code></pre>\n\n<p>Thank you for your assistance.</p>\n"}, {"tags": ["perl", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1479971833, "post_id": 40778678, "comment_id": 68783317, "body": "If you have Java code to do this then please show it."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1479991918, "post_id": 40780617, "comment_id": 68796285, "body": "Thanks a lot Chankey. It worked perfectly. Can you tell what is the difference if I use above Selenium::Remote::Driver with browser name chrome to get driver object or directly use Selenium::Chrome."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1480052630, "post_id": 40780617, "comment_id": 68818438, "body": "Thanks a lot Chankey."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 2, "last_activity_date": 1479998496, "last_edit_date": 1479998496, "creation_date": 1479973645, "answer_id": 40780617, "question_id": 40778678, "link": "https://stackoverflow.com/questions/40778678/changing-default-download-directory-in-chrome-webdriver/40780617#40780617", "title": "Changing default download directory in Chrome Webdriver", "body": "<p>I do not have the test setup but passing below as <code>desired_capabilities</code> or <code>extra_capabilities</code> to the constructor should work fine.</p>\n\n<pre><code>'download.default_directory', 'C:\\New_Folder'\n</code></pre>\n\n<p><strong>Snippet</strong> (untested):</p>\n\n<pre><code>my $driver = Selenium::Remote::Driver-&gt;new(\n    'browser_name' =&gt;'chrome',\n    'extra_capabilities' =&gt; {\n        'chromeOptions' =&gt; {\n            'prefs' =&gt; {\n                'download.default_directory' =&gt; 'C:\\New_Folder'\n            }\n        }\n    }\n);\n</code></pre>\n\n<p><strong>Edit:</strong> Difference between <code>Selenium::Chrome</code> and <code>Selenium::Remote::Driver</code></p>\n\n<p><a href=\"https://metacpan.org/pod/Selenium::Chrome\" rel=\"nofollow noreferrer\">Selenium::Chrome</a> allows you to use the ChromeDriver without needing the JRE or a selenium server running. If the ChromeDriver binary is not found, it falls back to the default <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\">Selenium::Remote::Driver</a>. </p>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 2, "accepted_answer_id": 40780617, "answer_count": 1, "score": 3, "last_activity_date": 1479998496, "creation_date": 1479965477, "last_edit_date": 1479973934, "question_id": 40778678, "link": "https://stackoverflow.com/questions/40778678/changing-default-download-directory-in-chrome-webdriver", "title": "Changing default download directory in Chrome Webdriver", "body": "<p>Can anyone let me know how can I change the default download location for Chrome using Selenium-Perl. I am using Chrome Webdriver and the Perl module <code>Selenium::Remote::Driver</code>. I got code for Java but not in Perl for this task.</p>\n"}, {"tags": ["perl", "exit-code", "perl-ipc-run"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1479954886, "post_id": 40777096, "comment_id": 68777990, "body": "@ikegami Oh, sure, much better to show it all (and correctly). Thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1498027985, "last_edit_date": 1498027985, "creation_date": 1479953898, "answer_id": 40777096, "question_id": 40776912, "link": "https://stackoverflow.com/questions/40776912/how-to-test-the-exit-status-from-ipcrun3/40777096#40777096", "title": "How to test the exit status from IPC::Run3", "body": "<p>A few points to go through.</p>\n\n<p>First, for the direct question, the <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a> documentation tells us that</p>\n\n<blockquote>\n  <p><code>run3</code> throws an exception if the wrapped <code>system</code> call returned <code>-1</code> or anything went wrong with <code>run3</code>'s processing of filehandles. Otherwise it returns true. It leaves <code>$?</code> intact for inspection of exit and wait status.</p>\n</blockquote>\n\n<p>The error you ask about is of that kind and you need to <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> the call to catch that exception</p>\n\n<pre><code>use warnings 'all';\nuse strict;\nuse feature 'say';\n\nmy ($stdout, $stderr);\n\nmy @cmd = (\"ls\", \"-l\");\n\neval { run3 \\@cmd, \\undef, \\$stdout, \\$stderr };\nif    ( $@        ) { print \"Error: $@\";                     }\nelsif ( $? &amp; 0x7F ) { say \"Killed by signal \".( $? &amp; 0x7F ); }\nelsif ( $? &gt;&gt; 8   ) { say \"Exited with error \".( $? &gt;&gt; 8 );  }\nelse                { say \"Completed successfully\";          }\n</code></pre>\n\n<p>You can now print your own messages inside <code>if ($@) { }</code> block, when errors happen where the underlying <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> fails to execute. Such as when a non-existing program is called.  </p>\n\n<p>Here <code>$@</code> relates to <code>eval</code> while <code>$?</code> to <code>system</code>. So if <code>run3</code> didn't have a problem and <code>$@</code> is false next we check the status of <code>system</code> itself, thus <code>$?</code>. From docs</p>\n\n<blockquote>\n  <p>Note that a true return value from <code>run3</code> doesn't mean that the command\n  had a successful exit code. Hence you should always check <code>$?</code>.</p>\n</blockquote>\n\n<p>For variables <code>$@</code> and <code>$?</code> see <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar</a>, and <code>system</code> and <code>eval</code> pages.</p>\n\n<p>A minimal version of this is to drop <code>eval</code> (and <code>$@</code> check) and expect the program to <code>die</code> if <code>run3</code> had problems, what should be rare, and to check (and print) the value of <code>$?</code>.</p>\n\n<p>A note on <code>run3</code> interface. With <code>\\@cmd</code> it expects <code>@cmd</code> to contain a command broken into words, the first element being the program and the rest arguments. There is a difference between writing a command in a string, supported by <code>$cmd</code> interface, and in an array.  See <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> for explanation.</p>\n\n<p>Which alternative would suit you best depends on your exact needs. Here are some options. Perhaps first   try <a href=\"http://search.cpan.org/~pjf/IPC-System-Simple-1.25/lib/IPC/System/Simple.pm\" rel=\"nofollow noreferrer\">IPC::System::Simple</a> (but no <code>STDERR</code> on the platter). For cleanly capturing all kinds of output <a href=\"http://search.cpan.org/~dagolden/Capture-Tiny-0.44/lib/Capture/Tiny.pm\" rel=\"nofollow noreferrer\">Capture::Tiny</a> is great.  On the other end there is <a href=\"http://search.cpan.org/~toddr/IPC-Run-0.94/lib/IPC/Run.pm\" rel=\"nofollow noreferrer\">IPC::Run</a> for far more power.</p>\n"}], "owner": {"reputation": 1443, "user_id": 1738879, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c8b6bb8a36582396e2afdac592b8a7c4?s=128&d=identicon&r=PG&f=1", "display_name": "PedroA", "link": "https://stackoverflow.com/users/1738879/pedroa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 1, "accepted_answer_id": 40777096, "answer_count": 1, "score": 2, "last_activity_date": 1498027985, "creation_date": 1479952360, "last_edit_date": 1479953547, "question_id": 40776912, "link": "https://stackoverflow.com/questions/40776912/how-to-test-the-exit-status-from-ipcrun3", "title": "How to test the exit status from IPC::Run3", "body": "<p>I'm trying to test the Perl module IPC::Run3 but having difficulty in checking whether a command is failed or successful.<br>\nI know that IPC::Run3 issues an exit code if something is wrong with its arguments, but what about if the arguments are ok but the command does not exist? How can I test the following example?  </p>\n\n<p>Having a subroutine to call Run3</p>\n\n<pre><code>sub runRun3 {\n\n    my $cmd = shift;\n    my ($stdout, $stderr);\n\n    run3($cmd, \\undef, \\$stdout, \\$stderr);\n\n#   if( $? == -1 ) {\n    if (! $stdout and ! $stderr) {\n        die \"Something is wrong\";\n    } else {\n        print \"OK \\n\";\n    }\n\n}\n</code></pre>\n\n<p>when command <code>$cmds[0]</code> below is executed (the <code>ls</code> command of *nix systems) it prints <code>OK</code> as expected, but with command <code>$cmds[1]</code> it just says <code>No such file or directory at ./testrun3.pl line 18</code>.\nWith a test to the exit code I want it to print <code>Something is wrong</code> instead.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse IPC::Run3;\n\nmy @cmds = qw(ls silly);\n\nrunRun3($cmds[0]);\nrunRun3($cmds[1]);\n</code></pre>\n\n<p>Or what would be the best alternative to IPC::Run3 in cases like this? This is just an oversimplification of the process, but eventually I would like to capture STDERR and STDOUT for more complex situations.</p>\n\n<p>Thanks.</p>\n"}]