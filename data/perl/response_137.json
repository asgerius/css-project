[{"tags": ["perl", "hash", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4363148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000574226765/picture?type=large", "display_name": "Imii Iik", "link": "https://stackoverflow.com/users/4363148/imii-iik"}, "edited": false, "score": 0, "creation_date": 1503568377, "post_id": 45852621, "comment_id": 78674526, "body": "Thanks for your response, in my csv I have other sevral columns and I have to specify witch column put in the hash, so i used the index of column in my code. can you please help me?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 165, "user_id": 4363148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000574226765/picture?type=large", "display_name": "Imii Iik", "link": "https://stackoverflow.com/users/4363148/imii-iik"}, "edited": false, "score": 0, "creation_date": 1503590924, "post_id": 45852621, "comment_id": 78691202, "body": "Replace both instance of <code>$csv-&gt;column_names()</code> with the column names."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1503594746, "last_edit_date": 1503594746, "creation_date": 1503546559, "answer_id": 45852621, "question_id": 45850583, "link": "https://stackoverflow.com/questions/45850583/perl-max-value-of-a-hash-key-value-based-on-a-field/45852621#45852621", "title": "Perl max value of a hash (key,value) based on a field", "body": "<pre><code>use Text::CSV_XS qw( );\n\nmy $qfn_in  = \"C:\\\\my_file.csv\";\nmy $qfn_out = \"C:\\\\output.csv\";\n\nopen(my $fh_in, '&lt;', $qfn_in);\n   or die(\"Can't open \\\"$qfn_in\\\": $!\\n\");\n\nopen(my $fh_out, '&gt;', $qfn_out);\n   or die(\"Can't create \\\"$qfn_out\\\": $!\\n\");\n\nmy $csv = Text::CSV_XS-&gt;new({\n   auto_diag =&gt; 2,\n   binary    =&gt; 1,\n   sep_char  =&gt; ';',\n});\n\n$csv-&gt;header($fh_in);\n\nmy %data;\nwhile (my $row = $csv-&gt;getline_hr($fh_in)) {\n   my $key = join(';', @$row{qw( date name type ref )});\n   $data{$key} = $row\n      if !exists($data{$key}\n      || $data{$key}{val_dens} &lt; $row-&gt;{val_dens};\n}\n\nmy @output_cols = qw( date name type ref val_dens val_number val_tech rate );\n$csv-&gt;say($fh_out, \\@output_cols);\n\nfor my $row (values(%data)) {\n   $csv-&gt;say($fh_out, [ @$row{@output_cols} ]);\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4363148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000574226765/picture?type=large", "display_name": "Imii Iik", "link": "https://stackoverflow.com/users/4363148/imii-iik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 45852621, "answer_count": 1, "score": 0, "last_activity_date": 1503594746, "creation_date": 1503529694, "question_id": 45850583, "link": "https://stackoverflow.com/questions/45850583/perl-max-value-of-a-hash-key-value-based-on-a-field", "title": "Perl max value of a hash (key,value) based on a field", "body": "<p>I want to get the max value in a hash based on a value of field, in first I put each line in hash by specifying keys and values, and I want to sort the hash and print on a file the line that have the max value based on keys and val_dens field:</p>\n\n<p>My CSV file is like this:</p>\n\n<pre><code>date;name;type;ref;val_dens;val_number;val_tech;rate\n08.18.2017;FBT;F13;G45G6;44.19;21.11;78.21;42\n08.18.2017;FBT;F13;G45G6;55.39;24.14;56.22;32\n08.18.2017;FRT;B14;KY5F6;0.19;27.23;77.27;62\n08.18.2017;FBT;F13;G45G6;11.91;26.16;36.21;72\n08.18.2017;FBR;F12;561G6;12.51;21.13;76.2;18\n08.18.2017;FBR;F12;561G6;27.65;21.11;71.7;27\n08.18.2017;FBR;F12;561G6;9.15;18.21;77.1;11\n08.18.2017;FRT;B14;KY5F6;0.65;24.14;75.21;52\n08.18.2017;FRT;B14;KY5F6;0.14;27.11;74.12;12\n08.18.2017;FBT;F13;G45G6;14.54;62.18;16.24;52\n08.18.2017;FBR;F12;561G6;11.18;17.12;73.4;18\n08.18.2017;FBR;F12;561G6;25.12;15.23;72.5;17\n08.18.2017;FRT;B14;KY5F6;0.25;26.67;72.26;72\n08.18.2017;FBT;F13;G45G6;22.39;52.14;26.25;12\n08.18.2017;FBT;F13;G45G6;11.42;82.19;76.21;32\n</code></pre>\n\n<p>My expected output is :</p>\n\n<pre><code>date;name;type;ref;val_dens;val_number;val_tech;rate\n08.18.2017;FBR;F12;561G6;27.65;21.11;71.7;27\n08.18.2017;FBT;F13;G45G6;55.39;24.14;56.22;32\n08.18.2017;FRT;B14;KY5F6;0.65;24.14;75.21;52\n</code></pre>\n\n<p>my code is:</p>\n\n<pre><code>#!C:\\Perl64\\bin\\perl.exe\nuse strict;  \nuse warnings;\nmy %linearray;\nmy %index;\nopen my $info \"C:\\\\my_file.csv\" or die \"Could not open input file: $!\";\nwhile( my $line = &lt;$info&gt;)  {  \n    my @array2 = split(/;/, $line);\n    @index{@array2} = (0..$#array2);\n    my $key_date = $array2[$index{\"date\"}];  # first key\n    my $key_name = $array2[$index{\"name\"}];  # second key\n    my $key_type =  $array2[$index{\"type\"}];  # third key\n    my $key_ref =  $array2[$index{\"ref\"}];    # fourth key\n    my $val_dens =  $array2[$index{\"val_dens\"}];   #first value\n    my $val_number =  $array2[$index{\"val_number\"}];  #second value\n    my $val_tech =  $array2[$index{\"val_tech\"}];     #third value\n    my $val_rate =  $array2[$index{\"rate\"}];    #fourth value\n\n    if (not defined $key_date or not defined $key_name or not defined $key_type or not defined $key_ref ){\n        next ;\n        }       \n    #ignore header of file\n    next if ($. == 1);  \n# ADD line to hash\n\n    $linearray{$key_date.\";\".$key_name.\";\".$key_type.\";\".$key_ref} = $val_dens.\";\".$val_number.\";\".$val_tech.\";\".$val_rate\n\n}\n    open(my $fh, '&gt;', 'C:\\\\output.csv') or die \"Could not open file 'C:\\\\output.csv' $!\";\n    # print header\n    print $fh \"date;name;type;ref;val_dens;val_number;val_tech;rate\".\"\\n\";\n    # sort and print the max value based on  val_dens field\n\nforeach my $Value (sort keys %linearray) {\n         print $fh \"$Value;$linearray{$Value}\\n\";\n\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 7, "creation_date": 1503523743, "post_id": 45849528, "comment_id": 78657290, "body": "Don&#39;t follow 15 year old tutorials that were bad the moment they were written. See also <a href=\"http://shop.oreilly.com/product/0636920049517.do\" rel=\"nofollow noreferrer\">Learning Perl</a>. As for <code>Address.pm</code>, it is not included on the page."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 4, "creation_date": 1503524094, "post_id": 45849528, "comment_id": 78657414, "body": "As @Sinan&#220;n&#252;r points out, this is an old and not-so-great tutorial.  Of course you have no way to tell that it sucks, since it has 5 stars on that site.  Try starting here: <a href=\"https://www.perl.org/learn.html\" rel=\"nofollow noreferrer\">perl.org/learn.html</a>  You also might find the official OO tutorial in the perl manual pages useful: <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlootut.html</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1503524346, "post_id": 45849528, "comment_id": 78657530, "body": "There doesn&#39;t seem to be a misunderstanding on your part.  There indded need be <code>use Address;</code> in the code, but that module isn&#39;t shown. I also strongly suggest to use other resources, btw."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 2, "creation_date": 1503524705, "post_id": 45849528, "comment_id": 78657696, "body": "so guys, thank you and I will follow other sites.. I thought this decent since it had couple modules put together and try to use it so that I can understand better.  I will check out suggested resource."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503525096, "post_id": 45849528, "comment_id": 78657860, "body": "Use the ample documentation that is installed with Perl on <i>your</i> computer. <code>perldoc perltoc</code>, <code>perltoc perlootut</code>, and <code>perldoc perlobj</code>."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1503525639, "post_id": 45849528, "comment_id": 78658069, "body": "BTW, I just have to add a comment. It&#39;s best to learn from complete example and some of the resource gives you little snippets but not necessarily complete picture end to end and that&#39;s why I was looking at other stuff. It is very possible that I didn&#39;t look at already mentioned tutorial and I intend to study them throughly tonight."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503563679, "post_id": 45849528, "comment_id": 78671297, "body": "Sure, complete examples are good. You&#39;ll find plenty of them which are <i>much</i> better than that &quot;tutorial.&quot;  (I am not blaming <i>you</i> :)  I&#39;d suggest some of the very good books on Perl that are out there.  Also, the official documentation linked by @Sinan is excellent. And the SO itself in fact has a lot of posts with complete examples."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1503574531, "post_id": 45849528, "comment_id": 78678953, "body": "I am sorry but I must respectively disagreed. I do not find official perl doc which was linked having complete end to end examples. I would like tutorial to have complete yet concise modules to show most object oriented ideas  and also perl script itself to call them and use it. I feel like that helps more than snippets that I see on these tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 2, "creation_date": 1503524573, "post_id": 45849665, "comment_id": 78657620, "body": "It is a stunningly bad tutorial, leaving out the missing <code>u</code>s on some of the <code>use</code> statements, it has sample code that uses a module that it doesn&#39;t provide source for.  And of course, there&#39;s the indirect object notation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503546722, "post_id": 45849665, "comment_id": 78663250, "body": "What&#39;s with the needlessly noisy <code>-&gt;new({ ... })</code> instead of <code>-&gt;new( ... )</code>?!"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1503555104, "post_id": 45849665, "comment_id": 78666088, "body": "seriously, what is     my %self = map +($_ =&gt; $args-&gt;{$_}), qw( street city state zip );   ???"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1503525014, "last_edit_date": 1503525014, "creation_date": 1503524245, "answer_id": 45849665, "question_id": 45849528, "link": "https://stackoverflow.com/questions/45849528/why-cant-i-run-this-perl-code/45849665#45849665", "title": "why can&#39;t I run this perl code?", "body": "<p>The tutorial is outdated and rather useless. Specifically, it is much worse than the documentation which comes with Perl. Use <code>perldoc perltoc</code> to get a table of contents, and read everything at least once.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\"><code>perldoc perlootut</code></a> and <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\"><code>perldoc perlobj</code></a>.</p>\n\n<pre><code>package Address;\n\nuse strict;\nuse warnings;\n\nsub new {\n    my $class = shift;\n    my $args = shift;\n    my %self = map +($_ =&gt; $args-&gt;{$_}), qw( street city state zip );\n    bless \\%self =&gt; $class;\n}\n\nsub street {\n    my $self = shift;\n    if ( @_ ) {\n        $self-&gt;{street} = $_[0];\n        return;\n    }\n    return $self-&gt;{street};\n}\n\n# ditto for the rest of the accessors # there are\n# ways to cut down the boilerplate once you learn\n# the basics\n#\n# ...\n\n\n__PACKAGE__\n__END__\n</code></pre>\n\n<p>You use this module like this:</p>\n\n<pre><code> my $address = Address-&gt;new({\n    street =&gt; '123 E. Any St',\n    city =&gt; 'Any Town',\n    state =&gt; 'AY',\n    zip =&gt; '98765',\n });\n</code></pre>\n\n<p>Of course, there a lot of things missing from this little demo. For example, the accessor, as written, allows you to change the state of the object. Immutable objects are easier to reason about, so you might want to disallow that by changing it to:</p>\n\n<pre><code> sub street { $_[0]-&gt;{street} }\n</code></pre>\n\n<p>It also allows you to assign any value you want to fields like <code>state</code> and <code>zip</code>. So, you may want to validate those values in the constructor, ensure that only values for the fields of the class are passed, all the values passed are defined etc.</p>\n\n<p>At the end of that process, you may decide it doesn't make sense to keep writing boilerplate and use <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">Moo</a> or <a href=\"https://metacpan.org/pod/Moose\" rel=\"nofollow noreferrer\">Moose</a> to avail yourself to a richer set of features.</p>\n\n<p>Even then, it helps to know what's happening under the hood.</p>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503525014, "creation_date": 1503523573, "question_id": 45849528, "link": "https://stackoverflow.com/questions/45849528/why-cant-i-run-this-perl-code", "title": "why can&#39;t I run this perl code?", "body": "<p>While following this tutorial</p>\n\n<p><a href=\"https://www.codeproject.com/Articles/3152/Perl-Object-Oriented-Programming\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/3152/Perl-Object-Oriented-Programming</a></p>\n\n<p>I am failing to see where module Address.pm is.. did I miss something or article has an error or do I have a misunderstanding when one of the module says ' use Address ';</p>\n\n<pre><code>mac1:moduleTEST1 user1$ ./Employee.pl\nCan't locate object method \"new\" via package \"Address\" (perhaps you forgot to load \"Address\"?) at ./Employee.pl line 16.\nmac1:moduleTEST1 user1$\n</code></pre>\n"}, {"tags": ["sql", "oracle", "perl", "oracle11g", "oracle10g"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503521312, "post_id": 45848912, "comment_id": 78656240, "body": "Shouldn&#39;t the second arg of <code>TO_TIMESTAMP</code> be the pattern to match that data string? The <code>YYYY-MM-DD</code> is your target, right? According <a href=\"https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions193.htm\" rel=\"nofollow noreferrer\">to the doc</a> the target is always of type <code>TIMESTAMP</code>. But then I have never used Oracle, all I do is read the docs."}, {"owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "edited": false, "score": 0, "creation_date": 1503553384, "post_id": 45848912, "comment_id": 78665333, "body": "Try <code>TO_TIMESTAMP_TZ(&#39;Wed Aug 16 16:59:31 UTC 2017&#39;, &#39;Dy Mon DD HH24:MI:SS TZR YYYY&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 37365, "user_id": 5683823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8551ed09606092a75f36b0638e5c318f?s=128&d=identicon&r=PG&f=1", "display_name": "mathguy", "link": "https://stackoverflow.com/users/5683823/mathguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1503521818, "creation_date": 1503521818, "answer_id": 45849144, "question_id": 45848912, "link": "https://stackoverflow.com/questions/45848912/oracle-utc-date-string-insertion-in-a-date-column/45849144#45849144", "title": "Oracle UTC date string insertion in a date column", "body": "<p>There are two problems with your attempt. First, and conceptually most important, your input string represents a timestamp WITH TIME ZONE, not a generic timestamp. Regardless of how you are going to add it to your database, what is the <strong>data type</strong> needed for this data? Do you need to convert it to \"local\" time zone, and then simply discard the time zone info? (Consider also the TIMESTAMP WITH LOCAL TIME ZONE data type though - do a Google search to find the documentation if you are not familiar with it.) You need to make this decision - or your business must make this decision - before any practical implementation. Or, alternatively, you could keep the data in TIMESTAMP WITH TIME ZONE data type (with UTC as the time zone).</p>\n\n<p>The second, as already mentioned in a Comment to your question, is that the format model doesn't match the actual structure of your input string. Your format model begins with <code>'YYYY'</code> so the input string should have the year first. But it doesn't; it has <code>'Wed '</code>. Obviously that is not going to work, even if you fix the first problem. But answering the first question is really the main point; fixing the format model is much easier.</p>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1609058771, "creation_date": 1503520777, "last_edit_date": 1609058771, "question_id": 45848912, "link": "https://stackoverflow.com/questions/45848912/oracle-utc-date-string-insertion-in-a-date-column", "title": "Oracle UTC date string insertion in a date column", "body": "<p>I am getting a response from one of our API like below,</p>\n<pre><code>'createdate' =&gt; 'Sun Jan 31 04:40:15 UTC 2016'\n</code></pre>\n<p>I am using Oracle database to save API data and I am using Perl language to parse the API data. Before inserting the above date field into db, I did the following in my Perl to convert String to Date and it is working fine.</p>\n<pre><code>$res-&gt;{'createdate'} = strftime ('%d-%b-%y',localtime(str2time($res-&gt;{'createdate'})));\n</code></pre>\n<p>I have tried the same using insert query(Oracle)  like below, so I can remove the Perl conversion. It ends up with some error.</p>\n<p>For eg:</p>\n<pre><code>insert\ninto device_det (id, createdate)\nvalues (111111,TO_TIMESTAMP('Wed Aug 16 16:59:31 UTC 2017', 'YYYY-MM-DD'));\n</code></pre>\n<p>This gives error as below.</p>\n<pre><code>Error report -\nSQL Error: ORA-01841: (full) year must be between -4713 and +9999, and not be 0\n01841. 00000 -  &quot;(full) year must be between -4713 and +9999, and not be 0&quot;\n*Cause:    Illegal year entered\n*Action:   Input year in the specified range\n</code></pre>\n"}, {"tags": ["perl", "version", "cpan"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1503517920, "post_id": 45847929, "comment_id": 78654619, "body": "Attempting to install a module will not damage your Perl. If the module has tests, and they fail, it will simply not be installed. If its tests are not enough to detect an incompatibility with an old Perl version, the worst that can happen is that it&#39;s installed, and if you use it, your particular program will crash, not work or work in an unreliable way. But your Perl and all your other programs are not actually touched by that."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1503517146, "creation_date": 1503517146, "answer_id": 45848069, "question_id": 45847929, "link": "https://stackoverflow.com/questions/45847929/what-perl-version-does-a-cpan-module-require/45848069#45848069", "title": "What perl version does a CPAN module require?", "body": "<p>Check the <a href=\"http://matrix.cpantesters.org/?dist=Env-Modify+0.02\" rel=\"nofollow noreferrer\">CPAN Testers Matrix</a> for the distribution(s) you are interested in. If the module will build and pass its tests on a particular version of perl and a particular OS, this page will tell you.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1503519195, "last_edit_date": 1503519195, "creation_date": 1503517730, "answer_id": 45848190, "question_id": 45847929, "link": "https://stackoverflow.com/questions/45847929/what-perl-version-does-a-cpan-module-require/45848190#45848190", "title": "What perl version does a CPAN module require?", "body": "<p>If the distribution specified a minimum required version of Perl, it will be found in <code>-&gt;{prereqs}{runtime}{requires}{perl}</code> in the <code>META.json</code> or <code>META.yml</code> file found in the distribution. For example, <code>GFUJI/Mouse-v2.4.10</code> <a href=\"http://cpansearch.perl.org/src/GFUJI/Mouse-v2.4.10/META.json\" rel=\"nofollow noreferrer\">states</a> a dependency on Perl 5.8.5.</p>\n\n<p>Beyond that, you can view the results of volunteers that donate hardware and time to test every version of every module on CPAN. They are found in the <a href=\"http://matrix.cpantesters.org/\" rel=\"nofollow noreferrer\">CPAN Testers Matrix</a>. Both search.cpan.org and metacpan.org link to the test result matrix of each distribution.</p>\n\n<p><code>cpan</code> and <code>cpanm</code> will heed the minimum version found in the <code>META.json</code> or <code>META.yml</code>; they won't even try to install a module that's requires a newer <code>perl</code>. <code>cpan</code> and <code>cpanm</code> will also run the test suite the distribution provides. Only if the test suite passes without error will they install the distribution.</p>\n"}], "owner": {"reputation": 307, "user_id": 6850179, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b776cc6e5d6d16b4490da030c7a55bbd?s=128&d=identicon&r=PG&f=1", "display_name": "paulj", "link": "https://stackoverflow.com/users/6850179/paulj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1503519195, "creation_date": 1503516571, "question_id": 45847929, "link": "https://stackoverflow.com/questions/45847929/what-perl-version-does-a-cpan-module-require", "title": "What perl version does a CPAN module require?", "body": "<p>How would I know if a particular module is recommended for  use with my older Perl version? Does CPANM or CPAN have argument to check that everything that will be brought in is valid for the version of Perl in use?\nI have old version of Perl and am hesitant bringing in additional libraries.</p>\n"}, {"tags": ["git", "perl", "sqlite", "svn", "redhat"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1503512820, "creation_date": 1503512820, "answer_id": 45846970, "question_id": 45846652, "link": "https://stackoverflow.com/questions/45846652/issue-with-sqlite-while-installing-svncore/45846970#45846970", "title": "issue with sqlite while installing SVN::Core", "body": "<p><code>cpan</code> uses a fresh directory every time is runs an install (by default).</p>\n\n<p>After placing the <code>sqlite</code> files under <code>/root/.cpan/build/Alien-SVN-v1.8.11.0-XXX</code>, run the following commands:</p>\n\n<pre><code>cd /root/.cpan/build/Alien-SVN-v1.8.11.0-XXX\nperl Build.PL\n./Build\n./Build test\n./Build install   # If the tests passed.\n</code></pre>\n\n<p>Then, do <code>cpan SVN::Core</code> again.</p>\n"}], "owner": {"reputation": 305, "user_id": 3105533, "user_type": "registered", "accept_rate": 4, "profile_image": "https://www.gravatar.com/avatar/b1d9ee79af558abff38c8a813efe1232?s=128&d=identicon&r=PG&f=1", "display_name": "user3105533", "link": "https://stackoverflow.com/users/3105533/user3105533"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503512820, "creation_date": 1503511656, "question_id": 45846652, "link": "https://stackoverflow.com/questions/45846652/issue-with-sqlite-while-installing-svncore", "title": "issue with sqlite while installing SVN::Core", "body": "<p>I am trying to install SVN::Core in a Redhat 6 server, but every time I try to run cpan SVN::Core, it throws me an error that says:</p>\n\n<p>An appropriate version of sqlite could not be found.  We recommmend\n3.7.15.1, but require at least 3.7.12.\nPlease either install a newer sqlite on this system or get the sqlite 3.7.15.1 amalgamation from:\n    <a href=\"http://www.sqlite.org/sqlite-amalgamation-3071501.zip\" rel=\"nofollow noreferrer\">http://www.sqlite.org/sqlite-amalgamation-3071501.zip</a>\nunpack the archive using unzip and rename the resulting\ndirectory to: /root/.cpan/build/Alien-SVN-v1.8.11.0-9/src/subversion/sqlite-amalgamation</p>\n\n<p>The first time I tried to install it it told me to rename the sqlite file(sqlite-amalgamation-3071501) in the path: </p>\n\n<p>/root/.cpan/build/Alien-SVN-v1.8.11.0-1/</p>\n\n<p>the next time to the Alien-SVN-v1.8.11.0-2, </p>\n\n<p>the third time to 11.0-3, and it goes on and on. </p>\n\n<p>Before doing this I installed the Perl 5.18.2 and set the PERL5LIB with export PERL5LIB=/usr/local/lib. What can I do to fix this?</p>\n"}, {"tags": ["perl", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503512205, "post_id": 45845887, "comment_id": 78651665, "body": "Re &quot;<i><code>as_string</code> which tells me what request I just sent</i>&quot;, No, it doesn&#39;t. LWP::UserAgent meaning LWP::Protocol meaning LWP::Protocol::http meaning Net::HTTP does not use <code>-&gt;as_string</code>."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503513564, "post_id": 45845887, "comment_id": 78652417, "body": "I can&#39;t parse what you wrote.  Are you saying that the request eventually ends up at Net::HTTP, which is the one who really writes to the socket, but it writes whatever it wants and doesn&#39;t actually tell its caller what it wrote?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503513595, "post_id": 45845887, "comment_id": 78652433, "body": "Net::HTTP is the module doing the actual lifting when you use LWP::UserAgent. // Right."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503513673, "post_id": 45845887, "comment_id": 78652478, "body": "And does Net::HTTP &quot;save its work&quot; anywhere?  Surely it must, if the answer below is correct?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503513965, "post_id": 45845887, "comment_id": 78652636, "body": "No. Maybe some changes end up in the ::Request object, but definitely not all, which is why the answer below said to use a wire sniffer or a dummy server."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503514478, "post_id": 45845887, "comment_id": 78652917, "body": "hmm, pity I suppose.  Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 1, "creation_date": 1503511054, "post_id": 45846263, "comment_id": 78650978, "body": "Neato!  So, no easy way with just the stuff that comes with LWP though?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 1, "creation_date": 1503511369, "post_id": 45846263, "comment_id": 78651170, "body": "@MarkVY there is. Just take a look at the code of LWP::ConsoleLogger. It&#39;s quite simple actually. But it will give you the same thing I guess. You&#39;ll have a request object that you can convert to a string. I have a talk about how it works at TPCiA but the videos are not up yet."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503511875, "post_id": 45846263, "comment_id": 78651469, "body": "Okay, I think I see what you did here.  You make sure that every user agent gets created with a some handlers, and then these handlers are no-ops from the point of view of LWP, except that they inspect the request and response very carefully and log whatever they want to.  Neat!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503512039, "post_id": 45846263, "comment_id": 78651557, "body": "@MarkVY pretty much, yes. But mine is only the Everywhere part. The rest is all Olaf. Anyway, this module is a great addition for your tool box."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503512170, "post_id": 45846263, "comment_id": 78651637, "body": "Got it.  Wait, this is recent!  Like, you just did it this year!  Wow, nice timing I guess."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 1, "creation_date": 1503512365, "post_id": 45846263, "comment_id": 78651758, "body": "@MarkVY yeah, I was bored on a train. Needed something for drop in debugging with LWP, and after I built it I went to IRC to ask if it already existed. It did, so I added my stuff there. Olaf&#39;s work is great really."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1503510317, "creation_date": 1503510317, "answer_id": 45846263, "question_id": 45845887, "link": "https://stackoverflow.com/questions/45845887/find-out-how-an-lwp-request-was-sent-over-the-wire/45846263#45846263", "title": "find out how an LWP request was sent &quot;over the wire&quot;", "body": "<p>There's <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger::Everywhere\" rel=\"nofollow noreferrer\">LWP::ConsoleLogger::Everywhere</a><sup>1</sup>, which you can just load to get all the details of both the request as well as the response. The request will be taken right before it's sent over the wire, and the response from when it comes back.</p>\n\n<p>All you need to do is <code>use LWP::ConsoleLogger::Everywhere</code> anywhere in your code. If you want more control, the main module <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger\" rel=\"nofollow noreferrer\">LWP::ConsoleLogger</a> in that distribution will let you tweak settings easily.</p>\n\n<p>However, this is not the <em>real</em> data that goes over the wire. If you want to know what it receives, you need to either monitor the connection with something like <code>tcpdump</code> and then take a look at it (which is quite advanced networking stuff), or maybe change the endpoint to your own IP address, or simply <code>127.0.0.1</code>, and then use netcat to listen on a specific port.</p>\n\n<pre><code>$ nc -l 8080\n</code></pre>\n\n<p>If you send your request to that port, you'll see it in netcat.</p>\n\n<p><a href=\"https://i.stack.imgur.com/E2kUc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E2kUc.png\" alt=\"screenshot of terminal\"></a></p>\n\n<hr>\n\n<p><sup>1) Disclaimer: I'm a contributor for that module</sup></p>\n"}], "owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 45846263, "answer_count": 1, "score": 1, "last_activity_date": 1546572307, "creation_date": 1503509031, "question_id": 45845887, "link": "https://stackoverflow.com/questions/45845887/find-out-how-an-lwp-request-was-sent-over-the-wire", "title": "find out how an LWP request was sent &quot;over the wire&quot;", "body": "<p>If I send a request with LWP, there is a convenience function <code>as_string</code> which tells me what request I just sent.  Very handy, and in truth I have no problems with it.  Except that I just noticed that it is surely lying to me.  For instance, this code:</p>\n\n<pre><code>use v5.14.2;\nuse LWP;\nmy $response = LWP::UserAgent-&gt;new-&gt;get('http://user:pswd@example.com/');\nsay $response-&gt;request-&gt;as_string;\n</code></pre>\n\n<p>Gives this output</p>\n\n<pre><code>GET http://user:pswd@example.com/\nUser-Agent: libwww-perl/6.13\n</code></pre>\n\n<p>But surely the URL was not sent like that!  The library must have parsed out the username and password, and added the appropriate headers, and added a host header, and so on.  Is there an easy way to find out what was actually sent?</p>\n"}, {"tags": ["arrays", "perl", "subroutine", "bioperl"], "comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1503508679, "post_id": 45845651, "comment_id": 78649666, "body": "There&#39;s obviously something in <code>solve_multihit()</code> which modifies the input arrays (definitely <code>@gene_names</code>, possibly also <code>@gene_ids</code>), but we can only guess at what that &quot;something&quot; is without seeing what&#39;s in the sub. Is it maybe using <code>shift</code> or <code>pop</code> to access the contents of the array(s)?"}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1503508861, "post_id": 45845651, "comment_id": 78649765, "body": "I didn&#39;t know I could be modifying the imput! I&#39;ll add the sub to the post. Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503509222, "post_id": 45845651, "comment_id": 78649933, "body": "@zdim, Re &quot;<i>The function arguments are aliased, and if you change @_ you change them.</i>&quot;, Changing <code>@_</code> wouldn&#39;t have the decribed effect. Changing <code>@{ $_[1] }</code> would."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503510720, "post_id": 45845651, "comment_id": 78650768, "body": "@ikegami  Right, thank you. It was a rushed and clumsy &quot;fix&quot; of an initial comment which was imprecise to the point of being wrong. I&#39;m removing the comment.  thank you"}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1503511911, "post_id": 45845956, "comment_id": 78651490, "body": "Thanks for the quick response but I missing something... How can I access the elements in $gene_names after storing it like that? a quick debug over the @_ values shows this:  \t\tforeach my $var (values @_){ \t\t\t \t\t\t\tprint STDERR $var.&quot;\\n&quot;;\t \t\t \t\t}  BBOV_I001860 | ARRAY(0x3fa6180) &lt;--- gene_names | ARRAY(0x3fa5898) &lt;--- gene_ids | bbo | bbo | omcl |"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1503521219, "post_id": 45845956, "comment_id": 78656194, "body": "@LionelUranLandaburu Then you work with an <i>arrayref</i>.  You can access an element by <code>$$arrayref[0]</code> or by <code>$arrayref-&gt;[0]</code> (better when code is more complex).  You can iterate by, say,  <code>for my $elem (@$arrayref) { ... }</code>.  Etc.  I&#39;d suggest to <i>not use <code>@_</code> directly</i>.  Just say &#39;no&#39;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1503521576, "post_id": 45845956, "comment_id": 78656374, "body": "@LionelUranLandaburu  Btw, the <code>values</code> that you use had been intended to return values of a hash, and had until v5.12 only worked with a hash. Using it with an array may cause confusion. More importantly, if you want values of an array it&#39;s enough to say <code>foreach my $var (@array)</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1503523459, "post_id": 45845956, "comment_id": 78657179, "body": "@LionelUranLandaburu  When you do <code>\\@data</code> you take a <i>reference</i> to the array, getting a scalar variable much like a pointer. That reference is what you pass to your sub.  Then you need to <i>dereference</i> it in order to access the elements, and my comment above is about that.  See <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perfreftut</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1503562301, "post_id": 45845956, "comment_id": 78670481, "body": "@LionelUranLandaburu  Added an example of how to access arrayref elements."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1503651495, "last_edit_date": 1503651495, "creation_date": 1503509250, "answer_id": 45845956, "question_id": 45845651, "link": "https://stackoverflow.com/questions/45845651/perl-array-goes-empty-after-passing-it-to-a-function/45845956#45845956", "title": "Perl: array goes empty after passing it to a function?", "body": "<p>I can see two ways for your code to accomplish the data removal that it seems to be doing.</p>\n\n<p>The function arguments available in <code>@_</code> are aliased to data passed to it.  So if you change <code>@_</code> itself (or its elements) you change the data outside of the function. </p>\n\n<p>More likely, as you are passing by reference, your sub probably works directly with it</p>\n\n<pre><code>sub ff {\n    my ($rary) = @_;\n    @$rary = ();\n}\n\nmy @data = 1..4;\n\nff(\\@data);\n\nsay for @data;  # empty\n</code></pre>\n\n<p>If your processing needs to change the array it works with then make a local copy first</p>\n\n<pre><code>sub ff { \n    my ($rary) = @_;\n    my @local_ary = @$ary;\n    # now changes to @local_ary do not affect @data in the caller\n}\n</code></pre>\n\n<p>This is generally safer, while it does introduce a data copy which doesn't happen when working with the reference. </p>\n\n<hr>\n\n<p>The edit together with ikegami's answer clears this up: <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\">splice</a> is destructive to the array it works with and here by curious syntax it's fed an anonymous array formed out of a dereferenced <code>@_</code> argument, whereby it changes the data in the caller.</p>\n\n<p>There is no reason for <code>splice</code> in what you do.  Its purpose <em>is</em> to change the array.</p>\n\n<p>Instead, use arrayrefs that are passed to the sub</p>\n\n<pre><code>sub solve_multihit {\n    my ($id, $gene_names, $gene_ids, ...) = @_;\n    foreach my $name (@$gene_names) {\n        ...\n    }\n    ...\n}\n</code></pre>\n\n<p>or make a local copy if you wish</p>\n\n<pre><code>sub solve_multihit { \n    my $id = shift;\n    my @gene_names = @{ shift @_ };\n    ...\n}\n</code></pre>\n\n<p>where <code>my @gene_names</code> is a lexical variable in this scope (the sub in your case ) and changes to it do not affect the one with the same name in the calling scope.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1503545668, "last_edit_date": 1503545668, "creation_date": 1503509937, "answer_id": 45846161, "question_id": 45845651, "link": "https://stackoverflow.com/questions/45845651/perl-array-goes-empty-after-passing-it-to-a-function/45846161#45846161", "title": "Perl: array goes empty after passing it to a function?", "body": "<pre><code>my @gene_names = splice(shift);\nmy @gene_ids   = splice(shift);\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>my @gene_names = splice(@{ shift(@_) });\nmy @gene_ids   = splice(@{ shift(@_) });\n</code></pre>\n\n<p><code>splice(@a)</code> empties the array and returns its contents. There's no reason to do that! The above should be</p>\n\n<pre><code>my @gene_names = @{ shift(@_) };\nmy @gene_ids   = @{ shift(@_) };\n</code></pre>\n\n<p>Honestly, there's no need to make a copy of the array. Just use the provided reference.</p>\n\n<pre><code>my $gene_names = shift;\nmy $gene_ids   = shift;\n</code></pre>\n\n<p>I'd provide a fixed-up version of <code>solve_multihit</code>, but it has numerous major problems I can't fix with the information I have.</p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 45845956, "answer_count": 2, "score": 0, "last_activity_date": 1503651495, "creation_date": 1503508111, "last_edit_date": 1503511162, "question_id": 45845651, "link": "https://stackoverflow.com/questions/45845651/perl-array-goes-empty-after-passing-it-to-a-function", "title": "Perl: array goes empty after passing it to a function?", "body": "<p>I'm working on a project that's scalating a lot, lately, and I'm re-writing code to make it more OOP and passing all redundant code into sub-routines.</p>\n\n<p>The script checks whether a gene exists in the database (through various means) or not. It may also report possible duplicates. Before reporting a duplicate, the script makes sure it's not a \"biological duplicate\" (essentially the same biological data but a with different position in the genome and, hence, not an actual duplicate). In order to do so... </p>\n\n<pre><code> my @gene_ids;\n my @gene_names;                                \n\n while(my $gene = $geners_bychecksum-&gt;next){\n\n        my $gene_name = $gene-&gt;gene_name;\n        my $gene_id = $gene-&gt;gene_id;\n\n        push @gene_ids, $gene_id;\n        push @gene_names, $gene_name;\n\n\n    }\n\n    print STDERR \"$id\\tJ\\tALERT CHECKSUM MULTI-HIT\\t(\".join(\",\",@gene_names).\")\\n\"; \n    my $solve_multihit = solve_multihit($id, \\@gene_names, \\@gene_ids, $spc, $species_directory, $dataset);\n    print STDERR \"$id\\tJ\\tALERT CHECKSUM MULTI-HIT\\t(\".join(\",\",@gene_names).\")\\n\"; \n\n    if($solve_multihit){\n\n        print STDERR \"$id\\tM\\tUPDATE \\n\";   \n        print $report \"$id\\tM\\tUPDATE \\n\";  \n        $countM++;                                                                              \n\n    } else {\n\n        print STDERR \"$id\\tJ\\tALERT CHECKSUM MULTI-HIT\\t(\".join(\",\",@gene_names).\")\\n\"; \n\n    }\n</code></pre>\n\n<p>Here, <code>$geners_bychecksum</code> is a DBIC resulset with database hits from a prior search and, for this case-scenario, it always has more than 1 gene. The <code>$id</code>,<code>$spc</code>,<code>$species_directory</code> and <code>$dataset</code> are all strings that come from the config and are defined above this chunk. </p>\n\n<p>The <code>solve_multihit</code> subroutine is a rather complicated function that tries to resolve whether the multi-hits are actual duplicates or biological duplicates. Notice that I'm passing the <code>@gene_names</code> and <code>@gene_ids</code> arrays to this function. This function will return the gene_id of the proper gene, if it was able to solve the discrepancy; or 0 if not. Simplified code for the sub can be found in the following link</p>\n\n<p><a href=\"https://codeshare.io/2EM8qN\" rel=\"nofollow noreferrer\">https://codeshare.io/2EM8qN</a></p>\n\n<p><strong>THE ACTUAL QUESTION</strong></p>\n\n<p>You may have noticed that the </p>\n\n<p><code>print STDERR \"$id\\tJ\\tALERT CHECKSUM MULTI HIT\\t(\".join(\",\",@gene_names).\")\\n\";</code> </p>\n\n<p>is both before and after the <code>solve_multihit</code> subroutine call... and the array seems to go empty after running the function, according to the STDERR:</p>\n\n<pre><code>BBOV_I005030    J   ALERT CHECKSUM MULTI-HIT    (XP_001609152.1,XP_001609157.1)\nBBOV_I005030    J   ALERT CHECKSUM MULTI-HIT    ()\nBBOV_I005040    J   ALERT CHECKSUM MULTI-HIT    (XP_001609156.1,XP_001609153.1)\nBBOV_I005040    J   ALERT CHECKSUM MULTI-HIT    ()\nBBOV_I005050    J   ALERT CHECKSUM MULTI-HIT    (XP_001609154.1,XP_001609155.1)\nBBOV_I005050    J   ALERT CHECKSUM MULTI-HIT    ()\nBBOV_I005060    J   ALERT CHECKSUM MULTI-HIT    (XP_001609154.1,XP_001609155.1)\nBBOV_I005060    J   ALERT CHECKSUM MULTI-HIT    ()\nBBOV_I005070    J   ALERT CHECKSUM MULTI-HIT    (XP_001609156.1,XP_001609153.1)\nBBOV_I005070    J   ALERT CHECKSUM MULTI-HIT    ()\nBBOV_I005080    J   ALERT CHECKSUM MULTI-HIT    (XP_001609152.1,XP_001609157.1)\nBBOV_I005080    J   ALERT CHECKSUM MULTI-HIT    ()\n</code></pre>\n\n<p>Why would that happen? I'm pretty sure I could solve it by returning the arrays along with the results of the <code>solve_multihit{}</code> sub, but I wonder why would it go empty. </p>\n\n<p>PS: The <strong>J</strong> in the report is just a case-scenario key code. </p>\n"}, {"tags": ["regex", "perl", "pcre", "trace"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503506458, "post_id": 45842317, "comment_id": 78648433, "body": "On a related note, a module of interest is <a href=\"http://search.cpan.org/perldoc?YAPE::Regex::Explain\" rel=\"nofollow noreferrer\">YAPE::Regex::Explain</a>, a module that &quot;explains&quot; (breaks down and annotates with comments) regular expression patterns."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1503506983, "post_id": 45843427, "comment_id": 78648722, "body": "If you don&#39;t feel like editing the script, you can enable it using <code>PERL5OPT=-Mre=debug script.pl</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 8, "last_activity_date": 1503500951, "creation_date": 1503500951, "answer_id": 45843427, "question_id": 45842317, "link": "https://stackoverflow.com/questions/45842317/how-to-trace-the-execution-of-a-regex-matching/45843427#45843427", "title": "How to trace the execution of a regex matching?", "body": "<p>Yes. Turn the regex engine into debug mode and it'll print what it's doing:</p>\n\n<pre><code>use re 'debug'; \n\nmy $str = \"abcdefg\";\n$str =~ m/[ef]+/;\n</code></pre>\n\n<p>Which gives an output of:</p>\n\n<pre><code>Compiling REx \"[ef]+\"\nFinal program:\n   1: PLUS (13)\n   2:   ANYOF[ef] (0)\n  13: END (0)\nstclass ANYOF[ef] plus minlen 1 \nMatching REx \"[ef]+\" against \"abcdefg\"\nMatching stclass ANYOF[ef] against \"abcdefg\" (7 bytes)\n   4 &lt;abcd&gt; &lt;efg&gt;            |  1:PLUS(13)\n                                  ANYOF[ef] can match 2 times out of 2147483647...\n   6 &lt;abcdef&gt; &lt;g&gt;            | 13:  END(0)\nMatch successful!\nFreeing REx: \"[ef]+\"\n</code></pre>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 45843427, "answer_count": 1, "score": 4, "last_activity_date": 1503502839, "creation_date": 1503497859, "question_id": 45842317, "link": "https://stackoverflow.com/questions/45842317/how-to-trace-the-execution-of-a-regex-matching", "title": "How to trace the execution of a regex matching?", "body": "<p>Is there a convenient way to get a <em>trace</em> of the regex engine's states during the evaluation of a <code>m//</code> or <code>s///</code> expression?</p>\n\n<hr>\n\n<p>BTW, I'm aware of that there is a <a href=\"http://search.cpan.org/~dconway/Regexp-Debugger-0.002000/lib/Regexp/Debugger.pm\" rel=\"nofollow noreferrer\">Regexp::Debugger package</a> available through CPAN (and it <em>is</em> amazingly cool), but I don't see a way to get anything like a trace from it; I don't want to step through a potentially huge number of steps.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1503501908, "last_edit_date": 1503501908, "creation_date": 1503495455, "answer_id": 45841348, "question_id": 45841066, "link": "https://stackoverflow.com/questions/45841066/pass-array-by-value-to-hash-value-in-perl/45841348#45841348", "title": "Pass array by value to hash value in Perl?", "body": "<p>A hash maps strings (keys) to scalar values. A value in a hash can only ever be a scalar.</p>\n\n<p>An array is not (by definition!) a scalar. The best way to get a scalar value which represents that array is to take the reference to that array. And that's what your code does. This is how you should do it.</p>\n\n<p>There are other ways to create a scalar value to represent an array. You could, for example, use <code>join()</code> to create a string from the elements of the array. But that would be very fragile as you would need to find a separator character that doesn't appear in any of the elements.</p>\n\n<p>Far better to just take a reference as you are already doing.</p>\n\n<p><strong>Update:</strong> To clarify, there are three way to do this with references.</p>\n\n<ul>\n<li><code>$hash{key} = \\@array</code> - takes a reference to the array and stores the reference in <code>$hash{key}</code>.</li>\n<li><code>$hash{key} = [ @array ]</code> - unrolls the array into a list, creates a new array using that list as the elements and returns a reference to this new array (effectively copying the array).</li>\n<li><code>@{$hash{key}} = @array</code> - this also takes a copy of the array and stores a  reference to the copy.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499191, "post_id": 45842683, "comment_id": 78643326, "body": "That syntax works. And, as you can see, it does exactly the same thing as <code>$hash{key} = \\@list</code>. But which option is easier to understand? <code>@{ $hash{key} }</code> looks pretty noisy to me :-)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1503499391, "post_id": 45842683, "comment_id": 78643500, "body": "@DaveCross I don&#39;t think it is quite the same as it&#39;s copying the array"}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499420, "post_id": 45842683, "comment_id": 78643529, "body": "@DaveCross thanks for clearing it up. i edited the answer to reflect why i prefer my syntax"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503499733, "post_id": 45842683, "comment_id": 78643780, "body": "@ChrisTurner: Yes. you&#39;re right. <code>@{$hash{key}} = @array</code> is the same as <code>$hash{key} = [ @array ]</code>, but (slightly) different to <code>$hash{key} = \\@array</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499767, "post_id": 45842683, "comment_id": 78643819, "body": "@Nullman: <code>@list</code> is a terrible name for that variable. It&#39;s an array, not a list :-)"}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499841, "post_id": 45842683, "comment_id": 78643887, "body": "@DaveCross 99% of my points are from answering about  python, i got used to writing &quot;list&quot; :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499859, "post_id": 45842683, "comment_id": 78643907, "body": "@Nullman: If you want a copy, just use <code>[@array]</code> instead of <code>\\@array</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499891, "post_id": 45842683, "comment_id": 78643932, "body": "@Nullman: In Perl, lists and arrays are very different things."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503499930, "post_id": 45842683, "comment_id": 78643963, "body": "@DaveCross yes, but what about things like push/pop? i would prefer a uniform syntax to avoid confusing the next guy (and myself in x years)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503506006, "post_id": 45842683, "comment_id": 78648166, "body": "<code>@{ $hash{key} } = @array;</code> implies the array already exists, so it has poor readability. <code>$hash{key} = \\@array;</code> is far more readable in that situation."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503507286, "post_id": 45842683, "comment_id": 78648906, "body": "@ikegami as ChrisTurner pointed out, those two are not the same."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "edited": false, "score": 0, "creation_date": 1503507367, "post_id": 45842683, "comment_id": 78648959, "body": "but the poster specifically asked <code>if one wants to pass an array as a value</code>, which my answer is"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503507484, "post_id": 45842683, "comment_id": 78649021, "body": "I was commenting on your comment that <code>@{ $hash{key} } = @array;</code> is better than <code>$hash{key} = \\@array;</code> <i>for reasons of readability</i>. /// Even if you want to make a copy, <code>@{ $hash{key} } = @array;</code> is not as clear as <code>$hash{key} = [ @array ];</code> (shallow copy) or <code>$hash{key} = dclone(\\@array);</code> (deep copy)."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503507672, "post_id": 45842683, "comment_id": 78649115, "body": "@ikegami this is true, but i personally prefer not to mix syntax int he same script and <code>@{ $hash{key} }</code> lets me push/pop"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503507718, "post_id": 45842683, "comment_id": 78649137, "body": "It&#39;s unfortunate that you don&#39;t strive for readable code instead :( That&#39;s the core of good programming. Readable code is maintainable code, verifiable code, etc, etc, etc. Different things should look different."}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503508022, "post_id": 45842683, "comment_id": 78649287, "body": "@ikegami lets agree to disagree. i have updated my answer to reflect both syntaxes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503508100, "post_id": 45842683, "comment_id": 78649326, "body": "Re &quot;<i>lets agree to disagree</i>&quot;, I&#39;m confused?!? You just agreed in your previous comment! (&quot;<i>[<code>@{ $hash{key} } = @array;</code> is not as clear as <code>$hash{key} = [ @array ];</code>] is true</i>&quot;)"}, {"owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503508225, "post_id": 45842683, "comment_id": 78649394, "body": "@ikegami i disagree that mixing syntaxes to access the same thing is more readable, but i do agree that, on its own, [@array] is more readable, and it IS a correct answer in any case so i added it to my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503508384, "post_id": 45842683, "comment_id": 78649494, "body": "Using <code>@{ $hash{key} } = @array;</code> near <code>push @{ $hash{key} }, ...;</code> actually makes <code>@{ $hash{key} } = @array;</code> <i>even less readable</i> than if it wasn&#39;t near <code>push @{ $hash{key} }, ...;</code> and the proximity actually reinforces the incorrect implication that the array already exists. Maybe you don&#39;t understand what &quot;readability&quot; means? It means the ease by which the intention of the code is understood. By camouflaging one thing as another, you are reducing readability. One might even say &quot;intentionally misleading&quot;! That&#39;s the very opposite of readability."}], "tags": [], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "is_accepted": false, "score": 0, "last_activity_date": 1503507757, "last_edit_date": 1503507757, "creation_date": 1503498886, "answer_id": 45842683, "question_id": 45841066, "link": "https://stackoverflow.com/questions/45841066/pass-array-by-value-to-hash-value-in-perl/45842683#45842683", "title": "Pass array by value to hash value in Perl?", "body": "<p>The following works for me just fine under perl 5.10 and 5.14:</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\n\nmy @array= qw(foo 42 bar);\nmy %hash;\n@{ $hash{key} } = @array;\n$hash{key} = [ @array ]; #same as above line\nprint Dumper(\\%hash,$hash{key}[1]);\n</code></pre>\n\n<p>outputs (your order may vary):</p>\n\n<pre><code>$VAR1 = {\n          'key' =&gt; [\n                     'foo',\n                     '42',\n                     'bar'\n                   ]\n        };\n$VAR2 = '42';\n</code></pre>\n\n<p>I prefer the <code>@{ $hash{key} }</code> syntax because you can push/pop with it, i.e.</p>\n\n<pre><code>push @{ $hash{key} }, \"value\";\n</code></pre>\n\n<p>which is surprisingly handy (for me anyway)<br>\nalso, with this syntax you are copying the array and not just putting a reference to it, meaning you can change the original array without impacting the hash</p>\n"}], "owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 45841348, "answer_count": 2, "score": 1, "last_activity_date": 1503507757, "creation_date": 1503494727, "question_id": 45841066, "link": "https://stackoverflow.com/questions/45841066/pass-array-by-value-to-hash-value-in-perl", "title": "Pass array by value to hash value in Perl?", "body": "<p>I am a newbie in Perl and trying out few stuffs.One thing I noticed is if one wants to pass an array as a value of a hashmap key one way of doing it is to pass it by reference. As follows</p>\n\n<pre><code>$hash_map{key} = \\@arr\n</code></pre>\n\n<p>Is there any way to pass the array by value directly?\nThanks</p>\n"}, {"tags": ["linux", "bash", "shell", "perl", "docker"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 3, "creation_date": 1503490172, "post_id": 45839283, "comment_id": 78635803, "body": "Try to remove <code>-i</code> ?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1503490580, "post_id": 45839283, "comment_id": 78636100, "body": "Please try to narrow it down. Does it work outside of a shell script? If not, it&#39;s a problem the command and not with &quot;perl -p -i -e inside a shell script&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503501608, "post_id": 45839283, "comment_id": 78645199, "body": "<code>.</code> has a special meaning in regex patterns. I&#39;m pretty sure <code>x.xx.xx.y</code> should be <code>x\\.xx\\.xx\\.y</code>."}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 1, "creation_date": 1503502028, "post_id": 45839283, "comment_id": 78645470, "body": "<b>First</b> Why are you using <code>grep</code> just for checking before <b>Perl</b> that wants to substitute your pattern? (= in place if <code>if</code>) |  <b>Second</b> <code>-i</code> is for <b>edit-in-place</b> and it needs a file name for getting a backup of your file: <code>-i.bck</code> and <code>i</code> here is the name of your input file."}], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1503492954, "post_id": 45839440, "comment_id": 78638000, "body": "I don&#39;t see any data being piped to the <code>perl</code> command; rather I see an <i>expected</i> list of file names produced by the <code>grep</code> command, which may not produce any output."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1503494066, "post_id": 45839440, "comment_id": 78638922, "body": "@chepner: You&#39;re absolutely right, of course. See my update."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1503501380, "post_id": 45839440, "comment_id": 78645037, "body": "If it&#39;s possible for <code>grep</code> to return an empty list, you could use <code>grep -ril y.yy.yy.y * | xargs perl -pe&#39;s&#47;x.xx.xx.y&#47;dd.dd.ddd.dd&#47;g&#39;</code> or <code>find . -type f -exec perl -i -0777pe&#39;s&#47;x.xx.xx.y&#47;dd.dd.ddd.dd&#47;g if &#47;y\\.yy\\.yy\\.y&#47;i&#39; {} +</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1503501209, "last_edit_date": 1503501209, "creation_date": 1503490474, "answer_id": 45839440, "question_id": 45839283, "link": "https://stackoverflow.com/questions/45839283/perl-p-i-e-inside-a-shell-script/45839440#45839440", "title": "perl -p -i -e inside a shell script", "body": "<p>Let's look at this a step at a time. First, you're running this <code>grep</code> command:</p>\n\n<pre><code>grep -ril y.yy.yy.y *\n</code></pre>\n\n<p>This recursively searches all files and directories in your current directory. It looks for files containing the string \"y.yy.yy.yy\" in any case and returns a list of the files which contain this text.</p>\n\n<p>This command will return either a list of filenames or nothing.</p>\n\n<p>Whatever is returned from that <code>grep</code> command is then passed as arguments to your Perl command:</p>\n\n<pre><code>perl -p -i -e 's/x.xx.xx.y/dd.dd.ddd.dd/g' [list of filenames]\n</code></pre>\n\n<p>If <code>grep</code> returns a list of files, then the <code>-p</code> option here means that each line in every file in the list is (in turn) run through that substitution and then printed to a new file. The <code>-i</code> means there's one new file for each old file and the new files are given the same names as the old files (the old files are deleted once the command has run).</p>\n\n<p>So far so good. But what happens if the <code>grep</code> doesn't return any filenames? In that case, your Perl command doesn't get any filenames and that would trigger the error that you are seeing.</p>\n\n<p>So my (second) guess is that your <code>grep</code> command isn't doing what you want it to and is returning an empty list of filenames. Try running the <code>grep</code> command on its own and see what you get.</p>\n"}], "owner": {"reputation": 1580, "user_id": 3597679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1363044677/picture?type=large", "display_name": "Raza Rafaideen", "link": "https://stackoverflow.com/users/3597679/raza-rafaideen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 45839440, "answer_count": 1, "score": 1, "last_activity_date": 1503501209, "creation_date": 1503490054, "last_edit_date": 1503490264, "question_id": 45839283, "link": "https://stackoverflow.com/questions/45839283/perl-p-i-e-inside-a-shell-script", "title": "perl -p -i -e inside a shell script", "body": "<pre><code>#!/usr/bin/env bash\nDOCUMENT_ROOT=/var/www/html/\n\nrm index.php\ncd modules/mymodules/\n\nperl -p -i -e 's/x.xx.xx.y/dd.dd.ddd.dd/g' `grep -ril y.yy.yy.y *`\n</code></pre>\n\n<p>shows shows a warning </p>\n\n<pre><code>-i used with no filenames on the command line, reading from STDIN.\n</code></pre>\n\n<p>It prevents running rest of the scripts. </p>\n\n<p>Any solutions ?</p>\n\n<p>Actually I need to run </p>\n\n<pre><code>perl -p -i -e 's/x.xx.xx.y/dd.dd.ddd.dd/g' `grep -ril y.yy.yy.y *`\nInside a shell script\n</code></pre>\n\n<p><em>I am using ubuntu with docker.</em></p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1503487674, "post_id": 45838323, "comment_id": 78633918, "body": "Means what it says. Nothing listening on that socket. Probably because the default socket port for <code>mongod</code> is <code>27017</code> unless you specifically asked the server to start on a different port. So it looks like your client is trying to connect to the wrong port."}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1503487863, "post_id": 45838323, "comment_id": 78634065, "body": "No, In that case it should fail for everything but what is happening is suppose it is giving the count for ABC , DEF and then it starts failing"}], "answers": [{"tags": [], "owner": {"reputation": 34626, "user_id": 8200937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5h9EI.png?s=128&g=1", "display_name": "glytching", "link": "https://stackoverflow.com/users/8200937/glytching"}, "is_accepted": true, "score": 0, "last_activity_date": 1503487985, "creation_date": 1503487985, "answer_id": 45838564, "question_id": 45838323, "link": "https://stackoverflow.com/questions/45838323/mongodbnetworktimeout-timed-out-while-waiting-for-socket-to-become-ready-for/45838564#45838564", "title": "MongoDB::NetworkTimeout: Timed out while waiting for socket to become ready for reading", "body": "<p>You can set the connect and socket timeouts via the connection string as follows:</p>\n\n<pre><code>MongoDB-&gt;connect('mongodb://user:pass@localhost:27012/test_db?connectTimeoutMS=...;socketTimeoutMS=...')\n</code></pre>\n\n<p>The MongoDB Perl driver also allows you to set timeouts via the <a href=\"https://metacpan.org/pod/MongoDB#connect\" rel=\"nofollow noreferrer\">connect</a> method (more details <a href=\"https://metacpan.org/pod/MongoDB::MongoClient#ATTRIBUTES\" rel=\"nofollow noreferrer\">here</a>).</p>\n"}], "owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 45838564, "answer_count": 1, "score": 0, "last_activity_date": 1503487985, "creation_date": 1503487213, "question_id": 45838323, "link": "https://stackoverflow.com/questions/45838323/mongodbnetworktimeout-timed-out-while-waiting-for-socket-to-become-ready-for", "title": "MongoDB::NetworkTimeout: Timed out while waiting for socket to become ready for reading", "body": "<p>I have perl script to run mongo query. </p>\n\n<pre><code>    #!/usr/bin/perl \n        use strict;\n        use warnings;\n        use MongoDB;\n        use Data::Printer;\n        use MongoDB::QueryResult;\n\n        my $mc   = MongoDB-&gt;connect('mongodb://user:pass@localhost:27012/test_db');\n        my $coll = $mc-&gt;ns(\"test_db.collection1\");\n\n        my @permissibleCars =\n         (\"ABC\",\"DEF\",\"XYZ\",\"MNO\",\"PQR\"); \n        my @pipeline = (\n            {\n                '$match' =&gt; {\n                    \"Contract\"        =&gt; { '$in' =&gt; \\@permissibleCars },\n                    \"Class\" =&gt; \"Right\"\n                    }\n            },\n            { '$group' =&gt; { _id =&gt; '$Contract', count =&gt; { '$sum' =&gt; 9 } } }\n        );\n\n        my $res = $coll-&gt;aggregate( \\@pipeline, { allowDiskUse =&gt; 1 } );\n\n        # query &amp; iterate\n            while (my $row = $res-&gt;next) {\n            # it is 'p', from Data::Printer!\n            p $row;\n        } \n</code></pre>\n\n<p>It randomly keeps failing with below error :--</p>\n\n<pre><code>MongoDB::NetworkTimeout: Timed out while waiting for socket to become ready for reading\n</code></pre>\n\n<p>Now, from what I read we need to change socketTimeoutMS value to something larger. But I am not sure where do I set it ? </p>\n\n<p>Also, maxTimeMS  or maxPoolSize will help in this scenario ? The field @permissibleCars may have around 10K records.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["perl", "string-interpolation"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1503464744, "post_id": 45830924, "comment_id": 78619353, "body": "This is called &quot;string interpolation.&quot; A google search revealed <a href=\"https://perlmaven.com/quoted-interpolated-and-escaped-strings-in-perl\" rel=\"nofollow noreferrer\">this link</a>."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1503465671, "post_id": 45830924, "comment_id": 78619709, "body": "<code>print &quot;dereferenced single element array interpolation: @{[ 11+1 ]}&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1503467230, "post_id": 45831009, "comment_id": 78620308, "body": "(I changed the example, which indeed used <code>$x+$y</code> per ysth comment)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1503467861, "post_id": 45831009, "comment_id": 78620548, "body": "People more commonly use <code>&quot;Result: @{[ $x + $y ]}&quot;</code>, which is prettier.  Or even more commonly use a temporary variable.  sprintf also has its advocates and its place."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503511982, "post_id": 45831009, "comment_id": 78651532, "body": "The downside of <code>@{[ ... ]}</code>: Compare <code>&quot;${\\( localtime )}&quot;</code> with <code>&quot;@{[ localtime ]}&quot;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503520836, "post_id": 45831009, "comment_id": 78656008, "body": "@ikegami Ah, thank you!  I need to mention context and this is the right example (it would be wrong!). Added.  Interestingly, I get <code>1</code> from <code>&quot;${\\( localtime )}&quot;</code> (v5.10 and v5.16), while with for example <code>$_ = q(ah,no,way); say &quot;${\\( m&#47;(\\w+)&#47;g )}&quot;</code> I get the last word.  I guess it&#39;s just wrong to allow a list in there."}, {"owner": {"reputation": 630, "user_id": 1121933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aDKbl.jpg?s=128&g=1", "display_name": "Jair L&#243;pez", "link": "https://stackoverflow.com/users/1121933/jair-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1503763756, "post_id": 45831009, "comment_id": 78753436, "body": "And this is OK. Say we have <code>my @tmp = m&#47;(\\w+)&#47;g;</code>, then <code>${\\( m&#47;(\\w+)&#47;g )}</code> is equivalent to <code>${\\$tmp[0], \\$tmp[1], \\$tmp[2]}</code> because <code>\\(@tmp)</code> returns a list of references to the content of <code>@tmp</code> not a reference to <code>@tmp</code> itself (see the 2nd bullet in <code>Making References</code> in <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\"><code>perldoc perlref</code></a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 630, "user_id": 1121933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aDKbl.jpg?s=128&g=1", "display_name": "Jair L&#243;pez", "link": "https://stackoverflow.com/users/1121933/jair-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1503797566, "post_id": 45831009, "comment_id": 78760830, "body": "@JairL&#243;pez  Good point with <code>\\(LIST)</code>, what I didn&#39;t think of here. Thank you for the explanation.  (And the last item in <code>localtime</code> list is whether it is DST now, which it is, thus <code>1</code>.).  Added."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 11, "last_activity_date": 1571115943, "last_edit_date": 1571115943, "creation_date": 1503464797, "answer_id": 45831009, "question_id": 45830924, "link": "https://stackoverflow.com/questions/45830924/how-to-run-code-inside-a-string-equivalent-to-rubys/45831009#45831009", "title": "How to run code inside a string (equivalent to Ruby&#39;s #{})", "body": "<p>From <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">Using references in perlref</a></p>\n\n<blockquote>\n  <p>Anywhere you'd put an identifier (or chain of identifiers) as part of a variable or subroutine name, you can replace the identifier with a simple scalar variable containing a reference of the correct type<br>\n  ...<br>\n  Anywhere you'd put an identifier (or chain of identifiers) as part of a variable or subroutine name, you can replace the identifier with a BLOCK returning a reference of the correct type.</p>\n</blockquote>\n\n<p>So</p>\n\n<pre><code>perl -Mstrict -wE'my $x = 2.6; say \"Integer part: ${ \\( int $x ) }\"'\n</code></pre>\n\n<p>where you can run code returning a scalar inside <code>\\(...)</code> that takes its reference, then <code>${...}</code> dereferences it. Similarly you can generate an arrayref and use <code>@{...}</code> around it</p>\n\n<pre><code>perl -Mstrict -wE'$_ = q(silly,it,is); say \"Got: @{ [ /(\\w+)/g ] }\"'\n</code></pre>\n\n<p>and similary for a hash. But then this goes with an expression returning a scalar as well</p>\n\n<pre><code>perl -wE'say \"$_ squared: @{[ $_**2 ]}\" for 1..10'\n</code></pre>\n\n<p>which is nicer and is more \"commonly\" used. Thanks to <a href=\"https://stackoverflow.com/users/17389/ysth\">ysth</a> for a comment.</p>\n\n<p>Keep in mind that <code>[ ]</code> imposes the list <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a>, where the return often differs from the one in scalar context (and <code>\\(LIST)</code> is wrong on other accounts<sup>&dagger;</sup>).  A good example is <a href=\"http://perldoc.perl.org/functions/localtime.html\" rel=\"nofollow noreferrer\">localtime</a>. The scalar return can be enforced by <code>[scalar localtime]</code>. Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for a comment.</p>\n\n<p>Watch that you don't get dragged into using <a href=\"https://perldoc.perl.org/perlref.html#Symbolic-references\" rel=\"nofollow noreferrer\">symbolic references</a> though. Also see <a href=\"http://perldoc.perl.org/perlfaq7.html#How-can-I-use-a-variable-as-a-variable-name%3f\" rel=\"nofollow noreferrer\">that in perlfaq7</a>.</p>\n\n<p>This assumes that you are thinking of code in <code>{...}</code> being a part of a string.  If you want to have a string and execute what it contains as code, that's what <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval EXPR</a> does.\nBut please note that there are always better ways to do what you need. </p>\n\n<p>A few examples</p>\n\n<pre><code>my $str = sprintf \"Squared: %6.3f\", $x**2;\nmy $str = \"He said: \" . join ' ', split /,/, 'yes,it,is';  #/\nsay \"Variable is: \", ( $x // 'undef');\n</code></pre>\n\n<p>or use a <code>do { ... };</code> to evaluate any code in a well restricted scope and return the result, which can then be joined or concatenated with other strings.</p>\n\n<p>The topic is discussed <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-expand-function-calls-in-a-string?\" rel=\"nofollow noreferrer\">in perlfaq4</a> and at the end of the <code>perlref</code> section linked on top of this post.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> In <code>\\(LIST)</code> the reference is taken to every element of the list, <code>perl -wE'say for \\(1,2)'</code>. Then the comma operator in the scalar context does its thing, discarding left-hand-side operands one after another and <code>${ \\(LIST) }</code> ends up serving the last element of the list.</p>\n"}, {"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": false, "score": 2, "last_activity_date": 1503486195, "creation_date": 1503486195, "answer_id": 45837926, "question_id": 45830924, "link": "https://stackoverflow.com/questions/45830924/how-to-run-code-inside-a-string-equivalent-to-rubys/45837926#45837926", "title": "How to run code inside a string (equivalent to Ruby&#39;s #{})", "body": "<p>If you're allowed to use CPAN, <a href=\"https://metacpan.org/pod/Quote::Code\" rel=\"nofollow noreferrer\">Quote::Code</a> could work too.</p>\n\n<p>From the synopsis:</p>\n\n<pre><code>use Quote::Code;\nprint qc\"2 + 2 = {2 + 2}\";  # \"2 + 2 is 4\"\nmy $msg = qc{The {$obj-&gt;name()} is {$obj-&gt;state()}.};\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 45831009, "answer_count": 2, "score": 1, "last_activity_date": 1571115943, "creation_date": 1503464256, "last_edit_date": 1504128795, "question_id": 45830924, "link": "https://stackoverflow.com/questions/45830924/how-to-run-code-inside-a-string-equivalent-to-rubys", "title": "How to run code inside a string (equivalent to Ruby&#39;s #{})", "body": "<p>I know we can put any code to <code>#{}</code> in Ruby, the code in <code>#{}</code> will be computed and then inserted into a string.</p>\n\n<p>Is there any equivalent thing in Perl?</p>\n"}, {"tags": ["perl", "progress-bar"], "comments": [{"owner": {"reputation": 6576, "user_id": 4528159, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/e5XgW.png?s=128&g=1", "display_name": "Fabrizio", "link": "https://stackoverflow.com/users/4528159/fabrizio"}, "edited": false, "score": 0, "creation_date": 1503437205, "post_id": 45827030, "comment_id": 78612552, "body": "your question is not clear to me, I suggest to explain it in greater detail"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503454610, "post_id": 45827850, "comment_id": 78616888, "body": "Re &quot;<i>Term::ProgressBar::IO seems incompatible with regular filehandles, and expects an instance of IO::File</i>&quot;, Regular file handles ARE instances of IO::File"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503481144, "post_id": 45827850, "comment_id": 78629177, "body": "Are you going to submit a patch, or a failing test?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1503509258, "post_id": 45827850, "comment_id": 78649948, "body": "Regular file handles behave like instances of IO::File in all cases except when they don&#39;t.  The sample output I have above is from perl v5.24.0. Other versions produce different output, and the workaround I suggested will not work with older perls."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1503442761, "last_edit_date": 1503442761, "creation_date": 1503440366, "answer_id": 45827850, "question_id": 45827030, "link": "https://stackoverflow.com/questions/45827030/code-loading-in-perl-progress-bar/45827850#45827850", "title": "code loading in perl &lt;progress-bar&gt;", "body": "<p><code>Term::ProgressBar::IO</code> seems incompatible with regular filehandles, and expects an instance of <code>IO::File</code> as seen in the <a href=\"https://metacpan.org/source/MANWAR/Term-ProgressBar-2.21/t/02_term_progressbar_io.t\" rel=\"nofollow noreferrer\">test script</a>, so you'll want to define <code>$fh</code> with</p>\n\n<pre><code>my $fh = IO::File-&gt;new('passwords.txt', 'r') or die ...;\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/Term::ProgressBar::IO\" rel=\"nofollow noreferrer\">docs</a> say that this module will work with any seekable filehandle, but it still doesn't work (for me, anyway).</p>\n\n<hr>\n\n<p>The <a href=\"https://metacpan.org/source/MANWAR/Term-ProgressBar-2.21/lib/Term/ProgressBar/IO.pm#L87\" rel=\"nofollow noreferrer\">relevant line during construction</a> is:</p>\n\n<pre><code>if (ref($count) and $count-&gt;can(\"seek\")) {\n</code></pre>\n\n<p>When <code>$count</code> is an <code>IO::File</code> type, this condition passes but it fails when <code>$count</code> is a regular <code>GLOB</code>, even one opened for reading and writing. A <code>GLOB</code> will support the <code>seek</code> method, but <code>can(\"seek\")</code> won't return true until after a method has been called on it.</p>\n\n<pre><code>use feature 'say';\nopen my $fh, '&lt;', 'some-file';\nsay $fh-&gt;can('seek');             # \"\"\nsay tell $fh;                     # 0\nsay $fh-&gt;can('seek');             # \"\"\nsay eval { $fh-&gt;tell };           # 0\nsay $fh-&gt;can('seek');             # 1\n</code></pre>\n\n<p>and this suggests another workaround (one that could be implemented inside <code>Term::ProgressBar::IO</code> to address this issue), and that is to make a filehandle method call on the filehandle before you pass it to <code>Term::ProgressBar::IO</code>:</p>\n\n<pre><code>open my $fh, '&lt;', 'passwords.txt' or die \"could not open file n.txt: $!\";\neval { $fh-&gt;tell };      # endow $fh with methods detectable by UNIVERSAL::can\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 317, "user_id": 6934607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87af3023c7f62d51b72233eb464ba27e?s=128&d=identicon&r=PG&f=1", "display_name": "Yang Yu", "link": "https://stackoverflow.com/users/6934607/yang-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1503986410, "creation_date": 1503986410, "answer_id": 45931676, "question_id": 45827030, "link": "https://stackoverflow.com/questions/45827030/code-loading-in-perl-progress-bar/45931676#45931676", "title": "code loading in perl &lt;progress-bar&gt;", "body": "<p>Here is a simple process bar code, output as below.\n<a href=\"https://i.stack.imgur.com/ESk2y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ESk2y.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>   $n = 10;\n    for($i=1;$i&lt;=$n;$i++){\n            proc_bar($i,$n);\n            select(undef, undef, undef, 0.2);\n    }\n\nsub proc_bar{\n        local $| = 1;\n        my $i = $_[0] || return 0;\n        my $n = $_[1] || return 0;\n        print   \"\\r [ \".(\"\\032\" x int(($i/$n)*50)).(\" \" x (50 - int(($i/$n)*50))).\" ] \";\n        printf(\"%2.1f %%\",$i/$n*100);\n        local $| = 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7944190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149f94e13e4167f75ad334793c220203?s=128&d=identicon&r=PG&f=1", "display_name": "z&#233;tfe ege&#232;e", "link": "https://stackoverflow.com/users/7944190/z%c3%a9tfe-ege%c3%a8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503986410, "creation_date": 1503436216, "last_edit_date": 1503442204, "question_id": 45827030, "link": "https://stackoverflow.com/questions/45827030/code-loading-in-perl-progress-bar", "title": "code loading in perl &lt;progress-bar&gt;", "body": "<p>this perl code for loading\nWhen running code</p>\n\n<pre><code>use Term::ProgressBar::IO;\n\nopen my $fh, '&lt;', 'passwords.txt' or die \"could not open file n.txt: $!\";\nmy $pb = Term::ProgressBar::IO-&gt;new($fh);\nmy $line_count;\nwhile (&lt;$fh&gt;) {\n  $line_count += 1;\n  $pb-&gt;update();\n}\nclose $fh;\nprint \"total lines $line_count\"\n\n\nC:\\Users\\USER\\Desktop&gt;r.pl\n  0% [*                                                                                                                                                               ]total lines 360\n</code></pre>\n\n<p>what is the problem</p>\n"}, {"tags": ["linux", "perl", "unix"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1503421436, "post_id": 45823320, "comment_id": 78604717, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10813538/shebang-line-limit-in-bash-and-linux-kernel\">Shebang line limit in bash and linux kernel</a>"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1503421661, "post_id": 45823320, "comment_id": 78604825, "body": "Possible duplicate indeed :)  Except for the fact that my experiments show that the answer to that question is wrong.  The claim is there is also 127."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1503421750, "post_id": 45823320, "comment_id": 78604868, "body": "I think that 127 is the <i>minimum</i> limit a POSIX platform can impose (and therefore the maximum you can <i>portably rely on</i>).  The actual maximum for your platform is also mentioned in the answers to the duplicate - <code>BINPRM_BUF_SIZE</code> in Linux."}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 1, "creation_date": 1503421766, "post_id": 45823320, "comment_id": 78604876, "body": "How do you know it&#39;s not failing? If you run the script with Bash, and your <code>#!</code> is something like <code>&#47;very&#47;long&#47;path&#47;to&#47;bash</code>, it may be silently failing without you knowing."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503421795, "post_id": 45823320, "comment_id": 78604891, "body": "I am getting the correct output :)"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1503421845, "post_id": 45823320, "comment_id": 78604917, "body": "What&#39;s the interpreter for your script?  Is it something that your shell would execute (as SnakeDoc implies)?"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503421971, "post_id": 45823320, "comment_id": 78604976, "body": "The interpreter is perl"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503422011, "post_id": 45823320, "comment_id": 78604996, "body": "BINPRM_BUF_SIZE is 128: <a href=\"https://github.com/torvalds/linux/blob/master/include/uapi/linux/binfmts.h\" rel=\"nofollow noreferrer\">github.com/torvalds/linux/blob/master/include/uapi/linux/&hellip;</a>"}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 0, "creation_date": 1503422587, "post_id": 45823320, "comment_id": 78605287, "body": "Is your script a perl script?"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503422734, "post_id": 45823320, "comment_id": 78605366, "body": "Yep, it&#39;s a perl script.  The first part of the shebang line is the path to a perl interpreter.  The rest is way too many command line arguments."}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 1, "creation_date": 1503422805, "post_id": 45823320, "comment_id": 78605406, "body": "have you tried removing the shebang line and running the script anyway? does it work?"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503422987, "post_id": 45823320, "comment_id": 78605509, "body": "No, I have no tried that.  I certainly can if you think I should, but it seems unlikely to work.  For one thing, it&#39;s not the default perl interpreter on the machine, even assuming the computer magically figures out that it&#39;s Perl at all.  For another thing, the command line arguments are rather important, and if guesses what they should be with the shebang line gone, I would be forced to assume the computer has psychic powers."}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 1, "creation_date": 1503423133, "post_id": 45823320, "comment_id": 78605585, "body": "You can run it like <code>&#47;path&#47;to&#47;your&#47;perl yourscript.pl</code> and see the defaults. It may be truncating your shebang arguments is what I&#39;m getting at, since you&#39;re over the max buffer size. Also, why not move your arguments into your script, if they&#39;re already in the file (in the shebang line), couldn&#39;t they be variables and avoid violating POSIX specs, or other, making your script more portable and more likely to work on other systems as well."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503423811, "post_id": 45823320, "comment_id": 78605924, "body": "They are not the default.  I learned this the hard way, because the script was failing until I added them.  If you must know, they are there to modify the default module search path, because this system has a fairly perverse setup.  (For good reasons I admit, but I still don&#39;t like it.)  My goal is not to make the script more portable.  My goal is find out why it&#39;s not already broken."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 1, "creation_date": 1503424307, "post_id": 45823320, "comment_id": 78606213, "body": "I figured it out.  Perl was being too clever. I tried running another program with a long shebang line, and it simply got truncated.  BUT!!  Perl doesn&#39;t treat the shebang line as a comment.  It parses its own shebang line!  Oops."}, {"owner": {"reputation": 15789, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 1, "creation_date": 1503424887, "post_id": 45823320, "comment_id": 78606549, "body": "@MarkVY, you should consider writing an answer to your question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503425240, "post_id": 45823320, "comment_id": 78606752, "body": "I doubt that Perl itself has any limit."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503425285, "post_id": 45823320, "comment_id": 78606784, "body": "Re &quot;<i>The rest is way too many command line arguments.</i>&quot;, Why use the shebang line for that? You&#39;re literally passing values from the script to the script instead of just using them in the script in the first place!"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503425388, "post_id": 45823320, "comment_id": 78606847, "body": "Because I want to modify the search path, which I think is traditionally done with the <code>-I</code> option.  The alternative is to use <code>lib</code>, but how is that better?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1503430678, "post_id": 45823320, "comment_id": 78609486, "body": "@MarkVY It&#39;s &quot;better&quot; because it keeps the shebang line short and imposes no portability issues."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503508005, "post_id": 45823320, "comment_id": 78649274, "body": "@ikegami: indeed, perl itself probably doesn&#39;t have any limit; at first I didn&#39;t realize that perl had anything to do with this; I thought it was purely an OS issue.  I never suspected that perl would go out of it&#39;s way to parse a comment!  :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503508656, "post_id": 45823320, "comment_id": 78649650, "body": "Why not? The kernel does."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503508889, "post_id": 45823320, "comment_id": 78649780, "body": "Specifically <i>because</i> the kernel already (presumably) has done it, so perl has no need to do it again.  (Of course, it turns out that perl does a much better job than the kernel in this case, but still.)"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1503430777, "post_id": 45824477, "comment_id": 78609533, "body": "This is a surprising observation. Seems like Perl&#39;s &quot;do-what-I-mean&quot; attitude is omnipresent ;-)"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1503434074, "post_id": 45824477, "comment_id": 78611081, "body": "It really, really is."}, {"owner": {"reputation": 15789, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 1, "creation_date": 1507601383, "post_id": 45824477, "comment_id": 80264138, "body": "If this answers your question, feel free to also <a href=\"https://stackoverflow.com/help/self-answer\">accept it</a>."}], "tags": [], "owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "is_accepted": true, "score": 3, "last_activity_date": 1503426059, "creation_date": 1503426059, "answer_id": 45824477, "question_id": 45823320, "link": "https://stackoverflow.com/questions/45823320/max-length-of-shebang-line-with-perl/45824477#45824477", "title": "max length of shebang line with Perl?", "body": "<blockquote>\n  <p>Does the limit apply only to the executable path (which is under 100 chars in my case), or is there some strange magic at work?</p>\n</blockquote>\n\n<p>The limit applies only to the executable path because there is strange magic at work.  The strange magic goes by the name of Perl.</p>\n\n<p>First, the limit of 127 characters is true.  (Or maybe 128 or 126, didn't actually count.)  Everything past that gets truncated.  Second, regardless of whether there are spaces on the shebang line Linux will pass everything after the executable name as just ONE argument.  Third, Perl will parse the shebang line and interpret it itself, which is why this was working.  But note that the effect of all this is strange and a bit perverse.  Suppose the shebang line looked like this:</p>\n\n<pre><code>#!/bin/perl -I/lib-one -I/lib-two\n</code></pre>\n\n<p>And suppose the truncation happened near the end, say, right before the \"w\" in \"two\"  (that is, suppose the limit were 32 instead of 128, for ease of reading).  Then the effect is as if you invoked perl at the command line as follows:</p>\n\n<pre><code>shell-prompt$ /bin/perl \"-I/lib-one -I/lib-t\" -I/lib-one -I/lib-two\n</code></pre>\n\n<p>Which \"works\" in this case, but in general won't.</p>\n"}, {"comments": [{"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503434410, "post_id": 45825688, "comment_id": 78611237, "body": "This will sound silly but... I don&#39;t want to &quot;clutter&quot; the source code with the idiosyncrasies of file paths on this system, which have no relevance to other systems.  (The code is otherwise fairly portable.  The tons of include directives are just to get LWP working.)  But maybe this is the right approach after all."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1503430630, "creation_date": 1503430630, "answer_id": 45825688, "question_id": 45823320, "link": "https://stackoverflow.com/questions/45823320/max-length-of-shebang-line-with-perl/45825688#45825688", "title": "max length of shebang line with Perl?", "body": "<p>I know this doesn't answer your original question about the maximum <code>#!</code> line but I guess you rather have an <a href=\"https://meta.stackexchange.com/q/66377\">XY problem</a>.</p>\n\n<p>Why don't you <code>use lib</code>? If you have hard coded include paths in your script (in your shebang line) anyway then you can as well denote them with <code>use lib</code> statements and keep the shebang line short:</p>\n\n<pre><code>#!/usr/bin/perl -some -absolutely -necessary -options\n\nuse lib '/lib-one';\nuse lib '/lib-two';\n...\nuse lib '/lib-twenty-four';\n</code></pre>\n"}], "owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 45824477, "answer_count": 2, "score": 1, "last_activity_date": 1503430630, "creation_date": 1503421371, "last_edit_date": 1503425074, "question_id": 45823320, "link": "https://stackoverflow.com/questions/45823320/max-length-of-shebang-line-with-perl", "title": "max length of shebang line with Perl?", "body": "<p>I've read somewhere that in Linux a shebang line (<code>#!</code>) can't exceed 127 characters.  I have a Perl script which has a shebang line of over 300 characters, and it hasn't failed (yet).  Does the limit apply only to the executable path (which is under 100 chars in my case), or is there some strange magic at work?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1503411431, "post_id": 45819680, "comment_id": 78597865, "body": "Hello. Stack overflow isn&#39;t really a &#39;do my work for me&#39; service, but rather about helping you solve your programming problems. Can I suggest this question would be improved by actually trying to solve it, and then pointing out where you got stuck?"}, {"owner": {"reputation": 1, "user_id": 8500773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tc_tlp2tndQ/AAAAAAAAAAI/AAAAAAAAABU/uc69MdiiL2k/photo.jpg?sz=128", "display_name": "Jagtar Singh", "link": "https://stackoverflow.com/users/8500773/jagtar-singh"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1503411740, "post_id": 45819680, "comment_id": 78598128, "body": "Thank you for the comment, i would improve on this and sure will post with actual problems. I didn&#39;t know the use of this portal as i recently joined. Will keep it in mind in future."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1503412058, "post_id": 45819680, "comment_id": 78598363, "body": "<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> is a useful thing to review."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1503411302, "post_id": 45820063, "comment_id": 78597759, "body": "This could really use some explanation."}, {"owner": {"reputation": 1, "user_id": 8500773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tc_tlp2tndQ/AAAAAAAAAAI/AAAAAAAAABU/uc69MdiiL2k/photo.jpg?sz=128", "display_name": "Jagtar Singh", "link": "https://stackoverflow.com/users/8500773/jagtar-singh"}, "edited": false, "score": 0, "creation_date": 1503411405, "post_id": 45820063, "comment_id": 78597846, "body": "Please help me understand the code, as i am a newbee to perl."}], "tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": -1, "last_activity_date": 1503411433, "last_edit_date": 1503411433, "creation_date": 1503411216, "answer_id": 45820063, "question_id": 45819680, "link": "https://stackoverflow.com/questions/45819680/perl-use-to-loop-on-columns-and-rows/45820063#45820063", "title": "Perl use to loop on columns and rows", "body": "<pre><code>perl -F, -anle '\n    if($.==1){\n        @S=@F;\n        next;\n    }\n    @A=();\n    for(1..$#F){\n        push @A, $S[$_] if $F[$_] eq \"X\"\n    }\n    print join \",\", $F[0], @A\n' &lt; input\n</code></pre>\n\n<p>From <code>perl -h</code></p>\n\n<pre><code>-F/pattern/       split() pattern for -a switch (//'s are optional)\n-a                autosplit mode with -n or -p (splits $_ into @F)\n-n                assume \"while (&lt;&gt;) { ... }\" loop around program\n-l[octal]         enable line ending processing, specifies line terminator\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>@S is used to save @F when reading first line ($.==1)\n@A is used to push values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1503414053, "last_edit_date": 1503414053, "creation_date": 1503413302, "answer_id": 45820848, "question_id": 45819680, "link": "https://stackoverflow.com/questions/45819680/perl-use-to-loop-on-columns-and-rows/45820848#45820848", "title": "Perl use to loop on columns and rows", "body": "<pre><code>$ cat input.txt \n,A,B,C,D,\nM,X,-,-,X,\nN,X,-,-,-,\n$ perl -F, -alE'$,=\",\";$i=-1;$.==1&amp;&amp;(@D=@F)||say map{$i++;$_ eq X?$D[$i]:$_ eq\"-\"?():$_}@F' input.txt\nM,A,D\nN,A\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1503414331, "creation_date": 1503414331, "answer_id": 45821241, "question_id": 45819680, "link": "https://stackoverflow.com/questions/45819680/perl-use-to-loop-on-columns-and-rows/45821241#45821241", "title": "Perl use to loop on columns and rows", "body": "<p>People seem determined to make their solutions as hard to understand as possible, So here's something a little less opaque.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse feature 'say';\n\n# Array of the replacement letters\nmy @replace = split /,/, &lt;&gt;;\n# Remove the newline from array elements\nchomp @replace;\n\nwhile (&lt;&gt;) {\n  chomp;\n\n  # array of data\n  my @data = split /,/;\n\n  # replacements\n  for my $i (0 .. $#data) {\n    if ($data[$i] eq 'X') {\n      $data[$i] = $replace[$i];\n    }\n  }\n\n  # remove empty elements\n  @data = grep { $_ ne '-' } @data;\n\n  say join ',', @data;\n}\n</code></pre>\n\n<p>Run it by passing your input file on the command line. So something like:</p>\n\n<pre><code>$ ./letters letters.dat\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8500773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tc_tlp2tndQ/AAAAAAAAAAI/AAAAAAAAABU/uc69MdiiL2k/photo.jpg?sz=128", "display_name": "Jagtar Singh", "link": "https://stackoverflow.com/users/8500773/jagtar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "closed_date": 1503421265, "answer_count": 3, "score": -3, "last_activity_date": 1503414331, "creation_date": 1503410169, "last_edit_date": 1503411326, "question_id": 45819680, "link": "https://stackoverflow.com/questions/45819680/perl-use-to-loop-on-columns-and-rows", "closed_reason": "Not suitable for this site", "title": "Perl use to loop on columns and rows", "body": "<p>I have a file of following type</p>\n\n<pre><code>,A,B,C,D,\nM,X,-,-,X,\nN,X,-,-,-,\n</code></pre>\n\n<p>I need to convert this data using perl to following output; by replacing the place wherever \"X\" is present with the data available in respective column of first row.</p>\n\n<pre><code>M,A,D,\nN,A,\n</code></pre>\n\n<p>I have thought to save the first row as an array and then count the place where \"X\" comes in second and following rows and replace it with the item in the array at that position. </p>\n\n<p>Please let me know a way to do this, it will be very helpful.\nThanks.</p>\n"}, {"tags": ["python", "regex", "python-3.x", "perl"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 4, "creation_date": 1503407613, "post_id": 45818621, "comment_id": 78594736, "body": "Can you please show what you&#39;ve tried? What didn&#39;t work?"}], "answers": [{"tags": [], "owner": {"reputation": 705370, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 2, "last_activity_date": 1503408049, "last_edit_date": 1503408049, "creation_date": 1503407741, "answer_id": 45818718, "question_id": 45818621, "link": "https://stackoverflow.com/questions/45818621/how-to-pythonize-this-perl-substitution-regex/45818718#45818718", "title": "How to &quot;pythonize&quot; this perl substitution regex?", "body": "<p>Python comes with batteries included: Use <a href=\"https://docs.python.org/3.1/library/textwrap.html#textwrap.fill\" rel=\"nofollow noreferrer\"><code>textwrap.fill</code></a>:</p>\n\n<pre><code>In [15]: import textwrap\n\nIn [16]: print(textwrap.fill('This is a very long string with spaces or maybewithoutspaces', width=40))\nThis is a very long string with spaces\nor maybewithoutspaces\n\nIn [17]: print(textwrap.fill('Thisisaverylongstringwithspacesormaybewithoutspaces', width=40))\nThisisaverylongstringwithspacesormaybewi\nthoutspaces\n</code></pre>\n\n<p>Note, however that <code>textwrap.fill</code> tries to break on a space. A more literal equivalent to your Perl code would be:</p>\n\n<pre><code>text = re.sub(r'(.{0,40})', r'\\1\\n', text)\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>In [18]: import re\n\nIn [19]: print(re.sub(r'(.{0,40})', r'\\1\\n', 'This is a very long string with spaces or maybewithoutspaces'))\nThis is a very long string with spaces o\nr maybewithoutspaces\n\nIn [22]: print(re.sub(r'(.{0,40})', r'\\1\\n', 'Thisisaverylongstringwithspacesormaybewithoutspaces'))\nThisisaverylongstringwithspacesormaybewi\nthoutspaces\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1503408042, "creation_date": 1503408042, "answer_id": 45818841, "question_id": 45818621, "link": "https://stackoverflow.com/questions/45818621/how-to-pythonize-this-perl-substitution-regex/45818841#45818841", "title": "How to &quot;pythonize&quot; this perl substitution regex?", "body": "<p>you can use <code>textwrap</code> module </p>\n\n<pre><code>import textwrap\ntxt = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaafdafsdafdafaddafsfdsf'\n\nprint(textwrap.fill(txt, width=40))\n</code></pre>\n\n<p>output</p>\n\n<pre><code>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\naaaaaaafdafsdafdafaddafsfdsf\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1503412068, "post_id": 45818843, "comment_id": 78598371, "body": "Unlike OPs regex that at least tries to break at spaces between words, your solution blindly splits lines at every 40th character, note the <code>\\s+</code> in the original regex. Doing that without regexes is much more difficult."}, {"owner": {"reputation": 977, "user_id": 1545971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7729cfa090ff29b02b478dc719548d?s=128&d=identicon&r=PG", "display_name": "damisan", "link": "https://stackoverflow.com/users/1545971/damisan"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1503412213, "post_id": 45818843, "comment_id": 78598477, "body": "The &quot;but without splitting a word in the middle&quot; was added in the question after posting my answer. Before that it was unclear if it is a desired behaviour."}, {"owner": {"reputation": 628, "user_id": 2182857, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/982563165be9ffbc63a1a714ceb036f4?s=128&d=identicon&r=PG", "display_name": "user2182857", "link": "https://stackoverflow.com/users/2182857/user2182857"}, "edited": false, "score": 0, "creation_date": 1503422959, "post_id": 45818843, "comment_id": 78605497, "body": "Yes, I edited the original question to clarify this, but the \\s+ was present in the perl code from the start."}, {"owner": {"reputation": 977, "user_id": 1545971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7729cfa090ff29b02b478dc719548d?s=128&d=identicon&r=PG", "display_name": "damisan", "link": "https://stackoverflow.com/users/1545971/damisan"}, "edited": false, "score": 0, "creation_date": 1503470646, "post_id": 45818843, "comment_id": 78621999, "body": "Yes, it was present. So either the code was not matching the description or the description of requirements was not matching the code. Which was true I had to guess."}], "tags": [], "owner": {"reputation": 977, "user_id": 1545971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7729cfa090ff29b02b478dc719548d?s=128&d=identicon&r=PG", "display_name": "damisan", "link": "https://stackoverflow.com/users/1545971/damisan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503408985, "last_edit_date": 1503408985, "creation_date": 1503408048, "answer_id": 45818843, "question_id": 45818621, "link": "https://stackoverflow.com/questions/45818621/how-to-pythonize-this-perl-substitution-regex/45818843#45818843", "title": "How to &quot;pythonize&quot; this perl substitution regex?", "body": "<p>Or just use slicing</p>\n\n<pre><code>N = 40\ns = '-'*(4*N+N//2)\n\nprint(*(s[i:i + N] for i in range(0, len(s), N)), sep=\"\\n\")\n</code></pre>\n\n<p>or after importing more_itertools:</p>\n\n<pre><code>from more_itertools import sliced\nprint(*sliced(s, 40), sep=\"\\n\")\n</code></pre>\n\n<hr>\n\n<p>EDIT: Quick comparison</p>\n\n<pre><code>N = 40\ns = '-'*(8000000*40+40//2)\n\n\n@timeit\ndef slicer1(s):\n    return \"\\n\".join(s[i:i + N] for i in range(0, len(s), N))\n\n@timeit\ndef slicer2(s):\n    return \"\\n\".join(sliced(s, N))\n\n@timeit\ndef slicer3(s):\n    return re.sub(r'(.{0,'+str(N)+'})', r'\\1\\n', s)\n\n\nslicer1(s)\nslicer2(s)\nslicer3(s)\n</code></pre>\n\n<p>Method 2 should be fast enough and is the simplest one:</p>\n\n<pre><code>Function slicer1(s), took: 1.9553 seconds.\nFunction slicer2(s), took: 2.9460 seconds.\nFunction slicer3(s), took: 12.6048 seconds.\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 2182857, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/982563165be9ffbc63a1a714ceb036f4?s=128&d=identicon&r=PG", "display_name": "user2182857", "link": "https://stackoverflow.com/users/2182857/user2182857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 45818718, "answer_count": 3, "score": 0, "last_activity_date": 1503412374, "creation_date": 1503407462, "last_edit_date": 1503412374, "question_id": 45818621, "link": "https://stackoverflow.com/questions/45818621/how-to-pythonize-this-perl-substitution-regex", "title": "How to &quot;pythonize&quot; this perl substitution regex?", "body": "<p>I wrote a short perl code to break a long string of text into cuts of 40 characters or below (by inserting breaklines between them, but without splitting a word in the middle).</p>\n\n<pre><code>text=~ s!(.{0,40})\\s+!$1\\n!g;\n</code></pre>\n\n<p>What would be the python 3 equivalent?\nMany thanks.</p>\n\n<p>Solution:</p>\n\n<pre><code>answer=re.sub(r'(.{0,40})\\s', r'\\1\\n', my_text+\" \"\n</code></pre>\n\n<p>I changed a solution recommended below to avoid inserting breaklines into words.</p>\n\n<p>Edit: I have added a space at the end of my text in order to avoid putting the last word in a line of its own if the user does not supply a breakline (or another sort of space) in the end of their text.</p>\n"}, {"tags": ["javascript", "perl", "cgi"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1503403397, "post_id": 45817093, "comment_id": 78591480, "body": "Do you need an actual popup or confirmation yes/no in Perl?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503404143, "post_id": 45817093, "comment_id": 78591987, "body": "you&#39;ve already got that ugly javascript fake-form thing going on - why not do the confirmation in javascript too?"}, {"owner": {"reputation": 31, "user_id": 4631399, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0c7252164305626f8f304aae14ebef9e?s=128&d=identicon&r=PG&f=1", "display_name": "OmZ", "link": "https://stackoverflow.com/users/4631399/omz"}, "edited": false, "score": 0, "creation_date": 1503406192, "post_id": 45817093, "comment_id": 78593626, "body": "Can you send an example? The user has to click Yes or No using the computer mouse."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503406888, "post_id": 45817093, "comment_id": 78594185, "body": "<a href=\"https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_confirm2\" rel=\"nofollow noreferrer\">w3schools.com/jsref/tryit.asp?filename=tryjsref_confirm2</a>"}, {"owner": {"reputation": 31, "user_id": 4631399, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0c7252164305626f8f304aae14ebef9e?s=128&d=identicon&r=PG&f=1", "display_name": "OmZ", "link": "https://stackoverflow.com/users/4631399/omz"}, "edited": false, "score": 0, "creation_date": 1503471066, "post_id": 45817093, "comment_id": 78622269, "body": "I have some issue with the syntax. the script ignores from the javascript. Can you help with the syntax?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1503407871, "creation_date": 1503407871, "answer_id": 45818771, "question_id": 45817093, "link": "https://stackoverflow.com/questions/45817093/cgi-script-how-to-create-confirmation-box-pop-up/45818771#45818771", "title": "CGI script - how to create confirmation box pop up?", "body": "<p>This question shows a fundamental misunderstanding of how an HTTP interaction works. HTTP is a stateless protocol. The client (probably a browser) sends a request and the server sends a response. The next request/response cycle has no connection to the previous one unless the developer does something to store information about the state. With simple CGI mechanisms you cannot get halfway through processing a request and then stop to ask the user for more information.</p>\n\n<p>What you want can probably possible by writing Javascript and making Ajax requests to the web server. But given your level of knowledge of web development, I strongly recommend you either employ a programmer or spend a year or so working your way up to this.</p>\n\n<p>In addition, there are some get strange things going on in your CGI program.</p>\n\n<ul>\n<li>You use <code>-w</code> instead of the more modern <code>use warnings</code>.</li>\n<li>You don't have <code>use strict</code> (and, therefore, you don't declare any of your variables).</li>\n<li>You load the CGI module twice.</li>\n<li>You have spelled <code>:standard</code> wrong (but you don't use any of the standard functions anyway).</li>\n<li>You explicitly load <code>escapeHTML</code> but never make use of it.</li>\n<li>You load LWP::Simple but then ignore it in favour of shelling out to <code>wget</code> instead.</li>\n<li>You do nothing at all with the results from your call to <code>wget</code>.</li>\n<li>You escape quote characters unnecessarily.</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 4631399, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0c7252164305626f8f304aae14ebef9e?s=128&d=identicon&r=PG&f=1", "display_name": "OmZ", "link": "https://stackoverflow.com/users/4631399/omz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1503407871, "creation_date": 1503403287, "last_edit_date": 1503404634, "question_id": 45817093, "link": "https://stackoverflow.com/questions/45817093/cgi-script-how-to-create-confirmation-box-pop-up", "title": "CGI script - how to create confirmation box pop up?", "body": "<p>I am running a CGI script to block address in security device (Using wget command) and I'd like have a confirmation box pop up during loading and ask a yes/no question, if the answer is no -exit  and if the answer is yes continue to block the address.  Any ideas? </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse CGI qw(:standart escapeHTML);\nuse CGI qw(:param);\nuse LWP::Simple;\n$pass ='xxxxxx';\n$rip = param('ip');\n$addr=$ENV{'REMOTE_ADDR'};\nprint \"Content-type: text/html \\n\\n\";\nprint \"&lt;html&gt;\";\nprint \"&lt;head&gt; &lt;title&gt;Block IP &lt;/title&gt;&lt;/head&gt;\";\nprint \"&lt;body&gt;\";\n\nif($rip=~m/\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/)\n{\n  system(\"wget \\'https://x.x.x.x/policy/test?\n  deviceuser=user1&amp;passd=$password&amp;ip=$rip&amp;policy=Quar_1D\\' -O \\/dev\\/null --no-\n  check-certificate 2&gt;&amp;1 | grep response -A 3\");\n  print \"&lt;script type='text/javascript'&gt;\";\n}\nelse \n{\n  if(!$rip)\n  {\n    print '&lt;script type=\\'text/javascript\\'&gt;\n    var gip=prompt(\\'enter an ip  to block\\',\\'\\');\n    if (!gip) {\n        window.location=\\'http://x.x.x.x/cgi-bin/block.cgi\\';\n    } else {\n        window.location=\"http://x.x.x.x/cgi-bin/block_tp.cgi?ip=\"+gip;\n    }';\n  }\n}\nprint \"&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n"}, {"tags": ["arrays", "perl", "if-statement", "output"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1503393720, "post_id": 45813539, "comment_id": 78584828, "body": "Please always use <code>use strict</code> and <code>use warnings</code> in your code to catch typos and other problems, and indent your code when you show it to other people for help. It&#39;s very hard to read like this. You can <a href=\"https://stackoverflow.com/posts/45813539/edit\">edit</a> your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1503394354, "post_id": 45813539, "comment_id": 78585258, "body": "Where are the dogs and cats coming from? You don&#39;t have that in your example input. It&#39;s very hard to follow what your code is supposed to do. This wall of text of explanation is not very clear. What do the <code>word</code> parts in the filelist mean? Are they relevant at all, or do you only need the numbers to get the right lines?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1503403261, "post_id": 45813539, "comment_id": 78591389, "body": "as much as I would lve to help, this is not very clear. you say you want &quot;need <code>row</code> 1,2...&quot; but do you mean <code>columns</code>? also you have <code>input file</code> and <code>input file</code> both differ, what reference do they have towards each other? Your expected result contains words such as dogs and frogs these are not in the original input?"}, {"owner": {"reputation": 99, "user_id": 5458124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8Tn1.jpg?s=128&g=1", "display_name": "Billy J", "link": "https://stackoverflow.com/users/5458124/billy-j"}, "edited": false, "score": 0, "creation_date": 1503405407, "post_id": 45813539, "comment_id": 78592989, "body": "Sorry guys. The data has been corrected. The words, dogs, cats, etc. are irrelevant. They are there just to show the rows that need to be updated. I only need numbers to get the correct lines/rows. So for file1.txt, row 1, row 3 &amp; row 5 need to be updated. Note: The row number is in column 1. Thanks!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503409138, "post_id": 45813539, "comment_id": 78596012, "body": "shouldn&#39;t you be closing <code>INFILE2</code> and <code>OUTFILE</code> inside the outer while loop?"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5458124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8Tn1.jpg?s=128&g=1", "display_name": "Billy J", "link": "https://stackoverflow.com/users/5458124/billy-j"}, "edited": false, "score": 0, "creation_date": 1503432933, "post_id": 45819547, "comment_id": 78610580, "body": "Thank you so much, Chris Turner. This worked liked a charm. If you&#39;re ever in Sydney, Australia, give me a call. I owe you a few beers. Cheers!"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1503409860, "creation_date": 1503409860, "answer_id": 45819547, "question_id": 45813539, "link": "https://stackoverflow.com/questions/45813539/repeating-records-writing-output-in-perl/45819547#45819547", "title": "Repeating Records Writing Output in Perl", "body": "<p>The problem is that you're comparing every member of the array with each line and outputting to the temporary file if it matches or not so you end up with multiple copies of each line. The easiest solution to fix your code is to have a variable track whether or not you get a match and once outside the for loop, you can print the line appropriately.</p>\n\n<pre><code>  my $match = 0;\n  for ($i = 0; $i &lt; $arraysize; $i++) \n  {\n     $scratched = $rowarray[$i];\n     my ($substring2) = $scratched =~ /(.*)?\\./;\n\n     if ($substring2 == $fn) \n     {\n        print \"Match: $substring2 == $fn\\n\\n\";\n        $match = 1;\n        last; # No need checking the rest of the array at this point\n     }\n     else # elsif was overkill - it'll either match or not\n     {\n        print \"No match: $substring2 != $fn\\n\\n\";\n     }\n  }\n  if ($match)\n  {\n     print OUTFILE \"$strike$fn$strike$tab$strike$col1$strike$tab$strike$col2$strike$tab$strike$col3$strike\\n\";\n  } else {\n     print OUTFILE \"$fn$tab$col1$tab$col2$tab$col3\\n\";\n  }\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5458124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b8Tn1.jpg?s=128&g=1", "display_name": "Billy J", "link": "https://stackoverflow.com/users/5458124/billy-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 45819547, "answer_count": 1, "score": -1, "last_activity_date": 1503439250, "creation_date": 1503393392, "last_edit_date": 1503439250, "question_id": 45813539, "link": "https://stackoverflow.com/questions/45813539/repeating-records-writing-output-in-perl", "title": "Repeating Records Writing Output in Perl", "body": "<p>I'm trying to write a Perl script to do the following:</p>\n\n<p>I have a file that contains a list of files called \"filelist.txt\" (i.e. file1.txt, file2.txt, etc.),\nalong with a column that contains numeric values that need to be read &amp; used to update the corresponding\nrow in each of the files.</p>\n\n<p>Note: All files are tab delimited.</p>\n\n<p>filelist.txt (input)</p>\n\n<pre><code>file1.txt 1.dogs, 3.cats, 5.frog\nfile2.txt 2.lion\nfile3.txt 4.swan, 5.snake\nfile4.txt 3.giraffe, 4.turtle, 5.monkey\nfile5.txt 4.tiger\n</code></pre>\n\n<p>Each file has 'x' number of rows:</p>\n\n<p>file1.txt (input)</p>\n\n<pre><code>1 dogs word2 word3\n2 word1 word2 word3\n3 cats word2 word3\n4 word1 word2 word3\n5 frog word2 word3\n</code></pre>\n\n<p>What I need to do is read column 1 in \"filelist.txt\" to get the filename (i.e. file1.txt). Then read column 2 to get the row numbers (i.e. 1.word, 3.word, 5.word). Once I have the row numbers, I need to open \"file1.txt\" and for each row number that matches the number(s) extracted from \"filelist.txt\", print each row in \"file1.txt\" (as shown below), where the extracted number from \"filelist.txt\" matches the row number in \"file1.txt\". In this example, \"1\" from \"1.dogs\" matches row 1, \"3\" from \"3.cats\" matches row \"3\", \"5\" from \"5.frog\" matches row \"5\". This needs to be done for every file in \"filelist.txt\".</p>\n\n<p>file1.tmp (output)</p>\n\n<pre><code>&lt;strike&gt;1&lt;/strike&gt; &lt;strike&gt;dogs&lt;/strike&gt; &lt;strike&gt;word2&lt;/strike&gt; &lt;strike&gt;word3&lt;/strike&gt;\n2 word1 word2 word3\n&lt;strike&gt;3&lt;/strike&gt; &lt;strike&gt;cats&lt;/strike&gt; &lt;strike&gt;word2&lt;/strike&gt; &lt;strike&gt;word3&lt;/strike&gt;\n4 word1 word2 word3\n&lt;strike&gt;5&lt;/strike&gt; &lt;strike&gt;frog&lt;/strike&gt; &lt;strike&gt;word2&lt;/strike&gt; &lt;strike&gt;word3&lt;/strike&gt;\n</code></pre>\n\n<p>OUTPUT REQUIRED (based on files in filelist.txt).</p>\n\n<pre><code>file1.txt needs rows 1, 3, 5 to be updated. 2, 4 stay as is.\nfile2.txt needs row 2 to be updated. 1, 3, 4, 5 stay as is.\nfile3.txt needs rows 4, 5 to be updated. 1, 2, 3.\nfile4.txt needs rows 3, 4, 5 to be updated. 1, 2 stay as is.\nfile5.txt needs row 4 to be updated. 1, 2, 3, 5 stay as is.\n</code></pre>\n\n<p>SCRIPT</p>\n\n<pre><code>use Cwd;\n$dir = getcwd;\n\n$nofile = \"FILE NOT FOUND\";\n$strike = \"&lt;&gt;\";\n$tab = \"    \";\nmy $filelist = \"filelist.list\";\n\nopen INFILE, \"$dir/$filelist\" or die \"$nofile\\n\";\n\nwhile (my $line=&lt;INFILE&gt;) \n{\n   chomp($line);\n   my ($filename, $rownum) = split /\\t/, $line;\n\n   @rowarray = split(/, /, $rownum);\n   my $arraysize = @rowarray;\n\n   open INFILE2, \"$dir/$filename\" or die \"$nofile\\n\"; \n   $filename =~ s/.txt//; \n   $tmpfilename = $filename;\n   open (OUTFILE, \"&gt;$dir/$tmpfilename.tmp\"); \n\n   while (my $line2=&lt;INFILE2&gt;) \n   {\n      chomp ($line2);\n      my ( $fn, $col1, $col2, $col3 ) = split (/\\t/, $line2);\n\n      for ($i = 0; $i &lt; $arraysize; $i++) \n      {\n         $scratched = $rowarray[$i];\n         my ($substring2) = $scratched =~ /(.*)?\\./;\n\n         if ($substring2 == $fn) \n         {\n            print \"Match: $substring2 == $fn\\n\\n\";\n            print OUTFILE \"$strike$fn$strike$tab$strike$col1$strike$tab$strike$col2$strike$tab$strike$col3$strike\\n\";\n         }\n         elsif ($substring2 != $fn) \n         {\n            print \"No match: $substring2 != $fn\\n\\n\";\n            print OUTFILE \"$fn$tab$col1$tab$col2$tab$col3\\n\";\n         }\n      }\n   }\n}\nclose (INFILE);\nclose (INFILE2);\nclose (OUTFILE);\n</code></pre>\n\n<p>CURRENT OUTPUT (from file1.txt as input)</p>\n\n<pre><code>&lt;&gt;1&lt;&gt; &lt;&gt;dogs&lt;&gt; &lt;&gt;word2&lt;&gt; &lt;&gt;word3&lt;&gt;\n1 dogs word2 word3\n1 dogs word2 word3\n2 word1 word2 word3\n2 word1 word2 word3\n2 word1 word2 word3\n3 cats word2 word3\n&lt;&gt;3&lt;&gt; &lt;&gt;cats&lt;&gt; &lt;&gt;word2&lt;&gt;&lt;&gt;word3&lt;&gt;\n3 cats word2 word3\n4 word1 word2 word3\n4 word1 word2 word3\n4 word1 word2 word3\n5 frog word2 word3\n5 frog word2 word3\n&lt;&gt;5&lt;&gt; &lt;&gt;frog&lt;&gt; &lt;&gt;word2&lt;&gt; &lt;&gt;word3&lt;&gt;\n</code></pre>\n\n<p>Been working on this for a few days and unfortunately, I cannot see how to get this to work properly.</p>\n\n<p>Any suggestions/help would be greatly appreciated.</p>\n\n<p>Thank you in advance.</p>\n\n<p>Billy J.</p>\n"}, {"tags": ["perl", "dbix-class"], "comments": [{"owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503391950, "post_id": 45812818, "comment_id": 78583552, "body": "Sorry, my bad about the incomplete information it&#39;s DBIx::Class"}], "answers": [{"comments": [{"owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "edited": false, "score": 0, "creation_date": 1503392953, "post_id": 45813252, "comment_id": 78584285, "body": "Hi Thanks for the help , BTW is there any work around for the regex , since in the SQL LIKE statement I am using a string regex  Thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "edited": false, "score": 0, "creation_date": 1503393006, "post_id": 45813252, "comment_id": 78584320, "body": "@Always_Beginner which database engine are you using? <code>LIKE</code> should not actually support regex. Some DBs have a <code>REGEXP</code> operator for that."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1503392529, "creation_date": 1503392529, "answer_id": 45813252, "question_id": 45812818, "link": "https://stackoverflow.com/questions/45812818/corresponding-perl-dbixclass-for-sql-like-and-not-like-statement/45813252#45813252", "title": "Corresponding Perl DBIx::Class for SQL LIKE AND NOT LIKE STATEMENT", "body": "<p><a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet#search_like\" rel=\"nofollow noreferrer\"><code>search_like</code></a> is just a convenient shortcut. You probably do not want to use that.</p>\n\n<p>There are several ways to achieve this with <code>search</code> though. Remember that <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet\" rel=\"nofollow noreferrer\">ResultSet</a> calls with <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet#search\" rel=\"nofollow noreferrer\"><code>search</code></a> can be chained, to build up the final ResultSet.</p>\n\n<pre><code>$rs-&gt;search(\n    {\n        column_name =&gt; { -like =&gt; 'foo' },\n    }\n)-&gt;search(\n    {\n        column_name =&gt; { -not_like =&gt; 'bar' },\n    }\n);\n</code></pre>\n\n<p>Alternatively, you can also just combine them, as shown <a href=\"http://lists.scsys.co.uk/pipermail/dbix-class/2013-March/011165.html\" rel=\"nofollow noreferrer\">in this older mailing list post</a>.</p>\n\n<pre><code>$rs-&gt;search( \n    { \n        column_name =&gt; { \n            -like     =&gt; 'foo', \n            -not_like =&gt; 'bar', \n        } \n    }\n); \n</code></pre>\n\n<p>Or you can chain them with an <code>AND</code>, which is more verbose.</p>\n\n<pre><code>$rs-&gt;search(\n    {\n        -and =&gt; [\n            { column_name =&gt; { -like     =&gt; 'foo' } },\n            { column_name =&gt; { -not_like =&gt; 'bar' } },\n        ]\n    }\n);\n</code></pre>\n\n<p>All of these do the same thing.</p>\n\n<hr>\n\n<p>You can find additional information about this syntax in <a href=\"https://metacpan.org/pod/SQL::Abstract\" rel=\"nofollow noreferrer\">SQL::Abstract</a>, which is used by DBIx::Class under the hood.</p>\n\n<p>Note that <code>LIKE</code> does <strong>not</strong> take a regular expression.</p>\n"}], "owner": {"reputation": 1622, "user_id": 3407736, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b17228b71d87b56d2d31cb344c5a5278?s=128&d=identicon&r=PG&f=1", "display_name": "Always_Beginner", "link": "https://stackoverflow.com/users/3407736/always-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1503392529, "creation_date": 1503391199, "last_edit_date": 1503392196, "question_id": 45812818, "link": "https://stackoverflow.com/questions/45812818/corresponding-perl-dbixclass-for-sql-like-and-not-like-statement", "title": "Corresponding Perl DBIx::Class for SQL LIKE AND NOT LIKE STATEMENT", "body": "<p>I am just a newbie to Perl and I am trying to use Perl DBIx::Class ORM. I want to convert a SQL statement which is sometime like </p>\n\n<pre><code>SELECT `COLUMN_1` FROM TABLE \n    WHERE `COLUMN_NAME` LIKE \"regex1\" \n    AND `COLUMN_NAME` NOT LIKE` \"regex2\".\n</code></pre>\n\n<p>I know of <code>search_where</code> statement to add conditions but I am not able to find equivalent of LIKE and NOT LIKE ?</p>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1503391939, "post_id": 45812808, "comment_id": 78583545, "body": "That&#39;s not a very smart name. It might clash with other stuff. Also note that modules should always start with capital letters. Small letter packages are meant to be pragmas."}, {"owner": {"reputation": 75, "user_id": 4145455, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdce2f96448e8d2bff91edef1b02fefd?s=128&d=identicon&r=PG&f=1", "display_name": "JunhuiLi", "link": "https://stackoverflow.com/users/4145455/junhuili"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503471310, "post_id": 45812808, "comment_id": 78622411, "body": "@simbabque +1 ,Thank you for your kindness, I will pay attention to this kind of problem."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4145455, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdce2f96448e8d2bff91edef1b02fefd?s=128&d=identicon&r=PG&f=1", "display_name": "JunhuiLi", "link": "https://stackoverflow.com/users/4145455/junhuili"}, "edited": false, "score": 0, "creation_date": 1503471826, "post_id": 45814553, "comment_id": 78622730, "body": "Thank you for reminding me, I found there are several libraries in the system, I solve it just by adding <code>use lib &quot;&#47;usr&#47;lib64&#47;perl5&#47;5.10.0&#47;&quot;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 75, "user_id": 4145455, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdce2f96448e8d2bff91edef1b02fefd?s=128&d=identicon&r=PG&f=1", "display_name": "JunhuiLi", "link": "https://stackoverflow.com/users/4145455/junhuili"}, "edited": false, "score": 0, "creation_date": 1503472540, "post_id": 45814553, "comment_id": 78623152, "body": "@JunhuiLi: That sounds like a bit of a sticking-plaster fix. You would be better advised to address the many other issues in my post."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1503403708, "last_edit_date": 1503403708, "creation_date": 1503395983, "answer_id": 45814553, "question_id": 45812808, "link": "https://stackoverflow.com/questions/45812808/failed-to-install-my-own-perl-modulepm-file/45814553#45814553", "title": "failed to install my own perl module(pm file)", "body": "<p>It's unclear at which point things started to go wrong for you.</p>\n\n<p>Firstly, <code>test.pm</code> is a bad name for a Perl module. Perl modules should have names that begin with upper case letters (and <a href=\"https://metacpan.org/pod/Test\" rel=\"nofollow noreferrer\"><code>Test.pm</code></a> is already taken).</p>\n\n<p>You should run <code>h2xs</code> <strong>before</strong> writing your code - as it generates a module skeleton for you fill in. I hope it hasn't overwritten your code with an almost empty file! It's also worth noting that most people stopped using <code>h2xs</code> many years ago. These days we have tools like <a href=\"https://metacpan.org/pod/Module::Starter\" rel=\"nofollow noreferrer\">Module::Starter</a>.</p>\n\n<p>Then, running, <code>make install</code> (which you need to do with root permissions - so usually with <code>sudo</code>) is what installs your module into the system libraries. There should be no need to run that <code>cp</code> command afterwards.</p>\n\n<p>As for why your code doesn't find the module, there are many possible reasons. Are you using Perl 5.10 or do you have other Perl versions installed? What does the code look like that you are trying to use? Does test.pm still include the code you think it does?</p>\n\n<p>Need more information to be much help here.</p>\n"}], "owner": {"reputation": 75, "user_id": 4145455, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdce2f96448e8d2bff91edef1b02fefd?s=128&d=identicon&r=PG&f=1", "display_name": "JunhuiLi", "link": "https://stackoverflow.com/users/4145455/junhuili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 45814553, "answer_count": 1, "score": 0, "last_activity_date": 1503403708, "creation_date": 1503391178, "question_id": 45812808, "link": "https://stackoverflow.com/questions/45812808/failed-to-install-my-own-perl-modulepm-file", "title": "failed to install my own perl module(pm file)", "body": "<p>I have made my own perl modules(pm files),named test.pm</p>\n\n<pre><code>package test;\nuse Exporter;\nuse strict;\nuse File::Basename qw(basename dirname);\nuse Cwd qw(abs_path);\nuse File::Path qw(make_path);\nuse FindBin qw($Bin $Script);\nBEGIN {\n        our @ISA = qw(Exporter);\n        our @EXPORT = qw(mkdirOrDie);\n        our $VERSION = 1.0;\n}\n\nsub mkdirOrDie\n{\n    my ($dir) = @_ ;\n    if(!-d $dir){\n        make_path($dir);\n        $dir=abs_path($dir);\n#       timeLog(\"Directory Created: $dir\");\n    }\n}\n</code></pre>\n\n<p>and I tried to install this module as follows,</p>\n\n<pre><code>h2xs -AX -n  test\n\nperl Makefile.PL\nmake\nmake install\n</code></pre>\n\n<p>there is no error,and I copy the <code>test.pm</code> to <code>/usr/lib64/perl5/5.10.0/</code>,but when i call sub function using test, an error has occurred,</p>\n\n<pre><code>Undefined subroutine &amp;main::mkdirOrDie called at /to/my/path/main.pl line 92\n</code></pre>\n\n<p>is there something i ignored?</p>\n"}, {"tags": ["perl", "timezone", "localtime"], "answers": [{"comments": [{"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503427063, "post_id": 45820878, "comment_id": 78607670, "body": "I would if I could, but that library isn&#39;t available. Yes, adding it is probably the only alternative."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503428363, "post_id": 45820878, "comment_id": 78608368, "body": "Yes, I meant that I have to install it, but I need it in lots of boxes, so it&#39;s not that straightforward."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503429480, "post_id": 45820878, "comment_id": 78608913, "body": "You can zip up the <code>blib</code> directory obtained from <code>perl MakeFile.PL ; make</code> and simply copy it to machines with the same Perl setup."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503430094, "post_id": 45820878, "comment_id": 78609208, "body": "Yes I can, but I think there must be some way to do it without DateTime library."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503430791, "post_id": 45820878, "comment_id": 78609545, "body": "Sure, you could use something worse. I can&#39;t think of any other module other than DateTime::TimeZone that provides time zone data, but you might be able to find one if you looked. Also, there&#39;s gotta be a web site you could screen scrape."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503431172, "post_id": 45820878, "comment_id": 78609719, "body": "Yes, I agree that DateTime is the best way, but for my case installing that library isn&#39;t preferable."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1503429314, "last_edit_date": 1503429314, "creation_date": 1503413404, "answer_id": 45820878, "question_id": 45810071, "link": "https://stackoverflow.com/questions/45810071/tzset-setting-tz-env-variable-doesnt-work-under-windows/45820878#45820878", "title": "tzset + setting TZ env variable doesn&#39;t work under windows", "body": "<pre><code>use DateTime qw( );\n\nmy $dt = DateTime-&gt;now( time_zone =&gt; 'America/New_York' );\nreturn $dt-&gt;hour &gt; 9 &amp;&amp; $dt-&gt;hour &lt; 14 || $dt-&gt;hour == 9 &amp;&amp; $dt-&gt;minute &gt; 30;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1504298606, "post_id": 45826588, "comment_id": 78976413, "body": "@user1289 is it possible you are doing this under apache?  show what you tried that didn&#39;t work"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1503454471, "last_edit_date": 1503454471, "creation_date": 1503434335, "answer_id": 45826588, "question_id": 45810071, "link": "https://stackoverflow.com/questions/45810071/tzset-setting-tz-env-variable-doesnt-work-under-windows/45826588#45826588", "title": "tzset + setting TZ env variable doesn&#39;t work under windows", "body": "<p>Windows doesn't use Olson timezones.</p>\n\n<p>Try <code>$ENV{TZ} = 'EST5EDT';</code></p>\n\n<p>For example,</p>\n\n<pre><code>use feature qw( say );\nuse POSIX qw( tzset );\nfor my $tz (qw( EST5EDT PST8PDT )) {\n   local $ENV{TZ} = $tz;\n   tzset();\n   say(\"$tz: \", scalar(localtime));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>EST5EDT: Tue Aug 22 22:14:04 2017\nPST8PDT: Tue Aug 22 19:14:04 2017\n</code></pre>\n"}], "owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503454471, "creation_date": 1503382283, "question_id": 45810071, "link": "https://stackoverflow.com/questions/45810071/tzset-setting-tz-env-variable-doesnt-work-under-windows", "title": "tzset + setting TZ env variable doesn&#39;t work under windows", "body": "<p>I'm trying to get current NY time. This code works under Linux, but gives local time under windows.</p>\n\n<pre><code>use POSIX qw(tzset);\n\nsub is_time\n{\n    $ENV{TZ} = 'America/New_York';\n    tzset();\n\n    my ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime();\n    if (($hour &gt; 9 &amp;&amp; $hour &lt; 14) || ($hour == 9 &amp;&amp; $min &gt; 30))\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>What am I doing wrong? Is there an alternative way to do this in Windows?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503381669, "post_id": 45809397, "comment_id": 78577291, "body": "You mean you want to compare, but without using the test module? You&#39;re asking how to write the code yourself which is similar to what the test is using? If so, looking inside the source of <code>Test::More</code> could give you the answers you need. You can brows the source here: <a href=\"https://metacpan.org/source/EXODIST/Test-Simple-1.302086/lib/Test/More.pm\" rel=\"nofollow noreferrer\">metacpan.org/source/EXODIST/Test-Simple-1.302086/lib/Test/&hellip;</a>"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503381943, "post_id": 45809397, "comment_id": 78577409, "body": "Hi @piojo, i can use the test module but i am not sure how to compare all the <code>$key</code> for the hash and is it a possible way to change the output pattern for this <code>Test::More</code> module?"}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503382054, "post_id": 45809397, "comment_id": 78577456, "body": "I&#39;m just trying to understand what you&#39;re really asking--do you want a deep comparison, or are you trying to get a deep comparison that ignores a certain level of keys?"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503382514, "post_id": 45809397, "comment_id": 78577670, "body": "Hi @piojo, the final objective is to compare the <code>$line[$j] $line1[$j+1]</code> but this only be done when all the key in front are match. The comparison result using <code>Test::More</code> is good enough but i would like to compare all the <code>$key</code> and <code>$key1</code> match and not only one like what i show above. And if i can output the matching result by my own format will be great. For example i would like to display like <code>$key at $row $col no match with value $line[$j] $line[$j+1] ( expected value $line1[$j] $line1[$j+1]</code>"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503382812, "post_id": 45809397, "comment_id": 78577805, "body": "@piojo, thanks for the advise, i has make some modification in my question for better understanding"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503385625, "post_id": 45809397, "comment_id": 78579397, "body": "@Tim Do you want to fix the index <code>$j</code> in <code>@line</code> and <code>@line1</code>? Or do you want the comparison to be done for the whole arrays, starting with <code>$j = 0</code> and comparing first <code>&quot;$line[0] $line[1]&quot;</code> with <code>&quot;$line1[0] $line1[1]&quot;</code>, then comparing <code>&quot;$line[1] $line[2]&quot;</code> with <code>&quot;$line1[1] $line1[2]&quot;</code>, and so on?"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503386584, "post_id": 45809397, "comment_id": 78580021, "body": "Hi @H&#229;konH&#230;gland, the comparison will done in pair starting from <code>$j = 0</code> and comparing first <code>$line[0] $line[1]</code> and next <code>$line[2] $line[3]</code>. I have edit my question. Thanks"}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503387058, "post_id": 45809397, "comment_id": 78580359, "body": "The test will be easiest if it&#39;s a recursive function, which also keeps track of how deep it has searched--it has to remember the &quot;path&quot; (all the keys) so it can list that in the error message. Just compare the key list, then recurse with a comparison on each key. The base case will be comparing plain values (not containers). There&#39;s no simple way to get around writing the code. It would be easier if you just wanted a true/false answer, though."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503387641, "post_id": 45809397, "comment_id": 78580756, "body": "I am still not sure about what you are trying to do. Let&#39;s say <code>@line = (0, 1, 2, 3)</code> and <code>@line1 = (0, 1, 4, 5)</code>. Then suppose <code>$key eq $key1</code> and <code>&quot;$row $col&quot; eq &quot;$row1 $col1&quot;</code>. Further assume <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;0 1&quot;</code> and <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;0 1&quot;</code>. Then, now what is the purpose of introducing the <code>@line</code>, <code>@line1</code> and  <code>$j</code> variables?  What output would you expect in this case? Something like <code>&quot;$key at $row $col no match with value 2 3 ( expected value 4 5 )&quot;</code>? But this does not make sense to me. Please clarify."}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503390948, "post_id": 45809397, "comment_id": 78582848, "body": "@H&#229;konH&#230;gland, i has modified my question for better understanding. Basically my $line and $line1 is the line from a huge file for example my <code>@line=(1 2 3 4 5 6 7 8) and @line1=(1 2 3 3 5 6 7 7)</code> when <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;1 2&quot;</code> it will match with <code>%hash1</code> but when come to second part when <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;3 4&quot;</code> it will not match with <code>%hash1 which = 3 3</code> then print the ouput <code>$key at $row $col no match with value 2 3 ( expected value 3 3 )&quot;</code>. The purpose to introduce <code>$j</code> is because the value compare is come in pairs"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503391606, "post_id": 45809397, "comment_id": 78583294, "body": "@Tim You say <i>&quot;..when <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;1 2&quot;</code>&quot;</i>, then later you say <i>&quot;..when <code>$hash{key}{$key}{&quot;$row $col&quot;} eq &quot;3 4&quot;</code>&quot;</i>. Does this this mean that <code>%hash</code> changes value somehow during the comparison operation? I thought that <code>%hash</code> and <code>%hash1</code> were fixed, and you wanted to compare them from that point of view."}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503391897, "post_id": 45809397, "comment_id": 78583510, "body": "@H&#229;konH&#230;gland, i will store all the value inside <code>%hash</code> and <code>%hash1</code>. When all the value from the file stored. i will make the comparison between <code>%hash</code> and <code>%hash1</code>. The value will not change during comparison process."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1503392481, "post_id": 45809397, "comment_id": 78583957, "body": "@Tim Sorry, I give up. Please try to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503394063, "post_id": 45809397, "comment_id": 78585069, "body": "@H&#229;konH&#230;gland, i add the code i store the thing inside the hash but i am not sure how to continue for the comparison part. Hope you can understand this."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1503516917, "post_id": 45809397, "comment_id": 78654148, "body": "You should check out chapter 1 of  Higher Order Perl.  MJD does a great job of explaining how to use recursion to walk a data structure.  He also demonstrates how you can use callback functions to compose complex behaviors (such as customized reporting).   <a href=\"https://hop.perl.plover.com/book/\" rel=\"nofollow noreferrer\">hop.perl.plover.com/book</a>"}], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503473569, "post_id": 45814232, "comment_id": 78623825, "body": "Hi @Hakon, i try to modified your code to print the thing inside output file but it does not work. I try to change <code>say</code> to <code>print FILE</code> but the file print out is empty. Do you know what is the problem?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503473809, "post_id": 45814232, "comment_id": 78624031, "body": "@Tim Hi. It difficult for me to tell why its not printing without seeing more of your code. You could try send me the code, and I will have a look at it."}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503474501, "post_id": 45814232, "comment_id": 78624487, "body": "Hi @Hakon, can i edit your answer by adding the line i add in command?I dont know how to send you my code"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1503396050, "last_edit_date": 1503396050, "creation_date": 1503395179, "answer_id": 45814232, "question_id": 45809397, "link": "https://stackoverflow.com/questions/45809397/best-way-to-compare-multi-dimension-hash-in-perl/45814232#45814232", "title": "Best way to compare multi-dimension hash in perl", "body": "<p>Here is an example that will compare nested hashes with string values:</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse feature qw(say);\nuse warnings;\nuse strict;\n\nmy %hash;\nmy %hash1;\n\n$hash{\"key\"}{A}{\"2 3\"}= \"1 2\";\n$hash1{\"key\"}{A}{\"2 3\"}=\"2 3\";\n$hash{\"key\"}{B}{\"2 3\"}= \"1 2\";\n$hash1{\"key\"}{C}{\"2 3\"}=\"2 3\";\n\ncompare(\\%hash, \\%hash1);\n\nsub compare {\n    return _compare( @_, \"\" );\n}\n\nsub get_key_str { return $_[0] . '{' . $_[1] . '}' }\n\nsub _process_key {\n    my ( $h1, $h2, $info, $key, $str1, $str2 ) = @_;\n\n    if ( exists $h2-&gt;{$key} ) {\n        my $val1 = $h1-&gt;{$key};\n        my $val2 = $h2-&gt;{$key};\n        if ( ref $val1 eq \"HASH\" and ref $val2 eq \"HASH\" ) {\n            _compare( $val1, $val2, get_key_str( $info, $key ) );\n        }\n        else {\n            die \"Expected string value\" if ref $val1 or ref $val2;\n            if ( $val1 ne $val2 ) {\n                say \"Value '$val1' in $str1 hash for key \" . get_key_str( $info, $key )\n                  . \" does not match value '$val2' in $str2 hash\";\n            }\n        }\n    }\n    else {\n        my $cur_key = get_key_str( $info, $key );\n        say \"Got key $cur_key in $str1 hash, but missing in $str2 hash\"; \n    }\n}\n\n\nsub _compare {\n    my ( $h1, $h2, $info ) = @_;\n\n    my %processed_keys;\n    for (keys %$h1) {\n        _process_key( $h1, $h2, $info, $_, \"first\", \"second\" );\n        $processed_keys{$_}++;\n    }\n    for (keys %$h2) {\n        next if exists $processed_keys{$_};\n        _process_key( $h2, $h1, $info, $_, \"second\", \"first\" );\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Got key {key}{B} in first hash, but missing in second hash\nValue '1 2' in first hash for key {key}{A}{2 3} does not match value '2 3' in second hash\nGot key {key}{C} in second hash, but missing in first hash\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 45814232, "answer_count": 1, "score": 2, "last_activity_date": 1503396050, "creation_date": 1503379094, "last_edit_date": 1503394010, "question_id": 45809397, "link": "https://stackoverflow.com/questions/45809397/best-way-to-compare-multi-dimension-hash-in-perl", "title": "Best way to compare multi-dimension hash in perl", "body": "<p>I want to write a script that can compare two multi-dimension hash to see whether they match or not. This two hash has same value of key, the comparison will done in a pair mean starting with <code>$j=0</code> first compare <code>$line[0] $line[1]</code> then follow by <code>$line[2] $line[3]</code></p>\n\n<pre><code>$hash{\"key\"}{$key}{\"$row $col\"}= \"$line[$j] $line[$j+1]\";\n$hash1{\"key\"}{$key1}{\"$row1 $col1\"}=\"$line1[$j] $line1[$j+1]\";\n</code></pre>\n\n<p>my $line and $line1 is take from a huge file and will process the huge file line by line. For example:</p>\n\n<pre><code>@line = 1 2 3 4 5 6 7 8 #fst line from file1\n@line1 = 1 2 3 3 4 5 6 7 7 #fst line from file2\n</code></pre>\n\n<p>when <code>$key</code> and <code>$key1</code> match the scripts will continue to compare the <code>$row $col</code> then lastly compare <code>$line[$j] $line[$j+1]</code>. I am trying to use one of the module <code>Test::More</code> that mention at previous similar question but it can only compare the 1st not matching and the output is in default format.</p>\n\n<pre><code>not ok 1 - data structures should be the same\n#   Failed test 'data structures should be the same'\n#   at hash_check1.pl line 80.\n#     Structures begin differing at:\n#          $got-&gt;{key}{100}{2 3} = '62 19'\n#     $expected-&gt;{key}{100}{2 3} = '12 24'\n# Tests were run but no plan was declared and done_testing() was not seen.\n</code></pre>\n\n<p>Any best way to compare this type of multi-dimension hash?</p>\n\n<p>8/22 Edited</p>\n\n<p>If <code>Test::More</code> module is able to compare all the <code>$key</code> match for two hash i can take that as well but if i can output the matching and non matching in my own prefer format will be great. For example i would like to output like</p>\n\n<pre><code>$key at $row $col no match with value $line[$j] $line[$j+1] ( expected value $line1[$j] $line1[$j+1] )\n</code></pre>\n\n<p>8/22 Edited</p>\n\n<p>Below is part of my code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Test::More;\n\nopen ( FILE1 , '&lt;', \"file.txt\" ) or die $!;\nopen ( FILE2 , '&lt;' , \"file1.txt\" ) or die $!;\n\nchomp (my @file1 = &lt;FILE1&gt;);\nchomp (my @file2 = &lt;FILE2&gt;);\nmy %hash=();\nmy %hash1=();\n\nfor ( $i =0 ; $i&lt;=511 ; $i++ ) {\n    my @line = split(\" \",$file1[$i]);\n    my @line1 = split(\" \",$file2[$i]);\n    my $key = ($i+1)*10;\n    my $key1 = ($i+2)*10;\n\n    for ( $j=0; $j&lt;=15 ; $j+=2){\n          my $col = hex($j);\n          my $col1 = hex($j+1);\n          $hash{\"key\"}{$key}{\"$row $col1\"}= \"$line[$j] $line[$j+1]\";\n          $hash1{\"key\"}{$key1}{\"$row1 $col1\"}= \"$line1[$j] $line1[$j+1]\";\n    }\n}\n\n##############comparison part start here###################\nis_deeply(\\%hash, \\%hash1, 'data structures should be the same'); #can only print one mismatch\n\n################Any better way?###########\n</code></pre>\n"}, {"tags": ["perl", "environment-variables"], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1503374915, "post_id": 45808752, "comment_id": 78575097, "body": "I can get it just be doing <code>${PATH}</code>.  Why?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1503375321, "post_id": 45808752, "comment_id": 78575184, "body": "Did you have <code>use Env;</code>?"}, {"owner": {"reputation": 134, "user_id": 8231643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e51c45622c2a77d63cdee01bf9ac87c?s=128&d=identicon&r=PG&f=1", "display_name": "Prabhakaran Ravichandran", "link": "https://stackoverflow.com/users/8231643/prabhakaran-ravichandran"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 1, "creation_date": 1503375482, "post_id": 45808752, "comment_id": 78575231, "body": "NO u dont need to use any cpan module. u can directly use $ENV data structure to access environment variables"}], "tags": [], "owner": {"reputation": 134, "user_id": 8231643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e51c45622c2a77d63cdee01bf9ac87c?s=128&d=identicon&r=PG&f=1", "display_name": "Prabhakaran Ravichandran", "link": "https://stackoverflow.com/users/8231643/prabhakaran-ravichandran"}, "is_accepted": false, "score": 3, "last_activity_date": 1503374889, "creation_date": 1503374889, "answer_id": 45808752, "question_id": 45808721, "link": "https://stackoverflow.com/questions/45808721/environment-variables-in-perl/45808752#45808752", "title": "Environment variables in perl", "body": "<p>Use $ENV is predefined variable format in perl</p>\n\n<pre><code>print $ENV{PATH};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 11, "last_activity_date": 1574319849, "last_edit_date": 1574319849, "creation_date": 1503375829, "answer_id": 45808883, "question_id": 45808721, "link": "https://stackoverflow.com/questions/45808721/environment-variables-in-perl/45808883#45808883", "title": "Environment variables in perl", "body": "<p>The <a href=\"http://perldoc.perl.org/Env.html\" rel=\"nofollow noreferrer\">Env</a> says</p>\n\n<blockquote>\n  <p>Perl maintains environment variables in a special hash named <code>%ENV</code>. For when this access method is inconvenient, the Perl module <code>Env</code> allows environment variables to be treated as scalar or array variables.</p>\n</blockquote>\n\n<p>So yes, this is legitimate and the expected use of variables is <code>$PATH</code>, <code>$USER</code>, <code>$HOME</code>, etc.</p>\n\n<p>However, this module</p>\n\n<blockquote>\n  <p>By default it ties all existing environment variables (<code>keys %ENV</code>) to scalars.</p>\n</blockquote>\n\n<p>and I prefer to use the <a href=\"https://perldoc.perl.org/perlvar.html#%ENV\" rel=\"nofollow noreferrer\"><code>%ENV</code> hash</a> directly, rather than its <a href=\"https://perldoc.perl.org/perltie.html\" rel=\"nofollow noreferrer\">tie</a>-ed counterparts. (See the source code for the core <code>Env</code> module on <a href=\"https://metacpan.org/release/Env/source/lib/Env.pm\" rel=\"nofollow noreferrer\">its CPAN page</a>.)</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 5, "last_activity_date": 1503386263, "creation_date": 1503386263, "answer_id": 45811230, "question_id": 45808721, "link": "https://stackoverflow.com/questions/45808721/environment-variables-in-perl/45811230#45811230", "title": "Environment variables in perl", "body": "<p>Yes, this is expected behavior, due to the interaction of two factors:</p>\n\n<ol>\n<li>You used the <code>Env</code> module, which aliases <code>$ENV{PATH}</code> to <code>$PATH</code>.</li>\n</ol>\n\n<p>Note that <code>$ENV{PATH}</code> is <em>always</em> available in Perl.  <code>use Env</code> just adds aliases to the contents of <code>%ENV</code>, it is not needed to make <code>%ENV</code> available:</p>\n\n<pre><code>$ perl -E 'say $ENV{LANG}'\nen_US.UTF-8\n</code></pre>\n\n<ol start=\"2\">\n<li><code>${PATH}</code> is nothing more than a more verbose way of saying <code>$PATH</code>.  The <code>${...}</code> construct (and its cousins, <code>@{...}</code> and <code>%{...}</code>) is most frequently used for interpolation within double-quoted strings, to force Perl to recognize the entire contents of the <code>{...}</code> as a variable name rather than a shorter name followed by literal text, but the syntax is also usable in other contexts.</li>\n</ol>\n\n<p>A simple demonstration of this:</p>\n\n<pre><code>$ perl -E '$foo = \"bar\"; say ${foo}'\nbar\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11277, "favorite_count": 0, "answer_count": 3, "score": 10, "last_activity_date": 1574319849, "creation_date": 1503374630, "last_edit_date": 1503374941, "question_id": 45808721, "link": "https://stackoverflow.com/questions/45808721/environment-variables-in-perl", "title": "Environment variables in perl", "body": "<p>I seem to be able to access environment variables in perl just by doing:</p>\n\n<pre><code>use Env;\nprint ${PATH};\n</code></pre>\n\n<p>Is this expected behaviour?</p>\n\n<p>The <a href=\"http://perldoc.perl.org/Env.html\" rel=\"noreferrer\">Env docs</a> say you need to do <code>$ENV{PATH}</code>.</p>\n"}, {"tags": ["apache", "perl", "localhost", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 7455422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1427a1844d2e78ad058d5a8c323488d4?s=128&d=identicon&r=PG&f=1", "display_name": "tgrim90", "link": "https://stackoverflow.com/users/7455422/tgrim90"}, "edited": false, "score": 0, "creation_date": 1503366811, "post_id": 45807667, "comment_id": 78573401, "body": "can you tell me what the headers should like like in my program, i&#39;m new to cgi and the link you provided is honestly overwhelming to me. thanks"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503369252, "post_id": 45807667, "comment_id": 78573891, "body": "On Windows, <a href=\"https://httpd.apache.org/docs/2.4/mod/core.html#scriptinterpretersource\" rel=\"nofollow noreferrer\">ScriptInterpreterSource</a> is a useful setting."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1503365733, "creation_date": 1503365733, "answer_id": 45807667, "question_id": 45807523, "link": "https://stackoverflow.com/questions/45807523/how-do-i-run-a-cgi-script-on-an-apache-web-server/45807667#45807667", "title": "How do I run a cgi script on an apache web server", "body": "<p>I see two problems.</p>\n\n<ol>\n<li><p>Your CGI script isn't actually CGI compliant -- it needs to output headers before the document body. Consider using the <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">CGI</a> module to handle some of this for you.</p></li>\n<li><p>You're missing a leading slash in the shebang. It should be <code>#!/usr/bin/perl</code>. (And make sure that Perl is actually installed at that path.)</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 7455422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1427a1844d2e78ad058d5a8c323488d4?s=128&d=identicon&r=PG&f=1", "display_name": "tgrim90", "link": "https://stackoverflow.com/users/7455422/tgrim90"}, "edited": false, "score": 0, "creation_date": 1503421174, "post_id": 45812124, "comment_id": 78604602, "body": "this code presents the same exact error as my code and why is cgi bad to learn?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 319, "user_id": 7455422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1427a1844d2e78ad058d5a8c323488d4?s=128&d=identicon&r=PG&f=1", "display_name": "tgrim90", "link": "https://stackoverflow.com/users/7455422/tgrim90"}, "edited": false, "score": 0, "creation_date": 1503423612, "post_id": 45812124, "comment_id": 78605821, "body": "@tgrim90: Googling the error message gave me this link - <a href=\"https://forum.xojo.com/20697-couldn-t-create-child-process-720002-error-when-deploying-on-wi/0\" rel=\"nofollow noreferrer\">forum.xojo.com/&hellip;</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 319, "user_id": 7455422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1427a1844d2e78ad058d5a8c323488d4?s=128&d=identicon&r=PG&f=1", "display_name": "tgrim90", "link": "https://stackoverflow.com/users/7455422/tgrim90"}, "edited": false, "score": 0, "creation_date": 1503425116, "post_id": 45812124, "comment_id": 78606686, "body": "@tgrim90: And as for why you shouldn&#39;t learn CGI - well, just because there are better tools available. Something based on PSGI is easier to develop with, more flexible and more powerful."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1503389005, "creation_date": 1503389005, "answer_id": 45812124, "question_id": 45807523, "link": "https://stackoverflow.com/questions/45807523/how-do-i-run-a-cgi-script-on-an-apache-web-server/45812124#45812124", "title": "How do I run a cgi script on an apache web server", "body": "<p>Please don't learn CGI programming in 2017. Take a look at <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> for a gentle introduction to some modern ways to write web programs in Perl.</p>\n\n<p>Having said that, the solutions to your immediate problem are to:</p>\n\n<ul>\n<li>Fix the shebang line in your code</li>\n<li>Output the CGI header before your HTML.</li>\n</ul>\n\n<p>I'm using the CGI module to produce the header. I've also updated your HTML to look like something that was written in the last ten years (lower-case tags, using CSS rather than presentation attributes, HTML5 doctype, indentation).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics; # Remove before putting into production\n\nuse CGI 'header';\n\nmy $time = localtime;\nmy $remote_id = $ENV{REMOTE_HOST} || $ENV{REMOTE_ADDR};\nmy $admin_email = $ENV{SERVER_ADMIN};\n\nprint header;\n\nprint &lt;&lt;END_OF_PAGE;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;style type='text/css'&gt;\nbody {\n  background-color: #ffffff;\n}\n    &lt;/style&gt;\n    &lt;title&gt;Welcome to Mike's Mechanics Database&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;img src=\"/images/mike.jpg\" ALT=\"Mike's Mechanics\"&gt;  \n    &lt;p&gt;Welcome from $remote_host! What will you find here? You'll\n      find a list of mechanics from around the country and the type\n      of service to expect -- based on user input and  suggestions.&lt;/p&gt;\n    &lt;p&gt;What are you waiting for?\n      Click &lt;a href=\"/cgi/list.cgi\"&gt;here&lt;/a&gt; to continue.&lt;/p&gt;\n    &lt;hr&gt;\n    &lt;p&gt;The current time on this server is: $time.&lt;/p&gt;\n    &lt;p&gt;If you find any problems with this site or have any \n      suggestions, please email\n      &lt;a href=\"mailto:$admin_email\"&gt;$admin_email&lt;/a&gt;.&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEND_OF_PAGE\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 7455422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1427a1844d2e78ad058d5a8c323488d4?s=128&d=identicon&r=PG&f=1", "display_name": "tgrim90", "link": "https://stackoverflow.com/users/7455422/tgrim90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503389005, "creation_date": 1503364156, "last_edit_date": 1503364586, "question_id": 45807523, "link": "https://stackoverflow.com/questions/45807523/how-do-i-run-a-cgi-script-on-an-apache-web-server", "title": "How do I run a cgi script on an apache web server", "body": "<p>I'm not sure if this the correct place to be asking this question. But I am having trouble getting my cgi scripts to run on my XAMPP Server (using windows 8 and apache) here is my cgi script:</p>\n\n<pre><code>#!usr/bin/perl\n\nuse warnings;\nuse diagnostics;\n\nuse strict;\n\nmy $time = localtime;\nmy $remote_id = $ENV{REMOTE_HOST} || $ENV{REMOTE_ADDR};\nmy $admin_email = $ENV{SERVER_ADMIN};\n\nprint &lt;&lt;END_OF_PAGE;\n&lt;HTML&gt;\n&lt;HEAD&gt;  \n&lt;TITLE&gt;Welcome to Mike's Mechanics Database&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&lt;BODY BGCOLOR=\"#ffffff\"&gt;  \n&lt;IMG SRC=\"/images/mike.jpg\" ALT=\"Mike's Mechanics\"&gt;  \n&lt;P&gt;Welcome from $remote_host! What will you find here? You'll find a list of mechanics \nfrom around the country and the type of    service to expect -- based on user input and \nsuggestions.&lt;/P&gt;  \n&lt;P&gt;What are you waiting for? Click &lt;A HREF=\"/cgi/list.cgi\"&gt;here&lt;/A&gt;    \nto continue.&lt;/P&gt;  &lt;HR&gt;  &lt;P&gt;The current time on this server is: $time.&lt;/P&gt;  \n&lt;P&gt;If you find any problems with this site or have any suggestions,    \nplease email &lt;A HREF=\"mailto:$admin_email\"&gt;$admin_email&lt;/A&gt;.&lt;/P&gt;\n&lt;/BODY&gt;\n&lt;/HTML&gt;\nEND_OF_PAGE\n</code></pre>\n\n<p>and here is the full error I am getting:</p>\n\n<p>**Server error!\nThe server encountered an internal error and was unable to complete your request.\nError message: \ncouldn't create child process: 720002: welcome.cgi\nIf you think this is a server error, please contact the webmaster.\nError 500\nlocalhost\nApache/2.4.25 (Win32) OpenSSL/1.0.2j PHP/5.6.30</p>\n\n<p>finally, here is the entries in the apache error log, corresponding to the problem</p>\n\n<p>[Mon Aug 21 20:46:19.403512 2017] [cgi:error] [pid 1436:tid 1724] (OS 2)The system cannot find the file specified.  : [client ::1:61381] couldn't create child process: 720002: welcome.cgi, referer: <a href=\"http://localhost/Perl/\" rel=\"nofollow noreferrer\">http://localhost/Perl/</a></p>\n\n<p>[Mon Aug 21 20:46:19.404515 2017] [cgi:error] [pid 1436:tid 1724] (OS 2)The system cannot find the file specified.  : [client ::1:61381] AH01223: couldn't spawn child process: C:/xampp/htdocs/Perl/welcome.cgi, referer: <a href=\"http://localhost/Perl/\" rel=\"nofollow noreferrer\">http://localhost/Perl/</a></p>\n"}, {"tags": ["linux", "perl", "grid"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 5219266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa9f4d5e1062df4eb28dac15f8d75dd?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/5219266/sagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1503389648, "creation_date": 1503389648, "answer_id": 45812330, "question_id": 45807340, "link": "https://stackoverflow.com/questions/45807340/asmcmd-returns-with-error-cant-locate-loadable-object-for-module-dbi-in-inc/45812330#45812330", "title": "asmcmd returns with error &quot; Can&#39;t locate loadable object for module DBI in @INC&quot;", "body": "<p>install DBI module using cpan or ppm in case of Activestate. </p>\n"}], "owner": {"reputation": 1, "user_id": 8497558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9c189b9898cf8c5d0fa00b5320a22c?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Omer", "link": "https://stackoverflow.com/users/8497558/ahmed-omer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503389648, "creation_date": 1503362531, "question_id": 45807340, "link": "https://stackoverflow.com/questions/45807340/asmcmd-returns-with-error-cant-locate-loadable-object-for-module-dbi-in-inc", "title": "asmcmd returns with error &quot; Can&#39;t locate loadable object for module DBI in @INC&quot;", "body": "<p>[grid@srv1 ~]$ asmcmd</p>\n\n<p>Can't locate loadable object for module DBI in @INC (@INC contains: /u01/app/12.1.0/grid/perl/lib/5.14.1/x86_64-linux-thread-multi /u01/app/12.1.0/grid/perl/lib/5.14.1 /u01/app/12.1.0/grid/perl/lib/site_perl/5.14.1/x86_64-linux-thread-multi /u01/app/12.1.0/grid/perl/lib/site_perl/5.14.1 /u01/app/12.1.0/grid/lib /u01/app/12.1.0/grid/lib/asmcmd /u01/app/12.1.0/grid/rdbms/lib/asmcmd /u01/app/12.1.0/grid/perl/lib/site_perl/5.14.1/x86_64-linux-thread-multi /u01/app/12.1.0/grid/perl/lib/site_perl/5.14.1 /u01/app/12.1.0/grid/perl/lib/5.14.1/x86_64-linux-thread-multi /u01/app/12.1.0/grid/perl/lib/5.14.1 .) at /u01/app/12.1.0/grid/perl/lib/5.14.1/x86_64-linux-thread-multi/DBI.pm line 263\nBEGIN failed--compilation aborted at /u01/app/12.1.0/grid/perl/lib/5.14.1/x86_64-linux-thread-multi/DBI.pm line 263.\nCompilation failed in require at /u01/app/12.1.0/grid/lib/asmcmdshare.pm line 320.\nBEGIN failed--compilation aborted at /u01/app/12.1.0/grid/lib/asmcmdshare.pm line 320.\nCompilation failed in require at /u01/app/12.1.0/grid/bin/asmcmdcore line 183.\nBEGIN failed--compilation aborted at /u01/app/12.1.0/grid/bin/asmcmdcore line 183.</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503357118, "post_id": 45806519, "comment_id": 78571228, "body": "yes i had tried that. I get new error:  <code>$ .&#47;test.pl DBIx::Class::ResultSource::_minimal_valueset_satisfying_cons&zwnj;&#8203;traint(): Unable to satisfy requested constraint &#39;primary&#39;, missing values for column(s): &#39;node_id&#39; at .&#47;test.pl line 80</code>"}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503357198, "post_id": 45806519, "comment_id": 78571242, "body": "` sub addNode { \tmy $node = shift; my $lcNode = lc($node); \tmy $id = $schema \t\t-&gt;resultset(&#39;Node&#39;) \t\t-&gt;find_or_create \t\t( \t\t\t{ node_name =&gt; $lcNode }, \t\t\t{ key =&gt; &#39;primary&#39; } \t\t); \treturn $id; } `"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503357201, "post_id": 45806519, "comment_id": 78571243, "body": "@rajeev Yes, that&#39;s because your code makes no sense. If you want to find a row by its primary key (<code>node_id</code>), you need to specify the id value you&#39;re looking for."}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503358146, "post_id": 45806519, "comment_id": 78571454, "body": "thx. that fixed it. I think it use to work earlier (i am not very frequent user so i may be wrong). but now i am confused why is it returning a hash&#39;? i think doc says it should return value of found record from Pri Index/Key.  When i print using Dumper i see the whole database (every table) is in that response/hash... <code>sub addNode { \tmy $node = shift; my $lcNode = lc($node); \tmy $id = $schema \t\t-&gt;resultset(&#39;Node&#39;) \t\t-&gt;find_or_create \t\t( \t\t\t{ node_name =&gt; $lcNode } \t\t); \tprint Dumper($id); \treturn $id; }</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503358354, "post_id": 45806519, "comment_id": 78571490, "body": "<code>find_or_create</code> returns a result object (representing the (found or newly added) row). Result objects are internally based on hashes and contain references to their DB schema, which is why you see pretty much everything if you blindly dump such an object."}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503358556, "post_id": 45806519, "comment_id": 78571510, "body": "thank you. sorry i am totally rusted, i hope to get my sheen back in few days (however little it was in first place :) ). I was able to get the object from hash, once i jogged my memory, your response certainly were valuable."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1503355390, "creation_date": 1503355390, "answer_id": 45806519, "question_id": 45806405, "link": "https://stackoverflow.com/questions/45806405/index-is-not-visible-to-dbixclass/45806519#45806519", "title": "index is not visible to DBIx::Class", "body": "<p><a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet#find\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBIx::Class::ResultSet#find</a>:</p>\n\n<blockquote>\n  <p>To aid with preparing the correct query for the storage you may supply the <code>key</code> attribute, which is the name of a <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSource#add_unique_constraint\" rel=\"nofollow noreferrer\">unique constraint</a> (<strong>the unique constraint corresponding to the <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSource#primary_columns\" rel=\"nofollow noreferrer\">primary columns</a> is always named <code>primary</code></strong>).</p>\n</blockquote>\n\n<p>(Emphasis mine.)</p>\n\n<p>In other words, to use the primary key, you need to specify <code>{ key =&gt; 'primary' }</code>. Any other <code>key</code> attribute is looked up as the name of an additional unique constraint.</p>\n"}, {"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1503369210, "post_id": 45806819, "comment_id": 78573882, "body": "yeah, i am thinking to replace this with two staements, first a search -&gt;count then if count &lt; 1 then do the add...."}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1503357832, "creation_date": 1503357832, "answer_id": 45806819, "question_id": 45806405, "link": "https://stackoverflow.com/questions/45806405/index-is-not-visible-to-dbixclass/45806819#45806819", "title": "index is not visible to DBIx::Class", "body": "<p>You didn't make clear how <code>addNode</code> should work exactly. But if you want to lookup existing nodes by <code>node_name</code>, you should simply remove the <code>key</code> attribute:</p>\n\n<pre><code>my $id = $schema-&gt;resultset('Node')-&gt;find_or_create(\n    { node_name =&gt; $lcNode }\n);\n</code></pre>\n\n<p>But read the caveat in the <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet#find\" rel=\"nofollow noreferrer\">DBIC documentation</a>:</p>\n\n<blockquote>\n  <p>If no such constraint is found, <code>find</code> currently defaults to a simple <code>search-&gt;(\\%column_values)</code> which may or may not do what you expect. Note that this fallback behavior may be deprecated in further versions. If you need to search with arbitrary conditions - use \"search\". If the query resulting from this fallback produces more than one row, a warning to the effect is issued, though only the first row is constructed and returned as <code>$result_object</code>.</p>\n</blockquote>\n\n<p>You should probably consider adding a unique constraint to <code>node_name</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "is_accepted": true, "score": 0, "last_activity_date": 1503512558, "creation_date": 1503512558, "answer_id": 45846906, "question_id": 45806405, "link": "https://stackoverflow.com/questions/45806405/index-is-not-visible-to-dbixclass/45846906#45846906", "title": "index is not visible to DBIx::Class", "body": "<p>The real ans which came in DBIx list from Henry, is, whatever key you use, the col it corresponds to, should be in the query. all of above are ambiguous, they are not wrong, but they do not clarify the precise fact.</p>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 45846906, "answer_count": 3, "score": 0, "last_activity_date": 1503512558, "creation_date": 1503354665, "last_edit_date": 1503375361, "question_id": 45806405, "link": "https://stackoverflow.com/questions/45806405/index-is-not-visible-to-dbixclass", "title": "index is not visible to DBIx::Class", "body": "<p>I have this small perl code which is going to add a record to a table but I am confused why DBIC is not able to see the primary key?</p>\n\n<p>I am not able to find any answer anywhere. First the names of table and columns were camelCase, which I then changed to underscore but it just won't run :(</p>\n\n<pre><code>$ ./test.pl\nDBIx::Class::ResultSource::unique_constraint_columns(): Unknown unique constraint node_id on 'node' at ./test.pl line 80\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>sub addNode\n{\n    my $node = shift; my $lcNode = lc($node);\n    my $id = $schema\n        -&gt;resultset('Node')\n        -&gt;find_or_create\n        (\n            { node_name =&gt; $lcNode },\n            { key =&gt; 'node_id' }\n        );\n    return $id;\n}\n</code></pre>\n\n<p>table details:</p>\n\n<pre><code>mysql&gt; desc node;\n+------------+-----------------------+------+-----+---------+----------------+\n| Field      | Type                  | Null | Key | Default | Extra          |\n+------------+-----------------------+------+-----+---------+----------------+\n| node_id    | mediumint(5) unsigned | NO   | PRI | NULL    | auto_increment |\n| node_name  | varchar(50)           | NO   |     | NULL    |                |\n| node_notes | varchar(1000)         | YES  |     | NULL    |                |\n+------------+-----------------------+------+-----+---------+----------------+\n3 rows in set (0.00 sec)\n</code></pre>\n\n<p>DBIx::Class::Resultset:</p>\n\n<pre><code>$ cat Node.pm\nuse utf8;\npackage Testdb::Schema::Result::Node;\n\n# Created by DBIx::Class::Schema::Loader\n# DO NOT MODIFY THE FIRST PART OF THIS FILE\n\nuse strict;\nuse warnings;\n\nuse base 'DBIx::Class::Core';\n__PACKAGE__-&gt;table(\"node\");\n__PACKAGE__-&gt;add_columns(\n  \"node_id\",\n  {\n    data_type =&gt; \"mediumint\",\n    extra =&gt; { unsigned =&gt; 1 },\n    is_auto_increment =&gt; 1,\n    is_nullable =&gt; 0,\n  },\n  \"node_name\",\n  { data_type =&gt; \"varchar\", is_nullable =&gt; 0, size =&gt; 50 },\n  \"node_notes\",\n  { data_type =&gt; \"varchar\", is_nullable =&gt; 1, size =&gt; 1000 },\n);\n__PACKAGE__-&gt;set_primary_key(\"node_id\");\n\n\n# Created by DBIx::Class::Schema::Loader v0.07045 @ 2017-08-21 22:14:58\n# DO NOT MODIFY THIS OR ANYTHING ABOVE! md5sum:bWXf98hpLJgNBU93aaRYkQ\n\n\n# You can replace this text with custom code or comments, and it will be preserved on regeneration\n1;\n</code></pre>\n"}, {"tags": ["perl", "tcsh"], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1503342586, "post_id": 45803893, "comment_id": 78565947, "body": "Thanks for the answer.  It doesn&#39;t complain, and it produces a number, but it&#39;s the wrong number :-(.  I did thes commands in rapid succession...          atlhen-vdi3074:/home/dgauthie/WStat/bin[ 440 ] --&gt; cat local_file.dat 0.08     atlhen-vdi3074:/home/dgauthie/WStat/bin[ 441 ] --&gt; uptime      15:10pm  up 10 days  6:11,  23 users,  load average: 0.34, 0.38, 0.36     atlhen-vdi3074:/home/dgauthie/WStat/bin[ 442 ] --&gt;          0.08 isn&#39;t close to 0.36 (I would have accepted 0.35 e.g.)  Not sure where 0.08 is coming from, but it doesn&#39;t look like it&#39;s coming from uptime."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1503343250, "post_id": 45803893, "comment_id": 78566233, "body": "Wait, it&#39;s a problem with uptime I think, not your code."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1503343356, "post_id": 45803893, "comment_id": 78566276, "body": "Oh, no, never mind.  Very stupid mistake.  It&#39;s the correct number for the remote machine.  Duhhhhhh !!!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1503341707, "creation_date": 1503341707, "answer_id": 45803893, "question_id": 45803752, "link": "https://stackoverflow.com/questions/45803752/quoting-print-nf-inside-layers-of-single-and-double-quotes/45803893#45803893", "title": "quoting {print $NF} inside layers of single and double quotes?", "body": "<p>You want the following to be <code>ssh</code>'s second argument:</p>\n\n<pre><code>uptime | awk '{print $NF}'\n</code></pre>\n\n<p>To do that, you simply placed single quotes around it. But that doesn't work because it contains single quotes.</p>\n\n<hr>\n\n<p>You want to build a string that contains <code>$NF</code>, but you did it as follows:</p>\n\n<pre><code>\"...$NF...\"\n</code></pre>\n\n<p>That will place the value of (non-existent) Perl variable <code>$NF</code> in the string.</p>\n\n<hr>\n\n<p>Do it step by step.</p>\n\n<ul>\n<li><p>Static:</p>\n\n<ol>\n<li><p>Remote command:</p>\n\n<pre><code> uptime | awk '{print $NF}'\n</code></pre></li>\n<li><p>Local command:</p>\n\n<pre><code>ssh othermachine 'uptime | awk '\\''{print $NF}'\\''' &gt;local_file.dat\n</code></pre></li>\n<li><p>String literal:</p>\n\n<pre><code>my $local_cmd = q{ssh othermachine 'uptime | awk '\\''{print $NF}'\\''' &gt;local_file.dat}\n</code></pre></li>\n</ol></li>\n<li><p>Dynamic:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $remote_cmd = q{uptime | awk '{print $NF}'};\nmy $local_cmd = shell_quote('ssh', 'othermachine', $remote_cmd) . ' &gt;local_file.dat';\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 0, "last_activity_date": 1503403709, "last_edit_date": 1503403709, "creation_date": 1503384557, "answer_id": 45810694, "question_id": 45803752, "link": "https://stackoverflow.com/questions/45803752/quoting-print-nf-inside-layers-of-single-and-double-quotes/45810694#45810694", "title": "quoting {print $NF} inside layers of single and double quotes?", "body": "<p>Use <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> and let it do the quoting for you:</p>\n\n<pre><code>use Net::OpenSSH;\n\nmy $ssh = Net::OpenSSH-&gt;new($othermachine,\n                            remote_shell =&gt; 'tcsh');\n$ssh-&gt;system({stdout_file =&gt; 'local_file.dat'},\n             'uptime', \\\\'|', 'awk', '{print $NF}')\n  or die \"ssh command failed: \" . $ssh-&gt;error;\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 1, "accepted_answer_id": 45803893, "answer_count": 2, "score": -2, "last_activity_date": 1503403709, "creation_date": 1503341034, "question_id": 45803752, "link": "https://stackoverflow.com/questions/45803752/quoting-print-nf-inside-layers-of-single-and-double-quotes", "title": "quoting {print $NF} inside layers of single and double quotes?", "body": "<p>Stuck trying to figure out how to single quotes withing single quotes within double quotes.  Here's what I'm trying to do....</p>\n\n<p>From perl, I want to run a system command that...\n- does an ssh into a remote machine\n- executes 'uptime' and then plucks the last field out of that (avg load last 15 min).</p>\n\n<pre><code>\\#\\!/usr/bin/env perl   \nmy $cmd = \"ssh othermachine 'uptime | awk '{print $NF}'' &gt; local_file.dat\";   \nsystem($cmd);\n</code></pre>\n\n<p>Of course this won't run ...</p>\n\n<pre><code>% ./try.pl\n\nMissing }.\n%\n</code></pre>\n\n<p>Missing \"}\" ???   Looks like it's interpreting the $NF} as a var? I tried escaping the {} chars with no luck. I tried escaping the $, no luck. I tried a space before the }, no luck but different msg (Undefined variable).  </p>\n\n<p>c-shell BTW and thanks in advance !</p>\n"}, {"tags": ["perl", "daemon", "filehandle"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503354097, "post_id": 45803733, "comment_id": 78570503, "body": "What error did <code>open</code> return? Replace <code>or &quot;cant open the filehandle&quot;</code> with <code>or die(&quot;Can&#39;t open the \\&quot;$filename\\&quot;: $!\\n&quot;);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503354133, "post_id": 45803733, "comment_id": 78570518, "body": "That&#39;s not how File::Temp should be used. <code>$filehandle</code> already contains an open handle to <code>$filename</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503354198, "post_id": 45803733, "comment_id": 78570531, "body": "Keep in mind that Proc::Daemon::Init tries to closes every file handle your process owns except those you tell it not to close."}, {"owner": {"reputation": 245, "user_id": 5483086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-Jy4zcLAdO1g/AAAAAAAAAAI/AAAAAAAAADs/WAgYfacy-7o/photo.jpg?sz=128", "display_name": "aman", "link": "https://stackoverflow.com/users/5483086/aman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503380049, "post_id": 45803733, "comment_id": 78576631, "body": "&quot;cant open the filehandle&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503381290, "post_id": 45803733, "comment_id": 78577136, "body": "Nope, that&#39;s not an error returned by <code>open</code>. Perhaps you should read my comment again: What error did <code>open</code> return? To find out, replace <code>or &quot;cant open the filehandle&quot;</code> with <code>or die(&quot;Can&#39;t open the \\&quot;$filename\\&quot;: $!\\n&quot;);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "is_accepted": false, "score": 0, "last_activity_date": 1503342476, "creation_date": 1503342476, "answer_id": 45804055, "question_id": 45803733, "link": "https://stackoverflow.com/questions/45803733/unable-to-open-a-filehandle-in-a-procdaemoninitd-script-in-perl/45804055#45804055", "title": "Unable to open a filehandle in a Proc::Daemon::Init&#39;d script in perl", "body": "<p>Most likely it is a permission error. </p>\n\n<p>Print the contents of $! it will inform you of the type of error.</p>\n"}], "owner": {"reputation": 245, "user_id": 5483086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-Jy4zcLAdO1g/AAAAAAAAAAI/AAAAAAAAADs/WAgYfacy-7o/photo.jpg?sz=128", "display_name": "aman", "link": "https://stackoverflow.com/users/5483086/aman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503342476, "creation_date": 1503340945, "question_id": 45803733, "link": "https://stackoverflow.com/questions/45803733/unable-to-open-a-filehandle-in-a-procdaemoninitd-script-in-perl", "title": "Unable to open a filehandle in a Proc::Daemon::Init&#39;d script in perl", "body": "<p>I have a perl script which i am running in daemon mode with the following code.</p>\n\n<pre><code>Proc::Daemon::Init()\n\n# Anonymous subroutine.\nmy $sub = sub {\n\n   # Call to the function which opens the filehandle\n   my $content = RandomPackage::GetContent({ $args});\n}\n\n# Forking \nProc::ForkAndForget-&gt;({JOB =&gt; $sub });\n</code></pre>\n\n<p>The RandomPackage::GetContent has the following definition.</p>\n\n<pre><code>use File::Temp;\nsub GetContent {\n   my ($args) = @_;\n   my ($filehandle, $filename) = File::Temp::tempfile();\n\n   open $filehandle, \"&gt;\", $filename or \"cant open the filehandle\";\n   &lt;Some operations&gt;\n   return ;\n }\n</code></pre>\n\n<p>While running the script in daemon mode, I get the error cant open the filehandle.\nAny help is appreciated.</p>\n"}, {"tags": ["perl", "unicode", "encoding"], "comments": [{"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 2, "creation_date": 1503326634, "post_id": 45799683, "comment_id": 78557816, "body": "I don&#39;t know the answer, but I can verify that the byte sequence is \u6d4b\u8bd5. And the second byte sequence gives garbage when decoded as UTF-8. What&#39;s your code like? Where is this byte sequence coming from?"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1503326725, "post_id": 45799683, "comment_id": 78557872, "body": "Use <code>Encode::decode(&#39;utf8&#39;, $data)</code> to convert the byte sequence into an Unicode string."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "reply_to_user": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503326890, "post_id": 45799683, "comment_id": 78557976, "body": "@piojo the byte sequence is from the output of a program I&#39;m using as input. Most of the time it goes through well (I am receiving <code>e6 b5 8b e8 af 95</code>), but sometimes if an earlier input is decoded to UTF-8, this input will become incorrect (<code>c3 a6 c2 b5 c2 8b c3 a8 c2 af c2 95</code>)"}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1503326983, "post_id": 45799683, "comment_id": 78558026, "body": "@salva you mean, to use <code>Encode::decode(&#39;utf8&#39;, $data)</code> for <code>c3 a6 c2 b5 c2 8b c3 a8 c2 af c2 95</code> ? Both <code>c3 a6 c2 b5 c2 8b c3 a8 c2 af c2 95</code> and <code>e6 b5 8b e8 af 95</code> are not in UTF-8."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503327248, "post_id": 45799683, "comment_id": 78558216, "body": "@Sinan&#220;n&#252;r I am reading and printing the output from/to shell script. The input <code>e6 b5 8b e8 af 95</code> is from an output of a C++ program and will be processed by my perl program."}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 1, "creation_date": 1503327574, "post_id": 45799683, "comment_id": 78558456, "body": "I think @JiajuShen is trying to figure out what&#39;s going on with someone else&#39;s program, not his own. The c++ program is a black box, no? You can&#39;t read the code and see what it&#39;s doing?"}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 1, "creation_date": 1503327787, "post_id": 45799683, "comment_id": 78558596, "body": "@JiajuShen Yes, you&#39;re right. It&#39;s being double-encoded."}, {"owner": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1503327845, "post_id": 45799683, "comment_id": 78558650, "body": "@Sinan&#220;n&#252;r Yes, that&#39;s my take on it. This isn&#39;t really a perl question."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "reply_to_user": {"reputation": 4913, "user_id": 1682146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e62f4b6f77a92fb607a5760654891592?s=128&d=identicon&r=PG", "display_name": "piojo", "link": "https://stackoverflow.com/users/1682146/piojo"}, "edited": false, "score": 0, "creation_date": 1503328597, "post_id": 45799683, "comment_id": 78559163, "body": "@piojo thanks for the explanation, I think that might be exactly what&#39;s going on. But can I know why when I checked the encoding using is_utf8, it returns false? I would assume it should return true if the byte sequence is double encoded?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503329094, "post_id": 45799683, "comment_id": 78559448, "body": "Never use <code>is_utf8</code>. It checks the how the string is stored internally, which is unimportant."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503327795, "post_id": 45800359, "comment_id": 78558602, "body": "Yes, and probably the OP&#39;s program is re-encoding the other programs already encoded output rather than decoding it."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "edited": false, "score": 0, "creation_date": 1503328022, "post_id": 45800359, "comment_id": 78558780, "body": "Thank you. I think this might be a problem of the source code I am looking into. The only difference between <code>E6.B5.8B.E8.AF.95</code> and <code>C3.A6.C2.B5.C2.8B.C3.A8.C2.AF.C2.95</code> is that an earlier input is decoded from a UTF-8 string using <code>JSON-&gt;new-&gt;utf8-&gt;decode()</code>. Will the earlier input affect the later one in this case?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503328148, "post_id": 45800359, "comment_id": 78558879, "body": "<code>JSON-&gt;new-&gt;utf8-&gt;decode()</code> expects UTF-8 (<code>E6.B5.8B.E8.AF.95</code>), and returns Unicode Code Points (<code>06D4B.08BD5</code>)."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "edited": false, "score": 0, "creation_date": 1503328365, "post_id": 45800359, "comment_id": 78559021, "body": "@ikegami but the input I decode using <code>JSON-&gt;new-&gt;utf8-&gt;decode()</code> is not <code>\u6d4b\u8bd5</code> but an earlier input. Using the same set of source code, if the input is all ascii, the <code>\u6d4b\u8bd5</code> will not be affected at all. Is it likely some environment settings is altered by using  <code>JSON-&gt;new-&gt;utf8-&gt;decode()</code> ?"}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "edited": false, "score": 0, "creation_date": 1503328398, "post_id": 45800359, "comment_id": 78559038, "body": "Also @ikegami is there a library/approach to prevent double encoding? Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503328503, "post_id": 45800359, "comment_id": 78559102, "body": "Re &quot;<i>if the input is all ascii, the \u6d4b\u8bd5 will not be affected at all.</i>&quot;, That sentence makes no sense; neither &quot;\u6d4b&quot; nor &quot;\u8bd5&quot; are found in ASCII."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503328521, "post_id": 45800359, "comment_id": 78559112, "body": "Re &quot;<i>is there a library/approach to prevent double encoding?</i>&quot;, Yeah, simply don&#39;t do it. Don&#39;t pass UTF-8 where UCP are expected."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503328759, "post_id": 45800359, "comment_id": 78559271, "body": "Re &quot;<i>Is it likely some environment settings is altered by using <code>JSON-&gt;new-&gt;utf8-&gt;decode()</code></i>&quot;, No. It&#39;s not just not likely, it doesn&#39;t happen."}, {"owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "edited": false, "score": 0, "creation_date": 1503328782, "post_id": 45800359, "comment_id": 78559284, "body": "@ikegami if the earlier input (please note that the <code>JSON-&gt;new-&gt;utf8-&gt;decode()</code> is used for an earlier input ) is something like <code>test</code>, the <code>\u6d4b\u8bd5</code> will not be affected, but if the input is <code>\u65e5\u672c</code>, the <code>\u6d4b\u8bd5</code> will be double converted. Is it likely that the decoding of earlier argument affects later?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503328810, "post_id": 45800359, "comment_id": 78559298, "body": "None of that makes sense, and the comments are not the place to ask new questions. You&#39;re just repeating <a href=\"https://stackoverflow.com/q/45788793/589924\">your earlier unanswerable question</a>. Please address the issues raised in the comments of that answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503341032, "post_id": 45800359, "comment_id": 78565207, "body": "...Specifically, please provide a minimal, runable demonstration of the problem."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1503328586, "last_edit_date": 1503328586, "creation_date": 1503327663, "answer_id": 45800359, "question_id": 45799683, "link": "https://stackoverflow.com/questions/45799683/what-is-the-encoding-of-e6-b5-8b-e8-af-95/45800359#45800359", "title": "What is the encoding of e6 b5 8b e8 af 95", "body": "<p><code>06d4b 08bd5</code> are the Unicode Code Points for <code>\u6d4b\u8bd5</code>.</p>\n\n<p><code>b5 8b e8 af 95</code> is the UTF-8 encoding of <code>\u6d4b\u8bd5</code>.</p>\n\n<p><code>c3 a6 c2 b5 c2 8b c3 a8 c2 af c2 95</code> is the UTF-8 encoding of the UTF-8 encoding of <code>\u6d4b\u8bd5</code>.</p>\n\n<pre><code>$ perl -e'\n    use strict;\n    use warnings;\n    use utf8;\n    use open \":std\", \":encoding(UTF-8)\";\n\n    my $s = \"\u6d4b\u8bd5\";\n    print \"$s\\n\";\n    printf \"%v05X\\n\", $s;\n\n    utf8::encode($s);\n    printf \"%v02X\\n\", $s;\n\n    utf8::encode($s);\n    printf \"%v02X\\n\", $s;\n'\n\u6d4b\u8bd5\n06D4B.08BD5\nE6.B5.8B.E8.AF.95\nC3.A6.C2.B5.C2.8B.C3.A8.C2.AF.C2.95\n</code></pre>\n\n<hr>\n\n<pre><code>$ perl -MJSON -e'\n    use strict;\n    use warnings;\n    use utf8;\n    use open \":std\", \":encoding(UTF-8)\";\n\n    my $s = \"\u6d4b\u8bd5\";\n    printf \"%1\\$s (%1\\$v05X)\\n\", $s;\n    my $data = [ $s ];\n    my $json_utf8 = JSON-&gt;new-&gt;utf8-&gt;encode($data);\n    printf \"%v02X\\n\", $json_utf8;\n    $data = JSON-&gt;new-&gt;utf8-&gt;decode($json_utf8);\n    $s = $data-&gt;[0];\n    printf \"%1\\$s (%1\\$v05X)\\n\", $s;\n'\n\u6d4b\u8bd5 (06D4B.08BD5)\n5B.22.E6.B5.8B.E8.AF.95.22.5D\n\u6d4b\u8bd5 (06D4B.08BD5)\n</code></pre>\n"}], "owner": {"reputation": 1790, "user_id": 2934827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/67024440419e02c6c2bfca52faa2c708?s=128&d=identicon&r=PG&f=1", "display_name": "jsh6303", "link": "https://stackoverflow.com/users/2934827/jsh6303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 45800359, "answer_count": 1, "score": -2, "last_activity_date": 1503328586, "creation_date": 1503325745, "last_edit_date": 1503326284, "question_id": 45799683, "link": "https://stackoverflow.com/questions/45799683/what-is-the-encoding-of-e6-b5-8b-e8-af-95", "title": "What is the encoding of e6 b5 8b e8 af 95", "body": "<p>I have a source of text data that includes the byte sequence <code>e6 b5 8b e8 af 95</code>. In the context I believe it should be the Chinese character \"\u6d4b\u8bd5\".</p>\n\n<p>My perl source code is supposed to pick up this byte sequence (unfortunately this is not in UTF-8 and I cannot encode it to UTF-8 and decode back), but under some circumstances the sequence becomes <code>c3 a6 c2 b5 c2 8b c3 a8 c2 af c2 95</code>.</p>\n\n<p>Trying to figure out the likely reasons why <code>c3</code> and <code>c2</code> are added. Is it the problem of double conversion mentioned in <a href=\"https://stackoverflow.com/questions/11546351/what-character-encoding-is-c3-82-c2-bf\">similar question</a>?</p>\n"}, {"tags": ["file", "perl", "fork", "stdout", "stderr"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1507605166, "last_edit_date": 1507605166, "creation_date": 1503347194, "answer_id": 45805038, "question_id": 45797527, "link": "https://stackoverflow.com/questions/45797527/replacing-close-with-open-dev-null/45805038#45805038", "title": "Replacing `close` with `open` `/dev/null`?", "body": "<p>There seem to be a few things to clear up.</p>\n\n<p>The parent does need to <em>reap</em> its child processes (<code>wait</code> or <code>waitpid</code> on <code>SIGCHLD</code>), if that is what you mean by \"<em>wait a response from the child</em>\".  However, if parent exits first the child is re-parented by <code>init</code> and all is well. This is not affected by the child's closing (reopening) of its streams.</p>\n\n<p>As for \"closing\" the streams, they should be redirected (reopened) to <code>/dev/null</code> instead.  See, for instance, <a href=\"http://perldoc.perl.org/perlipc.html#Complete-Dissociation-of-Child-from-Parent\" rel=\"nofollow noreferrer\">Complete disassociation of child from parent in perlipc</a> for how the streams are shut down for daemonization, and <a href=\"https://stackoverflow.com/a/45787171/4653379\">an answer</a> in the post linked in the question.</p>\n\n<p>Finally, it appears that <code>STDERR</code> was <a href=\"http://perldoc.perl.org/CGI/Carp.html#REDIRECTING-ERROR-MESSAGES\" rel=\"nofollow noreferrer\">saved and redirected to a file in <code>CGI::Carp</code></a>. Whether you now want to close or restore it is up to intent/design. If the log to which <code>STDERR</code> is going and the stream itself should be closed you should first close the log, on what the module should restore <code>STDERR</code> (check please), and then redirect the stream to <code>/dev/null</code>.</p>\n\n<p>Altogether, perhaps</p>\n\n<pre><code>my $pid = fork // die \"Can't fork: $!\";  #/\n\nif ($pid == 0) \n{\n    open STDOUT, '&gt;', '/dev/null' or die \"Can't write to /dev/null: $!\";\n\n    if (defined(fileno(CGI::Carp::SAVEERR)) \n    {\n        close $fh_log_to_which_STDERR_was_redirected  or die $!;\n        close CGI::Carp::SAVEERR                      or die $!;\n    }    \n    open STDERR, '&gt;', '/dev/null' or die \"Can't write to /dev/null: $!\";\n    ...\n}\n</code></pre>\n\n<p>but check your <code>CGI::Carp</code> handling since there is no information on that in the question.</p>\n\n<p>Context of <code>fork</code> isn't given but consider <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a> or <a href=\"http://search.cpan.org/~toddr/IPC-Run-0.96/lib/IPC/Run.pm\" rel=\"nofollow noreferrer\">IPC::Run</a> to launch and manage processes.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 45805038, "answer_count": 1, "score": 2, "last_activity_date": 1558335306, "creation_date": 1503319584, "last_edit_date": 1558335306, "question_id": 45797527, "link": "https://stackoverflow.com/questions/45797527/replacing-close-with-open-dev-null", "title": "Replacing `close` with `open` `/dev/null`?", "body": "<p>We have such Perl code:</p>\n\n<pre><code>if (fork==0) {\n  # in child process close STDOUT \u0438 STDERR, for the parent process didn't wait a response from the child and finished quickly\n  close(STDOUT); \n  if (!defined fileno(CGI::Carp::SAVEERR)) {close(STDERR)} # TODO learn to close redirected STDERR\n  else        { close(CGI::Carp::SAVEERR); } \n\n  # ...\n}\n</code></pre>\n\n<p>We had the problem described in <a href=\"https://stackoverflow.com/q/45786094/856090\">Perl: STDOUT reopened as FH only for input</a> - To solve it I was recommended not to close STDOUT and instead to reopen it as '/dev/null'.</p>\n\n<p>Should I replace in the above code ALL calls of <code>close</code> with <code>open</code> <code>/dev/null</code>? or only <code>close(STDOUT)</code> and <code>close(STDERR)</code>?</p>\n\n<p>Won't this replacement break \"parent process didn't wait a response from the child and finished quickly\"?</p>\n"}, {"tags": ["perl", "localtime"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1503316994, "post_id": 45796572, "comment_id": 78550776, "body": "The code you show doesn&#39;t produce any messages, neither warnings nor errors. The source of the problem must be in the code you don&#39;t show."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1503317224, "post_id": 45796572, "comment_id": 78550936, "body": "I see, updated."}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1503317480, "post_id": 45796572, "comment_id": 78551142, "body": "Now I get <code>Undefined subroutine &amp;my_module::tzset called at ...</code>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1503317597, "post_id": 45796572, "comment_id": 78551225, "body": "Is there by any chance a <code>package</code> declaration within the code you didn&#39;t show, somewhere after the <code>use POSIX qw(tzset)</code>?"}, {"owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "edited": false, "score": 0, "creation_date": 1503317804, "post_id": 45796572, "comment_id": 78551337, "body": "Yes, there is, right after <code>use POSIX qw(tzset)</code>, should I take it at the beginning?"}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1503318199, "creation_date": 1503318199, "answer_id": 45797050, "question_id": 45796572, "link": "https://stackoverflow.com/questions/45796572/cant-use-tzset-with-use-strict/45797050#45797050", "title": "Can&#39;t use tzset with &quot;use strict&quot;", "body": "<p>When you import subroutines from a module like <code>use POSIX qw(tzset)</code>, the imported subroutines are imported into the <em>current package</em>. If you do not declare a package, that is the <code>main</code> package.</p>\n\n<p>To fix your problem, first declare a <code>package</code>, then <code>use</code> any modules you need:</p>\n\n<pre><code>use strict;\n\npackage MyModule;\nuse POSIX qw(tzset);  # now tzset is available within MyModule\n\n...\n</code></pre>\n\n<p>For pragmas like <code>use strict</code> and <code>use warnings</code> that change how your code behaves but don't import any subroutines, it is not important whether they come before or after a package declaration. Their effect is not limited to a package but to a lexical scope (delimited by curly braces).</p>\n"}], "owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 45797050, "answer_count": 1, "score": 1, "last_activity_date": 1503318199, "creation_date": 1503316798, "last_edit_date": 1503317212, "question_id": 45796572, "link": "https://stackoverflow.com/questions/45796572/cant-use-tzset-with-use-strict", "title": "Can&#39;t use tzset with &quot;use strict&quot;", "body": "<p>I need to get current time with my specified timezone, so I'm using <code>tzset</code>. But when I add <code>use strict</code>, I get the following error</p>\n\n<pre><code>use strict;\n\nuse POSIX qw(tzset);\n\n......................\n\nsub is_active\n{\n    tzset;\n    $ENV{TZ} = 'America/New_York';\n\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime();\n    if (($hour &gt; 9 &amp;&amp; $min &gt; 30) || ($hour &lt; 14))\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\nBareword \"tzset\" not allowed while \"strict subs\" in use at .......\n</code></pre>\n\n<p>Is this known issue? Is there any alternative I can use?</p>\n"}, {"tags": ["perl", "jenkins", "groovy"], "comments": [{"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 2, "creation_date": 1503299947, "post_id": 45790944, "comment_id": 78540283, "body": "What result does it return? Or is there any error message?"}, {"owner": {"reputation": 61, "user_id": 7562356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AQm9u.jpg?s=128&g=1", "display_name": "Sanjay Bangalore", "link": "https://stackoverflow.com/users/7562356/sanjay-bangalore"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1503305140, "post_id": 45790944, "comment_id": 78543139, "body": "this returns default error on jenkins.."}, {"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1503305193, "post_id": 45790944, "comment_id": 78543166, "body": "Just put the error in the question, so that others with same question may find them."}, {"owner": {"reputation": 61, "user_id": 7562356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AQm9u.jpg?s=128&g=1", "display_name": "Sanjay Bangalore", "link": "https://stackoverflow.com/users/7562356/sanjay-bangalore"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1503305514, "post_id": 45790944, "comment_id": 78543337, "body": "Also tried -  def url= &quot;<a href=\"https://github.com/raw/script.pl?3D\" rel=\"nofollow noreferrer\">github.com/raw/script.pl?3D</a>&quot; def command = [ &#39;perl&#39;, &quot;curl ${url}&quot; &quot;item1&quot; &quot;item2&quot;].execute() def proc = command.execute() proc.waitFor() def roles = [] roles = &quot;${proc.in.text}&quot; .eachLine { line -&gt;     roles &lt;&lt; line } return roles ..... But it doesnot work. However if I try following on shell , the perl script works well SHELL&gt; curl -s <a href=\"https://github.com/raw/script.pl?token=D\" rel=\"nofollow noreferrer\">github.com/raw/script.pl?token=D</a> | perl /dev/stdin item1 item2"}, {"owner": {"reputation": 18304, "user_id": 1276664, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/873470471a482071b8e085095cf89221?s=128&d=identicon&r=PG", "display_name": "daggett", "link": "https://stackoverflow.com/users/1276664/daggett"}, "edited": false, "score": 0, "creation_date": 1503306561, "post_id": 45790944, "comment_id": 78544068, "body": "<code>proc.in</code> - is a process input stream, but you are reading from it - so i think you need an out stream... check this how to read the output for example: <a href=\"https://stackoverflow.com/questions/44372447/curl-request-from-command-line-and-via-groovy-script/44383995#44383995\" title=\"curl request from command line and via groovy script\">stackoverflow.com/questions/44372447/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3979, "user_id": 818832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1kwBW.png?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/818832/peter"}, "edited": false, "score": 0, "creation_date": 1566307347, "post_id": 45800890, "comment_id": 101609527, "body": "Groovy supports loading resources via a url directly. I.e. <code>https:&#47;&#47;github.com&#47;raw&#47;script.pl.toUrl().text</code> would remove the <code>curl</code> dependency.  If you need a stream.. use <code>.openStream()</code> instead of <code>.text</code>."}, {"owner": {"reputation": 3979, "user_id": 818832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1kwBW.png?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/818832/peter"}, "edited": false, "score": 0, "creation_date": 1566307437, "post_id": 45800890, "comment_id": 101609589, "body": "<code>&quot;${proc.in.text}&quot; </code> could be simplified to <code>proc.in.text.eachLine {..</code>"}], "tags": [], "owner": {"reputation": 61, "user_id": 7562356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AQm9u.jpg?s=128&g=1", "display_name": "Sanjay Bangalore", "link": "https://stackoverflow.com/users/7562356/sanjay-bangalore"}, "is_accepted": false, "score": 0, "last_activity_date": 1503329462, "creation_date": 1503329462, "answer_id": 45800890, "question_id": 45790944, "link": "https://stackoverflow.com/questions/45790944/groovy-script-to-download-script-and-run-it-with-parameters/45800890#45800890", "title": "Groovy script to download script and run it with parameters", "body": "<p>Thanks Guys. Found it. Actually following does work..</p>\n\n<pre><code>def command = \"curl -s https://github.com/raw/script.pl?token=%3D\"\ndef proc = command.execute() | \"perl /dev/stdin $item1 $item2\".execute()\nproc.waitFor()\ndef roles = []\nroles = \"${proc.in.text}\" .eachLine { line -&gt;\n    roles &lt;&lt; line\n}\nreturn roles\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7562356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AQm9u.jpg?s=128&g=1", "display_name": "Sanjay Bangalore", "link": "https://stackoverflow.com/users/7562356/sanjay-bangalore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1566303694, "creation_date": 1503298507, "question_id": 45790944, "link": "https://stackoverflow.com/questions/45790944/groovy-script-to-download-script-and-run-it-with-parameters", "title": "Groovy script to download script and run it with parameters", "body": "<p>Need help with groovy script.</p>\n\n<p>We have a perl script in github. We need to download and run the perl-script inside groovy script (jenkins) and also pass parameters to the script and get the output. </p>\n\n<p>Example, Perl script in github accepts parameter \"item1\" \"item2\", using curl we get the raw format of the script.</p>\n\n<hr>\n\n<pre><code>def command = \"curl -s https://github.com/raw/script.pl?token=%3D\"\ndef proc = command.execute() | \"perl /dev/stdin $item1 $item2\".execute()\nproc.waitFor()\ndef roles = []\nroles = \"${proc.in.text}\" .eachLine { line -&gt;\n    roles &lt;&lt; line\n}\nreturn roles\n</code></pre>\n\n<hr>\n\n<p>Above script does not return expected result. Please help.</p>\n\n<p>Thanks in advance.. </p>\n"}, {"tags": ["perl", "batch-file"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1503304704, "creation_date": 1503304704, "answer_id": 45792665, "question_id": 45790741, "link": "https://stackoverflow.com/questions/45790741/error-fg-no-job-control/45792665#45792665", "title": "Error fg no job control", "body": "<p>It seems you are executing a Windows batch file (.bat) as a Bash shell script. These have incompatible syntax. <strong>You will need to rewrite the <code>run.bat</code> script as a shell script if you want to run it under Linux.</strong></p>\n\n<p>Background:</p>\n\n<p>The Bash <code>if</code> statement expects a <em>command</em> as the condition, not just a comparison expression. So <code>\"%Input%\"==\"w\"</code> will undergo variable expansion, then be invoked as a command. A string comparison would be written as <code>if [[ \"$input\" = \"w\" ]]; then ...; fi</code>. Note that shell variables look like <code>$name</code> whereas batch variables look like <code>%name%</code>.</p>\n\n<p>Bash features <a href=\"https://stackoverflow.com/a/11824420/1521179\"><em>job control</em></a>. A shell can juggle multiple background processes. If you run a command <code>%foo</code> this will expand to the name of a background command beginning with <code>foo</code>, then bring that command to the foreground.</p>\n\n<p>However, job control is only available in interactive sessions, i.e. if you use Bash as an interactive command line, not as a script interpreter. Bash therefore reports the error message \u201cno job control\u201d and terminates.</p>\n"}], "owner": {"reputation": 9, "user_id": 8493445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c59fa0c4cca0d7b645380931392ab37b?s=128&d=identicon&r=PG&f=1", "display_name": "msk", "link": "https://stackoverflow.com/users/8493445/msk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3329, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1503304704, "creation_date": 1503297765, "last_edit_date": 1503298981, "question_id": 45790741, "link": "https://stackoverflow.com/questions/45790741/error-fg-no-job-control", "title": "Error fg no job control", "body": "<pre><code>set /P Input=Options: [r]ead, [w]rite, [m]ixed:\n\nif \"%Input%\"==\"w\" then\n  perl ftl_log_read.pl random_read.txt &gt; random_read.dat\nfi\n\nif \"%Input%\"==\"r\" then\n   perl ftl_log_write.pl random_write.txt &gt; random_write.dat\nfi\n\nif \"%Input%\"==\"m\" then\n   perl ftl_log_read.pl random_rw.txt &gt; random_read.dat\n   perl ftl_log_write.pl random_rw.txt &gt; random_write.dat\nfi\n</code></pre>\n\n<p>while compiling in Linux machine I am getting \"line 3: fg: no job control\"</p>\n\n<p>This is a run.bat file</p>\n\n<p>Please help me resolve this issue</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 0, "creation_date": 1503377600, "post_id": 45786723, "comment_id": 78575820, "body": "I created this question and answered it since: a) I read somewhere that was a valid thing to do, especially since; b) I was stumped by this question and spent much time Googling before stumbling over the answer.  If people are finding the answer useful, is the question not also useful?"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1503264302, "post_id": 45786776, "comment_id": 78531526, "body": "Another workaround: <code>use constant { InstanceOfPerson =&gt; InstanceOf[&#39;Person&#39;] }; method is_taller_than(InstanceOfPerson $other) { ... }</code>. Or even <code>use constant { Person =&gt; &#39;Person&#39; }; method is_taller_than(InstanceOf[Person] $other) { ... }</code>."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1503264583, "post_id": 45786776, "comment_id": 78531592, "body": "Good pointers! Why not make them full &quot;answers&quot; to the question? I have no problem accepting someone else&#39;s answer instead of mine (in a few days) if it looks like the best one!"}], "tags": [], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "is_accepted": true, "score": 7, "last_activity_date": 1503262945, "creation_date": 1503262945, "answer_id": 45786776, "question_id": 45786723, "link": "https://stackoverflow.com/questions/45786723/functionparameters-what-does-in-method-missing-type-name-after/45786776#45786776", "title": "Function::Parameters - what does &quot;In method ...: missing type name after &#39;[&#39;&quot;", "body": "<p>This looks like a parsing limitation in <code>Function::Parameters</code>. It can handle barewords and square brackets, but not quoted strings. The way to get around this is just to put parentheses around the type expression:</p>\n\n<pre><code>method is_taller_than(\n  (InstanceOf['Person']) $other\n) {\n</code></pre>\n"}], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 45786776, "answer_count": 1, "score": 2, "last_activity_date": 1503262989, "creation_date": 1503262582, "last_edit_date": 1503262989, "question_id": 45786723, "link": "https://stackoverflow.com/questions/45786723/functionparameters-what-does-in-method-missing-type-name-after", "title": "Function::Parameters - what does &quot;In method ...: missing type name after &#39;[&#39;&quot;", "body": "<p>I have a problem using module <code>Function::Parameters</code> with <code>Types::Standard</code>. In this code, in Person.pm:</p>\n\n<pre><code>package Person;\n\nuse strict;\nuse warnings;\nuse Function::Parameters;\nuse Types::Standard qw(InstanceOf);\n\nmethod is_taller_than(\n  InstanceOf['Person'] $other\n) {\n  return;\n}\n\n1;\n</code></pre>\n\n<p>Using <code>perl -cw Person.pm</code> reports:</p>\n\n<pre><code>In method is_taller_than: missing type name after '[' at Person.pm line 9.\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["arrays", "perl", "extract"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503261442, "post_id": 45786524, "comment_id": 78530748, "body": "Every time through the loop you get new numbers for columns, for that line, overwriting the ones for the previous line (in <code>$columnN</code> variables).  Save them: <code>push @col2, $column2;</code> (instead of commented out print); declare the array before the loop.  The value you print after the loop is just for the very last number."}, {"owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503261735, "post_id": 45786524, "comment_id": 78530832, "body": "Thank you very much. It worked."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "edited": false, "score": 0, "creation_date": 1503262635, "post_id": 45786653, "comment_id": 78531072, "body": "Thanks guys, it is solved now, but why the first print- the one inside the loop gave me this output: &quot;text1.txt\ttext2.txt\ttext3.txt&quot; ? No overwrite here?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "edited": false, "score": 0, "creation_date": 1503263331, "post_id": 45786653, "comment_id": 78531257, "body": "@Megiddo because inside the loop, you&#39;re printing before the next iteration overwrites it."}, {"owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "edited": false, "score": 0, "creation_date": 1503263479, "post_id": 45786653, "comment_id": 78531294, "body": "Should it not be first text1.txt, and with the second iteration to change to text2.txt and finaly in the end, the final version text3.txt? Sorry to be such a noob but It really puzzles me."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "edited": false, "score": 0, "creation_date": 1503263659, "post_id": 45786653, "comment_id": 78531338, "body": "Yes, that&#39;s how it happens when you print inside of the loop, exactly as you said. However, after the loop, because you&#39;ve declared <code>$column2</code> as a global variable, when you loop over the file, you continuously re-populate that specific variable, and after the loop, the variable will contain the value it received successfully on the <i>last</i> iteration of the loop (<code>text3.txt</code>). That is, <code>$column2</code> variable is overwritten on each loop, and after it ends, it holds the value of that iteration. Since the last iteration sets <code>$column2</code> to <code>text3.txt</code>, that&#39;s what falls out as the value after the loop"}, {"owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "edited": false, "score": 0, "creation_date": 1503263843, "post_id": 45786653, "comment_id": 78531392, "body": "Thank you. I appreciate your efforts guys. Cheers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1503269046, "post_id": 45786653, "comment_id": 78532614, "body": "Consider: (1) The <code>split &#47;\\s&#47;</code> is practically equivalent to <code>split &#39; &#39;</code> (except that <code>&#39; </code>&#39; also trims spaces) and <code>&#39; &#39;</code> is also default.  So it&#39;s enough to say <code>split;</code> here, in both uses (2) Add a comment on using <code>split</code> with its default (or use it in code with an explanation), in particular since <code>chomp</code> and regex use defaults (3) Add a comment in code that identifies a header; the statement underneath can be overlooked -- even though the OP is aware of this with their (wrong) <code>&#47;line*&#47;</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503270882, "post_id": 45786653, "comment_id": 78532953, "body": "Thanks @zdim, that&#39;s why I stated in my last line I was attempting to keep it somewhat similar to OP code. Otherwise I would have trimmed quite a bit. It&#39;s important to know the differences though"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1503262013, "creation_date": 1503262013, "answer_id": 45786653, "question_id": 45786524, "link": "https://stackoverflow.com/questions/45786524/perl-reading-text-files-saving-columns-for-using-elements-of-columns-to-open-o/45786653#45786653", "title": "Perl, reading text files, saving columns for using elements of columns to open other files", "body": "<p>This is happening because you overwrite <code>$column2</code> on every pass of the loop, then after you leave the loop, you have the very last result (<code>text3.txt</code>).</p>\n\n<p>You can write to a file within the loop, which this example shows. It also shows how to use the proper 3-arg <code>open</code>, with lexical file handles:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $input_file = 'data.txt';\nmy $output_file = 'out.txt';\n\nopen my $fh, '&lt;', $input_file or die $!;\nopen my $wfh, '&gt;', $output_file or die $!;\n\nwhile (&lt;$fh&gt;){\n    chomp;\n    next if /^\\&lt;/;\n    next if /^\\s*$/;\n\n    my ($c1, $c2, $c3) = split /\\s/, $_;\n\n    print $wfh \"$c2\\n\";\n}\n</code></pre>\n\n<p>Given this as the input file:</p>\n\n<pre><code>&lt; this is a header\n\ncol1 col2 col3\nblablabla text1.txt blablabla\nblablabla text2.txt blablabla\nblablabla text3.txt blablabla\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>col2\ntext1.txt\ntext2.txt\ntext3.txt\n</code></pre>\n\n<p>...in the output file. You'll have to sort out how to filter the first line.</p>\n\n<p>You can also save the output to an array within the loop, then work on it later:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $input_file = 'data.txt';\n\nopen my $fh, '&lt;', $input_file or die $!;\n\nmy @saved_entries;\n\nwhile (&lt;$fh&gt;){\n    chomp;\n    next if /^\\&lt;/;\n    next if /^\\s*$/;\n    push @saved_entries, (split /\\s/, $_)[1];\n}\n\nfor (@saved_entries){\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>...which you can then write to a file or do what you need to with.</p>\n\n<p>Note that I'm being overly verbose here, as to be as close to OP code as possible.</p>\n"}], "owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 45786653, "answer_count": 1, "score": 2, "last_activity_date": 1503262013, "creation_date": 1503261004, "question_id": 45786524, "link": "https://stackoverflow.com/questions/45786524/perl-reading-text-files-saving-columns-for-using-elements-of-columns-to-open-o", "title": "Perl, reading text files, saving columns for using elements of columns to open other files", "body": "<p>I have a text file, tab separated, as follows:</p>\n\n<blockquote>\n  <p>&lt; this is a header</p>\n  \n  <p>col1          col2            col3<br>\n  blablabla     text1.txt       blablabla<br>\n  blablabla     text2.txt       blablabla<br>\n  blablabla     text3.txt       blablabla  </p>\n</blockquote>\n\n<p>I want to be able to extract certain elements (columns), in this case only the words text1.txt, text2.txt and text3.txt. I want to use them later to open the files with those names.\nSo far I have the code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @fields;\nmy ($column1, $column2, $column3);\n\nmy $text = \"text.txt\";\n\nopen(FILE, $text) or die \"Could not read from $text, program halting.\";\n\nmy @files;\n\nwhile(&lt;FILE&gt;)\n{\n  chomp;\n   /^&lt;/ and next;\n   /^\\s*$/ and next;\n   /line*/ and next;\n\n  ($column1, $column2, $column3) = split('\\s', $_);\n\n#PRINT ONE\n#print $column2, \"\\t\";\n\n\n}\n#PRINT TWO\nprint $column2, \"\\t\";\n\nclose FILE;\n</code></pre>\n\n<p>If I do the print as commented with #PRINT ONE, I get the correct version as an output only,with all three elements but when I try to save it in another variable or write it to file, only \"text3.txt\" remains.\nIf I do the print as in #PRINT TWO, I only get one element, the same text3.txt.\nHow do I learn from this? I have tried lots of codes from this site but no result so far.Thank you.</p>\n"}, {"tags": ["perl", "logging", "warnings"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503260133, "post_id": 45786094, "comment_id": 78530373, "body": "Are these custom modules?  What determines whether the error should or not be logged?"}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503261582, "post_id": 45786094, "comment_id": 78530796, "body": "These are our custom modules used together with standard Template Toolkit. The error should not be logged as determined by the request of my boss"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503261718, "post_id": 45786094, "comment_id": 78530827, "body": "OK.  I meant, what code logs the error?  There&#39;s got to be something that goes out of its way to log the error.  Is that set in Template Toolkit (I don&#39;t use it), or by your modules?  (One way would be to use <code>__WARN__</code> hook, but hopefully there are cleaner ways)"}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503262825, "post_id": 45786094, "comment_id": 78531124, "body": "@zdim The error is logged by a module from Template Toolkit distribution, which opens a file after <code>close(STDOUT);</code> in one of our custom modules. Yes, the error is logged by Template Toolkit not by our custom modules. My question is how to make Template Toolkit not to log the error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503268915, "post_id": 45786094, "comment_id": 78532594, "body": "You shouldn&#39;t close STDOUT. Re-open it to /dev/null instead"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1614247138, "last_edit_date": 1614247138, "creation_date": 1503266436, "answer_id": 45787171, "question_id": 45786094, "link": "https://stackoverflow.com/questions/45786094/perl-stdout-reopened-as-fh-only-for-input/45787171#45787171", "title": "Perl: STDOUT reopened as FH only for input", "body": "<p>Detailed handling of errors is outlined in <a href=\"http://search.cpan.org/dist/Template-Toolkit/lib/Template/Manual/Config.pod#ERROR\" rel=\"nofollow noreferrer\">Template::Manual::Config::ERROR</a>.</p>\n<p>It can be categorized in the constructor by specifying templates for exception types</p>\n<blockquote>\n<pre><code>my $template = Template-&gt;new({  \n     ERRORS =&gt; {\n         user     =&gt; 'user/index.html',\n         dbi      =&gt; 'error/database',\n         default  =&gt; 'error/default',\n     },\n});\n</code></pre>\n</blockquote>\n<p>which can be raised using the <code>THROW</code> directive</p>\n<blockquote>\n<p>[% THROW user.login 'no user id: please login' %]</p>\n</blockquote>\n<p>or by calling <code>throw</code> method</p>\n<blockquote>\n<pre><code>$context-&gt;throw('user.passwd', 'Incorrect Password');  \n$context-&gt;throw('Incorrect Password');    # type 'undef'\n</code></pre>\n</blockquote>\n<p>or by Perl code by calling <code>die</code>, perhaps with a <code>Template::Exception</code> object.</p>\n<p>How to use this to solve the problem is a matter of details, of which none are provided.</p>\n<p>But you really want to find (user) code that triggers this and clean it up. For one, as noted by <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> in a comment, don't close <code>STDOUT</code> but reopen it to <code>/dev/null</code>.  (I'd say, never simply close standard streams.) For instance, if you just don't want to see <code>STDOUT</code> any more</p>\n<pre><code>open STDOUT, '&gt;', '/dev/null';\n</code></pre>\n<p>or first copy it (uses <code>dup2</code>) before reopening so that you can restore it later</p>\n<pre><code>open my $SAVEOUT, '&gt;&amp;', 'STDOUT';\nopen STDOUT, '&gt;', '/dev/null';\n...\nopen STDOUT, '&gt;', $SAVEOUT;  # restore STDOUT\nclose $SAVEOUT;              # if unneeded\n</code></pre>\n<p>(see <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a>), or if feasible create a <code>local *FOO</code> and use that to save <code>STDOUT</code>.</p>\n<p>The warning comes about since the lowest unused file descriptor is always used, and here fd 1 was vacated by closing <code>STDOUT</code>; but it is attempted to be used for input what isn't OK. As for why it's not OK and why emit a warning,  <a href=\"https://groups.google.com/forum/?hl=en#!topic/perl.perl5.porters/TVUK3t329sc\" rel=\"nofollow noreferrer\">this thread</a> and an <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=26670\" rel=\"nofollow noreferrer\">old bug report</a> are useful. This goes beyond Perl.</p>\n<hr />\n<p>One generic way is to use the <a href=\"http://perldoc.perl.org/functions/warn.html\" rel=\"nofollow noreferrer\"><code>__WARN__</code> hook</a></p>\n<pre><code>BEGIN {\n    $SIG{__WARN__} = sub {\n        warn @_ \n            unless $_[0] ~= /Filehandle STDOUT reopened as FH only for input/\n    }\n};\n</code></pre>\n<p>where the warning is emitted unless it matches the one you want to suppress.\nThis <code>BEGIN</code> block need be before the <code>use</code> statements for modules it is expected to affect. If you know the scope at which this is needed it is better to localize it, <code>local $SIG{__WARN__} = sub {...};</code></p>\n<p>See <a href=\"https://stackoverflow.com/a/45520365/4653379\">this post</a> and its links, to other posts and relevant documentation, for more details.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 45787171, "answer_count": 1, "score": 1, "last_activity_date": 1614247138, "creation_date": 1503257716, "last_edit_date": 1503269822, "question_id": 45786094, "link": "https://stackoverflow.com/questions/45786094/perl-stdout-reopened-as-fh-only-for-input", "title": "Perl: STDOUT reopened as FH only for input", "body": "<p>I have the following error message (with Perl 5):</p>\n\n<p><code>Tools.pm: Filehandle STDOUT reopened as FH only for input at /usr/local/lib/perl5/site_perl/mach/5.20/Template/Provider.pm line 967.</code></p>\n\n<p>I understand its cause: It is that STDOUT was closed and later the same FD was used for something unrelated to STDOUT.</p>\n\n<p>The code does the right thing. The only problem is that this error message should not to be logged.</p>\n\n<p>How to stop printing this error message into our log file?</p>\n"}, {"tags": ["c", "perl", "destructor", "xs", "perl-xs"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503251735, "post_id": 45784972, "comment_id": 78527955, "body": "Pardon my ignorance, but if you&#39;re not catching the <code>croak()</code>, won&#39;t everything be <code>free()</code>d as the program process(es) finish anyways?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503252604, "post_id": 45784972, "comment_id": 78528222, "body": "@stevieb I&#39;m not catching the error, but other (Perl) code might, this is a library not an application. Yes, resources like allocated memory will be released by the OS when the process terminates. However: that leaked memory will still be allocated until then. That&#39;s not good, particularly for long-running processes like servers. There&#39;s a reason why most languages including Perl have some kind of garbage collector. And while memory is the resource I&#39;m interested in releasing, there are other resources as well: e.g. a tempfile that should be deleted, or a mutex or lock that should be released."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503253363, "post_id": 45784972, "comment_id": 78528477, "body": "Fair enough, thank you for the clarification."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1503253721, "post_id": 45784972, "comment_id": 78528619, "body": "Great question by the way..."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503257107, "post_id": 45784972, "comment_id": 78529595, "body": "Is the library available publicly at this point?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503257532, "post_id": 45784972, "comment_id": 78529698, "body": "Re &quot;<i>but I may be calling functions that croak() directly which would sidestep any cleanup code I write</i>&quot;, e.g. Fatal warnings.  This is usually handled by mortalizing early. <code>SV* sv = sv_2mortal(newSV());  ... return sv;</code> instead of <code>SV* sv = newSV();  ... return sv_2mortal(sv);</code>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503258503, "post_id": 45784972, "comment_id": 78529970, "body": "@ikegami Yes, and I&#39;m doing that for temporary SVs. But this only works for SVs (and similar Perl data structures). In my case, I&#39;m <code>malloc()</code>ing or <code>Newx()</code>ing complex C data structures that need a cleanup function to run. One of my ideas is to store an object with suitable cleanup code in a mortal SV which does get the job done. It&#39;s just very involved and inconvenient and unlikely that there isn&#39;t a better way \u2013 which led me to the <code>SAVEDESTRUCTOR</code> macros."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503259243, "post_id": 45784972, "comment_id": 78530158, "body": "@stevieb No, the library is not available at this point. But as this is a hobby project, I intend to publish it to CPAN if and when it gets finished and reaches a presentable level of quality. The project is kind of an event loop, but with a focus on <a href=\"https://en.wikipedia.org/wiki/Trampoline_(computing)#High-level_programming\" rel=\"nofollow noreferrer\">Trampolines</a> to implement certain control flow \u2013 such as tail recursion and yield-style coroutines. All of that can be done in pure Perl, but the performance overhead is unappealing."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 2, "creation_date": 1503259507, "post_id": 45784972, "comment_id": 78530229, "body": "The Perl API typically only croaks on invalid input. If you call the Perl API in a way that could croak, simply check the arguments for validity yourself. The only exception is calling into Perl code where you can use the <a href=\"https://perldoc.perl.org/perlcall.html#G_EVAL\" rel=\"nofollow noreferrer\"><code>G_EVAL flag</code></a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503268748, "post_id": 45784972, "comment_id": 78532566, "body": "@amon, That makes no sense to me. Why would you malloc or Newx stuff in XS code that&#39;s not owned by a Perl variable?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1503269777, "post_id": 45784972, "comment_id": 78532747, "body": "@nwellnhof, You forgot about fatal warnings (which I mentioned above). It&#39;s not practical to check if you actually got a number instead of using <code>SvIV</code>. But that can warn (uninitialized, or not numeric), which can die."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503302872, "post_id": 45784972, "comment_id": 78541867, "body": "@ikegami I&#39;m allocating temporary data structures (buffers, queues, graphs) that are needed during the execution of the XS function. They will not be returned as an SV.  They are not bounded by some constant so can&#39;t be stack-allocated. I&#39;ve added a piece of pseudo-code to illustrate the structure of my problem."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503324338, "post_id": 45784972, "comment_id": 78556102, "body": "(cc @ikegami) Now that I know what to look for, there&#39;s a large corpus of motivating examples: <a href=\"https://git.io/v5JE6\" rel=\"nofollow noreferrer\"><code>POSIX::sigaction</code> registers a destructor to reset a sigmask</a>. <a href=\"https://git.io/v5JEr\" rel=\"nofollow noreferrer\"><code>threads::shared</code> registers a destructor to release a lock under all circumstances before the xsub returns</a>. <a href=\"https://git.io/v5JEH\" rel=\"nofollow noreferrer\">The Perl MongoDB driver registers a destructor to free a C-level parser object</a>, which is necessary as the parsing functions may croak. That&#39;s very similar to my use case."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503332595, "post_id": 45784972, "comment_id": 78561450, "body": "@ikegami Then simply don&#39;t enable fatal warnings in your XS module."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1503335891, "post_id": 45784972, "comment_id": 78563021, "body": "@nwellnhof You suggest it is feasible to avoid exceptions by checking all preconditions. In the above comment I&#39;ve linked a few examples where destructors are used. How would you have structured such code using better checks instead of registering destructor callbacks? Wouldn&#39;t that lead to much more complex code and duplicated code? I have read your CommonMark bindings, but there you have the luxury of a 1:1 resource to SV relationship, and comparatively thin bindings around a C library which allows you to defer most exceptions until POSTCALL."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1503355106, "post_id": 45784972, "comment_id": 78570763, "body": "I didn&#39;t know about <code>SAVEDESTRUCTOR</code> and it seems like a bulletproof way to run cleanup code. I wouldn&#39;t use Perl exceptions to handle errors in my own internal C functions, though. Instead, I&#39;d prefer to return error codes and make the XSUB throw after releasing all resources. This should be good enough for many typical cases, like extracting data from an <code>AV</code> or <code>HV</code>. Even if there&#39;s a way that users of your library can sneak in some weird data that makes a Perl API function throw an exception and cause a memory leak, I wouldn&#39;t be too worried unless it&#39;s absolutely mission critical code."}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1503309368, "last_edit_date": 1503309368, "creation_date": 1503309063, "answer_id": 45794121, "question_id": 45784972, "link": "https://stackoverflow.com/questions/45784972/safely-freeing-resources-in-xs-code-running-destructors-on-scope-exit/45794121#45794121", "title": "Safely freeing resources in XS code (running destructors on scope exit)", "body": "<p>Upon further research, it turns out that <code>SAVEDESTRUCTOR</code> is in fact documented \u2013 in perlguts rather than perlapi. The exact semantics are documented there.</p>\n\n<p>I therefore assume that <code>SAVEDESTRUCTOR</code> is supposed to be used as a \"finally\" block for cleanup, and is sufficiently safe and stable.</p>\n\n<p>Excerpt from <a href=\"http://perldoc.perl.org/perlguts.html#Localizing-changes\" rel=\"noreferrer\"><em>Localizing changes</em> in perlguts</a>, which discusses the equivalent to <code>{ local $foo; ... }</code> blocks:</p>\n\n<blockquote>\n  <p>There is a way to achieve a similar task from C via Perl API: create a <em>pseudo-block</em>, and arrange for some changes to be automatically undone at the end of it, either explicit, or via a non-local exit (via die()). A <em>block</em>-like construct is created by a pair of <code>ENTER</code>/<code>LEAVE</code> macros (see <a href=\"http://perldoc.perl.org/perlcall.html#Returning-a-Scalar\" rel=\"noreferrer\">Returning a Scalar in perlcall</a>). Such a construct may be created specially for some important localized task, or an existing one (like boundaries of enclosing Perl subroutine/block, or an existing pair for freeing TMPs) may be used. (In the second case the overhead of additional localization must be almost negligible.) Note that any XSUB is automatically enclosed in an <code>ENTER</code>/<code>LEAVE</code> pair.</p>\n  \n  <p>Inside such a <em>pseudo-block</em> the following service is available:</p>\n  \n  <ul>\n  <li><p>[\u2026]</p></li>\n  <li><p><strong><code>SAVEDESTRUCTOR(DESTRUCTORFUNC_NOCONTEXT_t f, void *p)</code></strong></p>\n  \n  <p>At the end of <em>pseudo-block</em> the function <code>f</code> is called with the only argument <code>p</code>.</p></li>\n  <li><p><strong><code>SAVEDESTRUCTOR_X(DESTRUCTORFUNC_t f, void *p)</code></strong></p>\n  \n  <p>At the end of <em>pseudo-block</em> the function <code>f</code> is called with the implicit context argument (if any), and <code>p</code>.</p></li>\n  </ul>\n</blockquote>\n\n<p>The section also lists a couple of specialized destructors, like <code>SAVEFREESV(SV *sv)</code> and <code>SAVEMORTALIZESV(SV *sv)</code> that may be more correct than a premature <code>sv_2mortal()</code> in some cases.</p>\n\n<p>These macros have basically been available since effectively forever, at least Perl 5.6 or older.</p>\n"}], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 45794121, "answer_count": 1, "score": 10, "last_activity_date": 1503394896, "creation_date": 1503250263, "last_edit_date": 1503394896, "question_id": 45784972, "link": "https://stackoverflow.com/questions/45784972/safely-freeing-resources-in-xs-code-running-destructors-on-scope-exit", "title": "Safely freeing resources in XS code (running destructors on scope exit)", "body": "<p>I am writing an XS module. I allocate some resource (e.g. <code>malloc()</code> or <code>SvREFCNT_inc()</code>) then do some operations involving the Perl API, then free the resource. This is fine in normal C because C has no exceptions, but code using the Perl API may <code>croak()</code>, thus preventing normal cleanup and leaking the resources. It therefore seems impossible to write correct XS code except for fairly simple cases.</p>\n\n<p>When I <code>croak()</code> myself I can clean up any resources allocated so far, but I may be calling functions that <code>croak()</code> directly which would sidestep any cleanup code I write.</p>\n\n<p>Pseudo-code to illustrate my concern:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static void some_other_function(pTHX_ Data* d) {\n  ...\n  if (perhaps) croak(\"Could not frobnicate the data\");\n}\n\nMODULE = Example  PACKAGE = Example\n\nvoid\nxs(UV n)\n  CODE:\n  {\n    /* Allocate resources needed for this function */\n    Data* object_graph;\n    Newx(object_graph, 1, Data);\n    Data_init(object_graph, n);\n\n    /* Call functions which use the Perl API */\n    some_other_function(aTHX_ object_graph);\n\n    /* Clean up before returning.\n     * Not run if above code croak()s!\n     * Can this be put into the XS equivalent of a  \"try...finally\" block?\n     */\n    Data_destroy(object_graph);\n    Safefree(object_graph);\n  }\n</code></pre>\n\n<p>So how do I safely clean up resources in XS code? How can I register some destructor that is run when exceptions are thrown, or when I return from XS code back to Perl code?</p>\n\n<p>My ideas and findings so far:</p>\n\n<ul>\n<li><p>I can create a class that runs necessary cleanup in the destructor, then create a mortal SV containing an instance of this class. At some point in the future Perl will free that SV and run my destructor. However, this seems rather backwards, and there has to be a better way.</p></li>\n<li><p>XSAWYERX's <a href=\"https://github.com/xsawyerx/xs-fun\" rel=\"nofollow noreferrer\"><em>XS Fun</em></a> booklet seems to discuss DESTROY methods at great length, but not the handling of exceptions that originate <em>within</em> XS code.</p></li>\n<li><p>LEONT's <a href=\"https://metacpan.org/pod/Scope::OnExit\" rel=\"nofollow noreferrer\"><code>Scope::OnExit</code></a> module features <a href=\"https://metacpan.org/source/LEONT/Scope-OnExit-0.02/lib/Scope/OnExit.xs\" rel=\"nofollow noreferrer\">XS code</a> using <code>SAVEDESTRUCTOR()</code> and <code>SAVEDESTRUCTOR_X()</code> macros. These do not seem to be documented.</p></li>\n<li><p>The <a href=\"http://perldoc.perl.org/perlapi.html\" rel=\"nofollow noreferrer\">Perl API</a> lists <code>save_destructor()</code> and <code>save_destructor_x()</code> functions as public but undocumented.</p></li>\n<li><p>Perl's <a href=\"https://metacpan.org/source/XSAWYERX/perl-5.26.0/scope.h#L253\" rel=\"nofollow noreferrer\"><code>scope.h</code></a> header (included by <code>perl.h</code>) declares <code>SAVEDESTRUCTOR(f,p)</code> and <code>SAVEDESTRUCTOR_X(f,p)</code> macros, without any further explanation. Judging from context and the <code>Scope::OnExit</code> code, <code>f</code> is a function pointer and <code>p</code> a void pointer that will be passed to <code>f</code>. The _X version is for functions that are declared with the <code>pTHX_</code> macro parameter.</p></li>\n</ul>\n\n<p>Am I on the right track with this? Should I use these macros as appropriate? In which Perl version were they introduced? Is there any further guidance available on their use? When precisely are the destructors triggered? Presumably at a point related to the <code>FREETMPS</code> or <code>LEAVE</code> macros?</p>\n"}, {"tags": ["perl", "file", "file-descriptor"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1503239938, "post_id": 45783145, "comment_id": 78523905, "body": "Missing <code>use strict</code> (and <code>use warnings</code> in Test.pm). Don&#39;t call your own module <code>Test.pm</code>; there&#39;s already a standard <code>Test</code> module. <code>close(@Args)</code> is wrong because <code>close</code> imposes scalar context on its arguments."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1503240053, "post_id": 45783145, "comment_id": 78523941, "body": "Also see <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\"><code>perldoc perlsub</code></a> and search for <code>qualify_to_ref</code>."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503240767, "post_id": 45783145, "comment_id": 78524170, "body": "@melpomene If <code>close(@Args)</code> is wrong, then what is right?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1503240794, "post_id": 45783145, "comment_id": 78524179, "body": "<code>close($Args[0])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503269487, "post_id": 45784075, "comment_id": 78532686, "body": "You didn&#39;t answer the question at all; you simply changed the test code so it doesn&#39;t happen anymore!!! Even with your change, the OP&#39;s code fails to get the fileno and fails to actually close the file handle!"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503270691, "post_id": 45784075, "comment_id": 78532912, "body": "@ikegami The OPs question was &quot;where is the error&quot;. I did the best I could based on that. I fixed the most glaring error. Where was the fix supposed to be implemented?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503272281, "post_id": 45784075, "comment_id": 78533181, "body": "@ikegami addendum added. Is that better?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503272628, "post_id": 45784075, "comment_id": 78533235, "body": "No. Still doesn&#39;t work for the OP&#39;s code. melpomene actually answered the OP&#39;s question in a comment"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503272715, "post_id": 45784075, "comment_id": 78533247, "body": "@ikegami well, please post an answer or let me know where I&#39;m going wrong."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503272819, "post_id": 45784075, "comment_id": 78533262, "body": "Re &quot;<i>Let me know where I&#39;m going wrong</i>&quot;, I already said: You&#39;re not using the OP&#39;s code! Specifically, you replaced <code>XXX</code> with <code>$fh</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503273006, "post_id": 45784075, "comment_id": 78533300, "body": "Isn&#39;t fixing code when all you have as a question is &quot;where is the error&quot; the appropriate thing to do? There&#39;s no clear problem description, so where does one draw the line on what to correct? Either way, I digress... I did research, learned a couple of things, so I&#39;m happy ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503274928, "post_id": 45784075, "comment_id": 78533656, "body": "The OP asked about a bug in <code>CORE::GLOBAL::close</code>, and you haven&#39;t fixed it yet. It still happens after your change. You just stopped testing for it."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503275425, "post_id": 45784075, "comment_id": 78533742, "body": "ok @ikegami, I respect you much as you know. I&#39;m at a loss. I am not adept with prototypes, so I&#39;m unaware if that&#39;s where the issue lies specifically. At this point, I respectfully request the actual fix, even if in comments, just so I know what you see that I don&#39;t."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503280611, "post_id": 45784075, "comment_id": 78534705, "body": "I&#39;m on a phone. I&#39;m not posting an answer. I can just v point out that yours is highly incompetent and that melpomene covered the rest in their comment"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1503272685, "last_edit_date": 1503272685, "creation_date": 1503244646, "answer_id": 45784075, "question_id": 45783145, "link": "https://stackoverflow.com/questions/45783145/perl-5-cannot-get-file-handle-descriptor/45784075#45784075", "title": "Perl 5: Cannot get file handle descriptor", "body": "<p>You're passing the entire <code>@Args</code> array into <code>CORE::close</code>, which is not a file handle. You need to pass in the correct element of the array. Here's an example that takes a filename from the command line, and does the right thing:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nBEGIN {\n  *CORE::GLOBAL::close = sub (;*) {\n      my @Args = @_;\n      my $FileNO = fileno($Args[0]);\n      print $FileNO, \"\\n\";\n\n      # the next line is where the issue is\n\n      CORE::close($Args[0]);\n  };\n}\n\ndie \"need file param\" if ! @ARGV;\n\nmy $file = $ARGV[0];\n\nopen my $fh, $file or die $!;\n\nclose $fh or die $!;\n</code></pre>\n\n<p>I'll go further with what you have. First, I'm going to rejig things so that the override of the <code>CORE</code> function is in the <code>.pm</code> file instead of the test file, then I'm going to switch to using lexical file handles, as global bareword ones just won't work here:</p>\n\n<p><code>Test.pm</code>:</p>\n\n<pre><code>package Test;\n\nBEGIN {\n   *CORE::GLOBAL::close = sub (;*) {\n      my @Args = @_;\n      my $FileNO = fileno($Args[0]);\n      print $FileNO, \"\\n\";\n      CORE::close($Args[0]);\n  };\n}\n\n1;\n</code></pre>\n\n<p>Script file:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse lib '.';\nuse Test;\n\nopen my $fh, 'test.pl' or die $!;\nclose $fh or die $!;\n</code></pre>\n\n<p>Between migrating code and using lexical file handles, things should work as you would expect.</p>\n\n<p>Output from running the script:</p>\n\n<pre><code>3\n</code></pre>\n\n<p>...and to ensure everything is in order, I'll go back to your default configuration, where the override is in the test script, not the module:</p>\n\n<p><code>Test.pm</code></p>\n\n<pre><code>package Test;\n\nopen my $fh, 'test.pl' or die $!;\nclose $fh or die $!;\n\n1;\n</code></pre>\n\n<p>...and the script:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nBEGIN {\n  *CORE::GLOBAL::close = sub (;*) {\n      my @Args = @_;\n      my $FileNO = fileno($Args[0]);\n      print $FileNO, \"\\n\";\n      CORE::close($Args[0]);\n  };\n}\n\nuse lib '.';\nuse Test;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4\n</code></pre>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1503272685, "creation_date": 1503239088, "question_id": 45783145, "link": "https://stackoverflow.com/questions/45783145/perl-5-cannot-get-file-handle-descriptor", "title": "Perl 5: Cannot get file handle descriptor", "body": "<p>test.pl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\n\nBEGIN {\n  *CORE::GLOBAL::close = sub (;*) {\n      my @Args = @_;\n      my $FileNO = fileno($Args[0]);\n      print $FileNO, \"\\n\";\n      CORE::close(@Args);\n  };\n}\n\nuse lib '.';\nuse Test;\n</code></pre>\n\n<p>Test.pm:</p>\n\n<pre><code>package Test;\n\nopen(XXX, 'test.pl');\nclose(XXX);\n\n1;\n</code></pre>\n\n<p>When I run this program (<code>perl test.pl</code>), I get:</p>\n\n<pre><code>Use of uninitialized value $FileNO in print at test.pl line 10.\n\nclose() on unopened filehandle 1 at test.pl line 11.\n</code></pre>\n\n<p>Where is the error?</p>\n"}, {"tags": ["perl", "file-upload", "cgi"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1503213301, "post_id": 45778369, "comment_id": 78516389, "body": "Cgi.pm is still relevant in cgi environment. It was deliberately removed from the core in order to distance perl from ancient cgi."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1503238711, "post_id": 45781703, "comment_id": 78523517, "body": "I support that suggestion but we should also mention that it&#39;s not done by a simple <code>use Dancer2::Core::Request::Upload;</code>. <a href=\"http://search.cpan.org/~leejo/CGI-Alternatives-0.15/lib/CGI/Alternatives.pm\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> would be a good starting point if the OP <i>can</i> still choose which framework to use."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1503245160, "post_id": 45781703, "comment_id": 78525707, "body": "I hope my answer isn&#39;t read as suggesting that it&#39;s that simple. That&#39;s why I included a link to the documentation. I didn&#39;t want to go into too many details as, strictly speaking, this question is off-topic."}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 0, "creation_date": 1503408920, "post_id": 45781703, "comment_id": 78595836, "body": "Thank you for the suggestion. I will look into it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1503228961, "creation_date": 1503228961, "answer_id": 45781703, "question_id": 45778369, "link": "https://stackoverflow.com/questions/45778369/modern-core-method-of-uploading-file-in-perl/45781703#45781703", "title": "Modern core method of uploading file in Perl", "body": "<p>The Perl core distribution contains no modules for writing web applications. I think you probably want something based on <a href=\"https://metacpan.org/pod/Plack::Request\" rel=\"noreferrer\">Plack::Request</a> and <a href=\"https://metacpan.org/pod/Plack::Request::Upload\" rel=\"noreferrer\">Plack::Request::Upload</a> (for example <a href=\"https://metacpan.org/pod/Dancer2::Core::Request::Upload\" rel=\"noreferrer\">Dancer2::Core::Request::Upload</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1503409156, "post_id": 45804320, "comment_id": 78596027, "body": "Ok, there&#39;s using out-of-date technology and then there&#39;s something that is positively antique. The <a href=\"http://cgi-lib.berkeley.edu/\" rel=\"nofollow noreferrer\">web site for <code>cgi-lib.pl</code></a> hasn&#39;t been updated for almost twenty years. If you want to use CGI, then please use <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">CGI.pm</a>."}], "tags": [], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "is_accepted": true, "score": -2, "last_activity_date": 1503343799, "creation_date": 1503343799, "answer_id": 45804320, "question_id": 45778369, "link": "https://stackoverflow.com/questions/45778369/modern-core-method-of-uploading-file-in-perl/45804320#45804320", "title": "Modern core method of uploading file in Perl", "body": "<p>The solution I ended up going with may not be the best, but it's functioning, and simple.</p>\n\n<p>Using <a href=\"http://cgi-lib.berkeley.edu\" rel=\"nofollow noreferrer\">cgi-lib.pl</a> I can simply use</p>\n\n<pre><code>open(VAR, \"&gt;output/file.png\");\nbinmode VAR;\nprint VAR $in{input};\nclose(VAR);\n</code></pre>\n\n<p>and it gets the job done.</p>\n\n<p>If there are any notable problems with this, please let me know.</p>\n"}], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 45804320, "answer_count": 2, "score": 2, "last_activity_date": 1503343799, "creation_date": 1503202230, "question_id": 45778369, "link": "https://stackoverflow.com/questions/45778369/modern-core-method-of-uploading-file-in-perl", "title": "Modern core method of uploading file in Perl", "body": "<p>I'm looking to write a script that lets a user upload an image from a webpage, for later use on that website. As per usual, all I can find is examples involving CGI.pm. Are there any core modules that I can use as a replacement?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1503152372, "post_id": 45772337, "comment_id": 78503268, "body": "Realizing you copied and pasted from the docs, I think the example leads to  confusion, since <code>foo</code> is used for the string, the pattern, and the named capture variable.  The example would do better to differentiate where <code>$+{foo}</code> originates from w/in the example, which I believe is the <code>&lt;foo&gt;</code> portion."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 1, "creation_date": 1503159674, "post_id": 45772337, "comment_id": 78505525, "body": "It seems like docs would benefit from some improvements."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1503164158, "post_id": 45772337, "comment_id": 78506976, "body": "Yes most likely the string and the pattern just need to use <code>bar</code> (unless my understanding is wrong, which is entirely possible, since I&#39;ve never used named capture variables, nor tested the example."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 5, "last_activity_date": 1503150805, "last_edit_date": 1592644375, "creation_date": 1503150609, "answer_id": 45772337, "question_id": 45772302, "link": "https://stackoverflow.com/questions/45772302/dollar-sign-plus-in-perl/45772337#45772337", "title": "Dollar sign plus in Perl?", "body": "<p>Check for <code>%+</code> hash variable in <a href=\"https://perldoc.perl.org/perlvar.html#%25%2b\" rel=\"noreferrer\">perlvar</a></p>\n<blockquote>\n<p>Similar to <code>@+</code> , the <code>%+</code> hash allows access to the named capture buffers, should they exist, in the last successful match in the currently active dynamic scope.</p>\n<p>For example, <code>$+{foo}</code> is equivalent to <code>$1</code> after the following match:</p>\n</blockquote>\n<pre><code>'foo' =~ /(?&lt;foo&gt;foo)/;\n</code></pre>\n"}], "owner": {"reputation": 17167, "user_id": 773263, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e2581b53db32340d7e1b5be6b99c2bb1?s=128&d=identicon&r=PG", "display_name": "Philip Kirkbride", "link": "https://stackoverflow.com/users/773263/philip-kirkbride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "closed_date": 1503150771, "answer_count": 1, "score": 2, "last_activity_date": 1503150805, "creation_date": 1503150384, "question_id": 45772302, "link": "https://stackoverflow.com/questions/45772302/dollar-sign-plus-in-perl", "closed_reason": "Duplicate", "title": "Dollar sign plus in Perl?", "body": "<p>I came across the following and I'm unsure what it means:</p>\n\n<pre><code>$+{decimal}\n</code></pre>\n\n<p>I'm familiar with the use of <code>$</code> in Perl, but haven't seen it followed by a plus sign before.</p>\n\n<p><em>The word decimal hasn't been defined anywhere in the script.</em></p>\n\n<p>Can someone explain the syntax of <code>$+{ }</code>?</p>\n"}, {"tags": ["arrays", "perl", "hash", "perl-data-structures"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1503144963, "post_id": 45771364, "comment_id": 78500932, "body": "Try this: <code>push @{ $_ }, \\%new_hash for (values %mother_hash);</code>"}, {"owner": {"reputation": 71, "user_id": 8209251, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5bc913d90b9b3c359708b154869cfb54?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Keystrokes", "link": "https://stackoverflow.com/users/8209251/mr-keystrokes"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503145120, "post_id": 45771364, "comment_id": 78500983, "body": "Thanks, will do."}, {"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1503148856, "post_id": 45771364, "comment_id": 78502156, "body": "@H&#229;konH&#230;gland Please copy and paste your comment into an answer, if you please. That is a very elegant answer."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "edited": false, "score": 0, "creation_date": 1503205639, "post_id": 45771364, "comment_id": 78514860, "body": "@ChristopherBottoms Thanks, I added it as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8209251, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5bc913d90b9b3c359708b154869cfb54?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Keystrokes", "link": "https://stackoverflow.com/users/8209251/mr-keystrokes"}, "edited": false, "score": 0, "creation_date": 1503211264, "post_id": 45772199, "comment_id": 78515926, "body": "Thanks very much @Edwin!"}], "tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 1, "last_activity_date": 1503149769, "creation_date": 1503149769, "answer_id": 45772199, "question_id": 45771364, "link": "https://stackoverflow.com/questions/45771364/how-do-i-append-a-new-hash-to-an-array-of-hashes/45772199#45772199", "title": "How do I append a new hash to an array of hashes?", "body": "<p><code>mother_hash</code> is a hash of arrays of hashes.</p>\n\n<p>To add another top-level array of hashes.</p>\n\n<pre><code>%mother_hash{$key} = [ { stuff }, { stuff } ];\n</code></pre>\n\n<p>To add another entry to an existing array</p>\n\n<pre><code>push @{%mother_hash{'key'}} { stuff };\n</code></pre>\n\n<p>To add another entry to the hash in the embedded array</p>\n\n<pre><code>%{@{%mother_hash{'top_key'}}[3]}{'new_inner_key'} = value;\n</code></pre>\n\n<p>When confused and attempting to match up the \"types\" of hash / array / scalar containing a hash reference / array reference, you can use the following technique</p>\n\n<pre><code> use Data::Dumper;\n $Data::Dumper::Terse = 1;\n printf(\"mother_hash reference = %s\\n\", Dumper(\\%mother_hash));\n printf(\"mother_hash of key 'top_key' = %s\\n\", Dumper(%mother_hash{top_key}));\n</code></pre>\n\n<p>and so on to find your way through a large data structure and validate that you are narrowing down to the region you want to access or alter.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 8209251, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5bc913d90b9b3c359708b154869cfb54?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Keystrokes", "link": "https://stackoverflow.com/users/8209251/mr-keystrokes"}, "edited": false, "score": 0, "creation_date": 1503211492, "post_id": 45772292, "comment_id": 78515970, "body": "Thanks, I appreciate it @Shawn!"}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1503150301, "creation_date": 1503150301, "answer_id": 45772292, "question_id": 45771364, "link": "https://stackoverflow.com/questions/45771364/how-do-i-append-a-new-hash-to-an-array-of-hashes/45772292#45772292", "title": "How do I append a new hash to an array of hashes?", "body": "<p>First I would point out the daughter hashes aren't hashes but arrays of anonymous hashes. To add another daughter hash:</p>\n\n<pre><code>$mother_hash{daughter_hash3} = [ { %daughter_hash3 } ];\n</code></pre>\n\n<p>This creates an anonymous array that contains an anonymous hash with the contents of <code>%daughter_hash3</code>.</p>\n\n<p>For a loop:</p>\n\n<pre><code>$mother_hash{$daughter_hash_key} = [ { %daughter_hash } ];\n</code></pre>\n\n<p>where <code>$daughter_hash_key</code> is a string contain the key for the <code>%mother_hash</code> and <code>%daughter_hash</code> is the hash to add.</p>\n\n<p>To add another hash to a daughter array with key <code>$daughter_hash_key</code>:</p>\n\n<pre><code>push @{ $mother_hash{$daughter_hash_key} }, { %daughter_hash };\n</code></pre>\n\n<p>I know ti's complicated but I suggest you use <code>Data::Dumper</code> to dump the contents of <code>%mother_hash</code> each time thru the loop to see if it grows correctly.</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\%mother_hash;\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>perldoc Data::Dumper</code></a> for details..</p>\n\n<p><code>Data::Dumper</code> is a standard module that comes with Perl. For a list of standard modules, see <a href=\"http://perldoc.perl.org/perlmodlib.html\" rel=\"nofollow noreferrer\"><code>perldoc perlmodlib</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1503205587, "creation_date": 1503205587, "answer_id": 45778664, "question_id": 45771364, "link": "https://stackoverflow.com/questions/45771364/how-do-i-append-a-new-hash-to-an-array-of-hashes/45778664#45778664", "title": "How do I append a new hash to an array of hashes?", "body": "<p>If you have a hash of arrays of hashes and want to add a new hash to \nthe end of each of the arrays, you can do:</p>\n\n<pre><code>push @{ $_ }, \\%new_hash for (values %mother_hash);\n</code></pre>\n\n<p>This loop iterates over the values of <code>%mother_hash</code> (which are array refs in this case) and setting <code>$_</code> for each iteration. Then in each iteration, we push the reference to the new hash <code>%new_hash</code> to the end of that array.</p>\n"}], "owner": {"reputation": 71, "user_id": 8209251, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5bc913d90b9b3c359708b154869cfb54?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Keystrokes", "link": "https://stackoverflow.com/users/8209251/mr-keystrokes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 1, "accepted_answer_id": 45778664, "answer_count": 3, "score": 4, "last_activity_date": 1503205587, "creation_date": 1503144681, "last_edit_date": 1503148935, "question_id": 45771364, "link": "https://stackoverflow.com/questions/45771364/how-do-i-append-a-new-hash-to-an-array-of-hashes", "title": "How do I append a new hash to an array of hashes?", "body": "<p>If I wanted to add a new hash to all the arrays in the <code>mother_hash</code> using a loop, what would be the syntax?</p>\n\n<p>My hash:</p>\n\n<pre><code>my %mother_hash = (\n    'daughter_hash1' =&gt; [ \n        { \n          'e' =&gt; '-4.3', \n          'seq' =&gt; 'AGGCACC', \n          'end' =&gt; '97', \n          'start' =&gt; '81' \n        } \n    ],\n    'daughter_hash2' =&gt; [ \n        { \n          'e' =&gt; '-4.4', \n          'seq' =&gt; 'CAGT', \n          'end' =&gt; '17', \n          'start' =&gt; '6' \n        }, \n        { \n          'e' =&gt; '-4.1', \n          'seq' =&gt; 'GTT', \n          'end' =&gt; '51', \n          'start' =&gt; '26' \n        }, \n        { \n          'e' =&gt; '-4.1', \n          'seq' =&gt; 'TTG', \n          'end' =&gt; '53', \n          'start' =&gt; '28' \n        } \n    ],\n    #...\n);\n</code></pre>\n"}, {"tags": ["mysql", "perl", "dbi", "dancer"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1503093097, "post_id": 45764534, "comment_id": 78489544, "body": "You know that that returns the last insert by that database handle, right?  Are you doing it immediately after the insert, or doing other things first?  Could the connection be timing out (or killed) and your client is getting a new handle?  I&#39;m pretty sure there isn&#39;t some widespread problem with last_insert_id, so there&#39;s likely something funky with your code.  Show it."}, {"owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1503122537, "post_id": 45764534, "comment_id": 78494667, "body": "I have updated my original question to add a failing code fragment. I am calling last_insert_id immediately after the insert. I have passed <code>RaiseError</code> and <code>PrintError</code> options to my connection but I do not see any error messages for this failure."}], "answers": [{"comments": [{"owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "edited": false, "score": 0, "creation_date": 1503209645, "post_id": 45769453, "comment_id": 78515581, "body": "Quoting from the doc.   &gt;Takes care of ensuring that the database handle is still connected and valid. If the handle was last asked for more than connection_check_threshold seconds ago, it will check that the connection is still alive, using either the $dbh-&gt;ping method if the DBD driver supports it, or performing a simple no-op query against the database if not. If the connection has gone away, a new connection will be obtained and returned. This avoids any problems for a long-running script where the connection to the database might go away."}, {"owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "edited": false, "score": 0, "creation_date": 1503210038, "post_id": 45769453, "comment_id": 78515656, "body": "In the code above the insert is immediately followed by last_insert_id()... So the probability of there being a sufficient large gap for the connection to drop is very low...  I will try to write a hook to print out a message whenever connection is lost and see whether it is the source of this problem..."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "edited": false, "score": 0, "creation_date": 1503217656, "post_id": 45769453, "comment_id": 78517407, "body": "@vijayvithal - I agree that it seems unlikely, but this is the only potential explanation I (or, it seems, anyone else) can come up with. I look forward to hearing whether your hook experiment confirms or denies my theory."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 0, "last_activity_date": 1503131442, "creation_date": 1503131442, "answer_id": 45769453, "question_id": 45764534, "link": "https://stackoverflow.com/questions/45764534/perl5-dbi-mysql-reliable-way-to-get-last-insert-id/45769453#45769453", "title": "Perl5 DBI Mysql: reliable way to get last_insert_id", "body": "<p>I've never heard of this type of problem before, but I suspect your closing note may be the key.  Dancer::Plugin::Database transparently manages database handles for you behind the scenes.  This can be awfully convenient... but it also means that you could change from using one dbh to using a different dbh at any time.  From <a href=\"https://metacpan.org/pod/Dancer::Plugin::Database#GETTING-A-DATABASE-HANDLE\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>Calling <code>database</code> will return a connected database handle; the first time it is called, the plugin will establish a connection to the database, and return a reference to the DBI object. On subsequent calls, the same DBI connection object will be returned, <strong>unless it has been found to be no longer usable (the connection has gone away), in which case a fresh connection will be obtained.</strong></p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p>And, as ysth has pointed out in comments on your question, <code>last_insert_id</code> is handle-specific, which suggests that, when you get 0, that's likely to be due to the handle changing on you.</p>\n\n<p>But there is hope!  Continuing on in the D::P::DB docs, there is a <code>database_connection_lost</code> hook available which is called when the database connection goes away and receives the defunct handle as a parameter, which would allow you to check and record <code>last_insert_id</code> within the hook's callback sub.  This could provide a way for you to get the id without the additional query, although you'd first have to work out a means of getting that information from the callback to your main processing code.</p>\n\n<p>The other potential solution, of course, would be to not use D::P::DB and manage your database connections yourself so that you have direct control over when new connections are created.</p>\n"}], "owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503131442, "creation_date": 1503087727, "last_edit_date": 1503122305, "question_id": 45764534, "link": "https://stackoverflow.com/questions/45764534/perl5-dbi-mysql-reliable-way-to-get-last-insert-id", "title": "Perl5 DBI Mysql: reliable way to get last_insert_id", "body": "<p>In my code I use <code>database-&gt;last_insert_id(undef,undef,undef,\"id\");</code> to get the autoincremented primary key. This works 99.99% of the time. But once in a while it returns a value of 0. \nIn such situations, Running a select with a WHERE clause similar to the value of the INSERT statement shows that the insert was successful. Indicating that the last_insert_id method failed to get the proper data.</p>\n\n<p>Is this a known problem with a known fix? or should I be following up each call to last_insert_id with a check to see if it is zero and if yes a select statement to retrieve the correct ID value?</p>\n\n<p>My version of mysql is\nmysql  Ver 14.14 Distrib 5.7.19, for Linux (x86_64) </p>\n\n<p>Edit1: Adding the actual failing code.</p>\n\n<pre><code>use Dancer2::Plugin::Database;\n&lt;Rest of the code to create the insert parameter&gt;\neval{\n     database-&gt;quick_insert(\"build\",$job);\n     $job-&gt;{idbuild}=database-&gt;last_insert_id(undef,undef,undef,\"idbuild\");\n     if ($job-&gt;{idbuild}==0){\n        my $build=database-&gt;quick_select(\"build\",$job);\n        $job-&gt;{idbuild}=$build-&gt;{idbuild};\n        }\n     };\ndebug (\"=================Scheduler build Insert=======================*** ERROR :Got Error\",$@) if $@;\n</code></pre>\n\n<p>Note: I am using Dancer's Database plugin. Whose description says,</p>\n\n<blockquote>\n  <p>Provides an easy way to obtain a connected DBI database handle by\n  simply calling the database keyword within your Dancer2 application</p>\n  \n  <p>Returns a Dancer::Plugin::Database::Core::Handle object, which is a\n  subclass of DBI's DBI::db connection handle object, so it does\n  everything you'd expect to do with DBI, but also adds a few\n  convenience methods. See the documentation for\n  Dancer::Plugin::Database::Core::Handle for full details of those.</p>\n</blockquote>\n"}, {"tags": ["perl", "oop", "moose"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1503084380, "post_id": 45763717, "comment_id": 78485710, "body": "you could have included the names you were having issues with to make the is easy to replicate. This is not a verifiable example really"}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1503084586, "post_id": 45763717, "comment_id": 78485808, "body": "@bytepusher I posted the full output that shows the names (you have to scroll to the right). You can also see this in the second script."}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1503086040, "post_id": 45763717, "comment_id": 78486555, "body": "Why the downvote? I provided the full script, link to the docs, a full working example, and full output with explanations and a clear question. Please comment if there is something you find missing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503093741, "post_id": 45763717, "comment_id": 78489709, "body": "<code>use namespace::autoclean;</code> is suppose to avoid this problem, but having everything in the same appears to be confusing it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503093788, "post_id": 45763717, "comment_id": 78489724, "body": "Note that POSIX exports like a hundred symbols. Why are you importing all of that?"}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503094733, "post_id": 45763717, "comment_id": 78489974, "body": "@ikegami I&#39;m only using POSIX for the <code>strftime</code> function. Specifically, <code>my $st = POSIX::strftime(&#39;%d-%m-%Y %H:%M:%S&#39;, localtime);</code>. If I can get that done w/o POSIX I&#39;d like it, but why imported method names are conflicting is still curious to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503095325, "post_id": 45763717, "comment_id": 78490121, "body": "I don&#39;t see what that has to do with my comment. Why do you import <code>SEEK_SET</code> when you only use <code>strftime</code>? Just importing what you need will speed things up."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503095357, "post_id": 45763717, "comment_id": 78490129, "body": "As I&#39;ve already mentioned, you simply need to get namespace::clean to do its job to solve your problem. Perhaps just adding curlies will do the trick."}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1503095396, "post_id": 45763717, "comment_id": 78490142, "body": "Perhaps giving an empty list during import may solve these issues if using the fully qualified name instead of a function name works the same. Will test..."}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1503095559, "post_id": 45763717, "comment_id": 78490191, "body": "You&#39;re correct about the imports, I was importing things for no reason. Is namespace::clean a drop in replacement for namespace::autoclean? I was under the impression the latter was the preferred approach, or was (over the old &quot;no Moose::Role&quot; approach)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503095619, "post_id": 45763717, "comment_id": 78490213, "body": "It will hide the problem, not solve it"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1503096971, "post_id": 45765618, "comment_id": 78490543, "body": "Yes, this solves it. Swapping in namespace::clean in the role (&quot;logrole&quot; in the question) solves the conflict. Also, importing only the needed functions would be a much better approach as ikegami said, but I didn&#39;t know about this module so thanks for the explanation."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1503096722, "last_edit_date": 1503096722, "creation_date": 1503094088, "answer_id": 45765618, "question_id": 45763717, "link": "https://stackoverflow.com/questions/45763717/method-name-conflicts-in-moose-roles/45765618#45765618", "title": "Method name conflicts in Moose roles", "body": "<p><a href=\"http://p3rl.org/namespace::autoclean\" rel=\"nofollow noreferrer\">namespace::autoclean</a> doesn't remove methods, and it trusts <a href=\"http://p3rl.org/Class::MOP::Class\" rel=\"nofollow noreferrer\">Class::MOP::Class</a>'s <code>get_method_list</code> to return them. Confusingly, it returns all the constants from the POSIX module.</p>\n\n<p>If you switch <code>namespace::autoclean</code> to <a href=\"http://p3rl.org/namespace::clean\" rel=\"nofollow noreferrer\">namespace::clean</a>, the problems are gone.</p>\n"}], "owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "accepted_answer_id": 45765618, "answer_count": 1, "score": 5, "last_activity_date": 1503096722, "creation_date": 1503084047, "question_id": 45763717, "link": "https://stackoverflow.com/questions/45763717/method-name-conflicts-in-moose-roles", "title": "Method name conflicts in Moose roles", "body": "<p>What I would like to achieve is to create a Moose class that imports several roles. This is something I've been doing for years with no issues, though I am currently stuck on why the simple example below will generate method name conflicts.</p>\n\n<pre><code>package logrole;\n\nuse Moose::Role;\nuse POSIX;\nuse namespace::autoclean;\n\npackage otherrole;\n\nuse Moose::Role;\nuse File::Temp;\nuse namespace::autoclean;\n\npackage myclass;\n\nuse Moose;\nuse namespace::autoclean;\nwith 'logrole', 'otherrole'; \n\npackage main;\n\nuse strict;\nuse warnings;\nuse myclass;\n</code></pre>\n\n<p>Running this gives:</p>\n\n<pre><code>Due to method name conflicts in roles 'logrole' and 'otherrole', the methods 'SEEK_CUR', 'SEEK_END', and 'SEEK_SET' must be implemented or excluded by 'myclass' at /home/user/perl5/perlbrew/perls/perl-5.22.1/lib/site_perl/5.22.1/x86_64-linux/Moose/Exporter.pm line 419\nMoose::with('logrole', 'otherrole') called at roles.pl line 29\n</code></pre>\n\n<p>According to the <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Spec/Role.pod\" rel=\"noreferrer\">docs</a> you can exclude method names when consuming a role like so:</p>\n\n<pre><code>package logrole;\n\nuse Moose::Role;\nuse POSIX;\nuse namespace::autoclean;\n\npackage otherrole;\n\nuse Moose::Role;\nuse File::Temp;\nuse namespace::autoclean;\n\npackage myclass;\n\nuse Moose;\nuse namespace::autoclean;\nwith 'logrole', 'otherrole' =&gt; { -excludes =&gt; [\"SEEK_CUR\", \"SEEK_END\", \"SEEK_SET\" ] };\n\npackage main;\n\nuse strict;\nuse warnings;\nuse myclass;\n</code></pre>\n\n<p>This solves the name conflicts, but the problem with this solution is that trying to import <code>POSIX</code> in <code>otherrole</code> generates hundreds of name conflicts, so the fix of excluding all these in the module <code>myclass</code> seems very messy.</p>\n\n<p>How can I import (or write) these roles to avoid the method name conflicts? </p>\n"}, {"tags": ["perl-module", "cpan", "perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1503084047, "post_id": 45763618, "comment_id": 78485538, "body": "I see Mime::Base64 in the requirements, which requires XSLoader, meaning it probably needs to compile C code. So I believe the answer would be that you do need make."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1503084253, "post_id": 45763618, "comment_id": 78485642, "body": "A well behaved pure Perl module can be copied to a directory on your system <code>@INC</code>. The normal build process will do compatibility and dependency checks, and run the module&#39;s unit tests. It can&#39;t be that hard to get <code>make</code> onto your machine that you would give this up. What is your OS?"}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503085254, "post_id": 45763618, "comment_id": 78486137, "body": "I happen to already have Base64.  I am on Windows; the Perl I am using is the one bundled with git for Windows.  (I also have Cygwin installed, which has its own Perl.)  I don&#39;t have admin rights on the machine, though there is a process to apply for them, if I can explain to the Powers That Be (tm) why I need them."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503087460, "post_id": 45764360, "comment_id": 78487267, "body": "You&#39;re using a gutted environment. If you want the full thing, download Cygwin."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503087499, "post_id": 45764360, "comment_id": 78487280, "body": "I have a Cygwin as well, but that doesn&#39;t have make installed either."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503087757, "post_id": 45764360, "comment_id": 78487431, "body": "So install it. And <code>git</code>. (No need to install git &quot;for Windows&quot; if you have Cygwin, because git &quot;for windows&quot; is really git for MSYS, which is a subset of Cygwin). You can do this by running the <code>setup</code> program found on their web site; it also acts as a package manager."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 1, "creation_date": 1503088019, "post_id": 45764360, "comment_id": 78487549, "body": "<code>make</code> is provided by the <code>make</code> package in the <code>Devel</code> category. <code>git</code> is provided by the <code>git</code> package in the <code>Devel</code> category."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "edited": false, "score": 0, "creation_date": 1503088499, "post_id": 45764360, "comment_id": 78487781, "body": "Okay, you convinced me.  Installing Strawberry Perl.  I should have probably done this weeks ago."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1503088102, "last_edit_date": 1503088102, "creation_date": 1503086932, "answer_id": 45764360, "question_id": 45763618, "link": "https://stackoverflow.com/questions/45763618/bootstrap-cpan-without-make/45764360#45764360", "title": "bootstrap cpan without make", "body": "<p>There are three common installers for Perl module distributions. To use these installers, one follows one of the following two sequences of steps:</p>\n\n<pre><code>perl Makefile.PL   # ExtUtils::MakeMaker or compatible\nmake\nmake test\nmake install\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl Build.PL      # Module::Build or compatible\n./Build\n./Build test\n./Build install\n</code></pre>\n\n<p><code>cpan</code> handles downloading the distributions and installing prerequisites, but it doesn't replace the distribution's installer. When it comes time to install a download distribution, it uses one of the above sequence (depending on whether the distribution includes a file named <code>Build.PL</code> or not).</p>\n\n<p><code>HTTP-Tiny-Multipart</code> (the distribution that provides HTTP::Tiny::Multipart) uses ExtUtils::MakeMaker as its installer, so installing it requires <code>make</code>.</p>\n\n<hr>\n\n<p>The underlying issue is that you are using a gutted environment. It's not the purpose of <code>git</code> to provide <code>perl</code> to you.</p>\n\n<p>If you want the full unix emulation environment for which <code>git</code> and its <code>perl</code> were built<sup>[1]</sup>, install Cygwin. Alternatively, you could also just as easily install a native Perl such as ActivePerl or Strawberry Perl.</p>\n\n<hr>\n\n<ol>\n<li>Technically, <code>git</code> and its <code>perl</code> are built for MSYS, which is a subset of Cygwin.</li>\n</ol>\n"}], "owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 45764360, "answer_count": 1, "score": 1, "last_activity_date": 1503088102, "creation_date": 1503083572, "question_id": 45763618, "link": "https://stackoverflow.com/questions/45763618/bootstrap-cpan-without-make", "title": "bootstrap cpan without make", "body": "<p>I want to use the <code>cpan</code> tool get a library from CPAN (<code>HTTP::Tiny::Multipart</code>).  (Or should I be using something else??)  It is written in pure Perl so I hope I don't need make for this.  Can this be done?</p>\n\n<p>At first I couldn't get things to download at all, but eventually I found out the issue was proxies, and now with the right environment variables set I can successfully reach CPAN.  But now I get error messages about a missing make.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503082247, "post_id": 45762836, "comment_id": 78484562, "body": "Re &quot;<i>If I think about ?= as an anchor</i>&quot;, huh???"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1503150661, "post_id": 45762836, "comment_id": 78502715, "body": "Why do you want to do it in just one regex? Breaking the code into easily-digested pieces will make maintaining it easier, faster, and cheaper. If you have trouble figuring it out, then everyone else will too."}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503082155, "post_id": 45762974, "comment_id": 78484520, "body": "My reason for wanting to do it one substitution was mostly just to learn.  If it&#39;s a very stupid approach for this problem, that&#39;s good enough for me.  I&#39;m still interested in understanding what &quot;non-consuming&quot; means.  Does that part of my question make sense?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503082567, "post_id": 45762974, "comment_id": 78484736, "body": "Non-consuming means the body of the lookaround is considered to have matched 0 characters from the perspective of the outside of the lookaround. e.g. <code>&quot;ab&quot; =~ &#47;a(?=\\w)b&#47;</code> matches, while <code>&quot;ab&quot; =~ &#47;a\\wb&#47;</code> wouldn&#39;t."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1503083061, "post_id": 45762974, "comment_id": 78484986, "body": "Okay, I think this makes sense.  I think what was throwing me off was the most upvoted answer here: <a href=\"https://stackoverflow.com/questions/469913/regular-expressions-is-there-an-and-operator\" title=\"regular expressions is there an and operator\">stackoverflow.com/questions/469913/&hellip;</a> . It&#39;s super-upvoted, so I am probably just misunderstanding that answer.  It certainly doesn&#39;t work as I thought it would."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503083545, "post_id": 45762974, "comment_id": 78485268, "body": "Compare <code>&#39;def abc&#39; =~ &#47;^(?=.*abc)(?=.*def)&#47;</code> and <code>&#39;def abc&#39; =~ &#47;^.*abc.*def&#47;</code>. <code>.*abc</code> matches 3 character, but <code>(?=.*abc)</code> matches zero characters, so <code>(?=.*def)</code> starts matching as position 0 too."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503083611, "post_id": 45762974, "comment_id": 78485301, "body": "Sigh...no, I still don&#39;t get it.  I just do not understand how this operator works and no reading I do seems to clear it up.  I do not get why <code>&#47;(?=a)(?=b)&#47;</code> doesn&#39;t match for <code>ab</code> OR <code>ba</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1503083735, "post_id": 45762974, "comment_id": 78485363, "body": "Does <code>&#47;c(?=a)(?=b)&#47;</code> make is clearer? Remember, all matches are preceded by an implicit <code>\\A(?s:.)*?</code>. There is no position which is followed by <code>a</code> and which is followed by <code>b</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1503082153, "last_edit_date": 1503082153, "creation_date": 1503081033, "answer_id": 45762974, "question_id": 45762836, "link": "https://stackoverflow.com/questions/45762836/replace-a-string-when-two-strings-exist-in-one-regex-in-perl/45762974#45762974", "title": "Replace a string when two strings exist in one regex in Perl", "body": "<p>First, let's get the actual solution out there:</p>\n\n<pre><code>perl -pe's/MACRO2/MACRO3/g if /MACRO1/'\n</code></pre>\n\n<hr>\n\n<p>Now, let's look at your peculiar request. As a single substitution, it would look something like the following:</p>\n\n<pre><code>perl -pe's/MACRO2(?:(?&lt;=MACRO1.*)|(?=.*MACRO1))/MACRO3/g'\n</code></pre>\n\n<p>Ignoring the fact that this doesn't work because variable-width lookbehinds aren't supported, this is incredibly inefficient. While the time required by the first solution I presented is bound by a factor of the size of the file, the time required by this solution is bound by a factor of the size of the file times a factor of the number of instances of MACRO2!</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503096669, "post_id": 45764511, "comment_id": 78490465, "body": "This is interesting and I juuuust figured it out.  One problem is that it doesn&#39;t work if MACRO2 comes first. Is that fixable?"}, {"owner": {"reputation": 130, "user_id": 5999176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5259acf8cc49519a713568fc51a4d?s=128&d=identicon&r=PG&f=1", "display_name": "davernator", "link": "https://stackoverflow.com/users/5999176/davernator"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503105198, "post_id": 45764511, "comment_id": 78492010, "body": "Of course, and probably in several ways., but (and hats off to you and ikegami ... it&#39;s been a while, this is fun) it requires a function:"}, {"owner": {"reputation": 130, "user_id": 5999176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5259acf8cc49519a713568fc51a4d?s=128&d=identicon&r=PG&f=1", "display_name": "davernator", "link": "https://stackoverflow.com/users/5999176/davernator"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503105274, "post_id": 45764511, "comment_id": 78492022, "body": "First, hats off and thanks to you (zzxyz) and ikegami. It&#39;s been a while, and this is fun."}, {"owner": {"reputation": 130, "user_id": 5999176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5259acf8cc49519a713568fc51a4d?s=128&d=identicon&r=PG&f=1", "display_name": "davernator", "link": "https://stackoverflow.com/users/5999176/davernator"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1503105751, "post_id": 45764511, "comment_id": 78492097, "body": "O.k., I put in the previous 2 comments, then added the further edit. Apologies for my newbiehood in comment editing. Learning ..."}], "tags": [], "owner": {"reputation": 130, "user_id": 5999176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c5259acf8cc49519a713568fc51a4d?s=128&d=identicon&r=PG&f=1", "display_name": "davernator", "link": "https://stackoverflow.com/users/5999176/davernator"}, "is_accepted": false, "score": 0, "last_activity_date": 1503105663, "last_edit_date": 1503105663, "creation_date": 1503087628, "answer_id": 45764511, "question_id": 45762836, "link": "https://stackoverflow.com/questions/45762836/replace-a-string-when-two-strings-exist-in-one-regex-in-perl/45764511#45764511", "title": "Replace a string when two strings exist in one regex in Perl", "body": "<p>Then there's always:</p>\n\n<pre><code>$rec =~ s/^(.*)MACRO1(.*)MACRO2(.*)$/\\1MACRO1\\2MACRO3\\3/;\n</code></pre>\n\n<p>O.k., per comment (what if MACRO2 comes first):</p>\n\n<pre><code>sub foo {\n    my ($x) = @_;\n    $x =~ s/2/3/;\n    return $x;\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>$s3 =~ s/^(.*)((MACRO1(.*)MACRO2)|(MACRO2(.*)MACRO1))(.*)$/$1.($3?foo($3):foo($5))/e;\n</code></pre>\n\n<p>Of course, this requires the function (I called it foo).</p>\n\n<p>Could possibly be done without a function, nesting match/replace in the replacement pattern to do the same thing, but I was getting a lot of syntax grief from Perl (my fault I'm sure).</p>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 45762974, "answer_count": 2, "score": 5, "last_activity_date": 1503105663, "creation_date": 1503080494, "last_edit_date": 1503082013, "question_id": 45762836, "link": "https://stackoverflow.com/questions/45762836/replace-a-string-when-two-strings-exist-in-one-regex-in-perl", "title": "Replace a string when two strings exist in one regex in Perl", "body": "<p>Given the following input</p>\n\n<pre><code>$ cat pre\nstuff MACRO1 stuff MACRO2\nstuff MACRO2 stuff MACRO1\nstuff MACRO2 stuff\n</code></pre>\n\n<p>I want to replace MACRO2 (with MACRO3) if MACRO1 also exists.  Like so:</p>\n\n<pre><code>$ perl -ne '/(?=.*MACRO1).*MACRO2/ ? print s/MACRO2/MACRO3/gr : print' pre\nstuff MACRO1 stuff MACRO3\nstuff MACRO3 stuff MACRO1\nstuff MACRO2 stuff\n</code></pre>\n\n<p>(I imagine the <code>.*MACRO2</code> part of this expression is unnecessary, now that I think about it)\nEdit.  A less stupid version of the above based on feedback so far:</p>\n\n<pre><code>$ perl -ne '/MACRO1/ ? print s/MACRO2/MACRO3/gr : print' pre\n</code></pre>\n\n<p>What I am trying to figure out is how to do it with just a regex.  Here is one attempt:</p>\n\n<pre><code>$ perl -ne 'print s/(?=.*MACRO1)(?=.*MACRO2)MACRO2/MACRO3/gr' pre\nstuff MACRO1 stuff MACRO2\nstuff MACRO3 stuff MACRO1\nstuff MACRO2 stuff\n</code></pre>\n\n<p>I think I am having some fundamental confusion about how a lookahead operator can be both an \"anchor\" and \"non-consuming\" at the same time.  If I think about <code>?=</code> as an anchor, it makes sense to me that the above doesn't work.  But that would seem to contradict \"non-consuming\".</p>\n\n<p>Can anyone define what is meant by non-consuming and show me a regex that would produce the desired results?  </p>\n"}, {"tags": ["perl", "signals", "opcode"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503079667, "post_id": 45762391, "comment_id": 78483318, "body": "I think it may also depend on what is &quot;safe.&quot;  I have some long-running (albeit non-critical) code that uses flow control based on assignments to a hash in the <code>SIGCHLD</code> handler.  Some socket reads do get interrupted by the signal handler (not because of assignment), but the handler itself never had trouble, nor caused anything unexpected.  Don&#39;t know about single opcodes though."}, {"owner": {"reputation": 3134, "user_id": 58214, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca6e06b8f4582c770ea443f8bf4f48a3?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t", "link": "https://stackoverflow.com/users/58214/beno%c3%aet"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503080178, "post_id": 45762391, "comment_id": 78483603, "body": "If the update of your hash is made of multiple opcodes (no idea), if you&#39;re working with it and then it gets interrupted in the middle, what would happen ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503080488, "post_id": 45762391, "comment_id": 78483770, "body": "I am pretty sure that adding a key-value pair to a hash is complex, and not one opcode.  If <i>that</i> got interrupted no good things would come.  But I think that there is a very, very small chance that the handler&#39;s code that only assigns a ready value to a variable gets interrupted (I don&#39;t see how that can happen).  If it were doing more that&#39;s different. Please note: I do think that it&#39;s best to do as little as necessary."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503085151, "post_id": 45763542, "comment_id": 78486084, "body": "Updated my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1503412736, "last_edit_date": 1503412736, "creation_date": 1503083271, "answer_id": 45763542, "question_id": 45762391, "link": "https://stackoverflow.com/questions/45762391/is-it-safe-to-access-modify-a-shared-variable-in-a-signal-handler/45763542#45763542", "title": "Is it safe to access/modify a shared variable in a signal handler?", "body": "<p>Under safe signals, assigning a sub to a signal in <code>%SIG</code> causes Perl to install a signal handler that just increments a counter. This counter is checked between Perl opcodes.<sup>[1]</sup> Only then is the Perl sub called.</p>\n\n<p>Pre-increment, post-increment, pre-decrement and post-decrement are all Perl opcodes, so they won't get interrupted by a signal.</p>\n\n<pre><code>$ perl -MO=Concise,-exec -e'my $x; ++$x; --$x; $x++; $x--;'\n1  &lt;0&gt; enter\n2  &lt;;&gt; nextstate(main 1 -e:1) v:{\n3  &lt;0&gt; padsv[$x:1,2] vM/LVINTRO\n4  &lt;;&gt; nextstate(main 2 -e:1) v:{\n5  &lt;0&gt; padsv[$x:1,2] sRM\n6  &lt;1&gt; preinc vK/1\n7  &lt;;&gt; nextstate(main 2 -e:1) v:{\n8  &lt;0&gt; padsv[$x:1,2] sRM\n9  &lt;1&gt; predec vK/1\na  &lt;;&gt; nextstate(main 2 -e:1) v:{\nb  &lt;0&gt; padsv[$x:1,2] sRM\nc  &lt;1&gt; preinc[t2] vK/1\nd  &lt;;&gt; nextstate(main 2 -e:1) v:{\ne  &lt;0&gt; padsv[$x:1,2] sRM\nf  &lt;1&gt; predec[t3] vK/1\ng  &lt;@&gt; leave[1 ref] vKP/REFC\n-e syntax OK\n</code></pre>\n\n<p>We would also have to see how <code>$p</code> is used outside of the signal handler to determine if it's safe or not. For example, you'd have a problem if the code outside the signal handler did the following, because that could be interrupted.</p>\n\n<pre><code>$p = $p - 1;\n</code></pre>\n\n<hr>\n\n<p>This is safe:</p>\n\n<pre><code>my %children;\n\n$SIG{CHLD} = sub {\n   local ($?, $!, $^E);\n   while ( ( my $pid = waitpid(-1, WNOHANG) ) &gt; 0 ) {\n      my $child = $children{$pid}\n         or next;   # ?!?\n\n      $child-&gt;{exit_status} = $?;\n   }\n};    \n\nwhile (1) {\n   ...\n\n   for my $pid (keys(%children)) {\n      my $child = $children{$pid};\n      defined( my $exit_status = $child-&gt;{exit_status} )\n         or next;\n\n      delete($children{$pid});\n\n      ...\n   }\n\n   ...\n}\n</code></pre>\n\n<hr>\n\n<ol>\n<li>I think it has been made even less granular in more recent versions of Perl.</li>\n</ol>\n"}], "owner": {"reputation": 3134, "user_id": 58214, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca6e06b8f4582c770ea443f8bf4f48a3?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t", "link": "https://stackoverflow.com/users/58214/beno%c3%aet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1503412736, "creation_date": 1503078764, "last_edit_date": 1503080399, "question_id": 45762391, "link": "https://stackoverflow.com/questions/45762391/is-it-safe-to-access-modify-a-shared-variable-in-a-signal-handler", "title": "Is it safe to access/modify a shared variable in a signal handler?", "body": "<p>In C, a signal handler may only access variable of type <code>volatile sig_atomic_t</code>. In perl, it safe (and atomic) to run this kind of signal handler ?</p>\n\n<pre><code>my $p = 0;\n\n$SIG{CHLD} = sub {\n    while (waitpid(-1, WNOHANG) &gt; 0) {\n        $p--;\n    }\n};\n</code></pre>\n\n<p>while my main thread is working with <code>$p</code> like doing <code>=</code>, <code>++</code> or <code>+=</code>.</p>\n\n<p>I know that perl use <a href=\"http://perldoc.perl.org/perlipc.html#Deferred-Signals-%28Safe-Signals%29\" rel=\"nofollow noreferrer\" title=\"Safe-Signals\">Safe-Signals</a> but is a simple <code>++</code> or <code>--</code> a single opcode ? What language operators are 1-opcode ?</p>\n\n<p>By safe I mean that what are the operations atomic so that <code>$p</code> content doesn't get corrupted.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1503078327, "post_id": 45762187, "comment_id": 78482545, "body": "The exit code is in <code>$?</code> in <code>bash</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1503078329, "post_id": 45762187, "comment_id": 78482546, "body": "Why aren&#39;t you looking at <code>$?</code>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1503078396, "post_id": 45762187, "comment_id": 78482592, "body": "See <a href=\"http://tldp.org/LDP/abs/html/exit-status.html\" rel=\"nofollow noreferrer\">Exit and Exit Status</a>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503089215, "post_id": 45762187, "comment_id": 78488097, "body": "&quot;<i>This question was caused by a problem that can no longer be reproduced or <b>a simple typographical error.</b> While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers.</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1503078440, "last_edit_date": 1592644375, "creation_date": 1503078440, "answer_id": 45762312, "question_id": 45762187, "link": "https://stackoverflow.com/questions/45762187/make-perl-exit-with-1-if-a-string-is-found/45762312#45762312", "title": "Make perl exit with 1 if a string is found", "body": "<p>You should be using <code>$?</code> instead of <code>$!</code>.</p>\n<blockquote>\n<p><code>!</code>: Expands to the process ID of the most recently executed  background  (asynchronous) command.</p>\n<p><code>?</code>: Expands to the exit status of the most recently executed foreground pipeline.</p>\n</blockquote>\n"}], "owner": {"reputation": 481, "user_id": 2217065, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/96638dec019fd4ad4d880a06f14f8dea?s=128&d=identicon&r=PG&f=1", "display_name": "giraffe", "link": "https://stackoverflow.com/users/2217065/giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1503098853, "accepted_answer_id": 45762312, "answer_count": 1, "score": -1, "last_activity_date": 1503078440, "creation_date": 1503078041, "question_id": 45762187, "link": "https://stackoverflow.com/questions/45762187/make-perl-exit-with-1-if-a-string-is-found", "closed_reason": "Not suitable for this site", "title": "Make perl exit with 1 if a string is found", "body": "<p>I want a bash command (perl?) that will output a non-zero exit code if a non-ASCII character is found in a text file.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>perl -nle 'print \"$.\" if m/[\\x80-\\xFF]/' file_that_has_non_ascii_characters.txt\n</code></pre>\n\n<p>This prints out each line that a non-ASCII character is found on. I tried a variant with <code>exit 1</code> in it, but it doesn't seem to work:</p>\n\n<pre><code>\u279c perl -nle 'exit 1 if m/[\\x80-\\xFF]/' file_that_has_non_ascii_characters.txt\n\u279c echo $!\n0\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1503075989, "post_id": 45761608, "comment_id": 78481416, "body": "Welcome to stackoverflow. Can you please show us what you tried, your code?  Here people normally post questions about specific problems that they have with their code.  It is not a place where one simply asks for code to be written for them."}, {"owner": {"reputation": 1, "user_id": 8484886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2255bbe0dce8a333a74e38a8782f42ee?s=128&d=identicon&r=PG&f=1", "display_name": "Dhvani Sheth", "link": "https://stackoverflow.com/users/8484886/dhvani-sheth"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503076185, "post_id": 45761608, "comment_id": 78481511, "body": "foreach $parentKey (sort {$a &lt;=&gt; $b} keys %orderedChoiceNameHash) { \tfor $childKey (sort {$orderedChoiceNameHash{$a} &lt;=&gt; $orderedChoiceNameHash{$b}} keys %{ $orderedChoiceNameHash{$parentKey}}) {    \t\tprint $fh &quot;$parentKey ::::: $childKey :::::  $orderedChoiceNameHash{$parentKey}{$childKey}\\n&quot;; \t} }"}, {"owner": {"reputation": 1, "user_id": 8484886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2255bbe0dce8a333a74e38a8782f42ee?s=128&d=identicon&r=PG&f=1", "display_name": "Dhvani Sheth", "link": "https://stackoverflow.com/users/8484886/dhvani-sheth"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503076216, "post_id": 45761608, "comment_id": 78481520, "body": "The above is the code I tried. But the secondary keys are not getting sorted."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503076926, "post_id": 45761608, "comment_id": 78481861, "body": "Please edit your question and put the code you&#39;ve tried there so it&#39;s easily visible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503077183, "post_id": 45761608, "comment_id": 78481974, "body": "Can&#39;t sort a hash.  What do you actually want to do?"}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503081259, "post_id": 45761608, "comment_id": 78484125, "body": "@ikegami He wants to print the hash out in a sorted order."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5013952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Qs0M5O30Nb8/AAAAAAAAAAI/AAAAAAAAAYo/N-JL8gz-FOQ/photo.jpg?sz=128", "display_name": "sandeep singh", "link": "https://stackoverflow.com/users/5013952/sandeep-singh"}, "edited": false, "score": 0, "creation_date": 1503079461, "post_id": 45762525, "comment_id": 78483192, "body": "output of the above code will be like first key sorted in descending order ($b&lt;=&gt;$a) and second key sorted in ascending order ($a&lt;=&gt;$b). If you want first key to sort in ascending order just use $a&lt;=&gt;$b."}], "tags": [], "owner": {"reputation": 39, "user_id": 5013952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Qs0M5O30Nb8/AAAAAAAAAAI/AAAAAAAAAYo/N-JL8gz-FOQ/photo.jpg?sz=128", "display_name": "sandeep singh", "link": "https://stackoverflow.com/users/5013952/sandeep-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1503082869, "last_edit_date": 1503082869, "creation_date": 1503079217, "answer_id": 45762525, "question_id": 45761608, "link": "https://stackoverflow.com/questions/45761608/sorting-a-hash-of-hash-by-second-levels-keys-in-perl/45762525#45762525", "title": "Sorting a hash of hash by second levels keys in Perl", "body": "<pre><code>foreach my $key1 (sort {$b&lt;=&gt;$a} keys %hash)\n{\n    foreach my $key2 (sort {$a&lt;=&gt;$b} keys %{ $hash{$key1} })\n    {\n        print \"$key1\\t$key2\\t$hash{$key1}{$key2}\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8484886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2255bbe0dce8a333a74e38a8782f42ee?s=128&d=identicon&r=PG&f=1", "display_name": "Dhvani Sheth", "link": "https://stackoverflow.com/users/8484886/dhvani-sheth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503082869, "creation_date": 1503075655, "last_edit_date": 1503078620, "question_id": 45761608, "link": "https://stackoverflow.com/questions/45761608/sorting-a-hash-of-hash-by-second-levels-keys-in-perl", "title": "Sorting a hash of hash by second levels keys in Perl", "body": "<p>I have a hash as follows: </p>\n\n<pre><code>          '4' =&gt; {\n                   '25' =&gt; 'X',\n                   '24' =&gt; 'Y',\n                   '23' =&gt; 'Z'\n                 },\n          '3' =&gt; {\n                   '22' =&gt; 'S',\n                   '15' =&gt; 'T'\n                 },\n          '2' =&gt; {\n                   '11' =&gt; 'A',\n                   '21' =&gt; 'B',\n                   '9' =&gt; 'C',\n                   '17' =&gt; 'D',\n                   '12' =&gt; 'E',\n                   '20' =&gt; 'F',\n                   '14' =&gt; 'G',\n                   '4' =&gt; 'H',\n                   '18' =&gt; 'I',\n                   '19' =&gt; 'J',\n                   '16' =&gt; 'K',\n                   '10' =&gt; 'L',\n                   '13' =&gt; 'M'\n                 }\n</code></pre>\n\n<p>I want to sort first on the basis of primary key or the first key that is 2,3,4. Then for each of the key, say for 4, I want to sort for secondary key so, the expected output will be:</p>\n\n<pre><code>          '4' =&gt; {\n                   '23' =&gt; 'Z',\n                   '24' =&gt; 'Y',\n                   '25' =&gt; 'X'\n\n\n                 },\n          '3' =&gt; {\n                   '15' =&gt; 'T',\n                   '22' =&gt; 'S'\n\n                 },\n          '2' =&gt; {\n                   '4' =&gt; 'H',\n                   '9' =&gt; 'C',\n                   '10' =&gt; 'L',\n                   '11' =&gt; 'A',\n                   '12' =&gt; 'E',\n                   '13' =&gt; 'M',\n                   '14' =&gt; 'G',\n                   '16' =&gt; 'K',\n                   '17' =&gt; 'D',\n                   '18' =&gt; 'I',\n                   '19' =&gt; 'J',\n                   '20' =&gt; 'F',\n                   '21' =&gt; 'B'\n                 }\n</code></pre>\n\n<p>I tried this code, but the secondary keys are not getting sorted:</p>\n\n<pre><code>foreach $parentKey (sort {$a &lt;=&gt; $b} keys %orderedChoiceNameHash) {\n    for $childKey (sort {$orderedChoiceNameHash{$a} &lt;=&gt; $orderedChoiceNameHash{$b}} keys %{ $orderedChoiceNameHash{$parentKey}}) {\n        print $fh \"$parentKey ::::: $childKey ::::: $orderedChoiceNameHash{$parentKey}{$childKey}\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1503068259, "post_id": 45759583, "comment_id": 78477046, "body": "Why is there a <code>.</code> in your regex?"}, {"owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1503075569, "post_id": 45759583, "comment_id": 78481212, "body": "Thanks! You are right, the . caused the issue."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "edited": false, "score": 0, "creation_date": 1503075584, "post_id": 45759686, "comment_id": 78481224, "body": "Thanks very much!"}], "tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": true, "score": 1, "last_activity_date": 1503068322, "creation_date": 1503068322, "answer_id": 45759686, "question_id": 45759583, "link": "https://stackoverflow.com/questions/45759583/issue-with-matching/45759686#45759686", "title": "Issue with matching", "body": "<p>The regex symbol <code>.</code> just before your <code>$</code> line-end symbol captures \"one thing\" which in your case, seems to be the last letter <code>S</code></p>\n\n<p>This means that your regex is almost right, but that \"one thing\" needed to be satisfied by the regex, so the regex matcher rewound the required <code>(\\w+)</code> pattern by one character to give the <code>.</code> its demanded character.</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1503072456, "post_id": 45759849, "comment_id": 78479706, "body": "From the sample datum, the brackets aren&#39;t actually there, they were just indicating the optional part"}], "tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1503068898, "creation_date": 1503068898, "answer_id": 45759849, "question_id": 45759583, "link": "https://stackoverflow.com/questions/45759583/issue-with-matching/45759849#45759849", "title": "Issue with matching", "body": "<p>you need to add, and escape, the square brackets </p>\n\n<pre><code>my $regex=qr{^\n (?:(\\[[\\w\\/]+)=&gt;\\])?       # (optional)\n (\\w+)                  # (required)\n (?:\\[-&gt;(\\w+)\\])?           # (optional)\n (?:\\[\\w+\\]|\\[\\w+:\\w+\\])? # (optional)\n    }x;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 45759686, "answer_count": 2, "score": 1, "last_activity_date": 1503068997, "creation_date": 1503067969, "last_edit_date": 1503068997, "question_id": 45759583, "link": "https://stackoverflow.com/questions/45759583/issue-with-matching", "title": "Issue with matching", "body": "<p>The following code below is trying to match a format like </p>\n\n<p><code>[a=&gt;]b[-&gt;c][d:e]</code></p>\n\n<p>where <code>a=&gt;</code>, <code>-&gt;</code>c, <code>d:e</code> are optional. </p>\n\n<pre><code>($reg =~ /^\n     (?:([\\w\\/]+)=&gt;)?       # (optional)\n     (\\w+)                  # (required)\n     (?:-&gt;(\\w+))?           # (optional)\n     (\\[\\d+\\]|\\[\\d+:\\d+\\])? # (optional)\n     .$/x)\n        or croak (\"-E Invalid register format );\n</code></pre>\n\n<p>When I give the input as <code>sample=&gt;STATUS</code> as <code>$reg value</code>, the last <code>S</code> of <code>STATUS</code> is getting truncated. Why?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 0, "creation_date": 1503065867, "post_id": 45758663, "comment_id": 78475356, "body": "@ChrisHawkes: There is no solution in those links to execute and not replace the current script. Or execute and not wait"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503072530, "post_id": 45758663, "comment_id": 78479753, "body": "For your second script, do you only want to run it unless a certain condition occurs, or is it something that always needs to run? Also, do you not want to see output at all for that second script?"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503080167, "post_id": 45758663, "comment_id": 78483598, "body": "@Cubis:I do not want to see any output of the second script. I just want to start it and continue/forget about it from the forking script point of view. And I want to run it in a specific area near the end of my first script"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 1, "creation_date": 1503082503, "post_id": 45758663, "comment_id": 78484703, "body": "if you fork it, it returns 0 to the child process - with that, you can tell which process is the child, and have the child do a system call to your script and direct any output to /dev/null so it doesn&#39;t show any output on your console."}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503082713, "post_id": 45758663, "comment_id": 78484822, "body": "@Cubis:That sounds simple enough."}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503083073, "post_id": 45758663, "comment_id": 78484991, "body": "Remember that if you do not want the child process to do anything after the system call you will want to close it, or make sure only the parent runs things after the if-child block"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503223397, "post_id": 45758663, "comment_id": 78518921, "body": "@Cubis:One sec. What happens if the parent process finishes before the child which is what I expect? That would be a zombie process right?"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503284128, "post_id": 45758663, "comment_id": 78535309, "body": "Yeah, you may need the parent to call wait() in order to make sure it cleans up the child process when the child is done running, especially if you expect to run the main script a lot. However you must take into account the fact that the parent will not run anything else until the child process finishes. If all you were going for is to make sure the second script runs without any of its output being shown in the output of the first script, you may not even need to fork, just call system(&#39;/path/to/script2 &gt; /dev/null 2&gt;&amp;1&#39;) this will redirect all output to essentially nothing"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503600032, "post_id": 45758663, "comment_id": 78696403, "body": "@Cubis:I want script A to fork script B and script A to finish without caring about script B&#39;s output. From what you described it seems it is not possible is it?"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503601036, "post_id": 45758663, "comment_id": 78696970, "body": "If you absolutely must fork, and you want to prevent zombies, do something like this: parentCodeBeforeTheForkHere; $is_parent = fork(); if ($is_parent) { restOfParentCodeHere; wait(); # to prevent zombies } else { #childCodeHere } # end of script"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503602437, "post_id": 45758663, "comment_id": 78697640, "body": "@Cubis: The <code>wait()</code> is what I want to avoid. I do not absolutely must fork. I just want a script to start another script and forget about it. So is it possible at all or not possible by forking or is there some library that supports this?"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 1, "creation_date": 1503685110, "post_id": 45758663, "comment_id": 78733970, "body": "What I was trying to get at is that you can just put the wait() at the very end of your parent code. Your program was going to exit anyway at that point, so there&#39;s no real harm in your program waiting for the child to finish so it can clean up the zombie. However, check out this link that I saw today that doesn&#39;t even worry about waiting: it uses perl commands to turn off output before the child runs the exec: <a href=\"http://www.perlmonks.org/?node_id=1082332\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1082332</a>"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503736565, "post_id": 45758663, "comment_id": 78746085, "body": "@Cubis: Thanks for the thread. Seems that the key is: <code>close(STDOUT);close(STDIN);close(STDERR); exec(&#39;.&#47;fork-long-process-test-process&#39;);</code> But I didn&#39;t understand what is the side-effect of this. Why does this solve the issue?"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1503927987, "post_id": 45758663, "comment_id": 78799624, "body": "If your whole point is to make sure no output from the second process goes to your console or other output from the first process, all you would need to do is make sure that the second process does not write anything to stdout, stdin, and stderr. The reason they were forking is to make sure you don&#39;t close those for the first process. If you put those commands inside the second process, you may not even need to fork at all."}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1504039448, "post_id": 45758663, "comment_id": 78854581, "body": "@Cubis: I thought that by closing everything, no inherited handlers of the parent process that exited would be in an undefined state making the second process behavior undefined too"}, {"owner": {"reputation": 277, "user_id": 871187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d3b6ab7c9cfcf2ab01e830e100969c?s=128&d=identicon&r=PG", "display_name": "Cubis", "link": "https://stackoverflow.com/users/871187/cubis"}, "edited": false, "score": 0, "creation_date": 1504043595, "post_id": 45758663, "comment_id": 78856393, "body": "I guess if you were trying to do something with the result of the exec within the parent process that would cause problems... I would personally make a simple test of the process using a dummy &quot;parent script&quot; and &quot;child script&quot; - have the child script close all outputs and then try to print something. Have the parent script print something before and after the fork, then run the parent script to see if it gets the behavior you want."}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "closed_date": 1503065667, "answer_count": 0, "score": 0, "last_activity_date": 1503065713, "creation_date": 1503065206, "question_id": 45758663, "link": "https://stackoverflow.com/questions/45758663/how-to-run-a-script-from-another-script-in-another-thread-of-execution", "closed_reason": "Duplicate", "title": "How to run a script from another script in another thread of execution", "body": "<p>How can I start a perl script from within a perl script but without being part of the same thread of execution. Like forking and letting the original script continue execution?<br>\nI think <code>system</code> does not do that as I see in the same console the output of the other script</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503077262, "post_id": 45758569, "comment_id": 78482018, "body": "The words are &quot;Perl&quot; and &quot;file handle&quot;, not &quot;PERL&quot; and &quot;FileHandler&quot;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503080104, "post_id": 45758569, "comment_id": 78483558, "body": "Better use <code>open my $fh, &#39;&lt;&#39;, $filename   ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7061050, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jY4m8.jpg?s=128&g=1", "display_name": "Laurent Zotto", "link": "https://stackoverflow.com/users/7061050/laurent-zotto"}, "edited": false, "score": 0, "creation_date": 1503068110, "post_id": 45758694, "comment_id": 78476948, "body": "How will the code read the next line(S) of &lt;FH&gt; inside the if section?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1503068306, "last_edit_date": 1503068306, "creation_date": 1503065305, "answer_id": 45758694, "question_id": 45758569, "link": "https://stackoverflow.com/questions/45758569/perl-read-subsection-inside-open-file-handle/45758694#45758694", "title": "Perl read subsection inside open file handle", "body": "<p>I can think of several ways to answer this question, but I'll go with the <a href=\"https://metacpan.org/pod/perlop#Range-Operators\" rel=\"nofollow noreferrer\">flip-flop operator</a> answer:</p>\n\n<pre><code>while (&lt;FH&gt;) {\n   if (/^StartSection$/ .. /^EndSection/) {\n       ... special code ...\n   } else {\n       ... regular code ...\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7061050, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jY4m8.jpg?s=128&g=1", "display_name": "Laurent Zotto", "link": "https://stackoverflow.com/users/7061050/laurent-zotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45758694, "answer_count": 1, "score": -1, "last_activity_date": 1516829397, "creation_date": 1503064919, "last_edit_date": 1516829397, "question_id": 45758569, "link": "https://stackoverflow.com/questions/45758569/perl-read-subsection-inside-open-file-handle", "title": "Perl read subsection inside open file handle", "body": "<p>I have open a file using:</p>\n\n<pre><code>open (FH, \"&lt;\".$File::Find::name) or die \"cannot open file \\\"\".$File::Find::name.\" \\\"!\";\nwhile (&lt;FH&gt;) {\n  ...my code...  \n}\n</code></pre>\n\n<p>I parse the lines using Regular expressions to get the data I want.\nNow I want to read a subsection of a file until I see the ending of that subsection inside my while-loop.\ni.e: reading from \"StartSection\" until \"EndSection\" line by line:</p>\n\n<pre><code>open (FH, \"&lt;\".$File::Find::name) or die \"cannot open file \n\\\"\".$File::Find::name.\" \\\"!\";\nwhile (&lt;FH&gt;) {\n  ...my code...\n  if (/^StartSection$/) {\n    while (&lt;FH&gt; !~ /^EndSection) {\n      ... more code....\n    }\n  }\n}\n</code></pre>\n\n<p>How must I program this correctly in Perl?</p>\n"}, {"tags": ["perl", "path"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503065215, "post_id": 45758471, "comment_id": 78474876, "body": "Attempt 1 would work if you escaped it fully <code>s&#47;@&#47;\\\\@&#47;g</code>"}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503065679, "post_id": 45758471, "comment_id": 78475211, "body": "Thanks Chris, with the change you mentioned i encounter the issue i mentioned with Attempt 3. Can&#39;t locate the module in@INC. eval statement is supposed to include the path in the @INC for the module"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503066399, "post_id": 45758471, "comment_id": 78475776, "body": "it&#39;d probably be worth printing out what you&#39;re trying to add and/or the contents of <code>@INC</code> just to make sure you&#39;re added the right path"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1503066864, "post_id": 45758471, "comment_id": 78476122, "body": "<code>use</code> is a compile-time statement. Your <code>use module</code> statement will be evaluated before your <code>eval(qq|use lib ...|)</code> statement, so your <code>use lib ...</code> isn&#39;t doing any good anyway."}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "edited": false, "score": 0, "creation_date": 1519319684, "post_id": 45758471, "comment_id": 84873555, "body": "removing eval seemed to work , but now i am back to square one. Can&#39;t locate module in @INC. strangely the paths i print...seems to take the workarea  as temp and not temp@23 which actually has the module"}, {"owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "edited": false, "score": 0, "creation_date": 1532938598, "post_id": 45758471, "comment_id": 90144586, "body": "Can anyone tell me why the question is marked as -1, as it is not clear to me. I would like to understand and correct myself. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503085111, "post_id": 45758943, "comment_id": 78486062, "body": "@ikegami: The warning happens, because the argument is evaluated even if the <code>if</code> condition is false."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503085240, "post_id": 45758943, "comment_id": 78486132, "body": "@ikegami: no problem :-)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1503085059, "last_edit_date": 1503085059, "creation_date": 1503066046, "answer_id": 45758943, "question_id": 45758471, "link": "https://stackoverflow.com/questions/45758471/how-to-resolve-issues-with-accessing-paths-containing-in-directory-name/45758943#45758943", "title": "How to resolve issues with accessing paths containing @ in directory name", "body": "<p>Why do you need the string eval?</p>\n\n<pre><code>BEGIN {\n    if (defined $ENV{WA}) {\n        $ENV{AC} = \"$ENV{WA}/right\";\n    }\n}\n\nuse lib \"$ENV{AC}/lib\";\n</code></pre>\n\n<p>Or, if you only want to set the @INC if AC is defined:</p>\n\n<pre><code>use if defined $ENV{AC},\n    lib =&gt; do { no warnings 'uninitialized'; \"$ENV{AC}/lib\" };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1503077793, "creation_date": 1503077793, "answer_id": 45762123, "question_id": 45758471, "link": "https://stackoverflow.com/questions/45758471/how-to-resolve-issues-with-accessing-paths-containing-in-directory-name/45762123#45762123", "title": "How to resolve issues with accessing paths containing @ in directory name", "body": "<pre><code>use lib\n     defined($ENV{WA}) ? \"$ENV{WA}/right/lib\"\n   : defined($ENV{AC}) ? \"$ENV{AC}/lib\"\n   : ();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use lib\n   defined($ENV{WA}) ? \"$ENV{WA}/right/lib\" : (),\n   defined($ENV{AC}) ? \"$ENV{AC}/lib\"       : ();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 1943866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b01ff2ce4c29049d50523ee176587?s=128&d=identicon&r=PG", "display_name": "Kris", "link": "https://stackoverflow.com/users/1943866/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1503085059, "creation_date": 1503064621, "last_edit_date": 1503065532, "question_id": 45758471, "link": "https://stackoverflow.com/questions/45758471/how-to-resolve-issues-with-accessing-paths-containing-in-directory-name", "title": "How to resolve issues with accessing paths containing @ in directory name", "body": "<pre><code>WA=/perl/temp@23 (ENV PARAM)\n\n    if (defined $ENV{'WA'}) {\n        $ENV{'AC'} = \"$ENV{'WA'}/right\";\n    }\n    eval(qq|use lib \"$ENV{'AC'}/lib\"|);\n</code></pre>\n\n<p>Error-- Possible unintended interpolation of @23 in string at (eval 1) line 1.</p>\n\n<p>I tried the below solutions and none of them were of great help.</p>\n\n<p>Attempt 1: Didn't work</p>\n\n<pre><code>$ENV{'WA'} =~ s/(^.*)@(.*)/$1\\@$2/;\nif (defined $ENV{'WA'}) {\n    $ENV{'AC'} = \"$ENV{'WA'}/right\";\n}\neval(qq|use lib \"$ENV{'AC'}/lib\"|);\n</code></pre>\n\n<p>I saw one more issue with this.\nWhen it worked once..no clue why and how it worked,but  the lib was not added to @INC path.</p>\n\n<p>Attempt 2: Didn't work - i saw in a post that \\x40 represents @</p>\n\n<pre><code>$ENV{'WA'} =~ s/(^.*)@(.*)/$1\\x40$2/;\nif (defined $ENV{'WA'}) {\n    $ENV{'AC'} = \"$ENV{'WA'}/right\";\n}\neval(qq|use lib \"$ENV{'AC'}/lib\"|);\n</code></pre>\n\n<p>Attempt 3: one error to the next</p>\n\n<pre><code>$ENV{'WA'} =~ s/(^.*)(@)(.*)/$1\\@$3/;\nif (defined $ENV{'WA'}) {\n    $ENV{'AC'} = \"$ENV{'WA'}/right\";\n}\nmy $str = $ENV{'AC'};\neval(qq|use lib \"$str/lib\"|);\nuse module\n</code></pre>\n\n<p>Error: Can't locate module in @INC\nAtleast now i don't get unintended interpolation @</p>\n\n<p>Can someone give me some pointers on how to resolve this issue.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503061478, "post_id": 45757338, "comment_id": 78472090, "body": "Why not write just <code>time</code> into the file?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1503061502, "post_id": 45757338, "comment_id": 78472105, "body": "Just use <code>time</code>, not <code>localtime</code>, subtract the two numbers and divide by 60 to get minutes."}], "answers": [{"comments": [{"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 0, "creation_date": 1503063293, "post_id": 45757630, "comment_id": 78473461, "body": "<code>time</code> gives an epoch right? So I could use the command line to figure out what it is right?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "edited": false, "score": 0, "creation_date": 1503063446, "post_id": 45757630, "comment_id": 78473570, "body": "Sure. <code>date -d @1503061737</code> gives <code>Fri 18 Aug 14:08:57 BST 2017</code>"}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1503063689, "post_id": 45757630, "comment_id": 78473777, "body": "RELATED: <a href=\"https://stackoverflow.com/questions/45757088/how-to-check-if-immediate-previous-run-failed-or-not\" title=\"how to check if immediate previous run failed or not\">stackoverflow.com/questions/45757088/&hellip;</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1503062152, "creation_date": 1503062152, "answer_id": 45757630, "question_id": 45757338, "link": "https://stackoverflow.com/questions/45757338/determine-time-elapsed-since-last-timestamp/45757630#45757630", "title": "Determine time elapsed since last timestamp", "body": "<p>The easiest approach is to write the output from <code>time()</code> rather than <code>localtime()</code> (incidentally, <code>localtime(time)</code> is pointless - if you omit the parameter to <code>localtime()</code>, it will use <code>time()</code> as a default). That will give you the number of seconds since the start of 1970 (which is a very big number - currently 1503061737). You can then read that number back and compare it with the current value of <code>time()</code>.</p>\n\n<p>The (slight) downside to this approach is that the numbers you get back from <code>time()</code> aren't easily understandable by humans. If you will want to read and understand the values in <code>.time_from_run</code> then you could compromise and write the timestamp in an easily understood format (ISO-8601 is the obvious choice.</p>\n\n<pre><code>use Time::Piece;\n\nopen my $fh, '&gt;', '~/.time_from_run' or die $!;\n\nprint $fh localtime-&gt;datatime;\n</code></pre>\n\n<p>You can then read and compare your time like this:</p>\n\n<pre><code>use Time::Piece;\nuse Time::Seconds;\n\nopen my $fh, '&lt;', '~/.time_from_run' or die !$;\n\nchomp(my $then_str) = &lt;$fh&gt;;\n\nmy $then = Time::Piece-&gt;strptime('%Y%m%dT%H:%M:%S', $then_str);\n\nif (localtime - $then &lt; ONE_MINUTE) {\n  print \"Elapsed time is less than a minute\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503062152, "creation_date": 1503061287, "question_id": 45757338, "link": "https://stackoverflow.com/questions/45757338/determine-time-elapsed-since-last-timestamp", "title": "Determine time elapsed since last timestamp", "body": "<p>I would like to write to a file a timestamp and then be able to determine if the current time is &lt; 1 min from that timestamp.<br>\nUsing:  </p>\n\n<pre><code>open my $fh, '&gt;', '~/.time_from_run';  \nmy $timestamp = localtime(time);    \nprint $fh $timestamp;  \nclose $fh;  \n</code></pre>\n\n<p>prints out a string. What is the best way for this?</p>\n"}, {"tags": ["linux", "bash", "macos", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503060889, "post_id": 45757088, "comment_id": 78471636, "body": "You can catch all exceptions and write result somewhere."}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503060962, "post_id": 45757088, "comment_id": 78471685, "body": "@\u0421\u0443\u0445\u043e\u043927: I would like to somehow indicate that the run was success if the next run is under 1 min"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503061040, "post_id": 45757088, "comment_id": 78471746, "body": "I don&#39;t believe there is a standard approach to such scenario."}, {"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 0, "creation_date": 1503062113, "post_id": 45757088, "comment_id": 78472587, "body": "I&#39;d try using the <code>timeout</code> command then checking <code>$?</code>, or just run it in an <code>if</code> to test success if you don&#39;t care about the actual exit code."}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1503063554, "post_id": 45757088, "comment_id": 78473669, "body": "Define &quot;successful&quot;. If the run meets the criteria, create a file as the script&#39;s final action, else don&#39;t. When the script next runs, check if the file exists and was created (modified) within the time desired. Remove the file at the beginning of the run if it&#39;s present."}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1503063657, "post_id": 45757088, "comment_id": 78473749, "body": "RELATED: <a href=\"https://stackoverflow.com/questions/45757338/determine-time-elapsed-since-last-timestamp\" title=\"determine time elapsed since last timestamp\">stackoverflow.com/questions/45757338/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503083211, "post_id": 45757088, "comment_id": 78485080, "body": "Do you need this from another script, which runs the script that does checks (which is what my answer is about) -- or from the command-line?"}], "answers": [{"tags": [], "owner": {"reputation": 72, "user_id": 8343342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4b27b172a05d792de0b95332fe503eb?s=128&d=identicon&r=PG&f=1", "display_name": "Eos", "link": "https://stackoverflow.com/users/8343342/eos"}, "is_accepted": false, "score": 1, "last_activity_date": 1503064047, "creation_date": 1503064047, "answer_id": 45758265, "question_id": 45757088, "link": "https://stackoverflow.com/questions/45757088/how-to-check-if-immediate-previous-run-failed-or-not/45758265#45758265", "title": "How to check if immediate previous run failed or not?", "body": "<p>You could see if you script has ended after a minute by trying something like this :</p>\n\n<pre><code>sleep 60\nps -ae | grep yourScript.name\n</code></pre>\n\n<p>This has to be executed at the same time as your script(s). If it returns nothing, that means your script isn't running anymore, aka has ended.</p>\n\n<p>For the final result, you could make your perl script write into a specific log file, and check the end of this log file if the <code>ps -ae | grep yourScript.name</code> returned nothing.</p>\n\n<p>Hope it helped !</p>\n"}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503464161, "creation_date": 1503060513, "question_id": 45757088, "link": "https://stackoverflow.com/questions/45757088/how-to-check-if-immediate-previous-run-failed-or-not", "title": "How to check if immediate previous run failed or not?", "body": "<p>I have a perl script that runs and does some checks.<br>\nIn some cases that script fails and stops processing and in others completes.<br>\nWhat I would like to do is to be able to check if the script run within 1 minute and if the run was successful somehow then exit.<br>\nI thought about saving some file or checking $?, as an indication but I thought there may be exist some standard clean approach for this.<br>\nWould like a solution that would work for both linux and mac</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1503059095, "post_id": 45756546, "comment_id": 78470366, "body": "The <code>&#47;r</code> modifier requires at least Perl 5.14."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1503059720, "post_id": 45756546, "comment_id": 78470833, "body": "Or <code>die &lt;&lt;&#39;END_MSG&#39; =~ s&#47;\\n&#47;&#47;gr; ...</code> if you don&#39;t want to hide the <code>s&#47;&#47;&#47;</code> down at the bottom."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 5, "last_activity_date": 1503060533, "last_edit_date": 1503060533, "creation_date": 1503058923, "answer_id": 45756546, "question_id": 45756441, "link": "https://stackoverflow.com/questions/45756441/eliminate-intermediate-variable-when-combining-here-document-substitution-and-d/45756546#45756546", "title": "Eliminate intermediate variable when combining here document, substitution and die", "body": "<p>With perl 5.14 or newer you can,</p>\n\n<pre><code>die &lt;&lt;'END_MSG'\nMy super error message\nWhich happens to span over multiple lines\nBut that I want to print without newlines.\nEND_MSG\n=~ s/\\n//gr;\n</code></pre>\n\n<p>EDIT:\nor</p>\n\n<pre><code>die &lt;&lt;'END_MSG' =~ s/\\n//gr\n..\nEND_MSG\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1503059868, "creation_date": 1503059868, "answer_id": 45756857, "question_id": 45756441, "link": "https://stackoverflow.com/questions/45756441/eliminate-intermediate-variable-when-combining-here-document-substitution-and-d/45756857#45756857", "title": "Eliminate intermediate variable when combining here document, substitution and die", "body": "<p><code>die</code> takes multiple arguments, so you could just do this:</p>\n\n<pre><code>die split /\\n/, &lt;&lt;'END_MSG';\n...\nEND_MSG\n</code></pre>\n"}], "owner": {"reputation": 1403, "user_id": 3923424, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7290a8da460efc02e096d4de444bc13?s=128&d=identicon&r=PG&f=1", "display_name": "R2B2", "link": "https://stackoverflow.com/users/3923424/r2b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 45756546, "answer_count": 2, "score": 0, "last_activity_date": 1503060533, "creation_date": 1503058573, "question_id": 45756441, "link": "https://stackoverflow.com/questions/45756441/eliminate-intermediate-variable-when-combining-here-document-substitution-and-d", "title": "Eliminate intermediate variable when combining here document, substitution and die", "body": "<p>Is it possible to eliminate the use of the intermediate variable <code>$msg</code> in this example?</p>\n\n<pre><code>($msg = &lt;&lt;'END_MSG') =~ s/\\n//gm;\nMy super error message\nWhich happens to span over multiple lines\nBut that I want to print without newlines.\nEND_MSG\ndie $msg;\n</code></pre>\n\n<p>If I did not need to remove the newlines, I could do directly <code>die &lt;&lt;'END_MSG'; ...</code> but I have not found a way to combine these two approaches.</p>\n"}, {"tags": ["string", "perl", "compare"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1503052535, "post_id": 45754523, "comment_id": 78466172, "body": "Where is <code>$i</code> coming from?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1503052581, "post_id": 45754523, "comment_id": 78466215, "body": "Also: Where&#39;s <code>@filelines</code> coming from. And what are you <code>chomp</code>ing for?"}, {"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503052949, "post_id": 45754523, "comment_id": 78466448, "body": "$i is a temp var i initialized to 0 for count. @filelines is coming from reading the file."}, {"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503052973, "post_id": 45754523, "comment_id": 78466466, "body": "i thought it may have \\n or new line at the end so i chomped it."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503207675, "post_id": 45754523, "comment_id": 78515235, "body": "@Riss: You need to <code>chomp()</code> i <b>before</b> doing the comparison. <code>chomp($filelines[$i])</code> gives an integer, <b>not</b> the chomped string."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503053338, "post_id": 45754598, "comment_id": 78466691, "body": "my $i = 0;     chomp @filelines;     while (@filelines)     {         #splice the line to a array          if ($filelines[$i] eq $FN_Accessories_Header)         {             print &quot;The file name is FN_Accessories.csv and first line is header\\n&quot;;         }         else         {             print &quot;The scanning process will be terminated as the first line is not header\\n&quot;;             exit;         }     }"}, {"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503053355, "post_id": 45754598, "comment_id": 78466702, "body": "Its still going on the else path."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503055845, "post_id": 45754598, "comment_id": 78468271, "body": "Where do you change <code>$i</code>? <code>while (@filelines)</code> runs the loop until the array is empty, where do you remove elements from the array?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503058168, "post_id": 45754598, "comment_id": 78469750, "body": "@resalathahamed: Please don&#39;t dump code in comments like that. Much better to edit your question to add the new version of the code."}, {"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1503188502, "post_id": 45754598, "comment_id": 78512415, "body": "@DaveCross: Sure, I will remember that. Thanks :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1503052540, "creation_date": 1503052540, "answer_id": 45754598, "question_id": 45754523, "link": "https://stackoverflow.com/questions/45754523/perl-string-compare-fails/45754598#45754598", "title": "Perl String Compare fails", "body": "<p><a href=\"http://p3rl.org/chomp\" rel=\"noreferrer\">chomp</a> doesn't return the shortened string, it returns the number of characters removed.</p>\n\n<pre><code>chomp @filelines;\nfor my $line (@filelines) {\n    if ($line eq $FN_Accessories_Header) {\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1503058564, "post_id": 45756284, "comment_id": 78469992, "body": "chomp returns the number of characters removed from all its parameters, but you can interpret it as a boolean in Perl :-)"}, {"owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503188721, "post_id": 45756284, "comment_id": 78512438, "body": "Hi, I understood my mistakes in the code, however, the focus of the issue was still to check what exactly went wrong with the &quot;eq&quot;. Eventually I figured that even after executing chomp(), i was unable to succeed in the compare, So, as a temp work around, i have used length to determine if its the header of the csv or not (as its not bound to change). This succeeds with a workaround."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "edited": false, "score": 0, "creation_date": 1503207558, "post_id": 45756284, "comment_id": 78515211, "body": "@Riss: Nothing went wrong with the <code>eq</code>. The <code>eq</code> did exactly what it was supposed to do. You compare the return value from <code>chomp()</code> (which is an integer - probably 1) with your string (which is not an integer). That is always going to fail."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1503058750, "last_edit_date": 1503058750, "creation_date": 1503058034, "answer_id": 45756284, "question_id": 45754523, "link": "https://stackoverflow.com/questions/45754523/perl-string-compare-fails/45756284#45756284", "title": "Perl String Compare fails", "body": "<ul>\n<li><code>while (@filelines)</code> will always be true unless you remove elements from <code>@filelines</code> in the loop (which you don't).</li>\n<li>You don't  do anything to change <code>$i</code> in the loop, so <code>$filelines[$i]</code> will always be the same string. That's probably not what you want.</li>\n<li><code>chomp()</code> returns a boolean value (whether or not a newline was removed from the string). So comparing its return value to another string is unlikely to be useful. <strong>Update:</strong> choroba points out (correctly) in a comment that <code>chomp()</code> returns a more useful value that can be interpreted as a boolean in many cases. See the <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">documentation for <code>chomp()</code></a> for more details.</li>\n</ul>\n\n<p>Some combination of these three errors is causing your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 1, "last_activity_date": 1503058357, "creation_date": 1503058357, "answer_id": 45756381, "question_id": 45754523, "link": "https://stackoverflow.com/questions/45754523/perl-string-compare-fails/45756381#45756381", "title": "Perl String Compare fails", "body": "<p>try perl debug, the commands below should get you there. then you can compare both strings live to see what's up</p>\n\n<pre><code>perl -d ./yourscript\nb &lt;LINENUMBER&gt;\nL\nc\nprint \"--\".$filelines[$i].\"--\"\nprint \"--\".$FN_Accessories_Header.\"--\"\n</code></pre>\n\n<p>Key for above b \"breakpoint\" , L \"list breakpoints\" , c \"continue to breakpoint\", print \"print\"</p>\n"}], "owner": {"reputation": 33, "user_id": 4226756, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_rjFdzXVDnA/AAAAAAAAAAI/AAAAAAAAAAA/hoxCvjSqP7Y/photo.jpg?sz=128", "display_name": "Riss", "link": "https://stackoverflow.com/users/4226756/riss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1503058750, "creation_date": 1503052342, "last_edit_date": 1503052508, "question_id": 45754523, "link": "https://stackoverflow.com/questions/45754523/perl-string-compare-fails", "title": "Perl String Compare fails", "body": "<p>Below is the sample of the code:</p>\n\n<pre><code>while (@filelines){\n  #splice the line to a array \n  print \"the string to be compared is $filelines[$i] with $FN_Accessories_Header\\n\";\n\n  if (chomp($filelines[$i]) eq $FN_Accessories_Header){\n    print \"The file name is FN_Accessories.csv and first line is header\\n\";\n  }\n  else {\n    print \"The scanning process will be terminated as the first line is not header\\n\";\n    exit;\n  }\n}\n</code></pre>\n\n<p>The contents of the two variables is the same, but the print in if statement does not execute.</p>\n\n<p><code>asd_bsd;asdf_asdf;weroi_asdf;asdf_asdf;asdf_wer;rty_tyu;sdf_erty;qwe_123;asdffff_asdfrs;</code></p>\n"}, {"tags": ["perl", "sequence"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1503044824, "post_id": 45751618, "comment_id": 78461008, "body": "Crossposted to <a href=\"http://www.perlmonks.org/?node_id=1197537\" rel=\"nofollow noreferrer\">PerlMonks</a>. Does my solution there have any problems?"}, {"owner": {"reputation": 21, "user_id": 8427585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ed6dfb5041dc22c58fa8171e0b559?s=128&d=identicon&r=PG&f=1", "display_name": "Daria", "link": "https://stackoverflow.com/users/8427585/daria"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1503045569, "post_id": 45751618, "comment_id": 78461419, "body": "I don&#39;t know, how relate your code with my.... If I should use this one <a href=\"http://www.perlmonks.org/?displaytype=displaycode;node_id=1197540;abspart=1;part=2\" rel=\"nofollow noreferrer\">perlmonks.org/&hellip;</a>  or this one: <a href=\"http://www.perlmonks.org/?displaytype=displaycode;node_id=1197540;abspart=1;part=1\" rel=\"nofollow noreferrer\">perlmonks.org/&hellip;</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1503048192, "post_id": 45751618, "comment_id": 78463143, "body": "I used both, but I hope the load_fasta part just duplicates the work you already do via BioPerl."}], "owner": {"reputation": 21, "user_id": 8427585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3ed6dfb5041dc22c58fa8171e0b559?s=128&d=identicon&r=PG&f=1", "display_name": "Daria", "link": "https://stackoverflow.com/users/8427585/daria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1503048609, "creation_date": 1503043599, "last_edit_date": 1503048609, "question_id": 45751618, "link": "https://stackoverflow.com/questions/45751618/add-a-new-column-that-corresponds-to-the-codons-that-are-in-the-protein-domain-p", "title": "Add a new column that corresponds to the codons that are in the protein domain positions", "body": "<p>I have two files with thousands of proteins: (1) file: protein ID + sequence of amino acids; (2) file: protein ID + sequence of nucleotides. And my third file is a file with position of domains in (these proteins) which are related with my amino acid's sequence and nucleotide's sequence files. I related these three files with this code:</p>\n\n<p>acids.txt file contains:</p>\n\n<blockquote>\n  <p>ENST00000274849|Q9ULW3\n  MEAEESEKAATEQEPLEGTEQTLDAEEEQEESEEAACGSKKRVVPGIVYLGHIPPRFRPL HVRNLLSAYGEVGRVFFQAEDRFVRRKKKAAAAAGGKKRSYTKDYTEGWVEFRDKRIAKR VAASLHNTPMGARRRSPFRYDLWNLKYLHRFTWSHLSEHLAFERQVRRQRLRAEVAQAKR ETDFYLQSVERGQRFLAADGDPARPDGSWTFAQRPTEQELRARKAARPGGRERARLATAQ DKARSNKGLLARIFGAPPPSESMEGPSLVRDS*</p>\n</blockquote>\n\n<p>nucleotides.txt file contains:</p>\n\n<blockquote>\n  <p>ENST00000274849|Q9ULW3\n  ATGGAGGCAGAGGAATCGGAGAAGGCCGCAACGGAGCAAGAGCCGCTGGAAGGGACAGAA CAGACACTAGATGCGGAGGAGGAGCAGGAGGAATCCGAAGAAGCGGCCTGTGGCAGCAAG AAACGGGTAGTGCCAGGTATTGTGTACCTGGGCCATATCCCGCCGCGCTTCCGGCCCCTG CACGTCCGCAACCTTCTCAGCGCCTATGGCGAGGTCGGACGCGTCTTCTTTCAGGCTGAG GACCGGTTCGTGAGACGCAAGAAGAAGGCAGCAGCAGCTGCCGGAGGAAAAAAGCGGTCC TACACCAAGGACTACACCGAGGGATGGGTGGAGTTCCGTGACAAGCGCATAGCCAAGCGC GTGGCGGCCAGTCTACACAACACGCCTATGGGTGCCCGCAGGCGCAGCCCCTTCCGTTAT GATCTTTGGAACCTCAAGTACTTGCACCGTTTCACCTGGTCCCACCTCAGCGAGCACCTC GCCTTTGAGCGCCAGGTGCGCAGGCAGCGCTTGAGAGCGGAGGTTGCTCAAGCCAAGCGT GAGACCGACTTCTATCTTCAAAGTGTGGAACGGGGACAACGCTTTCTTGCGGCCGATGGG GACCCTGCTCGCCCAGATGGCTCCTGGACATTTGCCCAGCGTCCTACTGAGCAGGAACTG AGGGCCCGTAAAGCAGCACGGCCAGGGGGACGTGAACGGGCTCGCCTGGCAACTGCCCAG GACAAGGCCCGCTCCAACAAAGGGCTCCTGGCCAGGATCTTTGGAGCCCCGCCACCCTCA GAGAGCATGGAGGGACCTTCCCTTGTCAGGGACTCCTGA</p>\n</blockquote>\n\n<p>domain.txt file contains:</p>\n\n<pre><code> Q9ULW3;    46 142\n</code></pre>\n\n<p>NOTE: this numbers mean the position domain in my sequence</p>\n\n<p>script:</p>\n\n<pre><code>use strict;\nuse Bio::SeqIO;\n####################################################\n#MODULE 1: read protein file, and save it in a hash#\n####################################################\nmy %hash1;\nmy $sequence = \"acid.txt\";\nmy $multifasta = Bio::SeqIO -&gt;new (-file =&gt; \"&lt;$sequence\",-format=&gt; \"fasta\");\nwhile (my $seq= $multifasta-&gt;next_seq()) {\nmy $na= $seq-&gt;display_id;   #Saves the ID in $na\nmy $ss = $seq-&gt;seq; \n$hash1{$na} = $ss;  \n}\n#############################################################\n#MODULE 2: read nucleotide file, and save it in another hash#\n#############################################################\nmy %hash2;\nmy $genes = \"nucleotides.txt\";\nmy $multifasta = Bio::SeqIO -&gt;new (-file =&gt; \"&lt;$genes\",-format=&gt; \"fasta\");\nwhile (my $seq= $multifasta-&gt;next_seq()) {\nmy $na= $seq-&gt;display_id;   #Saves the ID in $na\nmy $des=$seq-&gt;description;\nmy $ss = $seq-&gt;seq; \n$hash2{$na} = $ss;  \n}\n#####################\n#MODULE 3: my $name;#\n#####################\nmy $name;               # Read from standard input\nchomp $name;\n##############################################################################\n#MODULE 4: DOMAIN ANNOTATION + RELATED AMINO ACIDS AND NUCLEOTIDES IN COLUMNS#\n##############################################################################\nforeach my $name (keys %hash1) {\nmy $ac = (split(/\\s*\\|/, $name))[1];\n#print \"$ac\\n\" ; \n####################################################\n#MODULE 4.1: DOMAIN ANNOTATION: POSITION OF DOMAINS#\n####################################################\nopen(FILE, \"&lt;\" ,\"domain.txt\");\nmy @array = (&lt;FILE&gt;);\nmy @lines = grep (/$ac/, @array);\nprint for @lines;\nclose (FILE);\n############################################################\n#MODULE 4.2: RELATED AMINO ACIDS AND NUCLEOTIDES IN COLUMNS#\n############################################################\nmy @array1 = split(//, $hash1{$name}, $hash2{$name});  #CUT SEQUENCE\nmy @array2 = unpack(\"a3\" x (length($hash1{$name})),$hash2{$name}); #CUT \nNUCLEOTIDE SEQUENCE\nmy $number = \"$#array1+1\";\nforeach (my $count = 0; $count &lt;= $number; $count++) {\n        print \"$count\\t@array1[$count]\\t@array2[$count]\\n\";\n   }    \n\n}\n</code></pre>\n\n<p>And here is my FILE which I got after running the script:</p>\n\n<pre><code> Q9ULW3; 46    142   \n  0 M   ATG\n  1 E   GAG\n  2 A   GCA\n  3 E   GAG\n  4 E   GAA\n  5 S   TCG\n  6 E   GAG\n  7 K   AAG\n  8 A   GCC\n  9 A   GCA\n 10 T   ACG\n 11 E   GAG\n 12 Q   CAA\n 13 E   GAG\n 14 P   CCG\n 15 L   CTG\n 16 E   GAA\n 17 G   GGG\n 18 T   ACA\n 19 E   GAA\n 20 Q   CAG\n 21 T   ACA\n 22 L   CTA\n 23 D   GAT\n 24 A   GCG\n 25 E   GAG\n 26 E   GAG\n 27 E   GAG\n 28 Q   CAG\n 29 E   GAG\n 30 E   GAA\n 31 S   TCC\n 32 E   GAA\n 33 E   GAA\n 34 A   GCG\n 35 A   GCC\n 36 C   TGT\n 37 G   GGC\n 38 S   AGC\n 39 K   AAG\n 40 K   AAA\n 41 R   CGG\n 42 V   GTA\n 43 V   GTG\n 44 P   CCA\n 45 G   GGT\n 46 I   ATT\n 47 V   GTG\n 48 Y   TAC\n 49 L   CTG\n 50 G   GGC\n 51 H   CAT\n 52 I   ATC\n 53 P   CCG\n 54 P   CCG\n 55 R   CGC\n 56 F   TTC\n 57 R   CGG\n 58 P   CCC\n 59 L   CTG\n 60 H   CAC\n 61 V   GTC\n 62 R   CGC\n 63 N   AAC\n 64 L   CTT\n 65 L   CTC\n 66 S   AGC\n 67 A   GCC\n 68 Y   TAT\n 69 G   GGC\n 70 E   GAG\n 71 V   GTC\n 72 G   GGA\n 73 R   CGC\n 74 V   GTC\n 75 F   TTC\n 76 F   TTT\n 77 Q   CAG\n 78 A   GCT\n 79 E   GAG\n 80 D   GAC\n 81 R   CGG\n 82 F   TTC\n 83 V   GTG\n 84 R   AGA\n 85 R   CGC\n 86 K   AAG\n 87 K   AAG\n 88 K   AAG\n 89 A   GCA\n 90 A   GCA\n 91 A   GCA\n 92 A   GCT\n 93 A   GCC\n 94 G   GGA\n 95 G   GGA\n 96 K   AAA\n 97 K   AAG \n 98 R   CGG\n 99 S   TCC\n100 Y   TAC\n101 T   ACC\n102 K   AAG \n103 D   GAC\n104 Y   TAC\n105 T   ACC\n106 E   GAG\n107 G   GGA\n108 W   TGG\n109 V   GTG\n110 E   GAG\n111 F   TTC\n112 R   CGT\n113 D   GAC\n114 K   AAG\n115 R   CGC\n116 I   ATA\n117 A   GCC\n118 K   AAG\n119 R   CGC\n120 V   GTG\n121 A   GCG\n122 A   GCC\n123 S   AGT\n124 L   CTA\n125 H   CAC\n126 N   AAC\n127 T   ACG\n128 P   CCT\n129 M   ATG\n130 G   GGT\n131 A   GCC\n132 R   CGC\n133 R   AGG\n134 R   CGC\n135 S   AGC\n136 P   CCC\n137 F   TTC\n138 R   CGT\n139 Y   TAT\n140 D   GAT\n141 L   CTT\n142 W   TGG\n143 N   AAC\n144 L   CTC\n145 K   AAG\n146 Y   TAC\n147 L   TTG\n148 H   CAC\n149 R   CGT\n150 F   TTC\n151 T   ACC\n152 W   TGG\n153 S   TCC\n154 H   CAC\n155 *   TGA\n</code></pre>\n\n<p>Now I should add a new fourth column which will contain 'YES' or 'NOT' - it depends on which codons are in domain - YES, which are not in domain - NOT. So, here is domains in the positions from 46 till 142. I would like to get this OUTPUT FILE:</p>\n\n<pre><code> Q9ULW3;    46    142         \n  0    M    ATG    NOT\n  1    E    GAG    NOT\n  2    A    GCA    NOT\n  3    E    GAG    NOT\n  4    E    GAA    NOT\n  5    S    TCG    NOT\n  6    E    GAG    NOT\n  7    K    AAG    NOT\n  8    A    GCC    NOT\n  9    A    GCA    NOT\n 10    T    ACG    NOT\n 11    E    GAG    NOT\n 12    Q    CAA    NOT\n 13    E    GAG    NOT\n 14    P    CCG    NOT\n 15    L    CTG    NOT\n 16    E    GAA    NOT\n 17    G    GGG    NOT\n 18    T    ACA    NOT\n 19    E    GAA    NOT\n 20    Q    CAG    NOT\n 21    T    ACA    NOT\n 22    L    CTA    NOT\n 23    D    GAT    NOT\n 24    A    GCG    NOT\n 25    E    GAG    NOT\n 26    E    GAG    NOT\n 27    E    GAG    NOT\n 28    Q    CAG    NOT\n 29    E    GAG    NOT\n 30    E    GAA    NOT\n 31    S    TCC    NOT\n 32    E    GAA    NOT\n 33    E    GAA    NOT\n 34    A    GCG    NOT\n 35    A    GCC    NOT\n 36    C    TGT    NOT\n 37    G    GGC    NOT\n 38    S    AGC    NOT\n 39    K    AAG    NOT\n 40    K    AAA    NOT\n 41    R    CGG    NOT\n 42    V    GTA    NOT\n 43    V    GTG    NOT\n 44    P    CCA    NOT\n 45    G    GGT    NOT\n 46    I    ATT    YES\n 47    V    GTG    YES\n 48    Y    TAC    YES\n 49    L    CTG    YES\n 50    G    GGC    YES\n 51    H    CAT    YES\n 52    I    ATC    YES\n 53    P    CCG    YES\n 54    P    CCG    YES\n 55    R    CGC    YES\n 56    F    TTC    YES\n 57    R    CGG    YES\n 58    P    CCC    YES\n 59    L    CTG    YES\n 60    H    CAC    YES\n 61    V    GTC    YES\n 62    R    CGC    YES\n 63    N    AAC    YES\n 64    L    CTT    YES\n 65    L    CTC    YES\n 66    S    AGC    YES\n 67    A    GCC    YES\n 68    Y    TAT    YES\n 69    G    GGC    YES\n 70    E    GAG    YES\n 71    V    GTC    YES\n 72    G    GGA    YES\n 73    R    CGC    YES\n 74    V    GTC    YES\n 75    F    TTC    YES\n 76    F    TTT    YES\n 77    Q    CAG    YES\n 78    A    GCT    YES\n 79    E    GAG    YES\n 80    D    GAC    YES\n 81    R    CGG    YES\n 82    F    TTC    YES\n 83    V    GTG    YES\n 84    R    AGA    YES\n 85    R    CGC    YES\n 86    K    AAG    YES\n 87    K    AAG    YES\n 88    K    AAG    YES\n 89    A    GCA    YES\n 90    A    GCA    YES\n 91    A    GCA    YES\n 92    A    GCT    YES\n 93    A    GCC    YES\n 94    G    GGA    YES\n 95    G    GGA    YES\n 96    K    AAA    YES\n 97    K    AAG    YES\n 98    R    CGG    YES\n 99    S    TCC    YES\n100    Y    TAC    YES\n101    T    ACC    YES\n102    K    AAG    YES\n103    D    GAC    YES\n104    Y    TAC    YES\n105    T    ACC    YES\n106    E    GAG    YES\n107    G    GGA    YES\n108    W    TGG    YES\n109    V    GTG    YES\n110    E    GAG    YES\n111    F    TTC    YES\n112    R    CGT    YES\n113    D    GAC    YES\n114    K    AAG    YES\n115    R    CGC    YES\n116    I    ATA    YES\n117    A    GCC    YES\n118    K    AAG    YES\n119    R    CGC    YES\n120    V    GTG    YES\n121    A    GCG    YES\n122    A    GCC    YES\n123    S    AGT    YES\n124    L    CTA    YES\n125    H    CAC    YES\n126    N    AAC    YES\n127    T    ACG    YES\n128    P    CCT    YES\n129    M    ATG    YES\n130    G    GGT    YES\n131    A    GCC    YES\n132    R    CGC    YES\n133    R    AGG    YES\n134    R    CGC    YES\n135    S    AGC    YES\n136    P    CCC    YES\n137    F    TTC    YES\n138    R    CGT    YES  \n139    Y    TAT    YES\n140    D    GAT    YES\n141    L    CTT    YES\n142    W    TGG    YES\n143    N    AAC    NOT\n144    L    CTC    NOT\n145    K    AAG    NOT\n146    Y    TAC    NOT\n147    L    TTG    NOT\n148    H    CAC    NOT\n149    R    CGT    NOT\n150    F    TTC    NOT\n151    T    ACC    NOT\n152    W    TGG    NOT\n153    S    TCC    NOT\n154    H    CAC    NOT \n155    *    TGA    NOT\n</code></pre>\n\n<p>This is example for one protein, I have to do it for thousands proteins. Please, do you have any suggestions?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "hex"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1503042843, "post_id": 45751173, "comment_id": 78459880, "body": "Your code won&#39;t compile and even if corrected shows a different output from what you have shown. Please create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503042946, "post_id": 45751173, "comment_id": 78459935, "body": "How do you want it printed?  See <code>printf</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1503043324, "post_id": 45751173, "comment_id": 78460127, "body": "Better: <code>for my $i (0..499) { ... }</code>"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503069450, "post_id": 45751173, "comment_id": 78477847, "body": "Can i know why devote the question?"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1503055396, "post_id": 45751353, "comment_id": 78467992, "body": "How about <code>printf</code> instead of <code>print sprintf</code>?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503056016, "post_id": 45751353, "comment_id": 78468381, "body": "Of course; it might be just that OP want to store result somewhere."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 4, "last_activity_date": 1503056058, "last_edit_date": 1503056058, "creation_date": 1503042745, "answer_id": 45751353, "question_id": 45751173, "link": "https://stackoverflow.com/questions/45751173/multiply-hex-number-result-in-wrong-sequence/45751353#45751353", "title": "Multiply hex number result in wrong sequence", "body": "<p>You should convert to hexadecimal representation when printing values,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $address= 0x10000;\nfor (my $i =0 ; $i&lt;=499 ; $i++ ) {\n    # 10 != 0x10\n    my $line = ($i+1)*0x10;\n    my $new_address = $address + $line;\n    # print sprintf(\"%X\\n\", $new_address);\n    printf(\"%X\\n\", $new_address);\n}\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 45751353, "answer_count": 1, "score": 0, "last_activity_date": 1503056058, "creation_date": 1503042190, "question_id": 45751173, "link": "https://stackoverflow.com/questions/45751173/multiply-hex-number-result-in-wrong-sequence", "title": "Multiply hex number result in wrong sequence", "body": "<p>I try to multiple one hex number by 10 and add to another hex number but the result i get is weird.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $address= 0x10000;\nfor ( $i =0 ; $i&lt;=499 ; $i++ ) {\n    my $line = hex($i+1)*10;\n    my $new_address = $address + $line;\n    print $new_address\\n;\n}\n</code></pre>\n\n<p>The answer i wan to get should be every 15 the <code>hex($i+1)</code> should become </p>\n\n<pre><code>hex(15) = F * 10 = F0\n10000 + F0 = 100F0\nhex(16) = 10 * 10 = 100\n10000 + 100 = 10100\n</code></pre>\n\n<p>but my answer get is incorrect. Is my calculation wrong?  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "edited": false, "score": 0, "creation_date": 1503036578, "post_id": 45749597, "comment_id": 78456367, "body": "what have you tried so far and in which language you want to achieve this"}, {"owner": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "reply_to_user": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "edited": false, "score": 0, "creation_date": 1503054507, "post_id": 45749597, "comment_id": 78467447, "body": "@Redo, i have tried /\\&#39;/\\&#39;\\&#39;/, but it changed the 2 single quotes to 4. Also tried /[^\\&#39;]\\&#39;[^\\&#39;]/, but it was replacing an extra character"}], "answers": [{"tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 1, "last_activity_date": 1503037339, "creation_date": 1503037339, "answer_id": 45749795, "question_id": 45749597, "link": "https://stackoverflow.com/questions/45749597/how-to-replace-single-quote-to-two-single-quotes-but-do-nothing-if-two-single-q/45749795#45749795", "title": "How to replace single quote to two single quotes, but do nothing if two single quotes are next to each other in perl", "body": "<p>I think the cleanest way is to search for the following pattern:</p>\n\n<pre><code>(?&lt;!')'(?!')\n</code></pre>\n\n<p>and then replace that with two single quotes.  The pattern searches for a single quote, but it has negative lookbehind and lookahead assertions which check that the preceeding and proceeding character is not also another single quote.</p>\n\n<pre><code>my $var = \"abc'def''sdf'\";\nprint \"$var\\n\";\n$var =~ s/(?&lt;!')'(?!')/''/g;\nprint \"$var\\n\";\n</code></pre>\n\n<p>Note that you could have also just written a straight pattern to match, e.g.</p>\n\n<pre><code>(^|[^'])'($|[^'])\n</code></pre>\n\n<p>But then the replacement becomes tricky because you would have consumed the characters surrounding the single quote.  I don't like to do extra work if I don't have to.</p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>abc'def''sdf'\nabc''def''sdf''\n</code></pre>\n\n<p><strong>Demo here:</strong></p>\n\n<p><a href=\"http://rextester.com/WNBFGM32855\" rel=\"nofollow noreferrer\"><h1>Rextester</h1></a></p>\n"}], "owner": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 45749795, "answer_count": 1, "score": 1, "last_activity_date": 1503492533, "creation_date": 1503036474, "last_edit_date": 1503492533, "question_id": 45749597, "link": "https://stackoverflow.com/questions/45749597/how-to-replace-single-quote-to-two-single-quotes-but-do-nothing-if-two-single-q", "title": "How to replace single quote to two single quotes, but do nothing if two single quotes are next to each other in perl", "body": "<p>I need to change all the single quote found in the string to two single quotes, if more than one single quotes are found successively, they should remain as it is.</p>\n\n<p>e.g. str = abc'def''sdf'''asdf\noutput should be : str = abc''def''sdf'''asdf</p>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1503026213, "post_id": 45747766, "comment_id": 78453110, "body": "1.  Please <i>please</i> show what you have 2. You say you are not using Perl regex but you tagged perl ... ? While you say <i>have</i> a Perl solution."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 1, "creation_date": 1503027803, "post_id": 45747766, "comment_id": 78453546, "body": "<code>grep 3E60C7832</code>?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1503044877, "post_id": 45747766, "comment_id": 78461039, "body": "What are the criterias?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503031413, "post_id": 45748398, "comment_id": 78454524, "body": "Nice. (But they did say that their <code>grep</code> can&#39;t use Perl&#39;s regex.) In Perl regex there is no need for <code>$</code>"}, {"owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503032561, "post_id": 45748398, "comment_id": 78454859, "body": "@zdim, thanks, I offered another <code>awk</code> solution to replace the <code>grep</code> solution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503032700, "post_id": 45748398, "comment_id": 78454911, "body": "Even nicer -- but I didn&#39;t mean to suggest to remove the <code>grep</code> solution!  The question <i>is</i> tagged with Perl, and that regex shows how to use Perl for it.  I&#39;d leave it and perhaps just comment?"}, {"owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503033066, "post_id": 45748398, "comment_id": 78455032, "body": "Yes, that&#39;s also confused me If perl is allowed or not. I&#39;ll leave the <code>grep</code> solution anyway."}], "tags": [], "owner": {"reputation": 3543, "user_id": 6329118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a20c0ed8a82fd967952e2539203af9?s=128&d=identicon&r=PG&f=1", "display_name": "CWLiu", "link": "https://stackoverflow.com/users/6329118/cwliu"}, "is_accepted": false, "score": 1, "last_activity_date": 1503033281, "last_edit_date": 1503033281, "creation_date": 1503029299, "answer_id": 45748398, "question_id": 45747766, "link": "https://stackoverflow.com/questions/45747766/how-to-match-part-of-postfix-log-with-regex/45748398#45748398", "title": "How to match part of postfix log with regex?", "body": "<pre><code>$ s=\"Aug 6 16:00:35 d1234567-002-e3 postfix/smtp[16032]: 3E60C7832\"\n</code></pre>\n\n<p>For the <code>sed</code> solution,</p>\n\n<pre><code>$ sed -E 's/.*]: //' &lt;&lt;&lt; \"$s\"\n</code></pre>\n\n<p>For the <code>grep</code> solution,</p>\n\n<pre><code>$ grep -oP ']: \\K.*' &lt;&lt;&lt; \"$s\"\n</code></pre>\n\n<p>For the <code>awk</code> solution,</p>\n\n<pre><code>$ awk '{print $NF}' &lt;&lt;&lt; \"$s\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1503038918, "last_edit_date": 1503038918, "creation_date": 1503037688, "answer_id": 45749889, "question_id": 45747766, "link": "https://stackoverflow.com/questions/45747766/how-to-match-part-of-postfix-log-with-regex/45749889#45749889", "title": "How to match part of postfix log with regex?", "body": "<p>You can try the following patterns</p>\n\n<pre><code> my $s = \"Aug 6 16:00:35 d1234567-002-e3 postfix/smtp[16032]: 3E60C7832\";\n\n if($s=~m/.*:\\s(.+)/)\n {\n    print $1,\"\\n\";\n }\n</code></pre>\n\n<p>or if you want to track by the colon you can use the following regex,</p>\n\n<pre><code> if($s=~m/^[^:]+:[^:]+:[^:]+:\\s*(.+)/)\n {\n    print $1,\"\\n\";\n }\n</code></pre>\n\n<p>In your regex you have mentioned <code>.*:.*:.*:</code> along with this need to add another <code>.*</code> so the complete regex was <code>.*:.*:.*:(.*)</code>. But this is not a good regex, Because <code>*</code> matches zero or more times with <strong>greedy</strong> for every search it will go to the end then it will backtrack to match the <code>:</code>. </p>\n\n<p>To avoid the greedy match we can use <code>?</code> along with <code>*</code> and <code>+</code>. But for your problem negation character class (<code>[^:]</code>) is the best solution.</p>\n\n<p><strong>Greedy match</strong></p>\n\n<p>For this <code>.*:.*:.*:(.*)</code> pattern it will give the result after 212 steps. <a href=\"https://regex101.com/r/c5TRQG/5/debugger\" rel=\"nofollow noreferrer\">check here</a></p>\n\n<p><strong>Non greedy match</strong></p>\n\n<p>With this <code>.*?:.*?:.*?:(.*)</code> pattern it will give the result after 59 steps. <a href=\"https://regex101.com/r/c5TRQG/3/debugger\" rel=\"nofollow noreferrer\">check here</a></p>\n\n<p><strong>Negation character class</strong></p>\n\n<p>With this <code>^[^:]+:[^:]+:[^:]+:(.*)</code> pattern it will give the result after 11 steps. <a href=\"https://regex101.com/r/c5TRQG/4/debugger\" rel=\"nofollow noreferrer\">check here</a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1503052759, "creation_date": 1503052759, "answer_id": 45754669, "question_id": 45747766, "link": "https://stackoverflow.com/questions/45747766/how-to-match-part-of-postfix-log-with-regex/45754669#45754669", "title": "How to match part of postfix log with regex?", "body": "<pre><code>my ( $mail_id ) = m{postfix/smtp[\\d+]: (\\w+)}\n</code></pre>\n\n<p>I mean, you did tag it perl, right? </p>\n\n<p>so:</p>\n\n<pre><code>perl -lne 'm{postfix/smtp[\\d+]: (\\w+)} and print $1,\"\\n;' postfix.log\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3330599, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11d2806ec62ad4659ba0aba668bd7c0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3330599", "link": "https://stackoverflow.com/users/3330599/user3330599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1503052759, "creation_date": 1503024673, "question_id": 45747766, "link": "https://stackoverflow.com/questions/45747766/how-to-match-part-of-postfix-log-with-regex", "title": "How to match part of postfix log with regex?", "body": "<p>I need to match the following part of a postfix log using grep.</p>\n\n<p><code>Aug 6 16:00:35 d1234567-002-e3 postfix/smtp[16032]: 3E60C7832</code></p>\n\n<pre><code>                                                    ^^^^^^^^^^\n</code></pre>\n\n<p>So far the only way I've been able to do it is using negative lookahead, but that's not allowed in my current implementation of grep (not using perl regex).</p>\n\n<p>I assumed I could do something along the lines of... (not complete solution)</p>\n\n<p><code>.*:.*:.*:</code></p>\n"}, {"tags": ["html", "perl", "httprequest", "url-redirection", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503038742, "post_id": 45748111, "comment_id": 78457495, "body": "Hi @elvey, which part should i add this into my code? And what i want is to get the html code for <code>www.example.com</code> and not just enter the website, sorry for the unclear information"}, {"owner": {"reputation": 458, "user_id": 4187995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c47f343e634e9883476f72c10fe745?s=128&d=identicon&r=PG&f=1", "display_name": "elvey", "link": "https://stackoverflow.com/users/4187995/elvey"}, "reply_to_user": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503124178, "post_id": 45748111, "comment_id": 78495058, "body": "@Tim Headers are sent by the webserver before the HTML content so they need to go into whatever script is serving out your content. What are you actually doing with out.html?"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503125703, "post_id": 45748111, "comment_id": 78495448, "body": "Hi @elvey, the out.html in my scripts is for debug purpose to see whether I success get the html for &#39;www.example.com&#39; , but unfortunately the out.html I get is the &#39;continue&#39; as shown above, so I thinking is it a way to click the &#39;continue&#39; button so I can go get the html for website I want"}, {"owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503125837, "post_id": 45748111, "comment_id": 78495481, "body": "And also if I using the scripts directly open the out.html I get redirect to the page I want in the browser, just not sure why my code cannot get the html code for the page after redirect"}, {"owner": {"reputation": 458, "user_id": 4187995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c47f343e634e9883476f72c10fe745?s=128&d=identicon&r=PG&f=1", "display_name": "elvey", "link": "https://stackoverflow.com/users/4187995/elvey"}, "reply_to_user": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "edited": false, "score": 0, "creation_date": 1503367474, "post_id": 45748111, "comment_id": 78573539, "body": "@Tim To redirect using headers it needs to be sent by the web server before your HTML content, so you can&#39;t do it from the HTML document.   I&#39;ve updated my answer to include a javascript redirect which may be a better option if you can&#39;t send headers."}], "tags": [], "owner": {"reputation": 458, "user_id": 4187995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c47f343e634e9883476f72c10fe745?s=128&d=identicon&r=PG&f=1", "display_name": "elvey", "link": "https://stackoverflow.com/users/4187995/elvey"}, "is_accepted": false, "score": 0, "last_activity_date": 1503367357, "last_edit_date": 1503367357, "creation_date": 1503027282, "answer_id": 45748111, "question_id": 45747665, "link": "https://stackoverflow.com/questions/45747665/how-to-pass-through-redirect-page-by-clicking-button-in-html/45748111#45748111", "title": "How to pass through redirect page by clicking button in html", "body": "<p>The best solution is to to set your location header. If it is an option to write output directly to the response (instead of an output HTML file) you can write your headers before the HTML content.</p>\n\n<pre><code>use HTTP::Headers;\nmy $headers = HTTP::Headers-&gt;new;\n$headers-&gt;header('Content-Type' =&gt; 'text/html');\n$headers-&gt;header('Location' =&gt; 'newAddr.html');\n$headers-&gt;header('Cookie' =&gt; q(TIN=287000; LastMRH_Session=439960f5; MRHSession=78c9c47291c1fcedae166121439960f5));\nprint $headers-&gt;as_string();\n</code></pre>\n\n<p>You can also set your HTTP status code to 302 for a temporary redirect if you want.</p>\n\n<p>Alternatively you could use javascript to automatically redirect after the page has loaded by adding this into your HTML content.</p>\n\n<pre><code>&lt;script type=\"text/javacript\"&gt;\n    window.location = \"newAddr.html\";\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 8379418, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a58b8e52101e30caf560e61f83cdaae2?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8379418/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503367357, "creation_date": 1503023835, "last_edit_date": 1503025007, "question_id": 45747665, "link": "https://stackoverflow.com/questions/45747665/how-to-pass-through-redirect-page-by-clicking-button-in-html", "title": "How to pass through redirect page by clicking button in html", "body": "<p>I create a perl scripts to get some information from the website. The webpage does not redirect itself and i need to click continue myself to redirect it. Can i do it using perl?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse feature ':5.10';\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request;\nuse HTTP::Request::Common qw(POST);\nuse HTTP::Cookies;\nuse CACertOrg::CA;\n$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n\n\nmy $outfile=\"out.html\";\nmy $URL=\"http://www.example.com;\nmy $UA = LWP::UserAgent-&gt;new();\n$UA-&gt;ssl_opts(\n    SSL_verify_mode   =&gt; 'SSL_VERIFY_NONE',\n    verify_hostnames =&gt; 0,\n    SSL_ca_file      =&gt; CACertOrg::CA::SSL_ca_file()\n);\n$UA-&gt;cookie_jar(HTTP::Cookies-&gt;new(file =&gt; 'cookie_jar', autosave =&gt;1));\n\n\nmy $req =HTTP::Request::Common::POST(\"$URL\",\n   Content_type=&gt;'form-data',\n   Content =&gt;[\n         'username'=&gt;'user',\n         'password'=&gt;'pass',\n         'vhost'=&gt;'standard'\n  ]\n);\n$req-&gt;header('Cookie' =&gt;q(TIN=287000; LastMRH_Session=439960f5; MRHSession=78c9c47291c1fcedae166121439960f5));\n\n\n\nmy $resp=$UA-&gt;request($req);\nopen(OUTFILE, \"&gt;$outfile\");\nprint OUTFILE $resp-&gt;decoded_content;\nclose(OUTFILE);\n</code></pre>\n\n<p>The <code>out.html</code> i print out is like this </p>\n\n<p><a href=\"https://i.stack.imgur.com/jz4P5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jz4P5.png\" alt=\"enter image description here\"></a> </p>\n\n<p>when i open the html file, it directly redirect to the page i want but not in the code. Anywhere to do it in the code to reach <code>wwww.example.com</code>. </p>\n\n<p>Added 8/18</p>\n\n<p>I try using this command and it open the <code>www.example.com</code> in my browser</p>\n\n<pre><code> my $ret = system( 'out.html' );\n</code></pre>\n\n<p>but what i want is to get the html of <code>www.example.com</code> instead of open the website.</p>\n"}, {"tags": ["php", "regex", "perl"], "comments": [{"owner": {"reputation": 8552, "user_id": 2182349, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bb687a2472d42d92f94372a47036bff9?s=128&d=identicon&r=PG", "display_name": "user2182349", "link": "https://stackoverflow.com/users/2182349/user2182349"}, "edited": false, "score": 1, "creation_date": 1503021473, "post_id": 45747332, "comment_id": 78452115, "body": "Are you using php or perl?"}, {"owner": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "reply_to_user": {"reputation": 8552, "user_id": 2182349, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bb687a2472d42d92f94372a47036bff9?s=128&d=identicon&r=PG", "display_name": "user2182349", "link": "https://stackoverflow.com/users/2182349/user2182349"}, "edited": false, "score": 0, "creation_date": 1503021552, "post_id": 45747332, "comment_id": 78452125, "body": "PERL-compatible regex in PHP"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1503030772, "post_id": 45747332, "comment_id": 78454341, "body": "Note that the description says &quot;<i>within 15 <b>words</b> before TITLE</i>&quot; (emphasis mine), while regex uses 15 characters, <code>.{0,15}</code>.  I went with what the code says in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "edited": false, "score": 0, "creation_date": 1503028824, "post_id": 45748095, "comment_id": 78453816, "body": "How would I stop match at the first APPENDIX B, if the text has more than one APPENDIX B?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "edited": false, "score": 0, "creation_date": 1503028887, "post_id": 45748095, "comment_id": 78453838, "body": "@user4951834  That&#39;s what it should do, by <code>.*?appendix</code> (non-greedy <code>?</code>) ... does it not?"}, {"owner": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "edited": false, "score": 0, "creation_date": 1503029655, "post_id": 45748095, "comment_id": 78454038, "body": "Thanks, going to give this a try."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "edited": false, "score": 0, "creation_date": 1503030480, "post_id": 45748095, "comment_id": 78454265, "body": "@user4951834  Simplified and rearranged the post"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1503422430, "last_edit_date": 1503422430, "creation_date": 1503027164, "answer_id": 45748095, "question_id": 45747332, "link": "https://stackoverflow.com/questions/45747332/how-to-stop-regex-match-if-word-is-found/45748095#45748095", "title": "How to stop regex match if word is found?", "body": "<p>One way is to use alternation for the optional part</p>\n\n<pre><code>perl -0777 -wlnE'\n    @m = /(appendix .{0,15} title (?: .*?appendix\\s\\w+ | .*) )/xsig; \n    say for @m\n' input.txt\n</code></pre>\n\n<p>with <code>/g</code> so to match all sections within <code>appendix</code> markers.</p>\n\n<p>Or capture with multiple groups, one for the optional item, then test for it and use accordingly</p>\n\n<pre><code>perl -0777 -wne'\n    @m = /(appendix .{0,15} title) (.*? appendix\\s\\w+)? (.*)/xsi;\n    print join \"\", ($m[1] ? @m[0,1] : @m[0,2])\n' input.txt\n</code></pre>\n\n<p>This works because <code>$2</code> <em>is</em> created for the second <code>(</code> even if there is no match.</p>\n\n<p>With yet more capture groups you can filter in the second case, <code>? grep { defined } @m</code>.  If there may be multiple <code>appendix</code>-sections better use <code>while</code> with <code>$N</code> variables in this approach</p>\n\n<pre><code>while (/(appendix.{0,15}title)(.*?appendix\\s\\w+)?(.*)/sig) {\n    my $appx_section = ($2) ? $1.$2 : $1.$3;\n    ...\n}\n</code></pre>\n\n<p>since one big <code>@m</code> with all captures would need a little analysis. </p>\n\n<p>All these print the desired output in both cases, including multiple <code>appendix</code>-sections.</p>\n\n<p>I've wrapped it in one-liners for ready testing. The code works in a Perl script as it stands.</p>\n"}, {"tags": [], "owner": {"reputation": 19724, "user_id": 6539317, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/feded6c8f60453abde4e6bf81a877693?s=128&d=identicon&r=PG&f=1", "display_name": "felixmosh", "link": "https://stackoverflow.com/users/6539317/felixmosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1503037401, "creation_date": 1503037401, "answer_id": 45749808, "question_id": 45747332, "link": "https://stackoverflow.com/questions/45747332/how-to-stop-regex-match-if-word-is-found/45749808#45749808", "title": "How to stop regex match if word is found?", "body": "<p>Look at <a href=\"https://stackoverflow.com/questions/45741514/manipulate-and-filter-a-large-string-with-similar-pattern-in-javascript/45742379#45742379\">this</a> as an inspiration.\nBasically, I`ve splitted the text by line-break, then iterated on each line and converted it into blocks.</p>\n\n<p>These blocks are what you want. :]</p>\n\n<p>I'm not familiar with perl, but the idea should be the same.</p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1503060459, "creation_date": 1503060459, "answer_id": 45757071, "question_id": 45747332, "link": "https://stackoverflow.com/questions/45747332/how-to-stop-regex-match-if-word-is-found/45757071#45757071", "title": "How to stop regex match if word is found?", "body": "<p>Just like this, where $var is your string. </p>\n\n<pre><code>if ( $var=~m#(APPENDIX A.{0,15}TITLE.*?(?:APPENDIX B|$))#s )\n{\n    print $1.\"\\n\";\n}\nelse \n{\n\n    print \"failed\\n\";\n}\n</code></pre>\n\n<p>your problem was this \"(?:.<em>)(?:appendix){0,1})\"  greedy matching plus a {0,1} which just means it will always just take the lot because regex is greedy. .</em>? is non-greedy e.g., just take the minimum possible to still make the match </p>\n"}], "owner": {"reputation": 591, "user_id": 4951834, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/74e7904eabc6203636bc1620bf2e9bde?s=128&d=identicon&r=PG&f=1", "display_name": "user4951834", "link": "https://stackoverflow.com/users/4951834/user4951834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1503422430, "creation_date": 1503021233, "question_id": 45747332, "link": "https://stackoverflow.com/questions/45747332/how-to-stop-regex-match-if-word-is-found", "title": "How to stop regex match if word is found?", "body": "<p>I have text like this:</p>\n\n<pre><code>TEXT 786\nOPQ RTS\n\nAPPENDIX A \n\nTITLE \n\nTEXT 123 \nABC EFG \n\nAPPENDIX B\n\nTEXT 456\nHIJ KLM\n</code></pre>\n\n<p>and</p>\n\n<pre><code>TEXT 786\nOPQ RTS\n\nAPPENDIX A \n\nTITLE \n\nTEXT 123 \nABC EFG \n\nTEXT 456\nHIJ KLM\n</code></pre>\n\n<p>I'm trying to use regex to extract all the text starting from <code>APPENDIX A</code> to <code>APPENDIX B</code> if <code>APPENDIX B</code> is present otherwise from <code>APPENDIX A</code> until the end (i.e., <code>HIJ KLM</code>). Also, <code>APPENDIX A</code> must appear within 15 words before <code>TITLE</code>. This is what I'm come up with so far:</p>\n\n<pre><code>(\\b(?:appendix)(?:.){0,15}(?:title)(?:.*)(?:appendix){0,1})/is\n</code></pre>\n\n<p>Problem is, the capture does not stop at <code>APPENDIX B</code> if <code>APPENDIX B</code> is there, it always captures until the end.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1503014873, "last_edit_date": 1503014873, "creation_date": 1503014447, "answer_id": 45746600, "question_id": 45746497, "link": "https://stackoverflow.com/questions/45746497/why-does-perls-strict-mode-allow-you-to-dereference-a-variable-with-an-undefine/45746600#45746600", "title": "Why does Perl&#39;s strict mode allow you to dereference a variable with an undefined value in this foreach context but not in an assignment context?", "body": "<p>1) <code>for()</code> in Perl puts its operand into \"l-value context\", therefore the <code>$undef</code> is being <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\">auto-vivified</a> into existence as an array (reference) with zero elements (see <a href=\"https://stackoverflow.com/questions/40246957/why-does-map-mask-the-undefined-value-error/40247420#40247420\">this</a> relatively similar question/answer regarding l-value context). </p>\n\n<p>3) Because you're trying to coercively assign an undefined value into something else in r-value context, and that's illegal under <code>strict</code> (nothing gets auto-vivified in this context, so you're not magically creating a variable from nothing like you would be in an l-value operation).</p>\n\n<p>As far as question 2 and 4, there are several other context, too many to think of off the top of my head. For 2, <code>map()</code> comes to mind, or any other operation that treats the operand as an l-value.</p>\n"}, {"comments": [{"owner": {"reputation": 1013, "user_id": 4943322, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104170815733738/picture?type=large", "display_name": "Barry Jones", "link": "https://stackoverflow.com/users/4943322/barry-jones"}, "edited": false, "score": 1, "creation_date": 1503024615, "post_id": 45746886, "comment_id": 78452759, "body": "You are a wizard."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1503017205, "creation_date": 1503017205, "answer_id": 45746886, "question_id": 45746497, "link": "https://stackoverflow.com/questions/45746497/why-does-perls-strict-mode-allow-you-to-dereference-a-variable-with-an-undefine/45746886#45746886", "title": "Why does Perl&#39;s strict mode allow you to dereference a variable with an undefined value in this foreach context but not in an assignment context?", "body": "<p>When you dereference an undefined variable in lvalue context, Perl will auto-vivify the reference and that which it references.</p>\n\n<p>For example,</p>\n\n<pre><code>@$ref = qw( a b c );\n</code></pre>\n\n<p>means</p>\n\n<pre><code>@{ $ref //= [] } = qw( a b c );\n</code></pre>\n\n<hr>\n\n<p>When you dereference an undefined variable in rvalue context, Perl won't auto-vivify. Under strict refs, this is an error. Otherwise, undefined is stringified (with warning) to the empty string, which is used as symbolic reference.</p>\n\n<p>For example, </p>\n\n<pre><code>no strict qw( refs ); my $ref; my @a = @$ref;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>no strict qw( refs ); my @a = @{\"\"};\n</code></pre>\n\n<p>(Aside from the lack of warning for the latter.)</p>\n\n<hr>\n\n<p>Lvalue context is provided to:</p>\n\n<ul>\n<li>The left-hand-side argument of assignments. (This is the \"L\" in \"lvalue\".)</li>\n<li>Arguments of sub and method calls (because of aliasing of elements of <code>@_</code>).</li>\n<li>Foreach's list (because of aliasing of <code>$_</code>).</li>\n<li>The operands of some named operators (e.g. <code>map</code> and <code>grep</code>, because of aliasing of <code>$_</code>).</li>\n</ul>\n"}], "owner": {"reputation": 1013, "user_id": 4943322, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104170815733738/picture?type=large", "display_name": "Barry Jones", "link": "https://stackoverflow.com/users/4943322/barry-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 45746600, "answer_count": 2, "score": 2, "last_activity_date": 1503017205, "creation_date": 1503013529, "question_id": 45746497, "link": "https://stackoverflow.com/questions/45746497/why-does-perls-strict-mode-allow-you-to-dereference-a-variable-with-an-undefine", "title": "Why does Perl&#39;s strict mode allow you to dereference a variable with an undefined value in this foreach context but not in an assignment context?", "body": "<p>This code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.18.0;\nuse strict;\n\n# Part 1\nmy $undef = undef;\nprint \"1 $undef\\n\";\nforeach my $index (@$undef) {\n  print \"unreachable with no crash\\n\";\n}\nprint \"2 $undef\\n\";\n\n# Part 2\nmy $undef = undef;\nmy @array = @$undef;\nprint \"unreachable with crash\\n\";\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1 \n2 ARRAY(0x7faefa803ee8)\nCan't use an undefined value as an ARRAY reference at /tmp/perlfile line 12.\n</code></pre>\n\n<p>Questions about Part 1:</p>\n\n<ol>\n<li>Why does dereferencing <code>$undef</code> in the Part 1 change <code>$undef</code> to an arrayref to an empty array?</li>\n<li>Are there other contexts (other than a foreach) where dereferencing <code>$undef</code> would change it in the same way? What is the terminology to describe the most generic such case?</li>\n</ol>\n\n<p>Questions about Part 2:</p>\n\n<ol start=\"3\">\n<li>Why does dereferencing <code>$undef</code> in the Part 2 fall afoul of <code>strict</code>?</li>\n<li>Are there other contexts (other than assignment) where dereferencing <code>$undef</code> would fall afoul of <code>strict</code>. What is the terminology to describe the most generic such case?</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1503007667, "post_id": 45745603, "comment_id": 78448796, "body": "Skip all but the first <code>my</code>."}, {"owner": {"reputation": 1533, "user_id": 7075994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UvYWN.png?s=128&g=1", "display_name": "c3st7n", "link": "https://stackoverflow.com/users/7075994/c3st7n"}, "edited": false, "score": 1, "creation_date": 1503007776, "post_id": 45745603, "comment_id": 78448836, "body": "You are using &#39;=~&#39; where you just need &#39;=&#39; to assign to the variable. Inside the if blocks remove the &#39;my&#39; and the tildes"}, {"owner": {"reputation": 1533, "user_id": 7075994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UvYWN.png?s=128&g=1", "display_name": "c3st7n", "link": "https://stackoverflow.com/users/7075994/c3st7n"}, "edited": false, "score": 1, "creation_date": 1503007842, "post_id": 45745603, "comment_id": 78448857, "body": "The &quot;my&quot; is causing a new scalar variable to be created inside the if blocks."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1503008144, "post_id": 45745603, "comment_id": 78448945, "body": "The <code>&amp;</code> is bit-wise AND, you probably mean <code>&amp;&amp;</code> or <code>and</code>."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1503027410, "post_id": 45745671, "comment_id": 78453420, "body": "Or possibly <code>.=</code>"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 0, "last_activity_date": 1503008165, "last_edit_date": 1503008165, "creation_date": 1503007780, "answer_id": 45745671, "question_id": 45745603, "link": "https://stackoverflow.com/questions/45745603/update-scalar-variable-globally-inside-if-statement-in-perl/45745671#45745671", "title": "Update scalar variable globally inside if statement in Perl?", "body": "<p>Delete all <code>my</code> except the first one.<br>\nThis prevents one local variable being introduced for each <code>{}</code>, which is then unknown outside.<br>\nThat way, the accesses inside the <code>{}</code> will affect your global variable.</p>\n\n<p>As c3st7n noted (thanks), you will also have to doublecheck what you actually do to your variable, it is likely that it is not what you intended. I.e. you probably want to use <code>=</code> instead of <code>=~</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1503009188, "last_edit_date": 1503009188, "creation_date": 1503008850, "answer_id": 45745824, "question_id": 45745603, "link": "https://stackoverflow.com/questions/45745603/update-scalar-variable-globally-inside-if-statement-in-perl/45745824#45745824", "title": "Update scalar variable globally inside if statement in Perl?", "body": "<p><code>my</code> creates a new variable. That means that inside your \"then` clauses, you create a new variable, then assign a string to it. You never use that variable again!</p>\n\n<p>You want to assign to the existing variable, so stop creating new ones with the same name.</p>\n\n<hr>\n\n<p>There are numerous other problems with your code:</p>\n\n<ul>\n<li>Your code suffer from SQL injection bugs.</li>\n<li>You used <code>=~</code> to assign to a variable when the assignment operator is <code>=</code>.</li>\n<li>You used <code>&amp;</code> to check if two value are true when the logical-AND operator is <code>&amp;&amp;</code>.</li>\n<li>You used <code>\"blank\"</code> to create an empty string when it doesn't.</li>\n<li>You sometimes use <code>$in{from_date}</code> and sometimes <code>$fromdate</code>.</li>\n<li>You sometimes use <code>$in{to_date}</code> and sometimes <code>$todate</code>.</li>\n<li>You assign an initial value (<code>initial</code>) to <code>$daterange</code> that you never end up using.</li>\n<li>You have some useless parentheses in your SQL.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>my $daterange;\nif ($in{from_date} &amp;&amp; $in{to_date}) {\n    $daterange = \" AND (date BETWEEN \".$dbh-&gt;quote($in{from_date}).\" AND \".$dbh-&gt;quote($in{to_date}).\")\";\n} elsif ($in{from_date}) {\n    $daterange = \" AND date &gt; \".$dbh-&gt;quote($in{from_date});\n} elsif ($in{to_date}) {\n    $daterange = \" AND date &lt; \".$dbh-&gt;quote($in{to_date});\n} else {\n    $daterange = \"\";\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8480654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa84893a7438eb71d6be439a973472b?s=128&d=identicon&r=PG&f=1", "display_name": "IceSun", "link": "https://stackoverflow.com/users/8480654/icesun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45745671, "answer_count": 2, "score": 0, "last_activity_date": 1503011373, "creation_date": 1503007343, "last_edit_date": 1503011373, "question_id": 45745603, "link": "https://stackoverflow.com/questions/45745603/update-scalar-variable-globally-inside-if-statement-in-perl", "title": "Update scalar variable globally inside if statement in Perl?", "body": "<p>I'm trying to update a variable declared and used outside of a series of <code>if</code> / <code>elsif</code> / <code>else</code> statements, and updating it within the series. Is there a functional way to make this sorting/updating variable work?</p>\n\n<pre><code>my $daterange = 'initial';\n\nif ($in{from_date} &amp; $in{to_date}) {\n    my $daterange=~\"AND (date BETWEEN '$fromdate' and '$todate')\";\n}\n\nelsif ($in{from_date}) {\n    my $daterange=~\"AND (date &gt; '$fromdate')\";\n} \n\nelsif ($in{to_date}) {\n    my $daterange=~\"AND (date &lt; '$todate')\";\n} \n\nelse {\n    my $daterange=~\"blank\";\n}\n\nprint $daterange;  \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1503010633, "post_id": 45745269, "comment_id": 78449698, "body": "While this looks like a duplicate question, I respectfully suggest that in fact is is not a duplicate of any of the three questions marked above. (I did in fact read every single one of them before posting). As @ikegami points out in his answer, this root cause is really about <code>sort</code>. My first two test cases illustrate that <code>mysub</code> and <code>mysub()</code> behave identically."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503010635, "post_id": 45745269, "comment_id": 78449699, "body": "Re-opened. None of the three questions of which this was supposedly a dup have anything to do with <code>sort</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1503011499, "post_id": 45745269, "comment_id": 78449873, "body": "@stevieb, Operator names aren&#39;t reserved words in Perl, merely keywords. (e.g. <code>sub print { }</code>, <code>sub and { }</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503009769, "post_id": 45745944, "comment_id": 78449432, "body": "I just noticed in testing if you do <code>sort mysub, mysub</code>, it does the right thing on the first <code>mysub</code>, but not the second: <code>123mysub</code>. I didn&#39;t realize until I tested that, that it was a <code>sort</code> thing and not a perl thing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1503011176, "last_edit_date": 1503011176, "creation_date": 1503009654, "answer_id": 45745944, "question_id": 45745269, "link": "https://stackoverflow.com/questions/45745269/when-are-parentheses-required-for-sub-calls-in-perl/45745944#45745944", "title": "When are parentheses required for sub calls in Perl?", "body": "<p>The syntax for sort is:</p>\n\n<ul>\n<li><code>sort SUBNAME LIST</code></li>\n<li><code>sort BLOCK LIST</code></li>\n<li><code>sort LIST</code></li>\n</ul>\n\n<p>The first is really weird and the source of the problems such as yours.</p>\n\n<hr>\n\n<p><strong><code>sort mysub()</code></strong></p>\n\n<p><code>sort SUBNAME LIST</code> uses the sub named <code>SUBNAME</code> to sort the list, so <code>sort mysub ()</code> asks <code>sort</code> to sort an empty list.</p>\n\n<hr>\n\n<p><strong><code>sort mysub</code></strong></p>\n\n<p>Here, Perl again thinks you're going for <code>sort SUBNAME LIST</code> until it finds no <code>LIST</code>. Having been provided something incorrect, it guesses the string it considered to be a sub name must have been meant to be the list of items to sort.</p>\n\n<p>This situation could be handled better &mdash;why would Perl assume you wanted to sort a single constant item?&mdash; but the resolution makes more sense when you consider the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -le'my $s = abc; print $s;'\nabc\n\n$ perl -le'my ($s) = sort abc; print $s;'\nabc\n</code></pre>\n\n<hr>\n\n<p><strong>Solutions</strong></p>\n\n<ul>\n<li><code>sort(mysub())</code><sup>[1]</sup></li>\n<li><code>sort +mysub()</code></li>\n<li><code>sort +mysub</code></li>\n</ul>\n\n<hr>\n\n<ol>\n<li>That parens can't be used with the <code>SUBNAME</code> syntax is rather odd in and of itself. They can be used for the <code>BLOCK</code> syntax (e.g. <code>sort( { $a cmp $b } @a )</code>), and they can be used for in other functions that accept a leading identifier (e.g. <code>print(STDOUT \"abc\\n\");</code>).</li>\n</ol>\n"}], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45745944, "answer_count": 1, "score": 2, "last_activity_date": 1503047874, "creation_date": 1503005633, "last_edit_date": 1503047874, "question_id": 45745269, "link": "https://stackoverflow.com/questions/45745269/when-are-parentheses-required-for-sub-calls-in-perl", "title": "When are parentheses required for sub calls in Perl?", "body": "<p>I would've expected all of these to print out 1, 2 and 3. But the last two  don't. Why is that?</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nsub mysub {\n    return (1,2,3);\n}\n\nprint \"--- foreach (mysub()) prints 1, 2 and 3\\n\";\nforeach (mysub()) {\n    print $_, \"\\n\";\n}\n\nprint \"--- foreach (mysub) prints 1, 2 and 3\\n\";\nforeach (mysub) {\n    print $_, \"\\n\";\n}\n\nprint \"--- foreach (sort(mysub())) prints 1, 2 and 3\\n\";\nforeach (sort(mysub())) {\n    print $_, \"\\n\";\n}\n\nprint \"--- foreach (sort mysub()) prints no elements (huh?)\\n\";\nforeach (sort mysub()) {\n    print $_, \"\\n\";\n}\n\nprint \"--- foreach (sort mysub) prints a single 'mysub' string (huh?)\\n\";\nforeach (sort mysub) {\n    print $_, \"\\n\";\n}\n</code></pre>\n\n<p>It has this output:</p>\n\n<pre><code>--- foreach (mysub()) prints 1, 2 and 3\n1\n2\n3\n--- foreach (mysub) prints 1, 2 and 3\n1\n2\n3\n--- foreach (sort(mysub())) prints 1, 2 and 3\n1\n2\n3\n--- foreach (sort mysub()) prints no elements (huh?)\n--- foreach (sort mysub) prints a single 'mysub' string (huh?)\nmysub\n</code></pre>\n\n<p>Why not 1, 2 and 3 in every case? (Perl 5.18.2 on debian jessie)</p>\n"}, {"tags": ["perl", "debugging", "text-files", "cifs"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "is_accepted": false, "score": 0, "last_activity_date": 1503003092, "last_edit_date": 1503003092, "creation_date": 1503002621, "answer_id": 45744666, "question_id": 45743973, "link": "https://stackoverflow.com/questions/45743973/text-file-is-moved-incompletely-to-cifs-mountpoint-with-perl/45744666#45744666", "title": "Text file is moved incompletely to cifs mountpoint with Perl", "body": "<p>Well, i'm not proud of doing this, but it's a workaround that pretty much eliminates the cifs bug by not using perl to handle this file move. </p>\n\n<p>Instead of using <code>move</code> and <code>copy</code> from perl, ill use the operating system <code>mv</code> binary through <code>system</code> function.</p>\n\n<p>Old chunk of code:</p>\n\n<pre><code>copy   \"$temp_dir/$arquivo\", \"$dest_file\";\nunlink \"$temp_dir/$arquivo\";\n</code></pre>\n\n<p>New chunk of core:</p>\n\n<pre><code>system(\"/bin/mv\", \"$temp_dir/$arquivo\", \"$dest_file\" );\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "edited": false, "score": 0, "creation_date": 1503053087, "post_id": 45753355, "comment_id": 78466532, "body": "Well. Shame on me. I had this unaccent function written on other script for testing purposes, and i forgot to port <code>close ESCRITA</code> to this one. Guess you are right."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "edited": false, "score": 0, "creation_date": 1503080080, "post_id": 45753355, "comment_id": 78483547, "body": "After receiving emails with 4 <code>.txt</code> files, the problem reproduces again. I guess its not related ONLY with file closing. No <code>dmesg</code> messages about cifs being unavailable..."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1503304675, "post_id": 45753355, "comment_id": 78542883, "body": "The problem isn&#39;t with the cifs - it&#39;s the local file system buffering writes. I&#39;d expected closing the file would cause it to flush the contents to disk, but it sounds like it needs a bit of help. I&#39;ve updated my answer with a method of flushing the file that should work."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1503304721, "last_edit_date": 1503304721, "creation_date": 1503048942, "answer_id": 45753355, "question_id": 45743973, "link": "https://stackoverflow.com/questions/45743973/text-file-is-moved-incompletely-to-cifs-mountpoint-with-perl/45753355#45753355", "title": "Text file is moved incompletely to cifs mountpoint with Perl", "body": "<p>The problem is really obvious - you're not closing the file once you've finished writing to it. When you copy/move it to the other file system, you lose a chunk of it that hasn't been synced to disk.</p>\n\n<pre><code>     open (ESCRITA, \"&gt;\", \"$temp_dir/$arquivo\");\n     foreach $manipula_linha (@manipular){\n       # Removes &amp; and accents\n       $manipula_linha =~ s/\\&amp;/e/g;\n       $manipula_linha = unac_string(\"UTF-8\", $manipula_linha);\n       print ESCRITA $manipula_linha;\n     };\n\n     # Flush the file\n     my $old_fh = select(ESCRITA);\n     $| = 1;\n     select($old_fh);\n\n     close ESCRITA;\n  };\n\n  move   \"$temp_dir/$arquivo\", \"$dest_file\";\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45753355, "answer_count": 2, "score": 1, "last_activity_date": 1503304721, "creation_date": 1502999771, "last_edit_date": 1503002962, "question_id": 45743973, "link": "https://stackoverflow.com/questions/45743973/text-file-is-moved-incompletely-to-cifs-mountpoint-with-perl", "title": "Text file is moved incompletely to cifs mountpoint with Perl", "body": "<p>Well, this one is the weirdest filesystem related issue i had in a loooooong time.</p>\n\n<p><a href=\"https://stackoverflow.com/q/34922871/2231796\">I have a script</a>, that basically connects on a remote imap server, downloads emails, marks them as read, rip-off trash to download only <code>.txt</code> and <code>.xml</code> files. If <code>.txt</code> use <a href=\"http://search.cpan.org/~ldachary/Text-Unaccent-1.08/Unaccent.pm\" rel=\"nofollow noreferrer\"><code>Text::Unaccent</code></a> to remove accents.</p>\n\n<p>This is done on a 1-to-1 relationship of imap remote folder to a local cifs mounted folder on this server. The remove imap download and accentuation handling works just fine.</p>\n\n<p>My problem is: IF i download the file, handle accentuation and move it to a <code>cifs</code> mounted directory, the file gets ripped off(last 4 to 10K is missing). If i move it to anoter partition on the same machine, files are moved on a sane fashion(same <code>md5sum</code>, same filesize, no changes noticed by <code>diff</code>).</p>\n\n<p>The chunk of code that does the accents remove and moves the file:</p>\n\n<pre><code>      #If file extension = .txt\n      if (\"$temp_dir/$arquivo\" =~ /txt$/i){\n\n         #Put file line by line inside array\n         open (LEITURA, \"$temp_dir/$arquivo\");\n         @manipular = &lt;LEITURA&gt;;\n         close LEITURA;\n\n         #Open the same file to writing with other filehandler\n         open (ESCRITA, \"&gt;\", \"$temp_dir/$arquivo\");\n         foreach $manipula_linha (@manipular){\n           # Removes &amp; and accents\n           $manipula_linha =~ s/\\&amp;/e/g;\n           $manipula_linha = unac_string(\"UTF-8\", $manipula_linha);\n           print ESCRITA $manipula_linha;\n         };\n      };\n\n      # copy temp file to final destination. If cifs = crash\n      # move also does not work...\n      copy   \"$temp_dir/$arquivo\", \"$dest_file\";\n      unlink \"$temp_dir/$arquivo\";\n</code></pre>\n\n<p>Cifs version:</p>\n\n<pre><code>[root@server mail_downloader]# modinfo cifs\nfilename:       /lib/modules/2.6.18-409.el5.centos.plus/kernel/fs/cifs/cifs.ko\nversion:        1.60RH\ndescription:    VFS to access servers complying with the SNIA CIFS Specification e.g. Samba and Windows\nlicense:        GPL\n</code></pre>\n\n<p>Perl version:</p>\n\n<pre><code>[root@server mail_downloader]# perl --version\n\nThis is perl, v5.8.8 built for i386-linux-thread-multi\n</code></pre>\n\n<p>Unaccent version:</p>\n\n<pre><code>[root@server mail_downloader]# rpm -qa | grep Unaccent\nperl-Text-Unaccent-1.08-1.2.el5.rf\n</code></pre>\n\n<p><strong>Question:</strong> Any clues on why perl <code>move</code> or <code>copy</code> have this behavior with a cifs mountpoint and how to solve this?</p>\n\n<p>Obviously i cant post the files contents here, cause they are EDI related stuff, and have some financial info.</p>\n\n<p>Also, if i comment the perl <code>copy</code> handle the file myself after unaccent is done using <code>cp</code> or <code>mv</code>, the file is moved correctly to the <code>cifs</code> mountpoint.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1117, "user_id": 4374801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-gKA8GCGfUks/AAAAAAAAAAI/AAAAAAAAI94/IvLw7PF4Zew/photo.jpg?sz=128", "display_name": "Roger Creasy", "link": "https://stackoverflow.com/users/4374801/roger-creasy"}, "edited": false, "score": 0, "creation_date": 1503000154, "post_id": 45742178, "comment_id": 78445428, "body": "Would those who down voted explain why, so I can learn?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1503000443, "post_id": 45742178, "comment_id": 78445570, "body": "I didn&#39;t, but this much is clear: show your code and sample of input/output. It also makes it easier for you to be precise and articulate in descriptions. The question is extremely incomplete, and unclear."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1502995868, "post_id": 45742292, "comment_id": 78443181, "body": "@Sinan &#220;n&#252;r, I wanted to be crystal clear in that particular solution, and I was too lazy to check if <code>do BLOCK while &lt;&gt;;</code> meant <code>do BLOCK while defined($_ = &lt;&gt;);</code>.  [ It does. Curse you for macking me check ;) ]"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1502995932, "last_edit_date": 1502995932, "creation_date": 1502993440, "answer_id": 45742292, "question_id": 45742178, "link": "https://stackoverflow.com/questions/45742178/in-perl-how-do-i-output-print-all-lines-that-follow-a-string/45742292#45742292", "title": "In Perl, how do I output (print) all lines that follow a string?", "body": "<p>You need a flag or two loops.</p>\n\n<hr>\n\n<p>Includes the trigger line in the output:</p>\n\n<pre><code>perl -e'\n   while (&lt;&gt;) {\n      last if /===/;\n   }\n\n   if (defined($_)) {\n      print;\n      while (&lt;&gt;) {\n         print;\n      }\n   }\n' log\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -ne'print if $print ||= /===/' log\n</code></pre>\n\n<hr>\n\n<p>Doesn't include the trigger line in the output:</p>\n\n<pre><code>perl -e'\n   while (&lt;&gt;) {\n      last if /===/;\n   }\n\n   if (defined($_)) {\n      while (&lt;&gt;) {\n         print;\n      }\n   }\n' log\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -ne'last if /===/; END { print while &lt;&gt; }' log\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -ne'print if $print; $print ||= /===/' log\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>perl -ne'print unless 1 .. /===/' log\n</code></pre>\n"}], "owner": {"reputation": 1117, "user_id": 4374801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-gKA8GCGfUks/AAAAAAAAAAI/AAAAAAAAI94/IvLw7PF4Zew/photo.jpg?sz=128", "display_name": "Roger Creasy", "link": "https://stackoverflow.com/users/4374801/roger-creasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 45742292, "answer_count": 1, "score": 0, "last_activity_date": 1502999551, "creation_date": 1502993052, "last_edit_date": 1502999551, "question_id": 45742178, "link": "https://stackoverflow.com/questions/45742178/in-perl-how-do-i-output-print-all-lines-that-follow-a-string", "title": "In Perl, how do I output (print) all lines that follow a string?", "body": "<p>I need to process a log file. I send it to Perl via <code>&lt;STDIN&gt;</code>. I need to output only the summary, which follows a line that contains several equal signs.</p>\n\n<p>The summary is the last bit in the daily log. So, I need everything starting after the line with the <code>=</code>s through EOF. </p>\n\n<p>I tried using a <code>while</code> loop with a \"<code>next unless</code>\" but I could not get that to work.</p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1502983265, "post_id": 45738992, "comment_id": 78435837, "body": "Nothing prevents you from shelling out in Perl and running that command. You can also work with <a href=\"https://metacpan.org/pod/JavaScript\" rel=\"nofollow noreferrer\">metacpan.org/pod/JavaScript</a> or another one of that kind to execute your stuff, but I wouldn&#39;t recommend it. You can build everything you&#39;re doing in that JS file with the Perl implementation of Mongo&#39;s API. If the rest of your program is written in Perl, you should probably be doing that, and not some weird kind of hybrid."}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1502983573, "post_id": 45738992, "comment_id": 78436054, "body": "so , same JS would work or do I need to change the JS fornat ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1502984184, "post_id": 45738992, "comment_id": 78436487, "body": "Please re-read my comment. The answer to that is <i>yes, it will work</i> and <i>no, you need to rewrite it</i>. It depends on how you implement it. The implementation where the answer is <i>yes</i> is error-prone, ugly and probably harder to maintain. But when you rewrite it, you will initially need to learn how to do that first. In the long run, consistency should have higher value though."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1503052585, "creation_date": 1503052585, "answer_id": 45754611, "question_id": 45738992, "link": "https://stackoverflow.com/questions/45738992/mongo-db-javascript-using-perl/45754611#45754611", "title": "Mongo DB JavaScript using Perl", "body": "<p>You could use Perl's <code>system()</code> function to run that command. But that seems like a spectacularly baroque way to do about it when there's <a href=\"https://metacpan.org/pod/MongoDB\" rel=\"nofollow noreferrer\">a Perl module for accessing Mongo databases</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1503379853, "post_id": 45763423, "comment_id": 78576558, "body": "I dont see any error coming but the result never gets printed.Updated the result part"}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1503382018, "post_id": 45763423, "comment_id": 78577441, "body": "Sorry it was my mistake . I was doing syntax error . Thanks it is fixed."}], "tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": true, "score": 1, "last_activity_date": 1503385646, "last_edit_date": 1503385646, "creation_date": 1503082758, "answer_id": 45763423, "question_id": 45738992, "link": "https://stackoverflow.com/questions/45738992/mongo-db-javascript-using-perl/45763423#45763423", "title": "Mongo DB JavaScript using Perl", "body": "<p>With the Perl driver, you'd do that via the <a href=\"https://metacpan.org/pod/MongoDB::Collection#aggregate\" rel=\"nofollow noreferrer\">aggregate method</a>.</p>\n\n<p>It would look something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MongoDB;\n\nmy $mc   = MongoDB-&gt;connect('mongodb://user:pass@host:port/dbname');\nmy $coll = $mc-&gt;ns(\"dbname.Test\");\n\nmy @permissibleCars =\n  ( \"C:93124617:54413209463\", \"C:93124633:54413165206\", \"C:93124634:54413165224\" );\n\nmy @pipeline = (\n    {\n        '$match' =&gt; {\n            \"methods.name\"     =&gt; \"Download\",\n            \"methods.status\"   =&gt; \"ACTIVE\",\n            \"container\"        =&gt; { '$in' =&gt; \\@permissibleCars },\n            \"entitlementClass\" =&gt; \"Download\"\n\n        }\n    },\n    { '$group' =&gt; { _id =&gt; '$container', count =&gt; { '$sum' =&gt; 9 } } }\n);\n\nmy $res = $coll-&gt;aggregate( \\@pipeline, { allowDiskUse =&gt; 1 } );\n</code></pre>\n\n<p>You then get results out of the <code>$res</code> iterator with the methods in <a href=\"https://metacpan.org/pod/MongoDB::QueryResult\" rel=\"nofollow noreferrer\">MongoDB::QueryResult</a>.</p>\n\n<p>Be careful not to use double-quotes with $-prefixed fields you want to send to the database!</p>\n\n<p>Added for verification</p>\n\n<pre><code> use Data::Printer;\n while (my $row = $res-&gt;next) {print $row-&gt;{'container'}}\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 45763423, "answer_count": 2, "score": 0, "last_activity_date": 1503385646, "creation_date": 1502983017, "question_id": 45738992, "link": "https://stackoverflow.com/questions/45738992/mongo-db-javascript-using-perl", "title": "Mongo DB JavaScript using Perl", "body": "<p>Can we directly run a Java Script from Perl to get the data from MongoDB ?</p>\n\n<p>Suppose my current JS file is :--</p>\n\n<pre><code>DBQuery.shellBatchSize = 194127180 ; \npermissibleCars = \n [\"C:93124617:54413209463\",\"C:93124633:54413165206\",\"C:93124634:54413165224\"]\n\ndb.getCollection('Test').aggregate([\n{$match:\n  {         \"methods.name\": \"Download\",\n            \"methods.status\": \"ACTIVE\",       \n            container: {\"$in\": permissibleCars},\n            entitlementClass : \"Download\"\n\n    } },\n{\"$group\" : {_id:\"$container\", count:{$sum:9}}}\n],\n{ allowDiskUse: true}\n);\n</code></pre>\n\n<p>Generally when we run it shell/bash we run it :--</p>\n\n<pre><code>mongo hostname:portnumber/db_name - user_name -p password &lt; filename.js &gt; output_file.txt\n</code></pre>\n\n<p>But I am not sure how to run it using perl.</p>\n\n<p>Can someone help me with same ? I read through documentations didnt see anything to JS with perl.</p>\n\n<p>Regards</p>\n"}, {"tags": ["bash", "shell", "perl", "awk"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 7, "creation_date": 1502982903, "post_id": 45738908, "comment_id": 78435590, "body": "Yes - don&#39;t do that. Write functions or aliases as appropriate, don&#39;t eval strings stored in variables."}, {"owner": {"reputation": 10884, "user_id": 7840440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YBUl.png?s=128&g=1", "display_name": "Raman Sailopal", "link": "https://stackoverflow.com/users/7840440/raman-sailopal"}, "edited": false, "score": 0, "creation_date": 1502983125, "post_id": 45738908, "comment_id": 78435734, "body": "You can put the filter in your awk command so awk &#39;/nameserver_ / {print $6}&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8474355, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ee25372f456648b0ccef95d786f2d6?s=128&d=identicon&r=PG&f=1", "display_name": "A.lacorazza", "link": "https://stackoverflow.com/users/8474355/a-lacorazza"}, "edited": false, "score": 0, "creation_date": 1503408109, "post_id": 45743192, "comment_id": 78595151, "body": "Thank you for your reply, i thinked the same, but i saw in this answer that they are using eval <a href=\"https://stackoverflow.com/questions/5615717/how-to-store-a-command-in-a-variable-in-linux\" title=\"how to store a command in a variable in linux\">stackoverflow.com/questions/5615717/&hellip;</a> so i try it. . Te man idea is to capture the output and then filter only with the sarvername. Anyway, thanks a lot Gordon"}], "tags": [], "owner": {"reputation": 95060, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "is_accepted": true, "score": 2, "last_activity_date": 1502996889, "creation_date": 1502996889, "answer_id": 45743192, "question_id": 45738908, "link": "https://stackoverflow.com/questions/45738908/storage-commands-output-as-a-variable-in-bash/45743192#45743192", "title": "Storage commands output as a variable in bash", "body": "<p>You appear to be confusing storing the output of commands with storing the text of the commands themselves (which is almost always a bad idea). I'm not sure exactly what you're trying to do (or what the output of <code>nas_server -list all</code> looks like), but I suspect you want something like this:</p>\n\n<pre><code>nameserver=\"$(nas_server -list all |  awk '{print $6}')\"   # $() captures the output of a command\necho \"$nameserver\"  # Double-quote all variable references to avoid parsing weirdness!\nnameserverreal=\"$(echo \"$nameserver\" |awk '/encap|nameserver_/{  print }')\"\necho \"$nameserverreal\"\n</code></pre>\n\n<p>Here's a simplified version:</p>\n\n<pre><code>nameserverreal=\"$(nas_server -list all |  awk '$6 ~ /encap|nameserver_/ {print $6}'\"\n</code></pre>\n\n<p>Oh, and anytime you're tempted to use <code>eval</code> in a shell script, it's a sign that something has gone horribly wrong.</p>\n"}], "owner": {"reputation": 97, "user_id": 8474355, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ee25372f456648b0ccef95d786f2d6?s=128&d=identicon&r=PG&f=1", "display_name": "A.lacorazza", "link": "https://stackoverflow.com/users/8474355/a-lacorazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45743192, "answer_count": 1, "score": 0, "last_activity_date": 1528768426, "creation_date": 1502982811, "last_edit_date": 1528768426, "question_id": 45738908, "link": "https://stackoverflow.com/questions/45738908/storage-commands-output-as-a-variable-in-bash", "title": "Storage commands output as a variable in bash", "body": "<p>I'm trying to get stored in a variable the output of a command chain with awk, but the result is incomplete, </p>\n\n<p>this is what im trying to do.</p>\n\n<pre><code>nameserver=\"nas_server -list all |  awk '{print $6}'\"\neval $nameserver\nnameserverreal=$nameserver |awk '/encap|nameserver_/{  print }'\neval $nameserverreal\n</code></pre>\n\n<p>I'm using this command nas_server and with awk print 6, only get some output from my command nas_server.</p>\n\n<p>What i need is to filter later the output only with \"nameserver_\" \nand storage the output in a variable, so i can print it, and use it later convined with other commands.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1502962110, "post_id": 45731046, "comment_id": 78420223, "body": "Some sample data would be useful. The standard &#39;trick&#39; for overlapping matches is zero width assertions."}, {"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1502964564, "post_id": 45731046, "comment_id": 78422015, "body": "@Sobrique - for data see the code examples. <code>match_all_positions(&#39;0{3}&#39;, &#39;001100010000&#39;);</code> should return <code>(4, 8, 9)</code>; <code>match_all_positions(&#39;2{3}&#39;, &#39;001100010000&#39;);</code> should return <code>()</code>;"}], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 1, "creation_date": 1502964734, "post_id": 45732239, "comment_id": 78422130, "body": "it works. Now I just gotta read the docs and figure out why. Thanks! And it&#39;s blazing fast too."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1502965341, "post_id": 45732239, "comment_id": 78422591, "body": "It&#39;s because normally regular expressions <i>consume</i>  and so a match removes submatches from the pool. Zero width doesn&#39;t consume, it &#39;puts stuff back&#39; to be reused."}], "tags": [], "owner": {"reputation": 2307, "user_id": 1611362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5ea82b95c95ab14034a879cfaedb79e?s=128&d=identicon&r=PG", "display_name": "pitseeker", "link": "https://stackoverflow.com/users/1611362/pitseeker"}, "is_accepted": true, "score": 7, "last_activity_date": 1502964521, "creation_date": 1502964521, "answer_id": 45732239, "question_id": 45731046, "link": "https://stackoverflow.com/questions/45731046/how-can-i-find-all-locations-of-a-regex-match-in-perl/45732239#45732239", "title": "How can I find _all_ locations of a regex match in Perl?", "body": "<p>You need to update your regex for <a href=\"http://www.perlmonks.org/?node_id=518444\" rel=\"noreferrer\">zero-width look-ahead</a> matching.</p>\n\n<p>Try calling your function like this:</p>\n\n<pre><code>print join ',', match_all_positions('(?=0{3})', '001100010000');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2307, "user_id": 1611362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5ea82b95c95ab14034a879cfaedb79e?s=128&d=identicon&r=PG", "display_name": "pitseeker", "link": "https://stackoverflow.com/users/1611362/pitseeker"}, "edited": false, "score": 0, "creation_date": 1503041452, "post_id": 45742830, "comment_id": 78459110, "body": "Very nice indeed - but requires some thinking :-)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1502995455, "creation_date": 1502995455, "answer_id": 45742830, "question_id": 45731046, "link": "https://stackoverflow.com/questions/45731046/how-can-i-find-all-locations-of-a-regex-match-in-perl/45742830#45742830", "title": "How can I find _all_ locations of a regex match in Perl?", "body": "<p>If you want to find the positions at which it matches:</p>\n\n<pre><code>my @matches;\npush @matches, \"$-[1]:$+[1]\" while \"aabbcc\" =~ /(?=(a.*c))/sg;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0:6\n1:6\n</code></pre>\n\n<hr>\n\n<p>If you want all possible matches,</p>\n\n<pre><code>local our @matches;\n\"aabbcc\" =~ /(a.*?c)(?{ push @matches, \"$-[1]:$+[1]\" })(?!)/s;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0:5\n0:6\n1:5\n1:6\n</code></pre>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 45732239, "answer_count": 2, "score": 6, "last_activity_date": 1502995455, "creation_date": 1502961237, "question_id": 45731046, "link": "https://stackoverflow.com/questions/45731046/how-can-i-find-all-locations-of-a-regex-match-in-perl", "title": "How can I find _all_ locations of a regex match in Perl?", "body": "<p>I can see from <a href=\"https://stackoverflow.com/questions/4856423/in-perl-how-do-you-find-the-position-of-a-match-in-a-string-if-forced-to-use-a\">this</a> answer that if I do</p>\n\n<pre><code>sub match_all_positions {\n    my ($regex, $string) = @_;\n    my @ret;\n    while ($string =~ /$regex/g) { push @ret, $-[0] }\n    return @ret\n}\n\nprint join ',', match_all_positions('0{3}', '001100010000');\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>4,8\n</code></pre>\n\n<p>What do I need to do to get the indexes of <em>all</em> matches, even when the overlap, such as positions 8 and 9 in the example above?</p>\n\n<p>I can do </p>\n\n<pre><code>sub match_all_positions_b  {\n    my ($substr, $string) = @_;\n    return unless index($string, $substr) &gt; 0;\n    my @res;\n    my $i = 0;\n    while ($i &lt;= (length($string) - $length)) {\n        $i = index($string, $substr, $i);\n        last if $i &lt; 0;\n        push @res, $i++;\n    }\n    return @res;\n}\n\nprint join ',', match_all_positions_b('000', '001100010000');\n</code></pre>\n\n<p>which just lets me match a substring, or </p>\n\n<pre><code>sub match_all_positions_c {\n    my ($substr, $string) = @_;\n    my $re = '^' . $substr;\n    my @res;\n    for (0..(length($string) - $length)) {\n         push @res, $_ if substr($string, $_) =~ /$re/;\n    }\n    return @res;\n}\n\nprint join ',', match_all_positions_c('0{3}', '001100010000');\n</code></pre>\n\n<p>Which is twice as slow.</p>\n\n<p>is there a way to get <em>all</em> matches, even when they overlap? Or should I just take the speed loss because it's inherent to using regex matches?</p>\n"}, {"tags": ["perl", "ssh", "rhel"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1502961334, "post_id": 45729175, "comment_id": 78419656, "body": "We need to see some code. And it would be useful to see the versions of the modules which are installed on the two systems."}, {"owner": {"reputation": 23, "user_id": 8476598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDky09ERQHg/AAAAAAAAAAI/AAAAAAAACQI/6q0vdUpMcQ0/photo.jpg?sz=128", "display_name": "Ankit Sinha", "link": "https://stackoverflow.com/users/8476598/ankit-sinha"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1502962893, "post_id": 45729175, "comment_id": 78420810, "body": "Thanks for responding Dave. I have added both the code and the debug prints."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502968588, "post_id": 45729175, "comment_id": 78424913, "body": "<a href=\"https://stackoverflow.com/questions/5031334/perls-netssh-vs-ssh2-vs-openssh-how-should-i-compare-them\" title=\"perls netssh vs ssh2 vs openssh how should i compare them\">stackoverflow.com/questions/5031334/&hellip;</a> if you decide to switch."}, {"owner": {"reputation": 23, "user_id": 8476598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDky09ERQHg/AAAAAAAAAAI/AAAAAAAACQI/6q0vdUpMcQ0/photo.jpg?sz=128", "display_name": "Ankit Sinha", "link": "https://stackoverflow.com/users/8476598/ankit-sinha"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1503019987, "post_id": 45729175, "comment_id": 78451805, "body": "@\u0421\u0443\u0445\u043e\u043927 I tried OpenSSH and that is working fine. Since I don&#39;t think I would be getting a solution to my problem anytime soon I would probably go with OpenSSH only. However, I have more scripts which are using Net::SSH and using two packages for same work doesn&#39;t sound good to me. Either I change the other scripts too... but before that will try to get in touch with the developer of the package to see if there is some solution."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8476598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDky09ERQHg/AAAAAAAAAAI/AAAAAAAACQI/6q0vdUpMcQ0/photo.jpg?sz=128", "display_name": "Ankit Sinha", "link": "https://stackoverflow.com/users/8476598/ankit-sinha"}, "edited": false, "score": 0, "creation_date": 1504423181, "post_id": 45838302, "comment_id": 79001722, "body": "The module is there. Otherwise, the script won&#39;t work for any client but it works on 6.8 RHEL version."}], "tags": [], "owner": {"reputation": 1, "user_id": 8505802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab970fd600320d80e207eaaa74e01c6f?s=128&d=identicon&r=PG&f=1", "display_name": "H&#229;vard Eidnes", "link": "https://stackoverflow.com/users/8505802/h%c3%a5vard-eidnes"}, "is_accepted": false, "score": 0, "last_activity_date": 1503492392, "last_edit_date": 1503492392, "creation_date": 1503487146, "answer_id": 45838302, "question_id": 45729175, "link": "https://stackoverflow.com/questions/45729175/cant-locate-object-method-exchange-via-package-netsshperlkexc25519/45838302#45838302", "title": "Can&#39;t locate object method &quot;exchange&quot; via package &quot;Net::SSH::Perl::Kex::C25519&quot; at /usr/local/lib64/perl5/Net/SSH/Perl/Kex.pm line 107", "body": "<p>My guess is that you don't have the <code>Crypt::Curve25519</code> <code>perl module</code> installed.</p>\n\n<p>What I did to discover this was modify Kex.pm from the <code>Net::SSH::Perl package</code> like this:</p>\n\n<pre><code>--- lib/perl5/vendor_perl/5.26.0/i386-netbsd-thread-multi/Net/SSH/Perl/Kex.pm.orig      2017-08-23 11:10:46.000000000 +0000\n+++ lib/perl5/vendor_perl/5.26.0/i386-netbsd-thread-multi/Net/SSH/Perl/Kex.pm\n@@ -234,6 +234,9 @@ sub choose_kex {\n     if (my $pkg = $kexmap{$name}) {\n         $kex-&gt;{ssh}-&gt;debug(\"Using $name for key exchange\");\n         eval \"use Net::SSH::Perl::Kex::$pkg\";\n+        if ($@) {\n+            $kex-&gt;{ssh}-&gt;debug(\"Problem using Net::SSH::Perl::Kex::$pkg: $@\");\n+        }\n         $kex-&gt;{class_name} = __PACKAGE__ . '::' . $pkg;\n     } else {\n         croak \"Bad kex algorithm $name\";\n</code></pre>\n\n<p>and used the small test script above to get a voluminous error message that the above mentioned perl module wasn't found.</p>\n"}], "owner": {"reputation": 23, "user_id": 8476598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDky09ERQHg/AAAAAAAAAAI/AAAAAAAACQI/6q0vdUpMcQ0/photo.jpg?sz=128", "display_name": "Ankit Sinha", "link": "https://stackoverflow.com/users/8476598/ankit-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503492392, "creation_date": 1502955452, "last_edit_date": 1502987191, "question_id": 45729175, "link": "https://stackoverflow.com/questions/45729175/cant-locate-object-method-exchange-via-package-netsshperlkexc25519", "title": "Can&#39;t locate object method &quot;exchange&quot; via package &quot;Net::SSH::Perl::Kex::C25519&quot; at /usr/local/lib64/perl5/Net/SSH/Perl/Kex.pm line 107", "body": "<p>I have been using the SSH package of Perl to connect to my RHEL systems. I recently upgraded one of my VM to redhat-release-server-7.2-9.el7.x86_64.\nNow when I am running my Perl script it is throwing the error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"exchange\" via package \"Net::SSH::Perl::Kex::C25519\" at /usr/local/lib64/perl5/Net/SSH/Perl/Kex.pm line 107.\n  when making the ssh object.</p>\n</blockquote>\n\n<p>The same script is otherwise working on my 6.8 RHEL version.\nAny suggestions?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\nuse Net::SSH::Perl;\nmy $ssh = Net::SSH::Perl-&gt;new($server_ip, debug=&gt;1);\n$ssh-&gt;login(\"root\",\"password\");\n</code></pre>\n\n<p>Debug print:</p>\n\n<pre><code>[root@Automation_linux_10]# perl temp.pl\nAutomation_linux_[Auto_server_ip]: Reading configuration data /root/.ssh/config\nAutomation_linux_[Auto_server_ip]: Reading configuration data /etc/ssh_config\nAutomation_linux_[Auto_server_ip]: Allocated local port 1023.\nAutomation_linux_[Auto_server_ip]: Connecting to [SERVER_IP], port 22.\nAutomation_linux_[Auto_server_ip]: Remote version string: SSH-2.0-OpenSSH_6.6.1\nAutomation_linux_[Auto_server_ip]: Remote protocol version 2.0, remote software version OpenSSH_6.6.1\nAutomation_linux_[Auto_server_ip]: Net::SSH::Perl Version 2.12, protocol version 2.0.\nAutomation_linux_[Auto_server_ip]: No compat match: OpenSSH_6.6.1.\nAutomation_linux_[Auto_server_ip]: Connection established.\nAutomation_linux_[Auto_server_ip]: Sent key-exchange init (KEXINIT), waiting for response.\nAutomation_linux_[Auto_server_ip]: Using curve25519-sha256@libssh.org for key exchange\nAutomation_linux_[Auto_server_ip]: Host key algorithm: ssh-ed25519\nAutomation_linux_[Auto_server_ip]: Algorithms, c-&gt;s: chacha20-poly1305@openssh.com &lt;implicit&gt; none\nAutomation_linux_[Auto_server_ip]: Algorithms, s-&gt;c: chacha20-poly1305@openssh.com &lt;implicit&gt; none\nCan't locate object method \"exchange\" via package \"Net::SSH::Perl::Kex::C25519\" at /usr/local/lib64/perl5/Net/SSH/Perl/Kex.pm line 107.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502955445, "post_id": 45728898, "comment_id": 78415919, "body": "<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=112782\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=112782</a>"}, {"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502955889, "post_id": 45728898, "comment_id": 78416168, "body": "Sorry didn&#39;t understand much. &quot;Please do not allow pod means&#39;?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 2, "creation_date": 1502957707, "post_id": 45728898, "comment_id": 78417262, "body": "@ThulasiR did show you that it&#39;s a known problem and there is a request to the author/maintainer of this module to fix it. It is a problem with the test that checks if the POD documentation is correct... which fails. These tests are fine for authors and maintainers, to ensure a certain level of &#39;kwalitee&#39; and have nothing to do with the code itself. \u2013 since other tests are passing fine, a &#39;force install&#39; is a save way to go"}, {"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "edited": false, "score": 0, "creation_date": 1502958131, "post_id": 45728898, "comment_id": 78417520, "body": "Yeah thank u for your clear explanation. I tried force installation and I got the same error."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1502958182, "post_id": 45728898, "comment_id": 78417540, "body": "Please don&#39;t post images of text. CPAN installation output is plain text. Why would you think posting it as an image is at all helpful?"}, {"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "edited": false, "score": 0, "creation_date": 1502958418, "post_id": 45728898, "comment_id": 78417662, "body": "Yeah it&#39;s a plain text when I was posting the text it was saying it contains code. I edited several times and posted but i was unable to post the error messages. Finally I thought this would be helpful. So, I posted as image"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1502958890, "post_id": 45728898, "comment_id": 78417980, "body": "<i>I thought this would be helpful.</i> Well, you were wrong. We can&#39;t cut and paste text from an image."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "edited": false, "score": 0, "creation_date": 1503296463, "post_id": 45730350, "comment_id": 78538498, "body": "thank you..You helped me.. finally I installed the module"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1503383040, "last_edit_date": 1503383040, "creation_date": 1502959231, "answer_id": 45730350, "question_id": 45728898, "link": "https://stackoverflow.com/questions/45728898/why-installation-of-perl-module-statisticsmulttest-fails-for-me/45730350#45730350", "title": "Why Installation of Perl Module Statistics::Multtest fails for me?", "body": "<p>Looks like this is <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=112782\" rel=\"nofollow noreferrer\">a known problem</a> with this distribution. But given that the distribution hasn't been updated for five years and the author hasn't responded to the bug report in eighteen months, I'd suggest that the chances of getting it fixed are slim.</p>\n\n<p>It's only a documentation error, so it's safe to ignore and force the installation, but it's probably a good idea to email the author (his email address is in the documentation) and ask him if he's aware of the problem.</p>\n\n<p><strong>Update:</strong> I found a Github repository for the module, so I've sent <a href=\"https://github.com/jokergoo/Statistics-Multtest/pull/1\" rel=\"nofollow noreferrer\">a pull request</a> to fix the problem.</p>\n\n<p><strong>Update 2:</strong> The <a href=\"https://metacpan.org/release/Statistics-Multtest\" rel=\"nofollow noreferrer\">fixed version</a> is now available on CPAN.</p>\n"}], "owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 45730350, "answer_count": 1, "score": 2, "last_activity_date": 1503383040, "creation_date": 1502954477, "last_edit_date": 1502957736, "question_id": 45728898, "link": "https://stackoverflow.com/questions/45728898/why-installation-of-perl-module-statisticsmulttest-fails-for-me", "title": "Why Installation of Perl Module Statistics::Multtest fails for me?", "body": "<p>I am trying to install a perl module Statistics::Multtest in my system. But Installation keeps failing every time. What might be the reason\nI am suing this command to install</p>\n\n<pre><code>perl -MCPAN -e 'install Statistics::Multtest'\n</code></pre>\n\n<p>But I am getting this error Message</p>\n\n<p><a href=\"https://i.stack.imgur.com/9mlmB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9mlmB.png\" alt=\"Error Message Screen Shot\"></a></p>\n\n<p>I am unaware of the real problem\nEven I upgraded the essentials and perl too\nBut still the problem persists\nWhat might be the reason?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952003, "post_id": 45728101, "comment_id": 78413897, "body": "Tried that but it didnt  work :-- Can&#39;t find string terminator &#39;&quot;&#39; anywhere before EOF at -e line 1."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952145, "post_id": 45728101, "comment_id": 78413973, "body": "&gt;&gt; <code>perl -ni -e &#39;print; print &quot;permissibleCars = [ \\${part[*]} ]\\n&quot; if $. == 2&#39;</code>"}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952327, "post_id": 45728101, "comment_id": 78414081, "body": "This wont give error but it will not copy the data stored in variable rather it copied permissibleCars = [ ${part[*]} ] as text."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952446, "post_id": 45728101, "comment_id": 78414146, "body": "So, add to the question what <code>${part[*]}</code> should return in your case."}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952518, "post_id": 45728101, "comment_id": 78414184, "body": "that is already there :-- root@vm-test-001:~/mongosearch# echo $part  &quot;C:00000092666270:53882159774&quot;"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952637, "post_id": 45728101, "comment_id": 78414249, "body": "<code>${part[*]}</code> =&gt; <code>$ENV{part}</code>"}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1502952816, "post_id": 45728101, "comment_id": 78414355, "body": "This also didnt help"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 0, "creation_date": 1502956026, "post_id": 45728101, "comment_id": 78416251, "body": "Look at $part. It&#39;s a string wrapped in quotes. And perl sees this <code>print &quot;permissibleCars = [ &quot;C:00000092666270:53882159774&quot; ]\\n&quot;</code>."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1502960139, "post_id": 45728101, "comment_id": 78418780, "body": "@user2854333 You are in linux so use single quote to run the one liner.  <code>perl -ni -e &#39;print; print  &quot;...&quot; &#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502959955, "post_id": 45729501, "comment_id": 78418646, "body": "No, this seems to be having strange issue . It is randomly adding adding ] and triming the objects inside array ."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502960920, "post_id": 45729501, "comment_id": 78419337, "body": "@user2854333 Then what is the output you get with this command here? Looks like the issue is with how you construct <code>${part[*]}</code>."}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502963694, "post_id": 45729501, "comment_id": 78421398, "body": "It is a array which hold holds value as subset from array. It can be like &quot;C:1000817:57160911940&quot;,&quot;C:1000817:57176485410&quot;,&quot;C:1000817:5&zwnj;&#8203;7205942228&quot;,&quot;C:10008&zwnj;&#8203;17:57211484466&quot;,&quot;C:1&zwnj;&#8203;000817:57215240125&quot;,&zwnj;&#8203;&quot;C:1000817:572188095&zwnj;&#8203;82&quot;,&quot;C:1000817:57221&zwnj;&#8203;636702&quot;,&quot;C:1000817:5&zwnj;&#8203;7235388574&quot;,&quot;C:10008&zwnj;&#8203;17: 57237335061&quot;,&quot;C:1000817:57239290315&quot;,&quot;C:1000817:57250543857&quot;&zwnj;&#8203;,&quot;C:1000817:57250575&zwnj;&#8203;736&quot;,&quot;C:1000817:5730&zwnj;&#8203;3722225&quot;,&quot;C:1000860:&zwnj;&#8203;379598081&quot;,&quot;C:100088&zwnj;&#8203;2:379598272&quot;,&quot;C:1000&zwnj;&#8203;960:379598451&quot;"}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502963821, "post_id": 45729501, "comment_id": 78421492, "body": "Also, I was able to do using sed but  it is POSIX standard sed implementation, the byte length limit is 8192 bytes."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502964246, "post_id": 45729501, "comment_id": 78421815, "body": "Ok, got it. And then in your perl script, do you need <code>part</code> as an array, or as a flat string?"}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502964428, "post_id": 45729501, "comment_id": 78421927, "body": "when it inserts into a js file i want the second line as permissibleCars = [ &quot;C:1156646:3445705296&quot;,&quot;C:1156646:54617499&quot;,&quot;C:1156666:54619&zwnj;&#8203;560&quot;,&quot;C:1157183:5467&zwnj;&#8203;3215&quot;,&quot;C:1157748:172&zwnj;&#8203;5390682&quot;]"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502967588, "post_id": 45729501, "comment_id": 78424185, "body": "Note I just updated the answer. This should fix several issues."}, {"owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502969032, "post_id": 45729501, "comment_id": 78425207, "body": "Thank you. I think my initial issue is with Mongo itself where it is not taking complete list."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502970169, "post_id": 45729501, "comment_id": 78425975, "body": "Did this perl command work for you? You can <code>echo $PARTS</code> to see if the list is complete."}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "reply_to_user": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "edited": false, "score": 0, "creation_date": 1502970452, "post_id": 45729501, "comment_id": 78426167, "body": "Downvoting went a bit rude here. It was an obvious syntax problem right from the beginning. Nice day."}], "tags": [], "owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "is_accepted": true, "score": 1, "last_activity_date": 1502979772, "last_edit_date": 1502979772, "creation_date": 1502956491, "answer_id": 45729501, "question_id": 45728101, "link": "https://stackoverflow.com/questions/45728101/inserting-a-line-in-text-file-through-perl-is-failing/45729501#45729501", "title": "Inserting a line in text file through perl is failing", "body": "<p>Try this:</p>\n\n<pre><code>export PARTS=${part[*]}\nperl -lni -e 'print; print \"permissibleCars = [\".join(\",\",split/ /,$ENV{PARTS}).\"]\" if $. == 2' query/containerId_count.js\n</code></pre>\n\n<p>And\nIn linux platform we should use single quote for one liner. From <a href=\"https://books.google.co.in/books?id=6kCWinNuop4C&amp;pg=PA1&amp;source=gbs_toc_r&amp;cad=2#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">Perl black book</a> see page number 19 and 20.</p>\n"}], "owner": {"reputation": 530, "user_id": 2854333, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/db86af05b1d31c38b9813131d3b9be1f?s=128&d=identicon&r=PG&f=1", "display_name": "user2854333", "link": "https://stackoverflow.com/users/2854333/user2854333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 45729501, "answer_count": 1, "score": -1, "last_activity_date": 1502979772, "creation_date": 1502951688, "question_id": 45728101, "link": "https://stackoverflow.com/questions/45728101/inserting-a-line-in-text-file-through-perl-is-failing", "title": "Inserting a line in text file through perl is failing", "body": "<p>I am trying to insert a new row on 2nd line of text file using perl . But it keeps failing.</p>\n\n<p>I am using below command to achieve the same.</p>\n\n<pre><code>  perl -ni -e \"print; print \\\"permissibleCars = [ ${part[*]} ]\\n\\\" if $. == 2\" query/containerId_count.js\n</code></pre>\n\n<p>But I keep getting error :--</p>\n\n<pre><code> root@vm-test-001:~/mongosearch# distinct_array=`sed ':a;N;$!ba;s/\\n/ /g' output/ontainerId_distinct.txt`\n root@vm-test-001:~/mongosearch# declare -a arr=($distinct_array)\n root@vm-test-001:~/mongosearch# batchsize=1\n root@vm-test-001:~/mongosearch# IFS=,\n root@vm-test-001:~/mongosearch# part=( \"${arr[@]:i:batchsize}\" )\n root@vm-test-001:~/mongosearch# echo $part\n \"C:00000092666270:53882159774\"\n root@vm-test-001:~/mongosearch# perl -ni -e \"print; print \\\"permissibleCars = [ ${part[*]} ]\\n\\\" if $. == 2\" query/containerId_count.js\n Bareword found where operator expected at -e line 1, near \"\"permissibleCars = [ \"C\"\n    (Missing operator before C?)\nString found where operator expected at -e line 1, near \"53882159774\" ]\\n\"\"\n    (Missing operator before \" ]\\n\"?)\nsyntax error at -e line 1, near \"\"permissibleCars = [ \"C\"\nIllegal octal digit '9' at -e line 1, at end of line\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Can you help me with same ?</p>\n\n<p>Regards</p>\n"}, {"tags": ["perl", "elasticsearch"], "answers": [{"comments": [{"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502956263, "post_id": 45728423, "comment_id": 78416395, "body": "Thanks sunkuet02 for fast reply, can you help me to find the &quot;config/elasticsearch.yml&quot; path...where the yml file."}, {"owner": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "reply_to_user": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502956394, "post_id": 45728423, "comment_id": 78416489, "body": "How did you install elasticsearch ?"}, {"owner": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "reply_to_user": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 1, "creation_date": 1502956636, "post_id": 45728423, "comment_id": 78416633, "body": "You can find it in <code>&#47;etc&#47;elasticsearch&#47;elasticsearch.yml</code> if you are using ubuntu and if you run it from <code>.zip</code> file then it is in there <code>config&#47;elasticsearch.yml</code>. If you use windows then go to installation folder."}, {"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502956966, "post_id": 45728423, "comment_id": 78416825, "body": "Hi sunkuet02 I found the yml file but there is some blocks.. like Cluster, Node, Paths, Memory.. should i add in Cluster or somewhere else"}, {"owner": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "reply_to_user": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502957046, "post_id": 45728423, "comment_id": 78416879, "body": "add the line at the last of that file without leading space. mind it &quot;the file name must be <code>elasticsearch.yml</code>\u2026"}, {"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502957578, "post_id": 45728423, "comment_id": 78417187, "body": "ERROR: [search_parse_exception] No mapping found for [<i>script] in order to sort on, called from sub Search::Elasticsearch::Role::Client::Direct::__ANON_</i>"}, {"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "reply_to_user": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "edited": false, "score": 0, "creation_date": 1502957607, "post_id": 45728423, "comment_id": 78417201, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/152123/discussion-between-ganesh-and-sunkuet02\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "reply_to_user": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1502959338, "post_id": 45728423, "comment_id": 78418258, "body": "@Ganesh, I have updated my answer. You can try with the updated answer."}], "tags": [], "owner": {"reputation": 2138, "user_id": 2315473, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e611302f4eae2c6ddc4c6221b882bf69?s=128&d=identicon&r=PG&f=1", "display_name": "sunkuet02", "link": "https://stackoverflow.com/users/2315473/sunkuet02"}, "is_accepted": true, "score": 2, "last_activity_date": 1502959286, "last_edit_date": 1502959286, "creation_date": 1502952925, "answer_id": 45728423, "question_id": 45727873, "link": "https://stackoverflow.com/questions/45727873/how-to-sort-sum-of-3-properties-in-elasticsearch/45728423#45728423", "title": "How to sort &quot;sum of 3 properties&quot; in Elasticsearch?", "body": "<p>Try the below query : </p>\n\n<pre><code>GET /index/_search\n{\n    \"query\": {\n        \"match_all\": {}\n    },\n    \"sort\": [\n        {\n           \"_script\": {\n              \"script\": \"doc['share'].value + doc['like'].value+doc['comment'].value\",\n              \"type\": \"number\",\n              \"order\": \"desc\"\n           }\n        }\n    ]\n}\n</code></pre>\n\n<p>The query will fetch all data and sort them in descending order according to the total value of <code>(share+like+comment)</code>.</p>\n\n<p>If you want to <code>sort</code> in ascending order then change the <code>order</code> value to <code>asc</code>. </p>\n\n<p>To run <code>script</code> query, you need to add <code>script.engine.groovy.inline.search: on</code> on your <code>config/elasticsearch.yml</code> file. </p>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1503033726, "creation_date": 1503033726, "answer_id": 45749034, "question_id": 45727873, "link": "https://stackoverflow.com/questions/45727873/how-to-sort-sum-of-3-properties-in-elasticsearch/45749034#45749034", "title": "How to sort &quot;sum of 3 properties&quot; in Elasticsearch?", "body": "<p>above answare is correct but it was getting field error so blow query is correct.</p>\n\n<pre><code>curl -XGET \"localhost:9200/stores/store/_search?pretty=true&amp;size=3\" -d '\n{\n    \"query\": {\n        \"match_all\": {}\n    },\n    \"sort\": [\n        {\n           \"_script\": {\n              \"script\": \"doc['\"'share'\"'].value + doc['\"'like'\"'].value+doc['\"'comment'\"'].value\",\n              \"type\": \"number\",\n              \"order\": \"desc\"\n           }\n        }\n    ]\n}'\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 45728423, "answer_count": 2, "score": 1, "last_activity_date": 1503033726, "creation_date": 1502950799, "last_edit_date": 1502952162, "question_id": 45727873, "link": "https://stackoverflow.com/questions/45727873/how-to-sort-sum-of-3-properties-in-elasticsearch", "title": "How to sort &quot;sum of 3 properties&quot; in Elasticsearch?", "body": "<p>I want to add these 3 properties (like + comment + share) and also want to sort the sum of 3 properties.</p>\n\n<pre><code>curl -XPUT 'http://XXX.X.XX.XXX:XXXXX/stores/' -d '{\n    \"settings\" : {\n        \"index\" : {\n            \"number_of_shards\" : 3, \n            \"number_of_replicas\" : 1 \n        }\n    },\n    \"mappings\" : {\n        \"store\" : {\n          \"_all\":{ \"enabled\": true  },\n          \"properties\":{\n            \"url\" : { \"type\" : \"string\", \"analyzer\" : \"simple\", \"boost\" : 3 },\n            \"title\" : { \"type\" : \"string\", \"boost\" : 2 },\n            \"description\" : { \"type\" : \"string\" },\n            \"like\":{\"type\":\"long\"},\n            \"comment\":{\"type\":\"long\"},\n            \"share\":{\"type\":\"long\"},\n            \"time_added\" : { \"type\" : \"integer\", \"index\" : \"not_analyzed\", \"include_in_all\": true }\n          }\n        }\n    } }'\n</code></pre>\n\n<p>what is the query to do this in elasticsearch.\nmy elasticsearch version is 2.4.0</p>\n"}, {"tags": ["perl", "batch-file"], "comments": [{"owner": {"reputation": 1105, "user_id": 1168379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8cb9f01f0296531ac9cad5bc6f2457?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1168379/charles"}, "edited": false, "score": 0, "creation_date": 1502934716, "post_id": 45725404, "comment_id": 78408478, "body": "Pure code-writing requests are off-topic on Stack Overflow -- we expect  questions here to relate to <i>specific</i> programming problems -- but we  will happily help you write it yourself! Tell us  <a href=\"https://stackoverflow.com/help/how-to-ask\">what you&#39;ve tried</a>, and where you are stuck.  This will also help us answer your question better."}, {"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "reply_to_user": {"reputation": 1105, "user_id": 1168379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8cb9f01f0296531ac9cad5bc6f2457?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1168379/charles"}, "edited": false, "score": 0, "creation_date": 1502936800, "post_id": 45725404, "comment_id": 78408898, "body": "I understand your intention. But, how could you justify that I am looking for whole code. I need some idea and little logic."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1503347809, "post_id": 45726182, "comment_id": 78568161, "body": "@Thanks Magoo.  This is perfect. But, if I change <code>:next</code> <code>CALL :incver %version%</code> <code>ECHO version=%version% - new version=%newver%</code> to <code>SETLOCAL</code> <code>for &#47;f &quot;tokens=1,2 delims==&quot; %%i in (Version.txt) do SET &quot;version=%%i&quot;</code> <code>:next</code> <code>CALL :incver %version%</code> <code>ECHO %newver%%LF%&gt;E:\\Tests\\Version.txt</code> why is generating extra empty line in version.txt file. 1)1.0.2O 2)Emptyline Any suggestions to avoid that line."}, {"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1503349013, "post_id": 45726182, "comment_id": 78568620, "body": "If I try <code>ECHO| set &#47;p=%newver%%LF%&gt;Version.txt</code> , it&#39;s removing extra line but it&#39;s generating space at the end."}], "tags": [], "owner": {"reputation": 68521, "user_id": 2128947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ASTM.jpg?s=128&g=1", "display_name": "Magoo", "link": "https://stackoverflow.com/users/2128947/magoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1502940818, "creation_date": 1502940818, "answer_id": 45726182, "question_id": 45725404, "link": "https://stackoverflow.com/questions/45725404/how-could-i-increment-alphabetic-versions-using-batch-script-or-perl/45726182#45726182", "title": "How could I increment alphabetic versions using batch script or perl?", "body": "<pre class=\"lang-dos prettyprint-override\"><code>@ECHO Off\nSETLOCAL\nSET \"version=10.0.1A\"\n:next\nCALL :incver %version%\nECHO version=%version% - new version=%newver%\nSET \"xxx=\"\nSET /p xxx=Another ?\nIF NOT DEFINED xxx SET \"version=%newver%\"&amp;GOTO next\nGOTO :EOF\n\n:incver\nSET \"newver=%1\"\nSET \"valid=A B C Y Z\"\n:: next on final character\nCALL :changechar %newver:~-1%\nIF %nextchar% neq %valid:~0,1% SET \"newver=%newver:~0,-1%%nextchar%\"&amp;GOTO :EOF\n:: Is 2nd-last a valid char?\n:: If so, increment 2nd-last and restart last.\nFOR %%b IN (%valid%) DO IF %newver:~-2,1%==%%b (\n CALL :changechar %%b\n CALL SET \"newver=%newver:~0,-2%%%nextchar%%%nextchar%\"\n GOTO :EOF \n)\n:: Not a valid character so append another\nSET \"newver=%newver:~0,-1%%nextchar%%nextchar%\nGOTO :eof\n\n:changechar\nSET \"nextchar=\"\nFOR %%a IN (%valid% %valid:~0,1%) DO IF DEFINED nextchar (\n SET \"nextchar=%%a\"\n GOTO :EOF \n) ELSE IF %%a==%1 SET \"nextchar=%%a\"\n\nGOTO :eof\n</code></pre>\n\n<p>Interesting little exercise.</p>\n\n<p>In the above routine, press <kbd>Enter</kbd> for next, any character entry will terminate.</p>\n\n<p>Starting with the initial string, the routine <code>:incver</code> will generate <code>newver</code> containing the next-in-sequence after the code supplied as <code>:incver</code>'s parameter.</p>\n\n<p>The next code is obtained by looking at the last character and selecting the next, incrementing the last valid character results in selecting the first.</p>\n\n<p>So, if the next selected is the same as the first-valid, then we need to make a decision - to append a new character (remove the last and add the first-valid twice) or increment the second-last character, and append the first-valid.</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1502942867, "post_id": 45726317, "comment_id": 78410322, "body": "it works if the version is like 1.0.0.A, 1.0.0.B etc.  But, I want 1.0.1A, 1.0.1B....etc if i change the code to <code>my $NEXTBUILDLETTER = ++$Splitversion[2];</code> <code>$NextBuild = &quot;$Splitversion[0]\\.$Splitversion[1]\\.$NEXTBUILDLETTER&quot;;  </code> <code>print $NextBuild;</code> it gives 1.0.2, 1.0.3 etc"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1502948257, "post_id": 45726317, "comment_id": 78411921, "body": "Sorry, missed that part.  Edited my answer"}, {"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1502988363, "post_id": 45726317, "comment_id": 78439131, "body": "It always says Invalid Version. invalid buildno 1.0.2B  at version.pl"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 1, "creation_date": 1502991999, "post_id": 45726317, "comment_id": 78441124, "body": "made it a complete script; it works for me.  is your $Buildno maybe really &quot;1.0.2B\\n&quot;?  if so, <code>chomp($Buildno)</code> first"}, {"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1503349746, "post_id": 45726317, "comment_id": 78568907, "body": "Thank you so much, appreciate your help. This is perfect."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1502991945, "last_edit_date": 1502991945, "creation_date": 1502941968, "answer_id": 45726317, "question_id": 45725404, "link": "https://stackoverflow.com/questions/45725404/how-could-i-increment-alphabetic-versions-using-batch-script-or-perl/45726317#45726317", "title": "How could I increment alphabetic versions using batch script or perl?", "body": "<p>Change to something like this:</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $Buildno = '1.02B';\n\nmy ($version,$letters) = $Buildno =~ /^(.*?)([A-Z]+)\\z/\n    or die \"invalid buildno $Buildno\\n\";\nmy $NextBuild = $version . ++$letters;\nprint $NextBuild, \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "edited": false, "score": 0, "creation_date": 1502988902, "post_id": 45728397, "comment_id": 78439434, "body": "invalid buildno 1.0.2B . at version.pl line 33"}], "tags": [], "owner": {"reputation": 11, "user_id": 7919165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe40d9ca8469fcb47be74def701ddcde?s=128&d=identicon&r=PG&f=1", "display_name": "Micro", "link": "https://stackoverflow.com/users/7919165/micro"}, "is_accepted": false, "score": 0, "last_activity_date": 1502952830, "creation_date": 1502952830, "answer_id": 45728397, "question_id": 45725404, "link": "https://stackoverflow.com/questions/45725404/how-could-i-increment-alphabetic-versions-using-batch-script-or-perl/45728397#45728397", "title": "How could I increment alphabetic versions using batch script or perl?", "body": "<pre><code>my ($version,$letters) = $Buildno =~ /^(.*?)\\.([A-Z]+)\\z/\nor die \"invalid buildno $Buildno/n\";\n$NextBuild = $version . ++$letters;\nprint $NextBuild.\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 8000076, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1528e2c3996ff2d22f2d81b54e3b9ae7?s=128&d=identicon&r=PG", "display_name": "Ras", "link": "https://stackoverflow.com/users/8000076/ras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 45726317, "answer_count": 3, "score": -1, "last_activity_date": 1503071662, "creation_date": 1502934305, "last_edit_date": 1503071662, "question_id": 45725404, "link": "https://stackoverflow.com/questions/45725404/how-could-i-increment-alphabetic-versions-using-batch-script-or-perl", "title": "How could I increment alphabetic versions using batch script or perl?", "body": "<p>I have a version like <code>1.0.1A</code><br>\nI want the version to be incremented on each run like:<br>\n<code>1.0.1B</code>, <code>1.0.1C</code>, <code>1.0.1D</code>, ... <code>1.0.1Z</code>, <code>1.0.1AA</code>, <code>1.0.1AB</code>, ... <code>1.0.1AZ</code>, <code>1.0.1BA</code>, etc.</p>\n\n<p>How can we achieve this?</p>\n\n<p>Right now I am using Perl and the version is like <code>1.0.0.A</code>, <code>1.0.0.B</code>, etc.</p>\n\n<pre><code>my @Splitversion = split(/\\./,$Buildno);\nmy $NEXTBUILDLETTER = ++$Splitversion[3];\n$NextBuild = \"$Splitversion[0]\\.$Splitversion[1]\\.$Splitversion[2]\\.$NEXTBUILDLETTER\";  \nprint $NextBuild;\n</code></pre>\n"}]