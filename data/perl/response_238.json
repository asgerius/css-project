[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564612284, "post_id": 57299577, "comment_id": 101093031, "body": "1) 5.22, 5.26 and 5.28 all produce the correct output for the code and data you provided."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1564612311, "post_id": 57299577, "comment_id": 101093038, "body": "2) You are (badly) re-implenting Text::CSV_XS / Text::CSV_PP"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1564612361, "post_id": 57299577, "comment_id": 101093050, "body": "Does the csv file have a Unicode byte order mark sequence at the beginning?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564612432, "post_id": 57299577, "comment_id": 101093068, "body": "Ah yes, I&#39;m sure Shawn found the issue. <code>$line =~ s&#47;^\\x{FEFF}&#47;&#47; if $. == 1;</code> will fix that (assuming you first correctly decode the file (e.g. possibly by adding <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code>))"}, {"owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "edited": false, "score": 0, "creation_date": 1564612581, "post_id": 57299577, "comment_id": 101093106, "body": "ikegami for point 2. You are very correct this is not the correct way to do it. This is only something I was messing around with and happened across this bug. This is a very simplified version, trying to use as few libs as possible to reproduce this.   Point 1, this seems to be a pattern I&#39;ve tried on 3 computers. It works on 1 and fails on two. Perhaps it is not the perl version. Thanks for trying. I may need to put  together a docker image that reliably reproduces this."}, {"owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "edited": false, "score": 0, "creation_date": 1564612859, "post_id": 57299577, "comment_id": 101093170, "body": "ikegami and Shawn Thanks! that explains it. If one of you want&#39;s to answer this I&#39;ll mark that as the correct one. If not I&#39;ll throw up an explanation in a couple of days and give credit to you two."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1564615643, "post_id": 57299577, "comment_id": 101093693, "body": "Isn&#39;t the BOM only relavent on utf-16 encodings ? But your supposed to test the file encoding first right ? I mean <i>guess</i> the enconding."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1564619186, "post_id": 57299577, "comment_id": 101094334, "body": "@sh Some tools add a BOM to utf-8 as an easy way to indicate that the text is utf-8. Iirc, you see it more on Windows than Linux or Unix systems."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1564622198, "last_edit_date": 1564622198, "creation_date": 1564619964, "answer_id": 57300463, "question_id": 57299577, "link": "https://stackoverflow.com/questions/57299577/perl-first-line-read-in-from-a-csv-file-doesnt-match-correctly-against-regex/57300463#57300463", "title": "Perl first line read in from a CSV file doesn&#39;t match correctly against ^ regex", "body": "<p>When you have a regular expression that <em>should</em> match at the start of a string and doesn't, one explanation is that there's some characters at the start of the line that aren't being displayed by your editor or whatever other tool you're using to look at the content. When it only happens on the first line of a file, while later lines match appropriately, odds are pretty decent that the file is encoded using UTF-8 and whatever created the file put a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">byte order mark</a> at the start of the file. It's not needed for UTF-8, but it's not unheard of.</p>\n\n<p>Looking at your file in a hex editor showed that this was indeed the case. The fix is to explicitly tell perl the file is encoded using UTF-8:</p>\n\n<pre><code>open(my $data, '&lt;:encoding(UTF-8)', $file) or die \"Could not open '$file' $!\\n\";\n</code></pre>\n\n<p>or alternatively like you did, using <code>use open</code> to change the default encoding for files in that scope.</p>\n\n<p>Unfortunately, the UTF-8 decoder doesn't automatically strip the BOM, but you can just get rid of that leading <code>\\x{FEFF}</code> code point manually. ikegami's suggestion of <code>$line =~ s/^\\x{FEFF}// if $. == 1</code> works well when reading from a file.</p>\n\n<p>Another option uses the <a href=\"https://metacpan.org/pod/File::BOM\" rel=\"nofollow noreferrer\">File::BOM</a> module off of CPAN:</p>\n\n<pre><code>open(my $data, '&lt;:encoding(UTF-8):via(File::BOM)', $file) or die \"Could not open '$file' $!\\n\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>open_bom(my $data, $file); # Croaks on failure\n</code></pre>\n\n<p>which <em>does</em> transparently remove the mark if present so you don't have to do so manually.</p>\n"}], "owner": {"reputation": 2465, "user_id": 302249, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/38c467a8b11ef0dde2bc97919502a047?s=128&d=identicon&r=PG", "display_name": "Dan Walmsley", "link": "https://stackoverflow.com/users/302249/dan-walmsley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 2, "accepted_answer_id": 57300463, "answer_count": 1, "score": 2, "last_activity_date": 1564622198, "creation_date": 1564611928, "last_edit_date": 1564613565, "question_id": 57299577, "link": "https://stackoverflow.com/questions/57299577/perl-first-line-read-in-from-a-csv-file-doesnt-match-correctly-against-regex", "title": "Perl first line read in from a CSV file doesn&#39;t match correctly against ^ regex", "body": "<p>Really weird one here. </p>\n\n<p>The following code works correctly on one computer running perl 5.26, yet fails on one running 5.22 and another running 5.28. </p>\n\n<p>The perl code is </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nsub filterSpeachMarksFromTextElementsInArray ($) {\n    my ($arrayRef) = @_;\n    foreach my $element  (@$arrayRef) {\n        print \"[$element]\";\n        if ($element =~ /^\"(.*)\"$/) {\n            $element = $1;\n        }\n    }\n}\n\nmy $file = $ARGV[0] or die \"Must specify a file to load in\\n\"; #TODO build a proper usage type function. \n\nopen(my $data, '&lt;', $file) or die \"Could not open '$file' $!\\n\";\n\n# Read in csv into an array of headers and rows\nmy $lineCount = 0;\nmy @headers =();\nmy @rows = ();\nwhile (my $line = &lt;$data&gt;){\n    chomp $line;\n    $lineCount ++;\n    if ($lineCount == 1) {\n        @headers = split ',', $line;\n    } else {\n        my @row = split ',' , $line;\n        push @rows, \\@row;\n    }\n\n}\nprint \"Printing headers before regex\";\nprint Dumper(@headers);\nprint \"\\n-----------------\\n Stripping qutoes\\n\";\n&amp;filterSpeachMarksFromTextElementsInArray(\\@headers);\nprint \"Printing headers after regex\\n\";\nprint Dumper(@headers);\nprint \"\\nFinished!\\n\";\n</code></pre>\n\n<p>This is the test csv I'm giving it : </p>\n\n<pre><code>\"Submitted At\",\"Do you have any images to upload\",\"What would you like to say about this image? \",PDFs,\"Total Amount\",\"Customer ID\",\"IP Address\",ID,\"UTM Source\",\"UTM Medium\",\"UTM Campaign\",\"UTM Term\",\"UTM Content\",\"Device Type\"\n\"2019-07-05 00:47:44\",https://s3-ap-southeast-2.amazonaws.com/paperform/u-28769/0/2019-07-05/ih2348a/zhdfbwvbc2miyqyaryl9.jpg,\"This is a picture of a dog. \",,0,\" -\",125.236.132.186,5d1e9e30f76b5c056961e585,,,,,,desktop\n</code></pre>\n\n<p>Running with </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl test.pl test.csv\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>Printing headers before regex$VAR1 = '\"Submitted At\"';\n$VAR2 = '\"Do you have any images to upload\"';\n$VAR3 = '\"What would you like to say about this image? \"';\n$VAR4 = 'PDFs';\n$VAR5 = '\"Total Amount\"';\n$VAR6 = '\"Customer ID\"';\n$VAR7 = '\"IP Address\"';\n$VAR8 = 'ID';\n$VAR9 = '\"UTM Source\"';\n$VAR10 = '\"UTM Medium\"';\n$VAR11 = '\"UTM Campaign\"';\n$VAR12 = '\"UTM Term\"';\n$VAR13 = '\"UTM Content\"';\n$VAR14 = '\"Device Type\"';\n\n-----------------\n Stripping qutoes\n[\"Submitted At\"][\"Do you have any images to upload\"][\"What would you like to say about this image? \"][PDFs][\"Total Amount\"][\"Customer ID\"][\"IP Address\"][ID][\"UTM Source\"][\"UTM Medium\"][\"UTM Campaign\"][\"UTM Term\"][\"UTM Content\"][\"Device Type\"]Printing headers after regex\n$VAR1 = '\"Submitted At\"';\n$VAR2 = 'Do you have any images to upload';\n$VAR3 = 'What would you like to say about this image? ';\n$VAR4 = 'PDFs';\n$VAR5 = 'Total Amount';\n$VAR6 = 'Customer ID';\n$VAR7 = 'IP Address';\n$VAR8 = 'ID';\n$VAR9 = 'UTM Source';\n$VAR10 = 'UTM Medium';\n$VAR11 = 'UTM Campaign';\n$VAR12 = 'UTM Term';\n$VAR13 = 'UTM Content';\n$VAR14 = 'Device Type';\n\nFinished!\n</code></pre>\n\n<p>You'll notice that the first header line still has the quotes around it. Yet running the same script on another computer running 5.26 the quotes are removed. WHY?</p>\n\n<p>I can fix this by changing the regex to </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ($element =~ /\"(.*)\"$/) {\n$element = $1;\n}\n</code></pre>\n\n<p>Dropping the start of string match. This doesn't really matter I can get this working other ways. (Also I know I should be using string replace not an if). But I can't sleep at night not knowing what is going on here? </p>\n\n<p><strong>EDIT:</strong> \n<strong>Shawn</strong> has found the problem. I'm not handling the byte order mark at the start of the file. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cat test.csv | xxd\n00000000: efbb bf22 5375 626d 6974 7465 6420 4174  ...\"Submitted At\n00000010: 222c 2244 6f20 796f 7520 6861 7665 2061  \",\"Do you have a\n00000020: 6e79 2069 6d61 6765 7320 746f 2075 706c  ny images to upl\n</code></pre>\n\n<p>Shows the UTF-8 \"EF BB BF\". </p>\n\n<p>When using :</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use open ':std', ':encoding(UTF-8)';\n</code></pre>\n\n<p>as suggested by <strong>ikegami</strong>. The output changes to show this extra part of the string</p>\n\n<pre><code>$VAR1 = \"\\x{feff}\\\"Submitted At\\\"\";\n</code></pre>\n"}, {"tags": ["bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1564587888, "post_id": 57293600, "comment_id": 101083381, "body": "I would write <code>!&#47;^\\s*$&#47;</code> as <code>&#47;\\S&#47;</code>. Inverting the logic makes it simpler (&quot;the line contains at least one non-whitespace character&quot;)."}], "tags": [], "owner": {"reputation": 3268, "user_id": 9563318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MnYi1.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/9563318/jon"}, "is_accepted": true, "score": 3, "last_activity_date": 1564585084, "last_edit_date": 1564585084, "creation_date": 1564584734, "answer_id": 57293600, "question_id": 57293118, "link": "https://stackoverflow.com/questions/57293118/match-lines-that-doesnt-contains-specific-pattern-and-append-string-in-the-end/57293600#57293600", "title": "Match lines that doesn&#39;t contains specific pattern and append string in the end - Bash", "body": "<p>I think what you meant was something like this, using a negative lookbehind assertion:</p>\n\n<pre><code>perl -pe 's/(?&lt;!\\&gt;)$/&lt;br\\/&gt;/' temp.html &gt; output.html\n</code></pre>\n\n<p>Note that I've removed the <code>\\s*</code> - that's because the Perl regular expression engine doesn't support variable-length lookbehind. I'd also note this has problems with empty lines on my system.</p>\n\n<p>How about using something simple using <code>if</code> instead?</p>\n\n<pre><code>perl -pe 's/$/&lt;br\\/&gt;/ if !/\\&gt;\\s*$/ &amp;&amp; !/^\\s*$/' temp.html &gt; output.html\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 8563184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdc003869bb896130f6ce1c1f0bd859a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8563184/john"}, "edited": false, "score": 0, "creation_date": 1564585307, "post_id": 57293603, "comment_id": 101081905, "body": "This works but it also replaces the empty lines with <code>&lt;br&#47;&gt;</code>."}, {"owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "reply_to_user": {"reputation": 73, "user_id": 8563184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdc003869bb896130f6ce1c1f0bd859a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8563184/john"}, "edited": false, "score": 1, "creation_date": 1564586358, "post_id": 57293603, "comment_id": 101082521, "body": "It does not process empty lines but lines containing spaces. This is a quick change to the <code>sed</code> code then <code>s#[^&gt;[:space:]]$#&lt;br&#47;&gt;#g</code>"}], "tags": [], "owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "is_accepted": false, "score": 1, "last_activity_date": 1564586439, "last_edit_date": 1564586439, "creation_date": 1564584740, "answer_id": 57293603, "question_id": 57293118, "link": "https://stackoverflow.com/questions/57293118/match-lines-that-doesnt-contains-specific-pattern-and-append-string-in-the-end/57293603#57293603", "title": "Match lines that doesn&#39;t contains specific pattern and append string in the end - Bash", "body": "<pre><code>sed 's#[^&gt;[:space:]]$#&lt;br/&gt;#g' temp.html &gt;output.html\n</code></pre>\n\n<ul>\n<li><code>s</code>: Is <code>sed</code> search and replace command.</li>\n<li><code>#</code>: Is the <code>sed</code> command parameters separator.</li>\n<li><code>[^&gt;[:space:]]$</code>: Is search pattern for no <code>&gt;</code> or <code>[:space:]</code> character at <code>$</code> end of line.</li>\n<li><code>&lt;br/&gt;</code>: Is the replacement for the pattern.</li>\n<li><code>g</code>: Tells <code>sed</code> to apply the search-replace everywhere in the file.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 8563184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdc003869bb896130f6ce1c1f0bd859a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8563184/john"}, "edited": false, "score": 0, "creation_date": 1564586058, "post_id": 57293619, "comment_id": 101082356, "body": "Thank you for your answer, but unfortunately when I apply your code, I don&#39;t see any changes. The output file is same with missing <code>&lt;br\\&gt;</code>."}, {"owner": {"reputation": 53, "user_id": 3559631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d18dc129a66922688671a153cbac96a5?s=128&d=identicon&r=PG&f=1", "display_name": "user3559631", "link": "https://stackoverflow.com/users/3559631/user3559631"}, "reply_to_user": {"reputation": 73, "user_id": 8563184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdc003869bb896130f6ce1c1f0bd859a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8563184/john"}, "edited": false, "score": 0, "creation_date": 1564586392, "post_id": 57293619, "comment_id": 101082539, "body": "Interesting, might be different sed versions. I used <code>sed (GNU sed) 4.2.2</code>"}], "tags": [], "owner": {"reputation": 53, "user_id": 3559631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d18dc129a66922688671a153cbac96a5?s=128&d=identicon&r=PG&f=1", "display_name": "user3559631", "link": "https://stackoverflow.com/users/3559631/user3559631"}, "is_accepted": false, "score": 0, "last_activity_date": 1564584790, "creation_date": 1564584790, "answer_id": 57293619, "question_id": 57293118, "link": "https://stackoverflow.com/questions/57293118/match-lines-that-doesnt-contains-specific-pattern-and-append-string-in-the-end/57293619#57293619", "title": "Match lines that doesn&#39;t contains specific pattern and append string in the end - Bash", "body": "<p>I would recommend using sed for this.\nThe following command will extract the <code>&lt;br\\&gt;</code> as the first argument, then the rest of the line as the second argument, then swap their places.</p>\n\n<pre><code>sed -i -Ee 's/(&lt;br\\/&gt;)(.*)/\\2\\1/g' $file\n</code></pre>\n\n<p>Using <code>-i</code> the input is also the output.</p>\n"}], "owner": {"reputation": 73, "user_id": 8563184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdc003869bb896130f6ce1c1f0bd859a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8563184/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57293600, "answer_count": 3, "score": 0, "last_activity_date": 1564591128, "creation_date": 1564583235, "question_id": 57293118, "link": "https://stackoverflow.com/questions/57293118/match-lines-that-doesnt-contains-specific-pattern-and-append-string-in-the-end", "title": "Match lines that doesn&#39;t contains specific pattern and append string in the end - Bash", "body": "<p>I am trying to search a file and append a specific string on the end of every line that doesn't match the specific pattern.</p>\n\n<p>Here is a part of the file:</p>\n\n<pre><code>&lt;h3&gt;Release: &lt;/h3&gt;\n\n** Commit to create release \n** Add firmware \n\n&lt;h4&gt;Application changes: &lt;/h4&gt;\n\n** Add testfunction &lt;br/&gt;\n** Add update support to application&lt;br/&gt;\n</code></pre>\n\n<p>I want to append <code>&lt;br/&gt;</code> in the end of every line where it's missing (if it's not a header, so basically any line that doesn't end with >).</p>\n\n<p>I tried matching all the lines that doesn't ends with <code>&gt; and empty space after that</code> using <code>^(?!.*&gt;\\s*)</code> in Perl:</p>\n\n<pre><code>perl -pe 's/^(?!.*&gt;\\s*)/$&amp;&lt;br\\/&gt;/' temp.html &gt; output.html\n</code></pre>\n\n<p>It can find the line, but unfortunately it appends to the beginning of the line even though I appended after the matched line: <code>$&amp;&lt;br\\/&gt;</code>. I want to append <code>&lt;br/&gt;</code> in the end.</p>\n\n<p>My code output:</p>\n\n<pre><code>&lt;h3&gt;Release: &lt;/h3&gt;\n\n&lt;br/&gt;** Commit to create release \n&lt;br/&gt;** Add firmware \n\n&lt;h4&gt;Application changes: &lt;/h4&gt;\n\n** Add testfunction &lt;br/&gt;\n** Add update support to application&lt;br/&gt;\n</code></pre>\n\n<p>My desired output:</p>\n\n<pre><code>&lt;h3&gt;Release: &lt;/h3&gt;\n\n** Commit to create release &lt;br/&gt;\n** Add firmware &lt;br/&gt;\n\n&lt;h4&gt;Application changes: &lt;/h4&gt;\n\n** Add testfunction &lt;br/&gt;\n** Add update support to application&lt;br/&gt;\n</code></pre>\n\n<p>Can anyone please tell me what I am doing wrong?</p>\n"}, {"tags": ["perl", "csh"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564576175, "post_id": 57290629, "comment_id": 101075967, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16618071/can-i-export-a-variable-to-the-environment-from-a-bash-script-without-sourcing-i\">Can I export a variable to the environment from a bash script without sourcing it?</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564576437, "post_id": 57290629, "comment_id": 101076115, "body": "See also <a href=\"https://stackoverflow.com/q/19192682/2173773\">Setting an environment variable through a Perl script</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1564576206, "creation_date": 1564576206, "answer_id": 57290778, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu/57290778#57290778", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p>You can't access environment variables in a process that have been set by a child process. It's a fundamental property of how processes work.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1564577924, "last_edit_date": 1592644375, "creation_date": 1564576562, "answer_id": 57290893, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu/57290893#57290893", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p><a href=\"https://perldoc.pl/perlfaq8#I-%7Bchanged-directory,-modified-my-environment%7D-in-a-perl-script.-How-come-the-change-disappeared-when-I-exited-the-script?-How-do-I-get-my-changes-to-be-visible?\" rel=\"nofollow noreferrer\"><code>perldoc -q environment</code></a>:</p>\n<blockquote>\n<h3>I {changed directory, modified my environment} in a perl script. How come the change disappeared when I exited the script? How do I get my changes to be visible?</h3>\n<p><strong>Unix</strong></p>\n<p>In the strictest sense, it can't be done--the script executes as a different process from the shell it was started from. Changes to a process are not reflected in its parent--only in any children created after the change. There is shell magic that may allow you to fake it by <code>eval()</code>ing the script's output in your shell; check out the comp.unix.questions FAQ for details.</p>\n</blockquote>\n<p>In your code the problem appears twice:</p>\n<ol>\n<li><p><code>system</code> spawns <code>tcsh</code>, which runs a script that sets environment variables. These environment variables only exist within the <code>tcsh</code> process. When <code>system</code> returns (i.e. when <code>tcsh</code> exits), the environment of the child process is gone.</p>\n</li>\n<li><p>Even if you managed to modify the environment of the perl script (which you can do by assigning to <a href=\"https://perldoc.pl/perlvar#%25ENV\" rel=\"nofollow noreferrer\"><code>%ENV</code></a>), that wouldn't affect the parent shell that <code>perl</code> was started from.</p>\n</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6739416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/191510ed6ed4b5416fa844c9427eaf15?s=128&d=identicon&r=PG&f=1", "display_name": "user226751", "link": "https://stackoverflow.com/users/6739416/user226751"}, "edited": false, "score": 0, "creation_date": 1564634931, "post_id": 57291379, "comment_id": 101097173, "body": "[ssudi@polhyadcvnc ~/COMMON_SCRIPTS_SAM]$ ./main.pl -veloce_env_setup Can&#39;t locate Env/Modify.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at ./main.pl line 4. BEGIN failed--compilation aborted at ./main.pl line 4."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1564578126, "creation_date": 1564578126, "answer_id": 57291379, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu/57291379#57291379", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p>This can now be done with <a href=\"http://metacpan.org/pod/Env::Modify\" rel=\"nofollow noreferrer\"><code>Env::Modify</code></a>.</p>\n\n<pre><code>use Env::Modify qw(:tcsh source);\n\nsub veloce_env_setup_sub {\n    printf \"\\n\\n\\t -veloce_env_setup  option enabled\\n\";\n    source(\"/proj/I2BZA1/users/ssudi/SCRIPTS/veloce_env/vlab_4p4p0/veloce_setup.csh\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1598195541, "last_edit_date": 1598195541, "creation_date": 1564578563, "answer_id": 57291540, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu/57291540#57291540", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p>The environment of a child process doesn't affect the environment of the parent process. That is, a process that you start doesn't change the environment of the thing that started it.</p>\n<p>If you want to set up the environment for a Perl script, you have some options. Which one works best for you depends on what you are trying to do.</p>\n<ol>\n<li><p>Set up the options inside Perl. Instead of using a shell program, do it all in Perl by setting values in the <code>%ENV</code> hash. This works well if you just need it for that program. It's likely that whatever you are doing in tcsh you can do it Perl.</p>\n</li>\n<li><p>Instead of calling the shell script from Perl, call your Perl program from the shell script. Now the shell script is the parent process and the child process (the Perl program) inherits the parent's environment.</p>\n</li>\n</ol>\n<pre><code>#!tcsh\nsetenv SOME_VALUE foo\nperl my_program\n</code></pre>\n<ol start=\"3\">\n<li>In a child process, you could print the environment and read that from the parent process. You'd parse it and convert it appropriately. This is what the <a href=\"https://metacpan.org/pod/Env::Modify\" rel=\"nofollow noreferrer\">Env::Modify</a> module does, but I wouldn't want that as my first option.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11923646, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/edf1fffeaae65d0b97531b61872d34d3?s=128&d=identicon&r=PG", "display_name": "It&#39;s like a HappyMeal...", "link": "https://stackoverflow.com/users/11923646/its-like-a-happymeal"}, "is_accepted": false, "score": 0, "last_activity_date": 1565716110, "creation_date": 1565716110, "answer_id": 57482392, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu/57482392#57482392", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p>You can set %ENV{'your_choice'} = 'as you like'; inside Perl.</p>\n\n<p>Sure, it looks like a little bit hartverdrahtet (yt), but it works great again. So the environmental is mental just inner the mind of top instanced script and closed and removed on closing it. </p>\n\n<p>Another way is calling system(\"set VARIABLE=VALUE\");\nHere the variable lefts after closing until next reboot.</p>\n"}], "owner": {"reputation": 21, "user_id": 6739416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/191510ed6ed4b5416fa844c9427eaf15?s=128&d=identicon&r=PG&f=1", "display_name": "user226751", "link": "https://stackoverflow.com/users/6739416/user226751"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1598195541, "creation_date": 1564575665, "last_edit_date": 1564576579, "question_id": 57290629, "link": "https://stackoverflow.com/questions/57290629/how-to-set-env-variables-which-are-in-csh-script-from-the-perl-script-for-the-cu", "title": "how to set env variables which are in csh script from the perl script for the current terminal?", "body": "<p>I am setting env variables using <code>*.csh</code> file to current terminal. When I use <code>system(\"/bin/tcsh *.csh\")</code> in the perl script, the <code>*csh</code> file executing but not setting any env variables to current terminal.</p>\n\n<p>When I use <code>system(\"/bin/tcsh *.csh\")</code> in the perl script, the <code>*csh</code> file executing but not setting any env variables to current terminal.</p>\n\n<pre><code>sub veloce_env_setup_sub {\n    printf \"\\n\\n\\t -veloce_env_setup  option enabled\\n\";\n    system(\"/bin/tcsh /proj/I2BZA1/users/ssudi/SCRIPTS/veloce_env/vlab_4p4p0/veloce_setup.csh\");\n}\n</code></pre>\n\n<ul>\n<li><p>Expected:  env variables should set to current terminal after sourcing <code>*.csh</code> file. </p></li>\n<li><p>Actual results:   only prints are comming but not setting env variables to current terminal.</p></li>\n</ul>\n"}, {"tags": ["perl", "win32ole"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1564575509, "post_id": 57290535, "comment_id": 101075587, "body": "What happens if you add <code>use strict</code>? Also, check the cell in the problematic file, it probably doesn&#39;t exist or is empty."}, {"owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564575990, "post_id": 57290535, "comment_id": 101075854, "body": "@choroba: Then the script exits immediately.I dont know which of these thousands of excel files is the problematic one. How can I find out which one it is? I think the cause for the script to crash is more like a performance issue or an overflow at some point."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1564576842, "post_id": 57290535, "comment_id": 101076347, "body": "It doesn&#39;t just &quot;exit immediately&quot;, it complains about undeclared variables: <code>Global symbol &quot;$auswertung&quot; requires explicit package name (did you forget to declare &quot;my $auswertung&quot;?) at try.pl line 114.</code>, etc. Why are you using <code>local</code> at all?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564576844, "post_id": 57290535, "comment_id": 101076348, "body": "Does it exit immediately without any error messages? What&#39;s the exit status? If you want to know what file is being processed, just <code>print</code> its name to STDOUT or STDERR."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564576968, "post_id": 57290535, "comment_id": 101076422, "body": "What exactly do you mean by &quot;crash&quot;? What are the symptoms? (Also, &quot;optimizing&quot; won&#39;t fix a crash.)"}, {"owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564577852, "post_id": 57290535, "comment_id": 101076992, "body": "@melpomene and choroba: I am on Windows 7, maybe that is why it exits without showing anything. It just closes perl.exe after executing the script. Well, the script just exits at excel file 403 out of 2000. I changed local to my and ran the script again, exits at the same point again. By crash I mean the perl.exe console window closes/exits. The file is no different from all others. How can I find out the exit status?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564578020, "post_id": 57290535, "comment_id": 101077090, "body": "I&#39;m also on Windows 7. Why don&#39;t you run <code>cmd</code> and start the script from an existing console window? That way it doesn&#39;t close when the script exits."}, {"owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564578154, "post_id": 57290535, "comment_id": 101077186, "body": "@melpomene: I start the script with auswertungLieferscheine.cmd. With the following command in it: start /min perl auswertungLieferscheine.pl &gt;&gt; perl.log 2&gt;&amp;1 &amp; When the script &quot;exits&quot;, the log file is empty."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564578534, "post_id": 57290535, "comment_id": 101077404, "body": "Yeah, that doesn&#39;t work. As far as I can tell, that redirects the output of <code>start</code> to <code>perl.log</code>, but the perl script itself runs in a new window and that&#39;s where its output goes. Try removing the <code>start &#47;min</code> part so we have a change of figuring out what&#39;s going on."}, {"owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564580465, "post_id": 57290535, "comment_id": 101078626, "body": "@melpomene: The script exits because of this error: &quot;Can&#39;t use an undefined value as a HASH reference at auswertungLieferscheine.pl line 115. Line 115 is this: $grund = $sheet-&gt;Range(&quot;G&quot; . $zeile + 2)-&gt;{Value}; BUT why does the script ignore that error for 402 lines and suddenly it doesn&#39;t accept it? I removed files 403 and 404 for testing. But the next excel file 405 gets the same error and provokes a script exit."}], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "edited": false, "score": 0, "creation_date": 1564581868, "post_id": 57292343, "comment_id": 101079617, "body": "Thank you, the script now properly runs till the end. It takes 10 minutes though. Is there a way to optimize this. What could I change in my code to make it go faster?"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1564580870, "creation_date": 1564580870, "answer_id": 57292343, "question_id": 57290535, "link": "https://stackoverflow.com/questions/57290535/perl-extracting-multiple-values-out-of-thousands-of-excel-files-and-write-each-d/57292343#57292343", "title": "Perl extracting multiple values out of thousands of Excel Files and write each dataset into txt file", "body": "<p>Here's a possible bug:</p>\n\n<pre><code>$grund = $sheet-&gt;Range(\"G\" . $zeile + 2)-&gt;{Value};\n</code></pre>\n\n<p>makes no sense. The <code>.</code> and <code>+</code> operators have the same precedence (and are left associative), so <code>\"G\" . $zeile + 2</code> parses as <code>(\"G\" . $zeile) + 2</code>. <code>\"G...\"</code> converted to a number is <code>0</code> (and produces a warning), so this effectively calls <code>$sheet-&gt;Range(2)</code>.</p>\n\n<p>You probably want</p>\n\n<pre><code>$grund = $sheet-&gt;Range(\"G\" . ($zeile + 2))-&gt;{Value};\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 540, "user_id": 9930637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06f30fffb3565e516ce7e3bceac161a?s=128&d=identicon&r=PG&f=1", "display_name": "timunix", "link": "https://stackoverflow.com/users/9930637/timunix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57292343, "answer_count": 1, "score": 0, "last_activity_date": 1564580870, "creation_date": 1564575299, "question_id": 57290535, "link": "https://stackoverflow.com/questions/57290535/perl-extracting-multiple-values-out-of-thousands-of-excel-files-and-write-each-d", "title": "Perl extracting multiple values out of thousands of Excel Files and write each dataset into txt file", "body": "<p>I am using <strong>Perl 5.24.3</strong> on <strong>Windows 7</strong> with <strong>Strawberry Perl</strong>.\nI am currently writing a script that searches thousands of Excel files for certain values in the same folder. These values are extracted/read from each Excel file and saved in their corresponding variables.\nAfter that, I want to write the variable values into a .txt file.</p>\n\n<p>My problem is that the perl script crashes at Excel file 400ish.\nI cannot run it when using <strong>use strict</strong> but it will run if I leave it out.\nUnfortunately not till the end. How can I optimize my script so it won't crash?\nHow do I need to change my code so that I can run the script WITH <strong>use strict</strong>?</p>\n\n<p><strong>use diagnostics</strong> returns the following:</p>\n\n<pre><code>Use of uninitialized value in string eq at auswertungLieferscheine.pl line 112(#1), line 117, 122, 127, ...\n</code></pre>\n\n<p><em>Here is the code:</em></p>\n\n<pre><code>#use strict;\n#use warnings \"all\";\nuse Cwd 'abs_path';\nuse Win32::OLE;\n#use diagnostics;\n\nlager();\n\nsub lager\n{\n    my @xlsm;\n    my $strGebLS = \"Z:\\\\User\\\\Projekte\\\\Fertigung\\\\Lieferscheintool\\\\lieferschein_lager\\\\bearbeitete Lieferscheine\\\\gebuchte Lieferscheine\\\\\";\n    chdir $strGebLS;\n\n    opendir(DIR, $strGebLS) or die $!;\n\n    while(my $lieferschein = readdir(DIR))\n    {   \n        next if ($lieferschein !~ m/2018\\.xlsm$/);\n        push(@xlsm, $lieferschein);\n    }\n    closedir(DIR);\n\n    my $excel = Win32::OLE-&gt;new('Excel.Application', 'Quit') or die $!;\n    $excel-&gt;{'DisplayAlerts'} = 0;\n    $excel-&gt;{'Visible'} = 0;\n\n    foreach my $lsDatei(@xlsm)\n    {   \n    my $absPfad = abs_path(\"$lsDatei\") or die \"Fehler: Die Datei $lsDatei wurde nicht gefunden\\n\";\n        my $arbeitsmappe = $excel-&gt;Workbooks-&gt;Open($absPfad, {\n            'ReadOnly' =&gt; 1,\n            'IgnoreReadOnlyRecommended' =&gt; 1\n          });\n        my $sheet = $arbeitsmappe-&gt;Worksheets(\"LieferscheinBauleitung\");\n\n        # THESE VALUES ARE ALWAYS IN THE SAME CELL OR PREDEFINED IF CELLS EMPTY!\n        my $lagerort = \"Lager\";\n        my $lsNr = $sheet-&gt;Range(\"C5\")-&gt;{Value};\n        my $status = \"gebucht\";\n        my $bv = $sheet-&gt;Range(\"C7\")-&gt;{Value};\n        my $hv = $sheet-&gt;Range(\"G7\")-&gt;{Value};\n        my $grund = \"Kein Anforderungsgrund\";\n        my $besteller = \"Kein Besteller\";\n        my $abholer = \"Kein Abholer\";\n        my $bezeichnung =\"Keine Bezeichnung\";\n        my $menge = \"0\";\n        my $einzelpreis = \"0.0\";\n        my $summe = \"0.0\";\n\n        #THESE VALUES ARE IN DIFFERENT CELLS \n#BUT ALWAYS IN 1 out of 2 POSSIBLE COLUMNS! \n#THAT IS WHY I AM USING A FOR LOOP HERE... \n#THE IF LINES RETURN UNDECLARED WARNINGS FOR VARIABLES AND I DONT KNOW WHY! WHY?! #$sheet and $zeile are both defined, aren't they?!\n        for (my $zeile=4; $zeile&lt;=25;$zeile++)\n        {           \n            if($sheet-&gt;Range(\"G\" . $zeile)-&gt;{Value} eq \"Grund\")\n            {\n                $grund = $sheet-&gt;Range(\"G\" . $zeile + 2)-&gt;{Value};\n            }\n\n            if($sheet-&gt;Range(\"A\" . $zeile)-&gt;{Value} eq \"Anforderungsgrund\")\n            {\n                $grund = $sheet-&gt;Range(\"C\" . $zeile)-&gt;{Value};\n            }\n\n            if($sheet-&gt;Range(\"A\" . $zeile)-&gt;{Value} eq \"Besteller\")\n            {\n                $besteller = $sheet-&gt;Range(\"C\" . $zeile)-&gt;{Value};  \n            }\n\n            if($sheet-&gt;Range(\"A\" . $zeile)-&gt;{Value} eq \"Abholer\")\n            {\n                $abholer = $sheet-&gt;Range(\"C\" . $zeile)-&gt;{Value};\n            }   \n\n            if($sheet-&gt;Range(\"B\" . $zeile)-&gt;{Value} eq \"Bezeichnung\")\n            {\n                $bezeichnung = $sheet-&gt;Range(\"B\" . ($zeile + 2))-&gt;{Value};\n            }\n            if($sheet-&gt;Range(\"A\" . $zeile)-&gt;{Value} eq \"Menge\")\n            {\n                $menge = $sheet-&gt;Range(\"A\" . ($zeile + 2))-&gt;{Value};\n            }\n            if($sheet-&gt;Range(\"H\" . $zeile)-&gt;{Value} eq \"Einzelpreis\")\n            {\n                $einzelpreis = $sheet-&gt;Range(\"H\" . ($zeile + 2))-&gt;{Value};\n            }\n            if($sheet-&gt;Range(\"I\" . $zeile)-&gt;{Value} eq \"Summe\")\n            {\n                $summe = $sheet-&gt;Range(\"I\" . ($zeile + 2))-&gt;{Value};\n            }       \n        }   \n        $arbeitsmappe-&gt;Close();\n        $excel-&gt;Quit();\n\n        if($besteller eq \"\") \n        {\n            $besteller = \"Kein Besteller\";\n        }\n        if($abholer eq \"\")\n        {\n            $abholer = \"Kein Abholer\";\n        }\n        if($grund eq \"\")\n        {\n            $grund = \"Kein Anforderungsgrund\";\n        }\n\n        # WRITE VALUES IN VARIABLES INTO TXT-FILE\n\n        if(substr($lsDatei, -9, 4) eq \"2018\")\n        {       \n            local $auswertung = \"auswertungLieferscheine_2018.txt\";     \n            local $auswertungPfad = \"Z:\\\\User\\\\Projekte\\\\Fertigung\\\\Lieferscheintool\\\\lieferschein_auswertung\\\\$auswertung\";\n            local $data = $lagerort . \"\\t\" . $lsNr . \"\\t\" . $status . \"\\t\" . $bv . \"\\t\" . $hv . \"\\t\" . $grund . \"\\t\" . $besteller . \"\\t\" . $abholer . \"\\t\" . $bezeichnung . \"\\t\" . $menge . \"\\t\" . $einzelpreis . \"\\t\" . $summe . \"\\n\";\n            open(my $fh, '&gt;&gt;', $auswertungPfad) or die $!;\n\n            # PRINT DATASET INTO TXT FILE               \n            print $fh $data;\n            close $fh;\n        }\n    }   \n}\n</code></pre>\n\n<p>The warnings occur in the for-loop where it says if($sheet....eq \"something\"). Alle if lines are concerned. Any solutions?</p>\n"}, {"tags": ["perl", "hashref"], "comments": [{"owner": {"reputation": 777, "user_id": 1647851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/74ffda3cffeea6ebd537a828b0d905e4?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/1647851/null"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1574295198, "post_id": 57290219, "comment_id": 104185653, "body": "Apparently I asked the same question 7 years ago - here <a href=\"https://stackoverflow.com/questions/13657103\">stackoverflow.com/questions/13657103</a>"}], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 1647851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/74ffda3cffeea6ebd537a828b0d905e4?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/1647851/null"}, "edited": false, "score": 0, "creation_date": 1564575170, "post_id": 57290328, "comment_id": 101075419, "body": "perfect. Accepted."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 4, "last_activity_date": 1564574605, "creation_date": 1564574605, "answer_id": 57290328, "question_id": 57290219, "link": "https://stackoverflow.com/questions/57290219/how-to-extract-multiple-values-from-a-perl-hashref/57290328#57290328", "title": "How to extract multiple values from a perl hashref?", "body": "<p>You need this</p>\n\n<pre><code>my ($arg1,$arg2,$arg3) = @{$hashref}{qw(arg1 arg2 arg3)};\n</code></pre>\n\n<p>Which is a hash slice against a hash ref</p>\n"}], "owner": {"reputation": 777, "user_id": 1647851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/74ffda3cffeea6ebd537a828b0d905e4?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/1647851/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "closed_date": 1574295254, "accepted_answer_id": 57290328, "answer_count": 1, "score": 1, "last_activity_date": 1619228874, "creation_date": 1564574241, "last_edit_date": 1619228874, "question_id": 57290219, "link": "https://stackoverflow.com/questions/57290219/how-to-extract-multiple-values-from-a-perl-hashref", "closed_reason": "Duplicate", "title": "How to extract multiple values from a perl hashref?", "body": "<p>How can I unpack a Perl hashref into multiple named scalar variables?</p>\n<p>I've seen it done but can't seem to make it work.</p>\n<p>Assuming the <code>$hashref</code> as given, and the definition of <code>$arg1</code> to <code>$arg3</code>, here's my attempt:</p>\n<pre><code>my $hashref = { arg1 =&gt; 'val1', arg2 =&gt; 'val2', arg3 =&gt; 'val3',};\nmy ($arg1,$arg2,$arg3) = @{%$hashref}[qw(arg1 arg2 arg3)]; \n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1564573062, "post_id": 57289859, "comment_id": 101074255, "body": "You are replacing, not extracting. <code>.*</code> matches the rest of the line and all text matched is removed from the result."}, {"owner": {"reputation": 331, "user_id": 6159404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0004831e8d6bf9bd122ac034ddfef595?s=128&d=identicon&r=PG&f=1", "display_name": "Kosem", "link": "https://stackoverflow.com/users/6159404/kosem"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1564577184, "post_id": 57289859, "comment_id": 101076576, "body": "@WiktorStribi\u017cew And yet, your answer didn&#39;t quite explain why the (.*) matter in case of grouping. Would be happy to get an answer which explains both cases i showed. thank you."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1564577261, "post_id": 57289859, "comment_id": 101076620, "body": "Your second code is just removing the spaces after the first chunk of 1+ non-whitespace chars. 1) <a href=\"https://regex101.com/r/hXNgAT/1\" rel=\"nofollow noreferrer\">regex101.com/r/hXNgAT/1</a> 2) <a href=\"https://regex101.com/r/hXNgAT/2\" rel=\"nofollow noreferrer\">regex101.com/r/hXNgAT/2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1564577505, "creation_date": 1564577505, "answer_id": 57291175, "question_id": 57289859, "link": "https://stackoverflow.com/questions/57289859/perl-regex-grouping-result-adding-extra-characters-even-thou-not-in-correct-grou/57291175#57291175", "title": "Perl regex grouping result adding extra characters even thou not in correct group", "body": "<p><code>s/PATTERN/REPLACEMENT/</code> is the substitution operator. It searches for a substring that matches the regex <em>PATTERN</em> and replaces it by <em>REPLACEMENT</em>.</p>\n\n<p>In <code>\"Text1    Text2   Text3   0\"</code> the regex <code>(\\S+)(\\s+)(.*)</code> matches as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Text1    Text2   Text3   0\n^^^^^\n \\S+ ^^^^\n     \\s+ ^^^^^^^^^^^^^^^^^\n                .*\n</code></pre>\n\n<p><code>\\S+</code> matches the first run of non-whitespace characters (so <code>$1 = 'Text1'</code>), <code>\\s+</code> matches the following spaces (so <code>$2 = '    '</code>), and <code>.*</code> matches the rest of the line (so <code>$3 = 'Text2   Text3   0'</code>).</p>\n\n<p>The matched substring (which is the whole string; the regex matches everything) is then replaced by <code>$1</code>, which is <code>Text1</code>.</p>\n\n<p>Your second regex, <code>(\\S+)(\\s+)</code>, matches as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Text1    Text2   Text3   0\n^^^^^\n \\S+ ^^^^\n     \\s+\n</code></pre>\n\n<p><code>\\S+</code> matches the first run of non-whitespace characters (so <code>$1 = 'Text1'</code>) and <code>\\s+</code> matches the following spaces (so <code>$2 = '    '</code>).</p>\n\n<p>This time the matched substring is just <code>'Text1    '</code>, not the whole string, so replacing it by <code>$1</code> has the effect of removing the spaces in <code>$2</code>.</p>\n\n<p>The part of the string that was not matched by the pattern (<code>'Text2   Text3   0'</code>) stays the same, leaving</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Text1Text2   Text3   0\n</code></pre>\n\n<p>as the result of the substitution.</p>\n\n<hr>\n\n<p>All the grouping and <code>$1</code> stuff is a bit of a red herring.</p>\n\n<p>Compare</p>\n\n<pre><code>my $s = 'abcdef';\n$s =~ s/c/X/;\nprint $s, \"\\n\";  # abXdef\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my $s = 'abcdef';\n$s =~ s/c.*/X/;\nprint $s, \"\\n\";  # abX\n</code></pre>\n\n<p>In the second example, <code>c.*</code> matches the whole rest of the string after finding <code>c</code> (in this example: <code>cdef</code>), so that's what gets replaced by <code>X</code>.</p>\n"}], "owner": {"reputation": 331, "user_id": 6159404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0004831e8d6bf9bd122ac034ddfef595?s=128&d=identicon&r=PG&f=1", "display_name": "Kosem", "link": "https://stackoverflow.com/users/6159404/kosem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 57291175, "answer_count": 1, "score": 0, "last_activity_date": 1564577505, "creation_date": 1564572992, "question_id": 57289859, "link": "https://stackoverflow.com/questions/57289859/perl-regex-grouping-result-adding-extra-characters-even-thou-not-in-correct-grou", "title": "Perl regex grouping result adding extra characters even thou not in correct group", "body": "<p>During the learning process of Regex Grouping rules, one thing isn't quite clear to me. I'll show with an example.</p>\n\n<p>When i run the following code:</p>\n\n<pre><code>$s=\"Text1    Text2   Text3   0\";\n$s =~ s/(\\S+)(\\s+)(.*)/$1/;\nprint(\"$s\\n\");\n</code></pre>\n\n<p>The result that i get is: \"Text1\", which is what i wanted to get. I distributed the entire string into 3 groups, and returned the first one.</p>\n\n<p>However, when doing the following:</p>\n\n<pre><code>$s=\"Text1    Text2   Text3   0\";\n$s =~ s/(\\S+)(\\s+)/$1/;\nprint(\"$s\\n\");\n</code></pre>\n\n<p>The text i'm getting back is: \"Text1Text2   Text3   0\"</p>\n\n<p>The difference between the two regex statements is the third group (.*). My question is, why don't we get \"Text1\" for the second statement as well?. After all, if examaning it, and as far as i understand, We group all \"Non Whitespaces\" charecters to first group, and returning it. The second group is where the spaces begin, so first group should contain only \"Text1\". Why do we get \"Text1Text2   Text3   0\" even thou the first group applies only until the \"WhiteSpaces\" (which is where the second group start).</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1564551380, "post_id": 57283483, "comment_id": 101062933, "body": "Show what you tried."}], "answers": [{"tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 0, "last_activity_date": 1564549382, "creation_date": 1564549382, "answer_id": 57283517, "question_id": 57283483, "link": "https://stackoverflow.com/questions/57283483/getting-the-value-on-the-left-hand-side-of-the-equation-using-regex-in-perl/57283517#57283517", "title": "Getting the value on the left hand side of the equation using regex in perl", "body": "<p>One option here would be to do a regex split on the pattern <code>\\s*=\\s*</code>, and then just retain the first portion of that split:</p>\n\n<pre><code>my $input = 'textbig = functionX(parameter1, parameter2);'; \nmy @output = split /\\s*=\\s*/, $input;\nprint $output[0];\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>textbig\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1564550469, "creation_date": 1564550469, "answer_id": 57283709, "question_id": 57283483, "link": "https://stackoverflow.com/questions/57283483/getting-the-value-on-the-left-hand-side-of-the-equation-using-regex-in-perl/57283709#57283709", "title": "Getting the value on the left hand side of the equation using regex in perl", "body": "<pre><code>my ($left_of_first_equal) = $string =~ /^([^=]*)=/;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11004046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3e2e64509560b9d66f5d5cc093d80d?s=128&d=identicon&r=PG&f=1", "display_name": "Fregata", "link": "https://stackoverflow.com/users/11004046/fregata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1564550469, "creation_date": 1564549174, "last_edit_date": 1564549582, "question_id": 57283483, "link": "https://stackoverflow.com/questions/57283483/getting-the-value-on-the-left-hand-side-of-the-equation-using-regex-in-perl", "title": "Getting the value on the left hand side of the equation using regex in perl", "body": "<p>INPUT.txt</p>\n\n<pre><code>textbig  = functionX(parameter1, parameter2);\n\ntextsmall= functionX(parameter3, parameter4);\n</code></pre>\n\n<p>The input file is as shown above. From this file, using Perl and regex, I have to read each line and put the first word that is read into a variable, as shown below:</p>\n\n<pre><code>$variable1 = textbig;\n\n$variable2 = textsmall;\n</code></pre>\n\n<p>I am reading each line, but unable to grab the first word from each line. I tried $1 method but it's not helpful.</p>\n"}, {"tags": ["perl", "descriptor", "flock"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1564532148, "post_id": 57281465, "comment_id": 101059189, "body": "<code>use strict; use warnings;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564536601, "post_id": 57281465, "comment_id": 101059930, "body": "ALWAYS use <code>use strict; use warnings;</code>. It would have found your problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564543276, "post_id": 57281465, "comment_id": 101061033, "body": "You should have gotten <code>Invalid argument</code> instead of <code>Bad file descriptor</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564543344, "post_id": 57281465, "comment_id": 101061049, "body": "Why are you locking a new file? If the file already exists, you are clobbering it before you get a lock, meaning you are clobbering it even if another process has a lock to it. So either you are doing something weird, or something wrong. Most likely the latter."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11861083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0be898af6c7185be4034c198ea8c8c?s=128&d=identicon&r=PG&f=1", "display_name": "doctormelodious", "link": "https://stackoverflow.com/users/11861083/doctormelodious"}, "edited": false, "score": 0, "creation_date": 1564533176, "post_id": 57281586, "comment_id": 101059349, "body": "Thanks for the reply! I had to change that to &quot;use Fcntl qw(:flock);&quot; to get it to work on my machine, but it did the trick."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1564535097, "last_edit_date": 1564535097, "creation_date": 1564532310, "answer_id": 57281586, "question_id": 57281465, "link": "https://stackoverflow.com/questions/57281465/in-perl-script-i-can-open-write-to-and-close-a-file-but-i-get-bad-file-des/57281586#57281586", "title": "In Perl script, I can open / write to/ and close a file, but I get &quot;bad file descriptor&quot; when I try to flock it", "body": "<p>Did you import the constant <code>LOCK_EX</code> per the <a href=\"http://metacpan.org/pod/perlfunc#flock\" rel=\"nofollow noreferrer\"><code>flock</code></a> documentation?</p>\n\n<pre><code>use Fcntl ':flock';\n</code></pre>\n\n<p>If not, <code>LOCK_EX</code> doesn't mean anything and the <code>flock</code> call will fail. Using <code>strict</code> and/or <code>warnings</code> would have identified a problem with this system call.</p>\n"}], "owner": {"reputation": 21, "user_id": 11861083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0be898af6c7185be4034c198ea8c8c?s=128&d=identicon&r=PG&f=1", "display_name": "doctormelodious", "link": "https://stackoverflow.com/users/11861083/doctormelodious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564535097, "creation_date": 1564531075, "question_id": 57281465, "link": "https://stackoverflow.com/questions/57281465/in-perl-script-i-can-open-write-to-and-close-a-file-but-i-get-bad-file-des", "title": "In Perl script, I can open / write to/ and close a file, but I get &quot;bad file descriptor&quot; when I try to flock it", "body": "<p>I can OPEN the file using the file handle, but when I try to FLOCK using the same file handle I get \"bad file descriptor.\"</p>\n\n<pre><code>my $file='/Library/WebServer/Documents/myFile.txt';\nopen(my $fh, '&gt;', $file) or die \"Could not open '$file' - $!\";\n    # I DO NOT GET AN ERROR FROM OPENING THE FILE\n\nflock($fh, LOCK_EX) or die \"Could not lock '$file' - $!\";\n    # HERE IS WHERE I GET THE \"BAD FILE DESCRIPTOR\" ERROR\n    # IF I COMMENT THIS LINE OUT, THE PRINT AND CLOSE COMMANDS BELOW EXECUTE NORMALLY\n\nprint $fh \"hello world\";\nclose($fh) or die \"Could not write '$file' - $!\";\n</code></pre>\n\n<p>It's the same file handle, so why do OPEN and PRINT work, but not FLOCK? I have tried setting the permissions for the file to 646, 666, and 777, but I always get the same results.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "email", "smtp", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1564509210, "post_id": 57276004, "comment_id": 101051596, "body": "Please verify that you have <a href=\"https://metacpan.org/pod/Authen::SASL\" rel=\"nofollow noreferrer\">Authen::SASL</a> installed."}, {"owner": {"reputation": 63, "user_id": 8811993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a611a766fe6c7c15dd438a6e04775933?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Kyle", "link": "https://stackoverflow.com/users/8811993/kiran-kyle"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1564553919, "post_id": 57276004, "comment_id": 101063867, "body": "@SteffenUllrich, yes Authen::SASL is installed and upto date."}], "owner": {"reputation": 63, "user_id": 8811993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a611a766fe6c7c15dd438a6e04775933?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Kyle", "link": "https://stackoverflow.com/users/8811993/kiran-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564503579, "creation_date": 1564503579, "question_id": 57276004, "link": "https://stackoverflow.com/questions/57276004/cant-send-mail-from-ubuntu-14-using-perl-module-emailsendsmtpgmail", "title": "Cant send mail from ubuntu 14 using perl module Email::Send::SMTP::Gmail", "body": "<p>I've multiple ubuntu cloud server and in the event of an error, an email is sent to myself. I use Perl module Email::Send::SMTP::Gmail.</p>\n\n<pre><code>my ($mail, $error) = Email::Send::SMTP::Gmail-&gt;new(\n    -smtp        =&gt; 'smtp.gmail.com',\n    -port        =&gt; 587,\n    -login       =&gt; '...',\n    -pass        =&gt; '...',\n    -debug       =&gt; 1,\n    -verbose     =&gt; 1\n);\n\neval {\n    # send email now\n    $mail-&gt;send(\n        -to          =&gt; '...',\n        -subject     =&gt; 'email test',\n        -body   =&gt; 'email test',\n        -contenttype =&gt; 'text/html'\n    );\n    $mail-&gt;bye;\n};\n</code></pre>\n\n<p>The code works perfectly on all server except one. All are ubuntu 14 servers.</p>\n\n<p>Following are the debug logs on server it succeeds:</p>\n\n<pre><code>Connecting to smtp.gmail.com using tls with AUTO on port 587 and timeout of 60\nNet::SMTP&gt;&gt;&gt; Net::SMTP(3.11)\nNet::SMTP&gt;&gt;&gt;   Net::Cmd(3.11)\nNet::SMTP&gt;&gt;&gt;     Exporter(5.68)\nNet::SMTP&gt;&gt;&gt;   IO::Socket::INET(1.33)\nNet::SMTP&gt;&gt;&gt;     IO::Socket(1.36)\nNet::SMTP&gt;&gt;&gt;       IO::Handle(1.34)\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 220 smtp.gmail.com ESMTP l44sm57914288pje.29 - gsmtp\nNet::SMTP=GLOB(0x10f0fc0)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [.....]\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-STARTTLS\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 250 SMTPUTF8\nNet::SMTP=GLOB(0x10f0fc0)&gt;&gt;&gt; STARTTLS\nNet::SMTP=GLOB(0x10f0fc0)&lt;&lt;&lt; 220 2.0.0 Ready to start TLS\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [.....]\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-AUTH LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250 SMTPUTF8\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; AUTH LOGIN\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 334 VXNlcm5hbWU6\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; (decoded) Username:\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; (decoded) .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 334 .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; (decoded) Password:\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; (decoded) .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 235 2.7.0 Accepted\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; MAIL FROM:&lt;.....&gt;\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250 2.1.0 OK l44sm57914288pje.29 - gsmtp\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; RCPT TO:&lt;.....&gt;\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250 2.1.5 OK l44sm57914288pje.29 - gsmtp\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; DATA\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 354  Go ahead l44sm57914288pje.29 - gsmtp\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; From: .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; To: .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; Reply-To: .....\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; Subject: email test\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; Date: Tue, 30 Jul 2019 15:54:26 +0000\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; MIME-Version: 1.0\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; Content-Type: text/html; charset=UTF-8\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; email test\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; .\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 250 2.0.0 OK  1564502779 l44sm57914288pje.29 - gsmtp\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&gt;&gt;&gt; QUIT\nNet::SMTP::_SSL=GLOB(0x10f0fc0)&lt;&lt;&lt; 221 2.0.0 closing connection l44sm57914288pje.29 - gsmtp\n</code></pre>\n\n<p>And following are the logs from the server where it fails.</p>\n\n<pre><code>Connecting to smtp.gmail.com using tls with AUTO on port 587 and timeout of 60\nNet::SMTP&gt;&gt;&gt; Net::SMTP(3.11)\nNet::SMTP&gt;&gt;&gt;   Net::Cmd(3.11)\nNet::SMTP&gt;&gt;&gt;     Exporter(5.68)\nNet::SMTP&gt;&gt;&gt;   IO::Socket::INET(1.33)\nNet::SMTP&gt;&gt;&gt;     IO::Socket(1.36)\nNet::SMTP&gt;&gt;&gt;       IO::Handle(1.34)\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 220 smtp.gmail.com ESMTP d12sm27628903pfn.11 - gsmtp\nNet::SMTP=GLOB(0x2556268)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [.....]\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-STARTTLS\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 250 SMTPUTF8\nNet::SMTP=GLOB(0x2556268)&gt;&gt;&gt; STARTTLS\nNet::SMTP=GLOB(0x2556268)&lt;&lt;&lt; 220 2.0.0 Ready to start TLS\nNet::SMTP::_SSL=GLOB(0x2556268)&gt;&gt;&gt; EHLO localhost.localdomain\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-smtp.gmail.com at your service, [.....]\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-SIZE 35882577\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-8BITMIME\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-AUTH LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-PIPELINING\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250-CHUNKING\nNet::SMTP::_SSL=GLOB(0x2556268)&lt;&lt;&lt; 250 SMTPUTF8\nAuthentication -using server methods list- (SMTP) failed: smtp.gmail.com at your service, [.....]\nSIZE 35882577\n8BITMIME\nAUTH LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH\nENHANCEDSTATUSCODES\nPIPELINING\nCHUNKING\nSMTPUTF8\nCan't locate object method \"send\"\n</code></pre>\n\n<p>Both are identical servers and run on ubuntu 14. Also, I've enabled google's \"Allow less secured apps\" option. Can anybody suggest what I'm missing? </p>\n"}, {"tags": ["file", "perl", "text"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564503994, "post_id": 57275941, "comment_id": 101050033, "body": "It does some strange things (report failing to open a file but then keeps on going like it succeeded?) and rather old idioms that aren&#39;t recommended (bareword file handles instead of lexical, not using three argument <code>open</code>, no <code>use warnings;</code>, etc... At least it has <code>use strict;</code>) but it looks like the intent is to convert Windows line endings to Unix ones."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11858782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3OQ_542z2fs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refjJmJROKS-pDLmazWLuhNAv9VSw/mo/photo.jpg?sz=128", "display_name": "antonio attadia", "link": "https://stackoverflow.com/users/11858782/antonio-attadia"}, "edited": false, "score": 0, "creation_date": 1564504114, "post_id": 57276034, "comment_id": 101050094, "body": "Thank you! That is exactly what I think (but I don&#39;t know perl so I asked). Now the name of the script is &quot;unixise_dir.pl&quot;,so, I guess is supposed to transform something(linefeed?) from windows to unix format(hence the second part of my question)"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 2, "creation_date": 1564514967, "post_id": 57276034, "comment_id": 101054211, "body": "I&#39;m not convinced I agree with this answer. There&#39;s probably some magic being triggered so that dos-&gt;unix conversion is done while reading the file. For all you know, it only does so when run on a Windows or on a Mac or on some other platform, but nothing on other platforms, which is why it might seem to do nothing. The name of the script strongly suggests this interpretation, and I would assume it worked wherever it was first developed, if nowhere else."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564553674, "post_id": 57276034, "comment_id": 101063756, "body": "On a Windows system, it will convert CRLF line endings to LF"}, {"owner": {"reputation": 3, "user_id": 11858782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3OQ_542z2fs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refjJmJROKS-pDLmazWLuhNAv9VSw/mo/photo.jpg?sz=128", "display_name": "antonio attadia", "link": "https://stackoverflow.com/users/11858782/antonio-attadia"}, "edited": false, "score": 0, "creation_date": 1564562693, "post_id": 57276034, "comment_id": 101068237, "body": "Thanks to everyone. Effectively running the script on Windows using ActivePerl I obtain the desired behavior: the CRLF are converted in LF for all the text files. The same doesn&#39;t happen when executed on Windows BUT using the perl interpreter present in the Git Bash console, where there is no convertion."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1564558003, "last_edit_date": 1564558003, "creation_date": 1564503722, "answer_id": 57276034, "question_id": 57275941, "link": "https://stackoverflow.com/questions/57275941/perl-script-on-text-files/57276034#57276034", "title": "perl script on text-files", "body": "<p>[<strong>Update:</strong> As people have pointed out in the comments, I've missed something important here - when run on Windows, it will convert Windows (CRLF) line-endings to Unix (LF) ones.]</p>\n\n<p>It does nothing useful.</p>\n\n<p>It looks for all of the files it can find under the directories that it is given on the command line. For each file it finds, it works out (or, more accurately, guesses) whether the file is a text file. If the file is a text file, then it reads all of the text from the file into an array called <code>@buf</code> and then overwrites the file with the data in <code>@buf</code>.</p>\n\n<p>So basically it reads the data from every text file it finds and then writes that data back to the original files.</p>\n"}], "owner": {"reputation": 3, "user_id": 11858782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3OQ_542z2fs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refjJmJROKS-pDLmazWLuhNAv9VSw/mo/photo.jpg?sz=128", "display_name": "antonio attadia", "link": "https://stackoverflow.com/users/11858782/antonio-attadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57276034, "answer_count": 1, "score": 0, "last_activity_date": 1564558003, "creation_date": 1564503280, "question_id": 57275941, "link": "https://stackoverflow.com/questions/57275941/perl-script-on-text-files", "title": "perl script on text-files", "body": "<p>I have a PERL script that is supposed to do \"something\" on the text files contained in a folder. From the script name I can guess what is supposed to do, but in my opinion doesn't do anything(I cannot see any change to the texts files when I execute from a git bash shell on windows).</p>\n\n<p>What I would like to know is if is doing in reality something and if the result could be different using another perl interpreter or OS.</p>\n\n<pre><code>#!perl\n\n$|++;\n\nuse strict;\nuse File::Find;\nmy ($cnt, $uxcnt);\n\nprint \"Doing something on files on @ARGV ...\";\n\nfind(\\&amp;wanted, @ARGV);\n\nprint \" done something for ($uxcnt/$cnt) files\\n\";\n\nsub wanted {\n  $cnt++;\n  my $file = $_;\n  if(-T $file) {\n    $uxcnt++;\n    open FILE, $file or warn \"Warning: Couldn't open $file: $!\\n\";\n    my @buf;\n    push @buf, $_ while &lt;FILE&gt;;\n    close FILE;\n    open FILE, \"&gt;$file\" or warn \"Warning: Couldn't open $file: $!\\n\";\n    binmode FILE;\n    print FILE @buf;\n    close FILE;\n  } \n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "interpolation"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564516524, "post_id": 57274313, "comment_id": 101054883, "body": "hmmm, By far and large, it only makes sense to use <code>\\Q\\E</code> when you are interpolating, so saying <code>\\Q\\E</code> doesn&#39;t prevent interpolation doesn&#39;t make much sense."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1564498569, "last_edit_date": 1564498569, "creation_date": 1564498201, "answer_id": 57274478, "question_id": 57274313, "link": "https://stackoverflow.com/questions/57274313/is-there-a-perl-regex-modifier-to-to-literal-matching-always/57274478#57274478", "title": "IS there a perl regex modifier to to literal matching always?", "body": "<p>If you use single quotes with <code>m</code> ie <code>$var =~ m'$test'</code>, then $test is not interpolated, but you still need to use <code>\\Q ... \\E</code> to quote meta characters in the regex. You could use the quotemeta() function, which is what \\Q ... \\E uses under the hood. So</p>\n\n<pre><code>$quoted = quotemeta($test);\n$var =~ $quoted;\n</code></pre>\n\n<p>Note that the section \"Regexp Quote-Like Operators\" in perlop lists all the modifiers.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1564499225, "last_edit_date": 1564499225, "creation_date": 1564498208, "answer_id": 57274484, "question_id": 57274313, "link": "https://stackoverflow.com/questions/57274313/is-there-a-perl-regex-modifier-to-to-literal-matching-always/57274484#57274484", "title": "IS there a perl regex modifier to to literal matching always?", "body": "<p>The easiest way to check whether <code>$var</code> contains <code>'$test'</code> literally is probably</p>\n\n<pre><code>if (index($var, '$test') &gt;= 0)\n</code></pre>\n\n<p>To avoid variable interpolation in a regex match, use <code>'</code> as the delimiter:</p>\n\n<pre><code>if ($var =~ m'$test')\n</code></pre>\n\n<p>However, this will interpret <code>$</code> as a regex metacharacter (end-of-string anchor), so you still need <code>\\$</code> to match a literal dollar sign.</p>\n\n<p>This is documented in <a href=\"https://perldoc.pl/perlop#m/PATTERN/msixpodualngc\" rel=\"nofollow noreferrer\">Regexp Quote-Like Operators in <code>perldoc perlop</code></a>. For regex modifiers, see <a href=\"https://perldoc.pl/perlre#Modifiers\" rel=\"nofollow noreferrer\">Modifiers in <code>perldoc perlre</code></a>. (<code>perldoc</code> is the documentation viewer that comes with perl; the manuals are also available online e.g. at <a href=\"https://perldoc.pl/\" rel=\"nofollow noreferrer\">https://perldoc.pl/</a>.)</p>\n\n<p>If you want to match a piece of text completely literally and you can't use <a href=\"https://perldoc.pl/functions/index\" rel=\"nofollow noreferrer\"><code>index</code></a> for some reason, your best bet is probably:</p>\n\n<pre><code>my $string = '$test';\nif ($var =~ /\\Q$string/)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11858269, "user_type": "registered", "profile_image": "https://graph.facebook.com/2837385706336053/picture?type=large", "display_name": "Milton Earnest Zilmer", "link": "https://stackoverflow.com/users/11858269/milton-earnest-zilmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1564499225, "creation_date": 1564497737, "last_edit_date": 1564498063, "question_id": 57274313, "link": "https://stackoverflow.com/questions/57274313/is-there-a-perl-regex-modifier-to-to-literal-matching-always", "title": "IS there a perl regex modifier to to literal matching always?", "body": "<p>I spent 2 hours today on forums , and reading Larry's Bible (Programming Perl) and I can't find a construct I'd expect to see. </p>\n\n<p>I want to do a literal regex match, but I can't see a way to do it except the clumsy and sometimes ineffective \\Q\\E , which still interpolates vars.</p>\n\n<p>For equality we have</p>\n\n<pre><code>$var eq \"$test\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$var eq '$test'\n</code></pre>\n\n<p>, a simple and effective way to turn off interpolation (the only zinger is \"'\" itself of course..)</p>\n\n<p>But what if I want to see if '$test' is contained in $var?  Is there a regex equivalent for this, like say a \"q\" switch:</p>\n\n<pre><code>$var =~/$test/ # interpolate\n\n$var =~ /$test/q # don't interpolate anything, match literally\n</code></pre>\n\n<p>I thought maybe m/$test/ might work but no joy. Even \\Q\\E doesn't work. </p>\n\n<p>In a related note, it's surprisingly difficult to find a list of all regex modifiers and what they do (like /g /i etc etc...). In Larry's Bible, there is a list of command line modifiers, but I couldn't find a list of regex modifiers. Or online.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1564489287, "post_id": 57271530, "comment_id": 101041110, "body": "Use <code>&#47;^(?:[^\\&#47;]*\\&#47;){2}(.*)&#47;</code>, <a href=\"https://regex101.com/r/l6sH8C/1\" rel=\"nofollow noreferrer\">demo</a>."}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1564497931, "last_edit_date": 1564497931, "creation_date": 1564489320, "answer_id": 57271562, "question_id": 57271530, "link": "https://stackoverflow.com/questions/57271530/regex-capture-after-second/57271562#57271562", "title": "Regex capture after second /", "body": "<p>Try this one:</p>\n\n<pre><code>\\/[^\\/]+\\/(.*)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Z4gj5e/2\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>\\/[^\\/]+\\/</code> you first match everything till the second <code>/</code>:\n\n<ul>\n<li><code>\\/</code> the first slash</li>\n<li><code>[^\\/]+</code>  one or more of chars that are not a slash</li>\n<li>/` the second slash</li>\n</ul></li>\n<li><code>(.*)</code> the substring you need is in the capturing group</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1564492692, "creation_date": 1564492692, "answer_id": 57272704, "question_id": 57271530, "link": "https://stackoverflow.com/questions/57271530/regex-capture-after-second/57272704#57272704", "title": "Regex capture after second /", "body": "<p>Is this URI parsing? It <em>looks</em> like URI parsing.</p>\n\n<pre><code>use URI qw();\nmy $u = URI-&gt;new;\n$u-&gt;path('/en-us/hello/world/newyork.html');\nmy @s = $u-&gt;path_segments;\nprint join '/', @s[2..@s-1];\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2935473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260f18e25f96c5257f445fb7c2771d2?s=128&d=identicon&r=PG&f=1", "display_name": "user2935473", "link": "https://stackoverflow.com/users/2935473/user2935473"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564497931, "creation_date": 1564489178, "last_edit_date": 1564489480, "question_id": 57271530, "link": "https://stackoverflow.com/questions/57271530/regex-capture-after-second", "title": "Regex capture after second /", "body": "<p>I'd like to regex capture in Perl, all characters after the second occurrence of the <code>/</code> character.</p>\n\n<p>using the the example:</p>\n\n<pre><code>/en-us/hello/world/newyork.html\n</code></pre>\n\n<p>I'd like to be able to capture: </p>\n\n<pre><code>hello/world/newyork.html\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>^(?:[^\\/]*\\/){2}([^\\/]*)\n</code></pre>\n\n<p>Only captures <code>hello</code> as group 1.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1564477404, "creation_date": 1564477404, "answer_id": 57268001, "question_id": 57267821, "link": "https://stackoverflow.com/questions/57267821/arithmetic-with-strings-that-contain-numbers/57268001#57268001", "title": "Arithmetic with strings that contain numbers", "body": "<p>Yes, your approach seems ok. You can also use substitution with evaluation:</p>\n\n<pre><code>$font_size =~ s/([0-9]+)/$1 + FONT_UNIT/e;\n</code></pre>\n\n<p>Or, if you need clarity, just extract the number, change it, and glue the parts back:</p>\n\n<pre><code>my ($size, $unit) = $font_size =~ /([0-9]+)(.*)/;\n$size += FONT_UNIT;\nSTDOUT-&gt;say(\"$size$unit\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1564479796, "creation_date": 1564479796, "answer_id": 57268732, "question_id": 57267821, "link": "https://stackoverflow.com/questions/57267821/arithmetic-with-strings-that-contain-numbers/57268732#57268732", "title": "Arithmetic with strings that contain numbers", "body": "<p>The only two suggestions I'd make would be to be more precise about which warnings you're turning off and to use a slightly larger naked code block to make it more readable.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse utf8;\n\nuse constant FONT_UNIT =&gt; 4; \n\nmy $font_size = \"120px\";\n\nSTDOUT-&gt;print(\"${font_size}\\n\");\n\n{\n  no warnings 'numeric';\n\n  $font_size = $font_size + FONT_UNIT . \"px\";\n}\n\nSTDOUT-&gt;print(\"${font_size}\\n\");\n\nexit (0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1564510955, "creation_date": 1564510955, "answer_id": 57277881, "question_id": 57267821, "link": "https://stackoverflow.com/questions/57267821/arithmetic-with-strings-that-contain-numbers/57277881#57277881", "title": "Arithmetic with strings that contain numbers", "body": "<blockquote>\n  <p>What is the Perlish way to deal with arithmetic with strings that contain numbers?</p>\n</blockquote>\n\n<p>Leading and trailing whitespace is ignored (without generating a warning).</p>\n\n<p><code>inf</code>, <code>infinity</code>, <code>nan</code>, case insensitive, after stripping whitespace, and with optional leading + or -, are treated as those special numbers (without generating a warning).</p>\n\n<p><code>0 but true</code> (no extra whitespace allowed) is treated as the number 0 (without generating a warning).</p>\n\n<p>Any leading thing that looks like an integer or decimal number with an optional following e or E and optionally signed exponent is treated as that number (to the extent it can be represented in a numeric type).  If any non-whitespace characters remain afterwards, an \"isn't numeric\" warning is generated.</p>\n"}], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57268001, "answer_count": 3, "score": 1, "last_activity_date": 1564510955, "creation_date": 1564476810, "question_id": 57267821, "link": "https://stackoverflow.com/questions/57267821/arithmetic-with-strings-that-contain-numbers", "title": "Arithmetic with strings that contain numbers", "body": "<p>What is the Perlish way to deal with arithmetic with strings that contain numbers?</p>\n\n<p>Example: Say I'm dealing with font sizes that are represented with a string like -> \"120px\". I know the values of font sizes will always be formatted with number characters followed by non-number characters and I know that Perl will truncate any trailing characters of a string in arithmetic so could I do something like the following(with appropriate comments)? </p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse utf8;\n\nuse constant FONT_UNIT =&gt; 4; \n\nmy $font_size = \"120px\";\n\nSTDOUT-&gt;print(\"${font_size}\\n\");\n\n$font_size = do {no warnings; $font_size + FONT_UNIT}.\"px\";\n\nSTDOUT-&gt;print(\"${font_size}\\n\");\n\nexit (0);\n</code></pre>\n\n<p>I ask because this feature of the language really works here.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1564476756, "post_id": 57264382, "comment_id": 101034092, "body": "Why do you need to suppress the headers?"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1564491550, "post_id": 57264382, "comment_id": 101042515, "body": "Because, I&#39;m using <code>print &quot;&lt;body&gt;foo&lt;&#47;body&gt;&quot;;</code> to generate a body, and that works fine. But then Mojo comes along later and after the body and adds HTTP headers. And that&#39;s not really useful."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1564498712, "post_id": 57264382, "comment_id": 101047257, "body": "Isn&#39;t there a suitable renderer instead of printing directly?"}], "answers": [{"tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 3, "last_activity_date": 1580351999, "last_edit_date": 1580351999, "creation_date": 1564467167, "answer_id": 57265334, "question_id": 57264382, "link": "https://stackoverflow.com/questions/57264382/how-can-i-omit-the-headers-for-a-route-when-using-mojo/57265334#57265334", "title": "How can I omit the headers for a route when using Mojo?", "body": "<p>In my case, I was using <a href=\"https://github.com/mojolicious/mojo/blob/master/lib/Mojo/Server/CGI.pm\" rel=\"nofollow noreferrer\"><code>Mojo::Server::CGI</code></a>. You can see the problems <a href=\"https://github.com/mojolicious/mojo/blob/master/lib/Mojo/Server/CGI.pm#L29\" rel=\"nofollow noreferrer\">on line 29</a> and <a href=\"https://github.com/mojolicious/mojo/blob/master/lib/Mojo/Server/CGI.pm#L35\" rel=\"nofollow noreferrer\">on line 35</a></p>\n\n<pre><code>return undef if $self-&gt;nph &amp;&amp; !_write($res, 'get_start_line_chunk');\n...\nreturn undef unless _write($res, 'get_header_chunk');\n</code></pre>\n\n<p>You can get around this by mucking with the internals,</p>\n\n<pre><code>$c-&gt;res-&gt;content-&gt;_headers-&gt;{header_buffer} = '';                                                                          \n$c-&gt;res-&gt;{start_buffer} = '';\n</code></pre>\n\n<p>But an even better way to is detect if anything has been written to STDOUT and to suppress the whole request if so,</p>\n\n<pre><code># We withhold headers if anything has written to\n# STDOUT. This is neccessary because some scripts, in-transition\n# to Mojo will still use `print`, and output headers\nif ( tell(*STDOUT) != 0 ) {\n  return undef;\n}\n</code></pre>\n\n<p>That what I did anyway when I published <a href=\"https://metacpan.org/pod/release/ECARROLL/Mojo-Server-CGI-LegacyMigrate-0.01/lib/Mojo/Server/CGI/LegacyMigrate.pm\" rel=\"nofollow noreferrer\">Mojo::Server::CGI::LegacyMigrate</a></p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57265334, "answer_count": 1, "score": 1, "last_activity_date": 1580351999, "creation_date": 1564461537, "last_edit_date": 1564466011, "question_id": 57264382, "link": "https://stackoverflow.com/questions/57264382/how-can-i-omit-the-headers-for-a-route-when-using-mojo", "title": "How can I omit the headers for a route when using Mojo?", "body": "<p>Mojo seems to want add headers to the response. Is there any method to suppress headers given a context object?</p>\n\n<pre><code>$r-&gt;get('/')-&gt;to( cb =&gt; sub {\n  my $c = shift;\n  # No headers for this response\n} );\n</code></pre>\n"}, {"tags": ["string", "perl", "substring"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1564454740, "post_id": 57263569, "comment_id": 101026254, "body": "Re &quot;<i>How do I get a substring before the &#39;offset&#39;?</i>&quot;, Technically, that&#39;s not 2 before position 5; that&#39;s 2 before position 6. That&#39;s a confusing interface."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1564454866, "post_id": 57263569, "comment_id": 101026274, "body": "<code>($string =~ &#47;^..{5}(?&lt;=(.{2}))&#47;s)[0]</code>"}, {"owner": {"reputation": 79, "user_id": 7484290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86cb2509e795b61388f05a5cc86c1d0?s=128&d=identicon&r=PG&f=1", "display_name": "statsgrad1990", "link": "https://stackoverflow.com/users/7484290/statsgrad1990"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564455058, "post_id": 57263569, "comment_id": 101026307, "body": "@ikegami Sorry, I meant to say I wanted a sub routine like substr but going the opposite way. Because using substr($string, 5, 2) would give &#39;Wo&#39;. Hm, now that I think about it, probably not the best example string to use... but thanks! Will accept your answer as it worked!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1564465668, "last_edit_date": 1564465668, "creation_date": 1564454632, "answer_id": 57263666, "question_id": 57263569, "link": "https://stackoverflow.com/questions/57263569/substring-with-offset-going-reverse/57263666#57263666", "title": "Substring with offset going reverse", "body": "<pre><code>sub someFunction {\n   my ($s, $i, $j) = @_;\n   my $start = $i-$j+1;\n   $start = 0 if $start &lt; 0;\n   my $length = $i-$start+1;\n   return substr($s, $start, $length);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub someFunction {\n   my ($s, $i, $j) = @_;\n   return substr(substr($s, 0, $i+1), -$j);\n}\n</code></pre>\n\n<p>That assumes that <code>someFunction(\"012345\", 2, 4)</code> should return <code>012</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 7484290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86cb2509e795b61388f05a5cc86c1d0?s=128&d=identicon&r=PG&f=1", "display_name": "statsgrad1990", "link": "https://stackoverflow.com/users/7484290/statsgrad1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57263666, "answer_count": 1, "score": 1, "last_activity_date": 1564465668, "creation_date": 1564453786, "question_id": 57263569, "link": "https://stackoverflow.com/questions/57263569/substring-with-offset-going-reverse", "title": "Substring with offset going reverse", "body": "<p>I looked at documentation of substr in Perl and see the 'offset' which is the position to start and 'length' is how long. If 'length' is negative, that's how many characters to leave off the right end of the string. How do I get a substring <strong>before</strong> the 'offset'? Example</p>\n\n<pre><code>my $string = \"HelloWorld\";\nmy $sub = someFunction(string=$string, offset=5, lengthBefore=2); # I know this is not Perl syntax for sub-routine but wanted to show the inputs I need\nprint \"$sub\\n\";\n</code></pre>\n\n<p>I want to get</p>\n\n<pre><code>oW\n</code></pre>\n\n<p>Is there a function to do this in Perl? Any help would be greatly appreciated! Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564441652, "post_id": 57262053, "comment_id": 101023847, "body": "It has nothing to do with your compiler, and everything to do with your <code>TERM</code> environment variable and OS configuration and readline library. Something almost certainly changed there too."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564441780, "post_id": 57262053, "comment_id": 101023866, "body": "What&#39;s the value of <code>$term-&gt;ReadLine</code> under both versions of perl? (Case matters here!)"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1564471036, "post_id": 57262053, "comment_id": 101031081, "body": "If the question&#39;s claim is accurate, that swapping the shebang lines is all it takes to switch between correct and incorrect behaviors, then that rather strongly implies that the environment (including <code>$TERM</code>) and OS configuration are identical in both cases. Might be linking to a different readline lib, though."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1564495270, "post_id": 57262053, "comment_id": 101044951, "body": "I think you may have hit something Dave with the val of $term-&gt;ReadLine... For the version that works, it&#39;s...   &quot;Term::ReadLine::Gnu&quot; .                               For the version that fails, it&#39;s......    &quot;Term::ReadLine::Stub&quot; .                               &quot;Stub&quot; ?  What&#39;s going on here ?"}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "is_accepted": false, "score": 1, "last_activity_date": 1564514384, "creation_date": 1564514384, "answer_id": 57278698, "question_id": 57262053, "link": "https://stackoverflow.com/questions/57262053/why-does-termreadline-work-for-gcc4-compiled-per-but-not-gcc6/57278698#57278698", "title": "Why does Term::ReadLine work for gcc4 compiled per but not gcc6?", "body": "<p>In this particular case, the problem was that Term::ReadLine::Gnu was missing for Perl 5.24.0-gcc620 .  After installed, it runs fine.</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564514384, "creation_date": 1564438831, "question_id": 57262053, "link": "https://stackoverflow.com/questions/57262053/why-does-termreadline-work-for-gcc4-compiled-per-but-not-gcc6", "title": "Why does Term::ReadLine work for gcc4 compiled per but not gcc6?", "body": "<p>I just noticed that the functionality of Term::ReadLine has changed (for the worse) after upgrading from a gcc4 compiled version of perl to a gcc6 compiled version. With gcc4, the backspace key was interpreted correctly, allowing the user to edit the line he/she was entering. The gcc6 version apparently does not, returning a ^? every time the backspace key is entered.</p>\n\n<p>Here's some simple code I used to test this... </p>\n\n<pre><code>#!/tool/pandora64/.package/perl-5.24.0-gcc620/bin/perl5.24.0\n#/tool/pandora64/.package/perl-5.24.0/bin/perl5.24.0\n\nuse strict;\nuse Term::ReadLine;\n\nmy $answer;\nmy $term = Term::ReadLine-&gt;new('EDIT_STDIN');\n$term-&gt;ornaments(0);\n$answer = $term-&gt;readline(\"Enter something here....\");\n\nprint \"answer: $answer\\n\";\n\nexit;\n</code></pre>\n\n<p>As it is, this script fails to interpret the backspace key correctly as described above.  Swap lines 1 and 2 and it works fine.</p>\n\n<p>Sooooo..... any ideas why this is happening?  Any suggestions on how to get this to work given that I can't go back to gcc4 ?</p>\n"}, {"tags": ["python", "perl", "ssh", "stdin"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564400048, "post_id": 57252551, "comment_id": 101005734, "body": "How do you run the Perl script?"}, {"owner": {"reputation": 23, "user_id": 6426490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9acffb51b0aa71c2e052d007b6dec?s=128&d=identicon&r=PG&f=1", "display_name": "ozpin", "link": "https://stackoverflow.com/users/6426490/ozpin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564401992, "post_id": 57252551, "comment_id": 101006738, "body": "in the ubuntu, Replace the /usr/sbin/sshd with the perl script, then restart sshd services, so Actually, I don&#39;t know how it is running"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564412941, "post_id": 57252551, "comment_id": 101012822, "body": "It seems it check if standard input is redirected to socket - <a href=\"https://stackoverflow.com/questions/14611997/using-getpeername-with-descriptor-as-0\">Using getpeername with descriptor as 0</a>. So it doesn&#39;t read data - os.read() - but it rather need <code>socket.getpeername()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 1697581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zyySw.jpg?s=128&g=1", "display_name": "aod", "link": "https://stackoverflow.com/users/1697581/aod"}, "is_accepted": false, "score": 1, "last_activity_date": 1564494735, "last_edit_date": 1564494735, "creation_date": 1564446444, "answer_id": 57262807, "question_id": 57252551, "link": "https://stackoverflow.com/questions/57252551/how-to-determine-the-stdin-content-of-this-perl-script-of-sshd/57262807#57262807", "title": "How to determine the stdin content of this perl script of sshd", "body": "<p><code>STDIN</code> is a file descriptor (C terminology), also called a file handle in Perl.\nIt is usually connected to the keyboard, but if the script is called in a pipe in the terminal, it reads from the pipe. It can also read data from an HTTP POST if the script is a CGI.</p>\n\n<p>Now, the <code>getpeername</code> you want is not the one you posted the link, its this one:</p>\n\n<p><a href=\"https://perldoc.perl.org/functions/getpeername.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/getpeername.html</a></p>\n\n<p>It \"returns the packed sockaddr address of the other end of the SOCKET connection\", like <a href=\"https://stackoverflow.com/users/1832058/furas\">furas</a> has pointed out.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6426490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9acffb51b0aa71c2e052d007b6dec?s=128&d=identicon&r=PG&f=1", "display_name": "ozpin", "link": "https://stackoverflow.com/users/6426490/ozpin"}, "edited": false, "score": 0, "creation_date": 1564479974, "post_id": 57264268, "comment_id": 101035925, "body": "thank you !   it works ~ and i paste it in my answer,  you are breathtaking ."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1564461499, "last_edit_date": 1564461499, "creation_date": 1564460743, "answer_id": 57264268, "question_id": 57252551, "link": "https://stackoverflow.com/questions/57252551/how-to-determine-the-stdin-content-of-this-perl-script-of-sshd/57264268#57264268", "title": "How to determine the stdin content of this perl script of sshd", "body": "<p><code>STDIN</code> is a filehandle, not a file descriptor (\"fd\"). File descriptors are small integers that represent I/O channels (such as sockets) in interfaces provided by the OS kernel (<a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">\"system calls\"</a>, e.g. <code>read</code>, <code>write</code>, <code>open</code>, ...) at the C level.</p>\n\n<p><code>STDIN</code> (\"standard input\") is a higher-level object that contains a file descriptor (<code>0</code> in the case of <code>STDIN</code>) along with other data, e.g. a buffer. You can extract the file descriptor from a handle by using <a href=\"https://perldoc.pl/functions/fileno\" rel=\"nofollow noreferrer\"><code>fileno</code></a>. All the usual I/O functions in Perl operate on handles, not raw file descriptors.</p>\n\n<p>Perl's <code>STDIN</code> corresponds to <a href=\"https://docs.python.org/3/library/sys.html#sys.stdin\" rel=\"nofollow noreferrer\"><code>sys.stdin</code></a> in Python. As in Perl, the object wraps an underlying file descriptor, which you can extract using <code>sys.stdin.fileno()</code> (corresponding to <code>fileno(STDIN)</code> in Perl).</p>\n\n<p><a href=\"https://metacpan.org/pod/POSIX::getpeername\" rel=\"nofollow noreferrer\">POSIX::getpeername</a> is a module on CPAN. It is not what your Perl script is using; otherwise you'd have <code>use POSIX::getpeername;</code> somewhere in your code (in fact, the Perl script doesn't load any modules). As the documentation says, this module provides a <code>_getpeername</code> function that fetches the remote address from a socket file descriptor; if you wanted to use it with <code>STDIN</code>, you'd use <code>use POSIX::getpeername; POSIX::getpeername::_getpeername(fileno(STDIN))</code> (or <code>POSIX::getpeername::_getpeername(0)</code>).</p>\n\n<p>Your code calls the <a href=\"https://perldoc.pl/functions/getpeername\" rel=\"nofollow noreferrer\"><code>getpeername</code></a> function built into Perl, which takes a file handle, not a descriptor. The handle must refer to a socket. In the case of <code>STDIN</code>, it is the calling process that's responsible for setting it up; the Perl code simply assumes that it is a socket. What this function returns is a byte string that contains a raw <code>struct sockaddr_in</code> C structure. Normally you'd use <a href=\"https://perldoc.pl/Socket#($port,-$ip_address)-=-unpack_sockaddr_in-$sockaddr\" rel=\"nofollow noreferrer\"><code>Socket::unpack_sockaddr_in</code></a> to extract the port and IP address (or just use one of the higher-level interfaces in <a href=\"https://perldoc.pl/IO::Socket::INET#METHODS\" rel=\"nofollow noreferrer\"><code>IO::Socket::INET</code></a>, e.g. <code>$socket-&gt;peerport</code>).</p>\n\n<p>As for what the regex does, it depends on the internals of <code>struct sockaddr_in</code> on the system it's running on. The C type itself is declared as:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct sockaddr_in {\n    sa_family_t    sin_family; /* address family: AF_INET */\n    in_port_t      sin_port;   /* port in network byte order */\n    struct in_addr sin_addr;   /* internet address */\n};\n</code></pre>\n\n<p><code>sa_family_t</code> is <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html\" rel=\"nofollow noreferrer\">some unsigned integer type</a>. On Linux (and I expect on other unix systems, too) it is defined as <code>unsigned short</code>, i.e. a 2-byte integer.</p>\n\n<p><code>in_port_t</code> is an <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/netinet_in.h.html\" rel=\"nofollow noreferrer\">unsigned 2-byte integer</a> containing the port in network byte order.</p>\n\n<p>Assuming no padding between the first two fields, that means the first two bytes of the string returned by <code>getpeername</code> represent the address family and the next two bytes represent the network port in big-endian (\"network byte order\") format.</p>\n\n<p>This is what <code>/^..zf/</code> matches against. The first two bytes can be anything (except for the value 10, which is interpreted as newline; this is likely a bug in the code), so the address family doesn't matter. The string <code>zf</code> corresponds to <code>31334</code> in big endian:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -wE 'say unpack \"n\", \"zf\"'\n31334\n</code></pre>\n\n<p>In short, <code>getpeername(...)=~/^..zf/</code> checks (in a really quick and dirty way) whether the remote port is 31334. If so, the wrapper script runs <code>/bin/sh</code>; otherwise it forwards to the real <code>sshd</code> executable.</p>\n\n<hr>\n\n<p>I'm not sure what the corresponding Python code would be. Perhaps</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nimport socket\n\nsocket.socket(fileno = sys.stdin.fileno()).getpeername()[1] == 31334\n</code></pre>\n\n<p>?</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6426490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9acffb51b0aa71c2e052d007b6dec?s=128&d=identicon&r=PG&f=1", "display_name": "ozpin", "link": "https://stackoverflow.com/users/6426490/ozpin"}, "is_accepted": false, "score": 1, "last_activity_date": 1564479831, "creation_date": 1564479831, "answer_id": 57268744, "question_id": 57252551, "link": "https://stackoverflow.com/questions/57252551/how-to-determine-the-stdin-content-of-this-perl-script-of-sshd/57268744#57268744", "title": "How to determine the stdin content of this perl script of sshd", "body": "<p>Thanks guys , in the end, I implemented my purpose according to the answer of melpomene. This is my code, although there will be a warning  at runtime\uff0cbut it works~</p>\n\n<pre><code>#!/usr/bin/python3.5\nimport os\nimport socket\nimport subprocess\nimport sys\n\ns = socket.socket(fileno = sys.stdin.fileno())\n\ntry:\n    n = s.getpeername()\nexcept:\n    pass\nelse:\n    raddr = n[1]\n    if raddr == 31334:\n        subprocess.run([\"/bin/sh\"])\n        #sys.exit()\n\nos.execv('/usr/bin/sshd',sys.argv)\n</code></pre>\n\n<p>and the warning is \"<em>class 'Exception' : [Errno 88] Socket operation on non-socket</em> \", I am also little confused about this information, I am very happy to listen to some analysis about this.</p>\n\n<p>Considering that someone might be interested in the specific content of stdin on this issue, I paste it below</p>\n\n<pre><code>&lt;socket.socket fd=0, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('192.168.8.199', 22), raddr=('192.168.8.240', 31334)&gt; \n</code></pre>\n\n<p>~~</p>\n"}], "owner": {"reputation": 23, "user_id": 6426490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9acffb51b0aa71c2e052d007b6dec?s=128&d=identicon&r=PG&f=1", "display_name": "ozpin", "link": "https://stackoverflow.com/users/6426490/ozpin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57264268, "answer_count": 3, "score": 1, "last_activity_date": 1564494735, "creation_date": 1564398460, "last_edit_date": 1564398992, "question_id": 57252551, "link": "https://stackoverflow.com/questions/57252551/how-to-determine-the-stdin-content-of-this-perl-script-of-sshd", "title": "How to determine the stdin content of this perl script of sshd", "body": "<p>i'm coding a python3 ssh Middleware according to a perl, and want to add the port determine to my python code. how can i to judge the content about stdin in the perl script ?</p>\n\n<p>the perl script working normally \ni used ubuntu 16.04 , Here is what I did</p>\n\n<pre><code>mv /usr/sbin/sshd /usr/bin/sshd\nmv /usr/sbin/backdoor /usr/sbin/sshd\nchmod +x /usr/sbin/sshd \nsystemctl restart sshd\n</code></pre>\n\n<p>this is the perl code</p>\n\n<pre><code>#!/usr/bin/perl\nexec\"/bin/sh\"if(getpeername(STDIN)=~/^..zf/);\nexec{\"/usr/bin/sshd\"}\"/usr/sbin/sshd\",@ARGV;\n</code></pre>\n\n<p>I understand the STDIN according to the information I found,is it a fd ?</p>\n\n<ul>\n<li>**POSIX::getpeername allows you to get peername from sockfd. \nfrom <a href=\"https://metacpan.org/pod/POSIX::getpeername\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/POSIX::getpeername</a></li>\n</ul>\n\n<p>so this is my python code</p>\n\n<pre><code>#!/usr/bin/python3.5\nimport os\nimport socket\nimport subprocess\nimport sys\n\nfor s in sys.stdin:\n    raddr = os.read(s,100)\n    if re.match(r'..zf',str(raddr)):\n        os.execv(\"/bin/sh\")\n        with open(\"hello.log\",\"a+\") as f:\n            f.write(str(raddr))\n            sys.exit()\nos.execv('/usr/bin/sshd',sys.argv)\n</code></pre>\n\n<p>i expect know the meaning of stdin in the perl, thanks ~~</p>\n"}, {"tags": ["node.js", "perl", "aws-lambda"], "comments": [{"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1564398341, "post_id": 57252436, "comment_id": 101004872, "body": "Perl is not a required component of many distributions; do you know if it was installed?"}, {"owner": {"reputation": 580, "user_id": 6796985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wo8xV.jpg?s=128&g=1", "display_name": "Van Tho", "link": "https://stackoverflow.com/users/6796985/van-tho"}, "reply_to_user": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1564398497, "post_id": 57252436, "comment_id": 101004958, "body": "@kjpires It was not installed (ouput as when I run <code>which perl</code>), but it previously exists :( Is there any way that I can use it? I need perl to use lib <code>g2ctl</code>"}, {"owner": {"reputation": 8676, "user_id": 11841571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OsVEAhv2qOM/AAAAAAAAAAI/AAAAAAADr5Q/gMKvek1dbZE/photo.jpg?sz=128", "display_name": "Lamanus", "link": "https://stackoverflow.com/users/11841571/lamanus"}, "edited": false, "score": 2, "creation_date": 1564398530, "post_id": 57252436, "comment_id": 101004979, "body": "Use <a href=\"https://metacpan.org/pod/AWS::Lambda\" rel=\"nofollow noreferrer\">perl layer</a>"}, {"owner": {"reputation": 580, "user_id": 6796985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wo8xV.jpg?s=128&g=1", "display_name": "Van Tho", "link": "https://stackoverflow.com/users/6796985/van-tho"}, "reply_to_user": {"reputation": 8676, "user_id": 11841571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OsVEAhv2qOM/AAAAAAAAAAI/AAAAAAADr5Q/gMKvek1dbZE/photo.jpg?sz=128", "display_name": "Lamanus", "link": "https://stackoverflow.com/users/11841571/lamanus"}, "edited": false, "score": 1, "creation_date": 1564399825, "post_id": 57252436, "comment_id": 101005610, "body": "@Lamanus I read this page before but I don&#39;t know why I skiped it. My problem was solved by your comment. Thank you very much! You can post an answer and I will mark it as accepted."}], "answers": [{"comments": [{"owner": {"reputation": 1549, "user_id": 3529833, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/74c547cbe8476f731f97005480dda6aa?s=128&d=identicon&r=PG&f=1", "display_name": "Mojimi", "link": "https://stackoverflow.com/users/3529833/mojimi"}, "edited": false, "score": 0, "creation_date": 1566155270, "post_id": 57253023, "comment_id": 101558250, "body": "But isn&#39;t this a custom runtime? What if I only want PERL installed by call it inside Node?"}], "tags": [], "owner": {"reputation": 8676, "user_id": 11841571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OsVEAhv2qOM/AAAAAAAAAAI/AAAAAAADr5Q/gMKvek1dbZE/photo.jpg?sz=128", "display_name": "Lamanus", "link": "https://stackoverflow.com/users/11841571/lamanus"}, "is_accepted": true, "score": 4, "last_activity_date": 1564400109, "creation_date": 1564400109, "answer_id": 57253023, "question_id": 57252436, "link": "https://stackoverflow.com/questions/57252436/perl-not-available-in-lambda-function-with-runtime-is-node-js-8-10/57253023#57253023", "title": "Perl not available in Lambda function (with runtime is Node.js 8.10)", "body": "<p>There is a nice article to use perl by using lambda layer.</p>\n\n<p><a href=\"https://metacpan.org/pod/AWS::Lambda\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/AWS::Lambda</a></p>\n\n<p>It keeps following the version update of perl and so it would be very useful.</p>\n"}], "owner": {"reputation": 580, "user_id": 6796985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wo8xV.jpg?s=128&g=1", "display_name": "Van Tho", "link": "https://stackoverflow.com/users/6796985/van-tho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57253023, "answer_count": 1, "score": 0, "last_activity_date": 1564400109, "creation_date": 1564398056, "question_id": 57252436, "link": "https://stackoverflow.com/questions/57252436/perl-not-available-in-lambda-function-with-runtime-is-node-js-8-10", "title": "Perl not available in Lambda function (with runtime is Node.js 8.10)", "body": "<p>I cannot use perl in my lambda function (runtime is Node.js 8.10). Perl previously works fine but now, when I use it, I got an error: </p>\n\n<p>/bin/sh: perl: command not found</p>\n\n<p>I've tried to print \"which perl\" and I got an error: </p>\n\n<p><code>no perl in (/var/lang/bin:/usr/local/bin:/usr/bin/:/bin:/opt/bin)</code></p>\n\n<p>I've googled any information about changes with perl in aws lambda but I found nothing :(</p>\n\n<p>Here is my code:</p>\n\n<pre><code>var exec  = require('child_process').exec;\n\n\nexports.handleUpload = (event, context, callback) =&gt; {\n    exec( 'which perl', function(error, stdout, stderr) {\n        if (error) {console.log(error);}\n       console.log(stdout);\n      });\n    return true;\n};\n</code></pre>\n\n<p>Is there any way that I can use perl in my Node JS Lambda function? I can change my runtime and code to python o Golang if needed.</p>\n"}, {"tags": ["perl", "unicode", "encoding", "utf-8", "arabic"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1564395435, "post_id": 57251401, "comment_id": 101003285, "body": "I&#39;m not sure why you&#39;re trying to decode that page from CP1251 (which is a Cyrillic codepage). The HTTP headers and the <code>META HTTP-EQUIV</code> element both agree that it&#39;s encoded in CP1256 (which makes more sense, as that&#39;s an Arabic codepage)."}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1564396708, "post_id": 57251401, "comment_id": 101004012, "body": "@DaveCross Assuming it is as you said CP1256 I need to convert it and save it as UTF-8, this is what I need. I need to save it to mysql table in UTF-8."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1564397453, "post_id": 57251401, "comment_id": 101004417, "body": "Sure. But why were you using CP1251? What made you think it was CP1251? And does anything change if you use CP1256 instead?"}, {"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1564397838, "post_id": 57251401, "comment_id": 101004618, "body": "@DaveCross I was trying nothing more I was wrong but now I used online website to detect encoding and it confirmed your suggestion as cp1256. But still same problem. I need to convert it to UTF-8 to save it to mysql table and also replace the html entity with its arabic unicode as in the code above."}], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "edited": false, "score": 0, "creation_date": 1564400630, "post_id": 57252492, "comment_id": 101005988, "body": "That did it in clean way."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1564398251, "creation_date": 1564398251, "answer_id": 57252492, "question_id": 57251401, "link": "https://stackoverflow.com/questions/57251401/perl-save-web-page-from-cp1256-into-utf-8/57252492#57252492", "title": "Perl save web page from cp1256 into utf-8", "body": "<p>Use <code>decoded_content</code> in <a href=\"http://p3rl.org/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> instead, it uses the Content-Type header.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\nuse LWP::UserAgent qw();\nrequire LWP::Protocol::https;\nmy $url = 'https://www.altafsir.com/Tafasir.asp'\n    . '?tMadhNo=1&amp;tTafsirNo=7&amp;tSoraNo=1&amp;tAyahNo=1'\n    . '&amp;tDisplay=yes&amp;UserProfile=0&amp;LanguageId=1';\nmy $ua = LWP::UserAgent-&gt;new;\nmy $response = $ua-&gt;get($url);\nif ($response-&gt;is_success) {\n    my $content = $response-&gt;decoded_content;\n    $content =~ s/&amp;#1548;/\\N{ARABIC COMMA}/g;\n    open my $fh, '&gt;:encoding(UTF-8)', 'filecontent.html';\n    $fh-&gt;print($content);\n} else {\n    die $response-&gt;status_line;\n}\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 1405646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6298d27969ef6491bb007b8a5177ff40?s=128&d=identicon&r=PG", "display_name": "daliaessam", "link": "https://stackoverflow.com/users/1405646/daliaessam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57252492, "answer_count": 1, "score": 1, "last_activity_date": 1564398251, "creation_date": 1564394412, "last_edit_date": 1564397055, "question_id": 57251401, "link": "https://stackoverflow.com/questions/57251401/perl-save-web-page-from-cp1256-into-utf-8", "title": "Perl save web page from cp1256 into utf-8", "body": "<p>I am trying to save this web page which seems have encoding cp1256 into a text file in UTF-8 encoded format, the problem if I try to replace an html entity before saving &amp; # 1548; by its Arabic char \"\u060c\" the saved file contents is not Arabic anymore.</p>\n\n<pre><code>#!C:\\perl\\bin\\perl.exe\nuse Encode;\nuse LWP::Simple;\n\nbinmode STDOUT, ':encoding(UTF-8)';\n\nmy $url = qq{https://www.altafsir.com/Tafasir.asp?tMadhNo=1&amp;tTafsirNo=7&amp;tSoraNo=1&amp;tAyahNo=1&amp;tDisplay=yes&amp;UserProfile=0&amp;LanguageId=1};\nmy $content = get($url);\n\n$content = decode('cp1256', $content);\n\nmy $ch = chr(0x60c);\n# this line causes the problem\n$content =~ s/\\&amp;#1548\\;/$ch/mg;\n\nopen File, \"&gt;filecontent.txt\" or die \"Error creating file.\\n\";\nbinmode File, ':encoding(UTF-8)';\nprint File $content;\nclose File;\n\nexit;\n</code></pre>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"comments": [{"owner": {"reputation": 1122, "user_id": 357336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0tDqW.jpg?s=128&g=1", "display_name": "d5ve", "link": "https://stackoverflow.com/users/357336/d5ve"}, "edited": false, "score": 0, "creation_date": 1564472690, "post_id": 57251275, "comment_id": 101031839, "body": "This works great for a direct search on the table in question, cheers @dave! I&#39;ll see if I can work out a way to have the filter applied when another resultset JOINs to the table as well."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1564549668, "post_id": 57251275, "comment_id": 101062371, "body": "You can define a where clause on a relationship and have two rels, one with the filter and one without."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1564404828, "last_edit_date": 1564404828, "creation_date": 1564393914, "answer_id": 57251275, "question_id": 57250489, "link": "https://stackoverflow.com/questions/57250489/perl-dbixclass-have-a-default-filter-for-all-searches-on-a-table/57251275#57251275", "title": "perl DBIx::Class have a default filter for all searches on a table", "body": "<p>Yes, you can subclass your resultset class and override the <code>search()</code> method to add your search criteria.</p>\n\n<pre><code>package MyApp::Schema::Resultset::MyTable;\n\nuse strict;\nuse warnings;\n\nuse base 'DBIx::Class::Resultset';\n\nsub search {\n  my $self = shift;\n\n  my ($cols, $opts) = @_;\n\n  $cols //= {};\n\n  $cols-&gt;{is_deleted} //= 0;\n\n  return $self-&gt;next::method($cols, $opts);\n}\n\n1;\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<ol>\n<li>We only set <code>is_deleted</code> if it's not already set - this allows us to look for rows with <code>is_deleted</code> set to 1 if we ever need to do that.</li>\n<li>DBIx::Class uses <a href=\"https://metacpan.org/pod/Class::C3\" rel=\"nofollow noreferrer\">Class::C3</a> for method resolution, so we use <code>next::method()</code> instead of <code>SUPER::method()</code> to call the superclass method.</li>\n<li>Any search options are passed through to the superclass method unchanged.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": false, "score": 1, "last_activity_date": 1564549727, "creation_date": 1564549727, "answer_id": 57283569, "question_id": 57250489, "link": "https://stackoverflow.com/questions/57250489/perl-dbixclass-have-a-default-filter-for-all-searches-on-a-table/57283569#57283569", "title": "perl DBIx::Class have a default filter for all searches on a table", "body": "<p>I\u2018d create a virtual view and add a relationship to the view in addition to the table.</p>\n"}], "owner": {"reputation": 1122, "user_id": 357336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0tDqW.jpg?s=128&g=1", "display_name": "d5ve", "link": "https://stackoverflow.com/users/357336/d5ve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 57251275, "answer_count": 2, "score": 1, "last_activity_date": 1564549727, "creation_date": 1564391160, "question_id": 57250489, "link": "https://stackoverflow.com/questions/57250489/perl-dbixclass-have-a-default-filter-for-all-searches-on-a-table", "title": "perl DBIx::Class have a default filter for all searches on a table", "body": "<p>I have a bunch of DBIx::Class Result classes created from my database schema by <a href=\"https://metacpan.org/pod/distribution/DBIx-Class-Schema-Loader/script/dbicdump\" rel=\"nofollow noreferrer\">dbicdump / DBIx::Class::Schema::Loader</a></p>\n\n<p>I need to add an <code>is_deleted</code> boolean column to one of the tables, and to filter out deleted records in <strong>all</strong> the existing searches and JOINs.</p>\n\n<p>Unfortunately there are 30 or 40 places in the sprawling perl app which directly use the table in question, and at least the same number of places which JOIN to it via <code>prefetch</code> or <code>join</code> attributes to <code>search()</code>. Changing them all manually is possible, but very time consuming.</p>\n\n<p><strong>Is there a way to add a default <code>WHERE</code> clause to all queries which <code>SELECT</code> from or <code>JOIN</code> to a particular table?</strong></p>\n\n<p>I'm after some way to be able to call <code>resultset('MyTable')-&gt;search({},{})</code> and have <code>WHERE is_deleted = 0</code> added to all the queries.\nPlus have the same <code>is_deleted = 0</code> filter applied when <code>prefetch =&gt; [qw(my_table)],</code> is used.</p>\n"}, {"tags": ["perl", "bit-manipulation"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 5, "last_activity_date": 1564343847, "creation_date": 1564343847, "answer_id": 57244486, "question_id": 57244279, "link": "https://stackoverflow.com/questions/57244279/how-to-isolate-leftmost-bytes-in-integer/57244486#57244486", "title": "How to isolate leftmost bytes in integer", "body": "<p><code>number &gt;&gt; 16</code> returns <code>number</code> shifted by 16 bit and not the shifted bits as you seem to assume. To get the last 16 bit you might for example use <code>number % 2**16</code> or <code>number &amp; 0xffff</code>. To get to <code>b</code> and <code>c</code> you can just shift before getting the last 16 bits, i.e.</p>\n\n<pre><code>$a = $number &amp; 0xffff;\n$b = ($number &gt;&gt; 16) &amp; 0xffff;\n$c = ($number &gt;&gt; 32) &amp; 0xffff;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1564429942, "last_edit_date": 1564429942, "creation_date": 1564353555, "answer_id": 57245479, "question_id": 57244279, "link": "https://stackoverflow.com/questions/57244279/how-to-isolate-leftmost-bytes-in-integer/57245479#57245479", "title": "How to isolate leftmost bytes in integer", "body": "<p>If you have 6 bytes, you don't need to convert them to a number first. You can use one the following depending on the order of the bytes: (Uppercase represents the most significant byte.)</p>\n\n<pre><code>my ($num_c, $num_b, $num_a) = unpack('nnn', \"\\xCC\\xcc\\xBB\\xbb\\xAA\\xaa\");\nmy ($num_a, $num_b, $num_c) = unpack('nnn', \"\\xAA\\xaa\\xBB\\xbb\\xAA\\xaa\");\nmy ($num_c, $num_b, $num_a) = unpack('vvv', \"\\xcc\\xCC\\xbb\\xBB\\xaa\\xAA\");\nmy ($num_a, $num_b, $num_c) = unpack('vvv', \"\\xaa\\xAA\\xbb\\xBB\\xcc\\xCC\");\n</code></pre>\n\n<hr>\n\n<p>If you are indeed provided with a number <code>0xCCccBBbbAAaa</code>), you can convert it to bytes then extract the numbers you want from it as follows:</p>\n\n<pre><code>my ($num_c, $num_b, $num_a) = unpack('xxnnn', pack('Q&gt;', $num));\n</code></pre>\n\n<p>Alternatively, you could also use an arithmetic approach like you attempted.</p>\n\n<pre><code>my $num_a =   $num         &amp; 0xFFFF;\nmy $num_b = ( $num &gt;&gt; 16 ) &amp; 0xFFFF;\nmy $num_c =   $num &gt;&gt; 32;\n</code></pre>\n\n<p>While the previous two solutions required a <a href=\"https://stackoverflow.com/a/26172826/589924\">Perl built to use 64-bit integers</a>, the following will work with any build of Perl:</p>\n\n<pre><code>my $num_a =      $num           % 2**16;\nmy $num_b =    ( $num / 2**16 ) % 2**16;\nmy $num_c = int( $num / 2**32 );\n</code></pre>\n\n<hr>\n\n<p>Let's look at <code>( $num &gt;&gt; 16 ) &amp; 0xFFFF</code> in detail.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Original number: 0x0000CCccBBbbAAaa\nAfter shifting:  0x00000000CCccBBbb\nAfter masking:   0x000000000000BBbb\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 10305221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa08ecccef1aae6a730f3806d9784727?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Leto", "link": "https://stackoverflow.com/users/10305221/duke-leto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 57245479, "answer_count": 2, "score": 2, "last_activity_date": 1564429942, "creation_date": 1564342022, "last_edit_date": 1564396105, "question_id": 57244279, "link": "https://stackoverflow.com/questions/57244279/how-to-isolate-leftmost-bytes-in-integer", "title": "How to isolate leftmost bytes in integer", "body": "<p>This has to be done in Perl:</p>\n\n<p>I have integers on the order of e.g. 30_146_890_129 and 17_181_116_691 and 21_478_705_663.</p>\n\n<p>These are supposedly made up of 6 bytes, where:</p>\n\n<ul>\n<li>bytes 0-1 : value <code>a</code></li>\n<li>bytes 2-3 : value <code>b</code></li>\n<li>bytes 4-5 : value <code>c</code></li>\n</ul>\n\n<p>I want to isolate what value <code>a</code> is. How can I do this in Perl?</p>\n\n<p>I've tried using the <code>&gt;&gt;</code> operator:</p>\n\n<pre><code>perl -e '$a = 330971351478 &gt;&gt; 16; print \"$a\\n\";'\n5050222\n</code></pre>\n\n<pre><code>perl -e '$a = 17181116691 &gt;&gt; 16; print \"$a\\n\";'\n262163\n</code></pre>\n\n<p>But these numbers are not on the order of what I am expecting, more like 0-1000.</p>\n\n<p>Bonus if I can also get values <code>b</code> and <code>c</code> but I don't really need those.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "emacs", "indentation"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564347134, "post_id": 57243510, "comment_id": 100990350, "body": "Seems like <code>cperl-mode</code> does not recognize the <code>__DATA__</code> block. Instead it believes that <code>abcdef</code> is a regular Perl statement, and then sees that there is no semicolon at the end of that line, and therefore it assumes the statement continues on the next line and uses <a href=\"https://github.com/jrockway/cperl-mode/blob/master/cperl-mode.el#L282\" rel=\"nofollow noreferrer\"><code>cperl-continued-statement-offset</code></a> to indent the line with <code>ghijkl</code>. Try put a semicolon at the end of the previous line, to verify this"}, {"owner": {"reputation": 171, "user_id": 9910820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hlgsbfpl9QQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1U2zjl0Av5SsXDhMNjQr5C4e0WKA/mo/photo.jpg?sz=128", "display_name": "Patrik", "link": "https://stackoverflow.com/users/9910820/patrik"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564347815, "post_id": 57243510, "comment_id": 100990487, "body": "Yes H&#229;kon, it seems you are correct. With a semicolon at the end of the first line, the second line does not become intented."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564364023, "post_id": 57243510, "comment_id": 100993253, "body": "Probably won&#39;t make a difference, but have you tried using <code>__END__</code> instead of <code>__DATA__</code>. In a script, these are the same. (In a module, these are different.)"}, {"owner": {"reputation": 171, "user_id": 9910820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hlgsbfpl9QQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1U2zjl0Av5SsXDhMNjQr5C4e0WKA/mo/photo.jpg?sz=128", "display_name": "Patrik", "link": "https://stackoverflow.com/users/9910820/patrik"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564393852, "post_id": 57243510, "comment_id": 101002452, "body": "Yes @ikegami, the same thing happens with an <code>__END__</code> block."}, {"owner": {"reputation": 26618, "user_id": 1283394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d7d7689f9562293f6106353a6b1a905?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1283394/stefan"}, "edited": false, "score": 0, "creation_date": 1564423887, "post_id": 57243510, "comment_id": 101017856, "body": "Please clarify the problem: what kind of indentation would you like to see instead (also make it precise whether you&#39;re talking about the case of hitting TAB to reindent a line or reindenting a whole region (or yet something else), since these can be handled differently)."}, {"owner": {"reputation": 171, "user_id": 9910820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hlgsbfpl9QQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1U2zjl0Av5SsXDhMNjQr5C4e0WKA/mo/photo.jpg?sz=128", "display_name": "Patrik", "link": "https://stackoverflow.com/users/9910820/patrik"}, "reply_to_user": {"reputation": 26618, "user_id": 1283394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d7d7689f9562293f6106353a6b1a905?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1283394/stefan"}, "edited": false, "score": 2, "creation_date": 1564434552, "post_id": 57243510, "comment_id": 101021971, "body": "@Stefan: Hitting CR in a <code>__DATA__</code> block indents the next line; I want no automatic indentation there. Also, the <code>__DATA__</code> block gets reindented whenever I write some code above it. For example, opening a block will shift all code below it to the right, until the block is closed; this is of course expected behavior. But the <code>__DATA__</code> block ends up as above, although it wasn&#39;t indented to begin with. I would prefer that the indenter don&#39;t touch the <code>__DATA__</code> block at all."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 26618, "user_id": 1283394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d7d7689f9562293f6106353a6b1a905?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1283394/stefan"}, "edited": false, "score": 0, "creation_date": 1564622912, "post_id": 57243510, "comment_id": 101095000, "body": "@Stefan I assume you are very familiar with Emacs (given your profile), but probably not so much with Perl. Let me clarify, since you seem like you could have some solution to offer: everything that comes after the line <code>__DATA__</code> in Perl isn&#39;t code but rather plain text, and should therefore not be automatically indented (and indenting the whole document should not modify formatting there)."}], "owner": {"reputation": 171, "user_id": 9910820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hlgsbfpl9QQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1U2zjl0Av5SsXDhMNjQr5C4e0WKA/mo/photo.jpg?sz=128", "display_name": "Patrik", "link": "https://stackoverflow.com/users/9910820/patrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1564336038, "creation_date": 1564336038, "question_id": 57243510, "link": "https://stackoverflow.com/questions/57243510/emacs-cperl-indentation-of-data-block", "title": "Emacs cperl indentation of __DATA__ block", "body": "<p>Using Emacs 26.1 with cperl, it indents <strong>DATA</strong> like so:</p>\n\n<pre><code>__DATA__\nabcdef\n    ghijkl\n</code></pre>\n\n<p>Haven't found a fix for this. Any ideas?</p>\n"}, {"tags": ["perl", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 2, "creation_date": 1564336521, "post_id": 57240220, "comment_id": 100987796, "body": "Here&#39;s what I settled on.. I used CSS::Tiny to handle the css in the provider and I add functionality to freeze the vertical scroll bar while I modify font size with Ctrl+mouse wheel."}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 2, "creation_date": 1564336910, "post_id": 57240220, "comment_id": 100987920, "body": "I updated the original post. I added the final version at the bottom."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1564311776, "creation_date": 1564311776, "answer_id": 57240220, "question_id": 57239404, "link": "https://stackoverflow.com/questions/57239404/change-font-size-for-a-textview-widget-in-a-running-gtk3-perl-app/57240220#57240220", "title": "Change font size for a TextView widget in a running Gtk3 Perl app", "body": "<p>Currently I am not able to make the Pango font description to work either. Seems like it is difficult to find a good documentation of how this is supposed to work :)</p>\n\n<p>Anyway, as a workaround, a CSS provider can be used:</p>\n\n<pre><code>sub setFontSize {\n    my ($tView, $font_size) = @_;\n\n    state $provider;\n\n    my $context = $tView-&gt;get_style_context();\n    if ( $provider ) {\n         $context-&gt;remove_provider( $provider );\n    }\n    $provider = Gtk3::CssProvider-&gt;new();\n    my $css = sprintf \"textview {font-size: %spx;}\", $font_size;\n    $provider-&gt;load_from_data($css);\n    $context-&gt;add_provider($provider, Gtk3::STYLE_PROVIDER_PRIORITY_APPLICATION);\n}\n</code></pre>\n"}], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 57240220, "answer_count": 1, "score": 2, "last_activity_date": 1564336759, "creation_date": 1564304878, "last_edit_date": 1564336759, "question_id": 57239404, "link": "https://stackoverflow.com/questions/57239404/change-font-size-for-a-textview-widget-in-a-running-gtk3-perl-app", "title": "Change font size for a TextView widget in a running Gtk3 Perl app", "body": "<p>I'm trying to modify the font size, in a TextView widget, in a running Perl application and I'm having a difficult time of it. Here's one of my attempts(the relevant code is in the function setFontSize).</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse feature qw(state);\nuse local::lib;\n\nuse warnings;\nuse strict;\nuse utf8;\n\nuse constant MAX_FONT_SIZE =&gt; 200;\nuse constant MIN_FONT_SIZE =&gt; 12;\nuse constant FONT_UNIT =&gt; 4;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk3 qw(init);\nuse Pango;\n\nsub killKey {\n    my ($object, $event) = @_;\n    my $c = lc chr ($event-&gt;keyval);\n    Gtk3-&gt;main_quit if $c eq 'q';\n    FALSE;\n}\n\nsub setFontSize {\n    my ($tView, $font_size) = @_;\n    my $pCont = $tView-&gt;get_pango_context();\n    my $fDescr = $pCont-&gt;get_font_description();\n    $fDescr-&gt;set_absolute_size($font_size * Pango::SCALE);\n    my $buf = $tView-&gt;get_buffer();\n    my $end = $buf-&gt;get_end_iter();\n    my $start = $buf-&gt;get_start_iter();\n    my $str = $buf-&gt;get_text($start, $end, TRUE);\n    my $newBuf = Gtk3::TextBuffer-&gt;new();\n    $newBuf-&gt;set_text($str);\n    #$buf-&gt;set_text($buf-&gt;get_text($start, $end, TRUE), -1);\n    $tView-&gt;set_buffer($newBuf);\n    STDOUT-&gt;print(\"called: \", $fDescr-&gt;to_string(),\"\\n\");\n#   {\n#       no strict \"refs\";\n#       \n#       for my $elem (sort keys %{ref($fDescr).\"::\"}) {\n#           STDOUT-&gt;print(\"${elem}\\n\");\n#       }\n#   }\n}\n\nsub catchScroll {\n    my ($object, $event, $tView) = @_;\n\n    state $font_size = 40;\n\n    my $dir = $event-&gt;direction;\n    my ($ctrl, $mod) = @{$event-&gt;state};\n    if ($ctrl eq q&lt;control-mask&gt; &amp;&amp; $mod eq q&lt;mod2-mask&gt;) {\n        if ($dir eq q&lt;up&gt;) {\n            $font_size += FONT_UNIT if $font_size &lt; MAX_FONT_SIZE;\n            setFontSize($tView, $font_size);\n            return FALSE;\n        }elsif ($dir eq q&lt;down&gt;) {\n            $font_size -= FONT_UNIT if $font_size &gt; MIN_FONT_SIZE;\n            setFontSize($tView, $font_size);\n            return FALSE;\n        }\n    }\n    FALSE;\n}\n\nmy $window = Gtk3::Window-&gt;new(q&lt;toplevel&gt;);\nmy $scrWin = Gtk3::ScrolledWindow-&gt;new();\nmy $tView = Gtk3::TextView-&gt;new();\nmy $provider = Gtk3::CssProvider-&gt;new();\n\n$provider-&gt;load_from_path(\"the.css\");\nmy $style = $tView-&gt;get_style_context();\n$style-&gt;add_provider($provider, 600);\n\nmy $str = qx(perldoc -T -t -f split 2&gt;&amp;1);\n\nmy $buf = $tView-&gt;get_buffer();\n$buf-&gt;set_text($str);\nmy $sIter = $buf-&gt;get_start_iter();\n$buf-&gt;place_cursor($sIter);\n#$tView-&gt;set_editable(FALSE);\n\n$window-&gt;add_events(q&lt;GDK_KEY_PRESS_MASK&gt;);\n$window-&gt;add_events(q&lt;GDK_SCROLL_MASK&gt;);\n\n$window-&gt;signal_connect(delete_event =&gt; sub{Gtk3-&gt;main_quit; FALSE});\n$window-&gt;signal_connect(key_press_event =&gt; \\&amp;killKey);\n$window-&gt;signal_connect(scroll_event =&gt; \\&amp;catchScroll, $tView);\n\n$window-&gt;set_border_width(0);\n$window-&gt;fullscreen();\n$window-&gt;set_decorated(FALSE);\n\n$scrWin-&gt;add($tView);\n$window-&gt;add($scrWin);\n\n$window-&gt;show_all;\n\nGtk3-&gt;main;\n</code></pre>\n\n<p>I can hack the font values from the provider and it works perfectly... Kind of makes you wonder why the Gtk3 folks don't have that functionality available for these types of problems. </p>\n\n<p>the.css</p>\n\n<pre><code>text {\n    background-color: rgb(0,0,0); \n    color: rgb(0, 255, 0);\n}\n\ntextview {\n    font-size: 40px;\n}\n</code></pre>\n\n<p>The final version: I added CSS::Tiny to handle the css in provider and added functionality to freeze the vertical scroll bar while I modify the font size with Ctrl+mouse wheel.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse feature qw(state);\nuse warnings;\nuse strict;\nuse utf8;\n\nuse constant MAX_FONT_SIZE =&gt; 200;\nuse constant MIN_FONT_SIZE =&gt; 20;\nuse constant FONT_UNIT =&gt; 4;\nuse constant FONT_START_SIZE =&gt; 40;\n\nuse CSS::Tiny;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk3 qw(init);\n\nsub killKey {\n    my ($object, $event) = @_;\n    my $c = lc chr ($event-&gt;keyval);\n    Gtk3-&gt;main_quit if $c eq 'q';\n}\n\nsub changeFontSize {\n    my ($style, $provider, $font_size) = @_;\n    my $cssStr = $provider-&gt;to_string();\n    my $css = CSS::Tiny-&gt;new();\n    $css = CSS::Tiny-&gt;read_string($cssStr);\n    $css-&gt;{textview}-&gt;{q&lt;font-size&gt;} = \"${font_size}px\";\n\n    $style-&gt;remove_provider($provider);\n    $provider = Gtk3::CssProvider-&gt;new();\n    $provider-&gt;load_from_data($css-&gt;write_string());\n    $style-&gt;add_provider($provider, 600);\n}\n\nsub catchScroll {\n    my ($object, $event, $data) = @_;\n    my ($style, $provider, $vadj) = @{$data};\n    my ($ctrl, $mod) = @{$event-&gt;state};\n    my $dir = $event-&gt;direction;\n\n    my $retval = Gtk3::get_current_event();\n\n    state $font_size = FONT_START_SIZE;\n\n    if ($ctrl eq q&lt;control-mask&gt; &amp;&amp; $mod eq q&lt;mod2-mask&gt;) {\n        if ($dir eq q&lt;up&gt;) {\n            $font_size += FONT_UNIT if $font_size &lt; MAX_FONT_SIZE;\n            changeFontSize($style, $provider, $font_size);\n        }elsif ($dir eq q&lt;down&gt;) {\n            $font_size -= FONT_UNIT if $font_size &gt; MIN_FONT_SIZE;\n            changeFontSize($style, $provider, $font_size);\n        }else {\n        }\n        $vadj-&gt;set_value(0.0);\n    }\n    FALSE;\n}\n\nmy $window = Gtk3::Window-&gt;new(q&lt;toplevel&gt;);\nmy $scrWin = Gtk3::ScrolledWindow-&gt;new();\nmy $tView = Gtk3::TextView-&gt;new();\nmy $provider = Gtk3::CssProvider-&gt;new();\n\n$provider-&gt;load_from_path(q&lt;the.css&gt;);\nmy $style = $tView-&gt;get_style_context();\n$style-&gt;add_provider($provider, 600);\n\nmy $str = qx(perldoc -T -t -f split 2&gt;&amp;1);\n\nmy $buf = $tView-&gt;get_buffer();\n$buf-&gt;set_text($str);\nmy $sIter = $buf-&gt;get_start_iter();\n$buf-&gt;place_cursor($sIter);\n$tView-&gt;set_editable(FALSE);\n\n$window-&gt;add_events(q&lt;GDK_KEY_PRESS_MASK&gt;);\n$window-&gt;add_events(q&lt;GDK_SCROLL_MASK&gt;);\n\n\n$window-&gt;signal_connect(delete_event =&gt; sub{Gtk3-&gt;main_quit; FALSE});\n$window-&gt;signal_connect(key_press_event =&gt; \\&amp;killKey);\n$window-&gt;signal_connect(\n    scroll_event =&gt; \n        \\&amp;catchScroll, \n        [$style, $provider, $scrWin-&gt;get_vadjustment()]\n);\n\n$window-&gt;set_border_width(0);\n$window-&gt;set_position(q&lt;center&gt;);\n$window-&gt;fullscreen();\n$window-&gt;set_decorated(FALSE);\n\n$scrWin-&gt;add($tView);\n$window-&gt;add($scrWin);\n$window-&gt;show_all();\n\nGtk3-&gt;main;\n</code></pre>\n\n<p>the.css</p>\n\n<pre><code>text {\n    background-color: rgb(0, 0, 0); \n    color: rgb(0, 255, 0);\n}\n\ntextview {\n    font-size: 40px;\n}\n</code></pre>\n"}, {"tags": ["powershell", "perl"], "comments": [{"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 1, "creation_date": 1564238104, "post_id": 57230165, "comment_id": 100968809, "body": "<code>perl &#39;C:\\Pr...in\\testcheck.pl -print verbose&#39;</code> -&gt; <code>perl &#39;C:\\Pr...in\\testcheck.pl&#39; -print verbose</code>. If that doesn&#39;t help you need to provide more information. Did you add the path to the Perl executable in your PATH envirenment variable. Also, how <i>exactly</i> is it &quot;not working&quot;?"}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "reply_to_user": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 0, "creation_date": 1564244185, "post_id": 57230165, "comment_id": 100970365, "body": "Can I explicitly mention the Perl executable path in the script itself?"}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "reply_to_user": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 0, "creation_date": 1564244237, "post_id": 57230165, "comment_id": 100970376, "body": "I&#39;m getting the following message                  perl : The term &#39;perl&#39; is not recognized as the name of a cmdlet, function, script file, or operable  program. Check the spelling of the name, or if a path was included, verify that the path is correct  and try again."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1564251220, "post_id": 57230165, "comment_id": 100972057, "body": "Re &quot;<i>I&#39;m getting the following message perl : The term &#39;perl&#39; is not recognized as</i>&quot;, That means that <code>perl.exe</code> isn&#39;t in your path. You&#39;ll need to provide the full path to <code>perl.exe</code> (<code>&amp; &#39;C:\\Program Files (x86)\\ABC\\ABC Software\\perl\\bin\\perl.exe&#39; &#39;C:\\Program Files (x86)\\ABC\\ABC Software\\bin\\testcheck.pl&#39; -print verbose</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1564251243, "post_id": 57230165, "comment_id": 100972066, "body": "Re &quot;<i>Can I explicitly mention the Perl executable path in the script itself?</i>&quot;, You could create a file association. Then, you&#39;d simply treat the script as the program to run ( (<code>&amp; &#39;C:\\Program Files (x86)\\ABC\\ABC Software\\bin\\testcheck.pl&#39; -print verbose</code>)"}], "owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "closed_date": 1564256615, "answer_count": 0, "score": 1, "last_activity_date": 1564237953, "creation_date": 1564213317, "last_edit_date": 1564237953, "question_id": 57230165, "link": "https://stackoverflow.com/questions/57230165/invoke-a-perl-script-from-powershell-and-stores-the-script-output-in-a-variable", "closed_reason": "Duplicate", "title": "Invoke a Perl script from Powershell and stores the script output in a variable", "body": "<p>Could someone try to help me out to run a Perl program from a PowerShell script? I'm trying to save the script results into a PowerShell variable.</p>\n\n<p>So far, I have tried the below from the Powershell ISE. But it does not seem to be working.</p>\n\n<pre><code>perl 'C:\\Program Files (x86)\\ABC\\ABC Software\\bin\\testcheck.pl -print verbose'\n</code></pre>\n\n<p>Powershell Script Path: <code>C:\\MyScripts</code><br>\nPerl Program Dir: <code>C:\\Program Files (x86)\\ABC\\ABC Software\\perl\\bin\\perl.exe</code></p>\n"}, {"tags": ["perl", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 0, "creation_date": 1564179339, "post_id": 57226589, "comment_id": 100959313, "body": "Tried the above code with a label that had no text.... Couldn&#39;t see the background results when I ran it. Added text to the label and there&#39;s the background color change."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1564172529, "creation_date": 1564172529, "answer_id": 57226589, "question_id": 57226197, "link": "https://stackoverflow.com/questions/57226197/how-do-you-modify-the-background-color-of-a-label-in-a-running-gtk3perl-progra/57226589#57226589", "title": "How do you modify the background color of a label in a running Gtk3(Perl) program?", "body": "<p>Here is an example using <a href=\"https://developer.gnome.org/pango/stable/pango-Text-Attributes.html#pango-attr-list-new\" rel=\"nofollow noreferrer\"><code>pango_attr_list_new</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Gtk3 -init;\nuse Pango;\n\n{\n    my $window = Gtk3::Window-&gt;new( 'toplevel' );\n    $window-&gt;signal_connect( destroy  =&gt; sub { Gtk3-&gt;main_quit() } );\n    my $label = Gtk3::Label-&gt;new('Hello world!');\n    my $attrlist = Pango::AttrList-&gt;new();\n    my $fontsize = 20;\n    my $attr1 = Pango::AttrSize-&gt;new($fontsize * Pango::SCALE);\n    $attrlist-&gt;insert($attr1);\n    my $attr2 = Pango::AttrBackground-&gt;new(0x0000, 0xFFFF, 0x0000);\n    $attrlist-&gt;insert( $attr2 );\n    $label-&gt;set_attributes( $attrlist );\n    $window-&gt;add( $label );\n    $window-&gt;set_default_size( 200, 200 );\n    $window-&gt;set_position('center_always');\n    $window-&gt;show_all();\n    Gtk3-&gt;main();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/hfEGT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hfEGT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57226589, "answer_count": 1, "score": 2, "last_activity_date": 1564172529, "creation_date": 1564170306, "question_id": 57226197, "link": "https://stackoverflow.com/questions/57226197/how-do-you-modify-the-background-color-of-a-label-in-a-running-gtk3perl-progra", "title": "How do you modify the background color of a label in a running Gtk3(Perl) program?", "body": "<p>I can't seem to find the proper way to modify the background color of a label in a running Gtk3 Perl program. I can hack at the CSS and modify it there(and the hack works but its sloppy as ****) but I can't find the proper way to do it.</p>\n\n<p>I tried looking at the draw event but couldn't get it to work with a label's background color.</p>\n\n<p>Any pointers?</p>\n"}, {"tags": ["perl", "batch-file"], "comments": [{"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1564218523, "post_id": 57225218, "comment_id": 100964709, "body": "How is this related to <a href=\"https://stackoverflow.com/questions/tagged/batch-file\">batch-file</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564171036, "post_id": 57226115, "comment_id": 100956842, "body": "Hi Hakon, get below errors:  &gt;my $str = do { local $/; ; 0&lt;$fh 1&gt;} The system cannot find the file specified. &gt;close $fh &#39;close&#39; is not recognized as an internal or external command,operable program or batch file. &gt;my $start = q[# Begin Removed Variable]; &#39;my&#39; is not recognized as an internal or external command, operable program or batch file. &gt;my $end = q[# End Removed Variable]; &#39;my&#39; is not recognized as an internal or external command, operable program or batch file. &gt;$str =~ s/\\s*\\Q$start\\E.*?\\Q$end\\E.*?$//gems; &#39;$str&#39; is not recognized as an internal or external command,"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564171238, "post_id": 57226115, "comment_id": 100956913, "body": "@Kumar Hi! You can run the script from the terminal using <code>perl script.pl</code> (if you have saved the script first with the name <code>script.pl</code>)"}, {"owner": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564411006, "post_id": 57226115, "comment_id": 101011693, "body": "Thanks Hakon. It works...but the output is available in cmd window but not replaced in that text file. What command i need to add in so that output of Conif.txt....is replaced in COnfig.txt after processing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564411640, "post_id": 57226115, "comment_id": 101012092, "body": "@Kumar You are welcome. See my updated answer."}, {"owner": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564412307, "post_id": 57226115, "comment_id": 101012481, "body": "If i update using above update i get compilation errors. I replaced original code  with ur update.                           open ( my $fh, &#39;&lt;&#39;, $fn ) or die &quot;Could not open file &#39;$fn&#39;: $!&quot;; my $str = do { local $/; &lt;$fh&gt; }; close $fh;                                                                                         And if put code  to copy the contents into new file as suggested i get below error open ( my $fh, &#39;&lt;&#39;, $fn ) or die &quot;Could not open file &#39;$fn&#39;: $!&quot;; my $str = do { local $/; &lt;$fh&gt; }; close $fh;"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564412961, "post_id": 57226115, "comment_id": 101012836, "body": "@Kumar Can you send me the code? (My email is in my profile)."}, {"owner": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "edited": false, "score": 0, "creation_date": 1564413101, "post_id": 57226115, "comment_id": 101012901, "body": "Sure. Thanks for the help."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1564411608, "last_edit_date": 1564411608, "creation_date": 1564169875, "answer_id": 57226115, "question_id": 57225218, "link": "https://stackoverflow.com/questions/57225218/remove-multiple-deleted-variables-from-txt-file/57226115#57226115", "title": "Remove multiple deleted variables from .txt file", "body": "<p>Here is an example of how it can be done:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $fn = 'config.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $str = do { local $/; &lt;$fh&gt; };\nclose $fh;\n\nmy $start = q[# Begin Removed Variable];\nmy $end = q[# End Removed Variable];\n\n$str =~ s/^\\s*\\Q$start\\E.*?\\Q$end\\E.*?$//gems;\n\nprint $str;\n</code></pre>\n\n<h2>Update</h2>\n\n<p>To overwrite the existing file:</p>\n\n<pre><code>open ( my $save_fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\nprint $save_fh $str;\nclose $save_fh;\n</code></pre>\n\n<p>A safer approach might be not to modify the script, but instead redirect its output to another file, for example:</p>\n\n<pre><code>$ perl script.pl &gt; config_new.txt\n</code></pre>\n\n<p>In this way, the original <code>config.txt</code> becomes a backup file.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1564173850, "creation_date": 1564173850, "answer_id": 57226781, "question_id": 57225218, "link": "https://stackoverflow.com/questions/57225218/remove-multiple-deleted-variables-from-txt-file/57226781#57226781", "title": "Remove multiple deleted variables from .txt file", "body": "<p>A one-liner that edits the file in-place:</p>\n\n<pre><code> perl -ni -e 'print unless /# Begin Removed Variable/ .. /# End Removed Variable/' yourfile.txt\n</code></pre>\n\n<p>Basically, it just prints lines unless they're in one of those removed blocks. <a href=\"https://perldoc.pl/perlop#Range-Operators\" rel=\"nofollow noreferrer\">More information</a> on the use of scalar <code>..</code>.</p>\n\n<p>Non-inplace awk version for comparision (<code>,</code> is like <code>..</code> in perl):</p>\n\n<pre><code> awk '/# Begin Removed Variable/, /# End Removed Variable/ { next } 1' yourfile.txt\n</code></pre>\n\n<p>and sed:</p>\n\n<pre><code>sed '/# Begin Removed Variable/, /# End Removed Variable/ d' yourfile.txt\n</code></pre>\n\n<p>Some versions of sed support <code>-i</code> for inplace editing like perl.</p>\n"}], "owner": {"reputation": 7, "user_id": 11831303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c350e57af5bb1488e20b73702f2acd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/11831303/kumar"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1565811906, "accepted_answer_id": 57226115, "answer_count": 2, "score": -4, "last_activity_date": 1564411608, "creation_date": 1564164987, "last_edit_date": 1564166231, "question_id": 57225218, "link": "https://stackoverflow.com/questions/57225218/remove-multiple-deleted-variables-from-txt-file", "closed_reason": "Needs details or clarity", "title": "Remove multiple deleted variables from .txt file", "body": "<p>I am trying to delete \"Removed variables\" from a text file.\nTo remove data which starts as \"# Begin Removed Variable\" and ends at \"# End Removed Variable\".</p>\n\n<p>The pattern is as below :</p>\n\n<pre><code># Begin Test Case\n\n  File = ..\\SVN\\XXX.CPP\n  Procedure = XX\n  Procedure Number = 1\n  Member Of = 1\n  Creation Date = Jun XX 2019 14:36:44\n  Description = This test is to verify \n\n    # Begin Variable\n\n      Name = YY\n      Decl_type = uchar*\n      Usage = N\n      TBrun Analysis = Compare\n      Value = YY\n\n    # End Variable\n\n    # Begin Removed Variable\n\n      Name = b_side_fired\n      Decl_type = gun_class\n      Usage = M\n\n    # End Removed Variable\n\n# End Test Case\n</code></pre>\n\n<p>I am new to it, so i am unable to judge and proceed.</p>\n\n<p>The output is as stated below. Remove all \"# Begin Removed variables....its contents beneath and end at \"End Removed variables\" and all its occurances in file.\nFor ex: as per below all removed variables are removed.</p>\n\n<pre><code># Begin Test Case\n\n  File = ..\\SVN\\XXX.CPP\n  Procedure = XX\n  Procedure Number = 1\n  Member Of = 1\n  Creation Date = Jun XX 2019 14:36:44\n  Description = This test is to verify \n\n    # Begin Variable\n\n      Name = YY\n      Decl_type = uchar*\n      Usage = N\n      TBrun Analysis = Compare\n      Value = YY\n\n    # End Variable\n# End Test Case\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1564153656, "post_id": 57222687, "comment_id": 100949906, "body": "Please, provide sample input and expected output so we can experiment with them. Also, using characters like <code>\u201c\u201d\u2026</code> requires <code>use utf8;</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1564153935, "post_id": 57222687, "comment_id": 100950048, "body": "Having an <code>END</code> block in the <code>while</code> loop is an interesting approach. What did you think it would do?"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1564155392, "post_id": 57222687, "comment_id": 100950776, "body": "@DaveCross Indeed. Thanks for pointing that out."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564156002, "post_id": 57222687, "comment_id": 100951049, "body": "@choroba I have updated the question. I just realized that if I separate all <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> tags in different lines, this problem would be gone. Initially, all <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> is in the same line for one word entry."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1564156588, "post_id": 57222687, "comment_id": 100951316, "body": "This looks like HTML. Why not just use an HTML parser?"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564156968, "post_id": 57222687, "comment_id": 100951496, "body": "When the structure is easy enough, I tend to use regex directly. But you&#39;re right, it should be bettering off using a parser, considering it&#39;s so easy to go wrong using regex for html file."}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1564157080, "post_id": 57222687, "comment_id": 100951559, "body": "The second <code>if</code> sees the same line, yes. When you don&#39;t specify a variable, regular expressions apply to <code>$_</code>."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1564157309, "post_id": 57222687, "comment_id": 100951665, "body": "@joanis What if the <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> tags are all in the same line, in which case, the second <code>if</code> would read the folllowing <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> not that one the first <code>if</code> is reading?"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1564157661, "post_id": 57222687, "comment_id": 100951825, "body": "No, the second <code>if</code> is searching over the same string, so it will see the same match. You&#39;d need to repeat the pattern in the second regex, so it matches only if it&#39;s there twice. I prefer the solution posted by @codenheim if you can reorganize the code to work as they suggest."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564160762, "post_id": 57222687, "comment_id": 100953118, "body": "I parse it nicely with <code>Marpa</code>, much like in the <a href=\"https://stackoverflow.com/a/57069498/4653379\">original post</a>. But I don&#39;t understand what you want done, can you clarify: Once <code>p.calibre_[0-9]+</code> is found, you extract <code>abc</code> and ... ? replace the element with it? Add it? Make a link like in the linked post? (I don&#39;t see a link in your &quot;<i>expected</i>&quot; result)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564198479, "post_id": 57222687, "comment_id": 100961741, "body": "@melpomene Looks like it but it&#39;s not; it&#39;s a custom format (the <code>&lt;&#47;&gt;</code> needs to stay as it is etc).  There is more about it in (comments to) their previous question, and in the last part of my answer there, linked to in my answer here"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564203995, "post_id": 57222687, "comment_id": 100962377, "body": "A couple of specific questions to clarify.  (1) By all I can see, the <code>$entry</code> and <code>$hw</code> in your code are <i>the same</i>.  What wouldn&#39;t make sense ... am I missing something? (2) You say you want links, and your code prints links, but &quot;<i>result is expected like this</i>&quot; doesn&#39;t show links?  The code I show in my answer parses the HTML sample completely but i need to know what output you need, so that I can finish that."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564218713, "post_id": 57222687, "comment_id": 100964745, "body": "@zdim Sorry to make you confused. (1)Yeah, the <code>=~</code> line really shouldn&#39;t be there. (2)I just deleted the <code>&lt;link</code> part, it&#39;s basically irrelevant to put it there, adding to more confusion."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564218807, "post_id": 57222687, "comment_id": 100964766, "body": "The expected result is to return a combination of that English word as the first line of each word entry(entry head), the corresponding <code>&lt;p</code> tag as the entry body, with the <code>&lt;&#47;&gt;</code> as the entry tail."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564219528, "post_id": 57222687, "comment_id": 100964881, "body": "OK. One more thing.  There is an <code>A</code> (another &quot;head&quot;?) there, and a <code>div</code> inside of which is the <code>1. abc</code> thing, but also another <code>&lt;p&gt;</code> before it (which has no english words). The expected results shows all of these gone? What does that mean -- the whole structure that <i>contains</i> a <code>&lt;p&gt;</code> with English words is replaced?  (Then what if it contains <i>two</i> (or more) <code>&lt;p&gt;</code>&#39;s with English words?)   Or does the &quot;expected result&quot; repalce only that <code>&lt;p&gt;</code> that had english words?  Then does that get embedded inside the original <code>A-div</code>, or added after it?"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564225881, "post_id": 57222687, "comment_id": 100966098, "body": "I wouldn&#39;t use the word <code>replace</code>, it&#39;s more of an <code>extract</code> thing. That is to extract all <code>&lt;p</code> tag (to use as entry body eventually) with certain class containing certain pattern (to use as an entry head eventually) in its content. Everything else is disregarded, be it <code>div</code> or other <code>&lt;p</code> tags that don&#39;t pass the regex match. They&#39;re gone because they didn&#39;t pass the match.:)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564263616, "post_id": 57222687, "comment_id": 100974844, "body": "@jonah_w Alright, that clarifies it.  Edited answer accordingly, to produce needed otuput"}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564158441, "post_id": 57223549, "comment_id": 100952154, "body": "Thanks for the answer. @codenheim Each <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> tag is in one line itself. In this case, do I still need to use the `$`?"}, {"owner": {"reputation": 19032, "user_id": 257090, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/KnHGI.jpg?s=128&g=1", "display_name": "codenheim", "link": "https://stackoverflow.com/users/257090/codenheim"}, "reply_to_user": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564158809, "post_id": 57223549, "comment_id": 100952308, "body": "If so just regex on the string as suggested ignoring the fact that they are 1 line per.. Or use your original code if they are indeed 1 per line, since your problem goes away, no?"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564160054, "post_id": 57223549, "comment_id": 100952836, "body": "Yeah, it&#39;s gone now. Thanks for your alternative solution."}], "tags": [], "owner": {"reputation": 19032, "user_id": 257090, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/KnHGI.jpg?s=128&g=1", "display_name": "codenheim", "link": "https://stackoverflow.com/users/257090/codenheim"}, "is_accepted": false, "score": 3, "last_activity_date": 1564157023, "creation_date": 1564157023, "answer_id": 57223549, "question_id": 57222687, "link": "https://stackoverflow.com/questions/57222687/perl-nested-if-statement/57223549#57223549", "title": "Perl nested if statement", "body": "<p>Ignoring whether a regex is going to handle all of your cases, I will just suggest to use the global flag </p>\n\n<blockquote>\n  <p>/g</p>\n</blockquote>\n\n<p>for the regex matching and forget about lines.</p>\n\n<p>Pull the whole file into a string from <code>&lt;DICT&gt;</code> (use slurp mode by undefining $\\), then use a global regex on the string to match. Use strict regex so that your patterns don't match multiples, and just iterate.</p>\n\n<p><a href=\"http://archive.oreilly.com/oreillyschool/courses/Perl3/Perl3-04.html\" rel=\"nofollow noreferrer\">http://archive.oreilly.com/oreillyschool/courses/Perl3/Perl3-04.html</a></p>\n\n<p>A global regex tells Perl regex engine to maintain a bookmark between matches. </p>\n"}, {"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1564310001, "post_id": 57224587, "comment_id": 100981423, "body": "Beautiful! Thanks @zdim. This has been crystal clear."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1564295898, "last_edit_date": 1564295898, "creation_date": 1564161937, "answer_id": 57224587, "question_id": 57222687, "link": "https://stackoverflow.com/questions/57222687/perl-nested-if-statement/57224587#57224587", "title": "Perl nested if statement", "body": "<p>This is an HTML fragment, so it is better to parse it using a library. However, it is not a fully valid HTML (note that <code>&lt;/&gt;</code>), what throws off most parsers.</p>\n\n<p>I find that <a href=\"https://metacpan.org/pod/release/JKEGL/Marpa-HTML-0.112000/lib/Marpa/HTML.pm\" rel=\"nofollow noreferrer\">Marpa::HTML</a> can parse even this though. See this <a href=\"https://stackoverflow.com/a/57069498/4653379\">post</a>, where the question originates.</p>\n\n<p>The requirement is to extract particular elements and form custom-format \"<em>entries</em>,\" shown in the question under \"<em>result is expected</em>,\" and clarified in comments.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Marpa::HTML qw(html);   \nuse utf8;    \nuse open ':std', ':encoding(UTF-8)';\n\nmy $html = &lt;&lt;END_HTML;\nA\n&lt;div class=\"notes\"&gt;&lt;p class=\"calibre_2\"&gt; \u6ce8\uff1a&lt;/p&gt;&lt;p class=\"calibre_2\"&gt; 1.abc \u5b57\u6bcd&lt;/p&gt;\n&lt;div class=\"notes\"&gt;&lt;p class=\"calibre_1\"&gt;7. some calibre_1 as well&lt;/p&gt;\n&lt;/&gt;\nEND_HTML    #/    \nsay $html;\n\nmy @entries_with_Eng;            \nmy $new_html = Marpa::HTML::html( \\$html, {\n    'p' =&gt; sub {\n        my $attr = Marpa::HTML::attributes();\n        if (exists $attr-&gt;{class} and $attr-&gt;{class} =~ /calibre_[0-9]+/) { #/\n            my $cont = Marpa::HTML::contents();\n            say \"contents: $cont\";\n            if ($cont =~ /[0-9]+\\s*\\.\\s*([a-zA-Z0-9_\\s]+)/) {\n                my $entry = \"$1\\n\" . Marpa::HTML::original() . \"\\n&lt;/&gt;\";\n                push @entries_with_Eng, $entry;\n            }\n        }\n        return;\n    },\n});\n\nsay '';  say for @entries_with_Eng;\n</code></pre>\n\n<p>Note that I extract only a simple-minded selection (ascii <code>\\w</code>, and with a space too so to also capture all such words); please complete that to what defines \"<em>English words</em>\" for your purpose.  </p>\n\n<p>If the HTML string should be changed (and not only some data extracted) that is done by <code>return</code>-ing new content from the closure, what changes the processed item and thus the returned <code>$new_html</code> string  (reference) then differs from the original.  See module documentation.</p>\n\n<p>The above prints</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>A\n&lt;div class=\"notes\"&gt;&lt;p class=\"calibre_2\"&gt; \u6ce8\uff1a&lt;/p&gt;&lt;p class=\"calibre_2\"&gt; 1.abc  \u5b57\u6bcd&lt;/p&gt;\n&lt;div class=\"notes\"&gt;&lt;p class=\"calibre_1\"&gt;7. some calibre_1 as well&lt;/p&gt;\n&lt;/&gt;\n\ncontents:  \u6ce8\uff1a\ncontents:  1.abc  \u5b57\u6bcd\ncontents: 7. some calibre_1 as well\n\nabc  \n&lt;p class=\"calibre_2\"&gt; 1.abc  \u5b57\u6bcd&lt;/p&gt;\n&lt;/&gt;\nsome calibre_1 as well\n&lt;p class=\"calibre_1\"&gt;7. some calibre_1 as well&lt;/p&gt;\n&lt;/&gt;\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "accepted_answer_id": 57224587, "answer_count": 2, "score": 1, "last_activity_date": 1564295898, "creation_date": 1564153374, "last_edit_date": 1592644375, "question_id": 57222687, "link": "https://stackoverflow.com/questions/57222687/perl-nested-if-statement", "title": "Perl nested if statement", "body": "<p>I have this perl codes which basically read every line to find certain pattern. Against that pattern specified by the first <code>if</code> statement, I need to extract some substring from that pattern, hence the second <code>if</code> statement. Looking at the output, I find the result is not quite right, some get wrong binding between result from the two <code>if</code>s. Is is true that second <code>if</code> is reading from the same line as the first <code>if</code>? If not, how to read the same line for the second <code>if</code>?</p>\n\n<pre><code>open(DICT, &quot;&lt;&quot;, $file)\nor die &quot;Cannot open '$file': $!&quot;;\nmy %h;\nwhile (&lt;DICT&gt;) {\n    if (/(&lt;p class=&quot;calibre_\\d+&quot;&gt;\\s*?\\d+\\.\\s*?(?:(?!&lt;p).)*&lt;\\/p&gt;)/) {\n        my $entry = $1;\n        \n        if (/&lt;p class=&quot;calibre_\\d+&quot;&gt;\\s*?\\d+\\.\\s*?\\K([a-zA-Z][a-zA-Z\\-_\\s'\u2019\uff0c\u201c\u201d=\u2026\\)()]+[a-zA-Z'\\-\u2019])/) {\n            my $hw = $1;\n            $h{$entry} = $hw;\n        }\n    }\n    END{\n        while (my ($k, $v) = each %h) {\n            print qq{$v\\n$k\\n&lt;/&gt;\\n}\n        }\n    }\n}\n</code></pre>\n<p>The source text file is like this:</p>\n\n<pre><code>A\n&lt;div class=&quot;notes&quot;&gt;&lt;p class=&quot;calibre_2&quot;&gt;  \u6ce8\uff1a&lt;/p&gt;&lt;p class=&quot;calibre_2&quot;&gt;  1.abc    \u5b57\u6bcd&lt;/p&gt;\n&lt;/&gt;\n</code></pre>\n<p>The result is expected like this:</p>\n\n<pre><code>abc\n&lt;p class=&quot;calibre_2&quot;&gt;  1.abc    \u5b57\u6bcd&lt;/p&gt;\n&lt;/&gt;\n</code></pre>\n<p>That is, for all tags <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code>, if there's an English word within the tag that's behind the pattern <code>\\d\\.</code>, then extract it, link it with the corresponding tag where the word is located.</p>\n<blockquote>\n<p>Update:I just realized that if I separate all <code>&lt;p class=&quot;calibre_\\d+&quot;&gt; </code>tags in different lines, this problem would be gone. Initially, all <code>&lt;p class=&quot;calibre_\\d+&quot;&gt;</code> are in the same line for one word entry.</p>\n<p>So the new question should be: If those tags are in the same line, how to handle them individually?</p>\n</blockquote>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1564124957, "post_id": 57214778, "comment_id": 100934646, "body": "What happens if you use <code>eq</code> instead of <code>==</code>?"}, {"owner": {"reputation": 221, "user_id": 854139, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/79dc0d1a37a8c96b50191190e6499fa9?s=128&d=identicon&r=PG", "display_name": "Perlator", "link": "https://stackoverflow.com/users/854139/perlator"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564125868, "post_id": 57214778, "comment_id": 100935054, "body": "@choroba unbelievably, everything starts to work as intended! But ... WHY???"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 854139, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/79dc0d1a37a8c96b50191190e6499fa9?s=128&d=identicon&r=PG", "display_name": "Perlator", "link": "https://stackoverflow.com/users/854139/perlator"}, "edited": false, "score": 0, "creation_date": 1564126725, "post_id": 57215246, "comment_id": 100935413, "body": "Wow. Thank you for this catch."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1564147600, "last_edit_date": 1564147600, "creation_date": 1564126522, "answer_id": 57215246, "question_id": 57214778, "link": "https://stackoverflow.com/questions/57214778/mongodb-perl-find-one-doesnt-return-data-after-unrelated-code/57215246#57215246", "title": "MongoDB/Perl: find_one doesn&#39;t return data after unrelated code", "body": "<p>Using the numeric comparison operator <code>==</code> numifies the value, but it's probably too large to fit into an integer and becomes a float. It can also just become an integer and lose double quotes when serialized to JSON or similar format. Using <code>eq</code> instead of <code>==</code> keeps the value unchanged.</p>\n"}], "owner": {"reputation": 221, "user_id": 854139, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/79dc0d1a37a8c96b50191190e6499fa9?s=128&d=identicon&r=PG", "display_name": "Perlator", "link": "https://stackoverflow.com/users/854139/perlator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57215246, "answer_count": 1, "score": 2, "last_activity_date": 1564147600, "creation_date": 1564124735, "question_id": 57214778, "link": "https://stackoverflow.com/questions/57214778/mongodb-perl-find-one-doesnt-return-data-after-unrelated-code", "title": "MongoDB/Perl: find_one doesn&#39;t return data after unrelated code", "body": "<p>mongodb is v4.0.5</p>\n\n<p>Perl is 5.26.3</p>\n\n<p>MongoDB Perl driver is 2.0.3</p>\n\n<p>This Data::Dumper output shows what's driving me crazy</p>\n\n<pre><code>INFO - $VAR1 = [\n  '275369249826930689 1',\n  {\n    'conf' =&gt; {\n      'param' =&gt; 'argument'\n    },\n    'id' =&gt; '275369249826930689',\n    'lastmsg' =&gt; '604195211232139552',\n    '_id' =&gt; bless( {\n      'oid' =&gt; ']:\\',&amp;\ufffdh\ufffdGeR'\n    }, 'BSON::OID' )\n  }\n];\n\n352832438449209345 275369249826930689\nINFO - $VAR1 = [\n  '275369249826930689 2'\n];\n</code></pre>\n\n<p>The second INFO - $VAR1 should show the same content as the first one. This is the original code, which I have (see below) broken down to find the culprit.</p>\n\n<pre><code>    ddump([\"$userid 1\",\n        $c_identities-&gt;find_one({\n            channel =&gt; 'chan1',\n            id      =&gt; $userid,\n        })\n    ]);\n    my @filtered = reverse      \n                   grep { $_-&gt;{author}-&gt;{id} == $userid } @{$answers};\n\n    ddump([\"$userid 2\",\n        $c_identities-&gt;find_one({\n            channel =&gt; 'chan1',\n            id      =&gt; $userid,\n        })\n    ]);\n</code></pre>\n\n<p>ddump is just a wrapper for Data::Dumper. If I remove the \"my @filtered\" line, the second find one again returns the expected result (a MongoDB document). $answers is just a listref of hashes - no objects - from some API, completely unrelated to MongoDB.</p>\n\n<p>So I broke the \"reverse grep\" code down to see where the culprit is. The say are the two numbers you see between the dumpers above. This is what I can do, to get answer from the second find_one:</p>\n\n<pre><code>    for my $answer (@{$answers}) {\n        say $answer-&gt;{author}-&gt;{id}, ' ', $userid;\n        push @filtered, $answer;\n    }\n</code></pre>\n\n<p>As long as I do just this, the second find_one delivers a result. If, however, I do this:</p>\n\n<pre><code>    for my $answer (@{$answers}) {\n        say $answer-&gt;{author}-&gt;{id}, ' ', $userid;\n        if ($answer-&gt;{author}-&gt;{id} == $userid) {\n        }\n        push @filtered, $answer;\n    }\n</code></pre>\n\n<p>I get the output from above (where the second dumper yields no return from the find_one. It's insane - the if-clause containing the numeric eq causes the second find_one to fail! This is also the grep body in the intended code.</p>\n\n<p>What's going on here? How can this have possibly any effect on the MongoDB methods?</p>\n"}, {"tags": ["html", "perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1564395154, "creation_date": 1564395154, "answer_id": 57251618, "question_id": 57213396, "link": "https://stackoverflow.com/questions/57213396/use-form-value-in-another-cgi-script-containing-different-form/57251618#57251618", "title": "Use form value in another cgi script containing different form", "body": "<p>You forgot to declare the circle and techno form elements in the HTML. Also it's pointless and dangerous to parse the form data yourself when you already have the CGI module which does it for you.</p>\n\n<p>Be careful about a potential data loss: have you thought about what should happen when the same name is generated again from the input? As the code is now, the old file with the same name just gets overwritten.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse CGI qw();\nuse HTTP::Status qw(HTTP_UNPROCESSABLE_ENTITY HTTP_METHOD_NOT_ALLOWED HTTP_INTERNAL_SERVER_ERROR);\nuse File::Copy qw(copy);\n\n$CGI::POST_MAX = 1024 * 5000;\nmy $cgi = CGI-&gt;new;\nif ('GET' eq $cgi-&gt;request_method) {\n    STDOUT-&gt;print($cgi-&gt;header('text/html'));\n    STDOUT-&gt;print(&lt;&lt;~'');\n    &lt;!DOCTYPE html&gt;\n    &lt;html&gt;\n        &lt;body&gt;\n            &lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n            &lt;h3&gt;Maintenance File Upload&lt;/h3&gt;\n            &lt;p&gt;&lt;label for=\"circle\"&gt;Circle&lt;/label&gt;:\n            &lt;input type=\"text\" name=\"circle\" id=\"circle\" /&gt;&lt;/p&gt;\n            &lt;p&gt;&lt;label for=\"techno\"&gt;Techno&lt;/label&gt;:\n            &lt;input type=\"text\" name=\"techno\" id=\"techno\" /&gt;&lt;/p&gt;\n            &lt;p&gt;&lt;label for=\"filecsv\"&gt;File to Upload&lt;/label&gt;:\n            &lt;input type=\"file\" name=\"filecsv\" id=\"filecsv\" /&gt;&lt;/p&gt;\n            &lt;p&gt;&lt;input type=\"submit\" name=\"Submit\" value=\"Upload\" /&gt;\n            &lt;input type=\"button\" value=\"Cancel\" onClick=\"javascript:window.close();\"&gt;&lt;/p&gt;\n            &lt;/form&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\n} elsif ('POST' eq $cgi-&gt;request_method) {\n    my %names = (\n        circle =&gt; scalar $cgi-&gt;param('circle'),\n        techno =&gt; scalar $cgi-&gt;param('techno'),\n    );\n    for my $key (keys %names) {\n        my $val = $names{$key};\n        if (not length $val or $val =~ /[^a-zA-Z0-9_.-]/) {\n            STDOUT-&gt;print($cgi-&gt;header(-status =&gt; HTTP_UNPROCESSABLE_ENTITY));\n            STDOUT-&gt;print(\"parameter '$key' validation error: must be any of a-zA-Z0-9_.-\");\n            exit;\n        }\n    }\n    my $upload = $cgi-&gt;upload('filecsv');\n    unless ($upload) {\n        STDOUT-&gt;print($cgi-&gt;header(-status =&gt; HTTP_UNPROCESSABLE_ENTITY));\n        STDOUT-&gt;print(\"upload error: no data for field 'filecsv'\");\n        exit;\n    }\n    my $temporary_name = $cgi-&gt;tmpFileName($upload);\n    my $new_name = sprintf '/opt/IBM/Maintenance/tmp/%s_%s.csv', $names{circle}, $names{techno};\n    my $result = copy $temporary_name, $new_name;\n    my $error = $!;\n    unless ($result) {\n        STDOUT-&gt;print($cgi-&gt;header(-status =&gt; HTTP_INTERNAL_SERVER_ERROR));\n        STDOUT-&gt;print(\"copy error: from '$temporary_name', to '$new_name', error '$error'\");\n        exit;\n    }\n    STDOUT-&gt;print($cgi-&gt;header);\n    STDOUT-&gt;print(\"Thanks for uploading your file!\");\n} else {\n    STDOUT-&gt;print($cgi-&gt;header(-status =&gt; HTTP_METHOD_NOT_ALLOWED));\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11733745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gLBciz242Qw/AAAAAAAAAAI/AAAAAAAAAAA/4wM6m731pZ4/photo.jpg?sz=128", "display_name": "Saurabh Jain", "link": "https://stackoverflow.com/users/11733745/saurabh-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564395154, "creation_date": 1564116881, "question_id": 57213396, "link": "https://stackoverflow.com/questions/57213396/use-form-value-in-another-cgi-script-containing-different-form", "title": "Use form value in another cgi script containing different form", "body": "<p>I need to use form data in another cgi script where another form also exists.Basically I need to create a filename from previous form data and need to rename the file which is uploaded in another form.</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI qw(:standard);\nuse CGI::Carp qw( fatalsToBrowser );\nuse File::Basename;\n\nuse Exporter qw(import);\nour @EXPORT = qw(copyToTarget);\n$newfilename='';\nsub xyz()\n{\n        local ($buffer, @pairs, $pair, $name, $value, %FORM);\n        $ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;\n\n        if ($ENV{'REQUEST_METHOD'} eq \"POST\")\n        {\n                read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});\n        }\n        else\n        {\n                $buffer = $ENV{'QUERY_STRING'};\n        }\n\n        @pairs = split(/&amp;/, $buffer);\n\n        foreach $pair (@pairs)\n        {\n                ($name, $value) = split(/=/, $pair);\n                $value =~ tr/+/ /;\n                $value =~ s/%(..)/pack(\"C\", hex($1))/eg;\n                $FORM{$name} = $value;\n        }\n\n        $Circle = $FORM{Circle};\n        $Techno  = $FORM{Techno};\n        $newfilename = $Circle.'_'.$Techno.'.csv';\n        #print (\"Content-type: text/html\\n\\n\");\n        #print \"$newfilename\";\n}\n\nsub print_page()\n{\n                xyz();\n        print (\"Content-type: text/html\\n\\n\");\n        print &lt;&lt;__HTML__;\n        &lt;form style=\"margin:20px 0\" action=\"Maintenance_Framework.cgi\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n        &lt;p&gt;\n        &lt;h3 align='center'&gt; Maintenance File Upload &lt;/h3&gt;\n        &lt;p&gt;File to Upload: &lt;input type=\"file\" name=\"filecsv\" /&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;input type=\"submit\" name=\"Submit\" value=\"Upload\" &gt;&amp;nbsp&amp;nbsp&amp;nbsp\n        &lt;input type=\"button\"  value=\"Cancel\" onClick=\"javascript:window.close();\"&gt;\n        &lt;/body&gt;\n        &lt;/html&gt;\n        &lt;/form&gt;\n__HTML__\n\n}\n\n\n\nsub main()\n{\n        $CGI::POST_MAX = 1024 * 5000;\n        my $safe_filename_characters = \"a-zA-Z0-9_.-\";\n        my $upload_dir = \"/opt/IBM/Maintenance/tmp\";\n        my $query = new CGI;\n\n        print_page();\n\n\n        my $filename = $query-&gt;param(\"filecsv\");\n        #my $ctext = $query-&gt;param(\"Circle\");\n        if ( !$filename )\n        {\n                exit;\n        }\n\n        my ( $name, $path, $extension ) = fileparse ( $filename, '.csv' );\n        $filename = $name . $extension;\n        $filename =~ tr/ /_/;\n        $filename =~ s/[^$safe_filename_characters]//g;\n\n        if ( $filename =~ /^([$safe_filename_characters]+)$/ )\n        {\n                $filename = $1;\n        }\n        else\n        {\n                die \"Filename contains invalid characters\";\n        }\n\n        my $upload_filehandle = $query-&gt;upload(\"filecsv\");\n\n        open ( UPLOADFILE, \"&gt;$upload_dir/$filename\" ) or die \"$!\";\n                binmode UPLOADFILE;\n\n        while ( &lt;$upload_filehandle&gt; )\n        {\n                print UPLOADFILE;\n        }\n\n        close UPLOADFILE;\n        `mv /opt/IBM/Maintenance/tmp/*.csv /opt/IBM/Maintenance/tmp/$newfilename.csv`;\nprint &lt;&lt;END_HTML;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;title&gt;Thanks!&lt;/title&gt;\n&lt;style type=\"text/css\"&gt;\nimg {border: none;}\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;p&gt;Thanks for uploading your file!&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nEND_HTML\n\n}\n#xyz();\nmain();\n</code></pre>\n\n<p>For Eg : If Circle contains Gabon and Techno contains RAN and user upload a file xyz.csv ,it should be rename to Gabon_RAN.csv</p>\n"}, {"tags": ["windows", "perl", "cmd", "syswow64"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564131419, "post_id": 57212964, "comment_id": 100937564, "body": "I am not familar with windows, but would <a href=\"https://ss64.com/nt/syntax-64bit.html\" rel=\"nofollow noreferrer\">this</a> be of any value? Or using a module like <a href=\"https://metacpan.org/pod/Win32::Process\" rel=\"nofollow noreferrer\">Win32::Process</a>?"}, {"owner": {"reputation": 377, "user_id": 4505520, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5e536022327badcc08597c5a376c83d5?s=128&d=identicon&r=PG&f=1", "display_name": "lionel", "link": "https://stackoverflow.com/users/4505520/lionel"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564138096, "post_id": 57212964, "comment_id": 100941194, "body": "@H&#229;konH&#230;gland Thanks for the links, I used Process Explorer to check the cmd image type (32 bit or 64 bit)to be right as my description. I could only use one line perl as I showed so I don&#39;t know if win32::Process would work."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1564364472, "last_edit_date": 1564364472, "creation_date": 1564164718, "answer_id": 57225154, "question_id": 57212964, "link": "https://stackoverflow.com/questions/57212964/how-to-launch-a-x64-shell-using-x86-perl-system-on-windows/57225154#57225154", "title": "How to launch a x64 shell using x86 perl system on windows", "body": "\n\n<p>The following demonstrates the problem simply:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;sp5300-x64\\perl\\bin\\perl -e\"system 'set'\" | perl -ne\"print if /^ProgramFiles=/i\"\nProgramFiles=C:\\Program Files\n\n&gt;sp5300-x86\\perl\\bin\\perl -e\"system 'set'\" | perl -ne\"print if /^ProgramFiles=/i\"\nProgramFiles=C:\\Program Files (x86)\n</code></pre>\n\n<p>The difference is due to Windows running <code>C:\\Windows\\SysWOW64\\cmd.exe</code> instead of <code>C:\\Windows\\System32\\cmd.exe</code>. This is the result of transparent internal translations, not differences in <code>PATH</code>, so being more explicit with the path doesn't help.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;sp5300-x86\\perl\\bin\\perl -e\"system 'C:\\Windows\\System32\\cmd /x /d /c set'\" | perl -ne\"print if /^ProgramFiles=/i\"\nProgramFiles=C:\\Program Files (x86)\n</code></pre>\n\n<p>The <a href=\"https://social.technet.microsoft.com/wiki/contents/articles/26681.open-64-bit-command-prompt-in-32-bit-command-prompt-to-execute-64-bit-command-prompt-through-sccm.aspx\" rel=\"nofollow noreferrer\">solution</a> is to create a link to <code>cmd.exe</code>, and use that instead. This bypasses Windows's shenanigans.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;mklink cmd64.exe \"C:\\Windows\\System32\\cmd.exe\"\nsymbolic link created for cmd64.exe &lt;&lt;===&gt;&gt; C:\\Windows\\System32\\cmd.exe\n\n&gt;sp5300-x86\\perl\\bin\\perl -e\"system 'cmd64 /x /d /c set'\" | perl -ne\"print if /^ProgramFiles=/i\"\nProgramFiles=C:\\Program Files\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 4505520, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5e536022327badcc08597c5a376c83d5?s=128&d=identicon&r=PG&f=1", "display_name": "lionel", "link": "https://stackoverflow.com/users/4505520/lionel"}, "edited": false, "score": 0, "creation_date": 1564330942, "post_id": 57231921, "comment_id": 100986469, "body": "This really solved my problem! I don&#39;t have to call x86 perl and x64 perl with the same statement so this is enough for me. To make it more clear, what does the option <code>&#47;x &#47;d &#47;c</code> mean for cmd.exe?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 377, "user_id": 4505520, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5e536022327badcc08597c5a376c83d5?s=128&d=identicon&r=PG&f=1", "display_name": "lionel", "link": "https://stackoverflow.com/users/4505520/lionel"}, "edited": false, "score": 0, "creation_date": 1564364381, "post_id": 57231921, "comment_id": 100993309, "body": "@lionel, See <code>help cmd</code> or <code>cmd &#47;?</code> (both do the same thing)"}], "tags": [], "owner": {"reputation": 1234, "user_id": 4561332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fdf253825f225882cac17a4e983104?s=128&d=identicon&r=PG&f=1", "display_name": "sst", "link": "https://stackoverflow.com/users/4561332/sst"}, "is_accepted": true, "score": 1, "last_activity_date": 1564364729, "last_edit_date": 1564364729, "creation_date": 1564228726, "answer_id": 57231921, "question_id": 57212964, "link": "https://stackoverflow.com/questions/57212964/how-to-launch-a-x64-shell-using-x86-perl-system-on-windows/57231921#57231921", "title": "How to launch a x64 shell using x86 perl system on windows", "body": "<p>The <a href=\"https://docs.microsoft.com/en-us/windows/win32/winprog64/file-system-redirector\" rel=\"nofollow noreferrer\">File System Redirector</a>\nof WOW64 emulator redirects file system paths of <code>%SystemRoot%\\system32</code> to <code>%SystemRoot%\\SysWOW64</code> where <code>%SystemRoot%</code> is the a system environment variable which refers to the Windows directory e.g. <code>C:\\Windows</code>.</p>\n\n<p>So normally, the WOW64 processes (32-bit processes running on 64-bit windows) can not access the <code>system32</code> directory.</p>\n\n<p>However, starting with windows Vista, the 32-bit processes can refer to and access the files and folder in the <code>sysetm32</code> directory by replacing <code>system32</code> with the special alias <code>SysNative</code> in the file path.</p>\n\n<p>To launch the x64 cmd shell from a x86 perl instance, you need to explicitly specify the path to the 64-bit cmd.exe by <code>%SystemRoot%\\SysNative\\cmd.exe</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Path_to_x86_perl\\perl -e \"system $ENV{SystemRoot}.'\\sysnative\\cmd.exe /x /d /c start /b /wait /affinity 100000000 my.exe'\"\n</code></pre>\n\n<p>Note, however, that this only works on a WOW64 process, So it can not be used as a single one-liner solution for both x86 and x64 versions of perl under Windows. However, you could use the following in a program:</p>\n\n<pre><code>use Config qw( %Config );\nmy $system = $ENV{SystemRoot} . '\\\\' . ( $Config{ptrsize} == 4 ? 'SysNative' : 'System32' );\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 4505520, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5e536022327badcc08597c5a376c83d5?s=128&d=identicon&r=PG&f=1", "display_name": "lionel", "link": "https://stackoverflow.com/users/4505520/lionel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 57231921, "answer_count": 2, "score": 2, "last_activity_date": 1564364729, "creation_date": 1564113181, "last_edit_date": 1564165180, "question_id": 57212964, "link": "https://stackoverflow.com/questions/57212964/how-to-launch-a-x64-shell-using-x86-perl-system-on-windows", "title": "How to launch a x64 shell using x86 perl system on windows", "body": "<p>I use perl to call <code>system start</code> that I need to specify the cpu number which I want my program to bind to. </p>\n\n<p>When I use x86 perl, it will launch x86 <code>cmd</code> to run the start command. This x86 <code>start</code> doesn't accept the parameter <code>0x100000000</code> as it exceeds 32 bit length. If I use a x64 perl, the whole thing works fine because x64 perl launch x64 <code>cmd</code> which accepts <code>0x100000000</code>. </p>\n\n<p>So how can I launch a x64 <code>cmd</code> to run the <code>start</code> command when using a 32-bit perl?</p>\n\n<p><strong>Details:</strong></p>\n\n<p>First, I verified that 32bit cmd shell doesn't accept <code>start /affinity 100000000</code> while 64bit cmd shell does. In 32bit cmd shell, it throws error <code>The system cannot accept the START command parameter 100000000.</code></p>\n\n<p>Then I tried x64 perl and x86 perl respectively and find x86 perl will get the same error. See commands below.</p>\n\n<pre><code>path/to/x64/perl.exe -e \"system qq{start /b /wait /affinity 100000000 my.exe}\"\npath/to/x86/perl.exe -e \"system qq{start /b /wait /affinity 100000000 my.exe}\"\n</code></pre>\n\n<p>Is there any method to launch a x64 shell using x86 perl to excute start?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564195402, "post_id": 57211557, "comment_id": 100961441, "body": "<code>my $last = pop @path; my $target = \\%hash; for my $path_elem (@path) { $target = ($target-&gt;{$path_elem} ||= {}); } push @{ $target-&gt;{$last} }, $value;</code> simplifies to <code>my $p = \\\\%hash; $p = \\( $$p-&gt;{$path_elem} ) for @path; push @$$p, $value;</code>"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564197854, "post_id": 57211557, "comment_id": 100961668, "body": "Yeah, I suppose :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1564291547, "post_id": 57211557, "comment_id": 100978045, "body": "one of the most common (though still uncommon) uses of scalar references :)"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1564099699, "creation_date": 1564099699, "answer_id": 57211557, "question_id": 57211459, "link": "https://stackoverflow.com/questions/57211459/perl-creating-dynamic-nested-hash/57211557#57211557", "title": "Perl Creating dynamic nested hash", "body": "<p>Fairly general solution:</p>\n\n<pre><code>my $input = 'XXI3|XI39|MP0@1 XXI3|XI39|MP0@2 XXI3|XI39|MP0@3 XXI3|XI39|MP0@4 XXI3|XI39|MP0@5';\nmy %hash; # output\n\nfor my $word (split \" \", $input) {\n  my ($path, $value) = split /\\@/, $word, 2;\n  my @path = split /\\|/, $path;\n  my $last = pop @path;\n\n  my $target = \\%hash;\n  for my $path_elem (@path) {\n    $target = ($target-&gt;{$path_elem} ||= {});\n  }\n  push @{ $target-&gt;{$last} }, $value;\n}\n</code></pre>\n\n<p>First, break up the input into words, and process one word at a time.</p>\n\n<p>Then separate the \"path\" and \"value\" portions of the word by splitting on <code>@</code>. Split the path into its components on <code>|</code>. Remove the last component of the path and save it for later.</p>\n\n<p>Take a reference to the top of the data structure, and for each component in the path (except for the last), go down one level, creating that level as an empty hash if it doesn't already exist.</p>\n\n<p>For the last path component, push onto an array reference (which will be created by autovivification if necessary).</p>\n\n<p>Result:</p>\n\n<pre><code>{\n  'XXI3' =&gt; {\n              'XI39' =&gt; {\n                          'MP0' =&gt; [\n                                     '1',\n                                     '2',\n                                     '3',\n                                     '4',\n                                     '5'\n                                   ]\n                        }\n            }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1564101605, "creation_date": 1564101605, "answer_id": 57211729, "question_id": 57211459, "link": "https://stackoverflow.com/questions/57211459/perl-creating-dynamic-nested-hash/57211729#57211729", "title": "Perl Creating dynamic nested hash", "body": "<pre><code>use Data::Diver 'DiveRef';\n\nmy %myhash;\nfor my $line (&lt;$filehandle&gt;) {\n    chomp $line;\n    my ($keys, $value) = split /\\@/, $line;\n    my @keys = split /\\|/, $keys;\n    push @${ DiveRef(\\%myhash, \\(@keys)) }, $value\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8464708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc5bd1954504f576f7818abc417ce9e?s=128&d=identicon&r=PG&f=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/8464708/prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1564195521, "answer_count": 2, "score": 1, "last_activity_date": 1564101605, "creation_date": 1564098622, "last_edit_date": 1564101112, "question_id": 57211459, "link": "https://stackoverflow.com/questions/57211459/perl-creating-dynamic-nested-hash", "closed_reason": "Duplicate", "title": "Perl Creating dynamic nested hash", "body": "<p>I have below input </p>\n\n<pre><code>XXI3|XI39|MP0@1\nXXI3|XI39|MP0@2\nXXI3|XI39|MP0@3\nXXI3|XI39|MP0@4\nXXI3|XI39|MP0@5\n</code></pre>\n\n<p>Can someone help to get below output ...</p>\n\n<p>$myhash{'XXI3'}{'XI39'}{'MP0'} => (1,2,3,4,5)</p>\n\n<p>I tried to create a nested hash using string concat and eval functions and am just not getting how to form array in value of nested hash.</p>\n"}, {"tags": ["arrays", "perl", "reference", "push"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564095724, "post_id": 57210985, "comment_id": 100928401, "body": "Try <code>my @array = @{ $value-&gt;{array} }</code> instead of <code>my @array = $value-&gt;{array}</code>"}, {"owner": {"reputation": 95, "user_id": 7625623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c7145b56f7f525978af5ba223e9019?s=128&d=identicon&r=PG&f=1", "display_name": "Scottt", "link": "https://stackoverflow.com/users/7625623/scottt"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564104217, "post_id": 57210985, "comment_id": 100929809, "body": "Wow, thanks so much for this. I&#39;m not surprised it was something so simple, but I&#39;m still a bit lost here. I&#39;m guessing that wrapping what I thought was an array actually wasn&#39;t and it changes the context?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564128183, "post_id": 57210985, "comment_id": 100936105, "body": "You are welcome! The issue was that <code>$value-&gt;{array}</code> is an array reference. If it is assigned to <code>@array</code>, it becomes an array of length one, where the first  (and only) element is the reference to <code>$value-&gt;{array}</code>. However, if you put an <code>@</code> in front of the array reference it will unpack it into a real array (not a reference to an array). See <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> and <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> for more information."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7625623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c7145b56f7f525978af5ba223e9019?s=128&d=identicon&r=PG&f=1", "display_name": "Scottt", "link": "https://stackoverflow.com/users/7625623/scottt"}, "edited": false, "score": 0, "creation_date": 1565918240, "post_id": 57215970, "comment_id": 101503478, "body": "Thanks a ton for the more in depth explanation Dave!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1564129386, "creation_date": 1564129386, "answer_id": 57215970, "question_id": 57210985, "link": "https://stackoverflow.com/questions/57210985/joining-two-arrays-within-a-nested-hash/57215970#57215970", "title": "joining two arrays within a nested hash", "body": "<blockquote>\n<pre><code>my $value     = decode_json $data-&gt;{value};\n</code></pre>\n</blockquote>\n\n<p>Here, you're decoding your JSON into a Perl data structure. It's a reference (as we can see by the fact that it's stored in a scalar variable), but we're not yet sure what kind of reference it is.</p>\n\n<blockquote>\n<pre><code>my @array = $value-&gt;{array};\n</code></pre>\n</blockquote>\n\n<p>Ok, here we get a clue as to the kind of reference. I guess you expect it to be an array reference as you're trying to store in an array. But you're just storing the reference in the array. If you were to look at the array at this point, it would contain a single element with a value like <code>ARRAY(0x99999999)</code>. This is the equivalent of doing:</p>\n\n<pre><code>my @array = [ 'list', 'of', 'values' ];\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>my @array = \\@some_other_array;\n</code></pre>\n\n<p>What I think you actually want is:</p>\n\n<pre><code>my @array = @{ $value-&gt;{array} };\n</code></pre>\n\n<p>This deferences the array reference and stores the actual elements from the references array in the new array. This is the equivalent of:</p>\n\n<pre><code>my @array = ( 'list', 'of', 'values' );\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>my @array = @some_other_array;\n</code></pre>\n\n<p>I hope the difference is clear.</p>\n"}], "owner": {"reputation": 95, "user_id": 7625623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c7145b56f7f525978af5ba223e9019?s=128&d=identicon&r=PG&f=1", "display_name": "Scottt", "link": "https://stackoverflow.com/users/7625623/scottt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564129386, "creation_date": 1564094320, "last_edit_date": 1564095640, "question_id": 57210985, "link": "https://stackoverflow.com/questions/57210985/joining-two-arrays-within-a-nested-hash", "title": "joining two arrays within a nested hash", "body": "<p>I'm running a script that counts the contents of a database query and return the result in a hash for more processing.\nUnfortunately, what seems to be happening is that the array fills up with arrays rather than them being joined together.</p>\n\n<p>Im not sure what's going on here exactly as when I remove it from the while loop and just define the arrays manually for pushing, they are all pushed into one array under my key as expected.</p>\n\n<pre><code>while ( my $data = $query-&gt;fetchrow_hashref ) {\n    my $value     = decode_json $data-&gt;{value};\n    my @array = $value-&gt;{array};\n    my %hash;\n    my $person = \"Scott\";\n    push @{$hash{$person}-&gt;{\"arrays\"}}, @array;\n}\n</code></pre>\n\n<p>Dumper results in the following:</p>\n\n<pre><code>      'scott' =&gt; {\n                    'arrays' =&gt; [\n                                [\n                                  'stuff1', 'stuff2'\n                                ],\n                                [\n                                  'stuff3','stuff4'\n                                ],\n                               ]\n                   }\n</code></pre>\n\n<p>I expect the array not to become a nest of other arrays, Instead just one array containing the stuff\\d values</p>\n"}, {"tags": ["perl", "include"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1564190243, "post_id": 57209301, "comment_id": 100960993, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/197069/discussion-on-question-by-sfr-including-a-perl-file-that-is-generated-in-current\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564090129, "post_id": 57210113, "comment_id": 100927028, "body": "Thank you for this! I was getting an error while trying to use JSON. The way that I am getting my data for the hash is by pushing into an array and then using decode_json(\\%that_variable); I don&#39;t actually manually type the data that goes on. The data generated for the array I&#39;m using to make the hash is coming from some automated scripts. I get the error saying &quot;malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before &quot;HASH(0x884248)&quot;)&quot;."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564090245, "post_id": 57210113, "comment_id": 100927059, "body": "I seems like the JSON file is not correct. Can you check if it looks ok? If the JSON file is malformed, it is likely a problem with how you pass the data to <code>encode_json</code> before you write the file"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564090761, "post_id": 57210113, "comment_id": 100927216, "body": "I just fixed some mistakes I had and it is now working. i guess this brings me to my question: I am running the main portion of the code that calls the sub in a foreach loop. I need a hash generated for 4 files. I still don&#39;t understand how I can access those hashes as variables in my script."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564091059, "post_id": 57210113, "comment_id": 100927293, "body": "It is difficult to know what to recommend without seeing the code. Maybe you could send me the code?"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 1, "creation_date": 1564091142, "post_id": 57210113, "comment_id": 100927315, "body": "Unfortunately, I am not allowed to due to my company privacy policy but I&#39;ll try to do some extra research on the matter. Thank you for helping me get the output using JSON though!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1564111441, "post_id": 57210113, "comment_id": 100930929, "body": "@sfr, <code>decode_json(\\%that_variable)</code> makes no sense. It should be <code>decode_json($json)</code>"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564169968, "post_id": 57210113, "comment_id": 100956479, "body": "@ikegami I got it to work eventually. Just worked off of his example."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1564089136, "last_edit_date": 1564089136, "creation_date": 1564088744, "answer_id": 57210113, "question_id": 57209301, "link": "https://stackoverflow.com/questions/57209301/including-a-perl-file-that-is-generated-in-current-file/57210113#57210113", "title": "Including a perl file that is generated in current file", "body": "<p>Here is an example how you can save a hash as JSON to a file and later read back the JSON to a perl hash. This example is using <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\"><code>JSON::XS</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nuse JSON::XS;\n\n{\n    my %h = (a =&gt; 1, b =&gt; 2);\n    my $str = encode_json( \\%h );\n    my $fn = 'test.json';\n    save_json( $fn, \\%h );\n    my $h2 = read_json( $fn );\n    print Dumper( $h2 );\n}\n\n\nsub read_json {\n    my ( $fn ) = @_;\n\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $str = do { local $/; &lt;$fh&gt; };\n    close $fh;\n    my $h = decode_json $str;\n    return $h;\n}\n\nsub save_json {\n    my ( $fn, $hash ) = @_;\n\n    my $str = encode_json( $hash );\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    print $fh $str;\n    close $fh;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; 1,\n          'b' =&gt; 2\n        };\n</code></pre>\n\n<p>Some alternatives to JSON are <a href=\"https://metacpan.org/pod/YAML\" rel=\"nofollow noreferrer\">YAML</a> and <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a>.</p>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 57210113, "answer_count": 1, "score": 1, "last_activity_date": 1564089136, "creation_date": 1564084466, "last_edit_date": 1564086116, "question_id": 57209301, "link": "https://stackoverflow.com/questions/57209301/including-a-perl-file-that-is-generated-in-current-file", "title": "Including a perl file that is generated in current file", "body": "<p>I am working on a perl script that successfully generates output files containing hashes. I want to use those hashes in my file. Is it possible to include a file that is generated in that file or will I have to create another file? </p>\n\n<p>Technically, it might be cleaner to start a new .pl file that uses those hashes, but I would like to keep everything in a single script if possible. Is it even possible to do so?</p>\n\n<p>Edit:  I'm just unsure if I can \"circle\" it back around so I can use those hashes in my file because the hashes are generated on a weekly basis. I don't want my file to mistakenly reach out for last week's hashes instead of the newly generated ones. I have not yet wrote my script in a manner to classify each week's generated hashes.</p>\n\n<p>In summary, here is what my file does. It extracts a table from another file. removes columns and rows that are not needed. Once left with the only two columns needed, it takes them and puts them into a hash. One column being the key and the other being the value. For this reason, I've found Data::Dumper to be the best option for my hashes. I'm intermediate in Perl and this is a script I'm putting together for an internship.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1564080799, "post_id": 57208450, "comment_id": 100923465, "body": "It&#39;s an <i>assertion</i>, just to &quot;look&quot; (no capturing).  If you want to capture use a match."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1564081050, "post_id": 57208450, "comment_id": 100923577, "body": "Otherwise use a lookahead <code>if($names =~ &#47;(.*)(?=_\\d{4}-\\d{2}-\\d{2})&#47;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 4, "last_activity_date": 1564081137, "creation_date": 1564081137, "answer_id": 57208605, "question_id": 57208450, "link": "https://stackoverflow.com/questions/57208450/how-to-do-a-look-behind-in-perl-regex/57208605#57208605", "title": "How to do a look behind in perl regex", "body": "<p>What you probably meant here is a lookahead not a lookbehind:</p>\n\n<pre><code>if($names =~ /(.*)(?=_\\d{4}-\\d{2}-\\d{2})/)\n{\n     print(\"$1\");\n}\n</code></pre>\n\n<p>Expression inside <code>(?=...)</code> is a positive lookahead here which means there is an underscore followed by date string ahead of current position.</p>\n\n<p>Also note that <code>(.*)</code> is a captured group that you need to use to be able to use <code>$1</code> later.</p>\n\n<p><strong>Without capturing group</strong>, you can use:</p>\n\n<pre><code>if($names =~ /.*(?=_\\d{4}-\\d{2}-\\d{2})/)\n{\n     print(\"$&amp;\\n\");\n}\n</code></pre>\n\n<p>Where <code>$&amp;</code> represents full matched string from regex.</p>\n\n<hr>\n\n<p>Otherwise you can just use substitute:</p>\n\n<pre><code>$names =~ s/_\\d{4}-\\d{2}-\\d{2}\\..*//;\nprint(\"$names\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1564081824, "creation_date": 1564081824, "answer_id": 57208740, "question_id": 57208450, "link": "https://stackoverflow.com/questions/57208450/how-to-do-a-look-behind-in-perl-regex/57208740#57208740", "title": "How to do a look behind in perl regex", "body": "<p>Another way is to use a negative lookahead.</p>\n\n<pre><code>if($name =~ /((?:(?!_\\d).)*)/) {\n    print $1\n}\n</code></pre>\n\n<p>This expression will capture everything until an underscore followed by a digit is found.</p>\n\n<p>The <code>(?! ...</code> is the negative lookahead.</p>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57208605, "answer_count": 2, "score": 1, "last_activity_date": 1564081824, "creation_date": 1564080506, "question_id": 57208450, "link": "https://stackoverflow.com/questions/57208450/how-to-do-a-look-behind-in-perl-regex", "title": "How to do a look behind in perl regex", "body": "<p>I am trying to do a look behind using regex.  </p>\n\n<p>What I have tried seems to work but nothing is being captured.</p>\n\n<pre><code>my $names=\"Frank_J_Smith_1980-01-05.doc\";\nif($names =~ /(?![0-9]{4}-[0-9]{2}-[0-9]{2})/)\n{\n     print(\"$1\");\n}\n</code></pre>\n\n<p>I wrote a match statement using the same code and it matches.</p>\n\n<pre><code> if($names =~ /.*_(?![0-9]{4}-[0-9]{2}-[0-9]{2})/)\n {\n   print(\"$1\");\n }\n</code></pre>\n\n<p>I am expecting to see <code>Frank_J_Smtih</code> but I am getting nothing.  It does hit the if statement finds the date but the output is nothing.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564077013, "post_id": 57207508, "comment_id": 100921809, "body": "You could use a tied hash. This will slow things down. A lot. But no more than using an object instead of a hash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564077866, "post_id": 57207508, "comment_id": 100922180, "body": "Sent an email to the Perl5 maintainers"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564082624, "post_id": 57207508, "comment_id": 100924251, "body": "So far, the reply is effectively &quot;If you lock the entire hash (so that keys can&#39;t be added), and if you lock the value of a element (so that it can&#39;t be changed), you can&#39;t delete that element.&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564089116, "post_id": 57207508, "comment_id": 100926733, "body": "From what I can tell there is no way to do what you are asking.  Thus the quoted statement from the docs would be a bug in documentation.  I don&#39;t understand why it&#39;s there, and so prominent."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1564113500, "creation_date": 1564113500, "answer_id": 57212994, "question_id": 57207508, "link": "https://stackoverflow.com/questions/57207508/locking-hash-keys-to-prevent-deletion/57212994#57212994", "title": "Locking hash keys to prevent deletion", "body": "<p>The module only provides a means of making an element of a restricted hash both immutable and undeletable.</p>\n\n<p>To achieve the effect you desired, you'd need <em>magic</em>, such as a tied hash.</p>\n\n<pre><code>package My::Protected::Hash;\n\nuse strict;\nuse warnings;\n\nuse Carp      qw( );\nuse Tie::Hash qw( );\n\nour @ISA = 'Tie::ExtraHash';\n\n# Usage: tie my %hash, My::Protected::Hash::, LIST\nsub TIEHASH  {\n   my $class = shift;\n   my $self = bless([{}, {}]);\n   $self-&gt;[1]{$_} = 1 for @_;\n   return $self;\n}\n\nsub DELETE {\n   my ($self, $key) = @_;\n   Carp::croak(\"Can't delete key \\\"$key\\\"\") if $self-&gt;[1]{$key};\n   return delete($self-&gt;[0]{$key});\n}\n\n# Usage: tied(%hash)-&gt;lock_key(LIST)\nsub lock_key {\n   my $self = shift;\n   $self-&gt;[1]{$_} = 1 for @_;\n}\n\n# Usage: tied(%hash)-&gt;unlock_key(LIST)\nsub unlock_key {\n   my $self = shift;\n   delete @{ $self-&gt;[1] }{@_};\n}\n\n1;\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse FindBin qw( $RealBin );\nuse lib $RealBin;\n\nuse My::Protected::Hash qw( );\n\ntie my %h, My::Protected::Hash::, \"b\", \"c\";\ntied(%h)-&gt;unlock_key(\"b\");\ntied(%h)-&gt;lock_key(\"d\");\nfor my $key (qw( a b c )) {\n   if (eval { delete $h{$key}; 1 }) {\n      say \"Deleted key \\\"$key\\\"\";\n   } else {\n      print $@;\n   }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Deleted key \"a\"\nDeleted key \"b\"\nCan't delete key \"c\" at a.pl line 16.\nCan't delete key \"d\" at a.pl line 16.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 1, "last_activity_date": 1564210262, "creation_date": 1564210262, "answer_id": 57229866, "question_id": 57207508, "link": "https://stackoverflow.com/questions/57207508/locking-hash-keys-to-prevent-deletion/57229866#57229866", "title": "Locking hash keys to prevent deletion", "body": "<p>ikegami answer is, of course, a good example of how to achieve the stated goal without using restricted hashes. I'm going to answer my own question based on the information I've uncovered in my research, with assistance from the comments on the original question, focusing on what can and can't be done with restricted hashes. My technical assessment here is based on experimentation and use of <code>Devel::Peek</code> to see what the underlying data structures look like.</p>\n\n<p>First, it does seem to be that the <code>Hash::Util</code> documentation is misleading. While technically one can lock individual keys so that they can't be deleted, the only way to do this is to also lock them against modification. If you want keys to be mutable but not delible, there is no setting which allows it. You can either use a tie-based solution like ikegami, or work around it using a sub/method which temporarily disables the read-only restriction, updates the value, then makes it read only again.</p>\n\n<p>Restricted hashes work through two tricks: the READONLY flag, and special place-holder values (NULL references) for keys which Perl then treats as \"key does not exist\". The READONLY flag can be applied to the hash, or to the values in the hash. The <code>lock_keys()</code> function manipulates the READONLY flag on the hash; the <code>lock_value()</code> function manipulates it on individual values. The <code>lock_hash()</code> function simply does both, affecting the hash and all the values in it, so we only need to understand the first two functions to understand the process.</p>\n\n<p>The READONLY flag on the hash itself prevents any keys from being added or removed in the hash. At first glance, this seems to be what I wanted, but there's a wrinkle. The idea with restricted hashes is to limit the set of keys which could appear in the hash, without obliging those keys to be present. As such, you can still delete keys in a READONLY hash, but the deletion is simulated by replacing the current value with one of those special place-holder values I mentioned earlier. From the perspective of the running code, the key is gone, but it's still actually there in the underlying data structure, visible if you use the Dump function from <code>Devel::Peek</code>.</p>\n\n<p>The <code>lock_keys()</code> function has a couple of variants which deal with keys that already exist versus keys which don't. If you just call <code>lock_keys(%x)</code>, you simply apply the READONLY flag to <code>%x</code>. If you call <code>lock_keys(%x, @keys)</code>, the process is more involved: first, an exception is thrown if <code>%x</code> contains any keys not present in <code>@keys</code>; then, <code>%x</code> is populated with all keys in <code>@keys</code> not already present in <code>%x</code>; then the READONLY flag is applied; then the keys which were added to <code>%x</code> are deleted again, leaving them associated with the \"does not exist\" place-holder. The <code>lock_keys_plus()</code> method simply skips the first of these steps. If the base <code>lock_keys(%x)</code> function were the only one available, you'd have to prime your hash with all the permitted keys, lock it, and then delete the entries you didn't want at the time.</p>\n\n<p>The <code>lock_value()</code> function is simpler in that it simply applies the READONLY flag to a selected value in the hash. If you do this when the hash itself is not READONLY, you'll get a warning about it being a useless operation. This is not entirely true: the READONLY flag on the value does make the value read-only, it just doesn't protect against the value being deleted from the hash and replaced with a new value that's not read-only. And that brings us to the next point: the READONLY flag on the value protects it against being replaced with that special place-holder which makes it look like the element has been deleted, used when the hash itself is in READONLY mode. Thus, when the hash itself is read-only, values in the hash which are read-only can't be deleted.</p>\n\n<p>Curiously, one thing that the READONLY flag <em>doesn't</em> protect against is replacement of a value using the <code>hv_store()</code> function. Although this can't add keys to an already-locked hash, it can completely replace a locked value with an unlocked one. I guess if you're hacking around that deep, it's on you to provide your own protection against modifying a locked value, if that's what you want. Note that this also provides a cute way to make an ordinary scalar read-only: use <code>hv_store()</code> to alias it into an arbitrary hash, then lock the hash.</p>\n\n<p>Much of this is implementation-dependent, and the <code>Hash::Util</code> documentation makes occasional threatening noises about how the implementation may change, but it's been that way from v5.8.0. to v5.30.0 as far as I can tell. New features are present in more recent versions, but I think my description holds across that entire history. Please add comments if you know of any important deviations from what I've said.</p>\n"}], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1564210262, "creation_date": 1564076413, "question_id": 57207508, "link": "https://stackoverflow.com/questions/57207508/locking-hash-keys-to-prevent-deletion", "title": "Locking hash keys to prevent deletion", "body": "<p>Perl v5.8.0 introduced restricted hashes and the <code>Hash::Util</code> core module as an interface to that functionality. One of the abilities it mentions is, \"the ability to lock an individual key so it cannot be deleted.\" Nothing in the module appears to offer this functionality, however: neither <code>lock_keys()</code> or <code>lock_values()</code> prevents keys from being deleted, and <code>lock_hash()</code> prevents all keys from deletion and modification.</p>\n\n<p>So how do you lock an individual key so it cannot be deleted?</p>\n"}, {"tags": ["perl", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1564076455, "last_edit_date": 1564076455, "creation_date": 1564074983, "answer_id": 57207162, "question_id": 57206502, "link": "https://stackoverflow.com/questions/57206502/how-do-you-modify-font-size-in-a-running-gtk3-app/57207162#57207162", "title": "How do you modify font size in a running Gtk3 app?", "body": "<p>You can also use <a href=\"https://developer.gnome.org/pango/stable/pango-Fonts.html#pango-font-description-set-absolute-size\" rel=\"nofollow noreferrer\"><code>pango_font_description_set_absolute_size()</code></a>. For example:</p>\n\n<pre><code>use feature qw(say state);\nuse strict;\nuse warnings;\nuse constant MAX_FONT_SIZE =&gt; 200;\nuse constant MIN_FONT_SIZE =&gt; 12;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk3 qw(init);\nuse Pango;\n\n{\n    my $window = Gtk3::Window-&gt;new(q&lt;toplevel&gt;);\n    my $label = Gtk3::Label-&gt;new(q&lt;Hello&gt;);\n    set_label_font_size( $label, MIN_FONT_SIZE );\n    $window-&gt;add_events(q&lt;GDK_SCROLL_MASK&gt;);\n    $window-&gt;signal_connect(delete_event =&gt; sub{Gtk3-&gt;main_quit; FALSE});\n    $window-&gt;signal_connect(scroll_event =&gt; sub { get_wheel( $label, @_ ) } );\n    $window-&gt;set_default_size(500, 300);\n    $window-&gt;add($label);\n    $window-&gt;show_all();\n    Gtk3-&gt;main;\n}\n\nsub set_label_font_size {\n    my ( $label, $size ) = @_;\n\n    my $context = $label-&gt;get_pango_context();\n    my $font_description = $context-&gt;get_font_description();\n    $font_description-&gt;set_absolute_size($size * Pango::SCALE);\n    $context-&gt;set_font_description($font_description);\n\n    # A bug or am I missing somthing?? But for now I had to modify the label text in order\n    #   for the fontsize to show up.\n    $label-&gt;set_text( $label-&gt;get_text() );\n}\n\nsub get_wheel {\n    my ($label, $widget, $event ) = @_;\n    my ($ctrl, $mod) = @{$event-&gt;state};\n\n    state $font_size = MIN_FONT_SIZE;\n\n    if ($ctrl eq q&lt;control-mask&gt; &amp;&amp; $mod eq q&lt;mod2-mask&gt;) {\n        if ($event-&gt;direction eq q&lt;up&gt;) {\n            if ($font_size &lt; MAX_FONT_SIZE) {\n                $font_size += 4;\n            }\n        }\n        elsif ($event-&gt;direction eq q&lt;down&gt;){\n            if ($font_size &gt; MIN_FONT_SIZE) {\n                $font_size -= 4;\n            }\n        }\n        else {\n            return FALSE;\n        }\n        set_label_font_size( $label, $font_size );\n    }\n    return FALSE;\n}\n</code></pre>\n"}], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 57207162, "answer_count": 1, "score": 1, "last_activity_date": 1564076455, "creation_date": 1564072078, "question_id": 57206502, "link": "https://stackoverflow.com/questions/57206502/how-do-you-modify-font-size-in-a-running-gtk3-app", "title": "How do you modify font size in a running Gtk3 app?", "body": "<p>I'm trying to find a way(the correct way) to modify the font size in a running Gtk3 Perl app using the Ctrl key plus mouse wheel. I can use the code below to modify the font-size but do you really have to use providers and styles to achieve this?</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse 5.26.1;\n\nuse local::lib;\n\nuse warnings;\nuse strict;\nuse utf8;\nuse constant MAX_FONT_SIZE =&gt; 200;\nuse constant MIN_FONT_SIZE =&gt; 12;\n\nuse Glib qw(TRUE FALSE);\nuse Gtk3 qw(init);\n\nmy $str = \"label {font-size: \".MIN_FONT_SIZE.\"px;}\";\n\nsub getWheel {\n    my ($object, $event, $sp) = @_;\n    my ($ctrl, $mod) = @{$event-&gt;state};\n    my ($style, $provider) = @{$sp};\n\n    state $font_size = MIN_FONT_SIZE;\n\n    if ($ctrl eq q&lt;control-mask&gt; &amp;&amp; $mod eq q&lt;mod2-mask&gt;) {\n        if ($event-&gt;direction eq q&lt;up&gt;) {\n            if ($font_size &lt; MAX_FONT_SIZE) {\n                $font_size += 4;\n                $str = \"label {font-size: ${font_size}px;}\";\n                $provider-&gt;load_from_data ($str, length($str));\n                $style-&gt;add_provider($provider, 600);\n            }\n        }elsif ($event-&gt;direction eq q&lt;down&gt;){\n            if ($font_size &gt; MIN_FONT_SIZE) {\n                $font_size -= 4;\n                $str = \"label {font-size: ${font_size}px;}\";\n                $provider-&gt;load_from_data ($str, length($str));\n                $style-&gt;add_provider($provider, 600);\n            }\n        }\n    }\n\n    FALSE;\n}\n\n\nmy $window = Gtk3::Window-&gt;new(q&lt;toplevel&gt;);\nmy $label = Gtk3::Label-&gt;new(q&lt;Hello&gt;);\nmy $provider = Gtk3::CssProvider-&gt;new();\n\n$provider-&gt;load_from_data ($str, length($str));\nmy $style = $label-&gt;get_style_context();\n$style-&gt;add_provider($provider, 600);\n\n$window-&gt;add_events(q&lt;GDK_SCROLL_MASK&gt;);\n\n$window-&gt;signal_connect(delete_event =&gt; sub{Gtk3-&gt;main_quit; FALSE});\n$window-&gt;signal_connect(scroll_event =&gt; \\&amp;getWheel, [$style, $provider]);\n\n$window-&gt;set_default_size(500, 300);\n\n$window-&gt;add($label);\n\n$window-&gt;show_all();\n\nGtk3-&gt;main;\n</code></pre>\n\n<p>Is there another way to modify the font-size of a running Gtk3 app?</p>\n"}, {"tags": ["mysql", "perl", "dbd"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1564063267, "post_id": 57203803, "comment_id": 100914898, "body": "Active Perl comes with its own package repository for CPAN packages that are precompiled. It should have ended up in your start menu somewhere. Install DBI and DBD::mysql from there."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1564063629, "post_id": 57203803, "comment_id": 100915106, "body": "Active Perl doesn&#39;t give you a great environment for installing and building CPAN modules. I&#39;d recommend using <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> instead."}, {"owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564064322, "post_id": 57203803, "comment_id": 100915505, "body": "simbabque - Looking at the Perl Package Manager I see that DBD-CSV, DBD-ODBC, DBD-Oracle, DBD-Pg, &amp; DBD-SQLite are all installed. However, switching to All Packages does not include any additional DBD options.Also, it looks like DBI is already installed."}, {"owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564064389, "post_id": 57203803, "comment_id": 100915546, "body": "Dave Cross - I have heard that Strawberry Perl is another option, but not for me. I need to replicate what production looks like."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1564064871, "post_id": 57203803, "comment_id": 100915821, "body": "It looks like DBD-mysql <a href=\"https://code.activestate.com/ppm/DBD-mysql/\" rel=\"nofollow noreferrer\">is available in PPM</a> (honestly, I&#39;d be stunned if it wasn&#39;t). So you just need to install it by <a href=\"http://docs.activestate.com/activeperl/5.24/perl/faq/ActivePerl-faq2.html\" rel=\"nofollow noreferrer\">following these instructions</a>."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564066420, "post_id": 57204613, "comment_id": 100916774, "body": "Thanks Brian, but still have issue. I used the cpan DBD::mysql command, results It looks like you don&#39;t have a C compiler and make utility installed.  Trying to install dmake and the MinGW gcc compiler using the Perl Package Manager.  ppm.bat install failed: Can&#39;t find any package that provides MinGW  It looks like the installation of dmake and MinGW has failed.    Can&#39;t locate Devel/CheckLib.pm in @INC (you may need to install the Devel::CheckLib module) (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at Makefile.PL line 12. BEGIN failed--compilation aborted at Makefile.PL line 12."}, {"owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564066682, "post_id": 57204613, "comment_id": 100916908, "body": "When I tried to install Devel::CheckLib I get a message: &#39;dmake&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564078520, "post_id": 57204613, "comment_id": 100922477, "body": "If you are using ActivePerl, use ppm. What happened when you tried that?"}, {"owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 0, "creation_date": 1564083316, "post_id": 57204613, "comment_id": 100924536, "body": "In ppm when I look at installed packages I see DBD-ODBC, DBD-Oracle, etc. but no DBD-mySql. And going from installed apps to all apps does not seem to make a difference. I also tried clicking refresh as I move between all apps and installed apps, but it does not seem to make a difference. I do see in status Downloading ActiveState Package Repository packlist ... not found"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "edited": false, "score": 1, "creation_date": 1564092817, "post_id": 57204613, "comment_id": 100927753, "body": "post new information in your original question, or ask a new one. Packages are case sensitive, and you want DBD::mysql (as I showed).<a href=\"https://code.activestate.com/ppm/DBD-mysql/\" rel=\"nofollow noreferrer\">code.activestate.com/ppm/DBD-mysql</a>"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1564079405, "last_edit_date": 1564079405, "creation_date": 1564065626, "answer_id": 57204613, "question_id": 57203803, "link": "https://stackoverflow.com/questions/57203803/perl-to-mysql-connectivity-on-windows-10/57204613#57204613", "title": "Perl to mysql connectivity on Windows 10", "body": "<p>For ActivePerl, use their package manager PPM.</p>\n\n<p>Or, use Strawberry Perl for a more unixy experience. It comes with all the stuff to compile and install modules.</p>\n\n<p>No matter which Perl you use, on Windows or elsewhere, modules typically need to be compiled the same. Mixing compilers (such as Visual Studio and gcc) or options can lead to incompatible binaries. The same might happen across Perl versions too. That means to use the same Perl (and compilation method) for everything in your project).</p>\n\n<p>The <code>cpan</code> utility doesn't figure out those things for you. It does whatever it's configured to do.</p>\n\n<p>For what it's worth, the <code>cpan</code> method to install modules can be simpler:</p>\n\n<pre><code>$ cpan DBD::mysql\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5572549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/013eb7f37d079908a55e444caa2b0444?s=128&d=identicon&r=PG&f=1", "display_name": "Sammer", "link": "https://stackoverflow.com/users/5572549/sammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564079405, "creation_date": 1564063163, "last_edit_date": 1564079235, "question_id": 57203803, "link": "https://stackoverflow.com/questions/57203803/perl-to-mysql-connectivity-on-windows-10", "title": "Perl to mysql connectivity on Windows 10", "body": "<p>I have a process that works in the production environment, that I need to get working on my local Windows 10 environment. It is a Perl script that calls mySql stored procedures.</p>\n\n<p>I have installed ActivePerl 5.26.3 (64-Bit) from Active State. When I attempt to execute the script I get an error:</p>\n\n<pre><code>Can't locate DBD/mysql.pm (you may need to install the DBD::mysql module)...\n</code></pre>\n\n<p>So, I went to <a href=\"https://metacpan.org/release/DBD-mysql\" rel=\"nofollow noreferrer\">https://metacpan.org/release/DBD-mysql</a> and found instructions that indicated I needed to do the following:</p>\n\n<ol>\n<li>perl -MCPAN -e shell</li>\n<li>install DBD::mysql</li>\n</ol>\n\n<p>But, when I type the first command I get a message stating:</p>\n\n<blockquote>\n  <p>It looks like you don't have a C compiler and make utility installed. Trying to install dmake and the MinGW gcc compiler using the Perl Package Manager. This may take several minutes....</p>\n</blockquote>\n\n<p>Then it goes thru what appears to be a successful installation. So I type in the second command. It scrolls by for a while, but ends with:</p>\n\n<pre><code>Failed during this command\nDVEEDEN/DBD-mysql-4.050.tar.gz: writemakefile NO 'C:\\Perl64\\bin\\perl.exe MakeFile.PL INSTALLDIRS=site' returned status 512\n</code></pre>\n\n<p>Not sure how to proceed.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1564514212, "post_id": 57203638, "comment_id": 101053902, "body": "Seems like the logic for selection of the class of the sub is defined in <a href=\"https://metacpan.org/release/Mojolicious/source/lib/Mojolicious/Routes.pm#L107\" rel=\"nofollow noreferrer\"><code>_class()</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1564515637, "creation_date": 1564515637, "answer_id": 57278955, "question_id": 57203638, "link": "https://stackoverflow.com/questions/57203638/mojo-resolving-controller-and-action-syntax-to-subref/57278955#57278955", "title": "Mojo resolving controller and action syntax to subref?", "body": "<p>I could not find a way to do this using the api, but there is a private method <a href=\"https://metacpan.org/release/Mojolicious/source/lib/Mojolicious/Routes.pm#L107\" rel=\"nofollow noreferrer\"><code>_class()</code></a> that will give the controller object that contains the sub. Here is an example:</p>\n\n<p><strong>./lib/MyApp/Controller/Foo.pm</strong>:</p>\n\n<pre><code>package MyApp::Controller::Foo;\nuse Mojo::Base 'Mojolicious::Controller';\nsub welcome {\n     my $self = shift; \n     $self-&gt;render(text =&gt; 'Hello there.');\n}    \n1;\n</code></pre>\n\n<p><strong>./myapp.pl</strong>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojolicious::Lite;\nuse lib './lib';\n\nget '/' =&gt; sub {\n    my $c = shift;\n    $c-&gt;render(text =&gt; 'Hello World!');\n};\nmy $namespaces = app-&gt;routes-&gt;namespaces;\npush @$namespaces, 'MyApp::Controller';\napp-&gt;routes-&gt;get('/welcome')-&gt;to('foo#welcome');\napp-&gt;hook(\n    before_dispatch =&gt; sub {\n        my $c = shift;\n        my $field = { action =&gt; \"welcome\", controller =&gt; \"foo\" };\n        my $obj = $c-&gt;app-&gt;routes-&gt;_class( $c, $field );\n        my $method = $field-&gt;{action};\n        my $subref = sub { $obj-&gt;$method( @_ ) };\n    }\n);\napp-&gt;start;\n</code></pre>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57278955, "answer_count": 1, "score": 1, "last_activity_date": 1564515637, "creation_date": 1564062757, "last_edit_date": 1564492681, "question_id": 57203638, "link": "https://stackoverflow.com/questions/57203638/mojo-resolving-controller-and-action-syntax-to-subref", "title": "Mojo resolving controller and action syntax to subref?", "body": "<p>Given a syntax like</p>\n\n<pre><code>$c-&gt;routes-&gt;get($path)-&gt;to(\"$controller#$sub\");\n</code></pre>\n\n<p>I would like to know which sub <code>$controller#$sub</code> resolves to on dispatch. Is there a simple method to get the ref of the sub? You can hard-set <code>-&gt;namespaces()</code> so I assume it's not always as simple as <code>$controller::$sub</code> because you could have <code>namespace::$controller::$sub</code>.</p>\n"}, {"tags": ["linux", "shell", "perl", "ssh"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1564051982, "post_id": 57199975, "comment_id": 100908435, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/3200801/608639\">How can I call a shell command in my Perl script?</a>, <a href=\"https://stackoverflow.com/q/11636721/608639\">Call a bash script from a perl script</a>, etc."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1564056254, "post_id": 57199975, "comment_id": 100910635, "body": "You run any remote command the same way... <code>$ssh-&gt;cmd(&#39;whatever&#39;);</code> Doesn&#39;t matter what language whatever is implemented in. You might have to include a path if it&#39;s not in the remote computer&#39;s normal one."}, {"owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1564057072, "post_id": 57199975, "comment_id": 100911090, "body": "$ssh-&gt;cmd(&#39; ./monitor status &#39;); if run this , i am getting only empty output, i am not getting status output , its a bash script with argument"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1564057807, "post_id": 57199975, "comment_id": 100911548, "body": "Can you show the <code>$stderr</code> and <code>$exit</code> values for <code>$ssh-&gt;cmd(&#39; .&#47;monitor status &#39;)</code> ?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1564059107, "post_id": 57199975, "comment_id": 100912319, "body": "Well there you go. You have to get your program running correctly on the remote computer. Installing whatever package provides that missing library is a good first step."}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 11626637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLnpB.jpg?s=128&g=1", "display_name": "Rob Sweet", "link": "https://stackoverflow.com/users/11626637/rob-sweet"}, "reply_to_user": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "edited": false, "score": 0, "creation_date": 1564157589, "post_id": 57205443, "comment_id": 100951793, "body": "@AmarendhiranAmar - if you like the answer would you consider up voting and accepting it please?  <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "tags": [], "owner": {"reputation": 176, "user_id": 11626637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLnpB.jpg?s=128&g=1", "display_name": "Rob Sweet", "link": "https://stackoverflow.com/users/11626637/rob-sweet"}, "is_accepted": false, "score": 0, "last_activity_date": 1564068129, "creation_date": 1564068129, "answer_id": 57205443, "question_id": 57199975, "link": "https://stackoverflow.com/questions/57199975/how-to-run-a-bash-or-shell-script-in-a-remote-linux-server-using-perl-script-and/57205443#57205443", "title": "How to run a bash or shell script in a remote linux server using perl script and ssh", "body": "<p>Your script is fine.   Just replace</p>\n\n<pre><code>\"ls -l\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>\"/path/to/my/script arg1 arg2\"\n</code></pre>\n\n<p>Note 1 - It's a good idea to use a fully qualified path to your script on the remote.</p>\n\n<p>Note 2 - <code>arg1</code> and/or <code>arg2</code> can be variables of course.  <code>$arg1 $arg2</code>.   If you're not using variables then there is no need for double quotes and you should use single quotes ' instead.</p>\n"}], "owner": {"reputation": 41, "user_id": 10984519, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001424532513/picture?type=large", "display_name": "Amarendhiran Amar", "link": "https://stackoverflow.com/users/10984519/amarendhiran-amar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564072682, "creation_date": 1564051046, "last_edit_date": 1564072682, "question_id": 57199975, "link": "https://stackoverflow.com/questions/57199975/how-to-run-a-bash-or-shell-script-in-a-remote-linux-server-using-perl-script-and", "title": "How to run a bash or shell script in a remote linux server using perl script and ssh", "body": "<p>I want to run a perl script on a remote server, it should login to a linux server via ssh and run a shell script with an argument, then print the results, please help......</p>\n\n<p>I have a small script which will login and execute the ls command on the remote host, but i want to run a bash script instead.</p>\n\n<pre><code>use Net::SSH::Perl;\n\nmy $host = \"xxxxx\";\nmy $usr = \"xxx\";\nmy $pwd = \"xxx\";\nmy $ssh = Net::SSH::Perl-&gt;new($host);\n$ssh-&gt;login($usr,$pwd);\nmy($stdout, $stderr, $exit) = $ssh-&gt;cmd(\"ls -l\");\nprint \"$stdout\\n\";\n</code></pre>\n\n<p>How can I execute the remote shell script instead of \"ls -l\"?</p>\n"}, {"tags": ["cpan", "perl", "cpanm"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 883996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d0100905b9ff9e568318ad66c995e5?s=128&d=identicon&r=PG", "display_name": "Sabin Cheruvattil", "link": "https://stackoverflow.com/users/883996/sabin-cheruvattil"}, "edited": false, "score": 0, "creation_date": 1564051013, "post_id": 57199837, "comment_id": 100907903, "body": "If CPAN is available in one machine[OS], App::Cpan is also available, right?"}, {"owner": {"reputation": 29, "user_id": 883996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d0100905b9ff9e568318ad66c995e5?s=128&d=identicon&r=PG", "display_name": "Sabin Cheruvattil", "link": "https://stackoverflow.com/users/883996/sabin-cheruvattil"}, "edited": false, "score": 0, "creation_date": 1564051318, "post_id": 57199837, "comment_id": 100908067, "body": "CPAN exploration and modules installation (v2.11).  But, $AppCpan::VERSION is giving 1.63."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1564081491, "last_edit_date": 1564081491, "creation_date": 1564050572, "answer_id": 57199837, "question_id": 57199715, "link": "https://stackoverflow.com/questions/57199715/is-there-any-way-to-find-available-cpan-version-programmatically/57199837#57199837", "title": "Is there any way to find available CPAN version programmatically?", "body": "<p>The <code>cpan</code> command-line program is a wrapper around <a href=\"https://metacpan.org/pod/App::Cpan\" rel=\"nofollow noreferrer\">App::Cpan</a>. As far as I can see, the two files always have the same version number. That means you can do something like this:</p>\n\n<pre><code>use App::Cpan;\n\nmy $cpanv = $App::Cpan::VERSION;\n</code></pre>\n\n<p><strong>Update:</strong> There are a few concepts to get straight here.</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/CPAN\" rel=\"nofollow noreferrer\">CPAN.pm</a> is a CPAN exploration module that was added to Perl version 5.004. It includes its own basic shell.</li>\n<li><a href=\"https://metacpan.org/pod/App::Cpan\" rel=\"nofollow noreferrer\">App::Cpan</a> is a wrapper around CPAN.pm which adds an improved command interface. It was added to Perl 5.12.</li>\n<li><a href=\"https://metacpan.org/pod/distribution/CPAN/scripts/cpan\" rel=\"nofollow noreferrer\"><code>cpan</code></a> is a tiny script that uses App::Cpan. It was also added to Perl version 5.12. [<strong>Update:</strong> that's the current version of <code>cpan</code> - there was also an earlier one that was based on CPAN.pm.]</li>\n</ul>\n\n<p>App::Cpan and <code>cpan</code> share the same version number (currently 1.675). CPAN.pm is older and therefore has a larger version number (currently 2.27).</p>\n\n<p>The version number from App::CPAN is what you get when you run <code>cpan -v</code> - so that's what I've given you in my code.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1564082445, "last_edit_date": 1564082445, "creation_date": 1564076644, "answer_id": 57207569, "question_id": 57199715, "link": "https://stackoverflow.com/questions/57199715/is-there-any-way-to-find-available-cpan-version-programmatically/57207569#57207569", "title": "Is there any way to find available CPAN version programmatically?", "body": "<blockquote>\n  <p><em>My goal is to auto configure cpan programmatically.</em></p>\n</blockquote>\n\n<p>If you're talking about systems with a known configuration, just create (or modify) <code>~/.cpan/CPAN/MyConfig.pm</code>. For example, the following is mine:</p>\n\n<pre><code>$CPAN::Config = {\n  'auto_commit' =&gt; q[0],\n  'build_cache' =&gt; q[5],\n  'build_dir' =&gt; q[/home/ikegami/.cpan/build],\n  'build_requires_install_policy' =&gt; q[yes],\n  'cache_metadata' =&gt; q[1],\n  'check_sigs' =&gt; q[0],\n  'commandnumber_in_prompt' =&gt; q[1],\n  'connect_to_internet_ok' =&gt; q[1],\n  'cpan_home' =&gt; q[/home/ikegami/.cpan],\n  'dontload_hash' =&gt; {  },\n  'ftp' =&gt; q[/usr/bin/ftp],\n  'ftp_passive' =&gt; q[1],\n  'ftp_proxy' =&gt; q[],\n  'getcwd' =&gt; q[cwd],\n  'gpg' =&gt; q[/usr/bin/gpg],\n  'gzip' =&gt; q[/bin/gzip],\n  'halt_on_failure' =&gt; q[0],\n  'histfile' =&gt; q[],\n  'http_proxy' =&gt; q[],\n  'inactivity_timeout' =&gt; q[0],\n  'index_expire' =&gt; q[1],\n  'inhibit_startup_message' =&gt; q[0],\n  'keep_source_where' =&gt; q[/home/ikegami/.cpan/sources],\n  'load_module_verbosity' =&gt; q[none],\n  'lynx' =&gt; q[],\n  'make' =&gt; q[/usr/bin/make],\n  'make_arg' =&gt; q[],\n  'make_install_arg' =&gt; q[],\n  'make_install_make_command' =&gt; q[/usr/bin/make],\n  'makepl_arg' =&gt; q[],\n  'mbuild_arg' =&gt; q[],\n  'mbuild_install_arg' =&gt; q[],\n  'mbuild_install_build_command' =&gt; q[./Build],\n  'mbuildpl_arg' =&gt; q[],\n  'ncftpget' =&gt; q[/usr/bin/ncftpget],\n  'no_proxy' =&gt; q[],\n  'pager' =&gt; q[less],\n  'perl5lib_verbosity' =&gt; q[none],\n  'prefer_external_tar' =&gt; q[1],\n  'prefer_installer' =&gt; q[MB],\n  'prerequisites_policy' =&gt; q[follow],\n  'scan_cache' =&gt; q[atstart],\n  'shell' =&gt; q[/bin/bash],\n  'show_upload_date' =&gt; q[0],\n  'tar' =&gt; q[/bin/tar],\n  'tar_verbosity' =&gt; q[none],\n  'term_is_latin' =&gt; q[1],\n  'term_ornaments' =&gt; q[1],\n  'trust_test_report_history' =&gt; q[0],\n  'unzip' =&gt; q[/usr/bin/unzip],\n  'urllist' =&gt; [q[http://ftp.osuosl.org/pub/CPAN/], q[http://mirrors.hub.co/CPAN/], q[http://cpan.arcticnetwork.ca/]],\n  'use_sqlite' =&gt; q[0],\n  'version_timeout' =&gt; q[15],\n  'wget' =&gt; q[/usr/bin/wget],\n  'yaml_load_code' =&gt; q[0],\n};\n1;\n__END__\n</code></pre>\n\n<p>Optionally, you can force the defaults to be used, and modify what needs to be changed. For example,</p>\n\n<pre><code>cpan &lt;&lt;&lt;'o conf init\nyes\no conf prerequisites_policy ask\no conf commit\nquit\n'\n</code></pre>\n\n<p><code>o conf init</code> causes the initalization process to be started. <code>yes</code> accepts the defaults. <code>o conf prerequisites_policy ask</code> is an example of changing a default. <code>o conf commit</code> saves the changes.</p>\n"}], "owner": {"reputation": 29, "user_id": 883996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d0100905b9ff9e568318ad66c995e5?s=128&d=identicon&r=PG", "display_name": "Sabin Cheruvattil", "link": "https://stackoverflow.com/users/883996/sabin-cheruvattil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564082445, "creation_date": 1564050194, "question_id": 57199715, "link": "https://stackoverflow.com/questions/57199715/is-there-any-way-to-find-available-cpan-version-programmatically", "title": "Is there any way to find available CPAN version programmatically?", "body": "<p>I am trying to find CPAN version programmatically, but ends up in failure.</p>\n\n<p>Tried with perl %Config &amp; %ENV, but couldn't find anything there.</p>\n\n<pre><code>my $cpanv = `cpan -v`;\n# gives: Loading internal null logger. Install Log::Log4perl for logging messages\n</code></pre>\n\n<p>My goal is to auto configure cpan programmatically. CPAN config prompt varies by versions.</p>\n\n<p>CPAN asks like[similar]:\n1. \"Do you want to manually configure?[yes]\"\n2. \"Do you want cpan to configure?[no]\"</p>\n\n<p>Any way to find CPAN version or avoiding unattended CPAN configuration?</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1564054981, "post_id": 57199689, "comment_id": 100910005, "body": "Please provide some sample input. The volunteers answering shouldn&#39;t have to each make up their own (and also chance getting it wrong)."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1564064229, "last_edit_date": 1564064229, "creation_date": 1564061925, "answer_id": 57203314, "question_id": 57199689, "link": "https://stackoverflow.com/questions/57199689/bash-remove-an-exact-line-and-number-of-characters-from-a-large-file/57203314#57203314", "title": "Bash remove an exact line and number of characters from a large file", "body": "<p>To avoid reading in the whole file in memory, you can try write to the output file as you scan the input file. For example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\n{\n    my $input_fn = 'my_app-dump.sql';\n    my $output_fn = 'my_app_filtered.sql';\n    Filter-&gt;new(\n        input_fn =&gt; $input_fn,\n        output_fn =&gt; $output_fn\n    );\n}\n\npackage Filter;\nuse feature qw(say);\nuse strict;\nuse warnings;\n\nsub new {\n    my ( $class, %args ) = @_;\n    my $self = bless \\%args, $class;\n\n    $self-&gt;open_files();\n    $self-&gt;filter_io_loop();\n    $self-&gt;close_files();\n}\n\nsub filter_io_loop {\n    my ( $self ) = @_;\n\n    my $fh = $self-&gt;{fh};\n    my $ofh = $self-&gt;{ofh};\n    while( my $line = &lt;$fh&gt; ) {\n        if ( $line =~ /^COPY \"my_app\"\\.\"spatial_ref_sys\"\\s\\([^)]*\\) FROM stdin;/ ) {\n            $self-&gt;skip_lines( $fh, $line );\n        }\n        else {\n            print $ofh $line;\n        }\n    }\n}\n\nsub skip_lines {\n    my ( $self,  $fh, $line ) = @_;\n\n    while (1) {\n        return if $line =~ /\\\\\\.$/;\n        $line = &lt;$fh&gt;;\n        if (!defined $line) {\n            warn \"Warning: EOF reached while searching for end of COPY\\n\";\n            return;\n        }\n    }\n}\n\n\nsub close_files {\n    my ( $self ) = @_;\n\n    close $self-&gt;{ofh};\n    close $self-&gt;{fh};\n}\n\nsub open_files {\n    my ( $self ) = @_;\n\n    my $input_fn = $self-&gt;{input_fn};\n    my $output_fn = $self-&gt;{output_fn};\n    open ( my $fh, '&lt;', $input_fn ) or die \"Could not open file '$input_fn': $!\";\n    open ( my $ofh, '&gt;', $output_fn ) or die \"Could not open file '$output_fn': $!\";\n    $self-&gt;{fh} = $fh;\n    $self-&gt;{ofh} = $ofh;\n}\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 1358008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXvwe.jpg?s=128&g=1", "display_name": "jens1101", "link": "https://stackoverflow.com/users/1358008/jens1101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564064476, "creation_date": 1564050080, "last_edit_date": 1564064476, "question_id": 57199689, "link": "https://stackoverflow.com/questions/57199689/bash-remove-an-exact-line-and-number-of-characters-from-a-large-file", "title": "Bash remove an exact line and number of characters from a large file", "body": "<p>I want to match and replace a multi-line regex in a large DB dump in a relatively memory efficient manner. The closest solution I could find is:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>pcregrep -M --line-offsets --buffer-size=100000000 '^COPY \"my_app\"\\.\"spatial_ref_sys\"\\s\\(.+?\\) FROM stdin;(.|\\n)*?\\\\.$' my_app-dump.sql\n</code></pre>\n\n<p>This will use a max of 280MB of memory and (due to the <code>--line-offsets</code> option) give me this output: <code>1123175:0,105</code>. This indicates the line number (1123175), character offset from the start of the line (0), and the length of the matched string (105). This match <em>will</em> span multiple lines.</p>\n\n<p>My question is: What is the \"best\" way to open the file, remove the offending snippet, and save it? I would prefer something that can be done in bash alone, but that's not required.</p>\n\n<h1>Context</h1>\n\n<p>I am migrating from an EC2 installed Postgres database to an AWS RDS Postgres database. One of the problems I encountered is that when I use <code>pg_dump</code> then some of the commands it issues requires superuser privileges, which RDS does not provide me with. I have already removed multiple offending SQL statements via <code>sed</code>. None of these statements are critical to our application, but leaving them in will cause the restore to fail.</p>\n\n<h1>Current Working Solution</h1>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -i -0pe 's/^COPY \"my_app\"\\.\"spatial_ref_sys\"\\s\\(.+?\\) FROM stdin;(.|\\n)*?\\\\.$//gmi' my_app-dump.sql\n</code></pre>\n\n<p>This uses perl to do the regex find and replace directly on the DB dump. However, this loads the entire file into memory which can be 6GB in size. Testing this from a locally installed Postgres DB works fine, because I have the memory to spare, but I will have to run this on an AWS EC2 instance, so I'll have to spin up a very powerful instance to do this migration. I feel this is unnecessary. I already know that <code>pcregrep</code> can do the matching with 280MB or memory, I merely need to remove the found snippet which I can't figure out how to do.</p>\n\n<h1>Demo and Sample Input</h1>\n\n<p><a href=\"https://regex101.com/r/IpTGmV/2\" rel=\"nofollow noreferrer\">This demo</a> on regex101 shows exactly what I want to achieve. It matches the correct lines and substitutes them with empty strings.</p>\n\n<p>In addition here is a snippet from the DB dump:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>COPY \"my_app\".\"schema_migrations\" (\"version\") FROM stdin;\n20170213125755\n20180213083924\n20180219070405\n20180219102435\n20180220074712\n20180221082708\n20180221104015\n20180523211327\n20190213080433\n20190218070455\n20190226084814\n20190625083212\n20190704092807\n20190705070442\n20190711073923\n20190718095547\n\\.\n\n\n--\n-- Data for Name: spatial_ref_sys; Type: TABLE DATA; Schema: my_app; Owner: -\n--\n\nCOPY \"my_app\".\"spatial_ref_sys\" (\"srid\", \"auth_name\", \"auth_srid\", \"srtext\", \"proj4text\") FROM stdin;\n\\.\n</code></pre>\n\n<p>Out of the above only this should match the regex:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>COPY \"my_app\".\"spatial_ref_sys\" (\"srid\", \"auth_name\", \"auth_srid\", \"srtext\", \"proj4text\") FROM stdin;\n\\.\n</code></pre>\n\n<p>All of these should also match, even if they aren't in the DB dump:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>COPY \"my_app\".\"spatial_ref_sys\" (\"srid\", \"auth_name\", \"auth_srid\", \"srtext\", \"proj4text\") FROM stdin;\nasdf\nbla\n\\.\n\nCOPY \"my_app\".\"spatial_ref_sys\" (foo, bar) FROM stdin;\n\\.\n\nCOPY \"my_app\".\"spatial_ref_sys\" (\"foasd 234$\", \"qwdmc\") FROM stdin;\nasdjnaksjdnkajnd&amp;(*)-\nalkc n;{}\n\\.\n</code></pre>\n"}, {"tags": ["sql-server", "perl", "odbc", "dbd"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "is_accepted": true, "score": 0, "last_activity_date": 1564046546, "creation_date": 1564046546, "answer_id": 57198514, "question_id": 57196641, "link": "https://stackoverflow.com/questions/57196641/sql-im002-errors-while-connecting-to-sql-server-from-perl-on-heroku/57198514#57198514", "title": "SQL IM002 Errors while connecting to SQL Server from perl on heroku", "body": "<p>Tried everything and found the reason. It should be dbd:ODBC:DRIVER instead of dbd:ODBC:Driver.</p>\n"}], "owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 57198514, "answer_count": 1, "score": 1, "last_activity_date": 1564046546, "creation_date": 1564040165, "last_edit_date": 1564043916, "question_id": 57196641, "link": "https://stackoverflow.com/questions/57196641/sql-im002-errors-while-connecting-to-sql-server-from-perl-on-heroku", "title": "SQL IM002 Errors while connecting to SQL Server from perl on heroku", "body": "<p>I have a perl application hosted on heroku which needs to connect with some sql server. I am unable to establish connection. It fails with following error:</p>\n\n<blockquote>\n  <p>DBI connect('Driver={ODBC Driver 11 For SQL Server}; Server=****; UID=****; PWD=****','',...) failed: [unixODBC][Driver Manager]Data source name not found, and no default driver specified (SQL-IM002) at work.pl line 12.</p>\n</blockquote>\n\n<p>This is the code.</p>\n\n<p>work.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse DBI;\n\n\nmy $DRIVER = '{ODBC Driver 11 for SQL Server}';\nmy $SERVER = '****';\nmy $UID = '****';\nmy $PWD = '****';\n\nmy $x = DBI-&gt;connect(\"dbi:ODBC:Driver=$DRIVER; Server=$SERVER; UID=$UID; PWD=$PWD\");\n</code></pre>\n\n<p>Relevant Environment Vars:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>LIBRARY_PATH=/app/.platform/vendor/usr/lib64:\nLD_LIBRARY_PATH=/app/.platform/vendor/usr/lib64:\nPATH=/app/.platform/vendor/usr/bin:/app/vendor/perl/bin:/usr/bin:/bin\nLANG=en_US.UTF-8\nODBCSYSINI=/app/.platform/vendor/etc\nHOME=/app\nPWD=/app\nODBCINI=/app/.platform/vendor/etc/odbc.ini\nODBCHOME=/app/.platform/vendor/etc/\nPERL5OPT=-Mlocal::lib=/app/vendor/perl-deps\n</code></pre>\n\n<p>odbcinst.ini:</p>\n\n<pre><code>Description             = ODBC for PostgreSQL\nDriver          = /usr/lib/psqlodbc.so\nSetup           = /usr/lib/libodbcpsqlS.so\nDriver64                = /usr/lib64/psqlodbc.so\nSetup64         = /usr/lib64/libodbcpsqlS.so\nFileUsage               = 1\n\n[MySQL]\nDescription             = ODBC for MySQL\nDriver          = /usr/lib/libmyodbc5.so\nSetup           = /usr/lib/libodbcmyS.so\nDriver64                = /usr/lib64/libmyodbc5.so\nSetup64         = /usr/lib64/libodbcmyS.so\nFileUsage               = 1\n\n[ODBC Driver 11 for SQL Server]\nDescription             = Microsoft ODBC Driver 11 for SQL Server\nDriver          = .platform/vendor/opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0\nThreading               = 1\nUsageCount              = 1\n\n</code></pre>\n\n<p>odbc.ini is empty.</p>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["perl", "stdin", "argv"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1564040627, "post_id": 57195281, "comment_id": 100901973, "body": "Use <a href=\"http://p3rl.org/IO::Prompter\" rel=\"nofollow noreferrer\">IO::Prompter</a> for keyboard input that is much more ergonomical for the end-user than plain <code>readline</code>."}], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1564035637, "post_id": 57195458, "comment_id": 100899563, "body": "If <code>&lt;&gt;</code> means <code>&lt;ARGV&gt;</code> why does it read the keyboard input into a variable?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 1, "creation_date": 1564036280, "post_id": 57195458, "comment_id": 100899842, "body": "@CJ7 it doesn&#39;t, always.  as the answer says, &quot;from standard input if passed no arguments, and otherwise read input from all files listed&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1564610572, "post_id": 57195458, "comment_id": 101092617, "body": "Specifically: choosing whether to read the files named in <code>@ARGV</code> or falling back to <code>STDIN</code> is a decision made by the <code>ARGV</code> filehandle itself, not the readline operator."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1564036797, "last_edit_date": 1564036797, "creation_date": 1564035416, "answer_id": 57195458, "question_id": 57195281, "link": "https://stackoverflow.com/questions/57195281/clear-argv-before-getting-input-from/57195458#57195458", "title": "Clear @ARGV before getting input from &lt;&gt;?", "body": "<p><code>&lt;&gt;</code> means <code>&lt;ARGV&gt;</code>. The <code>ARGV</code> filehandle refers to the concatenation of the files listed in <code>@ARGV</code>. If <code>@ARGV</code> is empty, it acts as if <code>@ARGV = ('-')</code>, which means reading from standard input. (It's magical that way.) See <a href=\"https://perldoc.pl/perlop#I/O-Operators\" rel=\"nofollow noreferrer\">I/O Operators in <code>perldoc perlop</code></a> and <a href=\"https://perldoc.pl/perlfunc#readline\" rel=\"nofollow noreferrer\"><code>perldoc -f readline</code></a>.</p>\n\n<p><code>&lt;&gt;</code> is meant to emulate the common behavior of many unix tools (e.g. <code>cat</code>, <code>sort</code>, <code>wc</code>, ...) that read from standard input if passed no arguments, and otherwise read input from all files listed on the command line (treating <code>-</code> as a directive to read from standard input as well).</p>\n\n<p>If you just want to read from <code>STDIN</code>, do this:</p>\n\n<pre><code>my $line = &lt;STDIN&gt;;\n</code></pre>\n\n<p>... or, my preference:</p>\n\n<pre><code>my $line = readline STDIN;\n</code></pre>\n\n<p>(Note that standard input does not necessarily refer to the keyboard. You can easily redirect it e.g. to a file: <code>yourscript.pl &lt; input.txt</code>)</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564036797, "creation_date": 1564034571, "question_id": 57195281, "link": "https://stackoverflow.com/questions/57195281/clear-argv-before-getting-input-from", "title": "Clear @ARGV before getting input from &lt;&gt;?", "body": "<p>I have noticed that the contents of <code>@ARGV</code> gets directed to the input of a <code>&lt;&gt;</code> command.</p>\n\n<p>If I am going to get input from the keyboard using <code>&lt;&gt;</code>, should I clear <code>@ARGV</code> beforehand?  Is that the only way to do it?</p>\n\n<p>eg:</p>\n\n<pre><code>@ARGV = ();\n$input = &lt;&gt;;\n</code></pre>\n\n<p>(I was quite surprised that <code>@ARGV</code> interferes with <code>&lt;&gt;</code>.  How does that make sense?)</p>\n"}]