[{"tags": ["multithreading", "perl", "thread-safety"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1554323617, "post_id": 55502656, "comment_id": 97713881, "body": "or <code>async { $self-&gt;WorkerProcess };</code>"}], "tags": [], "owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "is_accepted": true, "score": 2, "last_activity_date": 1554318757, "creation_date": 1554318757, "answer_id": 55502656, "question_id": 55502275, "link": "https://stackoverflow.com/questions/55502275/passing-a-thread-queue-object-as-a-object-variable-in-perl/55502656#55502656", "title": "Passing a thread queue object as a object variable in perl", "body": "<p>You're passing a function into <code>threads-&gt;create</code> without any context of which object they are working within. Something like this should work</p>\n\n<pre><code>threads-&gt;create( sub { $self-&gt;WorkerProcess } );\n</code></pre>\n"}], "owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 55502656, "answer_count": 1, "score": 2, "last_activity_date": 1554318757, "creation_date": 1554317256, "question_id": 55502275, "link": "https://stackoverflow.com/questions/55502275/passing-a-thread-queue-object-as-a-object-variable-in-perl", "title": "Passing a thread queue object as a object variable in perl", "body": "<p>I am writing a package which takes  inputs like thread count,thread::Queue objects.\nOnce the package object is created, I will create the threads based on the input argument and dequeue the input queue in each thread and each threads executes a simple unix command like pinging to a server(changed to keep it simple).\nBelow is the code:</p>\n\n<pre><code>my $failed_q = Thread::Queue -&gt; new();\nmy $success_q = Thread::Queue -&gt; new();\nmy $process_q = Thread::Queue -&gt; new();\n\npackage WorkerThreads;\n\n\nsub new {\n   my $class = shift;\n   my $self = {\n      _ThreadCount =&gt; shift,\n      _FidQueue =&gt; shift,\n      _SuccessQueue  =&gt; shift,\n      _FailedQueue =&gt; shift,\n   };\n   bless $self, $class;\n   return $self;\n}\n\nsub WorkerProcess\n{\n  my ($self)=@_;\n\n  while ( my $fid = $self-&gt;{_FidQueue} -&gt; dequeue() )\n  {\n    chomp ( $fid );\n    print threads -&gt; self() -&gt; tid(). \": pinging $fid\\n\";\n    my $result = `/bin/ping -c 1 $fid`;\n    if ( $? ) { $self-&gt;{_FailedQueue} -&gt; enqueue ( $fid ) }\n    else { $self-&gt;{_SuccessQueue} -&gt; enqueue ( $fid ) ; }\n    sleep 1;\n  }\n print threads -&gt; self() -&gt; tid(). \":\\n\";\n}\n\n\nsub CreateThreads\n{\n    my ($self)=@_;\n    my $Num_of_threads=$self-&gt;{_ThreadCount};\n\n    for ( 1..$Num_of_threads )\n    {\n      threads -&gt; create ( \\&amp;WorkerProcess );\n    }\n\n}\n\nsub StartThreads\n{\nmy ($self)=@_;\n\n    foreach my $thr ( threads -&gt; list() )\n    {\n      $thr -&gt; join();\n    }\n}\n\nsub PrintResult\n{\nmy ($self)=@_;\n\n\n     while ( my $fid = $self-&gt;{_FailedQueue} -&gt; dequeue_nb() )\n     {\n       print \"$fid failed to ping\\n\";\n     }\n\n     #collate results. ('synchronise' operation)\n\n     while ( my $fid = $self-&gt;{_SuccessQueue} -&gt; dequeue_nb() )\n     {\n       print \"$fid Ping Succeeded\\n\";\n     }\n\n}\nsub ProcessRequest\n{\n my ($self)=@_;\n\n $self-&gt;CreateThreads(@_);\n $self-&gt;StartThreads(@_);\n $self-&gt;PrintResult(@_);\n\n}\n\npackage main;\n\n#insert tasks into thread queue.\nopen ( my $input_fh, \"&lt;\", \"server_list\" ) or die $!;\n$process_q-&gt;enqueue( &lt;$input_fh&gt; );\nclose ( $input_fh );\n\n\nmy $Workers;\n\n$Workers=WorkerThreads-&gt;new(\n                            10,\n                            $process_q,\n                            $success_q, \n                            $failed_q\n                          );\n\n$Workers-&gt;ProcessRequest();\n</code></pre>\n\n<p>I am getting an error while i try to dequeue in the while loop that queue is undefined. So i got this doubt like can we pass a thread queue object to a package as an argument.</p>\n\n<pre><code>Thread 1 terminated abnormally: Can't call method \"dequeue\" on an undefined value at .\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1554310294, "post_id": 55500347, "comment_id": 97707402, "body": "Thank you so much, so if there was more than one group captured could i use $2..$3..$n?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1554310424, "post_id": 55500347, "comment_id": 97707486, "body": "Exactly. Details in <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlretut.pod#Extracting-matches\" rel=\"nofollow noreferrer\"><code>perldoc -f perlretut</code></a>"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1554311102, "post_id": 55500347, "comment_id": 97707816, "body": "Thanks! This really helped, it turned my 51 lines of replacing to 5!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1554310221, "creation_date": 1554310221, "answer_id": 55500347, "question_id": 55500294, "link": "https://stackoverflow.com/questions/55500294/perl-replace-simplify/55500347#55500347", "title": "Perl Replace Simplify", "body": "<pre><code>$msgPayload =~ s/:\\s?([-\\d])/:\"$1/g;\n</code></pre>\n\n<p>The parentheses create a \"capture group\", and <code>$1</code> in the replacement pattern means the contents of the 1st capture group.</p>\n"}, {"tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 4, "last_activity_date": 1554310227, "creation_date": 1554310227, "answer_id": 55500352, "question_id": 55500294, "link": "https://stackoverflow.com/questions/55500294/perl-replace-simplify/55500352#55500352", "title": "Perl Replace Simplify", "body": "<p>You could use a capturing group and use that in the replacement using <code>$1</code></p>\n\n<pre><code>:\\s?([0-9-])\n</code></pre>\n\n<p>Your code could look like:</p>\n\n<pre><code>$msgPayload =~ s/:\\s?([0-9-])/:\"$1/g\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 55500347, "answer_count": 2, "score": 0, "last_activity_date": 1554324179, "creation_date": 1554309964, "question_id": 55500294, "link": "https://stackoverflow.com/questions/55500294/perl-replace-simplify", "title": "Perl Replace Simplify", "body": "<p>I was working on some string parsing and I was wondering if there was a way to replace these 11 lines with one, I know I can use \\d to select a digit, but is there a way to use that same digit in the replace string?</p>\n\n<p>Thanks ahead of time</p>\n\n<pre><code>$msgPayload =~ s/:\\s?-/:\"-/g;\n$msgPayload =~ s/:\\s?1/:\"1/g;\n$msgPayload =~ s/:\\s?2/:\"2/g;\n$msgPayload =~ s/:\\s?3/:\"3/g;\n$msgPayload =~ s/:\\s?4/:\"4/g;\n$msgPayload =~ s/:\\s?5/:\"5/g;\n$msgPayload =~ s/:\\s?6/:\"6/g;\n$msgPayload =~ s/:\\s?7/:\"7/g;\n$msgPayload =~ s/:\\s?8/:\"8/g;\n$msgPayload =~ s/:\\s?9/:\"9/g;\n$msgPayload =~ s/:\\s?0/:\"0/g;\n</code></pre>\n"}, {"tags": ["javascript", "python", "regex", "perl"], "comments": [{"owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "edited": false, "score": 0, "creation_date": 1554303719, "post_id": 55498300, "comment_id": 97703626, "body": "share your code"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 1, "creation_date": 1554303757, "post_id": 55498300, "comment_id": 97703655, "body": "Also, pick a language. JavaScript, Python, and Perl have different regex engines and support different features."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1554303932, "post_id": 55498300, "comment_id": 97703768, "body": "I assume by <code>characters</code> you mean <code>alphabetic characters</code>?"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1554303982, "post_id": 55498300, "comment_id": 97703803, "body": "What about <code>-123hu-8</code>? Would this replace just <code>hu</code> or <code>hu-</code>?"}, {"owner": {"reputation": 194, "user_id": 5117267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DuPCalHKSxE/AAAAAAAAAAI/AAAAAAAAAF8/Rce625Gl_GA/photo.jpg?sz=128", "display_name": "Haris Muzaffar", "link": "https://stackoverflow.com/users/5117267/haris-muzaffar"}, "edited": false, "score": 0, "creation_date": 1554304192, "post_id": 55498300, "comment_id": 97703940, "body": "it will replace hu-"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 5117267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DuPCalHKSxE/AAAAAAAAAAI/AAAAAAAAAF8/Rce625Gl_GA/photo.jpg?sz=128", "display_name": "Haris Muzaffar", "link": "https://stackoverflow.com/users/5117267/haris-muzaffar"}, "edited": false, "score": 0, "creation_date": 1554304252, "post_id": 55498363, "comment_id": 97703979, "body": "Can you edit my regrex to meet my requirement as i find it difficult to understand your regex although it works"}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 194, "user_id": 5117267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DuPCalHKSxE/AAAAAAAAAAI/AAAAAAAAAF8/Rce625Gl_GA/photo.jpg?sz=128", "display_name": "Haris Muzaffar", "link": "https://stackoverflow.com/users/5117267/haris-muzaffar"}, "edited": false, "score": 1, "creation_date": 1554304591, "post_id": 55498363, "comment_id": 97704193, "body": "@HarisMuzaffar I have added an explanation to my answer."}, {"owner": {"reputation": 194, "user_id": 5117267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DuPCalHKSxE/AAAAAAAAAAI/AAAAAAAAAF8/Rce625Gl_GA/photo.jpg?sz=128", "display_name": "Haris Muzaffar", "link": "https://stackoverflow.com/users/5117267/haris-muzaffar"}, "edited": false, "score": 1, "creation_date": 1554306025, "post_id": 55498363, "comment_id": 97705097, "body": "Got it! But (?!^-)-?\\D+ will even if we remove -? i.e (?!^-)\\D+ will work perfectly because what i want here is to replace all characters except digits from the source string but dont replace the starting minus sign."}], "tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 1, "last_activity_date": 1554306275, "last_edit_date": 1554306275, "creation_date": 1554303825, "answer_id": 55498363, "question_id": 55498300, "link": "https://stackoverflow.com/questions/55498300/how-to-match-most-non-digits-using-regex/55498363#55498363", "title": "How to match most non-digits using regex?", "body": "<p>You might use a negative lookahead to assert what is on the right is not the start of the string followed by a hyphen.</p>\n\n<p>Then match an optional hyphen followed by 1+ times not a digit.</p>\n\n<pre><code>(?!^-)\\D+\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>(?!^-)</code> Negative <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">lookahead</a>, assert what is directly on the right is not the start of the string followed by a hyphen</li>\n<li><code>\\D+</code> Match 1+ times not a digit</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/QWmWFq/1/\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p>Or to match word characters without a digit you could use:</p>\n\n<pre><code>(?!^-)[^\\W\\d]+\n</code></pre>\n\n<p>The last part in this pattern:</p>\n\n<ul>\n<li><code>[^\\W\\d]+</code> Negated <a href=\"https://www.regular-expressions.info/charclass.html\" rel=\"nofollow noreferrer\">character class</a> to match a word character except the digits</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/y02o8r/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1554374611, "last_edit_date": 1554374611, "creation_date": 1554334664, "answer_id": 55505809, "question_id": 55498300, "link": "https://stackoverflow.com/questions/55498300/how-to-match-most-non-digits-using-regex/55505809#55505809", "title": "How to match most non-digits using regex?", "body": "<p>Because look-arounds are expensive,</p>\n\n<pre><code>(?!^-)\\D+\n</code></pre>\n\n<p>is probably slower than</p>\n\n<pre><code>(?:^-?+|\\d++)\\K\\D+\n</code></pre>\n\n<p>I don't know if that matters to you.</p>\n\n<p>Test:</p>\n\n<pre><code>&gt;perl -e\"CORE::say $ARGV[0] =~ s/(?:^-?+|\\d++)\\K\\D+//rg;\" -- -123hu8\n-1238\n\n&gt;perl -e\"CORE::say $ARGV[0] =~ s/(?:^-?+|\\d++)\\K\\D+//rg;\" -- 123hu8\n1238\n\n&gt;perl -e\"CORE::say $ARGV[0] =~ s/(?:^-?+|\\d++)\\K\\D+//rg;\" -- a123hu8\n1238\n\n&gt;perl -e\"CORE::say $ARGV[0] =~ s/(?:^-?+|\\d++)\\K\\D+//rg;\" -- -a123hu8\n-1238\n\n&gt;perl -e\"CORE::say $ARGV[0] =~ s/(?:^-?+|\\d++)\\K\\D+//rg;\" -- 34-jk8\n348\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 11198811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QlV2pp55ltU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdALteM60L6XzjPryt7ZtOaxLtQzg/mo/photo.jpg?sz=128", "display_name": "Gordon Hopper", "link": "https://stackoverflow.com/users/11198811/gordon-hopper"}, "is_accepted": false, "score": 0, "last_activity_date": 1554336920, "creation_date": 1554336920, "answer_id": 55506055, "question_id": 55498300, "link": "https://stackoverflow.com/questions/55498300/how-to-match-most-non-digits-using-regex/55506055#55506055", "title": "How to match most non-digits using regex?", "body": "<p>You have <code>^[^-]|[^\\d\\.]</code></p>\n\n<p>Support for character classes (like <code>\\d</code>) inside of classes isn't implemented in some languages. What language are you using? You might have better luck with <code>[^0-9\\.]</code>.</p>\n\n<p>You have <code>^[^-]</code> which matches any string that doesn't start with <code>-</code>, which includes digits, so the first digit of a number would be squashed. You want to replace <code>-</code> only when it is not followed by a digit.</p>\n\n<p>Note that your expression matches only one character, so you would need to recursively apply it to modify the whole string. Or you can use '+' or '*' to match multiple characters. We might be able to help you better if you include a few lines of code where this is used.</p>\n\n<p>Conceptually it would be simpler to extract the number part and throw away the rest of the string, but it sounds like you want <code>34-jk8</code> to turn into <code>348</code>. How would you handle a leading <code>-</code> such as <code>-jk348</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 2414, "user_id": 7404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cb00ae3cf0974be05165f2e1703225a?s=128&d=identicon&r=PG&f=1", "display_name": "belwood", "link": "https://stackoverflow.com/users/7404/belwood"}, "edited": false, "score": 0, "creation_date": 1555007350, "post_id": 55637981, "comment_id": 97968934, "body": "Adding a brief explanation will help others understand your solution."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555002984, "creation_date": 1555002984, "answer_id": 55637981, "question_id": 55498300, "link": "https://stackoverflow.com/questions/55498300/how-to-match-most-non-digits-using-regex/55637981#55637981", "title": "How to match most non-digits using regex?", "body": "<pre><code>$_='-123hu8-34-jk8'\ns/[^\\d-]+//g\nprint $_\n</code></pre>\n\n<p>gnu sed</p>\n\n<pre><code>echo '-123hu8-34-jk8'| sed -E 's/[^-0-9]//g'\n</code></pre>\n"}], "owner": {"reputation": 194, "user_id": 5117267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DuPCalHKSxE/AAAAAAAAAAI/AAAAAAAAAF8/Rce625Gl_GA/photo.jpg?sz=128", "display_name": "Haris Muzaffar", "link": "https://stackoverflow.com/users/5117267/haris-muzaffar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 55498363, "answer_count": 4, "score": 0, "last_activity_date": 1555002984, "creation_date": 1554303633, "last_edit_date": 1554334285, "question_id": 55498300, "link": "https://stackoverflow.com/questions/55498300/how-to-match-most-non-digits-using-regex", "title": "How to match most non-digits using regex?", "body": "<p>I want to replace all non-digit characters from a string except for a leading minus sign (<code>-</code>).</p>\n\n<p>For example, <code>hu</code> should be removed from <code>-123hu8</code>, and <code>-jk</code> should be removed from <code>34-jk8</code>.</p>\n\n<p>I'm using the following regex, but it doesn't work.</p>\n\n<pre><code>^[^-]|[^\\d\\.]\n</code></pre>\n\n<p>Is there anything I'm missing?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554293237, "post_id": 55493814, "comment_id": 97696607, "body": "Could you clarify what your Perl code actually looks like? How is your array initialized for instance? What you show us isn&#39;t a 2D array, it&#39;s two separate arrayref."}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "is_accepted": false, "score": 1, "last_activity_date": 1554294259, "last_edit_date": 1554294259, "creation_date": 1554293836, "answer_id": 55494999, "question_id": 55493814, "link": "https://stackoverflow.com/questions/55493814/how-to-sort-2d-array-by-single-row-in-perl/55494999#55494999", "title": "How to sort 2D array by single row in Perl?", "body": "<p>I'm not sure what you mean by a 2D array in Perl.<br>\nFrom the notation in your question, there are 2 separate array references:  </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$array_ref1 = [3, 4, 1, 2];\n$array_ref2 = ['Black', 'Orange', 'White', 'Blue'];\n</code></pre>\n\n<p>A 2D array could be one of these:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>@array_of_arrayrefs = ([3, 'Black'], [4, 'Orange'], [1, 'White'], [2, 'Blue']);\n%hash = (3 =&gt; 'Black', 4 =&gt; 'Orange', 1 =&gt; 'White', 2 =&gt; 'Blue');\n</code></pre>\n\n<p>In most cases, I would recommend using hashes if possible - you can read a bit about them here: <a href=\"https://perlmaven.com/perl-hashes\" rel=\"nofollow noreferrer\">Hashes in Perl</a></p>\n\n<p>You can use the <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort function</a> for arrays</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># for array_of_arrayrefs\nmy @sorted_array = sort { $a[0] &lt;=&gt; $b[0] } @array_of_arrayrefs;\n</code></pre>\n\n<p>As hash is an un-ordered group of key-value pairs, just call <a href=\"https://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\">keys function</a> and sort the result array (using it to call the hash value as needed).</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1554376465, "creation_date": 1554376465, "answer_id": 55514547, "question_id": 55493814, "link": "https://stackoverflow.com/questions/55493814/how-to-sort-2d-array-by-single-row-in-perl/55514547#55514547", "title": "How to sort 2D array by single row in Perl?", "body": "<p>If you have associated keys and values, then I'd say first you want to transpose the array into a hash:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \n\nuse Data::Dumper;\n\nmy @array = ([3,4,1,2], [\"Black\",\"Orange\",\"White\",\"Blue\"]);\n\nmy %mapping;\n#Assign 'first array' as keys, and second array as values. \n@mapping{@{$array[0]}} = @{$array[1]};\n\n\n#for debugging\nprint Dumper \\%mapping; \n\nmy @sorted_keys = sort keys %mapping;\n\nprint join (\",\", @sorted_keys),\"\\n\"; \nprint join (\",\", @mapping{@sorted_keys} ),\"\\n\";\n</code></pre>\n\n<p>I've gone for a trivial case with the hash-slice assignment, but it allows you to perform arbitrary sorts and maintain the key-value relationship.</p>\n\n<p>You could also adapt this for multi-row input, preserving the column-relationship, although it does get a bit more complicated you can't use a hash-slice assignment like I did any more, but you can build each row into key-value pairs, and either print-as-you-go or merge them to make just one hash of columnated values. </p>\n"}], "owner": {"reputation": 7, "user_id": 11305144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8506a482a178e65fd076fd33ea2a32a?s=128&d=identicon&r=PG&f=1", "display_name": "cicann", "link": "https://stackoverflow.com/users/11305144/cicann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1554376465, "creation_date": 1554290032, "last_edit_date": 1554316477, "question_id": 55493814, "link": "https://stackoverflow.com/questions/55493814/how-to-sort-2d-array-by-single-row-in-perl", "title": "How to sort 2D array by single row in Perl?", "body": "<p>I have 2D array:</p>\n\n<p><code>my @array = ([3,4,1,2], [Black,Orange,White,Blue]);</code></p>\n\n<p>I need to sort it by first row, so expected result is</p>\n\n<pre><code>1,2,3,4\nWhite, Blue, Black, Orange\n</code></pre>\n\n<p>Is there any quick way to do that in perl?\nI know how to sort each row separately, but this is not the goal.</p>\n"}, {"tags": ["perl", "agi"], "answers": [{"comments": [{"owner": {"reputation": 8117, "user_id": 468017, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dac26d347a77d77e44a0b8a330e4d727?s=128&d=identicon&r=PG", "display_name": "medk", "link": "https://stackoverflow.com/users/468017/medk"}, "edited": false, "score": 0, "creation_date": 1554293105, "post_id": 55494485, "comment_id": 97696519, "body": "Thanks for your help, should I replace these 2 lines: my ($number, $idv) = @ARGV; $number=&quot;+4124&quot;.int(rand(10)).int(rand(10)).int(rand(10)).in&zwnj;&#8203;t(rand(10)).int(rand&zwnj;&#8203;(10)).int(rand(10)).&zwnj;&#8203;int(rand(10));"}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "reply_to_user": {"reputation": 8117, "user_id": 468017, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dac26d347a77d77e44a0b8a330e4d727?s=128&d=identicon&r=PG", "display_name": "medk", "link": "https://stackoverflow.com/users/468017/medk"}, "edited": false, "score": 1, "creation_date": 1554293925, "post_id": 55494485, "comment_id": 97697081, "body": "Yes. I am not sure about <code>$idv</code> though. It doesn&#39;t seem to be used."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 1, "last_activity_date": 1554292290, "creation_date": 1554292290, "answer_id": 55494485, "question_id": 55493644, "link": "https://stackoverflow.com/questions/55493644/randomly-select-from-array-in-perl-agi/55494485#55494485", "title": "Randomly Select from Array in PERL / AGI", "body": "<p><a href=\"https://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\">rand EXPR</a> generates a random number between <code>0</code> and <code>EXPR</code>. You can use this behavior to get a random element of an array:</p>\n\n<pre><code>my @predefined = (\n    '+41240000000',\n    '+41240000003',\n    '+41240000007'\n);\nmy $number = $predefined[rand(@predefined)];\n</code></pre>\n"}], "owner": {"reputation": 8117, "user_id": 468017, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dac26d347a77d77e44a0b8a330e4d727?s=128&d=identicon&r=PG", "display_name": "medk", "link": "https://stackoverflow.com/users/468017/medk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55494485, "answer_count": 1, "score": 0, "last_activity_date": 1554292290, "creation_date": 1554289483, "question_id": 55493644, "link": "https://stackoverflow.com/questions/55493644/randomly-select-from-array-in-perl-agi", "title": "Randomly Select from Array in PERL / AGI", "body": "<p>I have a PERL script (not sure) that generates a random number (caller ID) for Asterisk / GoAutodial CRM.</p>\n\n<p>The generated number begins by \"+4124*******\" and a random number for the rest of the number.</p>\n\n<p>How to change it to be a predefined array like:</p>\n\n<pre><code>$numbers = array (\n    '+41240000000',\n    '+41240000003',\n    '+41240000007'\n);\n</code></pre>\n\n<p>Here is the <code>changernum.agi</code> code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n$|=1;\n\nuse Net::Ping;\nuse Asterisk::AGI;\n\n\n$AGI = new Asterisk::AGI;\n\nmy %input = $AGI-&gt;ReadParse();\n\nmy ($number, $idv) = @ARGV;\n$number=\"+4124\".int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10)).int(rand(10));\n\n\n***I think I need something here***\n\n$AGI-&gt;exec(\"SET numafficher=$number\");\n$AGI-&gt;verbose( \"******* / **** / &gt; Numero: $number &lt; ======== \");\n</code></pre>\n"}, {"tags": ["perl", "loops", "fork"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 1972147, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1f2a60634e9e479b61569d379ec870b?s=128&d=identicon&r=PG", "display_name": "Parthiban Nagarajan", "link": "https://stackoverflow.com/users/1972147/parthiban-nagarajan"}, "edited": false, "score": 0, "creation_date": 1554274189, "post_id": 55488644, "comment_id": 97685413, "body": "Sorry! couldn&#39;t understand it. Please elaborate. What should I do to prevent the extra loop?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 107, "user_id": 1972147, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1f2a60634e9e479b61569d379ec870b?s=128&d=identicon&r=PG", "display_name": "Parthiban Nagarajan", "link": "https://stackoverflow.com/users/1972147/parthiban-nagarajan"}, "edited": false, "score": 0, "creation_date": 1554274867, "post_id": 55488644, "comment_id": 97685723, "body": "After further analysis I found that it&#39;s even more complex than I initially thought. I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 3, "last_activity_date": 1554274844, "last_edit_date": 1554274844, "creation_date": 1554273724, "answer_id": 55488644, "question_id": 55488363, "link": "https://stackoverflow.com/questions/55488363/why-including-a-fork-call-creates-more-loops/55488644#55488644", "title": "Why including a fork() call creates more loops", "body": "<p>You end up calling <code>fork()</code> <strong><em>three times</em></strong>, for a total of <em>four</em> processes.  </p>\n\n<p>Here's one possible execution sequence that would produce the output you see:</p>\n\n<pre><code>Process 1       Process 2       Process 3       Process 4\n$i == 1\nfork-----------&gt;$i == 1\n\"Parent 1\"\n                \"Child 1\"\n$i == 2\nfork---------------------------&gt;$i == 2\n\"Parent 2\"\n                                \"Child 2\"\n                $i == 2\n                fork---------------------------&gt;$i == 2\n                \"Parent 2\"\n                                                \"Child 2\"\n wait\n                reaped          \n                                zombie          zombie\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1328, "user_id": 542995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPDiC.jpg?s=128&g=1", "display_name": "zdk", "link": "https://stackoverflow.com/users/542995/zdk"}, "is_accepted": true, "score": 1, "last_activity_date": 1554275434, "last_edit_date": 1554275434, "creation_date": 1554274342, "answer_id": 55488826, "question_id": 55488363, "link": "https://stackoverflow.com/questions/55488363/why-including-a-fork-call-creates-more-loops/55488826#55488826", "title": "Why including a fork() call creates more loops", "body": "<p>Similar question and answer can be found at <a href=\"https://stackoverflow.com/a/8318556/542995\">https://stackoverflow.com/a/8318556/542995</a></p>\n\n<p>Because your code will have the first child to start iterating exactly the same as the parent does.</p>\n\n<p>So, just to simply, in order to prevent extra loop. You may have to <code>exit</code> the child job and put <code>wait();</code> for parent in response to finished job in a separate loop. And, that will lead to what you expected.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $n = 2;\n\nfor my $i (1 .. $n) {\n  my $pid = fork;\n  if (not $pid) {\n    print \"Child: $i\\n\";\n    exit;\n  } else {\n    print \"Parent $i\\n\";\n  }\n}\n\nfor (1 .. $n) {\n   wait();\n   print \"Job finished\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Parent 1\nParent 2\nChild: 1\nChild: 2\nJob finished\nJob finished\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 3, "last_activity_date": 1554276204, "creation_date": 1554276204, "answer_id": 55489307, "question_id": 55488363, "link": "https://stackoverflow.com/questions/55488363/why-including-a-fork-call-creates-more-loops/55489307#55489307", "title": "Why including a fork() call creates more loops", "body": "<p>As mentionned in <a href=\"https://stackoverflow.com/a/55488644/4990392\">Jim Garisson's answer</a>, you end up calling <code>fork</code> three times, thus creating 3 additional processes. </p>\n\n<p>Here is a simpler example, which might help you understand what's happening:</p>\n\n<pre><code>say \"Start\";\nfork();\nsay \"Middle\";\nfork();\nsay \"End\";\n</code></pre>\n\n<p>One of the possible outputs is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Start\nMiddle\nMiddle\nEnd\nEnd\nEnd\nEnd\n</code></pre>\n\n<p>The initial process says \"Start\", then forks, so you end up with two processes, each of which says \"Middle\" and then forks, each creating one additional process, and thus you end up with 4 processes saying \"End\".</p>\n\n<p>A graphical representation might be useful:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> \"Start\"\n    |\n  fork()\n    |\n    ------------------------------\n    |                            |\n \"Middle\"                     \"Middle\"\n    |                            |\n  fork()                       fork()\n    |                            |\n    ---------------              ---------------\n    |             |              |             |\n  \"End\"         \"End\"          \"End\"         \"End\"\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 1972147, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1f2a60634e9e479b61569d379ec870b?s=128&d=identicon&r=PG", "display_name": "Parthiban Nagarajan", "link": "https://stackoverflow.com/users/1972147/parthiban-nagarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 55488826, "answer_count": 3, "score": 2, "last_activity_date": 1554276204, "creation_date": 1554272638, "question_id": 55488363, "link": "https://stackoverflow.com/questions/55488363/why-including-a-fork-call-creates-more-loops", "title": "Why including a fork() call creates more loops", "body": "<p>When I include <code>fork()</code> function call in the loop, the loop executes more than the expected times. For the sake of simplicity, I have chosen only two iterations; you can test with more than that.</p>\n\n<p>I have tried setting the <code>autoflush on</code> but that doesn't seem to work.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse IO::Handle;\n\n$|++; #autoflush on\nSTDOUT-&gt;flush();\n\nfor my $i (1 .. 2) {\n    print \"Normal =&gt; $i\\n\";\n}\nprint \"\\n\";\n\nfor my $i (1 .. 2) {\n    my $pid = fork();\n    if(not defined($pid)) {\n       die \"cannot fork\\n\";\n    } elsif (not $pid) {\n       print \"Child  =&gt; $i\\n\";\n    } else {\n       print \"Parent =&gt; $i\\n\";\n       wait();\n    }\n}\n\n</code></pre>\n\n<p>Actual Output</p>\n\n<pre><code>Normal =&gt; 1\nNormal =&gt; 2\n\nParent =&gt; 1\nChild  =&gt; 1\nParent =&gt; 2\nChild  =&gt; 2\nParent =&gt; 2\nChild  =&gt; 2\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code>Normal =&gt; 1\nNormal =&gt; 2\n\nParent =&gt; 1\nChild  =&gt; 1\nParent =&gt; 2\nChild  =&gt; 2\n</code></pre>\n\n<p>Please help me understanding what is wrong here.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554266538, "post_id": 55485658, "comment_id": 97682854, "body": "&quot;<i>expect all strings ADD2999 to be replaced</i>&quot;  -- you are replacing them, but in a variable in your program (the <code>$_</code> variable); that&#39;s never written to a file.  In order to change text in a file you generally need to rewrite the whole file.  So, iterate over <code>@files</code>, and as you read each line of a file write it over to another file (change what needs changing), and when that&#39;s all done move that other file over the original.  (<i>Test carefully first</i>, before you change all your files!)   Do you know how to do this?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1554266634, "post_id": 55485658, "comment_id": 97682880, "body": "The above can be simplified by using modules. In particular, <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> has a method (<a href=\"https://metacpan.org/pod/Path::Tiny#edit_lines,-edit_lines_utf8,-edit_lines_raw\" rel=\"nofollow noreferrer\">edit_lines</a>) that will make a change to a file (it does all the above behind the scenes)."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11302757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f76e286b7998d22a57cb4a965f3d51?s=128&d=identicon&r=PG&f=1", "display_name": "P Shoe", "link": "https://stackoverflow.com/users/11302757/p-shoe"}, "edited": false, "score": 0, "creation_date": 1554321127, "post_id": 55487574, "comment_id": 97712722, "body": "Thanks Stefan that worked perfectly at home using Linux.  Unfortunately at work we do not have the File::Slurper module installed."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1554268849, "creation_date": 1554268849, "answer_id": 55487574, "question_id": 55485658, "link": "https://stackoverflow.com/questions/55485658/need-to-loop-through-directory-delete-lines-that-match-pattern/55487574#55487574", "title": "Need to loop through directory - delete lines that match pattern", "body": "<p>This would be my first attempt at the problem, but it could use some more corner case checking. E.g. how do you handle write-protected files, etc. It also assumes that the files are small enough to fit into memory for processing.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie;\n\nuse File::Spec;\nuse File::Slurper qw(read_text write_text);\n\nmy $count = 0;\nmy $dir = \"tmp\";\n\nopendir(my $dh, $dir);\nwhile (readdir $dh) {\n    # skip anything that shouldn't be processed\n    next if /^\\.\\.?$/; # . &amp;&amp; ..\n    my $file = File::Spec-&gt;catfile($dir, $_);\n    next if -d $file;  # directories\n\n    # slurp file content and replace text\n    my $content = read_text($file);\n    my $matches = ($content =~ s/ADD2999/sometext/g);\n\n    # count lines\n    my @eols = ($content =~ /(\\n)/g);\n    $count += @eols;\n\n    # replace original file if contents were modified\n    write_text($file, $content) if $matches;\n}\nclosedir($dh);\n\nprint \"Total lines read are: $count\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ wc -l tmp/test*.txt\n  5 tmp/test2.txt\n  6 tmp/test.txt\n 11 total\n$ fgrep ADD2999 tmp/*.txt\ntmp/test2.txt:asddsada ADD2999 asdsadasd\ntmp/test2.txt:21312398 ADD2999 dasdas\n\n$ perl dummy.pl\nTotal lines read are: 11\n\n$ fgrep ADD2999 tmp/*.txt\n$ fgrep sometext tmp/*.txt\ntmp/test2.txt:asddsada sometext asdsadasd\ntmp/test2.txt:21312398 sometext dasdas\n</code></pre>\n\n<p>If the files are large you will need to use line-by-line processing approach (just showing the contents of the loop). That has the side-effect that all files will be touched, although they might not have any replacements in it:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># read file and replace text\nopen(my $ifh, '&lt;', $file);\nmy $tmpfile = File::Spec-&gt;catfile($dir, \"$_.$$\");\nopen(my $ofh, '&gt;', $tmpfile);\nwhile (&lt;$ifh&gt;) {\n    s/ADD2999/sometext/g;\n    print $ofh $_;\n}\n$count += $.; # total lines in $ifh\nclose($ofh);\nclose($ifh);\n\n# replace original file with new file\nunlink($file);\nrename($tmpfile, $file);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1554324849, "last_edit_date": 1554324849, "creation_date": 1554269005, "answer_id": 55487599, "question_id": 55485658, "link": "https://stackoverflow.com/questions/55485658/need-to-loop-through-directory-delete-lines-that-match-pattern/55487599#55487599", "title": "Need to loop through directory - delete lines that match pattern", "body": "<p>To remove lines, you need to avoid printing them when writing to the new file. Your code doesn't write to any files at all???</p>\n\n<hr>\n\n<p>This might be a job for existing tools.</p>\n\n<pre><code>find /home/hstrn/dat/feeLoad -maxdepth 1 -type f \\\n   -exec perl -i~ -ne'print if !/ADD2999/' {} +\n</code></pre>\n\n<p>Use <code>-i</code> instead of <code>-i~</code> if you want to avoid creating a backup. I prefer creating the backups, then deleting them once I've confirmed that everything is ok.</p>\n\n<p>Show the files that are going to get deleted:</p>\n\n<pre><code>find /home/hstrn/dat/feeLoad -maxdepth 1 -type f -name '*~'\n</code></pre>\n\n<p>Delete the files:</p>\n\n<pre><code>find /home/hstrn/dat/feeLoad -maxdepth 1 -type f -name '*~' -delete\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11302757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f76e286b7998d22a57cb4a965f3d51?s=128&d=identicon&r=PG&f=1", "display_name": "P Shoe", "link": "https://stackoverflow.com/users/11302757/p-shoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 55487599, "answer_count": 2, "score": 0, "last_activity_date": 1554324849, "creation_date": 1554254271, "question_id": 55485658, "link": "https://stackoverflow.com/questions/55485658/need-to-loop-through-directory-delete-lines-that-match-pattern", "title": "Need to loop through directory - delete lines that match pattern", "body": "<p>Need to loop through a Unix directory and search each line in each file. If there is a pattern match delete the line.  Was not able to get the line deletion to work so i'm just trying to find pattern and replace with another.</p>\n\n<p>Populating an array with file names and looping through.  I have a counter set it's looking at each of the lines in each file (at least they count is correct).</p>\n\n<pre><code>#!/usr/bin/perl -l\n#!/usr/bin/perl -i.bak -w\n#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse File::Find;\n\n# 4-1-19\n# pfs\n# remove lines with dental code ADD2999 from all HMO Max load files in /home/hsxxx/dat/feeLoad directory\n\n$| = 1;\n\n\nchdir \"/home/hstrn/dat/feeLoad\";\nchdir;\n\n\nmy $dir  = &lt;/home/hstrn/dat/feeLoad/&gt;;\nmy @files;\nmy $count=0;\n\nopendir(DIR, $dir) or die \"Cannot open directory $dir, Perl says $!\\n\";\n\nwhile (my $file = readdir DIR)\n{\n        push @files, \"$dir/$file\" unless -d \"$dir/$file\";\n}\n\nclosedir DIR;\n\n{\nlocal @ARGV = @files;\nwhile (&lt;&gt;)\n{\n        s/ADD2999/sometext/g;\n        $count++;\n}\nprint \"Total lines read are: $count\";\n\n}\n</code></pre>\n\n<p>Would expect all strings ADD2999 to be replaced with sometext</p>\n"}, {"tags": ["linux", "perl", "perl-module"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1554250896, "post_id": 55485253, "comment_id": 97679897, "body": "Related: <a href=\"https://stackoverflow.com/questions/45000585/listutil-c-loadable-library-and-perl-binaries-are-mismatched-got-handshake-key\" title=\"listutil c loadable library and perl binaries are mismatched got handshake key\">stackoverflow.com/questions/45000585/&hellip;</a> . Make sure <code>PERL5LIB</code> or <code>PERL_LOCAL_LIB_ROOT</code> aren&#39;t referring to any directories with old distributions in them."}], "answers": [{"comments": [{"owner": {"reputation": 394, "user_id": 713659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d6eca3dfa0bd2f3f559d5f3a9b3d08?s=128&d=identicon&r=PG", "display_name": "Alexander Karatarakis", "link": "https://stackoverflow.com/users/713659/alexander-karatarakis"}, "edited": false, "score": 0, "creation_date": 1562357296, "post_id": 55485371, "comment_id": 100361943, "body": "Encountered this when dual booting Ubuntu 16.04 &amp; 18.04 (with the same home dir). This is the solution. Actually got it when going 18.04-&gt;16.04."}], "tags": [], "owner": {"reputation": 1249, "user_id": 6750100, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c75c50456c358348c0155eba49659b0?s=128&d=identicon&r=PG&f=1", "display_name": "Codewise", "link": "https://stackoverflow.com/users/6750100/codewise"}, "is_accepted": false, "score": 4, "last_activity_date": 1554251760, "creation_date": 1554251760, "answer_id": 55485371, "question_id": 55485253, "link": "https://stackoverflow.com/questions/55485253/tty-c-loadable-library-and-perl-binaries-are-mismatched/55485371#55485371", "title": "Tty.c: loadable library and perl binaries are mismatched", "body": "<p>I deleted my <code>~/perl5</code> directory. Expect installed fine.</p>\n"}], "owner": {"reputation": 1249, "user_id": 6750100, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c75c50456c358348c0155eba49659b0?s=128&d=identicon&r=PG&f=1", "display_name": "Codewise", "link": "https://stackoverflow.com/users/6750100/codewise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1554251760, "creation_date": 1554250480, "question_id": 55485253, "link": "https://stackoverflow.com/questions/55485253/tty-c-loadable-library-and-perl-binaries-are-mismatched", "title": "Tty.c: loadable library and perl binaries are mismatched", "body": "<p>I upgraded Ubuntu from zesty to bionic. In the process perl was upgraded from 5.24.1 to 5.26.1. Now I am getting this error when I try to install <code>Expect</code>.</p>\n\n<pre><code>Tty.c: loadable library and perl binaries are mismatched \n</code></pre>\n\n<p>I have re-installed IO::Tty and that says it has installed correctly. There are other modules that are reporting similar errors.</p>\n\n<p>Here is the full output from the failed <code>Expect</code> install.</p>\n\n<pre><code>Fetching http://www.cpan.org/authors/id/J/JA/JACOBY/Expect-1.35.tar.gz\n-&gt; OK\nUnpacking Expect-1.35.tar.gz\nEntering Expect-1.35\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.64 ... Yes (7.24)\nConfiguring Expect-1.35\nRunning Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for Expect\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have Fcntl 0 ... Yes (1.13)\nChecking if you have IO::Handle 0 ... Yes (1.36)\nChecking if you have IO::Pty 1.11 ... Yes (1.12)\nChecking if you have Errno 0 ... Yes (1.28)\nChecking if you have Test::More 1.00 ... Yes (1.302162)\nChecking if you have Exporter 0 ... Yes (5.72)\nChecking if you have IO::Tty 1.11 ... Yes (1.12)\nChecking if you have File::Temp 0 ... Yes (0.2309)\nChecking if you have POSIX 0 ... Yes (1.76)\nChecking if you have Carp 0 ... Yes (1.42)\nBuilding and testing Expect-1.35\ncp lib/Expect.pm blib/lib/Expect.pm\nManifying 1 pod document\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/01-test.t ....... \nDubious, test returned 1 (wstat 256, 0x100)\nFailed 14/14 subtests \nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/02-bc.t ......... \nDubious, test returned 1 (wstat 256, 0x100)\nNo subtests run \nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/03-log.t ........ \nDubious, test returned 1 (wstat 256, 0x100)\nFailed 11/11 subtests \nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/04-multiline.t .. \nDubious, test returned 1 (wstat 256, 0x100)\nFailed 33/33 subtests \nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/10-internal.t ... \nDubious, test returned 1 (wstat 256, 0x100)\nFailed 17/17 subtests \nTty.c: loadable library and perl binaries are mismatched (got handshake key 0xdb80080, needed 0xde00080)\nt/11-calc.t ....... \nDubious, test returned 1 (wstat 256, 0x100)\nNo subtests run \n\nTest Summary Report\n-------------------\nt/01-test.t     (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: Bad plan.  You planned 14 tests but ran 0.\nt/02-bc.t       (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: No plan found in TAP output\nt/03-log.t      (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: Bad plan.  You planned 11 tests but ran 0.\nt/04-multiline.t (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: Bad plan.  You planned 33 tests but ran 0.\nt/10-internal.t (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: Bad plan.  You planned 17 tests but ran 0.\nt/11-calc.t     (Wstat: 256 Tests: 0 Failed: 0)\n  Non-zero exit status: 1\n  Parse errors: No plan found in TAP output\nFiles=6, Tests=0,  2 wallclock secs ( 0.08 usr  0.03 sys +  1.87 cusr  0.21 csys =  2.19 CPU)\nResult: FAIL\nFailed 6/6 test programs. 0/0 subtests failed.\nMakefile:856: recipe for target 'test_dynamic' failed\nmake: *** [test_dynamic] Error 1\n-&gt; FAIL Installing Expect failed. See /home/chronos/.cpanm/work/1554249881.4055/build.log for details. Retry with --force to force install it.\nchronos@BattleShip:~/app$ perl -v\n\nThis is perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-linux-gnu-thread-multi\n(with 67 registered patches, see perl -V for more detail)\n\nCopyright 1987-2017, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554250964, "post_id": 55485201, "comment_id": 97679907, "body": "So you want a specific order determined by these particular strings, <code>sf,ef,vld,val</code>?"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554251007, "post_id": 55485201, "comment_id": 97679917, "body": "Yes @zdim, that is correct."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1554251319, "last_edit_date": 1554251319, "creation_date": 1554251125, "answer_id": 55485308, "question_id": 55485201, "link": "https://stackoverflow.com/questions/55485201/how-to-re-order-list-elements-in-perl/55485308#55485308", "title": "How to re-order list elements in Perl", "body": "<p>For a short list, use a sort function that identifies the sequences in order</p>\n\n<pre><code>@sorted = sort {\n    ($b =~ /sf$/) &lt;=&gt; ($a =~ /sf$/)\n        || ($b =~ /ef$/) &lt;=&gt; ($a =~ /ef$/)\n        || ($b =~ /vld$/) &lt;=&gt; ($a =~ /vld$/)\n        || ($b =~ /val$/) &lt;=&gt; ($a =~ /val$/)\n} @alist;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 7, "last_activity_date": 1587801317, "last_edit_date": 1587801317, "creation_date": 1554251250, "answer_id": 55485325, "question_id": 55485201, "link": "https://stackoverflow.com/questions/55485201/how-to-re-order-list-elements-in-perl/55485325#55485325", "title": "How to re-order list elements in Perl", "body": "<p>One way to order (sort) by a given set is to associate a numeric order with its elements.</p>\n\n<p>Then we need to find these keys in the strings in the list to sort.  That is done once, ahead of the actual sorting, via the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>.</p>\n\n<pre><code>use List::Util qw(first);\n\nmy @alist = (\"a_vld\", \"a_sf\", \"a_ef\", \"a_val\");\n\nmy @keys = qw(sf ef vld val);                       # keys to sort by\nmy %order_by = map { $keys[$_] =&gt; $_ } 0..$#keys;\n\nmy @sorted = \n    map { $_-&gt;[0] }\n    sort { $order_by{$a-&gt;[1]} &lt;=&gt; $order_by{$b-&gt;[1]} }\n    map {\n        my $elem = $_;\n        [ $elem, first { $elem =~ /$_/ } keys %order_by ]\n    }\n    @alist;\n\nsay \"@sorted\";\n</code></pre>\n\n<p>This prints the line: &thinsp; <code>a_sf a_ef a_vld a_val</code></p>\n\n<p>The elements of the list are associated with the sorting keys by finding the key in the string via a regex. With this in mind the above can be used reasonably generally, with a desired list of keys .</p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554283339, "post_id": 55487292, "comment_id": 97690462, "body": "You were missing the declaration of <code>$re</code> in your first two versions; and the <code>$</code> before <code>alt</code> in the last two version; I took the liberty to edit that in. Hope you don&#39;t mind ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554324480, "post_id": 55487292, "comment_id": 97714251, "body": "@Dada, Oops. I broke it in a refactor. Thanks for the attempt, but the top and bottom solutions were the same after your change. I have now finished the fix."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554328031, "post_id": 55487292, "comment_id": 97715543, "body": "Oh indeed, I didn&#39;t pay too much attention when editing, and didn&#39;t noticed that both solutions became the same! Nice answer btw; I didn&#39;t know about Sort::Key :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554329587, "post_id": 55487292, "comment_id": 97716071, "body": "@Dada, With Sort::Key, you get the benefits of a ST or GRT without the messy code :) And it&#39;s not limited to simple keys as you might thing at a glance. For example, I don&#39;t handle ties in my S::K version, but I could have."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1554329647, "last_edit_date": 1554329647, "creation_date": 1554266953, "answer_id": 55487292, "question_id": 55485201, "link": "https://stackoverflow.com/questions/55485201/how-to-re-order-list-elements-in-perl/55487292#55487292", "title": "How to re-order list elements in Perl", "body": "<p><strong>If there's always a <code>_</code> before the code, and if the code is always at the end</strong></p>\n\n<pre><code>use Sort::Key qw( ikeysort );\n\nmy @order = qw( sf ef vld val );\nmy %order = map { $order[$_] =&gt; $_ } 0..$#order;\n\nmy @sorted = ikeysort { /_([^_\\W]+)\\z/ ? $order{$1} : 0 } @unsorted;\n</code></pre>\n\n<p>The above is a faster, cleaner version of the following:</p>\n\n<pre><code>my @order = qw( sf ef vld val );\nmy %order = map { $order[$_] =&gt; $_ } 0 .. $#order;\n\nmy @sorted =\n   sort {\n      my $key_a = /_([^_\\W]+)\\z/ ? $order{$1} : 0;\n      my $key_b = /_([^_\\W]+)\\z/ ? $order{$1} : 0;\n      $key_a &lt;=&gt; $key_b || $a cmp $b\n   }\n      @unsorted;\n</code></pre>\n\n<p><strong>Otherwise</strong></p>\n\n<pre><code>use Sort::Key qw( ikeysort );\n\nmy @order = qw( sf ef vld val );\nmy %order = map { $order[$_] =&gt; $_ } 0..$#order;\nmy $alt = join '|', map quotemeta, @order;\nmy $re = qr/($alt)/;\n\nmy @sorted = ikeysort { /$re/ ? $order{$1} : 0 } @unsorted;\n</code></pre>\n\n<p>The above is a faster, cleaner version of the following:</p>\n\n<pre><code>my @order = qw( sf ef vld val );\nmy %order = map { $order[$_] =&gt; $_ } 0..$#order;\nmy $alt = join '|', map quotemeta, @order;\nmy $re = qr/($alt)/;\n\nmy @sorted =\n   sort {\n      my $key_a = /$re/ ? $order{$1} : 0;\n      my $key_b = /$re/ ? $order{$1} : 0;\n      $key_a &lt;=&gt; $key_b || $a cmp $b\n   }\n      @unsorted;\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 55485308, "answer_count": 3, "score": 1, "last_activity_date": 1587801317, "creation_date": 1554250021, "question_id": 55485201, "link": "https://stackoverflow.com/questions/55485201/how-to-re-order-list-elements-in-perl", "title": "How to re-order list elements in Perl", "body": "<p>I have a list in <code>Perl</code>.</p>\n\n<pre><code>@alist=(\"a_vld\",\"a_sf\",\"a_ef\",\"a_val\");\nprint join(',', @alist), \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a_vld,a_sf,a_ef,a_val\n</code></pre>\n\n<p>How can I re-order the elements in list such that its output is as following expected output:</p>\n\n<pre><code>a_sf,a_ef,a_vld,a_val\n</code></pre>\n\n<p>Note: <code>a_</code> will keep changing with different strings but I want to preserve the order of <code>sf,ef,vld,val</code></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 1, "creation_date": 1554237440, "post_id": 55483118, "comment_id": 97676023, "body": "<code>\\@\\@CUSTOMER=\\s*(.+?)\\s*\\@\\@</code>"}, {"owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "edited": false, "score": 0, "creation_date": 1554237735, "post_id": 55483118, "comment_id": 97676152, "body": "Why does your regex contain <code>&quot;@@CUSTOMER=&quot;</code>, while your example inputs contain <code>&quot;@@VALUE=</code>? Please edit to clarify."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 0, "creation_date": 1554237739, "post_id": 55483118, "comment_id": 97676155, "body": "@Matthew That looks like it would have awful performance if there is a long string without <code>@@</code> at the end."}, {"owner": {"reputation": 21, "user_id": 6901830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aE6TdMflU0A/AAAAAAAAAAI/AAAAAAAACjg/cem35c3z5zM/photo.jpg?sz=128", "display_name": "Paulie M", "link": "https://stackoverflow.com/users/6901830/paulie-m"}, "reply_to_user": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 0, "creation_date": 1554238005, "post_id": 55483118, "comment_id": 97676270, "body": "@Matthew - that worked perfectly. I was taking completely the wrong approach."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 0, "creation_date": 1554238735, "post_id": 55483118, "comment_id": 97676585, "body": "@Matthew I tested your regex against the string <code>&#39;@@CUSTOMER= hello? &#39; . (&#39; &#39; x 50000) . &quot;\\nX\\@\\@&quot;</code>. It took several seconds to finish (and fail), eating 100% CPU. That&#39;s pretty bad."}, {"owner": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1554238955, "post_id": 55483118, "comment_id": 97676661, "body": "@melpomene thanks for the insight, I very rarely use regex for anything performance critical personally, but it&#39;s good to know about its limitations.  Of course if OP has such a scenario then it would be advisable to pick another solution."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 0, "creation_date": 1554239345, "post_id": 55483118, "comment_id": 97676819, "body": "@Matthew It&#39;s not an inherent limitation of regexes. Just use a non-stupid^W less awful pattern."}, {"owner": {"reputation": 21279, "user_id": 507793, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6G686.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/507793/matthew"}, "edited": false, "score": 1, "creation_date": 1554240064, "post_id": 55483118, "comment_id": 97677109, "body": "Show me where the regex touched you"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1554237490, "creation_date": 1554237490, "answer_id": 55483207, "question_id": 55483118, "link": "https://stackoverflow.com/questions/55483118/regular-expression-to-remove-whitespace-in-the-middle-of-a-string-before-a-chara/55483207#55483207", "title": "Regular Expression to remove whitespace in the middle of a string before a character", "body": "<p>If you're trying to remove all spaces before the final <code>@@</code>, that's just</p>\n\n<pre><code>s/\\s+\\@\\@$/\\@\\@/;\n</code></pre>\n\n<p>I'm not sure why you need to match anything else.</p>\n"}, {"tags": [], "owner": {"reputation": 3388, "user_id": 9534819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbae473f8d26eb6a10d85ab897e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Matt.G", "link": "https://stackoverflow.com/users/9534819/matt-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1554239768, "creation_date": 1554239768, "answer_id": 55483695, "question_id": 55483118, "link": "https://stackoverflow.com/questions/55483118/regular-expression-to-remove-whitespace-in-the-middle-of-a-string-before-a-chara/55483695#55483695", "title": "Regular Expression to remove whitespace in the middle of a string before a character", "body": "<p>Try Regex: <code>\\s+(?=@@$)</code></p>\n\n<p><a href=\"https://regex101.com/r/KR9gI3/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p><a href=\"https://ideone.com/3Z2RXV\" rel=\"nofollow noreferrer\">Perl Demo</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555001486, "creation_date": 1555001486, "answer_id": 55637592, "question_id": 55483118, "link": "https://stackoverflow.com/questions/55483118/regular-expression-to-remove-whitespace-in-the-middle-of-a-string-before-a-chara/55637592#55637592", "title": "Regular Expression to remove whitespace in the middle of a string before a character", "body": "<p>or use perl regex lazy mode</p>\n\n<pre><code>$s = '@@VALUE= Some Company Name       @@'\n$s =~ s/@@VALUE=\\s*(.+?)\\s*@@\\s*$/$1/\nprint $s\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6901830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aE6TdMflU0A/AAAAAAAAAAI/AAAAAAAACjg/cem35c3z5zM/photo.jpg?sz=128", "display_name": "Paulie M", "link": "https://stackoverflow.com/users/6901830/paulie-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1555001486, "creation_date": 1554237108, "last_edit_date": 1554237900, "question_id": 55483118, "link": "https://stackoverflow.com/questions/55483118/regular-expression-to-remove-whitespace-in-the-middle-of-a-string-before-a-chara", "title": "Regular Expression to remove whitespace in the middle of a string before a character", "body": "\n\n<p>I am trying to capture the \"Some Company Name\" from the string below</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@@VALUE= Some Company Name            @@\n</code></pre>\n\n<p>But without the trailing spaces before the final @@.</p>\n\n<p>I'm receiving this data as a pipe so I am trying to use a regex replace in Perl to replace this part, so the final result would look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@@VALUE=Some Company Name@@\n</code></pre>\n\n<p>I can match the leading space before the company name, but my match for the company name is always:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"Some Company Name            \"\n</code></pre>\n\n<p>Currently using this Regex:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(\\@\\@VALUE=)(\\s)([^@]*)\n</code></pre>\n\n<p>Removing trailing white space would be easy if not for the @@ on the end.</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554234226, "post_id": 55482351, "comment_id": 97674630, "body": "&quot;<i>modify every line including the first one</i>&quot;  --- but your &quot;<i>want to obtain</i>&quot; sample doesn&#39;t do that?  Do you mean the prefix all lines <i>within a <code>&lt;span&gt;</code> element</i> in particular?"}, {"owner": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554234653, "post_id": 55482351, "comment_id": 97674806, "body": "Yes that is what I meant, I&#39;ll amend my question"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554235533, "post_id": 55482351, "comment_id": 97675189, "body": "In order to treat a scalar (presumably with newline chars in it) as a &quot;truly&quot; multiline string you want <code>&#47;m</code> modifier, so that the beginning- and end- of line anchors match all linefeeds (and not only the beginning and end of the string). You often also want <code>&#47;s</code> with which the <code>.</code> matches a newline as well.  However, needing to match only within a part of the string (inside <code>span</code> etc) will make this approach more complicated"}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "edited": false, "score": 0, "creation_date": 1554235428, "post_id": 55482505, "comment_id": 97675148, "body": "That&#39;s nice. I must add one requierement though, which I didn&#39;t mention before. The &lt;span&gt; tag may be only a one-liner. I think your code doesn&#39;t work for me for this situation because this will also be true for something like : <code>&lt;span&gt;.*&lt;&#47;span&gt;\\n\\nstuff\\n&lt;&#47;span&gt;</code>. I will edit my question accordingly, sorry."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "edited": false, "score": 1, "creation_date": 1554235999, "post_id": 55482505, "comment_id": 97675392, "body": "@ogr Do you mean that there may be <code>&lt;span ...&gt;red&lt;&#47;span&gt;</code> on one line? If that is so, all it took was to remove the <code>^</code> in the closing condition, so that <code>&lt;&#47;span&gt;</code> need not be on its own line.  I&#39;ve added such one-line <code>span</code>, along with a few more lines, to your sample and it works."}, {"owner": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "edited": false, "score": 0, "creation_date": 1554235999, "post_id": 55482505, "comment_id": 97675393, "body": "Yep, it now seems to do the trick, thanks ! (I&#39;m still pretty new to perl)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "edited": false, "score": 0, "creation_date": 1554236132, "post_id": 55482505, "comment_id": 97675455, "body": "@ogr Great.  Let me know of questions, and/or if things come up later :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1554236076, "last_edit_date": 1554236076, "creation_date": 1554234571, "answer_id": 55482505, "question_id": 55482351, "link": "https://stackoverflow.com/questions/55482351/replace-the-beginning-of-every-line-of-a-possibly-multiline-pattern/55482505#55482505", "title": "Replace the beginning of every line of a possibly multiline pattern", "body": "<p>One way is to use a <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a></p>\n\n<pre><code>perl -wpe'print \"+ \" if /^\\s*&lt;span/ .. /&lt;\\/span&gt;/' file\n</code></pre>\n\n<p>The <code>..</code> operator in this use maintains its state, so that</p>\n\n<blockquote>\n  <p>Once the left operand is true, the range operator stays true until the right operand is true, AFTER which the range operator becomes false again. </p>\n</blockquote>\n\n<p>Its typical use is precisely to select a range of lines, delimited by the given conditions.</p>\n\n<p>Here I've restricted the opening <code>span</code>s to be the first non-blank thing on its line, but not the closing one so to allow for one-line <code>&lt;span ...&gt;word&lt;/span&gt;</code> sections to work.</p>\n"}, {"tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1554236429, "creation_date": 1554236429, "answer_id": 55482959, "question_id": 55482351, "link": "https://stackoverflow.com/questions/55482351/replace-the-beginning-of-every-line-of-a-possibly-multiline-pattern/55482959#55482959", "title": "Replace the beginning of every line of a possibly multiline pattern", "body": "<p>Use the range operator to mask the range you want, and then append to lines starting with white space. This code doesn't give exactly what you want but will point you in the right direction.</p>\n\n<pre><code>while(&lt;&gt;) {\n    if( /stuff above/ .. /stuff below/ ){\n        $_= \"+\".$_ if /^ +/;\n        print $_;\n    }\n}\n</code></pre>\n\n<p>Range operator is one of my favourites!</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1554892880, "last_edit_date": 1554892880, "creation_date": 1554882625, "answer_id": 55607385, "question_id": 55482351, "link": "https://stackoverflow.com/questions/55482351/replace-the-beginning-of-every-line-of-a-possibly-multiline-pattern/55607385#55607385", "title": "Replace the beginning of every line of a possibly multiline pattern", "body": "<p>if your data in 'd' file</p>\n\n<pre><code>perl -ne 'if (/^\\s*&lt;(span)&gt;.*?(&lt;\\/\\1&gt;)?\\s*$/) {print \"+$&amp;\";next if ($2);$t=\"&lt;/$1&gt;\";do{$_=&lt;&gt;;print \"+$_\"} until(/$t/) } else {print}' d\n</code></pre>\n\n<p>gnu sed</p>\n\n<pre><code>sed -E 's/&lt;(span)&gt;.*&lt;\\/\\1&gt;/+&amp;/;Tc;b ;:c /^\\s*&lt;span&gt;/{s/^/+/;:l n;s/^/+/;/&lt;\\/span&gt;/!bl}' d\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 4122419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17962324cc5df230cf873c346d583772?s=128&d=identicon&r=PG", "display_name": "ogr", "link": "https://stackoverflow.com/users/4122419/ogr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 55482505, "answer_count": 3, "score": 1, "last_activity_date": 1554892880, "creation_date": 1554233921, "last_edit_date": 1554235559, "question_id": 55482351, "link": "https://stackoverflow.com/questions/55482351/replace-the-beginning-of-every-line-of-a-possibly-multiline-pattern", "title": "Replace the beginning of every line of a possibly multiline pattern", "body": "<p>I'm trying to match a multiline pattern and modify every line matching this pattern including, the first one, so that a character will be added at the beginning of the line (<code>+/-</code>)</p>\n\n<p>For example, I have that :</p>\n\n<pre><code>stuff above\n&lt;span&gt;one-liner span&lt;/span&gt;\nstuff middle\n    &lt;span&gt;stuff inside\n    other stuff\n    &lt;/span&gt;\nstuff below\n</code></pre>\n\n<p>And I want to obtain that :</p>\n\n<pre><code>stuff above\n+ &lt;span&gt;one-liner span&lt;/span&gt;\nstuff middle\n+     &lt;span&gt;stuff inside\n+     other stuff\n+     &lt;/span&gt;\nstuff below\n</code></pre>\n\n<p>So far I am there :</p>\n\n<pre><code>perl -n0e 's/\\n(.*&lt;span style=\"color: green\".*?&lt;\\/span&gt;)/+$1/g &amp;&amp; print' myfile.html\n</code></pre>\n\n<p>The problem here is that it only modifies the first line and if it is a multiline pattern, I want to modify all the lines.</p>\n\n<p>Any ideas how to do that ?</p>\n\n<p>I'm using perl, but I'm open to other tools if you think it's better.</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["linux", "perl", "apache2", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 1995665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496cc6cad9df1dfb0847bf39622b3a09?s=128&d=identicon&r=PG", "display_name": "Hurukan Imperial Stepper", "link": "https://stackoverflow.com/users/1995665/hurukan-imperial-stepper"}, "edited": false, "score": 0, "creation_date": 1554235065, "post_id": 55481210, "comment_id": 97674987, "body": "I do not use mod_cache module AFAIK"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1554229081, "creation_date": 1554229081, "answer_id": 55481210, "question_id": 55481036, "link": "https://stackoverflow.com/questions/55481036/perl-script-not-executed-in-one-three-virtual-hosts-configured-the-same/55481210#55481210", "title": "perl script not executed in one three virtual hosts configured the same", "body": "<p>If it is not your script producing the <code>304</code> status code, it is your server configuration.\nOn Apache, <a href=\"https://airbrake.io/blog/http-errors/304-not-modified\" rel=\"nofollow noreferrer\">play around with <code>mod_cache</code> settings</a> to prevent your server from sending them.</p>\n"}], "owner": {"reputation": 69, "user_id": 1995665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496cc6cad9df1dfb0847bf39622b3a09?s=128&d=identicon&r=PG", "display_name": "Hurukan Imperial Stepper", "link": "https://stackoverflow.com/users/1995665/hurukan-imperial-stepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1554229081, "creation_date": 1554228274, "question_id": 55481036, "link": "https://stackoverflow.com/questions/55481036/perl-script-not-executed-in-one-three-virtual-hosts-configured-the-same", "title": "perl script not executed in one three virtual hosts configured the same", "body": "<p>I have three virtual hosts on apache2 web server.\nTwo of them use perl scripts that are working perfectly.\nThe third I just created with EXACTLY THE SAME configuration concerning the ScriptAlias directive</p>\n\n<p>Number one: working</p>\n\n<p>ScriptAlias /cgi-bin/ \"/www/old/uep/cgi-bin/\"</p>\n\n<p>Number two: working</p>\n\n<p>ScriptAlias /cgi-bin/ \"/www/cssm/formulaire/cgi-bin/\"</p>\n\n<p>Number three: not working</p>\n\n<p>(the perl script is about to be downloaded instead of being executed as the two others)</p>\n\n<p>ScriptAlias /cgi-bin/ \"/www/cssm/juin2019/cgi-bin/\"</p>\n\n<p>All the hosts are configured the same, all the scripts have sufficient rights to be executed, but only the last can not be executed.</p>\n\n<p>Checked logs: no errors, the access log file indicates GET concerning the script with .pl extension and with execution permission.</p>\n\n<p>Emptied the browser cache (everything).</p>\n\n<p>Kompared the three involved .conf files in /etc/apache2/vhosts.d</p>\n\n<p>All of the three .conf files are the same, with no difference but the path and the error/access log names.</p>\n\n<p>I use the following settings in the three .conf files concerning the main directory</p>\n\n<p>Options Indexes FollowSymLinks\nIndexOptions +Charset=UTF-8 NameWidth=* </p>\n\n<p>I don't use symbolic links in the path.\nIn the HTML file I use a FORM for one of the two site that are working, and a direct link /cgi-bin/forum.pl for the other working site.</p>\n\n<p>NOT WORKING:</p>\n\n<p>192.168.0.4 - - [02/Apr/2019:19:32:54 +0200] \"GET /cgi-bin/examenjuin.pl HTTP/1.1\" 304 - \"<a href=\"http://www.examenjuin2019.cssm/\" rel=\"nofollow noreferrer\">http://www.examenjuin2019.cssm/</a>\" \"Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0\"</p>\n\n<p>WORKING:</p>\n\n<p>192.168.0.4 - - [02/Apr/2019:19:51:38 +0200] \"GET /cgi-bin/forum.pl HTTP/1.1\" 200 2209 \"<a href=\"http://www.uepsoundsystem.dezordi.world/\" rel=\"nofollow noreferrer\">http://www.uepsoundsystem.dezordi.world/</a>\" \"Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0\"</p>\n\n<p>Can not understand why two perl scripts in different folders with exactly the same permissions are working and this one can't...</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1554225169, "post_id": 55480186, "comment_id": 97670422, "body": "<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=107810\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=107810</a>"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1554225387, "post_id": 55480230, "comment_id": 97670516, "body": "Between the pod error and not identifying <code>Statistics::Distributions</code> as a prerequisite, <a href=\"http://matrix.cpantesters.org/?dist=Statistics-Normality+0.01\" rel=\"nofollow noreferrer\">this module does not test very well</a>."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1554225531, "post_id": 55480230, "comment_id": 97670598, "body": "I was afraid to use the &quot;-f&quot; option as I thought it would break it somehow.  Thank you!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1554225168, "creation_date": 1554225168, "answer_id": 55480230, "question_id": 55480186, "link": "https://stackoverflow.com/questions/55480186/perl-installation-of-statisticsnormality-fails/55480230#55480230", "title": "Perl: Installation of Statistics::Normality fails", "body": "<p>If that's the only test error, it's a documentation issue and nothing to worry about. Install the module forcefully.</p>\n\n<pre><code>$ cpan -f Statistics::Normality\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 55480230, "answer_count": 1, "score": 0, "last_activity_date": 1554225168, "creation_date": 1554224969, "question_id": 55480186, "link": "https://stackoverflow.com/questions/55480186/perl-installation-of-statisticsnormality-fails", "title": "Perl: Installation of Statistics::Normality fails", "body": "<p>I'm trying to install Perl's <code>Statistics::Normality</code> (<a href=\"https://metacpan.org/pod/Statistics::Normality\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Statistics::Normality</a>) but I am getting errors I don't know how to fix on the command line from CPAN 2.26 and perl 5.26.1</p>\n\n<p>I've tried the installation instructions on that page, but they produce errors</p>\n\n<pre><code>Reading '/home/con/.local/share/.cpan/Metadata'   Database was generated on Tue, 02 Apr 2019 16:17:03 GMT Running install for module 'Statistics::Normality' Checksum for /home/con/.local/share/.cpan/sources/authors/id/M/MW/MWENDL/Statistics-Normality-0.01.tar.gz ok Scanning cache /home/con/.local/share/.cpan/build for sizes ............................................................................DONE Configuring M/MW/MWENDL/Statistics-Normality-0.01.tar.gz with Makefile.PL Checking if your kit is complete... Looks good Generating a Unix-style Makefile Writing Makefile for Statistics::Normality Writing MYMETA.yml and MYMETA.json   MWENDL/Statistics-Normality-0.01.tar.gz   /usr/bin/perl Makefile.PL INSTALLDIRS=site -- OK Running make for M/MW/MWENDL/Statistics-Normality-0.01.tar.gz cp lib/Statistics/Normality.pm blib/lib/Statistics/Normality.pm Manifying 1 pod document   MWENDL/Statistics-Normality-0.01.tar.gz   /usr/bin/make -- OK Running make test for MWENDL/Statistics-Normality-0.01.tar.gz PERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t t/00-load.t ....... 1/1 # Testing Statistics::Normality 0.01, Perl 5.026001, /usr/bin/perl t/00-load.t ....... ok    t/01-normality.t .. 1/? # Tests were run but no plan was declared and done_testing() was not seen. t/01-normality.t .. Dubious, test returned 254 (wstat 65024, 0xfe00) All 4 subtests passed  t/pod-coverage.t .. 1/1 \n#   Failed test 'Pod coverage on Statistics::Normality'\n#   at /usr/local/share/perl/5.26.0/Test/Pod/Coverage.pm line 133.\n# Coverage for Statistics::Normality is 0.0%, with 2 naked subroutines:\n#   dagostino_k_square_test\n#   shapiro_wilk_test\n# Looks like you failed 1 test of 1. t/pod-coverage.t .. Dubious, test returned 1 (wstat 256, 0x100) Failed 1/1 subtests  t/pod.t ........... ok   \n\nTest Summary Report\n------------------- t/01-normality.t (Wstat: 65024 Tests: 4 Failed: 0)   Non-zero exit status: 254   Parse errors: No plan found in TAP output t/pod-coverage.t (Wstat: 256 Tests: 1 Failed: 1)   Failed test:  1   Non-zero exit status: 1 Files=4, Tests=7,  0 wallclock secs ( 0.03 usr\n0.00 sys +  0.18 cusr  0.01 csys =  0.22 CPU) Result: FAIL Failed 2/4 test programs. 1/7 subtests failed. Makefile:822: recipe for target 'test_dynamic' failed make: *** [test_dynamic] Error 255   MWENDL/Statistics-Normality-0.01.tar.gz   /usr/bin/make test -- NOT OK //hint// to see the cpan-testers results for installing this module, try:   reports MWENDL/Statistics-Normality-0.01.tar.gz Failed during this command:  MWENDL/Statistics-Normality-0.01.tar.gz      : make_test NO\n</code></pre>\n\n<p>I have no idea how to fix this :(</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1554224406, "creation_date": 1554224406, "answer_id": 55480045, "question_id": 55479950, "link": "https://stackoverflow.com/questions/55479950/creating-subset-by-using-regular-expression/55480045#55480045", "title": "Creating subset by using regular expression", "body": "<p>The correct regex you need is this,</p>\n\n<pre><code>\\bKtr_[0-9]+_(?!1[68]0\\b)[0-9]+\\b\n</code></pre>\n\n<p>Here <code>\\b</code> word boundaries around the regex ensure it doesn't give a partial match in larger text and <code>(?!1[68]0\\b)</code> is the negative look ahead required for rejecting strings that are either <code>160</code> or <code>180</code> and rest of the pattern is similar to yours. Also, unless you need a group, you don't need to write first part as <code>(Ktr_)+</code> and also this will allow <code>Ktr_</code> whole of it one or more times which looking at your samples don't think you want. So I've changed it to simple <code>Ktr_</code> only but in case that was a valid one and indeed needed, retain it by replacing <code>Krt_</code> with <code>(Ktr_)+</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/monjhB/1\" rel=\"nofollow noreferrer\">Demo</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554228993, "post_id": 55480920, "comment_id": 97672247, "body": "@ikegami Ah, but of course!  Something&#39;s been nagging me ... thank you"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1570440419, "last_edit_date": 1570440419, "creation_date": 1554227897, "answer_id": 55480920, "question_id": 55479950, "link": "https://stackoverflow.com/questions/55479950/creating-subset-by-using-regular-expression/55480920#55480920", "title": "Creating subset by using regular expression", "body": "<p>The problem is that <code>+</code> is greedy only as much as it serves the whole pattern to match; in <code>[0-9]+</code> it doesn't match <em>all</em> following digits, but only all <em>such that the rest of the pattern matches as well</em>.</p>\n\n<p>Capture the variable part of the pattern (<code>[0-9]+</code>) and print it out to see</p>\n\n<pre><code>my @ary = qw(\n    Ktr_12345_180\n    Ktr_12345_160\n    Ktr_12345_1130  \n    Kst_12345_180\n);\n\nfor (@ary) { \n    say \"got $1  in $_\"  if /(Ktr_[0-9]+)(?!_180|_160)/;\n}\n</code></pre>\n\n<p>and we get</p>\n\n<pre>\ngot Ktr_1234   in Ktr_12345_180\ngot Ktr_12345   in Ktr_12345_1130\ngot Ktr_1234   in Ktr_12345_160\n</pre>\n\n<p>Matching <code>1234</code> leaves <code>5</code> to satisfy the lookahead's \"not _180\" as the next thing after the <code>1234</code>.</p>\n\n<p>To adjust this we need data details and the question appears to allow two possibilities</p>\n\n<ul>\n<li><p>If there is always a <code>_</code> following, as sample data suggests, then simply include <code>_</code> before the lookahead</p>\n\n<pre><code>/Ktr_[0-9]+_(?!180|160)/\n</code></pre>\n\n<p>what now requires all digits to be matched before <code>_</code>.  This also \"enforces\" the <code>_</code> there</p></li>\n<li><p>If we follow what the text says</p>\n\n<blockquote>\n  <p>all elements starting with the prefix \"Ktr_\" while not having the suffix _160 or _180</p>\n</blockquote>\n\n<p>then there may not be anything following <code>Ktr_12345</code> (for example), or at least not a <code>_</code>  </p>\n\n<p>In this case only force all consecutive digits to be matched</p>\n\n<pre><code>/Ktr_[0-9]++(?!_180|_160)/\n</code></pre>\n\n<p>where the extra <code>+</code> makes its preceding subpattern match as much as it can, regardless of what follows further in the whole pattern; it goes under the name of <a href=\"https://perldoc.perl.org/perlretut.html#Possessive-quantifiers\" rel=\"nofollow noreferrer\">possesive quantifiers</a></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1554228930, "creation_date": 1554228930, "answer_id": 55481175, "question_id": 55479950, "link": "https://stackoverflow.com/questions/55479950/creating-subset-by-using-regular-expression/55481175#55481175", "title": "Creating subset by using regular expression", "body": "<p>You can use a possessive quantifier with an additional <code>+</code> to ensure that the <code>[0-9]+</code> matches as many digits as are present and doesn't try backtracking when the match fails.</p>\n\n<pre><code>(Ktr_)+[0-9]++(?!(_180|_160))\n</code></pre>\n\n<p><a href=\"https://perldoc.pl/perlretut#Possessive-quantifiers\" rel=\"nofollow noreferrer\">Possessive quantifiers</a> are available since Perl 5.10, or before then with the <a href=\"https://perldoc.pl/perlre#%28%3F%3Epattern%29\" rel=\"nofollow noreferrer\">independent subexpression</a> syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1554291299, "creation_date": 1554291299, "answer_id": 55494196, "question_id": 55479950, "link": "https://stackoverflow.com/questions/55479950/creating-subset-by-using-regular-expression/55494196#55494196", "title": "Creating subset by using regular expression", "body": "<p>Another way is to match the pattern and then negate against the negative lookbehind.</p>\n\n<p>Try this</p>\n\n<pre><code>$ cat paul.txt\nKtr_12345_180\nKtr_12345_160\nKtr_12345_1130\nKst_12345_180\nKst_12345_112\nKst_12345_120\nKst_12345_160\n$ perl -lne ' print if /(Ktr_).+?(?&lt;!_180|_160)\\b/ ' paul.txt\nKtr_12345_1130\n$ perl -lne ' print if /(Ktr_)+[0-9]+.+?(?&lt;!_180|_160)\\b/ ' paul.txt\nKtr_12345_1130\n$\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11261237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b3853618d4116aeebb2ae17ca7b8119?s=128&d=identicon&r=PG&f=1", "display_name": "Paul.C.M", "link": "https://stackoverflow.com/users/11261237/paul-c-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 55480045, "answer_count": 4, "score": 2, "last_activity_date": 1570440419, "creation_date": 1554224088, "last_edit_date": 1554225192, "question_id": 55479950, "link": "https://stackoverflow.com/questions/55479950/creating-subset-by-using-regular-expression", "title": "Creating subset by using regular expression", "body": "<p>I'm having the following list of dimension-elements (not complete, in reality it's much longer):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Ktr_12345_180\nKtr_12345_160\nKtr_12345_1130\nKst_12345_180\nKst_12345_112\nKst_12345_120\nKst_12345_160\n</code></pre>\n\n<p>My goal is to create a subset of elements in Jedox 2019.1 Subset-Editor. \nThe subset should include all elements starting with the prefix <code>\"Ktr_\"</code> while not having the suffix <code>_160</code> or <code>_180</code></p>\n\n<p>I already built a Regex <code>(Ktr_)+[0-9]+(_180|_160)</code> which identifies the Elements I don't want.</p>\n\n<p>Now I have to invert it. From my knowledge there is no native function for inverting a regular expression, right?</p>\n\n<p>So I tried to do this by using a negative lookahead: <code>(Ktr_)+[0-9]+(?!(_180|_160))</code></p>\n\n<p>This does not work at all. I tried this in various shapes, not reaching my goal...</p>\n\n<p>I expect the regex to deliver the wanted elements. Instead it just shows every element having <code>\"Ktr_\"</code> as prefix.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1554212433, "post_id": 55476202, "comment_id": 97662834, "body": "Could you tell us more about your design? For instance, maybe designing your second file as a module and running its functions using threads could be an easier idea, but it&#39;s hard to know without more details about what you are actually doing."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1554212850, "post_id": 55476202, "comment_id": 97663128, "body": "Check <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">metacpan.org/pod/Storable</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1554216660, "post_id": 55476202, "comment_id": 97665636, "body": "If the two progs aren&#39;t guaranteed to be running at the same time (e.g. if the 1st launches the 2nd, or if the 2nd waits for input from the 1st via a socket or something), then you will necessarily need to store the data somewhere. /// Now, there are multiple options as to where the data can be stored. The two most common options that come to mind are file and database, but there are other options. And within each of these, there are multiple formats and options that can be used. Which is best is situational. /// This question is therefore too broad (too vague) and should be closed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554216860, "post_id": 55476202, "comment_id": 97665759, "body": "JSON, YAML, XML, Storable all have pros and cons."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1554222616, "post_id": 55476202, "comment_id": 97669176, "body": "Another possibility is that the second script runs the first one, and receives the parameters from it. This can go via first script&#39;s stdout, or pipes or sockets (or other IPC mechanisms).  What is best to do depends on details of course, of which none are given; the question is way too generic -- include some specifics if you&#39;d like more specific responses."}, {"owner": {"reputation": 17, "user_id": 11299897, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9kF1oMTTm1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rec8qqWxaW306dC_jd2DSHUkBX2Sw/mo/photo.jpg?sz=128", "display_name": "Gunit", "link": "https://stackoverflow.com/users/11299897/gunit"}, "edited": false, "score": 0, "creation_date": 1554267284, "post_id": 55476202, "comment_id": 97683069, "body": "Thanks, everyone for the answer. I will write a Perl script for Software testing. I need to write two files one is initialization file which will do all the initialization and the second file contains the test sequence to execute which will use initialize parameters. I need to run both files separately. Execution-wise my first file will execute first and then my second file will run.@Dada"}, {"owner": {"reputation": 17, "user_id": 11299897, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9kF1oMTTm1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rec8qqWxaW306dC_jd2DSHUkBX2Sw/mo/photo.jpg?sz=128", "display_name": "Gunit", "link": "https://stackoverflow.com/users/11299897/gunit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554283338, "post_id": 55476202, "comment_id": 97690459, "body": "My first file does a lot of initialization for about 300 test case so which is a better option JSON or XML? @ikegami"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1554297520, "post_id": 55476202, "comment_id": 97699444, "body": "You didn&#39;t actually explain anything (IMO). <b>Why</b> do your two scripts need to run separately? What can of initialization does the first script do? Why can&#39;t you use a module? Could you create a minimalist example where you reduce your scripts to just a few lines of code each, in order for us to get a better sense of your situation?"}], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 1, "last_activity_date": 1554293746, "creation_date": 1554293746, "answer_id": 55494967, "question_id": 55476202, "link": "https://stackoverflow.com/questions/55476202/message-passing-between-two-perl-files/55494967#55494967", "title": "Message passing between two perl files", "body": "<p>If your initialization produces only plain key-value pairs then any way of serialising data will suffice. Otherwise <code>XML</code> is probably the worst option for your case. You might need to put a lot of effort to get the same data structure in your second script. This happens because by default xml modules do not know what should be an atrribute, a child node or an array of nodes. For example, passing a one-element array of hashes to xml from first script might turn to just a single hash in your second script. The results will highly depend on xml modules, options you pass to them and the data itself.</p>\n\n<p><code>JSON</code> should'n have such issues. It might have unnecessary type conversions but you shouldn't really notice them.</p>\n\n<p><a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a> guarantees that you get the same data in your second script.</p>\n\n<p>You might find <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to be an easier solution. But it has some security issues since you need to execute its output in your second script.</p>\n\n<p>All of the above are not meant to be used with data containing self-references and anything but <code>scalars</code>, <code>arrayrefs</code> and <code>hashrefs</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 11299897, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9kF1oMTTm1c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rec8qqWxaW306dC_jd2DSHUkBX2Sw/mo/photo.jpg?sz=128", "display_name": "Gunit", "link": "https://stackoverflow.com/users/11299897/gunit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554293746, "creation_date": 1554212223, "last_edit_date": 1554283496, "question_id": 55476202, "link": "https://stackoverflow.com/questions/55476202/message-passing-between-two-perl-files", "title": "Message passing between two perl files", "body": "<p>I have 2 Perl files which cannot be merged and have to be run separately. My first file does certain initialization of parameters which are used by my second file, which performs some testing. Now I want to use the parameters initialized in the first file in the second file so how can I do that? </p>\n\n<p>I will write a Perl script for Software testing. I need to write two files one is initialization file which will do all the initialization and the second file contains the test sequence to execute which will use initialize parameters. I need to run both files separately. Execution-wise my first file will execute first and then my second file will run.</p>\n\n<p>I am thinking of using XML file where the first file will log the parameter in the file and the second file will get the parameters from that file? Is there any better way to do this?</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1554197090, "post_id": 55469474, "comment_id": 97653174, "body": "Looks like $dbUser is empty"}, {"owner": {"reputation": 116, "user_id": 9153881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2grj6I0b2YA/AAAAAAAAAAI/AAAAAAAAAA8/93RvN_cKCR8/photo.jpg?sz=128", "display_name": "MD. Kamrul Hasan Khan", "link": "https://stackoverflow.com/users/9153881/md-kamrul-hasan-khan"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1554197254, "post_id": 55469474, "comment_id": 97653269, "body": "No, I have assigned value to $dbUser."}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 9153881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2grj6I0b2YA/AAAAAAAAAAI/AAAAAAAAAA8/93RvN_cKCR8/photo.jpg?sz=128", "display_name": "MD. Kamrul Hasan Khan", "link": "https://stackoverflow.com/users/9153881/md-kamrul-hasan-khan"}, "edited": false, "score": 0, "creation_date": 1554284083, "post_id": 55478540, "comment_id": 97690911, "body": "Hey Alex, thanks for answering. I am very new to building Perl scripts. Could you please explain how can I use the Alternative Statements?"}], "tags": [], "owner": {"reputation": 1, "user_id": 11300655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a6c08ed47b9b17b994c276841f99a9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex M.", "link": "https://stackoverflow.com/users/11300655/alex-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1554219241, "creation_date": 1554219241, "answer_id": 55478540, "question_id": 55469474, "link": "https://stackoverflow.com/questions/55469474/error-1044-42000-access-denied-for-user-localhost/55478540#55478540", "title": "ERROR 1044 (42000): Access denied for user &#39;&#39;@&#39;localhost&#39;", "body": "<p>Do i asume right you get at least following message?:</p>\n\n<blockquote>\n  <p>nApply above changes to $db0 [y/N] ?</p>\n</blockquote>\n\n<p>if yes it seems like the auth_args from <a href=\"https://metacpan.org/pod/release/ESTRABD/MySQL-Diff-0.60/lib/MySQL/Diff.pm\" rel=\"nofollow noreferrer\">MySQL::Diff</a> doesn't work. \nYou can try to use the alternative Statements:</p>\n\n<blockquote>\n  <p>GetOptions(\\%opts, \"help|?\", \"debug|d:i\", \"apply|A\", \"batch-apply|B\",\n             \"keep-old-tables|k\", \"keep-old-columns|c\", \"no-old-defs|n\",\n             \"only-both|o\", \"table-re|t=s\",\n             \"host|h=s\", \"port|P=s\", \"socket|s=s\", \"user|u=s\", \"password|p:s\",\n             \"host1=s\",  \"port1=s\",  \"socket1=s\",  \"user1=s\",  \"password1:s\",\n             \"host2=s\",  \"port2=s\",  \"socket2=s\",  \"user2=s\",  \"password2:s\",\n             \"tolerant|i\", \"single-transaction|S\", \"list-tables|l\"\n            )</p>\n</blockquote>\n\n<p>(see sourcecode)</p>\n\n<p>If this doesn't work try to start it in debug mode with  </p>\n\n<blockquote>\n  <p>-d,  --debug</p>\n</blockquote>\n"}], "owner": {"reputation": 116, "user_id": 9153881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2grj6I0b2YA/AAAAAAAAAAI/AAAAAAAAAA8/93RvN_cKCR8/photo.jpg?sz=128", "display_name": "MD. Kamrul Hasan Khan", "link": "https://stackoverflow.com/users/9153881/md-kamrul-hasan-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1554219241, "creation_date": 1554191283, "last_edit_date": 1554191505, "question_id": 55469474, "link": "https://stackoverflow.com/questions/55469474/error-1044-42000-access-denied-for-user-localhost", "title": "ERROR 1044 (42000): Access denied for user &#39;&#39;@&#39;localhost&#39;", "body": "<p>I am working on a Perl script which uses <code>mysqldiff</code> to compare two databases and then apply changes to the first database. The command I am using:</p>\n\n<pre><code>mysqldiff --host=$dbHost --user=$dbUser -A $dbName1 $dbName2\n</code></pre>\n\n<p>I am getting the difference but after that there is the following error happens always:</p>\n\n<pre><code>ERROR 1044 (42000): Access denied for user ''@'localhost' to database &lt;NAME OF THE DATABASE&gt;\n</code></pre>\n\n<p>How can I solve this issue?</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1556087435, "post_id": 55469072, "comment_id": 98312677, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a> f things are still unclear and/or there are questions please let us know"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1554216702, "post_id": 55469295, "comment_id": 97665664, "body": "See also: <a href=\"https://stackoverflow.com/questions/2126365/whats-the-difference-between-my-variablename-and-my-variablename-in-perl\" title=\"whats the difference between my variablename and my variablename in perl\">stackoverflow.com/questions/2126365/&hellip;</a>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1556303910, "last_edit_date": 1556303910, "creation_date": 1554190636, "answer_id": 55469295, "question_id": 55469072, "link": "https://stackoverflow.com/questions/55469072/how-to-pass-correctly-variable-to-and-from-called-function/55469295#55469295", "title": "How to pass correctly variable to and from called function?", "body": "<p>The one direct error is the line in your \"getter\" <code>getContent</code> method:</p>\n\n<pre><code>my $self = @_;  # assigns number of elements in the array to $self!\n</code></pre>\n\n<p>This attempts to assign an array to a scalar, what doesn't make sense as it stands. What is done instead is that the array is evaluated to the number of its elements and <em>that</em> is assigned to <code>$self</code>. So in the rest of the method there is no object in <code>$self</code> but only a number, here <code>1</code>. </p>\n\n<p>If you enabled <a href=\"https://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\">warnings</a> via <code>use warnings;</code> on the top of the program, you'd receive</p>\n\n<blockquote>\n  <p>Can't use string (\"1\") as a HASH ref while \"strict refs\" in use at ...</p>\n</blockquote>\n\n<p>for the line where you attempt to call a method on <code>$self</code>, telling you that the expected object (hashref) is in fact a string. This gives you the exact line and an informative, if terse, <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">diagnostic message</a>.  Without the warnings enabled the code quietly proceeds, but can't do as expected.</p>\n\n<p>The moral: &thinsp; <em>Please always have <code>use warnings</code> (and <code>use strict</code>) at the beginning</em></p>\n\n<p>The fix is to make it a \"list assignment\" -- assign in the list \"context\"</p>\n\n<pre><code>my ($self) = @_;\n</code></pre>\n\n<p>where the list context is imposed on the assignment operator <code>=</code> by <code>(...)</code> on the left hand side. Now elements in the array <code>@_</code> are assigned to variables listed in <code>()</code>, one for one. There is just one variable on the LHS here (<code>$self</code>) so the first element of <code>@_</code> is assigned to it and the rest, if there were any, discarded.</p>\n\n<p>Or, assign a single element of <code>@_</code> to <code>$self</code> in a scalar assignment. \nIn object oriented code this is often done using <a href=\"https://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">shift</a>, so to also remove the object from the argument list for later convenience</p>\n\n<pre><code>my $self = shift;\n</code></pre>\n\n<p>where <code>shift</code> in a subroutine by default works on <code>@_</code>.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> and <a href=\"https://stackoverflow.com/q/54564428/4653379\">Scalar vs List Assignment Operator</a>.</p>\n\n<p>I'd recommend to always write a <a href=\"https://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">class</a> in its own <code>.pm</code> file, which is then <code>use</code>d in a program. For error handling in packages see <a href=\"https://perldoc.perl.org/Carp.html\" rel=\"nofollow noreferrer\">Carp</a>.</p>\n"}], "owner": {"reputation": 133, "user_id": 10453354, "user_type": "registered", "profile_image": "https://graph.facebook.com/1903495193049921/picture?type=large", "display_name": "Kent Wong", "link": "https://stackoverflow.com/users/10453354/kent-wong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556303910, "creation_date": 1554189759, "last_edit_date": 1554211123, "question_id": 55469072, "link": "https://stackoverflow.com/questions/55469072/how-to-pass-correctly-variable-to-and-from-called-function", "title": "How to pass correctly variable to and from called function?", "body": "<p>I have implemented a class called cell and trying to store a char to it.\nI find that there is a problem to retrieve the char with my setter and getter.</p>\n\n<pre><code>#This is the detail of the class:      \npackage Cell;\nsub new{\n  my $class = shift;\n  my $self = {  \n    content =&gt; -1,\n  };\n  return bless $self, $class;\n}\n\n#This is my setter and getter  \nsub setContent{\n  my ($self,$ch) = @_;\n  $self-&gt;{content} = $ch;\n  print(\"stored char\".$self-&gt;{content}.\"\\n\");\n} \n\nsub getContent{\n  my $self = @_;\n  print(\"passing back char\".$self-&gt;{content}.\"\\n\");\n  return $self-&gt;{content};  \n} \n\n# this is the way i used the class\nmy $ch = \"a\";\nmy $cell = Cell-&gt;new();\n$cell-&gt;setContent($ch);     \nmy $testvar = $cell-&gt;getContent();\nprint(\"test start\\n\".$testvar);\nprint(\"test end\\n\");\n#\n</code></pre>\n\n<p>I find that I am able to pass the char to the setter and should be stored in $self->{content}, but when trying to retrieve char using getter,  $self->{content} become empty</p>\n"}, {"tags": ["perl", "code-documentation"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2975253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff027620a6fe6c273b8eda29e863df?s=128&d=identicon&r=PG&f=1", "display_name": "user2975253", "link": "https://stackoverflow.com/users/2975253/user2975253"}, "edited": false, "score": 0, "creation_date": 1554242945, "post_id": 55464711, "comment_id": 97678100, "body": "Thank you, but even the Socket doc page only gets up to SOCK_RAW before it trails off into ellipses..."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1554159599, "creation_date": 1554159599, "answer_id": 55464711, "question_id": 55464648, "link": "https://stackoverflow.com/questions/55464648/how-do-i-find-the-possible-values-for-a-constructor-in-the-perl-core-modules/55464711#55464711", "title": "How do I find the possible values for a constructor in the Perl core modules?", "body": "<p>In the <code>IO::Socket::INET</code> documentation, it isn't necessarily completely obvious, but it does have a See Also section which points to both <code>Socket</code> and <code>IO::Socket</code>.  It's in the <code>Socket</code> documentation where <code>SOCK_STREAM</code> and <code>SOCK_DGRAM</code> are defined. Note that in the <code>IO::Socket::INET</code> documentation, <code>SOCK_STREAM</code> and <code>SOCK_DGRAM</code> <em>are not quoted</em>. That is, they aren't strings. This implies they are constants somewhere, and that somewhere is in <a href=\"https://perldoc.perl.org/Socket.html#SOCK_STREAM%2c-SOCK_DGRAM%2c-SOCK_RAW%2c-...\" rel=\"nofollow noreferrer\"><code>Socket</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 2975253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff027620a6fe6c273b8eda29e863df?s=128&d=identicon&r=PG&f=1", "display_name": "user2975253", "link": "https://stackoverflow.com/users/2975253/user2975253"}, "edited": false, "score": 0, "creation_date": 1554242772, "post_id": 55464802, "comment_id": 97678055, "body": "Wow, that seems... painful.  Is the path for each file documented somewhere, or do you just have to do a search for the filename?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554267604, "post_id": 55464802, "comment_id": 97683158, "body": "No reason to bring up debugging mode. One could use <code>perl -le&#39;use Socket; print $INC{&quot;Socket.pm&quot;};</code>. That said, <code>perldoc -lm Socket</code> is the simplest by far!"}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1554311924, "post_id": 55464802, "comment_id": 97708221, "body": "Sure, but learning a new way to do something isn&#39;t a bad idea."}], "tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 1, "last_activity_date": 1554243224, "last_edit_date": 1554243224, "creation_date": 1554160222, "answer_id": 55464802, "question_id": 55464648, "link": "https://stackoverflow.com/questions/55464648/how-do-i-find-the-possible-values-for-a-constructor-in-the-perl-core-modules/55464802#55464802", "title": "How do I find the possible values for a constructor in the Perl core modules?", "body": "<p>For this particular item, you'll want to look at <a href=\"https://perldoc.perl.org/Socket.html\" rel=\"nofollow noreferrer\">Socket</a>, which defines the low-level routines and the constants. To quote the docs about constants:</p>\n\n<blockquote>\n  <p>In each of the following groups, there may be many more constants\n  provided than just the ones given as examples in the section heading.\n  If the heading ends ... then this means there are likely more; the\n  exact constants provided will depend on the OS and headers found at\n  compile-time.</p>\n</blockquote>\n\n<p>The <code>Socket.pm</code> file on my Mac, which I found in <code>/usr/local/lib/perl5/5.28.1/darwin-thread-multi-2level/Socket.pm</code> defines the following socket types:</p>\n\n<blockquote>\n  <p>SOCK_DGRAM SOCK_RAW SOCK_RDM SOCK_SEQPACKET SOCK_STREAM</p>\n</blockquote>\n\n<p>The rest of the networking constants are there as well. You'll probably want to do some further searching on these names to understand what they're for.</p>\n\n<p>Edit: To mitigate the pain of finding the path to <code>Socket.pm</code>, use the debugger:</p>\n\n<pre><code>box:~ $ perl -de0\n\nLoading DB routines from perl5db.pl version 1.53\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nDB::DB(-e:1):   0\n  DB&lt;1&gt; use Socket\n\n  DB&lt;2&gt; p $INC{'Socket.pm'}\n/usr/local/Cellar/perl/5.28.1/lib/perl5/5.28.1/darwin-thread-multi-2level/Socket.pm\n  DB&lt;3&gt; q\nbox:~ $ \n</code></pre>\n\n<p>This will print the path that Perl loaded the <code>Socket</code> package from.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 2975253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff027620a6fe6c273b8eda29e863df?s=128&d=identicon&r=PG&f=1", "display_name": "user2975253", "link": "https://stackoverflow.com/users/2975253/user2975253"}, "edited": false, "score": 0, "creation_date": 1554242562, "post_id": 55470767, "comment_id": 97677995, "body": "Are all of the things in the core modules simple wrappers?  Or just this in particular?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 2975253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff027620a6fe6c273b8eda29e863df?s=128&d=identicon&r=PG&f=1", "display_name": "user2975253", "link": "https://stackoverflow.com/users/2975253/user2975253"}, "edited": false, "score": 0, "creation_date": 1554267520, "post_id": 55470767, "comment_id": 97683132, "body": "POSIX, yes. Despite the name, the subs within are really just the underlying system&#39;s, not necessary a POSIX-compliant version. Otherwise, nothing comes to mind?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1554217015, "last_edit_date": 1592644375, "creation_date": 1554195665, "answer_id": 55470767, "question_id": 55464648, "link": "https://stackoverflow.com/questions/55464648/how-do-i-find-the-possible-values-for-a-constructor-in-the-perl-core-modules/55470767#55470767", "title": "How do I find the possible values for a constructor in the Perl core modules?", "body": "<p><a href=\"http://search.cpan.org/perldoc?IO::Socket::INET\" rel=\"nofollow noreferrer\">IO::Socket::INET</a> simply provides a friendlier interface to the subs in <a href=\"http://search.cpan.org/perldoc?Socket\" rel=\"nofollow noreferrer\">Socket</a>. In turn, the subs in Socket are simple wrappers for the C functions, C macros and unix system calls with the same names.</p>\n<p>You can get the system-specific documentation on those from your system's man pages. For documentation on the specific call in question, you can use the following command:</p>\n<pre><code>man 2 socket\n</code></pre>\n<p>On my system,</p>\n<blockquote>\n<p>The socket has the indicated <code>type</code>, which specifies the communication semantics. Currently defined types are:</p>\n<ul>\n<li><p><code>SOCK_STREAM</code></p>\n<p>Provides sequenced, reliable, two-way, connection-based byte streams.  An out-of-band data transmission mechanism may be supported.</p>\n</li>\n<li><p><code>SOCK_DGRAM</code></p>\n<p>Supports datagrams (connectionless, unreliable messages of a fixed maximum length).</p>\n</li>\n<li><p><code>SOCK_SEQPACKET</code></p>\n<p>Provides a sequenced, reliable, two-way connection-based data transmission path for datagrams of fixed maximum length; a consumer is required to read an entire packet with each input system call.</p>\n</li>\n<li><p><code>SOCK_RAW</code></p>\n<p>Provides raw network protocol access.</p>\n</li>\n<li><p><code>SOCK_RDM</code></p>\n<p>Provides a reliable datagram layer that does not guarantee ordering.</p>\n</li>\n<li><p><code>SOCK_PACKET</code></p>\n<p>Obsolete and should not be used in new programs; see packet(7).</p>\n</li>\n</ul>\n<p>Some socket types may not be implemented by all protocol families; for example, <code>SOCK_SEQPACKET</code> is not implemented for <code>AF_INET</code>.</p>\n<p>Since  Linux  2.6.27, the <code>type</code> argument serves a second purpose: in addition to specifying a socket type, it may include the bitwise OR of any of the following values, to modify the behavior of <code>socket()</code>:</p>\n<ul>\n<li><p><code>SOCK_NONBLOCK</code></p>\n<p>Set the <code>O_NONBLOCK</code> file status flag on the new open file description.  Using this flag saves extra calls to fcntl(2) to achieve the same result.</p>\n</li>\n<li><p><code>SOCK_CLOEXEC</code></p>\n<p>Set the close-on-exec (<code>FD_CLOEXEC</code>) flag on the new file descriptor.  See the description of the <code>O_CLOEXEC</code> flag in open(2) for reasons why this may be useful.</p>\n</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 2975253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ff027620a6fe6c273b8eda29e863df?s=128&d=identicon&r=PG&f=1", "display_name": "user2975253", "link": "https://stackoverflow.com/users/2975253/user2975253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1554243224, "creation_date": 1554159074, "question_id": 55464648, "link": "https://stackoverflow.com/questions/55464648/how-do-i-find-the-possible-values-for-a-constructor-in-the-perl-core-modules", "title": "How do I find the possible values for a constructor in the Perl core modules?", "body": "<p>For instance, at <a href=\"https://perldoc.perl.org/IO/Socket/INET.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/IO/Socket/INET.html</a>, it lists SOCK_STREAM and SOCK_DGRAM as two possible values for Type/Socket type, followed by ellipses (which I assume mean there are more possible values).  How do I find these other values (or is this a faulty assumption)?</p>\n\n<p>In the .NET docs, for example, there is usually some kind of Enum, where possible values and their meanings are listed: <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.updatepanelupdatemode?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.updatepanelupdatemode?view=netframework-4.7.2</a></p>\n\n<p>I can't seem to find any such equivalent on the perldoc site, and in general am feeling quite lost.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1554140367, "post_id": 55460621, "comment_id": 97634107, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=1231945\" rel=\"nofollow noreferrer\">PerlMonks</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1554151670, "creation_date": 1554151670, "answer_id": 55463349, "question_id": 55460621, "link": "https://stackoverflow.com/questions/55460621/netsftpforeign-cipher-check/55463349#55463349", "title": "Net::SFTP::Foreign Cipher check", "body": "<p>When one server connects to another one via SFTP, the both find common cipher to authenticate. As long as your production server has some of the cyphers provided in the email you should be able to connect. You might want to contact your system admins to get the list of installed cyphers.\nThe email that you got most like specifies the Test server to test the connection with new cyphers. Try to connect to that test server and see if you are able to.</p>\n"}], "owner": {"reputation": 11, "user_id": 6553562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a2265da8d59c930b8ce51cdeebe9c1?s=128&d=identicon&r=PG&f=1", "display_name": "syedf", "link": "https://stackoverflow.com/users/6553562/syedf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554151670, "creation_date": 1554139850, "question_id": 55460621, "link": "https://stackoverflow.com/questions/55460621/netsftpforeign-cipher-check", "title": "Net::SFTP::Foreign Cipher check", "body": "<p>I am using the Net::SFTP::Foreign module through perl script to connect to a SFTP server with below sample command:</p>\n\n<p>Net::SFTP::Foreign->new($host, port => '22', backend => 'Net_SSH2')</p>\n\n<p>Yesterday I got an email from the SFTP server team that says that they are restricting the allowed SSH Algorithms to the following: </p>\n\n<p>Options (allowed Algorithms):</p>\n\n<ul>\n<li>Ciphers: aes256-ctr,aes192-ctr,aes128-ctr</li>\n<li>Macs: hmac-sha256,hmac-sha2-256,hmac-sha512,hmac-sha2-512</li>\n<li>Kexs: diffie-hellman-group-exchange-sha256,ecdh-sha2-nistp521,ecdh-sha2-nistp384,ecdh-sha2-nistp256</li>\n</ul>\n\n<p>How do I know if I will be affected by this or not? How do I check the cipher the script is using?</p>\n\n<p>Net::SFTP::Foreign->new($host, port => '22', backend => 'Net_SSH2')</p>\n"}, {"tags": ["linux", "perl", "awk", "fastq"], "comments": [{"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1554138428, "post_id": 55459982, "comment_id": 97633139, "body": "A unit is made of 4 lines (seq ID, sequence, + sing, quality for sequence). I want to remove all units where quality of sequence (4th line) for each character in the sequence (2nd line) matches anything other than either characters of the pattern ?@ABCDEFGHIJK.  I have tried this code and still working on it  { cat file.fq | awk &#39;NR%4==0&#39; | xargs -n1 awk &#39;{ for(i=0; ++i &lt;= length($0);) printf &quot;%s\\n&quot; }&#39; }"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 2, "creation_date": 1554139119, "post_id": 55459982, "comment_id": 97633494, "body": "Have you looked at the various <a href=\"https://metacpan.org/search?size=20&amp;q=fasta\" rel=\"nofollow noreferrer\">FASTA modules</a> that are available?"}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1554139606, "post_id": 55459982, "comment_id": 97633743, "body": "@Tanktalus I have tried several tools used for trimming fastq files which include trim galore and Sickle. These tools remove reads which have low quality but there are still some reads which have bases with low quality which I want to remove."}, {"owner": {"reputation": 480262, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1556556787, "post_id": 55459982, "comment_id": 98470779, "body": "Careful, while it\u2019s true that FASTQ files are <i>usually</i> formatted such that record spans exactly 4 lines, this is not its definition. There are valid FASTQ files where individual records span more than 4 lines, and this might need to be considered when parsing them. Anyway, tools like Trim Galore <i>can</i> handle this case with proper configuration."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1576829869, "last_edit_date": 1576829869, "creation_date": 1554139568, "answer_id": 55460562, "question_id": 55459982, "link": "https://stackoverflow.com/questions/55459982/remove-reads-that-have-low-quality-base-calls/55460562#55460562", "title": "Remove reads that have low quality base calls", "body": "<p>Collect lines for each unit in a buffer; at each new header line process the previous unit (check the last line in the buffer, print or not) and empty the buffer</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nsub process_unit {\n    my ($rbuf) = @_;\n    if (not $rbuf-&gt;[-1] =~ tr/?@ABCDEFGHIJK//dr ) { #/ no extra chars\n        say for @$rbuf;\n    }\n}\n\nmy $file = shift // die \"Usage: $0 filename\\n\";   #/    \nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @buf;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if (/^\\@/ and @buf) {\n        process_unit(\\@buf);\n        @buf = (); \n    }   \n\n    push @buf, $_; \n}\nprocess_unit(\\@buf);  # the last unit\n</code></pre>\n\n<p>Explanation of the check of the last line in the buffer using <code>tr</code>\n(documented <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">in perlop</a>):</p>\n\n<p>The <code>tr/..//dr</code> removes all listed characters from its target string, returning the modified string while keeping the original unchanged (due to the \"non-destructive\" <code>/r</code> modifier).  So if there is anything left after the removal of allowed characters we discard the unit (don't print it).</p>\n\n<hr>\n\n<p><em>A note on choice of <code>tr</code> and efficiency</em></p>\n\n<p>It is possible to use regex and its match operator with a negated character class,</p>\n\n<pre><code>if (not /[^?\\@ABCDEFGHIJK]/) { ... }\n</code></pre>\n\n<p>instead of the transliteration operator <code>tr</code> (which <em>isn't</em> regex).  </p>\n\n<p>However, even in the very best case for the match operator I benchmark the <code>tr</code> approach to be <code>25%</code> faster.  In all other cases <code>tr</code> outperforms regex's match by a factor of 2-4, at least.</p>\n\n<p>The match operator's \"best case\"  is when an unacceptable character is at the first position in the string, so that it matches right away and doesn't scan the rest of the string. This is rather unrealistic, to say the least. \nOn the contrary, statistically many (most?) strings won't have any of those characters and the match operator will have its worst case, scanning the whole string. Note that in all of this the regex engine's startup is probably the most expensive part.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 3, "last_activity_date": 1554139976, "creation_date": 1554139976, "answer_id": 55460649, "question_id": 55459982, "link": "https://stackoverflow.com/questions/55459982/remove-reads-that-have-low-quality-base-calls/55460649#55460649", "title": "Remove reads that have low quality base calls", "body": "<pre><code>$ awk '{unit=unit $0 ORS} NR%4==0{if (/^[?@ABCDEFGHIJK]+$/) printf \"%s\", unit; unit=\"\"}' file\n@M01610:118:000000000-D49F3:1:1101:14523:2546 1:N:0:CTTGTA\nGTACACCTTCATGAAGAACTCCATCACCTTCATCTCCAGGATGCGGTCCTGGGTGCTGTTCCTGGCGATCTCGATCAGCTCGATGTACTCGTGGGGCACGTACTTCAGCTTGTGCCGCAGCTCGGACTTCTTCTCCTCCAGCTCGCTCTTCACCAGCTGGGATCCCCGCAGGTGTATCTTGGTATGCTTGTTCAGGTTGGAGCGGTGGGCAAATTTCCTCCCACAAATGTCACAGGCAAAAGGCTTCTC\n+\nCCCCCFFFFFFFGGGGGGGGGGHHHHHHHHHHHHHHGHHHGHHHGGGGGHHHGFGGHHHHHHHFHHGGGGHHHGGHGHHHHGGHHHHHHHGHGGGGGGGGHHHHHHHGHHHHHHHHGGGGGGHGGGGGHHHHHHHHHHHHHHHHGGGHHHHHHHHFHHHGEHFGHHGGGGGGGHGHFHHHHHFFHHGGGGGGGGGGFFF?FGGGGFGGGFFFFFFFFFFFFEFFF?FFFFFFEFFEFFFFBFFFFFBFF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 2, "last_activity_date": 1554145869, "creation_date": 1554145869, "answer_id": 55461995, "question_id": 55459982, "link": "https://stackoverflow.com/questions/55459982/remove-reads-that-have-low-quality-base-calls/55461995#55461995", "title": "Remove reads that have low quality base calls", "body": "<p>Here is an approach that makes use of (1) a modified input record saver and (2) the transliteration operator modified with the <code>tr///c</code> <strong>c</strong> compliment switch.</p>\n\n<p>(I simulated the file at the top of the script)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $file =&lt;&lt;'EOF';\n@M01610:118:000000000-D49F3:1:1101:14523:2546 1:N:0:CTTGTA\nGTACACCTTCATGAAGAACTCCATCACCTTCATCTCCAGGATGCGGTCCTGGGTGCTGTTCCTGGCGATCTCGATCAGCTCGATGTACTCGTGGGGCACGTACTTCAGCTTGTGCCGCAGCTCGGACTTCTTCTCCTCCAGCTCGCTCTTCACCAGCTGGGATCCCCGCAGGTGTATCTTGGTATGCTTGTTCAGGTTGGAGCGGTGGGCAAATTTCCTCCCACAAATGTCACAGGCAAAAGGCTTCTC\n+\nCCCCCFFFFFFFGGGGGGGGGGHHHHHHHHHHHHHHGHHHGHHHGGGGGHHHGFGGHHHHHHHFHHGGGGHHHGGHGHHHHGGHHHHHHHGHGGGGGGGGHHHHHHHGHHHHHHHHGGGGGGHGGGGGHHHHHHHHHHHHHHHHGGGHHHHHHHHFHHHGEHFGHHGGGGGGGHGHFHHHHHFFHHGGGGGGGGGGFFF?FGGGGFGGGFFFFFFFFFFFFEFFF?FFFFFFEFFEFFFFBFFFFFBFF\n@M01610:118:000000000-D49F3:1:1101:9569:5713 1:N:0:CTTGTA\nCAAGGAAGGCACGGGGGAGGGGCAAACAACAGATGGCTGGCAACTAGAAGGCACAGGCTAGCCAGGCGGGGAGGCGGCCCAAAGGGAGATCCGACTCGTCGGAGGCCGAAAGCGAAGACGCGGGAGAGGCCGCAGAACCGGCAGAAGGCCTCGGGAAGGGAGGTCCGCTGGATTGAGAGCCGAAGGGACGTAGCAGAAGGACGTCCCGCGCAGGATCCAGTTGGCAACACAGGCGAGCAGCCAAGG\n+\nCDCCDFFFDCFFGGGGGGGGGGGGGHHHHHHHHHHHHHGGGHHHHHHHHHHHHHHHHGHHHHHHHGHGGGGGCGGFGGGGDHHHHGHGGHHHHGGGGFHGFGAGGGGGAAGFFDBF-DFFF&gt;DF;DFAFDF=CA&gt;CFBE&gt;FFCFEFBFFF0FDDFAFFFFEDC.BFFFDBF.FFEBFFFEFAAC=FFE?&gt;AEFEBFBFFFFFFDFFFFC&gt;-9&gt;=ABFFFFBFFFFFFFFFEFFFCFFA9BBEAFEF\nEOF\n\n{\n    local $/ = '@';     # set input record separator in this scope to '@'\n    open my $fh, '&lt;', \\$file;\n    &lt;$fh&gt;;              # discard first read (will only contain '@')\n\n    while (&lt;$fh&gt;) {\n        chomp;\n        my ($test) = /\\+\\n^(.+)$/m; # grab the fourth line\n\n        # print record (with leading @ prepended back to beginning of record)\n        #  unless there  are unwanted characters\n        print \"\\@$_\" unless $test =~ tr/?@ABCDEFGHIJK//c;\n    }   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555368280, "creation_date": 1555368280, "answer_id": 55698199, "question_id": 55459982, "link": "https://stackoverflow.com/questions/55459982/remove-reads-that-have-low-quality-base-calls/55698199#55698199", "title": "Remove reads that have low quality base calls", "body": "<p>if your data in 'd' file, might check out:</p>\n\n<pre><code> perl -ne 'if (/@M0\\w*:\\d\\d\\d:/) {$s=$_;$s.=&lt;&gt; for 1..2;$r=&lt;&gt;; if ($r =~ /[^\\s?A-K]/) {next} else {$s.=$r;print $s}}' d\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 55460649, "answer_count": 4, "score": 1, "last_activity_date": 1576829869, "creation_date": 1554137259, "last_edit_date": 1554140623, "question_id": 55459982, "link": "https://stackoverflow.com/questions/55459982/remove-reads-that-have-low-quality-base-calls", "title": "Remove reads that have low quality base calls", "body": "<p>I have a sequence data file in fastq format <a href=\"https://en.wikipedia.org/wiki/FASTQ_format\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/FASTQ_format</a> where the first line is sequence ID, the second line is sequence [ACGT], 3rd line is '+' and 4th line is quality values.</p>\n\n<pre><code>@M01610:118:000000000-D49F3:1:1101:14523:2546 1:N:0:CTTGTA\nGTACACCTTCATGAAGAACTCCATCACCTTCATCTCCAGGATGCGGTCCTGGGTGCTGTTCCTGGCGATCTCGATCAGCTCGATGTACTCGTGGGGCACGTACTTCAGCTTGTGCCGCAGCTCGGACTTCTTCTCCTCCAGCTCGCTCTTCACCAGCTGGGATCCCCGCAGGTGTATCTTGGTATGCTTGTTCAGGTTGGAGCGGTGGGCAAATTTCCTCCCACAAATGTCACAGGCAAAAGGCTTCTC\n+\nCCCCCFFFFFFFGGGGGGGGGGHHHHHHHHHHHHHHGHHHGHHHGGGGGHHHGFGGHHHHHHHFHHGGGGHHHGGHGHHHHGGHHHHHHHGHGGGGGGGGHHHHHHHGHHHHHHHHGGGGGGHGGGGGHHHHHHHHHHHHHHHHGGGHHHHHHHHFHHHGEHFGHHGGGGGGGHGHFHHHHHFFHHGGGGGGGGGGFFF?FGGGGFGGGFFFFFFFFFFFFEFFF?FFFFFFEFFEFFFFBFFFFFBFF\n@M01610:118:000000000-D49F3:1:1101:9569:5713 1:N:0:CTTGTA\nCAAGGAAGGCACGGGGGAGGGGCAAACAACAGATGGCTGGCAACTAGAAGGCACAGGCTAGCCAGGCGGGGAGGCGGCCCAAAGGGAGATCCGACTCGTCGGAGGCCGAAAGCGAAGACGCGGGAGAGGCCGCAGAACCGGCAGAAGGCCTCGGGAAGGGAGGTCCGCTGGATTGAGAGCCGAAGGGACGTAGCAGAAGGACGTCCCGCGCAGGATCCAGTTGGCAACACAGGCGAGCAGCCAAGG\n+\nCDCCDFFFDCFFGGGGGGGGGGGGGHHHHHHHHHHHHHGGGHHHHHHHHHHHHHHHHGHHHHHHHGHGGGGGCGGFGGGGDHHHHGHGGHHHHGGGGFHGFGAGGGGGAAGFFDBF-DFFF&gt;DF;DFAFDF=CA&gt;CFBE&gt;FFCFEFBFFF0FDDFAFFFFEDC.BFFFDBF.FFEBFFFEFAAC=FFE?&gt;AEFEBFBFFFFFFDFFFFC&gt;-9&gt;=ABFFFFBFFFFFFFFFEFFFCFFA9BBEAFEF\n</code></pre>\n\n<p>I want to remove all the entries where any character in 4th line does not match either of the symbols <code>?@ABCDEFGHIJK</code> </p>\n\n<p>The output of the above example will be</p>\n\n<pre><code>@M01610:118:000000000-D49F3:1:1101:14523:2546 1:N:0:CTTGTA\nGTACACCTTCATGAAGAACTCCATCACCTTCATCTCCAGGATGCGGTCCTGGGTGCTGTTCCTGGCGATCTCGATCAGCTCGATGTACTCGTGGGGCACGTACTTCAGCTTGTGCCGCAGCTCGGACTTCTTCTCCTCCAGCTCGCTCTTCACCAGCTGGGATCCCCGCAGGTGTATCTTGGTATGCTTGTTCAGGTTGGAGCGGTGGGCAAATTTCCTCCCACAAATGTCACAGGCAAAAGGCTTCTC\n+\nCCCCCFFFFFFFGGGGGGGGGGHHHHHHHHHHHHHHGHHHGHHHGGGGGHHHGFGGHHHHHHHFHHGGGGHHHGGHGHHHHGGHHHHHHHGHGGGGGGGGHHHHHHHGHHHHHHHHGGGGGGHGGGGGHHHHHHHHHHHHHHHHGGGHHHHHHHHFHHHGEHFGHHGGGGGGGHGHFHHHHHFFHHGGGGGGGGGGFFF?FGGGGFGGGFFFFFFFFFFFFEFFF?FFFFFFEFFEFFFFBFFFFFBFF\n</code></pre>\n\n<p>Here, the 4th line of the seq ID <code>@M01610:118:000000000-D49F3:1:1101:9569:5713 1:N:0:CTTGTA</code> contains symbols other than <code>?@ABCDEFGHIJK</code> and is therefore removed.</p>\n\n<p>The length of the 2nd and 4th line for a seq ID is the same but it is different for different seqID ranging from (200 to 250).</p>\n\n<p>A unit is made of 4 lines (seq ID, sequence, + sing, quality for sequence). I want to remove all units where quality of sequence (4th line) for each character in the sequence (2nd line) matches anything other than either characters of the pattern ?@ABCDEFGHIJK. I have tried this code and still working on it </p>\n\n<pre><code>cat file.fq | awk 'NR%4==0' | xargs -n1 awk '{ for(i=0; ++i &lt;= length($0);) printf \"%s\\n\" }' \n</code></pre>\n\n<p>I will appreciate any help.</p>\n"}, {"tags": ["perl", "oauth-2.0", "google-api", "firebase-cloud-messaging", "lwp"], "comments": [{"owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "edited": false, "score": 0, "creation_date": 1554124722, "post_id": 55455958, "comment_id": 97625366, "body": "Great bc i got distracted of a beautiful unicorn and lots of sparkles i forgot to add all the links ... will follow in a minute :D - added links"}, {"owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "edited": false, "score": 0, "creation_date": 1554295279, "post_id": 55455958, "comment_id": 97697943, "body": "I broke down my issue with the bearer token a bit to keep the question on readable length. To get more detailed information and code snippets see this question: <a href=\"https://stackoverflow.com/questions/55494788/unsupported-authentication-scheme-at-firebase-cloud-messaging-api\" title=\"unsupported authentication scheme at firebase cloud messaging api\">stackoverflow.com/questions/55494788/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "edited": false, "score": 0, "creation_date": 1554231857, "post_id": 55481812, "comment_id": 97673615, "body": "Even if I will not continue the approach above, if you know a way to use LWP::Authen::OAuth to access FIrebase APis feel free to share your valuable knowledge."}], "tags": [], "owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "is_accepted": true, "score": 1, "last_activity_date": 1554409309, "last_edit_date": 1592644375, "creation_date": 1554231577, "answer_id": 55481812, "question_id": 55455958, "link": "https://stackoverflow.com/questions/55455958/problem-accessing-google-api-protected-with-oauth2-by-using-lwpauthenoauth2/55481812#55481812", "title": "Problem accessing Google API protected with OAuth2 by using LWP::Authen::OAuth2", "body": "<p>Digging deeper in various documentations and testing some things I realized, that LWP::Authen::OAuth2 is not only a bit of overhead, for creating a very tiny HTTPS request to an OAuth2 protected API, it is currently not possible either.</p>\n<p>The caveat is hidden in the <code>service_provider</code>, who hosts the authentication API, that I have to call to authenticate and authorize my service for accessing the actual Firecase Cloud Messaging API. In my case, this is Google, more precisely <code>https://www.googleapis.com/auth/firebase.messaging</code>, also referred to as <code>scope</code> in code.</p>\n<p>Now one service provider can provide different authentication APIs for different clients. That's why some service providers require an additional parameter - the <code>client_type</code> or <code>type</code> respectively (for unambiguity I will use <code>client_type</code>) - that also affects the authentication and authorization process via OAuth2.</p>\n<p>When creating a new <code>$oauth2</code>-object, and assigning a value to the field <code>service_provider</code> an object of module <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2::ServiceProvider\" rel=\"nofollow noreferrer\">LWP::Authen::OAuth2::ServiceProvider</a> gets created, that may need also its parameters, like the <code>scope</code>, to define, for which API family you want to be authorized and depending on that a <code>client_type</code>.</p>\n<p>Now Google is not a no-name Service Provider, so there already is a prebuild ServiceProvider module, explicitily for Google APIs : <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2::ServiceProvider::Google\" rel=\"nofollow noreferrer\">LWP::Authen::OAuth2::ServiceProvider::Google</a>. This automatically fills in some parameters of a <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2::ServiceProvider\" rel=\"nofollow noreferrer\">ServiceProvider</a> object, and holds a hash of available <code>client_types</code> to make sure you use one of them, because depending on the <code>client_type</code> a specific sub-module of <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2::ServiceProvider::Google\" rel=\"nofollow noreferrer\">ServiceProvider::Google</a> gets created internally.</p>\n<p>So I tried to test that like so:</p>\n<pre><code>my $oauth2 = LWP::Authen::OAuth2-&gt;new(\n    service_provider =&gt; &quot;Google&quot;,\n    scope =&gt; &quot;https://www.googleapis.com/auth/firebase.messaging&quot;, \n    client_type =&gt; &quot;service_account&quot;, #referring to 'type' in the json \n    client_id =&gt; &quot;Public from service provider&quot;,\n    client_secret =&gt; &quot;s3cr3t fr0m svc prov&quot;,\n    redirect_uri =&gt; &quot;this-server.mydomain.com&quot;\n);\n</code></pre>\n<p>Follwing the further description <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2\" rel=\"nofollow noreferrer\">here</a> and sending a request with the built-in LWP::UserAgent object I still got an 401 error <code>UNAUTHENTICATED</code> which confused me a lot. So when I read the documentation the I-don't-know-what time I stepped across this tiny line in the <code>client_types</code> chapter of <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2::ServiceProvider::Google\" rel=\"nofollow noreferrer\">ServiceProvider::Google</a>:</p>\n<blockquote>\n<p>Service Account</p>\n<p>This client_type is for applications that login to the developer's account using the developer's credentials. See <a href=\"https://developers.google.com/accounts/docs/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">https://developers.google.com/accounts/docs/OAuth2ServiceAccount</a> for Google's documentation.</p>\n<p>This is not yet supported, and would require the use of JSON Web Tokens to support.</p>\n</blockquote>\n<p>Yep, that kinda knocks out the usage of the whole <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2\" rel=\"nofollow noreferrer\">LWP:Authen::OAuth</a> family to access Firebase APIs, as almost all of them have the <code>client_type =&gt; &quot;service_account&quot;</code>. Now I have a deadline for my project and can't wait for the module to get extended or extending it myself would exceed my perl skills.</p>\n<p>But between tears of desperation there is always a glimpse of hope, as I found <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">this</a> Google docs page with a live-saving addendum, that it's possible to use a <strong>JSON Web Token</strong> as a Bearer token. Researching for that I found more than one Perl solution to generate JWT from JSONs like a service account, and also <a href=\"https://stackoverflow.com/a/53357961/7616822\">this</a> very helpful Stackoverflow answer that showed me the way out of the choke point.</p>\n"}], "owner": {"reputation": 459, "user_id": 7616822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HF0V4.jpg?s=128&g=1", "display_name": "procra", "link": "https://stackoverflow.com/users/7616822/procra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 55481812, "answer_count": 1, "score": 4, "last_activity_date": 1554409309, "creation_date": 1554124226, "last_edit_date": 1554295141, "question_id": 55455958, "link": "https://stackoverflow.com/questions/55455958/problem-accessing-google-api-protected-with-oauth2-by-using-lwpauthenoauth2", "title": "Problem accessing Google API protected with OAuth2 by using LWP::Authen::OAuth2", "body": "<p>I am currently coding a service on a perl server, that shall send a request to the Firebase Cloud Messaging API, which will then send push notifications to an app instance. </p>\n\n<p>Since FCM is part of the Google API family, an OAuth2 token is required to access the API. During my research I found <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2\" rel=\"nofollow noreferrer\">this</a> perl solution. Because my service is running on an non-Google server environment, I can't use Google Application Default Credentials, but have to provide them manually, so I downloaded a json containing a private key following <a href=\"https://firebase.google.com/docs/cloud-messaging/auth-server?authuser=0\" rel=\"nofollow noreferrer\">this</a> description.</p>\n\n<p>Reading the <a href=\"https://metacpan.org/pod/LWP::Authen::OAuth2\" rel=\"nofollow noreferrer\">documentation of LWP::Authen::OAuth2</a> I got a little confused, where to put which parameter from the json into the <code>$oauth2</code> object, because often different names are used to reference to the same values, like I suspect. </p>\n\n<p>The json related to my firebase project:</p>\n\n<pre><code>{\n    \"type\": \"service_account\",\n    \"project_id\": \"my_project_id\",\n    \"private_key_id\": \"some_key_id\",\n    \"private_key\": \"-----BEGIN PRIVATE KEY-----very_long_key-----END PRIVATE KEY-----\\n\",\n    \"client_email\": \"firebase-adminsdk-o8sf4@&lt;my_project_id&gt;.iam.gserviceaccount.com\",\n    \"client_id\": \"some_client_id\",\n    \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n    \"token_uri\": \"https://oauth2.googleapis.com/token\",\n    \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n    \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-o8sf4%40&lt;my_project_id&gt;.iam.gserviceaccount.com\"\n}\n</code></pre>\n\n<p>The implementation of the <code>$oauth</code> object looks like this:</p>\n\n<pre><code>my $oauth2 = LWP::Authen::OAuth2-&gt;new(\n             client_id =&gt; \"Public from service provider\",\n             #probably that will be \"some_client_id\" from above\n\n             client_secret =&gt; \"s3cr3t fr0m svc prov\",\n             #the \"very_long_key\"?\n\n             service_provider =&gt; \"Google\",\n             #the \"auth_uri\"? That's what I would suggest here\n             #I've read some about the LWP::Authen::OAuth2::ServiceProvider module \n             #do I have to create an instance of that here?\n             #if so, which params do I need for that from the json?\n\n             redirect_uri =&gt; \"https://your.url.com/\",\n             #the FCM api I want to call?\n\n             # Optional hook, but recommended.\n             save_tokens =&gt; \\&amp;save_tokens,\n             save_tokens_args =&gt; [ $dbh ],\n\n             # This is for when you have tokens from last time.\n             token_string =&gt; $token_string.\n\n             #yes, i copy-pasted that from the docs\n         );\n</code></pre>\n\n<p>Now, as a beginner in Perl and a disliker of ambiguous key-values names, i'm a little confused, which value to put where and would be glad if anyone could help me with a guide here, what to put where even if this seems like very rookie question, it is important for me :D. So i'm thankful for every helpful answer!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>When trying to generate a <strong>JSON Web Token</strong> manually in my perl service using <a href=\"https://metacpan.org/pod/Crypt::JWT\" rel=\"nofollow noreferrer\">Crypt::JWT</a>, i came across another trip wire, which made me doubt that the according authentication API from Google <code>\"https://www.googleapis.com/auth/firebase.messaging\"</code> still accepts Bearer tokens ... I tried the generate my JWT, which seemed to be successful, but the request I sent to the actual FCM API then gave me this:</p>\n\n<pre><code>Request had invalid authentication credentials. \nExpected OAuth 2 access token, login cookie \nor other valid authentication credential\n</code></pre>\n\n<p>In the response printed as String I then found this little guy, which confused me a lot:</p>\n\n<pre><code>Client-Warning: Unsupported authentication scheme 'bearer'\n</code></pre>\n\n<p>Now I'm very unsure, it bearer tokens are still supported for the FCM API, even they are used in an example on the referring <a href=\"https://firebase.google.com/docs/cloud-messaging/send-message\" rel=\"nofollow noreferrer\">docs page</a>. Does anyone have any up-to-date information about that? Thank you very much!</p>\n"}, {"tags": ["linux", "string", "perl", "search"], "comments": [{"owner": {"reputation": 1790, "user_id": 10263660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02f3119d15c8c155ff25968fdf5a145?s=128&d=identicon&r=PG&f=1", "display_name": "FalcoGer", "link": "https://stackoverflow.com/users/10263660/falcoger"}, "edited": false, "score": 0, "creation_date": 1554118500, "post_id": 55453942, "comment_id": 97621801, "body": "Try sed: <a href=\"https://www.gnu.org/software/sed/\" rel=\"nofollow noreferrer\">gnu.org/software/sed</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1554128462, "post_id": 55453942, "comment_id": 97627629, "body": "Also watch the <a href=\"/questions/11710552/useless-use-of-cat\">useless use of <code>cat</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "edited": false, "score": 0, "creation_date": 1554296095, "post_id": 55455718, "comment_id": 97698498, "body": "thanks a lot for your support , can you please help me in 1 more thing.  it worked with me , but i faced 1 more issue that it return null when Statusdescription is located at the end of line .  for example : GET/en?status=1&amp;newMainBalance=5486&amp;serviceAmount=700&amp;Extern&zwnj;&#8203;alTrxId=asdf&amp;PgTrxId&zwnj;&#8203;=tfpsadf&amp;amount=0&amp;st&zwnj;&#8203;atusDescription=Fail&zwnj;&#8203;ed&quot; so it doesn&#39;t match the criteria for &quot;&amp;&quot;   can i make it more generic , just match 1 word after &quot;StatusDescription=&quot; and before &quot;&amp;&quot; or not"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "edited": false, "score": 0, "creation_date": 1554297340, "post_id": 55455718, "comment_id": 97699320, "body": "That&#39;s actually another question, but you could try to split lines on <code>&amp;</code> and then match on the parts. E.g. <code>perl -ne &#39;foreach my $p (split(&#47;&amp;&#47;)) { print &quot;$1\\n&quot; if $p =~ &#47;^statusDescription(=.*)&#47;; }&#39;</code>"}, {"owner": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "edited": false, "score": 0, "creation_date": 1554300162, "post_id": 55455718, "comment_id": 97701134, "body": "but if i split the line on &quot;&amp;&quot;  , it will duplicate the output in case i have 2 statusdescription on the same line (one before &amp; and another one in end of the line) and i need to terminate after first match to get accurate result  thanks alot for your support in advance , you really helped me alot"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "edited": false, "score": 0, "creation_date": 1554307341, "post_id": 55455718, "comment_id": 97705879, "body": "OK, you only want to find and print the first match? Then this should do it <code>perl -ne &#39;foreach my $p (split(&#47;&amp;&#47;)) { if ($p =~ &#47;^statusDescription(=.*)&#47;) { print &quot;$1\\n&quot;; last } }&#39;</code>"}, {"owner": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "edited": false, "score": 0, "creation_date": 1555317308, "post_id": 55455718, "comment_id": 98054176, "body": "Hello Stefan Becker  i faced a new issue that i found duplicates some time so i need to add a new match to filter with it so i need to get statusdescrition as before and add pgtrxid to be like that (pgTrxId=asdf&amp;statusDescription=Failed) bearing in mind to ignore case sensitive for pgtrxid"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1554296486, "last_edit_date": 1554296486, "creation_date": 1554123488, "answer_id": 55455718, "question_id": 55453942, "link": "https://stackoverflow.com/questions/55453942/search-after-a-match-once-per-line/55455718#55455718", "title": "Search after a match once per line", "body": "<p>You used <code>-l</code> option without a value. To quote from <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>:</p>\n\n<blockquote>\n  <p>If octnum is omitted, sets <code>$\\</code> to the current value of <code>$/</code></p>\n</blockquote>\n\n<p>which by default is <code>\\n</code>. Hence every print will automatically get a <code>\\n</code> appended.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$  echo 'Match=once&amp; should only Match=twice&amp; once' | perl -nle 'print \"MATCH -&gt;$1&lt;-\" while /Match(.*?)&amp;/g'\nMATCH -&gt;=once&lt;-\nMATCH -&gt;=twice&lt;-\n\n# the same without -l\n$ echo 'Match=once&amp; should only Match=twice&amp; once' | perl -ne 'print \"MATCH -&gt;$1&lt;-\" while /Match(.*?)&amp;/g'\nMATCH -&gt;=once&lt;-MATCH -&gt;=twice&lt;-\n\n# if your post-processing requires matches from different lines to appear\n# on separate lines then append a conditional print \"\\n\" at the end\n$ echo 'Match=once&amp; should only Match=twice&amp; once' | perl -ne 'print \"MATCH -&gt;$1&lt;-\" while /Match(.*?)&amp;/g; print \"\\n\" if $1'\nMATCH -&gt;=once&lt;-MATCH -&gt;=twice&lt;-\n$ echo 'nomatch=once&amp; should only nomatch=twice&amp; once' | perl -ne 'print \"MATCH -&gt;$1&lt;-\" while /Match(.*?)&amp;/g; print \"\\n\" if defined $1'\n$\n</code></pre>\n\n<p>For <code>$/</code> (input record separator) and <code>$\\</code> (output record separator) see also <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1554126784, "last_edit_date": 1554126784, "creation_date": 1554126427, "answer_id": 55456701, "question_id": 55453942, "link": "https://stackoverflow.com/questions/55453942/search-after-a-match-once-per-line/55456701#55456701", "title": "Search after a match once per line", "body": "<p>The <code>-l</code> is having the effect of printing a line feed after each <code>print</code>.</p>\n\n<p>The following will print the value of the (first) <code>statusDescription</code> field of the requested URL (while ignoring the referrer URL). It will even correctly decode the value for you (if it contains escaped characters such as <code>+</code> or <code>%20</code>).</p>\n\n<pre><code>perl -MURI -MURI::QueryParam -nle'\n   my ($request_url) = /^\\S+\\s+(\\S+)/\n      or next;\n   $request_url = URI-&gt;new($request_url, \"http\");\n   my $status = $request_url-&gt;query_param(\"statusDescription\")\n      or next;\n   print $status;\n' test.txt\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11291185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204e736b9d8aaaa3b3d1dff67666dbe0?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Farouk", "link": "https://stackoverflow.com/users/11291185/ahmed-farouk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 55455718, "answer_count": 2, "score": -1, "last_activity_date": 1554296486, "creation_date": 1554117684, "last_edit_date": 1554122678, "question_id": 55453942, "link": "https://stackoverflow.com/questions/55453942/search-after-a-match-once-per-line", "title": "Search after a match once per line", "body": "<p>I'm trying to create a script to get all the Apache response after specific word \"statusDescription\", but I have a problem that I got the output duplicated for some rows as matched word or response maybe written 2 times @ the same line </p>\n\n<p>Sample of log \"1 line\":</p>\n\n<p><code>GET/en?status=1&amp;newMainBalance=5486&amp;serviceAmount=700&amp;ExternalTrxId=asdf&amp;PgTrxId=tfpsadf&amp;amount=0&amp;statusDescription=Failed&amp;customerCode=1.1&amp;newDedicatedBalance=0&amp;secureHash=56a7sdyf&amp;paidAmount=1000&amp;responseMsg=%a1%a1%A1(PG_ID)&amp;language=enHTTP/1.1\"200186243**1/1210669**1\"-\"\"-\"\"-\"\"https://example.com.eg?statusDescription=Failed&amp;externalTrxId=123&amp;status=203&amp;secureHash=asdf&amp;pgTrxId=asdf</code></p>\n\n<p>i tried the below command to get any match between \"statusDescription\" and \"&amp;\"</p>\n\n<pre><code>cat test.txt  | perl -nle'print $1 while /statusDescription(.*?)\\&amp;/g'\ncat test.txt  | perl -nle'print $1 while /statusDescription(.*?)\\&amp;/g'\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>=Failed<br>\n  =Failed</p>\n</blockquote>\n\n<p>i except the result to be 1 line only like</p>\n\n<blockquote>\n  <p>=Failed</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>=Failed=Failed</p>\n</blockquote>\n"}, {"tags": ["perl", "dancer"], "owner": {"reputation": 1466, "user_id": 2689696, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/303b6001169b9992aee46c054b3c49bc?s=128&d=identicon&r=PG&f=1", "display_name": "tejas", "link": "https://stackoverflow.com/users/2689696/tejas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1554117031, "creation_date": 1554117031, "question_id": 55453757, "link": "https://stackoverflow.com/questions/55453757/dancer2-provide-relative-path-for-database-in-config", "title": "Dancer2 provide relative path for database in config", "body": "<p>Is it possible to provide a file relative to the <code>appdir</code> in config.yml when launching a dancer2 app via <code>plackup</code>?</p>\n\n<p>What is see by default is that the path is relative to working dir.</p>\n"}, {"tags": ["perl", "variables", "global-variables", "temp"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1554103277, "post_id": 55449646, "comment_id": 97613987, "body": "<a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>: &quot;Remember: the value of $/ is a string, not a regex. awk has to be better for something. :-)&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1557220191, "last_edit_date": 1557220191, "creation_date": 1554103282, "answer_id": 55449879, "question_id": 55449646, "link": "https://stackoverflow.com/questions/55449646/the-difference-between-and-local/55449879#55449879", "title": "The difference between `$/` and `local $/`", "body": "<p>The <a href=\"https://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a></p>\n\n<blockquote>\n  <p>modifies the listed variables to be local to the enclosing block, file, or eval. </p>\n</blockquote>\n\n<p>It saves away the value of an (already existing) variable, which can then be changed as desired and still once the scope is exited its original value is restored.</p>\n\n<p>As such it is used precisely with the global variables like <code>$/</code> -- by <code>local</code>-izing them we can alter their value within the scope where we need it and not have it change for the whole program. </p>\n\n<p>More is provided <a href=\"https://perldoc.perl.org/perlsub.html#Temporary-Values-via-local()\" rel=\"nofollow noreferrer\">in perlsub</a>.</p>\n\n<p>What is shown raises questions though. The <a href=\"https://perldoc.perl.org/perlvar.html#$/\" rel=\"nofollow noreferrer\"><code>$/</code> variable</a> takes a string, not a regex; from what I recall those \"fasta\" files have lines starting with <code>&gt;</code>, not with <code>^&gt;</code>. Also, <code>$/</code> need be set before reading lines (with <code>&lt;&gt;</code>) and I don't see how the shown code does what its intent is.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "edited": false, "score": 0, "creation_date": 1554104541, "post_id": 55449960, "comment_id": 97614558, "body": "thank you, your answer really helped. I left all of the calculations out, but they are the reason why I set <code>$&#47;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "edited": false, "score": 0, "creation_date": 1554104631, "post_id": 55449960, "comment_id": 97614600, "body": "<code>$&#47;</code> is only used by <code>readline</code> (aka <code>&lt;&gt;</code>, <code>&lt;FH&gt;</code> and <code>&lt;$fh&gt;</code>), not by calculations."}, {"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "edited": false, "score": 0, "creation_date": 1554104773, "post_id": 55449960, "comment_id": 97614677, "body": "Yes, I get that. But to do these calculations I need to process my file in order to do them"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "edited": false, "score": 0, "creation_date": 1554105171, "post_id": 55449960, "comment_id": 97614835, "body": "I&#39;ve made an addition to my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1554105161, "last_edit_date": 1554105161, "creation_date": 1554103555, "answer_id": 55449960, "question_id": 55449646, "link": "https://stackoverflow.com/questions/55449646/the-difference-between-and-local/55449960#55449960", "title": "The difference between `$/` and `local $/`", "body": "<p><code>local $var</code> saves the value of <code>$var</code>, and adds a directive to the stack that will cause the value of <code>$var</code> to be restored when the scope is exited (even by exception). It's the closest thing to <code>my</code> that's available to package variables.</p>\n\n<pre><code>$_ = 123;\n{\n   local $_ = 456;\n   # $_ is 456 here.\n}\n# $_ is back to being 123 here.\n</code></pre>\n\n<p>This is useful to avoid causing problems in surrounding code or in the caller (in the case of subs).</p>\n\n<p>Note that value of <code>$/</code> is matched character-for-character. It's not treated as a regular expression.</p>\n\n<p>Note that <code>$/</code> appears to be set for no reason in the code you posted (unless you left something out).</p>\n\n<hr>\n\n<blockquote>\n  <p><em>why can't I just simply use <code>$/ = \"^&gt;\"</code></em></p>\n</blockquote>\n\n<p>Then, the change wouldn't be undone at the end of the block, so it would affect the <code>&lt;&gt;</code> in the <code>while</code> condition as well as any code after your loop that performs reads.</p>\n\n<hr>\n\n<p>How I'd handle a FASTA file:</p>\n\n<pre><code>my ($header, $seq);\nwhile (1) {\n   my $line = &lt;&gt;;\n   if (!defined($line) || $line =~ /^&gt;/) {\n      work($header, $seq) if defined($header);\n\n      last if !defined($line);\n\n      chomp($line);\n      $header = substr($line, 1);\n      $seq = \"\";\n   } else {\n      chomp($line);\n      $seq .= $line;\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1554103889, "post_id": 55450006, "comment_id": 97614252, "body": "There&#39;s no undefined behaviour being invoked."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554103943, "post_id": 55450006, "comment_id": 97614275, "body": "<code>local $&#47; = &quot;\\n&gt;&quot;;</code> would be more in line with the intent"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1554103940, "last_edit_date": 1554103940, "creation_date": 1554103715, "answer_id": 55450006, "question_id": 55449646, "link": "https://stackoverflow.com/questions/55449646/the-difference-between-and-local/55450006#55450006", "title": "The difference between `$/` and `local $/`", "body": "<p>Your code relies on undefined behavior:</p>\n\n<ul>\n<li>to quote from <a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a></li>\n</ul>\n\n<blockquote>\n  <p>Remember: the value of <code>$/</code> is a string, not a regex. <strong>awk</strong> has to be better for something. :-)</p>\n</blockquote>\n\n<ul>\n<li>you modify the value of <code>$/</code> <strong>inside</strong> the <code>while (&lt;&gt;)</code> which is supposed to affect it.</li>\n</ul>\n\n<p>Correct would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @array;\n{\n    local $/ = \"&gt;\";\n    while (&lt;&gt;) {\n        ...\n    }\n}\n</code></pre>\n\n<p>then the observed difference simply disappears, i.e. the code behaves the same with or without <code>local</code>.</p>\n\n<p>But you should always use <code>local</code> on global variables to ensure that the original value is restored when leaving the scope of the <code>local</code> definition.</p>\n"}], "owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 55449960, "answer_count": 3, "score": 2, "last_activity_date": 1557220191, "creation_date": 1554102274, "last_edit_date": 1554102722, "question_id": 55449646, "link": "https://stackoverflow.com/questions/55449646/the-difference-between-and-local", "title": "The difference between `$/` and `local $/`", "body": "<p>For my program, I need to use FASTA files and do some calculations with them. In order to do that, I used <code>local $/ = \"^&gt;</code>, to chomp up my file in to header line and sequence lines. While my program does what I want it to do, why can't I just simply use <code>$/ = \"^&gt;\"</code>? When I tried it, my results were not what I needed, I'm interested why is that so. Here's my simplified code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @array;\nwhile(&lt;&gt;){\n    local $/ = \"^&gt;\";\n    chomp;\n    push (@array, $_);\n    if(eof){\n        for(@array){\n            ...\n        }\n    ...\n    }\n    if(eof){\n        @array = ();\n    }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 15, "user_id": 11288118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4ec3464c5a183ad4f7500fdc302fd?s=128&d=identicon&r=PG&f=1", "display_name": "hounan", "link": "https://stackoverflow.com/users/11288118/hounan"}, "edited": false, "score": 0, "creation_date": 1554096083, "post_id": 55448486, "comment_id": 97611423, "body": "above is the regex I used, if I add &quot;$&quot; I will got error  if I delete $, only the first line can be matched"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1554096391, "post_id": 55448486, "comment_id": 97611500, "body": "When you add <code>$</code> then your regex expects the input to end but since you also have digits lying which are not yet matched, your match starts failing. So for matching that number just adding <code>\\d+</code> will make your regex match successfully but I see someone already updated your post and already changed your initial regex and added <code>(\\d+)+</code> where as only <code>\\d+</code> was suffice. <a href=\"https://regex101.com/r/ERN8HO/1\" rel=\"nofollow noreferrer\">Check this</a> Here it matches all the lines with little modification in regex."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1554114647, "last_edit_date": 1554114647, "creation_date": 1554097090, "answer_id": 55448643, "question_id": 55448486, "link": "https://stackoverflow.com/questions/55448486/how-to-map-multiline-each-line-has-the-same-format-using-perl/55448643#55448643", "title": "How to map multiline (each line has the same format using perl", "body": "<ul>\n<li>You need <code>/m</code> to change the definition of <code>^</code> and <code>$</code> to match your needs.\n\n<ul>\n<li><code>^</code> normally only matches at the start of the string. With <code>/m</code>, it also matches after line feeds.</li>\n<li><code>$</code> normally only matches at a line feed at the end of the string and at the end of the string. With <code>/m</code>, it also matches at any line feed.</li>\n</ul></li>\n<li>You need <code>/g</code> to get all the matches (rather than just the first).</li>\n<li><code>[\\s]</code> is weird way of writing <code>\\s</code>.</li>\n<li><code>(\\d+)+</code> (at the end) should be <code>(\\d+)</code>.</li>\n<li>I've added whitespace to the pattern to make more readable, which is made possible using <code>/x</code>.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>while ( $bar =~ /^([0-2]) \\s qid:(\\d+) \\s .*? \\s \\#docid \\s = \\s (\\d+)$/mgx ) {\n   my ($foo, $qid, $docid) = ($1, $2, $3);\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11288118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4ec3464c5a183ad4f7500fdc302fd?s=128&d=identicon&r=PG&f=1", "display_name": "hounan", "link": "https://stackoverflow.com/users/11288118/hounan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 55448643, "answer_count": 1, "score": 0, "last_activity_date": 1554114647, "creation_date": 1554095955, "last_edit_date": 1554096155, "question_id": 55448486, "link": "https://stackoverflow.com/questions/55448486/how-to-map-multiline-each-line-has-the-same-format-using-perl", "title": "How to map multiline (each line has the same format using perl", "body": "<p>I was trying to map each line content using perl, and each line has the same format.</p>\n\n<p>I have successful map the first line, but once I add $ after regex, everything goes wrong. however if I delete the $, the reguar expression can only match the first line and igorn the rest</p>\n\n<p>Here is the content</p>\n\n<pre><code>$bar =\"0 qid:85 1:0.666667 2:0.666666 3:0.857143 #docid = 579\n0 qid:85 1:0.666667 2:0.666666 3:0.857143 #docid = 579\";\n\nm/^([0-2])[\\s]qid\\:(\\d+).*?\\#docid[\\s]=[\\s](\\d+)+$/\n</code></pre>\n"}, {"tags": ["regex", "perl", "while-loop"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554088955, "post_id": 55447503, "comment_id": 97610012, "body": "Note that redirecting the output of the program can cause the output to become block-buffered instead of line buffered, so it may <i>appear</i> like things are printed later than they are. <code>$| = 1;</code> will disable buffering on the default output handle (STDOUT)."}, {"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "edited": false, "score": 0, "creation_date": 1554120212, "post_id": 55447503, "comment_id": 97622748, "body": "Please add <code>$| = 1;</code> at first line of the script and see."}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554226539, "post_id": 55447503, "comment_id": 97671105, "body": "@ikegami I&#39;ve updated the code and this time I made sure that it is exhibiting the problem I mentioned, and I also tried adding <code>$| = 1;</code> but the problem still persists."}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554231071, "post_id": 55447503, "comment_id": 97673210, "body": "@ikegami I understood what you pointed out in your first comment, the program was running fine as long as I assign sequence in the code itself, but I need the user to input both the file name and the <code>$motif</code> and when I do that it doesn&#39;t work. And  I don&#39;t why you&#39;re getting the &quot;could not open&quot; because all that part is working fine on my system, I have tried opening different .txt files and printed them and it&#39;s working fine. Also, I&#39;m not piping them out to any other program or file, honestly I don&#39;t yet know how to do that, this is a simple program I&#39;m running through command prompt."}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554231529, "post_id": 55447503, "comment_id": 97673452, "body": "@ikegami And rather than the program working fine I&#39;m more curious about why is it working  the way it is when the user inputs data, like it would have been understandable that there&#39;s some obvious flaw in code if, when the user inputs both file name and motif and the output would have been incorrect or no output or some error but somehow the output is correct but incomplete and the loop runs infinitely and I get to see some results once I hit <code>ctrl+c</code>"}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554232005, "post_id": 55447503, "comment_id": 97673691, "body": "@ikegami thanks for trying but what I&#39;ve posted above is my complete script and the same code is showing anomalous behavior on my computer, and I don&#39;t know why. Also if you are still getting that &quot;could not open&quot; error make sure the TXT file is in the same folder as the PERL script, I know that&#39;s not something you would have overlooked but I still mentioned just in case."}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554234542, "post_id": 55447503, "comment_id": 97674753, "body": "@ikegami You can use any .TXT file but if want, use any of the two text files here (<a href=\"https://github.com/makshuf/files.git\" rel=\"nofollow noreferrer\">github.com/makshuf/files.git</a>) and search up for sequence &quot;ATTC&quot;  (quotes not included) when prompted for motif sequence"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554234466, "post_id": 55481994, "comment_id": 97674725, "body": "thanks, I&#39;ll read the recommendations but the above change in code doesn&#39;t solve the problem."}, {"owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "reply_to_user": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554235033, "post_id": 55481994, "comment_id": 97674971, "body": "@MOHAMMADMAKSHUF I&#39;ve did a brief test and it seem to work (solving to original problem of the while loop). If you&#39;re talking about a syntax error, I&#39;ve edited the example so <code>my $row</code> is outside of the inner local scope."}, {"owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "reply_to_user": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554239393, "post_id": 55481994, "comment_id": 97676840, "body": "@MOHAMMADMAKSHUF have you checked it?"}, {"owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "reply_to_user": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554239998, "post_id": 55481994, "comment_id": 97677087, "body": "@MOHAMMADMAKSHUF I&#39;ve added and an alternative made by some small changes to your code. Tested successfully (added output to aswer)."}, {"owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554242473, "post_id": 55481994, "comment_id": 97677969, "body": "the new script you gave does work, thanks for that and your time. But I still don&#39;t understand the anomalous behavior of my script, even though I tried the new edit you posted."}, {"owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "reply_to_user": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "edited": false, "score": 0, "creation_date": 1554243939, "post_id": 55481994, "comment_id": 97678422, "body": "@makshuf remember the input record separator (<code>$&#47;</code>)? You&#39;ve change it to &#39;&#39; (empty string) from the \\n value (or &quot;\\r\\n&quot; in windows) it was before. Now at line <code>my $motif = &lt;&gt;;</code> input is expected, and it will not end as usual with &quot;enter&quot; (the \\n) but wait till it get the EOF value (end of file). You can use Ctrl+d (or Ctrl+z in windows) to pass EOF value so program will continue."}], "tags": [], "owner": {"reputation": 423, "user_id": 7530243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5c7a9e36774c7fa59b0a9ea521609?s=128&d=identicon&r=PG&f=1", "display_name": "izem", "link": "https://stackoverflow.com/users/7530243/izem"}, "is_accepted": false, "score": 2, "last_activity_date": 1554256444, "last_edit_date": 1554256444, "creation_date": 1554232383, "answer_id": 55481994, "question_id": 55447503, "link": "https://stackoverflow.com/questions/55447503/the-code-block-inside-the-regex-while-loop-is-working-but-doesnt-show-results-u/55481994#55481994", "title": "The code block inside the regex while loop is working but doesn&#39;t show results until manually terminated", "body": "<p>You've change the input record separator (<code>$/</code>) to '' (empty string) from the \\n value it was before.<br>\nAt this line: <code>my $motif = &lt;&gt;;</code> input is expected, and it will not end as usual with \"enter\" (the \\n). This is where your program \"get stuck\". It wait till it get a EOF value (end of file). You can use Ctrl+d (or Ctrl+z in windows) to pass EOF value so program will continue.  </p>\n\n<p><code>chomp</code> use it as well (input record separator), so it too will not work as expected (the 1st chomp will work fine as it is called before the change).<br>\nYou should return its original value (even better to change it locally only).  You also set the input record separator to an empty string. You should set it to <code>undef</code> if you want to read file in \"slurp mode\".  </p>\n\n<p>You can read more here: <a href=\"https://perlmaven.com/slurp\" rel=\"nofollow noreferrer\">slurp mode - reading a file in one step</a></p>\n\n<p>Simple update to your code (make sure to delete the <code>$/ = '';</code> line):</p>\n\n<pre><code>my $row = '';\n{\n    open(my $fh, '&lt;', $filename) or die \"Could not open file '$filename' $!\";\n    local $/ = undef;\n    $row = &lt;$fh&gt;;\n    close $fh;\n}\n</code></pre>\n\n<p>Though I would not recommend doing it this way... probably better reading the file to an array of lines, and using some more modern way like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>.</p>\n\n<p>I've made some small changes to your code and tested it successfully with <a href=\"https://github.com/makshuf/files/raw/master/MT_mouse.txt\" rel=\"nofollow noreferrer\">MT_mouse.txt</a>.<br>\nCode:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint 'Enter the file name containing the sequence: ';\nmy $filename = &lt;&gt;;\nchomp $filename;\n\nopen(my $fh, '&lt;', $filename) or die \"Could not open file '$filename' $!\";\nmy @file_lines = &lt;$fh&gt;;\nclose $fh;\n\nprint 'Enter the Motif sequence to be searched: ';\nmy $motif = &lt;&gt;;\nchomp $motif;\nprint 'Read ' . scalar(@file_lines) . \" lines at file: '$filename'\\nmotif: '$motif'\\n\";\n\nmy ($line, $occurrences) = (0, 0);\nforeach my $row (@file_lines) {\n    $line++;\n    next unless $row =~ /\\Q$motif\\E/;\n    my @motif_index = ();\n    my $position = 0;\n    while((my $index = index $row, $motif, $position) &gt;= 0) {\n        push(@motif_index, $index);\n        $position = $index + length $motif;\n    }\n    print \"Motif found on row#$line\\tat position(s): \" . join(', ', @motif_index) . \".\\n\";\n    $occurrences += scalar @motif_index;\n}\n\nprint \"\\nMotif '$motif' was \" . ($occurrences ? \"found $occurrences times\" : 'not found') . \" at file: '$filename'.\\n\";\n\n__END__\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter the file name containing the sequence: MT_mouse.txt\nEnter the Motif sequence to be searched: ACCCC\nRead 272 lines at file: 'MT_mouse.txt'\nmotif: 'ACCCC'\nMotif found on row#4    at position(s): 41.\nMotif found on row#9    at position(s): 19.\nMotif found on row#11   at position(s): 40.\nMotif found on row#23   at position(s): 8.\nMotif found on row#33   at position(s): 3.\nMotif found on row#59   at position(s): 1.\nMotif found on row#61   at position(s): 31.\nMotif found on row#65   at position(s): 37.\nMotif found on row#83   at position(s): 3.\nMotif found on row#98   at position(s): 22.\nMotif found on row#115  at position(s): 48.\nMotif found on row#122  at position(s): 26.\nMotif found on row#132  at position(s): 49.\nMotif found on row#133  at position(s): 36.\nMotif found on row#173  at position(s): 21.\nMotif found on row#183  at position(s): 21.\nMotif found on row#188  at position(s): 52.\nMotif found on row#199  at position(s): 7.\nMotif found on row#209  at position(s): 51.\nMotif found on row#228  at position(s): 28.\nMotif found on row#230  at position(s): 43.\nMotif found on row#247  at position(s): 45.\nMotif found on row#249  at position(s): 53.\nMotif found on row#269  at position(s): 11, 18, 39.\n\nMotif 'ACCCC' was found 26 times at file: 'MT_mouse.txt'.\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11287466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9be0f205f973cd9eea8a74f14032b87?s=128&d=identicon&r=PG&f=1", "display_name": "makshuf", "link": "https://stackoverflow.com/users/11287466/makshuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554256444, "creation_date": 1554086901, "last_edit_date": 1554229907, "question_id": 55447503, "link": "https://stackoverflow.com/questions/55447503/the-code-block-inside-the-regex-while-loop-is-working-but-doesnt-show-results-u", "title": "The code block inside the regex while loop is working but doesn&#39;t show results until manually terminated", "body": "<p>I'm new to Perl and CS in general and just trying to write some bioinformatics related code for learning purposes.\nI'm trying to loop through a text file to find all occurrences of a specific sequence($motif) using simple match operator and while loop, the program works fine when I define the $motif in the code itself, but when I use user-input, the code inside my while loop does work but not properly and it won't terminate either, and when I manually terminate it, sometimes it shows some of the expected results while sometimes all.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse feature ':5.28';\n\n\nprint 'Enter the file name containing the sequence:';\n\nmy $filename = &lt;&gt;;\n\nchomp $filename;\n\nopen(SEQ, '&lt;', $filename)\n  or die \"Could not open file '$filename' $!\";\n\n$/ = ''; #to read the whole file at once as it'll stop reading only when an undefined character comes up\n\nmy $row = &lt;SEQ&gt;; #storing the sequence from file to a variable\nchomp $row;\n\nprint \"\\nEnter the Motif sequence to be searched:\";\n\nmy $motif = &lt;&gt;;\nmy $counter = 0;\nchomp $motif;\n\nwhile ($row =~ m|($motif)|g) {\n    $counter++;\n    print\"\\n\";\n    print \"The motif's occurnce $counter ends at position \", pos$row, \"\\n\";\n}\n\n</code></pre>\n\n<p>The expected output is a list of all the occurrences of $motif but the program doesn't terminate and when I manually terminate it using <code>ctrl+c</code> it shows first 2-3 occurrences, and its not about the time like when I assign $motif a value in the code itself it gives out hundreds of matches in an instant.</p>\n\n<p>If I assign the file sequence (which I'm searching in) to the variable <code>$row</code> directly in my code then also the while loop functions properly, but the loop is not working fine just when I take the input file name(<code>$filename</code>) and write it in <code>$row</code> and the sequence to be searched (<code>$motif</code>) from the user. Assign any one of those inside code and the program functions fine.</p>\n"}, {"tags": ["perl", "date", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1554082104, "creation_date": 1554082104, "answer_id": 55447041, "question_id": 55446889, "link": "https://stackoverflow.com/questions/55446889/parse-long-date-format-in-perl/55447041#55447041", "title": "Parse long date format in Perl", "body": "<p>This can be achieved using <a href=\"http://search.cpan.org/perldoc?DateTime::Format::Flexible\" rel=\"nofollow noreferrer\">DateTime::Format::Flexible</a>.</p>\n\n<pre><code>use DateTime::Format::Flexible qw( );\n\nmy $dt = DateTime::Format::Flexible-&gt;parse_datetime(\n   'Thursday, September 13, 2007',\n   lang =&gt; [ 'en' ],                    # Optional\n);\n</code></pre>\n\n<hr>\n\n<p>If you had known the specific format (as in your original question), I would have recommended <a href=\"http://search.cpan.org/perldoc?DateTime::Format::Strptime\" rel=\"nofollow noreferrer\">DateTime::Format::Strptime</a>.</p>\n\n<pre><code>use DateTime::Format::Strptime qw( );\n\nmy $format = DateTime::Format::Strptime-&gt;new(\n   pattern  =&gt; '%A, %B %e, %Y',\n   locale   =&gt; 'en',\n   on_error =&gt; 'croak',\n);\n\nmy $dt = $format-&gt;parse_datetime('Thursday, September 13, 2007');\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55447041, "answer_count": 1, "score": 0, "last_activity_date": 1554082104, "creation_date": 1554080466, "last_edit_date": 1554080754, "question_id": 55446889, "link": "https://stackoverflow.com/questions/55446889/parse-long-date-format-in-perl", "title": "Parse long date format in Perl", "body": "<p>Is there a module for perl that will parse this format of date into a <code>DateTime</code> object?</p>\n\n<blockquote>\n  <p>Thursday, September 13, 2007</p>\n</blockquote>\n\n<p>I have tried <a href=\"https://metacpan.org/pod/DateTime::Format::Natural\" rel=\"nofollow noreferrer\"><code>DateTime::Format::Natural</code></a> but it doesn't seem to work.</p>\n\n<p>I would prefer a function that doesn't mind if there isn't a day of the week, for instance.  I can't be sure if the data will be consistent.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1554076703, "post_id": 55446139, "comment_id": 97608055, "body": "please clarify: is <code>more&#47;less.pdf</code> the name of a file or is it the path to a file (<code>less.pdf</code> inside directory <code>more</code>) ?"}, {"owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1554099360, "post_id": 55446139, "comment_id": 97612459, "body": "<code>more&#47;less.pdf</code> is the filename.  I&#39;m amazed that MS Office will let you call a file a name with a slash in it.  The substitution regex won&#39;t pick up these slashes.  The <code>-f</code> in the <code>if</code> makes sure that there are no path slashes."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1554100833, "post_id": 55446139, "comment_id": 97612984, "body": "actually, the <code>-f</code> ensures you don&#39;t rename directories (which presumably could contain slashes and other odd characters too)."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1554101093, "post_id": 55446139, "comment_id": 97613091, "body": "don&#39;t know if this command will work on a mac but what type of fs is this file on: <code>mount | fgrep $(realpath &quot;$(df  more&#47;less.pdf | awk &#39;NR==2{print $1}&#39;)&quot;)</code>"}, {"owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1554102566, "post_id": 55446139, "comment_id": 97613676, "body": "Sorry, I&#39;m not sure how to answer that!  It&#39;s MacOS.  What finder shows as <code>more&#47;less.pdf</code> appears as <code>more:less.pdf</code> in terminal <code>ls</code>.  This is really puzzling me.  The files with the forward slash are being created on Windows 7 and Windows 10 or Mac.  They come from MS Office applications."}, {"owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 1, "creation_date": 1554104079, "post_id": 55446139, "comment_id": 97614337, "body": "[link]<a href=\"https://stackoverflow.com/questions/13298434/colon-appears-as-forward-slash-when-creating-file-name[/link]\" title=\"colon appears as forward slash when creating file name%5b\">stackoverflow.com/questions/13298434/&hellip;</a> explains that <code>&#47;</code> is really a <code>:</code> but finder shows it the wrong way.  So I&#39;ll remove colons from the names."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "edited": false, "score": 0, "creation_date": 1554100122, "post_id": 55446481, "comment_id": 97612714, "body": "Thank you so much, this is a brilliant explanation and is really helpful."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "reply_to_user": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "edited": false, "score": 0, "creation_date": 1554101315, "post_id": 55446481, "comment_id": 97613188, "body": "one other check would be to ensure the new name doesn&#39;t clobber an existing file"}, {"owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "edited": false, "score": 0, "creation_date": 1554102907, "post_id": 55446481, "comment_id": 97613824, "body": "Good call - thank you.  Just tried it: in such a case it deletes the file that&#39;s being renamed.  So it needs <code>rename -&gt; tempname -&gt; check against existing files -&gt; if clash append incremental to tempname -&gt; go ahead and rename</code>.  That&#39;s my next puzzle."}], "tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": true, "score": 0, "last_activity_date": 1554076651, "last_edit_date": 1554076651, "creation_date": 1554076022, "answer_id": 55446481, "question_id": 55446139, "link": "https://stackoverflow.com/questions/55446139/how-can-i-make-this-onedrive-sanitiser-work/55446481#55446481", "title": "How can I make this OneDrive sanitiser work?", "body": "<p>The line of code in question is:</p>\n\n<pre><code>if (-f and not 's/^\\./' )\n</code></pre>\n\n<ul>\n<li>This succeeds when <code>-f</code> is true and <code>'s/^\\./'</code> is false\n\n<ul>\n<li><code>-f</code> tests if <code>$_</code> is a file</li>\n<li>In a boolean context, <code>'s/^\\./'</code> tests if the given string is not null</li>\n</ul></li>\n</ul>\n\n<p>Clearly any string that has some characters in it is not null, and so the <code>if</code> test always fails.</p>\n\n<p>Looking at the contents of the string, it is clear that the intention was to insert a regular expression test. The one that is required is the <code>m//</code> form (\"match\"). The one that has been (almost) provided, is a malformed version of <code>s///</code> (search and replace).</p>\n\n<p>In Perl, regular expressions generally do not appear as strings. The appropriate form is (<code>m</code> is optional):</p>\n\n<pre><code>if (-f and not m/^\\./)\n</code></pre>\n\n<hr>\n\n<p>As couple of asides:</p>\n\n<ul>\n<li><code>@argv</code> is not used in your code (and is not the same as <code>@ARGV</code>)</li>\n<li>use <code>find(\\&amp;dirRecurs, @ARGV);</code> to search more than one path (provided as arguments to the perl script)</li>\n<li>You perform rename even if there has been no change. This can be prevented by wrapping in and <code>if</code>:</li>\n</ul>\n\n<pre><code>if ((my $txt = $_) =~ s/^\\ | (?=\\.)|[\\/!#%^?*&amp;()\\\\]| $//g) {\n    rename($_, $txt);\n}\n\n# or:\n\nrename($_, $txt)\n    if (my $txt = $_) =~ s/^\\ | (?=\\.)|[\\/!#%^?*&amp;()\\\\]| $//g;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4493223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/becf0cddc6b070e98fe37e8bf4977563?s=128&d=identicon&r=PG", "display_name": "RedZebra", "link": "https://stackoverflow.com/users/4493223/redzebra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 55446481, "answer_count": 1, "score": 0, "last_activity_date": 1554076651, "creation_date": 1554072321, "last_edit_date": 1554074409, "question_id": 55446139, "link": "https://stackoverflow.com/questions/55446139/how-can-i-make-this-onedrive-sanitiser-work", "title": "How can I make this OneDrive sanitiser work?", "body": "<p>I'm learning to code, following tutorials to try and fix a problem that's been annoying - to clean up files on macOS so they don't jam OneDrive from working.</p>\n\n<p>I have followed several tutorials and it's very nearly doing what I'd hope.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse File::Find;\n\nmy @argv;\nmy $dir = $ARGV[0];\n\nfind(\\&amp;dirRecurs, $dir);\n\nsub dirRecurs{\n\n    if (-f and not 's/^\\./' )\n    {\n        (my $txt = $_) =~ s/^\\ | (?=\\.)|[\\/!#%^?*&amp;()\\\\]| $//g;\n        rename($_, $txt);\n    }\n\n}\n</code></pre>\n\n<p>I expected it to exclude <code>.dotfiles</code> from the renaming process as a result of <code>and not 's/^\\./'</code> but it doesn't.  If I remove the <code>and not 's/^\\./'</code> from the if line, all works as I'd hope, except</p>\n\n<p>I expected <code>\\/</code> in the regex to rename files like <code>more/less.pdf</code> but it doesn't</p>\n"}, {"tags": ["perl", "hash", "push", "hash-of-hashes"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553986990, "post_id": 55436388, "comment_id": 97590199, "body": "What order of the bases do you want in each array?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1553989295, "post_id": 55436388, "comment_id": 97590592, "body": "The order depends on the log-odds score. So the order that will return the best log-odds score is the order that I want."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1554016075, "post_id": 55436388, "comment_id": 97594193, "body": "Why do you have <code>for my $base (qw( A C G T)) { if ($HoA{$id}[$pos2] eq $base)</code>? Wouldn&#39;t <code>my $base = $HoA{$id}[$pos2]</code> be much simpler?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553989446, "post_id": 55436435, "comment_id": 97590623, "body": "I have a file that contains 29 sequences that I am using. I didn&#39;t included all of them to try to keep the question short."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553989598, "post_id": 55436435, "comment_id": 97590653, "body": "I wanted a hash of arrays because I want to access the base at each location later in the code - I am going to create counts of each base at location, manipulate the counts, etc.  I thought an array would allow that. I am open to ideas of a better way to do this though."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553989830, "post_id": 55436435, "comment_id": 97590695, "body": "For counting you can use <code>++$maxmot{$id}{ $HoA{$id}[$pos3] }</code>. I don&#39;t understand what you mean by &quot;the order that will return the best log-odds score&quot;."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1553990318, "post_id": 55436435, "comment_id": 97590772, "body": "So here is an example: say <code>Sequence 1</code> is <code>ACCTGA</code>, and we are using a motif width of <code>3</code>. Naturally, we know that the options for a motif are <code>ACC, CCT, CTG, TGA</code>. So, based on the score that each corresponds to, one of these motifs will return the maximum score. I think I give a better explanation of calculating a log-odds score here: <a href=\"https://stackoverflow.com/questions/55326503/eliminating-unitialized-values-in-my-perl-hash-of-arrays\" title=\"eliminating unitialized values in my perl hash of arrays\">stackoverflow.com/questions/55326503/&hellip;</a>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1553987127, "creation_date": 1553987127, "answer_id": 55436435, "question_id": 55436388, "link": "https://stackoverflow.com/questions/55436388/perl-push-character-to-hash-of-array/55436435#55436435", "title": "Perl: push character to hash of array", "body": "<p>Maybe you don't need an array but a hash?</p>\n\n<p>Change the push to</p>\n\n<pre><code>undef $maxmot{$id}{ $HoA{$id}[$pos3] };\n</code></pre>\n\n<p>It creates a hash (with undefined values, so only the keys are important). In the output, I don't see more than 3 keys for each sequence in the input from your linked question.</p>\n"}, {"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1554024458, "post_id": 55439142, "comment_id": 97595632, "body": "The only thing I can&#39;t really explain is why <code>$width</code> is configurable. The array refs stored in <code>%logodds</code> would need to be of length <code>$width</code> too. But currently they are of fixed length 3. Maybe your algorithm is only supposed to work with widths of 1, 2 and 3?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1554026450, "post_id": 55439142, "comment_id": 97596081, "body": "Judging by the explanation of the logscore calculation in your previous <a href=\"https://stackoverflow.com/questions/55326503/eliminating-unitialized-values-in-my-perl-hash-of-arrays\">question</a> I think my guesses are correct and the above answer shows the correct algorithm. For your example <code>CAG</code> the log score would be <code>0.2 + 0.2 + 0.4</code>. Sequence 1 has <code>CAG</code> f.ex. at index <code>1</code>, hence <code>$loscore{&#39;Sequence_1&#39;}[1]</code> is <code>0.8</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1554029235, "post_id": 55439142, "comment_id": 97596645, "body": "Added an alternative implementation based on the realization that the score per motif is a constant and can be per-calculated."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554041700, "post_id": 55439142, "comment_id": 97599463, "body": "The reason why <code>$width</code> is not configurable in this code is that I wanted to try to keep the post somewhat short. I was told to do that last time I posted. You are correct with the calculation of log-odds scores"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554043940, "post_id": 55439142, "comment_id": 97600070, "body": "I had a hunch that <code>%logodds</code> looked odd. So are the values in it dependent on <code>$width</code> or would you need to calculate <code>%logodds</code> for each sequence? Do any of my proposed solutions solve your issue?"}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554045774, "post_id": 55439142, "comment_id": 97600577, "body": "I&#39;m working through your solutions now. I appreciate the help! The amount of values in <code>%logodds</code> depends on <code>$width</code>. What I omitted (to save space in the post) is how I calculate these values."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554045842, "post_id": 55439142, "comment_id": 97600590, "body": "I randomly seed a start position for the motif to separate motif from background in each sequence. Then, I calculate background counts and frequencies of the bases and position-specific counts and frequencies of the bases within each motif. I add <code>1</code> to each motif count to avoid a <code>0</code> value. I calculate the log-odds score, specific to each position, by taking the <code>log base2</code> of <code>motif frequency &#47; background frequency</code>. I just set the table to specific values for simplicity in the post"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554046162, "post_id": 55439142, "comment_id": 97600676, "body": "So <code>%logodds</code> is specific per sequence or specific to the set of sequences? As the code is now the same <code>%logodds</code> will be used for all sequences in the input."}, {"owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554046570, "post_id": 55439142, "comment_id": 97600797, "body": "<code>%logodds</code> is specific to the set of sequences. The overall goal is to iterate through the code <code>~500</code> times to get <code>%maxscore</code> for each sequence to converge. After this, I will iterate the random seeding <code>~50</code> times to eliminate case-specific convergences. So, the <code>%logodds</code> table changes each iteration (which is why I want to access the values in it after the first calculation of <code>%maxscore</code>). BUT, honestly, my goal for the post is just to complete <code>1</code> iteration."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "edited": false, "score": 0, "creation_date": 1554048052, "post_id": 55439142, "comment_id": 97601196, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/190983/discussion-between-stefan-becker-and-william\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1554043835, "last_edit_date": 1554043835, "creation_date": 1554021448, "answer_id": 55439142, "question_id": 55436388, "link": "https://stackoverflow.com/questions/55436388/perl-push-character-to-hash-of-array/55439142#55439142", "title": "Perl: push character to hash of array", "body": "<p>The <code>push()</code> is not the problem. From running your code it becomes obvious that the conditional <code>$loscore{$id}[$pos2] == $maxscore{$id}</code> is <code>true</code> more often than you expect it.</p>\n\n<p>Here are some questions I would ask in a code review:</p>\n\n<ul>\n<li>why do you use <code>length()</code> on an array? It does not return the length of the array.</li>\n<li>Isn't <code>for my $base (qw( A C G T)) { if ($HoA{$id}[$pos2] eq $base) {...</code> just an inefficient way of the equivalent <code>my $base = $HoA{$id}[$pos2];</code>?</li>\n<li>the calculation for each <code>$pos2</code> is executed <code>$pos2 + 1</code> times, i.e. once for <code>0</code>, twice for <code>1</code>, ... i.e. later positions get a higher score.</li>\n<li>one calculation for <code>$loscore{$id}[$pos2]</code> is the sum of <code>@{ $logodds{$base} }</code>, i.e. the base at position <code>$pos2 + $pos3</code> is ignored for the calculation</li>\n<li>you are re-calculating <code>$maxscore{$id}</code> while running over the sequences <strong>and</strong> then use the changing value in the conditional</li>\n<li>(my guess) a motif is supposed to be <code>$width</code> bases long, but your code only stores single bases into <code>%maxmot</code></li>\n</ul>\n\n<p>I'm making an educated guess and propose that the following is the correct algorithm. I'm using the 3 sequences you have given in your previous question. I'm also dumping the other 2 hashes, so that the calculation results become visible.</p>\n\n<p>I took the liberty to rewrite your code to be more concise and clear. But you should be able to trace back the lines in the new code to your original code.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse List::Util 'max';\nuse Data::Dumper;\n\nmy $width = 3;\n\nmy %HoA;\nmy %maxpos;\nmy %loscore;\nmy $id = '';\nwhile (&lt;DATA&gt;) {\n    if (/^&gt;(.+)/) {\n        $id = $1;\n    } else {\n        $HoA{$id}     = [ split(//) ];\n        $maxpos{$id}  = @{ $HoA{$id} } - $width - 1;\n        $loscore{$id} = [ (0) x ($maxpos{$id} + 1) ];\n    }\n}\n\nmy %logodds = (\n    A =&gt; [0.1, 0.2, 0.3],\n    C =&gt; [0.2, 0.5, 0.2],\n    G =&gt; [0.3, 0.2, 0.4],\n    T =&gt; [0.4, 0.1, 0.1],\n);\n\n#MAXIMIZATION\nmy %maxscore;\nmy %maxmot;\n\n# Calculate the log-odds score at each location\nforeach $id (keys %HoA) {\n    for my $index (0..$maxpos{$id}) {\n        for my $offset (0..$width-1) {\n            # look at base in sequence $id at $offset after $index\n            my $base = $HoA{$id}[$index + $offset];\n            $loscore{$id}[$index] += $logodds{$base}[$offset];\n        }\n    }\n}\n\n# Calculate the maximum log-odds score for each sequence\nforeach $id (keys %HoA) {\n    $maxscore{$id} = max( @{ $loscore{$id} });\n}\n\n# Find the motif that gives the maximum score for each sequence\nforeach $id (keys %HoA) {\n    for my $index (0..$maxpos{$id}) {\n        if ($loscore{$id}[$index] == $maxscore{$id}) {\n            # motif of length $width\n            my $motif = join('', @{ $HoA{$id} }[$index..$index + $width - 1]);\n            $maxmot{$id}-&gt;{$motif}++;\n        }\n    }\n}\n\nprint Data::Dumper-&gt;Dump([\\%loscore, \\%maxscore, \\%maxmot],\n                         [qw(*loscore *maxscore *maxmot)]);\n\nexit 0;\n\n__DATA__\n&gt;Sequence_1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence_2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence_3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl dummy.pl\n%loscore = (\n             'Sequence_1' =&gt; [\n                               '1.2',\n                               '0.8',\n                               '0.6',\n                               '0.8',\n                               '0.5',\n                               '0.8',\n                               '1',\n                               '0.8',\n                               '0.4',\n                               '0.5',\n                               '0.8',\n                               '0.7',\n                               '0.5',\n                               '0.9',\n                               '0.6',\n                               '0.4',\n                               '0.3',\n                               '0.6',\n                               '0.8',\n                               '0.7',\n                               '0.4',\n                               '1.2',\n                               '0.5',\n                               '0.3',\n                               '0.6',\n                               '0.7',\n                               '1.1',\n                               '0.8',\n                               '0.4',\n                               '0.7',\n                               '1',\n                               '0.5',\n                               '1.1',\n                               '1',\n                               '0.6',\n                               '0.7',\n                               '0.5',\n                               '1.1',\n                               '0.8'\n                             ],\n             'Sequence_2' =&gt; [\n                               '0.9',\n                               '1',\n                               '0.6',\n                               '1',\n                               '0.6',\n                               '1.1',\n                               '0.8',\n                               '0.5',\n                               '1',\n                               '1.1',\n                               '0.6',\n                               '1',\n                               '0.9',\n                               '0.8',\n                               '0.5',\n                               '1.1',\n                               '0.8',\n                               '0.5',\n                               '1.1',\n                               '0.9',\n                               '0.9',\n                               '1.1',\n                               '0.8',\n                               '0.6',\n                               '0.6',\n                               '1.2',\n                               '0.6',\n                               '0.7',\n                               '0.7',\n                               '0.9',\n                               '0.7',\n                               '0.7',\n                               '0.7',\n                               '1',\n                               '0.6',\n                               '0.6',\n                               '1.1',\n                               '0.8',\n                               '0.7'\n                             ],\n             'Sequence_3' =&gt; [\n                               '1.3',\n                               '0.7',\n                               '0.7',\n                               '0.8',\n                               '0.9',\n                               '0.8',\n                               '0.5',\n                               '1',\n                               '0.7',\n                               '1',\n                               '0.8',\n                               '0.8',\n                               '0.5',\n                               '0.8',\n                               '0.8',\n                               '0.6',\n                               '0.7',\n                               '0.4',\n                               '1.2',\n                               '0.8',\n                               '0.7',\n                               '0.9',\n                               '0.8',\n                               '0.7',\n                               '0.8',\n                               '1',\n                               '0.6',\n                               '0.9',\n                               '0.8',\n                               '0.4',\n                               '0.6',\n                               '1.2',\n                               '0.8',\n                               '0.5',\n                               '1',\n                               '1',\n                               '0.8',\n                               '0.7',\n                               '0.7',\n                               '1.1',\n                               '0.7',\n                               '0.7'\n                             ]\n           );\n%maxscore = (\n              'Sequence_1' =&gt; '1.2',\n              'Sequence_3' =&gt; '1.3',\n              'Sequence_2' =&gt; '1.2'\n            );\n%maxmot = (\n            'Sequence_3' =&gt; {\n                              'TCG' =&gt; 1\n                            },\n            'Sequence_2' =&gt; {\n                              'TCA' =&gt; 1\n                            },\n            'Sequence_1' =&gt; {\n                              'TCA' =&gt; 2\n                            }\n          );\n</code></pre>\n\n<p>This looks much closer to your expected output. But of course I could be completely off with my guesses...</p>\n\n<hr>\n\n<p>If I understand the logscore calculation correctly, then the score per motif is a constant and hence can be pre-calculated. Which would lead to the following more straightforward approach:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $width = 3;\n\nmy %logodds = (\n    A =&gt; [0.1, 0.2, 0.3],\n    C =&gt; [0.2, 0.5, 0.2],\n    G =&gt; [0.3, 0.2, 0.4],\n    T =&gt; [0.4, 0.1, 0.1],\n);\n\n# calculate log score for each motif combination\nmy $motif_score = {'' =&gt; 0}; # start with a 0-length motif\nforeach my $offset (0..$width - 1) {\n    my %scores;\n\n    # for all motifs...\n    foreach my $prefix (keys %{ $motif_score }) {\n        my $base_score = $motif_score-&gt;{$prefix};\n\n        # ... add another base to the motif\n        for my $base (qw(A G C T)) {\n            $scores{\"${prefix}${base}\"} = $base_score + $logodds{$base}[$offset];\n        }\n    }\n\n    # store the scores for the new sequences\n    $motif_score = \\%scores;\n}\n\n#print Data::Dumper-&gt;Dump([$motif_score], [qw(motif_score)]);\n\nmy $id;\nmy %maxmot;\nwhile (&lt;DATA&gt;) {\n    if (/^&gt;(.+)/) {\n        $id = $1;\n    } else {\n        chomp(my $sequence = $_);\n        my $max = -1;\n\n        # run a window of length $width over the sequence\n        foreach my $index (0..length($sequence) - $width - 1) {\n\n            # extract the motif at $index from sequence\n            my $motif = substr($sequence, $index, $width);\n            my $score = $motif_score-&gt;{$motif};\n\n            # update max score if the motif has a higher score\n            if ($score &gt; $max) {\n                $max         = $score;\n                $maxmot{$id} = $motif;\n            }\n        }\n    }\n}\n\nprint Data::Dumper-&gt;Dump([\\%maxmot], [qw(*maxmot)]);\n\nexit 0;\n\n__DATA__\n&gt;Sequence_1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence_2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence_3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ perl dummy.pl\n%maxmot = (\n            'Sequence_2' =&gt; 'TCA',\n            'Sequence_3' =&gt; 'TCG',\n            'Sequence_1' =&gt; 'TCA'\n          );\n</code></pre>\n\n<hr>\n\n<p>As the logscore per motif is a constant, the motif list sorted by logscore order will also be a constant. Given that list we will only have to find the first motif that matches on a given sequence. Hence we can apply the highly optimized regular expression engine on the problem. Depending on your actual problem size this will probably be the more efficient solution:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse List::Util qw(first pairs);\nuse Data::Dumper;\n\nmy $width = 3;\n\nmy %logodds = (\n    A =&gt; [0.1, 0.2, 0.3],\n    C =&gt; [0.2, 0.5, 0.2],\n    G =&gt; [0.3, 0.2, 0.4],\n    T =&gt; [0.4, 0.1, 0.1],\n);\nmy @bases = keys %logodds;\n\n# calculate log score for each motif combination\nmy $motif_logscore = {'' =&gt; 0}; # start with a 0-length motif\nforeach my $offset (0..$width - 1) {\n    my %score;\n\n    # for all motifs...\n    foreach my $prefix (keys %{ $motif_logscore }) {\n        my $base_score = $motif_logscore-&gt;{$prefix};\n\n        # ... add another base to the motif\n        for my $base (@bases) {\n            $score{\"${prefix}${base}\"} = $base_score + $logodds{$base}[$offset];\n        }\n    }\n\n    # update hash ref to new motif scores\n    $motif_logscore = \\%score;\n}\n\n#print Data::Dumper-&gt;Dump([$motif_logscore], [qw(motif_logscore)]);\n\nmy @motifs_sorted =\n    # list of [&lt;motif&gt;, &lt;regular expression&gt;] array refs\n    map    { [$_-&gt;[0], qr/$_-&gt;[0]/] }\n    # sort in descending numerical score order\n    sort   { $b-&gt;[1] cmp $a-&gt;[1] }\n    # list of [&lt;motif&gt;, &lt;score&gt;] array refs\n    pairs %{ $motif_logscore };\n\n#print Data::Dumper-&gt;Dump([\\@motifs_sorted], [qw(*motifs_sorted)]);\n\nmy $id;\nmy %maxmot;\nwhile (&lt;DATA&gt;) {\n    if (/^&gt;(.+)/) {\n        $id = $1;\n    } else {\n        my $sequence = $_;\n        # find the first pair where the regex matches -&gt; store motif\n        $maxmot{$id} = (\n            first { ($sequence =~ $_-&gt;[1])[0] } @motifs_sorted\n        )-&gt;[0];\n    }\n}\n\nprint Data::Dumper-&gt;Dump([\\%maxmot], [qw(*maxmot)]);\n\nexit 0;\n\n__DATA__\n&gt;Sequence_1\nTCAGAACCAGTTATAAATTTATCATTTCCTTCTCCACTCCT\n&gt;Sequence_2\nCCCACGCAGCCGCCCTCCTCCCCGGTCACTGACTGGTCCTG\n&gt;Sequence_3\nTCGACCCTCTGGAACCTATCAGGGACCACAGTCAGCCAGGCAAG\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11106342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac62339ecde321913200cd20f836fd2b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/11106342/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 55439142, "answer_count": 2, "score": 1, "last_activity_date": 1554043835, "creation_date": 1553986597, "question_id": 55436388, "link": "https://stackoverflow.com/questions/55436388/perl-push-character-to-hash-of-array", "title": "Perl: push character to hash of array", "body": "<p>I am calculating log-odds scores of sequences and returning the motif (small section of sequence) that gives the maximum score. I have code that calculates the maximum score for each sequence in my file, and I am having trouble storing the motif that gives that score. See my other post(s) for file format, general calculation of log-odds scores, etc <a href=\"https://stackoverflow.com/questions/55380778/perl-creating-and-manipulating-hash-of-arrays-for-log-odds-scores-of-dna-sequen\">Perl: Creating and manipulating hash of arrays for log-odds scores of DNA sequences</a>. My code is as follows:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'max';\nuse Data::Dumper; \n\n#USER SPECIFICATIONS\n#User specifies motif width\nmy $width = 3;\n\n#User enters the filename that contains the sequence data\nprint \"Please enter the filename of the fasta sequence data: \";\nmy $filename1 = &lt;STDIN&gt;;\n\n#Remove newline from file\nchomp $filename1;\n\n#Open the file and store each dna seq in hash\nmy %id2seq = ();\nmy %HoA = ();\nmy %loscore = ();\nmy %maxscore = ();\nmy %maxmot = ();\nmy $id = '';\nopen (FILE, '&lt;', $filename1) or die \"Cannot open $filename1.\",$!;\nmy $dna;\nwhile (&lt;FILE&gt;)\n{\n    if($_ =~ /^&gt;(.+)/)\n    {\n        $id = $1; #Stores 'Sequence 1' as the first $id, for example\n    }\n    else\n    {\n        $HoA{$id} = [ split(//) ]; #Splits the contents to allow for position reference later\n        $id2seq{$id} .= $_; #Creates a hash with each seq associated to an id number\n        $maxmot{$id} = (); #Creates empty hash to push motifs to\n        foreach $id (keys %HoA)\n        {\n            for my $len (0..(length($HoA{$id})-$width-1))\n            {\n                push @{ $loscore{$id} }, 0;\n            }\n        }\n        push @{ $maxscore{$id} }, -30; #Creates a HoA with each id number to have a maxscore (initial score -30)\n    }\n}\nclose FILE;\n\nforeach $id (keys %id2seq)\n{\n    print \"$id2seq{$id}\\n\\n\";\n}\nprint \"\\n\\n\";\n\n\n\n#EXPECTATION\n#Create log-odds table of motifs\nmy %logodds;\n$logodds{'A'}[0] = 0.1;\n$logodds{'A'}[1] = 0.2;\n$logodds{'A'}[2] = 0.3;\n$logodds{'C'}[0] = 0.2;\n$logodds{'C'}[1] = 0.5;\n$logodds{'C'}[2] = 0.2;\n$logodds{'G'}[0] = 0.3;\n$logodds{'G'}[1] = 0.2;\n$logodds{'G'}[2] = 0.4;\n$logodds{'T'}[0] = 0.4;\n$logodds{'T'}[1] = 0.1;\n$logodds{'T'}[2] = 0.1;\n\n#MAXIMIZATION\n#Determine location for each sequence that maximally\n#aligns to the motif pattern\n\nforeach $id (keys %HoA)\n{   \n    for my $pos1 (0..length($HoA{$id})-$width-1)    #Look through all positions the motif can start at\n    {\n        for my $pos2 ($pos1..$pos1+($width-1))  #Define the positions within the motif (0 to width-1)\n        {           \n            for my $base (qw( A C G T))\n            {\n                if ($HoA{$id}[$pos2] eq $base)  #If the character matches a base:\n                {\n                    for my $pos3 (0..$width-1)  #Used for position reference in %logodds\n                    {\n                        #Calculate the log-odds score at each location\n                        $loscore{$id}[$pos2] += $logodds{$base}[$pos3];\n\n                        #Calculate the maximum log-odds score for each sequence\n\n                        #Find the motif that gives the maximum score for each sequence\n                        $maxscore{$id} = max( @{ $loscore{$id} });\n                        if ($loscore{$id}[$pos2] == $maxscore{$id})\n                        {\n                            push @{ $maxmot{$id} }, $HoA{$id}[$pos3]; #NOT SURE THAT THIS IS THE CORRECT WAY TO PUSH WHAT I WANT\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nprint \"\\n\\n\";\nprint Dumper(\\%maxmot);\n</code></pre>\n\n<p>The expected output for the <code>%maxmot</code> should be something like this:</p>\n\n<p><code>'Sequence 11' =&gt; [ 'C', 'A', 'T'],\n 'Sequence 14' =&gt; ['C', 'T', 'G'], etc.</code></p>\n\n<p>There should be three bases in the expected output because the <code>$width = 3</code>. The output I get gives me multiples of each base, not in any noticeable order (or at least, I cannot notice a pattern):</p>\n\n<p><code>'Sequence 11' =&gt; [ 'C', 'C', 'C', 'A', 'A', 'A', 'A', 'T', 'A', 'A', 'T', 'T', 'T'],\n 'Sequence 14' =&gt; ['C', 'C', 'T', 'T', 'C', 'C', 'T', 'T', 'T', 'T', 'T'], etc.</code>\nI believe the issue is rooted in the <code>push @{ $maxmot{$id} }, $HoA{$id}[$pos3];</code> step, but I'm not quite sure how to fix it. I have tried pushing <code>$HoA{$id}[$pos2]</code> instead, but that does not seem to fix my problem either. As always, any and all help is appreciated! I can clarify if needed, I know my question is a little convoluted. Thank you in advance.</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553976472, "post_id": 55435216, "comment_id": 97587892, "body": "What is the expected content of <code>$results</code>? Note that you are assigning a list to a scalar: <code>$results = $row[0],$row[1],$row[3]</code> which will truncate to the first item of the list, namely <code>$row[0]</code>"}, {"owner": {"reputation": 65, "user_id": 10582377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367efaa6ca1b350b146252193b6237ac?s=128&d=identicon&r=PG&f=1", "display_name": "mich kent", "link": "https://stackoverflow.com/users/10582377/mich-kent"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553977494, "post_id": 55435216, "comment_id": 97588115, "body": "expected content is: name, age, country"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1553977643, "post_id": 55435216, "comment_id": 97588139, "body": "Then you could try to put the variables in double quotes, to interpolate them into a scalar string:  <code>$results = &quot;$row[0], $row[1], $row[3]&quot;;</code>"}, {"owner": {"reputation": 711, "user_id": 8890345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703664448de0eb2b1f67be5775aed66a?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Mills", "link": "https://stackoverflow.com/users/8890345/nathan-mills"}, "edited": false, "score": 0, "creation_date": 1553985033, "post_id": 55435216, "comment_id": 97589787, "body": "You could also use <code>$results = {name =&gt; $row[0], age =&gt; $row[1], country =&gt; $row[3]};</code> to make it a hash reference."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 3, "creation_date": 1554002874, "post_id": 55435216, "comment_id": 97592351, "body": "<code>my ($name, $age, $country) = @row;</code>  Also, there is no <code>$row[3]</code> element."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 8821908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894e38cc9bfb63af70ba1903da9b8f55?s=128&d=identicon&r=PG", "display_name": "shoorick", "link": "https://stackoverflow.com/users/8821908/shoorick"}, "is_accepted": false, "score": 1, "last_activity_date": 1554098692, "creation_date": 1554098692, "answer_id": 55448928, "question_id": 55435216, "link": "https://stackoverflow.com/questions/55435216/select-multiple-rows-using-mysql-in-perl/55448928#55448928", "title": "select multiple rows using MySQL in Perl", "body": "<p><code>Name</code>, <code>age</code> and <code>country</code> aren\u2019t rows \u2014 they are <em>columns</em>.</p>\n\n<p>You can use <a href=\"https://metacpan.org/pod/DBI#selectcol_arrayref\" rel=\"nofollow noreferrer\">selectcol_arrayref</a> to get one column only:</p>\n\n<pre><code>$name_ref = $dbh-&gt;selectcol_arrayref(\n    q{\n        SELECT name\n        FROM tble\n        WHERE me = ?\n    },\n    {},\n    'john'\n);\n</code></pre>\n\n<p>But if you want to get three columns you should use <a href=\"https://metacpan.org/pod/DBI#selectall_arrayref\" rel=\"nofollow noreferrer\">selectall_arrayref</a></p>\n\n<pre><code>my $rows = $dbh-&gt;selectall_arrayref(\n    q{\n        SELECT name, age, country\n        FROM FROM tble\n        WHERE me = ?\n    },\n    { Slice =&gt; {} },\n    'john'\n);\n\nforeach my $row ( @$rows ) {\n    print \"$row-&gt;{'name'} aged $row-&gt;{'age'} from $row-&gt;{'country'}\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1554126248, "creation_date": 1554126248, "answer_id": 55456639, "question_id": 55435216, "link": "https://stackoverflow.com/questions/55435216/select-multiple-rows-using-mysql-in-perl/55456639#55456639", "title": "select multiple rows using MySQL in Perl", "body": "<p>MySQL is a red herring here. You're using DBI correctly, but it goes wrong once you've extracted the data from the database.</p>\n\n<p>Your problem is with this line:</p>\n\n<pre><code>$results = $row[0],$row[1],$row[3];\n</code></pre>\n\n<p>This is very similar to running this code:</p>\n\n<pre><code>$x = 100, 200, 300;\n</code></pre>\n\n<p>If you then print <code>$x</code> you'll see it contains \"100\". You have three items on the right-hand side of your assignment operator and only one variable on the left-hand side, so only one of the values (the first one) ends up assigned to the variable.</p>\n\n<p>I'll add here that if you had <code>use warnings</code> turned on in your code (and all good Perl programmers always have <code>use strict</code> and <code>use warnings</code> turned on) then you would have got a warning about \"useless use of a constant in void context\" which would have indicated that there was something wrong.</p>\n\n<p>There are a couple of approaches you can take to fix this. And which one you choose, depends on what you are trying to do. The obvious solution is to change <code>$results</code> into an array:</p>\n\n<pre><code>@results = ($row[0], $row[1], $row[2]);\n</code></pre>\n\n<p>Notice I've also put parentheses around your list of values. These are required to tell Perl that this is a list assignment. Of course, this is just a complicated way of writing:</p>\n\n<pre><code>@results = @row;\n</code></pre>\n\n<p>The other option is to take your three values and turn them into a single string. This isn't a good choice if you're going to use those values individually elsewhere in your code, but if you just want something to print out, you could write something like:</p>\n\n<pre><code>$results = \"$row[0],$row[1],$row[2]\";\n</code></pre>\n\n<p>Again, there's a simpler way to write this:</p>\n\n<pre><code>$results = join ',', @row;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10582377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367efaa6ca1b350b146252193b6237ac?s=128&d=identicon&r=PG&f=1", "display_name": "mich kent", "link": "https://stackoverflow.com/users/10582377/mich-kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554126248, "creation_date": 1553976008, "question_id": 55435216, "link": "https://stackoverflow.com/questions/55435216/select-multiple-rows-using-mysql-in-perl", "title": "select multiple rows using MySQL in Perl", "body": "<p>am selecting 3 rows from MySQL</p>\n\n<p>but am only getting first one that's - name. i only get name only</p>\n\n<pre><code>$get = $dbh-&gt;prepare(\"select name, age, country from tble where me = ?\");\n$get-&gt;execute('john');\nwhile(my @row = $get-&gt;fetchrow_array){\n     $results = $row[0],$row[1],$row[3];\n  }   \n</code></pre>\n\n<p>am just getting name only no other rows</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553976131, "post_id": 55434056, "comment_id": 97587803, "body": "It works for me if I add an agent, for example: <code>$ua-&gt;agent(&#39;Mozilla&#47;5.0&#39;);</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553984182, "post_id": 55434056, "comment_id": 97589645, "body": "On Linux: without user agent I get <code>403 Forbidden</code>; with user agent I get <code>Content-Type: application&#47;json</code> with a JSON body. Maybe you forgot to install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>? It is not included in the default libwww-perl distro."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553985014, "post_id": 55434056, "comment_id": 97589784, "body": "You can test if it is installed with <code>perl -MLWP::Protocol::https -e 1</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1554012519, "post_id": 55434056, "comment_id": 97593633, "body": "Without <code>LWP::Protocol::https</code> installed I get <code>501 Protocol scheme &#39;https&#39; is not supported</code>. So no-one can reproduce your <code>500</code> response. I guess we need more details."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1553991089, "last_edit_date": 1553991089, "creation_date": 1553990778, "answer_id": 55436740, "question_id": 55434056, "link": "https://stackoverflow.com/questions/55434056/using-keyforge-api-with-perl/55436740#55436740", "title": "Using KeyForge API with Perl", "body": "\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MLWP::UserAgent -e'\n   my $ua = LWP::UserAgent-&gt;new();\n   my $response = $ua-&gt;get(\"https://www.keyforgegame.com/api/decks/\");\n   print $response-&gt;as_string;\n'\nHTTP/1.1 403 Forbidden\n...\nContent-Type: text/html; charset=UTF-8\n...\n\n&lt;!DOCTYPE html&gt;\n...\n&lt;title&gt;Access denied | www.keyforgegame.com used Cloudflare to restrict access&lt;/title&gt;\n...\n            &lt;h2 data-translate=\"what_happened\"&gt;What happened?&lt;/h2&gt;\n            &lt;p&gt;The owner of this website (www.keyforgegame.com) has banned your access based on your browser's signature (4bfe0c0e2e86ab84-ua22).&lt;/p&gt;\n...\n</code></pre>\n\n<p>But,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MLWP::UserAgent -e'\n   use version; our $VERSION = qv(\"v1.0.0\");\n   my $ua = LWP::UserAgent-&gt;new(\n      agent =&gt; \"NameOfTool/$VERSION\",\n      from  =&gt; q{me@example.com},\n   );\n   my $response = $ua-&gt;get(\"https://www.keyforgegame.com/api/decks/\");\n   print $response-&gt;as_string;\n'\nHTTP/1.1 200 OK\n...\nContent-Type: application/json\n...\n\n{\"count\":...\n</code></pre>\n\n<p>If they want to block you, they can. So it's your best interest to provide a unique application name, a proper version and a valid email address (even if providing junk for the <code>agent</code> and leaving out <code>from</code> field works). This gives them more options to resolve any issues they have with your program.</p>\n"}], "owner": {"reputation": 943, "user_id": 1071438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e819cb6b18e8637fa8b102abfd38887a?s=128&d=identicon&r=PG", "display_name": "Stamm", "link": "https://stackoverflow.com/users/1071438/stamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554029880, "creation_date": 1553967537, "last_edit_date": 1554029880, "question_id": 55434056, "link": "https://stackoverflow.com/questions/55434056/using-keyforge-api-with-perl", "title": "Using KeyForge API with Perl", "body": "<p>I'm trying to call the KeyForge API with a simple Perl program but it doesn't work. I'm using what's in the LWP::UserAgent documentation:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent ();\n\nmy $ua = LWP::UserAgent-&gt;new;\n\nmy $response = $ua-&gt;get('https://www.keyforgegame.com/api/decks/');\n\nif ($response-&gt;is_success) {\n    print $response-&gt;decoded_content;\n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n\n<p>The program prints:</p>\n\n<blockquote>\n  <p>500 write failed:  at test.pl line 16.</p>\n</blockquote>\n\n<p>If I use the URL <a href=\"https://www.google.com\" rel=\"nofollow noreferrer\">https://www.google.com</a> or <a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">http://www.example.com</a>, it works. The HTML is correctly displayed.</p>\n\n<p>If I use this simple PowerShell program, it works too:</p>\n\n<pre><code>$Url = \"https://www.keyforgegame.com/api/decks/\"\n$decks = Invoke-RestMethod ($url)\n$decks\n</code></pre>\n\n<p>It displays:</p>\n\n<blockquote>\n  <p>count data</p>\n  \n  <hr>\n  \n  <p>743719 {@{name=Dr. \"The Old\" Jeffries; expansion=341; power_level=0; chains=0; wins=0; losses=0; id=ec86db52-e41e-4e...</p>\n</blockquote>\n\n<p>What am I missing?</p>\n\n<p>PS: I'm using Perl 5.16.3 on Windows 10.</p>\n\n<hr>\n\n<p><strong><em>EDIT:</strong>\nThank you all for your help. I finally found out what was happening. It turns out I had a very old version of Net::HTTP (from 2013). I upgraded it and now it works out of the box, without configuring agent, cookies or e-mail. The error message I had was actually from the client and not from the server.</em></p>\n"}, {"tags": ["regex", "string", "perl", "split", "substitution"], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 5, "last_activity_date": 1553994948, "last_edit_date": 1553994948, "creation_date": 1553960802, "answer_id": 55433105, "question_id": 55432939, "link": "https://stackoverflow.com/questions/55432939/how-to-split-letter-and-digit-apart-of-a-string-in-perl/55433105#55433105", "title": "How to split letter and digit apart of a string in perl?", "body": "<p>You can use a pattern like <code>/(\\d+)/</code> to split the string. </p>\n\n<p>The pattern contains a capturing group; as explained in <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">perldoc split</a>:</p>\n\n<blockquote>\n  <p>If the PATTERN contains capturing groups, then for each separator, an additional field is produced for each substring captured by a group (in the order in which the groups are specified, as per backreferences);</p>\n</blockquote>\n\n<p>Consider:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $string = \"A1BB22CCC333DDDD\";\nmy @result = split /(\\d+)/, $string;\nprint \"$_\\n\" for @result;\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>A\n1\nBB\n22\nCCC\n333\nDDDD\n</code></pre>\n\n<hr>\n\n<p>The above solution will return a leading empty element if the string does start with a digit. To avoid this, you can adapt the expression as follows:</p>\n\n<pre><code>my @result = grep length, split /(\\d+)/, $string;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1553995399, "last_edit_date": 1553995399, "creation_date": 1553993882, "answer_id": 55436957, "question_id": 55432939, "link": "https://stackoverflow.com/questions/55432939/how-to-split-letter-and-digit-apart-of-a-string-in-perl/55436957#55436957", "title": "How to split letter and digit apart of a string in perl?", "body": "<p><strong>Option 1:</strong></p>\n\n<p>There's no need to check how many digits are on each side of the split point, so you could simply replace <code>\\d+</code> with <code>\\d</code> to avoid the error you are getting. But then you'd notice the second problem with your solution: You aren't just splitting between digits and non-digits; you are splitting between two digits as well. Fixed:</p>\n\n<pre><code>my @parts = split /(?&lt;=\\D)(?=\\d)|(?&lt;=\\d)(?=\\D)/, $string;\n</code></pre>\n\n<p><strong>Option 2:</strong></p>\n\n<p>Text captured by the pattern passed to <code>split</code> are returned, giving us an alternative solution using <code>split</code>.</p>\n\n<pre><code>my @parts = grep length, split /(\\d+)/, $string;\n</code></pre>\n\n<p>The <code>grep</code> handles the case where <code>$string</code> starts with a digit.</p>\n\n<p>You get in a situation where you need to fix the output of <code>split</code> like this when the thing on which you are splitting isn't actually a separator. This should tell you that <code>split</code> isn't the appropriate tool in that situation.</p>\n\n<p><strong>Option 3:</strong></p>\n\n<p>A simple regex match will do here.</p>\n\n<pre><code>my @parts = $string =~ /\\d+|\\D+/g;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 11224141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a19ca660416256cdc74712b872ac0cb?s=128&d=identicon&r=PG&f=1", "display_name": "Drektz", "link": "https://stackoverflow.com/users/11224141/drektz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 55433105, "answer_count": 2, "score": 2, "last_activity_date": 1597712202, "creation_date": 1553959658, "last_edit_date": 1597712202, "question_id": 55432939, "link": "https://stackoverflow.com/questions/55432939/how-to-split-letter-and-digit-apart-of-a-string-in-perl", "title": "How to split letter and digit apart of a string in perl?", "body": "<p>Split the string using split() and make an array from that string such that words and numbers are apart.</p>\n<p>I know that lookahead and lookbehind need to be used for zero width splitting and so i used that.</p>\n<pre><code>$string = 'A1BB22CCC333DDDD';\n@string = split(/(?=\\d+)|(?&lt;=\\d+)/,$string);\nprint &quot;@string&quot;;\n</code></pre>\n<p>Expectation:</p>\n<pre><code>A 1 BB 22 CCC 333 DDDD\n</code></pre>\n<p>But results:</p>\n<blockquote>\n<p>Variable length lookbehind not implemented in regex m/(?=\\d+)|(?&lt;=\\d+)/ at jdoodle.pl line 2.</p>\n<p>Command exited with non-zero status 255.</p>\n</blockquote>\n"}, {"tags": ["perl", "concatenation", "record", "paragraph", "slurp"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1553950567, "post_id": 55431437, "comment_id": 97580988, "body": "Please explain what the first script is supposed to do. Some of the comments are wrong, e.g. <code>s&#47;^\\s*\\n&#47;\\n&#47;g; # collapse each all-whitespace line to a single newline</code> is not what it does."}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1553980439, "post_id": 55433094, "comment_id": 97588750, "body": "This captures the output of the try1.pl loop into the lines variable. But what do the last two lines of code accomplish? Inside the same script, is it possible to initiate a new loop with input record separator redefined to undef, to emulate the behavior of try2.pl? In general, is there a way to run two successive while(&lt;&gt;) loops in a single perl script, the result of the first loop feeding into the 2nd?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1553983717, "post_id": 55433094, "comment_id": 97589513, "body": "You could use <a href=\"https://perldoc.perl.org/perlipc.html#Bidirectional-Communication-with-Another-Process\" rel=\"nofollow noreferrer\">pipes</a> but that will involve creating a new process. This is similar to pipes in Bash which also involves sub processes. Also, another alternative: if you transfer your second loop to a script (which you already have in <code>try2.pl</code>) you could use IPC modules like <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a> to pipe output from your script to the other script."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1553983721, "post_id": 55433094, "comment_id": 97589516, "body": "Still, a much simpler approach (which does not require creating new processes) is to let the first loop write to a <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">string buffer</a> and read from that string buffer in the second loop."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "edited": false, "score": 0, "creation_date": 1553983872, "post_id": 55433094, "comment_id": 97589561, "body": "<i>&quot;But what do the last two lines of code accomplish?</i>&quot; They implement the effect of running <code>try2.pl</code> on the output from <code>try1.pl</code>"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1609610802, "post_id": 55433094, "comment_id": 115878342, "body": "Heh, I didn&#39;t read your comments until I finished most of my answer. I showed most of those things."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1553961138, "last_edit_date": 1553961138, "creation_date": 1553960692, "answer_id": 55433094, "question_id": 55431437, "link": "https://stackoverflow.com/questions/55431437/can-one-concatenate-two-perl-scripts-which-use-different-input-record-separators/55433094#55433094", "title": "Can one concatenate two Perl scripts which use different input record separators?", "body": "<p>To combine <code>try1.pl</code> and <code>try2.pl</code> into a single script you could try:</p>\n\n<pre><code>local $/ = \"\";\nmy @lines;\nwhile (&lt;&gt;) {\n    [...]    # Same code as in try1.pl except print statements\n    push @lines, $_;\n}\n\n$lines[-1] =~ s/\\n+$/\\n/;\nprint for @lines;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1609609681, "post_id": 55555518, "comment_id": 115877966, "body": "I disagree with the notion that the contents of a single file are easier to maintain. It&#39;s more code to look at. I&#39;m much more comfortable having two small programs in a repo. The repo keeps both around and once I setup a build file, I don&#39;t think about it again."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1609609897, "post_id": 55555518, "comment_id": 115878026, "body": "Also, since most of the beginning of the program is a mess of system calls, this is practically crying for a build file that&#39;s outside of the Perl program."}], "tags": [], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "is_accepted": false, "score": 0, "last_activity_date": 1609551453, "last_edit_date": 1609551453, "creation_date": 1554609808, "answer_id": 55555518, "question_id": 55431437, "link": "https://stackoverflow.com/questions/55431437/can-one-concatenate-two-perl-scripts-which-use-different-input-record-separators/55555518#55555518", "title": "Can one concatenate two Perl scripts which use different input record separators?", "body": "<p>The motivating problem was to generate a &quot;cleaned&quot; version of a LaTeX file, which would be easy to search, using regex, for complex phrases or sentences.</p>\n<p>The following single Perl script does the job, whereas previously I required one shell script and two Perl scripts, entailing three invocations of Perl. This new, single script incorporates three consecutive loops, each with a different input record separator.</p>\n<ol>\n<li><p>First loop:</p>\n<p>input = STDIN, or a file passed as argument; record separator=default, loop by line; print result to fileafterperlLIN, a temporary <br/>\nfile on the hard drive.</p>\n</li>\n<li><p>Second loop:</p>\n<p>input = fileafterperlLIN; <br/>\nrecord separator = &quot;&quot;, loop by paragraph; <br/>\nprint result to fileafterperlPRG, a temporary file on the hard drive.</p>\n</li>\n<li><p>Third loop:</p>\n<p>input = fileafterperlPRG; <br/>\nrecord separator = undef, slurp entire file <br/>\nprint result to STDOUT</p>\n</li>\n</ol>\n<p>This has the <strong>disadvantage</strong> of printing to and reading from two files on the hard drive, which may slow it down. <strong>Advantages</strong> are that the operation seems to require only one process; and all the code resides in a single file, which should make it easier to maintain.</p>\n<pre><code>#!/usr/bin/perl\n# 2019v04v05vFriv17h18m41s\n\nuse strict;\nuse warnings;\nuse 5.18.2;\n\nmy $diagnose;\nmy $diagnosticstring;\nmy $exitcode;\nmy $userName =  $ENV{'LOGNAME'};\nmy $scriptpath;\nmy $scriptname;\nmy $scriptdirectory;\nmy $cdld;\nmy $fileafterperlLIN;\nmy $fileafterperlPRG;\nmy $handlefileafterperlLIN;\nmy $handlefileafterperlPRG;\nmy $encoding;\nmy $count;\n\nsub diagnosticmessage {\n    return unless ( $diagnose );\n    print STDERR &quot;$scriptname: &quot;;\n    foreach $diagnosticstring (@_) {\n        printf STDERR &quot;$diagnosticstring\\n&quot;;\n    }\n}\n\n# Routine setup\n$scriptpath = $0;\n$scriptname = $scriptpath;\n$scriptname =~ s|.*\\x2f([^\\x2f]+)$|$1|;\n$cdld = &quot;$ENV{'cdld'}&quot;; # A directory to hold temporary files used by scripts\n$exitcode = system(&quot;test -d $cdld &amp;&amp; test -w $cdld || { printf '%\\n' 'cdld not a writeable directory'; exit 1; }&quot;);\ndie &quot;$scriptname: system returned exitcode=$exitcode: bail\\n&quot; unless $exitcode == 0;\n\n$scriptdirectory = &quot;$cdld/$scriptname&quot;; # To hold temporary files used by this script\n$exitcode = system(&quot;test -d $scriptdirectory || mkdir $scriptdirectory&quot;);\ndie &quot;$scriptname: system returned exitcode=$exitcode: bail\\n&quot; unless $exitcode == 0;\ndiagnosticmessage ( &quot;scriptdirectory=$scriptdirectory&quot; );\n$exitcode = system(&quot;test -w $scriptdirectory &amp;&amp; test -x $scriptdirectory || exit 1;&quot;);\ndie &quot;$scriptname: system returned exitcode=$exitcode: $scriptdirectory not writeable or not executable. bail\\n&quot; unless $exitcode == 0;\n$fileafterperlLIN = &quot;$scriptdirectory/afterperlLIN.tex&quot;;\ndiagnosticmessage ( &quot;fileafterperlLIN=$fileafterperlLIN&quot; );\n$exitcode = system(&quot;printf '' &gt; $fileafterperlLIN;&quot;);\ndie &quot;$scriptname: system returned exitcode=$exitcode: bail\\n&quot; unless $exitcode == 0;\n$fileafterperlPRG = &quot;$scriptdirectory/afterperlPRG.tex&quot;;\ndiagnosticmessage ( &quot;fileafterperlPRG=$fileafterperlPRG&quot; );\n$exitcode=system(&quot;printf '' &gt; $fileafterperlPRG;&quot;);\ndie &quot;$scriptname: system returned exitcode=$exitcode: bail\\n&quot; unless $exitcode == 0;\n\n# This script's job: starting with a LaTeX file, which may compile beautifully in pdflatex but be difficult\n# to read visually or search automatically,\n# (1) convert any line that looks blank --- a &quot;trivial line&quot;, containing only whitespace --- to a pure newline. This is because\n#     (a) LaTeX interprets any whitespace line following a non-blank or &quot;nontrivial&quot; line as end of paragraph, whereas\n#     (b) Perl needs two consecutive newlines to signal end of paragraph.\n# (2) remove all LaTeX comments;\n# (3) deal with the \\unskip LaTeX construct, etc.\n# The result will be\n# (4) each LaTeX paragraph will occupy a unique line\n# (5) exactly one pair of newlines --- visually, one blank line --- will divide each pair of consecutive paragraphs\n# (6) first paragraph will be on first line (no opening blank line) and last paragraph will be on last line (no ending blank line)\n# (7) whitespace in output will consist of only\n#     (a) a single space between readable strings, or\n#     (b) double newline between paragraphs\n#\n$handlefileafterperlLIN = undef;\n$handlefileafterperlPRG = undef;\n$encoding = &quot;:encoding(UTF-8)&quot;;\ndiagnosticmessage ( &quot;fileafterperlLIN=$fileafterperlLIN&quot; );\nopen($handlefileafterperlLIN, &quot;&gt;&gt; $encoding&quot;, $fileafterperlLIN) || die &quot;$0: can't open $fileafterperlLIN for appending: $!&quot;;\n\n# Loop 1 / line:\n# Default input record separator: loop through one line at a time, delimited by \\n\n$count = 0;\nwhile (&lt;&gt;) {\n    $count = $count + 1;\n    diagnosticmessage ( &quot;line $count&quot; );\n    s/^\\s*\\n/\\n/mg; # Convert any trivial line to a pure newline.\n    print $handlefileafterperlLIN $_;\n}\n\nclose($handlefileafterperlLIN);\nopen($handlefileafterperlLIN, &quot;&lt; $encoding&quot;, $fileafterperlLIN) || die &quot;$0: can't open $fileafterperlLIN for reading: $!&quot;;\nopen($handlefileafterperlPRG, &quot;&gt;&gt; $encoding&quot;, $fileafterperlPRG) || die &quot;$0: can't open $fileafterperlPRG for appending: $!&quot;;\n\n# Loop PRG / paragraph:\nlocal $/ = &quot;&quot;; # Input record separator: loop through one paragraph at a time. position marker $ comes only at end of paragraph.\n$count = 0;\nwhile (&lt;$handlefileafterperlLIN&gt;) {\n    $count = $count + 1;\n    diagnosticmessage ( &quot;paragraph $count&quot; );\n    s/(?&lt;!\\x5c)[\\x25].*\\n/ /g; # Remove all LaTeX comments.\n    #    They start with % not \\% and extend to end of line or newline character. Join to next line.\n    #    s/(?&lt;!\\x5c)([\\x24])/\\x2a/g; # 2019v04v01vMonv13h44m09s any $ not preceded by backslash \\, replace $ by * or something.\n    #    This would be only if we are going to run detex on the output.\n    s/(.)\\n/$1 /g; # Any line that has something other than newline, and then a newline, is joined to the subsequent line\n    s|([^\\x2d])\\s*(\\x2d\\x2d\\x2d)([^\\x2d])|$1 $2$3|g; # consistent treatment of triple hyphen as em dash\n    s|([^\\x2d])(\\x2d\\x2d\\x2d)\\s*([^\\x2d])|$1$2 $3|g; # consistent treatment of triple hyphen as em dash, continued\n    s/[\\x0b\\x09\\x0c\\x20]+/ /gm; # collapse each &quot;run&quot; of whitespace other than newline, to a single space.\n    s/\\s*[\\x5c]unskip(\\x7b\\x7d)?\\s*(\\S)/$2/g; # LaTeX whitespace-collapse across newlines\n    s/^\\s*//; # Any nontrivial line: No indenting. No whitespace in first column.\n    print $handlefileafterperlPRG $_;\n    print $handlefileafterperlPRG &quot;\\n\\n&quot;; # make sure each paragraph ends with 2 newlines, hence at least 1 blank line.\n}\nclose($handlefileafterperlPRG);\n\nopen($handlefileafterperlPRG, &quot;&lt; $encoding&quot;, $fileafterperlPRG) || die &quot;$0: can't open $fileafterperlPRG for reading: $!&quot;;\n\n# Loop slurp\nlocal $/ = undef;  # Input record separator: entire file is a single record.\n$count = 0;\nwhile (&lt;$handlefileafterperlPRG&gt;) {\n    $count = $count + 1;\n    diagnosticmessage ( &quot;slurp $count&quot; );\n    s/[\\n][\\n]+/\\n\\n/g;  # Exactly 2 blank lines (newlines) separate paragraphs. Like cat -s\n    s/[\\n]+$/\\n/;        # Last line is visible or &quot;nontrivial&quot;; no trivial (blank) line at the end\n    s/^[\\n]+//;          # No trivial (blank) line at the start. The first line is &quot;nontrivial.&quot;\n    print STDOUT;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1609610716, "last_edit_date": 1609610716, "creation_date": 1609609423, "answer_id": 65542189, "question_id": 55431437, "link": "https://stackoverflow.com/questions/55431437/can-one-concatenate-two-perl-scripts-which-use-different-input-record-separators/65542189#65542189", "title": "Can one concatenate two Perl scripts which use different input record separators?", "body": "<p>A pipe connects the output of one process to the input of another process. Neither one knows about the other nor cares how it operates.</p>\n<p>But, putting things together like this breaks the Unix pipeline philosophy of small tools that each excel at a very narrow job. Should you link these two things, you'll always have to do both tasks even if you want one (although you could get into configuration to turn off one, but that's a lot of work).</p>\n<p>I process a lot of LaTeX, and I control everything through a <em>Makefile</em>. I don't really care about what the commands look like and I don't even have to remember what they are:</p>\n<pre><code>short-clean.tex: short.tex\n    cat short.tex | try1.pl | try2.pl &gt; $@\n</code></pre>\n<h2>Let's do it anyways</h2>\n<p>I'll limit myself to the constraint of basic concatenation instead of complete rewriting or rearranging, most because there are some interesting things to show.</p>\n<p>Consider what happens should you concatenate those two programs by simply adding the text of the second program at the end of the text of the first program.</p>\n<ul>\n<li><p>The output from the original first program still goes to standard output and the second program now doesn't get that output as input.</p>\n</li>\n<li><p>The input to the program is likely exhausted by the original first program and the second program now has nothing to read. That's fine because it would have read the unprocessed input to the first program.</p>\n</li>\n</ul>\n<p>There are various ways to fix this, but none of them make much sense when you already have two working program that do their job. I'd shove that in the <em>Makefile</em> and forget about it.</p>\n<p>But, suppose you do want it all in one file.</p>\n<ul>\n<li><p>Rewrite the first section to send its output to a filehandle connected to a string. It's output is now in the programs memory. This basically uses the same interface, and you can even use <code>select</code> to make that the default filehandle.</p>\n</li>\n<li><p>Rewrite the second section to read from a filehandle connected to that string.</p>\n</li>\n</ul>\n<p>Alternately, you can do the same thing by writing to a temporary file in the first part, then reading that temporary file in the second part.</p>\n<p>A much more sophisticated program would the first program write to a pipe (inside the program) that the second program is simultaneously reading. However, you have to pretty much rewrite everything so the two programs are happening simultaneously.</p>\n<p>Here's Program 1, which uppercases most of the letters:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n$|++;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print tr/a-z/A-Z/r;\n    }\n</code></pre>\n<p>and here's Program 2, which collapses whitespace:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n$|++;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print s/\\s+/ /gr;\n    }\n</code></pre>\n<p>They work serially to get the job done:</p>\n<pre><code>$ perl program1.pl\nThe quick brown dog jumped over the lazy fox.\nTHE QUICK BROWN DOG JUMPED OVER THE LAZY FOX.\n^D\n\n$ perl program2.pl\nThe quick     brown dog jumped        over the lazy fox.\nThe quick brown dog jumped over the lazy fox.\n^D\n\n$ perl program1.pl | perl program2.pl\nThe quick     brown dog jumped        over the lazy fox.\nTHE QUICK BROWN DOG JUMPED OVER THE LAZY FOX.\n^D\n</code></pre>\n<p>Now I want to combine those. First, I'll make some changes that don't affect the operation but will make it easier for me later. Instead of using implicit filehandles, I'll make those explicit and one level removed from the actual filehandles:</p>\n<p>Program 1:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n$|++;\nmy $output_fh = \\*STDOUT;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print { $output_fh } tr/a-z/A-Z/r;\n    }\n</code></pre>\n<p>Program 2:</p>\n<pre><code>#!/usr/bin/perl\n$|++;\nmy $input_fh = \\*STDIN;\nwhile( &lt;$input_fh&gt; ) { # safer line input operator\n    print s/\\s+/ /gr;\n    }\n</code></pre>\n<p>Now I have the chance to change what those filehandles are without disturbing the meat of the program. The <code>while</code> doesn't know or care what that filehandle is, so let's start by writing to a file in Program 1 and reading from that same file in Program 2:</p>\n<p>Program 1:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\nopen my $output_fh, '&gt;', 'program1.out' or die &quot;$!&quot;;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print { $output_fh } tr/a-z/A-Z/r;\n    }\nclose $output_fh;\n</code></pre>\n<p>Program 2:</p>\n<pre><code>#!/usr/bin/perl\n$|++;\nopen my $input_fh, '&lt;', 'program1.out' or die &quot;$!&quot;;\nwhile( &lt;$input_fh&gt; ) { # safer line input operator\n    print s/\\h+/ /gr;\n    }\n</code></pre>\n<p>However, you can no longer run these in a pipeline because Program 1 doesn't use standard output and Program 2 doesn't read standard input:</p>\n<pre><code>% perl program1.pl\n% perl program2.pl\n</code></pre>\n<p>You can, however, now join the programs, shebang and all:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n\nopen my $output_fh, '&gt;', 'program1.out' or die &quot;$!&quot;;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print { $output_fh } tr/a-z/A-Z/r;\n    }\nclose $output_fh;\n\n#!/usr/bin/perl\n$|++;\nopen my $input_fh, '&lt;', 'program1.out' or die &quot;$!&quot;;\nwhile( &lt;$input_fh&gt; ) { # safer line input operator\n    print s/\\h+/ /gr;\n    }\n</code></pre>\n<p>You can skip the file and use a string instead, but at this point, you've gone beyond merely concatenating files and need a little coordination for them to share the scalar with the data. Still, the meat of the program doesn't care how you made those filehandles:</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n\nmy $output_string;\n\nopen my $output_fh, '&gt;', \\ $output_string or die &quot;$!&quot;;\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print { $output_fh } tr/a-z/A-Z/r;\n    }\nclose $output_fh;\n\n#!/usr/bin/perl\n$|++;\nopen my $input_fh, '&lt;', \\ $output_string or die &quot;$!&quot;;\nwhile( &lt;$input_fh&gt; ) { # safer line input operator\n    print s/\\h+/ /gr;\n    }\n</code></pre>\n<p>So let's go one step further and do what the shell was already doing for us.</p>\n<pre><code>#!/usr/bin/perl\nuse v5.26;\n\npipe my $input_fh, my $output_fh;\n$output_fh-&gt;autoflush(1);\n\nwhile( &lt;&lt;&gt;&gt; ) { # safer line input operator\n    print { $output_fh } tr/a-z/A-Z/r;\n    }\nclose $output_fh;\n\nwhile( &lt;$input_fh&gt; ) { # safer line input operator\n    print s/\\h+/ /gr;\n    }\n</code></pre>\n<p>From here, it gets a bit tricky and I'm not going to go to the next step with polling filehandles so one thing can write and the the next thing reads. There are plenty of things that do that for you. And, you're now doing a lot of work to avoid something that was already simple and working.</p>\n<p>Instead of all that pipe nonsense, the next step is to separate code into functions (likely in a library), and deal with those chunks of code as named things that hide their details:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Local::Util qw(remove_comments minify);\n\nwhile( &lt;&lt;&gt;&gt; ) {\n    my $result = remove_comments($_);\n    $result = minify( $result );\n    ...\n    }\n</code></pre>\n<p>That can get even fancier where you simply go through a series of steps without knowing what they are or how many of them there will be. And, since all the baby steps are separate and independent, you're basically back to the pipeline notion:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Local::Util qw(get_input remove_comments minify);\n\nmy $result;\nmy @steps = qw(get_input remove_comments minify)\nwhile( ! eof() ) {  # or whatever\n    no strict 'refs'\n    $result = &amp;{$_}( $result ) for @steps;\n    }\n</code></pre>\n<p>A better way makes that an object so you can skip the soft reference:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Local::Processor;\n\nmy @steps = qw(get_input remove_comments minify);\nmy $processer = Local::Processor-&gt;new( @steps );\n\nmy $result;\nwhile( ! eof() ) {  # or whatever\n    $result = $processor-&gt;$_($result) for @steps;\n    }\n</code></pre>\n<p>Like I did before, the meat of the program doesn't care or know about the steps ahead of time. That means that you can move the sequence of steps to configuration and use the same program for any combination and sequence:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use Local::Config;\nuse Local::Processor;\n\nmy @steps = Local::Config-&gt;new-&gt;get_steps;\nmy $processer = Local::Processor-&gt;new;\n\nmy $result;\nwhile( ! eof() ) {  # or whatever\n    $result = $processor-&gt;$_($result) for @steps;\n    }\n</code></pre>\n<p>I write quite a bit about this sort of stuff in <a href=\"https://www.masteringperl.org\" rel=\"nofollow noreferrer\">Mastering Perl</a> and <a href=\"https://www.effectiveperlprogramming.com\" rel=\"nofollow noreferrer\">Effective Perl Programming</a>. But, because you can do it doesn't mean you should. This reinvents a lot that <em>make</em> can already do for you. I don't do this sort of thing without good reason\u2014<code>bash</code> and <code>make</code> have to be pretty annoying to motivate me to go this far.</p>\n"}], "owner": {"reputation": 914, "user_id": 1461307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zhYSU.png?s=128&g=1", "display_name": "Jacob Wegelin", "link": "https://stackoverflow.com/users/1461307/jacob-wegelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1609610716, "creation_date": 1553948958, "last_edit_date": 1609605763, "question_id": 55431437, "link": "https://stackoverflow.com/questions/55431437/can-one-concatenate-two-perl-scripts-which-use-different-input-record-separators", "title": "Can one concatenate two Perl scripts which use different input record separators?", "body": "<p>Two Perl scripts, using different input record separators, work together to convert a LaTeX file into something easily searched for human-readable phrases and sentences. Of course, they could be wrapped together by a single shell script. But I am curious whether they can be incorporated into a single Perl script.</p>\n<p>The reason for these scripts: It would be a hassle to find &quot;two three&quot; inside short.tex, for instance. But after conversion, grep 'two three' will return the first paragraph.</p>\n<p>For any LaTeX file (here, short.tex), the scripts are invoked as follows.</p>\n<pre><code>cat short.tex | try1.pl | try2.pl\n</code></pre>\n<p>try1.pl works on paragraphs. It gets rid of LaTeX comments. It makes sure that each word is separated from its neighbors by a single space, so that no sneaky tabs, form feeds, etc., lurk between words. The resulting paragraph occupies a single line, consisting of visible characters separated by single spaces --- and at the end, a sequence of at least two newlines.</p>\n<p>try2.pl slurps the entire file. It makes sure that paragraphs are separated from each other by exactly two newlines. And it ensures that the last line of the file is non-trivial, containing visible character(s).</p>\n<p>Can one elegantly concatenate two operations such as these, which depend on different input record separators, into a single Perl script, say big.pl? For instance, could the work of try1.pl and try2.pl be accomplished by two functions or bracketed segments inside the larger script?</p>\n<p><sub>Incidentally, is there a Stack Overflow keyword for &quot;input record separator&quot;?</sub></p>\n<p>###File <em>try1.pl</em>:</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.18.2;\nlocal $/ = &quot;&quot;; # input record separator: loop through one paragraph at a time. position marker $ comes only at end of paragraph.\nwhile (&lt;&gt;) {\n    s/[\\x25].*\\n/ /g; # remove all LaTeX comments. They start with %\n    s/[\\t\\f\\r ]+/ /g; # collapse each &quot;run&quot; of whitespace to one single space\n    s/^\\s*\\n/\\n/g; # any line that looks blank is converted to a pure newline;\n    s/(.)\\n/$1/g; # Any line that does not look blank is joined to the subsequent line\n    print;\n    print &quot;\\n\\n&quot;; # make sure each paragraph is separated from its fellows by newlines\n}\n</code></pre>\n<p>###File <em>try2.pl</em>:</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.18.2;\nlocal $/ = undef; # input record separator: entire text or file is a single record.\nwhile (&lt;&gt;) {\n    s/[\\n][\\n]+/\\n\\n/g;    # exactly 2 blank lines separate paragraphs. Like cat -s\n    s/[\\n]+$/\\n/; # last line is nontrivial; no blank line at the end\n    print;\n}\n</code></pre>\n<p>###File <em>short.tex</em>:</p>\n<pre><code>\\paragraph{One}\n% comment\ntwo % also 2\nthree % or 3\n\n% comment\n% comment\n\n% comment\n% comment\n\n% comment\n\n% comment\n\nSo they said%\nthat they had done it.\n\n% comment\n% comment\n% comment\n\n\n\n\n\nFleas.\n\n% comment\n\n% comment\n\n\n\n\n</code></pre>\n<p>After conversion:</p>\n<pre><code>\\paragraph{One} two three\n\nSo they said that they had done it.\n\nFleas.\n</code></pre>\n"}, {"tags": ["file", "perl", "file-io"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1553949565, "post_id": 55431426, "comment_id": 97580715, "body": "Check <a href=\"https://perldoc.perl.org/perlform.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlform.html</a>"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553959325, "post_id": 55431426, "comment_id": 97583399, "body": "Or alternatively, you could do something like <code>printf &quot;%10s %5d %20s&quot;</code> (adapt fields width as needed) if you have an upper bound on the size of the elements (and if you don&#39;t, <code>%*s</code> might be the solution)"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1554121913, "post_id": 55431631, "comment_id": 97623668, "body": "@Jack: Please <a href=\"https://stackoverflow.com/posts/55431426/edit\">update your question</a> to add details of what you have now tried and (most importantly) the <b>exact text</b> of the error message you&#39;re getting. Just saying &quot;it&#39;s not working&quot; and &quot;I got an error&quot; is really not very helpful."}], "tags": [], "owner": {"reputation": 2349, "user_id": 6794384, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153707640356246/picture?type=large", "display_name": "drclaw", "link": "https://stackoverflow.com/users/6794384/drclaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1553950441, "creation_date": 1553950441, "answer_id": 55431631, "question_id": 55431426, "link": "https://stackoverflow.com/questions/55431426/how-can-i-put-everything-in-one-line/55431631#55431631", "title": "How can I put everything in one line?", "body": "<p>Almost looks like the <code>$gif_nums</code> and <code>$html_nums</code> variables are probably strings with a newline instead of numbers, hence why it is spreading one <code>print</code> statement over two lines.</p>\n\n<p>Use the <code>chomp</code> function to remove the newline from your variables would be a good start.</p>\n"}], "owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553950441, "creation_date": 1553948872, "question_id": 55431426, "link": "https://stackoverflow.com/questions/55431426/how-can-i-put-everything-in-one-line", "title": "How can I put everything in one line?", "body": "<p>This is my code:</p>\n\n<pre><code> open(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\n  print $fh \"GIF files: \\t$gif_nums(Number of files) file(s) $gif_sizes(File size) bytes\\n\";\n  print $fh \"HTML files: \\t$html_nums file(s) $html_sizes bytes\\n\";\n  print $fh \"Total: $total_nums file(s) $total_sizes bytes\\n\";\n  close $fh;\n</code></pre>\n\n<p>MY output is comming like this:</p>\n\n<pre><code>GIF files: 1\n file(s) 48835 bytes\nHTML files: 1\n file(s) 260 bytes\nTotal: 2 file(s) 49095 bytes\n</code></pre>\n\n<p>I want output like this :</p>\n\n<pre><code>GIF files:   1    file(s) 48835 bytes\nHTML files:  1    file(s) 260 bytes\nTotal:       2    file(s) 49095 bytes\n</code></pre>\n\n<p>How can I get this type of output in Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1553874686, "post_id": 55420550, "comment_id": 97561497, "body": "Please, read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. You have been asking a lot of questions lately, and it&#39;s hard to help you when we can&#39;t run your code. Here for instance, we have to guess how is <code>$fi</code> initialized, and whether you forgot to copy/past the increment of <code>$row_no</code> or not... If you want us to spend time helping you, then spend time writing good questions."}, {"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553875646, "post_id": 55420550, "comment_id": 97562022, "body": "I am creating these codes depicting my requirement from the actual code by filtering all  the confidential details but trying maintaining the soul of the problem. While doing so I may miss some information(although I have cross checked the question before posting ;) ). Anyways thanks for mentioning the requirement. I have edited the code please look into it now-@Dada"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1553876577, "post_id": 55420550, "comment_id": 97562496, "body": "Perhaps move the 2 statements <code>$trace++;</code> out of the <code>if($_)</code> clause and put 1 at the bottom of the <code>foreach (@fuse_data_type_initial) </code> loop?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553876977, "post_id": 55420550, "comment_id": 97562677, "body": "Your code looks for <code>Extra Fuse</code> but I assume that it corresponds to <code>Extra 1&#47;2</code> in the csv you provided. The point of an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> is precisely that <i>you</i> should provide us with a <i>verifiable</i> example. Also, what are supposed to be <code>@column_no_for_fuse_value</code>, <code>@fuse_names</code>, <code>@fuse_data_type</code> and <code>@extra_fuse_data_type</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1553881034, "post_id": 55421952, "comment_id": 97564690, "body": "I cannot emphasize enough that Text::CSV(_XS) should be used instead. <a href=\"http://thomasburette.com/blog/2014/05/25/so-you-want-to-write-your-own-CSV-code/\" rel=\"nofollow noreferrer\">thomasburette.com/blog/2014/05/25/&hellip;</a>"}, {"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1553882909, "post_id": 55421952, "comment_id": 97565587, "body": "Thanks for such an explanatory and concise answer.It is exactly fulfilling my requirement. Thank you for investing your time-@Dada"}, {"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1554021747, "post_id": 55421952, "comment_id": 97595085, "body": "Can you please look into the edits that I have added to the question. Following your exact code when I am changing 2nd row I am not getting the expected result. Can you please look into it and tell me why it is happening and what is the workaraound-@Dada"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1554024116, "post_id": 55421952, "comment_id": 97595539, "body": "@rikki Indeed, my bad, it&#39;s fixed. I overlooked the fact that <code>split</code> removes trailing empty fields by default. Two fixes possible: use <code>-1</code> (or any negative number) as last argument to <code>split</code> (which causes <code>split</code> to not remove trailing empty fields), or iterate over <code>@headers</code> rather than <code>@filter</code>: <code>for my $i (0 .. $#headers)</code> (but this could suffer from the same issues if the last headers are empty)."}, {"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1554024923, "post_id": 55421952, "comment_id": 97595731, "body": "Hi its working fine now. I have marked your answer as accepted. Thanks a lot for helping-@ Dada"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 6, "last_activity_date": 1554023927, "last_edit_date": 1554023927, "creation_date": 1553877765, "answer_id": 55421952, "question_id": 55420550, "link": "https://stackoverflow.com/questions/55420550/undef-values-from-csv-file-giving-undesirable-result/55421952#55421952", "title": "Undef values from CSV file giving undesirable result", "body": "<p>Your code is pretty bad for several reasons. Instead of trying to fix them, which would leave you with a bad-but-working code, I'm going to point them out, and suggest a better way.</p>\n\n<ul>\n<li><p>You first <code>while(my $row = &lt;$fi&gt;)</code> iterates over the whole file when you are only interested in the first two rows. You should just use <code>&lt;$fi&gt;</code> twice to read the first two lines:</p>\n\n<pre><code>my $headers = &lt;$fi&gt;;\nmy $filters = &lt;$fi&gt;;\n</code></pre></li>\n<li><p>You shouldn't duplicate code. In particular, you wrote twice</p>\n\n<pre><code>chomp($row);\n$row=~ s/\\A\\s+//g;\n$row=~s/\\R//g;\n</code></pre>\n\n<p>Whereas you could have put that only once at the beginning of the while.</p></li>\n<li><p>Same thing for <code>$trace++</code>: you want it done at every iteration of your <code>foreach</code> loop; there is no reason to put it in at the end of the <code>if</code> and at the end of the <code>else</code>.</p></li>\n<li><p><strong>always</strong> <code>use strict</code> and <code>use warnings</code>.</p></li>\n</ul>\n\n<hr>\n\n<p>Here is what I suggest instead:</p>\n\n<pre><code>use strict;  # Always use strict and warnings!\nuse warnings;\n\nmy $iniFilename = \"Sample.csv\";\nopen(my $fi,'&lt;',$iniFilename) or die \"Can't open $iniFilename\";\n\nmy @headers = split ',', &lt;$fi&gt; =~ s/\\A\\s+|\\s+\\Z//gr, -1;\nmy @filter  = split ',', &lt;$fi&gt; =~ s/\\A\\s+|\\s+\\Z//gr, -1;\nfor my $i (0 .. $#filter) {\n    $headers[$i] = undef if !$filter[$i] || $filter[$i] eq \"\" ;\n}\n# @headers now contains (undef, \"Memory\", undef, \"Extra 1\", \"Extra 2\")\n</code></pre>\n\n<p>If you need the index of <code>@headers</code> that are not <code>undef</code>:</p>\n\n<pre><code>my @headers_indices = grep { defined $headers[$_] } 0 .. $#headers;\n</code></pre>\n\n<p>If you need just the names of the non-undef headers:</p>\n\n<pre><code>my @non_undef_headers = grep { defined $_ } @headers;\n</code></pre>\n\n<hr>\n\n<p>Finally, since you are parsing CSV files, you might want to use a CSV parser (<a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> for example), rather than <code>split /,/</code>. (the latter will misbehave with quoted fields containing commas or newlines (and probably has other issues that I'm not thinking about right now))</p>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 55421952, "answer_count": 1, "score": 0, "last_activity_date": 1554023927, "creation_date": 1553872660, "last_edit_date": 1554021626, "question_id": 55420550, "link": "https://stackoverflow.com/questions/55420550/undef-values-from-csv-file-giving-undesirable-result", "title": "Undef values from CSV file giving undesirable result", "body": "<p>I am having a CSV file Sample.csv like below named </p>\n\n<pre><code>    Name,Memory,Encoding,Extra 1,Extra 2\n    ,d,,h,b\n    FUSE_1,36,30,37,15\n    FUSE_1,36,28,36,31\n    Name1,1TB,00000001,30,010\n    Name1,1TB,00000010,52,001\n</code></pre>\n\n<p>I am parsing this file and want to retrieve some values from the file. What I want is Only those names from the first row for which corresponding value is present in 2nd row. Means I want to get Memory,Extra 1 and Extra 2 as corresponding value is present in 2nd row (d,h and b). For which What I am doing is I am storing the values of both the rows in separate arrays and then I am traversing the array for 2nd row and the indexes corresponding to which value is present in this that corresponding index value I am taking from 1st array and storing it in second array.The code which I am using is-</p>\n\n<pre><code>my $iniFilename = \"Sample.csv\";\nopen(my $fi,'&lt;',$iniFilename) or die \"Can't open $iniFilename\";\nwhile(my $row=&lt;$fi&gt;){\nif($row_no == 0)\n{\n    chomp($row);\n    $row=~ s/\\A\\s+//g;\n    $row=~s/\\R//g;\n    if(length($row))\n    {\n        @fuse_name_initial = split(/,/,$row);\n    }\n}\n    elsif($row_no == 1)\n    {\n        chomp($row);\n        $row=~ s/\\A\\s+//g;\n        $row=~s/\\R//g;\n        if(length($row)){\n        @fuse_data_type_initial =split(/,/,$row);\n        }\n    }\n    $row_no++;\n}\nmy $trace=0;\nforeach (@fuse_data_type_initial)\n{\n    if($_)\n    {\n        if($fuse_name_initial[$trace] !~ /Extra Fuse/){\n            push @column_no_for_fuse_value,($trace+1);\n            push @fuse_names , $fuse_name_initial[$trace];\n            push @fuse_data_type ,$_ ;\n            $trace++;\n        }\n        else{\n            push @extra_fuse_data_type ,$_ ;\n            $trace++;\n        }\n    }\n }\n</code></pre>\n\n<p>Now I am expecting the @fuse_names array to reflect names \"Memory\" as \"Extra Fuse1\" and \"Extra Fuse2\" is filtered out using regex but instead I am getting very bad result. I am getting three elements in the @fuse_names- Name,Memory,Encoding . Can Somebody please tell me What I am doing wrong in the code??</p>\n\n<blockquote>\n  <blockquote>\n    <p>EDIT : When I am changing 2nd row to \",d,,,\" and following @Dada method then it should only take \"Memory\" from 1st row but instead it is taking everything after memory i.e Memory,Encoding,Extra Fuse1,Extra Fuse2</p>\n  </blockquote>\n</blockquote>\n\n<p>And then I printed the length of @filter array.It should ideally be 5 with 1 defined value and 4 other undef value but strangely the length of @filter came out to be 2. It is really Confusing.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1553870482, "post_id": 55419772, "comment_id": 97558808, "body": "Maybe <a href=\"https://www.perlmonks.org\" rel=\"nofollow noreferrer\">PerlMonks</a> can answer the question? If you decide to post there, don&#39;t forget to announce crossposting to prevent unnecessary work."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 1, "creation_date": 1553871756, "post_id": 55419772, "comment_id": 97559702, "body": "Have you considered Docker? <a href=\"https://www.docker.com/why-docker\" rel=\"nofollow noreferrer\">docker.com/why-docker</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1553910196, "post_id": 55419772, "comment_id": 97573691, "body": "Re &quot;<i>The PERLLIB environment variable captured at the customer site has over 430 directory entries.</i>&quot;, What???? It doesn&#39;t really make sense to have more than one. PERL5LIB should be used for installed modules, and <code>use FindBin qw( $RealBin ); use lib &quot;$RealBin&#47;...&quot;;</code> by scripts to find modules relative to a script."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1553878273, "creation_date": 1553878273, "answer_id": 55422091, "question_id": 55419772, "link": "https://stackoverflow.com/questions/55419772/how-to-manage-the-transfer-of-large-perl-environments-from-one-network-to-anothe/55422091#55422091", "title": "How to manage the transfer of large Perl environments from one network to another", "body": "<p>The single most valuable thing you could do with your time and for your customer is to reduce the number of entries in <code>@INC</code> and <code>PERL5LIB</code>. An entry in <code>@INC</code> can hold any number of modules, so even a large and complex project does not need to have too many directories to search through. </p>\n"}], "owner": {"reputation": 101, "user_id": 8363813, "user_type": "registered", "profile_image": "https://graph.facebook.com/692446450952705/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/8363813/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553878273, "creation_date": 1553870232, "question_id": 55419772, "link": "https://stackoverflow.com/questions/55419772/how-to-manage-the-transfer-of-large-perl-environments-from-one-network-to-anothe", "title": "How to manage the transfer of large Perl environments from one network to another", "body": "<p>I am trying to install a customer's Perl environment on my employer's network. When said customer runs our non-Perl applications, a lot of Perl code gets exercised here and there throughout their (chip-building) flow. During the archive process at the customer site, a significant amount of Perl content (scripts, modules, etc.) gets collected. By the time everything is unpacked on my employer's network, there is a lot to sort out; for example, the PERLLIB environment variable captured at the customer site has over 430 directory entries.</p>\n\n<p>Not surprisingly, my question is more system administrator-related: what would be the best method to verify that the captured Perl environment at the customer site unpacks and runs smoothly on my employer's network? I realize this is a loaded question, but, in essence, making sure the 430+ entries in the PERLLIB environment variable are ordered just right is proving difficult.</p>\n\n<p>After unpacking my customer's environment, I print out the contents of @INC when a Perl script tries to run but fails to find a specific module (this is BY FAR the most common problem). I then grep/find where the module is located in the extracted directory structure and bump it to the beginning of the @INC list.</p>\n\n<p>perl -e \"print join($/,@INC);\"</p>\n\n<p>I apologize if this is not the best platform to post such a question, but I wasn't sure where else to go for something this complex.</p>\n"}, {"tags": ["linux", "shell", "perl", "copy", "move"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553859770, "post_id": 55416194, "comment_id": 97552243, "body": "Make a template directory structure with the missing files and then simply use <code>rsync -a missingFilesTemplateDir&#47; RubbishBin&#47;ww&#47;</code> to copy the template to the destination directory?"}, {"owner": {"reputation": 1, "user_id": 11262585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGxXkZDg-iM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLzmQ0Es8JQL7Q_wNOrvuEft0fuw/mo/photo.jpg?sz=128", "display_name": "kan", "link": "https://stackoverflow.com/users/11262585/kan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1553860790, "post_id": 55416194, "comment_id": 97552802, "body": "@StefanBecker how can i make template for that?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553861869, "post_id": 55416194, "comment_id": 97553430, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55365537/how-to-move-files-and-sub-directory-in-perl\">How to move files and sub directory in Perl?</a>"}, {"owner": {"reputation": 1, "user_id": 11262585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGxXkZDg-iM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLzmQ0Es8JQL7Q_wNOrvuEft0fuw/mo/photo.jpg?sz=128", "display_name": "kan", "link": "https://stackoverflow.com/users/11262585/kan"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1553862087, "post_id": 55416194, "comment_id": 97553560, "body": "@Shawn nope I try that one but not coming anything"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1553869947, "post_id": 55416194, "comment_id": 97558463, "body": "what is the purpose of <code>$@</code> in <code>mkdir -vp $@ ...</code> ? In perl <code>$@</code> usually contains the exception string in case of an exception was thrown in an <code>eval</code> block."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1553870770, "post_id": 55416194, "comment_id": 97559012, "body": "The entries in the <code>@missingFiles</code> array should not contain the <code>www</code> prefix since it is already included in the <code>$directory</code> variable?"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1553871179, "post_id": 55416194, "comment_id": 97559318, "body": "Have you looked at tools like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> or, if you are restricted to using only core Perl modules, <a href=\"https://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a> and <a href=\"https://perldoc.perl.org/File/Path.html\" rel=\"nofollow noreferrer\">File::Path</a>? They have several methods to copy, move, create, and delete files and directories."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1553872734, "creation_date": 1553872734, "answer_id": 55420574, "question_id": 55416194, "link": "https://stackoverflow.com/questions/55416194/how-to-move-selected-files-one-folder-to-another-folder-with-sub-folder-also/55420574#55420574", "title": "How to move selected files one folder to another folder with sub folder also", "body": "<p>Here is one example of how you can create the same folder structure under both the source (<code>$directory</code>) and the destination path (<code>$takingDir</code>):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Basename qw(dirname);\nuse File::Copy::Recursive qw(rcopy);\nuse File::Path qw(make_path);\nuse File::Spec::Functions qw(catfile);\n\nmy $directory = 'www';\nmy $takingDir= \"RubbishBin/$directory\";\nmy @missingFiles= qw(c2.html image/1-3.gif); \n\nfor my $name (@missingFiles) {\n    my $dirname = dirname( $name );\n    my $dest_path = catfile($takingDir, $dirname);\n    make_path( $dest_path );\n    my $source_path = catfile( $directory, $name);\n    rcopy( $source_path, $dest_path ) or die \"copy failed: $!\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11262585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VGxXkZDg-iM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLzmQ0Es8JQL7Q_wNOrvuEft0fuw/mo/photo.jpg?sz=128", "display_name": "kan", "link": "https://stackoverflow.com/users/11262585/kan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553872734, "creation_date": 1553857921, "question_id": 55416194, "link": "https://stackoverflow.com/questions/55416194/how-to-move-selected-files-one-folder-to-another-folder-with-sub-folder-also", "title": "How to move selected files one folder to another folder with sub folder also", "body": "<p>This is my code to move files or copy the files.</p>\n\n<pre><code>#Here $directory = www(so the directory will create like this RubbishBin/www/) \nmy $takingDir= \"RubbishBin/$directory\";\n#@missingFiles= www/c2.html and www/image/1-3.gif \nmy $createDir = `mkdir -vp $@ \"$takingDir\" &amp;&amp; cp @missingFiles \"$takingDir\"`; \nsay (\"By Default Folder taking: RubbishBin\");\n</code></pre>\n\n<p>I want to move this file into <code>RubbishBin</code> folder.</p>\n\n<p>My output come like this </p>\n\n<pre><code>RubbishBin/www/c2.html\nRubbishBin/www/1-3.gif\n</code></pre>\n\n<p>But my question is how can I create folder inside <code>RubbishBin/www/</code>. Also, it is not necessary next folder is <code>image</code>. It will different like <code>Download</code> or <code>video</code>.</p>\n\n<p>I want output like this  </p>\n\n<pre><code>RubbishBin/www/c2.html\nRubbishBin/www/image/1-3.gif\nor \nRubbishBin/www/Download/b.gif \n\n</code></pre>\n\n<p>After <code>www/</code> my script will select automatically create that folder and move that file like above output.</p>\n"}, {"tags": ["perl", "ssl", "centos", "smtp", "smtps"], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1553853668, "post_id": 55414648, "comment_id": 97548610, "body": "Yes, I myself figured this out a few minutes ago while reading the document. Thanks for your answer sir."}, {"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1553858954, "post_id": 55414648, "comment_id": 97551774, "body": "In a linux machine where the version of Net::Cmd is 2.29 , the constructor of Net::SMTP gives undefined object ,though the document says that minimum version required to use SMTPS via Net::SMTP is 1.28. When i updated the Net::Cmd module to version 3.11, then it started working fine."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 1, "creation_date": 1553859785, "post_id": 55414648, "comment_id": 97552252, "body": "@Ayush: The documentation if Net::SMTP::SSL is slightly wrong. 1.28 is the version of libnet where Net::SMTP is part of. You should also use the Net::Cmd coming with this libnet."}, {"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1553860648, "post_id": 55414648, "comment_id": 97552726, "body": "Sir, on my system , Net::SMTP is v2.31 and Net::Cmd is v2.29. Considering the fact that both of these are part of libnet and correcting the document of Net::SMTP::SSL , we can say that if libnet version is greater than 1.28, then SMTPS feature should work. In my system , i tried finding the version of libnet using the command rpm -q libnet.  It says that libnet is not installed. If that is so, then how am I able to use the perl modules like Net::SMTP in my perl script"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 1, "creation_date": 1553860855, "post_id": 55414648, "comment_id": 97552839, "body": "@Ayush: libnet 1.28 includes Net::SMTP 2.35 and Net::Cmd 2.31. See <a href=\"https://metacpan.org/source/SHAY/libnet-1.28\" rel=\"nofollow noreferrer\">metacpan.org/source/SHAY/libnet-1.28</a>"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1553852957, "creation_date": 1553852957, "answer_id": 55414648, "question_id": 55413518, "link": "https://stackoverflow.com/questions/55413518/unable-to-submit-email-on-port-465-using-netsmtp-module-in-perl/55414648#55414648", "title": "Unable to submit email on port 465 using Net::SMTP module in Perl", "body": "<p>If you want to use <code>smtps</code> (i.e. TLS from start instead TLS after the STARTTLS command) you have to explicitly say so. Net::SMTP does not magically derive this requirement from the port number. From <a href=\"https://metacpan.org/pod/Net::SMTP\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>new ( [ HOST ] [, OPTIONS ] )<br>\n  <strong>SSL</strong> - If the connection should be done from start with SSL, contrary to later upgrade with starttls. You can use SSL arguments as documented in IO::Socket::SSL, but it will usually use the right arguments already.</p>\n</blockquote>\n\n<p>Thus, the proper code should be:</p>\n\n<pre><code>$smtp = Net::SMTP-&gt;new($mailserver,\n    SSL =&gt; 1,  # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; THIS IS IMPORTANT\n    Hello =&gt; $localhostname,\n    Timeout =&gt; 60,\n    Port =&gt; $port,  # Port value is 465\n    Debug =&gt; 1\n);\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 1, "accepted_answer_id": 55414648, "answer_count": 1, "score": 1, "last_activity_date": 1553854620, "creation_date": 1553849187, "last_edit_date": 1553854620, "question_id": 55413518, "link": "https://stackoverflow.com/questions/55413518/unable-to-submit-email-on-port-465-using-netsmtp-module-in-perl", "title": "Unable to submit email on port 465 using Net::SMTP module in Perl", "body": "<p>I want to submit email on port 465 of my smtp server using the Net::SMTP module(without using Net::SMTP::SSL) in a perl script from client. On Port 465 of my SMTP server, \"submissions\" service runs, which understands SMTPS.</p>\n\n<p>I have tried to find the way to do this on google. Then used the Net::SMTP::SSL module to make request on port 465. It works fine.</p>\n\n<p>But the documentation for <a href=\"https://metacpan.org/pod/Net::SMTP::SSL\" rel=\"nofollow noreferrer\">Net::SMTP::SSL</a> recommends using latest version Net::SMTP instead of using Net::SMTP::SSL.\nThe document clearly states that</p>\n\n<blockquote>\n  <p>Since Net::SMTP v1.28 (2014-10-08), Net::SMTP itself has support for\n  SMTP over SSL, and also for STARTTLS. Use Net::SMTP, not\n  Net::SMTP::SSL.</p>\n</blockquote>\n\n<p>I have updated Net::SMTP module to the latest version 3.11.</p>\n\n<p>Also the document for <a href=\"https://metacpan.org/pod/Net::SMTP\" rel=\"nofollow noreferrer\">Net::SMTP</a> also stated clearly that</p>\n\n<blockquote>\n  <p>With IO::Socket::SSL installed it also provides support for implicit\n  and explicit TLS encryption, i.e. SMTPS or SMTP+STARTTLS.</p>\n</blockquote>\n\n<p>The part of my perl script code on client ,relevant to the problem mentioned looks like so: </p>\n\n<pre><code>$smtp = Net::SMTP::SSL-&gt;new(\"$mailserver\",\n                        Hello =&gt; \"$localhostname\",\n                        Timeout =&gt; 60,\n                        Port =&gt; \"$port\",  //Port value is 465\n                        Debug =&gt; 1);\n $smtp-&gt;auth($username, $password);\n</code></pre>\n\n<p>...Remaining script which sets sender, receiver body etc</p>\n\n<p>This works fine. The email gets submitted.\nReplacing the above code with :</p>\n\n<pre><code>$smtp = Net::SMTP-&gt;new(\"$mailserver\",\n                        Hello =&gt; \"$localhostname\",\n                        Timeout =&gt; 60,\n                        Port =&gt; \"$port\",  //Port value is 465\n                        Debug =&gt; 1);\n$smtp-&gt;auth($username, $password);\n</code></pre>\n\n<p>...Remaining script which sets sender, receiver body etc</p>\n\n<p>This fails. The debug logs look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Net::SMTP&gt;&gt;&gt; Net::SMTP(3.11)\nNet::SMTP&gt;&gt;&gt;   Net::Cmd(3.11)\nNet::SMTP&gt;&gt;&gt;     Exporter(5.73)\nNet::SMTP&gt;&gt;&gt;   IO::Socket::INET(1.39)\nNet::SMTP&gt;&gt;&gt;     IO::Socket(1.39)\nNet::SMTP&gt;&gt;&gt;       IO::Handle(1.39)\nNet::SMTP: Net::Cmd::getline(): unexpected EOF on command channel:  at fescommon/mailsend-new.pl line 67.\nCan't call method \"auth\" on an undefined value at fescommon/mailsend-new.pl line 74.\n</code></pre>\n\n<p>Note: Modules like Net::SMTP, Net::SMTP::SSL, IO::Socket::SSL and others are all updated to the latest version.</p>\n\n<p>Expected Result is that request on \"submissions\" service listening on port 465 on SMTP server can be made using latest Net::SMTP module, without using Net::SMTP::SSL (because the document claims)</p>\n"}, {"tags": ["linux", "shell", "perl", "size", "filesize"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1553818208, "post_id": 55408644, "comment_id": 97537638, "body": "<a href=\"https://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">stat</a> or <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">-s</a> to get the size of a file in perl."}, {"owner": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "edited": false, "score": 0, "creation_date": 1553818380, "post_id": 55408644, "comment_id": 97537677, "body": "you can use <code>du</code> command with the <b>b</b> flag."}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553818416, "post_id": 55408644, "comment_id": 97537682, "body": "@Shawn but I also write my output"}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "edited": false, "score": 0, "creation_date": 1553818508, "post_id": 55408644, "comment_id": 97537702, "body": "@Miguel&#193;ngelRetamozoSanchez but how can I find total for that?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553818623, "post_id": 55408644, "comment_id": 97537724, "body": "@Jack so what? Do you not know how to write data to a file in perl (do you even need to do such a thing?) Maybe you should be doing whatever this is in a shell script instead if you don&#39;t..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553818974, "post_id": 55408644, "comment_id": 97537812, "body": "Why are you piping the output of <code>stat</code> to <code>du</code> in that snippet anyways? You&#39;re also giving <code>du</code> a path on it&#39;s command line and I don&#39;t think it reads from standard input, but if it does, what&#39;s it supposed to do with <code>stat</code>&#39;s output? It&#39;s really strange usage."}, {"owner": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "edited": false, "score": 0, "creation_date": 1553819028, "post_id": 55408644, "comment_id": 97537823, "body": "to sum all and show in bytes  <code>du -b  &lt;file_with_regex&gt; | awk &#39; {sum += $1} END {print sum}&#39;</code>"}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553819445, "post_id": 55408644, "comment_id": 97537931, "body": "@Shawn Yes you right. I just remove that things."}, {"owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "reply_to_user": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "edited": false, "score": 0, "creation_date": 1553819507, "post_id": 55408644, "comment_id": 97537949, "body": "@Miguel&#193;ngelRetamozoSanchez also u can find total with <code>du -ach www&#47;</code>"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553822171, "post_id": 55408644, "comment_id": 97538550, "body": "<code>stat</code> is giving you the size of the directory itself, not the amount of space used by the files listed in it. (compare <code>ls -ld www&#47;</code> with <code>du -sb www&#47;</code>)"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1553832832, "post_id": 55408644, "comment_id": 97540787, "body": "It&#39;s not portable, but for linux (with GNU coreutils or busybox, possibly others), <code>du</code> has a <code>-c</code> option: <code>du -cb GLOB</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "is_accepted": false, "score": 1, "last_activity_date": 1553850164, "creation_date": 1553850164, "answer_id": 55413798, "question_id": 55408644, "link": "https://stackoverflow.com/questions/55408644/how-can-i-find-total-size-of-file-in-bytes/55413798#55413798", "title": "How can I find total size of file in bytes?", "body": "<p>First you do not give enough information to help.</p>\n\n<p>Then you ask for the total size in your headline but then show som shell code and ask how to get the size in bytes for the du command.</p>\n\n<p>Seems you didn't understand <code>du</code> but simply copied it from somewhere. <code>du -h</code> is for \"human readable\" output, which you would have known had you read <code>man du</code>.</p>\n\n<p>And then you try to put output from shell commands into a perl variable. You will only get the value 1 btw.</p>\n\n<p>If you really want to go for perl, try to understand what (as an example)</p>\n\n<pre><code>while (&lt;www/*&gt;) \u2026\n</code></pre>\n\n<p>will do. Also check <code>perldoc -f -X</code>. Search for <code>-s</code>.</p>\n\n<p>The total size you can get by summing up the individual sizes collected with <code>-s</code>. Ah! And there is also a <code>stat</code> in perl. Check <code>perldoc -f stat</code>.</p>\n\n<p>I  hope this is enough to get you going\u2026</p>\n"}], "owner": {"reputation": 1, "user_id": 11266476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2e72296a0e97dd25698ea5e8b7b1d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11266476/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "closed_date": 1553854891, "answer_count": 1, "score": -1, "last_activity_date": 1553850164, "creation_date": 1553817825, "question_id": 55408644, "link": "https://stackoverflow.com/questions/55408644/how-can-i-find-total-size-of-file-in-bytes", "closed_reason": "Duplicate", "title": "How can I find total size of file in bytes?", "body": "<p>I want total of file size in bytes. This is my code.</p>\n\n<pre><code>my $total= print `stat --printf=\"%s\\n\" www/ | du -ah www/* &gt; report.txt `;\n</code></pre>\n\n<p>I got output in K. But I want in Byte so how can I get and how can I find total?</p>\n\n<p>My out is coming like this </p>\n\n<pre><code>4.0K www/1.html\n3.0K www/2.html\n</code></pre>\n"}, {"tags": ["perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 1834063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6decdf15e1ebf18907b01302307da02?s=128&d=identicon&r=PG", "display_name": "user1834063", "link": "https://stackoverflow.com/users/1834063/user1834063"}, "edited": false, "score": 0, "creation_date": 1553801979, "post_id": 55405554, "comment_id": 97531879, "body": "The fasta file is much longer than the example I posted, so it does not work by splitting into array mode"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 41, "user_id": 1834063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6decdf15e1ebf18907b01302307da02?s=128&d=identicon&r=PG", "display_name": "user1834063", "link": "https://stackoverflow.com/users/1834063/user1834063"}, "edited": false, "score": 0, "creation_date": 1553802030, "post_id": 55405554, "comment_id": 97531901, "body": "yes.. the second solution doesn&#39;t use arrays you can use that"}, {"owner": {"reputation": 41, "user_id": 1834063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6decdf15e1ebf18907b01302307da02?s=128&d=identicon&r=PG", "display_name": "user1834063", "link": "https://stackoverflow.com/users/1834063/user1834063"}, "edited": false, "score": 0, "creation_date": 1553802239, "post_id": 55405554, "comment_id": 97532012, "body": "Tried did not work. The sequence has the header in the first line, and the sequence in the second line."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 41, "user_id": 1834063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6decdf15e1ebf18907b01302307da02?s=128&d=identicon&r=PG", "display_name": "user1834063", "link": "https://stackoverflow.com/users/1834063/user1834063"}, "edited": false, "score": 0, "creation_date": 1553802312, "post_id": 55405554, "comment_id": 97532050, "body": "looks like you changed the input like.. they were coming in single lines.. let me check"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553807403, "post_id": 55405554, "comment_id": 97534323, "body": "@zdim.. updated.. the initial qstn was having both the lines in single line.. so I used that.."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553807870, "post_id": 55405554, "comment_id": 97534489, "body": "Right, that was probably about editing (separate lines show together unless some markup is used).  removed my comment"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": true, "score": 2, "last_activity_date": 1553807256, "last_edit_date": 1553807256, "creation_date": 1553801521, "answer_id": 55405554, "question_id": 55405497, "link": "https://stackoverflow.com/questions/55405497/extracting-fasta-ids-after-string-match/55405554#55405554", "title": "Extracting fasta ids after string match", "body": "<p>Try this one-liner</p>\n\n<pre><code>perl -lne ' /^[^&lt;].+?(?&lt;=TCAT)(.{10})/ and print $p,\"\\t\",$1; $p=$_ ' file\n</code></pre>\n\n<p>with your given inputs</p>\n\n<pre><code>$ cat fasta.txt\n&gt;Product_1_001:299:H377WBGXB:1:11101\nTGATCATCTCACCTACTAATAGGACGATGACCCAGTGACGATGA\n&gt;Product_2_001:299:H377WBGXB:2:11101\nCATCGATGATCATTGATAAGGGGCCCATACCCATCAAAACCGTT\n\n$ perl -lne ' /^[^&lt;].+?(?&lt;=TCAT)(.{10})/ and print $p,\"\\t\",$1; $p=$_ ' fasta.txt\n&gt;Product_1_001:299:H377WBGXB:1:11101    CTCACCTACT\n&gt;Product_2_001:299:H377WBGXB:2:11101    TGATAAGGGG\n\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553803063, "post_id": 55405885, "comment_id": 97532386, "body": "input file changed.. check the question again"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553803655, "post_id": 55405885, "comment_id": 97532694, "body": "one fasta record consists of 2 lines.. please check if your output is matching with the OP"}, {"owner": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553803734, "post_id": 55405885, "comment_id": 97532740, "body": "thanks @stack0114106, I can&#39;t edit now, to fix the last  @user1834063 can use this command : <code>awk -F&quot;_&quot; &#39;$1 == &quot;Product&quot; {printf &quot;%s&quot;, $0; next} 1&#39; file2.csv  | awk -F&quot;TCAT&quot; &#39;{ print substr($1,1,35) &quot; &quot; substr($2,1,10)}&#39;</code>"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553804124, "post_id": 55405885, "comment_id": 97532954, "body": "something like this should work <code>awk -F&quot;TCAT&quot; &#39; &#47;^&gt;&#47; { p=$0;next } &#47;TCAT&#47; { print p, substr($2,1,10) } &#39; fasta.txt</code> give a try and update the answer"}], "tags": [], "owner": {"reputation": 197, "user_id": 7044994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E0au0.png?s=128&g=1", "display_name": "Miguel &#193;ngel Retamozo Sanchez", "link": "https://stackoverflow.com/users/7044994/miguel-%c3%81ngel-retamozo-sanchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1553808112, "last_edit_date": 1553808112, "creation_date": 1553802894, "answer_id": 55405885, "question_id": 55405497, "link": "https://stackoverflow.com/questions/55405497/extracting-fasta-ids-after-string-match/55405885#55405885", "title": "Extracting fasta ids after string match", "body": "<p>Another way will be ussing <code>awk</code> command like this :</p>\n\n<p><code>cat &lt;your_file&gt;| awk -F\"_\" '/Product/{printf \"%s\", $0; next} 1'|awk -F\"TCAT\" '{ print substr($1,1,35) \"\\t\" substr($2,1,10)}'\n</code></p>\n\n<p>the output :</p>\n\n<pre><code>Product_1_001:299:H377WBGXB:1:11101     CTCACCTACT\nProduct_2_001:299:H377WBGXB:2:11101     TGATAAGGGG\n</code></pre>\n\n<p>hope it help you.</p>\n"}], "owner": {"reputation": 41, "user_id": 1834063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6decdf15e1ebf18907b01302307da02?s=128&d=identicon&r=PG", "display_name": "user1834063", "link": "https://stackoverflow.com/users/1834063/user1834063"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 55405554, "answer_count": 2, "score": 1, "last_activity_date": 1553808112, "creation_date": 1553801316, "last_edit_date": 1553807817, "question_id": 55405497, "link": "https://stackoverflow.com/questions/55405497/extracting-fasta-ids-after-string-match", "title": "Extracting fasta ids after string match", "body": "<p>I have a list of fasta sequences as following:</p>\n\n<pre>\n>Product_1_001:299:H377WBGXB:1:11101 \nTGATCATCTCACCTACTAATAGGACGATGACCCAGTGACGATGA\n>Product_2_001:299:H377WBGXB:2:11101 \nCATCGATGATCATTGATAAGGGGCCCATACCCATCAAAACCGTT\n</pre>\n\n<p>The original fasta sequence is much longer than the subset posted here. I wanted to extract the 10 characters after the pattern \"TCAT\" into a separate file and did this</p>\n\n<pre><code>grep -oP \"(?&lt;=TCAT).{10}\"\n</code></pre>\n\n<p>I do get the needed result as:</p>\n\n<pre>\nCTCACCTACT\nTGATAAGGGG\n</pre>\n\n<p>I would like their corresponding fasta ids as one column and the extracted pattern as second column like:</p>\n\n<pre>\n>Product_1_001:299:H377WBGXB:1:11101     CTCACCTACT\n>Product_2_001:299:H377WBGXB:2:11101     TGATAAGGGG\n</pre>\n"}, {"tags": ["regex", "bash", "perl", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553794710, "post_id": 55403773, "comment_id": 97528082, "body": "Can you show that code?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1553794715, "post_id": 55403773, "comment_id": 97528085, "body": "Try <code>grep -E &#39;([[:space:]]|^)A1BG([[:space:]]|$)&#39;</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 6, "creation_date": 1553794731, "post_id": 55403773, "comment_id": 97528091, "body": "Is there a particular reason to use <code>-w</code>, rather than asking for a string terminated in whitespace explicitly? Or to use <code>grep</code> from a perl script at all, when this is <i>specifically the kind of thing perl is good at</i> doing internally?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1553794910, "post_id": 55403773, "comment_id": 97528189, "body": "Actually, <code>-w</code> <i>is</i> recognizing <code>-</code> as a word separator (logically) thus your dilemma. As Charles suggests, don&#39;t use <code>grep -w</code> to do the job."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1553794963, "post_id": 55403773, "comment_id": 97528217, "body": "To be clear, which characters are and are not considered word separators by grep is locale-dependent, so even if it works in one region or set of language settings, it won&#39;t work the same place everywhere. That&#39;s a problem universal to <code>grep -w</code>, making it a bad choice when you want to match anything other than words in the actively-configured locale."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1553795293, "post_id": 55403773, "comment_id": 97528397, "body": "@CharlesDuffy Thanks Charles but the way that the rest of the code is, it works fine. (apart from this file that includes the dash ids). I have a list of ids that I am taking it from a file and I am using grep to gather the duplicates in an array."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1553795331, "post_id": 55403773, "comment_id": 97528421, "body": "@WiktorStribi\u017cew Well, I think that it worked! :) Thank you"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1553795383, "post_id": 55403773, "comment_id": 97528445, "body": "@Vasilis, &quot;the way I have my code&quot; -- that&#39;s circular reasoning. The whole argument is that your code would be better (more portable, reliable across different operating systems and locales, and better performance on account of avoiding process-startup overhead) written differently."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553795504, "post_id": 55403773, "comment_id": 97528511, "body": "@zdim Yes, of course. Can I put it in the comments?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553795689, "post_id": 55403773, "comment_id": 97528600, "body": "@Vasilis Well, I meant &quot;edit&quot; the question and add it there."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553795937, "post_id": 55403773, "comment_id": 97528715, "body": "@Vasilis  It appears that you use system&#39;s <code>grep</code>, as an external command, out of a Perl program.  Seeing how exactly you do that normally helps people to help you out. (For one, it seems that you don&#39;t need to go out to the system at all.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553797112, "post_id": 55403773, "comment_id": 97529282, "body": "Thank you for the edit.  Are you sure that <code>$command</code> is correct -- that <code>cat</code> has nothing to do?  (Btw, you don&#39;t need <code>cat file | grep ...</code> -- can do <code>grep ... file</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553802109, "post_id": 55403773, "comment_id": 97531943, "body": "Can you confirm for me the objective of your code: (1) Gather phrases in the first column (like <code>A1BG</code>) from file <code>G13_T.txt</code> (the <code>awk</code> involving line) (2) Go through all these, and for each look for it in a file <code>Unique_Genes&#47;G13_T.txt</code>.  If more than one are found compute average.  Is this what you do?"}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553803824, "post_id": 55403773, "comment_id": 97532790, "body": "@zdim Sorry, my bad. <code>cat</code> command goes to the same file (edited the code).  Yes, awk gathers all the unique phrases from the first column and then it searches the whole file. In cases of the more than one calculate the average. Apart from the <code>grep</code> issue works fine but the truth is that it is quite slow, especially with large files."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553804042, "post_id": 55403773, "comment_id": 97532906, "body": "Ah, I see.  So the repeated processing (after the <code>awk</code> line, in the loop over <code>@mykeys</code>) is only to see whether phrases from the first column come more than once?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553805415, "post_id": 55403773, "comment_id": 97533487, "body": "&quot;<i>quite slow, especially with large files</i>&quot; -- right, it processes the whole file all over again for every single phrase. And it runs external commands each time (expensive)."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1553795440, "creation_date": 1553795440, "answer_id": 55403993, "question_id": 55403773, "link": "https://stackoverflow.com/questions/55403773/preventing-foo-from-matching-foo-bar-with-grep-w/55403993#55403993", "title": "Preventing &quot;foo&quot; from matching &quot;foo-bar&quot; with grep -w", "body": "<p>You may use a POSIX ERE regex with <code>grep</code> like this:</p>\n\n<pre><code>grep -E '([[:space:]]|^)A1BG([[:space:]]|$)' file\n</code></pre>\n\n<p>To return matches (not matching lines) only:</p>\n\n<pre><code>grep -Eo '([[:space:]]|^)A1BG([[:space:]]|$)' file\n</code></pre>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>([[:space:]]|^)</code> - Group 1: a whitespace or start of line</li>\n<li><code>A1BG</code> - a substring</li>\n<li><code>([[:space:]]|$)</code> - Group 2: a whitespace or end of line</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1553966748, "post_id": 55406366, "comment_id": 97585329, "body": "Ok, this is an amazing approach! I wish I could think that way! Thank you very much."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 1, "creation_date": 1554239342, "post_id": 55406366, "comment_id": 97676818, "body": "@Vasilis Glad you like it :).  It&#39;s worth noting and remembering, this is a good example of the great utility of a hash (dictionary) and one of its typical uses."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1553888988, "last_edit_date": 1553888988, "creation_date": 1553804962, "answer_id": 55406366, "question_id": 55403773, "link": "https://stackoverflow.com/questions/55403773/preventing-foo-from-matching-foo-bar-with-grep-w/55406366#55406366", "title": "Preventing &quot;foo&quot; from matching &quot;foo-bar&quot; with grep -w", "body": "<p>If I got clarifications in comments right, the objective is to find the average of values (second column) for unique names in the first column. Then there is no need for external tools.</p>\n\n<p>Read the file line by line and add up values for each name. The name uniqueness is granted by using a hash, with names being keys. Along with this also track their counts</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift // die \"Usage: $0 filename\\n\";\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy %results;\n\nwhile (&lt;$fh&gt;) {\n    #my ($name, $value) = split /\\t/;\n    my ($name, $value) = split /\\s+/;  # used for easier testing\n\n    $results{$name}{value} += $value;\n    ++$results{$name}{count};\n}\n\nforeach my $name (sort keys %results) { \n    $results{$name}{value} /= $results{$name}{count} \n        if $results{$name}{count} &gt; 1;\n\n    say \"$name =&gt; $results{$name}{value}\";\n}\n</code></pre>\n\n<p>After the file is processed each accumulated value is divided by its count and overwritten by that, so by its average (<a href=\"https://perldoc.perl.org/perlop.html#Assignment-Operators\" rel=\"nofollow noreferrer\"><code>/=</code></a> divides and assigns), if count <code>&gt; 1</code> (as a small measure of efficiency). </p>\n\n<p>If there is any use in knowing all values that were found for each name, then store them in an arrayref for each key instead of adding them</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    #my ($name, $value) = split /\\t/;\n    my ($name, $value) = split /\\s+/;  # used for easier testing\n\n    push @{$results{$name}}, $value;\n}\n</code></pre>\n\n<p>where now we don't need the count as it is given by the number of elements in the array(ref)</p>\n\n<pre><code>use List::Util qw(sum);\n\nforeach my $name (sort keys %results) {\n    say \"$name =&gt; \", sum(@{$results{$name}}) / @{$results{$name}};\n}\n</code></pre>\n\n<p>Note that a hash built this way needs memory comparable to the file size (or may even exceed it), since <em>all</em> values are stored. </p>\n\n<p>This was tested using the shown two lines of sample data, repeated and changed in a file. The code does not test the input in any way, but expects the second field to always be a number.</p>\n\n<p>Notice that there is no reason to ever step out of our program and use external commands.</p>\n"}], "owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 55406366, "answer_count": 2, "score": 0, "last_activity_date": 1600377273, "creation_date": 1553794614, "last_edit_date": 1600377273, "question_id": 55403773, "link": "https://stackoverflow.com/questions/55403773/preventing-foo-from-matching-foo-bar-with-grep-w", "title": "Preventing &quot;foo&quot; from matching &quot;foo-bar&quot; with grep -w", "body": "<p>I am using grep inside my Perl script and I am trying to grep the exact keyword that I am giving. The problem is that \"-w\" doesn't recognize the \"-\" symbol as a separator. </p>\n\n<p>example:\nLet's say that I have these two records:</p>\n\n<pre><code>A1BG    0.0767377011073753\nA1BG-AS1    0.233775553296782\n</code></pre>\n\n<p>if I give\n    grep -w \"A1BG\"\nit returns both of them but I want only the exact one.</p>\n\n<p>Any suggestions?\nMany thanks in advance.</p>\n\n<p>PS.</p>\n\n<p>Here is my whole code.\nThe input file is a two-columns tab separated. So, I want to keep a unique value for each gene. In cases that I have more than one record, I calculate the average.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#Find the average fc between common genes\nsub avg {\nmy $total;\n$total += $_ foreach @_;\n   return $total / @_;\n}\n\nmy @mykeys = `cat G13_T.txt| awk '{print \\$1}'| sort -u`;\nforeach (@mykeys)\n{\n    my @TSS = ();\n\n    my $op1 = 0;\n\n    my $key = $_;\n    chomp($key);\n    #print \"$key\\n\";\n    my $command = \"cat G13_T.txt|grep -E '([[:space:]]|^)$key([[:space:]]|\\$)'\";\n    #my $command = \"cat Unique_Genes/G13_T.txt|grep -w $key\";\n    my @belongs= `$command`;\n    chomp(@belongs);\n    my $count = scalar(@belongs);\n    if ($count == 1) {\n            print \"$belongs[0]\\n\";\n    }\n    else {\n            for (my $i = 0; $i &lt; $count; $i++) {\n                    my @token = split('\\t', $belongs[$i]);\n                    my $lfc = $token[1];\n                    push (@TSS, $lfc);\n            }\n            $op1 = avg(@TSS);\n            print $key .\"\\t\". $op1. \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["r", "regex", "perl"], "comments": [{"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1553792532, "post_id": 55402609, "comment_id": 97526855, "body": "@mob I edited the question title. thx"}], "answers": [{"tags": [], "owner": {"reputation": 661302, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": false, "score": 1, "last_activity_date": 1553792976, "last_edit_date": 1553792976, "creation_date": 1553790676, "answer_id": 55402653, "question_id": 55402609, "link": "https://stackoverflow.com/questions/55402609/extracting-before-digits-before-and-after-forward-slash/55402653#55402653", "title": "extracting before digits before and after forward slash /", "body": "<p>We can use <code>str_extract_all</code> to match a <code>-</code> (if any) followed by one or more digits (<code>[0-9]+</code>) and change the type of it to <code>numeric</code></p>\n\n<pre><code>library(tidyverse)\nmap_dfc(str_extract_all(x, \"-?[0-9]+\"), as.numeric)\n# A tibble: 2 x 3\n#    V1    V2    V3\n#  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n#1     5    -4     3\n#2     1     1    -2\n</code></pre>\n\n<hr>\n\n<p>Or with <code>read.table</code> after getting the substring with <code>sub</code> and then specifying the <code>sep</code> as <code>/</code> to create a two column data.frame</p>\n\n<pre><code>read.table(text= sub(\".*=\", \"\", x), sep=\"/\")\n#   V1 V2\n#1  5  1\n#2 -4  1\n#3  3 -2\n</code></pre>\n\n<hr>\n\n<p>Or another option is <code>strsplit</code></p>\n\n<pre><code>sapply(strsplit(x, \"[=/]\"), `[`, 3:4)\n</code></pre>\n\n<h3>Update</h3>\n\n<p>If the OP's string have <code>()</code> as well, the first option should work well, but in the second option, we can change </p>\n\n<pre><code>x1 &lt;- c(\"maximusa/b=(5/1)\",\"maximusa/b=(-4/1)\",\"maximusa/b=(3/-2)\")\nread.table(text= gsub(\".*=|[()]\", \"\", x1), sep=\"/\")\n#  V1 V2\n#1  5  1\n#2 -4  1\n#3  3 -2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1553792466, "post_id": 55402681, "comment_id": 97526815, "body": "what if I also have parantheses like this ? <code>x &lt;- c(&quot;maximusa&#47;b=(5&#47;1)&quot;,&quot;maximusa&#47;b=(-4&#47;1)&quot;,&quot;maximusa&#47;b=(3&#47;-2)&quot;&zwnj;&#8203;)</code>"}, {"owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "edited": false, "score": 0, "creation_date": 1553793541, "post_id": 55402681, "comment_id": 97527453, "body": "I also forget to mention that I have also <code>+</code> sign before the digits. <code>x &lt;- c(&quot;maximusa&#47;b=(5&#47;+1)&quot;,&quot;maximusa&#47;b=(-4&#47;1)&quot;,&quot;maximusa&#47;b=(+3&#47;-2&zwnj;&#8203;)&quot;)</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1553790797, "creation_date": 1553790797, "answer_id": 55402681, "question_id": 55402609, "link": "https://stackoverflow.com/questions/55402609/extracting-before-digits-before-and-after-forward-slash/55402681#55402681", "title": "extracting before digits before and after forward slash /", "body": "<p>One problem is that</p>\n\n<pre><code>after_slash=sub(\"^.*\\\\/(d+)\",\"\\\\1\", x, perl = TRUE)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>after_slash=sub(\"^.*/(\\\\d+)\",\"\\\\1\", x, perl = TRUE)\n</code></pre>\n\n<p>To capture negative integers as well, you'll want to use</p>\n\n<pre><code>before_slash=sub(\".*=(-?\\\\d+).*\",\"\\\\1\", x, perl = TRUE)\nafter_slash=sub(\"^.*/(-?\\\\d+)\",\"\\\\1\", x, perl = TRUE)\n</code></pre>\n\n<p>The tokens <code>-?</code> mean \"the <code>-</code> character, 0 or 1 times\"</p>\n"}, {"tags": [], "owner": {"reputation": 32939, "user_id": 6574038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/cb225ef54c975d2f1edd3f14cabf95ee?s=128&d=identicon&r=PG&f=1", "display_name": "jay.sf", "link": "https://stackoverflow.com/users/6574038/jay-sf"}, "is_accepted": false, "score": 0, "last_activity_date": 1553791970, "creation_date": 1553791970, "answer_id": 55403022, "question_id": 55402609, "link": "https://stackoverflow.com/questions/55402609/extracting-before-digits-before-and-after-forward-slash/55403022#55403022", "title": "extracting before digits before and after forward slash /", "body": "<p>This should work, too.</p>\n\n<pre><code>matrix(as.numeric(unlist(strsplit(\n  gsub(\"(^\\\\w*\\\\/)(b=)(-?\\\\d)(\\\\/)(-?\\\\d$)\", \"\\\\3 \\\\5\", x), \" \"))), 2)\n#      [,1] [,2] [,3]\n# [1,]    5   -4    3\n# [2,]    1    1   -2\n</code></pre>\n"}], "owner": {"reputation": 3651, "user_id": 3555558, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/vEFyn.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3555558/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 55402681, "answer_count": 3, "score": 1, "last_activity_date": 1553794222, "creation_date": 1553790533, "last_edit_date": 1553794222, "question_id": 55402609, "link": "https://stackoverflow.com/questions/55402609/extracting-before-digits-before-and-after-forward-slash", "title": "extracting before digits before and after forward slash /", "body": "<p>I have trouble with extracting the string before and after <code>/</code>.</p>\n\n<pre><code>x &lt;- c(\"maximusa/b=5/1\",\"maximusa/b=-4/1\",\"maximusa/b=3/-2\")\n\nbefore_slash=sub(\".*=(\\\\d+).*\",\"\\\\1\", x, perl = TRUE)\n</code></pre>\n\n<p>gives   </p>\n\n<pre><code>\"5\"               \"maximusa/b=-4/1\" \"3\"\n</code></pre>\n\n<p>then</p>\n\n<pre><code>after_slash=sub(\"^.*\\\\/(d+)\",\"\\\\1\", x, perl = TRUE)\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>\"maximusa/b=5/1\"  \"maximusa/b=-4/1\" \"maximusa/b=3/-2\"\n</code></pre>\n\n<p>OTH, the expected output</p>\n\n<p>before slash  5 -4  3</p>\n\n<p>after slash   1  1 -2</p>\n\n<p>how can I get the expected output ?</p>\n\n<p>thx for answers,</p>\n\n<p>I would like to add one more condition to extract the strings\nassume we have string like that.\nSame as the OP how could we extract with <code>+</code> sign as well as ignoring the parentheses ? Current solution of @mob gives</p>\n\n<pre><code>  x &lt;- c(\"maximusa/b=(5/+1)\",\"maximusa/b=(-4/1)\",\"maximusa/b=(+3/-2)\")\n\nafter_slash=sub(\"^.*/(\\\\d+)\",\"\\\\1\", x, perl = TRUE)\n&gt; after_slash\n[1] \"maximusa/b=(5/+1)\"  \"1)\"                 \"maximusa/b=(+3/-2)\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code> before_slash=sub(\".*=(-?\\\\d+).*\",\"\\\\1\", x, perl = TRUE)\n\n  &gt; before_slash\n[1] \"maximusa/b=(5/+1)\"  \"maximusa/b=(-4/1)\"  \"maximusa/b=(+3/-2)\"\n</code></pre>\n\n<p>I tried some but no luck!</p>\n"}, {"tags": ["regex", "xml", "perl", "xmllint"], "comments": [{"owner": {"reputation": 1743, "user_id": 2844215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3158.jpg?s=128&g=1", "display_name": "IMParasharG", "link": "https://stackoverflow.com/users/2844215/imparasharg"}, "edited": false, "score": 0, "creation_date": 1553786555, "post_id": 55401144, "comment_id": 97523032, "body": "Share XML file with us"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1553789251, "post_id": 55401144, "comment_id": 97524994, "body": "The duplicate doesn&#39;t contain any Perl solution. It might help OP go in the right direction though. @roku, let us know if you managed to solve your problem with the help of duplicate target."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11272973"}, "edited": false, "score": 0, "creation_date": 1553849411, "post_id": 55401144, "comment_id": 97546249, "body": "no, i did not solve the problem... either perl or a linux utility would do"}, {"owner": {"reputation": 3051, "user_id": 6237339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4c4dd2523d09028942a397df378237?s=128&d=identicon&r=PG&f=1", "display_name": "Skeeve", "link": "https://stackoverflow.com/users/6237339/skeeve"}, "edited": false, "score": 1, "creation_date": 1553925104, "post_id": 55401144, "comment_id": 97575555, "body": "Can you try to re-get the data and make sure you don&#39;t mess up the encoding? I suspect the whole problem lies in the fact that you do not know the correct encoding of the file and thus it&#39;s read using a different encoding than the one used for the file.  If you really want to get rid of all non-7bit-ascii characters, replacing them wirh a questionmark, try to use this, which I did not test as I do not have your correct file:  <code>perl -e &#39;binmode(STDIN); while(&lt;&gt;) { s&#47;[^\\x20-\\x7f]&#47;?&#47;g; print $_,$&#47; }&#39; &lt; yourfile &gt; filteredfile</code>"}], "owner": {"user_type": "does_not_exist", "display_name": "user11272973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1553787296, "answer_count": 0, "score": 0, "last_activity_date": 1553787859, "creation_date": 1553786216, "last_edit_date": 1553787859, "question_id": 55401144, "link": "https://stackoverflow.com/questions/55401144/remove-all-invalid-characters-from-an-xml-file", "closed_reason": "Duplicate", "title": "remove all invalid characters from an xml file", "body": "<p>i have an xml file, which has errors in it, is not valid. </p>\n\n<p>How could i (using a linux command line utility, or a perl oneliner) remove all invalid characters from my xml file? </p>\n\n<p>I do not mind data loss, all i need is to remove these invalid characters</p>\n\n<p>i have tried with xmllint, and xmlstarlet, from the duplicate question, with no luck.</p>\n\n<p>xmlstarlet fo -o -R -H -D bad.xml 2>/dev/null</p>\n\n<p>Follow the errors i get reported:</p>\n\n<pre><code>invalid_chars.xml:446669: parser error : Char 0xDD2F out of allowed range\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446669: parser error : PCDATA invalid Char value 56623\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446670: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446670: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446670: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446670: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446699: parser error : Char 0xDBF5 out of allowed range\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446699: parser error : PCDATA invalid Char value 56309\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446700: parser error : Char 0xD975 out of allowed range\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446700: parser error : PCDATA invalid Char value 55669\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446703: parser error : Char 0xDA64 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446703: parser error : PCDATA invalid Char value 55908\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446730: parser error : Char 0xDD1D out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446730: parser error : PCDATA invalid Char value 56605\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446730: parser error : Char 0xDBE9 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:446730: parser error : PCDATA invalid Char value 56297\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:446758: parser error : Char 0xD9F2 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:446758: parser error : PCDATA invalid Char value 55794\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:446758: parser error : Char 0xD860 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:446758: parser error : PCDATA invalid Char value 55392\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:446795: parser error : Char 0xDD2F out of allowed range\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446795: parser error : PCDATA invalid Char value 56623\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446796: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446796: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446796: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446796: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446825: parser error : Char 0xDBF5 out of allowed range\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446825: parser error : PCDATA invalid Char value 56309\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446826: parser error : Char 0xD975 out of allowed range\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446826: parser error : PCDATA invalid Char value 55669\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446829: parser error : Char 0xDA64 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446829: parser error : PCDATA invalid Char value 55908\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446856: parser error : Char 0xDD1D out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446856: parser error : PCDATA invalid Char value 56605\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446856: parser error : Char 0xDBE9 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:446856: parser error : PCDATA invalid Char value 56297\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:446884: parser error : Char 0xD9F2 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:446884: parser error : PCDATA invalid Char value 55794\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:446884: parser error : Char 0xD860 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:446884: parser error : PCDATA invalid Char value 55392\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:446921: parser error : Char 0xDD2F out of allowed range\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446921: parser error : PCDATA invalid Char value 56623\n            &lt;elementA&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                             ^\ninvalid_chars.xml:446922: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446922: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                         ^\ninvalid_chars.xml:446922: parser error : Char 0xD860 out of allowed range\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446922: parser error : PCDATA invalid Char value 55392\n            &lt;elementE&gt;\u042f\u9f20 \u5c1c \u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25  \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824 \ufd6b\u5a5c &lt;/element\n                                                           ^\ninvalid_chars.xml:446951: parser error : Char 0xDBF5 out of allowed range\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446951: parser error : PCDATA invalid Char value 56309\n            &lt;elementA&gt;\u03e0\uad71\u07e1\ufca0\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                  ^\ninvalid_chars.xml:446952: parser error : Char 0xD975 out of allowed range\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446952: parser error : PCDATA invalid Char value 55669\n            &lt;elementE&gt;\uf82a\ub969\u47e0\u3a61 \u7b60 \ufffd\ufffd\ufffd\uc874\u9a9e  \u4f6d \u1b27, \u1b5c\ue9e0\ua869 \u1c2f\u5ae5 \uc874\u9abc \u7d21 \n                                         ^\ninvalid_chars.xml:446955: parser error : Char 0xDA64 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446955: parser error : PCDATA invalid Char value 55908\n            &lt;elementA&gt;h\u07ad\u17e3\u02af\ufffd\ufffd\ufffd\u0731\u77e4 1992&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446982: parser error : Char 0xDD1D out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446982: parser error : PCDATA invalid Char value 56605\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                ^\ninvalid_chars.xml:446982: parser error : Char 0xDBE9 out of allowed range\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:446982: parser error : PCDATA invalid Char value 56297\n            &lt;elementA&gt;h\u07ad\u17e3\u032f\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u02a1\u9c6f \u07dfd2005&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:447010: parser error : Char 0xD9F2 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:447010: parser error : PCDATA invalid Char value 55794\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                        ^\ninvalid_chars.xml:447010: parser error : Char 0xD860 out of allowed range\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:447010: parser error : PCDATA invalid Char value 55392\n            &lt;elementA&gt;\u02a1\ub9ec\u0771\u1834\u5b30 \u5ae9 \u071fe\u5c5f  \u7ca0 \u0777\ufffd\ufffd\ufffd \ua869 \u7ca0 \u1b5c\u3aa7 \ufffd\ufffd\ufffd\ua72d\u5a72  \uf82b\n                                                                           ^\ninvalid_chars.xml:512490: parser error : Char 0xD863 out of allowed range\n            &lt;elementA&gt;\u05a1\u07e4\ufc9ff\u042b\u0734\ud7e7\u5a73 \u18f9\u37ad\uc974\u0736\u1ce7-\uba61 \u0421\ufffd\ufffd\ufffd\u9fb4 \u7ca0 \u013c\uabf2, \u5c29 \uc76b\n                                                                ^\ninvalid_chars.xml:512490: parser error : PCDATA invalid Char value 55395\n            &lt;elementA&gt;\u05a1\u07e4\ufc9ff\u042b\u0734\ud7e7\u5a73 \u18f9\u37ad\uc974\u0736\u1ce7-\uba61 \u0421\ufffd\ufffd\ufffd\u9fb4 \u7ca0 \u013c\uabf2, \u5c29 \uc76b\n                                                                ^\ninvalid_chars.xml:512595: parser error : Char 0xDBF2 out of allowed range\n            &lt;elementA&gt;\u02b1\u07f4\ud7e6\u042b\u0734\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:512595: parser error : PCDATA invalid Char value 56306\n            &lt;elementA&gt;\u02b1\u07f4\ud7e6\u042b\u0734\ufffd\ufffd\ufffd&lt;/elementA&gt;\n                                   ^\ninvalid_chars.xml:512628: parser error : Char 0xDBF6 out of allowed range\n            &lt;elementA&gt;\u03a5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u016b\ub9ed\u9a9c &lt;/elementA&gt;\n                          ^\ninvalid_chars.xml:512628: parser error : PCDATA invalid Char value 56310\n            &lt;elementA&gt;\u03a5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u016b\ub9ed\u9a9c &lt;/elementA&gt;\n                          ^\ninvalid_chars.xml:512628: parser error : Char 0xDD2F out of allowed range\n            &lt;elementA&gt;\u03a5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u016b\ub9ed\u9a9c &lt;/elementA&gt;\n                             ^\ninvalid_chars.xml:512628: parser error : PCDATA invalid Char value 56623\n            &lt;elementA&gt;\u03a5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \u016b\ub9ed\u9a9c &lt;/elementA&gt;\n</code></pre>\n\n<p>sample record:</p>\n\n<pre><code>&lt;RECORD ID=\"1\"&gt;\n        &lt;RECNO&gt;10962&lt;/RECNO&gt;\n        &lt;RECSTATUS&gt;c&lt;/RECSTATUS&gt;\n        &lt;RECTYPE&gt;a&lt;/RECTYPE&gt;\n        &lt;BIBLIOGRAPHICLEV&gt;m&lt;/BIBLIOGRAPHICLEV&gt;\n        &lt;HIERARCHICALLEV&gt;|&lt;/HIERARCHICALLEV&gt;\n        &lt;DATE&gt;4/12/2000&lt;/DATE&gt;\n        &lt;TIMEID&gt;11/3/2003 7:31:41 \u03bc\u03bc&lt;/TIMEID&gt;\n        &lt;ATION&gt;\u0170\u18e3\u076b \u1834&lt;/ATION&gt;\n        &lt;SUBFIELD_2&gt;001 &lt;/SUBFIELD_2&gt;\n        &lt;SUBFIELD_A&gt;\u0170\u18e3\u076b\uc874\u1834\ufd60\u031d\ubaef\ufffd\ufffd\ufffd&lt;/SUBFIELD_A&gt;\n        &lt;SUBFIELD_E&gt;\u042f\u9f20\u5c1c\u38e5\ubb21 \ufffd\ufffd\ufffd\u4a61\ub76e\u5d25 \u3a61 \ufffd\ufffd\ufffd\u2c65\u07f4\u5824\ufd6b\u5a5c&lt;/SUBFIELD_E&gt;\n        &lt;SUBFIELD_F&gt;\u023c\u4e71\ufca0\u02a1\u1b5d\u2872&lt;/SUBFIELD_F&gt;\n        &lt;SUBFIELD_2&gt;10  &lt;/SUBFIELD_2&gt;\n        &lt;SUBFIELD_A&gt;h\u07ad\u17e3\u0421\u199e\u7c9fd1998&lt;/SUBFIELD_A&gt;\n        &lt;SUBFIELD_2&gt;15  &lt;/SUBFIELD_2&gt;\n        &lt;SUBFIELD_A&gt;157 .&lt;/SUBFIELD_A&gt;\n        &lt;SUBFIELD_D&gt;21 \u5aae&lt;/SUBFIELD_D&gt;\n                &lt;/RECORD&gt;\n</code></pre>\n"}, {"tags": ["database", "sqlite", "perl", "dbi"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1553781977, "post_id": 55399516, "comment_id": 97519541, "body": "<code>SHOW</code> is not a sqlite-dialect SQL command. You want the <code>table_info</code> pragma: <a href=\"https://www.sqlite.org/pragma.html#pragma_table_info\" rel=\"nofollow noreferrer\">sqlite.org/pragma.html#pragma_table_info</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1553783425, "post_id": 55399516, "comment_id": 97520746, "body": "Do you want the <code>CREATE</code> statements, or do you want the column headers? DBI has a built-in way to produce those from the statement handle."}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1553783652, "post_id": 55399516, "comment_id": 97520931, "body": "I&#39;d like the Columns header."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1553784094, "post_id": 55399516, "comment_id": 97521246, "body": "It seems like <a href=\"https://metacpan.org/pod/DBI#NAME1\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#NAME1</a> is not implemented by dbd::SQLite. I get `&quot;bright_yellow&quot; out when I use it."}, {"owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "edited": false, "score": 0, "creation_date": 1553785218, "post_id": 55399516, "comment_id": 97522076, "body": "I tried to use the table_info method (<a href=\"https://metacpan.org/pod/DBI#table_info\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#table_info</a>) but it doesn&#39;t return what I expect."}], "answers": [{"tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": false, "score": 2, "last_activity_date": 1553794400, "creation_date": 1553794400, "answer_id": 55403725, "question_id": 55399516, "link": "https://stackoverflow.com/questions/55399516/perl-get-the-structure-of-a-sqlite-database-using-dbi/55403725#55403725", "title": "Perl - Get the structure of a sqlite database using DBI", "body": "<p>What you're looking for is really just the SQL lite query for the table and column information. This answer <a href=\"https://stackoverflow.com/questions/6460671/sqlite-schema-information-metadata\">SQLite Schema Information Metadata</a> has the full details if this query doesn't work for you, but under the assumption you're using whatever the 'recent' version mentioned in one of the answers is, you can do something like this:</p>\n\n<pre><code># Get the structure of the database\nmy $sth = $dbh-&gt;prepare(\"&lt;&lt;END_SQL\");\nSELECT \n  m.name as table_name, \n  p.name as column_name\nFROM sqlite_master AS m\nJOIN pragma_table_info(m.name) AS p\nORDER BY m.name, p.cid\nEND_SQL\n$sth-&gt;execute();\nmy $last = '';\nwhile (my $row = $sth-&gt;fetchrow_arrayref()) {\n    my ($table, $column) = @$row;\n    if ($table ne $last) {\n        print \"=== $table ===\\n\";\n        $last = $table;\n    }\n    print \"$column\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "is_accepted": true, "score": 1, "last_activity_date": 1553799346, "creation_date": 1553799346, "answer_id": 55404986, "question_id": 55399516, "link": "https://stackoverflow.com/questions/55399516/perl-get-the-structure-of-a-sqlite-database-using-dbi/55404986#55404986", "title": "Perl - Get the structure of a sqlite database using DBI", "body": "<p>After digging through the community answers I finally find a solution using the pragma table_info.</p>\n\n<pre><code>sub get_database_structure {\n\n    # Connect to the database\n    my $dbh = &amp;connect_to_database ();\n\n    # Return the structure of the table execution_host\n    my $sth = $dbh-&gt;prepare('pragma table_info(execution_host)');\n    $sth-&gt;execute();\n    my @struct;\n    while (my $row = $sth-&gt;fetchrow_arrayref()) {\n        push @struct, @$row[1];\n    }\n\n    # Disconnect from the database\n    $dbh-&gt;disconnect ();\n\n    return @struct;\n}\n</code></pre>\n\n<p>It returns a list of the columns name present in the table execution_host.</p>\n\n<p>Thanks for the help !</p>\n"}], "owner": {"reputation": 273, "user_id": 6225765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OWoKx.jpg?s=128&g=1", "display_name": "AntMau", "link": "https://stackoverflow.com/users/6225765/antmau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 55404986, "answer_count": 2, "score": 1, "last_activity_date": 1553799346, "creation_date": 1553781757, "question_id": 55399516, "link": "https://stackoverflow.com/questions/55399516/perl-get-the-structure-of-a-sqlite-database-using-dbi", "title": "Perl - Get the structure of a sqlite database using DBI", "body": "<p>I need to test the structure of my SQLite database which is composed by a unique table with let's say 2 columns (id, name). I can't figure out the SQL query to get the table schema of my database.</p>\n\n<p>I am able to get all the content of the database using the DBI method <code>selectall_arrayref()</code>. However it only returns an array containing the values inside my database. This information is useful but I would like to have a SQL query which returns something like <code>id, name</code> (Basically, the table schema).</p>\n\n<p>I tried the following queries : <code>SHOW COLUMNS FROM $tablename</code> but also <code>SELECT * from $tablename</code> (This one returns all the table content).</p>\n\n<p>Here is my implementation so far : </p>\n\n<pre><code># database path\nmy $db_path   = \"/my/path/to/.database.sqlite\";\nmy $tablename = \"table_name\";\n\nsub connect_to_database {\n\n    # Connect to the database\n    my $dbh = DBI-&gt;connect (\"dbi:SQLite:dbname=$db_path\", \"\", \"\",\n                            { RaiseError =&gt; 1, AutoCommit =&gt; 0 },\n                           )\n    or confess $DBI::errstr;\n    return $dbh;\n}\n\nsub get_database_structure {\n\n    # Connect to the database\n    my $dbh = &amp;connect_to_database();\n\n    # Get the structure of the database\n    my $sth = $dbh-&gt;prepare(\"SHOW COLUMNS FROM $tablename\");\n    $sth-&gt;execute();\n    while (my $inphash = $sth-&gt;fetrow_hashref()) {\n        print $inphash.\"\\n\";\n    }\n\n    # Disconnect from the database\n    $dbh-&gt;disconnect();\n}\n\n# Call the sub to print the database structure\n&amp;get_database_structure();\n</code></pre>\n\n<p>I expect the output to be the structure of my table so <code>id, name</code> but I raise an error : <code>DBD::SQLite::db prepare failed: near \"SHOW\": syntax error</code></p>\n\n<p>I can't find the good query. Any comments or help would be greatly appreciated.</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["bash", "perl", "text", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 0, "creation_date": 1553782434, "post_id": 55399725, "comment_id": 97519892, "body": "Thanks, this has been really helpful. One other thing - I think this just prints to the terminal, is there a way to change inplace?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 0, "creation_date": 1553782453, "post_id": 55399725, "comment_id": 97519904, "body": "@JoshFriedlander Yes, use <code>-i</code> option"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1553782436, "last_edit_date": 1553782436, "creation_date": 1553782343, "answer_id": 55399725, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal/55399725#55399725", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>You may use <code>\\K</code> after your pattern to omit it from the match and match the part you need to change the case of using <code>\\w+</code> (that matches 1 or more letters, digits or underscores):</p>\n\n<pre><code>perl -i -pe 's/self\\.schemata\\.usage\\.\\K\\w+/uc($&amp;)/e' *.py\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/YEaOcZ\" rel=\"nofollow noreferrer\">online demo</a>:</p>\n\n<pre><code>s=\"self._cols = [self.schemata.usage.relevant_string.str()]\"\nperl -pe 's/self\\.schemata\\.usage\\.\\K\\w+/uc($&amp;)/e' &lt;&lt;&lt; \"$s\"\n# =&gt; self._cols = [self.schemata.usage.RELEVANT_STRING.str()]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "edited": false, "score": 1, "creation_date": 1553783028, "post_id": 55399841, "comment_id": 97520404, "body": "Thanks! Was going to ask about the <code>1</code> and <code>2</code>, but I think I found the answer <a href=\"https://stackoverflow.com/questions/4609949/what-does-1-in-sed-do\">here</a> (leaving the link for posterity)"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1553782606, "creation_date": 1553782606, "answer_id": 55399841, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal/55399841#55399841", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>With GNU sed:</p>\n\n<pre><code>$ echo 'self._cols = [self.foo.bar.relevant_string.str()]' |\n    sed -E 's/(self\\.foo\\.bar\\.)([^.]+)/\\1\\U\\2/'\nself._cols = [self.foo.bar.RELEVANT_STRING.str()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1553785741, "creation_date": 1553785741, "answer_id": 55400970, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal/55400970#55400970", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>Could you please try following.</p>\n\n<pre><code>awk '\nmatch($0,/self\\.foo\\.bar\\.[^.]*/){\n  print substr($0,1,RSTART+12) toupper(substr($0,RSTART+13,RLENGTH-13)) substr($0,RSTART+RLENGTH)\n  next\n}\n1\n'  Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>self._cols = [self.foo.bar.RELEVANT_STRING.str()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 2, "last_activity_date": 1553786675, "creation_date": 1553786675, "answer_id": 55401313, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal/55401313#55401313", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>One more Perl, using look-behind</p>\n\n<pre><code>$ echo \"self._cols = [self.foo.bar.relevant_string.str()]\" |\n    perl -pe 's/(?&lt;=self.foo.bar.)(\\w+)/uc($1)/ge'\nself._cols = [self.foo.bar.RELEVANT_STRING.str()]\n$\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1554603962, "creation_date": 1554603962, "answer_id": 55555093, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal/55555093#55555093", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>use perl 5, or gnu sed</p>\n\n<pre><code>perl -i -pe 's/(self.foo.bar.)(\\w+)/\\1\\U\\2/g' *.py\n</code></pre>\n\n<p>identically just replace 'perl -i -pe' with</p>\n\n<pre><code>sed -i -E \n</code></pre>\n"}], "owner": {"reputation": 6569, "user_id": 6220759, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0yuve.jpg?s=128&g=1", "display_name": "Josh Friedlander", "link": "https://stackoverflow.com/users/6220759/josh-friedlander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55399725, "answer_count": 5, "score": 2, "last_activity_date": 1554603962, "creation_date": 1553781545, "last_edit_date": 1553783053, "question_id": 55399445, "link": "https://stackoverflow.com/questions/55399445/capitalise-a-varying-phrase-in-same-position-in-terminal", "title": "Capitalise a varying phrase in same position in Terminal", "body": "<p>I have a number of <code>.py</code> files that contain a line like this:</p>\n\n<pre><code>self._cols = [self.foo.bar.relevant_string.str()]\n</code></pre>\n\n<p>I need to capitalise the <code>relevant_string</code>, to get this </p>\n\n<pre><code>self._cols = [self.foo.bar.RELEVANT_STRING.str()]\n</code></pre>\n\n<p>in all ~100 of them.</p>\n\n<p>Is there a way to do this with bash/awk/perl? I tried something like this</p>\n\n<pre><code>perl  -pe 's/self.foo.bar./uc($&amp;)/e' *.py\n</code></pre>\n\n<p>But it capitalised the captured area, not the part after.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1553774504, "post_id": 55396991, "comment_id": 97514344, "body": "What do you mean with &quot;the code gets stuck&quot;? Can you please <a href=\"https://stackoverflow.com/posts/55396991/edit\">edit</a> your question and elaborate?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1553783635, "post_id": 55396991, "comment_id": 97520915, "body": "Didn&#39;t we already give you a <a href=\"https://stackoverflow.com/questions/55352667\">solution to this problem</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1553776990, "post_id": 55397932, "comment_id": 97515954, "body": "I believe quite a bit of your code is copy/pasted and you might not fully understand what all of it does. You are mixing global and lexical filehandles for reading and writing, which tells me you likely found each individual one somewhere else and have pieced this together from different sources. That&#39;s fine of course. If you need more help, please ask."}, {"owner": {"reputation": 11, "user_id": 11258402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mliz5LW_Pq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyos2B2n4VQLJTe0loFgbIY4UzOA/mo/photo.jpg?sz=128", "display_name": "Kesha", "link": "https://stackoverflow.com/users/11258402/kesha"}, "edited": false, "score": 0, "creation_date": 1553839149, "post_id": 55397932, "comment_id": 97542290, "body": "Could you show me how to create my own pattern then? This is because $RE{balanced}{-parens=&gt;&#39;()&#39; isn&#39;t working to check for &quot;direction:output&quot; string."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1553776956, "creation_date": 1553776956, "answer_id": 55397932, "question_id": 55396991, "link": "https://stackoverflow.com/questions/55396991/cant-create-unknown-regex-resomepattern/55397932#55397932", "title": "Can&#39;t create unknown regex: $RE{some}{pattern}", "body": "<p>You have copy/pasted examples from the <a href=\"https://metacpan.org/pod/Regexp::Common#OO-interface-and-inline-matching/substitution\" rel=\"nofollow noreferrer\">Regexp::Common documentation</a>, but misunderstood what they mean.</p>\n\n<blockquote>\n  <p>The patterns returned from %RE are objects, so rather than writing:</p>\n\n<pre><code>if ($str =~ /$RE{some}{pattern}/ ) {...}\n</code></pre>\n  \n  <p>you can write:</p>\n\n<pre><code>if ( $RE{some}{pattern}-&gt;matches($str) ) {...}\n</code></pre>\n</blockquote>\n\n<p>The <code>{some}{pattern}</code> here is a placeholder for your actual pattern. I believe the one you want is <code>$RE{balanced}{-parens=&gt;'()'}</code>, which you've correctly used literally a line further down.</p>\n"}], "owner": {"reputation": 11, "user_id": 11258402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mliz5LW_Pq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyos2B2n4VQLJTe0loFgbIY4UzOA/mo/photo.jpg?sz=128", "display_name": "Kesha", "link": "https://stackoverflow.com/users/11258402/kesha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553776956, "creation_date": 1553774036, "last_edit_date": 1553775519, "question_id": 55396991, "link": "https://stackoverflow.com/questions/55396991/cant-create-unknown-regex-resomepattern", "title": "Can&#39;t create unknown regex: $RE{some}{pattern}", "body": "<p>I have a code here which throws the following error - \"Can't create unknown regex: $RE{some}{pattern} \" when I am running it using module Regexp::Common.</p>\n\n<p>The objective of the code is to read a file,search for a string and execute 2 conditions. First condition: if the function timing is present for a pin, then search for string \"direction : output\", find consecutive lines below and delete the string containing \"max_transition :\" and if the function timing is not present, then do nothing. If timing function is present and the  search string is \"direction : input\" , then do nothing. This needs to be done multiple times in the file. When I am using the line if( $RE{some}{pattern}->matches($str) )  , the code throws the above error. Please help me solve this error.</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\nuse Regexp::Common;\nuse strict;\nuse warnings;\nmy $inputfile = $ARGV[0];\nmy $str = \"direction : output\";\nopen (INFILE,\"&lt;\",\"$inputfile\") || die \"Can not open Input LIB File\";\nopen (my $OPFILE,\"&gt;\",\"tmpdir/input_lib.lib\") || die \"Can not open Input Text File\";\n    sub do_something_with {\n        my $string=shift;\n        if( $RE{some}{pattern}-&gt;matches($str) )  {\n             if ($string =~ m{timing +($RE{balanced}{-parens=&gt;'()'} +$RE{balanced}{-parens=&gt;'{}'})})  { # has a timing group\n            $string =~ s{^.*max_transition.*\\r?\\n}{}m;\n            }\n        }\n    }\n        return $string;\n    }\n        local $/;\nmy $string=&lt;INFILE&gt;;\n$string=~ s{pin +($RE{balanced}{-parens=&gt;'()'} +$RE{balanced}{-parens=&gt;'{}'})}{\"pin \".do_something_with($1)}ge;\nprint $OPFILE \"$string\";\nclose INFILE;\nclose $OPFILE;\n</code></pre>\n\n<p>My input is :</p>\n\n<pre><code>cell (lib) {\n    dont_use : true ;\n    dont_touch : true ;\n    pin (\"A\") {\n      direction : input ;\n      related_power_pin : VDD ;\n      max_transition : 1 ;\n    }  \n    pin (\"B\")    {\n      direction : output ;\n      related_power_pin : VDD ;\n      max_transition : 10;\n    }              \n    pin (\"C\") {\n      direction : input ;\n      related_power_pin : VDD ;\n      max_transition : 1 ;\n    }  \n    pin (\"D\")    {\n      direction : output ;\n      max_transition : 10;\n      related_power_pin : VDD ;\n    }            \n\n    pin (\"E\")    {\n      direction : output ;\n      clock : true ;\n      max_transition : 20;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n\n    pin (\"F\")    {\n      direction : input ;\n      clock : true ;\n      max_transition : 20;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n      }  \n    }\n</code></pre>\n\n<p>My intended output is :</p>\n\n<pre><code>cell (lib) {\n    dont_use : true ;\n    dont_touch : true ;\n    pin (\"A\") {\n      direction : input ;\n      related_power_pin : VDD ;\n      max_transition : 1 ;\n    }  \n    pin (\"B\")    {\n      direction : output ;\n      related_power_pin : VDD ;\n      max_transition : 10;\n    }              \n    pin (\"C\") {\n      direction : input ;\n      related_power_pin : VDD ;\n      max_transition : 1 ;\n    }  \n    pin (\"D\")    {\n      direction : output ;\n      max_transition : 10;\n      related_power_pin : VDD ;\n    }            \n\n    pin (\"E\")    {\n      direction : output ;\n      clock : true ;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n\n    pin (\"F\")    {\n      direction : input ;\n      clock : true ;\n      max_transition : 20;\n      related_power_pin : VDD ;\n      related_ground_pin : VSS ;\n      timing () {\n        cell_fall (into_f1) {\n          index_1(\"1,2,3,4,5\") ;\n          index_2(\"1,2,3,4,5\") ;\n          values(\"13, 13, 14, 16, 18\",\\\n                 \"13, 14, 15, 16, 19\",\\\n                 \"14, 15, 16, 17, 20\",\\\n                 \"15, 15, 16, 18, 20\",\\\n                 \"15, 16, 17, 18, 21\") ;\n        }  \n      }  \n    }\n</code></pre>\n"}, {"tags": ["html", "regex", "xml", "perl", "grep"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1553767124, "post_id": 55394340, "comment_id": 97509746, "body": "I don&#39;t see how you could possibly get <code>17&#39;h01191</code> from the information you gave us. Please, post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1553767247, "post_id": 55394340, "comment_id": 97509840, "body": "Regardless, you probably <a href=\"https://stackoverflow.com/a/1732454/4990392\">shouldn&#39;t use regex to parse XML</a>, and instead use a <a href=\"https://stackoverflow.com/questions/487213/whats-the-best-xml-parser-for-perl\">XML parser</a>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1553768719, "post_id": 55394340, "comment_id": 97510755, "body": "@rikki: You might also consider accepting a few more <a href=\"https://stackoverflow.com/users/10004688/rikki?tab=questions\">answers to your previous questions</a> if you want people to help you here :-)"}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1554368482, "post_id": 55394340, "comment_id": 97728742, "body": "Some call it <a href=\"https://www.metafilter.com/86689/\" rel=\"nofollow noreferrer\">summoning the daemon</a>, others refer to it as <a href=\"https://blog.codinghorror.com/parsing-html-the-cthulhu-way/\" rel=\"nofollow noreferrer\">the Call for Cthulhu</a> and few just <a href=\"https://stackoverflow.com/a/1732454/8344060\">turned mad and met the Pony</a>. In short, never parse XML or HTML with a regex! Did you try an XML parser such as <code>xmlstarlet</code>, <code>xmllint</code> or <code>xsltproc</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1553767480, "creation_date": 1553767480, "answer_id": 55394840, "question_id": 55394340, "link": "https://stackoverflow.com/questions/55394340/grepping-data-from-an-html-file-gives-some-random-value/55394840#55394840", "title": "Grepping data from an html file gives some random value", "body": "<p>Please don't parse XML with regexes. Use a proper XML parser.</p>\n\n<p>But, ignoring that advice temporarily, I don't get the behaviour you describe when testing your code.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nwhile (&lt;DATA&gt;) {\n  next unless /&lt;SomeAddr&gt;/;\n\n  my $i = index($_, \"&gt;\");\n  my $j = index($_, \"&lt;\");\n  my $Size_in_bits = substr $_, $i + 1, $j - $i - 3;\n  say $Size_in_bits;\n}\n\n__END__\n&lt;Instance&gt;Fuse_Name&lt;/Instance&gt;\n&lt;Id&gt;8'hed&lt;/ID&gt;\n&lt;SomeAddr&gt;17'h00baf&lt;/SomeAddr&gt;\n&lt;PSomeAddr&gt;17'h00baf&lt;/PSomeAddr&gt;\n</code></pre>\n\n<p>And running it:</p>\n\n<pre><code>$ perl parsexml\n17'h00baf\n</code></pre>\n\n<p>Of course, I've had to guess at what a lot of your code looks like because you didn't give us a complete example to test. So it looks likely that your problems are in bits of the code that you haven't shown us.</p>\n\n<p>(My guess would be that there's another <code>&lt;SomeAddr&gt;</code> tag in the file somewhere.)</p>\n"}, {"comments": [{"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1553771064, "post_id": 55395531, "comment_id": 97512202, "body": "I am getting that and it is only happening with that row which is containing hexadecimal no starting with 17 i.e (17&#39;h00baf) . Other hexadecimal no like 8&#39;hed, 16&#39;h037a  I am getting no problem-@Stefan Becker"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1553782559, "post_id": 55395531, "comment_id": 97520004, "body": "@rikki: Telling us that doesn&#39;t really help. We can&#39;t do any more unless you post a complete, runnable, example that demonstrates the problem."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1553769573, "creation_date": 1553769573, "answer_id": 55395531, "question_id": 55394340, "link": "https://stackoverflow.com/questions/55394340/grepping-data-from-an-html-file-gives-some-random-value/55395531#55395531", "title": "Grepping data from an html file gives some random value", "body": "<p><a href=\"https://stackoverflow.com/questions/1732348#1732454\">Never, ever use a regex to parse HTML/XML/...</a>. Always use a proper parser and then implement your algorithm in the DOM domain.</p>\n\n<p>My solution shows how to parse the XML and then extract the text content from <code>&lt;SomeAddr&gt;</code> nodes at the top-level of the XML document.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $doc = XML::LibXML-&gt;load_xml(IO =&gt; \\*DATA);\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n\n# register default NS\n$xpc-&gt;registerNs('default', 'http://some.domain.com/some/path/to');\n\nforeach my $node ($xpc-&gt;findnodes('//default:SomeAddr', $doc)) {\n    print $node-&gt;textContent, \"\\n\";\n}\n\nexit 0;\n\n__DATA__\n&lt;Root xmlns=\"http://some.domain.com/some/path/to\"&gt;\n  &lt;Instance&gt;Fuse_Name&lt;/Instance&gt;\n  &lt;Id&gt;8'hed&lt;/Id&gt;\n  &lt;SomeAddr&gt;17'h00baf&lt;/SomeAddr&gt;\n  &lt;PSomeAddr&gt;17'h00baf&lt;/PSomeAddr&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>Test run</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n17'h00baf\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1553771662, "creation_date": 1553765932, "last_edit_date": 1553771662, "question_id": 55394340, "link": "https://stackoverflow.com/questions/55394340/grepping-data-from-an-html-file-gives-some-random-value", "title": "Grepping data from an html file gives some random value", "body": "<p>I have a XML file using which I am grepping some of the value based on some regex.\nThe XML file looks like this-</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Instance&gt;Fuse_Name&lt;/Instance&gt;\n&lt;Id&gt;8'hed&lt;/ID&gt;\n&lt;SomeAddr&gt;17'h00baf&lt;/SomeAddr&gt;\n&lt;PSomeAddr&gt;17'h00baf&lt;/PSomeAddr&gt;\n</code></pre>\n\n<p>I want to retrieve 17'h00baf value from \"SomeAddr\" tag. I am matching the regex \"SomeAddr\" so as to reach that row in the file and then using index and substr function I am retrieving value using below code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $i = index($row,\"&gt;\");\nmy $j = index($row,\"&lt;\"); \n$Size_in_bits = substr $row,$i+1,$j-$i-3;\n</code></pre>\n\n<p>But after doing this I am not getting 17'h00baf . Instead I am getting 17'h01191 . On similar approach I am able to grep other values which are decimal or string,Only with the hexadecimal values I am facing this problem. Can somebody please tell me what is wrong in the approach??</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1553739958, "post_id": 55389201, "comment_id": 97500102, "body": "osacript doesn&#39;t matter. It&#39;s  just a bash wrapper to the system&#39;s &#39;osascript&#39; command. It is getting called and works as intended."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1553740347, "post_id": 55389284, "comment_id": 97500169, "body": "Thanks. And this has uncovered a blind spot of mine. I&#39;m not sure exactly what the difference is between <code>sh</code> and <code>bash</code>. This helped: <a href=\"https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash\" title=\"difference between sh and bash\">stackoverflow.com/questions/5725296/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1553741612, "post_id": 55389284, "comment_id": 97500432, "body": "@StevieD  But please check <code>ls -l &#47;bin&#47;sh</code>; normally <code>&#47;bin&#47;sh</code> is merely a link to another shell, and that&#39;s most often <code>bash</code>.  However, I find that invoking <code>sh</code> (from a terminal for instance) comes with differences -- perhaps it doesn&#39;t run initialization, even though it really runs <code>bash</code>. In this case that would be why explicit <code>bash</code> (what always should be done of course) solves your problem."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1553741686, "post_id": 55389284, "comment_id": 97500445, "body": "On Mac&#39;s, <code>&#47;bin&#47;sh</code> goes to <code>Mach-O 64-bit executable x86_64</code>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1553741728, "post_id": 55389284, "comment_id": 97500455, "body": "I always thought they were the same as well. The link I provided above points out the differences."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1553741954, "post_id": 55389284, "comment_id": 97500493, "body": "@StevieD They aren&#39;t  the same and the link you found is good and very useful.  I meant to say that these days (I think) the <code>sh</code> on Linux is really a copy of bash (or dash).  Good to see what it is on Mac."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1553744289, "post_id": 55389284, "comment_id": 97500948, "body": "@zdim Invoking bash with <code>sh</code> makes it run in <a href=\"https://www.gnu.org/software/bash/manual/html_node/Bash-POSIX-Mode.html\" rel=\"nofollow noreferrer\">POSIX mode</a>. It does read the startup files, though."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1553750544, "post_id": 55389284, "comment_id": 97502388, "body": "@BenjaminW. Well, alright; thanks for clarifying that. I looked through the differences -- it&#39;s a bit of a mess I&#39;d say: they&#39;re mostly subtle but of consequence (but don&#39;t make it behave like <code>sh</code> either). Reads to me like a warning: don&#39;t do this; surprises live here."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 6, "last_activity_date": 1553739920, "creation_date": 1553739920, "answer_id": 55389284, "question_id": 55389201, "link": "https://stackoverflow.com/questions/55389201/bash-config-file-throwing-errors-when-sourced-from-perl-script/55389284#55389284", "title": "Bash config file throwing errors when sourced from Perl script", "body": "<p>perl's <code>system</code> uses <code>/bin/sh</code> as the shell (<a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"noreferrer\">https://perldoc.perl.org/functions/system.html</a>). It won't understand bash-specific syntax such as process substitutions.</p>\n\n<p>You'll want to explicitly invoke bash:</p>\n\n<pre><code>system 'bash', '-c', q{source ~/.bash_profile; osascript -e 'quit app \"Chromium\"'};\n</code></pre>\n\n<p>Using the <code>q{}</code> single-quoting mechanism to avoid backslashing.</p>\n\n<hr>\n\n<p>A bash note: if you invoke it as an interactive shell, it slurps in the bashrc automatically, so you should be able to do:</p>\n\n<pre><code>system 'bash', '-ic', q{osascript -e 'quit app \"Chromium\"'};\n</code></pre>\n\n<p>ref: <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files\" rel=\"noreferrer\">https://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files</a></p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 2, "accepted_answer_id": 55389284, "answer_count": 1, "score": 2, "last_activity_date": 1553740378, "creation_date": 1553739236, "last_edit_date": 1553740378, "question_id": 55389201, "link": "https://stackoverflow.com/questions/55389201/bash-config-file-throwing-errors-when-sourced-from-perl-script", "title": "Bash config file throwing errors when sourced from Perl script", "body": "<p>Got a line of perl that calls a bash wrapper function after it sources <code>.bash_profile</code></p>\n\n<p><code>system ('source ~/.bash_profile; osascript -e \\'quit app \"Chromium\"\\'');</code></p>\n\n<p>Although the wrapper function gets called and is executed perfectly fine, I'm getting an error thrown from an unrelated bash function:</p>\n\n<pre><code>/Users/me/.bashrc: line 9: syntax error near unexpected token `&lt;'\n/Users/me/.bashrc: line 9: `  done &lt; &lt;(find -L \"$1\" -type f -not -name *.swp -print0 | LC_COLLATE=C sort -dz)'\n</code></pre>\n\n<p>This is the problem function in the <code>.bashrc</code> file:</p>\n\n<pre><code>source_dir() {\n  while IFS= read -r -d $'\\0' file; do\n    source_file \"$file\"\n  done &lt; &lt;(find -L \"$1\" -type f -not -name *.swp -print0 | LC_COLLATE=C sort -dz)\n}\n</code></pre>\n\n<p>This bash function does not throw errors when sourcing it directly, only when loading it through the Perl script. I'm curious to know why.</p>\n\n<p>I'm running bash version 5.0.2.</p>\n"}]