[{"tags": ["bash", "perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "is_accepted": false, "score": 2, "last_activity_date": 1538006004, "last_edit_date": 1538006004, "creation_date": 1537999284, "answer_id": 52526598, "question_id": 52526563, "link": "https://stackoverflow.com/questions/52526563/search-first-pattern-and-search-second-pattern-and-then-insert-a-new-line-above/52526598#52526598", "title": "Search first pattern and search second pattern and then insert a new line above the second pattern", "body": "<p>Set a flag on first match, then search for second match with flag set:</p>\n\n<pre><code> awk '/First-search-text/{f=1}f&amp;&amp;/Second-search-text/{print \"New line to be inserted\"}1' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1986, "user_id": 4023950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f9W1.jpg?s=128&g=1", "display_name": "\u03b1\u0493s\u043d\u03b9\u03b7", "link": "https://stackoverflow.com/users/4023950/%ce%b1%d2%93s%d0%bd%ce%b9%ce%b7"}, "edited": false, "score": 0, "creation_date": 1538028275, "post_id": 52526709, "comment_id": 92000048, "body": "nice, what does that dot <code>. </code> doing? means end of <code>ed</code> script or placeholder for previous line containing <code>Second-search-text</code>?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 1986, "user_id": 4023950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9f9W1.jpg?s=128&g=1", "display_name": "\u03b1\u0493s\u043d\u03b9\u03b7", "link": "https://stackoverflow.com/users/4023950/%ce%b1%d2%93s%d0%bd%ce%b9%ce%b7"}, "edited": false, "score": 1, "creation_date": 1538044598, "post_id": 52526709, "comment_id": 92009164, "body": "it means &quot;end of text to insert&quot;"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1537999972, "creation_date": 1537999972, "answer_id": 52526709, "question_id": 52526563, "link": "https://stackoverflow.com/questions/52526563/search-first-pattern-and-search-second-pattern-and-then-insert-a-new-line-above/52526709#52526709", "title": "Search first pattern and search second pattern and then insert a new line above the second pattern", "body": "<p>Using <a href=\"/questions/tagged/ed\" class=\"post-tag\" title=\"show questions tagged &#39;ed&#39;\" rel=\"tag\">ed</a> </p>\n\n<pre><code>ed file &lt;&lt;'END_OF_COMMANDS'\n/First-search-text/\n/Second-search-text/\ni\nNew line to be inserted\n.\nwq\nEND_OF_COMMANDS\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1538003639, "creation_date": 1538003639, "answer_id": 52527231, "question_id": 52526563, "link": "https://stackoverflow.com/questions/52526563/search-first-pattern-and-search-second-pattern-and-then-insert-a-new-line-above/52527231#52527231", "title": "Search first pattern and search second pattern and then insert a new line above the second pattern", "body": "<p>Insert before every second-match after a first-match:</p>\n\n<pre><code>perl -pe'print \"New line\\n\" if $f &amp;&amp; /^Second-search-text/; $f||=/^First-search-text/'\n</code></pre>\n\n<p>Insert before the first second-match after every first-match:</p>\n\n<pre><code>perl -pe'print \"New line\\n\" if (/^First-search-text/../^Second-search-text/) =~ /E0/'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1538026867, "creation_date": 1538026867, "answer_id": 52530118, "question_id": 52526563, "link": "https://stackoverflow.com/questions/52526563/search-first-pattern-and-search-second-pattern-and-then-insert-a-new-line-above/52530118#52530118", "title": "Search first pattern and search second pattern and then insert a new line above the second pattern", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed '/^First/,/^Second/!b;/^Second/i New line to be inserted' file\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1843535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19567d1c1b33152af87e244e92f34c6f?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/1843535/madhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1538026867, "creation_date": 1537999103, "question_id": 52526563, "link": "https://stackoverflow.com/questions/52526563/search-first-pattern-and-search-second-pattern-and-then-insert-a-new-line-above", "title": "Search first pattern and search second pattern and then insert a new line above the second pattern", "body": "<p>I got stuck with following text processing in a file, such that -> Search the first pattern and then search second pattern and then insert a new line above the second pattern.</p>\n\n<p><strong>File Sample:</strong></p>\n\n<pre><code>some text 1\nFirst-search-text some other text\nsome text 2\nsome text 3\nSecond-search-text\n</code></pre>\n\n<p><strong>Desired output to be replaced in the file:</strong></p>\n\n<pre><code>some text 1\nFirst-search-text some other text\nsome text 2\nsome text 3\nNew line to be inserted\nSecond-search-text\n</code></pre>\n\n<p>any pointers will be great help with awk or sed.</p>\n"}, {"tags": ["perl", "io", "truncation"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 1, "last_activity_date": 1537998843, "creation_date": 1537998843, "answer_id": 52526515, "question_id": 52525991, "link": "https://stackoverflow.com/questions/52525991/perl-to-truncate-input-columns-text-files-for-output/52526515#52526515", "title": "PERL to Truncate Input Columns Text Files for Output", "body": "<p>This isn't the most elegant way, but if you know it is 3 columns (and because you're truncating United States to Unit) then this works:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input = 'input.txt';\nopen my $fhIn, '&lt;', $input or die qq(Unable to open \"$input\" for input: $!);\n\nmy $output = 'output.txt';\nopen my $fhOut, '&gt;', $output or die \"Can't create output.\\n\";\n\nwhile(&lt;$fhIn&gt;) {\n    s/^\\s+//;\n    my ($f1, $f2 , $f3) = split /\\s+/;\n    $f1 = substr $f1, 0, 4;  \n    $f2 = substr $f2, 0, 4;  \n    $f3 = substr $f3, 0, 4;  \n    printf $fhOut \"%-4s %-4s %-4s\\n\",$f1,$f2,$f3; \n}\n</code></pre>\n\n<p>It'll give this output file (you can play with spacing or left/right column alignment by tweaking the printf):</p>\n\n<pre><code>1    2    3   \nRain 65.2 Lond\nSnow 34.4 Unit\nClou 23.0 Germ\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1538021488, "creation_date": 1538021488, "answer_id": 52529338, "question_id": 52525991, "link": "https://stackoverflow.com/questions/52525991/perl-to-truncate-input-columns-text-files-for-output/52529338#52529338", "title": "PERL to Truncate Input Columns Text Files for Output", "body": "<p>As a one-liner:</p>\n\n<pre><code>$ perl -F'/\\s{2,}/' -wlane 'print join(\"  \", map { substr($_, 0, 4) } @F)' a.txt\n</code></pre>\n\n<p>As an actual program (<em>five</em> whole lines): </p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    print join('  ', map { substr($_, 0, 4) } split(/\\s{2,}/)) . \"\\n\";\n}\n\n__DATA__\nRain                  65.22             London\nSnow                  34.44             United States\nCloudy                23.00             Germany\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 52529338, "answer_count": 2, "score": 0, "last_activity_date": 1538021488, "creation_date": 1537995796, "last_edit_date": 1537998190, "question_id": 52525991, "link": "https://stackoverflow.com/questions/52525991/perl-to-truncate-input-columns-text-files-for-output", "title": "PERL to Truncate Input Columns Text Files for Output", "body": "<p>I know there are several examples for truncation in Perl, however for this code objective I have not found a solution in truncating on a text file with 3 columns.</p>\n\n<p>My goal is to use PERL to truncate the 3 columns on a text file to 4 chars only when reading and writing to a text file.</p>\n\n<p>My INPUT text file - input.txt: [Column numbers 1,2,3 and only for reference]</p>\n\n<pre><code>   1                       2                   3\n   Rain                  65.22             London\n   Snow                  34.44             United States\n   Cloudy                23.00             Germany\n</code></pre>\n\n<p>The text file is not tab delimited but only spaces.</p>\n\n<p>My desire OUTPUT file -- output.txt:</p>\n\n<pre><code>1                      2                    3\nRain                  65.2                  Lond\nSnow                  34.4                  Unit\nClou                  23.0                  Germ\n</code></pre>\n\n<p>Instead my output.txt displayed:</p>\n\n<pre><code>Rain    Snow    Cloudy\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nmy $input = 'input.txt';\n\n#open file for reading\nopen my $fhIn, '&lt;', $input or die qq(Unable to open \"$input\" for input: $!);\n\n#open file for writing\nmy $output = 'output.txt';\nopen my $fhOut, '&gt;', $output or die \"Can't create output.\\n\";\n\n\nwhile( &lt;$fhIn&gt;) {\n\n     (s/.{4}\\K.*//s);\n     print  $fhOut $_;         \n}\n</code></pre>\n"}, {"tags": ["python", "perl", "post", "login", "request"], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 3274995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bf264977894cdd38e44a43ad5dd84d?s=128&d=identicon&r=PG&f=1", "display_name": "Madhur", "link": "https://stackoverflow.com/users/3274995/madhur"}, "edited": false, "score": 0, "creation_date": 1538001021, "post_id": 52525535, "comment_id": 91993441, "body": "Nice catch. But still not able to login."}], "tags": [], "owner": {"reputation": 11, "user_id": 4214044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f4b96c50e9bec8fe87211cf2d3aaf11?s=128&d=identicon&r=PG&f=1", "display_name": "arno", "link": "https://stackoverflow.com/users/4214044/arno"}, "is_accepted": false, "score": 0, "last_activity_date": 1537993927, "last_edit_date": 1537993927, "creation_date": 1537993421, "answer_id": 52525535, "question_id": 52525327, "link": "https://stackoverflow.com/questions/52525327/login-to-a-website-using-requests-post-method/52525535#52525535", "title": "Login to a website using requests post method", "body": "<p>It looks like the 3rd key is <strong>_csrf</strong> and not <strong>csrfmiddlewaretoken</strong> in login_data variable: </p>\n\n<p>= ></p>\n\n<pre><code>login_data = dict(userName='USERNAME', password='PASSWORD', _csrf=csrf)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 3274995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bf264977894cdd38e44a43ad5dd84d?s=128&d=identicon&r=PG&f=1", "display_name": "Madhur", "link": "https://stackoverflow.com/users/3274995/madhur"}, "edited": false, "score": 0, "creation_date": 1538000926, "post_id": 52525815, "comment_id": 91993422, "body": "Even for &#39;ctoken&#39; it gives forbidden message. However, for &#39;_csrf&#39; it gives html response stating &#39;Not able to access your account&#39;"}], "tags": [], "owner": {"reputation": 1262, "user_id": 6140888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/145533ebf03ff137be533b4869da2841?s=128&d=identicon&r=PG&f=1", "display_name": "ARR", "link": "https://stackoverflow.com/users/6140888/arr"}, "is_accepted": false, "score": 0, "last_activity_date": 1537994731, "creation_date": 1537994731, "answer_id": 52525815, "question_id": 52525327, "link": "https://stackoverflow.com/questions/52525327/login-to-a-website-using-requests-post-method/52525815#52525815", "title": "Login to a website using requests post method", "body": "<p>First of all try to use requests.session it will store and update all cookies and headers automatically, so you dont have to add them each request.</p>\n\n<p>Second in the perl script I can see they srt ctoken, i guess this is csrf token. So your post data should look like this:</p>\n\n<pre><code>{\n\u201cuserName\u201d: \u201cyour username\u201d,\n\u201cpassword\u201d: \u201cyour password\u201d,\n\u201cctoken\u201d: \u201cthe csrf token\u201d\n}\n</code></pre>\n\n<p>Also dont forget to update the csrf token after each request.</p>\n"}], "owner": {"reputation": 405, "user_id": 3274995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bf264977894cdd38e44a43ad5dd84d?s=128&d=identicon&r=PG&f=1", "display_name": "Madhur", "link": "https://stackoverflow.com/users/3274995/madhur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537994731, "creation_date": 1537992386, "question_id": 52525327, "link": "https://stackoverflow.com/questions/52525327/login-to-a-website-using-requests-post-method", "title": "Login to a website using requests post method", "body": "<p>I am trying to login to this website : <a href=\"https://www.blackrock.com/userplatform/signOn\" rel=\"nofollow noreferrer\">https://www.blackrock.com/userplatform/signOn</a></p>\n\n<p>And I am using the following script to do so :</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nheaders = {\n    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:55.0) Gecko/20100101 Firefox/55.0'\n}\nresp = requests.get('https://www.ishares.com/us/sign-on.saml', headers=headers)\n\nsoup_object =  BeautifulSoup(resp.text, 'html.parser')\n\ncsrf = soup_object.select_one('meta[name=\"_csrf\"]').get('content')\n\nlogin_data = dict(userName='USERNAME', password='PASSWORD', csrfmiddlewaretoken=csrf)\n\nr = requests.post('https://www.blackrock.com/userplatform/signOn', data=login_data, headers={\"Referer\": \"https://www.blackrock.com\"})\n</code></pre>\n\n<p>However, when I run the script in postman it gives me forbidden 403 error message. Can somebody please suggest what am I doing wrong?</p>\n\n<p>The site has even shared a script for login into their portal and downloading some files. But it is written in perl. Sharing that script for reference.  But I want to do it using python. </p>\n\n<pre><code>use strict;\nuse File::Basename;\nuse Getopt::Long;\nuse WWW::Mechanize;\nuse URI qw( );\n\nmy $thisScript = basename($0);\nprint \"==START $thisScript==\\n\";\nmy ($help, $proxy, $username, $password);\nmy $urlsToBeDownloaded = \"file-url-list.txt\";\nmy $url = \"https://www.ishares.com/us/sign-on.saml\";\nusage() if (@ARGV &lt; 2 or ! GetOptions('proxy:s' =&gt; \\$proxy, \n                                      'username=s' =&gt; \\$username, \n                                      'password=s' =&gt; \\$password) \n                        or defined $help);\n\nif ($username eq \"\" || $password eq \"\") {\n        usage();\n}\n\nmy $mech = WWW::Mechanize-&gt;new();\nif($proxy ne \"\"){\n    $mech-&gt;proxy(['http', 'https'], $proxy);    \n}\n$mech-&gt;get($url);\n$mech-&gt;submit();\nmy $ctoken = $mech-&gt;field('ctoken');\n\n$mech-&gt;get($mech-&gt;uri());\n$mech-&gt;submit_form(\n        form_number =&gt; 1,\n        fields    =&gt; {\n                        userName =&gt; $username,\n                        password  =&gt; $password,\n                        ctoken  =&gt; $ctoken\n                     }\n);\n$mech-&gt;submit();\nif($mech-&gt;content() =~ \"sign-out.saml\" ){\n    open (FILE, $urlsToBeDownloaded)or die \"Can't open $urlsToBeDownloaded for read: $!\";\n    while (&lt;FILE&gt;) {\n        chomp;\n        print \"Downloading==&gt;$_ \\n\";\n        eval {\n            $mech-&gt;get($_);\n            $mech-&gt;save_content(getFileNameFromUrl($_));    \n        };\n        if($@){\n            print \"ERROR: Downloading $_. $@\\n\";\n        }\n    }\n    close (FILE);\n} else {\n    print \"ERROR: Invalid email or password. Please try again.\\n\";  \n}\nprint \"==END $thisScript==\\n\";\n\nsub getFileNameFromUrl{\n    my $uri = URI-&gt;new($_[0]);\n    return ( $uri-&gt;path_segments )[-1];\n}\n\nsub usage {\n        print \"\\nUsage: perl $thisScript --proxy &lt;Set the proxy (OPTIONAL)&gt; --username &lt;User Name&gt; --password &lt;Password&gt; \\n\\n\";\n        print(\"Ex: perl $thisScript --proxy \\\"http://proxyurl\\\" --username \\\"testuser\\@test.com\\\" --password \\\"password\\\" \\n\\n\");\n        exit;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1537990185, "post_id": 52524824, "comment_id": 91989375, "body": "If they want to find what&#39;s loaded by a particular module then the second query of <code>%INC</code>  also need run in <code>BEGIN</code>, or they get everything -- <code>BEGIN { ... }; use Module; BEGIN { ... }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537990939, "post_id": 52524824, "comment_id": 91989710, "body": "@Grinnz, That won&#39;t report modules that are loaded by MyApp that but were previously loaded (false negatives), and it will report modules not directly loaded by MyApp (false positives)"}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1537991484, "post_id": 52524824, "comment_id": 91989978, "body": "Thank you @grinnz for your detailed response, the double query on %INC it&#39;s a really appreciated and interesting hack."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538005196, "post_id": 52524824, "comment_id": 91994425, "body": "@ikegami that&#39;s why I presented the two options. It depends what you consider &quot;required by the package&quot;. Though I&#39;d consider the self-prereq-scanning method to be a rather hacky option."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1538005405, "last_edit_date": 1538005405, "creation_date": 1537989970, "answer_id": 52524824, "question_id": 52524591, "link": "https://stackoverflow.com/questions/52524591/how-can-i-get-the-list-of-modules-required-by-a-package/52524824#52524824", "title": "How can I get the list of modules required by a package?", "body": "<p>You can't distinguish between modules loaded in the current file or modules that were already loaded. Consider if you have \"use Module1;\" but Module1 was already loaded, so all that does is import to the current package from the already-loaded module. Where would you then consider that module was loaded from?</p>\n\n<p>Two things you can do depending what you are trying to figure out: you can parse a file to guess what modules it requires (though it doesn't guarantee they'll be loaded from there, they could be already loaded as I mentioned before). A good tool for this is <a href=\"https://metacpan.org/pod/Perl::PrereqScanner::Lite\" rel=\"nofollow noreferrer\">Perl::PrereqScanner::Lite</a>. You can use the <a href=\"https://perldoc.pl/functions/__FILE__\" rel=\"nofollow noreferrer\"><code>__FILE__</code></a> literal to get the name of the current file.</p>\n\n<pre><code>use Perl::PrereqScanner::Lite;\nmy @required = Perl::PrereqScanner::Lite-&gt;new-&gt;scan_file(__FILE__)-&gt;required_modules;\n</code></pre>\n\n<p>The other option is to track what modules are loaded yourself. At the very beginning of the file put this:</p>\n\n<pre><code>my %original_inc;\nBEGIN { %original_inc = %INC }\n</code></pre>\n\n<p>Then either immediately afterward, to find any modules loaded during compile time (including <code>use</code> statements), or in a later subroutine, you can compare how %INC changed:</p>\n\n<pre><code>my @newly_loaded = grep { !exists $original_inc{$_} } keys %INC;\n</code></pre>\n\n<p>In addition to the previously mentioned caveat that modules may have already been previously required and thus already present in %INC, modules you load may load other modules in turn, so the difference is probably not going to exactly match what <code>use</code> statements are in the file.</p>\n\n<p>EDIT: Personally I would avoid both of these methods by obviating the need for such logic in the first place. Instead of loading your modules with <code>use</code>, write a subroutine that loads them using <a href=\"https://metacpan.org/pod/Module::Runtime\" rel=\"nofollow noreferrer\">Module::Runtime</a> and keeps track of what you load with it in some manner, and call that for each module in a BEGIN block. But note that this would defeat automated prereq scanning such as the PrereqScanner module I mentioned above.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538080431, "post_id": 52539675, "comment_id": 92029300, "body": "This is basically a simplified version of <a href=\"https://metacpan.org/pod/Perl::PrereqScanner\" rel=\"nofollow noreferrer\">Perl::PrereqScanner</a>. The Lite alternative exists because it is very slow."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1538060742, "last_edit_date": 1538060742, "creation_date": 1538059614, "answer_id": 52539675, "question_id": 52524591, "link": "https://stackoverflow.com/questions/52524591/how-can-i-get-the-list-of-modules-required-by-a-package/52539675#52539675", "title": "How can I get the list of modules required by a package?", "body": "<p>Another option, if you're <em>only</em> interested in knowing what modules the current file will load/has loaded would be <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dumper;\nuse PPI;\nrequire Mock::Sub;\n\nmy $ppi_doc  = PPI::Document-&gt;new(__FILE__);\nmy $ppi_deps = $ppi_doc-&gt;find('PPI::Statement::Include');\n\nfor (@$ppi_deps){\n    print $_-&gt;module . \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>warnings\nstrict\nData::Dumper\nPPI\nMock::Sub\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1538060742, "creation_date": 1537989024, "last_edit_date": 1537989332, "question_id": 52524591, "link": "https://stackoverflow.com/questions/52524591/how-can-i-get-the-list-of-modules-required-by-a-package", "title": "How can I get the list of modules required by a package?", "body": "<p>I'm writing an extension for Mo*se class system and I need to get the list, from inside a package, of all modules required by the package using the \"use\" statement. \nI tried to inspect the %INC data struct, but I get the list of ALL modules loaded at compile time, and I cannot filter out the modules loaded by my package.\nI guess I have to deal with the Perl debugger, but any suggestion will be really appreciated :-)</p>\n\n<p>Eg: </p>\n\n<pre><code>package MyApp 0.001 ;\nuse Module1 ;\nuse Module2 ;\n...\nsub list_requested_modules {\n    ...HOW TO DO IT ???\n}\n</code></pre>\n"}, {"tags": ["matlab", "perl", "command-line", "automation"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537989353, "post_id": 52524315, "comment_id": 91988979, "body": "Can&#39;t test right now but here&#39;s what I dig up from my history as terminal commands (don&#39;t start matlab first): <code>matlab -nodisplay -nojvm -nosplash -nodesktop -r &#39;script(input)&#39;</code>. Or <code>matlab -nodisplay -nojvm -nosplash -nodesktop -logfile ml_out.txt -r &quot;script(&#39;input&#39;); catch; end; quit&quot;</code>.  These kinds of commands you can run from the terminal or out of another program, for example via <code>system</code> in Perl. The crucial bit is <code>-r</code>, so <code>matlab -r ...</code>."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1537989358, "post_id": 52524315, "comment_id": 91988984, "body": "@Emma, if you want to launch an interactive matlab session and then send commands to it, you might want to look into the <a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\">Expect module</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537989783, "post_id": 52524315, "comment_id": 91989194, "body": "In my comment above, you&#39;ll also want to exit once the matlab script is done, so at the end of the first command: <code>... &#39;script(input)&#39;; exit</code>.  You may also need to redirect the output altogether."}], "answers": [{"tags": [], "owner": {"reputation": 22333, "user_id": 105904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d5e91449cf3aa5bc6d8dff8771a623?s=128&d=identicon&r=PG", "display_name": "Andrew Janke", "link": "https://stackoverflow.com/users/105904/andrew-janke"}, "is_accepted": true, "score": 2, "last_activity_date": 1537998302, "creation_date": 1537998302, "answer_id": 52526427, "question_id": 52524315, "link": "https://stackoverflow.com/questions/52524315/automatically-and-repeatedly-execute-a-matlab-script-using-the-perl-system-funct/52526427#52526427", "title": "Automatically and repeatedly execute a matlab script using the perl system function", "body": "<p>It looks like this line:</p>\n\n<pre><code>system(\" NPBSS_CLR('$short_name', '-n 1') \")\n</code></pre>\n\n<p>will end up calling something like this as a shell command:</p>\n\n<pre><code>NPBSS_CLR('TTCCACTGCGGAGCACCAGT_91.fsa', '-n 1')\n</code></pre>\n\n<p>There are two issues here:</p>\n\n<ul>\n<li>NPBSS_CLR is a Matlab function, not an OS-visible command you can call from the shell</li>\n<li>Parentheses (<code>(...)</code>) have special meaning to the shell</li>\n</ul>\n\n<p>To run a Matlab function from Perl's <code>system(...)</code>, you need to have it launch Matlab to run that function using <code>matlab</code>'s <code>-r</code> option. Something like this:</p>\n\n<pre><code>system(\"/Applications/MATLAB_R2018a.app/bin/matlab -nodesktop -nosplash -r \\\"NPBSS_CLR('$short_name', '-n 1'); exit\\\"\");\n</code></pre>\n\n<p>The <code>.../matlab</code> invocation will get you running Matlab, and the escaped quotes (<code>\\\"...\\\"</code>) will \"protect\" the parentheses.</p>\n\n<p>But if I were you, I would simplify this setup by removing the Perl script entirely and re-writing it as a Matlab M-code script that could call the <code>NPBSS_CLR</code> function directly. That way you don't have to worry about quoting your values to get through Perl and the shell, avoid the overhead of launching multiple Matlab sessions, and can work with everything in a single Matlab session's debugger. Something like this:</p>\n\n<pre><code>%Automate_NPBSS.m\nfunction Automate_NPBSS\n\ncd('/Users/user/Desktop/NPBSS_MATLAB-master/');\nd = dir('*.fsa');\nfor i = 1:numel(d)\n    file = d(i);\n    if isempty(regexp(file.name, '[TAGC]{20}_\\d+\\.fsa'))\n        continue\n    end\n    NPBSS_CLR(file.name, '-n 1');\nend\nend\n</code></pre>\n\n<p>(Only caveat is that you won't be able to easily parallelize this without the Matlab Parallel Computing toolbox, so if you want to do that, you'll need to stick with <code>system()</code> in Perl or Matlab.)</p>\n"}], "owner": {"reputation": 13, "user_id": 10420555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab71e2f87abd443eeee19712a6ceb413?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/10420555/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 52526427, "answer_count": 1, "score": 1, "last_activity_date": 1537998302, "creation_date": 1537987817, "last_edit_date": 1537989317, "question_id": 52524315, "link": "https://stackoverflow.com/questions/52524315/automatically-and-repeatedly-execute-a-matlab-script-using-the-perl-system-funct", "title": "Automatically and repeatedly execute a matlab script using the perl system function", "body": "<p>The matlab script \"NPBSS_CLR.m\" can be found here <a href=\"https://github.com/NWPU-903PR/NPBSS_MATLAB\" rel=\"nofollow noreferrer\">https://github.com/NWPU-903PR/NPBSS_MATLAB</a>. It can only process one input file at a time and requires the following input format: </p>\n\n<pre><code>&gt;&gt; NPBSS_CLR('file.fsa', '-n 1') \n</code></pre>\n\n<p>I have thousands of files to process and would like to do so automatically. First, I get ready to use matlab in the terminal. </p>\n\n<pre><code>cd /Applications/MATLAB_R2018a.app/bin \n./matlab -nodesktop -nosplash \n</code></pre>\n\n<p>Then I try to run a Perl script I wrote for this job, but I get \" syntax error near unexpected token `'file.fsa',' \" errors. This type of error has been discussed a lot before, but it seems like each case is fairly unique and I am unable to correct this problem in my own code. It might be because of the way I am trying to use Perl in Matlab. If that is the case, how can I get Matlab to automatically process every file for me? I run the perl script like: </p>\n\n<pre><code>&gt;&gt; perl('Automate_NPBSS.pl')\n</code></pre>\n\n<p>The script: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; \nuse warnings;\nuse File::Basename;\n\nmy @files = glob ('/Users/user/Desktop/NPBSS_MATLAB-master/*');\nforeach my $file (@files){\n    my $short_name = basename($file);\n    if ($file =~ m/([TAGC]{20})(_\\d+\\.fsa)/){\n        system(\" NPBSS_CLR('$short_name', '-n 1') \");\n    }\n}\n</code></pre>\n\n<p>Examples of the specific errors: </p>\n\n<pre><code>sh: -c: line 0: syntax error near unexpected token `'TTCCACTGCGGAGCACCAGT_91.fsa','\nsh: -c: line 0: `NPBSS_CLR('TTCCACTGCGGAGCACCAGT_91.fsa', '-n 1') '\n</code></pre>\n"}, {"tags": ["perl", "rpm-spec"], "answers": [{"tags": [], "owner": {"reputation": 5563, "user_id": 836748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0788ea4af0508334e34621bda10a9e?s=128&d=identicon&r=PG", "display_name": "Aaron D. Marasco", "link": "https://stackoverflow.com/users/836748/aaron-d-marasco"}, "is_accepted": false, "score": 1, "last_activity_date": 1538252492, "creation_date": 1538252492, "answer_id": 52572247, "question_id": 52523208, "link": "https://stackoverflow.com/questions/52523208/use-cpanspec-to-create-an-rpm-that-installs-a-desktop-file/52572247#52572247", "title": "Use cpanspec to create an RPM that installs a desktop file", "body": "<p>You need that desktop file added to the <code>%files</code> section. I don't know how to automate it with <code>cpanspec</code>, but your specfile example doesn't have it listed, and that's exactly what <code>rpmbuild</code> told you was wrong.</p>\n"}], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538310971, "creation_date": 1537982841, "last_edit_date": 1538310971, "question_id": 52523208, "link": "https://stackoverflow.com/questions/52523208/use-cpanspec-to-create-an-rpm-that-installs-a-desktop-file", "title": "Use cpanspec to create an RPM that installs a desktop file", "body": "<p>I'm trying to convert some Perl code into an RPM. cpanspec does the job very nicely, accepting a .tar.gz file containing the Perl code, and generating a .SPEC file that actually generates a working RPM.</p>\n\n<p>However, I can't work out how to modify the .SPEC file to make it install a desktop file. In principle, it should be as simple as adding these lines:</p>\n\n<pre><code>Source1:        myapp.desktop\n\n...\n\ndesktop-file-install                               \\                         \n--dir=${RPM_BUILD_ROOT}%{_datadir}/applications    \\\n%{SOURCE1}\n\nxdg-desktop-icon install --novendor %{SOURCE1}\n</code></pre>\n\n<p>That doesn't work, any neither does any other variation. Usually, I get an error like this:</p>\n\n<pre><code>error: Installed (but unpackaged) file(s) found:\n   /usr/share/applications/myapp.desktop\n</code></pre>\n\n<p>I searched google exhaustively and, apparently, no-one in the history of computing has attempted this operation before. Either that, or I'm missing something really obvious.</p>\n\n<p><strong>EDIT:</strong> Following the suggestions below, this minimal .SPEC file produces the desired results. I used rpmbuild, and copied the desktop file and its corresponding image file in /rpm/SOURCES.</p>\n\n<pre><code>Name:           perl-MyApp\nVersion:        1.0\nRelease:        1%{?dist}\nSummary:        MyApp Perl module\nLicense:        Distributable, see COPYING COPYING.LESSER\nGroup:          Development/Libraries\nURL:            http://search.cpan.org/dist/MyApp/\nSource0:        http://www.cpan.org/modules/by-module/MyApp-%{version}.tar.gz\nSource1:        myapp.desktop\nSource2:        myapp.png\nBuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)\nBuildArch:      noarch\nBuildRequires:  perl(ExtUtils::MakeMaker)\nRequires:       perl(:MODULE_COMPAT_%(eval \"`%{__perl} -V:version`\"; echo $version))\n\n%description\nblah blah blah\n\n%prep\n%setup -q -n MyApp-%{version}\n\n%build\n%{__perl} Makefile.PL INSTALLDIRS=vendor\nmake %{?_smp_mflags}\n\n%install\nrm -rf $RPM_BUILD_ROOT\n\nmake pure_install PERL_INSTALL_ROOT=$RPM_BUILD_ROOT\n\nfind $RPM_BUILD_ROOT -type f -name .packlist -exec rm -f {} \\;\nfind $RPM_BUILD_ROOT -depth -type d -exec rmdir {} 2&gt;/dev/null \\;\n\n%{_fixperms} $RPM_BUILD_ROOT/*\n\nmkdir %{buildroot}/usr/share/pixmaps/\ncp -a %{SOURCE2} %{buildroot}/usr/share/pixmaps/myapp.png\n\ndesktop-file-install                                    \\\n--dir=${RPM_BUILD_ROOT}%{_datadir}/applications         \\\n%{SOURCE1}\n\nxdg-desktop-icon install --novendor %{SOURCE2}\n\n%check\nmake test\n\n%clean\nrm -rf $RPM_BUILD_ROOT\n\n%files\n%defattr(-,root,root,-)\n%doc CHANGES COPYING COPYING.LESSER README\n%{perl_vendorlib}/*\n%{_mandir}/man3/*\n/usr/share/applications/myapp.desktop\n/usr/share/pixmaps/myapp.xpm\n</code></pre>\n"}, {"tags": ["file", "perl", "file-io"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537981565, "post_id": 52521764, "comment_id": 91985278, "body": "ug, rather than reusing vars, use curlies to delimit the obviously different pieces of of your code."}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1538067759, "post_id": 52521764, "comment_id": 92023662, "body": "how about creating a symlink?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1538006616, "last_edit_date": 1538006616, "creation_date": 1537979753, "answer_id": 52522450, "question_id": 52521764, "link": "https://stackoverflow.com/questions/52521764/alternative-way-to-use-repetitive-file-handle-statements-in-perl/52522450#52522450", "title": "Alternative way to use repetitive file handle statements in Perl", "body": "<p>When you open a file whatever else that filehandle is attached to is closed first. From <a href=\"http://perldoc.perl.org/functions/close.html\" rel=\"nofollow noreferrer\">close</a></p>\n\n<blockquote>\n  <p>You don't have to close FILEHANDLE if you are immediately going to do another open on it, because open closes it for you. </p>\n</blockquote>\n\n<p>So you can do</p>\n\n<pre><code>open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n...\nopen $fh, '&gt;', $out_file ...\n...\nopen $fh, '&gt;', $another_file ...\n</code></pre>\n\n<p>This does deprive you of opportunity to check for errors on <code>close $fh</code>, which is <em>not</em> done with an automatic close. Also, the line counter <code>$.</code> is not reset this way.</p>\n\n<p>The filehandle cannot be declared repeatedly though, as the shown code does. Being a normal lexical variable you can only have one <code>my</code> declaration in a given scope.</p>\n\n<p>Or, you can write a sub that opens a file, or writes it out altogether. </p>\n\n<p>Finally, there are modules which reduce code to one line, like <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>use Path::Tiny;\n...\npath($file)-&gt;spew(@data);\n</code></pre>\n\n<p>which also nicely checks for errors and croaks if something is wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 5639026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73da79f589ec68418900c025d36d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "MukundK", "link": "https://stackoverflow.com/users/5639026/mukundk"}, "is_accepted": false, "score": 0, "last_activity_date": 1538109850, "creation_date": 1538109850, "answer_id": 52548450, "question_id": 52521764, "link": "https://stackoverflow.com/questions/52521764/alternative-way-to-use-repetitive-file-handle-statements-in-perl/52548450#52548450", "title": "Alternative way to use repetitive file handle statements in Perl", "body": "<p>Perl  <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a> module is capable of providing copy and move features We can wrap them in subroutine to achieve the same  </p>\n\n<pre><code>use File::Copy;\ncopy(\"sourcefile\",\"destinationfile\") or die \"Copy failed: $!\";\ncopy(\"Copy.pm\",\\*STDOUT);\nmove(\"/dev1/sourcefile\",\"/dev2/destinationfile\");\nuse File::Copy \"cp\";\n$n = FileHandle-&gt;new(\"/a/file\",\"r\");\ncp($n,\"x\");\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52522450, "answer_count": 2, "score": 0, "last_activity_date": 1538109850, "creation_date": 1537977079, "question_id": 52521764, "link": "https://stackoverflow.com/questions/52521764/alternative-way-to-use-repetitive-file-handle-statements-in-perl", "title": "Alternative way to use repetitive file handle statements in Perl", "body": "<p>In Perl, to avoid repeating code, a design no, I tried to use the same file handle for writing the same text file to 2 different directories.  Based on from executing my code, I found out that it is not allowable although I could be missing something.  Can you use the same file handle for writing a text file and storing them in 2 different directories?</p>\n\n<p>Looking for a better way.  How can I write the same text file to 2 different directories without duplicating and repeating code?  Like the occurence of repetiton happening in these 2 statements below:</p>\n\n<pre><code>open (my $fh_w1, \"&gt;$path1/$write_File\");\nopen (my $fh_w2, \"&gt;$path2/$write_File\");\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nmy $read_File = 'dataIn.txt';\n\nmy $path1 = 'C:\\Perl\\textfiles';\nmy $path2 = 'C:\\Perl\\databases';\n\nmy $write_File = 'dataOut.txt';\n\n#open file for reading\nopen my $fh_r, '&lt;', $read_File or die qq{Unable to open \"$read_File\" for input: $!};\n\n#open file for writing\nopen (my $fh_w1, \"&gt;$path1/$write_File\");\nopen (my $fh_w2, \"&gt;$path2/$write_File\");\n</code></pre>\n"}, {"tags": ["perl", "oop", "new-operator"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1537976231, "post_id": 52521029, "comment_id": 91982502, "body": "Note that there are some sample uses cases in the package&#39;s <a href=\"https://metacpan.org/source/ACDALTON/AI-Pathfinding-AStar-0.10/t/01_AI-Pathfinding-AStar.t\" rel=\"nofollow noreferrer\">test file</a>. Seems like you have to define a <code>new</code> method in your <code>MyStar</code> package"}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 6026166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b65c865a36c1f49db8d99b0bddef16a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6026166/j-doe"}, "edited": false, "score": 0, "creation_date": 1537978119, "post_id": 52521478, "comment_id": 91983564, "body": "Thanks, a lot! I expected that the CPAN module (so the Parent class of MyAstar) was supposed to provide the <code>new</code> subroutine."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": true, "score": 2, "last_activity_date": 1537976114, "creation_date": 1537976114, "answer_id": 52521478, "question_id": 52521029, "link": "https://stackoverflow.com/questions/52521029/cant-locate-object-method-new-in-perl-using-the-aipathfindingasta/52521478#52521478", "title": "&quot;Can&#39;t locate object method &quot;new&quot; [...]&quot; in Perl using the AI::Pathfinding::AStar CPAN module", "body": "<p>You try to call a function (<code>MyAstar-&gt;new</code>, which conventionally is used as a constructor), but you don't define it. There is no default constructor in Perl (like in e.g., Java).</p>\n\n<p>Add something like this to your MyAstar.pm:</p>\n\n<pre><code>sub new {\n    my $class = shift;\n    my $self = bless{}, $class;\n    # initialize $self here as needed, maybe using any passed arguments in @_\n    return $self;\n}\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 6026166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b65c865a36c1f49db8d99b0bddef16a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6026166/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 52521478, "answer_count": 1, "score": 1, "last_activity_date": 1537976114, "creation_date": 1537974735, "question_id": 52521029, "link": "https://stackoverflow.com/questions/52521029/cant-locate-object-method-new-in-perl-using-the-aipathfindingasta", "title": "&quot;Can&#39;t locate object method &quot;new&quot; [...]&quot; in Perl using the AI::Pathfinding::AStar CPAN module", "body": "<p>This is the first \"serious\" thing I'm doing in Perl, so please pardon me if the question is somewhat silly.</p>\n\n<p>I wanted to play around with the A* pathfinding algorithm. I found the <a href=\"https://metacpan.org/pod/AI::Pathfinding::AStar\" rel=\"nofollow noreferrer\">AI::Pathfinding::AStar</a> CPAN Module and am basically trying to get the given example to work.</p>\n\n<p>First of all I separated the example into two files, because I couldn't figure out how to make the <code>use My::Map::Package;</code> work with everything in a single file. I came up with the following two files:</p>\n\n<p>MyAstar.pm:</p>\n\n<pre><code>package MyAstar;\nuse warnings;\nuse strict;\nuse base \"AI::Pathfinding::AStar\";\n\nmy %NODES = get_all_nodes();\nsub get_all_nodes {...}\nsub getSurrounding {...}\n</code></pre>\n\n<p>main.pl:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage main;\nuse lib '/home/foo/astar/';\nuse warnings;\nuse strict;\nuse MyAstar;\n\nmy $map = MyAstar-&gt;new or die \"No map for you!\";\nmy $path = $map-&gt;findPath(1, 5);\nprint join(', ', @$path), \"\\n\";\n</code></pre>\n\n<p>When I execute main.pl I get the following error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"MyAstar\" at main.pl line 9.</p>\n</blockquote>\n\n<p>I'm not sure what the problem is here. I would have expected, there to be a subroutine by the name <code>new</code> in the <code>AI::Pathfinding::AStar</code> package, but couldn't find it. Is the CPAN Module broken or am I doing something wrong? </p>\n"}, {"tags": ["perl", "datetime", "compare"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1537955135, "post_id": 52514709, "comment_id": 91969081, "body": "The string comparison also gives you the added benefit of working on <code>2018-09-26</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538083458, "post_id": 52514709, "comment_id": 92030560, "body": "String comparison also still works on the format YYYY-MM-DD HH:MM:SS, as well as ISO-8601 (YYYY-MM-DDTHH:MM:SSZ) provided they are all in the same time zone and you use 24 hour format."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1537955277, "last_edit_date": 1537955277, "creation_date": 1537955025, "answer_id": 52514709, "question_id": 52514574, "link": "https://stackoverflow.com/questions/52514574/correct-approach-to-compare-dates-in-string-format-using-perl-script/52514709#52514709", "title": "correct approach to compare dates (in string format) using perl script", "body": "<p>If you use the YYYYMMDD (or %Y%m%d) format, you can compare the dates as numbers or strings. It means both</p>\n\n<pre><code>$dt1 &gt; $dt2\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$dt1 gt $dt2\n</code></pre>\n\n<p>work correctly. I prefer to use string comparison (<code>gt ge lt le eq ne</code>) as we don't use the dates as numbers (we don't add numbers to them etc.) but as strings (you can e.g. extract the year by <code>substr $dt, 0, 4</code>). Also, string comparison still works if you use a separator, e.g. 2018/09/25.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1537967760, "last_edit_date": 1537967760, "creation_date": 1537955068, "answer_id": 52514723, "question_id": 52514574, "link": "https://stackoverflow.com/questions/52514574/correct-approach-to-compare-dates-in-string-format-using-perl-script/52514723#52514723", "title": "correct approach to compare dates (in string format) using perl script", "body": "<p>Your comparison is fine.</p>\n\n<p>Since your <em>dates</em> are really just numbers, and they are in YMD format, a numerical comparison work. The components of the date are sorted by their importance, which is key here.</p>\n\n<ul>\n<li>Year first: <code>2017</code> is always before <code>2018</code></li>\n<li>Month second: October (<code>10</code>) is later than January (<code>01</code>), but the leading zero is important</li>\n<li>Day: same thing, <code>05</code> would be before <code>29</code></li>\n</ul>\n\n<p>So to compare</p>\n\n<ul>\n<li><code>20170101</code> is before <code>20170102</code></li>\n<li><code>20180101</code> is after <code>20171231</code></li>\n</ul>\n\n<p>because it's all just numbers.</p>\n\n<p>For this format there is absolutely no need or benefit from using a date module and parsing the strings. It will not make it easier to read, nor faster. It will just increase the complexity of your code.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537994218, "post_id": 52522887, "comment_id": 91991203, "body": "DateTime is a little bit more wordy, but that&#39;s a side-effect of it being hard to misuse. Time::Piece, otoh, is very easy to use incorrectly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538006309, "post_id": 52522887, "comment_id": 91994620, "body": "@ikegami Thank you very much for the edit; I wanted a most basic example and completely forgot about DateTime&#39;s formatting extensions."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1537994308, "last_edit_date": 1537994308, "creation_date": 1537981641, "answer_id": 52522887, "question_id": 52514574, "link": "https://stackoverflow.com/questions/52514574/correct-approach-to-compare-dates-in-string-format-using-perl-script/52522887#52522887", "title": "correct approach to compare dates (in string format) using perl script", "body": "<p>One can compare strings with dates in such format, as explained, but that's all you can do. </p>\n\n<p>There are of course libraries for date-time work, as I think the question asks.</p>\n\n<p>The most comprehensive one is <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a>, which is extremely rounded in functionality</p>\n\n<pre><code>use DateTime::Format::Strptime;\n\nmy $format = DateTime::Format::Strptime-&gt;new( pattern =&gt; '%y%m%d' );\nmy $dt1 = $format-&gt;parse_datetime($dt1_str);\nmy $dt2 = $format-&gt;parse_datetime($dt2_str);\n\nif ($dt1 &lt; $dt2) { say $dt1-&gt;ymd, \" is earlier than \", $dt2-&gt;ymd }\n</code></pre>\n\n<p>Now you can do all kinds of things with those dates, see documentation.</p>\n\n<p>If you don't need all that much to do and would prefer a far lighter module, there is  <a href=\"https://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\">Time::Piece</a></p>\n\n<pre><code>use Time::Piece;\n\nmy $dt1 = Time::Piece-&gt;strptime($dt1_str, \"%Y%m%d\");\nmy $dt2 = Time::Piece-&gt;strptime($dt2_str, \"%Y%m%d\");\n\nif ($dt1 &lt; $dt2) { say $dt1-&gt;ymd, \" is earlier than \", $dt2-&gt;ymd }\n</code></pre>\n\n<p>which is also simpler to use, for simple things. It comes with a few other conveniences, but if your needs grow more complex be careful as some of the module's interfaces can be tricky.</p>\n"}], "owner": {"reputation": 77, "user_id": 6317972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b39381c35e73f0176cffdfe66f2f6b01?s=128&d=identicon&r=PG&f=1", "display_name": "Ps-kl", "link": "https://stackoverflow.com/users/6317972/ps-kl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 52514723, "answer_count": 3, "score": 0, "last_activity_date": 1537994308, "creation_date": 1537954625, "question_id": 52514574, "link": "https://stackoverflow.com/questions/52514574/correct-approach-to-compare-dates-in-string-format-using-perl-script", "title": "correct approach to compare dates (in string format) using perl script", "body": "<p>i am new to perl scripting. can you please help to compare two date.\ni have </p>\n\n<pre><code>my $dt1 = \"20171026\";\nmy $dt2 = \"20180101\";\n</code></pre>\n\n<p>i am using the below snippet to compare dates, however i am not sure if this is the right way</p>\n\n<pre><code>use strict; use warnings;\n\nmy $dt1 = \"20171026\";\nmy $dt2 = \"20180101\";\nif ($dt1 &gt; $dt2){\n    print \"Hi\";\n}\nelse {\nprint \"hello\";\n}\n</code></pre>\n\n<p>can anyone please suggest me if i can format a string say $dt1 to date time format and compare?</p>\n"}, {"tags": ["arrays", "perl", "hash", "strict"], "comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1537933470, "post_id": 52509553, "comment_id": 91959323, "body": "Welcome to SO Landon, hope you are able to find the answers you seek and nice to see some Perl users.  Can I ask which version of Perl you&#39;re using to satisfy my curiosity?"}, {"owner": {"reputation": 427, "user_id": 6368549, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/89560160519f167db71632379e29d843?s=128&d=identicon&r=PG&f=1", "display_name": "Landon Statis", "link": "https://stackoverflow.com/users/6368549/landon-statis"}, "reply_to_user": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1537965704, "post_id": 52509553, "comment_id": 91975502, "body": "Perl 5.8.8.     Want to thank everyone, as I now have it working......."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1537967035, "post_id": 52509553, "comment_id": 91976387, "body": "If you could, I\u2019d highly suggest you upgrade to at least 5.10 or 5.12 at a minimum, but Perl 5 has much newer versions than those that address significant issues and features that will make your life easier in the long run"}], "answers": [{"comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 1, "creation_date": 1537933442, "post_id": 52509607, "comment_id": 91959317, "body": "Good answer.  Might want to include a link into what autovivication is as it may be a new concept to him"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1537981674, "last_edit_date": 1537981674, "creation_date": 1537933371, "answer_id": 52509607, "question_id": 52509553, "link": "https://stackoverflow.com/questions/52509553/perl-array-hash-strict-refs/52509607#52509607", "title": "Perl array hash - strict refs", "body": "<pre><code>$welcome_data[$x]{email}\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>$welcome_data[$x]-&gt;{email}\n</code></pre>\n\n<p>In other words, <code>$welcome_data[$x]</code> is expected to be a reference (or undef<sup>[1]</sup>). However, in your case, it contained an empty string. It's as is you were doing</p>\n\n<pre><code>${\"\"}{email}\n</code></pre>\n\n<p>That's obviously not what you wanted to do. But fortunately for you, this is exactly the kind of bug strict refs is designed to catch. Now you can go fix wherever you are assigning an empty string to <code>$welcome[$x]</code>.</p>\n\n<hr>\n\n<ol>\n<li><p>If it's undef, Perl will <em>autovivifiy</em> a reference to a new anonymous hash for you as if you had used</p>\n\n<pre><code>( $welcome_data[$x] //= {} )-&gt;{email}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 427, "user_id": 6368549, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/89560160519f167db71632379e29d843?s=128&d=identicon&r=PG&f=1", "display_name": "Landon Statis", "link": "https://stackoverflow.com/users/6368549/landon-statis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537981674, "creation_date": 1537932942, "last_edit_date": 1537933321, "question_id": 52509553, "link": "https://stackoverflow.com/questions/52509553/perl-array-hash-strict-refs", "title": "Perl array hash - strict refs", "body": "<p>this is probably simple for most, but I have a Perl script where I am ot using strict, and use this syntax:</p>\n\n<pre><code>$welcome_data[$x]{email}       = $data[0];\n</code></pre>\n\n<p>It works fine.  Now, when I enable strict:</p>\n\n<pre><code>$welcome_data[$x]{email}       = $data[0];\nCan't use string (\"\") as a HASH ref while \"strict refs\" in use\n</code></pre>\n\n<p>Can anyone help with what I am doing wrong??</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["oracle", "perl", "dbi", "dbd"], "comments": [{"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 1, "creation_date": 1537932497, "post_id": 52507237, "comment_id": 91959076, "body": "The only (remotely) similar thing that I could think of, is writing the program in Java and using JDBC &#39;thin&#39; Ora-client (it works without installed Ora-client, unlike JDBC/oci8 or ODBC)."}], "owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537912772, "creation_date": 1537912772, "question_id": 52507237, "link": "https://stackoverflow.com/questions/52507237/pure-perl-dbi-dbd-to-query-oracle-database", "title": "Pure Perl DBI/DBD to query Oracle database", "body": "<p>Is there the possibility of a Pure Perl DBI connection of some kind to an Oracle database? I'm trying to allow for running queries from many different servers of different architectures and avoid worrying about the specific architecture (e.g. Linux or AIX or Solaris), matching the specific installation location for the Perl modules on every server (the location of my HOME directory varies on different servers), the need to install an Oracle Instant Client on every server, and most especially, the need to do a source install of DBI and DBD::Oracle on each server.</p>\n\n<p>I'm imagining something like the following:</p>\n\n<ul>\n<li>Build and install DBI on a server (with an installed compiler) inside a local::lib environment</li>\n<li>Build and install some kind of pure perl DBD driver (or maybe use one of the built-in DBD drivers?)</li>\n<li>Copy only the directory structure and the .pm files to a target server</li>\n<li>On the target server, run queries against an Oracle database using local::lib to find the modules and DBI_PUREPERL=2 to avoid the need for the .so libraries.</li>\n</ul>\n\n<p>What kind of DBD driver would work in this scenario?  JDBC or ODBC maybe?</p>\n\n<p>Or should I just give up and perform a from-source installation of DBI and DBD::Oracle on sample servers of all the various architectures and then create some kind of installation package of the DBI/DBD modules + Oracle's Instant Client for the each different architecture?  (Bonus points if I can avoid setting LD_LIBRARY_PATH to get Oracle's Instant Client to work.)</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["perl", "hash", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1537897055, "post_id": 52503588, "comment_id": 91948295, "body": "Can you show the content of the <code>%cpudata</code> hash before you enter the last <code>for</code> loop (the replace loop)?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537897588, "post_id": 52503588, "comment_id": 91948577, "body": "Can you indent and clean up the posted code and output? It&#39;s hard to read it this way, and I don&#39;t know whether the shown output is indeed what you have (spaces and linebreaks included).  More importantly, you really should reduce the code to the simplest version that displays the problem.  We cannot test what you have with that <code>ssh</code>, for example.  (Also, in the process of reducing the problem you may well find the error.)"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1537899797, "post_id": 52503588, "comment_id": 91949568, "body": "see edited code, now.  If I can clarify more, let me know!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537903886, "post_id": 52503588, "comment_id": 91951484, "body": "I don&#39;t see problems with the critical code section -- print <code>$new</code> itself before using it in substituion; it&#39;s suspect.  (For one thing, it appears that you have linebreaks in it.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538006861, "post_id": 52503588, "comment_id": 91994757, "body": "@dirman I am curious, how did this go?  Did you add a line to print <code>$new</code> (before it is used in substitution) and did that reveal anything?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1537903349, "post_id": 52504617, "comment_id": 91951261, "body": "The <code>s&#47;&#47;&#47;</code> returns number of substituions made, so your <code>map</code> will return those numbers and overwrite the arrayref elements with them.  You can do what you want with <code>s&#47;&#47;&#47;r</code> where <code>&#47;r</code> modifier has it <i>return</i> the changed string (or the original if no changed occurred). Before this was introduced (v5.16?) you needed  <code>map { s&#47;..&#47;..&#47;g; $_ }</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537903479, "post_id": 52504617, "comment_id": 91951315, "body": "This still uses the (same) regex but in a <code>map</code> instead of in <code>s&#47;..&#47;..&#47;g for @ary</code> ... I don&#39;t understand the point?"}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1537905343, "post_id": 52504617, "comment_id": 91952097, "body": "I tried using the /r and its still printing dups.  see above for more info. Thx!"}], "tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": false, "score": 0, "last_activity_date": 1537900021, "creation_date": 1537900021, "answer_id": 52504617, "question_id": 52503588, "link": "https://stackoverflow.com/questions/52503588/perl-replace-value-in-a-hash-of-array-with-scaler-references/52504617#52504617", "title": "Perl: replace value in a hash of array with scaler references", "body": "<p>Beside the comments above, that the code is hard to read and therefore to understand and that your data structure is not described exactly...</p>\n\n<p>You want to substitute the scalar value <code>'null'</code> by the value in <code>$new</code>, right? Is a regular expression required or is a enough to replace the value if it is <code>'null'</code>:</p>\n\n<pre><code>if ( grep /null/i, @{$cpudata{$lpar}} ) {\n\n    # why are your storing $lpar in $lop?\n    my $lop = $lpar;\n\n    # $new has to use unique variables for specific data #\n    $new = qx(ssh -i $key hscroot\\@$hmc01 lshwres -r proc -m RSQ- \n    20-p8408-44E-SNCCCCCCC --level lpar --filter \\\"lpar_names\\=$lop\\\" -F \n    \\\"curr_procs,curr_max_procs\\\");\n\n    ## maybe map will do the substitution in case you do not need\n    ## a regular expression, just use \n    ##     { ($_ eq \"null\") ? $new : $_ }\n    ## as map instruction\n    @{$cpudata{$lop}} = map { s/null/$new/g } @{$cpudata{$lop}};\n    }\n</code></pre>\n\n<p>Edit: Your edit showed, that you need to replace <code>\"null\\n\"</code>. Therefore you might want to delete the line break and therefore use <code>s/null\\s*/$new/g</code>. Btw... You are expecting a single substitution, thus the <code>/g</code> is not required.</p>\n"}], "owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537906537, "creation_date": 1537895853, "last_edit_date": 1537906537, "question_id": 52503588, "link": "https://stackoverflow.com/questions/52503588/perl-replace-value-in-a-hash-of-array-with-scaler-references", "title": "Perl: replace value in a hash of array with scaler references", "body": "<p>Trying to replace a null value with a known trusted value in this hash.  I am doing so but b/c of my s/.../.../g for ( @...) statement its printing dup values so maybe I am going about this all wrong since I searched and searched.  Here is my code please offer your help.  Thank you!</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $hmc01 = qq(rsqxxxx.xxxx.com);\nmy $key   = qq(/home/root/.ssh/id_rsa_hmcscan);\n# get frame names\npush my @frames, qx(ssh -i $key hscroot\\@$hmc01 lssyscfg -r sys -F \nname|sort);\nchomp @frames;\nmy (%cpudata,$h,$cpus,$max);\nmy $cspu  = q|configurable_sys_proc_units|;\nmy $caspu = q|curr_avail_sys_proc_units|;\n# get cpu attributes for each lpar on each frame\nforeach my $f (@frames) {\n    open ( my $FD, \"-|\", \"ssh -i $key hscroot\\@$hmc01 lshwres -r proc -m \n    $f --level sys -F $cspu,$caspu\" ) or warn $!;\n    print  \"\\nFrame $f has,$cspu,$caspu,\";\n    for my $fdln (&lt;$FD&gt;) {\n        my $cspu2  = +(split /\\,/, $fdln)[0];\n        my $caspu2 = +(split /\\,/, $fdln)[1];\n    }\n    open ( my $FDD, \"-|\", \"ssh -i $key hscroot\\@$hmc01 lshwres -r proc -m \n    $f --level lpar -F \n    \\\"lpar_name\\\\;curr_proc_units\\\\;curr_max_proc_units\\\" \") or warn $!;\n\n    # POPULATE in format name,cpu,maxcpu\n    my ($h,$ccpu,$mcpu);    \n    while (( my $fddln = &lt;$FDD&gt; )) {\n        $h    = +(split(\";\", $fddln, 0))[0];\n        $ccpu = +(split(\";\", $fddln, 0))[1];\n        $mcpu = +(split(\";\", $fddln, 0))[2];\n        push @{$cpudata{$h}}, ($ccpu,$mcpu);\n    }\n}\n# REPLACE\nforeach my $lpar (sort keys %cpudata) {\n    if ( grep /null/i, @{$cpudata{$lpar}} ) {\n        #my $lop = $lpar;\n        ($new) = qx(ssh -i $key hscroot\\@$hmc01 lshwres -r proc -m RSQ-20-p8408-44E-SN783739X --level lpar --filter \\\"lpar_names\\=$lpar\\\" -F \\\"curr_procs,curr_max_procs\\\");\n        #s/null/$new/g for @{$cpudata{$lop}};\n        @{$cpudata{$lpar}} = map { s/null/$new/r } @{$cpudata{$lpar}};\n    }\n    print \"$lpar,\", join(\",\",@{$cpudata{$lpar}}),\"\\n\";\n}\n\nuse Data::Dumper;   print Dumper \\%cpudata;\n## INCORRECT b/c of DUPED output\n'wassapxxxx' =&gt; [\n'6,8\n',\n'6,8\n\n'\n],\n## CORRECT OUTPUT\n'twccntxxxxx' =&gt; [\n'0.2',\n'2.0\n'\n],\n\n# %cpudata, raw\n# 'wassapxxxxx' =&gt; [\n# '2.5',\n# '4.0\n#'\n#],\n# wassapxxxx' =&gt; [\n# null',\n# 'null\n#'\n#                        ],\n# 'rsqgangliaxxx' =&gt; [\n# '0.5',\n# '2.0\n#'\n\n# output of system call top-to-bottom\n# lssyscfg -r sys -F name|sort\n# IDI-8202-E4B-SN10AAF0B\n# RSQ-17-p8286-41A-SNxxxxx\n# RSQ-18-p8286-41A-SNxxxxx\n# RSQ-19-p8408-44E-SNxxxxx\n# RSQ-20-p8408-44E-SNxxxxx\n# RSQ-21-p9009-41A-SNxxxxx\n# RSQ-22-p9009-41A-SNxxxxx\n# RSQ-DR01-8202-E4C-SNxxxx\n# WilData-8202-E4C-SNxxxxx\n\n# lshwres -r proc -m RSQ-22-p9009-41A-SNxxxxx --level lpar -F \n# \"lpar_name;curr_proc_units;curr_max_proc_units\"\n# DTMiSeriesTxx;0.1;1.0\n# NWSPRDxx;0.1;1.0\n# MXDPRDxx;0.2;2.0\n# TWCICOPE3xxx;0.1;1.0\n# vios2xx;1.0;2.0\n# R2iSeriesRsxxxx;0.1;1.0\n# vios2xxx;1.0;2.0\n# wassapdxxx;null;null\n# wassapxxxx;null;null\n</code></pre>\n\n<p>for certain nodes I have to use variable curr_procs,curr_max_procs \nand not curr_proc_units;curr_max_proc_units, hence the variable $new. I am not sure what else to add, I think the code is pretty clear.  Please be specific so I can as well!  Thx!!</p>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537888045, "post_id": 52501225, "comment_id": 91943403, "body": "Both files you have shown are not valid XML as they are both missing a root element. You can&#39;t have multiple elements in one XML document at the root level.   // Have you tried solving this problem yourself?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1537893607, "last_edit_date": 1537893607, "creation_date": 1537892853, "answer_id": 52502798, "question_id": 52501225, "link": "https://stackoverflow.com/questions/52501225/need-to-parse-xml-file-and-print-element-with-checking-an-empty-tag/52502798#52502798", "title": "Need to parse xml file and print element with checking an empty tag", "body": "<p>[ <em>What you posted isn't a valid XML file. I'm assuming what you posted are snippets from XML files. Specifically, I assumed they are found under a root element named <code>root</code>.</em> ]</p>\n\n<p>Using a DOM-based parser like XML::LibXML, it would look like the following:</p>\n\n<pre><code>for my $data_node ($doc-&gt;findnodes('/root/Data')) {\n   if ($data_node-&gt;findnodes('SpecialData')) {\n      say $data_node-&gt;findvalue('Name');\n   }\n}\n</code></pre>\n\n<p>If you don't need anything from other data nodes, you could even use the following:</p>\n\n<pre><code>for my $data_node ($doc-&gt;findnodes('/root/Data[SpecialData]')) {\n   say $data_node-&gt;findvalue('Name');\n}\n</code></pre>\n\n<p>If you don't need anything else from the data nodes, you could even use the following:</p>\n\n<pre><code>say for $doc-&gt;findnodes('/root/Data[SpecialData]/Name/text()');\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7118298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdaVe.jpg?s=128&g=1", "display_name": "Jay S", "link": "https://stackoverflow.com/users/7118298/jay-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1537944673, "answer_count": 1, "score": -6, "last_activity_date": 1537893607, "creation_date": 1537887559, "question_id": 52501225, "link": "https://stackoverflow.com/questions/52501225/need-to-parse-xml-file-and-print-element-with-checking-an-empty-tag", "closed_reason": "Needs more focus", "title": "Need to parse xml file and print element with checking an empty tag", "body": "<p>I need to write a perl script to parse through a XML file. If SpecialData tag has value, then I need to print the Name. I could write this \nfor the following file.</p>\n\n<p>For the following xml file, output should be Name-abc</p>\n\n<pre><code>&lt;Data&gt;\n    &lt;Name&gt;abc&lt;/Name&gt;\n    &lt;SpecialData&gt;Properties&lt;/SpecialData&gt;\n&lt;/Data&gt;\n\n&lt;Data&gt;\n    &lt;Name&gt;mnp&lt;/Name&gt;\n&lt;/Data&gt;\n</code></pre>\n\n<p>But in a xml file as mentioned below, SpecialData tag has an empty tag Properties. I need to write a perl script that will print the name, if SpecialData tag is there. Here the difference is Properties is an inner tag, not a value as the 1st problem. Can anyone help me to write a perl script to do this?</p>\n\n<p>For the following xml file, output should be Name- abc</p>\n\n<pre><code>&lt;Data&gt;\n    &lt;Name&gt;abc&lt;/Name&gt;\n    &lt;SpecialData&gt;\n      &lt;Properties /&gt;\n    &lt;/SpecialData&gt;\n&lt;/Data&gt;\n\n&lt;Data&gt;\n    &lt;Name&gt;mnp&lt;/Name&gt;\n&lt;/Data&gt;\n</code></pre>\n"}, {"tags": ["perl", "windows-10"], "comments": [{"owner": {"reputation": 1533, "user_id": 512686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd4e548d8ce39fb899da825644e6b47?s=128&d=identicon&r=PG", "display_name": "dossy", "link": "https://stackoverflow.com/users/512686/dossy"}, "edited": false, "score": 0, "creation_date": 1537887545, "post_id": 52501099, "comment_id": 91943058, "body": "Exactly what version of ActivePerl did you install?  And, what version of Windows are you on?"}, {"owner": {"reputation": 156, "user_id": 10413759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf777124989c913d58b764554e8bb97?s=128&d=identicon&r=PG&f=1", "display_name": "K Geles", "link": "https://stackoverflow.com/users/10413759/k-geles"}, "reply_to_user": {"reputation": 1533, "user_id": 512686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd4e548d8ce39fb899da825644e6b47?s=128&d=identicon&r=PG", "display_name": "dossy", "link": "https://stackoverflow.com/users/512686/dossy"}, "edited": false, "score": 0, "creation_date": 1537887925, "post_id": 52501099, "comment_id": 91943318, "body": "Windows Version 1803 (OS Build 17134.285) This is perl 5, version 26, subversion 1 (v5.26.1) built for MSWin32-x64-multi-thread"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537892046, "post_id": 52501099, "comment_id": 91945735, "body": "Could you provide the full output, please? (You might have to use an external site like pastebin.com)"}, {"owner": {"reputation": 156, "user_id": 10413759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf777124989c913d58b764554e8bb97?s=128&d=identicon&r=PG&f=1", "display_name": "K Geles", "link": "https://stackoverflow.com/users/10413759/k-geles"}, "edited": false, "score": 0, "creation_date": 1537896522, "post_id": 52501099, "comment_id": 91948031, "body": "Sorry for the late reply, I haven&#39;t used pastedin again, is it proper?  <a href=\"https://pastebin.com/qWc5arxW\" rel=\"nofollow noreferrer\">pastebin.com/qWc5arxW</a>"}, {"owner": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 0, "creation_date": 1537931925, "post_id": 52501099, "comment_id": 91958952, "body": "If you&#39;re going to stay with ActivePerl, you might want to subscribe to some of their Perl-specific mailings lists.  I used them heavily when I was first learning Perl on Windows eighteen years ago."}, {"owner": {"reputation": 156, "user_id": 10413759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf777124989c913d58b764554e8bb97?s=128&d=identicon&r=PG&f=1", "display_name": "K Geles", "link": "https://stackoverflow.com/users/10413759/k-geles"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538146274, "post_id": 52501099, "comment_id": 92054261, "body": "@ikegami Found anything useful from my full output?"}], "answers": [{"comments": [{"owner": {"reputation": 1533, "user_id": 512686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd4e548d8ce39fb899da825644e6b47?s=128&d=identicon&r=PG", "display_name": "dossy", "link": "https://stackoverflow.com/users/512686/dossy"}, "edited": false, "score": 1, "creation_date": 1537888026, "post_id": 52501241, "comment_id": 91943391, "body": "<a href=\"https://www.activestate.com/activeperl/ppm-perl-modules\" rel=\"nofollow noreferrer\">activestate.com/activeperl/ppm-perl-modules</a> - neat, as I&#39;ve never used ActivePerl specifically, I&#39;d never heard of PPM - nice!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1537891949, "post_id": 52501241, "comment_id": 91945687, "body": "Everything you say about Strawberry Perl applies to ActivePerl too."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1537887599, "creation_date": 1537887599, "answer_id": 52501241, "question_id": 52501099, "link": "https://stackoverflow.com/questions/52501099/failed-installation-of-archiveextract-with-cpan/52501241#52501241", "title": "Failed installation of Archive::Extract with Cpan", "body": "<p>Active Perl uses the ppm script to install modules, mixing this with cpan can cause the problems you have seen above. You may find that using <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> works better for you as this comes with a c compiler that will allow you to install non pure Perl modules from cpan</p>\n"}], "owner": {"reputation": 156, "user_id": 10413759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf777124989c913d58b764554e8bb97?s=128&d=identicon&r=PG&f=1", "display_name": "K Geles", "link": "https://stackoverflow.com/users/10413759/k-geles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 52501241, "answer_count": 1, "score": 1, "last_activity_date": 1576149120, "creation_date": 1537887115, "last_edit_date": 1576149120, "question_id": 52501099, "link": "https://stackoverflow.com/questions/52501099/failed-installation-of-archiveextract-with-cpan", "title": "Failed installation of Archive::Extract with Cpan", "body": "<p>I have installed ActivePerl in order to run a bioinformatic tool.\nafter running the tool on Windows PowerShell I got this message:</p>\n\n<blockquote>\n  <p>Perl module Archive::Extract (in core since 2007-07-07) is not installed on this machine!\n  Perl modules are available for download at <a href=\"http://www.cpan.org/\" rel=\"nofollow noreferrer\">http://www.cpan.org/</a></p>\n  \n  <p>If you have CPAN installed try the following:  cpan  install\n  Archive::Extract  exit</p>\n  \n  <p>If you are on Mac or Unix you should run cpan with sudo:  sudo cpan \n  install Archive::Extract  exit</p>\n</blockquote>\n\n<p>So I tried to install it:</p>\n\n<pre><code>cpan\ninstall Archive::Extract\n</code></pre>\n\n<p>and got this:</p>\n\n<blockquote>\n  <p>\"C:\\Perl64\\bin\\perl.exe\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef <em>Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/</em>.t\n  t/01_Archive-Extract.t .. # Older versions of Archive::Zip may cause File::Spec warnings\n  See bug #19713 in rt.cpan.org. It is safe to ignore them\n  t/01_Archive-Extract.t .. 87/?</p>\n</blockquote>\n\n<p>As I'm not adept at this I thought that I should try to install again the <strong>Archive::Zip</strong></p>\n\n<pre><code>install Archive::Zip\n</code></pre>\n\n<p>but I got :</p>\n\n<blockquote>\n  <p>t/25_traversal.t .............. 1/41\n     Failed test 'Tree extraction aborted'\n     at t/25_traversal.t line 97.\n            got: '0'\n       expected: '2'\n   Looks like you failed 1 test of 41.\n  t/25_traversal.t .............. Dubious, test returned 1 (wstat 256, 0x100)\n  Failed 1/41 subtests\n          (less 32 skipped subtests: 8 okay)</p>\n  \n  <h2>Test Summary Report</h2>\n  \n  <p>t/25_traversal.t            (Wstat: 256 Tests: 41 Failed: 1)\n    Failed test:  16\n    Non-zero exit status: 1\n  Files=25, Tests=346, 18 wallclock secs ( 0.19 usr +  0.13 sys =  0.31 CPU)\n  Result: FAIL\n  Failed 1/25 test programs. 1/346 subtests failed.\n  dmake.exe:  Error code 129, while making 'test_dynamic'</p>\n</blockquote>\n\n<p>Could you please explain what's the particular problem in order to understand it and how can I solve it?</p>\n\n<p>I don't know if it's a naive question as I have just started learning about command line tools, Linux, Perl etc.</p>\n"}, {"tags": ["perl", "perl-io"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537875786, "post_id": 52496568, "comment_id": 91935019, "body": "It means what it says. That file doesn&#39;t exist."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1537875907, "post_id": 52496568, "comment_id": 91935105, "body": "If you are just learning, you might want to read <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlopentut.html</a>. The style you used is very much outdated. If you are using a book or a tutorial, it is badly out of date. I suggest you take a look at <a href=\"https://stackoverflow.com/tags/perl/info\">the Perl tag wiki here on Stack Overflow</a>, as it lists a lot of free high-quality up to date resources."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "edited": false, "score": 0, "creation_date": 1537987183, "post_id": 52504834, "comment_id": 91987956, "body": "it worked, just I had to run with a space between &lt; and D:/"}, {"owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "reply_to_user": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "edited": false, "score": 0, "creation_date": 1538031554, "post_id": 52504834, "comment_id": 92001679, "body": "Good to here, nevertheless you should read at least the perldoc document above mentioned by @simbebque. Usage of the suggested three parameter form would have avoided the error, is safer, and the state of the art way to open a file in perl. Do not forget to specify the encoding."}], "tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": false, "score": 0, "last_activity_date": 1537900957, "creation_date": 1537900957, "answer_id": 52504834, "question_id": 52496568, "link": "https://stackoverflow.com/questions/52496568/trying-to-open-a-file-located-in-d-drive-on-command-prompt-using-perl/52504834#52504834", "title": "trying to open a file located in D drive on command prompt using perl", "body": "<p>Are you sure, that the file <code>D:/pay_info.txt</code> exists? Perl is unable to locate that file on the base folder of drive <code>D:</code> (that is the meaning of the error message printed by your <code>die</code> statement).</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1538038928, "creation_date": 1538038928, "answer_id": 52533234, "question_id": 52496568, "link": "https://stackoverflow.com/questions/52496568/trying-to-open-a-file-located-in-d-drive-on-command-prompt-using-perl/52533234#52533234", "title": "trying to open a file located in D drive on command prompt using perl", "body": "<p>In a comment, you say:</p>\n\n<blockquote>\n  <p>I had to run with a space between &lt; and D:/</p>\n</blockquote>\n\n<p>Using the three-argument version of <code>open</code> would have avoided this issue. This has been the approach recommended in the Perl documentation for many years now.</p>\n\n<pre><code>open(my $fh, '&lt;', 'D:/pay_info.txt')\n  or die \"Couldn't open file pay_info.txt, $!\";\n\nwhile (&lt;$fh&gt;) {\n  print $_;\n}\n</code></pre>\n\n<p>I've changed a few other things:</p>\n\n<ul>\n<li>Used a lexical filehandle (<code>$fh</code>) instead of a global one (<code>DATA</code>). Actually, <code>DATA</code> is a special filehandle in Perl so it shouldn't be used for in most code.</li>\n<li>Switched to using single quotes whenever possible (single-quoted strings recognise fewer special characters so it's a good idea to use them whenever possible).</li>\n<li>Removed unnecessary quotes in your <code>print</code> line (actually, the <code>$_</code> is optional there as well).</li>\n<li>Light reformatting to make it more readable.</li>\n</ul>\n"}], "owner": {"reputation": 5, "user_id": 10305571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pHQ6Eh3WrkU/AAAAAAAAAAI/AAAAAAAAAGo/7I1BtePPSAE/photo.jpg?sz=128", "display_name": "shanuj garg", "link": "https://stackoverflow.com/users/10305571/shanuj-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538038928, "creation_date": 1537873109, "last_edit_date": 1537875764, "question_id": 52496568, "link": "https://stackoverflow.com/questions/52496568/trying-to-open-a-file-located-in-d-drive-on-command-prompt-using-perl", "title": "trying to open a file located in D drive on command prompt using perl", "body": "<p>I am trying to learn file handling in Perl, I want to open a .txt file located in D: drive on the terminal on Windows in read mode, so the code I am using is as:</p>\n\n<pre><code>open(DATA, \"&lt;D:/pay_info.txt\") or die \"Couldn't open file pay_info.txt, $!\";\nwhile(&lt;DATA&gt;) \n{ print \"$_\";}\n</code></pre>\n\n<p>it always shows </p>\n\n<blockquote>\n  <p>Couldn't open file pay_info.txt, No such file or directory at\n  C:\\perl\\perl2.pl line 1.</p>\n</blockquote>\n\n<p>what does it mean?</p>\n"}, {"tags": ["regex", "perl", "scripting"], "comments": [{"owner": {"reputation": 1087, "user_id": 7461634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drNta.png?s=128&g=1", "display_name": "Emaro", "link": "https://stackoverflow.com/users/7461634/emaro"}, "edited": false, "score": 2, "creation_date": 1537870272, "post_id": 52495485, "comment_id": 91931727, "body": "Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What did you try to solve your issue?"}], "answers": [{"tags": [], "owner": {"reputation": 40, "user_id": 10079166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0QwW.jpg?s=128&g=1", "display_name": "AFewMistakesAgo", "link": "https://stackoverflow.com/users/10079166/afewmistakesago"}, "is_accepted": false, "score": 0, "last_activity_date": 1537873148, "last_edit_date": 1537873148, "creation_date": 1537871482, "answer_id": 52496045, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl/52496045#52496045", "title": "Sum of Numeric values in Perl", "body": "<p>Try this pattern:</p>\n\n<pre><code>$var =~ m/.+?www.example.com.+?(\\d+\\.\\d{2})$/m\n</code></pre>\n\n<p>This should match against number values at the end of the string / line, where the substring \"www.example.com\" appears previously in the string / line.</p>\n\n<p>The value you are interested in will be in capture group 1 (in perl I believe this defaults to a variable called <code>$1</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537878281, "post_id": 52496514, "comment_id": 91936678, "body": "There&#39;s no URL in this code. There&#39;s a domain, but no URL :-)"}], "tags": [], "owner": {"reputation": 971, "user_id": 9976846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uxw7E.png?s=128&g=1", "display_name": "Nambi_0915", "link": "https://stackoverflow.com/users/9976846/nambi-0915"}, "is_accepted": false, "score": 1, "last_activity_date": 1537879394, "last_edit_date": 1537879394, "creation_date": 1537872949, "answer_id": 52496514, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl/52496514#52496514", "title": "Sum of Numeric values in Perl", "body": "<p>Use look behind <code>(?&lt;=www\\.example\\.com )(\\d+\\.\\d+)</code> This will match the digit next to the domain you give inside the <code>(?&lt;= )</code></p>\n\n<p><a href=\"https://regex101.com/r/smvXz6/2\" rel=\"nofollow noreferrer\">demo</a> </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1537873290, "creation_date": 1537873290, "answer_id": 52496621, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl/52496621#52496621", "title": "Sum of Numeric values in Perl", "body": "<p>There are more than two numbers in each line of data. Your <code>\\d+</code> will match the first digits from the date at the start of the line.</p>\n\n<p>So you want something that matches your number more specifically. We can make use of the fact that your number all have decimal points. So your match should look like <code>\\d+\\.\\d+</code>.</p>\n\n<p>Putting it all together, your code could look something like:</p>\n\n<pre><code>my $total = 0;\nmy $domain = 'www.example.com';\n\nwhile (&lt;&gt;) {\n  next unless /\\Q$domain/;\n  $total += 1 if /(\\d+\\.\\d+)/;\n}\n\nsay \"Total for $domain is $total\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1537875868, "post_id": 52496730, "comment_id": 91935087, "body": "Pedantically, <code>www.example.com</code> is a domain, not a URL :-)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1537878061, "post_id": 52496730, "comment_id": 91936518, "body": "Thanks, fixed. Was under the influence of ran_0315&#39;s reply :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1537878025, "last_edit_date": 1537878025, "creation_date": 1537873656, "answer_id": 52496730, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl/52496730#52496730", "title": "Sum of Numeric values in Perl", "body": "<p>Split each line on whitespace, examine the last two elements - if the second one from right is the same as the first argument of the program, add the last one to the sum.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $domain = shift;\n\nmy $sum = 0;\nwhile (&lt;&gt;) {\n    my @cells = split;\n    $sum += $cells[-1] if $cells[-2] eq $domain;\n}\nprint \"$sum\\n\";\n</code></pre>\n\n<p>Call as</p>\n\n<pre><code>script.pl www.example.com file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1537888366, "creation_date": 1537888366, "answer_id": 52501491, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl/52501491#52501491", "title": "Sum of Numeric values in Perl", "body": "<p>Perl one-liner solution</p>\n\n<pre><code>&gt; cat sum_num.txt\n26/06/2018 12890765 www.example.com 986.00\n31/08/2018 17464946 www.other.com 7627.00\n1/05/2018  65472345 www.example.com 14.00\n&gt; perl -ne ' { s/(.+)\\s+(.+)$/\\2/osmg;$x+=$_;print} END { print \"Sum=$x\\n\"} ' sum_num.txt\n986.00\n7627.00\n14.00\nSum=8627\n&gt;\n</code></pre>\n\n<p>If you want only the Sum, remove the first print statement</p>\n"}], "owner": {"reputation": 1, "user_id": 10412467, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WJ2Vr59tNNI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXH1pJ0haz5Gt8R4KszB-ure_8FVA/mo/photo.jpg?sz=128", "display_name": "Sandeep Seelam", "link": "https://stackoverflow.com/users/10412467/sandeep-seelam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1537985341, "creation_date": 1537869713, "last_edit_date": 1537876012, "question_id": 52495485, "link": "https://stackoverflow.com/questions/52495485/sum-of-numeric-values-in-perl", "title": "Sum of Numeric values in Perl", "body": "<p>I'm new to Perl scripting and now working on a program to improve my knowledge in Perl. For example I have a input file which has data in pattern date, transaction ID, name of website, amount, I'm trying here to get sum of all transactions that are made in www.example.com. Since there are two numeric fields (transaction ID &amp; amount) I'm unable to pick only single value (either amount or transaction ID) using the below command </p>\n\n<pre><code>$var =~ m/(\\d+)/\n</code></pre>\n\n<p>Here is the sample input file.</p>\n\n<pre><code>26/06/2018 12890765 www.example.com 986.00\n31/08/2018 17464946 www.other.com 7627.00\n1/05/2018  65472345 www.example.com 14.00\n</code></pre>\n\n<p>Now help me how can I pick only 986 or 7627 or 14 from the file and \nSo here if run a code with www.example.com as argument I should get sum as 1000.</p>\n"}, {"tags": ["perl", "comparison", "matching"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1537866989, "post_id": 52494508, "comment_id": 91929655, "body": "SO is not a free code writing service. Can you please edit the question to show  what you have already attempted."}, {"owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1537867410, "post_id": 52494508, "comment_id": 91929924, "body": "IF i add != and extract the elements when match =0 am getting the output of elements which is not present in b. But i wanted the matched elements and their indices ."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1537867754, "post_id": 52494508, "comment_id": 91930155, "body": "your code does not even compile"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537868226, "post_id": 52494508, "comment_id": 91930453, "body": "I&#39;ve improved the indentation of your code. You&#39;re welcome, but please do it yourself in the future. Properly indented code is far simpler to read and understand."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537868273, "post_id": 52494508, "comment_id": 91930477, "body": "<code>if ($match = 1)</code> - did you mean that? I suspect you actually wanted <code>if ($match == 1)</code> or even just <code>if ($match)</code>."}, {"owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "edited": false, "score": 0, "creation_date": 1537868395, "post_id": 52494508, "comment_id": 91930557, "body": "sorry $match ==1"}, {"owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "edited": false, "score": 0, "creation_date": 1537868576, "post_id": 52494508, "comment_id": 91930683, "body": "Thank you  Dave Cross. From next time i will improve the indentation."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537869387, "post_id": 52494508, "comment_id": 91931180, "body": "@Komala: So was <code>$match = 1</code> a bug in your program or a mistake you made when re-typing your code on this site? If it&#39;s the latter, then you should <i>always</i> copy and paste code onto this site. Please don&#39;t ever re-type code here as we&#39;ll waste time fixing typos instead of the actual problems in your code (as I potentially just did!)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537869436, "post_id": 52494508, "comment_id": 91931204, "body": "@Komala: Also, now you know about the problem, why haven&#39;t you <a href=\"https://stackoverflow.com/posts/52494508/edit\">edited your question</a> to fix it?"}, {"owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "edited": false, "score": 0, "creation_date": 1537869531, "post_id": 52494508, "comment_id": 91931260, "body": "re-typing. The code i not giving the result as I wanted, I was checking with different ways, but $match =1 is typo error"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "edited": false, "score": 0, "creation_date": 1537870822, "post_id": 52495706, "comment_id": 91932060, "body": "Hi thank you for the answer. I have one more query @a=(3,5,8,6,7,9,9,8); then can i get the multiple index value when it is matched ? i.e., the index of &#39;9&#39; in @a is  5 ,6 ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "edited": false, "score": 0, "creation_date": 1537871146, "post_id": 52495706, "comment_id": 91932264, "body": "@Komala you would have to use an array reference as the value of the lookup hash and push the indexes in there. If you don&#39;t know what that means, I suggest you take a look at <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537891330, "post_id": 52495706, "comment_id": 91945328, "body": "In other words, replace <code>$index_of_a{$value} = $index;</code> with <code>push @{ $indexes_of_a{$value} }, $index;</code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1537871170, "last_edit_date": 1537871170, "creation_date": 1537870426, "answer_id": 52495706, "question_id": 52494508, "link": "https://stackoverflow.com/questions/52494508/get-the-index-from-the-comparison-of-two-different-length-arrays/52495706#52495706", "title": "Get the index from the comparison of two different length arrays", "body": "<h2>Why your code does not work</h2>\n\n<p>You have a fairly simple typo in your code.</p>\n\n<pre><code>#                 V\nif ($a[$i] == $b[$i]) {\n    $match = 1;\n\n    #              V\n    push (@index, $j);\n    last;\n}\n</code></pre>\n\n<p>You are using the <code>$i</code> index of the current element in <code>@a</code> to access the same value in <code>@b</code> every time, and then push <code>$j</code> which you never used to compare. You need to compare <code>$a[$i]</code> with <code>$b[$j]</code>. That one letter change will make the program work.</p>\n\n<pre><code>if ($a[$i] == $b[$j]) {\n    $match = 1;\n    push (@index, $j);\n    last;\n}\n</code></pre>\n\n<h2>A better way to do it</h2>\n\n<p>Your implementation is very inefficient. What you want to do is look up stuff from <code>@b</code> for <code>@a</code>. An easy way to do that is to build a lookup hash (or an <em>index</em>, like the letters on the side of a phone book).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.012; # for say and each on array\n\nmy @a = ( 3, 5, 8, 6, 7, 9 );\nmy @b = ( 5, 9, 3 );\nmy @index;\nmy $match;\n\nmy %index_of_a;\nwhile ( my ( $index, $value ) = each @a ) {\n  $index_of_a{$value} = $index;    # will overwrite\n}\n\nforeach my $value (@b) {\n  if ( exists $index_of_a{$value} ) {\n    say \"The index of '$value' in \\@a is '$index_of_a{$value}'\";\n  }\n}\n</code></pre>\n\n<p>The code iterates over the values of <code>@a</code>. It uses the <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\">array form of <code>each</code></a><sup>1</sup>, which was added in Perl 5.12. It then puts them in a hash by value, so you can look up the index when you know a value.</p>\n\n<p>We then iterate the values in <code>@b</code> and check if there is an index for <code>@a</code> in our hash for the current value.</p>\n\n<p>The output looks like this</p>\n\n<pre><code>The index of '5' in @a is '1'\nThe index of '9' in @a is '5'\nThe index of '3' in @a is '0'\n</code></pre>\n\n<p>If a value exists in <code>@a</code> more than once, the last occurrence will be used. My code does not keep track of which index of <code>@b</code> matched when. I will leave that to you.</p>\n\n<hr>\n\n<p><sup>1) while I generally don't like to use <code>each</code>, for arrays where you want both the value and the index I find it a lot more readable than a C-style <code>for</code> loop.</sup></p>\n"}], "owner": {"reputation": 1, "user_id": 8336040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771b4c7999d8a5c4855bc5df4556e9c5?s=128&d=identicon&r=PG&f=1", "display_name": "Komala", "link": "https://stackoverflow.com/users/8336040/komala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537871170, "creation_date": 1537866700, "last_edit_date": 1537869885, "question_id": 52494508, "link": "https://stackoverflow.com/questions/52494508/get-the-index-from-the-comparison-of-two-different-length-arrays", "title": "Get the index from the comparison of two different length arrays", "body": "<pre><code>#!usr/bin/perl -W\n\nuse strict;\n\nmy @a = (3,5,8,6,7,9);\nmy @b = (3,7,8);\nmy @index;\nmy $match;\n\nforeach my $i (0 .. $#a) {\n    $match = 0;\n    foreach my $j (0 .. $#b) {\n        if ($a[$i] == $b[$i]) {\n            $match = 1;\n            push (@index, $j);\n            last;\n        }            \n    }\n    if ($match == 1) {\n        print \"the values which got matched are $a[$i] at a and index is $i\\n\";\n    }\n}\n\nprint \"the index of b matched is @index\";\n</code></pre>\n\n<p>Hi I want to get the indices and the values where the array elements got matched. </p>\n\n<pre><code>my @a=(3,5,8,6,7,9); \nmy @b=(5,9,3);\n</code></pre>\n\n<p>I want to compare @a and @b and get the index of matched value from a. \n(compared values,ia)\noutput to be something like this ([5,9,3],[1,5,0]). b value 5 is matching at a in index 1.</p>\n\n<p>Can someone help me with this.  I was trying to get first the matched array elements and push the index when match is found. But am not getting the expected result.</p>\n"}, {"tags": ["perl", "merge"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1537852397, "post_id": 52490532, "comment_id": 91922603, "body": "The first obvious problem is <code>if ($columns1[1]=$columns3[1])</code>. Use <code>==</code> for comparing numbers; <code>=</code> means assignment."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1537853644, "post_id": 52490532, "comment_id": 91922972, "body": "Another problem is the logic in your code doesn&#39;t match your description. You compare columns in file1 and file3 first, do something if they&#39;re the same, compare columns in file1 and file2, do something if they&#39;re the same, else do something else. Your description only talks about the latter two cases... which version is proper?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1537854781, "post_id": 52490532, "comment_id": 91923355, "body": "Your code always consumes one line from each file at every step, no matter which columns are equal."}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537855440, "post_id": 52490532, "comment_id": 91923609, "body": "yes, I found out my code did not do the match stuff. Any suggestions to fix?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1537859910, "post_id": 52490532, "comment_id": 91925827, "body": "I find myself unable to help, as I do not understand the desired output at all. Numbers are just disappearing, what do you mean by &quot;merge&quot; ? Any assumption I test on the data, I easily find a counter example, like the second line with 0 0. Can you please make clear what you are trying to achieve, exactly? That might help you code as well"}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537860696, "post_id": 52490532, "comment_id": 91926261, "body": "the output have 4 columns. chr1 14548 chr1 3014448 (chr1 14548 from file 1 and chr1 3014448 from file 3) depending on file 1, chr1 15240272 can be found in file 2. So the output will becaome (chr1 15240272 0 0)"}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537861470, "post_id": 52490532, "comment_id": 91926639, "body": "if file 1 match with file 2, the output will add two more columns (0 values). otherwise, the list of file1 and file3 will combind together (chr1 68723 chr1 3068620; chr1 80040 chr1 3079928)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1537866842, "post_id": 52490532, "comment_id": 91929564, "body": "Did you write all of that code yourself? It looks like some of it was copied together from other places. I can tell because it&#39;s not indented, because the reading file handles have error messages that say <i>writing</i>, the <code>qq{}</code> operator that doesn&#39;t visually match the rest of the code and the stray <code>close</code>. It would help you if you understood what your code is doing, and why. It would help us to be able to read your code. I will indent it for you, so you can see how that makes it easier to understand. Next time, please do so yourself. Thanks."}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537939193, "post_id": 52490532, "comment_id": 91960806, "body": "I still get the error message about my code; &quot;Use of uninitialized value in numeric eq (==) at Perl_file.pl line 24, &lt;$input3&gt; line 8"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537946100, "post_id": 52511593, "comment_id": 91963706, "body": "Thank you for your script. But I get all new columns were 0 ,0. And how come I still have error message about eq or (==) &quot;Use of uninitialized value in string eq at Perl_file.pl line 18, &lt;$input1&gt; line 9&quot;"}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1537947212, "post_id": 52511593, "comment_id": 91964317, "body": "if (@columns1[1] eq @columns2[2]) The script looks like if columns1 match column2, but they still only print out the ALL the columns1 with 2 new 0 valunes"}, {"owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "reply_to_user": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1538035691, "post_id": 52511593, "comment_id": 92003848, "body": "Slight issue in my code, was comparing the third column from @columns2... which didn&#39;t exist. I&#39;ve adjusted line 18."}], "tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": true, "score": 0, "last_activity_date": 1538035737, "last_edit_date": 1538035737, "creation_date": 1537944648, "answer_id": 52511593, "question_id": 52490532, "link": "https://stackoverflow.com/questions/52490532/perl-merging-columns-and-adding-new-columns-from-different-text-files/52511593#52511593", "title": "Perl merging columns and adding new columns from different text files", "body": "<p>I think I've got it... Though I have no idea of the application.</p>\n\n<p>The main change is that you need to read files 2 and 3 as required to line everything up.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $input1, '&lt;', \"file1.txt\" or die $!;\nopen my $input2, '&lt;', \"file2.txt\" or die $!;\nopen my $input3, '&lt;', \"file3.txt\" or die $!;\nopen my $outfile, '&gt;', \"output.txt\" or die $!;\n\nmy $line2 = &lt;$input2&gt;;\nchomp($line2);\nmy @columns2 = split(/\\t/, $line2);\n\nwhile ( my $line1 = &lt;$input1&gt; ) {\n    chomp($line1);\n    my @columns1 = split(/\\t/, $line1);\n\n    if (@columns1[1] eq @columns2[1]) {\n        # Line from input 1 matches line from input 2\n        # Prep for next match and output zeros\n\n        $line2 = &lt;$input2&gt;;\n        chomp($line2);\n        @columns2 = split(/\\t/, $line2);\n\n        print($outfile join(\"\\t\", @columns1, 0, 0), \"\\n\");\n    } else {\n        # Input 1 does not match input 2\n        # Read input 3 and print\n        my $line3 = &lt;$input3&gt;;\n        print($outfile  $line2, \"\\t\", $line3);\n    }\n}\n# Script ends, file handles are automatically closed\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 52511593, "answer_count": 1, "score": 0, "last_activity_date": 1538035737, "creation_date": 1537849297, "last_edit_date": 1537939127, "question_id": 52490532, "link": "https://stackoverflow.com/questions/52490532/perl-merging-columns-and-adding-new-columns-from-different-text-files", "title": "Perl merging columns and adding new columns from different text files", "body": "<p>I am a beginner with Perl and I want to merge and add new column the content of different text files.</p>\n\n<p>My 1st file have two column.</p>\n\n<pre><code>chr1    14548  \nchr1    15240272  \nchr1    68723  \nchr1    80040  \nchr1    29627919  \nchr1    63585628   \nchr1    177110  \nchr1    199016  \nchr1    63600119 \n</code></pre>\n\n<p>The 2nd file have one column</p>\n\n<pre><code>chr1    15240272  \nchr1    29627919  \nchr1    63585628  \nchr1    63600119  \nchr1    63608794  \nchr1    63620650  \nchr1    65986172  \nchr1    81620996  \nchr1    89015871  \nchr1    96384184 \n</code></pre>\n\n<p>The 3nd file have one column  </p>\n\n<pre><code>chr1    3014448   \nchr1    3068620  \nchr1    3079928  \nchr1    3082514  \nchr1    3176980   \nchr1    3198886  \nchr1    3212349  \nchr1    3249189  \nchr1    3265742  \nchr1    3273096\n</code></pre>\n\n<p>I want my output have 4 columns. </p>\n\n<pre><code>chr1    14548   chr1    3014448  \nchr1    15240272   0    0  \nchr1    68723   chr1    3068620  \nchr1    80040   chr1    3079928  \nchr1    29627919   0    0  \nchr1    82626   chr1    3082514  \nchr1    63585628   0    0  \nchr1    177110  chr1    3176980  \nchr1    199016  chr1    3198886  \nchr1    212740  chr1    3212349\n</code></pre>\n\n<p>if the column1 in 2nd file, add 0 value in the column 2 and 3 of output file. else merge the column from file1 and 3 line by line. ( <code>chr1 14548 = chr1 3014448; chr1 68723 = chr1 3068620</code>, they all depending the sequence order, if I sort the column, it's impossible to identify <code>chr1 14548 = what</code>)</p>\n\n<p>my Perl code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $input1, '&lt;', \"file1.txt\"\n    or die $!;\nopen my $input2, '&lt;', \"file2.txt\"\n    or die $!;\nopen my $input3, '&lt;', \"file3.txt\"\n    or die $!;\nopen my $outfile, '&gt;', \"output.txt\"\n    or die $!;\nwhile ( my $l1 = &lt;$input1&gt; ) {\n  my $l2 = &lt;$input2&gt;;\n  my $l3 = &lt;$input3&gt;;\n  chomp $l1;\n  chomp $l2;\n  chomp $l3;\n\n  my @columns1 = split( /\\t/, $l1 );\n  my @columns2 = split( /\\t/, $l2 );\n  my @columns3 = split( /\\t/, $l3 );\n  if ( $columns2[1] == $columns1[1] ) {\n    print $outfile join( \"\\t\", $columns1[0], $columns1[1], '0', '0' ), \"\\n\";\n  }\n  else {\n    print $outfile\n        join( \"\\t\", $columns1[0], $columns1[1], $columns3[0], $columns3[1] ),\n        \"\\n\";\n  }\n}\nclose;\n</code></pre>\n\n<p>My Perl script can not work very well. Can't add 0 value in the output.</p>\n\n<p>If anyone could help it would be very much appreciated.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "is_accepted": false, "score": 2, "last_activity_date": 1537823126, "last_edit_date": 1537823126, "creation_date": 1537822696, "answer_id": 52487285, "question_id": 52487246, "link": "https://stackoverflow.com/questions/52487246/perl-using-for-case-insensitve-regex-in-if-statement/52487285#52487285", "title": "Perl: Using =~ for case insensitve regex in if statement", "body": "<p>Yes, put an <code>i</code> at the end.</p>\n\n<pre><code>if($cmd =~ /^ManagedElement/i){\n    $cmd = \"TreeNavigation\";\n}\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">Here</a> is the documentation for future reference.</p>\n"}], "owner": {"reputation": 61, "user_id": 10347934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2b89db7289fad8b1496206603718cd?s=128&d=identicon&r=PG&f=1", "display_name": "R F", "link": "https://stackoverflow.com/users/10347934/r-f"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1537823942, "answer_count": 1, "score": -1, "last_activity_date": 1537823126, "creation_date": 1537822562, "question_id": 52487246, "link": "https://stackoverflow.com/questions/52487246/perl-using-for-case-insensitve-regex-in-if-statement", "closed_reason": "Duplicate", "title": "Perl: Using =~ for case insensitve regex in if statement", "body": "<p>Is there a minimal adjustment that i can do to the below code to cover cases where the ManagedElement String is of any case?    </p>\n\n<pre><code>if($cmd =~ /^ManagedElement/){\n    $cmd = \"TreeNavigation\";\n}\n</code></pre>\n"}, {"tags": ["perl", "wc"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1537822196, "post_id": 52486714, "comment_id": 91915549, "body": "The <i>best</i> way to do it would depend on what you&#39;re already doing with the file and when you need the info, but you haven&#39;t shared that info."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537986249, "post_id": 52487152, "comment_id": 91987445, "body": "@Abigail  By: Why go out system-shopping for something that&#39;s squarely in the language&#39;s capability?  There are systemic benefits from staying home (so to speak), while there are very few benefits from going out; it barely saves a line or two of code -- if any -- as we must check etc.  I think computing, and major languages, have evolved so much that the &quot;glue&quot; aspect of Perl isn&#39;t front and center anymore; i take it more to be a complete language that can work out most that&#39;s needed.  But perhaps I went a bit to far and so I edited that away, thank you for calling it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537987038, "post_id": 52487152, "comment_id": 91987876, "body": "@Abigail Well, that&#39;s a valid argument.  But by it all program&#39;s should then be choke full of various external utilities, no? It increases dependency on external code a lot. By &quot;rolling my own&quot; (three lines) I avoid going out to sea, to the system that is. I don&#39;t need &quot;existing code&quot; for such simple stuff (but I don&#39;t see it as bad if people use it, and I used to do it a lot)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537987259, "post_id": 52487152, "comment_id": 91987988, "body": "@Abigail Thinking about it, yes, I refuse to &quot;use existing code&quot; (external utilities) <i>for very simple stuff</i>.  I won&#39;t load a module or go out to system for a single job that&#39;s done fully in two or three lines of code. Now I am responding to your comment of principle; I don&#39;t object to <code>wc</code> or similar system tools."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1537988339, "last_edit_date": 1537988339, "creation_date": 1537822153, "answer_id": 52487152, "question_id": 52486714, "link": "https://stackoverflow.com/questions/52486714/how-to-find-linecount-in-perl/52487152#52487152", "title": "How to find linecount in Perl?", "body": "<p>This question is way too broad and un-specific. But as it is based on an often seen misconception I'd like to comment on that.</p>\n\n<p>A file is a sequence of bytes with no notion of \"lines.\" The lines that we see when a file is displayed are determined by a particular character (or a short sequence of characters) in the file, denoting a \"linebreak\" to be used by software that views or edits the file. They are not a property of a file that one can just look up as metadata.</p>\n\n<p>So you have to read the whole file in order to determine how many \"lines\" it has.</p>\n\n<p>This can be done using native tools in a language or by running an external utility which does this,  like <code>wc</code>. I'd recommended to do it using Perl in a Perl program, since the job fits squarely within Perl's most common uses. Then there are a number of ways to do this but we'd need to see your code in order to offer a specific recommendation.</p>\n"}], "owner": {"reputation": 99, "user_id": 3344013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/131deed33d242151849bec9de1b661e3?s=128&d=identicon&r=PG&f=1", "display_name": "vatsal", "link": "https://stackoverflow.com/users/3344013/vatsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "closed_date": 1537825983, "answer_count": 1, "score": -3, "last_activity_date": 1537988339, "creation_date": 1537820148, "question_id": 52486714, "link": "https://stackoverflow.com/questions/52486714/how-to-find-linecount-in-perl", "closed_reason": "Duplicate", "title": "How to find linecount in Perl?", "body": "<p>How do I find out linecount in perl similar to what wc -l gives me. A method preferably that doesn't require reading the whole file.</p>\n"}, {"tags": ["perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6317972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b39381c35e73f0176cffdfe66f2f6b01?s=128&d=identicon&r=PG&f=1", "display_name": "Ps-kl", "link": "https://stackoverflow.com/users/6317972/ps-kl"}, "edited": false, "score": 0, "creation_date": 1537783870, "post_id": 52475908, "comment_id": 91895200, "body": "thank you very much for your input , it helped. i use the below snippet and it worked"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1537784874, "last_edit_date": 1537784874, "creation_date": 1537780018, "answer_id": 52475908, "question_id": 52475600, "link": "https://stackoverflow.com/questions/52475600/search-for-text-pattern-in-a-directory-using-perl-script/52475908#52475908", "title": "search for text pattern in a directory using perl script", "body": "<p>A good start would be to read <a href=\"https://perldoc.pl/functions/grep\" rel=\"nofollow noreferrer\">the documentation for <code>grep()</code></a>. If you do, you'll see that Perl's <code>grep()</code> works rather differently to the Unix <code>grep</code> command. The Unix command just looks for text in a list of files. The Perl version works on any list of data and returns any elements in that list for which an arbitrary Boolean expression is true.</p>\n\n<p>A Perl version of the Unix command would look something like this:</p>\n\n<pre><code>while (&lt;$some_open_filehandle&gt;) {\n  print if /$some_string/;\n}\n</code></pre>\n\n<p>That's not quite what you want, but we can use it as a start. First, let's write something that takes a filename and string and checks whether the string appears in the file:</p>\n\n<pre><code>sub is_string_in_file {\n  my ($filename, $string) = @_;\n\n  open my $fh, '&lt;', $filename or die \"Cannot open file '$filename': $!\\n\";\n\n  return grep { /$string/ } &lt;$fh&gt;;\n}\n</code></pre>\n\n<p>We can now use that in a loop which uses <code>readdir()</code> to get a list of files.</p>\n\n<pre><code>my @files;\n\nmy $dir = '/opt/files/treated/postpaid/';\nopendir my $dh, $dir or die $!;\n\nwhile (my $file = readdir($dh)) {\n  if (is_string_in_file(\"$dir$file\", 1115852311) {\n     push @files, \"$dir$file\";\n  }\n}\n</code></pre>\n\n<p>After running that code, the list of files that contain your string will be in <code>@files</code>.</p>\n\n<p>You might want to look at <code>glob()</code> instead of <code>opendir()</code> and <code>readdir()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537785109, "post_id": 52477097, "comment_id": 91895887, "body": "I&#39;ve changed my <code>is_string_in_file()</code> subroutine to use a regex check rather than the (rather naive) string comparison that I used before. I think you&#39;ll find that the <code>is_string_in_file()</code> subroutine will be far more flexible if you leave it returning a Boolean flag (as my version does) and handle any printing yo want outside of it."}], "tags": [], "owner": {"reputation": 77, "user_id": 6317972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b39381c35e73f0176cffdfe66f2f6b01?s=128&d=identicon&r=PG&f=1", "display_name": "Ps-kl", "link": "https://stackoverflow.com/users/6317972/ps-kl"}, "is_accepted": false, "score": 1, "last_activity_date": 1537863149, "last_edit_date": 1537863149, "creation_date": 1537784056, "answer_id": 52477097, "question_id": 52475600, "link": "https://stackoverflow.com/questions/52475600/search-for-text-pattern-in-a-directory-using-perl-script/52477097#52477097", "title": "search for text pattern in a directory using perl script", "body": "<p>used the below snippet to achieve what i wanted</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub is_string_in_file {\n  my ($filename, $string) = @_;\n  open my $fh, '&lt;', $filename \n    or die \"Cannot open file \\n\";\n\n\nwhile(my $line = &lt;$fh&gt;){\n  if($line =~ /$string/){\n    print $string;\n    print $filename.\"\\n\";\n  } \n}\n  #return grep { $_ eq $string } &lt;$fh&gt;;\n}\n\nmy @files;\n\nmy $dir = '/opt/files/treated/postpaid/';\nopendir my $dh, $dir or die $!;\n\nwhile (my $file = readdir($dh)) {\n    is_string_in_file(\"$dir$file\", 1115852311);\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6317972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b39381c35e73f0176cffdfe66f2f6b01?s=128&d=identicon&r=PG&f=1", "display_name": "Ps-kl", "link": "https://stackoverflow.com/users/6317972/ps-kl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 52475908, "answer_count": 2, "score": 0, "last_activity_date": 1539778909, "creation_date": 1537778797, "last_edit_date": 1539778909, "question_id": 52475600, "link": "https://stackoverflow.com/questions/52475600/search-for-text-pattern-in-a-directory-using-perl-script", "title": "search for text pattern in a directory using perl script", "body": "<p>could anyone please share with me a snippet where i can do a grep search in perl file. Example,\n i need this grep: <code>grep 1115852311 /opt/files/treated/postpaid/*</code> </p>\n\n<p>to be done in perl script and print all the matches</p>\n\n<p>tried the below, but did not work :</p>\n\n<pre><code>my $start_dir= \"\\opt\\files\\treated\\postpaid\\\";\nmy $file_name = \"*\";\nmy @filematches;\nopendir(DIR, \"$start_dir\");\n@xml_files = grep(1115852311,readdir(DIR));\nprint @xml_files;\n</code></pre>\n"}, {"tags": ["perl", "checksum", "textchanged", "file-monitoring"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1537777767, "post_id": 52475106, "comment_id": 91892103, "body": "&quot;Has file changed&quot; needs to specify since when. See also <a href=\"http://p3rl.org/Linux::Inotify2\" rel=\"nofollow noreferrer\">Linux::Inotify2</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 6561343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLApU.png?s=128&g=1", "display_name": "JGK", "link": "https://stackoverflow.com/users/6561343/jgk"}, "is_accepted": false, "score": 2, "last_activity_date": 1537780750, "creation_date": 1537780750, "answer_id": 52476117, "question_id": 52475106, "link": "https://stackoverflow.com/questions/52475106/best-way-to-check-a-file-content-is-changed-or-not-with-perl/52476117#52476117", "title": "Best way to check a file content is changed or not with perl?", "body": "<p>There are a few possibilities:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/File::Monitor\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/File::Monitor</a></li>\n<li><a href=\"https://metacpan.org/pod/File::Modified\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/File::Modified</a></li>\n</ul>\n\n<p>And Linux-specififc:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Linux::Inotify2\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Linux::Inotify2</a></li>\n</ul>\n\n<p>as mentioned by @choroba</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1537950821, "post_id": 52478155, "comment_id": 91966368, "body": "Thank you very much for your suggestion. But with this, how could we define the $other_modified to be used in if command? Is there any other solution to check the changing of content only?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1537962485, "post_id": 52478155, "comment_id": 91973505, "body": "You can initialize the value of <code>$other_modified</code> the same way: <code>$other_modified = (stat $filename)[9]</code> . You haven&#39;t told us enough about what your program needs to do , so we can&#39;t make good suggestions to your program logic flow."}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1537974351, "post_id": 52478155, "comment_id": 91981343, "body": "With this initialzation, both of $other_modified and $last_modified will be initialized with the same value. It cause the if condition will always got true. Isn&#39;t it?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1538030763, "post_id": 52478155, "comment_id": 92001286, "body": "Both values will start out the same, but if time passes and the file gets modified in between, the values will differ, which is (I think) what the OP wants"}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1538050057, "post_id": 52478155, "comment_id": 92012600, "body": "Hmm i don&#39;t think so.  I think the if() condition always got true and code inside if{} will execute whenever this script is called."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1538051505, "post_id": 52478155, "comment_id": 92013458, "body": "... unless of course the <code>if</code> condition is in a loop like <code>while( 1 ) { my $last_modified = (stat $filename)[9]; if( $filename &gt;= $other_modified ) { print &quot;Modified\\n&quot;; $other_modified=$last_modified }; sleep 60 }</code>"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 2, "last_activity_date": 1537787840, "creation_date": 1537787840, "answer_id": 52478155, "question_id": 52475106, "link": "https://stackoverflow.com/questions/52475106/best-way-to-check-a-file-content-is-changed-or-not-with-perl/52478155#52478155", "title": "Best way to check a file content is changed or not with perl?", "body": "<p>The Perl file operators and the <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">stat</a> function also tell you when a file was last changed (it's modification time) . The common approach is to check against some reference file, that is whether a file was changed later than the reference file, or to check when a file was changed relative to the script start.</p>\n\n<h1>Get the time when a file was last modified</h1>\n\n<pre><code>my $last_modified = (stat $filename)[9];\n\nif( $last_modified &gt;= $other_modified ) {\n    # file changed since we last checked ...\n    $other_modified = $last_modified;\n};\n</code></pre>\n\n<h1>Check if a file was modified some days ago:</h1>\n\n<pre><code>if( -M $filename &gt; 5 ) {\n    print \"'$file' was modified at least 5 days ago\\n\";\n};\n</code></pre>\n\n<h1>See also</h1>\n\n<p><a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">stat</a> , <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">the -M function</a></p>\n"}], "owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537946676, "creation_date": 1537776795, "last_edit_date": 1537946676, "question_id": 52475106, "link": "https://stackoverflow.com/questions/52475106/best-way-to-check-a-file-content-is-changed-or-not-with-perl", "title": "Best way to check a file content is changed or not with perl?", "body": "<p>There is a dynamic file which will be generated before my script executing.</p>\n\n<pre><code>my $file = a.txt;\n</code></pre>\n\n<p>Here i want to check:</p>\n\n<pre><code>(Is content of $file changed)? Do_something: Skip;\n</code></pre>\n\n<p>I'm looking for some solution as below:</p>\n\n<ul>\n<li><p>if ( if_modified( $file );</p>\n\n<p>--> But We need an initialization file and compare with the latest file while here we have only 1 file at a time.</p></li>\n<li><p>$monitor->watch( $file ); Is it able to do my task?</p></li>\n<li><p>I guess that using checksum is not needed because after that i also need to see if checksum result is changed or not.</p></li>\n</ul>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1537772623, "post_id": 52473699, "comment_id": 91889880, "body": "An <code>empty_tags</code> set to <code>&#39;html&#39;</code> only adds the space for single-tag <b>XHTML</b> elements, not arbitrary empty ones. I don&#39;t <i>think</i> there&#39;s a way to do what you want with XML::Twig."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537772976, "post_id": 52473699, "comment_id": 91890049, "body": "Also, don&#39;t use <code>use utf8</code> unless your source file is encoded using UTF-8 and has non-ASCII characters in it. <a href=\"https://perldoc.perl.org/utf8.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/utf8.html</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1537786324, "post_id": 52473699, "comment_id": 91896520, "body": "Why do you want to preserve this space? It&#39;s not syntactically relevant. All of <code>&lt;foo&gt;&lt;&#47;foo&gt;</code>, <code>&lt;foo   &#47;&gt;</code>, <code>&lt;foo &#47;&gt;</code> and <code>&lt;foo&#47;&gt;</code> are equivalent in XML and most HTML versions. Unless the consumer of this data is so badly non-standard that things break for them, you might be wasting time on something irrelevant."}, {"owner": {"reputation": 33, "user_id": 5215261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-Lki09cHRHAw/AAAAAAAAAAI/AAAAAAAAABQ/m1gE0Z2fn2E/photo.jpg?sz=128", "display_name": "dasanb", "link": "https://stackoverflow.com/users/5215261/dasanb"}, "edited": false, "score": 1, "creation_date": 1537792657, "post_id": 52473699, "comment_id": 91900133, "body": "This XML is used by a old application which accepts only when these spaces are retained, I have to pass this xml to that application using the perl script, hence i&#39;m trying to retain the space in perl."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1537793930, "post_id": 52473699, "comment_id": 91900968, "body": "@dasanb \u2014 The whole point of XML is that it is standard and any XML parser can parse it. Fix the consuming application so it can handle XML instead of trying to hack all the tools which generate XML so they generate it with a whole bunch of extra, pointless rules."}, {"owner": {"reputation": 33, "user_id": 5215261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-Lki09cHRHAw/AAAAAAAAAAI/AAAAAAAAABQ/m1gE0Z2fn2E/photo.jpg?sz=128", "display_name": "dasanb", "link": "https://stackoverflow.com/users/5215261/dasanb"}, "edited": false, "score": 0, "creation_date": 1537797629, "post_id": 52473699, "comment_id": 91903494, "body": "Simply asking this, there is a &#39;preservewhitespace = true&#39; in .net is there anything we can do like that in perl ???, Please note that i&#39;m just looking for a possibility for doing this?"}], "answers": [{"tags": [], "owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": false, "score": 2, "last_activity_date": 1537791929, "creation_date": 1537791929, "answer_id": 52479378, "question_id": 52473699, "link": "https://stackoverflow.com/questions/52473699/perl-xml-how-to-preserve-white-space-in-xml-self-closing-tags/52479378#52479378", "title": "Perl XML: How to Preserve white space in xml self closing tags?", "body": "<h2>You don't</h2>\n\n<p>You are concerned about a difference that makes no difference to conforming XML processors.</p>\n\n<p>And if you have a consumer of XML data that is sensitive to such a difference, then that consuming application is <strong><em>broken and should be fixed</em></strong>.  You should not perpetuate <em>its</em> problem by attempting to solve it as <em>your</em> problem.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5215261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-Lki09cHRHAw/AAAAAAAAAAI/AAAAAAAAABQ/m1gE0Z2fn2E/photo.jpg?sz=128", "display_name": "dasanb", "link": "https://stackoverflow.com/users/5215261/dasanb"}, "edited": false, "score": 0, "creation_date": 1537948673, "post_id": 52502182, "comment_id": 91965121, "body": "This was the last option i have used it, though the xml parser doesn&#39;t care about the spaces. I was just trying to figure out the ways in perl. but .net have options to handle such cases."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1537890554, "creation_date": 1537890554, "answer_id": 52502182, "question_id": 52473699, "link": "https://stackoverflow.com/questions/52473699/perl-xml-how-to-preserve-white-space-in-xml-self-closing-tags/52502182#52502182", "title": "Perl XML: How to Preserve white space in xml self closing tags?", "body": "<p>Sometimes you cannot change the consumer. I've been there. It is frustrating.</p>\n\n<p>In these cases you need to remember that you're doing Perl, and Perl is good at text processing. XML is text. Text can be manipulated with regular expressions. And as long as you don't try to <strong>parse</strong> XML with a regex you're golden. Let's be pragmatic.</p>\n\n<p>Once you've run your code above, your output looks like this.</p>\n\n<pre><code>&lt;article&gt;&lt;title&gt;This is title&lt;/title&gt;&lt;p&gt;Name:&lt;tab&gt;&lt;/tab&gt;&lt;/p&gt;&lt;p&gt;Department:&lt;tab&gt;&lt;/tab&gt;&lt;/p&gt;&lt;/article&gt;\n</code></pre>\n\n<p>Let's forget for a moment that this is XML data that has a structure and makes sense. If we don't know this, it's just a stream of text. Text that contains</p>\n\n<pre><code>&lt;tab&gt;&lt;/tab&gt;\n</code></pre>\n\n<p>but we actually want it to contain</p>\n\n<pre><code>&lt;tab /&gt;\n</code></pre>\n\n<p>So what do we do? We regex it out!</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twigdoc = XML::Twig-&gt;new(\n  empty_tags    =&gt; 'html',\n  output_filter =&gt; sub {\n    $_[0] =~ s{&lt;tab&gt;&lt;/tab&gt;}{&lt;tab /&gt;}gr;\n  }\n);\n$twigdoc-&gt;parse(&lt;&lt;'XML');\n&lt;article&gt;\n&lt;title&gt;This is title&lt;/title&gt;\n&lt;p&gt;Name:&lt;tab /&gt;&lt;/p&gt;\n&lt;p&gt;Department:&lt;tab /&gt;&lt;/p&gt;\n&lt;/article&gt;\nXML\n\n$twigdoc-&gt;print;\n</code></pre>\n\n<p>This code makes use of the <a href=\"https://metacpan.org/pod/XML::Twig#output_filter\" rel=\"nofollow noreferrer\"><code>output_filter</code> functionality that XML::Twig provides</a>. It can take a subroutine reference, so it's trivial to do this substitution.</p>\n\n<p>We can even be sure that we won't break anything with this. If the content contains <code>&lt;tab/&gt;</code> it will be encoded: <code>&amp;lt;tab/&amp;gt;</code>. Only if there was a <a href=\"https://en.wikipedia.org/wiki/CDATA\" rel=\"nofollow noreferrer\"><code>CDATA</code> section</a> we'd get in trouble if that happened to contain this, and it should not be changed.</p>\n\n<p>But I would take that risk.</p>\n"}], "owner": {"reputation": 33, "user_id": 5215261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-Lki09cHRHAw/AAAAAAAAAAI/AAAAAAAAABQ/m1gE0Z2fn2E/photo.jpg?sz=128", "display_name": "dasanb", "link": "https://stackoverflow.com/users/5215261/dasanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1537890554, "creation_date": 1537770309, "question_id": 52473699, "link": "https://stackoverflow.com/questions/52473699/perl-xml-how-to-preserve-white-space-in-xml-self-closing-tags", "title": "Perl XML: How to Preserve white space in xml self closing tags?", "body": "<p>I am working on XML file to read and write data's using the perl script, these xml files have the self-closing elements like <strong></strong> which have spaces in them, these spaces are removed and changed to  or  when used empty_tags=>'html'.\nIs there any way to preserve the white space ?</p>\n\n<p><strong>XML Sample: \"test.xml\"</strong></p>\n\n<pre><code>&lt;article&gt;\n&lt;title&gt;This is title&lt;/title&gt;\n&lt;p&gt;Name:&lt;tab /&gt;&lt;/p&gt;\n&lt;p&gt;Department:&lt;tab /&gt;&lt;/p&gt;\n&lt;/article&gt;\n</code></pre>\n\n<p><strong>Perl code:</strong></p>\n\n<pre><code>use warnings;\nuse utf8;\nuse XML::Twig;\n\nmy $xmlname = \"test.xml\";\nmy $twigdoc = XML::Twig-&gt;new(empty_tags=&gt;'html');\n$twigdoc-&gt;parsefile($xmlname);\n$twigdoc-&gt;print;\nexit()\n</code></pre>\n"}, {"tags": ["perl", "makefile"], "comments": [{"owner": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 1, "creation_date": 1537758616, "post_id": 52468945, "comment_id": 91886314, "body": "Here is a <a href=\"https://gist.github.com/jkeenan/2309549211c2d554608555208d8f0415\" rel=\"nofollow noreferrer\">list of CPAN distributions which appear to contain external Makefiles</a>."}, {"owner": {"reputation": 645, "user_id": 1507619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3361ffe35af2b9095ccdb5b4e56d61f3?s=128&d=identicon&r=PG", "display_name": "Nuxwin", "link": "https://stackoverflow.com/users/1507619/nuxwin"}, "reply_to_user": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 0, "creation_date": 1537758865, "post_id": 52468945, "comment_id": 91886360, "body": "@JamesEKeenan Thank you very much ;) But in fact, I I think that I can achieve what I want using a Makefile.PL in subdir which will be magically processed, at least with latest ExtUtils::MakeMaker versions."}, {"owner": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 0, "creation_date": 1537799927, "post_id": 52468945, "comment_id": 91904903, "body": "When you achieve the solution, please post.  This is a use-case not covered in the ExtUtils::MakeMaker documentation and it would be interesting to add your solution to those docs."}, {"owner": {"reputation": 645, "user_id": 1507619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3361ffe35af2b9095ccdb5b4e56d61f3?s=128&d=identicon&r=PG", "display_name": "Nuxwin", "link": "https://stackoverflow.com/users/1507619/nuxwin"}, "reply_to_user": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 0, "creation_date": 1537800308, "post_id": 52468945, "comment_id": 91905163, "body": "@JamesEKeenan Sure, I&#39;ll ;)"}], "owner": {"reputation": 645, "user_id": 1507619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3361ffe35af2b9095ccdb5b4e56d61f3?s=128&d=identicon&r=PG", "display_name": "Nuxwin", "link": "https://stackoverflow.com/users/1507619/nuxwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537726367, "creation_date": 1537726367, "question_id": 52468945, "link": "https://stackoverflow.com/questions/52468945/extutilsmakemaker-howto-execute-external-makefile", "title": "ExtUtils::MakeMaker Howto execute external makefile", "body": "<p>I'm pretty new with ExtUtils::MakeMaker and I don't figure out how to handle my use case.</p>\n\n<p>I want make use of ExtUtils::MakeMaker to deploy my software library. Right now, my Makefile.PL is as follows:</p>\n\n<pre><code>use ExtUtils::MakeMaker;\n\nWriteMakefile(\n    ABSTRACT         =&gt; 'i-MSCP Backend',\n    AUTHOR           =&gt; 'Laurent Declercq &lt;l.declercq@nuxwin.com&gt;',\n    NAME             =&gt; 'iMSCP',\n    DISTNAME         =&gt; \"iMSCP\",\n    LICENSE          =&gt; 'lgpl_2_1',\n    MIN_PERL_VERSION =&gt; \"5.0018_002\",\n    NAME             =&gt; 'iMSCP',\n    VERSION_FROM     =&gt; 'lib/iMSCP/Version.pm',\n    EXE_FILES        =&gt; [ qw$\n        bin/imscp-courier-dovecot-migrate.pl\n        bin/imscp-accounts-suspension\n        bin/imscp-arpl-msgr\n        bin/imscp-backup-clients\n        bin/imscp-backup-imscp\n        bin/imscp-dpkg-post-invoke\n        bin/imscp-dsk-quota\n        bin/imscp-fix-duplicate-mounts\n        bin/imscp-installer\n        bin/imscp-master-sql-user-info\n        bin/imscp-mountall\n        bin/imscp-net-traffic-logger\n        bin/imscp-pkt-mngr\n        bin/imscp-rkhunter\n        bin/imscp-rqst-mngr\n        bin/imscp-set-engine-permissions\n        bin/imscp-set-gui-permissions\n        bin/imscp-srv-traff\n        bin/imscp-sw-mngr\n        bin/imscp-uninstaller\n        bin/imscp-update.php\n        bin/imscp-vrl-traff\n        bin/imscp-maillogconvert.pl\n        bin/imscp-vlogger\n    $ ],\n    # Discard man pages\n    MAN1PODS         =&gt; {},\n    MAN3PODS         =&gt; {}\n);\n</code></pre>\n\n<p>In my lib directory, I've an external Makefile which is responsible to build Perl header files:</p>\n\n<pre><code>#!/usr/bin/make -f\n\nCC := gcc\nCFLAGS := -DDEBUG=0 -s -ansi -Wall -Wextra -std=c11 -Wstrict-prototypes -pedantic-errors -O2\n\nheaders = sys/syscall.h linux/fs.h\n\n# Debian/Ubuntu specific (Multiarch)\n-include /usr/share/dpkg/architecture.mk\nifdef DEB_HOST_MULTIARCH\n    headers += $(DEB_HOST_MULTIARCH)/sys/mount.h\n    CFLAGS += -DMULTIARCH='\"$(DEB_HOST_MULTIARCH)\"'\nelse\n    headers += sys/mount.h\nendif\n\ndefault: H2ph.pm\nall: default\n\nbin/%: %.c\n    mkdir -p $(@D)\n    $(CC) $(CFLAGS) $(CPPFLAGS) $&lt; -o $@\n\n%.pm: bin/% h2ph\n    $&lt; &gt; iMSCP/$@\n    $(RM) -r bin/\n\nh2ph:\n    mkdir -p $@\n    -cd /usr/include; h2ph -Q -a -d $(shell pwd)/$@ $(headers)\n\nclean:\n    $(RM) -r h2ph/ iMSCP/H2ph.pm\n</code></pre>\n\n<p>I wonder how I can execute the external makefile.</p>\n"}, {"tags": ["perl", "bioperl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537728538, "post_id": 52468476, "comment_id": 91880351, "body": "What tests failed?"}, {"owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537733701, "post_id": 52468476, "comment_id": 91881705, "body": "Apologise for the compact text I was trying to use the line breaks but it doesn&#39;t seem to break the line. Not sure what i&#39;m doing wrong"}, {"owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537773404, "post_id": 52468476, "comment_id": 91890208, "body": "@simbabque, well now when you say it that does make sense... I edited the post and deleted my comment. Cheers thanks for the clarification!"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1537801426, "post_id": 52468476, "comment_id": 91905852, "body": "I tested this on Ubuntu 18.04, <code>perl</code> version 5.26.1, and it worked fine. I am using <code>cpanm</code>. First I installed <code>Bio::Perl</code> with command <code>cpanm Bio::Perl</code>. Then I ran <code>perl INSTALL.pl</code> and it succeeded with message <code>*** Bio::DB::HTS v2.11 is now installed. ***</code>. What operating system are you on, and what version of <code>perl</code> are you using?"}, {"owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1537805011, "post_id": 52468476, "comment_id": 91907878, "body": "@H&#229;konH&#230;gland I am on Mac OSx High Sierra v.10.13.6 and using perl 5, version 18, subversion 2 (v5.18.2). I have added this information in my original question now."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1537827529, "post_id": 52468476, "comment_id": 91917414, "body": "@S.Jamal I was now able to test on macOS High Sierra version 10.13.4. And It turns out I have the header file installed at <code>&#47;usr&#47;local&#47;include&#47;lzma.h</code> and <b>not</b> at the location <code>&#47;usr&#47;include&#47;lzma.h</code>as the <code>INSTALL.pl</code> requires. I think I would suggest that you ask a question at the <a href=\"https://github.com/Ensembl/Bio-DB-HTS/issues\" rel=\"nofollow noreferrer\">issue tracker</a> if this could be a bug in <code>INSTALL.pl</code>."}, {"owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1537907700, "post_id": 52468476, "comment_id": 91953017, "body": "@H&#229;konH&#230;gland thanks for confirming that this is indeed a Mac OS High Sierra issue regarding hte lzma.h header file. I will submit the question in the github repository so they can investigate if it is a bug or not."}, {"owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "edited": false, "score": 1, "creation_date": 1537908879, "post_id": 52468476, "comment_id": 91953501, "body": "For anyone interested in the advancement of the concern of the missing/incorrectly located lzma.h file on Mac OS High Sierra please see the link  <a href=\"https://github.com/Ensembl/Bio-DB-HTS/issues/79\" rel=\"nofollow noreferrer\">github.com/Ensembl/Bio-DB-HTS/issues/79</a>"}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "is_accepted": true, "score": 2, "last_activity_date": 1537827821, "creation_date": 1537827821, "answer_id": 52488131, "question_id": 52468476, "link": "https://stackoverflow.com/questions/52468476/issues-installing-perl-module-bioperl/52488131#52488131", "title": "Issues installing perl module Bio::Perl", "body": "<p>Thanks to everyone that helped out, I managed to figure it out in the end. I will explain the process here from beginning to end incase anyone else has the same issue.</p>\n\n<p>The question I posted was to solve how to install Bio::Perl using CPAN as I was having issues with tests failing. Although I had some issues installing Bio-DB-HTS (which I solved before posting) and I will explain how I managed to install that as well in case anyone comes across the same issue.</p>\n\n<p>It seems that Mac users tend to have an issue with the lzma.h header missing. In the case of installing Bio-DB-HTS. I had to modify a line in the Bio-DB-HTS/INSTALL.pl file that checked for the existence of the lzma.h file. See \"Installing Bio-DB-HTS on Mac OSx\" below for instructions.</p>\n\n<p><strong>Solving installation of Bio::Perl</strong></p>\n\n<p>Essentially I solved it by reinstalling/reconfiguring my CPAN installation. Although I believe the issue in the end was due to some environment variables that I had not set as I chose to manual sort out my CPAN directory structure, I recommend letting CPAN do this for you using the local:lib option as it will set or tell you how to set the environment variables at the end of the installation.</p>\n\n<p>I had only set one of the environment variables below (PERL5LIB) which was probably the reason for my error. NOTE! that the paths you see below are specific for my system.</p>\n\n<p><code>PATH=\"/Users/sjamal/perl5/bin${PATH:+:${PATH}}\"; export PATH;</code>\n<code>PERL5LIB=\"/Users/sjamal/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}\"; export PERL5LIB;</code>\n<code>PERL_LOCAL_LIB_ROOT=\"/Users/sjamal/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}\"; export PERL_LOCAL_LIB_ROOT;</code>\n<code>PERL_MB_OPT=\"--install_base \\\"/Users/sjamal/perl5\\\"\"; export PERL_MB_OPT;</code>\n<code>PERL_MM_OPT=\"INSTALL_BASE=/Users/sjamal/perl5\"; export PERL_MM_OPT;</code></p>\n\n<p>If you have already it configured like me but what to start from a clean slate you will need to remove the CPAN folder created on the user that you installed cpan on.</p>\n\n<pre><code>/Users/&lt;USERNAME&gt;/.cpan\nrm -rf /Users/&lt;USERNAME&gt;/.cpan\n</code></pre>\n\n<p>Now you should be able to run the cpan command as done at the first instance and get prompted with lots of questions of how you want to set up the installation and this is where you will be able to chose 'local:lib' (if you are able to access sudo you can choose the 'sudo' option as well). I installed cpanm based on multiple recommendations and also since it prompts less question apparently and then installed Bio::Perl. Although I should mention that the installation did failed a test and refused to install so I had to run the force command for it to build Bio::Perl.</p>\n\n<pre><code>cpan -i App:cpanminus\ncpanm --force Bio::Perl\n</code></pre>\n\n<p>You should now have Bio::Perl installed.</p>\n\n<p><strong>Installing Bio-DB-HTS on Mac OSx</strong></p>\n\n<p>The lzma library is deprecated on Mac OSx but has been replaced with the XZ library so if you are missing the file as well you can install XZ using brew. If you don't have brew installed you can find how to install it here <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">https://brew.sh/</a> </p>\n\n<pre><code>brew install xz\n</code></pre>\n\n<p>You will now have a lzma.h header file in the location where XZ was installed using brew, in my case /usr/local/Cellar/xz/5.2.4/include/lzma.h.</p>\n\n<pre><code>git clone https://github.com/Ensembl/Bio-DB-HTS.git\ncd Bio-DB-HTS-2.10\nvim Bio-DB-HTS/INSTALL.pl\n</code></pre>\n\n<p>So, I changed the line using vim... </p>\n\n<pre><code>-e '/usr/include/lzma.h' or die &lt;&lt;END; \n</code></pre>\n\n<p>to  </p>\n\n<pre><code>-e '/usr/include/lzma.h' **|| '/usr/local/Cellar/xz/5.2.4/include/lzma.h'** or die &lt;&lt;END;\n</code></pre>\n\n<p>NOTE! You have to change <strong>'/usr/local/Cellar/xz/5.2.4/include/lzma.h'</strong> path to where you have the lzma.h in XZ package just installed using brew. However, I want to clarify that this does not solve anything other than telling the script that the file does exist. The Install script won't be able to make use of the file (if that is what it needs to do) as nothing else has been changed in the installation script.</p>\n\n<p>You should now be able to install Bio-DB-HTS by simply running the perl script as below</p>\n\n<pre><code>cd Bio-DB-HTS-2.10\nperl INSTALL.pl\n</code></pre>\n\n<p>Hope that helps!</p>\n\n<p>Sabri</p>\n"}], "owner": {"reputation": 105, "user_id": 8090989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a4b89484ad6ae9df9c4a53d895d972?s=128&d=identicon&r=PG&f=1", "display_name": "S.Jamal", "link": "https://stackoverflow.com/users/8090989/s-jamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3139, "favorite_count": 0, "accepted_answer_id": 52488131, "answer_count": 1, "score": 4, "last_activity_date": 1537827821, "creation_date": 1537722866, "last_edit_date": 1537805076, "question_id": 52468476, "link": "https://stackoverflow.com/questions/52468476/issues-installing-perl-module-bioperl", "title": "Issues installing perl module Bio::Perl", "body": "<p>I am having some issues installing Bio-DB-HTS (<a href=\"https://github.com/Ensembl/Bio-DB-HTS\" rel=\"nofollow noreferrer\">https://github.com/Ensembl/Bio-DB-HTS</a>) requried to run a perl script from a cloned git repository.</p>\n\n<p><strong>System &amp; Perl information</strong></p>\n\n<p>I am on Mac OSx High Sierra v.10.13.6 and using perl 5, version 18, subversion 2 (v5.18.2). I have added this information in my original question now.</p>\n\n<p><strong>Background information</strong></p>\n\n<p>When trying to perform a local installation, according to README instructions, i receive the error...</p>\n\n<pre><code>git clone https://github.com/Ensembl/Bio-DB-HTS.git\ncd Bio-DB-HTS-2.10\nperl INSTALL.pl\n\nlzma.h library header not found in /usr/include \n</code></pre>\n\n<p>I tried to install the LZMA library but found that it actually was installed and that the lzma.h header file was simply missing from the path /usr/include. As LZMA is deprecated and replaced with XZ I installed the XZ library</p>\n\n<pre><code> brew install xz\n</code></pre>\n\n<p>After a quick search i found the lzma.h header in...</p>\n\n<pre><code>/usr/local/Cellar/xz/5.2.4/include/lzma.h\n</code></pre>\n\n<h1><strong>Main Issue</strong></h1>\n\n<p>Now this is where I am not sure of how to proceed and if I have messed up something while trying to get around this. Since /usr/include has a directory with restricted access I added a line in the INSTALL.pl script to check existence for the file in both locations (which could probably disrupt something downstream in the analysis as I didn't change anything else except the if condition. However, when running the install this time i ran into a new problem.</p>\n\n<pre><code>perl INSTALL.pl\n\nBioPerl does not seem to be installed. Please install it and try again. \nOn Debian/Ubuntu systems you can do this with the command:\n\napt-get install bioperl\n\nOn other systems use the CPAN shell:\n\nperl -MCPAN -e 'install Bio::Perl'\n</code></pre>\n\n<p>And this is where my main issues reside. When trying to install Bio:Perl using cpan tests fail at various stage and I'm not sure which ones are the essential ones. The last lines from the output are</p>\n\n<pre><code>Result: FAIL\nFailed 3/325 test programs. 16/19945 subtests failed.\nCJFIELDS/BioPerl-1.007002.tar.gz\n./Build test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, \ntry:\nreports CJFIELDS/BioPerl-1.007002.tar.gz\nRunning Build install\nmake test had returned bad status, won't install without force\n</code></pre>\n\n<p>I reconfigured cpan to install dependancies automatically as mentioned here <a href=\"https://stackoverflow.com/questions/898782/how-do-i-tell-cpan-to-install-all-dependencies\">How do I tell CPAN to install all dependencies?</a>.</p>\n\n<pre><code>perl -MCPAN -Mlocal::lib=~/perl5 -e 'my $c = \"CPAN::HandleConfig\"; $c-&gt;load(doit =&gt; 1, autoconfig =&gt; 1); $c-&gt;edit(prerequisites_policy =&gt; \"follow\"); $c-&gt;edit(build_requires_install_policy =&gt; \"yes\"); $c-&gt;commit'\n</code></pre>\n\n<p>And tried installing again forcing installation...</p>\n\n<pre><code>perl -f -MCPAN -e 'install Bio::Perl'\n</code></pre>\n\n<p>But I just get the same error</p>\n\n<pre><code>Result: FAIL\nFailed 3/325 test programs. 16/19945 subtests failed.\nCJFIELDS/BioPerl-1.007002.tar.gz\n./Build test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, \ntry:\nreports CJFIELDS/BioPerl-1.007002.tar.gz\nRunning Build install\nmake test had returned bad status, won't install without force\n</code></pre>\n\n<p>When I look at what modules have been installed using...</p>\n\n<pre><code>cpan -l \nBio::DB::HTS    2.11\nBio::DB::HTS::ReadIterator  2.11\nBio::DB::HTS::VCF   2.11\nBio::DB::HTS::Faidx 2.11\nBio::DB::HTS::PileupWrapper 2.11\nBio::DB::HTS::Alignment 2.11\nBio::DB::HTS::ConfigData    undef\n.\n.\n.\nBio::DB::HTS::VCF::Iterator 2.11\nBio::DB::HTS::VCF::Row  2.11\n</code></pre>\n\n<p>I can see that many of the ones I need from the Bio-DB-HTS package are there (assuming that they were one of the succesful installations when isntalling Bio::Perl) but now it prompts the error</p>\n\n<pre><code>Can't locate Bio/SeqFeature/Lite.pm in @INC\n</code></pre>\n\n<p>However, I never manage to actually get Bio:Seq nor Bio::Perl installed. I do have some perl knowledge but mostly work on python so I am feeling a bit lost of how to proceed.</p>\n\n<p><strong>Extra information</strong></p>\n\n<p>My cpan installs modules to </p>\n\n<pre><code>/usr/local/perl \n</code></pre>\n\n<p>And I have added the path to my environment variable</p>\n\n<pre><code>export PERL5LIB=/usr/local/perl\n</code></pre>\n\n<p><strong>Edited information (failed tests &amp; errors) as response to Shawn</strong></p>\n\n<p>@Shawn, Its a long list of errors, test failures and recommended installations. I I can post some examples of the first couple of errors. I am not really sure what to look neither. </p>\n\n<p><strong>Recommended installations</strong></p>\n\n<pre><code>Checking prerequisites...\nrecommends:\n*  Algorithm::Munkres is not installed\n*  Array::Compare is not installed\n*  Bio::Phylo is not installed\n*  Convert::Binary::C is not installed\n*  GD is not installed\n*  Graph is not installed\n*  GraphViz is not installed\n*  HTML::TableExtract is not installed\n*  Inline::C (0.53) is installed, but we prefer to have 0.67\n*  PostScript::TextBlock is not installed\n*  SVG is not installed\n*  SVG::Graph is not installed\n*  Set::Scalar is not installed\n*  Sort::Naturally is not installed\n*  Spreadsheet::ParseExcel is not installed\n*  XML::DOM is not installed\n*  XML::DOM::XPath is not installed\n*  XML::Parser::PerlSAX is not installed\n*  XML::SAX::Writer is not installed\n*  XML::Twig is not installed\n*  YAML is not installed\n\n\nChecking optional features...\nEntrezGene............disabled\nrequires:\n! Bio::ASN1::EntrezGene is not installed\nMySQL Tests...........disabled\nrequires:\n! DBD::mysql is not installed\nPg Tests..............disabled\nrequires:\n! DBD::Pg is not installed\n</code></pre>\n\n<p>Here is the test summary report. I did not print the entire list of failed tests as it is extremely long. But What I cans see is that /LocalDB/SeqFeature_BDB.t is a part of the majority of the failed tests when looking at the verbose output.</p>\n\n<pre><code>Test Summary Report\n-------------------\nt/LocalDB/Fasta.t                    (Wstat: 1024 Tests: 109 Failed: 4)\nFailed tests:  73, 91, 95, 101\nNon-zero exit status: 4\nt/LocalDB/Index/Index.t              (Wstat: 20224 Tests: 36 Failed: 6)\nFailed tests:  12-17\nNon-zero exit status: 79\nParse errors: Bad plan.  You planned 73 tests but ran 36.\nt/LocalDB/Qual.t                     (Wstat: 1536 Tests: 56 Failed: 6)\nFailed tests:  7-9, 49-50, 52\nNon-zero exit status: 6\nt/LocalDB/SeqFeature_BDB.t           (Wstat: 0 Tests: 38 Failed: 4)\nFailed tests:  17-19, 24\nParse errors: Bad plan.  You planned 116 tests but ran 38.\nt/Perl.t                             (Wstat: 512 Tests: 47 Failed: 16)\nFailed tests:  28, 28, 28, 28-29, 29, 29, 29-30, 30, 30\n            30-31, 31, 31, 31\nNon-zero exit status: 2\nParse errors: Tests out of sequence.  Found (24) but expected (26)\n            Tests out of sequence.  Found (25) but expected (27)\n            Tests out of sequence.  Found (26) but expected (28)\n            Tests out of sequence.  Found (26) but expected (29)\n            Tests out of sequence.  Found (27) but expected (30)\nDisplayed the first 5 of 23 TAP syntax errors.\nRe-run prove with the -p option to see them all.\nt/RemoteDB/BioFetch.t                (Wstat: 0 Tests: 83 Failed: 47)\nFailed tests:  20-21, 21-22, 22-23, 23-24, 24-25, 25-26\n            26-27, 27-28, 28-29, 29-30, 30, 30, 30-31\n            31, 31, 31-32, 32, 32, 32-33, 33, 33, 33-34\n            34, 34, 34-35, 35, 35, 35-36, 36, 36, 36\nParse errors: Tests out of sequence.  Found (4) but expected (6)\n            Tests out of sequence.  Found (6) but expected (7)\n            Tests out of sequence.  Found (7) but expected (8)\n            Tests out of sequence.  Found (5) but expected (9)\n            Tests out of sequence.  Found (6) but expected (10)\nDisplayed the first 5 of 79 TAP syntax errors.\nRe-run prove with the -p option to see them all.\nt/RemoteDB/GenBank.t                 (Wstat: 0 Tests: 658 Failed: 614)\nFailed tests:  10-11, 11, 11-12, 12, 12-13, 13, 13-14\n            14, 14-15, 15, 15-16, 16, 16-17, 17, 17-18\n            18, 18-19, 19, 19, 19, 19, 19, 19-20, 20\n            20, 20, 20, 20, 20-21, 21, 21, 21, 21, 21\n            21-22, 22, 22, 22, 22, 22, 22-23, 23, 23\n</code></pre>\n"}, {"tags": ["perl", "cmd", "installation"], "comments": [{"owner": {"reputation": 439, "user_id": 4940741, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/057fb01fbc230d68e63586acf0defc38?s=128&d=identicon&r=PG&f=1", "display_name": "minoo", "link": "https://stackoverflow.com/users/4940741/minoo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537718418, "post_id": 52467494, "comment_id": 91877436, "body": "@ikegami the mentioned directory and the current directory are the same"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1537722139, "creation_date": 1537722139, "answer_id": 52468359, "question_id": 52467494, "link": "https://stackoverflow.com/questions/52467494/installing-muscle-on-windows/52468359#52468359", "title": "installing MUSCLE on windows", "body": "<p>The program is reporting that the OS reported that the file doesn't exist. (That's what errno 2 is.)</p>\n\n<p>Testing reveals that relatives paths are resolved relative to the current work directory as expected.</p>\n\n<p>So, your operating system is saying there's no file named <code>seqs.fa</code> in the current work directory.</p>\n\n<p>Double check the name of the file you have. Keep in mind that File Explorer hides known file extensions by default so using <code>dir</code> would be more reliable.</p>\n"}], "owner": {"reputation": 439, "user_id": 4940741, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/057fb01fbc230d68e63586acf0defc38?s=128&d=identicon&r=PG&f=1", "display_name": "minoo", "link": "https://stackoverflow.com/users/4940741/minoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537722139, "creation_date": 1537715833, "question_id": 52467494, "link": "https://stackoverflow.com/questions/52467494/installing-muscle-on-windows", "title": "installing MUSCLE on windows", "body": "<p>I want to install the lates version of MUSCLE downloaded from <a href=\"http://www.drive5.com/muscle/downloads.htm\" rel=\"nofollow noreferrer\">http://www.drive5.com/muscle/downloads.htm</a></p>\n\n<p>named muscle3.8.31_i86win32.exe . As the guidelines \n<a href=\"http://www.drive5.com/muscle/manual/install.html\" rel=\"nofollow noreferrer\">http://www.drive5.com/muscle/manual/install.html</a>\nsays I have to write the below line in the command prompt:</p>\n\n<pre><code>C:\\Program Files (x86)\\muscle3.8.31_i86win32 -in seqs.fa -out seqs.afa\n</code></pre>\n\n<p>However, I faced this error:</p>\n\n<blockquote>\n  <p>MUSCLE v3.8.31 by Robert C. Edgar</p>\n  \n  <p><a href=\"http://www.drive5.com/muscle\" rel=\"nofollow noreferrer\">http://www.drive5.com/muscle</a> This software is donated to the public\n  domain. Please cite: Edgar, R.C. Nucleic Acids Res 32(5), 1792-97.</p>\n  \n  <p><strong>* ERROR *</strong>  Cannot open 'seqs.fa' errno=2</p>\n</blockquote>\n\n<p>I am sure the file exists in the mentioned directory, but I don't why has this happened and how can I fix it. Any idea?</p>\n"}, {"tags": ["xml", "perl", "xml-simple"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537709843, "post_id": 52466620, "comment_id": 91874908, "body": "Re &quot;<i>Is there any way (or a workaround) to get the xml parsed correctly and get the desired result?</i>&quot;, You didn&#39;t specify what the desired result is."}, {"owner": {"reputation": 3, "user_id": 6715696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa0e3b393a6fccd7817a9c02a7aa02e8?s=128&d=identicon&r=PG&f=1", "display_name": "PaulP", "link": "https://stackoverflow.com/users/6715696/paulp"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537724090, "post_id": 52466620, "comment_id": 91879061, "body": "@ikegami: thank you, I&#39;ve added a section with the desired results. Basically a hash with all information included so any element can be addressed using a hash expression."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1537789812, "post_id": 52466620, "comment_id": 91898393, "body": "Are you sure that&#39;s what you want as a result? I mean, if you use <code>findnodes</code> you can address any element using an <code>xpath</code> expression instead, and you don&#39;t have to faff around with mangling your XML. If you want to re-<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> your question, and frame it around the higher level problem, I&#39;m sure we can supply you with even better answers."}, {"owner": {"reputation": 3, "user_id": 6715696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa0e3b393a6fccd7817a9c02a7aa02e8?s=128&d=identicon&r=PG&f=1", "display_name": "PaulP", "link": "https://stackoverflow.com/users/6715696/paulp"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1537795778, "post_id": 52466620, "comment_id": 91902275, "body": "@Sobrique: I&#39;ll use libxml with findnodes for some sections of my xml file. The problem with libxml that I don&#39;t know in advance the structure of the xml file and need &quot;walk&quot; through it instead."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1537801835, "post_id": 52466620, "comment_id": 91906096, "body": "My point is that you probably <i>don&#39;t</i> need to know the structure of the file - just what you&#39;re looking for. And if you really need to iterate that, you can. But you probably don&#39;t need to do that either."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6715696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa0e3b393a6fccd7817a9c02a7aa02e8?s=128&d=identicon&r=PG&f=1", "display_name": "PaulP", "link": "https://stackoverflow.com/users/6715696/paulp"}, "edited": false, "score": 0, "creation_date": 1537770289, "post_id": 52470166, "comment_id": 91889001, "body": "agree, but XML::Simple the only way to parse a xml file with unknown structure, by creating a hash and &quot;walking&quot; through it. I think I have to combine both XML::Simple and LibXML ways in my script. Thank you anyway for a clarifying that XML::Simple is a dead end in my situation :-)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1537789750, "post_id": 52470166, "comment_id": 91898355, "body": "No, it&#39;s not. All XML parsers can handle unknown structure and &#39;walk&#39; it, just the way you want. E.g. <code>XML::LibXML</code> does <code>childNodes</code> and <code>XML::Twig</code> does <code>children</code>. Of course, if you don&#39;t actually <i>want</i> to walk the <code>XML</code> at all, but instead find a particular key/value somewhere in the  structure, that&#39;s where you can use <code>findnodes</code> and have a <i>much</i> simpler_ answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1537749869, "last_edit_date": 1537749869, "creation_date": 1537736092, "answer_id": 52470166, "question_id": 52466620, "link": "https://stackoverflow.com/questions/52466620/xmlsimple-convert-xml-to-perl-hash-warning-non-unique-value/52470166#52470166", "title": "XML::Simple convert xml to perl hash warning &quot;non-unique value&quot;", "body": "<p>Nodes can;'t have multiple contents, so some transformation is needed.</p>\n\n<p>You should take this opportunity to avoid using the <a href=\"https://stackoverflow.com/q/33267765/589924\">most complicated</a> of the XML parsers out there. It's so hard to use its own documentation advises against using it.</p>\n\n<p>Here's an XML::LibXML solution:</p>\n\n<pre><code>use XML::LibXML qw( );\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_file('dns.xml');\n\nmy %data;\n{\n   $data{dns_timeout} = $doc-&gt;findvalue('/dns/dns_timeout/text()');\n\n   for my $dns_entry_node ($doc-&gt;findnodes('/dns/local_dns/dns_entry')) {\n      my $addr = $dns_entry_node-&gt;textContent();\n\n      if (defined( my $priority = $dns_entry_node-&gt;getAttribute('priority') )) {\n         push @{ $data{local_dns}{dns_entry}{priority}{$priority} }, $addr;\n      }\n\n      if (defined( my $domain = $dns_entry_node-&gt;getAttribute('domain') )) {\n         push @{ $data{local_dns}{dns_entry}{domain}{$domain} }, $addr;\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6715696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa0e3b393a6fccd7817a9c02a7aa02e8?s=128&d=identicon&r=PG&f=1", "display_name": "PaulP", "link": "https://stackoverflow.com/users/6715696/paulp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 52470166, "answer_count": 1, "score": 0, "last_activity_date": 1537749869, "creation_date": 1537709651, "last_edit_date": 1537736064, "question_id": 52466620, "link": "https://stackoverflow.com/questions/52466620/xmlsimple-convert-xml-to-perl-hash-warning-non-unique-value", "title": "XML::Simple convert xml to perl hash warning &quot;non-unique value&quot;", "body": "<p>I have a well formed XML that I'm trying to convert to a hash with perl module XML::Simple. There are some section in this file which cannot be parsed correctly. Is there any way (or a workaround) to get the xml parsed correctly and get the desired result?</p>\n\n<pre><code>D:\\tmp&gt;perl parse_dns2.pl dns_problem_public.xml\nWarning: &lt;dns_entry&gt; element has non-unique value in 'domain' key attribute: \n0 at parse_dns2.pl line 9.\nWarning: &lt;dns_entry&gt; element has non-unique value in 'domain' key attribute: \nexample.com at parse_dns2.pl line 9.\nWarning: &lt;dns_entry&gt; element has non-unique value in 'domain' key attribute: \ntest.com at parse_dns2.pl line 9.\n$VAR1 = {\n  'dns_timeout' =&gt; '20',\n  'local_dns' =&gt; {\n    'dns_entry' =&gt; {\n      '0' =&gt; {\n        'content' =&gt; '192.168.120.32'\n      },\n      'domain.example.com' =&gt; {\n        'content' =&gt; '172.16.113.13'\n      },\n      'example.com' =&gt; {\n        'content' =&gt; '172.16.113.13'\n      },\n      'test.com' =&gt; {\n        'content' =&gt; '172.17.0.113'\n      }\n    }\n  }\n};\n</code></pre>\n\n<p>My code is strightforward:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse XML::Simple;\nuse Data::Dumper;\n\nmy $ref = XMLin(\n    $ARGV[0],\n    ForceArray =&gt; ['dns_entry'],\n    KeyAttr    =&gt; { 'dns_entry' =&gt; 'priority' },\n    KeyAttr    =&gt; { 'dns_entry' =&gt; 'domain' },\n    ForceContent =&gt; 0\n);\n\nprint Dumper $ref;\n</code></pre>\n\n<p>The xml file (the relevant section) contain attributes which I need to use as a key:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;\n&lt;!DOCTYPE config SYSTEM \"config.dtd\"&gt; \n&lt;dns&gt;\n    &lt;local_dns&gt;\n        &lt;dns_entry priority=\"0\"&gt;192.168.120.31&lt;/dns_entry&gt;\n        &lt;dns_entry priority=\"0\"&gt;192.168.120.32&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"example.com\"&gt;172.16.103.20&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"example.com\"&gt;172.16.113.13&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"test.com\"&gt;172.17.0.111&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"test.com\"&gt;172.17.0.113&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"domain.example.com\"&gt;172.16.103.20&lt;/dns_entry&gt;\n        &lt;dns_entry domain=\"domain.example.com\"&gt;172.16.113.13&lt;/dns_entry&gt;\n    &lt;/local_dns&gt;\n    &lt;dns_timeout&gt;20&lt;/dns_timeout&gt;\n&lt;/dns&gt;\n</code></pre>\n\n<p>The first problem that XML::Simple cannot accept similar elements with the same attributes (although different values). And the second problem is that I can use only <em>one</em> attribute as a key attribute in the same XML block.</p>\n\n<p>Desired result:</p>\n\n<pre><code>$VAR1 = {\n  'local_dns' =&gt; {\n    'dns_entry' =&gt; {\n      'domain' =&gt; {\n        'domain.example.com' =&gt; {\n          'content' =&gt; [\n            '172.16.113.20',\n            '172.16.113.13'\n          ]\n        },\n        'example.com' =&gt; {\n          'content' =&gt; [\n            '172.16.113.20',\n            '172.16.113.13'\n          ]\n        },\n        'test.com' =&gt; {\n          'content' =&gt; [\n            '172.17.0.111',\n            '172.17.0.111'\n          ]\n        }\n      },\n      'priority' =&gt; {\n        '0' =&gt; {\n          'content' =&gt; [\n            '192.168.120.31',\n            '192.168.120.32'\n          ]\n        }\n      }\n    }\n  },\n  'dns_timeout' =&gt; '20'\n};\n</code></pre>\n"}, {"tags": ["runtime-error", "signals", "warnings", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1537861143, "post_id": 52466066, "comment_id": 91926478, "body": "perl only resets the signals that were set to a perl sub/handler, not those that were set to SIG_IGN. (see <a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/ext/ExtUtils-Miniperl/lib/ExtUtils/Miniperl.pm#l160\" rel=\"nofollow noreferrer\">here</a>). the idea is probably to prevent a perl signal handler from trying to access the objects already destroyed during the &#39;global destruction phase&#39;.  Anyways, a <code>flush STDOUT</code> at the end of the script is probably better than making the <code>STDOUT</code> unbuffered with <code>$| = 1</code>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1537705450, "creation_date": 1537705450, "answer_id": 52466066, "question_id": 52465835, "link": "https://stackoverflow.com/questions/52465835/weird-perl-sigpipe-behavior-ignore-works-sub-doesnt/52466066#52466066", "title": "Weird Perl SIGPIPE behavior (&quot;IGNORE&quot; works, sub doesn&#39;t)", "body": "<p>When writing into a pipe like in your example STDOUT is buffered by default. This means the <code>print \"foo\\n\"</code> in your code does not immediately write to STDOUT but writes into a buffer and the buffer will only be flushed (written to STDOUT) when it is full or as part of the program cleanup. Using <code>strace</code> to see what your program is actually doing shows that it first restores the signal handlers as part of the program cleanup and then writes to STDOUT, resulting in a SIGPIPE which is no longer handled by your sub and thus results in a kill of the program.</p>\n\n<p>When making sure that the output is done immediately and not at the cleanup of the program then your signal handler gets successfully triggered. This can be done by making STDOUT unbuffered using <code>$|=1</code>:</p>\n\n<pre><code>$ perl -e \\\n   '$|=1; $SIG{PIPE} = sub { print STDERR \"XXX\\n\"; }; sleep(1); print \"foo\\n\";' \\\n   | echo -n\n\noutput: XXX\n</code></pre>\n\n<p>In other words: if active your signal handler works perfectly and it was only an artefact of your specific use that it got not triggered. On why it does not reset the signal handler from ignore (<code>SIG_IGN</code>) to  default (<code>SIG_DFL</code>) on exit and thus shows the same problem with IGNORE I don't know.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537705450, "creation_date": 1537703549, "question_id": 52465835, "link": "https://stackoverflow.com/questions/52465835/weird-perl-sigpipe-behavior-ignore-works-sub-doesnt", "title": "Weird Perl SIGPIPE behavior (&quot;IGNORE&quot; works, sub doesn&#39;t)", "body": "<p>As noted in comments to these questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/50507849/856090\">Weird error after Perl upgrade: Unable to flush stdout</a></li>\n<li><a href=\"https://stackoverflow.com/q/52138269/856090\">How to cause &quot;Unable to flush stdout: Broken pipe&quot; in Perl?</a></li>\n</ul>\n\n<p><code>perl -e '$SIG{PIPE} = \"IGNORE\"; sleep(1); print \"foo\\n\";' | echo -n</code></p>\n\n<p>produces error message <code>Unable to flush stdout: Broken pipe</code>.</p>\n\n<p>But weirdly</p>\n\n<p><code>perl -e '$SIG{PIPE} = sub { print STDERR \"XXX\\n\"; }; sleep(1); print \"foo\\n\";' | echo -n</code></p>\n\n<p>does not produce any message.</p>\n\n<p>Why the second command does not produce a message? How to catch that SIGPIPE event?</p>\n\n<p>The thing I really need is (for an experiment to answer <a href=\"https://stackoverflow.com/q/52236675/856090\">this question</a>) to catch SIGPIPE and when it happens output something to a log file.</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 2, "creation_date": 1537695049, "post_id": 52464789, "comment_id": 91871436, "body": "Why the downvote? What is wrong with the post?"}, {"owner": {"reputation": 1528, "user_id": 2624770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99c43476bd24ccb35d3143cc21777a2?s=128&d=identicon&r=PG", "display_name": "keithpjolley", "link": "https://stackoverflow.com/users/2624770/keithpjolley"}, "edited": false, "score": 1, "creation_date": 1537696065, "post_id": 52464789, "comment_id": 91871601, "body": "double up your backslashes or quote the text in <code>foo.txt</code> like <code>&quot;This is ..&quot;</code>."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 1528, "user_id": 2624770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99c43476bd24ccb35d3143cc21777a2?s=128&d=identicon&r=PG", "display_name": "keithpjolley", "link": "https://stackoverflow.com/users/2624770/keithpjolley"}, "edited": false, "score": 0, "creation_date": 1537696304, "post_id": 52464789, "comment_id": 91871642, "body": "@keithpjolley:1) Quoting the <code>This is...</code> still removes the escapes. Also it is not what I want as I don&#39;t what that line quoted 2) Doing double escapes solves this but I would prefer to not do that as the copy had the escapes already"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "reply_to_user": {"reputation": 1528, "user_id": 2624770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99c43476bd24ccb35d3143cc21777a2?s=128&d=identicon&r=PG", "display_name": "keithpjolley", "link": "https://stackoverflow.com/users/2624770/keithpjolley"}, "edited": false, "score": 0, "creation_date": 1537696631, "post_id": 52464789, "comment_id": 91871718, "body": "@keithpjolley: +1 the double escaping works though. I would like to understand why the approach is not working"}, {"owner": {"reputation": 1528, "user_id": 2624770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99c43476bd24ccb35d3143cc21777a2?s=128&d=identicon&r=PG", "display_name": "keithpjolley", "link": "https://stackoverflow.com/users/2624770/keithpjolley"}, "edited": false, "score": 0, "creation_date": 1537697684, "post_id": 52464789, "comment_id": 91871932, "body": "this just used up the last little bit of perl knowledge in my head:  <code>echo &quot;$TOTAL&quot; | perl -pe &#39;$v=q{&#39;&quot;$VAR&quot;&#39;};s&#47;STORY&#47;$v&#47;g&#39;</code>.  I&#39;m sure there are different ways of doing this that make more sense."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537710624, "post_id": 52464789, "comment_id": 91875186, "body": "Don&#39;t try to generate Perl code from the shell! You are likely to do it wrong, and indeed you are doing it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 1, "creation_date": 1537703436, "post_id": 52465357, "comment_id": 91873284, "body": "Another workaround would be to say: <code>echo &quot;$TOTAL&quot; | perl -pe &quot;s&#39;STORY&#39;$VAR&#39;g&quot;</code> so the <code>REPLACEMENT</code> is literally parsed."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1537704038, "post_id": 52465357, "comment_id": 91873428, "body": "@tshiono Thanks, great observation. I have edited your suggestion into my answer."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1537705527, "post_id": 52465357, "comment_id": 91873774, "body": "@H&#229;konH&#230;gland: Very helpful! In the <code>-- -VAR=&quot;$VAR&quot;</code> why is the dash in front of <code>VAR</code> needed? I.e. why is it not <code>-- VAR=&quot;$VAR&quot;</code>? I could not understand from the doc you pasted that it is supposed to be like that"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1537706206, "post_id": 52465357, "comment_id": 91873921, "body": "Yes I also think the documentation is not very clear at thant point. For more information, see also <a href=\"https://stackoverflow.com/a/21496197/2173773\">this</a> answer. So I think the dashes are needed to separate the <code>-VAR</code> and other user switches from ordinary <code>perl</code> options. I tested it a little bit, and you can even mix in ordinary arguments (<code>@ARGV</code>) by adding another instance of <code>--</code> like this: <code>perl -sE &#39;say &quot;:ARGV=&quot;, join &quot;|&quot;, @ARGV; say &quot;VAR=$VAR&quot;&#39; -- -VAR=ss -- 1 2 3</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537711991, "post_id": 52465357, "comment_id": 91875623, "body": "@ikegami Good catch! So then the first approach using <code>-s</code> would be a more correct approach than the second not using <code>-s</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1537712660, "post_id": 52465357, "comment_id": 91875838, "body": "@tshiono, <code>perl -pe &quot;s&#39;STORY&#39;$VAR&#39;g&quot;</code> still suffers from an injection bug like the OP&#39;s. In your case, it mishandles <code>\\\\ </code> and <code>\\&#39;</code>. Don&#39;t generate Perl code from the shell!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 4, "last_activity_date": 1537712553, "last_edit_date": 1537712553, "creation_date": 1537699794, "answer_id": 52465357, "question_id": 52464789, "link": "https://stackoverflow.com/questions/52464789/why-is-the-escape-of-quotes-lost-in-this-regex-substitution/52465357#52465357", "title": "Why is the escape of quotes lost in this regex substitution?", "body": "<p>The problem is that <code>perl</code> parses backslash escapes in an explicit  replacement string (not a <code>perl</code> variable), and hence a <code>\\\"</code> is parsed into a<code>\"</code>. For example:</p>\n\n<pre><code>$ echo \"A STORY\" | perl -pe 's/STORY/\\\"Hello\\\"/'\nA \"Hello\"\n</code></pre>\n\n<p>(Note that the Bash variable <code>$VAR</code> does not become a <code>perl</code> variable <code>$VAR</code> , but rather a constant string.) So you need to escape the backslashes like this in constant string:</p>\n\n<pre><code>$ echo \"A STORY\" | perl -pe 's/STORY/\\\\\"Hello\\\\\"/' \nA \\\"Hello\\\"\n</code></pre>\n\n<p>You can work around the issue by transferring the Bash variable <code>$VAR</code> into a <code>perl</code> variable <code>$VAR</code> by using the <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\"><code>-s</code></a> switch to <code>perl</code> like this:</p>\n\n<pre><code>echo \"$TOTAL\" | perl -spe 's/STORY/$VAR/g' -- -VAR=\"$VAR\"\n</code></pre>\n\n<p><strong>Ouput</strong>:</p>\n\n<pre><code>This is about money:  \nThis is a \\\"very good\\\" text worth AMOUNT dollars\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><strong>-s</strong> enables switch parsing for user defined switches on the <code>perl</code> command line. Any switch found there is removed from <code>@ARGV</code> and sets the corresponding variable in the Perl program.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537726136, "post_id": 52466949, "comment_id": 91879661, "body": "Amazing! One question: Basically if I had <code>\\\\&quot;very good\\\\&quot;</code> in the text all these would be unnecessary?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537726976, "post_id": 52466949, "comment_id": 91879908, "body": "So you&#39;re suggesting putting a fragment of Perl code --not even a complete token!-- in your data file. That&#39;s asking for trouble, and it&#39;s a horrible idea. I&#39;ve said the following a few times already, but it doesn&#39;t seem to have sunk in: <b>Don&#39;t try to generate Perl code from the shell!</b>"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537731048, "post_id": 52466949, "comment_id": 91880994, "body": "Wait. You mean <code>\\\\&quot;very good\\\\&quot;</code> is perl code? Ah I see now. I didn&#39;t understand it"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537731573, "post_id": 52466949, "comment_id": 91881151, "body": "It seems that this <code>VAR=&quot;$VAR&quot; perl -pe&#39;s&#47;STORY&#47;$ENV{VAR}&#47;g&#39;</code> works only if the substitution is within single quotes. This does not work <code>VAR=&quot;$VAR&quot; perl -pe &quot;s&#47;STORY&#47;$ENV{VAR}&#47;g&quot;</code>. Why?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537732504, "post_id": 52466949, "comment_id": 91881396, "body": "Also this works: `VAR1=&quot;$VAR&quot;  VAR2=&quot;$FOO&quot; perl -pe&#39;s/$ENV{VAR1}/$ENV{VAR2}/g&#39;. Is this correct usage or you see a misuse?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1537734295, "post_id": 52466949, "comment_id": 91881892, "body": "Depends if <code>VAR1</code> is a regex pattern, or a text string to match literally. It&#39;s likely the latter, so you&#39;ve just introduced a new code injection. You need to convert the text into a regex: <code>perl -pe&#39;s&#47;\\Q$ENV{VAR1}&#47;$ENV{VAR2}&#47;g&#39;</code>"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736310, "post_id": 52466949, "comment_id": 91882398, "body": "But why with double quotes the snippet does not work? I mean this <code>VAR=&quot;$VAR&quot; perl -pe &quot;s&#47;STORY&#47;$ENV{VAR}&#47;g&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736356, "post_id": 52466949, "comment_id": 91882409, "body": "Do <code>printf &#39;%s\\n&#39; &quot;s&#47;STORY&#47;$ENV{VAR}&#47;g&quot;</code> and see what you&#39;re passing to Perl. Hint: It&#39;s not <code>s&#47;STORY&#47;$ENV{VAR}&#47;g</code> as it should be!"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736449, "post_id": 52466949, "comment_id": 91882431, "body": "I get <code>-bash: print: command not found</code>. Do you mean <code>printf</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736467, "post_id": 52466949, "comment_id": 91882440, "body": "yup, typo (fixed)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 1, "creation_date": 1537736554, "post_id": 52466949, "comment_id": 91882462, "body": "By switching to double quotes, you made <code>$</code> special to the shell."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736568, "post_id": 52466949, "comment_id": 91882464, "body": "That prints <code>s&#47;STORY&#47;{VAR}&#47;g</code>. So the shell tries to interpolate <code>$ENV</code> instead of passing it to perl and since it is not set we end up with <code>{VAR}</code>. Have I got it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537736590, "post_id": 52466949, "comment_id": 91882466, "body": "Exactly. . . . ."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1541512368, "last_edit_date": 1541512368, "creation_date": 1537711816, "answer_id": 52466949, "question_id": 52464789, "link": "https://stackoverflow.com/questions/52464789/why-is-the-escape-of-quotes-lost-in-this-regex-substitution/52466949#52466949", "title": "Why is the escape of quotes lost in this regex substitution?", "body": "<p>Your code suffers from a <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">code injection</a> bug. Specifically, you're trying to generate Perl code from the shell, but failing at it.</p>\n\n<p>You are passing the following to Perl:</p>\n\n<pre><code>s/STORY/This is a \\\"very good\\\" text worth AMOUNT dollars/g\n</code></pre>\n\n<p>You should be passing the following:</p>\n\n<pre><code>s/STORY/This is a \\\\\"very good\\\\\" text worth AMOUNT dollars/g\n</code></pre>\n\n<hr>\n\n<p>To properly generate Perl code, you'd need something like the following:</p>\n\n<pre><code>perl -pe's/STORY/'\"$( printf %s \"$VAR\" | sed 's/\\W/\\\\&amp;/g' )\"'/'\n</code></pre>\n\n<p>This passes the following to Perl (which is also fine):</p>\n\n<pre><code>s/STORY/This is a \\\\\\\"very good\\\\\\\" text worth AMOUNT dollars/g\n</code></pre>\n\n<hr>\n\n<p>It's far simpler to avoid generating Perl code in the first place, though. There are three primary ways of passing information to Perl without using STDIN or external storage.</p>\n\n<ul>\n<li><p>Arguments</p>\n\n<pre><code>perl -pe'BEGIN { $VAR = shift(@ARGV) } s/STORY/$VAR/g' -- \"$VAR\"\n</code></pre></li>\n<li><p>Command-line options</p>\n\n<p>In a full program, you'd use <a href=\"http://search.cpan.org/perldoc?Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a>, but <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perl -s</code></a> will do fine here.</p>\n\n<pre><code>perl -spe's/STORY/$VAR/g' -- -VAR=\"$VAR\"\n</code></pre></li>\n<li><p>Environment variables</p>\n\n<pre><code>VAR=\"$VAR\" perl -pe's/STORY/$ENV{VAR}/g'\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 52466949, "answer_count": 2, "score": 2, "last_activity_date": 1541512368, "creation_date": 1537694791, "question_id": 52464789, "link": "https://stackoverflow.com/questions/52464789/why-is-the-escape-of-quotes-lost-in-this-regex-substitution", "title": "Why is the escape of quotes lost in this regex substitution?", "body": "<p>Why is the escaping of double quotes are lost in this case?  </p>\n\n<pre><code>$ cat foo.txt   \nThis is a \\\"very good\\\" text worth AMOUNT dollars    \n$ cat full_story.txt   \nThis is about money:  \nSTORY  \n</code></pre>\n\n<p>Testing it with the following:  </p>\n\n<pre><code>VAR=$(cat foo.txt)                                                                                         \nTOTAL=$(cat full_story.txt)  \necho \"$TOTAL\" | perl -pe \"s/STORY/$VAR/g\"  \n</code></pre>\n\n<p>Result:  </p>\n\n<pre><code>This is about money:  \nThis is a \"very good\" text worth AMOUNT dollars  \n</code></pre>\n\n<p>The escape of double quotes got lost. I was expecting:  </p>\n\n<pre><code>This is about money:  \nThis is a \\\"very good\\\" text worth AMOUNT dollars  \n</code></pre>\n\n<p>How can I preserve the escapes?  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537654905, "post_id": 52461314, "comment_id": 91864820, "body": "Why the downvote?"}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1537654959, "post_id": 52461355, "comment_id": 91864833, "body": "The expected output uses <code>\\n\\n</code> , not <code>\\n</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1537655108, "post_id": 52461355, "comment_id": 91864866, "body": "@choroba, Fixed."}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537690078, "post_id": 52461355, "comment_id": 91870325, "body": "@ikegami:Is there a reason that you are not separating <code>-0777</code> with <code>pe</code> and the pattern with a space?"}, {"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537706831, "post_id": 52461355, "comment_id": 91874065, "body": "@ikegami: I understood your first snippet! Very useful thank you!!! I do not understand the second one though. Could you please elaborate? I think it tries to check <code>if</code> is not whitespace but not sure about the rest"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537708157, "post_id": 52461355, "comment_id": 91874399, "body": "Why would I want to write <code>-0777 -p -e</code> instead of <code>-0777pe</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537708274, "post_id": 52461355, "comment_id": 91874431, "body": "If the current line contains a non-whitespace character, print a blank line if necessary, and print the line. Otherwise, set a flag indicating a blank line is needed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1537710111, "last_edit_date": 1537710111, "creation_date": 1537654873, "answer_id": 52461355, "question_id": 52461314, "link": "https://stackoverflow.com/questions/52461314/can-not-replace-multiple-empty-lines-with-one/52461355#52461355", "title": "Can not replace multiple empty lines with one", "body": "<p>You are executing the following program:</p>\n\n<pre><code>LINE: while (&lt;&gt;) {\n   s/\\n+/\\n/g;\n}\ncontinue {\n   die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<p>Since you are reading one line at at time, and since a line is a sequence of characters that aren't line feeds terminated by a line feed, your pattern will never match more than one newline.</p>\n\n<hr>\n\n<p>The simple fix is to tell Perl to treat the entire file as one line. Also, you don't want to replace every line feed, but just those found in sequence of two or more, and you want to replace the sequence with two line feeds.</p>\n\n<pre><code>perl -0777pe's/\\n\\n\\K\\n+//g; s^\\n+//; s/\\n\\K\\n\\z//' some_random_text.txt\n</code></pre>\n\n<p>The second and third substitutions ensure there are no blank lines at the start and end of the file.</p>\n\n<hr>\n\n<p>While reading the entire file into memory is easy, it's not necessary. The desired output can also be achieved by maintaining a flag that indicates whether the previous line was blank or not.</p>\n\n<pre><code>perl -ne'if (/\\S/) { print \"\\n\" if $f; print; $f=0 } else { $f=1 }' some_random_text.txt\n</code></pre>\n\n<p>This solution also removes blank lines from the start and end of the file.</p>\n"}, {"comments": [{"owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "edited": false, "score": 0, "creation_date": 1537655139, "post_id": 52461358, "comment_id": 91864871, "body": "This is interesting and it works but don&#39;t get me wrong, it seems like a black box approach. I mean on first sight it is very hard to understand (may be I am wrong here) what the code does piping to that command"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1537655196, "post_id": 52461358, "comment_id": 91864885, "body": "Note: This leaves two line feeds at the end of the file."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1537654896, "creation_date": 1537654896, "answer_id": 52461358, "question_id": 52461314, "link": "https://stackoverflow.com/questions/52461314/can-not-replace-multiple-empty-lines-with-one/52461358#52461358", "title": "Can not replace multiple empty lines with one", "body": "<p>The reason it doesn't work is that <code>-p</code> tells perl to process the input line by line, and there's never more than one <code>\\n</code> in a single line.</p>\n\n<p>Better idea:</p>\n\n<pre><code>perl -00 -lpe 1\n</code></pre>\n\n<ul>\n<li><code>-00</code>: Enable paragraph mode (input records are terminated by any sequence of 2+ newlines).</li>\n<li><code>-l</code>: Enable autochomp mode (the input record separators are trimmed automatically, so since we're in paragraph mode, all trailing newlines are removed, and output records get <code>\"\\n\\n\"</code> added).</li>\n<li><code>-p</code>: Enable automatic input/output (the main code is executed for each input record; anything left in <code>$_</code> is printed automatically).</li>\n<li><code>-e 1</code>: Use a dummy main program that does nothing.</li>\n</ul>\n\n<p>Taken all together this does nothing except normalize paragraph terminators to exactly two newlines.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537656050, "post_id": 52461424, "comment_id": 91865050, "body": "Note: Both solutions can leave two line feeds at the end of the file"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 2, "last_activity_date": 1537659887, "last_edit_date": 1537659887, "creation_date": 1537655453, "answer_id": 52461424, "question_id": 52461314, "link": "https://stackoverflow.com/questions/52461314/can-not-replace-multiple-empty-lines-with-one/52461424#52461424", "title": "Can not replace multiple empty lines with one", "body": "<p>Given:</p>\n\n<pre><code>$ echo \"$txt\"\nfoo   \n\n\n\nbar   \n\n\n\n\ntest  \n</code></pre>\n\n<p>You can use <code>sed</code> to reduce the runs of blank lines to a single <code>\\n</code>:</p>\n\n<pre><code>$ echo \"$txt\" | sed '/^$/N;/^\\n$/D'\nfoo   \n\nbar   \n\ntest  \n</code></pre>\n\n<p>Even easier, you can use <code>cat -s</code>:</p>\n\n<pre><code>$ echo \"$txt\" | cat -s            # same output \n</code></pre>\n\n<p>In <code>perl</code> the idiomatic 1 liner is to use <code>-00</code> for paragraph mode:</p>\n\n<pre><code>$ echo \"$txt\" | perl -00pe0       # same output \n</code></pre>\n\n<p>And in <code>awk</code> you have the flexibility of using paragraph mode by setting <code>RS=</code> and then set <code>ORS=</code> to what you want the replacement for runs of <code>\\n</code> to be:</p>\n\n<pre><code>$ echo \"$txt\" | awk '1' RS= ORS=\"\\n\\n\"    # same output \n</code></pre>\n\n<hr>\n\n<p>ikegami correctly states that <code>printf 'a\\n\\n' | ...</code> will produce two trailing spaces with these solutions. That may or may not be an issue. </p>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1537710111, "creation_date": 1537654485, "question_id": 52461314, "link": "https://stackoverflow.com/questions/52461314/can-not-replace-multiple-empty-lines-with-one", "title": "Can not replace multiple empty lines with one", "body": "<p>Why does the following not replace multiple empty lines with one?  </p>\n\n<pre><code>$ cat some_random_text.txt  \nfoo   \n\n\n\nbar   \n\n\n\n\ntest  \n</code></pre>\n\n<p>and this does not work:  </p>\n\n<pre><code>$ cat some_random_text.txt | perl -pe \"s/\\n+/\\n/g\"\nfoo  \n\n\n\nbar  \n\n\n\n\n\ntest  \n</code></pre>\n\n<p>I am trying to replace the multiple new lines (i.e. empty lines) to a single empty new line but the regex I use for that does not work as you can see in the example snippet.<br>\nWhat am I messing up?  </p>\n\n<p>Expected outcome is:  </p>\n\n<pre><code>foo\n\nbar\n\ntest\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537647581, "post_id": 52456847, "comment_id": 91863069, "body": "&quot;Bad address&quot; is an interesting error there. That&#39;s <code>EFAULT</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537661059, "post_id": 52456847, "comment_id": 91865863, "body": "@melpomene I think it&#39;s actually <code>&quot;Bad address &quot;</code> with a space at the end."}, {"owner": {"reputation": 7703, "user_id": 1741343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc07de659f5f800d5abb5cd3d0abf8ab?s=128&d=identicon&r=PG", "display_name": "helmy", "link": "https://stackoverflow.com/users/1741343/helmy"}, "edited": false, "score": 2, "creation_date": 1537717819, "post_id": 52456847, "comment_id": 91877258, "body": "Perhaps for some reason localhost cannot be resolved. Can you ping localhost? Can you try 127.0.0.1 in place of localhost? Can you show an example of a successful connection via the mongo shell?"}, {"owner": {"reputation": 1339, "user_id": 5650224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tY2JZ.png?s=128&g=1", "display_name": "m4gic", "link": "https://stackoverflow.com/users/5650224/m4gic"}, "edited": false, "score": 1, "creation_date": 1537725021, "post_id": 52456847, "comment_id": 91879340, "body": "IPv4 or IPv6 do you use? &quot;For IPv6 support, you must have a recent version of IO::Socket::IP installed. &quot; - <a href=\"https://metacpan.org/pod/MongoDB::MongoClient\" rel=\"nofollow noreferrer\">metacpan</a>"}, {"owner": {"reputation": 21, "user_id": 6082432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091875bb4a836a34abe44d5bdd558f04?s=128&d=identicon&r=PG&f=1", "display_name": "Cloud9", "link": "https://stackoverflow.com/users/6082432/cloud9"}, "reply_to_user": {"reputation": 7703, "user_id": 1741343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc07de659f5f800d5abb5cd3d0abf8ab?s=128&d=identicon&r=PG", "display_name": "helmy", "link": "https://stackoverflow.com/users/1741343/helmy"}, "edited": false, "score": 0, "creation_date": 1537786134, "post_id": 52456847, "comment_id": 91896437, "body": "@helmy Problem solved by explicitly stating 127.0.0.1 in place of localhost, as per your suggestion. (Pinging 127.0.0.1 was ok). I&#39;m not sure why localhost not recognised from within my Perl script Many thanks for all help - I can now push ahead with some prototype development."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 10239998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJv8.jpg?s=128&g=1", "display_name": "Daniel Pe&#241;a", "link": "https://stackoverflow.com/users/10239998/daniel-pe%c3%b1a"}, "is_accepted": false, "score": 2, "last_activity_date": 1561917281, "creation_date": 1561917281, "answer_id": 56826903, "question_id": 52456847, "link": "https://stackoverflow.com/questions/52456847/perl-cannot-connect-to-mongodb-server/56826903#56826903", "title": "perl: cannot connect to mongodb server", "body": "<p>By default MongoDB Server is available to 127.0.0.1\nSo change localhost by 127.0.0.1</p>\n\n<p>Then if you want to customize this, so you can access this MongoDB Server from other computer client check out this post: <a href=\"https://www.linkedin.com/pulse/mongodb-server-service-windows-10-daniel-pe%C3%B1a/\" rel=\"nofollow noreferrer\">https://www.linkedin.com/pulse/mongodb-server-service-windows-10-daniel-pe%C3%B1a/</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6082432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091875bb4a836a34abe44d5bdd558f04?s=128&d=identicon&r=PG&f=1", "display_name": "Cloud9", "link": "https://stackoverflow.com/users/6082432/cloud9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1561917281, "creation_date": 1537620897, "last_edit_date": 1537634368, "question_id": 52456847, "link": "https://stackoverflow.com/questions/52456847/perl-cannot-connect-to-mongodb-server", "title": "perl: cannot connect to mongodb server", "body": "<p>I am having a problem connecting to the mongodb server from my Perl script.</p>\n\n<ul>\n<li>the mongodb server is running ok on localhost port 27017</li>\n<li>I can access the mongodb server via the mongod shell and via mongo Compass (Community Edition)</li>\n</ul>\n\n<p>But on trying to connect via Perl, I am getting the error:</p>\n\n<pre><code>\"MongoDB::SelectionError: No readable server available for matching read preference primary. MongoDB server status:\nTopology type: Single; Member status:\nlocalhost:27017 (type: Unknown, error: MongoDB::NetworkError: Could not \nconnect to 'localhost:27017': Bad address )\"\n</code></pre>\n\n<p>The simple perlscript is:</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nuse open qw/:std :utf8/;\nuse IO::Handle;\nuse MongoDB;\n\n#my $client = MongoDB-&gt;connect('mongodb://localhost');   \n# connect to localhost:27017\nmy $client = MongoDB::MongoClient-&gt;new(host =&gt; 'localhost', port =&gt; 27017);\nmy $db   = $client-&gt;get_database( 'example');\nmy $people_coll = $db-&gt;get_collection('people');\n$db-&gt;drop;\n</code></pre>\n\n<p>The line:</p>\n\n<pre><code>my $client = MongoDB::MongoClient-&gt;new(host =&gt; 'localhost', port =&gt; 27017);\n</code></pre>\n\n<p>does not appear to throw the error, but trying to create or amend a dbase does. I have reviewed similar questions on mongodb connection issues and have tried turning off firewall, remove <code>/tmp/mongodb-27017.sock</code> (although I couldn't locate this file anywhere).</p>\n\n<p>Any help is most welcome!</p>\n"}, {"tags": ["perl", "scrypt"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537674465, "post_id": 52455992, "comment_id": 91867749, "body": "There&#39;s a pdf linked to in the module documentation that explains the algorithm..."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537691987, "post_id": 52455992, "comment_id": 91870715, "body": "@Shawn I have seen this paper and a few other articles, but they all (as far as I have understood) only explain how the password is transformed into a key. They do not explain how that key usually is used to produce the final hash from a password. As far as I have understood, the key which is produced by <code>scrypt</code> usually is <i>not</i> used directly as the password hash. I would be happy if you would correct me if I am wrong."}], "owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1537616287, "creation_date": 1537613839, "last_edit_date": 1537616287, "question_id": 52455992, "link": "https://stackoverflow.com/questions/52455992/how-does-cryptscryptkdfscrypt-hash-acutally-hash-the-input", "title": "How does Crypt::ScryptKDF::scrypt_hash acutally hash the input?", "body": "<p>I was thinking some time if I should post that question here or at crypto.stackexchange.com. I think the question is more related to implementation than to theory, so here we go:</p>\n\n<p>I have decided to use <code>scrypt</code> as the password hashing method for my future backends. Some of my backends are written in Perl, so I plan to use <a href=\"https://metacpan.org/pod/Crypt::ScryptKDF\" rel=\"nofollow noreferrer\"><code>Crypt::ScryptKDF</code></a>.</p>\n\n<p>It is quite clear how to use it, but one question is left: <code>scrypt</code> is (to my best knowledge) more a key derivation function than a hashing function. So how is the hashing actually done?</p>\n\n<p>Does it just encrypt the (salted) input string (e.g. a password) with the key which it has derived from the same (salted) input string (password), or is there more to it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537604382, "post_id": 52454741, "comment_id": 91852174, "body": "What do you mean by alias?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537604526, "post_id": 52454741, "comment_id": 91852201, "body": "&quot;Best&quot; is rather unspecific. What are your criteria?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537605845, "post_id": 52454741, "comment_id": 91852462, "body": "@Shawn: I mean <a href=\"https://www.perlmonks.org/?node_id=976523\" rel=\"nofollow noreferrer\">this</a>: An <code>alias</code> is another name that refers to the same thing as the first."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1537605948, "post_id": 52454741, "comment_id": 91852484, "body": "What Perl version are you using? <code>use experimental &#39;refaliasing&#39;</code> may be the least brittle solution."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1537606342, "post_id": 52454741, "comment_id": 91852579, "body": "My own preference is not to create any aliases. If possible, I&#39;d just use references manually."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537606415, "post_id": 52454741, "comment_id": 91852596, "body": "@melpomene: Here is specific case when we want to escape values copying"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1537606438, "post_id": 52454741, "comment_id": 91852603, "body": "@amon: this <code>\\@$data{ $sth-&gt;{NAME_lc}-&gt;@* } =  \\$self-&gt;source-&gt;@*</code> does not work =( This either: <code>\\[@$data{ $sth-&gt;{NAME_lc}-&gt;@* }] =  \\$self-&gt;source-&gt;@*</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537606492, "post_id": 52454741, "comment_id": 91852610, "body": "I didn&#39;t say copy the values, I said use references."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537606595, "post_id": 52454741, "comment_id": 91852639, "body": "@melpomene: Thus access syntax will be different: <code>${$data-&gt;{field}}</code> instead of <code>$data-&gt;{field}</code>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1537606877, "post_id": 52454741, "comment_id": 91852701, "body": "It&#39; seems you can&#39;t always ref-alias lists but only single values. Would <code>\\$data-&gt;{ $sth-&gt;{NAME_lc}-&gt;[$_] } =  \\$self-&gt;source-&gt;[$_] for 0 .. $#{ $self-&gt;source }</code> work?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1537607188, "post_id": 52454741, "comment_id": 91852779, "body": "@amon: We can. You give me the idea. See answer"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537617896, "post_id": 52455098, "comment_id": 91855269, "body": "I don&#39;t think you&#39;ve answered your question. How have you determined that <code>Data::Alias</code> is <i>&quot;the best way to accomplish this task&quot;</i>?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537714032, "post_id": 52455098, "comment_id": 91876255, "body": "@Borodin: This module is most <code>++</code> on metacpan. So I think it is the best"}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1537714286, "last_edit_date": 1537714286, "creation_date": 1537606687, "answer_id": 52455098, "question_id": 52454741, "link": "https://stackoverflow.com/questions/52454741/which-alias-module-better-to-use/52455098#52455098", "title": "Which alias module better to use?", "body": "<p>I have found this solution:</p>\n\n<pre><code>use Data::Alias;\nalias @$data{ $sth-&gt;{NAME_lc}-&gt;@* } =  $self-&gt;source-&gt;@*;\n</code></pre>\n\n<p><strong>UPD</strong><br>\nThanks <strong>@amon</strong> for <a href=\"https://perldoc.perl.org/feature.html#The-%27refaliasing%27-feature\" rel=\"nofollow noreferrer\"><code>refaliasing</code></a><a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\"><code>lists</code></a>:</p>\n\n<pre><code>\\(@$data{ $sth-&gt;{NAME_lc}-&gt;@* }) =  \\($self-&gt;source-&gt;@*)\n</code></pre>\n\n<p><strong>UPD</strong><br>\nSeems last examples does not work. Aliases are lexically scoped. reported as <a href=\"https://rt.perl.org/Ticket/Display.html?id=133538\" rel=\"nofollow noreferrer\">RT#133538</a></p>\n\n<p><code>Data::Alias</code> still works fine</p>\n\n<p><strong>UPD</strong><br>\n<code>Data::Alias</code> is most <code>++</code> aliasing module on <a href=\"http://metacpan.org/\" rel=\"nofollow noreferrer\">metacpan.org</a> so I think it is the best method as of today. Until <code>refaliasing</code> feature will be fixed.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1537714286, "creation_date": 1537603599, "last_edit_date": 1537605980, "question_id": 52454741, "link": "https://stackoverflow.com/questions/52454741/which-alias-module-better-to-use", "title": "Which alias module better to use?", "body": "<p>I want to alias values from <code>source</code> array to hash values</p>\n\n<pre><code>@$data{ $sth-&gt;{NAME_lc}-&gt;@* } =  $self-&gt;source-&gt;@*;\n</code></pre>\n\n<p>What is the best way to accomplish this task?</p>\n\n<p><strong>UPD</strong><br>\nHere I want hash value refer to array value. And if hash value is changed the corresponding value in array must be changed too</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1537599430, "post_id": 52453783, "comment_id": 91851301, "body": "See also <a href=\"https://metacpan.org/pod/FindBin\" rel=\"nofollow noreferrer\">FindBin</a>"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1537610005, "post_id": 52453783, "comment_id": 91853412, "body": "<a href=\"http://web.archive.org/web/2018/http://use.perl.org/~Aristotle/journal/33995\" rel=\"nofollow noreferrer\">No, not FindBin</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1537626200, "post_id": 52453783, "comment_id": 91857330, "body": "@daxim, That issue was fixed in 1.51"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1537635498, "post_id": 52453783, "comment_id": 91859905, "body": "Cool, for those (like me) who missed that change: <a href=\"http://p3rl.org/perl5160delta#Updated-Modules-and-Pragmata\" rel=\"nofollow noreferrer\">p3rl.org/perl5160delta#Updated-Modules-and-Pragmata</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537649348, "post_id": 52453783, "comment_id": 91863503, "body": "Note that since FindBin is not dual-life, it is broken forever on older Perls. Just another reason I avoid it and use <a href=\"https://metacpan.org/pod/lib::relative\" rel=\"nofollow noreferrer\">lib::relative</a>."}], "tags": [], "owner": {"reputation": 198, "user_id": 10010067, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HL8_NFLXvqo/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2mCETemhvYkgFAPIcYRvcHdYzdDA/mo/photo.jpg?sz=128", "display_name": "VRB", "link": "https://stackoverflow.com/users/10010067/vrb"}, "is_accepted": true, "score": 3, "last_activity_date": 1538140734, "last_edit_date": 1538140734, "creation_date": 1537594335, "answer_id": 52453783, "question_id": 52453723, "link": "https://stackoverflow.com/questions/52453723/perl-package-file-cant-locate/52453783#52453783", "title": "Perl package file Can&#39;t locate", "body": "<p>The reason of the issue is installed perl module location could not found . add the below line your sample.pl file</p>\n\n<pre><code> use strict;\n use warnings;\n\n use Cwd qw( abs_path );\n use File::Basename qw( dirname );\n use lib dirname(abs_path($0));\n\n\n use Sample;\n print Sample-&gt;test_function();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537626516, "post_id": 52454207, "comment_id": 91857417, "body": "It doesn&#39;t make sense to force the script&#39;s invoker to provide that information."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537626523, "post_id": 52454207, "comment_id": 91857418, "body": "<code>-I ...</code> doesn&#39;t add arch dirs, so it doesn&#39;t always work. <code>-Mlib=...</code> should be used instead to get build-specific components."}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 2, "last_activity_date": 1537599425, "last_edit_date": 1537599425, "creation_date": 1537598439, "answer_id": 52454207, "question_id": 52453723, "link": "https://stackoverflow.com/questions/52453723/perl-package-file-cant-locate/52454207#52454207", "title": "Perl package file Can&#39;t locate", "body": "<p>First of all, your <code>Sample.pm</code> file must finish returning a true value. The common way to do that is appending <code>1;</code> and the end of that file.</p>\n\n<pre><code>package Sample;\nuse strict;\nuse warnings;\nsub  test_function {\n   return 'Welcome';\n}\n1;\n</code></pre>\n\n<p>After Perl 5.26, current directory was removed from <code>@INC</code>. There are several ways to deal with this. For example, you can use the <code>-I</code> option when running the script:</p>\n\n<pre><code>perl -I. sample.pl\n</code></pre>\n\n<p>For a more deeper lecture on how to deal with <code>@INC</code>, please <a href=\"https://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe\">read this SO post</a>.</p>\n"}], "owner": {"reputation": 1324, "user_id": 6508520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80809cfc27b89f5dbd342937b64bafbd?s=128&d=identicon&r=PG&f=1", "display_name": "VinothRaja", "link": "https://stackoverflow.com/users/6508520/vinothraja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 2, "closed_date": 1537626604, "accepted_answer_id": 52453783, "answer_count": 2, "score": 4, "last_activity_date": 1538140734, "creation_date": 1537593603, "question_id": 52453723, "link": "https://stackoverflow.com/questions/52453723/perl-package-file-cant-locate", "closed_reason": "Duplicate", "title": "Perl package file Can&#39;t locate", "body": "<p>I have integrate sample function in perl. Everything working fine but i am not able to connect Perl module package file(.pm)</p>\n\n<p>Please review below code</p>\n\n<p>sample.pl</p>\n\n<pre><code>#!/usr/bin/perl\n\n use strict;\n use warnings;\n use Sample;\nprint Sample-&gt;test_function();\n</code></pre>\n\n<p>Sample.pm</p>\n\n<pre><code> package Sample;\n\n  sub  test_function\n  {\n\n  return 'Welcome';\n\n  }\n</code></pre>\n\n<p>Once after run the sample.pl file. It's return the error <strong>\"Can't locate Sample.pm \"</strong> but the package file availale in same folder.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "reply_to_user": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1537593937, "post_id": 52453534, "comment_id": 91850455, "body": "Does It mean there is an implicit convert from <code>string</code> to <code>qr&#47;&#47;</code> when I use <code>$_ =~ $str</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537594205, "post_id": 52453534, "comment_id": 91850491, "body": "@Lane  See my completed answer. Any expression can be used as a pattern when fed to the <code>=~</code> operator."}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1537594428, "post_id": 52453534, "comment_id": 91850524, "body": "They are the same thing. One is the customary form while the other is the generic form. They are converted to the same construct."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1537652785, "post_id": 52453534, "comment_id": 91864323, "body": "@Rafael  &quot;<i>They are the same thing.</i>&quot; -- no, they are not.  For <i>some patterns</i> either can be used but for a range of needs that doesn&#39;t hold (<code>qr</code> can do far more).  I believe that you merely misspoke (assuming one of those patterns for which both work the same) but I am commenting as a clarification for those who aren&#39;t well versed in regex."}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537609606, "post_id": 52453566, "comment_id": 91853325, "body": "If I use <code>&#39;&#39;</code>(single quotation marks) string, I don&#39;t need &quot;double-slash to escape the slash&quot;, it&#39;s the same as <code>qr</code> sytle pattern, right?"}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "reply_to_user": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537620801, "post_id": 52453566, "comment_id": 91855929, "body": "You are half correct, <code>&amp;#39;&amp;#39;</code> is customary for <code>q&#47;&#47;</code>, not <code>qr&#47;&#47;</code>, no slash is required because it is not interpolated, the string is processed &quot;as-is.&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537634012, "post_id": 52453566, "comment_id": 91859459, "body": "Would you mind adding the page and edition for your quote please?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537643716, "post_id": 52453566, "comment_id": 91862115, "body": "This is misleading. (Is it in a specific context in the good book?)  While <code>&#39;&#39;</code> and <code>q()</code> can stand for each other, <code>&quot;&quot;</code> and <code>qr&#47;&#47;</code> aren&#39;t the same thing (even as we may use either <i>for some patterns</i>)."}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537643911, "post_id": 52453566, "comment_id": 91862163, "body": "@zdim yes, they are context specific. Look at row 2 and the last row."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537644970, "post_id": 52453566, "comment_id": 91862422, "body": "Sure -- what I mean is that &quot;<i>customary</i>&quot; and &quot;<i>generic</i>&quot; may easily be misunderstood to say that they can be used interchangeably, specially with all other examples being that way.  I&#39;m thinking that when the table is taken out of the book (so to speak) in this way then the last line stands out as a sore thumb in that sense -- all others are practically intechangeable while the last one patently isn&#39;.t"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537662112, "post_id": 52453566, "comment_id": 91866053, "body": "@Lane, @zdim, No, <code>&#39;\\\\s&#39;</code> (matches a whitespace) is not the same thing as <code>qr&#47;\\\\s&#47;</code> (matches <code>\\ </code> followed by <code>s</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537662443, "post_id": 52453566, "comment_id": 91866098, "body": "@zdim, In a way, <code>&quot;&quot;</code> and <code>qr&#47;&#47;</code> are quite close, as both are interpolating (including <code>\\u</code>, <code>\\Q</code> and such). The difference is that <code>qr&#47;&#47;</code> passes through escapes still escaped."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537666301, "post_id": 52453566, "comment_id": 91866694, "body": "@ikegami What I meant to point out (here and elsewhere in comments on this page) is that they are not the <i>same</i>.  Apart from a small difference in how quoting works the <code>qr</code> also takes modifiers. (I think that there are yet other things that <code>qq()</code> can&#39;t do for regex while <code>qr</code> can but I can&#39;t recall them.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537666693, "post_id": 52453566, "comment_id": 91866756, "body": "@zdim, <code>qq</code> has more character escapes (e.g. <code>\\b</code> produces backspace or something), but that&#39;s it"}], "tags": [], "owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "is_accepted": false, "score": 3, "last_activity_date": 1537637021, "last_edit_date": 1537637021, "creation_date": 1537591447, "answer_id": 52453566, "question_id": 52453534, "link": "https://stackoverflow.com/questions/52453534/why-regular-expression-is-valid-in-perl/52453566#52453566", "title": "Why $_ =~ &quot;regular expression&quot; is valid in Perl?", "body": "<p>Perl strives to be a natural language, as such, these customary forms, <code>''</code> and <code>\"\"</code>, may have different generic forms depending on the context. Here is the table taken straight out of <a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow noreferrer\">Programming Perl, 4th Edition (pg. 71)</a>, Table 2-7. Quote constructs:</p>\n\n<blockquote>\n<pre><code>+-----------+---------+-----------------------+--------------+\n| Customary | Generic | Meaning               | Interpolates |\n+-----------+---------+-----------------------+--------------+\n| ''        | q//     | Literal string        | No           |\n+-----------+---------+-----------------------+--------------+\n| \"\"        | qq//    | Literal string        | Yes          |\n+-----------+---------+-----------------------+--------------+\n| ``        | qx//    | Command execution     | Yes          |\n+-----------+---------+-----------------------+--------------+\n| ()        | qw//    | Word list             | No           |\n+-----------+---------+-----------------------+--------------+\n| //        | m//     | Pattern match         | Yes          |\n+-----------+---------+-----------------------+--------------+\n| s///      | s///    | Pattern substitution  | Yes          |\n+-----------+---------+-----------------------+--------------+\n| tr///     | y///    | Character translation | No           |\n+-----------+---------+-----------------------+--------------+\n| \"\"        | qr//    | Regular expression    | Yes          |\n+-----------+---------+-----------------------+--------------+\n</code></pre>\n</blockquote>\n\n<p><strong>Example:</strong></p>\n\n<p>The string is converted to a pattern in this example. You have to take care here though, for when you construct patterns from double-quoted strings, you must escape the slash.</p>\n\n<p>You can clearly see here:</p>\n\n<pre><code>my $pat = \"hello\\\\s+world\"; #double-slash to escape the slash\n\nif (\"hello       world\" =~ $pat) {\n    print \"hello, world\\n\";\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>hello, world\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537596875, "post_id": 52453588, "comment_id": 91850868, "body": "<code>For one thing, using a string (and not a regex built with qr) is limiting. Also, it is more prone to silly errors.</code> =&gt; If I use <code>&quot;&quot;</code>(double quotation marks) string, it may lead some escape problems. But if I use <code>&#39;&#39;</code>(single quotation marks) string, <code>&#39;expression&#39;</code> and <code>qr&#47;expression&#47;</code> are almost the same, am I right?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537622478, "post_id": 52453588, "comment_id": 91856341, "body": "@Lane Not quite. For one, <code>qr&#47;&#47;</code> interpolates <code>$variables</code>. It also detects errors earlier: <code>qr&#47;)&#47;</code> is a hard error."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "edited": false, "score": 0, "creation_date": 1537644644, "post_id": 52453588, "comment_id": 91862342, "body": "@Lane  Added a note at the end, I hope that it helps.  The single quotes <code>&#39;&#39;</code> don&#39;t interpolate so they are different. The <code>&quot;&quot;</code> (double quotes) do and they are most similar to <code>qr</code>. The escape issues indeed exist as the main (only?) difference in quoting rules for them.  However, there are other differences and I recommend to use <code>qr</code> for a regex."}, {"owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537687599, "post_id": 52453588, "comment_id": 91869793, "body": "@melpomene @zdim Thank you. I think I got the point, they are close but they are different. In most common cases <code>&#39;&#39;</code> and <code>&quot;&quot;</code> may work fine but I&#39;d better use <code>qr&#47;&#47;</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1590122924, "last_edit_date": 1590122924, "creation_date": 1537591776, "answer_id": 52453588, "question_id": 52453534, "link": "https://stackoverflow.com/questions/52453534/why-regular-expression-is-valid-in-perl/52453588#52453588", "title": "Why $_ =~ &quot;regular expression&quot; is valid in Perl?", "body": "<p>It says under <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">\"The basics\" in perlre</a></p>\n\n<blockquote>\n  <p>Patterns that aren't already stored in some variable must be delimitted, at both ends, by delimitter characters.</p>\n</blockquote>\n\n<p>( along with the incorrect double-t in delimite(d/r) )</p>\n\n<p>Thus, a pattern in a variable just doesn't need delimiters.  The operator <code>=~</code> discussed in <a href=\"https://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"nofollow noreferrer\">\"Binding operators\" in perlop</a></p>\n\n<blockquote>\n  <p>binds a scalar expression to a pattern match.</p>\n</blockquote>\n\n<p>and (with my emphasis)</p>\n\n<blockquote>\n  <p>If the right argument is an expression rather than a search pattern, substitution, or transliteration, it is <strong>interpreted as a search pattern at run time.</strong></p>\n</blockquote>\n\n<p>The operator doesn't care for delimiters on its right hand side and a \"regex pattern\" can be formed at runtime out of an expression. </p>\n\n<p>The section <a href=\"https://perldoc.perl.org/perlop.html#Gory-details-of-parsing-quoted-constructs\" rel=\"nofollow noreferrer\">\"Gory details of parsing quoted constructs\" in perlop</a> helps with this as well, apart from being illuminating in its own right. After the quoted construct is identified and the contained text interpolated it comes to the bullet \"parsing regular expressions\"</p>\n\n<blockquote>\n  <p>After preprocessing described above ... the resulting <strong>string</strong> is passed to the RE engine for compilation.</p>\n</blockquote>\n\n<p>(my emphasis)</p>\n\n<p>This is a general discussion of how Perl handles quoted constructs and \nthere is no requirement for (extra) delimiters once the string is formed out of the quoted construct.  The <code>m/RE/</code> (etc) are discussed earlier in the  \"<em>interpolation</em>\" bullet, what shows some of the things that can't be used with a plain string for a pattern, but that is clearly not compulsory to have. </p>\n\n<p>I'd recommend against this though; use <code>qr</code>, as you expect.  For one thing, using a string (and not a regex built with <code>qr</code>) is limiting. Also, it is more prone to silly errors. </p>\n\n<hr>\n\n<p>Note that while <em>for many patterns</em> one can use either <code>qr</code> or <code>\"\"</code> (or its operator form <code>qq()</code>) to prepare the pattern (or the string which will be interpreted that way) -- they are not the same. Their quoting rules are quite similar but the <code>qr</code> prepares a <em>regular expression</em> which, as put in <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">Regexp Quote-Like Operators</a></p>\n\n<blockquote>\n  <p>... magically differs from a string containing the same characters ...</p>\n</blockquote>\n\n<p>For one, recall that with <code>qr</code> you may use modifiers.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1537661995, "last_edit_date": 1537661995, "creation_date": 1537635449, "answer_id": 52458874, "question_id": 52453534, "link": "https://stackoverflow.com/questions/52453534/why-regular-expression-is-valid-in-perl/52458874#52458874", "title": "Why $_ =~ &quot;regular expression&quot; is valid in Perl?", "body": "<p>This is answered by the documentation for <code>=~</code> in <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a>:</p>\n\n<blockquote>\n  <p>If the right argument is an expression rather than a search pattern, substitution, or transliteration, it is interpreted as a search pattern at run time.</p>\n</blockquote>\n\n<hr>\n\n<p>There are only a few things that can legitimately follow <code>=~</code>:</p>\n\n<ul>\n<li>A match operator (<code>m//</code>)</li>\n<li>A substitution operator (<code>s///</code> )</li>\n<li>A transliteration operator (<code>tr///</code>)</li>\n</ul>\n\n<p>Now, Perl <em>could</em> give a syntax error as you expect if anything else if found on the right-hand side of <code>=~</code>. But it does something far more useful instead. If it finds something other than the above operators, the result of the expression is used as the pattern for an implicit match operator.</p>\n\n<p>This conveniently allows</p>\n\n<pre><code>$s =~ get_pattern()               # do { my $pat = get_pattern(); $s =~ /$pat/ }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$s =~ ( $sub_pat1 . $sub_pat2 )   # do { my $pat = $sub_pat1 . $sub_pat2; $s =~ /$pat/ }\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 4156036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-wN-oUn0fU5o/AAAAAAAAAAI/AAAAAAAACvk/ZaMbeTKUqq8/photo.jpg?sz=128", "display_name": "Lane", "link": "https://stackoverflow.com/users/4156036/lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 52453588, "answer_count": 3, "score": 4, "last_activity_date": 1590122924, "creation_date": 1537591038, "question_id": 52453534, "link": "https://stackoverflow.com/questions/52453534/why-regular-expression-is-valid-in-perl", "title": "Why $_ =~ &quot;regular expression&quot; is valid in Perl?", "body": "<p>I know in Perl, a most common valid regular expression is like this:</p>\n\n<pre><code>$_ =~ m/regular expression/;\n\n# and \"m\" can be omit\n$_ =~ /regular expression/;\n</code></pre>\n\n<p>And I can use <code>qr</code> to create a regular expression reference like this:</p>\n\n<pre><code>my $regex = qr/regular expression/;\n$_ =~ m/$regex/;\n\n# and \"m//\" can be omit:\n$_ =~ $regex;\n</code></pre>\n\n<p>But I have tried this:</p>\n\n<pre><code>my $str = \"regular expression\";\n$_ =~ $str; # why this is valid?\n</code></pre>\n\n<p>It didn't give me any error infomation and worked fine. I don't know why, I think it should be like:</p>\n\n<pre><code>my $str = \"regular expression\";\n$_ =~ m/$str/;\n\n# or\nmy $str = \"regular expression\";\nmy $regex = qr/$str/;\n$_ =~ $regex;\n</code></pre>\n\n<p>Can anyone explain why <code>$_ =~ $str</code> is valid in Perl?</p>\n"}, {"tags": ["shell", "perl"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8729151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448fea654a835a3568222bd8886b8a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/8729151/zain"}, "edited": false, "score": 0, "creation_date": 1537596806, "post_id": 52452892, "comment_id": 91850859, "body": "Thank you, it works. But could you explain please, what the first part does? that match only .xml files!"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "reply_to_user": {"reputation": 53, "user_id": 8729151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448fea654a835a3568222bd8886b8a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/8729151/zain"}, "edited": false, "score": 0, "creation_date": 1537600085, "post_id": 52452892, "comment_id": 91851412, "body": "First part is fine as you expect. The problem is bash expands <code>*</code> into a list of the all file names (well all files that do not start with &#39;.&#39;) in the current working dir. and passes all the output from your <code>find</code> command to your <code>xargs</code> command. And this is what you did NOT expected."}, {"owner": {"reputation": 53, "user_id": 8729151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448fea654a835a3568222bd8886b8a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/8729151/zain"}, "edited": false, "score": 0, "creation_date": 1537821704, "post_id": 52452892, "comment_id": 91915369, "body": "Thank you again for the clarification."}], "tags": [], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "is_accepted": true, "score": 1, "last_activity_date": 1537582156, "creation_date": 1537582156, "answer_id": 52452892, "question_id": 52452848, "link": "https://stackoverflow.com/questions/52452848/problem-with-matching-a-specific-extension-only-using-find-command-in-shell-scri/52452892#52452892", "title": "Problem with matching a specific extension only using find command in shell script", "body": "<p>Your have a wild card, *, and the end of your command!</p>\n"}, {"tags": [], "owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "is_accepted": false, "score": 0, "last_activity_date": 1537592168, "last_edit_date": 1537592168, "creation_date": 1537582558, "answer_id": 52452931, "question_id": 52452848, "link": "https://stackoverflow.com/questions/52452848/problem-with-matching-a-specific-extension-only-using-find-command-in-shell-scri/52452931#52452931", "title": "Problem with matching a specific extension only using find command in shell script", "body": "<p>As pointed out by Red Cricket, you have a <code>*</code> at the end of your command, <strong>get rid of that</strong>.</p>\n\n<p>Also, I recommend using <code>-exec</code> and <code>sed</code>:</p>\n\n<pre><code>find -name '*.xml' -exec sed 's/\\s\\+/ /g' {} \\;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8729151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448fea654a835a3568222bd8886b8a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Zain", "link": "https://stackoverflow.com/users/8729151/zain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52452892, "answer_count": 2, "score": 0, "last_activity_date": 1537592168, "creation_date": 1537581648, "question_id": 52452848, "link": "https://stackoverflow.com/questions/52452848/problem-with-matching-a-specific-extension-only-using-find-command-in-shell-scri", "title": "Problem with matching a specific extension only using find command in shell script", "body": "<p>I want to make some changes on a list of XML files in a directory using shell script and some perl commands.\nHere it is an example of perl commands:</p>\n\n<pre><code>find \".\" -name \"*.xml\" | xargs perl -pi -e 's/\\s+/ /g' *\n</code></pre>\n\n<p>All Perl commands work fine, but the problem is, the shell script executes the commands even on itself, in other words, when I run the shell script the perl commands changes the shell scripts with all other XML files!!! \nNOTE: XML files and Shell script are located on the same directory, and should not this part of the command:</p>\n\n<pre><code> find \".\" -name \"*.xml\" \n</code></pre>\n\n<p>match only the files with XML extension !!! </p>\n\n<p>any suggestions please?!</p>\n"}, {"tags": ["windows", "perl", "cpan"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8735932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DI05R.jpg?s=128&g=1", "display_name": "coder", "link": "https://stackoverflow.com/users/8735932/coder"}, "edited": false, "score": 0, "creation_date": 1537670284, "post_id": 52452854, "comment_id": 91867211, "body": "Thanks for reply. may i know where i have to run this command . whether under cpan&gt; or c:&gt; folder. what i have to give input for &quot;Enter the path to the WMI source code:&quot;"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "reply_to_user": {"reputation": 1, "user_id": 8735932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DI05R.jpg?s=128&g=1", "display_name": "coder", "link": "https://stackoverflow.com/users/8735932/coder"}, "edited": false, "score": 0, "creation_date": 1537709543, "post_id": 52452854, "comment_id": 91874795, "body": "<code>perl -MCPAN -e shell</code> will put you in the <code>cpan&gt;</code> prompt where you would enter <code>install Net::WMIClient</code>."}], "tags": [], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "is_accepted": false, "score": 0, "last_activity_date": 1537581768, "creation_date": 1537581768, "answer_id": 52452854, "question_id": 52452803, "link": "https://stackoverflow.com/questions/52452803/path-to-wmi-source-code-in-perl-cpan-in-command-prompt/52452854#52452854", "title": "path to WMI source code in perl CPAN (in command prompt)", "body": "<p>The documentation says to either execute </p>\n\n<pre><code>cpanm Net::WMIClient \n</code></pre>\n\n<p>or </p>\n\n<pre><code>perl -MCPAN -e shell\ninstall Net::WMIClient\n</code></pre>\n\n<p>Did you try that? </p>\n"}], "owner": {"reputation": 1, "user_id": 8735932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DI05R.jpg?s=128&g=1", "display_name": "coder", "link": "https://stackoverflow.com/users/8735932/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537581768, "creation_date": 1537580940, "last_edit_date": 1537581419, "question_id": 52452803, "link": "https://stackoverflow.com/questions/52452803/path-to-wmi-source-code-in-perl-cpan-in-command-prompt", "title": "path to WMI source code in perl CPAN (in command prompt)", "body": "<p>while Try to install Net::WMIClient. In command prompt i receive a request \n\"Enter the path to the WMI source code:\"</p>\n\n<p>May i Know how to install WMIclient in local machine </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537569211, "post_id": 52451679, "comment_id": 91846939, "body": "What kind of error did you put into your script? A syntax error? Or did you make it <code>die</code>? Or <code>exit 1</code>?"}, {"owner": {"reputation": 65, "user_id": 2518568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a875fb624b66b624e79dc65d73de1f6f?s=128&d=identicon&r=PG", "display_name": "pdp1231", "link": "https://stackoverflow.com/users/2518568/pdp1231"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537569593, "post_id": 52451679, "comment_id": 91847023, "body": "I gave wrong arguments- should return exit 1."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537570248, "post_id": 52451679, "comment_id": 91847150, "body": "The docs say it will always set <code>$EXITVAL</code> to <code>-1</code> in case of an abnormal exit, which is anything other than <code>0</code>. But it doesn&#39;t seem to do that. Strange. I can&#39;t run it right now though, so cannot be of much further help. Does it throw the exception if you remote the <code>EXIT_ANY</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537573597, "post_id": 52451679, "comment_id": 91847770, "body": "Re &quot;<i>I gave wrong arguments- should return exit 1.</i>&quot;, Well, it didn&#39;t if <code>$EXITVAL</code> is zero as you claim"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537573633, "post_id": 52451679, "comment_id": 91847775, "body": "Note that your code will never enter the <code>if</code> because <code>capture</code> throws an exception when it sets <code>$EXITVAL</code> to <code>-1</code> (according to the very text you quoted, and confirmed through experimentation)."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1537570240, "post_id": 52451748, "comment_id": 91847149, "body": "When passing multiple arguments to system(), the first argument must only be the executable. So it would be <code>&#39;perl foo.pl&#39;</code>, or <code>&#39;perl&#39;, &#39;foo.pl&#39;, @args</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537570276, "post_id": 52451748, "comment_id": 91847158, "body": "@Grinnz it&#39;s late over here ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1537570268, "last_edit_date": 1537570268, "creation_date": 1537569104, "answer_id": 52451748, "question_id": 52451679, "link": "https://stackoverflow.com/questions/52451679/exitval-not-working-with-capture-in-perl/52451748#52451748", "title": "$EXITVAL not working with capture in perl", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a> to do this. Your use-case is actually the first in the synopsis of the docs.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Capture::Tiny;\n\nmy ($stdout, $stderr, $exit) = capture {\n  system( './foo.pl', @args );\n};\n\nif ($exit) {\n    warn 'something went wrong when executing foo.pl';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1537573993, "creation_date": 1537573993, "answer_id": 52452274, "question_id": 52451679, "link": "https://stackoverflow.com/questions/52451679/exitval-not-working-with-capture-in-perl/52452274#52452274", "title": "$EXITVAL not working with capture in perl", "body": "<p>Contrary to your unsupported claims, it does work as documented.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\n\nuse IPC::System::Simple qw( capture EXIT_ANY $EXITVAL );\n\n{\n   my $output = capture(EXIT_ANY, 'perl', '-e', 'print \"abc\\n\"; exit(123);');\n   print(\"&lt;$_&gt;\\n\") for split /\\n/, $output;\n   print(\"$EXITVAL\\n\");\n}\n\nprint(\"--\\n\");\n\n{\n   my $output = capture(EXIT_ANY, 'non-existent');\n   print(\"&lt;$_&gt;\\n\") for split /\\n/, $output;\n   print(\"$EXITVAL\\n\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;abc&gt;\n123\n--\n\"non-existent\" failed to start: \"No such file or directory\" at a.pl line 15.\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 2518568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a875fb624b66b624e79dc65d73de1f6f?s=128&d=identicon&r=PG", "display_name": "pdp1231", "link": "https://stackoverflow.com/users/2518568/pdp1231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52451748, "answer_count": 2, "score": 0, "last_activity_date": 1537573993, "creation_date": 1537568622, "last_edit_date": 1592644375, "question_id": 52451679, "link": "https://stackoverflow.com/questions/52451679/exitval-not-working-with-capture-in-perl", "title": "$EXITVAL not working with capture in perl", "body": "<p>I need to run a Perl script from a Perl script, save the output in a log file and display an error message if I get an error. I don't want the script to end, just print the message that a call had failed. I am using capture to do this but I am unable to print the error message conditionally.</p>\n<p>I referred to <a href=\"https://metacpan.org/pod/IPC::System::Simple#runx(),-systemx()-and-capturex()\" rel=\"nofollow noreferrer\">this link</a>, particularly this text:</p>\n<blockquote>\n<p>$EXITVAL The exit value of any command executed by IPC::System::Simple\ncan always be retrieved from the $IPC::System::Simple::EXITVAL\nvariable:</p>\n<p>This is particularly useful when inspecting results from capture,\nwhich returns the captured text from the command.</p>\n<p><em>use IPC::System::Simple qw(capture $EXITVAL EXIT_ANY);   my\n@enemies_defeated = capture(EXIT_ANY, &quot;defeat_evil&quot;, &quot;/dev/mordor&quot;);<br />\nprint &quot;Program exited with value $EXITVAL\\n&quot;;</em></p>\n<p>$EXITVAL will be set to\n-1 if the command did not exit normally (eg, being terminated by a signal) or did not start. In this situation, an exception will also be\nthrown.</p>\n</blockquote>\n<p>This is my code:</p>\n<pre><code>use IPC::System::Simple qw(capture EXIT_ANY $EXITVAL);\nmy $output = capture(EXIT_ANY, $tool_path);\nif($EXITVAL == -1){\n        print &quot;CHECK_FLOW: Error! check. Check the log file mem_check.log\\n&quot;;\n}\nelse{\n        print &quot;CHECK_FLOW: Completed check.\\n&quot;;\n}\nmy $filename = 'check.log';\nopen(my $fh, '&gt;', $filename);\nprint $fh &quot;$output\\n&quot;;\nclose $fh;\n</code></pre>\n<p>I inserted an error in the $tool_path purposely and used the debugger which shows the $EXITVAL to be 0 in both cases.</p>\n<p>Is there anything I am missing? Is there any other way to accomplish what I am trying to do?</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 4, "creation_date": 1537547916, "post_id": 52447900, "comment_id": 91838660, "body": "There is no double quote in <code>joe&#39;,&#39;b,,o&#39;,&#39;fo&#39;,&#39;d,o&#39;,&#39;mo</code> ? What is your expected output?"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1537547991, "post_id": 52447900, "comment_id": 91838700, "body": "@Dr Jay, please post correct input and output in your post and let us know then?"}, {"owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1537548412, "post_id": 52447900, "comment_id": 91838873, "body": "@RavinderSingh13 i&#39;ve do changement thanks"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1537578585, "post_id": 52447900, "comment_id": 91848567, "body": "When you say &quot;double quotes&quot; do you actually mean &quot;single quotes&quot; or &quot;commas&quot;? There are no double quotes (<code>&quot;</code>) in your example, just letters (<code>a...z</code>), single quotes (<code>&#39;</code>) and commas (<code>,</code>). I also don&#39;t know what you&#39;re trying to tell us with <code>Expected Result with tabs \\t</code>."}], "answers": [{"comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1537554538, "post_id": 52448109, "comment_id": 91841664, "body": "@OP: Did this work out?"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1537548746, "creation_date": 1537548746, "answer_id": 52448109, "question_id": 52447900, "link": "https://stackoverflow.com/questions/52447900/extract-specified-column-contain-double-quotes-using-awk/52448109#52448109", "title": "Extract specified column contain double quotes using awk", "body": "<p>You may use this <code>awk</code>:</p>\n\n<pre><code>str=\"joe','b,,o','fo','d,o','mo\"\n\nawk -v OFS='\\t' -F \"','\" '{ print $1,$2,$3,$4,$5 }' &lt;&lt;&lt; \"$str\"\n</code></pre>\n\n<p></p>\n\n<pre><code>joe    b,,o    fo    d,o    mo\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 9169752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4ea1d5239935a9e8a698f297ed7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Jay", "link": "https://stackoverflow.com/users/9169752/dr-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1537578785, "answer_count": 1, "score": 0, "last_activity_date": 1537548746, "creation_date": 1537547679, "last_edit_date": 1537548204, "question_id": 52447900, "link": "https://stackoverflow.com/questions/52447900/extract-specified-column-contain-double-quotes-using-awk", "closed_reason": "Needs details or clarity", "title": "Extract specified column contain double quotes using awk", "body": "<p>I have an sql dump file, from which I want to extract specified columns. I'm trying to do this using awk.</p>\n\n<p>The problem is some fields contain double quotes ,, so i can't get the match result.</p>\n\n<p>The enclosed character is ','</p>\n\n<p>File include </p>\n\n<pre><code>joe','b,,o','fo','d,o','mo\n</code></pre>\n\n<p>The command</p>\n\n<pre><code>awk 'BEGIN { OFS=\"','\"; FS=\"','\" } { print $1,$2,$3,$4,$5 }'\n</code></pre>\n\n<p>note the file at this example has 5 column field but with double quotes.\nThanks in advance</p>\n\n<p>Expected Result with tabs \\t</p>\n\n<pre><code>joe b,,o fo d,o mo\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537538576, "post_id": 52445345, "comment_id": 91833554, "body": "Again, please include your data in the question. Also, you might not want to use a <code>do ... while</code> construct, it&#39;s quite un-Perlish and hard to read. And there&#39;s no more JSON in this. JSON is irrelevant now. It&#39;s now just data."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1537538745, "post_id": 52445345, "comment_id": 91833649, "body": "<code>length $opsteams-&gt;{teams}</code> is probably not what you want. That returns the character length of a string, not the element length of an array. Try <code>scalar @{$opstreams-&gt;{teams}}</code>"}, {"owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537539235, "post_id": 52445345, "comment_id": 91833965, "body": "@simbabque updated the json sample."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537544657, "post_id": 52445345, "comment_id": 91837084, "body": "As I said, you need to distinguish between JSON and Perl data structures. In the code you&#39;ve shown here, there is no more JSON. You&#39;ve already taken care of converting that to Perl. While I can work with the JSON data structure, it&#39;s important for you to understand the difference if you want to learn how to do all of this on your own."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537546469, "post_id": 52445345, "comment_id": 91838032, "body": "@bluepanther: It seems that you are struggling a bit. You&#39;ve posted a few questions recently and in each case, you don&#39;t really seem to have understood the answers you&#39;ve received to previous questions. I recommend spending a few hours going through this carefully and ensuring that you understand what is going on here. For example, do you know the difference between JSON and a Perl data structure that has been &quot;decoded&quot; from JSON? Understanding the fundamentals is important."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1537538743, "creation_date": 1537538743, "answer_id": 52445471, "question_id": 52445345, "link": "https://stackoverflow.com/questions/52445345/loop-through-json-structure-in-perl/52445471#52445471", "title": "Loop through JSON Structure in Perl", "body": "<p>From <a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">the documentation of <code>length</code></a>:</p>\n\n<blockquote>\n  <p>Returns the length in characters of the value of EXPR. If EXPR is\n  omitted, returns the length of $_ . If EXPR is undefined, returns\n  undef.</p>\n  \n  <p>This function cannot be used on an entire array or hash to find out\n  how many elements these have. For that, use scalar @array and scalar\n  keys %hash , respectively.</p>\n</blockquote>\n\n<p>To get the number of elements in an array reference, you need to dereference it and put it into <em>scalar</em> context.</p>\n\n<pre><code>my $foo = [ qw/a b c/ ];\nmy $number_of_elements = scalar @{ $foo }; # 3\n</code></pre>\n\n<hr>\n\n<p>What you actually want to do is loop over every team in the teams array. No need to get the number of elements.</p>\n\n<pre><code>my @teams;\nforeach my $team ( @{ $opsteams-&gt;{teams} } ) {\n    push @teams, {\n        type =&gt; $team-&gt;{type},\n        team =&gt; $team-&gt;{team},\n    };\n}\n</code></pre>\n\n<p>There are some extra layers of depth in your code. I'm not sure what they are for. It actually looks like you just want the teams in <code>@teams</code>, which really would be</p>\n\n<pre><code>my @teams = @{ $opsteams-&gt;{teams} };\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538673312, "creation_date": 1537538252, "last_edit_date": 1538673312, "question_id": 52445345, "link": "https://stackoverflow.com/questions/52445345/loop-through-json-structure-in-perl", "title": "Loop through JSON Structure in Perl", "body": "<p>How to fill list with JSON data?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>my $groups = get_groups($t);\nmy @group;\nmy $i = 0;\ndo {\n    push(@group, {\n        groups  =&gt; [\n            { type =&gt; $groups-&gt;{groups}-&gt;[$i]-&gt;{type} , group =&gt; $groups-&gt;{groups}-&gt;[$i]-&gt;{group} },\n        ]\n    });\n    $i++;\n} while ($i &lt; length $groups-&gt;{groups});\n</code></pre>\n\n<p>Here is the json sample:</p>\n\n<pre><code>{\n    \"error\":false,\n    \"message\":\"success\",\n    \"group\":[\n        {\"type\":1,\"group\":\"group1\"},\n        {\"type\":2,\"group\":\"group2\"},\n        {\"type\":3,\"group\":\"group3\"},\n        {\"type\":4,\"group\":\"group4\"},\n        {\"type\":5,\"group\":\"group5\"}\n    ]\n}\n</code></pre>\n\n<p>Function <code>get_groups($t);</code> will return above json. I want to get the array <code>group</code> and put it into list <code>groups</code>. But I got:</p>\n\n<blockquote>\n  <p>Can't use string (\"0\") as a HASH ref while \"strict refs\" in use</p>\n</blockquote>\n"}, {"tags": ["string", "perl", "casting", "constants"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537536625, "post_id": 52442924, "comment_id": 91832416, "body": "It&#39;s often easier to read to do the long version, as long as you use a proper descriptive variable name. <code>my $method = $config-&gt;{x}; print Foo-&gt;$method()</code> is totally acceptable. Shorter code is rarely better code. Remember that the most expensive part of your code is neither writing nor running it, but actually the time of other developers spent reading and understanding what the heck is going on."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537536731, "post_id": 52442924, "comment_id": 91832474, "body": "Those are not <i>constants</i>. <code>$x</code> is still a variable. The syntax parser just does not allow any expression after the <code>-&gt;</code>. It has to be atomic. If you want an actual <i>constant</i>, you&#39;d have to create a new named sub with a prototype at runtime, possibly using inlining with string <code>eval</code>."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1537530661, "creation_date": 1537530661, "answer_id": 52443166, "question_id": 52442924, "link": "https://stackoverflow.com/questions/52442924/how-to-convert-a-hash-ref-in-one-line-to-a-constant-in-perl/52443166#52443166", "title": "How to convert a hash ref in one line to a constant in perl", "body": "<p>You can create a reference to the value and immediately dereference it:</p>\n\n<pre><code>Sphinx::Search-&gt;${ \\$config-&gt;{x} };\n</code></pre>\n\n<p>(If there are no arguments, the <code>()</code> is optional).</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1537537105, "creation_date": 1537537105, "answer_id": 52444988, "question_id": 52442924, "link": "https://stackoverflow.com/questions/52442924/how-to-convert-a-hash-ref-in-one-line-to-a-constant-in-perl/52444988#52444988", "title": "How to convert a hash ref in one line to a constant in perl", "body": "<p>I'm guessing that <code>SPH_MATCH_EXTENDED2</code> is the name of a constant that is exported by <code>Sphinx::Search</code>. The problem is that these are implemented as a subroutine with no parameters, so you may use them only where a bare subroutine name will be understood by Perl as a call, or where an explicit call is valid ( <code>SPH_MATCH_EXTENDED2()</code> )</p>\n\n<p>The easiest solution is to avoid quoting the hash value at all, like so</p>\n\n<pre><code>my $config = { x =&gt; SPH_MATCH_EXTENDED2 }\n</code></pre>\n\n<p>and afterwards, you may use just</p>\n\n<pre><code>$config-&gt;{x};    # 6\n</code></pre>\n\n<p>instead of calling a pseudo class method</p>\n"}], "owner": {"reputation": 23, "user_id": 3005815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b09034cf75d4f5eaa73b3fbf97419a?s=128&d=identicon&r=PG", "display_name": "crazywulf", "link": "https://stackoverflow.com/users/3005815/crazywulf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 52443166, "answer_count": 2, "score": 2, "last_activity_date": 1537561727, "creation_date": 1537529888, "last_edit_date": 1537537003, "question_id": 52442924, "link": "https://stackoverflow.com/questions/52442924/how-to-convert-a-hash-ref-in-one-line-to-a-constant-in-perl", "title": "How to convert a hash ref in one line to a constant in perl", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/Sphinx::Search\" rel=\"nofollow noreferrer\"><code>Sphinx::Search</code></a>.</p>\n\n<p>Is there is a easier way for this code example to convert a string to a constant?</p>\n\n<pre><code>use Sphinx::Search;\n\nmy $config = {\n    x =&gt; 'SPH_MATCH_EXTENDED2',\n};\n\nmy $x = $config-&gt;{x};\nprint Sphinx::Search-&gt;$x(); # output: 6\n</code></pre>\n\n<p>I have used advice from\n<a href=\"https://stackoverflow.com/questions/2187682\"><em>How do I access a constant in Perl whose name is contained in a variable?</em></a>\nand this example works, but if I am always using a string from a hash then do I need to put it into a separate variable to use it in this way?</p>\n\n<pre><code>my $x = $config-&gt;{x};\nprint Sphinx::Search-&gt;$x(); # output: 6\n</code></pre>\n\n<p>Is there a one- liner for this?</p>\n\n<pre><code># does not work\nprint Sphinx::Search-&gt;$config-&gt;{x}();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537525392, "post_id": 52441526, "comment_id": 91825918, "body": "There&#39;s no pipe there, these are <i>filehandles</i>. I think you want to look at <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">metacpan.org/pod/Capture::Tiny</a>. I believe that&#39;s what you are trying to recreate."}, {"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537526095, "post_id": 52441526, "comment_id": 91826334, "body": "@simbabque That module does seem similar to what i want, although with more limited functionality as it only captures STDOUT and STDERR? whereas my sub would be able to capture any handle. Also as it is not part of core i cannot use it for my application."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537526808, "post_id": 52441526, "comment_id": 91826698, "body": "@Noino Why not? <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">App::FatPacker</a> exists."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537535575, "post_id": 52441526, "comment_id": 91831796, "body": "If you combine a solution from different answers, we prefer if you post your own answer and accept it. You can give credit where credit is due, and if you feel you don&#39;t deserve reputation from its upvotes, make it a community wiki post. But please don&#39;t include answers in questions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537541769, "post_id": 52441526, "comment_id": 91835486, "body": "melpomene&#39;s loop correctly handled empty list of captures, but your change introduced a virtually infinite loop."}, {"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537546618, "post_id": 52441526, "comment_id": 91838115, "body": "@ikegami By empty list of captures you mean empty list of filehandles? Will throw error <code>Can&#39;t use an undefined value as a symbol reference</code>. But you are correct, i should check arguments"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537546662, "post_id": 52441526, "comment_id": 91838134, "body": "No need to check the arguments; just revert your changes to get back a top-tested loop."}, {"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1537546759, "post_id": 52441526, "comment_id": 91838189, "body": "I&#39;m not bothered by a thrown error tbh, the infinite loop in my case happens if you call the function without providing a code block."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1537608182, "post_id": 52441526, "comment_id": 91852999, "body": "<a href=\"https://eval.in/1059162\" rel=\"nofollow noreferrer\">eval.in/1059162</a> shifting burden to caller."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537526336, "post_id": 52441862, "comment_id": 91826467, "body": "I haven&#39;t figured out yet why the <code>local</code> solution doesn&#39;t work."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1537526093, "creation_date": 1537526093, "answer_id": 52441862, "question_id": 52441526, "link": "https://stackoverflow.com/questions/52441526/how-to-redirect-output-from-pipe-provided-as-argument-to-a-variable/52441862#52441862", "title": "How to redirect output from pipe provided as argument to a variable", "body": "<p>You need to actually switch out the file handles. To do that, first save the existing handles. Then create new ones that point into your output data structure. Once you've run the code, restore the original handles.</p>\n\n<pre><code>sub capture {\n    my $c = pop;\n\n    # we will keep the original handles in here to restore them later\n    my @old_handles;\n\n    my $o = [];\n    foreach my $i (0 .. $#_) {\n\n        # store the original handle\n        push @old_handles, $_[$i];\n\n        # create a new handle\n        open my $fh, '&gt;', \\$o-&gt;[$i] or die $!;\n\n        # stuff it into the handle slot of the typeglob associated with the old handle\n        *{$_[$i]} = $fh;\n    }\n\n    # run callback\n    $c-&gt;();\n\n    # restore the old handles\n    *{$_[$_]} = $old_handles[$_] for 0 .. $#_;\n\n    return $o;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1537526736, "post_id": 52441954, "comment_id": 91826669, "body": "That makes sense. Thanks"}, {"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "edited": false, "score": 0, "creation_date": 1537527295, "post_id": 52441954, "comment_id": 91826999, "body": "I knew i cant do a <code>for( ... ){ ... }</code>, but then somehow forgot about the scoping issue when i assumed postfixing wouldn&#39;t create its own. The goto looks horrible tho"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537527374, "post_id": 52441954, "comment_id": 91827038, "body": "You should definitely go and wash your hands after building this. And maybe your eyes. :D"}, {"owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537532885, "post_id": 52441954, "comment_id": 91830215, "body": "@simbabque The final product i edited into my original post doesn&#39;t hurt my eyes at all tbh, but I&#39;ll wash the dirty goto off my hands just to be safe"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1537526476, "creation_date": 1537526476, "answer_id": 52441954, "question_id": 52441526, "link": "https://stackoverflow.com/questions/52441526/how-to-redirect-output-from-pipe-provided-as-argument-to-a-variable/52441954#52441954", "title": "How to redirect output from pipe provided as argument to a variable", "body": "<p>The problem with your code is that the effects of <code>local</code> are undone at the end of your</p>\n\n<pre><code>... for (0 .. $#_);\n</code></pre>\n\n<p>loop. By the time you call <code>$c-&gt;()</code>, the filehandles have their original values again.</p>\n\n<p>So ...</p>\n\n<ul>\n<li>You want to localize an arbitrary number of variables.</li>\n<li>You can't use blocks (e.g. <code>for (...) { ... }</code>) because <code>local</code> is undone at the end of the scope it's in.</li>\n<li>You can't use postfix <code>for</code> because apparently it implicitly creates its own mini-scope.</li>\n</ul>\n\n<p>The solution? <code>goto</code>, of course!</p>\n\n<p>(Or you could use recursion: Use a block, but never leave it or loop back. Just localize a single variable, then call yourself with the remaining variables. But <code>goto</code> is funnier.)</p>\n\n<pre><code>sub capture {\n    my $c = pop;\n    my $o = [];\n\n    my $i = 0;\n    LOOP: goto LOOP_END if $i &gt;= @_;\n    local *{$_[$i++]};\n    goto LOOP;\n    LOOP_END:\n\n    open(*{$_[$_]}, '&gt;', \\$o-&gt;[$_]) or die \"$_[$_]: $!\" for 0 .. $#_;\n    $c-&gt;();\n    return $o;\n}\n</code></pre>\n\n<p>Effectively we've created a loop without entering/leaving any scopes.</p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "is_accepted": false, "score": 1, "last_activity_date": 1537547113, "last_edit_date": 1592644375, "creation_date": 1537547113, "answer_id": 52447760, "question_id": 52441526, "link": "https://stackoverflow.com/questions/52441526/how-to-redirect-output-from-pipe-provided-as-argument-to-a-variable/52447760#52447760", "title": "How to redirect output from pipe provided as argument to a variable", "body": "<h2>SOLUTION:</h2>\n<p>The final product, not nearly as convoluted as the original goto loop:</p>\n<pre><code>=pod\n\n=item C&lt;capture&gt;\n\ncapture takes a list of pipes/filehandles, a code block or sub, optionally arguments to send to\nsaid block and returns any captured output as a string, or an array of strings.\n\n    my ($out, $err) = capture *STDOUT, *STDERR, sub { say 'faijas'; warn @_; }, 'jee';\n    my $output = capture *STDOUT, sub { say 'jee'; };\n\n=cut\n\nsub capture(@&amp;;@) {\n    my (@o, @h);\n    # walk through @_, grab all filehandles and the code block into @h\n    push @h, shift while @_ &amp;&amp; ref $h[$#h] ne 'CODE';\n    my $c = pop @h; # then separate the code block from @h, leaving only handles\n\n    # Really we want to do: open(local *{$_[$_]}, '&gt;', \\$o-&gt;[$_]) for (0 .. $#_);\n    # but because of scoping issues with the local keyword, we have to loop without\n    # creating an inner scope\n    my $i = 0;\n    R: open(local *{$h[$i]}, '&gt;', \\$o[$i]) or die &quot;$h[$i]: $!&quot; ;\n    goto R if ++$i &lt;= $#h;\n\n    $c-&gt;(@_);\n    return wantarray ? @o : $o[0];\n}\n</code></pre>\n<p>Big thanks to @melpomene and @simbabque for helping me around the initial problem, and @ikegami for pointing out oversights.</p>\n"}], "owner": {"reputation": 551, "user_id": 3123035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e10b92a08c7e427f81d7337e15dbb24?s=128&d=identicon&r=PG&f=1", "display_name": "Noino", "link": "https://stackoverflow.com/users/3123035/noino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52441954, "answer_count": 3, "score": 1, "last_activity_date": 1537547113, "creation_date": 1537525005, "last_edit_date": 1537546831, "question_id": 52441526, "link": "https://stackoverflow.com/questions/52441526/how-to-redirect-output-from-pipe-provided-as-argument-to-a-variable", "title": "How to redirect output from pipe provided as argument to a variable", "body": "<p>So i've made functions to capture pipes</p>\n\n<pre><code>sub capture_stdout (&amp;) {    \n    my $s;\n    open(local *STDOUT, '&gt;', \\$s);\n    shift-&gt;();\n    return $s;\n}\n\nsub capture_stderr (&amp;) {\n    my $s;\n    open(local *STDERR, '&gt;', \\$s);\n    shift-&gt;();\n    return $s;\n}\n</code></pre>\n\n<p>These work great. Now the challenge i am facing is, i want to make a function that takes the pipe(s) as arguments, and redirects all of them in a single sub.\nI have yet been unsuccessful in making it work. So far I've cooked up something that compiles;</p>\n\n<pre><code>sub capture(@&amp;) {\n    my $c = pop;\n    my $o = [];\n    say {$_[$_]} $_[$_] for (0 .. $#_);\n    open(local *{$_[$_]}, '&gt;', \\$o-&gt;[$_]) for (0 .. $#_);\n    $c-&gt;();\n    return $o;\n}\n\nuse Data::Dumper;\nsay Dumper( capture *STDOUT, *STDERR, sub{ say 1; warn 2; } );\n</code></pre>\n\n<p>but it does not capture anything. I cant seem to figure out how to fix it. I'm convinced however that it is the <code>local *{$_[$_]}</code> that needs fixing, though i could be wrong.\nThe complete output is:</p>\n\n<pre><code>*main::STDOUT\n*main::STDERR\n1\n2 at capture.pl line 15.\n$VAR1 = [\n      undef,\n      undef\n    ];\n</code></pre>\n\n<p>So then the question: Is it even possible to do what I'm attempting, and if so, how?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537525155, "post_id": 52441431, "comment_id": 91825784, "body": "You will have to show us what&#39;s in the content. Is it just plain text, undecoded JSON? What happens if you <code>print</code> that variable?"}, {"owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537526028, "post_id": 52441431, "comment_id": 91826299, "body": "I&#39;ve updated the code to print the result"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537527162, "post_id": 52441431, "comment_id": 91826905, "body": "I&#39;ve updated my answer to show how to build your own subclass of HTTP::Tiny."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537531031, "post_id": 52442016, "comment_id": 91829197, "body": "This is a nice answer, but I worry that your example of subclassing may be copied verbatim without any understanding. It&#39;s a valid technique, but perhaps it would be better to write the module as a separate <code>.pm</code> file instead of just recommending it, as I have found multiple <code>package</code> declarations in a source file are a common source of confusion. <i>&quot;Why is there no <code>use HTTP::Tiny::DecodeJSON</code>&quot;</i> is the most common one, and people&#39;s attempts to do the same thing often fail because of a lack of understanding of the scope of pragmas."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1537535966, "post_id": 52442016, "comment_id": 91832025, "body": "@Borodin how about this?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537537402, "post_id": 52442016, "comment_id": 91832836, "body": "That&#39;s excellent. I could complain about <code>Data::Printer</code> not producing executable Perl, and being useless within IDEs or when <code>STDOUT</code> is directed to a file, but that&#39;s irrelevant! I never really know whether people need to be told how to &quot;create a file called <code>HTTP&#47;Tiny&#47;DecodeJSON.pm</code> within the <code>@INC</code> directories&quot; but your explanation is very clear. Please don&#39;t think that you must go along with any criticisms that I come up with: I&#39;m no oracle, and they&#39;re meant to be another point of view."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537538013, "post_id": 52442016, "comment_id": 91833220, "body": "@Borodin I only go along when I agree with criticism or suggestions for improvements. I don&#39;t agree with your dislike of Data::Printer, so I will happily keep using that. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537542139, "post_id": 52442016, "comment_id": 91835721, "body": "That&#39;s fine. I&#39;m old-fashioned anyway, and coloured text in a command window looks more bizarre than it should. I may consider something like <code>use if -t STDIN, &#39;Data::Printer&#39;</code> (but <code>p</code> would need to be aliased appropriately) otherwise you&#39;re going to see VT52 escape sequences where they don&#39;t make sense. Do you really run everything from the command line, rather from an IDE or editor that allows you to run the code you&#39;re working with?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537544986, "post_id": 52442016, "comment_id": 91837246, "body": "@Borodin I work with Komodo IDE on Ubuntu. It just works with DDP, there&#39;s no problem with the colors. It&#39;s smart enough to know if it&#39;s in terminal I believe, or my IDE eats the escape sequences. This is what it looks like: <a href=\"https://i.stack.imgur.com/f90Q7.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/f90Q7.png</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537562661, "post_id": 52442016, "comment_id": 91844938, "body": "I would also mention that Mojo::UserAgent as a non-core alternative to HTTP::Tiny, has built in JSON decoding functionality, which actually uses Cpanel::JSON::XS in recent versions if you have it installed."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1537535956, "last_edit_date": 1537535956, "creation_date": 1537526699, "answer_id": 52442016, "question_id": 52441431, "link": "https://stackoverflow.com/questions/52441431/read-perl-json-structure/52442016#52442016", "title": "Read Perl JSON structure", "body": "<p>Your variable contains a <em>string</em> that represents a data structure in the <a href=\"http://www.json.org/\" rel=\"nofollow noreferrer\">JSON format</a>. You need to convert it to a Perl data structure in order to use traverse it in Perl. At this point, it's just a bunch of text, and HTTP::Tiny does not care what kind of data it returns.</p>\n\n<p>Core Perl brings the <a href=\"https://metacpan.org/pod/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a> module <a href=\"http://perldoc.perl.org/perl5140delta.html#New-Modules-and-Pragmata\" rel=\"nofollow noreferrer\">starting from version 5.13.9 (with the 5.14 release)</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::PP 'decode_json';\nuse Data::Printer;\n\nmy $json = qq({ \"foo\" : \"bar\" });\n\nmy $decoded = decode_json($json);\np $decoded;\nprint $decoded-&gt;{foo};\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>\\ {\n    foo   \"bar\"\n}\nbar\n</code></pre>\n\n<p>If you've got a newer Perl and have some other stuff installed, you probably also have <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON::MaybeXS</a>, which will pick the fastest JSON parser available automatically.</p>\n\n<hr>\n\n<p>Now if you wanted your user agent to know how to do this in multiple places, you can easily create a sub class. I've done a rudimentary implementation here. Save it in a new file <code>HTTP/Tiny/DecodeJSON.pm</code> in the right folder. I would place it under <code>lib</code> in your script's directory.</p>\n\n<pre><code>.\n\u251c\u2500\u2500 lib\n\u2502   \u2514\u2500\u2500 HTTP\n\u2502       \u2514\u2500\u2500 Tiny\n\u2502           \u2514\u2500\u2500 DecodeJSON.pm\n\u2514\u2500\u2500 script.pl\n</code></pre>\n\n<p>I would also suggest adding extensive error handling. </p>\n\n<pre><code>package HTTP::Tiny::DecodeJSON;\nuse strict;\nuse warnings;\nuse JSON::PP 'decode_json';\nuse parent 'HTTP::Tiny';\n\n# we need this to not throw a warning in HTTP::Tiny::_agent()    \nuse constant VERSION =&gt; '0.01';\n\nsub get_json {\n    my $self = shift;\n    my $res = $self-&gt;get(@_);\n\n    # add error handling here ...\n\n    return decode_json $res-&gt;{content};\n}\n\n1;\n</code></pre>\n\n<p>You can then reuse it wherever you like. To use it in your script, you need to add the <code>lib</code> directory to the list of directories that Perl looks for it's modules.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Printer;\n\nuse lib 'lib';    \nuse HTTP::Tiny::DecodeJSON;\n\nmy $decoded = HTTP::Tiny::DecodeJSON-&gt;new-&gt;get_json(\n    'https://jsonplaceholder.typicode.com/todos/1'\n);\np $decoded;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537562564, "post_id": 52443099, "comment_id": 91844901, "body": "Cpanel::JSON::XS is the fastest and least buggy JSON module on CPAN, it&#39;s true, it&#39;s the default module used by JSON::MaybeXS that was mentioned."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537612268, "post_id": 52443099, "comment_id": 91853931, "body": "@Grinnz: Sure, but <code>JSON::MaybeXS</code> will take its pick from only those modules that are installed. Because it doesn&#39;t begin with <code>JSON</code>, <code>Cpanel::JSON::XS</code> is often overlooked and is less likely to be available."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537649077, "post_id": 52443099, "comment_id": 91863442, "body": "It gets pulled in as a dependency unless a pure-perl installation is requested."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1537530421, "creation_date": 1537530421, "answer_id": 52443099, "question_id": 52441431, "link": "https://stackoverflow.com/questions/52441431/read-perl-json-structure/52443099#52443099", "title": "Read Perl JSON structure", "body": "<p><a href=\"https://stackoverflow.com/a/52442016/622310\"><strong>simbabque</strong> has explained a lot</a>,\nand it is useful to have an example of subclassing <a href=\"https://perldoc.pl/HTTP::Tiny\" rel=\"nofollow noreferrer\"><code>HTTP::Tiny</code></a>. I would add the following</p>\n\n<ul>\n<li><p>I believe that <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\"><code>Cpanel::JSON::XS</code></a>, despite its convoluted name, is the superior JSON module on CPAN</p></li>\n<li><p>There is no <code>$content-&gt;[0]-&gt;{name}</code> element in the data returned from that URL, although I imagine that is because you are working on it. <strong><em>Thank you</em></strong> for posting a usable data source: it makes questions so much more pleasant to answer</p></li>\n<li><p>It's pretty much essential to check whether the HTTP request has succeeded, and die with an explanatory message if there was a problem. It's just an extra statement</p>\n\n<pre><code>die $response-&gt;{reason} unless $response-&gt;{success};\n</code></pre></li>\n</ul>\n\n<p>Here's how I would write your code. Instead of selecting the field as you do I have used <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>\nto display the contents of the structure</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse HTTP::Tiny;\nuse Cpanel::JSON::XS 'decode_json';\n\nmy $response = HTTP::Tiny-&gt;new-&gt;get('https://jsonplaceholder.typicode.com/todos/1'); \n\ndie $response-&gt;{reason} unless $response-&gt;{success};\n\nmy $data = decode_json $response-&gt;{content};\n\nuse Data::Dump;\ndd $data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n  completed =&gt; bless(do{\\(my $o = 0)}, \"JSON::PP::Boolean\"),\n  id =&gt; 1,\n  title =&gt; \"delectus aut autem\",\n  userId =&gt; 1,\n}\n</code></pre>\n\n<p>As you can see, <code>$content-&gt;[0]-&gt;{name}</code> would never work because the data is a <em>hash</em> rather than an array, and there is no hash key <code>name</code> anywhere. But the Latin is a strong indicator that the server has been updated since your question so this is not a problem</p>\n\n<p>The value <code>$data-&gt;{completed}</code> is boolean, and should probably be tested with</p>\n\n<pre><code>if ( $data-&gt;{completed} ) { ... }\n</code></pre>\n\n<p>to decide what to do with the response</p>\n"}], "owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 52442016, "answer_count": 2, "score": -1, "last_activity_date": 1537535956, "creation_date": 1537524668, "last_edit_date": 1537526008, "question_id": 52441431, "link": "https://stackoverflow.com/questions/52441431/read-perl-json-structure", "title": "Read Perl JSON structure", "body": "<p>I get the JSON from request:</p>\n\n<pre><code>use HTTP::Tiny;\nmy $response = HTTP::Tiny-&gt;new-&gt;get('https://jsonplaceholder.typicode.com/todos/1'); \nprint \"-------------------**------------------- \\n\";\nmy $content = $response-&gt;{content};\nprint $content-&gt;[0]-&gt;{name};\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>    [  \n   {    \n      \"id\": 1,\n      \"name\": \"Leanne Graham\",    \"username\": \"Bret\",    \"email\": \"Sincere@april.biz\",\n      \"address\": {\n      \"street\": \"Kulas Light\",      \"suite\": \"Apt. 556\",\n      \"city\": \"Gwenborough\",      \"zipcode\": \"92998-3874\",      \"geo\": {        \"lat\": \"-37.3159\",\n      \"lng\": \"81.1496\"      }    },    \"phone\": \"1-770-736-8031 x56442\",    \"website\": \"hildegard.org\",\n      \"company\": {\n          \"name\": \"Romaguera-Crona\",\n          \"catchPhrase\": \"Multi-layered client-server neural-net\",\n          \"bs\": \"harness real-time e-markets\"\n      }\n  },\n  {\n      \"id\": 2,\n      \"name\": \"Ervin Howell\",\n      \"username\": \"Antonette\",\n      \"email\": \"Shanna@melissa.tv\",\n      \"address\": {\n      \"street\": \"Victor Plains\",\n      \"suite\": \"Suite 879\",\n      \"city\": \"Wisokyburgh\",\n      \"zipcode\": \"90566-7771\",\n      \"geo\": {\n          \"lat\": \"-43.9509\",\n          \"lng\": \"-34.4618\"\n      }\n  }\n]\n</code></pre>\n\n<p>How to read every content of the json return variable. I've tried this:\n<code>print $content-&gt;[0]-&gt;{name};</code>\n, but return nothing.</p>\n\n<p>How to read through the JSON structure of perl?</p>\n"}, {"tags": ["json", "perl", "http"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537519072, "post_id": 52439693, "comment_id": 91822267, "body": "You mean <code>my $cont = $response-&gt;{content};</code> ?"}, {"owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537519511, "post_id": 52439693, "comment_id": 91822497, "body": "and how to pass it into list/array?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537521276, "post_id": 52439693, "comment_id": 91823553, "body": "I think you want to read <a href=\"https://perlmaven.com/json\" rel=\"nofollow noreferrer\">perlmaven.com/json</a>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537521179, "post_id": 52440089, "comment_id": 91823500, "body": "Aren&#39;t you missing the JSON module? I <i>think</i> that&#39;s all they actually need."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537521641, "post_id": 52440089, "comment_id": 91823763, "body": "Possibly. It really wasn&#39;t clear what they were trying to do. I&#39;ll add some information. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537527628, "post_id": 52440089, "comment_id": 91827193, "body": "There was a follow-up, so this seems to have been useful to them. :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1537563255, "post_id": 52440089, "comment_id": 91845172, "body": "I would not recommend the JSON module; it slows down both modules it wraps, and doesn&#39;t use the best options. If you are restricted to core modules, you&#39;re stuck with JSON::PP; otherwise, I would recommend Cpanel::JSON::XS, or JSON::MaybeXS and Mojo::JSON which both use it by default if installed."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1537521973, "last_edit_date": 1537521973, "creation_date": 1537520118, "answer_id": 52440089, "question_id": 52439693, "link": "https://stackoverflow.com/questions/52439693/perl-http-tiny-response/52440089#52440089", "title": "Perl HTTP Tiny response", "body": "<p>You would pass your content to the TT processor like this:</p>\n\n<pre><code>use Template;\n\nmy $tt = Template-&gt;new;\n\n$tt-&gt;process('some_template.tt', { content =&gt; $response-&gt;{content} })\n  or die $tt-&gt;error;\n</code></pre>\n\n<p>Perhaps you want to store it in an intermediate scalar first:</p>\n\n<pre><code>my $content = $response-&gt;{content};\n\n$tt-&gt;process('some_template.tt', { content =&gt; $content })\n  or die $tt-&gt;error;\n</code></pre>\n\n<p>Perhaps you want to build up TT's variable hash before passing it to the processor.</p>\n\n<pre><code>my %vars;\n\n$vars{content} = $response-&gt;{content};\n\n$tt-&gt;process('some_template.tt', \\%vars)\n  or die $tt-&gt;error;\n</code></pre>\n\n<p>Or you could use a hash reference instead of an actual hash:</p>\n\n<pre><code>my $vars;\n\n$vars-&gt;{content} = $response-&gt;{content};\n\n$tt-&gt;process('some_template.tt', $vars)\n  or die $tt-&gt;error;\n</code></pre>\n\n<p><strong>Update:</strong> In a comment, <a href=\"https://stackoverflow.com/users/1331451/simbabque\">simbabque</a> suggests that you might actually be asking how to decode JSON content into an array or a hash. And I agree that's another way to interpret your question.</p>\n\n<p>You'd need to use the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> module. And it would look something like this:</p>\n\n<pre><code>use JSON;\n\nmy $json_parser = JSON-&gt;new; # Perhaps other options here, see docs.\n\nmy $decoded_json = $json_parser-&gt;decode($response-&gt;{content});\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 7893198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91639ade70c5fc21ded9450808e3c97c?s=128&d=identicon&r=PG&f=1", "display_name": "blue panther", "link": "https://stackoverflow.com/users/7893198/blue-panther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "accepted_answer_id": 52440089, "answer_count": 1, "score": 0, "last_activity_date": 1537521973, "creation_date": 1537518678, "question_id": 52439693, "link": "https://stackoverflow.com/questions/52439693/perl-http-tiny-response", "title": "Perl HTTP Tiny response", "body": "<p>How to put the JSON response of <code>HTTP::Tiny</code> in Perl? </p>\n\n<pre><code>use HTTP::Tiny;\n\nmy $response = HTTP::Tiny-&gt;new-&gt;get('http://example.com/');\n\ndie \"Failed!\\n\" unless $response-&gt;{success};\n\nprint \"$response-&gt;{status} $response-&gt;{reason}\\n\";\n\nwhile (my ($k, $v) = each %{$response-&gt;{headers}}) {\n   for (ref $v eq 'ARRAY' ? @$v : $v) {\n        print \"$k: $_\\n\";\n   }\n}\n\nprint $response-&gt;{content} if length $response-&gt;{content};\n</code></pre>\n\n<p>How to put the <code>$response-&gt;{content}</code> into variable to be passed into html(tt2)?</p>\n"}, {"tags": ["perl", "google-chrome"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537499538, "post_id": 52436012, "comment_id": 91815341, "body": "I have tried that but I&#39;m getting an error: &#39;Can&#39;t call method &quot;close_tab&quot; on unblessed reference&#39;.  $chrome-&gt;tab returns a hash with info on the current tab. It doesn&#39;t seem to be a Chrome::DevToolsProtocol object that you can use to call &quot;close_tab&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537499855, "post_id": 52436012, "comment_id": 91815394, "body": "@user735247 Alright, can you please then try to call <code>close_tab</code> directly on <code>$chrome</code>? This has installed 54 (fifty-four) distributions and then failed at &quot;Building and testing ...&quot;. I&#39;m trying again but can&#39;t yet play with it (forgot things since I last time tried this)."}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537499944, "post_id": 52436012, "comment_id": 91815412, "body": "$chrome doesn&#39;t have a close_tab function: Can&#39;t locate object method &quot;close_tab&quot; via package &quot;WWW::Mechanize::Chrome&quot;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537501558, "post_id": 52436012, "comment_id": 91815720, "body": "@user735247 Updated my post to where I am with it now. If the install works out somehow I&#39;ll look more and update."}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537503044, "post_id": 52436012, "comment_id": 91816058, "body": "I updated my question to include the approach you suggested"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537507943, "post_id": 52436012, "comment_id": 91817315, "body": "@user735247 Got to install it and confirmed your update, and updated my answer. I will look more into it as I&#39;m having trouble believing that one needs a protocol to close a tab"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1537775052, "last_edit_date": 1537775052, "creation_date": 1537499041, "answer_id": 52436012, "question_id": 52435775, "link": "https://stackoverflow.com/questions/52435775/wwwmechanizechrome-how-to-close-a-tab/52436012#52436012", "title": "WWW::Mechanize::Chrome How to close a tab", "body": "<p>There is a <code>close_tab</code> method in <a href=\"https://metacpan.org/pod/Chrome::DevToolsProtocol\" rel=\"nofollow noreferrer\">Chrome::DevToolsProtocol</a>, which is an</p>\n\n<blockquote>\n  <p>asynchronous dispatcher for the DevTools protocol</p>\n</blockquote>\n\n<p>and does not offer a method to instantiate an object.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/WWW::Mechanize::Chrome\" rel=\"nofollow noreferrer\">WWW::Mechanize::Chrome</a> has the method <a href=\"https://metacpan.org/pod/WWW::Mechanize::Chrome#$mech-%3Edriver\" rel=\"nofollow noreferrer\">driver</a> documented as</p>\n\n<blockquote>\n  <p>Access the Chrome::DevToolsProtocol instance connecting to Chrome.</p>\n</blockquote>\n\n<p>In a lucky case that this is simple perhaps <code>$chrome-&gt;driver-&gt;close_tab</code> may do it.</p>\n\n<p>There is also an option <code>driver</code> for its constructor, described as</p>\n\n<blockquote>\n  <p>A premade Chrome::DevToolsProtocol object.</p>\n</blockquote>\n\n<p>with no further details. <em>Update: using this requires more work</em>.</p>\n\n<p>I cannot yet pursue these clues since the install stubbornly fails at the end, after 54 (fifty-four) distributions are installed.</p>\n\n<p>Hopefully this helps someone to figure it out though.</p>\n\n<hr>\n\n<p><strong>Update</strong> &nbsp; After forcing the install I can confirm the question update</p>\n\n<pre><code>use warnings;\nuse strict;\n...\n\nmy $chrome = WWW::Mechanize::Chrome-&gt;new(tab =&gt; undef);  # new tab for demo\n\n$chrome-&gt;get('https://www.google.com/');\n\nsleep 5;  \n$chrome-&gt;driver-&gt;close_tab($chrome-&gt;tab); \nsleep 5;\n</code></pre>\n\n<p>This does issue a warning</p>\n\n<pre>\nCalling ->catch in void context at .../Chrome/DevToolsProtocol.pm line 567.\n</pre>\n\n<p>which, judged by the code quoted in the message, seems to be exposing a bug.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537770858, "post_id": 52467756, "comment_id": 91889227, "body": "Thank you for pitching in and thank you for the modules. As for &quot;<i>Blindly calling random methods on random results of methods</i>&quot; (I take it to refer to my comments under my post) -- (1) I had to go at it &quot;blind&quot; since the docs are tight-lipped (2) It wasn&#39;t random, again as far as docs guided me. // As for tabs, are you saying that there is no good method to close a tab? I can&#39;t help it but note that the tests, which I watched a lot during failed installs (after 54 dependencies had been successfully installed), often open and close tabs."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537771480, "post_id": 52467756, "comment_id": 91889453, "body": "Again, thank you for offering your work to all.  But I have to take another issue with your post here, with &quot;<i>-&gt;close_tab returns a Future</i>&quot; -- no, it doesn&#39;t; documentation says nothing of it.  I can read the code but since the docs only say &quot;<i>Closes the tab</i>&quot; it makes one think that the method, um, closes a tab."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537773768, "post_id": 52467756, "comment_id": 91890366, "body": "The object is not really intended for external use. I&#39;ve added some more documentation to it, but it still doesn&#39;t make much sense to use the module outside of WWW::Mechanize::Chrome. The tests should run Chrome in <code>headless</code> mode, that is, they shouldn&#39;t pop up (and subsequently close) tabs, but if you already have a Chrome instance running with the debug protocol launched, it might run headfull."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537775341, "post_id": 52467756, "comment_id": 91891003, "body": "Thank you for the clarification; it did seem a stretch, even awkward to use it for that. There were no Chrome instances running (I use firefox). and the test starts Chrome. Then, it perhaps leaves it (I don&#39;t remember) in which case there would indeed be an instance for the next tests."}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1537816381, "post_id": 52467756, "comment_id": 91913171, "body": "The tab stays open, even after $mech goes out of scope, unless it&#39;s closed using the driver&#39;s close_tab function. Using &quot;undef $mech&quot; does not close the open tab either. At least on my end."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 0, "last_activity_date": 1537787078, "last_edit_date": 1537787078, "creation_date": 1537717787, "answer_id": 52467756, "question_id": 52435775, "link": "https://stackoverflow.com/questions/52435775/wwwmechanizechrome-how-to-close-a-tab/52467756#52467756", "title": "WWW::Mechanize::Chrome How to close a tab", "body": "<p>There is no <code>-&gt;close_tab</code> method because I didn't find a need for it yet.</p>\n\n<p>The \"driver\" object is a Chrome::DevToolsProtocol object, which is used to talk more directly to Chrome. Blindly  calling random methods on random results of methods is recommended here in the comments but is not a method that seems to be fruitful.</p>\n\n<p>If you're hell-bent on closing a tab instead of letting the <code>$mech</code> object go out of scope, you can call</p>\n\n<pre><code>$mech-&gt;driver-&gt;close_tab( $mech-&gt;tab )-&gt;get();\n</code></pre>\n\n<p>but this will break further stuff you might have done with <code>$mech</code>. <code>-&gt;close_tab</code> returns a Future, so you shouldn't discard it blindly.</p>\n\n<p>If you just want no tab to appear, have you considered the <code>headless</code> mode?</p>\n\n<p>This question was cross-posted at <a href=\"https://perlmonks.org/?node_id=1222776\" rel=\"nofollow noreferrer\">https://perlmonks.org/?node_id=1222776</a> .</p>\n"}], "owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 52436012, "answer_count": 2, "score": 3, "last_activity_date": 1537787078, "creation_date": 1537496692, "last_edit_date": 1537521405, "question_id": 52435775, "link": "https://stackoverflow.com/questions/52435775/wwwmechanizechrome-how-to-close-a-tab", "title": "WWW::Mechanize::Chrome How to close a tab", "body": "<p>I can't seem to figure out how to close a tab when using WWW::Mechanize::Chrome.</p>\n\n<pre><code>my $mech = WWW::Mechanize::Chrome-&gt;new();\n$mech-&gt;get('https://www.google.com/');\n</code></pre>\n\n<p>There is no <code>$mech-&gt;close_tab()</code> method. </p>\n\n<p>So the question is, how do you close the tab you're currently working with? </p>\n\n<p>As <a href=\"https://stackoverflow.com/a/52436012/1331451\">suggested by @zdim</a>:</p>\n\n<pre><code>my $driver = $mech-&gt;driver\n</code></pre>\n\n<p>Seems to return the Chrome::DevToolsProtocol instance. </p>\n\n<p>Then in order to close the tab, you have to call the close_tab() function and pass the current tab as the argument:</p>\n\n<pre><code>$mech-&gt;driver-&gt;close_tab($mech-&gt;tab);\n</code></pre>\n\n<p>This approach is generating the following error but it does close the tab:</p>\n\n<pre><code>Calling -&gt;catch in void context at C:/Perl64/site/lib/Chrome/DevToolsProtocol.pm line 567\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1537477945, "post_id": 52433013, "comment_id": 91810466, "body": "If you are doing more than simple substution (which you are), you really should be using <code>awk</code> or <code>Perl</code>. Consider adding those tags."}, {"owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1537478384, "post_id": 52433013, "comment_id": 91810636, "body": "@MarkSetchell Will do, thank you!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1537479115, "post_id": 52433013, "comment_id": 91810906, "body": "When your real input has multiple block,s you should provide sample input that has multiple blocks, typically 3. Each block doesn&#39;t have to be 12 lines long - make each, say, 5 lines and solve for that then expand the solution to work for 12. Include blocks that do and don&#39;t match and also provide the expected output."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537479386, "post_id": 52433013, "comment_id": 91810995, "body": "How are your blocks separated? Blank line? OR just that last line with only <code>!</code>?"}, {"owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1537479666, "post_id": 52433013, "comment_id": 91811091, "body": "@EdMorton Thanks, added it!"}, {"owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1537479703, "post_id": 52433013, "comment_id": 91811108, "body": "@zdim Just the !, just added an example above."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1537490653, "post_id": 52433013, "comment_id": 91813675, "body": "Thank you, updated my answer.  I&#39;d recommend to add a separator when writing that file, and an empty line is good for that."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "edited": false, "score": 0, "creation_date": 1537537573, "post_id": 52433741, "comment_id": 91832934, "body": "Tried the new code, this worked as well! Thank you for the explanation! I agree with introducing a blank line; unfortunately, I&#39;m feeding this data into an old program that is very specific for <code>!</code>, so I have to work within this limitation."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1537571704, "last_edit_date": 1537571704, "creation_date": 1537479797, "answer_id": 52433741, "question_id": 52433013, "link": "https://stackoverflow.com/questions/52433013/sed-every-x-lines-grep-between-y-lines/52433741#52433741", "title": "Sed Every X lines, GREP between Y Lines", "body": "<p>Assuming that the blocks are separated by an empty line</p>\n\n<pre><code>perl -00 -wne'print if (split /\\n/)[9] =~ /^PHE/' data.txt\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perlrun</a> for command line switches. Here <code>-00</code> splits input in paragraphs, and then each is available to the program under <code>''</code> in the <a href=\"https://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\">special variable <code>$_</code></a>. That is <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> on newline and the tenth line checked with a regex on whether it starts with <code>PHE</code>. If yes, we print the whole block.</p>\n\n<hr>\n\n<p>It is clarified that there are no dedicated block separators; blocks just come one after another, each starting with the <code>! MATCH</code> line and ending with the <code>!</code> line. </p>\n\n<p>Then the above can't easily keep the whole blocks after filtering since the <code>$/</code> of <code>!</code>, which can be set by <code>-0\\x21</code> switch, would introduce spurious input records. Instead, process line by line. </p>\n\n<p>Using the data sample added in the question update</p>\n\n<pre><code>perl -ne'\n    if (/^\\! MATCH/ or eof) { $b[5]=~/^PHE/ and print for @b; @b=() };\n    push @b, $_\n' data.txt\n</code></pre>\n\n<p>Each line is added to the buffer (or \"block\") <code>@b</code>.  Lines starting with <code>! MATCH</code> start a new block, so print the previous one if its 6th line starts with <code>PHE</code> (in real data <code>$b[9]</code>) and empty the buffer for the next block.</p>\n\n<p>The <code>eof</code> is needed so to do this at the end of input as well, for the last block/buffer.</p>\n\n<p>May I suggest to introduce a blank line between records when writing this file.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "edited": false, "score": 1, "creation_date": 1537480773, "post_id": 52433754, "comment_id": 91811466, "body": "This worked perfectly! Thank you so much!  I understand what the other lines are doing, but I&#39;m confused as to what this line does:  <code>{ rec = (recLine==1 ? &quot;&quot; : rec ORS) $0 }</code>  Could you kindly elaborate on this?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "edited": false, "score": 1, "creation_date": 1537481036, "post_id": 52433754, "comment_id": 91811550, "body": "it sets the <code>rec</code> variable to the value of the first line of the record, and appends the current line to <code>rec</code> otherwise, thus storing every 12 lines in <code>rec</code>. If the syntax is confusing - it&#39;s a <a href=\"https://en.wikipedia.org/wiki/%3F:\" rel=\"nofollow noreferrer\">ternary expression</a>."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1537480566, "last_edit_date": 1537480566, "creation_date": 1537479857, "answer_id": 52433754, "question_id": 52433013, "link": "https://stackoverflow.com/questions/52433013/sed-every-x-lines-grep-between-y-lines/52433754#52433754", "title": "Sed Every X lines, GREP between Y Lines", "body": "<p>It sounds like this might be what you're trying to do:</p>\n\n<pre><code>$ awk '\n    { recLine = NR%8 }\n    { rec = (recLine==1 ? \"\" : rec ORS) $0 }\n    recLine==6 { f = /PHE/ }\n    (recLine==0) &amp;&amp; f { print rec }\n' file\n! MATCH\n!\nHIT\nNUM     1\nVAL A 184\nPHE A 209\nEND\n!\n! MATCH\n!\nHIT\nNUM     1\nLEU A 296\nPHE A 321\nEND\n!\n</code></pre>\n\n<p>Just change 8 to 12 and 6 to 10 for your real data.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 1, "last_activity_date": 1537508808, "creation_date": 1537508808, "answer_id": 52437326, "question_id": 52433013, "link": "https://stackoverflow.com/questions/52433013/sed-every-x-lines-grep-between-y-lines/52437326#52437326", "title": "Sed Every X lines, GREP between Y Lines", "body": "<p>Here's an easily understood and extensible script.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nmy $matchNum=0;\nmy @match;\nwhile (&lt;STDIN&gt;) {\n  chomp;\n  if (/^! MATCH$/) {\n    @match and checkMatch(\\@match, \\$matchNum);\n    @match=($_);\n  } else { push @match, $_ }\n}\n@match and checkMatch(\\@match, \\$matchNum);\n\nsub checkMatch {\n  my ($matchAR, $matchNumSR) = @_;\n  ++$$matchNumSR;\n  if ( $matchAR-&gt;[9] =~ /^PHE/ ) {\n    print \"Match $$matchNumSR = $matchAR-&gt;[9]\\n\";\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1537536160, "last_edit_date": 1537536160, "creation_date": 1537528135, "answer_id": 52442441, "question_id": 52433013, "link": "https://stackoverflow.com/questions/52433013/sed-every-x-lines-grep-between-y-lines/52442441#52442441", "title": "Sed Every X lines, GREP between Y Lines", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -n '14~12{h;b};H;23~12{/^PHE/!{x;z;x}};25~12{x;/^\\n/!p;x}' file\n</code></pre>\n\n<p>Set the grep-like option <code>-n</code>. Starting at the 14th line and modulo 12 thereafter, set the hold space to the current line and break out of the sed script. For all other lines, append the current line to the hold space. At line 23 and modulo 12 thereafter, check the current line to begin <code>PHE</code> and if not clear the hold space. At line 25 and modulo 12 thereafter, check the hold space and if it does not begin with a newline, print all 12 lines in the hold space. </p>\n\n<p>N.B. If at line 23 and modulo 12 and thereafter, the current line does not begin <code>PHE</code> the hold is cleared and subsequent lines appended. The appended lines, are prepended with a newline and therefore if the hold space begins with a newline, the check for <code>PHE</code> failed and these lines can be discarded. </p>\n\n<p>An alternative:</p>\n\n<pre><code>sed -r '1,13d;:a;N;s/[^\\n]*/&amp;/12;Ta;/^([^\\n]*\\n){9}PHE/p;d' file\n</code></pre>\n\n<p>Delete the first 13 lines. Gather up 12 lines and print them if the 10th line begins <code>PHE</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 5563148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5FrcBMU3Rzo/AAAAAAAAAAI/AAAAAAAAAbo/H56Dm7yyKhE/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/5563148/kat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52433754, "answer_count": 4, "score": 2, "last_activity_date": 1537571704, "creation_date": 1537476087, "last_edit_date": 1537479578, "question_id": 52433013, "link": "https://stackoverflow.com/questions/52433013/sed-every-x-lines-grep-between-y-lines", "title": "Sed Every X lines, GREP between Y Lines", "body": "<p>I have a file that basically contains arrangements of values as presented below (I have numbered the lines.)</p>\n\n<pre><code>! MATCH       1\n!             2\nHIT           3\nNUM     1     4\nVAL A  82     5\nLEU A 144     6\nALA A 154     7\nVAL A 333     8\nALA A 334     9\nPHE A 372     10\nEND           11\n!             12\n</code></pre>\n\n<p>I am trying to create a file that contains all the instances in which these value blocks contain PHE in line 10 like above (as opposed to ALA or VAL, etc).</p>\n\n<p><strong>short example of multiple value blocks in a file:</strong></p>\n\n<pre><code>! MATCH \n!\nHIT \nNUM     1\nVAL A 184\nPHE A 209\nEND \n!\n! MATCH\n!\nHIT\nNUM     1\nLEU A 296\nILE A 321\nEND \n!\n! MATCH\n!\nHIT \nNUM     1\nLEU A 296\nPHE A 321\nEND \n!\n</code></pre>\n\n<p>My code attempting to do this is:</p>\n\n<pre><code>sed -n '23~12p' file.txt | grep -B 9 -A 2 PHE &gt; newfile.txt\n</code></pre>\n\n<p>Basically, starting at line 23, skip every 12 lines (so as to look only at line 10 of the value block), then grep the previous 9 lines and subsequent 2 if PHE is present in line 10 of the value block.</p>\n\n<p>However, as I'm sure you can tell, the code above outputs only the previous lines in the sed output.</p>\n\n<pre><code>sed -n '23~12p' file.txt | grep -B 9 -A 2 PHE file.txt &gt; newfile.txt\n</code></pre>\n\n<p>But if I add the file (file.txt) for grep, it ignores the sed output and instead greps the previous lines, even when PHE is not in the tenth line of the value block.</p>\n\n<p>IE:</p>\n\n<pre><code>ILE A 222\nEND\n!\n! MATCH\n!\nHIT\nNUM     1\nILE A 605\nILE A 620\nPHE A 644   &lt;--- What grep is matching\nVAL A 633\nALA A 634\n</code></pre>\n\n<p>I'm a little confused as to how to write this script to search for PHE at the position I'm looking for (position 10), looking for it every 12 lines, and grepping the entire value block (the previous 9 lines and the subsequent 2 lines) only if PHE is found in position 10.</p>\n\n<p>Would gladly appreciate any advice! Thank you!</p>\n"}, {"tags": ["perl", "parsing", "ini"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1537475980, "post_id": 52432889, "comment_id": 91809597, "body": "Looks like there&#39;s options on CPAN for reading them. <a href=\"https://metacpan.org/pod/Config::INI\" rel=\"nofollow noreferrer\">Config::INI</a> etc."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1537476169, "post_id": 52432889, "comment_id": 91809672, "body": "Config::IniFiles"}, {"owner": {"reputation": 1, "user_id": 10393469, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xo0Ma5mo4Ug/AAAAAAAAAAI/AAAAAAAAAEg/dFV25oezfUE/photo.jpg?sz=128", "display_name": "dean", "link": "https://stackoverflow.com/users/10393469/dean"}, "edited": false, "score": 0, "creation_date": 1537476468, "post_id": 52432889, "comment_id": 91809809, "body": "I have looked but the format is different. most expect a &quot;param=value&quot; format"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1537476854, "post_id": 52432889, "comment_id": 91809980, "body": "If it doesn&#39;t have a <code>param=value</code> format, then <a href=\"https://en.wikipedia.org/wiki/INI_file\" rel=\"nofollow noreferrer\">it&#39;s not an INI file</a>, and your question is &quot;How do I parse something that is sort of but not quite like an INI file?&quot;"}, {"owner": {"reputation": 1, "user_id": 10393469, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xo0Ma5mo4Ug/AAAAAAAAAAI/AAAAAAAAAEg/dFV25oezfUE/photo.jpg?sz=128", "display_name": "dean", "link": "https://stackoverflow.com/users/10393469/dean"}, "edited": false, "score": 0, "creation_date": 1537477274, "post_id": 52432889, "comment_id": 91810170, "body": "Yes its actually .conf but formatted similar to INI. any suggestions?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1537485854, "post_id": 52432889, "comment_id": 91812708, "body": "What have you tried so far? Are you getting any errors? How is the actual output different from the expected output? What isn&#39;t working with your existing solution?"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1537506405, "post_id": 52434662, "comment_id": 91816837, "body": "he should use one of the available packages in CPAN rather than roll his own"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1537545354, "post_id": 52434662, "comment_id": 91837426, "body": "@EdwardKirton Which module do you suggest?"}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1537910097, "post_id": 52434662, "comment_id": 91953995, "body": "Config::Simple is easy to use."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1537910684, "post_id": 52434662, "comment_id": 91954199, "body": "@EdwardKirton And does Config::Simple work with the format of the file in the question? Nope."}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1538065409, "post_id": 52434662, "comment_id": 92022510, "body": "The example text given isn&#39;t proper INI format, which was specified the question, probably just a mistake in the OP.  My point is, it&#39;s best to use a standardized file format and there are many robust packages available to use."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1537486527, "creation_date": 1537486527, "answer_id": 52434662, "question_id": 52432889, "link": "https://stackoverflow.com/questions/52432889/parse-ini-in-perl-list-format/52434662#52434662", "title": "Parse INI in Perl (list format)", "body": "<p>You haven't told us the expected format for the data or shown any existing code, so it's impossible to know what you're looking for, but this should get you at least 90% of the way there:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %config;\nmy $group = '';\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    next unless /\\S/;\n\n    if (/^\\[([^]]+)\\]/) {\n        $group = $1;\n        next;\n    }\n\n    push(@{$config{$group}}, $_);\n}\n\nprint Dumper(\\%config);\n\n__DATA__\n[group1]\nvalue1\nvalue2\nvalue3\n\n[group2]\nvalue1\nvalue2\nvalue3\nvalue4\n\n[group3]\nvalue1\nvalue2\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10393469, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xo0Ma5mo4Ug/AAAAAAAAAAI/AAAAAAAAAEg/dFV25oezfUE/photo.jpg?sz=128", "display_name": "dean", "link": "https://stackoverflow.com/users/10393469/dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 52434662, "answer_count": 1, "score": -4, "last_activity_date": 1537560766, "creation_date": 1537475597, "question_id": 52432889, "link": "https://stackoverflow.com/questions/52432889/parse-ini-in-perl-list-format", "title": "Parse INI in Perl (list format)", "body": "<p>What is the best way to parse ini files in Perl?</p>\n\n<p>the file is formated in this way:</p>\n\n<pre><code>[group1]\nvalue1\nvalue2\nvalue3\n\n[group2]\nvalue1\nvalue2\nvalue3\nvalue4\n\n[group3]\nvalue1\nvalue2\n</code></pre>\n"}, {"tags": ["python", "perl", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1537473794, "post_id": 52432446, "comment_id": 91808642, "body": "<code>all { $_-&gt;{err_msg} }</code> also considers <code>0</code> an invalid value. Adjust as necessary."}, {"owner": {"reputation": 166, "user_id": 7421890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cad325e142f1a565d95d7d5ee13aa49f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7421890/chris"}, "edited": false, "score": 0, "creation_date": 1537479304, "post_id": 52432446, "comment_id": 91810968, "body": "first version unfortunately always returns <code>true</code>, even for non-existing keys. But second version works great :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1537487172, "post_id": 52432446, "comment_id": 91812969, "body": "<code>all { length $_-&gt;{err_msg} }</code> will be true for 0 but not an empty string or undef. But note it will warn on undef before Perl 5.12."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 166, "user_id": 7421890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cad325e142f1a565d95d7d5ee13aa49f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7421890/chris"}, "edited": false, "score": 0, "creation_date": 1537491183, "post_id": 52432446, "comment_id": 91813791, "body": "@Chris For what input do you see that? (What do you mean by &quot;<i>non-existing keys</i>&quot;?)  It works in my tests."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 166, "user_id": 7421890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cad325e142f1a565d95d7d5ee13aa49f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7421890/chris"}, "edited": false, "score": 1, "creation_date": 1537503257, "post_id": 52432446, "comment_id": 91816105, "body": "@Chris. The first version works fine. For example, if I comment out the first <code>err_msg</code> line in your data structure, it returns false."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1537540969, "last_edit_date": 1537540969, "creation_date": 1537473538, "answer_id": 52432446, "question_id": 52432130, "link": "https://stackoverflow.com/questions/52432130/perl-pendant-for-python-built-in-functions-all-and-any/52432446#52432446", "title": "Perl pendant for Python Built-in Functions `all` and `any`", "body": "<p>It's impossible to perform the check without looping, but you could indeed use <code>all</code> to do this.</p>\n\n<pre><code>use List::Util qw( all );\n\nmy $ok =\n   all {\n      all { $_-&gt;{err_msg} }\n         @{ $_-&gt;{row} }\n   }\n      @$VAR1;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use List::Util qw( all );\n\nmy $ok =\n   all { $_-&gt;{err_msg} }\n      map { @{ $_-&gt;{row} } }\n         @$VAR1;\n</code></pre>\n\n<p>The first version is more efficient because it only looks at a group if all the previous groups check out ok, whereas the second version unconditionally does work for every group. This difference is unlikely to matter, though.</p>\n"}], "owner": {"reputation": 166, "user_id": 7421890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cad325e142f1a565d95d7d5ee13aa49f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7421890/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52432446, "answer_count": 1, "score": 3, "last_activity_date": 1537824292, "creation_date": 1537472265, "last_edit_date": 1537823435, "question_id": 52432130, "link": "https://stackoverflow.com/questions/52432130/perl-pendant-for-python-built-in-functions-all-and-any", "title": "Perl pendant for Python Built-in Functions `all` and `any`", "body": "<p>Are there Perl functions that work like Python functions <code>all</code> or <code>any</code>? <a href=\"https://stackoverflow.com/a/42152298/7421890\">This answer from Jobin is a short explanation</a> of how both functions are working.</p>\n\n<p>I want to determine (without loop) if all error-msg's are <code>defined and ne \"\"</code> in the following structure:</p>\n\n<pre><code>$VAR1 = [{\n  'row' =&gt; [{\n      err_msg =&gt; \"msg1\",\n      a =&gt; \"a1\",\n      b =&gt; \"b1\"\n    },\n    {\n      err_msg =&gt; \"msg2\",\n      a =&gt; \"a2\",\n      b =&gt; \"b2\"\n    }]\n},\n{\n  'row' =&gt; [{\n      err_msg =&gt; \"msg3\",\n      a =&gt; \"a3\",\n      b =&gt; \"b3\"\n    },\n    {\n      err_msg =&gt; \"msg4\",\n      a =&gt; \"a4\",\n      b =&gt; \"b4\"\n    }]\n}]\n</code></pre>\n"}, {"tags": ["perl", "bioinformatics"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1537471317, "post_id": 52431725, "comment_id": 91807434, "body": "This error is something specific to the particular library you&#39;re using, it&#39;s not a generic error."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537475863, "post_id": 52431725, "comment_id": 91809543, "body": "Yeah, this looks more like application support than a programming question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537475958, "post_id": 52431725, "comment_id": 91809589, "body": "<code>select( (select(STDOUT), $| = 1 )[0] );</code> at the top of the script. This doesn&#39;t bode well (I&#39;d write that line as simply <code>STDOUT-&gt;autoflush(1);</code>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537476053, "post_id": 52431725, "comment_id": 91809625, "body": "<code>IO::File-&gt;new(&quot;&lt;$meta_file&quot;)</code> - Two-argument open, but in OO style. Why :-("}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537476892, "post_id": 52431725, "comment_id": 91809999, "body": "My interpretation of the error is that the index file (probably called <code>...something...&#47;hg19&#47;hg19.fa.index</code>) of the genome assembly (probably called <code>...something...&#47;hg19&#47;hg19.fa</code>) doesn&#39;t contain an entry corresponding to <code>chr11</code>."}, {"owner": {"reputation": 4501, "user_id": 3000629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90fb422369282d49c15629eb3ceb845?s=128&d=identicon&r=PG&f=1", "display_name": "Poshi", "link": "https://stackoverflow.com/users/3000629/poshi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1537484725, "post_id": 52431725, "comment_id": 91812473, "body": "My guess goes in the same way as @melpomene comment. I think you have an input that contains chromosomes called &quot;chr1&quot; while the reference genome used uses chromosomes called &quot;1&quot; (or the other way around). Make sure that you use the same reference for all the analysis. Naming schemes varies between the different sources(UCSC!=NCBI)."}], "answers": [{"tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": false, "score": 1, "last_activity_date": 1537501705, "creation_date": 1537501705, "answer_id": 52436314, "question_id": 52431725, "link": "https://stackoverflow.com/questions/52431725/how-to-resolve-a-metadata-error-chr-must-be-valid-error-on-linux/52436314#52436314", "title": "How to resolve a &quot;Metadata error: chr must be valid&quot; error on Linux?", "body": "<p>So the error is saying that one of the sequence characters in the metadata file is not present in the sequence's assembly file.</p>\n\n<p>Given that this is the provided example you should assume that the data is correct and your invocation is faulty.</p>\n\n<p>Have you done the <code>TranslocPreprocess.pl</code> preprocessing steps?</p>\n\n<p>If you have try looking at the first line of the metadata file, identify the assembly entry. Ensure that the assembly file exists and that it contains the required sequence.</p>\n\n<p>One common problem with this kind of code is the case of the filenames. The examples are designed to be run in Linux where filename case matters. Windows likes to pretend that case doesn't matter, this can cause problems. If you are running this code from Microsoft Windows or extracted any of the archives from within Windows this is a likely cause of the error.</p>\n"}], "owner": {"reputation": 1, "user_id": 10393033, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VT0EoxfHu38/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPsCK-12nZoAfDLx4So2k9f_BBzcQ/mo/photo.jpg?sz=128", "display_name": "Micah Kelly", "link": "https://stackoverflow.com/users/10393033/micah-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537501705, "creation_date": 1537470453, "last_edit_date": 1537472105, "question_id": 52431725, "link": "https://stackoverflow.com/questions/52431725/how-to-resolve-a-metadata-error-chr-must-be-valid-error-on-linux", "title": "How to resolve a &quot;Metadata error: chr must be valid&quot; error on Linux?", "body": "<p>I am relatively new to the world of coding, so I am having trouble resolving an issue when running <code>TranslocWrapper.pl tutorial_metadata.txt preprocess/ results/ --threads 2</code>. I am trying to run the HTGTS Pipeline according to this <a href=\"http://robinmeyers.github.io/transloc_pipeline/thedocs.html\" rel=\"nofollow noreferrer\">GitHub project</a>. This is the full error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>.   Library Genome  Chr Start   End Strand\n1   RAG1A_SRep2 hg19    chr11   36594878    36595030    -\nMetadata error: chr must be valid at /home/micah/transloc_pipeline/bin/TranslocWrapper.pl line 285.\n    main::check_validity_of_metadata('HASH(0x2903ac8)') called at /home/micah/transloc_pipeline/bin/TranslocWrapper.pl line 248\n    main::read_in_meta_file() called at /home/micah/transloc_pipeline/bin/TranslocWrapper.pl line 90\n</code></pre>\n\n<p>I have already double-checked the successful installation of the Software Dependencies, so everything should be all good, but I am having trouble interpreting the \"Metadata error: chr must be valid at ...\" line. If it helps, these are the specific lines that are being called in the error:</p>\n\n<ul>\n<li><p>TranslocWrapper.pl line 285:</p>\n\n<pre><code>croak \"Metadata error: chr must be valid\" unless grep { $_ eq $expt-&gt;{chr} } @chrlist;\n</code></pre></li>\n<li><p>TranslocWrapper.pl line 248:</p>\n\n<pre><code>check_validity_of_metadata($expt);\n</code></pre></li>\n<li><p>TranslocWrapper.pl line 90:</p>\n\n<pre><code>read_in_meta_file;\n</code></pre></li>\n</ul>\n\n<p>Thanks in advance for the help!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6620043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72589d0cde4ea630304edb47a57c566d?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk", "link": "https://stackoverflow.com/users/6620043/dirk"}, "edited": false, "score": 0, "creation_date": 1537560382, "post_id": 52431127, "comment_id": 91844053, "body": "H&#229;kon H&#230;gland :) :) :)"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1537467943, "creation_date": 1537467943, "answer_id": 52431127, "question_id": 52430678, "link": "https://stackoverflow.com/questions/52430678/change-ldap-output-file-with-script/52431127#52431127", "title": "Change ldap output file with script", "body": "<p>Here is a simple approach. It just stores the header line <code>dn: cn=xxxxxx</code> in a variable, and prints a block each time it sees a <code>Position:</code> line:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'output.txt';  # The file containing the output\n\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $header; \nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    if ( $line =~ /^dn:\\s+cn=/ ) {\n        $header = $line;   # &lt;-- store header line in a variable\n        next;\n    }\n    elsif ( $line =~ /^Position:/ ) {\n        print_block( $header, $line);\n    }\n}\nclose $fh;\n\n\nsub print_block {\n    my ( $header, $line) = @_;\n\n    say $header;\n    say \"changetype: modify\\ndelete: delete\";\n    say $line, \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6620043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72589d0cde4ea630304edb47a57c566d?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk", "link": "https://stackoverflow.com/users/6620043/dirk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537467943, "creation_date": 1537465996, "last_edit_date": 1537467014, "question_id": 52430678, "link": "https://stackoverflow.com/questions/52430678/change-ldap-output-file-with-script", "title": "Change ldap output file with script", "body": "<p>I've a output file like this, the <code>dn: cn=xxxxxx</code> is different every time.</p>\n\n<p>Every <code>dn: cn=xxxxxx</code> has one or more <code>Position: cn=xxxxxx</code></p>\n\n<pre><code>dn: cn=429a0b6b-a311-400c-820f-d4a7bb3274c5,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nPosition: cn=307897,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;6866835719&lt;/cn&gt;&lt;reqdate&gt;1537425657&lt;/reqdate&gt;&lt;startdate&gt;1537425657&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537425657&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537425811&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537425934&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\ndn: cn=80d53356-8159-427a-b98e-32c216e27074,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nPosition: cn=4635,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;7733441377&lt;/cn&gt;&lt;reqdate&gt;1537183136&lt;/reqdate&gt;&lt;startdate&gt;1537183136&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537183136&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537183470&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537353778&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\nPosition: cn=5656,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;6587590159&lt;/cn&gt;&lt;reqdate&gt;1537341752&lt;/reqdate&gt;&lt;startdate&gt;1537341752&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537341752&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537341808&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537354085&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\nPosition: cn=5596,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;5399237556&lt;/cn&gt;&lt;reqdate&gt;1537341373&lt;/reqdate&gt;&lt;startdate&gt;1537341373&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537341373&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537341531&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537354108&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\ndn: cn=89fd0274-7d83-4e19-9725-525e6ac367a3,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nPosition: cn=303611,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;8039755529&lt;/cn&gt;&lt;reqdate&gt;1445495634&lt;/reqdate&gt;&lt;startdate&gt;1445495634&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495634&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445500976&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357009&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\nPosition: cn=303754,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;2089908580&lt;/cn&gt;&lt;reqdate&gt;1445495694&lt;/reqdate&gt;&lt;startdate&gt;1445495694&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495694&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501186&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357366&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\nPosition: cn=303612,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;5959003545&lt;/cn&gt;&lt;reqdate&gt;1445495653&lt;/reqdate&gt;&lt;startdate&gt;1445495653&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495653&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501006&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357474&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\nPosition: cn=303613,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;3257198413&lt;/cn&gt;&lt;reqdate&gt;1445495673&lt;/reqdate&gt;&lt;startdate&gt;1445495673&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495673&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501126&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357503&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\ndn: cn=4c2506eb-2e19-4e76-b5e1-35aded193872,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nPosition: cn=16,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;1122909226&lt;/cn&gt;&lt;reqdate&gt;1435226618&lt;/reqdate&gt;&lt;startdate&gt;1435226618&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;0&lt;/newstatus&gt;&lt;date&gt;1435226618&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1435226619&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537370977&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n</code></pre>\n\n<p>And I need this file to get like this:</p>\n\n<pre><code>dn: cn=429a0b6b-a311-400c-820f-d4a7bb3274c5,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=307897,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;6866835719&lt;/cn&gt;&lt;reqdate&gt;1537425657&lt;/reqdate&gt;&lt;startdate&gt;1537425657&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537425657&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537425811&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537425934&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=80d53356-8159-427a-b98e-32c216e27074,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=4635,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;7733441377&lt;/cn&gt;&lt;reqdate&gt;1537183136&lt;/reqdate&gt;&lt;startdate&gt;1537183136&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537183136&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537183470&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537353778&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=80d53356-8159-427a-b98e-32c216e27074,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=5656,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;6587590159&lt;/cn&gt;&lt;reqdate&gt;1537341752&lt;/reqdate&gt;&lt;startdate&gt;1537341752&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537341752&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537341808&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537354085&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=80d53356-8159-427a-b98e-32c216e27074,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=5596,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;5399237556&lt;/cn&gt;&lt;reqdate&gt;1537341373&lt;/reqdate&gt;&lt;startdate&gt;1537341373&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1537341373&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537341531&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537354108&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=89fd0274-7d83-4e19-9725-525e6ac367a3,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=303611,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;8039755529&lt;/cn&gt;&lt;reqdate&gt;1445495634&lt;/reqdate&gt;&lt;startdate&gt;1445495634&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495634&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445500976&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357009&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=89fd0274-7d83-4e19-9725-525e6ac367a3,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=303754,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;2089908580&lt;/cn&gt;&lt;reqdate&gt;1445495694&lt;/reqdate&gt;&lt;startdate&gt;1445495694&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495694&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501186&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357366&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=89fd0274-7d83-4e19-9725-525e6ac367a3,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=303612,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;5959003545&lt;/cn&gt;&lt;reqdate&gt;1445495653&lt;/reqdate&gt;&lt;startdate&gt;1445495653&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495653&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501006&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357474&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=89fd0274-7d83-4e19-9725-525e6ac367a3,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=303613,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;3257198413&lt;/cn&gt;&lt;reqdate&gt;1445495673&lt;/reqdate&gt;&lt;startdate&gt;1445495673&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;1&lt;/newstatus&gt;&lt;date&gt;1445495673&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1445501126&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537357503&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n\ndn: cn=4c2506eb-2e19-4e76-b5e1-35aded193872,ou=Named,ou=Identities,ou=Active,ou=Vault,o=acme\nchangetype: modify\ndelete: delete\nPosition: cn=16,ou=Entities,ou=Active,ou=Vault,o=acme#6#&lt;position&gt;&lt;cn&gt;1122909226&lt;/cn&gt;&lt;reqdate&gt;1435226618&lt;/reqdate&gt;&lt;startdate&gt;1435226618&lt;/startdate&gt;&lt;enddate&gt;1924902000&lt;/enddate&gt;&lt;lifecycle&gt;&lt;change&gt;&lt;previousstatus/&gt;&lt;newstatus&gt;0&lt;/newstatus&gt;&lt;date&gt;1435226618&lt;/date&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1435226619&lt;/date&gt;&lt;previousstatus&gt;1&lt;/previousstatus&gt;&lt;newstatus&gt;3&lt;/newstatus&gt;&lt;/change&gt;&lt;change&gt;&lt;date&gt;1537370977&lt;/date&gt;&lt;previousstatus&gt;3&lt;/previousstatus&gt;&lt;newstatus&gt;6&lt;/newstatus&gt;&lt;/change&gt;&lt;/lifecycle&gt;&lt;/position&gt;\n</code></pre>\n\n<p>As you can see for the <code>dn: cn=xxxxxx</code> which have more the one <code>Position</code> the <code>dn: cn=xxxxxx</code> will be the same.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["perl", "process", "parent-child"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537483715, "post_id": 52430278, "comment_id": 91812216, "body": "<code>fork</code> isn&#39;t provided by Windows so it is <i>emulated</i> by the perl interpreter. It assigns negative numbers to the emulated processes to distinguish them from real Windows processes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537484165, "post_id": 52430278, "comment_id": 91812331, "body": "Do you realise that the parent process will issue the <code>taskkill</code> <i>immediately after</i> the <code>fork</code>, and quite possibly before the new child has started a Notepad process? Also, each new child process will start a copy of Notepad, skip the <code>if ( $count &gt; 500 )</code> test because its copy of <code>$count</code> is zero, and then go to the top of the <code>while</code> loop and call <code>fork</code> itself. So every child as well as the parent is repeatedly starting new child processes. I&#39;m sure that&#39;s not what you want. You shouldn&#39;t need to <code>kill</code> the child processes: they can be left to just <code>exit</code> when they are done."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537484276, "post_id": 52430278, "comment_id": 91812365, "body": "You may want to look at <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> to make this easier to write."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537484558, "post_id": 52430278, "comment_id": 91812432, "body": "Are you sure that you will gain anything by running multiple copies of your program in parallel? If the process is disk-bound then all children will be queueing up for their turn to read/write the disk, and the overall time taken will only be significantly sorter if there is some processor-heavy work for one to do while another is waiting for its disk operation to finish."}, {"owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537514005, "post_id": 52430278, "comment_id": 91819791, "body": "Thanks Borodin - very helpful."}, {"owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537514483, "post_id": 52430278, "comment_id": 91820048, "body": "<code>taskkill</code> can be delayed by <code>sleep</code> until the child is well and truly done, with no negative effects either way.  When the child is spawned it sees <code>$exit</code> as &#39;yes&#39; so it kicks off one Notepad and exits."}, {"owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537514505, "post_id": 52430278, "comment_id": 91820062, "body": "Killing the child processes of the original perl script isn&#39;t the problem, it&#39;s killing the Notepads.  That&#39;s exactly what I want to do - my real program (a commercial package) needs to be timed out in a programmable way if it&#39;s taking too long and doesn&#39;t provide a way of doing so itself (or is there another way to time out a process started by <code>system</code>?).  And my real program does gain by running instances in parallel as it&#39;s doing serious number crunching (in fact its documentation suggests it&#39;s worthwhile), though the disc access will be an issue to some extent."}, {"owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537514806, "post_id": 52430278, "comment_id": 91820260, "body": "Will look at <code>Parallel::Forkmanager</code>, which certainly <i>sounds</i> useful!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "edited": false, "score": 0, "creation_date": 1537514753, "post_id": 52430519, "comment_id": 91820216, "body": "Thanks, mob.  I&#39;ll edit my question to insert my latest effort, which still isn&#39;t quite there.  I&#39;ll look into <code>Forks::Super</code> too."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1537465740, "last_edit_date": 1537465740, "creation_date": 1537465340, "answer_id": 52430519, "question_id": 52430278, "link": "https://stackoverflow.com/questions/52430278/creating-and-killing-processes-and-child-processes-completely/52430519#52430519", "title": "Creating and killing processes and child processes completely", "body": "<p>For something like this, and on Windows, you might want to try the <a href=\"http://metacpan.org/pod/perlport#system\" rel=\"nofollow noreferrer\">underdocumented <code>system 1, LIST</code> syntax</a>. </p>\n\n<blockquote>\n  <p><code>system(1, @args)</code> spawns an external process and immediately returns its process designator, without waiting for it to terminate.  Return value\n  may be used subsequently in \"wait\" or \"waitpid\".</p>\n</blockquote>\n\n<p>Importantly, the return value is a proper process id that can be passed to <code>taskkill</code> (as well as to Perl's <code>waitpid</code>), not a <em>pseudo-process id</em> (a negative number) that you get from a <code>fork</code> call on Windows. There is no need to use a <code>fork</code> call with this syntax.</p>\n\n<pre><code>$n = \"001\";\nwhile (-f \"datafile$n.txt\") {\n    $pid = system 1, \"fancyprogram.exe\", \"datafile$n.txt\";\n    $n++;\n    ...\n}\n</code></pre>\n\n<p>A module like <a href=\"http://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\"><code>Forks::Super</code></a> could also help a lot in a script with a lot of background processes to manage. Some of the ways it could help are in throttling the number of background jobs (running only as many jobs at a time as your system can reasonably handle), settings timeouts on background jobs, or setting priorities or CPU affinity on jobs.</p>\n"}], "owner": {"reputation": 21, "user_id": 6814289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f75f2d712bb89302db091fb408e122e?s=128&d=identicon&r=PG&f=1", "display_name": "AndyI", "link": "https://stackoverflow.com/users/6814289/andyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 52430519, "answer_count": 1, "score": 1, "last_activity_date": 1537518908, "creation_date": 1537464162, "last_edit_date": 1537518908, "question_id": 52430278, "link": "https://stackoverflow.com/questions/52430278/creating-and-killing-processes-and-child-processes-completely", "title": "Creating and killing processes and child processes completely", "body": "<p>I have a program which is in Windows from the command prompt using a command like this</p>\n\n<pre><code>C:\\Users\\AndyI&gt; ./myprogram.exe datafile.txt\n</code></pre>\n\n<p>I want to use a Perl program to create many instances of <code>datafile.txt</code> (say, <code>datafile.001.txt</code>, <code>datafile.002.txt</code> etc.) and call <code>myprogram.exe</code> to process them in parallel.</p>\n\n<p>I've had problems illustrated by this generic program</p>\n\n<pre><code>$exit  = '';\n$count = 0;\n\nwhile ( $exit eq '' ) {\n\n    $pid = fork();\n\n    if ( $pid == 0 ) {          # if this is a child process\n        $exit = 'yes';\n        system 'notepad.exe';   # open an instance of Notepad\n    }\n    else {\n        system(\"taskkill /im notepad.exe /f\");  # Kill all instances\n        $count++;\n        print \"$count instances\\n\";\n    }\n\n    if ( $count &gt; 500 ) {       # In case of infinite loop\n        $exit = 'yes';\n    }\n}\n\nsleep 100;      # So I have time to read the output\n</code></pre>\n\n<p>I am using <code>fork()</code> to create child processes, and each child uses <code>system</code> to start up an instance of Notepad. The parent process attempts to kill the Notepad process with <code>taskkill</code>, and this repeats in a loop.</p>\n\n<p>The program generates (and kills) only 64 instances of Notepad before halting. It's clear that I'm not handling these processes properly and there are bits hanging around which fill up some kind of table.</p>\n\n<p>If I don't kill Notepad there is still a limit of 64. This perhaps indicates that my cleanup isn't working and I've killed the Notepad process but let the child live.</p>\n\n<p>Oddly the <code>system</code> call yields a negative <code>$pid</code> but those PIDs are not recognised by <code>taskkill</code> or Task Manager.</p>\n\n<p>How do I generate and kill many instances of Notepad without hitting the limit?</p>\n\n<p><strong>EDIT</strong>:  Following mob's thoughts, here's another script, but it still won't let me spawn and kill more than 64 Notepads:\n    $exit='';\n    $count=0;</p>\n\n<pre><code>while($exit eq ''){\n\n    $pid=system 1,'notepad.exe';       # open an instance of Notepad\n    print \"$pid\\n\";\n    sleep 1;        # Slows it down for easy viewing - not necessary\n    system(\"taskkill /pid $pid /f\");      # Kill by PID\n    $count++;\n    print\"$count instances\\n\";\n\n    if($count&gt;100){     # in case of infinite loop!\n        $exit='yes';\n    }\n\n}\n\nsleep 100;      # so I have time to read the output!\n</code></pre>\n\n<p>Any thoughts?  I haven't found a use for waitpid or wait - can you clarify what you mean?  I need to kill, not wait.  (again, not a phrase for search engines!).</p>\n\n<p><strong>EDIT2</strong>:  <code>Parallel::ForkManager</code> (thanks Borodin!)</p>\n\n<pre><code>use Parallel::ForkManager;\nmy $pm=Parallel::ForkManager-&gt;new(20);    # maximum number of child processes at any one time\n\nPROGS:\nfor(my $i=1;$i&lt;=100;$i++){\n    print\"$i\\n\";\n    sleep 1;\n    $pm-&gt;start and next PROGS;\n    my $pid=system 1,'notepad.exe';\n    sleep 10;\n    system(\"taskkill /pid $pid /f\");\n    $pm-&gt;finish;\n}\n</code></pre>\n\n<p>This essentially does what the first edit does, but somehow does it more cleanly - perhaps scrubbing away the remnants of the child that the earlier effort did.  I would still love to know why!</p>\n\n<p>Every second, it kicks off a child process which runs the code between <code>$pm-&gt;start</code> and <code>$pm-&gt;finish</code>.  That child lives for 10s before killing Notepad and dying, which allows about 10 Notepads to live at any one time.  And they vital thing is that more than 64 Notepads can live and die before the whole program exits.</p>\n\n<p>I had wanted to kill each program from the main process, but as I will know when I want it do die before I start it, this ought to work.</p>\n\n<p>Lots more to try - thanks for the help so far, and you can call this solved (ish).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1537461351, "post_id": 52429521, "comment_id": 91802721, "body": "Welcome to Stack Overflow. Please <a href=\"https://stackoverflow.com/posts/52429521/edit\">edit</a> your question and include the actual code and some example data. We cannot copy your code from an image to run it, so we cannot help you. Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Thanks."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1537462819, "post_id": 52429521, "comment_id": 91803422, "body": "Note you might benefit from using <code>unpack</code> instead of <code>split</code> since it seems your data is fixed width, and the number of fields can vary, but the column positions of the data remains the same. See <a href=\"http://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow noreferrer\"><code>perldoc perlpacktut</code></a> for more examples"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537474605, "post_id": 52429521, "comment_id": 91809028, "body": "Are the columns in your data separated by tabs or spaces?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537534926, "post_id": 52429521, "comment_id": 91831383, "body": "To back up what @simbabque said; I would like to help you, but I have no intention of retyping your input data or your code in order to try it out. Firstly, it would take too much effort and, secondly, there&#39;s too much chance that I&#39;d make an error in the transcription. If you still want help, please post text versions of your images. (I have no idea why anyone would think that images of text are useful, but it&#39;s a common occurrence, so I&#39;m obviously missing something.)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1537535475, "post_id": 52429521, "comment_id": 91831740, "body": "@DaveCross I remember when I had to teach people how to take screenshots... what happened to that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537537007, "post_id": 52429521, "comment_id": 91832625, "body": "@shawn it looks like it&#39;s spaces, for a column-based format. Clearly a human-readable format, not meant for machine-readability as there are no record type prefixes. What confuses me a bit is that it seems it can only ever contain 99 records because the first column is too small for three digits. See how it&#39;s right-aligned with the heading?"}], "owner": {"reputation": 11, "user_id": 10392492, "user_type": "registered", "profile_image": "https://graph.facebook.com/2055414567844673/picture?type=large", "display_name": "Ryan Stolt", "link": "https://stackoverflow.com/users/10392492/ryan-stolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537461318, "creation_date": 1537461117, "last_edit_date": 1537461318, "question_id": 52429521, "link": "https://stackoverflow.com/questions/52429521/extracting-data-from-complex-output-text-file-using-perl-and-placing-into-new-te", "title": "Extracting data from complex output text file using perl and placing into new text file", "body": "<p>The complete output text file is hundreds of lines long, with relevant nuclear cross sections and a plethora of other data that I do not need for this particular problem. I am trying to extract the columns of data under \"BURNUP\" and the first \"K-INF\" from the file I attached. I am trying to extract this data and place it into a separate file. I am a newbie, and have a similar perl script from a professor. I have tried to adapt it to the information I am looking for but the only result I am receiving are the 2 print statements. Any suggestions?</p>\n\n<p><a href=\"https://i.stack.imgur.com/E8ZeU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E8ZeU.png\" alt=\"Sample of text file I am trying to extract data from\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/oHrqf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oHrqf.png\" alt=\"Code\"></a></p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537535586, "post_id": 52429294, "comment_id": 91831806, "body": "<i>&quot;The double quotes <code>&quot;&quot;</code> are for changing <code>$foo</code> to the value <code>Hello\\nWorld</code>&quot;</i>. It may be me, but I took the longest time to understand what you were getting at here. I&#39;m not sure you should be mentioning <code>eval</code> at all, and the bolded warning should be <i>before</i> the example. But that&#39;s not what the double quotes do: they <i>interpolate</i> <code>$foo</code> to create the string <code>qq{Hello\\nWorld}</code>. It may also be worth mentioning <a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537535673, "post_id": 52429294, "comment_id": 91831855, "body": "@Borodin better?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537535858, "post_id": 52429294, "comment_id": 91831969, "body": "Hmm. I feel I&#39;m being picky, but I think something along the lines of <i>so that it is the same as <code>eval &quot;qq{Hello\\nWorld}&quot;</code></i> is more appropriate. <code>eval</code> with nested double quotes, especially with mixed delimiters, can be especially difficult to get one&#39;s head around."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537536485, "post_id": 52429294, "comment_id": 91832333, "body": "Please go ahead and improve the post @Borodin. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1537535668, "last_edit_date": 1537535668, "creation_date": 1537460161, "answer_id": 52429294, "question_id": 52429131, "link": "https://stackoverflow.com/questions/52429131/perl-newline-character-not-enforced-within-single-quoted-string-or-line-read-fr/52429294#52429294", "title": "Perl newline character not enforced within single quoted string (or line read from file)", "body": "<p>Single quotes <code>''</code> do not interpolate variables or control characters.</p>\n\n<p>This is just the way Perl works.</p>\n\n<p>If you <code>print '\\n'</code> that will print a literal backslash <code>\\</code> and a literal n <code>n</code>. If you assign this to a variable, it will also assign a literal backslash and a literal n. </p>\n\n<p>Interpolating the variable into another string like <code>\"$foo\"</code> will only interpolate <code>$foo</code>, but it will still contain a literal backslash and a literal n.</p>\n\n<p>If wanted to interpolate that as well, you would have to use string <code>eval</code>.</p>\n\n<pre><code>my $foo = 'Hello\\nWorld';\nprint eval \"qq{$foo}\";\n</code></pre>\n\n<p>The double quotes <code>\"\"</code> are for interpolating <code>$foo</code> to the value <code>Hello\\nWorld</code>, so the literal text will be seen by <code>eval</code>, and the <code>qq{}</code> double quotes are for wrapping that string into an interpolation double quote so that <code>eval</code> will treat it as such and interpolate.</p>\n\n<p>But please don't do that. In most cases you <strong>do not want to use string <code>eval</code></strong>.</p>\n\n<hr>\n\n<p>Since you are talking about reading from a file, this is different. If you read a string from a file and it contains the literal <code>\\</code> and the literal <code>n</code>, then that is <strong>not a newline character</strong>. The <code>\\n</code> escape sequence is just a visual representation used to create the newline character, which is <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\"><code>0x0A</code> in ASCII</a>. So your file contains nothing special. Just two characters.</p>\n\n<p>You could replace literal <code>\\</code> and <code>n</code> with a <code>\\n</code> while processing the file.</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    $line =~ s/\\\\n/\\n/g; # \\\\ creates literal backslash, second half is interpolated\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1537460755, "last_edit_date": 1537460755, "creation_date": 1537460184, "answer_id": 52429301, "question_id": 52429131, "link": "https://stackoverflow.com/questions/52429131/perl-newline-character-not-enforced-within-single-quoted-string-or-line-read-fr/52429301#52429301", "title": "Perl newline character not enforced within single quoted string (or line read from file)", "body": "<p>You seem to think it's <code>print</code> that's converting <code>\\n</code> into a newline, but it's not. As you've find out, if you read <code>Hello \\n world\u240a</code> from a file and pass it to <code>print</code>, it will print <code>Hello \\n world\u240a</code>.</p>\n\n<p>It's the double-quoted string literals themselves that produces the transformed strings. For exmple,</p>\n\n<ul>\n<li>The string literal <code>'Hello \\n world'</code> produces the 14-character string <code>Hello \\n world</code>.</li>\n<li>The string literal <code>\"Hello \\n world\"</code> produces the 13-character string <code>Hello \u240a world</code>.</li>\n</ul>\n\n<p>If you want some kind of conversion to be performed on your input, you will need to tell Perl to perform it.</p>\n\n<pre><code>my $s = 'Hello \\n world'.\"\\n\";\n$s =~ s/\\\\n/\\n/g;\nprint($s);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 0, "last_activity_date": 1537460921, "creation_date": 1537460921, "answer_id": 52429482, "question_id": 52429131, "link": "https://stackoverflow.com/questions/52429131/perl-newline-character-not-enforced-within-single-quoted-string-or-line-read-fr/52429482#52429482", "title": "Perl newline character not enforced within single quoted string (or line read from file)", "body": "<p>If you're looking to replace the literal sequence <code>\\n</code> with a newline and spaces in your example:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $var1 = 'Hello \\n world';\nmy $var2 = \"$var1\";\nmy $var3 = '$var1';\n\nmy $s = \"    $var1 \\n\";\n$s =~ s/\\\\n/\\n   /;\nprint $s\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Hello\n    world\n</code></pre>\n\n<p>However, use <code>s/\\\\n/\\n/</code> on your file if the whitespace was an unintentional artifact of your example output. This situation is a good illustration of <a href=\"https://perlmaven.com/quoted-interpolated-and-escaped-strings-in-perl\" rel=\"nofollow noreferrer\">string interpolation</a> and <code>\\n</code> in a Perl string is <code>\\\\n</code>, or an escaped newline.</p>\n"}], "owner": {"reputation": 13, "user_id": 10392358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6da34445f386c1baaa770916e963b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Daya", "link": "https://stackoverflow.com/users/10392358/daya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 52429294, "answer_count": 3, "score": 1, "last_activity_date": 1537535668, "creation_date": 1537459589, "last_edit_date": 1537461325, "question_id": 52429131, "link": "https://stackoverflow.com/questions/52429131/perl-newline-character-not-enforced-within-single-quoted-string-or-line-read-fr", "title": "Perl newline character not enforced within single quoted string (or line read from file)", "body": "<p>I have a Perl script to read a file line by line and some of the lines contain newline (\\n) character in it but it is not enforced.</p>\n\n<p>Here is the example I tried and not working for me</p>\n\n<pre><code>    my $var1 = 'Hello \\n world';\n    my $var2 = \"$var1\";\n    my $var3 = '$var1';\n\n    print \"    $var2 \\n\" ;\n    print $var3;\n</code></pre>\n\n<p>out put is </p>\n\n<pre><code>       Hello \\n world\n       $var1\n</code></pre>\n\n<p>but I want like below</p>\n\n<pre><code>        Hello\n        world\n</code></pre>\n\n<p>When I read a line from the file, the line has the newline character in it and that newline character needs to be enforced.</p>\n"}, {"tags": ["javascript", "perl", "datetime"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 2, "creation_date": 1537454353, "post_id": 52427646, "comment_id": 91798662, "body": "Can&#39;t you just make the same date in both languages and compare the timestamps?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1553757813, "last_edit_date": 1553757813, "creation_date": 1537455195, "answer_id": 52427955, "question_id": 52427646, "link": "https://stackoverflow.com/questions/52427646/is-perl-datetime-epoch-in-milliseconds-or-seconds/52427955#52427955", "title": "Is Perl DateTime epoch in milliseconds or seconds?", "body": "<p>In the context of DateTime, \"epoch\" refers to <a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow noreferrer\">Unix time</a>, which is the number of seconds that aren't leap seconds since 1970-01-01T00:00:00Z.</p>\n\n<pre><code>$ perl -MDateTime -e'CORE::say DateTime-&gt;from_epoch( epoch =&gt; 1 )'\n1970-01-01T00:00:01\n\n$ perl -MDateTime -e'CORE::say DateTime-&gt;from_epoch( epoch =&gt; 1000 )'\n1970-01-01T00:16:40\n</code></pre>\n\n<p>However, DateTime supports times with a resolution of nanosecond, so you could use the following to get a JavaScript timestamp.</p>\n\n<pre><code>my $js_time = $dt-&gt;epoch * 1000 + $dt-&gt;millisecond;\n</code></pre>\n\n<hr>\n\n<p>Of course, getting a value other than zero for the millisecond component assumes the DateTime object was created with a sufficiently precise time. That's not the case for </p>\n\n<pre><code>my $dt = DateTime-&gt;now();\n</code></pre>\n\n<p>because it uses <code>time</code> operator to obtain the current time. To get a higher-resolution timestamp, you could use the following:</p>\n\n<pre><code>use Time::HiRes qw( time );\n\nmy $dt = DateTime-&gt;from_epoch( epoch =&gt; time() );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1537455694, "post_id": 52427967, "comment_id": 91799529, "body": "So, what&#39;s the solution?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1537455227, "creation_date": 1537455227, "answer_id": 52427967, "question_id": 52427646, "link": "https://stackoverflow.com/questions/52427646/is-perl-datetime-epoch-in-milliseconds-or-seconds/52427967#52427967", "title": "Is Perl DateTime epoch in milliseconds or seconds?", "body": "<pre><code>$ perl -MDateTime -wE 'say DateTime-&gt;new( year =&gt; 1971 )-&gt;epoch'\n31536000\n$ bc &lt;&lt;&lt; 365*24*60*60\n31536000\n</code></pre>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 52427955, "answer_count": 2, "score": 2, "last_activity_date": 1553757813, "creation_date": 1537454240, "last_edit_date": 1592644375, "question_id": 52427646, "link": "https://stackoverflow.com/questions/52427646/is-perl-datetime-epoch-in-milliseconds-or-seconds", "title": "Is Perl DateTime epoch in milliseconds or seconds?", "body": "<p>I need to compare the timestamp given by my backend (which is in Perl) and the timestamp of by front-end (which is in JS), so I need to be sure that they both use the same time unit.</p>\n<p>For JS it's easy, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime\" rel=\"nofollow noreferrer\">quoting</a>:</p>\n<blockquote>\n<p>A number representing the <strong>milliseconds</strong> elapsed between 1 January 1970 00:00:00 UTC and the given date.</p>\n</blockquote>\n<p>For Perl, the <a href=\"https://metacpan.org/pod/DateTime#$dt-%3Eepoch()\" rel=\"nofollow noreferrer\">documentation</a> about <code>$dt-&gt;epoch()</code> says:</p>\n<blockquote>\n<p>Return the UTC epoch value for the datetime object. Datetimes before the start of the epoch will be returned as a negative number.</p>\n<p>The return value from this method is always an integer.</p>\n<p>Since the epoch does not account for leap seconds, the epoch time for 1972-12-31T23:59:60 (UTC) is exactly the same as that for 1973-01-01T00:00:00.</p>\n</blockquote>\n<p>To me, it's not clear if the returned integer is in milliseconds or seconds (in the second case I would need <a href=\"https://stackoverflow.com/a/5971324/4480180\">to convert JS epoch in seconds</a> or viceversa).</p>\n<p>Which one is correct?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 3, "creation_date": 1537452393, "post_id": 52427005, "comment_id": 91797256, "body": "the array you wrote is the same as (a,b,c,a,2,3,4,5,j,l,t,x,51). This is not how you build multidimensional arrays, you have to use references instead"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1537452855, "post_id": 52427005, "comment_id": 91797587, "body": "Also, your piece of code throws an error, so I guess you are not using <code>strict</code> nor <code>warnings</code>  you should always use them"}, {"owner": {"reputation": 21, "user_id": 10391781, "user_type": "registered", "profile_image": "https://graph.facebook.com/2144508755623488/picture?type=large", "display_name": "Amar Vinukonda", "link": "https://stackoverflow.com/users/10391781/amar-vinukonda"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1537507666, "post_id": 52427005, "comment_id": 91817216, "body": "I would like to thank you people for helping me out by taking of your time                    my @arr= ([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;],[&#39;a&#39;,2,3,4,5,&#39;j&#39;],[&#39;l&#39;],[&#39;t&#39;,&#39;x&#39;,51]);  #prints all elements for ($i=0; $i&lt;100; $i= $i+1) {     foreach my $arrRef(@arr[$i]) {      // gives me access to each of my subarray          foreach my $element(@$arrRef) { // gives me access to each of my element in a subarray             print &quot;$element\\n&quot;;         }     } }"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1537452886, "creation_date": 1537452886, "answer_id": 52427209, "question_id": 52427005, "link": "https://stackoverflow.com/questions/52427005/how-to-extract-subarrays-from-an-array-using-perl/52427209#52427209", "title": "how to extract subarrays from an array using perl", "body": "<p>First of all, like <a href=\"https://stackoverflow.com/questions/52427005/how-to-extract-subarrays-from-an-array-using-perl#comment91797256_52427005\">Flying_whale said in their comment</a>, in Perl  lists are always flattened. Multi-dimensional lists do not exist. That means</p>\n\n<pre><code>( 1, 2, 3, (4, 5) )\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>( 1, 2, 3, 4, 5 )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>( 1, (2, (3, (4, (5, () ) ) ) ) )\n</code></pre>\n\n<p>They all get flattened.</p>\n\n<blockquote>\n  <p>How do I extract the subarrays <strong>using their size</strong> or determine index of end of each element?</p>\n</blockquote>\n\n<p>You say you know the size of each element. In that case, you have several options.</p>\n\n<pre><code># index               0 1 2      3 4 5 6 7 8      9      10 11 12\nmy @long_array = ( qw(a b c), qw(a 2 3 4 5 j), qw(l), qw(t  x  51));\n\nmy @abc    = @long_array[0 .. 2];\nmy @a2345j = @long_array[3 .. 8];\nmy $l      = $long_array[9];\nmy @tx51   = @long_array[10, 11, 12];\n</code></pre>\n\n<p>This is mostly using <em>array slices</em>, which is why the <em>sigil</em> of <code>@long_array[0 .. 2]</code> is an <code>@</code>, and not a <code>$</code>, because the expression returns a <em>list</em> and not a <em>scalar</em>.</p>\n\n<p>An alternative is to use <a href=\"http://perldoc.perl.org/functions/splice.html\" rel=\"nofollow noreferrer\"><code>splice</code></a>, but that would alter your initial array.</p>\n\n<p>In either case you <strong>have to know the start and length</strong> of each individual sub list. Since there are no sub lists, this is the only way to get each piece of data. If you don't know both start index and length, you are out of luck.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10391781, "user_type": "registered", "profile_image": "https://graph.facebook.com/2144508755623488/picture?type=large", "display_name": "Amar Vinukonda", "link": "https://stackoverflow.com/users/10391781/amar-vinukonda"}, "edited": false, "score": 0, "creation_date": 1537507432, "post_id": 52427286, "comment_id": 91817127, "body": "Thanks a lot for helping me by taking you time i got what i exactly want and i shall post the solution"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 1, "last_activity_date": 1537459287, "last_edit_date": 1537459287, "creation_date": 1537453114, "answer_id": 52427286, "question_id": 52427005, "link": "https://stackoverflow.com/questions/52427005/how-to-extract-subarrays-from-an-array-using-perl/52427286#52427286", "title": "how to extract subarrays from an array using perl", "body": "<p>Parentheses just affect precedence. Perl will flatten what you think is array of arrays into a single array. In order to simulate an array or arrays, you would need to actually create an array of array references ([],[],[]) as shown below.</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @arr= (['a','b','c'],['a',2,3,4,5,'j'],['l'],['t','x',51]);\n\nprint $arr[0]-&gt;[1]; #prints b\nprint $arr[1]-&gt;[2]; #prints 3\n\n#prints all elements\nforeach my $arrRef(@arr) {\n    foreach my $element(@$arrRef) {\n        print \"$element\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12980753, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c95a769b1de8968e3b2bff135a01972e?s=128&d=identicon&r=PG", "display_name": "Vit", "link": "https://stackoverflow.com/users/12980753/vit"}, "is_accepted": false, "score": 0, "last_activity_date": 1582911198, "creation_date": 1582911198, "answer_id": 60456703, "question_id": 52427005, "link": "https://stackoverflow.com/questions/52427005/how-to-extract-subarrays-from-an-array-using-perl/60456703#60456703", "title": "how to extract subarrays from an array using perl", "body": "<p>some ways..</p>\n\n<pre><code>@var_ref_array = (\n            [ \"a\", \"b\",    \"c\" ],\n            [ \"d\", \"e\",    \"f\" ],\n            [ \"g\"] );\n\nfor my $i ( 0 .. $#{var_ref_array})\n{\n    for my $j ( 0 .. $#{var_ref_array-&gt;[$i]})\n    {\n        print \"$var_ref_array[$i][$j]\";\n    }    \n}\n\nprintf \"\\n\";\n\nfor(my $i=0; $i&lt;$#{var_ref_array}+1; $i++){ \n    for(my $j=0; $j&lt;$#{var_ref_array-&gt;[$i]}+1; $j++){\n        print \"$var_ref_array[$i][$j]\";\n    }\n}\n\nprintf \"\\n\";\n\nfor(my $i=0; $i&lt;scalar @var_ref_array; $i++){ \n    for(my $j=0; $j&lt;scalar @{$var_ref_array[$i]}; $j++){\n        print \"$var_ref_array[$i][$j]\";\n    }\n}\n\nprintf \"\\n\";\n\nfor(my $i=0; $i&lt;scalar @var_ref_array; $i++){ \n    for(my $j=0; $j&lt;scalar @{var_ref_array-&gt;[$i]}; $j++){\n        print \"$var_ref_array[$i][$j]\";\n    }\n}\n\nprintf \"\\n\";\n\nfor my $i ( 0 .. @var_ref_array)\n{\n    for my $j ( 0 .. @{$var_ref_array[$i]})\n    {\n        print \"$var_ref_array[$i][$j]\";\n    }    \n}\n\nprintf \"\\n\";\n\nfor my $i ( 0 .. @var_ref_array)\n{\n    for my $j ( 0 .. @{var_ref_array-&gt;[$i]})\n    {\n        print \"$var_ref_array[$i][$j]\";\n    }    \n}\n\nprintf \"\\n\";\n\nforeach my $array_(@var_ref_array){\n    foreach my $element(@$array_){\n        print \"$element\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10391781, "user_type": "registered", "profile_image": "https://graph.facebook.com/2144508755623488/picture?type=large", "display_name": "Amar Vinukonda", "link": "https://stackoverflow.com/users/10391781/amar-vinukonda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1332, "favorite_count": 0, "accepted_answer_id": 52427286, "answer_count": 3, "score": -2, "last_activity_date": 1582911198, "creation_date": 1537452263, "last_edit_date": 1537466351, "question_id": 52427005, "link": "https://stackoverflow.com/questions/52427005/how-to-extract-subarrays-from-an-array-using-perl", "title": "how to extract subarrays from an array using perl", "body": "<p>Suppose that I have this array. (Perl)</p>\n\n<pre><code>@arr= ((a,b,c),(a,2,3,4,5,j),(l),(t,x,51));\n</code></pre>\n\n<p><strong>How do I extract the subarrays? Also, how do I determine the index of each subarray?</strong>\nThanks in advance!</p>\n"}, {"tags": ["perl", "sftp"], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1537449672, "creation_date": 1537449672, "answer_id": 52426134, "question_id": 52425870, "link": "https://stackoverflow.com/questions/52425870/using-perl-i-want-to-filter-files-with-names-matching-a-particular-pattern-using/52426134#52426134", "title": "Using Perl I want to filter files with names matching a particular pattern using SFTP", "body": "<p>You can do it this way in Net::SFTP::Foreign module. I believe same should work for Net::SFTP.</p>\n\n<pre><code>my @files = map {$_-&gt;{'filename'}} grep {$_-&gt;{'filename'} =~ /.csv$/i} @{$con-&gt;ls(\"$dir\")};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1537450362, "creation_date": 1537450362, "answer_id": 52426353, "question_id": 52425870, "link": "https://stackoverflow.com/questions/52425870/using-perl-i-want-to-filter-files-with-names-matching-a-particular-pattern-using/52426353#52426353", "title": "Using Perl I want to filter files with names matching a particular pattern using SFTP", "body": "<p>Seems like there is no <code>wanted</code> option for the <a href=\"https://metacpan.org/pod/Net::SFTP#$sftp-%3Els($remote-%5B,-$subref-%5D)\" rel=\"nofollow noreferrer\"><code>ls</code></a> method. However, you can pass a callback. Here is an example using <a href=\"https://metacpan.org/pod/Text::Glob\" rel=\"nofollow noreferrer\"><code>Text::Glob</code></a> and a callback function <code>wanted()</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Net::SFTP;\nuse Text::Glob qw( match_glob );\n\nmy $con= Net::SFTP-&gt;new('host', user =&gt; 'user', password =&gt; 'pass');\nmy $dir = '.';  # specify the directory\n\nmy @files;    # store filenames here\n$con-&gt;ls($dir, sub { wanted( $_[0], '*.csv') } );\n\nsay for @files;  # print the matched filenames\n\nsub wanted {\n    my ( $info, $pat ) = @_;\n\n    my $filename = $info-&gt;{filename};\n\n    if (match_glob( $pat, $filename ) ) {\n        push @files, $filename;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 2922617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3f2d487c7c8caa6470aa2bfc26fa0e?s=128&d=identicon&r=PG&f=1", "display_name": "Wall", "link": "https://stackoverflow.com/users/2922617/wall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1537450362, "creation_date": 1537448793, "last_edit_date": 1537449292, "question_id": 52425870, "link": "https://stackoverflow.com/questions/52425870/using-perl-i-want-to-filter-files-with-names-matching-a-particular-pattern-using", "title": "Using Perl I want to filter files with names matching a particular pattern using SFTP", "body": "<p>I tried the below snippet but it always gets the name of all files present in the current directory.</p>\n\n<pre><code>my %args = (\"user\" =&gt; $user, \"password\" =&gt; $pass, \"warn\" =&gt; 0 );\n\n$con= Net::SFTP-&gt;new($server, %args);\n\n@files = $con-&gt;ls($dir, wanted =&gt;\"*.csv\");\n</code></pre>\n"}, {"tags": ["perl", "directory", "file-exists"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537425486, "post_id": 52418803, "comment_id": 91781134, "body": "Sounds like you want to see if particular files are somewhere in a directory tree but don&#39;t know the exact paths to them? If so, <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a> is your friend."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537429019, "post_id": 52418803, "comment_id": 91782978, "body": "@Shawn, I know where the directory is, I just want to know whether its possible to use .* in the middle of the path and why I can&#39;t declare my path in $dir. If I use Find::File, it will search all required files in the sub directory in the parent directory, and these files has the same name in the sub directories."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1537430723, "post_id": 52418803, "comment_id": 91783852, "body": "Okay. <code>-e</code> and everything else that takes a filename requires a path, relative or absolute, to a file. No wildcards like a shell would expand."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537432050, "post_id": 52418803, "comment_id": 91784530, "body": "@Shawn, if I want to find the file that I want in this parent directory, a/b/c/d/e/ , the time taken is so long. for example, my @ files123 = File::Find::Rule-&gt;file() \t\t\t    -&gt;name( &#39;1.txt&#39; )                             -&gt;in( &#39;a/b/c/d/e/&#39; ); and there is a risk, that i gain the directory path that I don&#39;t want. I want the file must be in this parent folder a/b/c/d/e/ and in this folder dou/you/1.txt , the full path should be a/b/c/d/e/f/g/h/dou/you/1.txt or a/b/c/d/e/k/l/m/dou/you/1.txt or  a/b/c/d/e/z/x/c/dou/you/1.txt  , the file 1.txt must have in one of the these full path."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537437740, "post_id": 52418803, "comment_id": 91787910, "body": "Maybe you could <a href=\"https://stackoverflow.com/posts/52418803/edit\">edit</a> your question and include a set of example directories and files with an explanation which ones exactly you want to find and which you don&#39;t."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537520679, "post_id": 52418803, "comment_id": 91823194, "body": "I&#39;m sorry, I don&#39;t understand. We need to see some examples."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537524100, "post_id": 52418803, "comment_id": 91825210, "body": "@simbabque , example like? I already put it in the question above, I need to find certain .txt files in the temporaryPath, but the directory of the files need to suit the pattern, I need to know whether the files exist or not in the given pattern as I think this is the fastest way to find the file, the only &quot;uncertain&quot; or &quot;.*&quot; path is between  a/b/c/d/e/ and dou/you/1.txt, if I try to find with normal using Find::File under a parent directory  a/b/c/d/e/, it will take about 10 mins and there is a chance that I stored unwanted path in the array cause 1.txt  is also exist in subdirectories."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537554219, "post_id": 52418803, "comment_id": 91841512, "body": "@Danial: Please don&#39;t add parts of the question to your code as comments."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537555477, "post_id": 52418803, "comment_id": 91842009, "body": "@Danial: I agree with <b>simbabque</b>. You say <i>&quot;there are a lot of different directories and I don&#39;t care about these&quot;</i>, so we really need to see examples of file paths that you want to include and those that you want to ignore."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1537556040, "post_id": 52418803, "comment_id": 91842248, "body": "@Danial: You&#39;ve rejected answers <a href=\"https://stackoverflow.com/a/52426040/622310\">from <b>ikegami</b></a> and <a href=\"https://stackoverflow.com/a/52426183/622310\">from me</a> for disparate reasons. It&#39;s looking more like your problem is more to do with general computer knowledge than with a specific Perl problem, and I think your post is off topic for Stack Overflow. I&#39;ve had to make several changes to your code so that I could read it clearly, and I hope that you will use a more consistent format in the future."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537630405, "post_id": 52418803, "comment_id": 91858455, "body": "I&#39;m really grateful that there are peoples that are willing to give their time and attention to answer my scripting problems. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537499314, "post_id": 52426040, "comment_id": 91815300, "body": "Hey @ikegami , thank you for your solution, care to explain this?my $target_pat = join &#39;|&#39;, map quotemeta, @targets; my $target_re = qr{/(?:$target_pat)\\z};"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1537500382, "post_id": 52426040, "comment_id": 91815495, "body": "i tried to run with your script above, but strangely enough it doesnt search through all the folder, for example it only go through &quot;a/b/c/d/e/k/l/m/$temporaryList&quot; when I say $file if not $file =~ $target_re;  , supposedly it must search through &quot;a/b/c/d/e/z/x/c/$temporaryList&quot; also, because the file only exist in f/g/h directory, why when I print out, it only search for certain folders only, note that, I have hundred directories, and directories such as f/g/h k/l/m and z/x/c is just examples."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537503333, "post_id": 52426040, "comment_id": 91816119, "body": "It builds a regex pattern. Print <code>$target_re</code> and see."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1537503372, "post_id": 52426040, "comment_id": 91816130, "body": "It searches through every subfolder of <code>a&#47;b&#47;c&#47;d&#47;e</code>. Contrary to your claim, it <i>will</i> find <code>a&#47;b&#47;c&#47;d&#47;e&#47;z&#47;x&#47;c&#47;dou&#47;you&#47;1.txt</code>"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537517247, "post_id": 52426040, "comment_id": 91821386, "body": "I still can&#39;t find the file. have tried different directory, it still doesnt search through a/b/c/d/e/f/  and a/b/c/d/e/k/, it only search in 1 directory per 1 directory, let say, there is this directories a/b/c/d/e/f/  , a/b/c/d/e/z/ , a/b/c/d/e/k/ and a/b/c/d/e/v/ in the first parent directory, and in the subdirectory of a/b/c/d/e/f/ , there is a/b/c/d/e/f/g ,  a/b/c/d/e/f/q ,  a/b/c/d/e/f/w, it just search 1 directory per level."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537518481, "post_id": 52426040, "comment_id": 91821961, "body": "I already found the problem, i tried to print files, it turns out that the directory is not there in the array, the folder is there , and when i tried symlink, my files (i cant put shift 2 due this comment editor) = File::Find::Rule-&gt;file-&gt;symlink-&gt;in($base_dir_qfn); , it is still not there, what is the problem, the folder is really exist, but it doesnt exist in the array."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537540588, "post_id": 52426040, "comment_id": 91834738, "body": "You&#39;ve provided absolutely no information to show it doesn&#39;t work, and the the test I just added to my answer shows that it does work."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537623420, "post_id": 52426040, "comment_id": 91856592, "body": "is there any other type of directory beside normal directory and symbolic links? because File::Find can&#39;t find wanted directory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537623533, "post_id": 52426040, "comment_id": 91856626, "body": "Symlinks aren&#39;t directories. I don&#39;t know what you mean by type of directories. And I can&#39;t help you if you provide absolutely no information about your problem."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537624006, "post_id": 52426040, "comment_id": 91856761, "body": "I have update the question above, I know symlinks are not directories, how can I explain this, the path itself contains whether symlinks and directories, but the folder is there, existed, there is subdirectories inside it, but when I use Find::File, it can&#39;t recognize it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537624121, "post_id": 52426040, "comment_id": 91856789, "body": "You update makes things clearer, but doesn&#39;t change the question at all; the answer is still the same"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537624535, "post_id": 52426040, "comment_id": 91856903, "body": "thank you. I know, the answer is the same, and I really grateful to you and Borodin."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537624729, "post_id": 52426040, "comment_id": 91856952, "body": "In you question, you said you wanted to search subdirectories. Are you now saying you also want to follow symlinks? If so, please adjust the question"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537624959, "post_id": 52426040, "comment_id": 91857016, "body": "no no, I mean, I can&#39;t find the directories that I want using File::Find, and it is not symlinks and also directories, which is weird."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1537625760, "last_edit_date": 1537625760, "creation_date": 1537449368, "answer_id": 52426040, "question_id": 52418803, "link": "https://stackoverflow.com/questions/52418803/find-whether-given-files-exist-in-a-directory/52426040#52426040", "title": "Find whether given files exist in a directory", "body": "<p><code>-e</code> is correctly reporting that there is no file with path <code>a/b/c/d/e/*/dou/you/1.txt</code> because there's no directory named <code>*</code> in <code>a/b/c/d/e</code>.</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nmy @targets = qw(\n    dou/you/1.txt\n    wanna/play/2.txt\n    with/me/3.txt\n    like/play/4.txt\n    anything/really/5.txt\n);\n\nmy $base_dir_qfn = 'a/b/c/d/e';\n\nmy @files = File::Find::Rule-&gt;file-&gt;in($base_dir_qfn);\n\nmy $target_pat = join '|', map quotemeta, @targets;\nmy $target_re = qr{/(?:$target_pat)\\z};\n\nfor my $file (@files) {\n   say $file if $file =~ $target_re;\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ mkdir -p a/b/c/d/e/f/g/h/dou/you;    touch a/b/c/d/e/f/g/h/dou/you/1.txt\n$ mkdir -p a/b/c/d/e/k/l/m/dou/you;    touch a/b/c/d/e/k/l/m/dou/you/1.txt\n$ mkdir -p a/b/c/d/e/k/l/m/wanna/play; touch a/b/c/d/e/k/l/m/wanna/play/2.txt\n$ mkdir -p a/b/c/d/e/z/x/c/wanna/play; touch a/b/c/d/e/z/x/c/wanna/play/2.txt\n$ mkdir -p a/b/c/d/e/f/g/h/with/me;    touch a/b/c/d/e/f/g/h/with/me/3.txt\n$ mkdir -p a/b/c/d/e/z/x/c/with/me;    touch a/b/c/d/e/z/x/c/with/me/3.txt\n$ perl a.pl\na/b/c/d/e/f/g/h/dou/you/1.txt\na/b/c/d/e/f/g/h/with/me/3.txt\na/b/c/d/e/k/l/m/dou/you/1.txt\na/b/c/d/e/k/l/m/wanna/play/2.txt\na/b/c/d/e/z/x/c/wanna/play/2.txt\na/b/c/d/e/z/x/c/with/me/3.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537498888, "post_id": 52426183, "comment_id": 91815229, "body": "I tried to download File::Globstar and use lib &#39;somepath&#39; , but this problem emerged,&quot;dpgettext&quot; is not exported by the Locale::Messages module ,&quot;dnpgettext&quot; is not exported by the Locale::Messages module, I have googled it but found no solution. @Borodin"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1537520852, "post_id": 52426183, "comment_id": 91823304, "body": "Sounds like your version of Locale::Messages could be out of date. Run <code>perl -MLocale::Messages\\ 99</code> on your terminal and tell us which version number it says. The newest one is 1.29. However, that&#39;s quite unlikely, as <a href=\"https://github.com/gflohr/libintl-perl/commit/bb704c9a3b9b33a59ff0195707cfd3c91a6f5852\" rel=\"nofollow noreferrer\">it was added in 2008</a> and must have gone in in 1.17 if I read the github release page correctly."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537527224, "post_id": 52426183, "comment_id": 91826947, "body": "@simbabque , I tried to run, but it can&#39;t locate it because I use , use lib&quot;&quot;, to store the globstar module in my download folder, and I cant add it to Perl directory, there is restriction."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1537527311, "post_id": 52426183, "comment_id": 91827005, "body": "@DanialHaris add the <code>-I=&lt;your lib directory&gt;</code> flag (captial i) to the command to add an additional <code>lib</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537532984, "post_id": 52426183, "comment_id": 91830263, "body": "@Danial: Computer programs can be hard to describe, and you need to be as unambiguous as possible. Stack Overflow provides <i>Markdown</i> to format your posts, and you should use it to the fullest extent to explain yourself clearly. There is an excellent help page <a href=\"https://stackoverflow.com/editing-help\"><b>Markdown Editing Help</b></a> and you should study and apply it."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537836419, "post_id": 52426183, "comment_id": 91919300, "body": "@simbabque, you are correct, the module that I downloaded is outdated, Locale::Messages, the problem is fixed."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1537449810, "creation_date": 1537449810, "answer_id": 52426183, "question_id": 52418803, "link": "https://stackoverflow.com/questions/52418803/find-whether-given-files-exist-in-a-directory/52426183#52426183", "title": "Find whether given files exist in a directory", "body": "<p>It sounds like you need the\n<a href=\"https://metacpan.org/pod/File::Globstar\" rel=\"nofollow noreferrer\"><code>File::Globstar</code></a> module. It implements the equivalent of the shell <em>globstar</em> extension which will allow two asterisks <code>**</code> in the pattern to match any string, including path separators</p>\n\n<p>It could look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse File::Globstar 'globstar';\n\nmy @paths = qw{\n    dou/you/1.txt\n    wanna/play/2.txt\n    with/me/3.txt\n    like/play/4.txt\n    anything/really/5.txt\n};\n\nfor my $path ( @paths ) {\n\n    say for globstar \"a/b/c/d/e/**/$path;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537910549, "creation_date": 1537424401, "last_edit_date": 1537756397, "question_id": 52418803, "link": "https://stackoverflow.com/questions/52418803/find-whether-given-files-exist-in-a-directory", "title": "Find whether given files exist in a directory", "body": "\n\n<p>I want to know whether a file exists or not in a given directory.</p>\n\n<p>I need to find certain .txt files in the temporaryPath, but the directory of the files need to suit the pattern, I need to know whether the files exist or not in the given pattern as I think this is the fastest way to find the file, the only \"uncertain\" or \".*\" path is between a/b/c/d/e/ and dou/you/1.txt, if I try to find with normal using Find::File under a parent directory a/b/c/d/e/, it will take about 10 mins and there is a chance that I stored unwanted path in the array cause 1.txt is also exist in subdirectories.</p>\n\n<p>e.g. Wanted specific directories</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>a/b/c/d/e/f/g/h/dou/you/1.txt\na/b/c/d/e/k/l/m/dou/you/1.txt\n\na/b/c/d/e/k/l/m/wanna/play/2.txt\na/b/c/d/e/z/x/c/wanna/play/2.txt\n\na/b/c/d/e/f/g/h/with/me/3.txt\na/b/c/d/e/z/x/c/with/me/3.txt\n</code></pre>\n\n<h3>Perl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nmy @temporaryPath = qw(\n    dou/you/1.txt\n    wanna/play/2.txt\n    with/me/3.txt\n    like/play/4.txt\n    anything/really/5.txt\n);\n\nforeach my $temporaryList ( @temporaryPath ) {\n\n    my $dir = \"a/b/c/d/e/\" . \"*\" . \"/$temporaryList\";\n\n    if ( -e $dir ) {\n        print \" exist :) $temporaryList\\n\";\n    }\n    else {\n        print \" not exist :( $temporaryList\\n\";\n    }\n}\n</code></pre>\n\n<p>I used <code>.*</code> in <code>$dir</code> because there are a lot of different directories in between the path full path\n, e.g. <code>f/g/h</code>, <code>k/l/m</code>, or <code>z/x/c</code>.</p>\n\n<p>The result is this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>not exist :( dou/you/1.txt\nnot exist :( wanna/play/2.txt\nnot exist :( with/me/3.txt\nnot exist :( like/play/4.txt\nnot exist :( anything/really/5.txt\n</code></pre>\n\n<p>meaning that the <code>$dir</code> can not read <code>a/b/c/d/e/.*/</code></p>\n\n<p>Is there any way?</p>\n"}, {"tags": ["perl", "cron", "system"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1537437621, "post_id": 52417651, "comment_id": 91787846, "body": "Which user is running the cron? The <code>~</code> directory might not be what you think it is. The same goes for <code>$HOME</code>. Better to specify it explicitly with the user you want."}, {"owner": {"reputation": 115, "user_id": 2192111, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/GI4wo.jpg?s=128&g=1", "display_name": "Jon T", "link": "https://stackoverflow.com/users/2192111/jon-t"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1537447752, "post_id": 52417651, "comment_id": 91793947, "body": "The user that executes this is the only user on the system, well that I am aware of. I also made a change to the path where the Perl script is executed to confirm just now by setting $HOME, reflected above and the script ran."}, {"owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "edited": false, "score": 0, "creation_date": 1537502234, "post_id": 52417651, "comment_id": 91815868, "body": "System accounts are users too. <code>cat &#47;etc&#47;passwd | wc -l</code> gives 40 users for my single user system. Standard advice with cron is to be explicit, don&#39;t assume environment like path or user variables. The actual user run depends on how you line it up, using crontab, /etc/crontab or /etc/cron.d."}, {"owner": {"reputation": 115, "user_id": 2192111, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/GI4wo.jpg?s=128&g=1", "display_name": "Jon T", "link": "https://stackoverflow.com/users/2192111/jon-t"}, "edited": false, "score": 0, "creation_date": 1537554439, "post_id": 52417651, "comment_id": 91841614, "body": "That was one of the things I changed yesterday, I set it from absolute to using env variables to see if it would still run and it did. But for some reason it won&#39;t run the last command within the Perl script at the bottom. Even got the email, just not the execution of the push."}], "owner": {"reputation": 115, "user_id": 2192111, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/GI4wo.jpg?s=128&g=1", "display_name": "Jon T", "link": "https://stackoverflow.com/users/2192111/jon-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537447687, "creation_date": 1537418057, "last_edit_date": 1537447687, "question_id": 52417651, "link": "https://stackoverflow.com/questions/52417651/sub-command-in-perl-not-executing-when-executed-by-cron", "title": "sub command in Perl not executing when executed by cron", "body": "<p>I have two Perl scripts: one pulls data from one system and writes to a CSV file and the other will execute against that data by pushing out a series of files once the first script gathers the list of IP addresses to push the files to.</p>\n\n<p>When I run this manually at the command line, I can see the results of the first command generated, get the email, and then I can see the last command run with the results and the email from that. But today when the first script was run by cron, I only got the email with the list of IP addresses and not the results from the files pushed to the hosts. The time it takes for the command to run varies but it usually takes 1-2 minutes. </p>\n\n<p>This is the last few lines that run in the first Perl script. An email is sent with attachments if there are hosts that meet the pull criteria and once that executes, the last line executes the push with reference to the output CSV file that contains the host IPs.</p>\n\n<pre><code>    system( \"echo '' | mailx -s \\\"$payloademailsub\\\" -a $payloadoutputFile -a $wlsinfoFile $emails &lt; /dev/null\" );\n}\nelse {\n    system( \"echo '' | mailx -s \\\"$payloademailsubnodup\\\" $emails &lt; /dev/null\" );\n}\n\nsystem(\"/bin/bash /usr/application/co/bin/webLogicPayload.bash &lt; /usr/application/co/reports/pushPayload/weblogicHosts.csv\");\n</code></pre>\n\n<p>This is the cron entry. The source command is required to pull in local custom variables and the app_setup is an application related file.</p>\n\n<pre><code>0 15 * * 1-5 . $HOME/app_setup; source ~/.bashrc; $HOME/application/co/weblogicHostReport.pl\n</code></pre>\n\n<p>Assuming this is cron-related since it will run manually, is there anything I should set in the cron entry or change in the Perl script that would help execute this completely?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1537456363, "post_id": 52416470, "comment_id": 91799932, "body": "You <i>may</i> be satisfied that you see where &#39;$run &gt; $plan&#39; (file1,system B123, and in file2, systemB123), and you <i>may</i> be happy to see that it displays 6x that systems are matching\u2026 but that later is misleading. Your variables are scoped! <code>%hash</code> is being (re)defined <code>foreach $csv_file</code>, meaning any thing you read in before for <code>path&#47;tofile1</code> is gone when you loop over the next <code>$csv_file</code>, <code>path&#47;tofile2</code>. Same happens with the variables mentioned after the <code>while \u2026</code>. You compare <code>$system eq $system</code>, that will always be true, like &quot;x&quot; eq &quot;x&quot;. You do not check <code>file1 $system</code> to <code>file2 $system</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "edited": false, "score": 0, "creation_date": 1537413245, "post_id": 52416890, "comment_id": 91777282, "body": "Thank you very much for the guidance. Is there any way you could suggest doing this without using a module like DBD::CSV pr Tie::CSV_File? Because as per the criteria, we are not to download any modules through a CPAN client (specific grading rubric ;( ). Hence the fact that I didn&#39;t use CSV::Hashify on my code."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "edited": false, "score": 1, "creation_date": 1537433469, "post_id": 52416890, "comment_id": 91785307, "body": "@FranceMadrid You can still use the same basic approach, with your own CSV reading code."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1537412173, "creation_date": 1537412173, "answer_id": 52416890, "question_id": 52416470, "link": "https://stackoverflow.com/questions/52416470/how-to-compare-two-columns-of-hash-table/52416890#52416890", "title": "How to compare two columns of hash table", "body": "<p>Normally for this sort of thing, I suggest <a href=\"https://metacpan.org/pod/DBD::CSV\" rel=\"nofollow noreferrer\">DBD::CSV</a> and treating the csv files like database tables. But time for something different: using  <a href=\"https://metacpan.org/pod/Tie::CSV_File\" rel=\"nofollow noreferrer\">Tie::CSV_File</a> to make the files look like 2D arrays. Install the module with your favorite CPAN client if your OS's package manager doesn't provide it. (<code>split</code> is just not robust enough for general purpose CSV parsing, and there's lots of better options available on CPAN.)</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse Tie::CSV_File;\n\ntie my @file1, \"Tie::CSV_File\", \"file1.csv\";\ntie my @file2, \"Tie::CSV_File\", \"file2.csv\";\n\nmy %runs = map { $_-&gt;[0] =&gt; $_-&gt;[3] } @file1[1 .. $#file1];\n\nfor my $row (@file2[1 .. $#file2]) {\n  my $sys = $row-&gt;[0];\n  if (exists $runs{$sys}) {\n    my $diff = $runs{$sys} - $row-&gt;[3];\n    say \"$sys run difference: $diff\";\n  }\n}\n</code></pre>\n\n<p>Running this on your sample input gives:</p>\n\n<pre><code>A123 run difference: 2\nB123 run difference: 2\nC345 run difference: 0\n</code></pre>\n\n<p>It iterates over the first CSV file, storing the System and run columns as a hash table, and then iterates over the second one, looking up the second one's System in that hash and getting the difference of the two run values.</p>\n"}], "owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537436970, "creation_date": 1537408736, "last_edit_date": 1592644375, "question_id": 52416470, "link": "https://stackoverflow.com/questions/52416470/how-to-compare-two-columns-of-hash-table", "title": "How to compare two columns of hash table", "body": "<p>I have two CSV files:</p>\n<h3>File1</h3>\n<pre><code>System,name,plan,run\nA123,mev,28,12\nB123,fsa,31,45\nC345,ghd,52,34\n</code></pre>\n<h3>File2</h3>\n<pre><code>System,name,plan,run\nA123,mev,20,10\nB123,fsa,32,43\nC345,ghd,54,34\n</code></pre>\n<p>I want to be able to find out which system identifiers are shared by the two files, and of those systems what is the difference between the number of tests 'run'. For example, <code>File1</code> and <code>File2</code> both have the system <code>C345</code> in common, and the difference between their run count is zero (both have 34 run).</p>\n<p>My code:</p>\n<pre><code>my @csv_file = qw| path/tofile1 path/tofile2 |;\n\nopne $f, '&lt;', $csv_file, or die;\n\nforeach $csv_file ( @csv_file ) {\n\n    my %hash;\n\n    while ( my $line = &lt;$f&gt; ) {\n\n        my ($system, $name, $plan, $run) = split(&quot;,&quot;, $line);\n        $hash{$system} = [ $owner, $plan, $run ];\n\n        if ( $run &gt; $plan ) {\n            print &quot;More run than planned $system\\n&quot;; # prints B123\n        }\n\n        if ( $system eq $system ) {\n            print &quot;Matching systems: $system\\n&quot;; # prints 'System, A123, B123, C345'\n        }\n    }\n}\n</code></pre>\n<p>I have been able to print out which systems exist in both files, but cannot figure out how to take those recurring systems and compare their 'run' values with one another.</p>\n"}]