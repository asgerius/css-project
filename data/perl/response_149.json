[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1510784301, "post_id": 47318263, "comment_id": 81587659, "body": "Numbers are detected with <code>\\d</code>, so multiple digits is <code>\\d+</code> (<code>+</code> being the modifier for &quot;one or more&quot;)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1510784326, "post_id": 47318263, "comment_id": 81587674, "body": "What is <code>$test</code> before the substitution? What&#39;s the desired output?"}, {"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "edited": false, "score": 2, "creation_date": 1510784415, "post_id": 47318263, "comment_id": 81587726, "body": "Hi, and welcome to StackOverflow. Your question needs a bit more detail, please provide the sample input in <code>$test</code> and the full output you&#39;re receiving, and you should always format your code with the available markdown. Please check this link for more info: <a href=\"https://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1510784586, "post_id": 47318263, "comment_id": 81587802, "body": "Works fine for me: <a href=\"https://ideone.com/m2UiSX\" rel=\"nofollow noreferrer\">ideone.com/m2UiSX</a>"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1510784710, "post_id": 47318263, "comment_id": 81587856, "body": "It sounds like you&#39;re doing <code>printf $test;</code> instead of <code>print $test;</code>. <code>%d</code> is a <code>printf</code> format operator, and it gets replaced with an argument to <code>printf</code>, which defaults to <code>0</code>."}, {"owner": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "edited": false, "score": 0, "creation_date": 1510784868, "post_id": 47318263, "comment_id": 81587950, "body": "That is correct, Barmar. I am doing printf. Is there anyway to use printf and still get %d string in the output?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "edited": false, "score": 1, "creation_date": 1510785253, "post_id": 47318408, "comment_id": 81588121, "body": "Changed to printf &quot;%s\\n&quot;, $test; It works as expected. Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "edited": false, "score": 2, "creation_date": 1510786620, "post_id": 47318408, "comment_id": 81588633, "body": "@Pri, <code>print &quot;$test\\n&quot;;</code> and <code>say $test;</code> are more idiomatic. No need to invoke <code>printf</code> for this."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "edited": false, "score": 0, "creation_date": 1510838872, "post_id": 47318408, "comment_id": 81612445, "body": "@Pri Always put <code>use strict;</code> and <code>use warnings;</code> at the top of your Perl scripts. <code>warnings</code> would have told you <code>Argument &quot;-S%d&quot; isn&#39;t numeric in printf at ...</code>"}], "tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1510786689, "last_edit_date": 1510786689, "creation_date": 1510784903, "answer_id": 47318408, "question_id": 47318263, "link": "https://stackoverflow.com/questions/47318263/perl-replace-with-d/47318408#47318408", "title": "perl replace with %d", "body": "<p>The substitution works as intended, the problem is most likely with how you're printing it. You should do:</p>\n\n<pre><code>print \"$test\\n\";\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>printf \"%s\\n\", $test;\n</code></pre>\n\n<p>The output you're getting would result if you did:</p>\n\n<pre><code>printf $test;\n</code></pre>\n\n<p>The first argument to <code>printf</code> is a format string, and <code>%d</code> is for formatting an integer argument. With no corresponding argument, it defaults to <code>0</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 47318408, "answer_count": 1, "score": 1, "last_activity_date": 1510786689, "creation_date": 1510784218, "last_edit_date": 1510784736, "question_id": 47318263, "link": "https://stackoverflow.com/questions/47318263/perl-replace-with-d", "title": "perl replace with %d", "body": "<p>I am a newbie to Perl. I am trying to replace a string with '-S%d' string.\nBut in the output I see -S0 instead of -S%d. How to deal with that?\nCode kind of looks like this:</p>\n\n<pre><code>$test =~ s/-S1234/-S%d/;\n</code></pre>\n\n<p>For further clarification - </p>\n\n<pre><code>$test = 'This_is_StackOverflow-S11152017'\n</code></pre>\n\n<p>I wish to get following output -</p>\n\n<pre><code>'This_is_StackOverflow-S%d'\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl"], "comments": [{"owner": {"reputation": 69, "user_id": 3496003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702073a882994df937af9e0541bee7f1?s=128&d=identicon&r=PG", "display_name": "jshakil", "link": "https://stackoverflow.com/users/3496003/jshakil"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1510783286, "post_id": 47317739, "comment_id": 81587163, "body": "I don&#39;t receive any warnings, I changed the formatting of the code."}], "answers": [{"tags": [], "owner": {"reputation": 2580, "user_id": 988525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/487zi.jpg?s=128&g=1", "display_name": "Ian McGowan", "link": "https://stackoverflow.com/users/988525/ian-mcgowan"}, "is_accepted": true, "score": 1, "last_activity_date": 1510786249, "last_edit_date": 1510786249, "creation_date": 1510785236, "answer_id": 47318482, "question_id": 47317739, "link": "https://stackoverflow.com/questions/47317739/how-to-format-etc-passwd-file-using-perl-formatting/47318482#47318482", "title": "How to format /etc/passwd file using perl formatting", "body": "<p>You're not looping over the /etc/passwd file, you're getting back the first set of fields into your variables, but then only using the first.  Consider this:</p>\n\n<pre><code>#!/usr/bin/perl\n$username = `cut -d: -f1 /etc/passwd`;\nprint $username;\n</code></pre>\n\n<p>Instead try perl myscript.pl &lt; /etc/passwd with this script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nmy $username;\nmy $UID;\nmy $name;\n\nformat =\n@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n$username,        $UID,             $name\n.\n\nwhile (&lt;&gt;) {\n    ($username, undef, $UID, undef, $name, undef) = split(':');\n    write();\n}\n</code></pre>\n\n<p>Output looks like:</p>\n\n<pre><code>~/tmp$ perl t2.pl &lt; /etc/passwd\nroot            | 0               | root\ndaemon          | 1               | daemon\nbin             | 2               | bin\nsys             | 3               | sys\nsync            | 4               | sync\ngames           | 5               | games\n</code></pre>\n\n<p>If you don't give your format a name, STDOUT is the default.  And you can read in each line from /etc/passwd and process individually.</p>\n"}], "owner": {"reputation": 69, "user_id": 3496003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/702073a882994df937af9e0541bee7f1?s=128&d=identicon&r=PG", "display_name": "jshakil", "link": "https://stackoverflow.com/users/3496003/jshakil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 47318482, "answer_count": 1, "score": 0, "last_activity_date": 1510786249, "creation_date": 1510782067, "last_edit_date": 1510783613, "question_id": 47317739, "link": "https://stackoverflow.com/questions/47317739/how-to-format-etc-passwd-file-using-perl-formatting", "title": "How to format /etc/passwd file using perl formatting", "body": "<p>I'm trying to format the /etc/passwd file by using perl formatting</p>\n\n<p>This is what I have come up with so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\n\nformat MYFORMAT =\n@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n$username,        $UID,             $name\n.\n\n$username = `cut -d: -f1 /etc/passwd`;\n$UID = `cut -d: -f3 /etc/passwd`;\n$name = `cut -d: -f5 /etc/passwd`;\n\n$~ = \"MYFORMAT\";\nwrite;\n</code></pre>\n\n<p>I receive no warnings or errors. The formatting works, but the issue is, it only displays the first line of the etc/passwd file. I only get root, 0, and root as the Username, UID and name respectively.</p>\n\n<p>I need all usernames, UIDs, and names printed for each column. I don't know what I'm doing wrong, because when I run the bash command to get only the usernames inside the terminal, it displays all of them. It won't do it inside of the script though.</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 7, "creation_date": 1510773760, "post_id": 47315360, "comment_id": 81582130, "body": "From your link to the docs, &quot;It returns the first row of data from the statement.&quot;"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1510779829, "post_id": 47315360, "comment_id": 81585403, "body": "In addition, I wouldn&#39;t avoid use of the <code>prepare</code> method for any statement that will be repeatedly called.  <code>selectrow</code> is better used for one-off satements."}], "answers": [{"comments": [{"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1510862224, "post_id": 47325350, "comment_id": 81628155, "body": "I had fooled myself into thinking that any of these DBI calls could be used in either single-record mode, or multi-record with &quot;while&quot;.  Used things like <code>fetchrow_array</code> for years in both modes.  I think not knowing the internals related to &quot;prepare&quot; led me to wrong assumptions.  Help much appreciated!  <code>selectall_array</code> will be my new jam."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1510823133, "last_edit_date": 1510823133, "creation_date": 1510822609, "answer_id": 47325350, "question_id": 47315360, "link": "https://stackoverflow.com/questions/47315360/how-can-i-get-perl-dbis-selectrow-hashref-to-return-a-new-row-each-iteration/47325350#47325350", "title": "How can I get Perl DBI&#39;s selectrow_hashref to return a new row each iteration?", "body": "<blockquote>\n  <p>Is <code>selectrow_hashref</code> only intended to retrieve a single record?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>It doesn't seem that way <a href=\"https://metacpan.org/pod/DBI#selectrow_hashref\" rel=\"nofollow noreferrer\">in the doc</a>.</p>\n</blockquote>\n\n<p>Well, that documentation says:</p>\n\n<blockquote>\n  <p>It returns the first row of data from the statement.</p>\n</blockquote>\n\n<p>Which seems pretty clear to me.</p>\n\n<p>Are you looking for <a href=\"https://metacpan.org/pod/DBI#selectall_hashref\" rel=\"nofollow noreferrer\"><code>selectall_hashref</code></a> instead?</p>\n\n<p><strong>Update:</strong> Actually, I think you want <a href=\"https://metacpan.org/pod/DBI#selectall_array\" rel=\"nofollow noreferrer\"><code>selectall_array</code></a>:</p>\n\n<pre><code>my $select='SELECT * FROM table';\nforeach my $user_ref ($dbh-&gt;selectall_array($select, { Slice =&gt; {} })) {\n    # $user_ref is a hash ref\n    say $user_ref-&gt;{some_column};\n}\n</code></pre>\n"}], "owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 1, "accepted_answer_id": 47325350, "answer_count": 1, "score": -3, "last_activity_date": 1510823133, "creation_date": 1510772727, "question_id": 47315360, "link": "https://stackoverflow.com/questions/47315360/how-can-i-get-perl-dbis-selectrow-hashref-to-return-a-new-row-each-iteration", "title": "How can I get Perl DBI&#39;s selectrow_hashref to return a new row each iteration?", "body": "<p>I am trying to use DBI's <code>selectrow_hashref</code> instead of <code>fetchrow_hashref</code> in order to save a couple lines of code, but it keeps returning the same row of data over and over.</p>\n\n<pre><code>my $select=\"SELECT * FROM table\";\nwhile (my ($user_ref) = $dbh-&gt;selectrow_hashref()) {\n    # $user_ref is the same each time!\n}\n</code></pre>\n\n<p>When I use <code>fetchrow_hashref</code>, everything is fine, and each iteration I get new data.</p>\n\n<pre><code>my $select=\"SELECT * FROM table\";\nmy $sth = $dbh-&gt;prepare($select) || die \"prepare: $select: $DBI::errstr\";\n$sth-&gt;execute() || die \"execute: $select: $DBI::errstr\";\nwhile (my ($user_ref) = $sth-&gt;fetchrow_hashref()) {\n    # works great, new data in $user_ref each iteration\n}\n</code></pre>\n\n<p>Pray tell, what am I doing wrong? Is <code>selectrow_hashref</code> only intended to retrieve a single record?  It doesn't seem that way <a href=\"http://search.cpan.org/~timb/DBI-1.637/DBI.pm#selectrow_hashref\" rel=\"nofollow noreferrer\">in the doc</a>.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 3544, "user_id": 1105417, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/67ea803f8efb6767f739030bf84cd207?s=128&d=identicon&r=PG", "display_name": "Ynhockey", "link": "https://stackoverflow.com/users/1105417/ynhockey"}, "edited": false, "score": 0, "creation_date": 1510760336, "post_id": 47311420, "comment_id": 81573620, "body": "Can you post your DB connection here? The issue probably comes from there."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3544, "user_id": 1105417, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/67ea803f8efb6767f739030bf84cd207?s=128&d=identicon&r=PG", "display_name": "Ynhockey", "link": "https://stackoverflow.com/users/1105417/ynhockey"}, "edited": false, "score": 0, "creation_date": 1510761025, "post_id": 47311420, "comment_id": 81574168, "body": "What @Ynhockey means is, we&#39;d like to see the Perl code that creates your database handle. Without the real username and password, obviously. Please <a href=\"https://stackoverflow.com/posts/47311420/edit\">edit</a> the question to include that. It would also be useful to know how the table is set up. The results of <code>SHOW CREATE TABLE</code> and the default database collation would help, too."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1510763800, "post_id": 47311420, "comment_id": 81576228, "body": "Converting that output to <a href=\"https://en.wikipedia.org/wiki/Code_page_437\" rel=\"nofollow noreferrer\">DOS character set</a> and decoding the result as UTF-8, it appears that the input is <a href=\"http://vietunicode.sourceforge.net/charset/\" rel=\"nofollow noreferrer\">VNI encoded</a>. For example <code>a\u251c&#187;</code> is <code>&quot;a\\x{C3}\\x{AF}&quot;</code> in CP-437, which is <code>&quot;a\\x{EF}&quot;</code> after UTF-8 decode, which is <code>\u1ea1</code> (LATIN SMALL LETTER A WITH DOT BELOW) in the VNI encoding."}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 1, "creation_date": 1510768859, "post_id": 47311420, "comment_id": 81579311, "body": "Do you the mysql_enable_utf8 attribute when connecting to db?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510775089, "post_id": 47311420, "comment_id": 81582798, "body": "Do you pass <code>mysql_enable_utf8mb4 =&gt; 1</code> to <code>connect</code>? And how do you encode the output to you terminal?"}, {"owner": {"reputation": 11, "user_id": 8191584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733dc7faab803c728f9557683d10f76c?s=128&d=identicon&r=PG&f=1", "display_name": "chocoboon", "link": "https://stackoverflow.com/users/8191584/chocoboon"}, "edited": false, "score": 0, "creation_date": 1510806510, "post_id": 47311420, "comment_id": 81594116, "body": "It is mysql_enable_utf8 setting is for insert. SELECT command need to set also? Database collection already change to utf8_unicode_ci still the same."}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1510844984, "post_id": 47311420, "comment_id": 81617137, "body": "See also this question on how to display utf8 chars in windows cmd window: <a href=\"https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how\" title=\"unicode characters in windows command line how\">stackoverflow.com/questions/388490/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8191584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733dc7faab803c728f9557683d10f76c?s=128&d=identicon&r=PG&f=1", "display_name": "chocoboon", "link": "https://stackoverflow.com/users/8191584/chocoboon"}, "edited": false, "score": 0, "creation_date": 1510806361, "post_id": 47319797, "comment_id": 81594079, "body": "I try. same result output."}], "tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": false, "score": 0, "last_activity_date": 1510793335, "creation_date": 1510793335, "answer_id": 47319797, "question_id": 47311420, "link": "https://stackoverflow.com/questions/47311420/perl-print-vietnamese-characters/47319797#47319797", "title": "Perl print vietnamese characters", "body": "<p>You need to add <code>-C</code> to the cmdline. <code>perldoc perlrun</code></p>\n\n<p>Or add <code>#!/usr/bin/perl -C</code> as first line to enable Unicode output.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8191584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733dc7faab803c728f9557683d10f76c?s=128&d=identicon&r=PG&f=1", "display_name": "chocoboon", "link": "https://stackoverflow.com/users/8191584/chocoboon"}, "is_accepted": false, "score": 0, "last_activity_date": 1510806269, "creation_date": 1510806269, "answer_id": 47321589, "question_id": 47311420, "link": "https://stackoverflow.com/questions/47311420/perl-print-vietnamese-characters/47321589#47321589", "title": "Perl print vietnamese characters", "body": "<p>I did try set at DBI connetion with the following code. But still the same result. </p>\n\n<pre><code>my $dsn= \"dbi:mysql:database=$database:$host;mysql_connnect_timeout=15;user=$user;password=$password\";\nmy $DBI = DBI-&gt;connect($dsn, {mysql_enable_utf8 =&gt; 1}) or die \"Unable to connect: $DBI::errstr\\n\";\n$DBI-&gt;do(\"SET NAMES utf8\");\n$DBI-&gt;do(\"SET CHARACTER SET utf8\"); \n</code></pre>\n\n<p>After that i copy out the string and test without connection to database. I'm using the Encode for print. Only the <code>cp850</code> and <code>cp437</code> can convert atleast the symbol <code>\u00f4</code></p>\n\n<pre><code>use utf8;\nuse Encode 'encode';\n\n$address=\"QL37, Ph\u1ed1 V\u00f4i, tt. V\u00f4i, L\u1ea1ng Giang, B\u1eafc Giang, Vietnam\";\n\nprint $address.\"\\n\";\n# QL37, Ph? V\u2320i, tt. V\u2320i, L?ng Giang, B?c Giang, Vietnam\nprint encode cp850 =&gt; $address.\"\\n\";\n# QL37, Ph? V\u00f4i, tt. V\u00f4i, L?ng Giang, B?c Giang, Vietnam\nprint encode cp1252 =&gt; $address.\"\\n\";\n# QL37, Ph? V\u2320i, tt. V\u2320i, L?ng Giang, B?c Giang, Vietnam\nprint encode cp437 =&gt; $address.\"\\n\";\n# QL37, Ph? V\u00f4i, tt. V\u00f4i, L?ng Giang, B?c Giang, Vietnam\nprint encode cp1258 =&gt; $address.\"\\n\";\n# QL37, Ph? V\u2320i, tt. V\u2320i, L?ng Giang, B?c Giang, Vietnam\nprint encode VISCII =&gt; $address.\"\\n\";\n# QL37, Ph? V\u2320i, tt. V\u2320i, L?ng Giang, B?c Giang, Vietnam\n</code></pre>\n\n<p>Actually the main problem is after i process the data and need insert back to database. The print command is just for my debug. i have try to insert the address back to msyql, the string will become weird also. </p>\n"}], "owner": {"reputation": 11, "user_id": 8191584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733dc7faab803c728f9557683d10f76c?s=128&d=identicon&r=PG&f=1", "display_name": "chocoboon", "link": "https://stackoverflow.com/users/8191584/chocoboon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1510806269, "creation_date": 1510760125, "last_edit_date": 1592644375, "question_id": 47311420, "link": "https://stackoverflow.com/questions/47311420/perl-print-vietnamese-characters", "title": "Perl print vietnamese characters", "body": "<p>I tried to read the vietnamese address from Mysql databases through perl program. But it display some special characters which is not recognize. When i see the string in phpMyAdmin is ok. And using php to retrieve and print the string also no problem. Just only using perl to print out the string will become weird.</p>\n<p><strong>Original word</strong></p>\n<pre><code>QL37, Ph\u1ed1 V\u00f4i, tt. V\u00f4i, L\u1ea1ng Giang, B\u1eafc Giang, Vietnam \n</code></pre>\n<p><strong>After print become</strong></p>\n<pre><code>QL37, Pho\u251c\u00ed Vo\u251c\u00f3i, tt. Vo\u251c\u00f3i, La\u251c\u00bbng Giang, Ba\u251c\u2310c Giang, Vietnam\n</code></pre>\n<p><strong>The database structure</strong></p>\n<pre><code>CREATE TABLE `address` (\n    `Address_Id` int(11) NOT NULL,\n    `Coordinate_Lat` float(15,6) NOT NULL,\n    `Coordinate_Long` float(15,6) NOT NULL,\n    `Address` varchar(300) COLLATE utf8_unicode_ci NOT NULL\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\n</code></pre>\n<p><strong>Perl Code</strong></p>\n<pre><code>my $sql = &quot;SELECT * FROM `address`&quot;;\nmy $sth = $DBIconnect-&gt;prepare($sql);\n$sth-&gt;execute or die &quot;SQL Error: $DBIconnect::errstr\\n&quot;;\nwhile (my $row = $sth-&gt;fetchrow_hashref) {\n    print $row-&gt;{'Address'};\n}\n</code></pre>\n<p><strong>Print Screen</strong></p>\n<p><a href=\"https://i.stack.imgur.com/TIJrw.jpg\" rel=\"nofollow noreferrer\">LINK1 - PHPMyAdmin look fine</a></p>\n<p><a href=\"https://i.stack.imgur.com/NKYCx.png\" rel=\"nofollow noreferrer\">LINK2 - Retrieve and print out error</a></p>\n"}, {"tags": ["perl", "perl-data-structures"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510760547, "post_id": 47311313, "comment_id": 81573795, "body": "It&#39;s not the interpolation. If you remove the <code>$_</code> from the string it still throws the error."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510760619, "post_id": 47311313, "comment_id": 81573841, "body": "Putting parentheses inside the BLOCK will help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1427008"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1510760637, "post_id": 47311313, "comment_id": 81573860, "body": "@H&#229;konH&#230;gland so I could just write <code>{; &quot;number $_&quot; =&gt; 2*$_ }</code> instead, right?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1510760682, "post_id": 47311313, "comment_id": 81573896, "body": "@jlovegren Yes correct :)"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1510761123, "post_id": 47311635, "comment_id": 81574246, "body": "@\u0421\u0443\u0445\u043e\u043927, The error message is more precise with <code>+{ ... }</code>, but it&#39;s the same error: a comma is expected after the end of the expression."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 14, "last_activity_date": 1510857759, "last_edit_date": 1510857759, "creation_date": 1510760715, "answer_id": 47311635, "question_id": 47311313, "link": "https://stackoverflow.com/questions/47311313/why-no-interpolation-within-map-block/47311635#47311635", "title": "Why no interpolation within `map` BLOCK?", "body": "<p><code>map</code> has two syntax:</p>\n\n<pre><code>map BLOCK LIST\nmap EXPR, LIST\n</code></pre>\n\n<p>Perl must determine which syntax you are using. The problem is that both <code>BLOCK</code> and <code>EXPR</code> can start with <code>{</code> because <code>{ ... }</code> can be the hash constructor (e.g. <code>my $h = { a =&gt; 1, b =&gt; 2 };</code>).</p>\n\n<p>That means that Perl's grammar is ambiguous. When an ambiguity is encountered, <code>perl</code> guesses what you mean after looking ahead a little. In your situation, it guessed wrong. It guessed <code>{</code> was the start of a hash constructor instead of the start of a block. You will need to disambiguate explicitly.</p>\n\n<p>The following are convenient ways to disambiguate blocks and hash constructors:</p>\n\n<pre><code>+{ ... }   # Not a valid block, so must be a hash constructor.\n{; ... }   # Perl looks head, and sees that this must be a block.\n</code></pre>\n\n<p>So in your case, you could use</p>\n\n<pre><code>my %b = map {; \"number $_\" =&gt; 2*$_ } @a;\n</code></pre>\n\n<hr>\n\n<p>Related: <a href=\"https://stackoverflow.com/q/42100478/589924\">Difference between returning +{} or {} in perl from a function, and return ref or value</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1427008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 47311635, "answer_count": 1, "score": 9, "last_activity_date": 1510857759, "creation_date": 1510759867, "last_edit_date": 1510760742, "question_id": 47311313, "link": "https://stackoverflow.com/questions/47311313/why-no-interpolation-within-map-block", "title": "Why no interpolation within `map` BLOCK?", "body": "<p>This throws an error in Perl v5.20:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @a = (2,3,9);\nmy %b = map { \"number $_\" =&gt; 2*$_ } @a;\n</code></pre>\n\n<p>Error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>syntax error at a.pl line 4, near \"} @a\"\nExecution of a.pl aborted due to compilation errors.\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy @a = (2,3,9);\nmy %b = map { \"number \".$_ =&gt; 2*$_ } @a;\n</code></pre>\n\n<p>Why is interpolation of <code>$_</code> disallowed within the <code>map</code> BLOCK?</p>\n"}, {"tags": ["perl", "unix", "sed", "tcl", "vi"], "comments": [{"owner": {"reputation": 1, "user_id": 5452480, "user_type": "registered", "profile_image": "https://graph.facebook.com/873212016078214/picture?type=large", "display_name": "SrEe LaxMi", "link": "https://stackoverflow.com/users/5452480/sree-laxmi"}, "edited": false, "score": 1, "creation_date": 1510759506, "post_id": 47311151, "comment_id": 81572920, "body": "&#39;ABC&quot;\\ } \\n else { &#39;.... to be replaced with &#39;ABC&quot;\\} else { &#39;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510759701, "post_id": 47311151, "comment_id": 81573077, "body": "Welcome to Stack Overflow. In order to help you, we need to know what you have tried exactly. Please <a href=\"https://stackoverflow.com/posts/47311151/edit\">edit</a> your question and include the Perl and sed commands that you tried to do, and how they didn&#39;t work. Please also take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take a look at the markdown help to learn how to format your question properly. Both lists and especially the code formatting are relevant to your question. Your problem includes exact character sequences, where every space matters. If you don&#39;t format it properly, we cannot see what&#39;s going on."}, {"owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "edited": false, "score": 0, "creation_date": 1510759842, "post_id": 47311151, "comment_id": 81573206, "body": "It is hard to understand your question because it appear you want you want to replace one string with the same string.  I think you have a typo in your question.  Please edit.  Also, please include the perl or sed code you tried to we can help you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510767000, "post_id": 47311151, "comment_id": 81578281, "body": "If you&#39;re tidying code, then there&#39;s usually a code-tidying tool that is semantically correct."}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": -1, "last_activity_date": 1510764127, "creation_date": 1510764127, "answer_id": 47312858, "question_id": 47311151, "link": "https://stackoverflow.com/questions/47311151/replace-a-text-with-n-character-only-at-a-particular-line-of-the-text-with-esca/47312858#47312858", "title": "Replace a text with \\n character only at a particular line of the text with escape identifier", "body": "<p>Perhaps you can try</p>\n\n<pre><code>sed '/}/N;/\\nelse {/s/\\n/ /'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12685, "user_id": 488796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bec8145ec10828cf4988b6b2005bafa?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lewerin", "link": "https://stackoverflow.com/users/488796/peter-lewerin"}, "is_accepted": false, "score": -1, "last_activity_date": 1510805585, "last_edit_date": 1510805585, "creation_date": 1510775719, "answer_id": 47316165, "question_id": 47311151, "link": "https://stackoverflow.com/questions/47311151/replace-a-text-with-n-character-only-at-a-particular-line-of-the-text-with-esca/47316165#47316165", "title": "Replace a text with \\n character only at a particular line of the text with escape identifier", "body": "<p>Tcl solution:</p>\n\n<pre><code>set text [string map [list \"\\\\\\n}\\nelse {\" \"\\\\\\n} else {\"] $text]\n</code></pre>\n\n<p>Replaces all occurrences. Does not write back to variable: you need to assign back as in the example above.</p>\n\n<p>Documentation:\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/string.htm\" rel=\"nofollow noreferrer\" title=\"Manipulate strings\">string</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5452480, "user_type": "registered", "profile_image": "https://graph.facebook.com/873212016078214/picture?type=large", "display_name": "SrEe LaxMi", "link": "https://stackoverflow.com/users/5452480/sree-laxmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1510805585, "creation_date": 1510759444, "last_edit_date": 1510760701, "question_id": 47311151, "link": "https://stackoverflow.com/questions/47311151/replace-a-text-with-n-character-only-at-a-particular-line-of-the-text-with-esca", "title": "Replace a text with \\n character only at a particular line of the text with escape identifier", "body": "<p>I have tried <code>sed</code> and <code>perl</code> commands to replace the text but I didn't get expected results. \nFor Example : \nI want to replace </p>\n\n<pre><code>ABC\"\\ \n}\nelse {\n....\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>ABC\"\\ \n} else {\n....\n</code></pre>\n\n<p>How can I do this? \nChallenges faced are as follows:</p>\n\n<ol>\n<li>As it contains escape identifier and <code>\\n</code> I am unable to search the pattern also. </li>\n<li>It is not the beginning or end of the file to truncate the particular line and replace.</li>\n<li>Tried to change with respect to a line number in a file but my requirement is to do for multiple files hence, line number is not constant.</li>\n<li>Though I can search for <code>else</code>. I'm unable to replace the <code>\\n</code> </li>\n<li>I have tried the inputs given in <a href=\"https://stackoverflow.com/questions/8519585/removing-new-line-after-a-particular-text-via-bash-awk-sed-perl\">Removing new line after a particular text via bash/awk/sed/perl</a>\nbut they do not serve my purpose. </li>\n</ol>\n\n<p>Please give your inputs and help me if there is any other approach for this.</p>\n"}, {"tags": ["xml", "perl", "xpath", "xml-twig"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1510757134, "creation_date": 1510757134, "answer_id": 47310356, "question_id": 47310146, "link": "https://stackoverflow.com/questions/47310146/xpath-is-not-working-with-xmltwigxpathelt/47310356#47310356", "title": "Xpath is not working with XML::Twig::XPath::Elt", "body": "<p>The <code>//ChildB/@key</code> xpath expression means that it starts at the root element and looks in any element for an element <code>ChildB</code> and the attribute <code>@key</code>.</p>\n\n<p>It's confusing that your twig <code>$constraint[0]</code> is <strong>not</strong> completely taken out of the tree. It's like a view on some part of the full document tree, so the <code>//</code> actually looks in the full tree. It starts at root of the document, not at the <code>&lt;Node key=\"22\"&gt;</code> element.</p>\n\n<p>You need to tell your <code>find</code> to start the current element by using the <code>.</code>.</p>\n\n<pre><code>#                                     V\nmy $child_key = $constraint[0]-&gt;find('.//ChildB/@key');\n</code></pre>\n\n<p>Now your output is only</p>\n\n<pre><code>Key2\n</code></pre>\n"}], "owner": {"reputation": 5810, "user_id": 2547017, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8916fcee33c7955aa821e07f5648f8a9?s=128&d=identicon&r=PG", "display_name": "Ishan Bhatt", "link": "https://stackoverflow.com/users/2547017/ishan-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47310356, "answer_count": 1, "score": 1, "last_activity_date": 1510757134, "creation_date": 1510756548, "question_id": 47310146, "link": "https://stackoverflow.com/questions/47310146/xpath-is-not-working-with-xmltwigxpathelt", "title": "Xpath is not working with XML::Twig::XPath::Elt", "body": "<p>I have following XML.</p>\n\n<pre><code>&lt;Path&gt;\n  &lt;To&gt;\n    &lt;My&gt;\n      &lt;Node key=\"11\"&gt;\n        &lt;ChildA&gt;1A&lt;/ChildA&gt;\n        &lt;ChildB key=\"Key1\"&gt;1B&lt;/ChildB&gt;\n        &lt;ChildC&gt;\n            &lt;ChildD&gt;ValD&lt;/ChildD&gt;\n        &lt;/ChildC&gt;\n      &lt;/Node&gt;\n      &lt;Node key=\"22\"&gt;\n        &lt;ChildA&gt;2A&lt;/ChildA&gt;\n        &lt;ChildB key=\"Key2\"&gt;2B&lt;/ChildB&gt;\n        &lt;ChildC&gt;\n            &lt;ChildD&gt;ValD&lt;/ChildD&gt;\n        &lt;/ChildC&gt;\n      &lt;/Node&gt;\n    &lt;/My&gt;\n  &lt;/To&gt;\n&lt;/Path&gt;\n</code></pre>\n\n<p>And I am trying to parse this xml using XML::Twig::XPath.\nFollowing is my code to parse it and extract element from it using XPath syntax.</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse XML::Twig::XPath;  #Issue with this shit as this thing was up to data but XML::XPath was not installed. So I did cpanm XML::XPath\nuse XML::Twig;\nuse Data::Dumper;\nmy @xml;\n\n$xml[0] = q|&lt;Path&gt;\n  &lt;To&gt;\n    &lt;My&gt;\n      &lt;Node key=\"11\"&gt;\n        &lt;ChildA&gt;1A&lt;/ChildA&gt;\n        &lt;ChildB key=\"Key1\"&gt;1B&lt;/ChildB&gt;\n        &lt;ChildC&gt;\n            &lt;ChildD&gt;ValD&lt;/ChildD&gt;\n        &lt;/ChildC&gt;\n      &lt;/Node&gt;\n      &lt;Node key=\"22\"&gt;\n        &lt;ChildA&gt;2A&lt;/ChildA&gt;\n        &lt;ChildB key=\"Key2\"&gt;2B&lt;/ChildB&gt;\n        &lt;ChildC&gt;\n            &lt;ChildD&gt;ValD&lt;/ChildD&gt;\n        &lt;/ChildC&gt;\n      &lt;/Node&gt;\n    &lt;/My&gt;\n  &lt;/To&gt;\n&lt;/Path&gt;|;\n\nmy $twig = XML::Twig::XPath-&gt;new(pretty_print =&gt; 'indented')-&gt;parse($xml[0]);\n\n#Finding the whole Node, using xpath. This shit also works if you have Twig, not XPath.\nmy @constraint = $twig-&gt;findnodes('/Path/To/My/Node[@key=\"22\"]');\nsay $constraint[0]-&gt;sprint;\nsay ref($constraint[0]);\n\nmy $child_key = $constraint[0]-&gt;find('//ChildB/@key');\nsay $child_key;\n</code></pre>\n\n<p>$constraint[0] rightfully prints the XML Node.</p>\n\n<p>And I expect $child_key to be <strong>Key2</strong> but it turns out to be <strong>Key1Key2</strong> </p>\n\n<p>What I could be possibly doing wrong? If I do full XPath search it is giving me corrct output.</p>\n"}, {"tags": ["perl", "digits"], "answers": [{"comments": [{"owner": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "edited": false, "score": 0, "creation_date": 1510756499, "post_id": 47310036, "comment_id": 81570534, "body": "I had to do  <code>$num += 1;</code> and <code>$user = $user . $num;</code> for some reason. But yes the parenthesis was what I missed."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "edited": false, "score": 0, "creation_date": 1510756559, "post_id": 47310036, "comment_id": 81570592, "body": "This should work fine without having to do the <code>$num += 1; ...</code> but ok, if you managed then it is fine, will delete the answer."}, {"owner": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "edited": false, "score": 0, "creation_date": 1510756654, "post_id": 47310036, "comment_id": 81570656, "body": "The <code>num++</code> would give me back <code>bandit00</code> instead of <code>bandit1</code>, I really don;t know why, as I said. Just started learning perl ;)"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1510759314, "post_id": 47310036, "comment_id": 81572768, "body": "the problem with <code>$num++</code> is that it returns the value of <code>$num</code> <i>before</i> the increment. <code>$num + 1</code> is ok if you don&#39;t need it later, otherwise use <code>++$num</code>"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 2, "last_activity_date": 1510810737, "last_edit_date": 1510810737, "creation_date": 1510756223, "answer_id": 47310036, "question_id": 47309235, "link": "https://stackoverflow.com/questions/47309235/perl-captured-digits-from-string-are-always-1/47310036#47310036", "title": "Perl captured digits from string are always 1", "body": "<p>You can try this and see if it works. if it helps, I will explain everything. I cannot test this myself right now.</p>\n\n<pre><code>use strict;   # always use strict\nuse warnings; # always use warnings\n\nmy $username = \"bandit0\"; #try bandit1 to ensure it prints 1 and ls instead\nmy $command = \"\";\n\nsub next_command {\n    my ($user) = @_;\n    my ($num) = $user =~ /(\\d+)/;\n    print \"$num\\n\";\n    if ($num == 0){\n       return \"cat readme\";\n    }\n\n    elsif ($num == 1){\n        return \"ls\";\n    }\n}\n\nsub next_level {\n    my ($user) = @_;\n    my ($num) = $user =~ /(\\d+)/;\n    $user =~ s/\\d//g;\n    $user = $user . ++$num;\n     return $user;\n}\n\n$command = next_command($username);\nprint $command . \"\\n\";\n$username = next_level($username);\n$command = next_command($username);\nprint $command . \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "edited": false, "score": 0, "creation_date": 1510764147, "post_id": 47312693, "comment_id": 81576453, "body": "Impressive, using a substitution I think? Could you maybe elaborate on the simpler version. Because to me it is not that obvious what it does."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "edited": false, "score": 1, "creation_date": 1510764221, "post_id": 47312693, "comment_id": 81576502, "body": "Replaces trailing digits (<code>\\d+\\z</code>) with the sum of <code>$1</code> (the captured string (the digits)) and <code>1</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1510763986, "last_edit_date": 1510763986, "creation_date": 1510763678, "answer_id": 47312693, "question_id": 47309235, "link": "https://stackoverflow.com/questions/47309235/perl-captured-digits-from-string-are-always-1/47312693#47312693", "title": "Perl captured digits from string are always 1", "body": "<p>The match operator in scalar context evaluates to a boolean that indicates whether the match succeeded or not.</p>\n\n<pre><code>my $success = $user =~ /(\\d+)/;\n</code></pre>\n\n<p>The match operator in list context returns the captured strings (or <code>1</code> if there are no captures) on success and an empty list on error.</p>\n\n<pre><code>my ($num) = $user =~ /(\\d+)/;\n</code></pre>\n\n<p>You used the former, but you want the latter. That gives you the following (after a few other small fixes):</p>\n\n<pre><code>sub next_level {\n    my ($user) = @_;\n    my ($num) = $user =~ /(\\d+)\\z/;\n    $user =~ s/\\d+\\z//g;\n    $user .= ++$num;\n    return $user;\n}\n</code></pre>\n\n<p>But that approach is complicated and inefficient. Simpler solution:</p>\n\n<pre><code>sub next_level {\n    my ($user) = @_;\n    $user =~ s/(\\d+)\\z/ $1 + 1 /e;\n    return $user;\n}\n</code></pre>\n"}], "owner": {"reputation": 1524, "user_id": 7505329, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/buqbA.jpg?s=128&g=1", "display_name": "Ludisposed", "link": "https://stackoverflow.com/users/7505329/ludisposed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47312693, "answer_count": 2, "score": 0, "last_activity_date": 1510810737, "creation_date": 1510754044, "last_edit_date": 1510757338, "question_id": 47309235, "link": "https://stackoverflow.com/questions/47309235/perl-captured-digits-from-string-are-always-1", "title": "Perl captured digits from string are always 1", "body": "<p>On my journey to start learning <code>perl</code>...</p>\n\n<p>I encountered this funny behaviour, and can't seem to wrap my head around it.</p>\n\n<pre><code>my $username = \"bandit0\";\nmy $command = \"\";\n\nsub next_command {\n    my ($user) = @_;\n    my $num = $user =~ /(\\d+)/;\n    print \"$num\\n\";\n    if ($num == 0){\n        return \"cat readme\";\n    }\n    elsif ($num == 1){\n        return \"ls\";\n    }\n}\n\nsub next_level {\n    my ($user) = @_;\n    my $num = $user =~ /(\\d+)/;\n    $user =~ s/\\d//g;\n    $user = $user . $num++;\n    return $user;\n}\n\n$command = next_command($username);\nprint $command . \"\\n\";\n$username = next_level($username);\n$command = next_command($username);\nprint $command . \"\\n\";\n</code></pre>\n\n<p>After running this small perl program, I would expect something like this:</p>\n\n<pre><code>0\ncat readme\n1\nls\n</code></pre>\n\n<p>However I get something like this...</p>\n\n<pre><code>1\nls\n1\nls\n</code></pre>\n\n<p>I don't understand why, at first string <code>bandit0</code> the <code>$num</code> will be <code>1</code> instead of <code>0</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510751922, "post_id": 47307722, "comment_id": 81567168, "body": "It depends what you mean by <i>optimize</i>. You can make it more <i>concise</i> by using certain language features. The whole loop can be condensed into <code>print &quot;$.=====&gt;$_&quot; while &lt;$fh&gt;;</code> and you don&#39;t have to do the <code>close $fh</code> because it will automatically close the filehandle when <code>$fh</code> goes out of scope. You should include <code>or die $!</code> to catch errors from your <code>open</code> (and in theory also your <code>close</code>, as that could fail, but we&#39;ve just removed it anyway). But that&#39;s really a codereview, which should go on <a href=\"https://codereview.stackexchange.com\">Code Review</a>, not here."}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1510779733, "post_id": 47307722, "comment_id": 81585343, "body": "Maybe we can benchmark between the print with variable interpolaton, as in posted question, and print with variable concatenation as in print $. .&#39;====&gt;&#39;.$_;"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1510819018, "post_id": 47307722, "comment_id": 81599209, "body": "If you redirect the output to a file instead of printing to the terminal, it may run faster, especially if it is a large file, since the terminal does not need to render everything....  <code>perl my_script.pl &gt; output</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511443380, "post_id": 47307722, "comment_id": 81867465, "body": "What exactly is the problem? Is your program running too slowly? Is it taking up too much memory?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1510750345, "creation_date": 1510750345, "answer_id": 47307949, "question_id": 47307722, "link": "https://stackoverflow.com/questions/47307722/how-to-optimize-the-following-perl-code/47307949#47307949", "title": "How to optimize the following perl code?", "body": "<p>No. </p>\n\n<p>When you're optimising, you look at things that are less efficient ways of accomplishing the goal. That's often algorithmic, and looking at where looping is occurring is a good start.</p>\n\n<p>But then there's resource usage optimisation - disk IO is often the most expensive operation - but you <em>need</em> to do all the IO that you're doing, and you're not doing any redundant IO.</p>\n\n<p>And sometimes - system calls or 'shelling out' to other binaries (via <code>system</code> or backticks) can incur overhead. But you don't do that either. </p>\n\n<p>Basically - your code is just not complicated enough to have any significant inefficiencies. </p>\n"}], "owner": {"reputation": 73, "user_id": 8876275, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f28f67fb1073441d98d09480457dc87?s=128&d=identicon&r=PG&f=1", "display_name": "DSP", "link": "https://stackoverflow.com/users/8876275/dsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 47307949, "answer_count": 1, "score": 2, "last_activity_date": 1510751573, "creation_date": 1510749739, "last_edit_date": 1510751573, "question_id": 47307722, "link": "https://stackoverflow.com/questions/47307722/how-to-optimize-the-following-perl-code", "title": "How to optimize the following perl code?", "body": "<p>In the below code I tried to print every line along with its line number. Is there any other way to optimize the below code using Perl?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nopen my $fh,\"&lt;\",\"exercise.csv\";\nwhile(&lt;$fh&gt;)\n{\n   print \"$.=====&gt;$_\";\n}\nclose $fh;\n</code></pre>\n"}, {"tags": ["perl", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 7685, "user_id": 1503237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/piBNb.jpg?s=128&g=1", "display_name": "Matthias Ronge", "link": "https://stackoverflow.com/users/1503237/matthias-ronge"}, "edited": false, "score": 0, "creation_date": 1510749184, "post_id": 47307349, "comment_id": 81565202, "body": "Using braces on the inner array definition does not change anything, the error remains. If I access the element using <code>$data{&#39;a&#39;}</code>, I get the other error message, which is <code>Type of arg 1 to main::p must be hash (not hash element)</code>. Removing the prototype declaration actually makes it work, but prints an ungly warning message: <code>main::p() called too early to check prototype at ex2.pl line 17.</code> I do not want to remove the <code>use warnings;</code> as many of them seem helfpul to me. Is it also possible to fix this without removing the prototype, <b>or</b> to keep warnings enabled without this specific one?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 7685, "user_id": 1503237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/piBNb.jpg?s=128&g=1", "display_name": "Matthias Ronge", "link": "https://stackoverflow.com/users/1503237/matthias-ronge"}, "edited": false, "score": 1, "creation_date": 1510749521, "post_id": 47307349, "comment_id": 81565481, "body": "Remove both mentions of the prototype."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1510749617, "last_edit_date": 1510749617, "creation_date": 1510748655, "answer_id": 47307349, "question_id": 47306924, "link": "https://stackoverflow.com/questions/47306924/passing-an-inner-array-to-a-function/47307349#47307349", "title": "Passing an inner array to a function", "body": "<p>Your definition of the structure is wrong. Inner hashes need to use <code>{}</code>, not <code>()</code>.</p>\n\n<pre><code>my %data = (\n    a =&gt; {\n        x =&gt; 'Hello',\n        y =&gt; 'World'\n    },\n    b =&gt; {\n        x =&gt; 'Foo',\n        y =&gt; 'Bar'\n    }\n);\n</code></pre>\n\n<p>Also, to get a single hash element, use <code>$data{'a'}</code> (or even <code>$data{a}</code>), not <code>%data{'a'}</code>.</p>\n\n<p>Moreover, see <a href=\"https://stackoverflow.com/q/297034/1030675\">Why are Perl 5&#39;s function prototypes bad?</a> on why not to use prototypes. After correcting the syntax as above, the code works even without the prototype. If you really need the prototype, use <code>%</code>, not <code>\\%</code>. But you clearly don't know exactly what purpose prototypes serve, so don't use them.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1510751079, "creation_date": 1510751079, "answer_id": 47308176, "question_id": 47306924, "link": "https://stackoverflow.com/questions/47306924/passing-an-inner-array-to-a-function/47308176#47308176", "title": "Passing an inner array to a function", "body": "<p>There are no arrays in your code. And there are no method calls in your code.</p>\n\n<p>Your hash is defined incorrectly. You cannot embed hashes inside other hashes. You need to use hash references. Like this:</p>\n\n<pre><code>my %data = (\n    'a' =&gt; {\n        x =&gt; 'Hello',\n        y =&gt; 'World'\n    },\n    'b' =&gt; {\n        x =&gt; 'Foo',\n        y =&gt; 'Bar'\n    }\n);\n</code></pre>\n\n<p>Note, I'm using <code>{ ... }</code> to define your inner hashes, not <code>( ... )</code>.</p>\n\n<p>That still gives us an error though.</p>\n\n<blockquote>\n  <p>Type of arg 1 to main::p must be hash (not hash element) at passhash line 20, near \"})\"</p>\n</blockquote>\n\n<p>If that's unclear, we can always try adding <code>use diagnostics</code> to get more details of the error:</p>\n\n<blockquote>\n  <p>(F) This function requires the argument in that position to be of a certain type.  Arrays must be @NAME or @{EXPR}.  Hashes must be %NAME or %{EXPR}.  No implicit dereferencing is allowed--use the {EXPR} forms as an explicit dereference.  See perlref.</p>\n</blockquote>\n\n<p>Parameter type definitions come from prototypes. Your prototype is <code>\\%</code>. People often think that means a hash reference. It doesn't. It means, \"give me a real hash in this position and I'll take a reference to it and pass that reference to the subroutine\".</p>\n\n<p>(See, this is why people say that prototypes shouldn't be used in Perl - they often don't do what you think they do.)</p>\n\n<p>You're not passing a hash. You're passing a hash reference. You can fix it by dereferencing the hash in the subroutine call.</p>\n\n<pre><code>p(%{$data{a}});\n</code></pre>\n\n<p>But that's a really silly idea. Take a hash reference and turn it into a hash, so that Perl can take its reference to pass it into a subroutine.</p>\n\n<p>What you really want to do is to change the prototype to just <code>$</code> so the subroutine accepts a hash reference. You can then check that you have a hash reference using <code>ref</code>.</p>\n\n<p>But that's still overkill. People advise against using Perl prototypes for very good reasons. Just remove it.</p>\n"}], "owner": {"reputation": 7685, "user_id": 1503237, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/piBNb.jpg?s=128&g=1", "display_name": "Matthias Ronge", "link": "https://stackoverflow.com/users/1503237/matthias-ronge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47308176, "answer_count": 2, "score": 0, "last_activity_date": 1510751079, "creation_date": 1510747414, "question_id": 47306924, "link": "https://stackoverflow.com/questions/47306924/passing-an-inner-array-to-a-function", "title": "Passing an inner array to a function", "body": "<p>I am trying to pass an inner array to a function in Perl.\nHere is my Perl program.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %data = (\n    'a' =&gt; (\n        x =&gt; 'Hello',\n        y =&gt; 'World'\n    ),\n    'b' =&gt; (\n        x =&gt; 'Foo',\n        y =&gt; 'Bar'\n    )\n);\n\n#prototype\nsub p(\\%);\n\n{ #main\n    p(%data{'a'}); # should print \"Hello Wolrd\".\n}\n\nsub p(\\%) {\n    print \"$_[0]{x} $_[0]{y}\\n\";\n}\n</code></pre>\n\n<p>Instead, I get the following error: <code>Type of arg 1 to main::p must be hash (not key/value hash slice)</code>.</p>\n\n<p>This works:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#prototype\nsub p(\\%);\n\n{ #main\n    my %a = (\n        x =&gt; 'Hello',\n        y =&gt; 'World'\n    );\n    p(%a);\n}\n\nsub p(\\%) {\n    print \"$_[0]{x} $_[0]{y}\\n\";\n}\n</code></pre>\n\n<p>So there must be something wrong with the method call. But what? The content of <em>a</em> is a hash, so the first character after <code>p(</code> must be <code>%</code> (I tried <code>p($data{'a'});</code> too, but it leaves me with another error (which seems logical, since the content of <em>a</em> isn\u2019t a scalar). I do not have to manually create a reference to the hash and dereference because I declare the function prototype. What am I missing?</p>\n"}, {"tags": ["regex", "perl", "printing", "push", "tr"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1510737765, "last_edit_date": 1510737765, "creation_date": 1510737345, "answer_id": 47303415, "question_id": 47302936, "link": "https://stackoverflow.com/questions/47302936/why-is-perl-not-printing-all-regex-matches-in-a-multi-line-regex/47303415#47303415", "title": "Why is Perl not printing all regex matches in a multi-line regex?", "body": "<p>By using <code>while &lt;text&gt;</code>, you are reading a new file from the file handle on each iteration of the loop. You need to loops, one iterating over the lines, and the inner loop to iterate over the matches.</p>\n\n<pre><code>while (my $line = &lt;text&gt;) {\n    push @matches, $1 while $line\n        =~ m{\n            ([TR]{6}\n            JFUA\n            [ABR]\n            GAFG\n            ( [LOP]{2,3} )\n            [KW]{2,5}\n            (??{ $2 =~ tr/LOP/ABC/r })\n            AAAABB[UXZ])\n        }xg;\n}\n</code></pre>\n\n<p>I also removed <code>{1}</code> as it's useless, used $1 instead of $&amp; because $&amp; imposes a performance penatly on all the matching you do in a program; and removed the <code>/g</code> and added the <code>g</code> to the right place (i.e. next to <code>}x</code>).</p>\n\n<p>When testing, I copied'n'pasted the input from here, i.e. I have all the characters in one line. If your input is different, please use the code formatting for it, not quotation.</p>\n"}], "owner": {"reputation": 3, "user_id": 8943835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/994d58835b720bdd9f0299496d2dbcdd?s=128&d=identicon&r=PG&f=1", "display_name": "funotonah", "link": "https://stackoverflow.com/users/8943835/funotonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 47303415, "answer_count": 1, "score": 0, "last_activity_date": 1510737765, "creation_date": 1510735652, "question_id": 47302936, "link": "https://stackoverflow.com/questions/47302936/why-is-perl-not-printing-all-regex-matches-in-a-multi-line-regex", "title": "Why is Perl not printing all regex matches in a multi-line regex?", "body": "<p>I have this text (shortened version of my original text):</p>\n\n<blockquote>\n  <p><strong>mytext.txt</strong>\n  BAHJSBUBGUCYHAGSBUCAGSUCBASBCYHUBXZCZPZHCUIHAUISHCIUJXZJCBZYAUSGHDYUAGWEBWHBHJASBHJASCXZBUYTRTRTRJFUARGAFGOOPWWKBBCAAAABBXHABSDAUSBCZAAAAAAAAACGAFAXHJBJHXZCXZCCZCXZUCAGSUCBASBCYHUBXZCZPZHCUIHAUISHCIUJXZJCBZYAUSGHDYUAGWEBWHBHJASBHJASCXZBUYHABSDAUSZXHJBRRRRRRJFUABGAFGLLPKWAACAAAABBZJHXZXHJBJHXZXHJBJHXJBJHXZCXZCCZCXZUCAGSAJIJICXZIJUAUUISUSJUSSJSJSJAJCXZXCZTTTTTRJFUABGAFGLOPKWABCAAAABBU</p>\n</blockquote>\n\n<p>My code is the following, which intends to print all of the matches and then save them into a file as well. But I am not getting any matches while I except there to be at least 10 in my original file. </p>\n\n<pre><code>open(text, \"&lt;mytext.txt\");\n\npush (@matches,$&amp;) while(&lt;text&gt; =~ m{\n    ([TR]{6}\n    JFUA\n    [ABR]{1}\n    GAFG\n    ( [LOP]{2,3} )\n    [KW]{2,5}\n    (??{ $2 =~ tr/LOP/ABC/r })\n    AAAABB[UXZ]{1})\n    /g\n}x);\n\nprint \"@matches\\n\";\n\nmy $filename = 'results_matches.txt';\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh \"@matches\\n\";\nclose $fh;\nprint \"done\\n\";\n</code></pre>\n\n<p><strong>I have also tried the following code and this also does not work:</strong></p>\n\n<pre><code>my @matches = &lt;text&gt; =~ m{\n        ([TR]{6}\n        JFUA\n        [ABR]{1}\n        GAFG\n        ( [LOP]{2,3} )\n        [KW]{2,5}\n        (??{ $2 =~ tr/LOP/ABC/r })\n        AAAABB[UXZ]{1})\n        /g\n    }x;\n\nprint \"@matches\\n\";\n</code></pre>\n\n<p><strong>I have the following code which successfully prints out only one (the first) result. But it fails to print all of the matches.</strong></p>\n\n<pre><code>if (&lt;text&gt; =~ m{\n    ([TR]{6}\n    JFUA\n    [ABR]{1}\n    GAFG\n    ( [LOP]{2,3} )\n    [KW]{2,5}\n    (??{ $2 =~ tr/LOP/ABC/r })\n    AAAABB[UXZ]{1})\n}x) {print \"$1\\n\";}\n</code></pre>\n\n<p>I have followed the answers in this topic but have not been able to get any of them to work: <a href=\"https://stackoverflow.com/questions/1723440/how-can-i-find-all-matches-to-a-regular-expression-in-perl\">How can I find all matches to a regular expression in Perl?</a></p>\n"}, {"tags": ["perl", "date"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1510744576, "post_id": 47300276, "comment_id": 81562204, "body": "We have to use localtime to convert in time from epoch seconds and gmtime to convert in time from normal seconds i got it now....Thanks!!"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1510755105, "post_id": 47300276, "comment_id": 81569462, "body": "Still confused. Both <code>localtime</code> and <code>gmtime</code> expect the input to be epoch seconds."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1510883410, "post_id": 47300276, "comment_id": 81636313, "body": "Exactly. To expound, <code>localtime()</code> takes the epoch and returns a string (or date parts array) representing the time in your local timezone; <code>gmtime()</code> takes the epoch and returns a string (or date parts array) representing the time in UTC."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 7, "last_activity_date": 1510725615, "last_edit_date": 1510725615, "creation_date": 1510725028, "answer_id": 47300276, "question_id": 47299976, "link": "https://stackoverflow.com/questions/47299976/how-to-convert-epoch-seconds-to-normal-time-in-perl/47300276#47300276", "title": "How to convert epoch seconds to normal time in perl?", "body": "<p>Don't overthink it!</p>\n\n<pre><code>my $kickoff_time = localtime 1510652305;\nsay $kickoff_time; # Tue Nov 14 15:08:25 2017\n</code></pre>\n\n<p>If you absolutely, positively need the timezone in there:</p>\n\n<pre><code>use POSIX qw{strftime};\n\nmy $kickoff_time = strftime '%a %b %e %H:%M:%S %Z %Y', localtime 1510652305;\nsay $kickoff_time; # Tue Nov 14 15:08:25 IST 2017\n</code></pre>\n\n<p>Note that this is locale-dependent.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510752437, "post_id": 47304147, "comment_id": 81567560, "body": "I don&#39;t know where you&#39;re from, and if that&#39;s convenient for you, but are you going to be at the London Perl Workshop the weekend after next?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510758874, "post_id": 47304147, "comment_id": 81572400, "body": "I&#39;m oxford based. I hadn&#39;t realised there was one. I might have a look and see if can get there, but odds  aren&#39;t that great ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510760010, "post_id": 47304147, "comment_id": 81573344, "body": "I meant to include a link... [here it is](act.yapc.eu/lpw2017/). The LPW is a yearly event, always at the end of the year, on a Saturday, for free, in a university building in relatively central London. Attendance varies somewhere between 100 to 200 people, with usually three or four tracks of talks in parallel, and a visit to the pub afterwards. I&#39;ve been there once before, and going (and speaking) this year. A few other regulars like Dave Cross will be there, too. I didn&#39;t even know you&#39;re from England tbh. I&#39;m going from Berlin, so Oxford should not be that hard. ;)"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1510883545, "post_id": 47304147, "comment_id": 81636348, "body": "OP is not accessing date parts, so Time::Piece doesn&#39;t help with anything here. The scalar value returned by Time::Piece::localtime() is no different than the scalar value returned by the built-in <code>localtime()</code>. Am I missing something?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1510739433, "creation_date": 1510739433, "answer_id": 47304147, "question_id": 47299976, "link": "https://stackoverflow.com/questions/47299976/how-to-convert-epoch-seconds-to-normal-time-in-perl/47304147#47304147", "title": "How to convert epoch seconds to normal time in perl?", "body": "<p>I would recommend using <code>Time::Piece</code> for this job - it's core in perl. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \nuse Time::Piece;\n\nmy $t = localtime ( 1510652305 );\n\nprint $t;\n</code></pre>\n\n<p>It'll print default format, or you can use formatted using <code>strftime</code>. </p>\n"}], "owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 47300276, "answer_count": 2, "score": 2, "last_activity_date": 1510739433, "creation_date": 1510723572, "question_id": 47299976, "link": "https://stackoverflow.com/questions/47299976/how-to-convert-epoch-seconds-to-normal-time-in-perl", "title": "How to convert epoch seconds to normal time in perl?", "body": "<p>I have a string of epoch seconds \"1510652305\" which when i convert to normal time on unix command line using </p>\n\n<pre><code>`date -d @1510652305`\n</code></pre>\n\n<p>i get\nTue Nov 14 15:08:25 IST 2017</p>\n\n<p>But when i tried it in perl using something like this</p>\n\n<pre><code>use POSIX qw(strftime);\nuse Time::Local;\nuse Time::localtime;\n\n$kickoff_time=1510652305;\n$kickoff_time=ctime($kickoff_time);\n</code></pre>\n\n<p>i get</p>\n\n<p>Thu Jan  1 05:30:00 1970</p>\n\n<p>How can i achieve the result i am getting in linux in perl?</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["perl", "dispatch-table"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1510724569, "post_id": 47299805, "comment_id": 81551358, "body": "Are the sets of conflicting options always pairs? Can you have situations where options <code>a</code>, <code>b</code>, and <code>c</code> cannot occur together but any two are OK?  Before you can pick a representation you need to be sure your model can handle the logic you need in a general way.  This is not an easy problem."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510764346, "post_id": 47299805, "comment_id": 81576582, "body": "Don&#39;t use English, it&#39;s horribly slow and makes your code harder to read."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510765263, "post_id": 47299805, "comment_id": 81577264, "body": "Removed English module and changed <code>$ARG</code>/<code>@ARG</code> to <code>$_</code>/<code>@_</code> Added <code>$EMPTY</code> as I forgot I had it defined globally."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1510766126, "post_id": 47299805, "comment_id": 81577796, "body": "@JimGarrison -- you are correct. The if-elsif-else does not explicitly account for 3 options that conflict (though it does account for that implicitly)  As an example, using <code>-h</code> is required with all of the other options. But, using <code>-h</code>, <code>-r</code>, <code>v</code>, all together is not allowed, while <code>-h</code>, <code>-r</code>, and <code>-d</code> is allowed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510766677, "post_id": 47299805, "comment_id": 81578085, "body": "Since the host must be provided, it should be an argument, not an option."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510770742, "post_id": 47299805, "comment_id": 81580375, "body": "@ikegami this isn&#39;t a question about coding style... I prefer anything after the command to have a flag preceding it. That&#39;s my preference. Therefore, I am keeping it as an option. I may, one day later on, make this so that it can take a text file with a list of hosts, at which time I would remove the requirement of <code>-h</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510771749, "post_id": 47299805, "comment_id": 81580927, "body": "I know. That&#39;s why I didn&#39;t post my comment as an answer. /// If you want to be able to use a list of hosts in the future, it makes even less sense to use an option instead of argument. It&#39;s far easier to provide multiple values as  arguments than as options."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510772183, "post_id": 47299805, "comment_id": 81581172, "body": "I don&#39;t understand how that could be. <code>command -l filename</code> and <code>command -h hostname</code> could both be easily accounted for. <code>command filename</code> and <code>command hostname</code> would seem to be vastly more difficult to account for. Trying to open a hostname as a file handle, for reading, just doesn&#39;t work. Unless I am misunderstanding your meaning."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510764621, "post_id": 47299941, "comment_id": 81576789, "body": "I wondered if it would be impossible because of multiple conditions being true, but based on other answers, it seems that it is possible to still build a table and compare..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510765022, "post_id": 47299941, "comment_id": 81577104, "body": "What are you talking about? No answer used a dispatch table. All the answers (including mine) used a (<code>for</code> or <code>map</code>) loop that performs as many checks as there are conditions. The points of a dispatch table is to do a single check no matter how many conditions there are. Since all conditions can be true, you need to check all conditions, so a dispatch table is impossible by definition. (And that&#39;s without even mentioning that the value of a dispatch table should be a code reference or similar (something to dispatch to).)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510765116, "post_id": 47299941, "comment_id": 81577165, "body": "The difference between mine and the others is that mine avoids using an inefficient unordered hash and uses an efficient ordered list instead. (You could place the list in an array if you prefer.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510766203, "post_id": 47299941, "comment_id": 81577838, "body": "Updated to match updated question. That fact that none of the other answers can be extended for your updated question proves my pointthat trying to put everything into one loop or table just makes things less flexible, longer and more complex."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510770843, "post_id": 47299941, "comment_id": 81580438, "body": "In response to the &quot;help&quot; tip -- <code>HelpMessage</code> is defined by <code>GetOpt::Long</code> and reads from the PODs at the end of the file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510771636, "post_id": 47299941, "comment_id": 81580871, "body": "Adjusted the last section of my answer accordingly."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1510814319, "last_edit_date": 1510814319, "creation_date": 1510723325, "answer_id": 47299941, "question_id": 47299805, "link": "https://stackoverflow.com/questions/47299805/perl-need-assistance-converting-if-elsif-else-to-something-simpler/47299941#47299941", "title": "Perl: Need assistance converting if-elsif-else to something simpler", "body": "<p>You shouldn't be using elsif here because multiple condition could be true. And since multiple conditions could be true, a dispatch table can't be used. Your code can still be simplified greatly.</p>\n\n<pre><code>my @errors;\n\npush @errors, \"ERROR: Host must be provided\\n\"\n   if !defined($OPTIONS{host});\n\nmy @conflicting =\n   map { my ($opt, $flag) = @$_; $OPTIONS-&gt;{$opt} ? $flag : () }\n      [ 'console', '-r' ],\n      [ 'virtual', '-v' ],\n      [ 'cmdb',    '-d' ],\n      [ 'backup',  '-b' ],\n      [ 'nic',     '-n' ];\n\npush @errors, \"ERROR: Can only use one the following flags at a time: @conflicting\\n\"\n   if @conflicting &gt; 1;\n\npush @errors, \"ERROR: Can't use flag -p without also specifying -d\\n\"\n   if defined($OPTIONS-&gt;{policyid}) &amp;&amp; !$OPTIONS-&gt;{cmdb};\n\npush @errors, \"ERROR: Can't use flag -c without also specifying -d\\n\"\n   if $OPTIONS-&gt;{showcompliant} &amp;&amp; !$OPTIONS-&gt;{cmdb};\n\npush @errors, \"ERROR: Can't use flag -s without also specifying -b\\n\"\n   if $OPTIONS-&gt;{backuphistory} &amp;&amp; !$OPTIONS-&gt;{backup};\n\npush @errors, \"ERROR: Can't use flag -m without also specifying -n\\n\"\n   if defined($OPTIONS-&gt;{nicName}) &amp;&amp; !$OPTIONS-&gt;{nic};\n\npush @errors, \"ERROR: Incorrect number of arguments\\n\"\n   if @ARGV;\n\nusage(@errors) if @errors;\n</code></pre>\n\n<p>Note that the above fixes numerous errors in your code.</p>\n\n<hr>\n\n<p><strong>Help vs Usage Error</strong></p>\n\n<ul>\n<li><code>--help</code> should provide the requested help to STDOUT, and shouldn't result in an error exit code.</li>\n<li>Usage errors should be printed to STDERR, and should result in an error exit code.</li>\n</ul>\n\n<p>Calling <code>HelpMessage</code> indifferently in both situations is therefore incorrect.</p>\n\n<p>Create the following sub named <code>usage</code> to use (without arguments) when <code>GetOptions</code> returns false, and with an error message when some other usage error occurs:</p>\n\n<pre><code>use File::Basename qw( basename );\n\nsub usage {\n   my $prog = basename($0);\n   print STDERR $_ for @_;\n   print STDERR \"Try '$prog --help' for more information.\\n\";\n   exit(1);\n}\n</code></pre>\n\n<p>Keep using <code>HelpMessage</code> in response to <code>--help</code>, but the defaults for the arguments are not appropriate for <code>--help</code>. You should use the following:</p>\n\n<pre><code>'help' =&gt; sub { HelpMessage( -exitval =&gt; 0, -verbose =&gt; 1 ) },\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510764286, "post_id": 47300141, "comment_id": 81576548, "body": "Updated the question to clarify."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510771427, "post_id": 47300141, "comment_id": 81580757, "body": "@Speeddymon  Thank you, updated.  This brings together checks of those five options which can&#39;t go one with another.  The remaining few I leave to be checked one by one; &quot;encoding&quot; one or two possibilities in some all-encompassing system would just increase complexity (and may end up less readable)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 1, "creation_date": 1510779331, "post_id": 47300141, "comment_id": 81585111, "body": "@Speeddymon  Added the missing include, <code>use List::MoreUtils &#39;firstval&#39;</code>. Edited a little in the meanwhile, as well."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 1, "creation_date": 1510789784, "post_id": 47300141, "comment_id": 81589683, "body": "Thank you for the easy to follow example. I went with yours as it was the clearest and contained the least duplicate code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510813680, "post_id": 47300141, "comment_id": 81596699, "body": "@Speeddymon, Apparently, it&#39;s not clear as you think since you didn&#39;t realize if doesn&#39;t work. It doesn&#39;t mention the error of using <code>-r</code> and <code>-c</code> together if <code>-b</code> is also provided. And why is a hash being used at all? Wasteful and needlessly complex."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510814230, "post_id": 47300141, "comment_id": 81596942, "body": "Also, it does exactly the opposite of an dispatch table! The goal of a dispatch table is to turn an O(N) problem into an O(1) problem, but zdim turned the O(N) problem into an O(N^2) problem!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510824404, "post_id": 47300141, "comment_id": 81602463, "body": "@ikegami  I don&#39;t understand any of this.  What &quot;<i>O(N^2) problem!!!</i>&quot; -- this is command-line processing -- it happens <i>once</i> per run. The dispatch table has no utility here, as <i>you also state</i>. As for multiple conflicts I follow the OP, where only pairs are checked. You accumulate all errors in your answer, what I think is great, but this does catch all invocation errors. Why do you say &quot;it doesn&#39;t work&quot; -- that&#39;s incorrect; any conflicting options <i>are</i> caught. What is the rationale for these comments and for the -1, please? It is correct code that catches wrong invocation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510825868, "post_id": 47300141, "comment_id": 81603509, "body": "@ikegami If they want to catch <i>all</i> that&#39;s wrong on the command line (what is of course good to do, while not necessary) they only need to remove <code>last;</code>.  As for the hash, I don&#39;t understand -- you use the same data in your answer (it&#39;s just helpful for this); why do you call it wasteful in my answer? The hash is used since here it reduces prints to <i>one</i>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510842755, "post_id": 47300141, "comment_id": 81615392, "body": "@zdim, Re &quot;<i>they only need to remove <code>last;</code></i>&quot;, Nope. <code>HelpMessage</code> exits. Even if it didn&#39;t exit, you&#39;d end up with 2 sucky error messages instead of one. This is just one example of the numerous problems with the OP&#39;s code that you completely ignored. /// Re &quot;<i>you use the same data in your answer</i>&quot;, Yes, but I didn&#39;t needlessly store it in a hash instead of an array. /// Re &quot;<i>The hash is used since here it reduces prints to one.</i>&quot;, No, it doesn&#39;t. There&#39;s only one print in mine too, and there&#39;s no hash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510843187, "post_id": 47300141, "comment_id": 81615726, "body": "Re &quot;<i>What is the rationale for these comments and for the -1, please?</i>&quot;, On top of those specific problems, It&#39;s just overall bad code. You actually increased the code complexity and the time complexity when the question is about obtaining the opposite."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510877702, "post_id": 47300141, "comment_id": 81634828, "body": "@ikegami If you&#39;ll recall, the question I answered had none of these &quot;<i>numerous problems</i>.&quot;  Once the rest showed I decided to keep the focus on answering the actual question, for one because the added details don&#39;t convey everything. Re: &quot;<i>that you completely ignore</i>&quot; -- incorrect, I didn&#39;t ignore them, I state explicitly what I am addressing. This is perfectly reasonable; the default in fact.  Again, the &quot;rest of the code&quot; (quoting my post) doesn&#39;t show the full picture so addressing it is a specific decision (and then one takes risks for details that aren&#39;t shown)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510877809, "post_id": 47300141, "comment_id": 81634855, "body": "@ikegami Re: &quot;<i>Nope. ..</i>&quot;. But just move that message out and use a flag or store messages or ... it only needs a minuscule change to posted code.  That&#39;s what the hash you so don&#39;t like provides -- the code is adjusted easily. (As it was for a sweeping change to the OP.)  But I <i>didn&#39;t want</i> to do that. You did and I like how it&#39;s done now, but that&#39;s your answer. ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510877821, "post_id": 47300141, "comment_id": 81634862, "body": "@ikegami ... The point here is to not allow the program to run with conflicting options. Users are expected to be aware of invocation rules, and there&#39;s the full usage message printed. There is absolutely nothing wrong with code that catches errors and doesn&#39;t re-iterate the following usage message."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510877857, "post_id": 47300141, "comment_id": 81634872, "body": "@ikegami The &quot;<i>increased code complexity</i>&quot; of one clean hash and a few lines of processing? Increased compared to ... a dozen-ish of <code>elsif</code> blocks with repeated prints? Or to a map with a ternary operator over a list of arrayref-pairs? (Again: that&#39;s great code, but why is it <i>simpler</i> than a hash with dequeue?) The &quot;<i>increased time complexity</i>&quot; in the processing of command line options, and &quot;<i>O(N^2)</i>&quot; on <b>5</b> (five) elements, once per run?  ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510877871, "post_id": 47300141, "comment_id": 81634875, "body": "@ikegami ... Re: &quot;<i><b>just overall</b> bad code</i>&quot; (my emphasis). You should know full well that I respect everything you say. But &quot;just overall&quot;, with the above arguments, borders on offensive.  I sure am capable of putting out crappy code but this (answer to this question) <i>is not</i>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510898329, "post_id": 47300141, "comment_id": 81640210, "body": "@ikegami  Added a comment on missed multiple conflicts, thank you for that. Never mind my last (now deleted) comment above, if you saw it; I just don&#39;t get all this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510933295, "post_id": 47300141, "comment_id": 81660893, "body": "@zdim, No, compared to the code whose complexity you were asked to <i>reduce to O(1)</i>. Again, I remind you what the question was. /// Yes, it&#39;s bad when there are five problems in seven lines plus leaving another six issues uncorrected."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510948210, "post_id": 47300141, "comment_id": 81669171, "body": "@ikegami The question is about &quot;<i>something simpler</i>&quot;, to clean up those <code>elsif</code>, and they just thought of dispatch tables to reduce it to one statement; they never mentioned nor hinted at performance. If you keep saying that you see &quot;five&quot; problems there I guess that&#39;s that; I stated what I think about each claim.  Btw, I timed it: your code is around 20 <b>microseconds</b> faster, and here the matter <i>is</i> of absolute time since this goes once per run, and always with data of roughly this size (rough average, and that&#39;s after I adjust my code for multiple conflicts, otherwise it&#39;s about 10 us)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510948429, "post_id": 47300141, "comment_id": 81669290, "body": "Re &quot;<i>they never mentioned nor hinted at performance</i>&quot;, They mentioned a dispatch table. The benefit of a dispatch table is performance. /// Re &quot;<i>The question is about &quot;something simpler&quot;,</i>&quot;, Yet you didn&#39;t provide something simpler; you provided something that&#39;s still as buggy as the original, and doesn&#39;t provide a way of fixing them."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1510898886, "last_edit_date": 1510898886, "creation_date": 1510724381, "answer_id": 47300141, "question_id": 47299805, "link": "https://stackoverflow.com/questions/47299805/perl-need-assistance-converting-if-elsif-else-to-something-simpler/47300141#47300141", "title": "Perl: Need assistance converting if-elsif-else to something simpler", "body": "<p>I am not sure how a dispatch table would help since you need to go through pair-wise combinations of specific possibilities, and thus cannot trigger a suitable action by one lookup. </p>\n\n<p>Here is another way to organize it</p>\n\n<pre><code>use List::MoreUtils 'firstval';\n\nsub sanity_check_options\n{\n    my ($OPTIONS, $opt_excl) = @_;\n\n    # Check each of 'opt_excl' against all other for ConFLict\n    my @excl = sort keys %$opt_excl;\n    while (my $eo = shift @excl) \n    {\n        if (my $cfl = firstval { $OPTIONS-&gt;{$eo} and $OPTIONS-&gt;{$_} } @excl) \n        {\n            say \"Can't use -$opt_excl-&gt;{$eo} and -$opt_excl-&gt;{$cfl} together\";\n            HelpMessage();\n            last;\n        }\n    }\n\n    # Go through specific checks on\n    # policyid, showcompliant, backuphistory, and nicName\n    ...\n    return 1;  # or some measure of whether there were errors\n}\n\n# Mutually exclusive options\nmy %opt_excl = (\n    console =&gt; 'r', virtual =&gt; 'v', cmdb =&gt; 'c', backup =&gt; 'b', nic =&gt; 'n'\n); \n\nsanity_check_options(\\%OPTIONS, \\%opt_excl);\n</code></pre>\n\n<p>This checks all options listed in <code>%opt_excl</code> against each other for conflict, removing the segments of <code>elsif</code> involving the (five) options that are mutually exclusive. It uses <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.426/lib/List/MoreUtils.pm#firstval_BLOCK_LIST\" rel=\"nofollow noreferrer\">List::MoreUtils::firstval</a>.\nThe few other specific invocations are best checked one by one.  </p>\n\n<p>There is no use of returning <code>$OPTIONS</code> since it is passed as reference so any changes apply to the original structure (while it's not meant to be changed either). Perhaps you can keep track of whether there were errors and return that if it can be used in the caller, or just return <code>1</code>.</p>\n\n<p>This addresses the long <code>elsif</code> chain as asked, and doesn't go into the rest of code. Here is one comment though: There is no need for <code>{%OPTIONS}</code>, which copies the hash in order to create an anonymous one; just use <code>return \\%OPTIONS;</code></p>\n\n<hr>\n\n<p><em>Comment on possible multiple conflicting options</em></p>\n\n<p>This answer as it stands does not print <em>all</em> conflicting options that have been used if there are more than two, as raised by <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> in comments; it does catch any conflicts so that the run is aborted.</p>\n\n<p>The code is readily adjusted for this. Instead of the code in the <code>if</code> block either</p>\n\n<ul>\n<li><p>set a flag as a conflict is detected and break out of the loop, then print the list of those that must not be used with each other (<code>values %opt_excl</code>) or point at the following usage message</p></li>\n<li><p>collect the conflicts as they are observed; print them after the loop</p></li>\n<li><p>or, see a different approach in <a href=\"https://stackoverflow.com/a/47299941/4653379\">ikegami's answer</a></p></li>\n</ul>\n\n<p>However, one is expected to know of allowed invocations of a program and any listing of conflicts is a courtesy to the forgetful user (or a debugging aid); a usage message is printed as well anyway.</p>\n\n<p>Given the number of conflicting options the usage message should have a prominent note on this. Also consider that so many conflicting options may indicate a design flaw.</p>\n\n<p>Finally, this code fully relies on the fact that this processing goes once per run and operates with a handful of options; thus it is not concerned with efficiency and freely uses ancillary data structures.</p>\n"}, {"comments": [{"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510764247, "post_id": 47307824, "comment_id": 81576522, "body": "Thank you for the detailed answer. I&#39;ve updated the question to help clarify how the <code>$OPTIONS</code> hash is setup. Can your example work within the bounds of what I have already, or should I rewrite the whole thing from scratch?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510764423, "post_id": 47307824, "comment_id": 81576638, "body": "@Speeddymon yeah, that should work. I see you&#39;ve got <code>%OPTIONS</code>, and it is always pre-set with values. That&#39;s going to be interesting. Let me try."}, {"owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 0, "creation_date": 1510765695, "post_id": 47307824, "comment_id": 81577539, "body": "Speaking of the HOP book... That was actually what I was using to try to learn and where I was having trouble in applying the concept to my code. :-) I couldn&#39;t find a PDF version before, so thank you for the link!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "edited": false, "score": 1, "creation_date": 1510766256, "post_id": 47307824, "comment_id": 81577858, "body": "@Speeddymon I&#39;ve updated the answer and changed it to match your updated code. I suggest you read the diff first. What I don&#39;t like about it yet is that the possible keys are there twice, but that can be solved with some more trickery. I think that would blow up the answer even more, so I didn&#39;t do that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510813992, "post_id": 47307824, "comment_id": 81596844, "body": "Doesn&#39;t detect the case when <code>-r</code>, <code>-v</code> and <code>-b</code> are provided as an error."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510817779, "post_id": 47307824, "comment_id": 81598603, "body": "@ikegami huh, true. Why didn&#39;t I think of that?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1510766186, "last_edit_date": 1510766186, "creation_date": 1510750023, "answer_id": 47307824, "question_id": 47299805, "link": "https://stackoverflow.com/questions/47299805/perl-need-assistance-converting-if-elsif-else-to-something-simpler/47307824#47307824", "title": "Perl: Need assistance converting if-elsif-else to something simpler", "body": "<p>You can use a dispatch table if there are a lot of options. I would build that table programmatically. It might not be the best option here, but it works and the configuration is more readable than your <code>elsif</code> construct.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Ref::Util::XS 'is_arrayref';    # or Ref::Util\n\nsub create_key {\n    my $input = shift;\n\n    # this would come from somewhere else, probably the Getopt config\n    my @opts = qw( host bash nic nicName console virtual cmdb\n        policyid showcompliant backup backuphistory page );\n\n    # this is to cover the configuration with easier syntax\n    $input = { map { $_ =&gt; 1 } @{$input} }\n        if is_arrayref($input);\n\n    # options are always prefilled with false values\n    return join q{}, map { $input-&gt;{$_} ? 1 : 0 }\n        sort @opts;\n}\n\nmy %forbidden_combinations = (\n    map { create_key( $_-&gt;[0] ) =&gt; $_-&gt;[1] } (\n        [ [qw( console virtual )] =&gt; q{Cannot use flags -r and -v together} ],\n        [ [qw( console cmdb )]    =&gt; q{Cannot use flags -r and -d together} ],\n        [ [qw( console backup )]  =&gt; q{Cannot use flags -r and -b together} ],\n        [ [qw( console nic )]     =&gt; q{Cannot use flags -r and -n together} ],\n    )\n);\n\np %forbidden_combinations; # from Data::Printer\n</code></pre>\n\n<p>The output of the <code>p</code> function is the dispatch table.</p>\n\n<pre><code>{\n    00101   \"Cannot use flags -r and -v together\",\n    00110   \"Cannot use flags -r and -n together\",\n    01100   \"Cannot use flags -r and -d together\",\n    10100   \"Cannot use flags -r and -b together\"\n}\n</code></pre>\n\n<p>As you can see, we've sorted all the options ascii-betically to use them as keys. That way, you could in theory build all kinds of combinations like exclusive options.</p>\n\n<p>Let's take a look at the configuration itself.</p>\n\n<pre><code>my %forbidden_combinations = (\n    map { create_key( $_-&gt;[0] ) =&gt; $_-&gt;[1] } (\n        [ [qw( console virtual )] =&gt; q{Cannot use flags -r and -v together} ],\n        # ...\n    )\n);\n</code></pre>\n\n<p>We use a list of array references. Each entry is on one line and contains two pieces of information. Using the fat comma <code>=&gt;</code> makes it easy to read. The first part, which is much like a <em>key</em> in a hash, is the combination. It's a list of fields that should not occur together. The second element in the array ref is the error message. I've removed all the recurring elements, like the newline, to make it easier to change how and where the error can be displayed.</p>\n\n<p>The <code>map</code> around this list of combination configuration runs the options through our <code>create_key</code> function, which translates it to a simple bitmap-style string. We assign all of it to a hash of that map and the error message.</p>\n\n<p>Inside <code>create_key</code>, we check if it was called with an array reference as its argument. If that's the case, the call was for building the table, and we convert it to a hash reference so we have a proper map to look stuff up in. We know that the <code>%OPTIONS</code> always contains all the keys that exist, and that those are pre-filled with values that all evaluate to <em>false</em>. We can harness that convert the truthiness of those values to <code>1</code> or <code>0</code>, which then builds our key.</p>\n\n<p>We will see in a moment why that is useful.</p>\n\n<p>Now how do we use this?</p>\n\n<pre><code>sub HelpMessage { exit; }; # as a placeholder\n\n# set up OPTIONS\nmy %OPTIONS = (\n    host          =&gt; q{},\n    bash          =&gt; 0,\n    nic           =&gt; 0,\n    nicName       =&gt; q{},\n    console       =&gt; 0,\n    virtual       =&gt; 0,\n    cmdb          =&gt; 0,\n    policyid      =&gt; 0,\n    showcompliant =&gt; 0,\n    backup        =&gt; 0,\n    backuphistory =&gt; 0,\n    page          =&gt; q{},\n);\n\n# read options with Getopt::Long ...\n$OPTIONS{console} = $OPTIONS{virtual} = 1;\n\n# ... and check for wrong invocations\nif ( exists $forbidden_combinations{ my $key = create_key($OPTIONS) } ) {\n    warn \"ERROR: $forbidden_combinations{$key}\\n\";\n    HelpMessage;\n}\n</code></pre>\n\n<p>All we need to do now is get the <code>$OPTIONS</code> hash reference from Getopt::Long, and pass it through our <code>create_key</code> function to turn it into the map string. Then we can simply see if that key <a href=\"http://perldoc.perl.org/functions/exists.html\" rel=\"nofollow noreferrer\"><code>exists</code></a> in our <code>%forbidden_combinations</code> dispatch table and show the corresponding error message.</p>\n\n<hr>\n\n<p><strong>Advantages of this approach</strong></p>\n\n<p>If you want to add more parameters, all you need to do is include them in <code>@opts</code>. In a full implementation that would probably be auto-generated from the config for the Getopt call. The keys will change under the hood, but since that is abstracted away you don't have to care.</p>\n\n<p>Furthermore, this is easy to read. The <code>create_key</code> aside, the actual dispatch table syntax is quite concise and even has documentary character.</p>\n\n<p><strong>Disadvantages of this approach</strong></p>\n\n<p>There is a lot of programmatic generation going on for just a single call. It's certainly not the most efficient way to do it.</p>\n\n<hr>\n\n<p>To take this further, you can write functions that auto-generate entries for certain scenarios.</p>\n\n<p>I suggest you take a look at the second chapter in <a href=\"https://hop.perl.plover.com/\" rel=\"nofollow noreferrer\">Mark Jason Dominus' excellent book <em>Higher-Order Perl</em></a>, which is available for free as a PDF.</p>\n"}], "owner": {"reputation": 393, "user_id": 1437387, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87d4eb36e3cc1e8104979974f0c616d9?s=128&d=identicon&r=PG", "display_name": "Speeddymon", "link": "https://stackoverflow.com/users/1437387/speeddymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 47300141, "answer_count": 3, "score": 2, "last_activity_date": 1510898886, "creation_date": 1510722740, "last_edit_date": 1510772954, "question_id": 47299805, "link": "https://stackoverflow.com/questions/47299805/perl-need-assistance-converting-if-elsif-else-to-something-simpler", "title": "Perl: Need assistance converting if-elsif-else to something simpler", "body": "<p>I've been reading up on dispatch tables and I get the general idea of how they work, but I'm having some trouble taking what I see online and applying the concept to some code I originally wrote as an ugly mess of if-elsif-else statements.</p>\n\n<p>I have options parsing configured by using <code>GetOpt::Long</code>, and in turn, those options set a value in the <code>%OPTIONS</code> hash, depending on the option used.</p>\n\n<p>Taking the below code as an example... (<strong>UPDATED WITH MORE DETAIL</strong>)</p>\n\n<pre><code>use     5.008008;\nuse     strict;\nuse     warnings;\nuse     File::Basename qw(basename);\nuse     Getopt::Long qw(HelpMessage VersionMessage :config posix_default require_order no_ignore_case auto_version auto_help);\n\nmy $EMPTY      =&gt; q{};\n\nsub usage\n{\n    my $PROG = basename($0);\n    print {*STDERR} $_ for @_;\n    print {*STDERR} \"Try $PROG --help for more information.\\n\";\n    exit(1);\n}\n\nsub process_args\n{\n    my %OPTIONS;\n\n    $OPTIONS{host}              = $EMPTY;\n    $OPTIONS{bash}              = 0;\n    $OPTIONS{nic}               = 0;\n    $OPTIONS{nicName}           = $EMPTY;\n    $OPTIONS{console}           = 0;\n    $OPTIONS{virtual}           = 0;\n    $OPTIONS{cmdb}              = 0;\n    $OPTIONS{policyid}          = 0;\n    $OPTIONS{showcompliant}     = 0;\n    $OPTIONS{backup}            = 0;\n    $OPTIONS{backuphistory}     = 0;\n    $OPTIONS{page}              = $EMPTY;\n\n    GetOptions\n      (\n        'host|h=s'              =&gt; \\$OPTIONS{host}               ,\n        'use-bash-script'       =&gt; \\$OPTIONS{bash}               ,\n        'remote-console|r!'     =&gt; \\$OPTIONS{console}            ,\n        'virtual-console|v!'    =&gt; \\$OPTIONS{virtual}            ,\n        'nic|n!'                =&gt; \\$OPTIONS{nic}                ,\n        'nic-name|m=s'          =&gt; \\$OPTIONS{nicName}            ,\n        'cmdb|d!'               =&gt; \\$OPTIONS{cmdb}               ,\n        'policy|p=i'            =&gt; \\$OPTIONS{policyid}           ,\n        'show-compliant|c!'     =&gt; \\$OPTIONS{showcompliant}      ,\n        'backup|b!'             =&gt; \\$OPTIONS{backup}             ,\n        'backup-history|s!'     =&gt; \\$OPTIONS{backuphistory}      ,\n        'page|g=s'              =&gt; \\$OPTIONS{page}               ,\n        'help'                  =&gt; sub      { HelpMessage(-exitval =&gt; 0, -verbose -&gt;1)     },\n        'version'               =&gt; sub      { VersionMessage()  },\n      ) or usage;\n\n    if ($OPTIONS{host} eq $EMPTY)\n    {\n        print {*STDERR} \"ERROR: Must specify a host with -h flag\\n\";\n        HelpMessage;\n    }\n\n    sanity_check_options(\\%OPTIONS);\n\n    # Parse anything else on the command line and throw usage\n    for (@ARGV)\n    {\n        warn \"Unknown argument: $_\\n\";\n        HelpMessage;\n    }\n\n    return {%OPTIONS};\n}\n\nsub sanity_check_options\n{\n    my $OPTIONS     = shift;\n\n    if (($OPTIONS-&gt;{console}) and ($OPTIONS-&gt;{virtual}))\n    {\n        print \"ERROR: Cannot use flags -r and -v together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{console}) and ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flags -r and -d together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{console}) and ($OPTIONS-&gt;{backup}))\n    {\n        print \"ERROR: Cannot use flags -r and -b together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{console}) and ($OPTIONS-&gt;{nic}))\n    {\n        print \"ERROR: Cannot use flags -r and -n together\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{virtual}) and ($OPTIONS-&gt;{backup}))\n    {\n        print \"ERROR: Cannot use flags -v and -b together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{virtual}) and ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flags -v and -d together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{virtual}) and ($OPTIONS-&gt;{nic}))\n    {\n        print \"ERROR: Cannot use flags -v and -n together\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{backup}) and ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flags -b and -d together\\n\";\n        HelpMessage;\n    }\n    elsif (($OPTIONS-&gt;{backup}) and ($OPTIONS-&gt;{nic}))\n    {\n        print \"ERROR: Cannot use flags -b and -n together\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{nic}) and ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flags -n and -d together\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{policyid} != 0) and not ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flag -p without also specifying -d\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{showcompliant}) and not ($OPTIONS-&gt;{cmdb}))\n    {\n        print \"ERROR: Cannot use flag -c without also specifying -d\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{backuphistory}) and not ($OPTIONS-&gt;{backup}))\n    {\n        print \"ERROR: Cannot use flag -s without also specifying -b\\n\";\n        HelpMessage;\n    }\n\n    if (($OPTIONS-&gt;{nicName}) and not ($OPTIONS-&gt;{nic}))\n    {\n        print \"ERROR: Cannot use flag -m without also specifying -n\\n\";\n        HelpMessage;\n    }\n\n    return %{$OPTIONS};\n}\n</code></pre>\n\n<p>I'd like to turn the above code into a dispatch table, but can't figure out how to do it.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 4, "creation_date": 1510717307, "post_id": 47298922, "comment_id": 81549250, "body": "Wow, the second question I&#39;ve seen today that actually contains a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  I <i>rarely</i> see two such questions in one day.  Congratulations!"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510726591, "post_id": 47298984, "comment_id": 81552049, "body": "What&#39;s up with TWO downvotes ?? If I&#39;m going mad and blind would someone please let me know ?"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1510953863, "last_edit_date": 1510953863, "creation_date": 1510717333, "answer_id": 47298984, "question_id": 47298922, "link": "https://stackoverflow.com/questions/47298922/perl-getoptions-option-triggered-subroutine-that-accepts-arguments/47298984#47298984", "title": "perl GetOptions, option-triggered subroutine that accepts arguments", "body": "<p>The module <a href=\"https://perldoc.perl.org/Getopt/Long.html#User-defined-subroutines-to-handle-options\" rel=\"nofollow noreferrer\">expects a <em>code reference</em></a>, and that is taken with the sub name alone (<code>\\&amp;name</code>) or as an anonymous sub; there is no notion of \"arguments\" as you are not making a function call but rather obtaining a reference (to code). Then call you sub in that code.  Details follow.</p>\n\n<p>Associate the option with an anonymous subroutine, inside of which you can call your sub</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Getopt::Long;\n\nmy $opt;\nmy $var = 'entered';\n\nGetOptions ( 'opt' =&gt; sub { $opt = 1; sub1($var) } );\n\nsub sub1 { say \"sub1 $_[0]\"; }\n</code></pre>\n\n<p>Or use <code>'opt' =&gt; \\&amp;cb</code> and in the sub <code>cb()</code> call <code>sub1(...)</code>. This callback is passed the option name and value (or name, key, and value in case of a hash), and doesn't take other arguments. So you cannot in any way dynamically resolve what arguments to pass to <code>sub1()</code>.</p>\n\n<p>The invocation in the question is not how a <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">subroutine reference</a> is obtained; you must only use the subroutine name, <code>\\&amp;name</code>. This is not about <code>Getopt</code>, which just wants a code reference.</p>\n\n<p>When you attempt to \"pass arguments\" that isn't a coderef anymore but the sub is executed and then the reference taken of its return; same as <code>\\sub()</code> or <code>\\( sub() )</code>. This can be seen by</p>\n\n<pre><code>perl -wE'sub tt { say \"@_\"; return \"ret\" }; $r = \\&amp;tt(\"hi\"); say $$r'\n</code></pre>\n\n<p>what prints</p>\n\n<pre>\nhi\nret\n</pre>\n\n<p>While this just isn't a way to take a reference let me still warn of <a href=\"https://stackoverflow.com/a/47258929/4653379\">surprises</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1510717684, "creation_date": 1510717684, "answer_id": 47299035, "question_id": 47298922, "link": "https://stackoverflow.com/questions/47298922/perl-getoptions-option-triggered-subroutine-that-accepts-arguments/47299035#47299035", "title": "perl GetOptions, option-triggered subroutine that accepts arguments", "body": "<p>It's been a few years since I did much Perl, but I'm pretty sure it is because </p>\n\n<pre><code>\\&amp;sub1($var)\n</code></pre>\n\n<p>is a reference to the <em>result</em> of invoking <code>sub1</code>.  That is, the line</p>\n\n<pre><code>GetOptions ( \"opt\" =&gt; \\&amp;sub1($var) );\n</code></pre>\n\n<p>actually invokes <code>sub($var)</code> as part of constructing the argument list to <code>GetOptions</code>.  This looks like a corner case in the syntax, you are taking a reference to the result of that invocation.</p>\n\n<p>This should clear things up:</p>\n\n<pre><code>$ perl -de0\n\nLoading DB routines from perl5db.pl version 1.49_001\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(-e:1):   0\n  DB&lt;1&gt; sub sub1 { print \"sub1\\n\"; }\n\n  DB&lt;2&gt; sub1()\nsub1\n\n  DB&lt;3&gt; &amp;sub1\nsub1\n\n  DB&lt;4&gt; \\&amp;sub1\n\n  DB&lt;5&gt; x \\&amp;sub1\n0  CODE(0x804d7fe8)\n   -&gt; &amp;main::sub1 in (eval 6)[/usr/lib/perl5/5.22/perl5db.pl:737]:2-2\n  DB&lt;6&gt; x \\&amp;sub1()\nsub1\n0  SCALAR(0x804ee7f0)\n   -&gt; 1\n</code></pre>\n"}], "owner": {"reputation": 1750, "user_id": 873757, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4948c4bd86deb7f50a6ba28e73505e31?s=128&d=identicon&r=PG", "display_name": "user001", "link": "https://stackoverflow.com/users/873757/user001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 47298984, "answer_count": 2, "score": 4, "last_activity_date": 1510953863, "creation_date": 1510716975, "question_id": 47298922, "link": "https://stackoverflow.com/questions/47298922/perl-getoptions-option-triggered-subroutine-that-accepts-arguments", "title": "perl GetOptions, option-triggered subroutine that accepts arguments", "body": "<p>I am trying to use the <code>GetOptions</code> function from <code>GetOpt::Long</code> to call a subroutine that accepts an argument. However, the subroutine gets called regardless of whether the option is specified on the command line. This unexpected behavior does not occur if an argument is not passed to the subroutine in the <code>GetOptions</code> line.</p>\n\n<p>What follows is a minimal demonstration of the problem:</p>\n\n<p>If an argument is provided to the subroutine in the <code>GetOptions</code> line, the subroutine ends up being called regardless of whether its controlling option is supplied on the command line:</p>\n\n<pre><code>$ cat a1.pl\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nmy $var=\"entered\";\nGetOptions ( \"opt\" =&gt; \\&amp;sub1($var) );\nsub sub1 { print \"sub1 $_[0]\\n\"; }\n\n$ perl a1.pl --opt\nsub1 entered\n\n$ perl a1.pl\nsub1 entered\n</code></pre>\n\n<p>In contrast, if the subroutine is called in <code>GetOptions</code> without an argument, it behaves appropriately:</p>\n\n<pre><code>$ cat a2.pl\n#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nGetOptions ( \"opt\" =&gt; \\&amp;sub2 );\nsub sub2 { print \"sub2 entered\\n\"; }\n\n$ perl a2.pl --opt\nsub2 entered\n\n$ perl a2.pl\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>PS: I know that I can simply set a variable that controls whether the subroutine is called after the <code>GetOptions</code> block, but I would like to determine the correct syntax for calling the subroutine within the <code>GetOptions</code> line, as well as understand why the observed behavior is happening.</p>\n"}, {"tags": ["bash", "perl", "csv", "cron"], "comments": [{"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 1, "creation_date": 1510693612, "post_id": 47294676, "comment_id": 81541471, "body": "I think is better to open a csv with libreoffice calc. In email body use printf to print line by line with each field formatted and aligned as you do if printing in console; then open and display the email with monospace font. Alternatevely print an html email body with  &lt;table&gt; ...&lt;/table&gt;."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 3, "creation_date": 1510693927, "post_id": 47294676, "comment_id": 81541646, "body": "Don&#39;t post images to code (or data), post the actual text."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4072642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y7hwe.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4072642/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1510693247, "creation_date": 1510693247, "answer_id": 47295105, "question_id": 47294676, "link": "https://stackoverflow.com/questions/47294676/convert-csv-format-as-text-in-email-body/47295105#47295105", "title": "Convert CSV format as text in email body", "body": "<p>I've used TAB delimited fields in email bodies, it makes it a bit more human readable. Personally though I like to send the actual csv file as an attachment so it can be opened and manipulated by a spreadsheet program. I'm usually not emailing the info to myself and the receiving end is usually just a basic Windows user. Optionally there is a great perl module that allows you to write a real excel file too, which can give some great looking results. Excel::Writer::XLSX</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510736842, "post_id": 47297947, "comment_id": 81557317, "body": "That&#39;s pretty much what the current <code>column</code> command is doing. But it will still look wrong when viewed using a proportional font (as the second image in the question demonstrates)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510739610, "post_id": 47297947, "comment_id": 81559000, "body": "Wow, I don&#39;t think I&#39;ve seen <code>format</code> used for years!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510749801, "post_id": 47297947, "comment_id": 81565662, "body": "@Sobrique: Am I misremembering, or was it removed from Perl core a few releases back?"}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 2, "last_activity_date": 1510709791, "last_edit_date": 1510709791, "creation_date": 1510709118, "answer_id": 47297947, "question_id": 47294676, "link": "https://stackoverflow.com/questions/47294676/convert-csv-format-as-text-in-email-body/47297947#47297947", "title": "Convert CSV format as text in email body", "body": "<p>Perl would be a suitable tool to align text fields.\nTry the following code:</p>\n\n<pre><code>#!/bin/bash\n\necho \"$EMAILBODY\" | perl -e '\nformat STDOUT =\n@&gt;&gt;&gt;&gt;&gt;&gt;&gt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&gt;&gt;&gt;&gt;&gt;&gt;&gt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n$id, $type, $site, $city, $prov, $start, $elasp\n.\n\nwhile (&lt;&gt;) {\n    split(/,/, $_);\n    grep {s/^\"//, s/\"$//} @_;\n    ($id, $type, $site, $city, $prov, $start, $elasp) = @_;\n    write;\n}'\n</code></pre>\n\n<p>The result will look like:</p>\n\n<pre><code>Alert ID Type                IOL Site City            Province  Alert Start Time    Elasped Time since first alert\n       4 Trasaction Alert       99196 NANAIMO         BC        2015-06-30 15:11:00     867 23:00\n       6 Communication Alert    88395 GRANDE PRAIRIE  AB        2015-07-01 15:23:39     866 22:48\n       7 Communication Alert    88433 HINTON          AB        2015-07-01 15:23:39     866 22:48\n       8 Communication Alert    88484 LAC LA BICHE    AB        2015-07-01 15:23:39     866 22:48\n      11 Transation Alert       88395 GRANDE PRAIRIE  AB        2015-07-02 16:40:59     865 22:53\n</code></pre>\n\n<p>Note that the script above assumes each field does not contail commas. In such a case, Text::CSV module will work.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1510736770, "creation_date": 1510736770, "answer_id": 47303240, "question_id": 47294676, "link": "https://stackoverflow.com/questions/47294676/convert-csv-format-as-text-in-email-body/47303240#47303240", "title": "Convert CSV format as text in email body", "body": "<p>Firstly, it's not accurate to say you have \"a csv file which looks like below\". You have a CSV file which looks like that when you open it in a spreadsheet program.</p>\n\n<p>You have a few problems to address here. Using <code>columns</code> was a good idea, but <code>columns</code> (like many Unix command-line utilities) thinks that everyone still lives in a Unix console with fixed-width fonts. The slight misalignments you're seeing are down to you viewing the email using a proportional font, so not all characters are the same width.</p>\n\n<p>You could try separating the output with tabs. That will look better - but there will still be cases that don't work (because you don't always need exactly one tab between columns in order to get them to line up.</p>\n\n<p>The only way to guarantee the appearance you want is to create a MIME email with content-type of \"text/html\" and to create an HTML table containing your data. But that's a lot more work that what you're currently doing.</p>\n"}], "owner": {"reputation": 747, "user_id": 2754236, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9897dc5266176260997e71942f152826?s=128&d=identicon&r=PG&f=1", "display_name": "Newbee", "link": "https://stackoverflow.com/users/2754236/newbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1510736770, "creation_date": 1510691524, "last_edit_date": 1510696413, "question_id": 47294676, "link": "https://stackoverflow.com/questions/47294676/convert-csv-format-as-text-in-email-body", "title": "Convert CSV format as text in email body", "body": "<p>I have a cron job which when run gives me a csv file which looks like below:\n<a href=\"https://i.stack.imgur.com/cGatI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cGatI.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have another cron job where I am trying to display the csv data directly in an email body and the output of that is as below:\n<a href=\"https://i.stack.imgur.com/GNzmt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNzmt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see above, the output from email is distorted and looks ugly. WHat changes should I make for the email format to be similar with the csv format?.</p>\n\n<p>I am using the below bash commands in my cron :</p>\n\n<pre><code>EMAILBODY=\"$(${RUNDIR}/${DEV1} ${FILELOCATION} ${FILENAME})\"\n\necho \"$EMAILBODY\" | mailx -r ${SENDER} -s \"Alerts Email for $(date +%Y-%m-%d_%H:%M)\" abcd@xyz.com\n</code></pre>\n\n<p>I tried the below change to the script:</p>\n\n<pre><code>echo \"$EMAILBODY\" | column -s, -t | mailx -r ${SENDER} -s \"Alerts Email for $(date +%Y-%m-%d_%H:%M)\" abcd@xyz.com\n</code></pre>\n\n<p>and now I see this in the email:\n<a href=\"https://i.stack.imgur.com/Smbz7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Smbz7.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As you can notice, the format is little better than before. But how can I align the data perfectly with the headers?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1510668789, "post_id": 47287725, "comment_id": 81525981, "body": "Why not use a hash instead?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1510674007, "post_id": 47287725, "comment_id": 81529868, "body": "when dumping an array, do Data::Dumper::Dumper(\\@array), not ...(@array).  if passed a list, Dumper dumps each element individually, which is not what you want here"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1510670372, "post_id": 47287978, "comment_id": 81527156, "body": "Your last statement was on point, I only needed one match. Then before pushing a node onto fin_nodes this was enough: &quot;if (!$first_match)&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 1, "creation_date": 1510672325, "post_id": 47287978, "comment_id": 81528707, "body": "@Taranasaur: I think you missed the point of <b>Sobrique&#39;s</b> answer. A hash is by far the better choice for this, and you can simply write <code>$fin_nodes{$node} &#47;&#47;= [ $hindex, $e-&gt;{$hip}{FREQ} ]</code> and avoid the need for any explicit test altogether."}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510673997, "post_id": 47287978, "comment_id": 81529862, "body": "@Borodin, no I do get Sobrique&#39;s point. The fin_nodes array is being used for a simple list function that another method is already using quite happily in my program.  I will at some point go back and create a hash as there might be more attributes I&#39;ll need to include in that array/hash"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1510674207, "post_id": 47287978, "comment_id": 81529997, "body": "&quot;because the latter will substring match&quot; assuming no regex metacharacters; if there are any, it will be even worse"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1510683543, "post_id": 47287978, "comment_id": 81535896, "body": "@Taranasaur: <i>&quot;The fin_nodes array is being used for a simple list function that another method is already using&quot;</i> I would recommend rewriting your &quot;other method&quot;, but if you&#39;d rather not then you can put <code>$node</code> into the hash values as well <code>$fin_nodes{$node} &#47;&#47;= [ $node, $hindex, $e-&gt;{$hip}{FREQ} ]</code> and then your original <code>@fin_nodes</code> is the same as <code>values %fin_nodes</code> (or <code>[ values %fin_nodes ]</code> if you&#39;re passing by reference."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1510680875, "last_edit_date": 1510680875, "creation_date": 1510668859, "answer_id": 47287978, "question_id": 47287725, "link": "https://stackoverflow.com/questions/47287725/grep-two-dimensional-array/47287978#47287978", "title": "Grep Two Dimensional Array", "body": "<p>I would say \"don't\" and instead:</p>\n\n<pre><code>my %fin_nodes;\n$fin_nodes{$node} = [$hindex, $e-&gt;{$hip}-&gt;{FREQ}]);\n</code></pre>\n\n<p>And then you can simply <code>if ($fin_nodes{$node}) {</code></p>\n\n<p>Failing that though - you don't need to grep every element, as your node name is always first.</p>\n\n<p>So: </p>\n\n<pre><code> my @matches = grep { $_ -&gt; [0] eq $node } @fin_nodes; \n</code></pre>\n\n<p><code>eq</code> is probably a better choice than <code>=~</code> here, because the latter will substring match. (And worse, can potentially do some quite unexpected things if you've metacharacters in there, since you're not quoting or escaping them)</p>\n\n<p>E.g. in your example - if you look for a node called <code>\"node\"</code> you'll get multiple hits. </p>\n\n<p>Note - if you're only looking for one match, you can do something like:</p>\n\n<pre><code>my ( $first_match ) =  grep { $_ -&gt; [0] eq $node } @fin_nodes; \n</code></pre>\n\n<p>This will <em>just</em> get you the first result, and the rest will be discarded. (Which isn't too efficient, because <code>grep</code> will continue to iterate the whole list). </p>\n"}], "owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 47287978, "answer_count": 1, "score": 0, "last_activity_date": 1510688049, "creation_date": 1510668044, "last_edit_date": 1510688049, "question_id": 47287725, "link": "https://stackoverflow.com/questions/47287725/grep-two-dimensional-array", "title": "Grep Two Dimensional Array", "body": "<p>Since this is not a question directly covered here, thought best I ask and answer it.</p>\n\n<p>I had an issue where I wanted to add a node name to a list only if the same node doesn't already exist. The array was built using:</p>\n\n<pre><code>push (@fin_nodes, [$node, $hindex, $e-&gt;{$hip}-&gt;{FREQ}]);\n</code></pre>\n\n<p>So given when given array (@fin_nodes) that looks like:</p>\n\n<pre><code>$VAR1 = [\n      'first-node',\n      '4',\n      3\n    ];\n$VAR2 = [\n      'second-node',\n      '1',\n      3\n    ];\n$VAR3 = [\n      'another-node',\n      '1',\n      5\n    ];\n$VAR4 = [\n      'some-node',\n      '0',\n      5\n    ];\n</code></pre>\n\n<p>To do a grep on this the following works:</p>\n\n<pre><code>my @match = grep { grep { $_ =~ $node } @$_ } @fin_nodes;\n</code></pre>\n\n<p>So given a $node \"second-node\" the above statement will return @match as:</p>\n\n<pre><code>$VAR1 = [\n  'second-node',\n  '1',\n  3\n];\n</code></pre>\n"}, {"tags": ["perl", "snmp", "net-snmp", "snmp-trap"], "comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1510813363, "post_id": 47287447, "comment_id": 81596555, "body": "You said you were not able to send <code>snmpv3</code> trap , but in your code it seems like you are trying to send a v2 trap to a v3 connection?"}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "is_accepted": false, "score": 0, "last_activity_date": 1510814747, "creation_date": 1510814747, "answer_id": 47323269, "question_id": 47287447, "link": "https://stackoverflow.com/questions/47287447/unable-to-create-snmpv3-session-and-send-snmpv3-trap/47323269#47323269", "title": "Unable to create snmpv3 session and send snmpv3 trap", "body": "<p>I see a few missing fields from your snippet as far SNMPv3 is concerned. </p>\n\n<p>I doubt why <code>Net::SNMP</code> does not have the security level field for v3 connections. There are three levels of security - <code>noAuthnoPriv</code> , <code>authNoPriv</code> and <code>authPriv</code>. Based on the these levels, an SNMPv3 connection request can be formed.</p>\n\n<p>Firstly, in your connection request, you only have authentication related information and nothing about the privacy protocol/privacy key. Second, I suggest you to use version value as <code>snmpv3</code> instead of just <code>3</code>.</p>\n\n<p>For the trap part, it seems like the sender must be an authoritative SNMP engine - not yet supported by Net::SNMP module. Quoted below from <a href=\"http://search.cpan.org/~dtown/Net-SNMP-v6.0.1/lib/Net/SNMP.pm\" rel=\"nofollow noreferrer\">Net::SNMP</a></p>\n\n<blockquote>\n  <p><strong>snmpv2_trap() - send a SNMP snmpV2-trap to the remote manager</strong><br>\n  <strong>NOTE:</strong> This method can only be used when the version of the object is\n  set to SNMPv2c. SNMPv2-Trap-PDUs are supported by SNMPv3, but require\n  the sender of the message to be an authoritative SNMP engine which is\n  not currently supported by the Net::SNMP module.</p>\n</blockquote>\n"}], "owner": {"reputation": 71, "user_id": 4840530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12fe7997a22880293d8357ca60e3120?s=128&d=identicon&r=PG&f=1", "display_name": "OneWhoKnocks", "link": "https://stackoverflow.com/users/4840530/onewhoknocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 569, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510814747, "creation_date": 1510667201, "last_edit_date": 1510668358, "question_id": 47287447, "link": "https://stackoverflow.com/questions/47287447/unable-to-create-snmpv3-session-and-send-snmpv3-trap", "title": "Unable to create snmpv3 session and send snmpv3 trap", "body": "<p><strong>1. Not able to create SNMPv3 session</strong>     </p>\n\n<p>I am using NET::SNMP perl library to send snmpv3 trap.It was working fine with snmpv1 and snmpv2 but i am unable to send snmpv3 trap. I am using Mg-soft trap ringer for receiving traps but i am unable to even create a session. </p>\n\n<p>Code for snmpv3 session creation:</p>\n\n<pre><code>my ($session, $error) = Net::SNMP-&gt;session( \n-hostname     =&gt; 'my_host_name', \n-version     =&gt; '3',\n-username     =&gt; 'user-md5',\n-authprotocol =&gt; 'md5',\n-authpassword =&gt; 'abcd1234'\n);\n</code></pre>\n\n<p>Here the username is the security user name added in Mg-soft trap ringer. Why am i not able to create session.Or please suggest me how can i receive snmpv3 trap sent through NET::SNMP library.</p>\n\n<p><strong>2. Not able to send SNMPv3 trap</strong></p>\n\n<p>I am able to create session for snmpv3 with some trap receiver snmp server configuration i found somewhere. But while sending trap using NET::SNMP library  i am getting following error: </p>\n\n<p><em>Must be an authoritative SNMP engine to generate a SNMPv2-Trap-PDUdf</em></p>\n\n<p>Here is the code snippet i used:</p>\n\n<pre><code>my $OID_sysContact = '1.5.2.9.4.6.6.5.4';\nmy $result = $session-&gt;snmpv2_trap(\n-varbindlist =&gt; [ $OID_sysContact, OCTET_STRING, 'Help Desk x911' ],\n);\n</code></pre>\n\n<p>Please suggest me why am i getting this error.</p>\n"}, {"tags": ["regex", "bash", "shell", "perl", "perl-module"], "comments": [{"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "edited": false, "score": 7, "creation_date": 1510662439, "post_id": 47285770, "comment_id": 81521483, "body": "Are you trying to execute parts of your local perl script in an ssh session on a remote server? That will not work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1510662701, "post_id": 47285770, "comment_id": 81521659, "body": "Look into Object::Remote. <a href=\"https://www.youtube.com/watch?v=7hIyawUrCcQ\" rel=\"nofollow noreferrer\">Here is a good talk</a> by the author from the German Perl Workshop 2014. It will essentially let you write Perl code locally, and execute it completely on a remote machine. It doesn&#39;t even matter what Perl version you have there."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510662823, "post_id": 47285770, "comment_id": 81521732, "body": "You should also not use <code>$a</code> and <code>$b</code>. They are reserved global variables for <code>sort</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510664814, "post_id": 47285770, "comment_id": 81523094, "body": "Why are you sudoing when your command is running on an entirely different server?"}, {"owner": {"reputation": 135, "user_id": 5940213, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-3oyKaXyQSOg/AAAAAAAAAAI/AAAAAAAABzk/-JV5VmC-xW4/photo.jpg?sz=128", "display_name": "sampath", "link": "https://stackoverflow.com/users/5940213/sampath"}, "edited": false, "score": 0, "creation_date": 1510664889, "post_id": 47285770, "comment_id": 81523146, "body": "I don&#39;t have access to the server so I am using sudo to run as jenkins user."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510667672, "post_id": 47285770, "comment_id": 81525150, "body": "This is just not going to work the way you think it is. At the very least - figure out an ssh command that works <i>first</i>."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 2, "creation_date": 1510668010, "post_id": 47285770, "comment_id": 81525403, "body": "Never put <code>sudo</code> or <code>su</code> in a script. This is security breach. Instead run the script as <code>sudo</code> or <code>su</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1510721865, "last_edit_date": 1510721865, "creation_date": 1510720004, "answer_id": 47299354, "question_id": 47285770, "link": "https://stackoverflow.com/questions/47285770/use-of-uninitialized-value-a-in-concatenation-or-string/47299354#47299354", "title": "Use of uninitialized value $a in concatenation (.) or string", "body": "<p>If you have three levels of escaping, you're bound to get it wrong if you do it manually. Use String::ShellQuote's <code>shell_quote</code> instead.</p>\n\n<p>Furthermore, avoid generating code. You're bound to get it wrong! Pass the necessary information using arguments, the environment or some other channel of communication instead.</p>\n\n<p>There were numerous errors in the interior Perl script on top of the fact that you tried to execute a Perl script without actually invoking <code>perl</code>!</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse String::ShellQuote qw( shell_quote );\n\nmy $HOME = \"/opt/app/latest\";\nmy $LIBS = \"$HOME/libs\";\nmy $LIBS_BACKUP_DIR = \"$HOME/libs_backups\";\n\nmy $perl_script = &lt;&lt;'__EOI__';\n   use strict;\n   use warnings;\n\n   use String::ShellQuote qw( shell_quote );\n\n   my ($LIBS_BACKUP_DIR) = @ARGV;\n\n   my $cmd = shell_quote(\"ls\", \"-tr\", \"--\", $LIBS_BACKUP_DIR);\n   chomp( my @files =  `$cmd` );\n   if (@files &gt; 3) {\n      print \"Found more than 3 back up files. Removing older files...\\n\";\n      print \"$_\\n\" for @files;\n   } else {\n      print \"Found three or fewer backup files.\\n\";\n   }\n__EOI__\n\nmy $remote_cmd = shell_quote(\"perl\", \"-e\", $perl_script, \"--\", $LIBS_BACKUP_DIR);\nmy $ssh_cmd = shell_quote(\"ssh\", 'username@server', \"--\", $remote_cmd);\nmy $local_cmd = shell_quote(\"sudo\", \"su\", \"-c\", $ssh_ccmd);\nsystem($local_cmd);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 5940213, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-3oyKaXyQSOg/AAAAAAAAAAI/AAAAAAAABzk/-JV5VmC-xW4/photo.jpg?sz=128", "display_name": "sampath", "link": "https://stackoverflow.com/users/5940213/sampath"}, "is_accepted": true, "score": 0, "last_activity_date": 1511432818, "creation_date": 1511432818, "answer_id": 47453197, "question_id": 47285770, "link": "https://stackoverflow.com/questions/47285770/use-of-uninitialized-value-a-in-concatenation-or-string/47453197#47453197", "title": "Use of uninitialized value $a in concatenation (.) or string", "body": "<p>I created a new file and handling the dir check and deletion logic , scp file to remote server and executing in remote server , after completion removing the file.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Basename;\nuse File::Path;\nuse FindBin;\nuse File::Copy;\n\nmy $HOME=\"/opt/app/test/latest\";\nmy $LIBS_BACKUP_DIR=\"${HOME}/libs_backups\";\n\nmy $a=\"ls ${LIBS_BACKUP_DIR} | wc -l\";\nmy $b=`$a`;\nmy $c=\"ls -tr ${LIBS_BACKUP_DIR} | head -1\";\nmy $d=`$c`;\nchomp($d);\nprint \" count : $b\\n\";\n\n\n\nif ($b &gt; 3)\n{\nprint \" Found More than 3 back up files , removing older files..\\n\";\nprint \"Old file name $d\\n\";\nmy $filepath=\"${LIBS_BACKUP_DIR}/$d\";\nrmtree $filepath;\n}\nelse\n {\n print \"No of back up files are less then 3 .\\n\";\n }\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5940213, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-3oyKaXyQSOg/AAAAAAAAAAI/AAAAAAAABzk/-JV5VmC-xW4/photo.jpg?sz=128", "display_name": "sampath", "link": "https://stackoverflow.com/users/5940213/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 1, "accepted_answer_id": 47453197, "answer_count": 2, "score": 0, "last_activity_date": 1601630358, "creation_date": 1510662086, "last_edit_date": 1601630358, "question_id": 47285770, "link": "https://stackoverflow.com/questions/47285770/use-of-uninitialized-value-a-in-concatenation-or-string", "title": "Use of uninitialized value $a in concatenation (.) or string", "body": "<p>I am trying to remove the old files in a dir if the count is more than 3 over SSH</p>\n<p>Kindly suggest how to resolve the issue.</p>\n<p>Please refer the code snippet</p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $HOME=&quot;/opt/app/latest&quot;;\nmy $LIBS=&quot;${HOME}/libs&quot;;\nmy $LIBS_BACKUP_DIR=&quot;${HOME}/libs_backups&quot;;\nmy $a;\nmy $b;\nmy $c;\nmy $d;\n\nmy $command =qq(sudo /bin/su - jenkins -c &quot;ssh username\\@server 'my $a=ls ${LIBS_BACKUP_DIR} | wc -l;my $b=`$a`;if ($b &gt; 3); { print &quot; Found More than 3 back up files , removing older files..&quot;;my $c=ls -tr ${LIBS_BACKUP_DIR} | head -1;my $d=`$c`;print &quot;Old file name $d&quot;;}else { print &quot;No of back up files are less then 3 .&quot;;} '&quot;);\n\nprint &quot;$command\\n&quot;;\nsystem($command);\n</code></pre>\n<p>output:</p>\n<pre><code>sudo /bin/su - jenkins -c &quot;ssh username@server 'my ; =ls /opt/app/latest/libs_backups | wc -l;my ; =``;if ( &gt; 3); { print &quot; Found More than 3 back up files , removing older files..&quot;;my ; =ls -tr /opt/app/latest/libs_backups | head -1;my ; =``;print &quot;Old file name &quot;;}else { print &quot;No of back up files are less then 3 .&quot;;} '&quot;\nFound: -c: line 0: unexpected EOF while looking for matching `''\nFound: -c: line 1: syntax error: unexpected end of file\n</code></pre>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510658884, "post_id": 47284375, "comment_id": 81519068, "body": "Much depends on whether you want <code>&quot;1&quot;</code> and <code>&quot;01&quot;</code> etc. to compare as equal or unequal."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510659215, "post_id": 47284375, "comment_id": 81519296, "body": "@Borodin that&#39;s true. But <code>eq</code> takes care of that, because of the internal representation. I think it&#39;s aware that <code>&quot;1&quot;</code> is an SV internally, and <code>1</code> is an IV. See this example: <code>say 01 eq 1; say 01 eq &quot;1&quot;; say &quot;01&quot; eq &quot;1&quot;; say &quot;01&quot; eq 1;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510667923, "post_id": 47284375, "comment_id": 81525342, "body": "Yes, but my point is that the OP may (or may not) want <code>&quot;1&quot;</code> to <i>match</i> <code>&quot;01&quot;</code> and, indeed <code>&quot;1000E-3&quot;</code>. There are two behaviours, and in the case of a <i>dualvar</i> the results may be different."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510668780, "post_id": 47284375, "comment_id": 81525971, "body": "@Borodin in that case, they&#39;d have to adhere to my second point and build a lot of stuff themselves. There&#39;s <code>is_dual</code> from Scalar::Util to recognize _dualvar_s. Interestingly, Test::Deep does not do that. <code>cmp_deeply(dualvar(1337, &#39;bar&#39;), dualvar(1337, &#39;foo&#39;))</code> will fail because <code>foo</code> is not <code>bar</code>. If the numbers are different but the strings are the same, it will pass. It never looks at the number part. Probably because Test::Deep also uses <code>eq</code> on non-refs."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510670730, "post_id": 47284375, "comment_id": 81527466, "body": "@Borodin I just checked the open issues for Test::Deep. There is no mention of dualvars there. Have you ever encountered this in real life?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510700691, "post_id": 47284375, "comment_id": 81544808, "body": "I&#39;m sorry. I complicated things by mentioning <i>dualvar</i> at all. The issue I was trying to raise is that <i>perhaps</i> the string <code>&quot;1&quot;</code>, the integer <code>1</code>, and the (probably double) <code>1.0</code> need to be distinguished. I usually just insist that you mustn&#39;t use numeric values as hash keys without pushing them through <code>sprintf</code> with a fixed format. I&#39;m surprised that there appears to be nothing written about this, as it involves floating-point precision as well as the string representation. Imagine <code>++$hash{$Math::Trig::pi}</code>!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 8, "last_activity_date": 1510670572, "last_edit_date": 1510670572, "creation_date": 1510658142, "answer_id": 47284375, "question_id": 47283969, "link": "https://stackoverflow.com/questions/47283969/compare-values-of-two-hashes-with-mixed-types/47284375#47284375", "title": "Compare values of two hashes with mixed types", "body": "<p>First, Perl does not have types. It does not distinguish between strings and numbers (on the outside).</p>\n\n<p>Furthermore, it does not make a difference between numbers and strings on this level. The <em>numerical context</em> and <em>string context</em> matters if you check what's greater or less than. Consider this:</p>\n\n<pre><code>my $foo = 200;\nmy $bar = 99;\nprint $foo &gt; $bar ? $foo : $bar;\n</code></pre>\n\n<p>Obviously it will print <code>200</code>, because 200 is numerically larger than 99.</p>\n\n<pre><code>my $foo = 200;\nmy $bar = 99;\nprint $foo gt $bar ? $foo : $bar;\n</code></pre>\n\n<p>But this will print <code>99</code>, because <code>9</code> is alphanumerically (as in string) greater than <code>2</code>. It compared the numbers of the code points for the characters.</p>\n\n<p>But if <strong>all you want to do is check for inequality, the <code>ne</code> operator is fine</strong>. Even when you are not sure whether there are things other than numbers in your input.</p>\n\n<pre><code>foreach my $key ( keys(%$hash1) ) {\n    if ($hash1-&gt;{$key} ne $hash2-&gt;{$key}) {\n        print($key);\n    }\n}\n</code></pre>\n\n<p><code>eq</code> (and <code>ne</code>) are smart enough to see if a number was initially a string or a number without quotes, because the internal representation of those differs. </p>\n\n<p><strong>Warning, technical details ahead.</strong></p>\n\n<p>Scalar values are saved in _SV_s. These in terms can contain different things. There's a special internal type for simple integers called <em>IV</em>, and also one called <em>PV</em> for strings. Perl internally converts between those two as needed when you use numbers inside of strings, or vise versa.</p>\n\n<p>You can get some debugging information about the internal representation of data with <code>Dump</code> from <a href=\"https://metacpan.org/pod/Devel::Peek\" rel=\"nofollow noreferrer\">Devel::Peek</a>.</p>\n\n<pre><code>use Devel::Peek;\n\nDump(\"01\");\nDump(01);\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>SV = PV(0x19560d0) at 0x19327d0\n  REFCNT = 1\n  FLAGS = (POK,READONLY,IsCOW,pPOK)\n  PV = 0x1c94fd0 \"01\"\\0\n  CUR = 2\n  LEN = 10\n  COW_REFCNT = 0\nSV = IV(0x19739b0) at 0x19739c0\n  REFCNT = 1\n  FLAGS = (IOK,READONLY,pIOK)\n  IV = 1\n</code></pre>\n\n<p>As you can see, the first one is a string, and the second one is a number. \nBut if we do this</p>\n\n<pre><code>print \"01\" eq 01;\n</code></pre>\n\n<p>there is no output, because the <code>01</code> is an integer and will be converted to <code>\"1\"</code> for comparison. Since the <code>0</code> of <code>\"01\"</code> is not equal to <code>1</code>, nothing gets printed.</p>\n\n<hr>\n\n<p>If the values of your data structures are more complex, you need to walk the structure. Each type of element needs to have its own handling. There could be array references, hash references, scalar references, scalars, glob references, <a href=\"http://perldoc.perl.org/Scalar/Util.html#dualvar\" rel=\"nofollow noreferrer\">dualvars</a> and so on. There might be objects that you want to treat specially.</p>\n\n<p>I suggest taking a look at how <a href=\"https://metacpan.org/pod/Test::Deep\" rel=\"nofollow noreferrer\">Test::Deep</a> implements this. If you decide to use it in production code (and not a unit test), you can use <a href=\"https://metacpan.org/pod/Test::Deep::NoTest\" rel=\"nofollow noreferrer\">Test::Deep::NoTest</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1510668645, "creation_date": 1510668645, "answer_id": 47287906, "question_id": 47283969, "link": "https://stackoverflow.com/questions/47283969/compare-values-of-two-hashes-with-mixed-types/47287906#47287906", "title": "Compare values of two hashes with mixed types", "body": "<p>You can <a href=\"http://perldoc.perl.org/Scalar/Util.html#looks_like_number\" rel=\"nofollow noreferrer\"><code>use Scalar::Util qw( looks_like_number );</code></a> to determine if the value is a number or a string. <code>Scalar::Util</code> is a standard module that is included with Perl. For a list of standard modules, see <a href=\"http://perldoc.perl.org/perlmodlib.html\" rel=\"nofollow noreferrer\"><code>perldoc perlmodlib</code></a>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# always use these two\nuse strict;\nuse warnings;\n\n# handle errors in open and close\nuse autodie; # See http://perldoc.perl.org/autodie.html\n\nuse Scalar::Util  qw( looks_like_number );\n\nmy $hash1={\"key_str\"=&gt;\"a string\", \"key_int\"=&gt;4};\nmy $hash2={\"key_str\"=&gt;\"b string\", \"key_int\"=&gt;2};\n\nforeach my $key ( keys(%$hash1) ) {\n    if( looks_like_number( $hash1-&gt;{$key} ) &amp;&amp; looks_like_number( $hash2-&gt;{$key} ) ){\n        if ($hash1-&gt;{$key} != $hash2-&gt;{$key}) {\n            print \"number value of $key is different\\n\";\n        }\n    }else{\n        if ($hash1-&gt;{$key} ne $hash2-&gt;{$key}) {\n            print \"string value of $key is different\\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1511517087, "creation_date": 1511517087, "answer_id": 47470558, "question_id": 47283969, "link": "https://stackoverflow.com/questions/47283969/compare-values-of-two-hashes-with-mixed-types/47470558#47470558", "title": "Compare values of two hashes with mixed types", "body": "<p>I've written a program that doesn't use any module. I've tested below program for many cases, worked fine, but if you find any case where it fails then please let me know.</p>\n\n<p>Always use <code>ne</code> to compare if you are not sure of datatype to be compared. <code>!=</code> works only for integers, <code>ne</code> for integers and strings both.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nmy $hash1 = {\n    'key1' =&gt; 'value1',\n    'key2' =&gt; [1, 2, 2],\n    'key3' =&gt; {1=&gt;1, 2=&gt; [5, 7]},\n};\n\nmy $hash2 = {\n    'key1' =&gt; 'value1',\n    'key2' =&gt; [1, 2, 2],\n    'key3' =&gt; {1=&gt;1, 2=&gt; [5, 7]},\n};\n\nmy $is_same = 0;\n$is_same = compare($hash1, $hash2);\n\nif ($is_same) {\n    say \"Same\";\n} else {\n    say \"Not same\";\n}\n\nsub compare {\n    my ($value1, $value2) = @_;\n    my $is_same = 1;\n\n    if (ref($value1) eq \"ARRAY\") {\n        if (is_same_sized_array($value1, $value2)) {\n            foreach (my $i = 0; $i &lt; @$value1; $i++) {\n                if (ref $value1-&gt;[$i] eq ref $value2-&gt;[$i]) {\n                    $is_same = compare($value1-&gt;[$i], $value2-&gt;[$i]);\n                    return 0 unless $is_same;\n                } else {\n                    return 0;\n                }\n            }\n        } else {\n            return 0;\n        }\n    } elsif (ref($value1) eq \"HASH\") {\n        if (is_same_sized_array([keys %$value1], [keys %$value2])) {\n            foreach my $key (sort keys %$value1) {\n                if (exists $value2-&gt;{$key} &amp;&amp; ref $value1-&gt;{$key} eq ref $value2-&gt;{$key}) {\n                    $is_same = compare($value1-&gt;{$key}, $value2-&gt;{$key});\n                    return 0 unless $is_same;\n                } else {\n                    return 0;\n                }\n            }\n        } else {\n            return 0;\n        }\n    } else {\n        if ($value1 ne $value2) {\n            return 0;\n        }\n    }\n    return $is_same;\n}\n\nsub is_same_sized_array {\n    my ($arr1, $arr2) = @_;\n    return (@$arr1 == @$arr2) || 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1073, "user_id": 2232573, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/207cb35beb3a38a12e8ec83fd12511f0?s=128&d=identicon&r=PG", "display_name": "nurp", "link": "https://stackoverflow.com/users/2232573/nurp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 1, "accepted_answer_id": 47284375, "answer_count": 3, "score": 7, "last_activity_date": 1511517087, "creation_date": 1510657125, "question_id": 47283969, "link": "https://stackoverflow.com/questions/47283969/compare-values-of-two-hashes-with-mixed-types", "title": "Compare values of two hashes with mixed types", "body": "<p>I want to compare the hash if the key-value pairs are same in the second hash. I don't want to use smartmatch as it gives warnings. </p>\n\n<p>What is the best way to compare two hashes with integers,strings and maybe also arrays in it?</p>\n\n<pre><code>use warnings;\nuse diagnostics;\n\nmy $hash1={\"key_str\"=&gt;\"a string\", \"key_int\"=&gt;4};\nmy $hash2={\"key_str\"=&gt;\"b string\", \"key_int\"=&gt;2};\n\nforeach my $key ( keys(%$hash1) ) {\n    if ($hash1-&gt;{$key} != $hash2-&gt;{$key}) {\n        print($key);\n    }\n}\n</code></pre>\n\n<p>the output as expected is:</p>\n\n<pre><code>Argument \"b string\" isn't numeric in numeric ne (!=) at hash_compare.pl line 8 (#1)\n    (W numeric) The indicated string was fed as an argument to an operator\n    that expected a numeric value instead.  If you're fortunate the message\n    will identify which operator was so unfortunate.\n\nArgument \"a string\" isn't numeric in numeric ne (!=) at hash_compare.pl line 8 (#1)\n</code></pre>\n"}, {"tags": ["perl", "hash", "scalar"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1510644539, "post_id": 47279188, "comment_id": 81510261, "body": "hash buckets used / hash buckets allocated"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1510644598, "post_id": 47279188, "comment_id": 81510282, "body": "This is not generally a useful feature, except to see if the hash is empty or not."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1510644685, "post_id": 47279188, "comment_id": 81510332, "body": "The fat comma <code>=&gt;</code> in your second example is equivalent to a regular comma <code>,</code> and is often used in hash declarations for readability."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 3, "creation_date": 1510658928, "post_id": 47279188, "comment_id": 81519097, "body": "Downvoting this question is a disservice to the community. It has a useful title, simple description, and the link to the duplicated question is likely to help people who come from Google."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1510711562, "post_id": 47279188, "comment_id": 81547973, "body": "Not an exact duplicate: this questions seems to me asking how to assign a hash to a scalar variable; knowing what is actually happening when they try doesn&#39;t tell them how to do it correctly"}, {"owner": {"reputation": 31, "user_id": 7998041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be06d66fc7900b56e1b5610339dd91?s=128&d=identicon&r=PG&f=1", "display_name": "tester unknown", "link": "https://stackoverflow.com/users/7998041/tester-unknown"}, "reply_to_user": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1510735918, "post_id": 47279188, "comment_id": 81556780, "body": "Thanks @giusti , ysth and xxfelixxx. And giusti your response gives a hope to new learners like me."}], "owner": {"reputation": 31, "user_id": 7998041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be06d66fc7900b56e1b5610339dd91?s=128&d=identicon&r=PG&f=1", "display_name": "tester unknown", "link": "https://stackoverflow.com/users/7998041/tester-unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1510720502, "answer_count": 0, "score": 1, "last_activity_date": 1510711687, "creation_date": 1510641604, "last_edit_date": 1510711687, "question_id": 47279188, "link": "https://stackoverflow.com/questions/47279188/how-does-perl-handle-a-hash-assignment-to-a-scalar-variable", "closed_reason": "Duplicate", "title": "How does Perl handle a hash assignment to a scalar variable?", "body": "<p>Can anyone explain what happened in background for this code?\nCode: </p>\n\n<pre><code>%d=('sa',1);\n$x=%d;\nprint \"$x\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1/8\n</code></pre>\n\n<p>Code2:</p>\n\n<pre><code>%d=('sa',1,\"da\"=&gt;2,\"daa\",3);\n$x=%d;\nprint \"$x\";\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>3/8\n</code></pre>\n"}, {"tags": ["perl", "winapi", "windows-installer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510651486, "post_id": 47276171, "comment_id": 81514091, "body": "When you look at the file properties, does it show that information in the details? (I don&#39;t remember what those tabs and things are called, and I don&#39;t have access to a Windows machine, but I think you should be able to see this info). Maybe it&#39;s really just missing from the file. Try a different file and see if the same code works."}, {"owner": {"reputation": 309, "user_id": 6461660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9gYUE.jpg?s=128&g=1", "display_name": "Oneill", "link": "https://stackoverflow.com/users/6461660/oneill"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510653294, "post_id": 47276171, "comment_id": 81515384, "body": "Thanks for your answer. I have tried to read the information of msi file and the informations are inside. I have tried the code with an other msi file and I have the same problem."}, {"owner": {"reputation": 309, "user_id": 6461660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9gYUE.jpg?s=128&g=1", "display_name": "Oneill", "link": "https://stackoverflow.com/users/6461660/oneill"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510654225, "post_id": 47276171, "comment_id": 81516022, "body": "I have edited. Thanks for your time."}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 6461660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9gYUE.jpg?s=128&g=1", "display_name": "Oneill", "link": "https://stackoverflow.com/users/6461660/oneill"}, "edited": false, "score": 0, "creation_date": 1511363309, "post_id": 47296022, "comment_id": 81830394, "body": "Thanks for your answer."}], "tags": [], "owner": {"reputation": 19184, "user_id": 3261150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0821e1dca957dda1214f1d273a08e161?s=128&d=identicon&r=PG&f=1", "display_name": "PhilDW", "link": "https://stackoverflow.com/users/3261150/phildw"}, "is_accepted": false, "score": 0, "last_activity_date": 1510697219, "creation_date": 1510697219, "answer_id": 47296022, "question_id": 47276171, "link": "https://stackoverflow.com/questions/47276171/read-msi-file-in-perl/47296022#47296022", "title": "Read msi file in perl", "body": "<p>The ProductCode of an MSI file is in a table called Properties inside the MSI file, which is a relational database. It's not a file property. This post should help:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31919064/powershell-get-the-msi-product-code-out-of-a-msi-file-without-installing\">PowerShell: Get the MSI product code out of a MSI file without installing?</a></p>\n\n<p>because it outlines the various calls that need to be made, which are basically to open the database, do an OpenView with the SQL query \"\"SELECT Value FROM Property WHERE Property = 'ProductCode' and so on, and similar here:</p>\n\n<p><a href=\"https://codereview.stackexchange.com/questions/143304/get-productcode-from-msi-file-using-dtf-in-c\">https://codereview.stackexchange.com/questions/143304/get-productcode-from-msi-file-using-dtf-in-c</a></p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6461660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9gYUE.jpg?s=128&g=1", "display_name": "Oneill", "link": "https://stackoverflow.com/users/6461660/oneill"}, "is_accepted": true, "score": 0, "last_activity_date": 1511363271, "creation_date": 1511363271, "answer_id": 47437978, "question_id": 47276171, "link": "https://stackoverflow.com/questions/47276171/read-msi-file-in-perl/47437978#47437978", "title": "Read msi file in perl", "body": "<p>I find the solution. I add call at \"populateTable\" function, so the code is:</p>\n\n<pre><code>use strict;\nuse warnings FATAL =&gt; 'all';\nuse Win32::MSI::DB qw(Win32::MSI::DB::MSIDBOPEN_READONLY);\nuse Win32::MSI::HighLevel;\nuse Data::Dumper;\nmy $msi = Win32::MSI::HighLevel-&gt;new (-file =&gt; \"Firefox.msi\", -mode =&gt; $Win32::MSI::DB::MSIDBOPEN_READONLY) or die \"error $!\";\n$msi-&gt;populateTable();\nmy $productCode = $msi-&gt;getProductCode;\nmy $product = $msi-&gt;getProduct;\n\nprint Dumper  $productCode;\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 6461660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9gYUE.jpg?s=128&g=1", "display_name": "Oneill", "link": "https://stackoverflow.com/users/6461660/oneill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 47437978, "answer_count": 2, "score": 3, "last_activity_date": 1511363271, "creation_date": 1510622315, "last_edit_date": 1510654540, "question_id": 47276171, "link": "https://stackoverflow.com/questions/47276171/read-msi-file-in-perl", "title": "Read msi file in perl", "body": "<p>I would like to read an msi file. I use the library Win32 :: MSI :: HighLevel but this one sends me undef all the time.</p>\n\n<p>My code: </p>\n\n<pre><code>use strict;\nuse warnings FATAL =&gt; 'all';\nuse Win32::MSI::DB qw(Win32::MSI::DB::MSIDBOPEN_READONLY);\nuse Win32::MSI::HighLevel;\nuse Data::Dumper;\nmy $msi = Win32::MSI::HighLevel-&gt;new (-file =&gt; \"Firefox.msi\", -mode =&gt; $Win32::MSI::DB::MSIDBOPEN_READONLY) or die \"error $!\";\nmy $productCode = $msi-&gt;getProductCode;\nmy $product = $msi-&gt;getProduct;\n\nprint Dumper  $productCode;\n</code></pre>\n\n<p>The <code>$product</code> returns <code>': - '</code> and <code>$productCode</code> is undef . </p>\n\n<p>I have checked the information of msi file in the Windows file properties and verified the information are inside. I have tried the code with another msi file and I have the same problem. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1510602674, "post_id": 47272090, "comment_id": 81495730, "body": "Please show some complete input lines. Do they contain multiple columns as in <code>&quot;1&#47;1:0,13&quot;,&quot;1&#47;1:0,14&quot;,&quot;1&#47;1:0,30&quot;</code>? How are these columns separated? By comma <code>,</code>? Are they surrounded by quotes <code>&quot;</code>? And why do you want to use <code>egrep</code> from a Perl script? Perl will be much better in this case than <code>egrep</code>."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510603167, "post_id": 47272090, "comment_id": 81496014, "body": "Yes, multiple columns separated by tab but there is multi-line header as well. The number of columns may be different in each file. There are no quotes in the file. the lines look like this 0/0:0,0 0/0:0,0 0/0:0,0 0/0:0,0 0/0:0,10 when i print on command line. Other suggestions are welcome. thank you."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510604713, "post_id": 47272090, "comment_id": 81496835, "body": "complete input line: chr7    55242417        .       ACTCTGGATCCCAGAAGGTGAGAAAGTTAAAATTCCCGTCGCTATCAAGGAATTAAGAGA&zwnj;&#8203;AGC AACTCTGGATCCCAGAAGGTGAGAAAGTTAAAATTCCCGT                                                                                                     CGCTATCAA       .       PASS    END=55242479;HOMLEN=0;SVLEN=-62;SVTYPE=RPL;NTLEN=48     GT:AD   0/0:0,0 0/0:0,0 0/0:0,0 0/0:0,0 0/0:0,10                                                                                                     /0:0,0"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510604978, "post_id": 47272090, "comment_id": 81496966, "body": "is it possible to do this in one line with Perl? Or you have to open each file read in line by line and split by tab? thanks"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510605106, "post_id": 47272090, "comment_id": 81497049, "body": "Of course. The line will be a bit long and probably not easy to read, though. But why this restriction? You already have a Perl script! Why don&#39;t you stick with that?"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510605212, "post_id": 47272090, "comment_id": 81497099, "body": "i don&#39;t understand how it is possible to do this without opening and reading the file line by line.  Could you please demonstrate."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510612123, "post_id": 47272090, "comment_id": 81500509, "body": "<i>&quot;I prefer to use egrep and not to read in the file&quot;</i> Do you realise that <code>egrep</code> also has to &quot;read the file&quot;? There is no way to filter data without reading it!"}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1510609364, "post_id": 47273859, "comment_id": 81499264, "body": "I&#39;m not able to use List::Util::min."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 1, "creation_date": 1510612440, "post_id": 47273859, "comment_id": 81500639, "body": "@user3781528: Why can&#39;t you use <code>List::Util::min</code>? The line <code>use List::Utils;</code> should be <code>use List::Util ();</code>\u2014does that solve your problem?"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1510612716, "post_id": 47273859, "comment_id": 81500758, "body": "i was able to use use List::Util qw( min max );"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 2, "last_activity_date": 1510618692, "last_edit_date": 1510618692, "creation_date": 1510608589, "answer_id": 47273859, "question_id": 47272090, "link": "https://stackoverflow.com/questions/47272090/removing-rows-where-the-number-of-interest-is-below-cut-off-perl/47273859#47273859", "title": "Removing rows where the number of interest is below cut-off (Perl)", "body": "<p><code>egrep</code> is the wrong tool for this purpose as it can't do math within its regular expression.\nBecause you already have a Perl script you are better off using Perl commands to achieve your goal.</p>\n\n<p>Unfortunately you have to open and read the file line by line to do so, but that is exactly what <code>egrep</code> does. How else could it judge the lines?</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse List::Util;\n\nsub filter_lines\n{\n    my $in_filename  = shift;\n    my $out_filename = shift;\n    open( my $fhin,  '&lt;', $in_filename )  or die \"cannot open $in_filename: $!\\n\";\n    open( my $fhout, '&gt;', $out_filename ) or die \"cannot open $out_filename: $!\\n\";\n    while ( my $line = &lt;$fhin&gt; ) {\n\n        next if ( $line =~ /SVLEN=-1;|SVLEN=-2;/ );\n        if ( my @numbers_of_interest = ( $line =~ m/\\d+\\/\\d+:0,(\\d+)/g ) ) {\n            next unless List::Util::min(@numbers_of_interest) &lt; 20;\n        }\n\n        print $fhout $line;\n\n    }\n    close($fhin);\n    close($fhout);\n}\n\nfilter_lines( $my_vcf, $my_new_vcf );\n</code></pre>\n\n<p>Because I have no exact input line the pattern for the <code>@numbers_of_interest</code> might be a bit inaccurate and need improvement. There's also much room for optimization in case this code turns out to be slow.</p>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 47273859, "answer_count": 1, "score": -3, "last_activity_date": 1510618692, "creation_date": 1510601504, "last_edit_date": 1510603849, "question_id": 47272090, "link": "https://stackoverflow.com/questions/47272090/removing-rows-where-the-number-of-interest-is-below-cut-off-perl", "title": "Removing rows where the number of interest is below cut-off (Perl)", "body": "<p>I have files with several columns that contain text in the following format \u201cnumber/number:zero,number_of_interest\u201d. Example: \u201c1/1:0,13\u201d.</p>\n\n<p>I need to remove rows if the number of interest is less than 20 in any of the columns. \nI prefer to use egrep and not to read in the file but not sure how to evaluate the number of interest in each column in a single statement.</p>\n\n<p>I\u2019m also removing rows that contain SVLEN=-1 or SVLEN=-2 and it seems to be working well with egrep:</p>\n\n<pre><code>$cmd2 = `egrep -v 'SVLEN=-1;|SVLEN=-2;' $my_vcf &gt; $my_new_vcf`; print $cmd1;\n</code></pre>\n\n<p>I've tried the following but it did not work:</p>\n\n<pre><code>my $cmd2 = `egrep -v 'SVLEN=-1;|SVLEN=-2;|(\\,(\\d+) &lt; 20)' $my_vcf &gt; $my_new_vcf`; print $cmd2;\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "loops", "input"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1510670476, "post_id": 47270855, "comment_id": 81527237, "body": "Alternatively, you could use <a href=\"http://search.cpan.org/~dconway/IO-Prompter-0.004014/lib/IO/Prompter.pm\" rel=\"nofollow noreferrer\"><code>IO::Prompter</code></a> which offers a way to do this: <code>$first = prompt &quot;What is your input?&quot;, -guarantee =&gt; \\@stops</code>. (You can&#39;t print the exact same error message as you do now, but still, it can be useful. There are a lot of other options such as autocompletion, prettyfication, yes/no answers, etc.)"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 8913611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99846733bc45c981c7d1e50b765da58c?s=128&d=identicon&r=PG&f=1", "display_name": "B.M. Corwen", "link": "https://stackoverflow.com/users/8913611/b-m-corwen"}, "edited": false, "score": 0, "creation_date": 1510597412, "post_id": 47270975, "comment_id": 81492881, "body": "Thank you! This worked for me - it was the &quot;while(1)&quot;, instead of &quot;do&quot;, and the &quot;my $first&quot; in my &quot;else&quot; block."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 167, "user_id": 8913611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99846733bc45c981c7d1e50b765da58c?s=128&d=identicon&r=PG&f=1", "display_name": "B.M. Corwen", "link": "https://stackoverflow.com/users/8913611/b-m-corwen"}, "edited": false, "score": 0, "creation_date": 1510658472, "post_id": 47270975, "comment_id": 81518808, "body": "@B.M.Corwen if this has answered your question, then you can click the &#39;tick&#39; next to it to flag it as such."}], "tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": true, "score": 3, "last_activity_date": 1510597126, "creation_date": 1510597126, "answer_id": 47270975, "question_id": 47270855, "link": "https://stackoverflow.com/questions/47270855/how-to-prompt-the-user-until-the-input-matches-any-element-of-an-array/47270975#47270975", "title": "How to prompt the user until the input matches any element of an array?", "body": "<p>You were pretty good already, just two things.\na) if you use <code>my $first</code> in that else-block, you will not be able to check it in the next iteration of the loop. Speaking of loop ...\nb) <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">do</a> doesn't run in a loop, which is what you'd want.</p>\n\n<pre><code>print \"What is your input?\\n\";\nmy $first = &lt;STDIN&gt;;\nchomp $first;\nwhile(1) {\n    if (grep { $_ eq $first } @stops) {\n        last;\n    }\n    else {\n        print \"Invalid stop $first. Enter input again\\n\";\n        $first = &lt;STDIN&gt;;\n        chomp $first;\n    }\n}\n</code></pre>\n\n<p>Will do that, provided that you've defined <code>@stops</code> somewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1510667377, "creation_date": 1510667377, "answer_id": 47287510, "question_id": 47270855, "link": "https://stackoverflow.com/questions/47270855/how-to-prompt-the-user-until-the-input-matches-any-element-of-an-array/47287510#47287510", "title": "How to prompt the user until the input matches any element of an array?", "body": "<p></p>\n\n<p>I would use the <code>while</code> in the usual way, where the <code>readline</code> is the conditional expression. It helps people to understand your code if you use familiar idioms, and it means that the keyboard is read in only a single place</p>\n\n<p>It would look like this. Note that there's no need for the <code>if</code>...<code>else</code>, as the <code>last</code> exits the loop anyway</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @stops = qw/ a b c /;\n\nmy $stop;\n\nprint \"What is your input? \";\n\nwhile ( $stop = &lt;STDIN&gt; ) {\n    chomp $stop;\n\n    last if grep { $_ eq $stop } @stops;\n\n    print qq{Invalid stop \"$stop\". Enter input again: };\n}\n\nsay qq{Found \"$stop\"};\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$perl stop.pl\nWhat is your input? d\nInvalid stop \"d\". Enter input again: x\nInvalid stop \"x\". Enter input again: b\nFound \"b\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2335, "user_id": 3838167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dceb2c7a1db903744c855b0626108273?s=128&d=identicon&r=PG&f=1", "display_name": "Mars", "link": "https://stackoverflow.com/users/3838167/mars"}, "edited": false, "score": 3, "creation_date": 1574040972, "post_id": 58906873, "comment_id": 104076553, "body": "Please add some explanation to your code. Code-only answers are not very helpful"}], "tags": [], "owner": {"reputation": 1, "user_id": 12388855, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c40ca11d2cab718bb527aa9c0e6aaaa3?s=128&d=identicon&r=PG", "display_name": "vasanth", "link": "https://stackoverflow.com/users/12388855/vasanth"}, "is_accepted": false, "score": -1, "last_activity_date": 1574040267, "creation_date": 1574040267, "answer_id": 58906873, "question_id": 47270855, "link": "https://stackoverflow.com/questions/47270855/how-to-prompt-the-user-until-the-input-matches-any-element-of-an-array/58906873#58906873", "title": "How to prompt the user until the input matches any element of an array?", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings FATAL =&gt; 'all';\nmy $str1=\"xy\";\nmy $word='';\nmy @container=();\nwhile($word ne $str1){\n  print(\"Enter: \");\n  $word=&lt;STDIN&gt;;\n  chomp($word);\n  push(@container,$word,', ');\n}\nprint(@container);\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 8913611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99846733bc45c981c7d1e50b765da58c?s=128&d=identicon&r=PG&f=1", "display_name": "B.M. Corwen", "link": "https://stackoverflow.com/users/8913611/b-m-corwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 47270975, "answer_count": 3, "score": 0, "last_activity_date": 1574040267, "creation_date": 1510596691, "last_edit_date": 1510663804, "question_id": 47270855, "link": "https://stackoverflow.com/questions/47270855/how-to-prompt-the-user-until-the-input-matches-any-element-of-an-array", "title": "How to prompt the user until the input matches any element of an array?", "body": "<p>I'm writing a Perl program where I have to prompt the user for input until the input exists in an array <code>@stops</code> I created earlier. If the user input matches then the program stops prompting and stores it in the scalar variable <code>$first</code>.</p>\n\n<p>This is not my full code - I have <code>use strict;</code> and <code>use warnings;</code> in my code, and I have code from earlier that puts values into the array <code>@stops</code>.</p>\n\n<pre><code>print \"What is your input?\\n\";\nmy $first = &lt;STDIN&gt;;\nchomp $first;\n\ndo {\n\n    if ( grep { $_ eq $first } @stops ) {\n        last;\n    }\n    else {\n        print \"Invalid stop $first. Enter input again\\n\";\n        my $first = &lt;STDIN&gt;;\n        chomp $first;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "edited": false, "score": 0, "creation_date": 1510640373, "post_id": 47271068, "comment_id": 81508348, "body": "why only return a one line of db? when execute select * from tables;"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "edited": false, "score": 0, "creation_date": 1510660942, "post_id": 47271068, "comment_id": 81520512, "body": "@MemoR That seems to be a separate issue, unrelated to your question. If you look at the <a href=\"https://metacpan.org/pod/Mojo::mysql::Results\" rel=\"nofollow noreferrer\">Mojo::mysql::Results docs</a>, many ways to access the data in a result set are explained. The <code>-&gt;hash</code> method gets the next row of a result as a hash ref. You can use <code>-&gt;hashes</code> to get a collection of hash refs instead, or another method that suits your needs."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1510597477, "creation_date": 1510597477, "answer_id": 47271068, "question_id": 47270134, "link": "https://stackoverflow.com/questions/47270134/how-to-pass-result-to-html-in-mojolicious/47271068#47271068", "title": "How to pass result to HTML in Mojolicious?", "body": "<p>You never rendered your <code>index</code> template. To do so, call the <code>render</code> method on your controller. Any variables in your stash (or other arguments to the render function) are turned into variables in your template.</p>\n\n<p>So we would have something like this:</p>\n\n<pre><code>get '/index' =&gt; sub {\n    my $c  = shift;\n    ...\n    my $result = $db-&gt;query(...)-&gt;hash;\n    return $c-&gt;render(template =&gt; 'index', result =&gt; $result);\n};\n\n...\n\n__DATA__\n\n@@ index.html.ep\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;&lt;%= dumper $result %&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>(Here I've used the <code>dumper</code> helper so that the hash ref produces useful output, not just <code>HASH(0x123abc)</code>.)</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Mojolicious::Guides::Rendering\" rel=\"nofollow noreferrer\">Mojolicious::Guides::Rendering</a></li>\n<li><a href=\"https://metacpan.org/pod/Mojolicious::Controller#render\" rel=\"nofollow noreferrer\"><code>render()</code> in Mojolicious::Controller</a></li>\n</ul>\n"}], "owner": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 1, "accepted_answer_id": 47271068, "answer_count": 1, "score": 1, "last_activity_date": 1510597477, "creation_date": 1510594096, "last_edit_date": 1510596212, "question_id": 47270134, "link": "https://stackoverflow.com/questions/47270134/how-to-pass-result-to-html-in-mojolicious", "title": "How to pass result to HTML in Mojolicious?", "body": "<p>I need to pass the result of\n<a href=\"https://metacpan.org/pod/Mojo::mysql\" rel=\"nofollow noreferrer\"><code>Mojo::mysql</code></a>\nto <code>$variable</code> in HTML</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Mojolicious::Lite;\nuse Mojo::mysql;\n\nhelper mysql =&gt; sub {\n    state $pg = Mojo::mysql-&gt;new( 'mysql://mysql://sri:s3cret@localhost/db' )\n};\n\nget '/index' =&gt; sub {\n    my $c  = shift;\n    my $db = $c-&gt;mysql-&gt;db;\n    $db-&gt;query( 'select now() as time' )-&gt;hash;\n};\n\napp-&gt;start;\n\n__DATA__\n\n@@ index.html.ep\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;&lt;%= $db %&gt;&lt;/body&gt;\n&lt;/html&gt;`\n</code></pre>\n\n<p>I need to pass the result of <code>$db</code> to index, but I don't know how to this.</p>\n"}, {"tags": ["json", "perl", "boolean", "decoding"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1510578242, "post_id": 47264938, "comment_id": 81480618, "body": "Why do you want to do that? Those objects correctly evaluate as true and false within Perl."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1510584149, "post_id": 47264938, "comment_id": 81484439, "body": "You&#39;re using <code>Dumper</code> , have you tried just printing <code>$json-&gt;test_true</code> and <code>$json-&gt;test_false</code> ? They get correctly stringified to <code>1</code> and <code>0</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1510592197, "post_id": 47264938, "comment_id": 81489969, "body": "@ChatterOne that would be <code>$json-&gt;{test_true}</code> and <code>$json-&gt;{test_false}</code>. <code>$json</code> is just a hash, you cannot call methods on it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510597209, "post_id": 47264938, "comment_id": 81492788, "body": "I recommend that you use <a href=\"https://metacpan.org/pod/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\"><code>Cpanel::JSON::XS</code></a> instead, which is compatible (except that the bugs in <code>JSON::XS</code> have been fixed) and better in every way."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1510671090, "post_id": 47264938, "comment_id": 81527791, "body": "I&#39;m also interested in the reason for this. I <i>can</i> imagine use cases, though. Would be nice if <code>JSON::XS|PP|...</code> had an option for that. In <code>YAML::PP</code> you can configure it, for example."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1510878195, "post_id": 47264938, "comment_id": 81634958, "body": "@tinita: <code>JSON::XS::Boolean</code> objects will behave nicely for things like <code>if $val == 1</code> but you shouldn&#39;t be using them that way. <code>if $val</code> or <code>unless $val</code> is proper Perl, and the objects behave properly there too. You can also <code>print &quot;$val\\n&quot;</code> and get <code>1</code> or <code>0</code>. If anyone can find a way to distinguish between a <code>JSON::XS::Boolean</code> object and <code>1</code> or <code>0</code> (apart from <code>ref $val</code>) then you should say so as the intention is that they are indistinguishable."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510922715, "post_id": 47264938, "comment_id": 81653918, "body": "@Borodin Yes, in most cases you shouldn&#39;t have to care, but there are cases where you&#39;d want only plain values and no objects (e.g. passing to another serializer which doesn&#39;t want objects)"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1510923053, "post_id": 47264938, "comment_id": 81654116, "body": "@dimorphus Also note, that newer versions of JSON::XS return JSON::PP::Boolean objects now."}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": true, "score": 5, "last_activity_date": 1510580390, "creation_date": 1510580390, "answer_id": 47265683, "question_id": 47264938, "link": "https://stackoverflow.com/questions/47264938/perl-jsonxs-is-it-possible-to-force-boolean-decoding-as-1-0/47265683#47265683", "title": "Perl: JSON::XS Is it possible to force boolean decoding as 1/0?", "body": "<p>No. The values are blessed objects. They can only have the values allowed in JSON::XS::Boolean.</p>\n"}], "owner": {"reputation": 143, "user_id": 512114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c43350b9c62a8b35c5c4b2024c1beee?s=128&d=identicon&r=PG", "display_name": "dimorphus", "link": "https://stackoverflow.com/users/512114/dimorphus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 47265683, "answer_count": 1, "score": 4, "last_activity_date": 1510851724, "creation_date": 1510577996, "last_edit_date": 1510851724, "question_id": 47264938, "link": "https://stackoverflow.com/questions/47264938/perl-jsonxs-is-it-possible-to-force-boolean-decoding-as-1-0", "title": "Perl: JSON::XS Is it possible to force boolean decoding as 1/0?", "body": "<p>Package JSON::XS uses JSON::XS::Boolean objects to represent true/false. Is it possible to force decoding true/false json values as 1/0 Perl numbers?</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse JSON::XS;\nuse Data::Dumper;\n\nmy $json = decode_json(join('', &lt;DATA&gt;));\nprint Dumper $json;\n\n__DATA__\n{\n    \"test_true\": true,\n    \"test_false\": false\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'test_true' =&gt; bless( do{\\(my $o = 1)}, 'JSON::XS::Boolean' ),\n          'test_false' =&gt; bless( do{\\(my $o = 0)}, 'JSON::XS::Boolean' )\n        };\n</code></pre>\n\n<p>I want something like this after decode_json:</p>\n\n<pre><code>$VAR1 = {\n          'test_true' =&gt; 1,\n          'test_false' =&gt; 0\n        };\n</code></pre>\n\n<p>Reason: In some cases, it's hard to predict how JSON::XS::Boolean will be serialized with, for example, SOAP serializer or another one.</p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=1058198\" rel=\"nofollow noreferrer\">PerlMonks discussion</a>.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 1, "creation_date": 1510558264, "post_id": 47258929, "comment_id": 81468720, "body": "I don&#39;t know how to return an array ref from a command that returns a list. Would it be acceptable to do it as <code>return [`ping 1.2.3.4`];</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1510558331, "post_id": 47258929, "comment_id": 81468746, "body": "@newguy Yes, that would be a fine way to do it.  Another is to store the command&#39;s return in an array variable (say, <code>@ary</code>) -- if you need it elsewhere in the sub -- and then <code>return \\@ary;</code>"}, {"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1510558365, "post_id": 47258929, "comment_id": 81468768, "body": "Ok thanks. Wouldn&#39;t the @ary way create a copy though"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1510558598, "post_id": 47258929, "comment_id": 81468885, "body": "@newguy For one, those elements must be stored somewhere, either anonymously by <code>[ .. ]</code> or associated with a named variable by <code>@ary = .. </code>.  I don&#39;t know whether yet an extra copy is made in order to construct an array, but I&#39;d expect that it isn&#39;t When you <code>return \\@ary</code> no new copies are made.  I would expect that they are about the same."}, {"owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1510558652, "post_id": 47258929, "comment_id": 81468913, "body": "Ok. Thanks again I appreciate your help."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 0, "creation_date": 1510558764, "post_id": 47258929, "comment_id": 81468961, "body": "You can benchmark them.  Write two subs that return a (large!) array in these two ways, and time them using <a href=\"https://perldoc.perl.org/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a>. It&#39;s <i>very</i> simple to use. If there is an extra copy made you&#39;ll know that. Like with all benchmarks, watch out so you compare apples to apples :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "edited": false, "score": 1, "creation_date": 1510560659, "post_id": 47258929, "comment_id": 81469946, "body": "@newguy  I added an explanation of what happens with <code>\\foo()</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1558164736, "last_edit_date": 1558164736, "creation_date": 1510557514, "answer_id": 47258929, "question_id": 47258873, "link": "https://stackoverflow.com/questions/47258873/perl-get-reference-to-temp-list-returned-by-function-without-making-a-copy/47258929#47258929", "title": "perl get reference to temp list returned by function without making a copy?", "body": "<p>Make an anonymous array reference of the list that is returned</p>\n\n<pre><code>my $listref = [ foo() ];\n</code></pre>\n\n<p>But, can you not return an arrayref to start with?  That is better in general, too.</p>\n\n<hr>\n\n<p>What you attempted \"takes a reference of a list\" ... what one cannot do in the literal sense; a list stands for a mere collection of scalars in a program<sup>&dagger;</sup>, while a <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">reference can be taken</a> (my emphasis)</p>\n\n<blockquote>\n  <p>By using the backslash operator on a <strong>variable</strong>, <strong>subroutine</strong>, or <strong>value</strong>.</p>\n</blockquote>\n\n<p>and a \"list\" isn't either (with a subroutine we need syntax <code>\\&amp;sub_name</code>)</p>\n\n<p>However, with the <code>\\</code> operator a reference <em>is</em> taken, either to each element of the list if in list context </p>\n\n<pre><code>my @ref_of_LIST = \\( 1,2,3 );  #--&gt;  @ref_of_LIST: (\\1, \\2, \\3)\n</code></pre>\n\n<p>or to a scalar if in scalar context, which is what happens in your attempt. Since your sub returns a list of values, they are evaluated by the <a href=\"https://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">comma operator</a> and discarded, one by one, until the last one.  The reference is then taken of that scalar</p>\n\n<pre><code>my $ref_of_LIST = \\( 1,2,3 );  #--&gt; $ref_of_LIST: \\3\n</code></pre>\n\n<p>As it happens, all this applies without parens as well, with <code>\\foo()</code>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;See the last part of <a href=\"https://stackoverflow.com/a/56018151/4653379\">this post</a> (and links in it), for example</p>\n"}], "owner": {"reputation": 537, "user_id": 4889818, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6eff6321f38676111fedcac92f91a2b?s=128&d=identicon&r=PG&f=1", "display_name": "newguy", "link": "https://stackoverflow.com/users/4889818/newguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 47258929, "answer_count": 1, "score": 1, "last_activity_date": 1558164736, "creation_date": 1510557292, "question_id": 47258873, "link": "https://stackoverflow.com/questions/47258873/perl-get-reference-to-temp-list-returned-by-function-without-making-a-copy", "title": "perl get reference to temp list returned by function without making a copy?", "body": "<p>I have a function in perl that returns a list. It is my understanding that when foo() is assigned to list a copy is made:</p>\n\n<pre><code>sub foo() { return `ping 127.0.0.1` }\n\nmy @list = foo();\n</code></pre>\n\n<p>That <code>@list</code> then needs to be transferred to another list like <code>@oldlist = @list;</code> and another copy is made. So I was thinking can I just make a reference from the returned list like <code>my $listref = \\foo();</code> and then I can assign that reference, but that doesn't work.</p>\n\n<p>The function I'm working with runs a command that returns a pretty big list (the ping command is just for example purposes) and I have call it often so I want to minimize the copies if possible. what is a good way to deal with that?</p>\n"}, {"tags": ["database", "perl", "csv", "regex-negation"], "comments": [{"owner": {"reputation": 3, "user_id": 8722422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd04199ad8a805672a85952e663f595d?s=128&d=identicon&r=PG", "display_name": "kathleen", "link": "https://stackoverflow.com/users/8722422/kathleen"}, "edited": false, "score": 0, "creation_date": 1510532949, "post_id": 47255559, "comment_id": 81461848, "body": "My output looks like this...  &quot;Total farm value- potatoes (dollars x 1000)&quot;"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510551194, "post_id": 47255559, "comment_id": 81466042, "body": "I am not fully with your question. You remove the comma but want to put it back again?"}, {"owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "edited": false, "score": 0, "creation_date": 1510552452, "post_id": 47255559, "comment_id": 81466414, "body": "Have you looked into using join? ` perldoc join `"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510592192, "post_id": 47255559, "comment_id": 81489966, "body": "The regular way to allow commas within a data field is to surround the field with double quotes. <code>1,000</code> would become <code>&quot;1,000&quot;</code>. CPAN modules such as <code>Text::CSV</code> support this convention."}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": -2, "last_activity_date": 1510580751, "creation_date": 1510580751, "answer_id": 47265795, "question_id": 47255559, "link": "https://stackoverflow.com/questions/47255559/perl-parsing-csv-efficient-with-embedded-commas-and-adding-to-database/47265795#47265795", "title": "Perl Parsing CSV Efficient with Embedded Commas and Adding To Database", "body": "<p>For parsing CSV, use a CPAN module like <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\"><code>Text::CSV</code></a>. You can the use the regex on the values returned.</p>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 0, "last_activity_date": 1510640347, "creation_date": 1510640347, "answer_id": 47278896, "question_id": 47255559, "link": "https://stackoverflow.com/questions/47255559/perl-parsing-csv-efficient-with-embedded-commas-and-adding-to-database/47278896#47278896", "title": "Perl Parsing CSV Efficient with Embedded Commas and Adding To Database", "body": "<p>Firstly, there are a few CSV modules you can use to achieve this easily, however in some cases I know people do not have access to, or cannot install packages for reasons. Therefore, this should help if that is the case.</p>\n\n<p>If I am getting you correctly, you are trying to write fields from CSV, which has embedded commas.If this is the case, these imbedded comma fields should have parenthesis or quotes around them in order to ensure they are not seen as the CSV's comma delimited fields. We can then just grab all of the data in your CSV. In this case we will have a csv that uses parenthesis, quotes and both to display data that is using embedded commas:</p>\n\n<p>These show the CSV commas:</p>\n\n<pre><code>\"Potatoes 1,000\", (Tomatoes, 200), \"(GemSquash, 1,029.95)\"\n                ^                ^\n</code></pre>\n\n<p>These are embedded commas:</p>\n\n<pre><code>\"Potatoes 1,000\", (Tomatoes, 200), \"(GemSquash, 1,029.95)\"\n           ^               ^                  ^  ^\n</code></pre>\n\n<p>So the below will search and replace the data using the parenthesis and the double quotes to determine which are csv commas and which are embedded.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $string = '(Potatoes 1,000), \"Tomatoes, 200\", \"(GemSquash, 1,029.95)\"';\nmy $query = qr/(?: \"\\( ( [^()\"\"]* ) \\)\" |  \\( ( [^()]* ) \\) |  \" ( [^\"]* ) \" |  ( [^,]* ) ) , \\s* /x;\nmy @results = grep defined, \"$string,\" =~ /$query/g;\nprint \"$_\\n\" for @results;\n</code></pre>\n\n<p><strong><em>RESULTS</em></strong></p>\n\n<pre><code>Potatoes 1,000\nTomatoes, 200\nGemSquash, 1,029.95\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8722422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd04199ad8a805672a85952e663f595d?s=128&d=identicon&r=PG", "display_name": "kathleen", "link": "https://stackoverflow.com/users/8722422/kathleen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 47278896, "answer_count": 2, "score": -1, "last_activity_date": 1510640347, "creation_date": 1510532876, "last_edit_date": 1510541102, "question_id": 47255559, "link": "https://stackoverflow.com/questions/47255559/perl-parsing-csv-efficient-with-embedded-commas-and-adding-to-database", "title": "Perl Parsing CSV Efficient with Embedded Commas and Adding To Database", "body": "<p>How do you apply regular expressions to an array. While reading in my csv file I applied this...</p>\n\n<pre><code>        s/, /- /g;\n        s/1,000/1000/g;\n</code></pre>\n\n<p>But after I put the data in my multidimensional array I don't know how to insert the commas back to my fields.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510530371, "post_id": 47255219, "comment_id": 81461228, "body": "I find the example to agree with the description: &quot;<i>a string of bytes</i>&quot; (<code>$mem</code>) is converted to &quot;<i>values</i>&quot; (hex).  Also, &quot;<i>binary format</i>&quot; is a fairly broad term -- does &quot;<i>byte sequence</i>&quot; agree with what you mean by it?  Can you explain a little better what is unclear?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510530501, "post_id": 47255219, "comment_id": 81461265, "body": "(The example is on <code>unpack</code> -- so the opposite of your interpretation of <code>pack</code>, right?)"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510530944, "post_id": 47255219, "comment_id": 81461363, "body": "so yes, description of what I read is on pack. But then example shows unpack doing what I thought pack would be doing. What am I missing here???"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510531582, "post_id": 47255219, "comment_id": 81461507, "body": "I guess this is what I am missing &quot;Assuming that the variable $mem holds a sequence of bytes that we&#39;d like to inspect without assuming anything about its meaning, we can write&quot;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1510531709, "post_id": 47255219, "comment_id": 81461540, "body": "Yes, imagine somtething like <code>my $mem = join &quot;&quot;, map chr, 0, 1, 31, 32, 63;</code> preceding the snippet."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510533721, "post_id": 47255219, "comment_id": 81462012, "body": "Actually I am sorry, this is still confusing while reading this.  my $s = pack( &#39;H2&#39; x 10, 30..39 );    print &quot;$s\\n&quot;;        To me, this is super confusing. I feel like I could have also used unpack to get the same data??? no? This is super confusing. I wish there was better example of this. I feel like this is just converting something from to using specified format(Hex in this case).. Actually I think i get it.. so.. pack says to convert  these characters which are in which format into native machine format?   unpack says to convert  specified character using specified format. Correct?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510569070, "post_id": 47256319, "comment_id": 81475196, "body": "Why is the <code>s</code> in the <code>unpack &#39;s A6&#39;</code> lower case?"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 7, "last_activity_date": 1510582227, "last_edit_date": 1510582227, "creation_date": 1510540474, "answer_id": 47256319, "question_id": 47255219, "link": "https://stackoverflow.com/questions/47255219/perl-perlpacktut-not-making-sense-for-me/47256319#47256319", "title": "perl perlpacktut not making sense for me", "body": "<p>The <code>pack</code> function puts one or more things together in a single string. It represents things as octets (bytes) in a way that it can unpack reliably in some other program. That program might be far away (like, the distance to Mars far away). It doesn't matter if it starts as something human readable or not. That's not the point.</p>\n\n<p>Consider some task where you have a numeric ID that's up to about 65,000 and a string that might be up to six characters.</p>\n\n<pre><code>print pack 'S A6', 137, $ARGV[0];\n</code></pre>\n\n<p>It's easier to see what this is doing if you run it through a hex dumper as you run it:</p>\n\n<pre><code>$ perl pack.pl Snoopy | hexdump -C\n00000000  89 00 53 6e 6f 6f 70 79                           |..Snoopy|\n</code></pre>\n\n<p>The first column counts the position in the output so ignore that. Then the first two octets represent the <code>S</code> (short, 'word', whatever, but two octets) format. I gave it the number 137 and it stored that as 0x8900. Then it stored 'Snoopy' in the next six octets. </p>\n\n<p>Now try it with a shorter name:</p>\n\n<pre><code>$ perl test.pl Linus | hexdump -C\n00000000  89 00 4c 69 6e 75 73 20                           |..Linus |\n</code></pre>\n\n<p>Now there's a space character at the end (0x20). The packed data still has six octets. Try it with a longer name:</p>\n\n<pre><code>$ perl test.pl 'Peppermint Patty' | hexdump -C\n00000000  89 00 50 65 70 70 65 72                           |..Pepper|\n</code></pre>\n\n<p>Now it truncates the string to fit the six available spaces.</p>\n\n<p>Consider the case where you immediately send this through a socket or some other way of communicating with something else. The thing on the other side knows it's going to get eight octets. It also knows that the first two will be the short and the next six will be the name. Suppose the other side stored that it <code>$tidy_little_package</code>. It gets the separate values by unpacking them:</p>\n\n<pre><code>my( $id, $name ) = unpack 'S A6', $tidy_little_package;\n</code></pre>\n\n<p>That's the idea. You can represent many values of different types in a binary format that's completely reversible. You send that packed string wherever it needs to be used.</p>\n\n<p>I have many more examples of <code>pack</code> in <a href=\"https://www.learning-perl.com\" rel=\"nofollow noreferrer\">Learning Perl</a> and <a href=\"https://www.programmingperl.org\" rel=\"nofollow noreferrer\">Programming Perl</a>.</p>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1510720580, "creation_date": 1510529725, "last_edit_date": 1510720580, "question_id": 47255219, "link": "https://stackoverflow.com/questions/47255219/perl-perlpacktut-not-making-sense-for-me", "title": "perl perlpacktut not making sense for me", "body": "<p>I am REALLY confused about pack and unpack definition for perl.\nBelow is the excerpt from perl.doc.org</p>\n\n<blockquote>\n  <p>The pack function converts values to a byte sequence containing \n      representations according to a given specification, the so-called \n      \"template\" argument. unpack is the reverse process, deriving some values \n      from the contents of a string of bytes.</p>\n</blockquote>\n\n<p>So I get the idea that pack takes human readable things(such as A) and turn it into binary format. Am I wrong on this interpretation??</p>\n\n<p>So that is my interpreation but then same doc immediately proceeds to put this example which put my understanding exactly the opposite.</p>\n\n<pre><code>my( $hex ) = unpack( 'H*', $mem );\nprint \"$hex\\n\";\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 2, "creation_date": 1510526515, "post_id": 47254783, "comment_id": 81460155, "body": "That. Or return a hashref in the first place."}, {"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 1, "creation_date": 1510621010, "post_id": 47254783, "comment_id": 81503116, "body": "It seems artificial to create a reference only to dereference it... If that&#39;s the only way then so be it. I wonder what the overhead could be."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1510630282, "post_id": 47254783, "comment_id": 81505383, "body": "@Georg Well, I agree.  But your sub returns a flat list, while you don&#39;t want to create another hash, to avoid later copying. So then you need a reference, but then you need a value from the structure as well.  The solution is to return a hashref to start with.  Other than being &quot;better&quot; this may actually save a data copy, since the function returns the pointer while the way you have it it returns the whole list.  I say &quot;may&quot; since I am not entirely sure whether there are some optimizations in place, but I don&#39;t think that there can be."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1510632915, "post_id": 47254783, "comment_id": 81506070, "body": "@Georg I added a comment on returning by reference."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 10, "last_activity_date": 1512887334, "last_edit_date": 1512887334, "creation_date": 1510526104, "answer_id": 47254783, "question_id": 47254721, "link": "https://stackoverflow.com/questions/47254721/perl-can-i-skip-the-intermediate-hash-variable-in-this-case/47254783#47254783", "title": "Perl: can I skip the intermediate hash variable in this case?", "body": "<p>Create a hashref out of the returned list, which you can then dereference</p>\n\n<pre><code>my $value = { routineReturningHash() }-&gt;{somekey};\n</code></pre>\n\n<hr>\n\n<p>In what you tried, the <code>${ ... }</code> imposes the scalar context inside. <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">From perlref</a> (my emphasis)</p>\n\n<blockquote>\n  <p><strong>2.</strong> &nbsp;\n  Anywhere you'd put an identifier (or chain of identifiers) as part of a variable or subroutine name, you can replace the identifier with a BLOCK <strong>returning a reference</strong> of the correct type.</p>\n</blockquote>\n\n<p>In the scalar context the hash is evaluated to a string with fraction <a href=\"https://stackoverflow.com/a/7428025/4653379\">involving buckets</a>; not a hashref.</p>\n\n<hr>\n\n<p><strong>Update</strong> &nbsp; I take it that there are design reasons for returning a hash as a flat list. If that isn't the case, then the clear solution is to just return a hashref from the sub. </p>\n\n<p>That also saves a data copy: When you return a hash the scalars (keys and values) need be copied, to provide a list to the caller; when you return a reference only that one scalar is returned.</p>\n\n<p>As for performance benefits ... if you can see a difference, you either have massive hashes which should be handled by reference anyway, or too many function calls what may need refactoring.</p>\n\n<p>To return by reference you can</p>\n\n<ul>\n<li><p>form and work with a hash in the sub and then <code>return \\%hash;</code></p></li>\n<li><p>form a hashref directly <code>return { key =&gt; 'value', ... };</code></p></li>\n<li><p>If you have a big hash to work with, pass its reference and work with that</p>\n\n<pre><code>sub work_by_ref {    \n    my ($hr) = @_;\n    $hr-&gt;{key} = 'value';\n    return 1;\n}\n\nmy %hash;\nwork_by_ref(\\%hash);\nsay \"$_ =&gt; $hash{$_}\" for sort keys %hash;\n</code></pre>\n\n<p>Be careful with this C-style approach; it is not all that usual in Perl to directly change caller's data. If you only need to fill a hash in the sub then build it there and <code>return \\%hash;</code></p></li>\n</ul>\n"}], "owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 47254783, "answer_count": 1, "score": 4, "last_activity_date": 1512887334, "creation_date": 1510525747, "question_id": 47254721, "link": "https://stackoverflow.com/questions/47254721/perl-can-i-skip-the-intermediate-hash-variable-in-this-case", "title": "Perl: can I skip the intermediate hash variable in this case?", "body": "<p>At the moment, I use something like this:</p>\n\n<pre><code>my %tmpHash = routineReturningHash();\nmy $value = $tmpHash{'someKey'};\n</code></pre>\n\n<p>The only thing I need is <code>$value</code>, I do not need <code>%tmpHash</code> itself. So I am curious to know if there is a way to avoid declaring <code>%tmpHash</code>.</p>\n\n<p>I tried</p>\n\n<pre><code>my $value = ${routineReturningHash()}{'someKey'};\n</code></pre>\n\n<p>but it doesn't work and outputs a strange error: \"<code>Can't use string (\"1/256\") as a HASH ref while \"strict refs\" in use</code>\".</p>\n\n<p>Any ideas how it could be done?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 4, "creation_date": 1510517668, "post_id": 47253090, "comment_id": 81457177, "body": "read: <a href=\"https://stackoverflow.com/a/26894436/632407\">stackoverflow.com/a/26894436/632407</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1510518017, "post_id": 47253090, "comment_id": 81457307, "body": "You can convert a false value to a zero if you want to do that: <code>perl -E &#39;say 2!=2 ? 1 : 0&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1510520950, "post_id": 47253651, "comment_id": 81458333, "body": "There is no stringification going on here."}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": 0, "last_activity_date": 1510518811, "creation_date": 1510518811, "answer_id": 47253651, "question_id": 47253090, "link": "https://stackoverflow.com/questions/47253090/perl-false-values-are-not-printed/47253651#47253651", "title": "perl false values are not printed", "body": "<p>The 'false' value has been printed, sort off, don't worry about it.</p>\n\n<p>Perl has a very simple concept of 'false', see <a href=\"https://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\" title=\"Truth and Falsehood\">the Perl Documentation</a> for more details. The link provided by @jm666 tells more about it. Basically, <code>0</code> or <code>\"\"</code> or <code>undef</code> are all three 'false'.</p>\n\n<p>Your <code>print</code> happened to 'stringify' the special 'false' value, which is the empty string.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510568180, "post_id": 47260412, "comment_id": 81474631, "body": "Actually a <code>false</code> test is giving back a <code>dualvar ( 0, &#39;&#39; )</code> you can do addition to a <code>false</code> value, which you couldn&#39;t with a pure empty string."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510569416, "post_id": 47260412, "comment_id": 81475386, "body": "@Sobrique: Yes. I was simplifying :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1510569540, "last_edit_date": 1510569540, "creation_date": 1510563735, "answer_id": 47260412, "question_id": 47253090, "link": "https://stackoverflow.com/questions/47253090/perl-false-values-are-not-printed/47260412#47260412", "title": "perl false values are not printed", "body": "<p>You shouldn't expect to be able to print Boolean values. All that you should expect to be able to do with Boolean values is to ask them if they are true or false.</p>\n\n<p>As it happens, you often <strong>can</strong> print Perl's Boolean values and get a useful result. Most Perl Boolean operations will give you 1 for true and an empty string for false. [<strong>Update:</strong> Strictly speaking, what you're getting is a <a href=\"https://metacpan.org/pod/Scalar::Util#dualvar\" rel=\"nofollow noreferrer\">dualvar</a> with the values '' and 0.] That's what you're seeing here. The false value <em>is</em> being printed, but it's an empty string.</p>\n\n<p>If you want to see something specific to indicate your false value, then you need to implement that yourself.</p>\n\n<pre><code>print \"2 == 3 :\", (2 == 3 ? 'true' : 'false'), \"\\n\";\n</code></pre>\n\n<p>But really, Boolean values aren't intended for displaying.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1510569585, "last_edit_date": 1510569585, "creation_date": 1510568113, "answer_id": 47261896, "question_id": 47253090, "link": "https://stackoverflow.com/questions/47253090/perl-false-values-are-not-printed/47261896#47261896", "title": "perl false values are not printed", "body": "<p>Perl doesn't have a strict boolean type - it has a bunch of things that evaluate as 'false' and everything else is true.</p>\n\n<p>Now, here's the thing - false is anything that's numerically zero, or an empty string.  Or indeed <code>undef</code>. </p>\n\n<p>So:</p>\n\n<pre><code>print \"Zero\" if 0; \nprint \"Empty\" if ''; \nprint \"Undef\" if undef;\n</code></pre>\n\n<p>None will print, because all the conditionals are 'false'. </p>\n\n<p>Now, when you try and create a 'boolean' how should perl know what value to give it? </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $value = !1;\nmy $othervalue = !'true';\n</code></pre>\n\n<p>What is <code>$value</code> or <code>$othervalue</code> at this point? I mean, any of <code>0</code>, <code>0.00</code>, <code>''</code> (and a few others) would be 'valid'.  But here's the thing - it doesn't matter, because it's a boolean. As long as when you feed it into <code>if</code> it does the right thing, then perl can return whatever it likes. </p>\n\n<p>Perl cheats - it returns from this operation a <a href=\"https://perldoc.perl.org/Scalar/Util.html#dualvar\" rel=\"nofollow noreferrer\"><code>dualvar</code></a> - a variable with two values, one for uses in a string context, and the other for use in a numeric context.</p>\n\n<p>You can do a thing that doesn't work otherwise:</p>\n\n<pre><code>use Scalar::Util qw ( isdual dualvar );\nprint \"\\$value is dual\\n\" if isdual $value;\nprint \"Coercing numerically:\", 0+$value,\"\\n\"; \nprint \"Coercing stringifically:\", ''.$value,\"\\n\";\n</code></pre>\n\n<p>This won't work for normal numerical (or string) values. You can recreate the same with the <code>dualvar</code> function:</p>\n\n<pre><code>my $special = dualvar ( 666, \"the beast\" );\n</code></pre>\n\n<p>Meddling with dualvars isn't generally good practice though. Just print explicitly what you want, with a conditional test and you've got no ambiguity there. </p>\n"}], "owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 47261896, "answer_count": 3, "score": 0, "last_activity_date": 1510569585, "creation_date": 1510515430, "question_id": 47253090, "link": "https://stackoverflow.com/questions/47253090/perl-false-values-are-not-printed", "title": "perl false values are not printed", "body": "<p>when I print false values in perl I get nothing printed. Probably this is a very simple question, but I searched google without finding an answer.</p>\n\n<p>Code:</p>\n\n<pre><code>print \"2 == 2 :\", 2 == 2, \"\\n\";\nprint \"2 != 2 :\", 2 != 2, \"\\n\";\nprint \"2 == 3 :\", 2 == 3, \"\\n\";\nprint \"2 != 3 :\", 2 != 3\", \"\\n\";\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>2 == 2:1\n2 != 2 :\n2 == 3 :\n2 != 3 :1\n</code></pre>\n\n<p>why the false value is not being printed?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1510500716, "post_id": 47250514, "comment_id": 81451251, "body": "drop the <code>eval</code> and simply write <code>use Net::SMTP::TLS;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 2, "last_activity_date": 1510501762, "creation_date": 1510501762, "answer_id": 47250749, "question_id": 47250514, "link": "https://stackoverflow.com/questions/47250514/perl-mailer-tls-error/47250749#47250749", "title": "Perl mailer tls error", "body": "<p>after </p>\n\n<pre><code>eval 'use Net::SMTP::TLS';\n</code></pre>\n\n<p>add this line</p>\n\n<pre><code>die $@ if $@; \n</code></pre>\n\n<p>This should give a message why Net::SMTP::TLS isn't loading</p>\n"}], "owner": {"reputation": 89, "user_id": 7088502, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1320384211346234/picture?type=large", "display_name": "Sr33raj", "link": "https://stackoverflow.com/users/7088502/sr33raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510501762, "creation_date": 1510500492, "last_edit_date": 1510500768, "question_id": 47250514, "link": "https://stackoverflow.com/questions/47250514/perl-mailer-tls-error", "title": "Perl mailer tls error", "body": "<pre><code>sub send_mail_via_smtp\n{\n    my( %p ) = @_;\n\n    eval 'use Net::SMTP::TLS';\n\n    my $repository = $p{session}-&gt;get_repository;\n\n    my $smtphost = $repository-&gt;get_conf( 'smtp_server' );\n    ##my $smtphost = 'smtp.gmail.com';\n\n    if( !defined $smtphost )\n    {\n        $repository-&gt;log( \"No STMP host has been defined. To fix this, find the full\\naddress of your SMTP server (eg. smtp.example.com) and add it\\nas the value of smtp_server in\\nperl_lib/EPrints/SystemSettings.pm\" );\n        return( 0 );\n    }\n\n\n    my $smtp = new Net::SMTP::TLS(\n           $smtphost,\n        Hello   =&gt;      'server.example.org',\n        Port    =&gt;      587,\n        User    =&gt;      'Example',\n        Password=&gt;      'Example',\n        );\n\n    # my $smtp = Net::SMTP-&gt;new( $smtphost);\n\n    if( !defined $smtp )\n    {\n        $repository-&gt;log( \"Failed to create smtp connection to $smtphost\" );\n        return( 0 );\n    }\n\n    $smtp-&gt;mail( $p{from_email} );\n    $smtp-&gt;to( $p{to_email} );\n\n    # if( !$smtp-&gt;recipient( $p{to_email} ) )   \n    # {\n    #    $repository-&gt;log( \"smtp server refused &lt;$p{to_email}&gt;\" );\n    #    $smtp-&gt;quit;\n    #    return 0;\n    # }\n\n    my $message = build_email( %p );\n    my $data = $message-&gt;as_string;\n    # Send the message as bytes, to avoid Net::Cmd wide-character warnings\n    utf8::encode($data);\n    $smtp-&gt;data;\n    $smtp-&gt;datasend( $data );\n    $smtp-&gt;dataend;\n    $smtp-&gt;quit;\n\n    return 1;\n}\n</code></pre>\n\n<p>Here is my mailer code but when i run this getting an error </p>\n\n<p>Can't locate object method \"new\" via package \"Net::SMTP::TLS\" (perhaps you forgot to load \"Net::SMTP::TLS\"?)</p>\n\n<p>I tried to use mailer without tls but doesnt work</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510521650, "post_id": 47247440, "comment_id": 81458575, "body": "Use <code>HTML::TableExtract</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1510523203, "post_id": 47247440, "comment_id": 81459109, "body": "To correct my early comment (removed), while I recommend <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.07/lib/HTML/TreeBuilder.pm\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> for general parsing of HTML (and there are others), here you indeed want <code>HTML::TableExtract</code>. And you <i>do not</i> want to use regex"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510563405, "post_id": 47247440, "comment_id": 81471441, "body": "<a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">You can&#39;t parse HTML with a regex</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 3378981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b3f1d31adf3b8e4e1c980076f7e834?s=128&d=identicon&r=PG", "display_name": "pleriche", "link": "https://stackoverflow.com/users/3378981/pleriche"}, "edited": false, "score": 0, "creation_date": 1510654274, "post_id": 47247520, "comment_id": 81516058, "body": "Thank you and I&#39;m sure TableExtract is the better way of doing it, but the object of my question was to improve my understanding of how to use regular expressions since they&#39;re so central to Perl. Adding gs to the regexpr as someone suggested (since deleted) was the leg-up I needed."}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "reply_to_user": {"reputation": 51, "user_id": 3378981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b3f1d31adf3b8e4e1c980076f7e834?s=128&d=identicon&r=PG", "display_name": "pleriche", "link": "https://stackoverflow.com/users/3378981/pleriche"}, "edited": false, "score": 0, "creation_date": 1510659385, "post_id": 47247520, "comment_id": 81519421, "body": "I see your point, and it&#39;s really important build a solid knowlegment on regexpr. But, like other people have said, it&#39;s not a goot idea apply regexpr to parsing html documents"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 4, "last_activity_date": 1510481008, "creation_date": 1510481008, "answer_id": 47247520, "question_id": 47247440, "link": "https://stackoverflow.com/questions/47247440/parsing-a-whole-file-in-perl/47247520#47247520", "title": "Parsing a whole file in Perl", "body": "<p>There is a <a href=\"https://metacpan.org/pod/HTML::TableExtract\" rel=\"nofollow noreferrer\">HTML::TableExtract</a> module in CPAN, which simplifies the problem you are trying to solve:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::TableExtract qw(tree);\n\nmy $te = HTML::TableExtract-&gt;new( headers =&gt; qw(Term Meaning) );\nmy $html_file = \"Glossary\";\n$te-&gt;parse_file($html_file);\nmy $table = $te-&gt;first_table_found;\n# ... \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1510674710, "creation_date": 1510674710, "answer_id": 47289964, "question_id": 47247440, "link": "https://stackoverflow.com/questions/47247440/parsing-a-whole-file-in-perl/47289964#47289964", "title": "Parsing a whole file in Perl", "body": "<p>You already have answers explaining why you shouldn't parse HTML with regexes. And you really shouldn't. But you've asked for an explanation of why your code doesn't work. So here goes...</p>\n\n<p>You have two problems in your code. One stops it working and the other stops it working as you expect.</p>\n\n<p>Firstly, you are using <code>.</code> in your regex to match any character. But <code>.</code> doesn't match any character. It matches any character <strong>except</strong> a newline. And you have newlines in your string. You fix that by adding the <code>/s</code> option to your match operator (so it has <code>/gs</code> instead of <code>/s</code>).</p>\n\n<p>With that fix in place, you get a result from your code. Using your test data, I see:</p>\n\n<pre><code>&lt;td&gt;&lt;b&gt;Term&lt;/b&gt;\n         &lt;/td&gt;:&lt;td&gt;&lt;b&gt;Meaning&lt;/b&gt;\n         &lt;/td&gt;\n</code></pre>\n\n<p>Which is correct. But looking at your test data, I wondered why I wasn't getting two results - because of the <code>/g</code>. I soon realised it was because your test data is missing the closing <code>&lt;/td&gt;</code>. When I added that, I got this result:</p>\n\n<pre><code>&lt;td&gt;&lt;span id=\"0-Day\"&gt;0-Day&lt;/span&gt;\n         &lt;/td&gt;:&lt;td&gt;\n         &lt;p&gt;See &lt;a href=\"#Zero_Day\"&gt;Zero Day&lt;/a&gt;.\n         &lt;/p&gt;\n         &lt;/td&gt;\n</code></pre>\n\n<p>Ok. It's now finding the second result. But what has happened to the first one? That's the second error in your code.</p>\n\n<p>You have <code>.*</code> a few times in your regex. That means \"zero or more of any character\". But it's the \"or more\" that is a problem here. By default, Perl regex qualifiers (<code>*</code> or <code>+</code>) are greedy. That means they will use up as much of the string as possible. And the first <code>.*</code> in your regex is eating up a lot of your string. All of it up to the second <code>&lt;tr&gt;</code> in fact.</p>\n\n<p>The solution to that is to make the <code>.*</code> non-greedy. And you do that by adding <code>?</code> to the end. So you can replace all of the <code>.*</code> with <code>.*?</code>. Having done that, I get this output:</p>\n\n<pre><code>&lt;td&gt;&lt;b&gt;Term&lt;/b&gt;\n         &lt;/td&gt;:&lt;td&gt;&lt;b&gt;Meaning&lt;/b&gt;\n         &lt;/td&gt;\n&lt;td&gt;&lt;span id=\"0-Day\"&gt;0-Day&lt;/span&gt;\n         &lt;/td&gt;:&lt;td&gt;\n         &lt;p&gt;See &lt;a href=\"#Zero_Day\"&gt;Zero Day&lt;/a&gt;.\n         &lt;/p&gt;\n         &lt;/td&gt;\n</code></pre>\n\n<p>Which seems correct to me.</p>\n\n<p>So, to summarise:</p>\n\n<ol>\n<li>By default, <code>.</code> doesn't match newlines. To do that, you need <code>/s</code>.</li>\n<li>Beware of greedy qualifiers.</li>\n</ol>\n"}], "owner": {"reputation": 51, "user_id": 3378981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b3f1d31adf3b8e4e1c980076f7e834?s=128&d=identicon&r=PG", "display_name": "pleriche", "link": "https://stackoverflow.com/users/3378981/pleriche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510674710, "creation_date": 1510480337, "last_edit_date": 1510484414, "question_id": 47247440, "link": "https://stackoverflow.com/questions/47247440/parsing-a-whole-file-in-perl", "title": "Parsing a whole file in Perl", "body": "<p>I have an HTML file containing a 2-column table which I want to parse in order to extract pairs of strings representing the columns. The page layout of the HTML (white space, new lines) is arbitrary, hence I can't parse the file line by line.</p>\n\n<p>I recall that you can parse such a thing by slurping the whole file into a string and operating on the entire string, which I'm finding a bit more challenging. I'm trying things like the following:</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen(FILE, \"Glossary\") || die \"Couldn't open file\\n\";\n@lines = &lt;FILE&gt;;\nclose(FILE);\n\n$data = join(' ', @lines);\n\nwhile ($data =~ /&lt;tr&gt;.*(&lt;td&gt;.*&lt;\\/td&gt;).*(&lt;td&gt;.*&lt;\\/td&gt;).*&lt;\\/tr&gt;/g) {\n    print $1, \":\", $2, \"\\n\";\n}\n</code></pre>\n\n<p>which gives a <code>null</code> output. Here's a section of the input file:</p>\n\n<pre><code>&lt;table class=\"wikitable\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;b&gt;Term&lt;/b&gt;\n        &lt;/td&gt;\n        &lt;td&gt;&lt;b&gt;Meaning&lt;/b&gt;\n        &lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;span id=\"0-Day\"&gt;0-Day&lt;/span&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n        &lt;p&gt;See &lt;a href=\"#Zero_Day\"&gt;Zero Day&lt;/a&gt;.\n        &lt;/p&gt;\n        &lt;/td&gt;\n</code></pre>\n\n<p>Can someone help me out?</p>\n"}, {"tags": ["php", "perl", "curl", "phantomjs", "scrape"], "comments": [{"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1510477890, "post_id": 47247122, "comment_id": 81444496, "body": "you are setting user agent wrong way... should have used <code>CURLOPT_USERAGENT</code> option"}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "reply_to_user": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1510526631, "post_id": 47247122, "comment_id": 81460195, "body": "@FlashThunder, The &quot;CURLOPT_USERAGENT&quot; option is there and it is getting set when I send the $useragent variable. I&#39;ve tried setting the useragent both ways, using the header and &quot;CURLOPT_USERAGENT&quot;. I don&#39;t think that has anything to do why this is not working."}], "answers": [{"comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1510482712, "post_id": 47247452, "comment_id": 81445625, "body": "If you look at <a href=\"https://www.vitacost.com/robots.txt\" rel=\"nofollow noreferrer\">vitacost.com/robots.txt</a> you will see that they don&#39;t want scraping of productResults - this is all advisory but its good to be a good citizen  <a href=\"https://en.wikipedia.org/wiki/Robots_exclusion_standard\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Robots_exclusion_standard</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1510483576, "post_id": 47247452, "comment_id": 81445831, "body": "@KeepCalmAndCarryOn: thanks for the input. I&#39;ve edited the answer to include the essence of it."}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1510526426, "post_id": 47247452, "comment_id": 81460130, "body": "@SteffenUllrich, at this point i&#39;m really interested in figuring out why my browser request works while all the other tools I use do not, even though I am sending the same headers.  I tried running your code on my server and my personal computer and it just hangs. You&#39;re correct that removing the Accept header causes a 403 Forbidden but I still can&#39;t get the server to return a response. Could this have to do with the SSL certificate?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1510549583, "post_id": 47247452, "comment_id": 81465578, "body": "@user735247: This has nothing to do with the certificate. I rather suggest that the source-IP of the request is included in the bot-detection. It works from two system I&#39;ve tried but it fails from the third system, which is a DigitalOcean server. If you&#39;ve tried the code from the system where you are successfully accessing the site with the browser it will probably succeed too."}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1510568709, "post_id": 47247452, "comment_id": 81474993, "body": "About hanging... has nothing to do with IP... same ip on Debian Lynx - hangs, on Windows Opera - works"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1510571049, "post_id": 47247452, "comment_id": 81476354, "body": "@FlashThunder: A hanging can have different causes and source IP is only one of these. If I use my code from the answer it works on two machines but hangs on the Digitalocean machine. If I modify the code and remove the <code>Accept-Language</code> it hangs also on machines where it worked before. This behavior is also described in my answer."}, {"owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1510626926, "post_id": 47247452, "comment_id": 81504594, "body": "I read a comment somewhere suggesting that the order of the headers might also be a factor. Can someone confirm by trying to switch the order of the request headers? None of the machines I have access to seem to be able to get a response from the server, so I cannot try it."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "edited": false, "score": 0, "creation_date": 1510638600, "post_id": 47247452, "comment_id": 81507727, "body": "@user735247: The order might in theory matter. But I&#39;ve tried some permutations and they don&#39;t seem to matter in this specific case against the current bot-detection."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1510563424, "last_edit_date": 1510563424, "creation_date": 1510480417, "answer_id": 47247452, "question_id": 47247122, "link": "https://stackoverflow.com/questions/47247122/scraping-attempts-getting-403-error/47247452#47247452", "title": "Scraping attempts getting 403 error", "body": "<p>First, note that the site does not like web scraping. As @KeepCalmAndCarryOn pointed out in a comment this site has a <a href=\"http://www.robotstxt.org/robotstxt.html\" rel=\"nofollow noreferrer\">/robots.txt</a> where it explicitly asks bots to not crawl specific parts of the site, including the parts you want to scrape. While not legally binding a good citizen will adhere to such request.</p>\n\n<p>Additionally the site seems to employ explicit protection against scraping and tries to make sure that this is really a browser. It looks like the site is behind the Akamai CDN, so maybe the anti-scraping protection is from this CDN.</p>\n\n<p>But I've took the request sent by Firefox (which worked) and then tried to simplify it as much as possible. The following works currently for me, but might of course fail if the site updates its browser detection:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use strict;\nuse warnings;\nuse IO::Socket::SSL;\n\n(my $rq = &lt;&lt;'RQ') =~s{\\r?\\n}{\\r\\n}g;\nGET /productResults.aspx?allCategories=true&amp;N=1318723&amp;isrc=vitacostbrands%3aquadblock%3asupplements&amp;scrolling=true&amp;No=40&amp;_=151047598285 HTTP/1.1\nHost: www.vitacost.com\nAccept: */*\nAccept-Language: en-US\nConnection: keep-alive\n\nRQ\n\nmy $cl = IO::Socket::SSL-&gt;new('www.vitacost.com:443') or die;\nprint $cl $rq;\nmy $hdr = '';\nwhile (&lt;$cl&gt;) {\n    $hdr .= $_;\n    last if $_ eq \"\\r\\n\";\n}\nwarn \"[header done]\\n\";\nmy $len = $hdr =~m{^Content-length:\\s*(\\d+)}mi &amp;&amp; $1 or die \"no length\";\nread($cl,my $buf,$len);\nprint $buf;\n</code></pre>\n\n<p>Interestingly, if I remove the <code>Accept</code> header I get a 403 Forbidden. If I instead remove the <code>Accept-Language</code> it simply hangs. And also interestingly it does not seem to need a User-Agent header.</p>\n\n<p>EDIT: it looks like the bot-detection also uses the source IP of the sender as feature. While the code above works for me from two different systems it fails to work for a third system (hosted at Digitalocean) and just hangs.</p>\n"}], "owner": {"reputation": 103, "user_id": 735247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3f9feec8eddffe505f95837cdc66bf5?s=128&d=identicon&r=PG&f=1", "display_name": "user735247", "link": "https://stackoverflow.com/users/735247/user735247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2233, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1510563424, "creation_date": 1510477651, "question_id": 47247122, "link": "https://stackoverflow.com/questions/47247122/scraping-attempts-getting-403-error", "title": "Scraping attempts getting 403 error", "body": "<p>I am trying to scrape a website and I am getting a 403 Forbidden error no matter what I try:</p>\n\n<ol>\n<li>wget</li>\n<li>CURL (command line and PHP)</li>\n<li>Perl WWW::Mechanize</li>\n<li>PhantomJS</li>\n</ol>\n\n<p>I tried all of the above with and without proxies, changing user-agent, and adding a referrer header. </p>\n\n<p>I even copied the request header from my Chrome browser and tried sending with my request using PHP Curl and I am still getting a 403 Forbidden error.</p>\n\n<p>Any input or suggestions on what is triggering the website to block the request and how to bypass?</p>\n\n<p>PHP CURL Example:</p>\n\n<pre><code>$url ='https://www.vitacost.com/productResults.aspx?allCategories=true&amp;N=1318723&amp;isrc=vitacostbrands%3aquadblock%3asupplements&amp;scrolling=true&amp;No=40&amp;_=1510475982858';\n$headers = array(\n            'accept:application/json, text/javascript, */*; q=0.01',\n            'accept-encoding:gzip, deflate, br',\n            'accept-language:en-US,en;q=0.9',               \n            'referer:https://www.vitacost.com/productResults.aspx?allCategories=true&amp;N=1318723&amp;isrc=vitacostbrands:quadblock:supplements',\n            'user-agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.89 Safari/537.36',\n            'x-requested-with:XMLHttpRequest',\n);\n\n$res = curl_get($url,$headers);\nprint $res;\nexit;\n\nfunction curl_get($url,$headers=array(),$useragent=''){ \n    $curl = curl_init();\n    curl_setopt($curl, CURLOPT_URL, $url);\n    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n    curl_setopt($curl, CURLOPT_HEADER, true);           \n    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);\n    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);   \n    curl_setopt($curl, CURLOPT_ENCODING, '');            \n    if($useragent)curl_setopt($curl, CURLOPT_USERAGENT,$useragent);             \n    if($headers)curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);\n\n    $response = curl_exec($curl);       \n\n    $header_size = curl_getinfo($curl, CURLINFO_HEADER_SIZE);\n    $header = substr($response, 0, $header_size);\n    $response = substr($response, $header_size);\n\n\n    curl_close($curl);  \n    return $response;\n }\n</code></pre>\n\n<p>And here is the response I always get:</p>\n\n<pre><code>&lt;HTML&gt;&lt;HEAD&gt;\n&lt;TITLE&gt;Access Denied&lt;/TITLE&gt;\n&lt;/HEAD&gt;&lt;BODY&gt;\n&lt;H1&gt;Access Denied&lt;/H1&gt;\n\nYou don't have permission to access     \n\n  \"http&amp;#58;&amp;#47;&amp;#47;www&amp;#46;vitacost&amp;#46;com&amp;#47;productResults&amp;#46;aspx&amp;#63;\" \non this server.&lt;P&gt;\nReference&amp;#32;&amp;#35;18&amp;#46;55f50717&amp;#46;1510477424&amp;#46;2a24bbad\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8049857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25cc4681ce3b0e088978d092d9bf645e?s=128&d=identicon&r=PG&f=1", "display_name": "NinJesus", "link": "https://stackoverflow.com/users/8049857/ninjesus"}, "edited": false, "score": 0, "creation_date": 1510514793, "post_id": 47246604, "comment_id": 81456113, "body": "Yeah, the range based for loop is more readable. I&#39;ll try to implement it in the future."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 8049857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25cc4681ce3b0e088978d092d9bf645e?s=128&d=identicon&r=PG&f=1", "display_name": "NinJesus", "link": "https://stackoverflow.com/users/8049857/ninjesus"}, "edited": false, "score": 0, "creation_date": 1510516596, "post_id": 47246604, "comment_id": 81456760, "body": "@NinJesus In case I didn&#39;t phrase it right: I meant this as a further support for using it in Perl, where there is nothing to it. (In C++ it does take a little work to start using it.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1573804502, "last_edit_date": 1573804502, "creation_date": 1510472592, "answer_id": 47246604, "question_id": 47246455, "link": "https://stackoverflow.com/questions/47246455/simplify-long-if-else-chain-with-regex-by-comparing-with-array/47246604#47246604", "title": "Simplify long if-else chain with regex by comparing with array", "body": "<p>Use alternation, just like in the first regex, but capture the match and <a href=\"https://perldoc.perl.org/perlretut.html#Extracting-matches\" rel=\"nofollow noreferrer\">use <code>$1</code></a> to replace the word</p>\n\n<pre><code>my $re_punct = join '|', map { quotemeta } qw(&amp; ! : ' . ; ? ,);  #'\n\nfor my $j (0..100_000) {\n    my $outcome = rand();\n    for my $k (0..$#cum_sum) {\n        ...    \n        if ($keys[$k] =~ /($re_punct)/) { $keys[$k] = \"$1 \" }\n        ...\n    }\n}\n</code></pre>\n\n<p>Comments</p>\n\n<ul>\n<li><p><a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> escapes by <code>\\</code> all \"<em>ASCII non-\"word\" characters</em>\"</p></li>\n<li><p>syntax: <code>$#ary</code> is the index of the last element in <code>@ary</code>, just right for looping over array index</p></li>\n<li><p><code>for my $i ($beg .. $end)</code> is <em>much</em> clearer than the equivalent C-style <code>for</code> loop<sup>&dagger;</sup></p></li>\n</ul>\n\n<p>The presented logic leaves a question: what if both characters are punctuation? </p>\n\n<hr>\n\n<p>Note on your idea to do it \"<em>By Comparing With Array</em>\"</p>\n\n<p>You could use <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.426/lib/List/MoreUtils.pm#first_value_BLOCK_LIST\" rel=\"nofollow noreferrer\">List::MoreUtils::first_value</a>, for instance. It would go like</p>\n\n<pre><code>use List::MoreUtils qw(first_value);\n\nmy @punc = map { quotemeta }  qw(&amp; ! : ' . ; ? ,);  #'\n\nforeach my $word (@words) {\n    if (my $match = first_value { $word =~ /$_/ } @punct) {\n        $word = $match;\n    }\n}\n</code></pre>\n\n<p>The <code>first_value</code> (or <code>firstval</code>) returns the first element of <code>@punct</code> for which the block returns true, and <code>undef</code> if none do. The <code>$word</code> aliases the currently processed element of <code>@words</code> and changing it changes the array element; so you get your  replacement.</p>\n\n<p>However, you still have to deal with regex and escape (at least some of) punctuation. Thus I see no advantage in going to this trouble; the \"straight-up\" regex is far clearer in this case.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &nbsp; Even compiled languages evolve this way. The <code>C++11</code> introduced the <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based for loop</a></p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>for (auto var: container) ...  // (really, const auto&amp;), or auto&amp;, or auto&amp;&amp;\n</code></pre>\n\n<p>and the link (not the standard, but a standard reference) says</p>\n\n<blockquote>\n  <p>Used as a more readable equivalent to the traditional <code>for</code> loop  [...]</p>\n</blockquote>\n\n<p>In Perl this <em>is</em> how things are done; just use it.</p>\n"}, {"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 2, "last_activity_date": 1510481910, "creation_date": 1510481910, "answer_id": 47247641, "question_id": 47246455, "link": "https://stackoverflow.com/questions/47246455/simplify-long-if-else-chain-with-regex-by-comparing-with-array/47247641#47247641", "title": "Simplify long if-else chain with regex by comparing with array", "body": "<p>In order to simplify your code, it may have sense to use the <a href=\"https://metacpan.org/pod/Tie::RegexpHash\" rel=\"nofollow noreferrer\">Tie::RegexpHash</a> CPAN module. The main idea is build a hash with regexpr as keys, so you easily find the related values by matching:</p>\n\n<pre><code>use Tie::RegexpHash;\nmy $rehash = Tie::RegexpHash-&gt;new();\n\n$rehash-&gt;add( qr/\\s/, \" \" );\n$rehash-&gt;add( qr/\\&amp;/, \" and \" );\n#...\n\nmy $value = $rehash-&gt;match( \"&amp;\" );  # $value &lt;-- \" and \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1510657943, "creation_date": 1510657943, "answer_id": 47284318, "question_id": 47246455, "link": "https://stackoverflow.com/questions/47246455/simplify-long-if-else-chain-with-regex-by-comparing-with-array/47284318#47284318", "title": "Simplify long if-else chain with regex by comparing with array", "body": "<p>So, looking at it you have two cases:</p>\n\n<p>One where you replace a set of values, with 'the value and a space'.  And another where you replace with something different.</p>\n\n<p>So how about creating a lookup table for each, and processing just two regexes:</p>\n\n<pre><code>#!/usr/bin/env perl.\n\nuse strict;\nuse warnings; \nuse Data::Dumper;\n\nmy %replace = ( \n    '\"' =&gt; \"\",\n    '/' =&gt; \"\",\n    '&amp;' =&gt; \" and \",\n);\nmy @add_space = ( ',', '?',  ';', '.', \"'\", ':', '!' );\n\nmy $search = join ( \"|\", map { quotemeta } keys %replace ); \n   $search = qr/($search)/;        \n\nmy $add_space_after = join \"|\", map {quotemeta} @add_space; \n   $add_space_after = qr/($add_space_after)/; \n\n\nwhile ( &lt;DATA&gt; ) {\n    s/\\s/ /g;\n    s/$search/$replace{$1}/; \n    s/$add_space_after/$1 /;\n    print;\n}\n\n__DATA__\nWork:Work\ncookies&amp;milk;wordhere\nwhy?are;you/so \"sad\"\n</code></pre>\n\n<p>This gives us what you want I think, and - hopefully - keeps the code pretty conscise.</p>\n\n<p>Of importance is the <code>quotemeta</code> function here, because it ensures your metachars are escaped before regexing them. </p>\n\n<p>Note - the only one of your examples this <em>doesn't</em> handle is the <code>\\s</code> to \" \". But that's IMO probably best to write separately for clarity, as obviously youc can't <code>quotemeta</code> it. </p>\n"}], "owner": {"reputation": 21, "user_id": 8049857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25cc4681ce3b0e088978d092d9bf645e?s=128&d=identicon&r=PG&f=1", "display_name": "NinJesus", "link": "https://stackoverflow.com/users/8049857/ninjesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47246604, "answer_count": 3, "score": 0, "last_activity_date": 1588129381, "creation_date": 1510471147, "last_edit_date": 1588129381, "question_id": 47246455, "link": "https://stackoverflow.com/questions/47246455/simplify-long-if-else-chain-with-regex-by-comparing-with-array", "title": "Simplify long if-else chain with regex by comparing with array", "body": "<pre><code>for (my $j = 0; $j &lt;100000; $j++){\n    my $outcome = rand();\n    for (my $k = 0; $k &lt; @cum_sum; $k++){\n        if ($cum_sum[$k] &gt;= $outcome){\n            if ($keys[$k] =~ m/\\\"|\\/|\\&lt;|\\&gt;|\\\\|\\`|\\~|\\@|\\#|\\$|\\%|\\^|\\*|[0-9]/) {\n                print $out \"\";\n            }\n            if ($keys[$k] =~ m/\\s/){\n                print $out \" \";\n            }\n            elsif ($keys[$k] =~ m/\\&amp;/){\n                print $out \" and \";\n            }\n            elsif ($keys[$k] =~ m/\\!/){\n                print $out \"! \";\n            }\n            elsif ($keys[$k] =~ m/\\:/){\n                print $out \": \";\n            }\n            elsif ($keys[$k] =~ m/\\'/){\n                print $out \"' \";\n            }\n            elsif ($keys[$k] =~ m/\\./){\n                print $out \". \";\n            }\n            elsif ($keys[$k] =~ m/\\;/){\n                print $out \"; \";\n            }\n            elsif ($keys[$k] =~ m/\\?/){\n                print $out \"? \";\n            }\n            elsif ($keys[$k] =~ m/\\,/){\n                print $out \", \";\n            }\n            else {\n                print $out \"$keys[$k]\";\n            }\n            last;\n        }\n    }\n#   print \"$outcome\\n\";\n}\n</code></pre>\n\n<p>I mostly need help with simplifying the long chain of <code>elsif</code> statements I have. \nThe logic in the outer for loops works.\n<code>@keys</code> is an array of two character (digrams) strings.</p>\n\n<p>I am trying to make the <code>elsif</code> statements more efficient by comparing the digrams from <code>@key</code> to an array of the punctuation marks <code>@punctuation = qw(! : \" ' ; ? , .)</code> </p>\n\n<p>Then, if the digram does contain one of the punctuation marks in the punctuation array, the digram gets changed to \"punctuation_mark \" e.g. \"a!\" -> \"! \"</p>\n\n<p>The end result would be that I do not use regexes for any of <code>@punctuation</code>.</p>\n\n<p>However, I am not sure on how to implement this change.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["function", "perl", "expression"], "comments": [{"owner": {"reputation": 614, "user_id": 1877860, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eff94b5e7b44a203e0168c61fc239811?s=128&d=identicon&r=PG", "display_name": "kbang", "link": "https://stackoverflow.com/users/1877860/kbang"}, "edited": false, "score": 0, "creation_date": 1510458667, "post_id": 47245229, "comment_id": 81440899, "body": "What are you trying to do? why do you want java inside perl? based on what you have you are just printing the java script. You want to use CGI"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8306299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAuV.png?s=128&g=1", "display_name": "Blender Render Bend_Her", "link": "https://stackoverflow.com/users/8306299/blender-render-bend-her"}, "edited": false, "score": 0, "creation_date": 1510470786, "post_id": 47245497, "comment_id": 81443088, "body": "Thanks, your answer fulfilled my question."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 2, "last_activity_date": 1510461651, "creation_date": 1510461651, "answer_id": 47245497, "question_id": 47245229, "link": "https://stackoverflow.com/questions/47245229/how-to-put-java-correctly-inside-the-perl/47245497#47245497", "title": "How to put Java correctly inside the Perl?", "body": "<p><code>$/</code> is the record-separator variable in Perl (<code>\"\\n\"</code> by default). Inside the <code>\"\"</code> string, it is being substituted in</p>\n\n<pre><code>var reZip = /^\\d{5}$/\n</code></pre>\n\n<p>Also, because this is a <code>\"\"</code> string, the <code>\\d</code> is being interpreted as an unknown escape and subtituted with just <code>d</code>.</p>\n\n<p><a href=\"https://perldoc.perl.org/perlop.html#%3c%3c_EOF_\" rel=\"nofollow noreferrer\">Heredocs</a> are better for multiline strings, and you can use the single-quote variation to prevent interpolation.</p>\n\n<pre><code>print &lt;&lt;'END';\n&lt;script type='text/javascript'&gt;\n    var reZip = /^\\d{5}$/\n\nvar num = '12345';\n\n    if(reZip.test(num))\n    {\n    alert('True');\n    }\n    else\n    {\n    alert('False');\n    }\n\n&lt;/script&gt;\nEND\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8306299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAuV.png?s=128&g=1", "display_name": "Blender Render Bend_Her", "link": "https://stackoverflow.com/users/8306299/blender-render-bend-her"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510461651, "creation_date": 1510458244, "last_edit_date": 1510458327, "question_id": 47245229, "link": "https://stackoverflow.com/questions/47245229/how-to-put-java-correctly-inside-the-perl", "title": "How to put Java correctly inside the Perl?", "body": "<p>The Javascript alone works fine with the 'True' result. But when I tried to insert it into the Perl language, it didn't work. Probably it doesn't read regular expression correctly? I'm still new to both language. </p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\n\nprint \"&lt;script type='text/javascript'&gt;\n    var reZip = /^\\d{5}$/\n\nvar num = '12345';\n\n    if(reZip.test(num))\n    {\n    alert('True');\n    }\n    else\n    {\n    alert('False');\n    }\n\n&lt;/script&gt;\";\n</code></pre>\n"}, {"tags": ["regex", "bash", "shell", "perl", "unix"], "answers": [{"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 1, "last_activity_date": 1510458616, "creation_date": 1510458616, "answer_id": 47245251, "question_id": 47245225, "link": "https://stackoverflow.com/questions/47245225/regex-to-match-a-path-excluding-the-final-directory-perl-error-search-pattern/47245251#47245251", "title": "Regex to match a path, excluding the final directory. Perl error &quot;search pattern not terminated at -e&quot;", "body": "<p>Use <code>sed</code>, but match what you want to <em>remove</em> (rather than what you want to keep):</p>\n\n<pre><code>echo $path | sed 's,[^/]*$,,'\n</code></pre>\n\n<p>Outputs <code>/abc/de/fgh/i/</code></p>\n\n<p>The regex matches all non-slash chars at the end and replaces them with nothing, removing them.</p>\n"}, {"tags": [], "owner": {"reputation": 447, "user_id": 6437978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba0a12137fee82324a7ee8ae62156eb?s=128&d=identicon&r=PG&f=1", "display_name": "insert_name_here", "link": "https://stackoverflow.com/users/6437978/insert-name-here"}, "is_accepted": true, "score": 4, "last_activity_date": 1510460206, "last_edit_date": 1510460206, "creation_date": 1510458682, "answer_id": 47245259, "question_id": 47245225, "link": "https://stackoverflow.com/questions/47245225/regex-to-match-a-path-excluding-the-final-directory-perl-error-search-pattern/47245259#47245259", "title": "Regex to match a path, excluding the final directory. Perl error &quot;search pattern not terminated at -e&quot;", "body": "<p>There is a coreutil to do this, <code>dirname</code>:</p>\n\n<pre><code>path=\"/abc/de/fgh/i/jk\"\nsliced=`dirname \"$path\"`\n</code></pre>\n\n<p>However, it also removes the trailing <code>/</code>. If you, for whatever reason, need it, just append it to <code>sliced</code>:</p>\n\n<pre><code>sliced=`dirname \"$path\"`/\n</code></pre>\n\n<p>Be sure to quote <code>$path</code>; it won't work with paths with spaces in them if you don't.</p>\n\n<p>Your Perl program isn't working because you haven't put any regex operators around it. It ignores the first <code>\\</code> since it isn't in a string or regex, then finds the <code>/</code>, which begins a regex. Since there's no unescaped <code>/</code> to end it, it gives you that error. You probably want something like <code>s/(\\/.*\\/)*.*/$1/</code>, which should erase everything after the last <code>/</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 1, "last_activity_date": 1510473254, "creation_date": 1510473254, "answer_id": 47246664, "question_id": 47245225, "link": "https://stackoverflow.com/questions/47245225/regex-to-match-a-path-excluding-the-final-directory-perl-error-search-pattern/47246664#47246664", "title": "Regex to match a path, excluding the final directory. Perl error &quot;search pattern not terminated at -e&quot;", "body": "<p>Why not use Parameter Expansion ?</p>\n\n<pre><code>echo \"${path%/*}/\"\n</code></pre>\n"}], "owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 47245259, "answer_count": 3, "score": -1, "last_activity_date": 1510473254, "creation_date": 1510458213, "question_id": 47245225, "link": "https://stackoverflow.com/questions/47245225/regex-to-match-a-path-excluding-the-final-directory-perl-error-search-pattern", "title": "Regex to match a path, excluding the final directory. Perl error &quot;search pattern not terminated at -e&quot;", "body": "<p>Say I have a directory path</p>\n\n<pre><code> /abc/de/fgh/i/jk\n</code></pre>\n\n<p>And I just want to match</p>\n\n<pre><code> /abc/de/fgh/i/\n</code></pre>\n\n<p>How would I do this? I have tried:</p>\n\n<pre><code> (\\/.*\\/)*\n</code></pre>\n\n<p>In <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">https://regexr.com/</a> and it seems to do the trick.</p>\n\n<p>However, when I try:</p>\n\n<pre><code> path=\"/abc/de/fgh/i/jk\"\n sliced=`echo $path | perl -pe '(\\/.*\\/)*'`\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code> Search pattern not terminated at -e line 1\n</code></pre>\n\n<p>Is there a better way to do this besides perl? What is wrong here anyway to give a perl error? Is my regex even correct here? </p>\n"}, {"tags": ["sql", "postgresql", "perl", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1510447625, "last_edit_date": 1592644375, "creation_date": 1510447625, "answer_id": 47244381, "question_id": 47244206, "link": "https://stackoverflow.com/questions/47244206/perl-postgresql-code-results-in-problems-with-pg-pm/47244381#47244381", "title": "perl + postgresql code results in problems with Pg.pm", "body": "<p>According to <a href=\"https://metacpan.org/pod/DBI#do\" rel=\"noreferrer\">the documentation</a>, <code>do</code> has the following forms:</p>\n<blockquote>\n<p><strong><code>do</code></strong></p>\n<pre><code>$rows = $dbh-&gt;do($statement)           or die $dbh-&gt;errstr;\n$rows = $dbh-&gt;do($statement, \\%attr)   or die $dbh-&gt;errstr;\n$rows = $dbh-&gt;do($statement, \\%attr, @bind_values) or die ...\n</code></pre>\n</blockquote>\n<p>Your code:</p>\n<pre><code>     $dbh-&gt;do('INSERT INTO template (fleet, id, name, model, serial) VALUES (?, ?, ?, ?, ?)',\n         $fleet,\n         $id,\n         $row[0],\n         $row[1],\n         $row[2]\n     )\n</code></pre>\n<p>This treats <code>$fleet</code> (the second argument) as a reference to an attribute hash (the <code>\\%attr</code> parameter), which it isn't (it's a number). You don't want to pass any attributes, so you should specify <code>undef</code>:</p>\n<pre><code>     $dbh-&gt;do('INSERT INTO template (fleet, id, name, model, serial) VALUES (?, ?, ?, ?, ?)',\n         undef,\n         $fleet,\n         $id,\n         $row[0],\n         $row[1],\n         $row[2],\n     )\n</code></pre>\n<hr />\n<p>Also note that DBI doesn't set <code>$!</code>, so using it in error message makes little sense. You should use <code>$dbh-&gt;errstr</code> instead (or simply pass <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"noreferrer\"><code>RaiseError =&gt; 1</code></a> in your <code>connect</code> call to make all methods throw exceptions on error).</p>\n"}], "owner": {"reputation": 2705, "user_id": 1151171, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6g2ko.jpg?s=128&g=1", "display_name": "Jarmund", "link": "https://stackoverflow.com/users/1151171/jarmund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47244381, "answer_count": 1, "score": 0, "last_activity_date": 1510447625, "creation_date": 1510445846, "last_edit_date": 1510446329, "question_id": 47244206, "link": "https://stackoverflow.com/questions/47244206/perl-postgresql-code-results-in-problems-with-pg-pm", "title": "perl + postgresql code results in problems with Pg.pm", "body": "<p>I'm getting an odd error when trying to insert data into a table while working with data being fetched from a different table:</p>\n\n<pre><code>DBI::st=HASH(0x56261b345948)-&gt;_prepare(...): attribute parameter '0' is not a hash ref at /usr/lib/x86_64-linux-gnu/perl5/5.24/DBD/Pg.pm line 277.\n</code></pre>\n\n<p>The line that seems to be causing it is the $dbh->do() in the above code snippet:</p>\n\n<pre><code> my $sth = $dbh-&gt;prepare(\n     \"SELECT (name, model), serial, firmware, timestamp FROM devicelog \n         WHERE id = $id AND fleet = $fleet AND timestamp &gt;  \n             (SELECT timestamp FROM devicelog WHERE fleet = $fleet AND id = $id ORDER BY timestamp DESC LIMIT 1)\n             - INTERVAL '50 seconds'\"\n );\n $sth-&gt;execute();\n while (my @row = $sth-&gt;fetchrow_array())\n {\n\n     if (param('savetemplate'))\n     {\n         $dbh-&gt;do('INSERT INTO template (fleet, id, name, model, serial) VALUES (?, ?, ?, ?, ?)',\n             $fleet,\n             $id,\n             $row[0],\n             $row[1],\n             $row[2]\n         ) or die $!;\n     }\n     # Do some printing to screen and other mundane stuff\n}\n</code></pre>\n\n<p>I went over the data that is returned by the first SQL query, but I cannot find anything wrong with it, as the results yelds the expected result:</p>\n\n<pre><code>                  row                   |  serial   |      firmware       |         timestamp          \n----------------------------------------+-----------+---------------------+----------------------------\n (\"HS60     GPS COMPASS\",000-12308-001) | 19030590# |         01000023    | 2017-11-12 00:08:01.435483\n (\"IS42     Instrument\",\"\")             | 007564#   | 01000_E 1.0.54.3.21 | 2017-11-12 00:08:01.476376\n</code></pre>\n\n<p>I'm starting to think that something that should be escaped isn't? I also suspected that maybe DBI didn't like running a do() while still iterating through a <code>fetchrow_array()</code> series, but rewriting to avoid doing it simultaneously yielded the same result.</p>\n\n<p>If more info is required, leave a comment, and I'll supply it.</p>\n"}, {"tags": ["xml", "perl", "libxml2", "xml-libxml"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1510519764, "post_id": 47237104, "comment_id": 81457912, "body": "You might find <a href=\"http://grantm.github.io/perl-libxml-by-example/namespaces.html\" rel=\"nofollow noreferrer\">the examples here</a> useful."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1510398358, "creation_date": 1510398358, "answer_id": 47237204, "question_id": 47237104, "link": "https://stackoverflow.com/questions/47237104/xml-with-namespace-not-getting-parsed-in-perl/47237204#47237204", "title": "xml with namespace not getting parsed in perl", "body": "<p>You have to use the XPathContext object to search for nodes in a namespace-aware way:</p>\n\n<pre><code>my $data_models = $xpc-&gt;findnodes('//ns:DataModel', $dom);\n</code></pre>\n\n<p>BTW, don't use <code>my $b</code>, $b is a special variable used in <a href=\"http://p3rl.org/sort\" rel=\"nofollow noreferrer\">sort</a> and declaring it as lexical can cause bugs if <code>sort</code> is used later in the same scope.</p>\n\n<p>Also, the namespace URI doesn't mean anything, it just identifies the namespace. </p>\n"}], "owner": {"reputation": 13, "user_id": 8923762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c8fcd5247598bb40b3d508d4c02933?s=128&d=identicon&r=PG", "display_name": "user26055", "link": "https://stackoverflow.com/users/8923762/user26055"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 47237204, "answer_count": 1, "score": 1, "last_activity_date": 1510401893, "creation_date": 1510397608, "last_edit_date": 1510401893, "question_id": 47237104, "link": "https://stackoverflow.com/questions/47237104/xml-with-namespace-not-getting-parsed-in-perl", "title": "xml with namespace not getting parsed in perl", "body": "<p>I have an xml with default namespace something like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;start xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xsi:schemaLocation=\"http://127.0.0.1 GrammarXSD.xsd\" version=\"01.00\" xmlns=\"GrammarXSD.xsd\"&gt;\n    &lt;DataModel&gt;\n        #rest of the xml\n    &lt;/DataModel&gt;\n&lt;/start&gt;\n</code></pre>\n\n<p>To parse this xml, I am trying to register the namespace using the following code:</p>\n\n<pre><code>my $file = \"xml file location\";\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $file);\nmy $xpc = XML::LibXML::XPathContext-&gt;new($dom-&gt;documentElement());\n$xpc-&gt;registerNs('ns',  'GrammarXSD.xsd');\nmy $b = $dom-&gt;findnodes('//ns:DataModel');\n</code></pre>\n\n<p>However this is not finding the DataModel nodes as expected.\nThe GrammarXSD.xsd file is in the same location as the xml.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1510393147, "post_id": 47236422, "comment_id": 81423126, "body": "If this is <i>literally</i> your code then there is a typo in: <code>substr($words, $i; 2);</code> -- it should have a <code>,</code> and not a <code>;</code>.  So <code>substr($words, $i, 2);</code>.  But that should give you a <code>syntax error</code> or such."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1510393390, "post_id": 47236422, "comment_id": 81423183, "body": "Could it possibly be that you actually do have <code>$word</code> instead of <code>$words</code>, just a li&#39;l typo?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1510478217, "last_edit_date": 1510478217, "creation_date": 1510395192, "answer_id": 47236762, "question_id": 47236422, "link": "https://stackoverflow.com/questions/47236422/perl-program-to-count-two-character-frequencies/47236762#47236762", "title": "Perl Program to Count Two Character Frequencies", "body": "<p>My best guess is that you actually have <code>$word</code> instead of <code>$words</code>; a typo. If the compilation found the symbol <code>$word</code> in the text then it's probably there.</p>\n\n<p>However, I'd also like to comment on the code. A cleaned up version</p>\n\n<pre><code>while (my $words = &lt;$in&gt;) {\n    chomp $words;\n    my $last_duo_idx = length($words) - 2;\n    for my $i (0 .. $last_duo_idx) {\n        my $duo = substr($words, $i, 2); \n        ++$wordcount{$duo};\n    }   \n}\n\nmy @skeys = sort { $wordcount{$b} &lt;=&gt; $wordcount{$a} } keys %wordcount;\n\nforeach my $word (@skeys) {\n    print \"$word\\t$wordcount{$word}\\n\";\n} \n</code></pre>\n\n<p>This runs correctly on a made-up file. (I sort separately only so to not run off of the page.)</p>\n\n<p>Comments</p>\n\n<ul>\n<li><p>Need to stop one before last in the line, and <code>substr</code> starts from <code>0</code>; thus <code>-2</code></p></li>\n<li><p>One almost never needs a C-style loop</p></li>\n<li><p>There is no need here to test for existence of a key. If it doesn't exist it is <em>autovivified</em> (created), then incremented to <code>1</code> with <code>++</code>; otherwise the count is incremented.</p></li>\n<li><p>To sort numerically use <code>&lt;=&gt;</code>, not <code>cmp</code></p></li>\n<li><p>Typos:</p>\n\n<ul>\n<li><code>substr($words, $i; 2)</code> needs a <code>,</code> not <code>;</code>, so <code>substr($words, $i, 2)</code>  </li>\n<li><code>$wordcount{$duo}</code> in print should be <code>$wordcount{$word}</code>.</li>\n</ul></li>\n<li><p>I am not sure about naming: why is a line of text called <code>$words</code>?</p></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 8049857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25cc4681ce3b0e088978d092d9bf645e?s=128&d=identicon&r=PG&f=1", "display_name": "NinJesus", "link": "https://stackoverflow.com/users/8049857/ninjesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47236762, "answer_count": 1, "score": 0, "last_activity_date": 1510478217, "creation_date": 1510392845, "question_id": 47236422, "link": "https://stackoverflow.com/questions/47236422/perl-program-to-count-two-character-frequencies", "title": "Perl Program to Count Two Character Frequencies", "body": "<blockquote>\n  <p>I am trying to find two character strings in a text file and print them and their frequencies out.</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl\n#digram finder\nuse strict; use warnings;\n#finds digrams in a file and prints them and their frequencies out\n\ndie \"Must input file\\n\" if (@ARGV != 1);\n\nmy ($file) = @ARGV;\n\nmy %wordcount;\n\n\nopen (my $in, \"&lt;$file\") or die \"Can't open $file\\n\";\n\nwhile (my $words = &lt;$in&gt;){\n        chomp $words;\n        my $length = length($words);\n        for (my $i = 0; $i&lt;$length; $i++){\n                my $duo = substr($words, $i; 2);\n                if (not exists $wordcount{$duo}){\n                        $wordcount{$duo} = 1;\n                }\n                else {\n                        $wordcount{$duo}++;\n                }\n        }\n}\n\nforeach my $word (sort {$wordcount{$b} cmp $wordcount{$a}} keys %wordcount){\n                print \"$word\\t$wordcount{$duo}\\n\";\n}\n\n\nclose($in);\n</code></pre>\n\n<ol>\n<li>First I set the text file to a string $words.</li>\n<li>Then, I run a for loop and create a substring $duo at each position along $words </li>\n<li>If $duo doesn't exist within the hash %wordcount, then the program creates the key $duo</li>\n<li>If $duo does exist, then the count for that key goes up by 1</li>\n<li>Then the program prints out the digrams and their frequencies, in order of decreasing frequency</li>\n</ol>\n\n<p>When I try to run the code, I get the error message that I forgot to declare $word on line 17 but I do not even have the string $word. I am not sure where this error message is coming from. Can someone help me find where the error is coming from?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl", "module", "filehandle"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1510383243, "post_id": 47235215, "comment_id": 81420855, "body": "I don&#39;t think this is the code you are using. This code doesn&#39;t compile. You are missing a semicolon at the end of the <code>use File::Find</code> line. And once I fix that, I get another problem as you are not loading <code>sample.pm</code> in your main program. Please don&#39;t waste our time by posting sample code where we have to fix simple errors like that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1510383328, "post_id": 47235215, "comment_id": 81420881, "body": "Two more errors. <code>sample.pm</code> does not return a true value. And the filename is different between this sample code and the error message that you quote."}, {"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510383701, "post_id": 47235215, "comment_id": 81420941, "body": "Basically i wanted to know whether we can open a file under main.pl and i need this file handle to be accessible in different Perl modules."}, {"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510383869, "post_id": 47235215, "comment_id": 81420974, "body": "Find the updated code where we get the exact error message ."}, {"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510384246, "post_id": 47235215, "comment_id": 81421047, "body": "sample.pm contains some functionalities which are required by the main package. During the course of execution of sample.pm i need all the major functionalities to be written to the log file. Basically i wanted to find a method how we can have single log file which contains the output starting from main to all the other different sub routines."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1510384274, "post_id": 47235215, "comment_id": 81421054, "body": "This is unrelated to the problem that you are asking about, but what do you think will happen when you open your logfile in <code>&#39;&gt;&#39;</code> mode, and then discover you&#39;re unable to obtain an exclusive lock because someone else has it locked?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1510384385, "post_id": 47235215, "comment_id": 81421074, "body": "Hint: Clobber-output mode will clobber the output file before you&#39;ve obtained a lock. This means if someone else already had the file opened with a lock, you just clobbered them."}, {"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 0, "creation_date": 1510384502, "post_id": 47235215, "comment_id": 81421092, "body": "Basically is there a way to access a file handle which is defined in main.pl to be accessed in other Perl modules ?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1510384532, "post_id": 47235215, "comment_id": 81421102, "body": "To solve the problem you are asking about: Try this (untested): <code>*sample::LOGFILE = *main::LOGFILE; print LOGFILE &quot;boo\\n&quot;;</code>  You&#39;re dealing with typeglob filehandles here, so you have the semantics of typeglobs available to you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510384910, "post_id": 47235215, "comment_id": 81421172, "body": "Your edit still doesn&#39;t give the error message that you claim it gives."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 0, "creation_date": 1510385392, "post_id": 47235447, "comment_id": 81421286, "body": "Is there any method where we can avoid passing the file handler to a subroutine ? I need to directly access the file handler in the perl module which is present in main,pl. Reason for this requirement is because i may have different Perl modules and different subroutines inside each modules, every time i need to pass the file handlers to each of these subroutines in Perl module. Another difficulty will be always subroutine need not be called from main.pl file, subroutine defined in a *.pm file may call other subroutine which is defined in another *.pm module."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 0, "creation_date": 1510385573, "post_id": 47235447, "comment_id": 81421329, "body": "@RotchMiller: My answer already tells you how to do that. But I think it&#39;s a very bad idea."}, {"owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 0, "creation_date": 1510386858, "post_id": 47235447, "comment_id": 81421686, "body": "Main underlying problem is the way how the file handler&#39;s can be made visible in the subroutine of different Perl modules. Like how we have to export a scalar variables from one *.pm module to any perl modules using the EXPORTER, similar concept for file handlers would be good."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 0, "creation_date": 1510387167, "post_id": 47235447, "comment_id": 81421754, "body": "@RotchMiller: Exporter works fine for filehandles. Obviously not if they&#39;re lexical variables. But for package variables and bareword filehandles, there&#39;s no problem."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "edited": false, "score": 1, "creation_date": 1510387394, "post_id": 47235447, "comment_id": 81421802, "body": "@RotchMiller The traditional way to make a variable visible within subroutines in many different modules is to pass it in as a parameter. But if you want to ignore seventy years of good software engineering practice - feel free :-)"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1510419242, "post_id": 47235447, "comment_id": 81431113, "body": "@DaveCross : While this wasn&#39;t part of his question, the examples provided here seem to all still allow the file-locking race condition of opening a file in output/create/truncate mode, and <i>then</i> asking for an exclusive lock. If another process was holding a lock, this truncation would wreak havoc."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1510562817, "post_id": 47235447, "comment_id": 81471089, "body": "@DavidO: Feel free to post an answer that fixes that :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1525441641, "last_edit_date": 1525441641, "creation_date": 1510384777, "answer_id": 47235447, "question_id": 47235215, "link": "https://stackoverflow.com/questions/47235215/accessing-from-modules-a-filehandle-defined-in-main-program/47235447#47235447", "title": "Accessing from modules a filehandle defined in main program", "body": "<p>The reason why you're seeing this error is that <code>$main::LOGFILE</code> refers to the scalar variable <code>$LOGFILE</code> which contains the filename, <code>sample</code>. The filehandle, <code>LOGFILE</code>, is a completely different variable. And here we see the dangers of having two variables of different types (scalar vs filehandle) with the same name.</p>\n\n<p>Bareword filehandles (the ones in capital letters with no sigil attached, the type you are using) are slightly strange variables. They don't need a sigil, so you shouldn't use one. So the simplest fix is to just remove the <code>$</code>.</p>\n\n<pre><code>sub func()\n{\n  print main::LOGFILE (\"Printing in subroutine\\n\");\n}\n</code></pre>\n\n<p>But using global variables like this is a terrible idea. It will quickly lead to your code turning into an unmaintainable mess.</p>\n\n<p>Far better to use a <em>lexical</em> filehandle and to pass that into your subroutine.</p>\n\n<pre><code>our $LOGFILE=\"sample\";\nopen( my $log_fh, \"&gt;$LOGFILE\" ) or die \"__ERROR: can't open file\\n'\",$LOGFILE,\"'!\\n\";\nflock( $log_fh, LOCK_EX );\nprint $log_fh (\"Tool Start\\n\");\n&amp;sample::func($log_fh);\nflock( $log_fh, LOCK_UN );\nclose( $log_fh );\n</code></pre>\n\n<p>And in <code>sample.pm</code>:</p>\n\n<pre><code>sub func\n{\n  my ($fh) = @_;\n  print $fh (\"Printing in subroutine\\n\");\n}\n</code></pre>\n\n<p>Note that as I'm now passing a parameter to <code>func()</code>. I've removed the prototype saying that it takes no parameters (although the fact that you were calling it with <code>&amp;</code> turns off parameter checking!)</p>\n\n<p>A few other points.</p>\n\n<ul>\n<li>You don't need both <code>-w</code> and <code>use warnings</code>. Remove the <code>-w</code>.</li>\n<li>You don't need both <code>use strict</code> and <code>use strict 'refs'</code>. Remove the latter.</li>\n<li>Modules with all lower-case names are reserved for special Perl features called <strong>pragmas</strong>. Don't name your modules like that.</li>\n<li>There's no need for <code>$LOGFILE</code> to be a package variable (defined with <code>our</code>). Just make it a lexical (defined with <code>my</code>).</li>\n<li>There is no reason to call subroutines with <code>&amp;</code> (and, in fact, it has a couple of downsides that will confuse you).</li>\n<li>Don't define subroutines with prototypes unless you know what they are for.</li>\n<li>No need for a shebang line in modules.</li>\n<li>Use <code>strict</code> and <code>warnings</code> in modules.</li>\n</ul>\n\n<p>I'd write your code like this:</p>\n\n<pre><code># main.pl\nuse warnings;\nuse strict;\n\nuse File::Basename; # Not used. Remove?\nuse Fcntl ':flock'; # Not used. Remove?\nuse feature qw/say switch/;\nuse File::Spec::Functions; # Not used. Remove?\nuse File::Find; # Not used. Remove?\nuse Sample;\n\nmy $LOGFILE = 'sample';\n# Lexical filehandle. Three-arg version of open()\nopen( my $log_fh, '&gt;', $LOGFILE )\n  or die \"__ERROR: can't open file\\n'$LOGFILE'!\\n\";\nflock( $log_fh, LOCK_EX );\n\nprint $log_fh (\"Tool Start\\n\");\nSample::func($log_fh);\n\nflock( $log_fh, LOCK_UN );\nclose( $log_fh );\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>package Sample;\nuse strict;\nuse warnings;\n\nsub func {\n  my ($fh) = @_;\n  print $fh (\"Printing in subroutine\\n\");\n}\n\n1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1581981087, "last_edit_date": 1581981087, "creation_date": 1510387428, "answer_id": 47235779, "question_id": 47235215, "link": "https://stackoverflow.com/questions/47235215/accessing-from-modules-a-filehandle-defined-in-main-program/47235779#47235779", "title": "Accessing from modules a filehandle defined in main program", "body": "<p>You've got an extremely detailed analysis <a href=\"https://stackoverflow.com/a/47235447/4653379\">from Dave Cross</a>.  </p>\n\n<p>Here I'd like to offer a way to cleanly provide a log file for all modules to write to.</p>\n\n<p>Introduce a module that performs the writes to a log file in a sub; load it by all modules that need that. In that sub open the log file to append, using <a href=\"https://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\">state</a> filehandle which thus <a href=\"https://perldoc.perl.org/perlsub.html#Persistent-Private-Variables\" rel=\"nofollow noreferrer\">stays open</a> across the calls. Then the modules write by invoking this sub, and this can be initiated by a call from <code>main</code>.</p>\n\n<p>The logger module</p>\n\n<pre><code>package LogAll;\n\nuse warnings;\nuse strict;\nuse feature qw(say state);\nuse Carp qw(croak);    \nuse Exporter qw(import);\n\nour @EXPORT_OK = qw(write_log);\n\nsub write_log {\n    state $fh = do {               # initialize; stays open across calls\n        my $log = 'LOG_FILE.txt';\n        open my $afh, '&gt;&gt;', $log or croak \"Can't open $log: $!\";\n        $afh;\n    };  \n    say $fh $_ for @_;\n}\n1;\n</code></pre>\n\n<p>Two other modules, that need to log, are virtually the same for this example; here is one</p>\n\n<pre><code>package Mod1;\n\nuse warnings;\nuse strict;\n\nuse Exporter qw(import);    \nuse LogAll qw(write_log);\n\nour @EXPORT_OK = qw(f1);\n\nsub f1 {\n    write_log(__PACKAGE__ . \": @_\");\n}\n1;\n</code></pre>\n\n<p>The main</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse LogAll qw(write_log);    \nuse Mod1 qw(f1);\nuse Mod2 qw(f2);\n\nwrite_log('START');\n\nf1(\"hi from \" . __PACKAGE__);\nf2(\"another \" . __PACKAGE__);\n</code></pre>\n\n<p>A run results in the file <code>LOG_FILE.txt</code></p>\n\n<pre>\nSTART\nMod1: hi from main\nMod2: another main\n</pre>\n\n<p>I print <code>START</code> for a demo but the file does not have to be opened from <code>main</code>.</p>\n\n<p>Please develop the printer module further as suitable. For example, add a way for the file name to be passed optionally so that <code>main</code> can name the log (by varying type and number of arguments), and add a way to close the log controllably.</p>\n"}], "owner": {"reputation": 27, "user_id": 4469319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pEMFTtlcryM/AAAAAAAAAAI/AAAAAAAABkM/QyoYYCNwFNM/photo.jpg?sz=128", "display_name": "Rotch Miller", "link": "https://stackoverflow.com/users/4469319/rotch-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1581981087, "creation_date": 1510382889, "last_edit_date": 1581980851, "question_id": 47235215, "link": "https://stackoverflow.com/questions/47235215/accessing-from-modules-a-filehandle-defined-in-main-program", "title": "Accessing from modules a filehandle defined in main program", "body": "<p>I have following query in Perl regarding the accessing of file handlers.</p>\n\n<p>Consider the following code snippet which describes the exact scenario.</p>\n\n<h3>Main.pl</h3>\n\n<pre><code>#!/usr/bin/perl -w\nuse warnings;\nuse strict;\nuse strict 'refs';\n\nuse File::Basename;\nuse Fcntl ':flock';\n\nuse feature qw/say switch/;\n\nuse File::Spec::Functions;\nuse File::Find;\n\nrequire( \"/home/rxa3kor/Mastering_Perl/sample.pm\" );\n\nour $LOGFILE = \"sample\";\nopen( LOGFILE, \"&gt;$LOGFILE\" ) or die \"__ERROR: can't open file\\n'\", $LOGFILE, \"'!\\n\";\nflock( LOGFILE, LOCK_EX );\nprint LOGFILE ( \"Tool Start\\n\" );\n\n&amp;sample::func();\n\nflock( LOGFILE, LOCK_UN );\nclose( LOGFILE );\n</code></pre>\n\n<h3>sample.pm</h3>\n\n<pre><code>#!/usr/bin/perl -w\npackage sample;\n\nsub func() {\n    print $main::LOGFILE ( \"Printing in subroutine\\n\" );\n}\n</code></pre>\n\n<p>when I execute the above said code snippet I am getting the following error.</p>\n\n<blockquote>\n  <p>print() on unopened filehandle Mastering at /home/rxa3kor/Mastering_Perl/sample.pm line 6.</p>\n</blockquote>\n\n<p>Th error is because the filehandle <code>LOGFILE</code> is not visible under <code>sample.pm</code> module.</p>\n\n<p>How this concept can be implemented? </p>\n\n<p>I want to open a file in <code>Main.pl</code> and I need this file handle to be accessible in different Perl modules.</p>\n"}, {"tags": ["perl", "data-dumper", "perl-hash"], "comments": [{"owner": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1510360248, "post_id": 47233086, "comment_id": 81416908, "body": "can you not cat the file and redirect it into a one that does have write permissions? <code>cat perl_file_name &gt; new_perl_file_name</code>"}, {"owner": {"reputation": 1, "user_id": 7788746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37ec5f5bb3499ce869f052992d7313?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/7788746/newbie"}, "reply_to_user": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1510360495, "post_id": 47233086, "comment_id": 81416947, "body": "yes I did consider that but will go with that approach only if there is no other way to dump the hash without creating a new file."}, {"owner": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1510360981, "post_id": 47233086, "comment_id": 81417033, "body": "Is the entire hash found between parenthesis, and if so, are they the only parenthesis in the file? Is it a hash that starts off with <code>qw(</code> or is it just <code>(</code> with the <code>=&gt;</code> symbols inside? Or is the hash defined one element at a time with the <code>$hash_name{&#39;key&#39;} = &#39;value&#39;;</code> setup?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510362629, "post_id": 47233086, "comment_id": 81417311, "body": "What is this &quot;<i>perl file</i>&quot; -- a file ending in <code>.pl</code> with Perl code, and you want just that one variable (hash) from it?  Or is it a file that has only that hash?"}, {"owner": {"reputation": 1, "user_id": 7788746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37ec5f5bb3499ce869f052992d7313?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/7788746/newbie"}, "edited": false, "score": 0, "creation_date": 1510362886, "post_id": 47233086, "comment_id": 81417354, "body": "I have included the format of the hash"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1510369175, "post_id": 47233086, "comment_id": 81418346, "body": "@newbie  Thank you, and to repeat the question: Does this file have other Perl code or just this hash?  Also, is the hash undeclared (just <code>%hash_name</code>), as you show it, or is it &quot;lexical,&quot; so with <code>my</code> such as: <code>my %hash_name</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1510369966, "post_id": 47233086, "comment_id": 81418484, "body": "@newbie  What you show is invalid in  Perl: the <code>%</code> in <code>%hash_name</code> indicates that the variable is a <i>hash</i>, but <code>{ .. }</code> form a <i>hash reference</i>, which is a <i>scalar</i> variable (not a hash).  So it should be either  <code>%hash_name = ( .. )</code> or it&#39;s <code>$hashref_name = { .. }</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1510383583, "post_id": 47233086, "comment_id": 81420916, "body": "Note this is an insecure way to store data. The data file must be evaluated as perl code. Any arbitrary code could be in the file. In addition, the data file can only be read by Perl programs. Instead, use JSON or similar data format. <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON::MaybeXS</a> can convert between JSON and Perl."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1510374693, "post_id": 47234112, "comment_id": 81419264, "body": "<code>do</code> will always load the file. <code>require</code> will only load it once. Since you want to get data from the file, it&#39;s recommended to use <code>do</code>. Else the second or third time anything in that process loads the file they&#39;ll end up with <code>1</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1510375265, "post_id": 47234112, "comment_id": 81419370, "body": "@Schwern Right, thank you for the comment. I wanted to avoid excessive explanation thus I simply use <code>do</code>.  (I still mention <code>require</code> since it is feasible that the data <i>is</i> loaded once.)  But it is good to state this, thank you -- I am adding the comment."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1510376221, "post_id": 47234112, "comment_id": 81419558, "body": "It&#39;s bad practice to use <code>require</code> because a future person maintaining the code may also <code>require</code> the same file elsewhere (not even in the same code file, it&#39;s per process) and not realize it has already been required. I&#39;d suggest instead explaining why <code>do</code> is the right thing to do here instead of <code>require</code>, it&#39;s a necessary complexity."}, {"owner": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1510519914, "post_id": 47234112, "comment_id": 81457970, "body": "I wish I could give this two upvotes, one for the great answer, and the other for including in your solutions the <code>use warnings; use strict;</code> since so many beginning programmers who will look at this will see that it&#39;s important to have those on always, I see lots of beginning perl programmers who don&#39;t put those and then ask questions about issues that would have been simply prevented by including warnings and strict. Overall, a really great and thorough answer!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 1, "creation_date": 1510539356, "post_id": 47234112, "comment_id": 81463256, "body": "@DavyM  Thank you for kind words.  You are right, and there are so many such questions that it even seems <i>more</i> common (than otherwise) when people start out. All that we can do is to keep pointing it out, and write it always in full code examples."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1510523752, "last_edit_date": 1510523752, "creation_date": 1510371638, "answer_id": 47234112, "question_id": 47233086, "link": "https://stackoverflow.com/questions/47233086/reading-dumping-a-perl-hash-from-shell/47234112#47234112", "title": "Reading/dumping a perl hash from shell", "body": "<p>Ideally you'd copy the file so that you can edit it, then turn it into a <em>module</em> so to use it nicely.</p>\n\n<p>But if for some reason this isn't feasible here are your options.</p>\n\n<p><strong>If that hash is the only thing in the file</strong>, \"load\" it using <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">do</a><sup>&dagger;</sup> and assign to a hash </p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = './read_this.pl';  # the file has *only* that one hash\n\nmy %hash = do $file;\n</code></pre>\n\n<p>This form of <code>do</code> executes the file (runs it as a script), returning the last expression that is evaluated. With only the hash in the file that last expression is the hash definition,  precisely what you need. </p>\n\n<p><strong>If the hash is undeclared</strong>, so a global variable (or declared with <code>our</code>), then declare as <code>our</code> a hash with the same name in your program and again load the file with <code>do</code></p>\n\n<pre><code>our %hash_name;  # same name as in the file\ndo $file;        # file has \"%hash\" or \"our %hash\" (not \"my %hash\")\n</code></pre>\n\n<p>Here we \"pick up\" the hash that is evaluated as <code>do</code> runs the file by virtues of <a href=\"https://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\">our</a></p>\n\n<p><strong>If the hash is \"lexical\"</strong>, declared as <code>my %hash</code> (as it should be!) ... well, this is bad. Then you need to parse the text of the file so to extract lines with the hash. This is in general <em>very</em> hard to do, as it amounts to parsing Perl. (A hash can be built using <code>map</code>, returned from a sub as a reference or a flat list ...) Once that is done you <code>eval</code> the variable which contains the text defining that hash.</p>\n\n<p>However, if you know how the hash is built, as you imply, with no <code>()</code> anywhere inside</p>\n\n<pre><code>use warnings; \nuse strict;\n\nmy $file = './read_this.pl';\n\nmy $content = do {  # \"slurp\" the file -- read it into a variable\n    local $/;\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    &lt;$fh&gt;;\n};\n\nmy ($hash_text) = $content =~ /\\%hash_name\\s*=\\s*(\\(.*?\\)/s;\nmy %hash = eval $hash_text;\n</code></pre>\n\n<p>This simple shot leaves out a lot, assuming squarely that the hash is as shown.   Also note that this form of <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> carries real and serious security risks.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &nbsp;\nFiles are also loaded using <a href=\"https://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a>. Apart from it doing a lot more than <code>do</code>, the important thing here is that even if it runs multiple times <code>require</code> still loads that file <em>only once</em>. This matters for modules in the first place, which shouldn't be loaded multiple times,  and  <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> indeed uses <code>require</code>.</p>\n\n<p>On the other hand, <code>do</code> does it every time, what makes it suitable for loading files to be used as data, which presumably <em>should</em> be read every time. This is the recommended method. Note that <code>require</code> itself uses <code>do</code> to actually load the file.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/14660/schwern\">Schwern</a> for a comment. </p>\n"}], "owner": {"reputation": 1, "user_id": 7788746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37ec5f5bb3499ce869f052992d7313?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/7788746/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510523752, "creation_date": 1510360046, "last_edit_date": 1510362736, "question_id": 47233086, "link": "https://stackoverflow.com/questions/47233086/reading-dumping-a-perl-hash-from-shell", "title": "Reading/dumping a perl hash from shell", "body": "<p>I have a read-only perl file with a huge hash defined in it. Is there anyway for me to read this perl file and dump out the hash contents? </p>\n\n<p>this is basic structure of the hash within the file.</p>\n\n<pre><code>%hash_name = {\n    -files =&gt; [\n         '&lt;some_path&gt;',\n    ],\n    -dirs =&gt; [\n         '&lt;some_path&gt;',\n         '&lt;some_path&gt;',\n         '&lt;some_path&gt;',\n         '&lt;some_path&gt;',\n         '&lt;some_path&gt;',\n    ],\n};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1510452875, "post_id": 47231283, "comment_id": 81440013, "body": "Do you get warnings when you put <code>use strict;</code> and <code>use warnings;</code> in and run it?"}, {"owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1510586064, "post_id": 47231283, "comment_id": 81485745, "body": "Yes, it returned only expected explicit package name warnings for some of the variables that I hadn&#39;t declared my $variable.  No other errors or warnings were encountered."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 0, "creation_date": 1510586803, "post_id": 47245226, "comment_id": 81486256, "body": "My goal is simply to read in an existing spreadsheet, then create a new one just like the original, with the exception of altering the font color or fill color."}, {"owner": {"reputation": 551, "user_id": 1190901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09c028702d3dfe58dc4589b3290c1?s=128&d=identicon&r=PG", "display_name": "tangent", "link": "https://stackoverflow.com/users/1190901/tangent"}, "reply_to_user": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 0, "creation_date": 1510604984, "post_id": 47245226, "comment_id": 81496971, "body": "Ok, so you do not need the %bkgd_color hash then - have you tried my suggestion?"}, {"owner": {"reputation": 551, "user_id": 1190901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09c028702d3dfe58dc4589b3290c1?s=128&d=identicon&r=PG", "display_name": "tangent", "link": "https://stackoverflow.com/users/1190901/tangent"}, "reply_to_user": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 1, "creation_date": 1510605662, "post_id": 47245226, "comment_id": 81497353, "body": "@JHalbrook As it stands (i.e. saving the format in %bkgd_color), whenever $pattern = 1 and $color1 = 22 then the font color will always be set to whatever it is in the first cell that meets those conditions, regardless of what you set $fontcolor to be."}, {"owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 0, "creation_date": 1510710913, "post_id": 47245226, "comment_id": 81547806, "body": "Yes, thank you!  I did notice that I was building the new worksheet one column at a time instead of one row at a time.  I modified to build one row at at time. Still, using your suggestion, I am seeing some cells missing the fill color, alignment, and font colors - even though my PROP debug file shows the correct values.  I&#39;m dumbfounded."}, {"owner": {"reputation": 551, "user_id": 1190901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09c028702d3dfe58dc4589b3290c1?s=128&d=identicon&r=PG", "display_name": "tangent", "link": "https://stackoverflow.com/users/1190901/tangent"}, "reply_to_user": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 0, "creation_date": 1510714377, "post_id": 47245226, "comment_id": 81548611, "body": "The problem as i see it is not that you are building by row or column, but that you are saving a format in %bkgd_color and then applying that saved format to certain cells. You need to set a new format each time to those cells so you need to get rid of the %bkgd_color hash altogether."}, {"owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "edited": false, "score": 0, "creation_date": 1510773149, "post_id": 47245226, "comment_id": 81581775, "body": "Oh, yes, I agree and I did that.  See the new code above at the bottom of the original post.   Thank you!"}], "tags": [], "owner": {"reputation": 551, "user_id": 1190901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09c028702d3dfe58dc4589b3290c1?s=128&d=identicon&r=PG", "display_name": "tangent", "link": "https://stackoverflow.com/users/1190901/tangent"}, "is_accepted": false, "score": 0, "last_activity_date": 1510458222, "creation_date": 1510458222, "answer_id": 47245226, "question_id": 47231283, "link": "https://stackoverflow.com/questions/47231283/formatting-is-sporadic-in-spreadsheetwriteexcel/47245226#47245226", "title": "Formatting is sporadic in Spreadsheet::WriteExcel", "body": "<p>I'm not quite sure why you are saving the format to <code>$bkgd_color{$color1}</code> other than to save some processing time but I suspect that is where your problem is. Try changing that section of your code to:</p>\n\n<pre><code>if ( $pattern == 1 ) {\n    $format = $workbook-&gt;add_format(\n        pattern =&gt; $pattern,\n        bg_color =&gt; $color1,\n        align =&gt; 'left',\n        valign =&gt; 'top',\n        text_wrap =&gt; $wrap,\n        border =&gt; 1,\n        color =&gt; $fontcolor,\n        bold =&gt; $bold\n    );\n    $worksheet-&gt;write( $row, $col, $value, $format);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "is_accepted": false, "score": 0, "last_activity_date": 1510787785, "last_edit_date": 1510787785, "creation_date": 1510773437, "answer_id": 47315558, "question_id": 47231283, "link": "https://stackoverflow.com/questions/47231283/formatting-is-sporadic-in-spreadsheetwriteexcel/47315558#47315558", "title": "Formatting is sporadic in Spreadsheet::WriteExcel", "body": "<p>See this new code removing the bgcolor logic.  Yet, the resulting spreadsheet is only partially formatted correctly:</p>\n\n<pre><code>my $parser          = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook_parse  = $parser-&gt;parse( $toxls );\n\nmy $worksheet_parse = $workbook_parse-&gt;Worksheet( $totab );\nmy ( $col_min, $col_max ) = $worksheet_parse-&gt;col_range();\nmy ( $row_min, $row_max ) = $worksheet_parse-&gt;row_range();\n\nmy $workbook   = Spreadsheet::WriteExcel-&gt;new( $result_file );\nmy $worksheet  = $workbook-&gt;addworksheet( $totab );\n\n$worksheet-&gt;set_column('A:A', 12);\n$worksheet-&gt;set_column('C:C', 15);\n$worksheet-&gt;set_column('D:D', 30);\n$worksheet-&gt;set_column('E:E', 30);\n$worksheet-&gt;set_column('F:F', 35);\n$worksheet-&gt;set_column('G:G', 40);\n$worksheet-&gt;set_column('I:I', 40);\n\nfor my $row ( $row_min .. $row_max ) {\n    for my $col ( $col_min .. $col_max ) {\n\n    # Return the cell object at $row and $col\n\n    my $cell = $worksheet_parse-&gt;get_cell($row,$col);\n    next unless $cell;\n\n    my $value      = $cell-&gt;value();\n    my $format     = $cell-&gt;get_format();\n\n    my $pattern    = $format-&gt;{Fill}-&gt;[0];         \n    my $color1     = $format-&gt;{Fill}-&gt;[1];\n    my $color2     = $format-&gt;{Fill}-&gt;[2];\n    my $wrap       = $format-&gt;{Wrap};       \n    my $font       = $format-&gt;{Font};\n    my $fontcolor  = $font-&gt;{Color};\n    my $bold       = $font-&gt;{Bold};\n\n    ## Change value if font color = black\n    if ($fontcolor eq '32767') {\n        $fontcolor = \"8\";\n    }\n\n    ##  Freeze after the header row\n\n    if (index($value,\"B\\=baseline\") &gt; -1 || index($value,\"B\\=Baseline\") &gt; -1) {\n       $worksheet-&gt;set_row($row, 150);\n       $freezerow = $row + 1;\n       $worksheet-&gt;freeze_panes($freezerow, 0); \n    }\n\n    my $updformat = $workbook-&gt;add_format(\n              pattern =&gt; $pattern,\n              fg_color =&gt; $color1,\n              bg_color =&gt; $color2,\n              align =&gt; 'left',\n              valign =&gt; 'top',\n              text_wrap =&gt; $wrap,\n              border =&gt; 1,\n              color =&gt; $fontcolor,\n              bold =&gt; $bold\n    );\n\n    $worksheet-&gt;write( $row, $col, $value, $updformat);\n\n    }  \n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8921608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ffd162ced54bfb8c995deca148100c5?s=128&d=identicon&r=PG&f=1", "display_name": "JHalbrook", "link": "https://stackoverflow.com/users/8921608/jhalbrook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510787785, "creation_date": 1510348769, "last_edit_date": 1510588134, "question_id": 47231283, "link": "https://stackoverflow.com/questions/47231283/formatting-is-sporadic-in-spreadsheetwriteexcel", "title": "Formatting is sporadic in Spreadsheet::WriteExcel", "body": "<p>In attempting to create a spreadsheet using cell properties previously defined, I'm having issues where the cell formatting is only sporadically being written in the cells.  The values are there, but the font color, etc. is not always there.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>$result_file = $toxls . \".excel_props.xls\";\n$property_file = \"properties.txt\";\nopen (PROP, \"&gt;$property_file\");\n\nmy $parser          = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook_parse  = $parser-&gt;parse( $toxls );\n\nmy $worksheet_parse = $workbook_parse-&gt;Worksheet( $totab );\nmy ( $col_min, $col_max ) = $worksheet_parse-&gt;col_range();\nmy ( $row_min, $row_max ) = $worksheet_parse-&gt;row_range();\n\nmy $workbook   = Spreadsheet::WriteExcel-&gt;new( $result_file );\nmy $worksheet  = $workbook-&gt;addworksheet( $totab );\nmy %bkgd_color = ();\n\n$worksheet-&gt;set_column('A:A', 12);\n$worksheet-&gt;set_column('C:C', 15);\n$worksheet-&gt;set_column('D:D', 30);\n$worksheet-&gt;set_column('E:E', 30);\n$worksheet-&gt;set_column('F:F', 35);\n$worksheet-&gt;set_column('G:G', 40);\n$worksheet-&gt;set_column('I:I', 40);\n\nfor my $col ( $col_min .. $col_max ) {\n\n    for my $row ( $row_min .. $row_max ) {\n\n        # Return the cell object at $row and $col\n\n        my $cell = $worksheet_parse-&gt;get_cell( $row, $col );\n        next unless $cell;\n\n        my $value     = $cell-&gt;value();\n        my $format    = $cell-&gt;get_format();\n\n        my $pattern   = $format-&gt;{Fill}-&gt;[0];         \n        my $color1    = $format-&gt;{Fill}-&gt;[1];\n        my $color2    = $format-&gt;{Fill}-&gt;[2];\n\n        my $font      = $format-&gt;{Font};\n        my $fontcolor = $font-&gt;{Color};\n\n        ## Change value if font color = black\n        if ($fontcolor eq '32767') {\n            $fontcolor = \"8\";\n        }\n\n        my $wrap      = $format-&gt;{Wrap};\n        my $bold      = $font-&gt;{Bold};\n\n        print PROP \"\\nRow, Col = ($row, $col)\\n\";\n        print PROP \"Pattern    = $pattern\\n\";\n        print PROP \"Value      = $value\\n\";\n        print PROP \"Fill       = $pattern $color1 $color2\\n\";\n        print PROP \"Wrap       = $wrap\\n\";\n        print PROP \"Font       = $fontcolor\\n\";\n        print PROP \"Bold       = $bold\\n\";\n\n        if (index($value,\"B\\=baseline\") &gt; -1 || index($value,\"B\\=Baseline\") &gt; -1) { \n           $worksheet-&gt;set_row($row, 150); \n        }\n\n        if ($pattern == 1 ){\n\n          if ( ! exists $bkgd_color{$color1} ){\n\n             $bkgd_color{$color1}    =  $workbook-&gt;add_format(\n                                           pattern  =&gt; $pattern,\n                                           bg_color =&gt; $color1,\n                                           align =&gt; 'left',\n                                           valign =&gt; 'top',\n                                           text_wrap =&gt; $wrap,\n                                           border   =&gt; 1,\n                                           color  =&gt; $fontcolor,\n                                           bold    =&gt; $bold\n                                     );\n             print PROP \"Print segment = not exist bkgd_color\\n\";\n\n          }\n\n          $worksheet-&gt;write( $row, $col, $value, $bkgd_color{$color1});\n\n        } else {\n\n          $format = $workbook-&gt;add_format();\n          $format-&gt;set_pattern($pattern);\n          $format-&gt;set_align('left');\n          $format-&gt;set_valign('top');\n          $format-&gt;set_bg_color($color2);\n          $format-&gt;set_fg_color($color1);\n          $format-&gt;set_color($fontcolor);\n          $format-&gt;set_text_wrap($wrap);\n          $format-&gt;set_border();\n          $format-&gt;set_bold($bold); \n\n          print PROP \"Fontcolor  = $fontcolor\\n\";\n\n          $worksheet-&gt;write( $row, $col, $value, $format);\n\n       }        \n    }  \n}\n</code></pre>\n\n<p>The properties.txt file shows what I expect when I parse the $toxls spreadsheet, which I'm using to test with.  Yet, it doesn't always produce the formatting (font color, Align, and AlignH) that is being saved from the parse, when I write back out to the $result_file.  Any ideas?</p>\n\n<p>The properties.txt file looks good: </p>\n\n<pre><code>Row, Col = (2, 3)\nPattern    = 1\nValue      = Password Requirements\nFill       = 1 22 31\nWrap       = 1\nFont       = 10  &lt;-- red text\nBold       = 1\n\nRow, Col = (3, 3)\nPattern    = 1\nValue      = Logging \nFill       = 1 22 31\nWrap       = 1\nFont       = 12   &lt;--- blue text\nBold       = 0\n\nRow, Col = (4, 3)\nPattern    = 0\nValue      = Logging \nFill       = 0 64 65\nWrap       = 1\nFont       = 12\nBold       = 0\nFontcolor  = 12\n\nRow, Col = (5, 3)\nPattern    = 1\nValue      = AntiVirus\nFill       = 1 22 31\nWrap       = 1\nFont       = 8  &lt;-- black text \nBold       = 0\n</code></pre>\n\n<p>My goal is simply to read in an existing spreadsheet, then create a new one with the exception of altering the font color or fill color on some cells.  I tried this snippet, and it even missed formatting on many of the cells:</p>\n\n<pre><code>for my $col ( $col_min .. $col_max ) {\n    for my $row ( $row_min .. $row_max ) {\n\n       # Return the cell object at $row and $col\n\n       my $cell = $worksheet_parse-&gt;get_cell( $row, $col );\n       next unless $cell;\n\n       my $value     = $cell-&gt;value();\n       my $format    = $cell-&gt;get_format();\n\n       $worksheet-&gt;write( $row, $col, $value, $format);\n\n    }\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510412789, "post_id": 47231223, "comment_id": 81428823, "body": "Your &quot;expected output&quot; isn&#39;t valid XML."}, {"owner": {"reputation": 73, "user_id": 1128792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91f07514b04bad7a78e14de7f278b4d2?s=128&d=identicon&r=PG", "display_name": "user1128792", "link": "https://stackoverflow.com/users/1128792/user1128792"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510413378, "post_id": 47231223, "comment_id": 81428985, "body": "Those are just mock-ups. I didn&#39;t want to post the large XML files I&#39;m working with."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510578117, "post_id": 47231223, "comment_id": 81480542, "body": "So we&#39;re supposed to guess&quot; your true requirement?"}, {"owner": {"reputation": 73, "user_id": 1128792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91f07514b04bad7a78e14de7f278b4d2?s=128&d=identicon&r=PG", "display_name": "user1128792", "link": "https://stackoverflow.com/users/1128792/user1128792"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510590278, "post_id": 47231223, "comment_id": 81488626, "body": "As I see your need for perfection I have edited the expected output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510592549, "post_id": 47231223, "comment_id": 81490209, "body": "Thank you. It is not simply a &quot;need for perfection&quot;: absolute accuracy is essential in programming, and sloppiness is the cause of many bugs and issues. I have also indented your XML properly to make it easier to understand."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 1128792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91f07514b04bad7a78e14de7f278b4d2?s=128&d=identicon&r=PG", "display_name": "user1128792", "link": "https://stackoverflow.com/users/1128792/user1128792"}, "is_accepted": false, "score": 1, "last_activity_date": 1510412716, "last_edit_date": 1510412716, "creation_date": 1510377570, "answer_id": 47234637, "question_id": 47231223, "link": "https://stackoverflow.com/questions/47231223/xmltwig-concatenate-xml-files-but-keep-the-outer-nodes/47234637#47234637", "title": "XML::Twig concatenate XML files but keep the outer nodes", "body": "<p>I figured it out, so I'm posting what I came up with in case it helps someone else.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy @files = ( 'file1.xml', 'file2.xml', 'file3.xml' );\n\nmy $masterFile = pop( @files );\n\nmy @content;\n\nforeach my $file ( @files ) {\n\n    XML::Twig-&gt;new(\n        twig_handlers =&gt; {\n            'Content' =&gt; sub { push @content, $_; $_-&gt;cut(); }\n        }\n    )-&gt;parsefile( $file );\n}\n\nmy $twig = XML::Twig-&gt;new(\n    pretty_print  =&gt; 'indented_a',\n    twig_handlers =&gt; {\n        'Contents' =&gt; sub {\n            foreach my $content ( @content ) {\n                $content-&gt;paste( last_child =&gt; $_ );\n            }\n        }\n    }\n)-&gt;parsefile( $masterFile );\n\n$twig-&gt;print;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 1128792, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91f07514b04bad7a78e14de7f278b4d2?s=128&d=identicon&r=PG", "display_name": "user1128792", "link": "https://stackoverflow.com/users/1128792/user1128792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1510592443, "creation_date": 1510348459, "last_edit_date": 1510592443, "question_id": 47231223, "link": "https://stackoverflow.com/questions/47231223/xmltwig-concatenate-xml-files-but-keep-the-outer-nodes", "title": "XML::Twig concatenate XML files but keep the outer nodes", "body": "\n\n<p>I'm trying to concatenate two XML files together but keep the outer nodes. Below is an example I found which does this but because it works off defining a root node the other nodes are discarded.</p>\n\n<p>I tried using <code>twig_print_outside_roots =&gt; 1</code> but this does not work. I have tried other approaches but seem to get further away than the example so after hours of trying I'm reaching out.</p>\n\n<p>Any help is much appreciated. I prefer to use <code>XML::Twig</code> because I'm already using it to do other XML-related tasks.  </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $result_twig;\n\nforeach my $file ( 'to_concat_1.xml', 'to_concat_2.xml' ) {\n\n    my $current_twig = XML::Twig-&gt;new( twig_roots =&gt; { Content =&gt; 1 } )-&gt;parsefile( $file );\n\n    if ( ! $result_twig ) {\n        $result_twig = $current_twig;\n    }\n    else {\n        $current_twig-&gt;root-&gt;move( last_child =&gt; $result_twig-&gt;root )-&gt;erase;\n    }\n}\n\n$result_twig-&gt;print;\n</code></pre>\n\n<h3>to_concat_1.xml</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Envelope&gt;\n  &lt;Body&gt;\n    &lt;ContentRS&gt;\n      &lt;Success/&gt;\n      &lt;Contents&gt;\n        &lt;Content&gt;\n          &lt;Name&gt; Mike &lt;/Name&gt;\n          &lt;Email&gt; mike@somewhere.com&lt;/Email&gt;\n        &lt;/Content&gt;\n      &lt;/Contents&gt;\n    &lt;/ContentRS&gt;\n  &lt;/Body&gt;\n&lt;/Envelope&gt;\n</code></pre>\n\n<h3>to_concat_2.xml</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Envelope&gt;\n  &lt;Body&gt;\n    &lt;ContentRS&gt;\n      &lt;Success/&gt;\n      &lt;Contents&gt;\n        &lt;Content&gt;\n          &lt;Name&gt; Mark &lt;/Name&gt;\n          &lt;Email&gt; mark@somewhere.com&lt;/Email&gt;\n        &lt;/Content&gt;\n      &lt;/Contents&gt;\n    &lt;/ContentRS&gt;\n  &lt;/Body&gt;\n&lt;/Envelope&gt;\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Envelope&gt;\n  &lt;Content&gt;\n    &lt;Name&gt; Mike &lt;/Name&gt;\n    &lt;Email&gt; mike@somewhere.com&lt;/Email&gt;\n  &lt;/Content&gt;\n  &lt;Content&gt;\n    &lt;Name&gt; Mark &lt;/Name&gt;\n    &lt;Email&gt; mark@somewhere.com&lt;/Email&gt;\n  &lt;/Content&gt;\n&lt;/Envelope&gt;\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Envelope&gt;\n  &lt;Body&gt;\n    &lt;ContentRS&gt;\n      &lt;Success/&gt;\n      &lt;Contents&gt;\n        &lt;Content&gt;\n          &lt;Name&gt; Mike &lt;/Name&gt;\n          &lt;Email&gt; mike@somewhere.com&lt;/Email&gt;\n        &lt;/Content&gt;\n        &lt;Content&gt;\n          &lt;Name&gt; Mark &lt;/Name&gt;\n          &lt;Email&gt; mark@somewhere.com&lt;/Email&gt;\n        &lt;/Content&gt;\n      &lt;/Contents&gt;\n    &lt;/ContentRS&gt;\n  &lt;/Body&gt;\n&lt;/Envelope&gt;\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510339921, "post_id": 47229089, "comment_id": 81409181, "body": "Welcome to Stack Overflow. We are not a code writing service, and we also do not teach programming from scratch. If you need help with your school assignment that is fine, but you need to show some effort first. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and then do some research. It&#39;s likely your course offers resources that help you get started. Once you have, and you are getting stuck with code to show, feel free to ask and we will help you get unstuck."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510341157, "post_id": 47229531, "comment_id": 81409769, "body": "I keep forgetting you have that thing."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1510340580, "creation_date": 1510340580, "answer_id": 47229531, "question_id": 47229089, "link": "https://stackoverflow.com/questions/47229089/extracting-the-attribute-value-and-cut-the-string-using-perl/47229531#47229531", "title": "extracting the attribute value and cut the string using perl", "body": "<p>Easy in <a href=\"http://metacpan.org/pod/distribution/XML-XSH2/xsh\" rel=\"nofollow noreferrer\">xsh</a>, a wrapper around Perl's <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>:</p>\n\n<pre><code>open file.xml ;\nfor /Student/test echo substring-after(@subject, '/school/class/') ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8921179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4b7e873a462c6d0695cdf06d376e43?s=128&d=identicon&r=PG&f=1", "display_name": "SCool", "link": "https://stackoverflow.com/users/8921179/scool"}, "is_accepted": false, "score": 0, "last_activity_date": 1510554782, "creation_date": 1510554782, "answer_id": 47258331, "question_id": 47229089, "link": "https://stackoverflow.com/questions/47229089/extracting-the-attribute-value-and-cut-the-string-using-perl/47258331#47258331", "title": "extracting the attribute value and cut the string using perl", "body": "<p>I have tried in steps. First to get the attribute value, then taking the substring</p>\n\n<pre><code>INPUT=$(sed -n 's/.*subject=\"\\([^\"]*\\).*/\\1/p' *.xml)\necho \"the value of subject attribute=\" $INPUT\n</code></pre>\n\n<p>But this result in the output:</p>\n\n<p>the value of subject attribute=/school/class/twelve/maths.txt /school/class/eleven/physics.txt</p>\n\n<p>after this I have taken the substring:</p>\n\n<pre><code>SubString1=$(echo $INPUT| cut -d'/' -f 5)\necho \"SubString1=\" $SubString1\nnospaces=${SubString1## } # remove leading spaces\nSubString1=${nospaces%% } # remove trailing spaces\nSubString2=$(echo $INPUT| cut -d'/' -f 11)\necho \"SubString2=\" $SubString2\n</code></pre>\n\n<p>and the output is \nSubString1=maths.txt\nSubString2=physics.txt</p>\n"}], "owner": {"reputation": 1, "user_id": 8921179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4b7e873a462c6d0695cdf06d376e43?s=128&d=identicon&r=PG&f=1", "display_name": "SCool", "link": "https://stackoverflow.com/users/8921179/scool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1510554782, "creation_date": 1510338727, "question_id": 47229089, "link": "https://stackoverflow.com/questions/47229089/extracting-the-attribute-value-and-cut-the-string-using-perl", "title": "extracting the attribute value and cut the string using perl", "body": "<p><code>&lt;Student&gt;\n&lt;test subject=\"/school/class/twelve/maths.txt\"/&gt;\n&lt;test subject=\"/school/class/eleven/physics.txt\"/&gt;\n&lt;/Student&gt;</code></p>\n\n<p>I want to take the values of \"subject\" attibute, and then cut the string starting from class.\nfor example, the output must be two strings as: twelve/maths.txt and eleven/physics.txt\nCould anyone please help to do this using shell script or perl?</p>\n"}, {"tags": ["perl", "session", "plack", "psgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510337439, "post_id": 47227821, "comment_id": 81407942, "body": "There is nothing about threads in the code you have shown. And where do you have the code with <code>$fileHandle</code>? Is that part of the application, or part of the psgi file, or is it a completely different program? Please try to tell us why you want to do this."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510337735, "post_id": 47227821, "comment_id": 81408102, "body": "Oh. You are not using <code>strict</code>, and your <code>$global</code> in the app is not lexical. So it gets boggled up all the time. If you want the session ID of the current request, tell your program to do that. If you run this current code with a threaded or forking server, it might well end up doing weird things."}, {"owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510338059, "post_id": 47227821, "comment_id": 81408254, "body": "Dear simbabque, thanks for your comment. I  genereate dynamically the router url in bluider, and I need to get the random number is store in the file session to build the url dynamically. So first the user login, it generate a random number like token, then after login I load the url dynamically  in plack builder mount according to that user it is done from file session, thanks again for your participation."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510338186, "post_id": 47227821, "comment_id": 81408321, "body": "I don&#39;t really understand. The idea behind the session is that the user gets a cookie with the session id in it. What&#39;s wrong with that? Also, how do you run this code? What server are you using? (That&#39;s the <code>plackup</code> part...)."}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1510347610, "creation_date": 1510333386, "last_edit_date": 1510347610, "question_id": 47227821, "link": "https://stackoverflow.com/questions/47227821/get-plack-session-id-in-background-thread", "title": "Get Plack Session ID in background thread", "body": "<p>Sorry, I really tried but I can't find a solution to this simple problem.</p>\n\n<p>I need to get id session in plack, but not via browser, I want to do internally background in main namespace perl plack code.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/perl \nuse Plack::Builder;\nuse YAML;\nuse Plack::Session::Store::File;\n\nmy $app = sub {\n    my $env = shift;\n    #$global = 'write thsi text to file';\n    $global = $env-&gt;{'psgix.session.options'}{id};\n    return [ 200, [], [ \"App session ID: \" . $global ] ];\n};\n$app-&gt;();\n\nopen my $fileHandle, \"&gt;&gt;\", \"file\" or die \"Can't open '\\n\";\nprint $fileHandle $global;\nclose $fileHandle;\n\nmy $id = sub {\n    my $env = shift;\n    return [ 200, [], [ 'The ID session is: ' . $global ] ];\n};\n\nbuilder {\n    enable 'Session', store =&gt; Plack::Session::Store::File-&gt;new(\n                dir =&gt; './sessiondir',\n                serializer   =&gt; sub { YAML::DumpFile( reverse @_ ) },\n                deserializer =&gt; sub { YAML::LoadFile( @_ ) },\n            );\n    mount '/id' =&gt; $id;\n    mount '/' =&gt; $app;\n\n};\n</code></pre>\n\n<p>If I visit the root path <a href=\"http://192.168.1.1:5000\" rel=\"nofollow noreferrer\">http://192.168.1.1:5000</a>, I get:</p>\n\n<pre><code>App session ID: 33d2e5c9fc9d57ca79679675130d7a06b7ccc1f6\n</code></pre>\n\n<p>If I visit <a href=\"http://192.168.1.1:5000/id\" rel=\"nofollow noreferrer\">http://192.168.1.1:5000/id</a></p>\n\n<pre><code>The ID session is: 33d2e5c9fc9d57ca79679675130d7a06b7ccc1f6\n</code></pre>\n\n<p>I want to write the id session in the file from $global variable:</p>\n\n<pre><code>open my $fileHandle, \"&gt;&gt;\", \"file\" or die \"Can't open '\\n\";\nprint $fileHandle $global;\nclose $fileHandle;\n</code></pre>\n\n<p>In the destination file I get nothing, but if I change to variable to this, it work:</p>\n\n<pre><code>#$global = 'write thsi text to file';\n</code></pre>\n\n<p>Maybe the problem is because this text:</p>\n\n<blockquote>\n  <p>Threads in the thread pool are managed by the system. These threads\n  are not bound to the current request. Therefore, Session is not\n  available for them.</p>\n</blockquote>\n\n<p>Source:\n<a href=\"https://stackoverflow.com/questions/7618487/can-i-access-sessions-in-background-thread\">Can I access sessions in background thread?</a></p>\n\n<p>My target is just get the id and open this file to do another things from background.\nI want to avoid to save another file to this simple task, avoid sql, etc.</p>\n\n<p>Because I already save the data session in a file:</p>\n\n<pre><code>enable 'Session', store =&gt; Plack::Session::Store::File-&gt;new(\n                dir =&gt; './sessiondir',\n                serializer   =&gt; sub { YAML::DumpFile( reverse @_ ) },\n                deserializer =&gt; sub { YAML::LoadFile( @_ ) },\n            );\n</code></pre>\n\n<p>I appreciate any recommendation, maybe this is possible in another way.</p>\n\n<p>Thanks so much. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 4, "creation_date": 1510332037, "post_id": 47227346, "comment_id": 81405045, "body": "I think you suffer from <i>comparing floating point numbers</i>. See <a href=\"https://stackoverflow.com/q/21587663/5830574\">stackoverflow.com/q/21587663/5830574</a>, for example."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1510343544, "post_id": 47227346, "comment_id": 81410892, "body": "@PerlDuck that&#39;s different; infinite precision would make that work.  Here, it&#39;s more of a logic flaw: no integer divided by 10001 will ever equal 10/100."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1510334643, "last_edit_date": 1510334643, "creation_date": 1510332093, "answer_id": 47227452, "question_id": 47227346, "link": "https://stackoverflow.com/questions/47227346/this-only-works-on-nice-whole-numbers/47227452#47227452", "title": "This only works on nice whole numbers", "body": "<p>Compare integers instead, the floating point numbers can be different:</p>\n\n<pre><code>int($line_c / $total) == int($up / 100)\n</code></pre>\n\n<p>But it seems you have the logic wrong. It prints the output for the first 10 lines, and then does nothing for the rest of the loop (same with 10000). Verify by printing $line_c together with $up.</p>\n"}], "owner": {"reputation": 47, "user_id": 8908532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36055d44d0fc35a955aeaa075ccd166c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikster", "link": "https://stackoverflow.com/users/8908532/mikster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 47227452, "answer_count": 1, "score": 2, "last_activity_date": 1510334643, "creation_date": 1510331694, "last_edit_date": 1510332062, "question_id": 47227346, "link": "https://stackoverflow.com/questions/47227346/this-only-works-on-nice-whole-numbers", "title": "This only works on nice whole numbers", "body": "<p>Small program that give a percent of how far it is in counting to X number:</p>\n\n<pre><code>$total = 10000;\n$up = 0;\nprint \"$up%\\n\";\n$up = 10;\nwhile ($line_c != $total){\n    if (($line_c/$total) == ($up/100)) {\n        print \"$up%\\n\";\n        $up += 10;\n    }\n    $line_c++;\n}\nprint \"$up%\\nDone\";\n</code></pre>\n\n<p>The problem is though, it only likes whole numbers. \nIf you do 10001, it will not print anything...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510323297, "post_id": 47224705, "comment_id": 81399351, "body": "Show us the code that you have tried? This really isn&#39;t something that needs an external module."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510323597, "post_id": 47224705, "comment_id": 81399540, "body": "Judging from your quite advanced Perl stuff on github, you&#39;re in for one giant face palm. :)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 12, "last_activity_date": 1510323327, "creation_date": 1510323327, "answer_id": 47224758, "question_id": 47224705, "link": "https://stackoverflow.com/questions/47224705/convert-integer-in-to-decimal-perl/47224758#47224758", "title": "Convert Integer in to decimal Perl", "body": "<p>Perl does not have data types in the sense of integer, float or string. All you need to do is divide by 100. If you want an output with two decimals, use <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"noreferrer\"><code>sprintf</code></a> to format it.</p>\n\n<pre><code>printf '%.02d', 29900 / 100;\n</code></pre>\n\n<p>Will output <code>299.00</code>. Note that <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"noreferrer\"><code>printf</code></a> is like <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"noreferrer\"><code>sprintf</code></a>, but with printing instead of returning.</p>\n\n<p>You can read <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"noreferrer\">perldata</a> to learn more about what <em>kinds of data</em> Perl has.</p>\n\n<hr>\n\n<p>Under the hood at the XS and C layer, there are of course data types. You can learn about them in <a href=\"http://perldoc.perl.org/perlguts.html#Variables\" rel=\"noreferrer\">perlguts</a>. But the whole point of a higher language is to abstract those things away. So if all you do is write Perl code, you never need to care that those exist or how they work.</p>\n"}], "owner": {"reputation": 298, "user_id": 2504940, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/16d4a6659ec483e285cf9f9178debef9?s=128&d=identicon&r=PG", "display_name": "ovntatar", "link": "https://stackoverflow.com/users/2504940/ovntatar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510323327, "creation_date": 1510323208, "question_id": 47224705, "link": "https://stackoverflow.com/questions/47224705/convert-integer-in-to-decimal-perl", "title": "Convert Integer in to decimal Perl", "body": "<p>I need to convert the following integers numbers </p>\n\n<pre><code>29900\n17940\n1\n</code></pre>\n\n<p>in to decimal format like </p>\n\n<pre><code>299.00\n179.40\n0.01\n</code></pre>\n\n<p>I tried already  Data/Types.pm but \nto_decimal(1, 2) \nreturn 1.00</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510313794, "post_id": 47221877, "comment_id": 81393395, "body": "huh? <code>$ftp-&gt;put(&quot;&#47;home&#47;chambres&#47;web&#47;example.com&#47;public_html&#47;cgi-</code> That seems incomplete."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510313884, "post_id": 47221877, "comment_id": 81393443, "body": "Secondly, it is not connecting. It tells you that twice <i>Net::FTP=GLOB(0x182e348)&lt;&lt;&lt; 425 Failed to establish connection.</i> and then again <i>&lt;pre&gt;Cannot upload Failed to establish connection</i>"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314119, "post_id": 47221877, "comment_id": 81393594, "body": "@GerhardBarnard - I know that :) The weird part, is that it says it <b>IS</b> connected:  <code>Currently in: &#47;web&#47;example.com&#47;public_html&#47;cgi-bin&#47;links&#47;admin&#47;IMPORT</code>."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314154, "post_id": 47221877, "comment_id": 81393611, "body": "&quot;That seems incomplete.&quot; - what seems incomplete?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314187, "post_id": 47221877, "comment_id": 81393633, "body": "I suspect it is not keeping the connection open. can you also fix the code? it seems incomplete. <code>$ftp-&gt;put(&quot;&#47;home&#47;chambres&#47;web&#47;example.com&#47;public_html&#47;cgi-</code>"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314398, "post_id": 47221877, "comment_id": 81393778, "body": "@GerhardBarnard thanks yeah that is what I was thinking (about it dropping the connection). The frustrating part, is that I do see the org.csv file being created on the server end - but its just a 0 byte file (and even after all the hanging, there is nothing in it). What are you thinking is wrong with the put() command? According to the docs its correct (first value is the local file, then section value is an optional remote filename)"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314714, "post_id": 47221877, "comment_id": 81393971, "body": "I would say it should be something like <code>$ftp-&gt;put(&quot;&#47;home&#47;chambres&#47;web&#47;example.com&#47;public_html&#47;cgi-di&zwnj;&#8203;r&#47;files.extensions &#47;dir&#47;to&#47;put&#47;in&#47;&quot;);</code> but your code stops at <code>cgi-</code>"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510314820, "post_id": 47221877, "comment_id": 81394033, "body": "@GerhardBarnard oh whoops, I see what you mean. I must have cut that off by accident when posting. I&#39;ve updated the question with the correct line :)"}, {"owner": {"reputation": 300, "user_id": 1049666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450e5e739052ad5a5247a0e4c6f6a89b?s=128&d=identicon&r=PG", "display_name": "fanlim", "link": "https://stackoverflow.com/users/1049666/fanlim"}, "edited": false, "score": 0, "creation_date": 1510315176, "post_id": 47221877, "comment_id": 81394253, "body": "add <code>or die &quot;put failed &quot;, $ftp-&gt;message;</code> to your put command:   <code>$ftp-&gt;put(&#39;&lt;yourfile&gt;&#39;) or die &quot;put failed &quot;, $ftp-&gt;message;</code>  Maybe, you get a better error message."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 300, "user_id": 1049666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450e5e739052ad5a5247a0e4c6f6a89b?s=128&d=identicon&r=PG", "display_name": "fanlim", "link": "https://stackoverflow.com/users/1049666/fanlim"}, "edited": false, "score": 0, "creation_date": 1510315441, "post_id": 47221877, "comment_id": 81394408, "body": "@fanlim - I already have that :) I&#39;m almost at the point of giving up on this, and just using <code>curl -T &#47;original&#47;folder&#47;org_spots.csv ftp:&#47;&#47;example.com&#47;dest-folder&#47; --user user:pass</code> , as that seems to work"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1510316877, "last_edit_date": 1510316877, "creation_date": 1510316602, "answer_id": 47222723, "question_id": 47221877, "link": "https://stackoverflow.com/questions/47221877/connecting-with-netftp-in-perl-but-fails-to-upload/47222723#47222723", "title": "Connecting with Net::FTP in Perl, but fails to upload", "body": "<pre><code>Net::FTP=GLOB(0x182e348)&gt;&gt;&gt; PORT 139,162,208,252,155,199\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 200 PORT command successful. Consider using PASV.\n</code></pre>\n\n<p>FTP uses a control connection for the command and data connections for each data transfer. With the PORT command your local system is instructing the server to connect to the given IP address (139.162.208.252) and port (39879=155*256+199). Connecting from outside to some arbitrary port on your system will not work if you are behind a firewall or some NAT or if there is a firewall configured on your system. In these cases it might work to use the passive mode where the client opens a connection to the server and not the server a connection to the client.</p>\n\n<pre><code>Net::FTP=GLOB(0x182e348)&gt;&gt;&gt; STOR org.csv\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 425 Failed to establish connection.\n</code></pre>\n\n<p>It looks like the server could not connect to your system in order to create a connection to transfer the data. Probably a firewall or NAT involved. Try passive mode.</p>\n\n<p>It looks like that you tried to use passive mode already:</p>\n\n<pre><code>$ftp-&gt;pasv();\n...\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; EPSV\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 229 Entering Extended Passive Mode (|||12065|)\n</code></pre>\n\n<p>Only you did it the wrong way. The command above just sends the PASV/EPSV command to the server but does not change which mode gets used for the next data transfer. To cite from <a href=\"https://metacpan.org/pod/Net::FTP\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>If for some reason you want to have complete control over the data connection, this includes generating it and calling the response method when required, then the user can use these methods to do so.<br>However calling these methods only affects the use of the methods above that can return a data connection. <strong>They have no effect on methods get, put, put_unique</strong> and those that do not require data connections.</p>\n</blockquote>\n\n<p>To instead enable passive mode in connection with <code>put</code>, <code>get</code> etc use <code>passive</code> not <code>pasv</code>:</p>\n\n<pre><code>$ftp-&gt;passive(1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11168919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90f262c78079bb2ac15224d915312363?s=128&d=identicon&r=PG", "display_name": "comet", "link": "https://stackoverflow.com/users/11168919/comet"}, "is_accepted": false, "score": 0, "last_activity_date": 1552020842, "creation_date": 1552020842, "answer_id": 55056933, "question_id": 47221877, "link": "https://stackoverflow.com/questions/47221877/connecting-with-netftp-in-perl-but-fails-to-upload/55056933#55056933", "title": "Connecting with Net::FTP in Perl, but fails to upload", "body": "<p>I have just got the exactly same problem.\nMy destination directory has the file created but contains nothing (empty file).\nI was running from Active Perl and so I tried by turning Passive Off.\nThere was no apparent error can be observed when trying to upload in passive mode.\nBut now I see Windows Defender poping up a window telling me that the ActivePerl was blocked.\nI unblock ActivePerl and now it works.</p>\n\n<p>Checking your firewall or Antivirus environment might be a way to the exit of this annoying problem.</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 47222723, "answer_count": 2, "score": 1, "last_activity_date": 1552020842, "creation_date": 1510313580, "last_edit_date": 1510314789, "question_id": 47221877, "link": "https://stackoverflow.com/questions/47221877/connecting-with-netftp-in-perl-but-fails-to-upload", "title": "Connecting with Net::FTP in Perl, but fails to upload", "body": "<p>I am trying to use <strong>Net::FTP</strong> ( <a href=\"http://search.cpan.org/~shay/libnet-3.10/lib/Net/FTP.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~shay/libnet-3.10/lib/Net/FTP.pm</a> ) to upload a file to a remote server. I have:</p>\n\n<pre><code>use Net::FTP;\n\nmy $ftp = Net::FTP-&gt;new(\"example.com\", Debug =&gt; 1) or die \"Cannot connect to example.com: $@\";\n\n$ftp-&gt;login(\"username\",'xxxx') or die \"Cannot login \", $ftp-&gt;message;\n$ftp-&gt;pasv();\n$ftp-&gt;binary();\n$ftp-&gt;cwd(\"/web/example.com/public_html/cgi-bin/links/admin/IMPORT\") or die \"Cannot change working directory \", $ftp-&gt;message;\nprint \"Currently in: \" . $ftp-&gt;pwd(). \"\\n\";\n$ftp-&gt;put(\"/home/chambres/web/example.com/public_html/cgi-bin/links/admin/org.csv\") or die \"Cannot upload \", $ftp-&gt;message;\n$ftp-&gt;quit;\n</code></pre>\n\n<p>However, when I run it I get:</p>\n\n<pre><code>Net::FTP&gt;&gt;&gt; Net::FTP(3.05)\nNet::FTP&gt;&gt;&gt;   Exporter(5.72)\nNet::FTP&gt;&gt;&gt;   Net::Cmd(3.05)\nNet::FTP&gt;&gt;&gt;   IO::Socket::SSL(2.024)\nNet::FTP&gt;&gt;&gt;     IO::Socket::IP(0.37)\nNet::FTP&gt;&gt;&gt;       IO::Socket(1.38)\nNet::FTP&gt;&gt;&gt;         IO::Handle(1.35)\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 220 (vsFTPd 3.0.3)\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; USER username\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 331 Please specify the password.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; PASS ....\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 230 Login successful.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; EPSV\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 229 Entering Extended Passive Mode (|||12065|)\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; TYPE I\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 200 Switching to Binary mode.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; CWD /web/example.com/public_html/cgi-bin/links/admin/IMPORT\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 250 Directory successfully changed.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; PWD\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 257 \"/web/example.com/public_html/cgi-bin/links/admin/IMPORT\" is the current directory\nCurrently in: /web/example.com/public_html/cgi-bin/links/admin/IMPORT\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; PORT 139,162,208,252,155,199\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 200 PORT command successful. Consider using PASV.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; FEAT\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 211-Features:\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  EPRT\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  EPSV\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  MDTM\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  PASV\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  REST STREAM\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  SIZE\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  TVFS\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 211 End\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; HELP ALLO\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 214-The following commands are recognized.\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  ABOR ACCT ALLO APPE CDUP CWD  DELE EPRT EPSV FEAT HELP LIST MDTM MKD\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  MODE NLST NOOP OPTS PASS PASV PORT PWD  QUIT REIN REST RETR RMD  RNFR\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  RNTO SITE SIZE SMNT STAT STOR STOU STRU SYST TYPE USER XCUP XCWD XMKD\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt;  XPWD XRMD\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 214 Help OK.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; ALLO 37954326\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 202 ALLO command ignored.\nNet::FTP=GLOB(0x182e348)&gt;&gt;&gt; STOR org.csv\nNet::FTP=GLOB(0x182e348)&lt;&lt;&lt; 425 Failed to establish connection.\n&lt;h1&gt;Software error:&lt;/h1&gt;\n&lt;pre&gt;Cannot upload Failed to establish connection.\n&lt;/pre&gt;\n&lt;p&gt;\nFor help, please send mail to this site's webmaster, giving this error message\nand the time and date of the error.\n\n&lt;/p&gt;\n[Fri Nov 10 10:57:33 2017] export-csv-other-sites.cgi: Cannot upload Failed to establish connection.\n</code></pre>\n\n<p>It seems to work up until the <code>put()</code> command. Any ideas as to what is going on?</p>\n"}, {"tags": ["perl", "selenium", "selenium-webdriver", "phantomjs", "alert"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510591003, "post_id": 47220363, "comment_id": 81489133, "body": "Your second link is broken. It contains the same image as the first one."}, {"owner": {"reputation": 112, "user_id": 7657705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9353bda514c7f88911ebb668c196485?s=128&d=identicon&r=PG", "display_name": "SaikaVA", "link": "https://stackoverflow.com/users/7657705/saikava"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510678403, "post_id": 47220363, "comment_id": 81532892, "body": "oh thanks I will change it!"}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 7657705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9353bda514c7f88911ebb668c196485?s=128&d=identicon&r=PG", "display_name": "SaikaVA", "link": "https://stackoverflow.com/users/7657705/saikava"}, "edited": false, "score": 0, "creation_date": 1510316472, "post_id": 47220843, "comment_id": 81395034, "body": "Your Solution worked! I just copy&amp;pasted and moved the click between the script executions."}], "tags": [], "owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "is_accepted": true, "score": 5, "last_activity_date": 1511492249, "last_edit_date": 1511492249, "creation_date": 1510310269, "answer_id": 47220843, "question_id": 47220363, "link": "https://stackoverflow.com/questions/47220363/how-do-i-get-the-text-in-an-alert-prompt-dialog-in-perl-with-selenium-webdriver/47220843#47220843", "title": "How do I get the text in an alert/prompt/dialog in perl with selenium webdriver?", "body": "<p>One way is to override the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt\" rel=\"nofollow noreferrer\">prompt</a> function in the page with a script injection:</p>\n\n<pre><code># override the prompt function\n$d-&gt;execute_script('window.prompt=function(message, input){window.last_prompt = {message: message, input: input}};');\n\n# trigger a prompt\nselect undef, undef, undef, 8.00;\n\n# get the prompt default input\nmy $input = $d-&gt;execute_script('return window.last_prompt.input;');\n</code></pre>\n"}], "owner": {"reputation": 112, "user_id": 7657705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9353bda514c7f88911ebb668c196485?s=128&d=identicon&r=PG", "display_name": "SaikaVA", "link": "https://stackoverflow.com/users/7657705/saikava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 47220843, "answer_count": 1, "score": 4, "last_activity_date": 1511492249, "creation_date": 1510308771, "last_edit_date": 1510678458, "question_id": 47220363, "link": "https://stackoverflow.com/questions/47220363/how-do-i-get-the-text-in-an-alert-prompt-dialog-in-perl-with-selenium-webdriver", "title": "How do I get the text in an alert/prompt/dialog in perl with selenium webdriver?", "body": "<p>I want to get a string in the picture below. It is inside of an alert, prompt or dialog. My code is written in Perl and I am using Selenium Webdriver to navigate through the page.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0SHgH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0SHgH.png\" alt=\"Image shows the alert and the Url I want from it\"></a></p>\n\n<p><strong>What I have achieved so far:</strong></p>\n\n<ul>\n<li>finding the link with selenium and clicking on it</li>\n<li>waiting for the alert to appear</li>\n<li>get a string from the alert, but not the string in the text field</li>\n</ul>\n\n<p><strong>Code</strong></p>\n\n<pre><code>my $copy_elem = wait_until {      \n    $d-&gt;find_element_by_id('clipboard-link'); \n};        \n$copy_elem-&gt;click;\n\nselect undef, undef, undef, 8.00;\n\nmy $alert = wait_until {\n  $d-&gt;get_alert_text;\n};\n</code></pre>\n\n<p><code>$alert</code> output is \"Copy Link\"</p>\n\n<p>So the text that I want is inside the alert's text field. With get_alert_text I only get the Alert string, but not the text field content. I searched the Web for answers and saw people using window handles to switch to the alert. I tried to look for similar functions in Selenium Webdriver's documentation:</p>\n\n<p><a href=\"http://search.cpan.org/~aivaturi/Selenium-Remote-Driver-0.15/lib/Selenium/Remote/Driver.pm\" rel=\"nofollow noreferrer\">CPAN Selenium Webdriver Docu with list of functions</a></p>\n\n<p>I tried getting the window handles and load them into an array, but it does not get a second window handle for the alert. get_current_window_handle doesn't work either. I used phantomjs and chrome as browsers. As far as I know there is no <code>driver.switchto().alert();</code> for perl. </p>\n"}, {"tags": ["regex", "perl", "perl-module", "hash-of-hashes"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 3, "creation_date": 1510309126, "post_id": 47219915, "comment_id": 81390348, "body": "Please post what you have tried and where you failed."}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1510309715, "creation_date": 1510309715, "answer_id": 47220662, "question_id": 47219915, "link": "https://stackoverflow.com/questions/47219915/how-do-we-sort-a-multi-dimensional-hash-based-on-the-value/47220662#47220662", "title": "How do we sort a multi dimensional hash based on the value?", "body": "<p>You should use <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a> for sorting lists. In this case the hash is nested so it is iterated at first level keys and then sorted with second level keys according to the values the <code>b</code> contains at third level.</p>\n\n<pre><code>for my $k1 (keys %hash) {\n    for my $k2 (sort {$hash{$k1}{$a}{'b'} &lt;=&gt; $hash{$k1}{$b}{'b'}} keys %{$hash{$k1}}) {\n        print \"$k1.$k2.b = \",$hash{$k1}{$k2}{'b'}, \" \";\n    }\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7108310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683faae55445f57ec84e8e10b9b98aea?s=128&d=identicon&r=PG&f=1", "display_name": "Sai Kiran", "link": "https://stackoverflow.com/users/7108310/sai-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "closed_date": 1510310625, "answer_count": 1, "score": -2, "last_activity_date": 1510309715, "creation_date": 1510307415, "last_edit_date": 1510308723, "question_id": 47219915, "link": "https://stackoverflow.com/questions/47219915/how-do-we-sort-a-multi-dimensional-hash-based-on-the-value", "closed_reason": "Duplicate", "title": "How do we sort a multi dimensional hash based on the value?", "body": "<p>I have an hash which looks like this when I use dumper: </p>\n\n<pre><code>{      \n hello =&gt; {   \n    pqr =&gt; {   \n     a =&gt; 455,\n     b =&gt; 52,\n     c =&gt; \"hello\"\n    },\n    lmn =&gt; {\n     a =&gt; 3,\n     b =&gt; 39,\n     c =&gt; \"hi\"\n    }\n },\n hi =&gt; {\n    suv =&gt; {\n     a =&gt; 21,\n     b =&gt; 36,\n     c =&gt; \"well\"\n    },\n    xyz =&gt; {\n     a =&gt; 32,\n     b =&gt; 56,\n     c =&gt; \"done\"\n    }\n }\n}\n</code></pre>\n\n<p>I would like to sort based on the value of \"b\". </p>\n\n<p>Output should be like:</p>\n\n<blockquote>\n  <p>hello.lmn.b = 39    hello.pqr.b = 52</p>\n  \n  <p>hi.suv.b = 36    hi.xyz.b = 56</p>\n</blockquote>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510307392, "post_id": 47219645, "comment_id": 81389196, "body": "<code>print if (!&#47;^$&#47;)</code>"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1510314736, "post_id": 47219645, "comment_id": 81393983, "body": "Can you afford to have a copy of this file while the script is running?"}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 5, "last_activity_date": 1510307447, "creation_date": 1510307447, "answer_id": 47219925, "question_id": 47219645, "link": "https://stackoverflow.com/questions/47219645/sed-d-in-perl/47219925#47219925", "title": "sed &#39;/^$/d&#39; in perl", "body": "<p>To print lines that contain at least one non-whitespace character:</p>\n\n<pre><code>perl -ne 'print if /\\S/;'\n</code></pre>\n\n<p>To skip empty lines:</p>\n\n<pre><code>perl -ne 'print unless /^$/;'\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6562007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-QWsomkOotYI/AAAAAAAAAAI/AAAAAAAACo4/UWgCqxfwhEw/photo.jpg?sz=128", "display_name": "eswues", "link": "https://stackoverflow.com/users/6562007/eswues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 47219925, "answer_count": 1, "score": 0, "last_activity_date": 1510323555, "creation_date": 1510306584, "question_id": 47219645, "link": "https://stackoverflow.com/questions/47219645/sed-d-in-perl", "title": "sed &#39;/^$/d&#39; in perl", "body": "<p>How to do this sed empty line delete with perl: <code>sed '/^$/d'</code></p>\n\n<p>there is <code>print unless</code> method but I mean something more 'just like in sed' as you make substitude by <code>perl -ne 's/&lt;pattern//g'</code></p>\n"}, {"tags": ["perl", "date", "awk", "solaris"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510304678, "post_id": 47219062, "comment_id": 81387521, "body": "Which version of Perl do you have? Run <code>perl -v</code> please. And also <a href=\"https://stackoverflow.com/posts/47219062/edit\">edit</a> and include the expected output. I don&#39;t know what that <code>date -d</code> with the string is supposed to do. Is it part of a shell script? What are the values?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510304728, "post_id": 47219062, "comment_id": 81387557, "body": "This is perl v5.8.4"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510304874, "post_id": 47219062, "comment_id": 81387640, "body": "Wow. That&#39;s ancient. That version of today is almost 14 years old."}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510304939, "post_id": 47219062, "comment_id": 81387675, "body": "@simbabque I know :( I have updated the question with what I get in Linux. I&#39;d like to get the same result, if possible in via <code>perl</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510304978, "post_id": 47219062, "comment_id": 81387697, "body": "So <code>$hr</code>, <code>$mi</code> and <code>$duration</code> are shell variables?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510304982, "post_id": 47219062, "comment_id": 81387698, "body": "If you want a one-liner ... where do the time and duration come from? Just type them in?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510305097, "post_id": 47219062, "comment_id": 81387761, "body": "Is the format always the same? I don&#39;t think 5.8.4 included any useful date parsing utilities in the core distribution. Can you install stuff from CPAN, or is that box completely locked down?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510305107, "post_id": 47219062, "comment_id": 81387769, "body": "@simbabque yes, they are variables, calculated in a shell script. Basically I take those values from a file which has time and duration along with a few more values."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510305259, "post_id": 47219062, "comment_id": 81387853, "body": "What does it do? I don&#39;t see how the output works. You have hour, minute and a duration, and you format it to hour and minute, but it disregards the 23 from the time string, and the 60 minute duration, and gives you an output of <code>%H</code> as <code>00</code> hours and <code>%M</code> as 28 minutes. Does not seem very useful."}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510305266, "post_id": 47219062, "comment_id": 81387858, "body": "@zdim, they are extracted from a file using <code>awk</code> command. @simbabque - no, I can&#39;t install anything, I don&#39;t have any privileges. I checked and found that I have <code>Time::Local</code>. Does that help?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510305480, "post_id": 47219062, "comment_id": 81387980, "body": "@simbabque I am basically calculating an ETA. 23:28 is the start time. Duration in minutes is what I should add to this 23:28 time and produce an ETA, which is 12:28 the next day or 00:28 in Unix. Makes sense?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510305726, "post_id": 47219062, "comment_id": 81388110, "body": "If it is exactly what you describe that is simple: add minutes, see if it&#39;s <code>&gt;60</code> and adjust, increment hour and roll it over if <code>&gt;24</code>.   (Are there any other <code>Time::</code> or <code>Date::</code> modules?)"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510305871, "post_id": 47219062, "comment_id": 81388210, "body": "@zdim, that&#39;s exactly what I want. I do have <code>Time::Local</code> present."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1510313134, "post_id": 47219062, "comment_id": 81392985, "body": "What version of Solaris?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1510313324, "post_id": 47219062, "comment_id": 81393099, "body": "@ghoti, version 10. <code>Oracle Solaris 10 8&#47;11 s10s_...</code>"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1510326222, "post_id": 47219062, "comment_id": 81401326, "body": "Okay, er ... do you have a C compiler available? That is, can you run <code>gcc --version</code>, or when you run <code>cc</code>, do you get something other than <code>language optional software package not installed</code>?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "edited": false, "score": 0, "creation_date": 1510327344, "post_id": 47219062, "comment_id": 81402133, "body": "Ok, I can answer this only on Monday as I&#39;ve lost access to my system and its weekend. :-) Thanks for trying everyone. Hopefully we&#39;ll get something!"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1510327659, "post_id": 47219062, "comment_id": 81402308, "body": "You can download a Solaris 10 install image which you can run in VirtualBox if you want to experiment over the weekend."}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "edited": false, "score": 0, "creation_date": 1510327716, "post_id": 47219062, "comment_id": 81402336, "body": "I had that thought, let me try."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1510330814, "post_id": 47219062, "comment_id": 81404300, "body": "The default awk on Solaris in /bin is old, broken awk which no-one should ever use but there IS an almost-POSIX awk in /usr/xpg4/bin. Maybe look there or elsewhere to see if there&#39;s a different <code>date</code> command too?"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1510367000, "post_id": 47219062, "comment_id": 81418007, "body": "@EdMorton I did check, there was another <code>date</code> in xpg4 (or something similar path), but it wasn&#39;t compatible with <code>date -d</code> as well. <code>awk</code> wasn&#39;t supporting <code>strftime</code> I didn&#39;t look further. But I got the solution, Thanks to ghoti!"}], "answers": [{"comments": [{"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "edited": false, "score": 0, "creation_date": 1510337114, "post_id": 47226750, "comment_id": 81407790, "body": "This is very interesting, though some of the codes above scares me. I tried this, took a little time to install <code>Solaris 10</code>. I used the input <code>2017 11 10 23 33 00</code> in the script to calculate epoch and I got <code>1510356780</code>. But when I use <code>perl -le &#39;print scalar localtime $ARGV[0]&#39; 1510356780</code> to check if I get the right date, I get <code>Nov 11, 05:33:00 2017</code>!  EDIT: Your script adds 6 hours to the input time, isn&#39;t it? I can&#39;t seem to find that <code>6 hours</code> - where do I modify the time I want to add? :)"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "edited": false, "score": 0, "creation_date": 1510339284, "post_id": 47226750, "comment_id": 81408861, "body": "Epoch second <code>1510356780</code> is indeed <code>Fri Nov 10 23:33:00 UTC 2017</code>. When you print that perl snippet, your system is printing the time in the local time zone. I suspect you&#39;re running this in Asia somewhere -- <a href=\"https://en.wikipedia.org/wiki/UTC%2B06:00\" rel=\"nofollow noreferrer\">PRC or Bangladesh or Bhutan</a>. If you instead run <code>TZ=GMT perl -le &#39;print scalar localtime $ARGV[0]&#39; 1510356780</code> (assuming you&#39;re in POSIX or bash shell), you&#39;ll see the results you expect. Or try <code>perl -le &#39;use POSIX; print POSIX::strftime(&quot;%F %T %Z%z&quot;, localtime($ARGV[0]));&#39; 1510356780</code> to see the time with the timezone."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1510342504, "post_id": 47226750, "comment_id": 81410418, "body": "<i>Its date command is missing a bunch of stuff, like the ability to process Linux-style <code>-d</code> options or BSD-style <code>-v</code> options.</i>  I bet it doesn&#39;t process Microsoft-style options, either.  ;-)"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1510365235, "post_id": 47226750, "comment_id": 81417688, "body": "@AndrewHenle -- Microsoft operating systems have a <code>date</code> command?  News to me!  (Notwithstanding Xenix, of course, whose <code>date</code> command was probably pretty close to Solaris&#39;s...)"}, {"owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "edited": false, "score": 0, "creation_date": 1510366217, "post_id": 47226750, "comment_id": 81417853, "body": "@ghoti You are right. It&#39;s the timezone. I ran it with <code>TZ=GMT</code>, it works. I don&#39;t know how it&#39;s going to be in my server :) Either way, I can manage now. Thanks for your help, I was really in dark. I have to wonder though, how simple the <code>date -d</code> command was to get the desired output I want. And how tough it is to recreate something that is not supported in Solaris."}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1510503637, "post_id": 47226750, "comment_id": 81452302, "body": "@ghoti You missed the point entirely.  You seem to expect platform-specific non-standard extensions to <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/date.html\" rel=\"nofollow noreferrer\">the POSIX-standardized <code>date</code> utility</a> to be available on multiple platforms."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": true, "score": 1, "last_activity_date": 1510403989, "last_edit_date": 1510403989, "creation_date": 1510329654, "answer_id": 47226750, "question_id": 47219062, "link": "https://stackoverflow.com/questions/47219062/hours-and-minutes-addition/47226750#47226750", "title": "Hours and Minutes addition", "body": "<p>Solaris is a little behind the times in a number of ways.  Its <code>date</code> command is missing a bunch of stuff, like the ability to process Linux-style <code>-d</code> options or BSD-style <code>-v</code> options. Solaris' <code>strftime()</code> is missing a bunch of stuff (which affects the available date formats), perl is ancient, awk is ancient...</p>\n\n<p>I've been using the following hack for years on Solaris, to get the current epoch second:</p>\n\n<pre><code>truss /usr/bin/date 2&gt;&amp;1 | awk '/^time/{print $NF}'\n</code></pre>\n\n<p>Converting the other way is impossible using any POSIX tools as far as I know, but since you have perl available, the following might work:</p>\n\n<pre><code>perl -le 'print scalar localtime $ARGV[0]' 1510329000\n</code></pre>\n\n<p>Once you have this conversion in both directions, you can do math on it to adjust dates.  For example:</p>\n\n<pre><code>$ date\nFri Nov 10 10:24:31 EST 2017\n$ now=$( truss /usr/bin/date 2&gt;&amp;1 | awk '/^time/{print $NF}' )\n$ then=$( perl -le 'print scalar localtime $ARGV[0]' $((now+3600)) )\n$ echo \"$then\"\nFri Nov 10 11:24:46 2017\n</code></pre>\n\n<p>For conversion of arbitrary GMT date/times to epoch seconds, I inherited the following bash code years and years ago. YMMV.</p>\n\n<pre><code># Use whatever process you like to populate these variables.\n# Note that since epoch zero was at midnight GMT, this time is GMT as well.\nread year month day hour minute second &lt;&lt;&lt;\"2017 11 10 15 50 00\"\n\nif [[ $month -gt 2 ]]; then\n  (( month++ ))\nelse\n  (( month+=13 ))\n  (( year-=1 ))\nfi\n\nday=$(( (year*365)+(year/4)-(year/100)+(year/400)+(month*306001/10000)+day ))\ndays_since_epoch=$(( day-719591 ))   # this seems to be close to Jan 1 1970\nseconds_since_epoch=$(( (days_since_epoch*86400)+(hour*3600)+(minute*60)+second ))\n\necho \"epoch: $seconds_since_epoch\"\n</code></pre>\n\n<p>Most of this code is intended to account for leap years and seconds. I haven't delved too much into the origin of the magic numbers, but with results that appear to work, I don't question them.  :)</p>\n\n<p>To get just the hour and minute from perl, as you've shown in your question, you could probably use the following code:</p>\n\n<pre><code>perl -le 'my ($h,$m) = (localtime($ARGV[0]))[2,1]; printf(\"%02d%02d\\n\",$h,$m);' 1510329000\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -le 'use POSIX \"strftime\"; print strftime(\"%H%M\", localtime($ARGV[0]));' 1510329000\n</code></pre>\n\n<p>Aren't you happy to be using such a classic operating system as Solaris?</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://www.epochconverter.com/\" rel=\"nofollow noreferrer\">A bunch of date conversion tips for different languages</a></li>\n</ul>\n"}], "owner": {"reputation": 614, "user_id": 3980528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GfedK.png?s=128&g=1", "display_name": "mathB", "link": "https://stackoverflow.com/users/3980528/mathb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 47226750, "answer_count": 1, "score": 0, "last_activity_date": 1510403989, "creation_date": 1510304556, "last_edit_date": 1510322779, "question_id": 47219062, "link": "https://stackoverflow.com/questions/47219062/hours-and-minutes-addition", "title": "Hours and Minutes addition", "body": "<p>I work in a <code>solaris</code> server and the <code>date -d</code> option is not there. No <code>gdate</code> as well. I know fair amount of questions have been asked related to this, I have gone through almost all of them. But I don't know <code>perl</code> so I don't know how to modify those answers w.r.t my requirement.</p>\n\n<p>Here's what I have which works in Linux:</p>\n\n<pre><code>date -d \"$hr:$mi $duration minutes\" +'%H%M'\n</code></pre>\n\n<p>where <code>$hr</code> and <code>$mi</code> are hours and mins, <code>$duration</code> is in minutes.</p>\n\n<p>When I run like this in Linux, I get this:</p>\n\n<pre><code>date -d \"23:28 60 minutes\" +'%H%M'\n0028\n</code></pre>\n\n<p><del>How can I get a <code>perl</code> equivalent (possibly a one liner?) that will work in <code>Solaris</code>?</del></p>\n\n<p>EDIT: Adding <code>awk</code> tag to see if there's a solution there since my <code>perl</code> is ancient. Thanks for trying to help, folks.</p>\n\n<p>EDIT (2): I'm having the same problem as <a href=\"https://stackoverflow.com/questions/21208473/calculating-time-adding-minutes-bash\">here</a>, only I don't have the luxury of using <code>date -d</code>. I'm open to any solution in <code>python</code> or <code>perl</code>, need not be an one liner.</p>\n\n<p>PS: Checked <a href=\"https://stackoverflow.com/questions/17815327/equivalent-date-from-gnu-to-solaris\">This</a>, no <code>tclsh</code>. Checked <a href=\"https://stackoverflow.com/questions/23503892/yyyymmddhh-date-manipulation-in-shell-script-in-unix/\">This</a> as well, don't have a clue what's going there!</p>\n"}, {"tags": ["python", "perl", "substitution", "text-processing"], "owner": {"reputation": 403, "user_id": 2883770, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/lZkHX.jpg?s=128&g=1", "display_name": "Massimo2013", "link": "https://stackoverflow.com/users/2883770/massimo2013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510303984, "creation_date": 1510303984, "question_id": 47218886, "link": "https://stackoverflow.com/questions/47218886/text-processing-porting-perl-scripts-to-python", "title": "Text processing: porting Perl scripts to Python", "body": "<p>I have developed a number of scripts in Perl to process text files (basically, I need to make nonstandard conversions from html to LaTeX). I was wondering what is the best way to translate into Python 3 a script that does a very high number of substitution one after another on a file (all together or line by line). In Perl I have, for example:</p>\n\n<pre><code>$file =~ s/.../.../g;\n$file =~ s/.../.../g;\n$file =~ s/.../.../sg;\n$file =~ s{...}{...}sge;\netc.\nprint $file;\n</code></pre>\n\n<p>Am I correct in assuming that the (best) way to do the same in Python is the following? I don't think it is appropriate to compile the regex expression, as there are so many different involved.</p>\n\n<pre><code>import re\netc.\nfile = re.sub(r\"...\",r\"...\",file)\nfile = re.sub(r\"...\",r\"...\",file)\nfile = re.sub(r\"...\",r\"...\",file)\nfile = re.sub(r\"...\",r\"...\",file)\netc.\nprint(file)\n</code></pre>\n\n<p>I was also wondering what is the best way to alternate line based substitution and file based substitution in Python (in Perl I can just turn on/off the switch 's' as in the example). </p>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1510302187, "post_id": 47218193, "comment_id": 81386211, "body": "It&#39;s will get  &quot;/doc/ is a directory , it&#39;s cannot get the variable $date"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1510303169, "post_id": 47218193, "comment_id": 81386674, "body": "What are you trying to do?<code>What&#39;s must contain </code>$date` variable? where will this variable set? What&#39;s meaning of <code>&quot;utc$ &quot;</code>(sign dollar followed by space)?"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1510303342, "post_id": 47218193, "comment_id": 81386763, "body": "How are your files, path named? Please post samples of path and maybe contents!"}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1510303346, "post_id": 47218193, "comment_id": 81386764, "body": "because I will create a file every day so that the date is a variable"}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1510303643, "post_id": 47218193, "comment_id": 81386906, "body": "path is /doc/$date/before , the $date is a variable"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510303740, "post_id": 47218193, "comment_id": 81386952, "body": "@georgetovrea  Updated my answer (at first I didn&#39;t realize you wanted a new file)."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510304556, "post_id": 47218427, "comment_id": 81387447, "body": "Your one liner would be better off with the <code>-p</code> flag  I think. <code>perl -pe &#39;next if m&#47;utc$&#47;&#39; file</code> should do the trick."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510308006, "post_id": 47218427, "comment_id": 81389613, "body": "@Sobrique Huh? What&#39;s the purpose of the <code>next</code> here? I thought <code>-p</code> <i>always</i> prints the line and there&#39;s no way to prevent that. Am I wrong?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510308217, "post_id": 47218427, "comment_id": 81389754, "body": "<code>-p</code> just inserts a <code>continue</code> block that prints <code>$_</code>.  That can be bypassed by loop control statements like <code>next</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510308552, "post_id": 47218427, "comment_id": 81389934, "body": "@Sobrique Doesn&#39;t work for me. And the <a href=\"https://perldoc.perl.org/functions/continue.html\" rel=\"nofollow noreferrer\"><code>continue</code> docs</a> say <i>&quot;Thus it can be used to increment a loop variable, even when the loop has been continued via the next statement&quot;</i>. To me that sounds like the continue block is always executed."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510308627, "post_id": 47218427, "comment_id": 81389987, "body": "Hmm, OK. I stand corrected. I&#39;m getting muddled obviously. I&#39;ll go and review, because I&#39;m at least <i>fairly</i> sure there&#39;s a &#39;skip&#39; option with <code>-p</code>. I&#39;ll go and try and figure out what it is."}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510542478, "post_id": 47218427, "comment_id": 81463979, "body": "@zdim,I have try to using you one-liner,but it&#39;s still cannot remove the line that the end is utc"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510542597, "post_id": 47218427, "comment_id": 81463998, "body": "@georgetovrea  huh ... are you sure it&#39;s <code>utc</code> at the end?  Any spaces or &quot;funny&quot; (non-printable) characters before the end?  Is this UNIX -- can you try <code>\\z</code> instead of <code>$</code>?"}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510543002, "post_id": 47218427, "comment_id": 81464080, "body": "@zdim,I have follow as you said , $ perl -ne&#39;print if not /utc\\z/&#39; file &gt; new_file , but it&#39;s still cannot remove the line , by the way ,I have update my question"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510543838, "post_id": 47218427, "comment_id": 81464269, "body": "@georgetovrea OK, let&#39;s try with some possible extra spaces: <code>&#47;utc\\s*$&#47;</code>. (The shown file doesn&#39;t show whether there is anything <i>after</i> <code>utc</code>; in your <code>grep</code> you have a space after <code>$</code>, which I don&#39;t know what to think of.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510544571, "post_id": 47218427, "comment_id": 81464436, "body": "@georgetovrea  There could also be a loose <code>\\r</code> (carriage return) so also try <code>&#47;utc[\\r\\s]*$&#47;</code>"}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510545359, "post_id": 47218427, "comment_id": 81464611, "body": "@zdim,  perl -ne&#39;print if not /cst\\s*$/&#39; file &gt; new_file work success, but I try to use grep in my perl, It&#39;s fail,     system(&quot;grep -v \\&quot;utc\\s*$\\&quot; /file/$year/$datetime &gt; /file/$year/new&quot;);       please can you help me ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510548723, "post_id": 47218427, "comment_id": 81465336, "body": "@georgetovrea  This is exactly the point of my post -- it is much harder to do it that way, and any such solution is much less reliable. If there is something you don&#39;t like in this post there is also a link to a very simple approach. (I updated the code to the optional space, <code>&#47;utc\\s*$&#47;</code>.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510548756, "post_id": 47218427, "comment_id": 81465340, "body": "@georgetovrea  Having said that, I will add an attempt to fix your <code>grep</code> to the post shortly. I will let you know when I update."}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510548810, "post_id": 47218427, "comment_id": 81465351, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/158823/discussion-between-georgetovrea-and-zdim\">continue this discussion in chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510548874, "post_id": 47218427, "comment_id": 81465369, "body": "@georgetovrea I have to go now, will be back in an hour and will update the post (and will let you know).  Then we can chat as well if you wish..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510557035, "post_id": 47218427, "comment_id": 81468167, "body": "@georgetovrea  I added a direct answer to the end of my post."}, {"owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510558838, "post_id": 47218427, "comment_id": 81469003, "body": "@zdim,It&#39;s still cannot get I want, It&#39;s cannot work for me system(&quot;grep -Ev &#39;utc\\\\s*\\$&#39;  $file &gt; $new&quot;);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510559091, "post_id": 47218427, "comment_id": 81469129, "body": "@georgetovrea  That&#39;s another problem with running external commands out of Perl; there is no way for me to say why it works or not on your system.  I tested what I posted, with a file like yours and it works. (That runs out of a Perl script, right?)  But our systems and <code>grep</code>s may differ in many ways.  Why don&#39;t you just use Perl?  See that other post if anything here gives you trouble."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "edited": false, "score": 0, "creation_date": 1510560504, "post_id": 47218427, "comment_id": 81469877, "body": "@georgetovrea  That last thing in my answer, <code>system(...)</code>, is supposed to be a line in a Perl script.  The <code>$old_file</code> and <code>$new_file</code> should be file names from your code."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1510560564, "last_edit_date": 1510560564, "creation_date": 1510302234, "answer_id": 47218427, "question_id": 47218193, "link": "https://stackoverflow.com/questions/47218193/how-to-using-grep-for-remove-the-specific-end-word-of-line-in-perl/47218427#47218427", "title": "how to using Grep for remove the specific end word of line in perl?", "body": "<p>There is <em>no</em> need to go to external tools for such a common task. It involves starting a shell and yet another program, and (doubly) escaping things just right; it is error prone and far less efficient, and inferior in terms of error checking. Why not use Perl in a Perl program?</p>\n\n<p>Read a file and write its lines over to a new file, skipping the ones you don't want. See <a href=\"https://stackoverflow.com/a/40269154/4653379\">this post</a> for details, for example. </p>\n\n<p>Here is a quick way using <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Path::Tiny;\n\nmy $file     = '...';\nmy $new_file = '...';\n\nmy @new_lines = grep { not /utc\\s*$/ } path($file)-&gt;lines; \n\npath($new_file)-&gt;spew(@new_lines);\n</code></pre>\n\n<p>The module's <code>path($file)</code> opens the file and <code>lines</code> returns the list of lines; they are filtered by <code>grep</code> and those that don't end in <code>utc</code> (with possible trailing space) are assigned to <code>@new_lines</code>.</p>\n\n<p>Then the <code>spew</code> method writes those lines to <code>$new_file</code>.</p>\n\n<p>For a couple of (other) ways to \"edit\" a file using this module see <a href=\"https://stackoverflow.com/a/46723567/4653379\">this post</a>.</p>\n\n<hr>\n\n<p>In a one-liner</p>\n\n<pre><code>perl -ne'print if not /utc\\s*$/' file  &gt; new_file\n</code></pre>\n\n<hr>\n\n<p>A direct answer may best illustrate (some of) the disadvantages of using external commands. </p>\n\n<p>We need to pass to <code>grep</code>, via shell, particular sequences which would be interpreted by either or both Perl and shell; so they need be escaped correctly</p>\n\n<pre><code>system(\"grep -v 'utc\\\\s*\\$' $old_file &gt; $new_file\");\n</code></pre>\n\n<p>This works on my system.</p>\n"}, {"tags": [], "owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "is_accepted": false, "score": 0, "last_activity_date": 1510305375, "last_edit_date": 1510305375, "creation_date": 1510304730, "answer_id": 47219107, "question_id": 47218193, "link": "https://stackoverflow.com/questions/47218193/how-to-using-grep-for-remove-the-specific-end-word-of-line-in-perl/47219107#47219107", "title": "how to using Grep for remove the specific end word of line in perl?", "body": "<h3>First: simple perl</h3>\n\n<p>From <a href=\"/questions/tagged/shell\" class=\"post-tag\" title=\"show questions tagged &#39;shell&#39;\" rel=\"tag\">shell</a></p>\n\n<pre><code>perl -e 'opendir DH,\"/doc\";foreach my $date (readdir DH) {\n   if (-f \"/doc/\".$date.\"/before\") { open RH,\"&lt;/doc/\".$date.\"/before\";\n     open WH,\"&gt;/doc/\".$date.\"/after\";while(&lt;RH&gt;){print WH $_ unless /utc$/;};};\n   close RH;close WH;};closedir DH;'\n</code></pre>\n\n<p>or as a script:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nmy $docPath=\"/doc\";\nopendir DH,$docPath;\nforeach my $date (readdir DH) {\n    if (-f $docPath.\"/\".$date.\"/before\") {\n        open RH,\"&lt;\".$docPath.\"/\".$date.\"/before\";\n        open WH,\"&gt;\".$docPath.\"/\".$date.\"/after\";\n        while(&lt;RH&gt;){\n            print WH $_ unless /utc$/;\n        };\n    };\n    close RH;\n    close WH;\n};\nclosedir DH;\n</code></pre>\n\n<h3>Or using <code>Path::Tiny</code></h3>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse Path::Tiny;\n\nmy $docPath=path(\"/doc\");\n\nforeach my $date ($docPath-&gt;children) {\n    $date-&gt;child(\"after\")-&gt;spew(\n    grep {!/utc$/} $date-&gt;child(\"before\")-&gt;lines );\n}\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47218427, "answer_count": 2, "score": -1, "last_activity_date": 1510560564, "creation_date": 1510301095, "last_edit_date": 1510545089, "question_id": 47218193, "link": "https://stackoverflow.com/questions/47218193/how-to-using-grep-for-remove-the-specific-end-word-of-line-in-perl", "title": "how to using Grep for remove the specific end word of line in perl?", "body": "<p>I will create a file every day , I want to remove the line that end character is utc and output to other file in perl,\nI try to use grep an regexp,\nbut get the error msg as below,</p>\n\n<pre><code>sh: -c: line 0: unexpected EOF while looking for matching `\"'\nsh: -c: line 1: syntax error: unexpected end of file\n</code></pre>\n\n<p>the grep code :</p>\n\n<pre><code>system(\"grep -v \\\"utc$ \\\" /doc/$date/before &gt; /doc/$date/after\");\n</code></pre>\n\n<p>the file loos like </p>\n\n<pre><code>config setting\n^MMon Nov 13 10:45:52.401 utc   --&gt;the line is I wnat to remove\nstart configuration...\nclock timezone utc 8\n</code></pre>\n\n<p>Any suggestions? I am more then happy to try anything at this point.</p>\n"}, {"tags": ["apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1510257633, "post_id": 47210480, "comment_id": 81370336, "body": "This looks like something better suited to <a href=\"https://serverfault.com\">Server Fault</a>"}, {"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1510257686, "post_id": 47210480, "comment_id": 81370368, "body": "@pvg not sure of that ;-)"}, {"owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1510257921, "post_id": 47210480, "comment_id": 81370499, "body": "@Alex Reynolds i dont think that you do have a directory on your server with this path &quot;/cgi-bin/index.pl&quot;. Is your problem maybe about understanding absolute vs relative paths?"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "reply_to_user": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1510257978, "post_id": 47210480, "comment_id": 81370531, "body": "@Harry that&#39;s why there&#39;s a <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>, to enlighten then unsure."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "reply_to_user": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "edited": false, "score": 0, "creation_date": 1510258022, "post_id": 47210480, "comment_id": 81370554, "body": "@Harry No, I don&#39;t believe that is the issue. This is why I set the <code>Directory</code> and <code>DocumentRoot</code> parameters. See the following for discussion: <a href=\"http://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryindex\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryindex</a>"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 2, "creation_date": 1510258166, "post_id": 47210480, "comment_id": 81370631, "body": "I have asked Apache configuration questions on SO many times. <a href=\"https://stackoverflow.com/questions/42600632/access-control-expose-headers-setting-ignored\" title=\"access control expose headers setting ignored\">stackoverflow.com/questions/42600632/&hellip;</a> <a href=\"https://stackoverflow.com/questions/41816301/redirecting-both-http-and-https-requests-to-new-host\" title=\"redirecting both http and https requests to new host\">stackoverflow.com/questions/41816301/&hellip;</a> <a href=\"https://stackoverflow.com/questions/21356811/how-to-send-compressed-deflated-svg-via-apache2\" title=\"how to send compressed deflated svg via apache2\">stackoverflow.com/questions/21356811/&hellip;</a> etc. I respectfully ask that you please take off-topic concerns to chat."}], "answers": [{"comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1510263377, "post_id": 47211199, "comment_id": 81373313, "body": "Permissions for parent and children directories are read and executable for others, and read/write/executable for the apache user."}], "tags": [], "owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "is_accepted": false, "score": 0, "last_activity_date": 1510260198, "creation_date": 1510260198, "answer_id": 47211199, "question_id": 47210480, "link": "https://stackoverflow.com/questions/47210480/why-apache-configuration-works-when-i-use-root-directory/47211199#47211199", "title": "Why Apache configuration works when I use root directory", "body": "<p>Try changing permissions for /var/www, /var/www/project, /var/www/project/src and/or /var/www/project/src/cgi-bin</p>\n\n<p>Update: Also, don't forget to restart Apache server after making changes.</p>\n"}, {"comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1510263245, "post_id": 47211344, "comment_id": 81373249, "body": "I don&#39;t think Apache&#39;s documentation on DirectoryIndex agrees with you, as it indicates that index files are searched from the root directory. Your advice did not have any effect, in any case."}], "tags": [], "owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "is_accepted": false, "score": 0, "last_activity_date": 1510260831, "creation_date": 1510260831, "answer_id": 47211344, "question_id": 47210480, "link": "https://stackoverflow.com/questions/47210480/why-apache-configuration-works-when-i-use-root-directory/47211344#47211344", "title": "Why Apache configuration works when I use root directory", "body": "<p>What's happening is <strike>your excessive zeal</strike> an excess in your zeal... in the first example, <code>DirectoryIndex /cgi-bin/index.pl</code> points towards your ROOT directory, then searching for a folder caller <code>cgi-bin</code>. This also happens in the second example, but since you give the full path, Apache finds it. Try removing the <code>/</code> before <code>cgi-bin</code> and the issue should fix itself.</p>\n"}], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510260831, "creation_date": 1510257418, "question_id": 47210480, "link": "https://stackoverflow.com/questions/47210480/why-apache-configuration-works-when-i-use-root-directory", "title": "Why Apache configuration works when I use root directory", "body": "<p>I have a <code>VirtualHost</code> that I am using to serve requests to files in <code>/var/www/project/src</code>.</p>\n\n<p>I also have a Perl script (CGI binary) that is in <code>/var/www/project/src/cgi-bin/index.pl</code>.</p>\n\n<p>Here's the part of the directive relevant to my question: </p>\n\n<pre><code>&lt;VirtualHost example.com:443&gt;\n    ...\n    DocumentRoot \"/var/www/project/src\"\n    &lt;Directory \"/var/www/project/src\"&gt;\n        Require all granted\n        Options +MultiViews +ExecCGI\n        AddHandler cgi-script .pl\n        DirectoryIndex /cgi-bin/index.pl\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>The server starts, but access to the host fails as I get a 403 error.</p>\n\n<p>The Apache logs indicate that the web server cannot find <code>{document-root}/cgi-bin/index.pl</code>:</p>\n\n<pre><code>[Thu Nov 09 11:37:03.578316 2017] [autoindex:error] \n  [pid 122783] [client example-client.com:57203] AH01276: \n  Cannot serve directory /var/www/project/src/: No matching\n  DirectoryIndex (/cgi-bin/index.pl) found, and server-\n  generated directory index forbidden by Options directive\n</code></pre>\n\n<p>This directory and <code>index.pl</code> file are in the right location, are owned by the <code>apache</code> user, and have permissions which allow others to read the contents of directories and execute the <code>index.pl</code> CGI-bin.</p>\n\n<p>Moreover, if I change paths in <code>DocumentRoot</code> and <code>Directory</code> variables, the following configuration works:</p>\n\n<pre><code>&lt;VirtualHost example.com:443&gt;\n    ...\n    DocumentRoot \"/\"\n    &lt;Directory \"/\"&gt;\n        Require all granted\n        Options +MultiViews +ExecCGI\n        AddHandler cgi-script .pl\n        DirectoryIndex /var/www/project/src/cgi-bin/index.pl\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Apache starts up, and my access to the host in turn loads <code>/cgi-bin/index.pl</code>, which is rendered correctly.</p>\n\n<p>Question: What would cause the first set of directives to fail, where the second set works? </p>\n\n<p>More specifically: What is preventing the first set of directives from finding <code>/cgi-bin/index.pl</code> in the specified document root, while the second set correctly finds the fully-qualified path <code>/var/www/project/src/cgi-bin/index.pl</code>?</p>\n\n<p>Note: The items in <code>...</code> do not seem relevant to the issue \u2014\u00a0whether I remove them, alter them, or leave them, the error and log messages are the same in any case \u2014 so I am leaving them out for brevity.</p>\n"}, {"tags": ["perl", "perl-hash"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510274610, "post_id": 47209642, "comment_id": 81377470, "body": "I think this really needs an example, or at least a reference to <a href=\"https://perldoc.perl.org/Tie/Hash.html\" rel=\"nofollow noreferrer\"><code>Tie::Hash</code></a>, from which a basic hash interface can be built."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1510254178, "creation_date": 1510254178, "answer_id": 47209642, "question_id": 47209577, "link": "https://stackoverflow.com/questions/47209577/callback-for-hash-property-access-in-perl/47209642#47209642", "title": "Callback for hash property access in perl", "body": "<p>Yes, there is. It's called \"tying\" a variable.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/tie.html\" rel=\"noreferrer\"><code>tie</code></a> is a combination of instantiating a proxy object (from a specified class) and binding it to a variable.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/perltie\" rel=\"noreferrer\"><code>perldoc perltie</code></a> for details.</p>\n\n<p>The short version is:</p>\n\n<pre><code>tie %hash, 'Some::Class';\n</code></pre>\n\n<p>And then accessing <code>%hash</code> will trigger method calls in <code>Some::Class</code> (provided it implements a <code>TIEHASH</code> constructor and the rest of the interface).</p>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1510281075, "last_edit_date": 1510281075, "creation_date": 1510280307, "answer_id": 47214681, "question_id": 47209577, "link": "https://stackoverflow.com/questions/47209577/callback-for-hash-property-access-in-perl/47214681#47214681", "title": "Callback for hash property access in perl", "body": "<p>Perl allows you to <a href=\"http://perldoc.perl.org/functions/tie.html\" rel=\"nofollow noreferrer\"><code>tie</code></a> a variable to a class.  This provides a mechanism to inject your custom code (the code of your tied class) into various operations that can be enacted on the tied variable.  For a hash, those operations are <code>TIEHASH</code>, <code>STORE</code>, <code>FIRSTKEY</code>, <code>FETCH</code>, <code>NEXTKEY</code>, <code>EXISTS</code>, <code>DELETE</code>, <code>CLEAR</code>, and <code>SCALAR</code>.</p>\n\n<p>A complete implementation of a tied hash, therefore, would implement each of those methods.  To make this easier, the core Perl distribution provides the module <a href=\"https://perldoc.perl.org/Tie/Hash.html\" rel=\"nofollow noreferrer\"><code>Tie::Hash</code></a>, which also provides <code>Tie::StdHash</code>.</p>\n\n<p><code>Tie::StdHash</code> is probably the shortest path to adding some functionality to an otherwise rather typical hash implementation, as it provides standard implementations of each of the hash methods mentioned above.  To add your own functionality you can just override those methods for which it makes sense to do so. Then either call out to <code>SUPER::*</code> (where * represents the name of the overridden operation) or provide the desired hash functionality in its entirety in the overridden method.  An example is probably simpler than words:</p>\n\n<pre><code>package NoisyHash;\n\nuse strict;\nuse warnings;\n\nrequire Tie::Hash;\nour @ISA = q(Tie::StdHash);\n\nsub STORE {\n    my ($self, $key, $value) = @_;\n    warn \"\\tSet $key to $value\\n\";\n    return $self-&gt;SUPER::STORE($key, $value);\n}\n\nsub FETCH {\n    my ($self, $key) = @_;\n    warn \"\\tFetch from $key\\n\";\n    return $self-&gt;SUPER::FETCH($key);\n}\n\n1;\n\n\npackage main;\n\nuse strict;\nuse warnings;\n\ntie my %hash, 'NoisyHash';\n\n$hash{A} = 1;\n$hash{B} = 'foo';\n\nprint \"\\$hash{A} = $hash{A}\\n\";\nprint \"\\$hash{B} = $hash{B}\\n\";\n</code></pre>\n\n<p>In this example, the <code>FETCH</code> and <code>STORE</code> methods are overridden with code that causes them to spit out some diagnostics to <code>STDERR</code>.  And then we retain regular hash semantics for those methods by finally calling out to <code>SUPER::*</code>.  We could trivially have just implemented our own versions of that functionality rather than calling SUPER, but leveraging an existing implementation is less error prone.</p>\n\n<p>The output from the preceding example is:</p>\n\n<pre><code>    Set A to 1\n    Set B to foo\n    Fetch from A\n$hash{A} = 1\n    Fetch from B\n$hash{B} = foo\n</code></pre>\n\n<p>As shown in the example, the <code>tie</code> function is used to bind <code>NoisyHash</code> to <code>%hash</code>.  It turns out that <code>tie</code> also returns an object, which isn't often used, but could be used to provide additional methods that may be invoked against the hash that aren't part of the default set of hash operations listed above.</p>\n\n<pre><code>package SumHash;\n\nuse strict;\nuse warnings;\n\nrequire Tie::Hash;\nour @ISA = q(Tie::StdHash);\nuse List::Util;\n\nsub sum {\n    my $self = shift;\n    return List::Util::sum(values %$self);\n}\n\n1;\n\npackage main;\n\nuse strict;\nuse warnings;\n\nmy $hash_obj = tie my %hash, 'SumHash';\n\n@hash{qw(a b c d e)} = (1, 2, 3, 4, 5);\n\nmy $sum = $hash_obj-&gt;sum;\nprint \"Sum of (\",\n      join(', ', values %hash),\n      \") is $sum.\\n\",\n</code></pre>\n\n<p>Example output from this code is:</p>\n\n<pre><code>Sum of (3, 4, 1, 5, 2) is 15.\n</code></pre>\n\n<p>So here we're calling a <code>sum</code> method that we've placed in the <code>SumHash</code> class. The class still inherits from <code>Tie::StdHash</code>, and doesn't override any standard methods, so it still retains standard hash functionality.  But it does add the ability to tally the hash's values.  However, this is not the easiest way to tally a hash's values.  Rather than going through all the trouble of tying a hash just to add summation to it, one could just do this:</p>\n\n<pre><code>use List::Util qw(sum);\nprint \"Sum of (\", join(', ', values %hash), \") is \", sum(values %hash), \"\\n\";\n</code></pre>\n\n<p>This exemplifies why there is a general sense in the Perl community that tying variables is rarely the best approach to solving typical problems.  Tying variables creates hard to follow and reason about action at a distance.  And tied variables have considerably worse performance.  But the practice does have occasionally justifiable uses, and Perl provides a means.</p>\n\n<p>See <code>perldoc Tie::Hash</code> for an explanation of that module. And be aware that <code>tie</code> may be used to tie any of Perl's common containers: a scalar, an array, a hash, or a filehandle.</p>\n\n<p>The most exhaustive explanation within Perl's documentation for using <code>tie</code> is available at <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"nofollow noreferrer\"><code>perldoc perltie</code></a></p>\n"}], "owner": {"reputation": 4632, "user_id": 5267669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hhtof.jpg?s=128&g=1", "display_name": "eltonkamami", "link": "https://stackoverflow.com/users/5267669/eltonkamami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "accepted_answer_id": 47209642, "answer_count": 2, "score": 0, "last_activity_date": 1510281075, "creation_date": 1510253883, "question_id": 47209577, "link": "https://stackoverflow.com/questions/47209577/callback-for-hash-property-access-in-perl", "title": "Callback for hash property access in perl", "body": "<p>Is there any native way in Perl to know what key of a hash was accessed?<br>\nSomething like magic methods that exist in some languages or like a proxy object?</p>\n"}, {"tags": ["perl", "powershell", "windows-10", "new-item"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510251187, "post_id": 47208399, "comment_id": 81366697, "body": "This is very unclear, and the &quot;Perl code&quot; that you show is certainly not Perl. Please expand on what you&#39;re actually doing. Where do <code>$ps</code> and <code>$out</code> come from (i.e. what is the code that populates them)?"}, {"owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510251305, "post_id": 47208399, "comment_id": 81366775, "body": "$ps New-Item $dir -Name $file -ItemType &quot;file&quot; -Force -Value @&quot;\\n$out\\n&quot;@;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 1, "creation_date": 1510251633, "post_id": 47208399, "comment_id": 81366939, "body": "@Neossian: If you know what this means then please explain."}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "reply_to_user": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510251671, "post_id": 47208399, "comment_id": 81366972, "body": "@Neossian @&quot;\\n$out\\n&quot;@ did not work either.  Just to clarify, $out includes multiple lines"}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510251722, "post_id": 47208399, "comment_id": 81367004, "body": "@Borodin, $ps is      C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe and $out is/are the lines that I mentioned in the beginning of my qeustion"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510251796, "post_id": 47208399, "comment_id": 81367049, "body": "@bislinks: You need to go into much more detail. What you think is Perl most certainly isn&#39;t, and I want to know where that line comes from: do you type it in, or is it the contents of a file, or part of a file? Which file? What do you do at the console to get this result?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510251836, "post_id": 47208399, "comment_id": 81367074, "body": "<i>&quot;<code>$out</code> is/are the lines that I mentioned in the beginning of my qeustion&quot;</i> Okay, so what put those lines into <code>$out</code>?"}, {"owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510251936, "post_id": 47208399, "comment_id": 81367131, "body": "Bislinks, try putting a line feed before and after the text in $out and then use $ps New-Item $dir -Name $file -ItemType &quot;file&quot; -Force -Value @&quot;$out&quot;@"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510252000, "post_id": 47208399, "comment_id": 81367166, "body": "@Neossian: None of this helps unless you specify what problem you&#39;re solving."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510252163, "post_id": 47208399, "comment_id": 81367269, "body": "@bislinks: For instance, your &quot;Perl code&quot; doesn&#39;t do the substitutions that you describe."}, {"owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 3, "creation_date": 1510252166, "post_id": 47208399, "comment_id": 81367272, "body": "Hi Borodin, bislinks is attempting to call Powershell from a perl script/interface. The command is being converted to straight OS execution. $Ps is the equivalent of powershell.exe so the question is really, how can we feed multiline string data into powershell.exe commandline call. It seems to be taking the the multiline data but executing every line in the in the multiline string. So surrounding it in block quotes should pass the string value. I used \\n because I found that was the escape character for new line in perl."}, {"owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510252270, "post_id": 47208399, "comment_id": 81367344, "body": "He could generate the full script he wants to run, convert it to B64 and pass it into powershell.exe using -EncodedCommand"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510252420, "post_id": 47208399, "comment_id": 81367406, "body": "@Neossian: So you&#39;re saying that the line of &quot;Perl code&quot; is actually enclosed in <code>qx&#47;...&#47;</code>, or perhaps <code>system(&quot;...&quot;)</code>? I think we need to see the whole program to be certain, and it seems strange to omit those parts of a Perl statement."}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "edited": false, "score": 1, "creation_date": 1510252637, "post_id": 47208399, "comment_id": 81367504, "body": "Yes.  I had back ticks around the Perl code but I was unable to post question with the back ticks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510252940, "post_id": 47208399, "comment_id": 81367676, "body": "@bislinks: Okay I&#39;ve fixed your question. Is it correct now? Stack Overflow uses <a href=\"https://daringfireball.net/projects/markdown/syntax\" rel=\"nofollow noreferrer\"><b>Markdown</b></a> and you should learn to use it before posting here. But there <b><i>must</i></b> be more to the Perl code than you show, as <code>$ps</code>, <code>$dir</code>, <code>$file</code> and <code>$out</code> need to be assigned. Please show the entire Perl file."}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "edited": false, "score": 0, "creation_date": 1510253244, "post_id": 47208399, "comment_id": 81367824, "body": "You removed the word overwritten.  I actually meant that it does overwrite the existing file which is what I want!  That&#39;s the only problem with your correction.  The rest is fine."}, {"owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "edited": false, "score": 0, "creation_date": 1510253461, "post_id": 47208399, "comment_id": 81367932, "body": "Does this work?     <code>$out = &quot;@\\&quot;\\n$out\\n\\&quot;@&quot;</code>     <code>$ps New-Item $dir -Name $file -ItemType &quot;file&quot; -Force -Value $out</code> Sorry I don&#39;t have perl to test myself."}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1510253536, "post_id": 47208399, "comment_id": 81367992, "body": "Not sure if it can help in your situation, but maybe check <a href=\"http://search.cpan.org/~ltheisen/PowerShell-1.00/lib/PowerShell.pm\" rel=\"nofollow noreferrer\">PowerShell</a> on cpan."}, {"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "edited": false, "score": 0, "creation_date": 1510253823, "post_id": 47208399, "comment_id": 81368146, "body": "That did not  help either.  Days ago, I tried to install PowerShell on this windoes 10 machine, it failed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510256487, "post_id": 47208399, "comment_id": 81369655, "body": "@bslinks: I removed &quot;overwritten&quot; because you use it at the top of your question, and because  &quot;saving&quot; a file summarises what you&#39;re doing: it&#39;s irrelevant whether the file already exists."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510256735, "post_id": 47208399, "comment_id": 81369794, "body": "There&#39;s no way we can help you if you won&#39;t give us the information we ask for. It makes a <i>big</i> difference that there are really backticks around what you said was Perl code, and now that we&#39;ve got past that I&#39;ve asked twice how the other variables are populated and also to see the entire Perl code, and you haven&#39;t answered either. I&#39;m not surprised it has taken you days to get this working. No one can help you if you don&#39;t answer requests for information."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510256738, "post_id": 47208399, "comment_id": 81369798, "body": "I have a very big problem believing that you&#39;re a web host designer and public speaker."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510252100, "post_id": 47209065, "comment_id": 81367239, "body": "<i>&quot;Why are you using perl?&quot;</i> Perhaps because the Perl program needs to do a whole lot more than run a PowerShell command?"}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510252190, "post_id": 47209065, "comment_id": 81367287, "body": "@Borodin Those things can be done within PowerShell, or within perl.  It doesn&#39;t make a lot of sense to use two languages to do a task that can be completed with one.  You create a confusing cascade of scripts and dependencies."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510252255, "post_id": 47209065, "comment_id": 81367336, "body": "What things? We haven&#39;t seen a whole Perl program and have no way of knowing what&#39;s in it. What the OP has shown isn&#39;t valid Perl. Although I agree that creating a new file from a template is well within Perl&#39;s capabilities."}], "tags": [], "owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "is_accepted": false, "score": -1, "last_activity_date": 1510252140, "last_edit_date": 1510252140, "creation_date": 1510252000, "answer_id": 47209065, "question_id": 47208399, "link": "https://stackoverflow.com/questions/47208399/having-trouble-using-new-item-on-windows-10-via-perl/47209065#47209065", "title": "Having trouble using `New-Item` on Windows 10 via Perl", "body": "<p>Why are you using <code>perl</code> instead of straight <code>PowerShell</code>?</p>\n\n<p><em>ex.txt</em></p>\n\n<pre><code>Home        http://domain.tld\nIP|http://domain.tld/path/1\nNavbar, Top|http://domain.tld/\nTips/Tricks|#some text\nAccordion 2|*more text\nText|=More Text\n</code></pre>\n\n<p><em>ex.ps1</em></p>\n\n<pre><code>(Get-Content -Path '.\\ex.txt') -replace 'regex','desired value' |\n    Set-Content -Path '.\\ex.txt'\n</code></pre>\n\n<p>This will parse each line in your document and attempt to match/replace your regex with the desired.  If you don't want to pollute your original file you can do the following:</p>\n\n<pre><code>$Value = (Get-Content -Path '.\\ex.txt') -replace 'regex','desired value'\nNew-Item -Path '.\\pollute.txt' -Value $Value -ItemType 'File' -Force\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "edited": false, "score": 0, "creation_date": 1510339932, "post_id": 47225679, "comment_id": 81409188, "body": "But yesterday, I reverted to Perl ( which is soooooooo easy for me) and gave up on using Power Shell for this particular task.    Nevertheless, will give it a try!  Appreciate your hard work and input"}], "tags": [], "owner": {"reputation": 624, "user_id": 1111059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebb6c30053916aaf51923952933c106?s=128&d=identicon&r=PG", "display_name": "Neossian", "link": "https://stackoverflow.com/users/1111059/neossian"}, "is_accepted": false, "score": 0, "last_activity_date": 1510329005, "last_edit_date": 1510329005, "creation_date": 1510326206, "answer_id": 47225679, "question_id": 47208399, "link": "https://stackoverflow.com/questions/47208399/having-trouble-using-new-item-on-windows-10-via-perl/47225679#47225679", "title": "Having trouble using `New-Item` on Windows 10 via Perl", "body": "<p>Please note that the maximum length of a command line string is around 8k characters, so this is a terrible general purpose solution. A better solution would be to write the entire command to a file and then invoke it as a script - I will assume this is not possible for some reason - otherwise you would probably just use perl to write the file - or use powershell to do the work.</p>\n\n<p>I tested this in strawberry perl 5.26.1.1</p>\n\n<pre><code>use MIME::Base64 ();\nuse Encode qw/encode decode/;\nuse warnings;\n\n$ps = \"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\";\n$file = \"c:\\\\strawberry\\\\test.txt\";\n$out = \"Home        http://domain.tld\nIP|http://domain.tld/path/1\nNavbar, Top|http://domain.tld/\nTips/Tricks|#some text\nAccordion 2|*more text\nText|=More Text\";\n\n$Command = \"New-Item -path \\\"$file\\\" -ItemType file -Value @'\\n$out\\n'@\";\n$bytes = encode(\"UTF-16LE\",$Command);\n$encoded = MIME::Base64::encode($bytes);\n$encoded =~ s/\\R//g;\nprint \"$ps -EncodedCommand $encoded\";\n$output = `$ps -EncodedCommand $encoded`;\nprint $output;\n</code></pre>\n\n<p>Good Luck!</p>\n"}], "owner": {"reputation": 74, "user_id": 4109113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88acb982d7434e525fb84036d8dd74fa?s=128&d=identicon&r=PG&f=1", "display_name": "bislinks", "link": "https://stackoverflow.com/users/4109113/bislinks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1510329005, "creation_date": 1510249576, "last_edit_date": 1510252806, "question_id": 47208399, "link": "https://stackoverflow.com/questions/47208399/having-trouble-using-new-item-on-windows-10-via-perl", "title": "Having trouble using `New-Item` on Windows 10 via Perl", "body": "\n\n<p>This is a sample of text including symbols that I am trying to overwrite a file with: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Home        http://domain.tld\nIP|http://domain.tld/path/1\nNavbar, Top|http://domain.tld/\nTips/Tricks|#some text\nAccordion 2|*more text\nText|=More Text\n</code></pre>\n\n<p>substituting all meta-characters, e.g., </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>s!\\t!symTA!g\ns!\\#!symHA!g\n</code></pre>\n\n<p>This is my Perl code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>`$ps New-Item $dir -Name $file -ItemType \"file\" -Force -Value \"$out\"`\n</code></pre>\n\n<p>It works if <code>$out</code> is just one line without any spaces, though!</p>\n\n<p>But it is about 100 lines! </p>\n\n<p>It is giving a variety of errors similar to the following:</p>\n\n<blockquote>\n  <p>The term BlogsymPIhttpsymCOLsymFSsymFSbislinks.comsymFSblog is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. At line:2 char:1 + BlogsymPIhttpsymCOLsymFSsymFSbislinks.comsymFSblog</p>\n</blockquote>\n\n<p>The file is saved but with just the first line (with substitutions).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510293189, "post_id": 47205299, "comment_id": 81382306, "body": "That <code>content-type</code> looks wrong. What are you trying to do there?"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1510297734, "post_id": 47205623, "comment_id": 81384163, "body": "This doesn&#39;t work. I get appropriate spacing in the mail but no table borders @Andrey"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1510303768, "post_id": 47205623, "comment_id": 81386967, "body": "@emma: Do you know much HTML? A <code>&lt;table&gt;</code> will give you a tabular layout with invisible borders. To make the borders visible you need <code>&lt;table border=&quot;1&quot;&gt;</code>."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 1, "last_activity_date": 1510241275, "creation_date": 1510241275, "answer_id": 47205623, "question_id": 47205299, "link": "https://stackoverflow.com/questions/47205299/sending-a-mail-with-a-dynamic-table-from-perl-script/47205623#47205623", "title": "Sending a mail with a dynamic table from perl script", "body": "<p>If you want it to be a table in the email, you should create a table in the email body something like this:</p>\n\n<pre><code>$mailbody . = '&lt;table&gt;';\nforeach my $result ( @results ) {\n    if ( $result-&gt;{Error} ) {\n        print\"No response received \\n\";}  \n    else {\n        my $H =  \"$result-&gt;{H}\";\n        my $I = \"$result-&gt;{I}\";\n        $mailbody.=qq(&lt;tr&gt;&lt;td&gt;$H&lt;/td&gt;&lt;td&gt;$I&lt;/td&gt;&lt;/tr&gt;);\n\n     } \n}\n$mailbody . = '&lt;/table&gt;';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1510303782, "last_edit_date": 1510303782, "creation_date": 1510303452, "answer_id": 47218739, "question_id": 47205299, "link": "https://stackoverflow.com/questions/47205299/sending-a-mail-with-a-dynamic-table-from-perl-script/47218739#47218739", "title": "Sending a mail with a dynamic table from perl script", "body": "<p>If you want an HTML table in your email, then add HTML table elements to your output.</p>\n\n<pre><code># Note: border=1 attribute to make the table borders visible.\n$mailbody .= '&lt;table border=\"1\"&gt;';\n\nforeach my $result ( @results ) {\n    if ( $result-&gt;{Error} ) {\n        print\"No response received \\n\";}  \n    else {\n        $mailbody .= qq(&lt;tr&gt;&lt;td&gt;$result-&gt;{H}&lt;/td&gt;)\n                   . qq(&lt;td&gt;$result-&gt;{I}&lt;/td&gt;&lt;/tr&gt;);\n\n    } \n}\n\n$mailbody .= &lt;/table&gt;\n</code></pre>\n\n<p>In a comment to another answer that suggested something similar, you said that this doesn't work because you can't see the table borders. That was, of course, a simple case of adding <code>border=1</code> so that the borders are displayed.</p>\n\n<p>However.</p>\n\n<p>It's always worth repeating that putting raw HTML strings into your program code is a terrible idea. It's a recipe for an unmaintainable mess. It's a bad idea when creating web applications and it's a bad idea when creating HTML to go into email bodies.</p>\n\n<p>Far better to separate the code from creating the output and the best way to do that is to use a templating engine like the <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow noreferrer\">Template Toolkit</a>. By creating a template file that contains all of the HTML output, you make it easier to change the way that the HTML looks without getting bogged down in the Perl code.</p>\n\n<p>Also (and I've suggested this to you before) I would suggest that you avoid using MIME::Lite. But don't take my word for it. The <a href=\"https://metacpan.org/pod/MIME::Lite#WAIT!\" rel=\"nofollow noreferrer\">current documentation for the module</a> says this:</p>\n\n<blockquote>\n  <p>MIME::Lite is not recommended by its current maintainer. There are a number of alternatives, like Email::MIME or MIME::Entity and Email::Sender, which you should probably use instead. MIME::Lite continues to accrue weird bug reports, and it is not receiving a large amount of refactoring due to the availability of better alternatives. Please consider using something else.</p>\n</blockquote>\n\n<p>I recommend switching to <a href=\"https://metacpan.org/pod/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a> (together with <a href=\"https://metacpan.org/pod/Email::MIME\" rel=\"nofollow noreferrer\">Email::MIME</a>) or <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a>.</p>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 1, "accepted_answer_id": 47205623, "answer_count": 2, "score": 0, "last_activity_date": 1510303782, "creation_date": 1510240362, "last_edit_date": 1510244001, "question_id": 47205299, "link": "https://stackoverflow.com/questions/47205299/sending-a-mail-with-a-dynamic-table-from-perl-script", "title": "Sending a mail with a dynamic table from perl script", "body": "<p>I have the following code in Perl:</p>\n\n<pre><code>foreach my $result ( @results ) {\n    if ( $result-&gt;{Error} ) {\n        print\"No response received \\n\";}  \n    else {\n        my $H =  \"$result-&gt;{H}\";\n        my $I = \"$result-&gt;{I}\";\n        $mailbody.=qq(&lt;h4 style=\"background: blue; color: white;\"&gt;$H---&gt;$I&lt;/h4&gt;);\n\n     } \n}\n</code></pre>\n\n<p>Here, I am using Mime::Lite to send mails:</p>\n\n<pre><code>$msg = MIME::Lite-&gt;new(\n             From     =&gt; $from,\n             To       =&gt; $to,\n             Cc       =&gt; $cc,\n             Subject  =&gt; $subject,\n             Data     =&gt; $mailbody\n             );\n\n$msg-&gt;attr(\"content-type\" =&gt; \"text/html/css\");\n$msg-&gt;send;\n</code></pre>\n\n<p>What I want is that the result data i.e $H and $I to be represented in the form of a table in the mail.</p>\n\n<pre><code>H  |  I\n1  |  46\n2  | 565756756767\n3  | 232132\n</code></pre>\n\n<p>The number of rows of the table are dynamic and depend on the input given by the user. How can I do this?</p>\n"}, {"tags": ["perl", "data-structures"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1510236338, "post_id": 47203736, "comment_id": 81356160, "body": "<code>print Dumper(\\%master)</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1510248099, "post_id": 47203736, "comment_id": 81364951, "body": "I am not sure what the problem is exactly, but for one you need to dereference (and iterate over) at every level.  So instead of <code>%{ $hops{$h}[0] }</code> have <code>for my $e (@{$hops{$h}}) { my %host = %{ $hops{$h}[$e] } .. }</code> (if I got your nesting right).  More to the point, when complex structures get too unwieldy it&#39;s a hint to write a class instead."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510310367, "post_id": 47203736, "comment_id": 81391240, "body": "Any time I see &#39;complex data structure&#39; I think &#39;try writing it as OO&#39;. Because that&#39;s pretty much what OO is <i>for</i>."}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1510418264, "post_id": 47203736, "comment_id": 81430790, "body": "Thanks Zdim I&#39;ll have a go at your approach though I think its something I&#39;ve attempted..chances are my syntax was slightly off!"}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1510418499, "post_id": 47203736, "comment_id": 81430869, "body": "Yeah Sobrique changing it to OO was done however once a hop object was defined I had the same issue of iterating through each IP and FREQ contained under that hop. There&#39;s a design pattern I need to apply here but it&#39;s escaping my mind.."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "is_accepted": true, "score": 0, "last_activity_date": 1510586757, "creation_date": 1510586757, "answer_id": 47267803, "question_id": 47203736, "link": "https://stackoverflow.com/questions/47203736/perl-complex-data-structure/47267803#47267803", "title": "Perl - &quot;Complex&quot; Data Structure", "body": "<p>Thanks for your advice it got me halfway there. It works now (in still somewhat a convoluted fashion!) :</p>\n\n<pre><code>sub identifyNode\n{\n    my %hops = %{$_[0]};\n    my $i = 0;\n    my @fin_nodes;\n    my $hindex;\n\n    foreach my $h ( keys %hops )                   #The HOP-INDEX is the key\n    {\n            $hindex = $h;\n\n            foreach my $e (@{$hops{$h}})       #first part of solution credit Zdim\n            {\n                    my @host = %{ $e };      #second part of solution\n                    my $hip = $host[0];\n                    my $corelink = `corelinks $hip`;\n                    my ($node) = $corelink =~ /([a-z0-9-]+),[a-z0-9-\\/]+,$hip/s;\n                    print \"\\n\\t\\t\\tHostname is $node\\n\";\n\n                    push (@fin_nodes, [$node, $hindex, $e-&gt;{$hip}-&gt;{FREQ}]);\n            }\n            $i++;\n    }\n    return (\\@fin_nodes);\n}\n</code></pre>\n\n<p>Am I brave enough to add  the data as a hash to @fin_nodes.. hmm </p>\n"}], "owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 1, "accepted_answer_id": 47267803, "answer_count": 1, "score": 0, "last_activity_date": 1510586757, "creation_date": 1510235912, "question_id": 47203736, "link": "https://stackoverflow.com/questions/47203736/perl-complex-data-structure", "title": "Perl - &quot;Complex&quot; Data Structure", "body": "<p>I'm trying to get a workable data structure that I can pull the element values from in a sensible fashion. Just having great difficulty working with the data once its in the structure. This is how the struct is built:</p>\n\n<pre><code>sub hopCompare\n{\n\n    my %count;\n    my %master;\n    my $index = 0;\n\n    foreach my $objPath (@latest)    #get Path object out of master array\n    {\n            my @path = @{$objPath-&gt;_getHopList()}; #dereferencing\n            my $iter = 0;\n            foreach my $hop (@path)\n            {\n\n                    ++$count{$hop}-&gt;{FREQ};\n                    $count{$hop}-&gt;{INDEX} = $index;\n                    $count{$hop}-&gt;{NODE} = $hop;\n\n                    $index++;\n\n            }\n            $index = 0;\n    }\n    foreach my $element( keys %count )\n    {\n            if (defined($count{$element}-&gt;{NODE}))\n            {\n                    my $curr = $count{$element}-&gt;{INDEX};\n                    my $freq = $count{$element}-&gt;{FREQ};\n                    if (($freq &gt; 1) || ($count{$element}-&gt;{INDEX} =~ /[0-1]/))\n                    {\n                            push @{ $master{$curr} }, {$count{$element}-&gt;{NODE}, {FREQ =&gt; $count{$element}-&gt;{FREQ}}};\n                    }\n                    print \"$element = $count{$element}\\n\";\n                    print \"$element Index = $count{$element}-&gt;{INDEX}\\n\";\n            }\n    }\n    print \"\\n Master contains: \\n\" . Dumper (%master);\n    if (%master){return %master;} else {die \"NO FINAL HOPS MATCHED\";}\n</code></pre>\n\n<p>}</p>\n\n<p>Producing this structure:</p>\n\n<p>%Master contains:</p>\n\n<pre><code>$VAR1 = '4';\n$VAR2 = [\n      {\n        '1.1.1.2' =&gt; {\n                              'FREQ' =&gt; 2\n                            }\n      }\n    ];\n$VAR3 = '1';\n$VAR4 = [\n      {\n        '1.1.1.9' =&gt; {\n                              'FREQ' =&gt; 5\n                            }\n      },\n      {\n        '1.1.1.8' =&gt; {\n                              'FREQ' =&gt; 1\n                            }\n      }\n    ];\n\n    {truncated}\n</code></pre>\n\n<p>Although ideally the structure should look like this but I had even less joy trying to pull data out at sub identifyNode:</p>\n\n<pre><code>$VAR1 = {\n      '1' =&gt; [\n               {\n                 '1.1.1.9' =&gt; {\n                                       'FREQ' =&gt; 5\n                                     }\n               },\n               {\n                 '1.1.5.8' =&gt; {\n                                       'FREQ' =&gt; 1\n                                     }\n               }\n             ],\n</code></pre>\n\n<p>Then to get back at the data in another method I'm using:</p>\n\n<pre><code> sub identifyNode\n {\n    my %hops = %{$_[0]};\n    my $i = 0;\n\n    foreach my $h ( keys %hops )                   #The HOP-INDEX is the key\n    {\n            print \"\\n\\$h looks like \\n\" . Dumper ($hops{$h});\n            my %host = %{ $hops{$h}[0] };           #Push the first HASH in INDEX to the %host HASH\n            foreach my $hip (keys %host)\n            {\n                            my $corelink = `corelinks $hip`;\n\n                            my ($node) = $corelink =~ /([a-z0-9-]+),[a-z0-9-\\/]+,$hip/s;\n                            print \"\\n\\t\\t\\tHostname is $node\\n\";\n            }\n            $i++;\n    }\n\n}\n</code></pre>\n\n<p>This then generates:</p>\n\n<pre><code>$h looks like\n$VAR1 = [\n      {\n        '1.1.1.2' =&gt; {\n                              'FREQ' =&gt; 2\n                            }\n      }\n    ];\n\n                    Hostname is blabla-bla-a1\n\n$h looks like\n$VAR1 = [\n      {\n        '1.1.1.9' =&gt; {\n                              'FREQ' =&gt; 5\n                            }\n      },\n      {\n        '1.1.1.8' =&gt; {\n                              'FREQ' =&gt; 1\n                            }\n      }\n    ];\n\n                    Hostname is somew-some-a1\n</code></pre>\n\n<p>So for each hash in $h only the topmost host gets evaluated and hostname returned. This is because it is told to do so by the [0] in line:</p>\n\n<pre><code>my %host = %{ $hops{$h}[0] };\n</code></pre>\n\n<p>I've played around with different data structures and de-referencing the structure a multitude of ways and this is the only halfway house I've found...</p>\n\n<p>(The IPs have been obfuscated so are not consistent in my examples)</p>\n"}, {"tags": ["javascript", "html", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1510227528, "post_id": 47200862, "comment_id": 81350101, "body": "It&#39;s only in english here. If you want to communicate in french, you can go to <a href=\"https://www.developpez.net/forums/\" rel=\"nofollow noreferrer\">developpez.net/forums</a>"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510227622, "post_id": 47200862, "comment_id": 81350163, "body": "Oh damn sorry, I will edit my problem ;)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510233173, "post_id": 47202381, "comment_id": 81353807, "body": "Thx for ur help Chris! I&#39;m gonna check this right now :)"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510235355, "post_id": 47202381, "comment_id": 81355504, "body": "What I would like to do now, it&#39;s to post these values in a hash, in a hash, by saving the number of the element. For example"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510235487, "post_id": 47202381, "comment_id": 81355600, "body": "A hash of hash looks like <code>$hash{$somekey}-&gt;{$someotherkey}=$somevalue;</code>, but you&#39;ve only got a key &amp; value. you&#39;re missing the second key"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510235911, "post_id": 47202381, "comment_id": 81355872, "body": "What I would like to do now, it&#39;s to post these values in a hash, in a hash, by saving the number of the element. For example, { 1 =&gt; {type =&gt; &quot;Titre&quot;, value =&gt; &quot;Test&quot;} ...........}  Do u have any solution please? Maybe, my problem is simple to resolve, but I am new in Perl and I don&#39;t master still well tables :/"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510236441, "post_id": 47202381, "comment_id": 81356262, "body": "Not entirely sure what your input is going to look like, but I&#39;ve expanded my answer to include a way of grouping by the number element of the parameter"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510297768, "post_id": 47202381, "comment_id": 81384184, "body": "Hum yeah thanks again for ur answer ! So, if I edit my code like u said me, $field will take the value of my key (for example: &quot;Message&quot;) and $number will take the number of the key ?"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510309019, "post_id": 47202381, "comment_id": 81390279, "body": "Oh ok thx, and this will be my last question, how $field and $number will recover the  value and the number key??  And to what correspond $1 and $2 on the declaration of variables please??"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510310741, "post_id": 47202381, "comment_id": 81391472, "body": "<code>$1</code> and <code>$2</code> are from the regular expression - they match the 2 capture groups in it"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510311791, "post_id": 47202381, "comment_id": 81392123, "body": "Good, ok I understood, I really need to practice, good and fast Perl ! :) Thanks a lot for your simply answers Chris and for taking the time to answer me!! ;)  Would it be possible to come back to you in the next weeks even next days in case of problem with Perl?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510311947, "post_id": 47202381, "comment_id": 81392226, "body": "Just create a new question on here, I&#39;m sure I or one of the other perl coders will see it and be able to help"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510312038, "post_id": 47202381, "comment_id": 81392289, "body": "Ok no problem I will do it ;) Thanks again and have a nice day ! :)"}, {"owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "edited": false, "score": 0, "creation_date": 1510573006, "post_id": 47202381, "comment_id": 81477502, "body": "Hello again everyone, I&#39;m still working on this code, and now the maintainer is asking me to manage data through %hash and to allow a redirection. The maintanier advices me to manage it into a %hash my $fnret = _formatModelPart( \t\t\t\t&#39;data&#39; =&gt; $data2, \t\t\t\t&#39;part&#39; =&gt; $part \t\t\t);                                                                                               It&#39;s the code I have to work on."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1510236408, "last_edit_date": 1510236408, "creation_date": 1510232083, "answer_id": 47202381, "question_id": 47200862, "link": "https://stackoverflow.com/questions/47200862/perl-transform-values-into-a-table/47202381#47202381", "title": "Perl Transform values into a table", "body": "<p>This line gets all the parameter keys from the query</p>\n\n<pre><code>my @params = $query-&gt;param();\n</code></pre>\n\n<p>and <code>$query-&gt;param(\"Titre-1\")</code> would get the value for your example parameter, so one of the ways you could populate your hash is</p>\n\n<pre><code>foreach my $param (@params)\n{\n    $hash{$param}=$query-&gt;param($param);\n}\n</code></pre>\n\n<p>If you want to group by the parameters by the number at the end of them you can use a regular expression to capture the number and the field name like this and then store the parameter value in a hash of hashes.</p>\n\n<pre><code>if($param =~ /^(.*)-(\\d+)$/)\n{\n    my $field=$1;\n    my $number=$2;\n\n    $hash{$number}-&gt;{$field}=$query-&gt;param($param);\n}\n</code></pre>\n\n<p>and for a query string that looked like <code>Title-1=Something&amp;File-1=something.txt</code>, you would get a data structure like</p>\n\n<pre><code>$VAR1 = {\n          '1' =&gt; {\n                   'Title' =&gt; 'Something',\n                   'File' =&gt; 'something.txt'\n                 }\n        };\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Y9yf.jpg?s=128&g=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/8107271/unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 47202381, "answer_count": 1, "score": 1, "last_activity_date": 1510573196, "creation_date": 1510227415, "last_edit_date": 1510573196, "question_id": 47200862, "link": "https://stackoverflow.com/questions/47200862/perl-transform-values-into-a-table", "title": "Perl Transform values into a table", "body": "<p>We ask me of from the drag and the drop which I have created, to get back the values inserted by the user, but as I am new on Perl, I do not see how can it be done?:/</p>\n\n<p>On the other hand, I have to post these values in the form of a table.</p>\n\n<p>The function to find these values begins from <code>foreach my param ( @params ) {.............. }</code></p>\n\n<p>My person in charge advises me to match these values</p>\n\n<pre>\nEx: VAR1 [\n\n' Titre-1 ' = > 'Test'\n</pre>\n\n<p>.............. And so on.</p>\n\n<pre><code>Code JS:\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var counter = 0;\r\n\r\n    document.addEventListener(\"dragstart\", function(event) {\r\n        // The dataTransfer.setData() method sets the data type and the value of the dragged data\r\n        event.dataTransfer.setData(\"Text\", event.target.id);\r\n\r\n        // Output some text when starting to drag the label element\r\n        document.getElementById(\"action\").innerHTML = \"Vous avez gliss\u00e9 votre \u00e9l\u00e9ment !\";\r\n\r\n        // Change the opacity of the draggable element\r\n        event.target.style.opacity = \"0.4\";\r\n        save = event;\r\n        setTimeout(function() {\r\n            document.getElementById('action').innerHTML = \"\"; }, 2500);\r\n        });\r\n\r\n    // While dragging the label element, change the color of the output text\r\n    document.addEventListener(\"drag\", function(event) {\r\n        document.getElementById(\"action\").style.color = \"#CD5C5C\";\r\n    });\r\n\r\n    // Output some text when finished dragging the label element and reset the opacity\r\n    document.addEventListener(\"dragend\", function(event) {\r\n        if(event.target.className == \"drop-target\") {\r\n            document.getElementById(\"action\").innerHTML = \"Vous avez bien d\u00e9pos\u00e9 votre \u00e9l\u00e9ment !\";\r\n        }\r\n       /* else if(event.target.className == \"drop-target-Titre\") {\r\n            document.getElementById(\"action\").innerHTML = \"Vous avez bien d\u00e9pos\u00e9 votre titre !\";\r\n        }\r\n        else if(event.target.className == \"drop-target-Message\") {\r\n            document.getElementById(\"action\").innerHTML = \"Vous avez bien d\u00e9pos\u00e9 votre message !\";\r\n        }\r\n        else if(event.target.className == \"drop-target-Image\") {\r\n            document.getElementById(\"action\").innerHTML = \"Vous avez bien d\u00e9pos\u00e9 votre image !\";\r\n        }\r\n        else if(event.target.className == \"drop-target-Lien\") {\r\n            document.getElementById(\"action\").innerHTML = \"Vous avez bien d\u00e9pos\u00e9 votre lien !\";\r\n        }*/\r\n        event.target.style.opacity = \"1\";\r\n        document.getElementById(\"action\").style.color = \"#CD5C5C\";\r\n\r\n        setTimeout(function() {\r\n            document.getElementById('action').innerHTML = \"\"; }, 2500);\r\n    });\r\n\r\n\r\n    /* Events fired on the drop target */\r\n\r\n    // When the draggable label element enters the droptarget, change the DIVS's border style\r\n    document.addEventListener(\"dragenter\", function(event) {\r\n        if ( event.target.className == \"drop-target\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n        }\r\n        else if(event.target.className == \"drop-target-1\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre \u00e9l\u00e9ment ! \";\r\n        }\r\n        else if(event.target.className == \"drop-target-2\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre \u00e9l\u00e9ment ! \";\r\n        }\r\n        else if(event.target.className == \"drop-target-3\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre \u00e9l\u00e9ment ! \";\r\n        }\r\n        else if(event.target.className == \"drop-target-4\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre \u00e9l\u00e9ment ! \";\r\n        }\r\n        else if(event.target.className == \"drop-target-phone\" &amp;&amp; save.target.id == \"numtel\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre n\u00b0 de t\u00e9l\u00e9phone !\";\r\n        }\r\n        else if (event.target.className == \"drop-target-mail\" &amp;&amp; save.target.id == \"mail\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre mail !\";\r\n        }\r\n        else if(event.target.className == \"drop-target-contact\" &amp;&amp; save.target.id == \"contact\") {\r\n            event.target.style.border = \"3px dotted #483D8B\";\r\n            document.getElementById(\"action\").innerHTML = \"Vous \u00eates au bon endroit pour ins\u00e9rer votre nom et pr\u00e9nom !\";\r\n        }\r\n\r\n        setTimeout(function() {\r\n            document.getElementById('action').innerHTML = \"\"; }, 2500);\r\n    });\r\n\r\n    // By default, data/elements cannot be dropped in other elements. To allow a drop, we must prevent the default handling of the element\r\n    document.addEventListener(\"dragover\", function(event) {\r\n        event.preventDefault();\r\n    });\r\n\r\n    // When the draggable label element leaves the droptarget, reset the DIVS's border style\r\n    document.addEventListener(\"dragleave\", function(event) {\r\n        if(event.target.className == \"drop-target\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if(event.target.className == \"drop-target-1\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if(event.target.className == \"drop-target-2\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if(event.target.className == \"drop-target-3\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if(event.target.className == \"drop-target-4\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if (event.target.className == \"drop-target-phone\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if (event.target.className == \"drop-target-mail\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n        else if (event.target.className == \"drop-target-contact\") {\r\n            event.target.style.border = \"\";\r\n        }\r\n    });\r\n\r\n    /* On drop - Prevent the browser default handling of the data (default is open as link on drop)\r\n       Reset the color of the output text and DIV's border color\r\n       Get the dragged data with the dataTransfer.getData() method\r\n       The dragged data is the id of the dragged element (\"drag1\")\r\n       Append the dragged element into the drop element\r\n    */\r\n    /*document.addEventListener(\"drop\", function(event) {\r\n        event.preventDefault();\r\n        if ( event.target.className == \"drop-target-Titre\" ) {\r\n            document.getElementById(\"action\").style.color = \"\";\r\n            event.target.style.border = \"\";       \r\n            var data = event.dataTransfer.getData(\"Text\");\r\n                switch (data) {\r\n                    case 'Titre':\r\n                        $('.drop-target').append(\"&lt;div class='col-sm-12' droppable='false' id='deletetitle\"+ counter+\"' ondblclick='supprimer(this,\\\"titre\\\")'&gt; &lt;span style='font-style: italic; margin-right: 5%; font-size: 16px'&gt;Votre titre :&lt;/span&gt; &lt;input type='text' name='TitreCli' style='margin-right: 25%; width: 250px; height: 30px; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n                        break;\r\n                    case 'Texte':\r\n                        $('.drop-target').append(\"&lt;div class='col-sm-12' droppable='false' id='deletetext\"+ counter+\"' ondblclick='supprimer(this,\\\"texte\\\")'&gt; &lt;span style='font-style: italic; margin-right: 15%; font-size: 16px;'&gt;Votre message : &lt;/span&gt; &lt;textarea name='MessageCli' style='margin-right: 25%; max-height: 50px; max-width: 500px; background-color: #F5F5DC'&gt;&lt;/textarea&gt;&lt;/div&gt;\");\r\n                        break;\r\n                    case 'Image':\r\n                        $('.drop-target').append(\"&lt;div class='col-sm-12' droppable='false' id='deleteimage\"+ counter+\"' ondblclick='supprimer(this,\\\"image\\\")'&gt; &lt;span style='font-style: italic; margin-right: 24.5%; font-size: 16px'&gt;Votre image : &lt;/span&gt; &lt;input type='text' name='ImageCli' style='margin-right: 25%; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;div&gt;\");\r\n                        break;\r\n                    case 'Lien':\r\n                        $('.drop-target').append(\"&lt;div class='col-sm-12' droppable='false' id='deletelink\"+ counter+\"' ondblclick='supprimer(this,\\\"lien\\\")'&gt; &lt;span style='font-style: italic; margin-right: 40%; font-size: 16px'&gt; Votre lien : &lt;/span&gt; &lt;input type='text' name='LienCli' style='margin-left: -12%; margin-right: 20%; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;div&gt;\");\r\n                        break;\r\n                }\r\n            counter ++;\r\n        }\r\n                \r\n        });*/\r\n\r\n    document.addEventListener(\"drop\", function(event) {\r\n        event.preventDefault();\r\n        if(event.target.className == \"drop-target-1\") {\r\n            $('.drop-target-1').append(\"&lt;div class='col-sm-12' droppable='false' id='\"+ save.target.id +\"-1' ondblclick='deleteContents(this,\\\"\" + save.target.id+\"\\\")'&gt; &lt;span&gt;Votre \" + save.target.id +\" :&lt;/span&gt; &lt;input type='text' id='\"+ save.target.id +\"-1'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if(event.target.className == \"drop-target-2\") {\r\n            $('.drop-target-2').append(\"&lt;div class='col-sm-12' droppable='false' id='\"+ save.target.id +\"-2' ondblclick='deleteContents(this,\\\"\" + save.target.id+\"\\\")'&gt; &lt;span&gt;Votre \" + save.target.id +\" :&lt;/span&gt; &lt;input id='\"+ save.target.id+\"-2'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if(event.target.className == \"drop-target-3\") {\r\n            $('.drop-target-3').append(\"&lt;div class='col-sm-12' droppable='false' id='\"+ save.target.id+\"-3' ondblclick='deleteContents(this,\\\"\" + save.target.id+\"\\\")'&gt; &lt;span&gt;Votre \" + save.target.id+\" :&lt;/span&gt; &lt;input type='text' id='\"+ save.target.id+\"-3'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if(event.target.className == \"drop-target-4\") {\r\n            $('.drop-target-4').append(\"&lt;div class='col-sm-12' droppable='false' id='\"+ save.target.id+\"-4' ondblclick='deleteContents(this,\\\"\" + save.target.id+\"\\\")'&gt; &lt;span&gt;Votre \"+ save.target.id+\" :&lt;/span&gt; &lt;input type='text' id='\"+ save.target.id+\"-4'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if (event.target.className == \"drop-target-phone\" &amp;&amp; save.target.id == \"numtel\") {\r\n            $('.drop-target-phone').append(\"&lt;div class='col-sm-4' droppable='false' id='telcli' ondblclick='deleteContents(this,\\\"t\u00e9l\u00e9phone\\\")' style='width: 175px; height: 80px;'&gt; &lt;span style='font-style: italic; margin-right: 8%; font-size: 16px; text-align: center'&gt; T\u00e9l\u00e9phone :&lt;/span&gt; &lt;input type='text' id='telcli' style='margin-right: 5%; width: 150px; height: 30px; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if (event.target.className == \"drop-target-mail\" &amp;&amp; save.target.id == \"mail\") {\r\n            $('.drop-target-mail').append(\"&lt;div class='col-sm-4' droppable='false' id='mailcli' ondblclick='deleteContents(this,\\\"mail\\\")' style='width: 175px; height: 80px'&gt; &lt;span style='font-style: italic; margin-right: 8%; font-size: 16px; text-align: center'&gt; Mail :&lt;/span&gt; &lt;input type='text' id='mailcli' style='margin-right: 5%; width: 150px; height: 30px; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        }\r\n        else if (event.target.className == \"drop-target-contact\" &amp;&amp; save.target.id == \"contact\") {\r\n            $('.drop-target-contact').append(\"&lt;div class='col-sm-4' droppable='false' id='contactcli' ondblclick='deleteContents(this,\\\"contact\\\")' style='width: 175px; height: 80px'&gt; &lt;span style='font-style: italic; margin-right: 8%; font-size: 16px; text-align: center'&gt; Contact :&lt;/span&gt; &lt;input type='text' id='contactcli' style='margin-right: 5%; width: 150px; height: 30px; background-color: #F5F5DC'&gt;&lt;/input&gt;&lt;/div&gt;\");\r\n        };\r\n        event.target.style.border = \"\";\r\n    });\r\n\r\n    function deleteContents(nom, argument) {\r\n        $(nom).remove();\r\n        document.getElementById(\"action\").innerHTML = \"Vous avez bien supprim\u00e9 votre \" +argument+\" !\";\r\n        setTimeout(function() {\r\n            document.getElementById(\"action\").innerHTML = \"\"; }, 2500);\r\n        };\r\n\r\n/*function preview() {\r\n        var toPrint = document.getElementById('previewarea');\r\n        var popupWin = window.open('', '_blank', 'width=400,height=700,location=no,left=200px');\r\n        \r\n        popupWin.document.open();\r\n    popupWin.document.write('&lt;html&gt;&lt;title&gt;::PrintPreview::&lt;/title&gt;&lt;body&gt;&lt;p&gt;Vos donn\u00e9es ont bien \u00e9t\u00e9 enregistr\u00e9es !&lt;/p&gt;&lt;/body\"&gt;');\r\n        popupWin.document.write('&lt;/html&gt;');\r\n        popupWin.document.close();\r\n    }*/\r\n\r\nfunction preview(url) {\r\nregex pour le t\u00e9l\u00e9phone /^[(]{0,1}[0-9]{3}[)]{0,1}[-\\s\\.]{0,1}[0-9]{3}[-\\s\\.]{0,1}[0-9]{4}$/; */\r\n\r\n    var myData = {\r\n        'rm':'previewZone',\r\n};\r\n\r\n        var list = document.getElementById(\"drop-target\");\r\n        var y = list.getElementsByTagName(\"input\");\r\n        /*var x = list.getElementsByTagName(\"textarea\");\r\n        for (i=0; i &lt;x.length; i++)\r\n        {\r\n            if(x[i].id)\r\n            {\r\n                myData[x[i].id] = x[i].value;\r\n                /*result = x[i].value;*/\r\n            /*}\r\n        }*/\r\n        for (var i in y)\r\n        {\r\n            if(y[i].id)\r\n            {\r\n                myData[y[i].id] = y[i].value;\r\n            }\r\n        }\r\nconsole.log(myData);\r\n    $.post(url,myData).done(function(data)\r\n    {\r\n        var popupWin = window.open('', '_blank', 'width=400,height=700,location=no,left=200px');\r\n        popupWin.document.open();\r\n        popupWin.document.write('&lt;html&gt;&lt;title&gt;::PrintPreview::&lt;/title&gt;&lt;body&gt;&lt;p&gt;Vos donn\u00e9es ont bien \u00e9t\u00e9 enregistr\u00e9es !&lt;/p&gt;&lt;/body\"&gt;');\r\n        popupWin.document.write('&lt;/html&gt;');\r\n        popupWin.document.close();\r\n        });\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Code Perl:</p>\n\n<pre><code>sub previewZone\n{\n    my $self = shift;\n\n    my $query = $self-&gt;query;\n\n    my $session = $self-&gt;param('session');\n    my $profile = $session-&gt;param('profile');\n\n    my $User = User-&gt;newFromId($profile-&gt;{'uid'});\n    if($User eq 'NOT_FOUND')\n    {\n        return $self-&gt;redirect('index.pl?rm=notfound');\n    }\n\n    my @params = $query-&gt;param();\n\n    my %hash ();\n\n    foreach my $param  (@params)\n    {\n       if($param =~ /([a-zA-Z]*)\\-(\\d)/)\n       {\n          my $field = $1;\n          my $number = $2;\n          $hash{$number}-&gt;{$field} = scalar $query-&gt;param($param) ;\n      }\n    }\n\nprint %hash;\n\n***my $fnret = _formatModelPart(\n            'data' =&gt; $data2,\n            'part' =&gt; $part\n        );***\n\n   if($fnret eq 'FILE_NOT_FOUND' or $fnret eq 'FAILURE' or $fnret eq 'NO_DATA')\n   {\n      return $self-&gt;redirect('index.pl?rm=notfound');\n   }\n\n\n    #foreach ( my ($key, $value) = each @params) {\n    #   print @params, $key . ' =&gt; '. $value;\n    #}\n\n    $log-&gt;info(Dumper(\\@params));\n}\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "oop", "object"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510223654, "post_id": 47198657, "comment_id": 81347578, "body": "<a href=\"http://search.cpan.org/~jdhedden/threads-shared-1.57/lib/threads/shared.pm\" rel=\"nofollow noreferrer\"><code>threads::shared</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1510227401, "post_id": 47200142, "comment_id": 81350003, "body": "<code>threads::shared</code> is a core module since Perl 5.7.3. It cannot share &quot;too complicated&quot; things but the docs are quite clear what is possible and what isn&#39;t."}, {"owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510228250, "post_id": 47200142, "comment_id": 81350581, "body": "... now THAT I didn&#39;t know! I guess this is what happens when your company is stuck with the same Perl version for over a decade... We have just updated our systems to use RHEL 7 and in fact <code>threads::shared</code> is installed by default. Thanks for pointing that out."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510228883, "post_id": 47200142, "comment_id": 81350979, "body": "In case you wonder how I knew so precisely: together with Perl comes the script <a href=\"http://search.cpan.org/~bingos/Module-CoreList-5.20171020/corelist\" rel=\"nofollow noreferrer\"><code>corelist</code></a>. It tells which module is/was a core modules since/until when etc. Try <code>corelist threads::shared</code> and <code>corelist --man</code>. :-)"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1510229126, "post_id": 47200142, "comment_id": 81351115, "body": "I have read <code>thread::shared</code> module completely and I know what it can do and what it cannot. I wanted to know is there a trick or technique to share something little complicated such as array of hash in objects. BTW i am using perl 5.26.1"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 1, "creation_date": 1510229351, "post_id": 47200142, "comment_id": 81351266, "body": "@BalaKrishnan One trick would be to serialize your datastructure as a string (e.g. JSON, Data::Dumper), share the string, and upon access de-serialize it. Slow and cumbersome, but will work."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510230477, "post_id": 47200142, "comment_id": 81351981, "body": "@PerlDuck Innovative! I will give a try and let you know! Thanks! Let me know if you hit any other idea!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1510310534, "post_id": 47200142, "comment_id": 81391340, "body": "Don&#39;t forget <code>Storable</code> as an option for serialisation - <code>freeze</code> <code>thaw</code> work very nicely with <code>Thread::Queue</code>. - it actually handles objects quite well, although it&#39;s not nearly as portable as JSON. (e.g. not binary portable, and might have problems cross platform)"}], "tags": [], "owner": {"reputation": 137, "user_id": 2533201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629d53f972d26843dd019f479b7041a5?s=128&d=identicon&r=PG", "display_name": "Jorge_Freitas", "link": "https://stackoverflow.com/users/2533201/jorge-freitas"}, "is_accepted": false, "score": 2, "last_activity_date": 1510228571, "last_edit_date": 1510228571, "creation_date": 1510225312, "answer_id": 47200142, "question_id": 47198657, "link": "https://stackoverflow.com/questions/47198657/perl-how-to-share-objects-between-threads/47200142#47200142", "title": "Perl - How to share objects between threads", "body": "<p>This happens because Perl doesn't natively share objects - or anything, really - between threads. When Thread2 starts, it gets a copy of the state of the program at that time, and it goes from there. So if Thread1 alters any value after Thread2 was created, this change will only be visible to Thread1.</p>\n\n<p>Now, there are a few ways around that. As @Borodin mentioned, you can use an external library to handle the data exchange for you. If you don't want to depend on an external library, <strike>or if you can't install it for some reason,</strike> you can do it yourself by using something between them to share this data - like a temporary system file, or a database. It's not as complicated as it sounds like, we have implemented that on my company, and it works just fine.</p>\n\n<p>EDIT: as cleverly pointed out by @PerlDuck below, <code>threads::shared</code> has been a core Perl module for quite a while now... </p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1510312474, "post_id": 47221199, "comment_id": 81392578, "body": "I will take a look into the <code>Storable</code> library and come back here! Thanks for the answer Sobrique!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1510311418, "creation_date": 1510311418, "answer_id": 47221199, "question_id": 47198657, "link": "https://stackoverflow.com/questions/47198657/perl-how-to-share-objects-between-threads/47221199#47221199", "title": "Perl - How to share objects between threads", "body": "<p>I would suggest that sharing an object in the first place is not a good idea - it can be done with <code>threads::shared</code> but there's some limitations, and you risk introducing some race conditions.</p>\n\n<p>So instead, I would say - use <code>Thread::Queue</code> to communicate between threads, and use <code>Storable</code> to serialize with <code>freeze</code> and <code>thaw</code>. </p>\n\n<p>This is a somewhat simplistic example, but hopefully illustrates the point? Which is that you're not \"sharing\" objects, but rather just passing them around as serialised data structures. It does breakdown somewhat if instantiating an object does system state changes (like opening a connection to a database or similar) - but that's something that is sort of inherently going to be difficult to do in a threading context. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage MyObject;\n\nsub new {\n   my ( $class, %args ) = @_;\n   my $self = \\%args;\n   bless $self, $class;\n   return $self;\n}\n\nsub get_value {\n   my ( $self, $key ) = @_;\n   return $self-&gt;{$key} // 0;\n}\n\nsub set_value {\n   my ( $self, $key, $value ) = @_;\n   $self-&gt;{$key} = $value;\n}\n\npackage main;\n\nuse threads;\nuse Storable qw ( freeze thaw );\nuse Thread::Queue;\n\nmy $work_q   = Thread::Queue-&gt;new;\nmy $result_q = Thread::Queue-&gt;new;\n\nsub worker {\n   while ( my $serialised = $work_q-&gt;dequeue ) {\n      my $local_obj = thaw $serialised;\n      print threads-&gt;self-&gt;tid, \" is processing object with id \",\n        $local_obj-&gt;get_value('id'), \"\\n\";\n      $local_obj-&gt;set_value( 'processed_by', threads-&gt;self-&gt;tid );\n      $result_q-&gt;enqueue( freeze $local_obj );\n   }\n}\n\nthreads-&gt;create( \\&amp;worker ) for 1 .. 10;\n\nfor ( 1 .. 100 ) {\n   my $obj = MyObject-&gt;new( id =&gt; $_ );\n   $work_q-&gt;enqueue( freeze $obj );\n}\n$work_q-&gt;end;\n$_-&gt;join for threads-&gt;list;\n\nwhile ( my $ser_obj = $result_q-&gt;dequeue_nb ) {\n   my $result_obj = thaw $ser_obj;\n   print \"Object with ID of :\", $result_obj-&gt;get_value('id'),\n     \" was processed by thread \", $result_obj-&gt;get_value('processed_by'),\n     \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510311418, "creation_date": 1510221022, "question_id": 47198657, "link": "https://stackoverflow.com/questions/47198657/perl-how-to-share-objects-between-threads", "title": "Perl - How to share objects between threads", "body": "<p>My script has hash of objects - All of a single class (SampleClass.pm). Following is the way that I used to create objects. </p>\n\n<pre><code>$objectHash{'foo'} = SampleClass-&gt;new();\n$objectHash{'bar'} = SampleClass-&gt;new();\n.\n.\n</code></pre>\n\n<p>Then I spawn few threads (say 5) and each threads does its work as instructed to. </p>\n\n<p>Now say Thread 1 writes to an object -</p>\n\n<pre><code>$objectHash{'foo'}-&gt;settimeWhenISaidHello($time);\n</code></pre>\n\n<p>and exits. Now when Thread2 takes up the work and checks for a value like below</p>\n\n<pre><code>$lastHelloTime = $objectHash{'foo'}-&gt;gettimeWhenISaidHello($time);\n</code></pre>\n\n<p>it gets undefined or empty value. I would like to share such values across threads. How is it possible?</p>\n\n<p>Additionaly, my class constructor <code>new</code> has hashes and array of hashes as member variables like below.</p>\n\n<pre><code>sub new\n{\n.\n.\nlistOfGuysToSayHello = {}; #This is an array with guy name as key and array value as data\nSchoolsWithStudentsToSayHellow = {}; #this is array of hashes\n.\n.\n}\n</code></pre>\n\n<p>Further more I have already gone through this question - <a href=\"https://stackoverflow.com/questions/13413249/how-to-access-perl-objects-in-threads\">how to access perl objects in threads</a> and the answer did not satisy my requirements.</p>\n\n<p>Please let me know your thoughts.</p>\n"}, {"tags": ["xml", "perl", "parsing"], "comments": [{"owner": {"reputation": 11, "user_id": 8912520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be7b9589eb303a0252ed73792c19866?s=128&d=identicon&r=PG&f=1", "display_name": "dominique", "link": "https://stackoverflow.com/users/8912520/dominique"}, "edited": false, "score": 0, "creation_date": 1510220415, "post_id": 47198406, "comment_id": 81345358, "body": "Field &quot;city&quot; I don&#39;t need"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1510220724, "post_id": 47198406, "comment_id": 81345558, "body": "What you are seeing is an error message. It says your input file is not valid XML."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510220951, "post_id": 47198406, "comment_id": 81345713, "body": "If you don&#39;t know enough to even stand a chance of writing a program on your own then Stack Overflow isn&#39;t the place to look for help. This isn&#39;t a free code writing service. The usual approach is to employ someone who knows what they&#39;re doing to do the work for you. There isn&#39;t another profession where you would attempt begging on line for free work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510221011, "post_id": 47198406, "comment_id": 81345756, "body": "In any case, you are starting with invalid XML data, so no one can help you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1510222695, "post_id": 47198406, "comment_id": 81346942, "body": "<code>lib&#47;site_perl&#47;5.8.8</code> - Do yourself a favour and try using a version of Perl that isn&#39;t over ten years old!"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1510292830, "last_edit_date": 1510292830, "creation_date": 1510222593, "answer_id": 47199189, "question_id": 47198406, "link": "https://stackoverflow.com/questions/47198406/read-an-xml-file-with-perl-and-write-in-a-textfile/47199189#47199189", "title": "Read an XML File with Perl and write in a Textfile", "body": "<p>You have invalid XML. To be precise, your XML is \"not well-formed\" (as the error message says).</p>\n\n<p>The problem is that <code>&lt; employee&gt;</code> is not a valid XML tag. You cannot have spaces in XML element names - so this should probably be <code>&lt;employee&gt;</code>.</p>\n\n<p>I don't know where this XML file comes from, but it is not XML. You should go to whoever is supplying this file to you and ask them to ensure their XML is well-formed before sending to.</p>\n\n<p>(There's another problem in your sample XML - spaces on the first line before the <code>&lt;!xml ...&gt;</code> declaration. But, given the error message you're getting, I think that's a typo you've made when posting your question here.)</p>\n\n<p><strong>Update:</strong> It isn't causing your current problem, but if you're getting the XML file fixed, you might ask them to fix the way that multiple employees are presented. I'd expect to see something like this:</p>\n\n<pre><code>&lt;?xml version='1.0'?&gt;\n&lt;employees&gt;\n  &lt;employee&gt;\n    &lt;name&gt;John Doe&lt;/name&gt;\n    &lt;age&gt;43&lt;/age&gt;\n    &lt;sex&gt;M&lt;/sex&gt;\n    &lt;department&gt;Operations&lt;/department&gt;\n    &lt;city&gt;New York&lt;/city&gt;\n  &lt;/employee&gt;\n  &lt;employee&gt;\n    &lt;name&gt;David Street&lt;/name&gt;\n    &lt;age&gt;25&lt;/age&gt;\n    &lt;sex&gt;M&lt;/sex&gt;\n    &lt;department&gt;Sales&lt;/department&gt;\n    &lt;city&gt;San Diego&lt;/city&gt;  \n  &lt;/employee&gt;\n&lt;/employees&gt;\n</code></pre>\n\n<p>See, I now have a separate <code>&lt;employee&gt;</code> element for each person, and they are all under a new <code>&lt;employees&gt;</code> element.</p>\n\n<p>All in all, it looks like your input file has been created by someone who knows nothing about XML :-)</p>\n"}], "owner": {"reputation": 11, "user_id": 8912520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be7b9589eb303a0252ed73792c19866?s=128&d=identicon&r=PG&f=1", "display_name": "dominique", "link": "https://stackoverflow.com/users/8912520/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510292830, "creation_date": 1510220318, "last_edit_date": 1510222843, "question_id": 47198406, "link": "https://stackoverflow.com/questions/47198406/read-an-xml-file-with-perl-and-write-in-a-textfile", "title": "Read an XML File with Perl and write in a Textfile", "body": "<p>I am trying to create a Textfile with Perl. I have an XML File which needs to be read by my Perl script. And after this it has to create a Textfile. I searched a lot in the net but can't find anything. Maybe you can support me here.</p>\n\n<p>This is my Perl script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse XML::Parser;\n\nmy $file = 'data.xml';\nmy $count = '0';\nmy $parser = new XML::Parser(ErrorContext =&gt; 100000000000000000);\n\n$parser-&gt;setHandlers(Char =&gt; \\&amp;char_handler, Default =&gt; \\&amp;default_handler);\n\n$parser-&gt;parsefile($file);\n\nprint \"Found $count comments.\\n\";\n\nsub default_handler {\n    my ($p, $data) = @_;\n\n    if ($data =~ /^&lt;!--/) {\n        my $line = $p-&gt;current_line;\n        $data =~ s/\\n/\\n\\t/g;\n        print \"$line:\\t$data\\n\";\n        $count++;\n    }\n}\n</code></pre>\n\n<p>This is my XML File:</p>\n\n<pre><code>&lt;?xml version='1.0'?&gt;\n&lt; employee&gt;\n    &lt;name&gt;John Doe&lt;/name&gt;\n    &lt;age&gt;43&lt;/age&gt;\n    &lt;sex&gt;M&lt;/sex&gt;\n    &lt;department&gt;Operations&lt;/department&gt;\n    &lt;city&gt;New York&lt;/city&gt;\n    &lt;name&gt;David Street&lt;/name&gt;\n    &lt;age&gt;25&lt;/age&gt;\n    &lt;sex&gt;M&lt;/sex&gt;\n    &lt;department&gt;Sales&lt;/department&gt;\n    &lt;city&gt;San Diego&lt;/city&gt;  \n&lt; /employee&gt;\n</code></pre>\n\n<p>When I run the Script I get following:</p>\n\n<pre><code>&gt;perl print.pl\n\nnot well-formed (invalid token) at line 2, column 1, byte 23:\n&lt;?xml version='1.0'?&gt;\n&lt; employee&gt;\n^\n        &lt;name&gt;John Doe&lt;/name&gt;\n        &lt;age&gt;43&lt;/age&gt;\n        &lt;sex&gt;M&lt;/sex&gt;\n        &lt;department&gt;Operations&lt;/department&gt;\n        &lt;city&gt;New York&lt;/city&gt;\n        &lt;name&gt;David Street&lt;/name&gt;\n        &lt;age&gt;25&lt;/age&gt;\n        &lt;sex&gt;M&lt;/sex&gt;\n        &lt;department&gt;Sales&lt;/department&gt;\n        &lt;city&gt;San Diego&lt;/city&gt;\n&lt; /employee&gt;\nat /opt/GSBperl/lib/site_perl/5.8.8/i86pc-solaris-64int/XML/Parser.pm line 187\n</code></pre>\n\n<p>This not what I need. I need a File which has this format.</p>\n\n<pre><code>John Doe;43;M;Operations\nDavid Street;25;M;Sales\n</code></pre>\n\n<p>Field  I don't need.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510220568, "post_id": 47197759, "comment_id": 81345454, "body": "What is <code>GT::AutoLoader</code>? Is it your own library? That <code>eval</code> expression is odd, but I guess it should work. The error is presumably in whatever the <code>$COMPILE-&gt;{$func}</code> hash element expands to. Rather than printing individual variables, please print the string that is <code>eval</code>ed to make it clearer what is happening. <code>my $code = &quot;package $pkg;\\n#line $linenum$pkg\\::$func\\n$COMPILE-&gt;{$func}&quot;; print &quot;&lt;&lt;$code&gt;&gt;\\n&quot;; eval $code;</code>"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510220896, "post_id": 47197759, "comment_id": 81345680, "body": "@Borodin thanks - yeah it is weird, but it was working fine which is the oddest part. I&#39;ve updated the question with the debug of <code>print qq|package $pkg;\\n#line $linenum$pkg\\::$func\\n$COMPILE-&gt;{$func}\\n|;</code>. Oh, and GT::AutoLoader is part of a script called <code>Gossamer Links</code> (not something I wrote)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510221336, "post_id": 47197759, "comment_id": 81345968, "body": "Perhaps something in <a href=\"https://stackoverflow.com/a/42183690/4653379\">this page</a> can help"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510221507, "post_id": 47197759, "comment_id": 81346087, "body": "There&#39;s no assignment in that code except to lexical variable <code>$ineval</code>. I think we&#39;re looking in the wrong place."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510221610, "post_id": 47197759, "comment_id": 81346176, "body": "@Borodin yes maybe. I did comment a bit before, around <code>my $output = $code-&gt;($self);</code>. The error message really isn&#39;t that helpful with the location/line numbers either :("}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1510221690, "post_id": 47197759, "comment_id": 81346242, "body": "@zdim thanks - the problem is that this is coming from the core modules (that were working fine). All the user front end is ok, its just this admin.cgi script that&#39;s being weird"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510223090, "post_id": 47197759, "comment_id": 81347196, "body": "If it were that <code>eval</code> then, because of the <code>#line</code> directive, the error message would say <code>... at GT::Base::in_eval line 538</code> (the line number will be higher). You need to find the code that is printing the error message (<code>eval</code> prints nothing on its own) and add a full stack trace so that you can see the call chain."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510223400, "post_id": 47197759, "comment_id": 81347400, "body": "@Borodin - yeah - after digging deeper and deeper, I found that the Config file was updated by a script (see my answer below). It was trying to do: <code>FOO: (db_cgi_url) SCALAR(0x250d6e8)</code> - and the fact it was the SCALAR caused it to fatal on <code>$t-&gt;{&quot;cfg_$key&quot;} = $Links::IN-&gt;html_escape($val);</code> ... not the easiest thing to find! Thanks for your help though :)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510223535, "post_id": 47199324, "comment_id": 81347501, "body": "Hah! Well done. Now you need to find <i>what</i> is updating the config"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510223724, "post_id": 47199324, "comment_id": 81347629, "body": "@Borodin yeah! I have a feeling its this from one of the scripts on our mobile version: <code>$CFG-&gt;{db_cgi_url} = &quot;http:&#47;&#47;m.example.com&#47;cgi-bin&#47;links&quot;;</code>. Its a bit of a PITA, because if you update $CFG while a site build is going , mod_perl can cache it and then store the new variable (when you don&#39;t want it to). I think the reason we didn&#39;t have this problem on the old server, was because that script wasn&#39;t run under mod_perl (issues sending emails with sendmail, but this time we are using SMTP on the new server so don&#39;t have that problem)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510223899, "post_id": 47199324, "comment_id": 81347761, "body": "@Borodin I&#39;m just doing a test now and then going to do a build to see if it updates the Data.pm file again (incorrectly). If so, thats where the problem lies :)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510224735, "post_id": 47199324, "comment_id": 81348327, "body": "@Borodin  - yup, that was it! Glad that was found. Not how I expected to spend my morning - oh the joys of coding! ;)"}], "tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": false, "score": 1, "last_activity_date": 1510222961, "creation_date": 1510222961, "answer_id": 47199324, "question_id": 47197759, "link": "https://stackoverflow.com/questions/47197759/modification-of-a-read-only-value-attempted-started-appearing-in-script/47199324#47199324", "title": "Modification of a read-only value attempted started appearing in script", "body": "<p>Ah man - found it! In the site config, it had this weird stuff going on:</p>\n\n<pre><code>'db_cgi_url' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url.' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url..' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url...' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url....' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url.....' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url......' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url.......' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url........' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url.........' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url..........' =&gt; \\'http://m.example.com/cgi-bin/links',\n'db_cgi_url...........' =&gt; \\'http://m.example.com/cgi-bin/links',\n</code></pre>\n\n<p>Something somewhere else must be updating it, without me asking it to. The front end not under mod_perl seemed ok due to the fact it was using a cached version of Data.pm</p>\n\n<p>Thanks everyone!</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510222961, "creation_date": 1510218441, "last_edit_date": 1510220873, "question_id": 47197759, "link": "https://stackoverflow.com/questions/47197759/modification-of-a-read-only-value-attempted-started-appearing-in-script", "title": "Modification of a read-only value attempted started appearing in script", "body": "<p>I'm trying to work out why this error is coming up in a Perl script: </p>\n\n<pre><code>A fatal error has occured:\n\n    Modification of a read-only value attempted at (eval 7) line 10.\n\nPlease enable debugging in setup for more details.\n</code></pre>\n\n<p>When I run it with this from the command line:</p>\n\n<pre><code>perl -d admin.cgi\n</code></pre>\n\n<p>the point it dies is:</p>\n\n<pre><code>&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;A fatal error has occured:&lt;/font&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;pre&gt;Modification of a read-only value attempted at (eval 14)[/home/user/public_html/cgi-bin/links/admin/GT/AutoLoader.pm:128] line 10.\n&lt;/pre&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;Please enable debugging in setup for more details.&lt;/font&gt;&lt;/p&gt;\nModification of a read-only value attempted at (eval 14)[/home/user/web/example.com/public_html/cgi-bin/links/admin/GT/AutoLoader.pm:128] line 10.\nDebugged program terminated.  Use q to quit or R to restart,\n</code></pre>\n\n<p>Looking at the AutoLoader.pm file, I see this on line 128:</p>\n\n<pre><code>eval \"package $pkg;\\n#line $linenum$pkg\\::$func\\n$COMPILE-&gt;{$func}\";\n</code></pre>\n\n<p>If I add in a bit more debug:</p>\n\n<pre><code>print \"FOO: $pkg ($func)\\n\";\n</code></pre>\n\n<p>I then see this when running:</p>\n\n<pre><code>FOO: GT::Template (_call_func)\nFOO: GT::CGI (html_escape)\nFOO: GT::Base (in_eval)\n&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;A fatal error has occured:&lt;/font&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;pre&gt;Modification of a read-only value attempted at (eval 7) line 10.\n&lt;/pre&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;Please enable debugging in setup for more details.&lt;/font&gt;&lt;/p&gt;\nModification of a read-only value attempted at (eval 7) line 10.\n</code></pre>\n\n<p>The script worked fine the whole of yesterday, and I don't think I've changed anything that would cause this- so I'm at a bit of a loss. </p>\n\n<p><strong>UPDATE:</strong> After some more digging, I've found its coming from this line in another module:</p>\n\n<pre><code>my $output = $code-&gt;($self);\n</code></pre>\n\n<p><code>$code</code> seems to be coming from a bit above:</p>\n\n<pre><code>my $root      = $self-&gt;{root};\nmy $full_file = $self-&gt;{root} . '/' . $template;\nmy ($code, $dont_save, $files) = $self-&gt;{opt}-&gt;{print} == 2\n    ? @{$FILE_CACHE_PRINT{$full_file}}{qw/code dont_save files/}\n    : @{$FILE_CACHE{$full_file}}{qw/code dont_save files/};\n</code></pre>\n\n<p><strong>UPDATE 2:</strong> \nAs requested, here is the output from <code>print STDERR qq|package $pkg;\\n#line $linenum$pkg\\::$func\\n$COMPILE-&gt;{$func}\\n|;</code>:</p>\n\n<pre><code>package GT::Base;\n#line 538GT::Base::in_eval\nsub in_eval {\n# -------------------------------------------------------\n# Current perl has a variable for it, old perl, we need to look\n# through the stack trace. Ugh.\n#\n    my $ineval;\n    if ($] &gt;= 5.005 and !MOD_PERL) { $ineval = defined($^S) ? $^S : (stack_trace('GT::Base',1) =~ /\\(eval\\)/) }\n    elsif (MOD_PERL) {\n        my $stack = stack_trace('GT::Base', 1);\n        $ineval = $stack =~ m{\n            \\(eval\\)\n            (?!\n                \\s+called\\ at\\s+\n                (?:\n                    /dev/null\n                |\n                    -e\n                |\n                    /\\S*/(?:Apache2?|ModPerl)/(?:Registry(?:Cooker)?|PerlRun)\\.pm\n                |\n                    PerlHandler\\ subroutine\\ `(?:Apache2?|ModPerl)::Registry\n                )\n            )\n        }x;\n    }\n    else {\n        my $stack = stack_trace('GT::Base', 1);\n        $ineval   = $stack =~ /\\(eval\\)/;\n    }\n    return $ineval;\n}\n\n\n&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;A fatal error has occured:&lt;/font&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;pre&gt;Modification of a read-only value attempted at (eval 7) line 10.\n&lt;/pre&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;font face='Tahoma,Arial,Helvetica' size=2&gt;Please enable debugging in setup for more details.&lt;/font&gt;&lt;/p&gt;\nModification of a read-only value attempted at (eval 7) line 10.\n</code></pre>\n"}, {"tags": ["perl", "utf-8", "header", "mime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510215650, "post_id": 47197002, "comment_id": 81342616, "body": "I&#39;ve got Perl 5.20.1 on Ubuntu installed via perlbrew with Encode 2.89 and Encode::MIME::Header 2.25, and it encodes the full string too."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510215744, "post_id": 47197002, "comment_id": 81342665, "body": "In <a href=\"https://metacpan.org/changes/distribution/Encode#L279\" rel=\"nofollow noreferrer\">metacpan.org/changes/distribution/Encode#L279</a> it talks about being fully compliant to RFC. Maybe that&#39;s where it changed? Still looking though."}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510217721, "post_id": 47197002, "comment_id": 81343783, "body": "So, the author broke backward-compatibility to make it RFC-compliant, maybe? <a href=\"https://github.com/dankogai/p5-encode/issues/105\" rel=\"nofollow noreferrer\">github.com/dankogai/p5-encode/issues/105</a>"}], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510215526, "creation_date": 1510215526, "question_id": 47197002, "link": "https://stackoverflow.com/questions/47197002/how-to-use-encodemimeheader-for-from-header-properly", "title": "How to use Encode::MIME::Header for From header properly?", "body": "<p>When I use <code>Encode::MIME::Header</code> encoding <code>From:</code> header, it somehow encodes entire string including header name:</p>\n\n<pre><code>$ perl -Mutf8 -MEncode -E 'say encode(MIME_Header =&gt; q{From: \"\u5150\u5cf6 \u65b0\" &lt;shin@kojima.org&gt;});'\n=?UTF-8?B?RnJvbTogIuWFkOWztiDmlrAiIDxzaGluQGtvamltYS5vcmc+?=\n</code></pre>\n\n<p>What I expect is:</p>\n\n<pre><code>From: \"=?UTF-8?B?5YWQ5bO2IOaWsA==?=\" &lt;shin@kojima.org&gt;\n</code></pre>\n\n<p>Could someone point me out what's wrong with my code and what should I do.  Is <code>Encode::MIME::Header</code> broken?</p>\n\n<p>Here is my <code>$Encode::VERSION</code>:</p>\n\n<pre><code>$ perl -MEncode -E 'say $Encode::VERSION;'\n2.93\n</code></pre>\n\n<p>I'm sure that <code>Encode::MIME::Header</code> was not like that before.\nThe system perl from OSX seems pretty sane for me.</p>\n\n<pre><code>$ /usr/bin/perl -Mutf8 -MEncode -E 'say $Encode::VERSION; say encode(MIME_Header =&gt; q{From: \"\u5150\u5cf6 \u65b0\" &lt;shin@kojima.org&gt;});'\n2.49\nFrom: \"=?UTF-8?B?5YWQ5bO2IOaWsA==?=\" &lt;shin@kojima.org&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510215061, "post_id": 47196760, "comment_id": 81342315, "body": "Which book are you using? Is this the O&#39;Reilly Perl Cookbook? Which edition?"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510235651, "post_id": 47196760, "comment_id": 81355706, "body": "2nd edition this is"}], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510235752, "post_id": 47196829, "comment_id": 81355766, "body": "Sorry how does that determine if current selection matches the key n therefore put replacement value?   N why is 1 there??"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510237989, "post_id": 47196829, "comment_id": 81357479, "body": "1 is there because bitwise AND with 1 returns the last bit of the other operand. The replacement happens in the other part of the code, <code>$change{$_} || $_</code>."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510243957, "post_id": 47196829, "comment_id": 81361996, "body": "what I am asking is(because I think I understand how ternary works),  ($i++ &amp; 1) ? $_ : ($change{$_} || $_) says If ($i++ &amp; 1) is true, then $_, if not, ($change{$_})..  I  1) .      is there some doc I can read up on this?"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510244264, "post_id": 47196829, "comment_id": 81362238, "body": "I thought whole point of program was to read another file and if it sees matching word(analysed in this example), replace it w/ analyzed. How does bit wise(which basically determins 1 or 0 based on val of $i being incremented) operation help you see that there is a matching word? That&#39;s the part I don&#39;t understand"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510246685, "post_id": 47196829, "comment_id": 81363997, "body": "Without seeing the input, I can only guess. It seems like there are pairs of words of which only one should be translated."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510271622, "post_id": 47196829, "comment_id": 81376658, "body": "not sure why input is needed. My quesiton is, IF input matches analysed, I don&#39;t know how code itself is matching it??? That&#39;s the part I don&#39;t understand."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1510277643, "post_id": 47196829, "comment_id": 81378263, "body": "Split with a pair of capturing parents in it returns a list that alternates what split normally would return with whatever was captured (in this case, the whitespace).  So the $i++ &amp; 1 ? ... : ... Is to make it do one thing for the whitespace and another for the nonwhitespace"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1510277843, "post_id": 47196829, "comment_id": 81378302, "body": "But this whole thing is bizarre; I don&#39;t know why anyone would ever do this with split instead of s///g"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1510287179, "post_id": 47196829, "comment_id": 81380515, "body": "Sorry @ysth, I have no idea what you are saying"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1510237848, "last_edit_date": 1510237848, "creation_date": 1510214953, "answer_id": 47196829, "question_id": 47196760, "link": "https://stackoverflow.com/questions/47196760/perl-cookbook-fixstyle2-perplexed-by-1/47196829#47196829", "title": "perl cookbook fixstyle2 perplexed by &amp; 1", "body": "<p><code>$i++</code> returns the value of $i and increments $i afterwards. <code>&amp;</code> is the \"bitwise and\" operator, so it takes the before mentioned value of $i and checks its last bit (as 1 in binary is 00..01).</p>\n\n<p>As $i is incremented by 1 in each iteration, in binary its last bit changes from 1 to 0 and vice versa in each step, therefore the expression just determines odd versus even words.</p>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510237848, "creation_date": 1510214580, "question_id": 47196760, "link": "https://stackoverflow.com/questions/47196760/perl-cookbook-fixstyle2-perplexed-by-1", "title": "perl cookbook fixstyle2 perplexed by &amp; 1", "body": "<p>From once again perl cookbook, I know what this program does and I understand most of it but below code is escapes me.\nIt is using basically if else but what is ( $i++ &amp; 1 ) mean??</p>\n\n<pre><code>#!/usr/bin/perl -w\n# fixstyle2 - like fixstyle but faster for many many matches\nuse strict;\nmy $verbose = (@ARGV &amp;&amp; $ARGV[0] eq '-v' &amp;&amp; shift);\nmy %change = ();\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my ($in, $out) = split /\\s*=&gt;\\s*/;\n    next unless $in &amp;&amp; $out;\n    $change{$in} = $out;\n}\nif (@ARGV) {\n    $^I = \".orig\";\n} else {\n    warn \"$0: Reading from stdin\\n\" if -t STDIN;\n}\nwhile (&lt;&gt;) {\n    my $i = 0;\n    s/^(\\s+)// &amp;&amp; print $1;         # emit leading whitespace\n    for (split /(\\s+)/, $_, -1) {   # preserve trailing whitespace\n        print( ($i++ &amp; 1) ? $_ : ($change{$_} || $_));\n    }\n}\n __END__\nanalysed   analyzed\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510212505, "post_id": 47196109, "comment_id": 81341019, "body": "it is so odd.. I know reference but clearly I don&#39;t understand it fully .. thank you so much!!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1510213001, "post_id": 47196109, "comment_id": 81341270, "body": "@user3502374 please see my update. I&#39;ve addressed what I believe has confused you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1510213016, "post_id": 47196109, "comment_id": 81341279, "body": "@Zaid thanks for fixing the typo. I overwrote it accidentally, but fixed it myself afterwards. :)"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1510213143, "post_id": 47196109, "comment_id": 81341350, "body": "No worries. Agree with your last sentence as well: being clever is nice sometimes, but being nice is usually cleverer :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1510213277, "post_id": 47196109, "comment_id": 81341414, "body": "@Zaid a lot of the Perl community people use this kind of ref/deref scheme for their names on Twitter nowadays. I&#39;ve tried finding a reference (pun fully intended) for why they do that, but it seems I&#39;m not in on the joke. Do you know why? I think it would fit this question culturally."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1510213544, "post_id": 47196109, "comment_id": 81341541, "body": "I honestly have no clue"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510218779, "post_id": 47196109, "comment_id": 81344342, "body": "I wonder if the source of the confusion is the bash <code>${expression}</code> construct which looks identical but functions very differently."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1510212950, "last_edit_date": 1510212950, "creation_date": 1510212118, "answer_id": 47196109, "question_id": 47195799, "link": "https://stackoverflow.com/questions/47195799/perl-cookbook-interpolating-functions-within-strings/47196109#47196109", "title": "Perl cookbook \u2014 interpolating functions within strings", "body": "<pre><code>print \\($n + 1)\n</code></pre>\n\n<p>will show you <code>SCALAR(0x24843d0)</code>, which denotes a <em>scalar reference</em>.</p>\n\n<pre><code>${\\($n + 1)}\n</code></pre>\n\n<p>will <em>dereference</em> the scalar ref, turning it into a scalar.</p>\n\n<p>The parentheses <code>()</code> are a bit tricky here. They are the list constructor, so one could think that a reference to a list would give an array reference. But that's not the case. In fact, <code>\\(1, 2, 3)</code> will give you a list of three scalar references. Likewise, <code>\\(1)</code> will be a list of one scalar reference.</p>\n\n<p>This is explained in the <a href=\"https://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\"><em>Making References</em> part of perlref</a>.</p>\n\n<blockquote>\n  <p>Taking a reference to an enumerated list is not the same as using\n  square brackets--instead it's the same as creating a list of\n  references!</p>\n\n<pre><code>@list = (\\$a, \\@b, \\%c);\n@list = \\($a, @b, %c);      # same thing!\n</code></pre>\n</blockquote>\n\n<p>Using this ref/deref construct inside an interpolation is a trick to get Perl executed and more complex expressions evaluated inside of interpolation. Without it, there would be no way to get <code>$n + 1</code>.</p>\n\n<p>But note that this is not the most readable code. It would be preferable to either break the string into pieces like this</p>\n\n<pre><code>my $phrase = \"I have \" . $n + 1 . \" guanacos.\"; # or with single quotes ''\n</code></pre>\n\n<p>or to use <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a>.</p>\n\n<pre><code>my $phrase = sprintf \"I have %d guanacos\", $n + 1; # or with single quotes ''\n</code></pre>\n\n<p>Both of these are way more readable, do the same thing, and there is no measurable difference in how fast they are. Clean code should always be your primary objective. Being clever is nice sometimes, but usually you write code for humans first.</p>\n\n<hr>\n\n<p>You should probably read <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>.</p>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 47196109, "answer_count": 1, "score": 2, "last_activity_date": 1510218543, "creation_date": 1510210920, "last_edit_date": 1510218543, "question_id": 47195799, "link": "https://stackoverflow.com/questions/47195799/perl-cookbook-interpolating-functions-within-strings", "title": "Perl cookbook \u2014 interpolating functions within strings", "body": "<p>I am reading a perl cookbook and see below and wondering why <code>\\</code> is needed here?</p>\n\n<p>I am thinking it should work without it (just like <code>${ somefunction() }</code>   but I do see that it doesn't work without <code>\\</code></p>\n\n<pre><code>$phrase = \"I have ${\\($n + 1)} guanacos.\";\n</code></pre>\n"}, {"tags": ["linux", "shell", "perl", "zentyal"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510212243, "post_id": 47195113, "comment_id": 81340870, "body": "This is most certainly a duplicate question. I am looking for a dupe target and will hammer in a moment."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510212269, "post_id": 47195113, "comment_id": 81340884, "body": "In the meantime, please run <code>man sudo</code> and read that manpage."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510212325, "post_id": 47195113, "comment_id": 81340908, "body": "Relevant:  <a href=\"https://unix.stackexchange.com/q/80344/25912\">unix.stackexchange.com/q/80344/25912</a>, <a href=\"https://serverfault.com/q/166374/156128\">serverfault.com/q/166374/156128</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510212520, "post_id": 47195113, "comment_id": 81341025, "body": "The best target I found is <a href=\"https://stackoverflow.com/q/43898333/1331451\">stackoverflow.com/q/43898333/1331451</a>. The answer fits this question, but not the question it&#39;s written for, and it&#39;s not accepted."}, {"owner": {"reputation": 372, "user_id": 4570769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6190b0776dbb30e34bb4a35feb946406?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Venkat", "link": "https://stackoverflow.com/users/4570769/jay-venkat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510228037, "post_id": 47195113, "comment_id": 81350439, "body": "@simbabque thanks for your reply Sir. I have not found an exact thought what I want to understand. That&#39;s why I post this question. I want to clear my doubt. This shell command was run at a perl script. right? how it is running without prompting the password from user."}, {"owner": {"reputation": 372, "user_id": 4570769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6190b0776dbb30e34bb4a35feb946406?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Venkat", "link": "https://stackoverflow.com/users/4570769/jay-venkat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510228331, "post_id": 47195113, "comment_id": 81350638, "body": "As @Barnard mentioned we can add NoPasswd for certain paths and services. But here I have not made any changes in sudoers list to make special permissions as without password. Still Zentyal/EBox able to run shell commands. It will be good to know the depth. :)        This is the script from github: <a href=\"https://github.com/zentyal/zentyal/blob/4.0/main/common/src/EBox/Sudo.pm\" rel=\"nofollow noreferrer\">github.com/zentyal/zentyal/blob/4.0/main/common/src/EBox/&hellip;</a>   Line no: 183. All is well :)"}], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1510221283, "last_edit_date": 1510221283, "creation_date": 1510219506, "answer_id": 47198136, "question_id": 47195113, "link": "https://stackoverflow.com/questions/47195113/sudo-command-in-perl-ebox-zentyal/47198136#47198136", "title": "Sudo command in perl/eBox/Zentyal", "body": "<p>This answer gives you an answer to both the <code>sudo</code> and <code>-p sudo:</code> in your command.</p>\n\n<p><code>sudo</code> itself is a privilege command allowing users to execute commands, if allowed in the <code>sudoers</code> file, which generally is not allowed by normal users.</p>\n\n<p>The sudoers file can determine exactly which commands a user is allowed to run.\nTypically these commands can be run by either setting up the sudoers file by either prompting for the user password each time a command is being run, or by adding the NOPASSWD option which allows a user to run sudo commands without having to retype their password.</p>\n\n<p>Example:\na normal user cannot run dmidecode as you will get a access denied.</p>\n\n<pre><code>[user@host ~]$ dmidecode\n# dmidecode 3.0\nScanning /dev/mem for entry point.\n/dev/mem: Permission denied\n</code></pre>\n\n<p>but if allowed in the sudoers file, you can allow the user to run the command as a super user.</p>\n\n<pre><code>[user@host ~]$ sudo dmidecode\n</code></pre>\n\n<p>Here is an example of a sudoers file entry allowing user to only run some <code>dmidecode</code> and <code>sar</code> using sudo, without prompting for password.</p>\n\n<pre><code>user123 ALL=(ALL) NOPASSWD: /usr/sbin/dmidecode, /usr/bin/sar\n</code></pre>\n\n<p>for the <code>-p sudo:</code> part.</p>\n\n<p>The <code>-p</code> (prompt) option allows you to override the default password prompt and use a custom one.  The following percent (\u2018%\u2019) escapes are supported by the sudoers.</p>\n\n<p>In other words in this case it will replace the default prompt for sudo password with the <code>sudo:</code> text.</p>\n\n<p>So as an example, running a command like <code>df -h</code></p>\n\n<pre><code>[user@phost ~]$ sudo df -h\n[sudo] password for host:\n</code></pre>\n\n<p>but when running with <code>-p</code></p>\n\n<pre><code>[user@phost ~]$ sudo -p sudo: df -h\nsudo:\n</code></pre>\n\n<p><strong>TIP!</strong> whenever you need to edit a sudoers file, you need to ensure you never do <code>vi sudoers</code> as it will change file ownership. Always edit a sudoers file by running the <code>visudo</code> command as <code>root</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "is_accepted": false, "score": 1, "last_activity_date": 1573491782, "creation_date": 1573491782, "answer_id": 58805699, "question_id": 47195113, "link": "https://stackoverflow.com/questions/47195113/sudo-command-in-perl-ebox-zentyal/58805699#58805699", "title": "Sudo command in perl/eBox/Zentyal", "body": "<p>The -p according to documentation is for (Use a custom password prompt with optional escape sequences)\nzentyal used the  /usr/bin/sudo -p sudo: just for purpose of testing </p>\n\n<pre><code>Readonly::Scalar our $SUDO_PATH   =&gt; '/usr/bin/sudo -p sudo:'; # our declaration eases testing\n</code></pre>\n\n<p>Because if you change to</p>\n\n<pre><code>/usr/bin/sudo -p anything:\n</code></pre>\n\n<p>The functionality of sudo zentyal is normal.</p>\n\n<p>In you comments you wanted know why zentyal can run any shell system command without prompting the password, is because when you installed zentyal you have to set a user to sudo group or admin (this is similar to sudo group)</p>\n\n<p>Members of the admin group may gain root privileges\n%admin ALL=(ALL) ALL</p>\n\n<p>The last ALL allowed <strong>to run any command</strong></p>\n\n<p>Case related:\n<a href=\"https://forum.zentyal.org/index.php/topic,34663.0.html\" rel=\"nofollow noreferrer\">https://forum.zentyal.org/index.php/topic,34663.0.html</a></p>\n"}], "owner": {"reputation": 372, "user_id": 4570769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6190b0776dbb30e34bb4a35feb946406?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Venkat", "link": "https://stackoverflow.com/users/4570769/jay-venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1573491782, "creation_date": 1510208309, "last_edit_date": 1510221551, "question_id": 47195113, "link": "https://stackoverflow.com/questions/47195113/sudo-command-in-perl-ebox-zentyal", "title": "Sudo command in perl/eBox/Zentyal", "body": "<p>I installed Zentyal 4.0 and looking its scripts how it is functioning.</p>\n\n<p>I saw a perl function to run the shell commands in machine like below</p>\n\n<pre><code>//Ebox::Sudo:root\n</code></pre>\n\n<p>...</p>\n\n<pre><code>/usr/bin/sudo -p sudo: {commands to perform}\n</code></pre>\n\n<p>Can anyone explain what it is meant <code>sudo</code> in the shell?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "for-loop"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1510204332, "creation_date": 1510204332, "answer_id": 47194323, "question_id": 47194210, "link": "https://stackoverflow.com/questions/47194210/how-to-stop-re-evaluation-of-array-in-for-loop/47194323#47194323", "title": "How to stop re-evaluation of array in for loop", "body": "<p>Produce a list to iterate over</p>\n\n<pre><code>@ary = 1..6;\n\nfor $x (eval { @ary }) \n{\n    print $x;\n    @ary = (6,5,4,3,2,1); \n}                          # --&gt; 123456\n</code></pre>\n\n<p>I expect this to be curiosity or experimentation, but let me still comment: if there is a practical goal behind it there are certainly better ways.</p>\n"}, {"comments": [{"owner": {"reputation": 360, "user_id": 404368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a897d60caedf5932405ad21691344c?s=128&d=identicon&r=PG", "display_name": "sborsky", "link": "https://stackoverflow.com/users/404368/sborsky"}, "edited": false, "score": 0, "creation_date": 1510258412, "post_id": 47194483, "comment_id": 81370780, "body": "I think he wanted output &#39;123456&#39; though."}], "tags": [], "owner": {"reputation": 1119, "user_id": 145511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a99c5026c0ac0c48f3e89d91f9b1ff?s=128&d=identicon&r=PG", "display_name": "Glenn", "link": "https://stackoverflow.com/users/145511/glenn"}, "is_accepted": false, "score": 0, "last_activity_date": 1510205221, "creation_date": 1510205221, "answer_id": 47194483, "question_id": 47194210, "link": "https://stackoverflow.com/questions/47194210/how-to-stop-re-evaluation-of-array-in-for-loop/47194483#47194483", "title": "How to stop re-evaluation of array in for loop", "body": "<p>I would suggest using the last command if you want to reassign the array and then exit the loop.  The last command will immediately exit the loop.</p>\n\n<pre><code>use feature 'say';\n@arr = (1,2,3,4,5,6);\n\nfor $x (@arr)\n{\n  print $x;\n  if ( 3 == $x ) \n  {\n    @arr = (6,5,4,3,2,1);\n    last;\n  }\n}\n</code></pre>\n\n<p>then @arr will be the assigned array and will not be evaluated.  </p>\n\n<p>Link to information on the last command:\n<a href=\"http://perldoc.perl.org/functions/last.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/last.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1510209019, "creation_date": 1510209019, "answer_id": 47195275, "question_id": 47194210, "link": "https://stackoverflow.com/questions/47194210/how-to-stop-re-evaluation-of-array-in-for-loop/47195275#47195275", "title": "How to stop re-evaluation of array in for loop", "body": "<p>You can make a shallow copy of an array and dereference it,</p>\n\n<pre><code>use feature 'say';\n@arr = (1,2,3,4,5,6);\n\nfor $x (@{[ @arr ]})\n{\n    print $x;\n    @arr = (6,5,4,3,2,1) if $x == 3;\n}\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1510209019, "creation_date": 1510203594, "question_id": 47194210, "link": "https://stackoverflow.com/questions/47194210/how-to-stop-re-evaluation-of-array-in-for-loop", "title": "How to stop re-evaluation of array in for loop", "body": "<pre><code>use feature 'say';\n@arr = (1,2,3,4,5,6);\n\nfor $x (@arr)\n{\n    print $x;\n    @arr = (6,5,4,3,2,1) if $x == 3;\n}\n</code></pre>\n\n<p>For the above code, perl will produce output: <code>123321</code></p>\n\n<p>Is there any way to stop perl re-evaluating the array in the loop so that the output is <code>123456</code> instead?</p>\n"}]